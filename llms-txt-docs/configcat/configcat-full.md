# Configcat Documentation

Source: https://configcat.com/docs/llms-full.txt

---

# ConfigCat Docs

> Learn more on how to use ConfigCat Feature Flags.


## HomePage

Documentation for ConfigCat Feature Flags. ConfigCat is a developer-centric feature flag service with unlimited team size, awesome support, and a reasonable price tag.

- [ConfigCat Docs](https://configcat.com/docs/index.md): Documentation for ConfigCat Feature Flags. ConfigCat is a developer-centric feature flag service with unlimited team size, awesome support, and a reasonable price tag.

### Getting Started

This is a step-by-step guide on how to get started with ConfigCat feature flags and on how to implement feature flags in an application.

- [Getting Started](https://configcat.com/docs/getting-started.md): This is a step-by-step guide on how to get started with ConfigCat feature flags and on how to implement feature flags in an application.

### Main Concepts

This page explains the basics of feature flags and how to use them. Displays how configs, products and settings are organized within the feature flag service.

- [Main Concepts](https://configcat.com/docs/main-concepts.md): This page explains the basics of feature flags and how to use them. Displays how configs, products and settings are organized within the feature flag service.

### Targeting

- [Feature Flag Evaluation](https://configcat.com/docs/targeting/feature-flag-evaluation.md): This document offers an in-depth explanation of how the ConfigCat SDK determines the value of a feature flag.
- [Percentage Options](https://configcat.com/docs/targeting/percentage-options.md): Using Percentage Options, you can define that a certain percentage of users should receive a specific value. This way, you can gradually release a new feature to a subset of users.
- [Targeting Overview](https://configcat.com/docs/targeting/targeting-overview.md): Overview of the ConfigCat targeting feature with examples.
- [Flag Condition (Prerequisite)](https://configcat.com/docs/targeting/targeting-rule/flag-condition.md): A Flag Condition is a condition that is based on the comparison of another feature flag's value and a preset value (comparison value).
- [Segment Condition](https://configcat.com/docs/targeting/targeting-rule/segment-condition.md): Segments allow you to define user groups based on any user attributes. Ideal for beta testing on a certain group of users.
- [Targeting Rule](https://configcat.com/docs/targeting/targeting-rule/targeting-rule-overview.md): Targeting Rules allow you to set different feature flag values for specific users or groups of users in your application.
- [User Condition](https://configcat.com/docs/targeting/targeting-rule/user-condition.md): A User Condition is a condition that is based on the comparison of a user attribute and a preset value (comparison value). It allows you to define Targeting Rules which target users based on their properties.
- [User Object](https://configcat.com/docs/targeting/user-object.md): The User Object is a collection of user attributes that store various pieces of information about a user. The User Object is essential for targeting.

### What is a JSON download?

Learn how the usage & quota works, how the number of config JSON downloads is counted and how to lower your monthly usage.

- [What is a config JSON download?](https://configcat.com/docs/requests.md): Learn how the usage & quota works, how the number of config JSON downloads is counted and how to lower your monthly usage.

### Network Traffic

Network Traffic refers to the data transmitted between your applications and ConfigCat servers.

- [Network Traffic](https://configcat.com/docs/network-traffic.md): Network Traffic refers to the data transmitted between your applications and ConfigCat servers.

### Service Status & Monitoring

- [Service Status & Monitoring](https://configcat.com/docs/service/status.md): To check the current health and status of the service visit//status.configcat.com.

### Plans, Purchase & Billing

This page explains how to purchase ConfigCat plans, how to manage your billing information and how to pay your bill.

- [Plans, Purchase & Billing](https://configcat.com/docs/purchase.md): This page explains how to purchase ConfigCat plans, how to manage your billing information and how to pay your bill.

### Subscription Plan Limits

This page lists the limits of the different ConfigCat subscription plans.

- [Subscription Plan Limits](https://configcat.com/docs/subscription-plan-limits.md): This page lists the limits of the different ConfigCat subscription plans.

### Organization & Roles

You can invite an unlimited number of people to your organization in ConfigCat. Learn how to manage your organization and its roles.

- [Organization & Roles](https://configcat.com/docs/organization.md): You can invite an unlimited number of people to your organization in ConfigCat. Learn how to manage your organization and its roles.

### News & Product Updates

Instead of spamming your mailbox, we're posting news and product updates here.

- [News & Product Updates](https://configcat.com/docs/news.md): Instead of spamming your mailbox, we're posting news and product updates here.

### FAQ

This is a collection of frequently asked questions and the most typical answers from the ConfigCat Support Team.

- [FAQ - Frequently Asked Questions](https://configcat.com/docs/faq.md): This is a collection of frequently asked questions and the most typical answers from the ConfigCat Support Team.

### Glossary

A alphabetical list of terms used around feature management in the context of ConfigCat.

- [Glossary of Terms](https://configcat.com/docs/glossary.md): A alphabetical list of terms used around feature management in the context of ConfigCat.
- [Alpha Testing - The Unsung Hero of Product Development](https://configcat.com/docs/glossary/alpha-testing.md): Let's delve into the nuances of alpha testing and understand its significance in the product development lifecycle.
- [Beta Testing - Navigating the Road to Market Readiness](https://configcat.com/docs/glossary/beta-testing.md): Explore the pivotal role of beta testing in software development and understand how it shapes software for better user experiences and market success.
- [Blue/Green Deployment - Streamlining Software Releases](https://configcat.com/docs/glossary/blue-green-deployment.md): Discover the essence of Blue/Green Deployment and its pivotal role in seamless software updates and rollbacks.
- [CI/CD Pipeline - Streamlining Software Delivery](https://configcat.com/docs/glossary/ci-cd-pipeline.md): Dive into the world of CI/CD pipelines and discover how they revolutionize the software development and deployment process.
- [Continuous Integration - The Backbone of Modern Software Development](https://configcat.com/docs/glossary/continuous-integration.md): Dive into the world of Continuous Integration and discover how it revolutionizes the way code is built and tested in the software development process.
- [DevOps Engineer - The Backbone of Efficient Software Deployment](https://configcat.com/docs/glossary/devops-engineer.md): Discover the pivotal role of a DevOps Engineer in harmonizing software development, deployment, and maintenance for optimal performance and agility.
- [Feature Testing - Tailoring the Ultimate User Experience](https://configcat.com/docs/glossary/feature-testing.md): Explore feature testing, where each version of a feature is thoroughly tested to ensure it delivers the optimal user experience.
- [Multi-Armed Bandit - Optimizing Decisions in Real-Time](https://configcat.com/docs/glossary/multi-armed-bandit.md): Uncover the strategies behind Multi-Armed Bandit algorithms and how they can drive decision-making processes in complex environments.
- [Product Lifecycle Manager â Steering Projects to Success](https://configcat.com/docs/glossary/product-lifecycle-manager.md): Learn how a Product Lifecycle Manager orchestrates the journey of a project from inception to completion, ensuring every phase meets its milestones.
- [Release Manager â Orchestrating Successful Software Deployments](https://configcat.com/docs/glossary/release-manager.md): Discover the pivotal role of a Release Manager in steering the complex software release process towards a seamless and high-quality delivery.
- [Remote Configuration - Agile Adjustments at Your Fingertips](https://configcat.com/docs/glossary/remote-configuration.md): Uncover how remote configuration empowers teams to tweak app features swiftly and securely without the need for new deployments.
- [Smoke Testing - Ensuring the Core of Your Software Stands Strong](https://configcat.com/docs/glossary/smoke-testing.md): Unveil the essentials of smoke testing and its vital role in maintaining the integrity of your application's core functionality.
- [Navigating Type I & Type II Errors in Software Testing](https://configcat.com/docs/glossary/type-i-and-type-ii-errors.md): Understand the implications of Type I and Type II errors in software testing and their importance in delivering reliable applications.
- [Version Control - The Backbone of Successful Software Development](https://configcat.com/docs/glossary/version-control.md): Uncover the critical role of version control in managing and safeguarding your codebase throughout the development lifecycle.
- [What Is a Staging Environment?](https://configcat.com/docs/glossary/what-is-a-staging-environment.md): Understanding Staging Environments for Testing Code, Catching Bugs, and Scaling

### Advanced Guides

- [Polling modes & Caching](https://configcat.com/docs/advanced/caching.md): This section describes how to use the SDK's caching feature. There are three different polling modes available in the ConfigCat SDKs.
- [Command Line Interface (CLI)](https://configcat.com/docs/advanced/cli.md): The ConfigCat Command Line Interface (CLI) connect and match feature flags in your source code with feature flags on the Dashboard.
- [Azure DevOps - Scan your source code for feature flags](https://configcat.com/docs/advanced/code-references/azure-devops.md): This section describes how to use the ConfigCat CLI in Azure DevOps Pipelines
- [Bitbucket Pipe - Scan your source code for feature flags](https://configcat.com/docs/advanced/code-references/bitbucket-pipe.md): This section describes how to use ConfigCat's Bitbucket Pipe
- [Bitrise - Scan your source code for feature flags](https://configcat.com/docs/advanced/code-references/bitrise-step.md): This section describes how to use ConfigCat's Bitrise Step
- [CircleCI Orb - Scan your source code for feature flags](https://configcat.com/docs/advanced/code-references/circleci-orb.md): This section describes how to use ConfigCat's CircleCI Orb
- [GitHub Action - Scan your source code for feature flags](https://configcat.com/docs/advanced/code-references/github-action.md): This section describes how to use ConfigCat's GitHub Action
- [GitLab - Scan your source code for feature flags](https://configcat.com/docs/advanced/code-references/gitlab-ci.md): This section describes how to use the ConfigCat CLI in GitLab CI/CD
- [CLI - Add to CI/CD pipelines manually](https://configcat.com/docs/advanced/code-references/manual.md): This section describes how to use the ConfigCat CLI
- [Scan & Upload Code References Overview](https://configcat.com/docs/advanced/code-references/overview.md): You can integrate the CLI into your CI/CD pipeline or use it with other execution mechanisms like scheduled jobs or VCS push triggered workflows.
- [Config V2 Migration Guide](https://configcat.com/docs/advanced/config-v2-migration-guide.md): A detailed guide on how to migrate from Config V1 to Config V2.
- [Config V2 SDK Compatibility](https://configcat.com/docs/advanced/config-v2-sdk-compatibility.md): This table shows which SDK versions support Config V2.
- [Config V2 Overview](https://configcat.com/docs/advanced/config-v2.md): Config V2 is the next generation of ConfigCat. It comes with a new Dashboard, Public Management API, SDKs and features.
- [Data Governance - CDN](https://configcat.com/docs/advanced/data-governance.md): ConfigCat customers can control the geographic location where their data will be published to. Helps to stay compliant with GDPR and other data protection regulations.
- [MCP Server](https://configcat.com/docs/advanced/mcp-server.md): Use the ConfigCat Model Context Protocol (MCP) server to manage feature flags & configs via the Public Management API directly from AI tools.
- [Details of LaunchDarkly to ConfigCat Translation](https://configcat.com/docs/advanced/migration-from-launchdarkly-translation.md): Details of the LaunchDarkly to ConfigCat translation performed by the "Import from LaunchDarkly" tool.
- [Migration from LaunchDarkly](https://configcat.com/docs/advanced/migration-from-launchdarkly.md): A guide to migration from LaunchDarkly to ConfigCat.
- [Notifications - Webhooks](https://configcat.com/docs/advanced/notifications-webhooks.md): Webhooks are a way to send notifications to your applications about feature flag value changes so you can react to changes quickly.
- [Endpoints](https://configcat.com/docs/advanced/proxy/endpoints.md): HTTP endpoints of the ConfigCat Proxy.
- [gRPC](https://configcat.com/docs/advanced/proxy/grpc.md): gRPC related functionalities of the ConfigCat Proxy.
- [Monitoring](https://configcat.com/docs/advanced/proxy/monitoring.md): Monitoring options of the ConfigCat Proxy.
- [ConfigCat Proxy](https://configcat.com/docs/advanced/proxy/proxy-overview.md): The ConfigCat Proxy allows you to host a feature flag evaluation service in your own infrastructure.
- [Auto-assign Users](https://configcat.com/docs/advanced/team-management/auto-assign-users.md): New users will be automatically added to your organization if you have a verified domain. Here is how to set it up.
- [Domain Verification](https://configcat.com/docs/advanced/team-management/domain-verification.md): In order to use the SAML feature in ConfigCat, you need to verify your domain. Here is a step-by-step guide on how to do that.
- [ADFS Identity Provider](https://configcat.com/docs/advanced/team-management/saml/identity-providers/adfs.md): This is a step-by-step guide on how to set up and configure ADFS as a SAML Identity Provider for your organization.
- [Auth0 Identity Provider](https://configcat.com/docs/advanced/team-management/saml/identity-providers/auth0.md): This is a step-by-step guide on how to set up and configure Auth0 as a SAML Identity Provider for your organization.
- [Entra ID (Azure AD) Identity Provider](https://configcat.com/docs/advanced/team-management/saml/identity-providers/azure-ad.md): This is a step-by-step guide on how to set up and configure Entra ID (Azure AD) as a SAML Identity Provider for your organization.
- [Cloudflare Zero Trust](https://configcat.com/docs/advanced/team-management/saml/identity-providers/cloudflare.md): This is a step-by-step guide on how to set up and configure Cloudflare Zero Trust as a SAML Identity Provider for your organization.
- [Google Identity Provider](https://configcat.com/docs/advanced/team-management/saml/identity-providers/google.md): This is a step-by-step guide on how to set up and configure Google as a SAML Identity Provider for your organization.
- [Okta Identity Provider](https://configcat.com/docs/advanced/team-management/saml/identity-providers/okta.md): This is a step-by-step guide on how to set up and configure Okta as a SAML Identity Provider for your organization.
- [OneLogin Identity Provider](https://configcat.com/docs/advanced/team-management/saml/identity-providers/onelogin.md): This is a step-by-step guide on how to set up and configure OneLogin as a SAML Identity Provider for your organization.
- [SAML SSO Overview](https://configcat.com/docs/advanced/team-management/saml/saml-overview.md): This section is a step-by-step guide on how you can enable SAML Single Sign-On (SSO) for your organization in ConfigCat.
- [(Beta) User Provisioning (SCIM) with Entra ID (Azure AD)](https://configcat.com/docs/advanced/team-management/scim/identity-providers/entra-id.md): This is a step-by-step guide on how to set up and configure Entra ID (Azure AD) as a User provisioning (SCIM) provider for your organization.
- [(Beta) User Provisioning (SCIM) with Okta](https://configcat.com/docs/advanced/team-management/scim/identity-providers/okta.md): This is a step-by-step guide on how to set up and configure Okta as a User provisioning (SCIM) provider for your organization.
- [(Beta) User Provisioning (SCIM) with Onelogin](https://configcat.com/docs/advanced/team-management/scim/identity-providers/onelogin.md): This is a step-by-step guide on how to set up and configure Onelogin as a User provisioning (SCIM) provider for your organization.
- [(Beta) User provisioning (SCIM) Overview](https://configcat.com/docs/advanced/team-management/scim/scim-overview.md): This section is a step-by-step guide on how to configure User provisioning (SCIM) for your Organization in ConfigCat.
- [SSO (Single Sign-On)](https://configcat.com/docs/advanced/team-management/single-sign-on-sso.md): Let you organization members sign in to ConfigCat using 3rd party SSO (Single Sign-On) providers.
- [Team Management Basics](https://configcat.com/docs/advanced/team-management/team-management-basics.md): ConfigCat provides an unlimited number of team members for every subscription plan, even the free one. Here is how to manage your team.
- [Troubleshooting](https://configcat.com/docs/advanced/troubleshooting.md): This section helps you troubleshoot your issues. It's a good idea to double check these before contacting support.

### Zombie Flags

This page explains how to identify and manage Zombie Flags in ConfigCat through the dashboard, email reports, or the Zombie Flags API.

- [Zombie Flags](https://configcat.com/docs/zombie-flags.md): This page explains how to identify and manage Zombie Flags in ConfigCat through the dashboard, email reports, or the Zombie Flags API.

### SDK Reference

- [Android (Java) SDK Reference](https://configcat.com/docs/sdk-reference/android.md): ConfigCat Android SDK Reference. This is a step-by-step guide on how to use feature flags in your Android Java application.
- [ConfigCat package for Laravel](https://configcat.com/docs/sdk-reference/community/laravel.md): ConfigCat package for Laravel. Implement feature flags within your PHP Laravel application using ConfigCat.
- [ConfigCat SDK for Vue.js](https://configcat.com/docs/sdk-reference/community/vue.md): Unofficial Vue SDK for ConfigCat Feature Flags. Based on ConfigCat's JavaScript SDK.
- [C++ SDK Reference](https://configcat.com/docs/sdk-reference/cpp.md): ConfigCat C++ SDK Reference. This is a step-by-step guide on how to use feature flags in your C++ application.
- [Dart (Flutter) SDK Reference](https://configcat.com/docs/sdk-reference/dart.md): ConfigCat Dart (Flutter) SDK Reference. This is a step-by-step guide on how to use feature flags in your Dart (Flutter) apps.
- [.NET SDK Reference](https://configcat.com/docs/sdk-reference/dotnet.md): ConfigCat .NET SDK Reference. This is a step-by-step guide on how to use feature flags in your .NET application.
- [Elixir SDK Reference](https://configcat.com/docs/sdk-reference/elixir.md): ConfigCat Elixir SDK Reference. This is a step-by-step guide on how to use feature flags in your Elixir project.
- [Go SDK Reference](https://configcat.com/docs/sdk-reference/go.md): ConfigCat Go SDK Reference. This is a step-by-step guide on how to use feature flags in your Go applications.
- [Swift (iOS) SDK Reference](https://configcat.com/docs/sdk-reference/ios.md): ConfigCat Swift (iOS) SDK Reference. This is a step-by-step guide on how to use feature flags in your iOS mobile application.
- [Java SDK reference](https://configcat.com/docs/sdk-reference/java.md): ConfigCat Java SDK Reference. This is a step-by-step guide on how to use feature flags in your Java application.
- [Legacy JavaScript (SSR) SDK Reference](https://configcat.com/docs/sdk-reference/js-ssr.md): ConfigCat Legacy JavaScript (SSR) SDK Reference. This is a step-by-step guide on how to use feature flags in your Server-Side-Rendered (SSR) JavaScript application.
- [Legacy JavaScript SDK Reference](https://configcat.com/docs/sdk-reference/js.md): ConfigCat Legacy JavaScript SDK Reference. This is a step-by-step guide on how to use feature flags in your JavaScript applications.
- [Browser (JavaScript) SDK](https://configcat.com/docs/sdk-reference/js/browser.md): ConfigCat Browser (JavaScript) SDK Reference. This is a step-by-step guide on how to use feature flags in your frontend applications and Web Workers running in the browser.
- [Bun SDK](https://configcat.com/docs/sdk-reference/js/bun.md): ConfigCat Bun SDK Reference. This is a step-by-step guide on how to use feature flags in your Bun applications.
- [Chromium Extension SDK](https://configcat.com/docs/sdk-reference/js/chromium-extension.md): ConfigCat Chromium Extension SDK Reference. This is a step-by-step guide on how to use feature flags in your extensions for Chromium-based browsers (Chrome, Edge, etc.)
- [Cloudflare Worker SDK](https://configcat.com/docs/sdk-reference/js/cloudflare-worker.md): ConfigCat Cloudflare Worker SDK Reference. This is a step-by-step guide on how to use feature flags in your Cloudflare Workers.
- [Deno SDK](https://configcat.com/docs/sdk-reference/js/deno.md): ConfigCat Deno SDK Reference. This is a step-by-step guide on how to use feature flags in your Deno applications.
- [Node.js SDK](https://configcat.com/docs/sdk-reference/js/node.md): ConfigCat Node.js SDK Reference. This is a step-by-step guide on how to use feature flags in your Node.js applications.
- [ConfigCat SDK for JavaScript](https://configcat.com/docs/sdk-reference/js/overview.md): ConfigCat SDK for JavaScript Reference. This is a step-by-step guide on how to use feature flags in your JavaScript applications.
- [Kotlin Multiplatform SDK Reference](https://configcat.com/docs/sdk-reference/kotlin.md): ConfigCat Kotlin Multiplatform SDK Reference. This is a step-by-step guide on how to use feature flags in your Kotlin Multiplatform apps.
- [Legacy Node.js SDK Reference](https://configcat.com/docs/sdk-reference/node.md): ConfigCat Legacy Node.js SDK Reference. This is a step-by-step guide on how to use feature flags in your Node.js applications.
- [Using ConfigCat's OpenFeature Provider in Angular](https://configcat.com/docs/sdk-reference/openfeature/angular.md): This is a step-by-step guide on how to use ConfigCat with the OpenFeature Angular SDK.
- [OpenFeature Provider for .NET](https://configcat.com/docs/sdk-reference/openfeature/dotnet.md): ConfigCat OpenFeature Provider for .NET. This is a step-by-step guide on how to use ConfigCat with the OpenFeature .NET SDK.
- [OpenFeature Provider for Go](https://configcat.com/docs/sdk-reference/openfeature/go.md): ConfigCat OpenFeature Provider for Go. This is a step-by-step guide on how to use ConfigCat with the OpenFeature Go SDK.
- [OpenFeature Provider for Java](https://configcat.com/docs/sdk-reference/openfeature/java.md): ConfigCat OpenFeature Provider for Java. This is a step-by-step guide on how to use ConfigCat with the OpenFeature Java SDK.
- [OpenFeature Provider for JavaScript](https://configcat.com/docs/sdk-reference/openfeature/js.md): ConfigCat OpenFeature Provider for JavaScript. This is a step-by-step guide on how to use ConfigCat with the OpenFeature JavaScript SDK.
- [OpenFeature Provider for Kotlin](https://configcat.com/docs/sdk-reference/openfeature/kotlin.md): ConfigCat OpenFeature Provider for Kotlin. This is a step-by-step guide on how to use ConfigCat with the OpenFeature Kotlin SDK.
- [Using ConfigCat's OpenFeature Provider in NestJS](https://configcat.com/docs/sdk-reference/openfeature/nestjs.md): This is a step-by-step guide on how to use ConfigCat with the OpenFeature NestJS SDK.
- [OpenFeature Provider for Node.js](https://configcat.com/docs/sdk-reference/openfeature/node.md): ConfigCat OpenFeature Provider for Node.js. This is a step-by-step guide on how to use ConfigCat with the OpenFeature Node.js SDK.
- [OpenFeature Providers](https://configcat.com/docs/sdk-reference/openfeature/overview.md): List of all supported OpenFeature Providers.
- [OpenFeature Provider for PHP](https://configcat.com/docs/sdk-reference/openfeature/php.md): ConfigCat OpenFeature Provider for PHP. This is a step-by-step guide on how to use ConfigCat with the OpenFeature PHP SDK.
- [OpenFeature Provider for Python](https://configcat.com/docs/sdk-reference/openfeature/python.md): ConfigCat OpenFeature Provider for Python. This is a step-by-step guide on how to use ConfigCat with the OpenFeature Python SDK.
- [Using ConfigCat's OpenFeature Provider in React](https://configcat.com/docs/sdk-reference/openfeature/react.md): This is a step-by-step guide on how to use ConfigCat with the OpenFeature React SDK.
- [OpenFeature Provider for Ruby](https://configcat.com/docs/sdk-reference/openfeature/ruby.md): ConfigCat OpenFeature Provider for Ruby. This is a step-by-step guide on how to use ConfigCat with the OpenFeature Ruby SDK.
- [OpenFeature Provider for Rust](https://configcat.com/docs/sdk-reference/openfeature/rust.md): ConfigCat OpenFeature Provider for Rust. This is a step-by-step guide on how to use ConfigCat with the OpenFeature Rust SDK.
- [OpenFeature Provider for Swift](https://configcat.com/docs/sdk-reference/openfeature/swift.md): ConfigCat OpenFeature Provider for Swift. This is a step-by-step guide on how to use ConfigCat with the OpenFeature Swift SDK.
- [ConfigCat SDK Overview](https://configcat.com/docs/sdk-reference/overview.md): List of all supported technologies like .NET, Java, JavaScript, Node.js, Deno, Bun, Cloudflare Worker, PHP, Python, Ruby, Go, Android, Swift, iOS, Elixir, Dart, Flutter, Angular, React, Vue.js, Chromium Extension, Kotlin Multiplatform, Laravel, Server-Side Rendered apps, etc.
- [PHP SDK Reference](https://configcat.com/docs/sdk-reference/php.md): ConfigCat PHP SDK Reference. This is a step-by-step guide on how to use feature flags in your PHP application.
- [Python SDK Reference](https://configcat.com/docs/sdk-reference/python.md): ConfigCat Python SDK Reference. This is a step-by-step guide on how to use feature flags in your Python application.
- [React SDK Reference](https://configcat.com/docs/sdk-reference/react.md): ConfigCat React SDK Reference. This is a step-by-step guide on how to use feature flags in your React applications.
- [Ruby SDK Reference](https://configcat.com/docs/sdk-reference/ruby.md): ConfigCat Ruby SDK Reference. This is a step-by-step guide on how to use feature flags in your Ruby application.
- [Rust SDK Reference](https://configcat.com/docs/sdk-reference/rust.md): ConfigCat Rust SDK Reference. This is a step-by-step guide on how to use feature flags in your Rust applications.
- [Using the ConfigCat SDK in Unity](https://configcat.com/docs/sdk-reference/unity.md): Using the ConfigCat SDK in Unity. This is a step-by-step guide on how to use feature flags in your Unity project.
- [Unreal Engine SDK Reference](https://configcat.com/docs/sdk-reference/unreal.md): ConfigCat Unreal Engine SDK Reference. This is a step-by-step guide on how to use feature flags in your Unreal Engine project.

### Integrations

- [Amplitude - Add feature flag changes to your charts](https://configcat.com/docs/integrations/amplitude.md): ConfigCat Amplitude integration reference. This is a step-by-step guide on how to use feature flags in your Amplitude project.
- [Bitbucket - Scan your code for feature flag usages](https://configcat.com/docs/integrations/bitbucket.md): ConfigCat Bitbucket Pipe integration. This is a step-by-step guide on how to use the ConfigCat Bitbucket integration to eliminate tech debt in your project.
- [Bitrise - Scan your code for feature flag usages](https://configcat.com/docs/integrations/bitrise.md): ConfigCat Bitrise Step integration. This is a step-by-step guide on how to use the ConfigCat Bitrise integration to eliminate tech debt in your project.
- [CircleCI - Scan your code for feature flag usages](https://configcat.com/docs/integrations/circleci.md): ConfigCat CircleCI Orb. This is a step-by-step guide on how to use the ConfigCat CircleCI Orb to eliminate tech debt in your project.
- [Datadog - Monitor your feature flags events](https://configcat.com/docs/integrations/datadog.md): ConfigCat Datadog integration. This is a step-by-step guide on how to connect the ConfigCat feature flag service events to Datadog.
- [GitHub Action - Scan your code for feature flag usages](https://configcat.com/docs/integrations/github.md): ConfigCat GitHub Action. This is a step-by-step guide on how to use the ConfigCat GitHub Action to eliminate tech debt in your project.
- [Google Analytics - Send feature flag analytics to Google Analytics](https://configcat.com/docs/integrations/google-analytics.md): ConfigCat Google Analytics integration. This is a step-by-step guide on how to send feature flag analytics events to Google Analytics.
- [JetBrains/IntelliJ Plugin - Manage your feature flags from JetBrains/IntelliJ IDEs](https://configcat.com/docs/integrations/intellij.md): ConfigCat IntelliJ IDE Plugin. This is a step-by-step guide on how to use the ConfigCat JetBrains/IntelliJ Plugin to manage feature flags in your IDEs.
- [Jira Cloud Plugin - Manage feature flags from Jira](https://configcat.com/docs/integrations/jira.md): ConfigCat Jira Cloud Plugin. This is a step-by-step guide on how to connect and manage feature flags from Jira Cloud boards.
- [Mixpanel - Monitor your feature flag change events and feature flag analytics](https://configcat.com/docs/integrations/mixpanel.md): ConfigCat Mixpanel integration. This is a step-by-step guide on how to connect the ConfigCat feature flag service events to Mixpanel.
- [monday.com - Manage feature flags from monday](https://configcat.com/docs/integrations/monday.md): ConfigCat monday app. This is a step-by-step guide on how to connect and manage feature flags from monday.com boards and items.
- [Integrations Overview](https://configcat.com/docs/integrations/overview.md): Overview of ConfigCat integrations with platforms like Amplitude, GitHub, Slack, and more.
- [Twilio Segment - Monitor your feature flag change events and feature flag analytics](https://configcat.com/docs/integrations/segment.md): ConfigCat Twilio Segment integration. This is a step-by-step guide on how to connect the ConfigCat feature flag service events to Twilio Segment.
- [Slack - Get notified when a feature flag changes](https://configcat.com/docs/integrations/slack.md): ConfigCat Feature Flags app for Slack. This is a step-by-step guide on how to connect the ConfigCat feature flag service to Slack.
- [Terraform - Manage feature flags from HCL scripts](https://configcat.com/docs/integrations/terraform.md): ConfigCat Terraform provider. This is a step-by-step guide on how to manage feature flags from Terraform using the ConfigCat Terraform provider.
- [Trello Power-Up - Manage feature flags from Trello](https://configcat.com/docs/integrations/trello.md): ConfigCat Trello Power-Up. This is a step-by-step guide on how to connect and manage feature flags from Trello boards and cards.
- [Visual Studio Code - Manage your feature flags from VSCode](https://configcat.com/docs/integrations/vscode.md): ConfigCat Visual Studio Code extension. This is a step-by-step guide on how to use the ConfigCat Visual Studio Code extension to manage feature flags in your project.
- [Zapier Zap - Build feature flag workflows](https://configcat.com/docs/integrations/zapier.md): ConfigCat Zapier integration. This is a step-by-step guide on how to use the ConfigCat Zapier integration to connect manage features from thousands of Zapier apps.
- [Zoho Flow - Automate your feature flag workflows](https://configcat.com/docs/integrations/zoho-flow.md): ConfigCat Zoho Flow integration. This is a step-by-step guide on how to use the ConfigCat Zoho Flow integration to manage features using Zoho Flow apps.

### Public Management API

- [Groups](https://configcat.com/docs/api/category/scim/groups.md)
- [Service provider config](https://configcat.com/docs/api/category/scim/service-provider-config.md)
- [Users](https://configcat.com/docs/api/category/scim/users.md)
- [Update Member Permissions](https://configcat.com/docs/api/reference/add-member-to-group.md): This endpoint updates the permissions of a Member identified by the `userId`.
- [Audit logs](https://configcat.com/docs/api/reference/audit-logs.md): Audit logs
- [Code References](https://configcat.com/docs/api/reference/code-references.md): Code References
- [ConfigCat Public Management API](https://configcat.com/docs/api/reference/configcat-public-management-api.md): The purpose of this API is to access the ConfigCat platform programmatically.
- [Configs](https://configcat.com/docs/api/reference/configs.md): Configs
- [Create Config](https://configcat.com/docs/api/reference/create-config.md): This endpoint creates a new Config in a specified Product
- [Create Environment](https://configcat.com/docs/api/reference/create-environment.md): This endpoint creates a new Environment in a specified Product
- [Create Integration](https://configcat.com/docs/api/reference/create-integration.md): This endpoint creates a new Integration in a specified Product
- [Create Permission Group](https://configcat.com/docs/api/reference/create-permission-group.md): This endpoint creates a new Permission Group in a specified Product
- [Create Product](https://configcat.com/docs/api/reference/create-product.md): This endpoint creates a new Product in a specified Organization
- [Create Segment](https://configcat.com/docs/api/reference/create-segment.md): This endpoint creates a new Segment in a specified Product
- [Create Flag](https://configcat.com/docs/api/reference/create-setting.md): This endpoint creates a new Feature Flag or Setting in a specified Config
- [Create Tag](https://configcat.com/docs/api/reference/create-tag.md): This endpoint creates a new Tag in a specified Product
- [Create Webhook](https://configcat.com/docs/api/reference/create-webhook.md): This endpoint creates a new Webhook in a specified Product
- [Delete Config](https://configcat.com/docs/api/reference/delete-config.md): This endpoint removes a Config identified by the `configId` parameter.
- [Delete Environment](https://configcat.com/docs/api/reference/delete-environment.md): This endpoint removes an Environment identified by the `environmentId` parameter.
- [Delete Integration](https://configcat.com/docs/api/reference/delete-integration.md): This endpoint removes a Integration identified by the `integrationId` parameter.
- [Delete Invitation](https://configcat.com/docs/api/reference/delete-invitation.md): This endpoint removes an Invitation identified by the `invitationId` parameter.
- [Delete Member from Organization](https://configcat.com/docs/api/reference/delete-organization-member.md): This endpoint removes a Member identified by the `userId` from the
- [Delete Permission Group](https://configcat.com/docs/api/reference/delete-permission-group.md): This endpoint removes a Permission Group identified by the `permissionGroupId` parameter.
- [Delete Member from Product](https://configcat.com/docs/api/reference/delete-product-member.md): This endpoint removes a Member identified by the `userId` from the
- [Delete Product](https://configcat.com/docs/api/reference/delete-product.md): This endpoint removes a Product identified by the `productId` parameter.
- [Delete Reference reports](https://configcat.com/docs/api/reference/delete-reference-reports.md)
- [Delete Segment](https://configcat.com/docs/api/reference/delete-segment.md): This endpoint removes a Segment identified by the `segmentId` parameter.
- [Delete Flag](https://configcat.com/docs/api/reference/delete-setting.md): This endpoint removes a Feature Flag or Setting from a specified Config,
- [Delete Tag](https://configcat.com/docs/api/reference/delete-tag.md): This endpoint deletes a Tag identified by the `tagId` parameter. To remove a Tag from a Feature Flag or Setting use the [Update Flag](/docs/api/reference/update-setting) endpoint.
- [Delete Webhook](https://configcat.com/docs/api/reference/delete-webhook.md): This endpoint removes a Webhook identified by the `webhookId` parameter.
- [Environments](https://configcat.com/docs/api/reference/environments.md): Environments
- [Feature Flag & Setting values using SDK Key V2](https://configcat.com/docs/api/reference/feature-flag-setting-values-using-sdk-key-v-2.md): Feature Flag & Setting values using SDK Key V2
- [Feature Flag & Setting values using SDK Key](https://configcat.com/docs/api/reference/feature-flag-setting-values-using-sdk-key.md): Feature Flag & Setting values using SDK Key
- [Feature Flag & Setting values V2](https://configcat.com/docs/api/reference/feature-flag-setting-values-v-2.md): Feature Flag & Setting values V2
- [Feature Flag & Setting values](https://configcat.com/docs/api/reference/feature-flag-setting-values.md): Feature Flag & Setting values
- [Feature Flags & Settings](https://configcat.com/docs/api/reference/feature-flags-settings.md): Feature Flags & Settings
- [List Audit log items for Product](https://configcat.com/docs/api/reference/get-auditlogs.md): This endpoint returns the list of Audit log items for a given Product
- [Get Config](https://configcat.com/docs/api/reference/get-config.md): This endpoint returns the metadata of a Config
- [List Configs](https://configcat.com/docs/api/reference/get-configs.md): This endpoint returns the list of the Configs that belongs to the given Product identified by the
- [List Deleted Settings](https://configcat.com/docs/api/reference/get-deleted-settings.md): This endpoint returns the list of Feature Flags and Settings that were deleted from the given Config.
- [Get Environment](https://configcat.com/docs/api/reference/get-environment.md): This endpoint returns the metadata of an Environment
- [List Environments](https://configcat.com/docs/api/reference/get-environments.md): This endpoint returns the list of the Environments that belongs to the given Product identified by the
- [Get Integration](https://configcat.com/docs/api/reference/get-integration.md): This endpoint returns the metadata of an Integration
- [List Integrations](https://configcat.com/docs/api/reference/get-integrations.md): This endpoint returns the list of the Integrations that belongs to the given Product identified by the
- [Get authenticated user details](https://configcat.com/docs/api/reference/get-me.md)
- [List Audit log items for Organization](https://configcat.com/docs/api/reference/get-organization-auditlogs.md): This endpoint returns the list of Audit log items for a given Organization
- [List Organization Members](https://configcat.com/docs/api/reference/get-organization-members-v-2.md): This endpoint returns the list of Members that belongs
- [List Organization Members](https://configcat.com/docs/api/reference/get-organization-members.md): This endpoint returns the list of Members that belongs
- [List Organizations](https://configcat.com/docs/api/reference/get-organizations.md): This endpoint returns the list of the Organizations that belongs to the user.
- [List Pending Invitations in Organization](https://configcat.com/docs/api/reference/get-pending-invitations-org.md): This endpoint returns the list of pending invitations within the
- [List Pending Invitations in Product](https://configcat.com/docs/api/reference/get-pending-invitations.md): This endpoint returns the list of pending invitations within the
- [Get Permission Group](https://configcat.com/docs/api/reference/get-permission-group.md): This endpoint returns the metadata of a Permission Group
- [List Permission Groups](https://configcat.com/docs/api/reference/get-permission-groups.md): This endpoint returns the list of the Permission Groups that belongs to the given Product identified by the
- [List Product Members](https://configcat.com/docs/api/reference/get-product-members.md): This endpoint returns the list of Members that belongs
- [Get Product Preferences](https://configcat.com/docs/api/reference/get-product-preferences.md): This endpoint returns the preferences of a Product
- [Get Product](https://configcat.com/docs/api/reference/get-product.md): This endpoint returns the metadata of a Product
- [List Products](https://configcat.com/docs/api/reference/get-products.md): This endpoint returns the list of the Products that belongs to the user.
- [Get References for Feature Flag or Setting](https://configcat.com/docs/api/reference/get-references-for-feature-flag-or-setting.md)
- [Get SDK Key](https://configcat.com/docs/api/reference/get-sdk-keys.md): This endpoint returns the SDK Key for your Config in a specified Environment.
- [Get Segment](https://configcat.com/docs/api/reference/get-segment.md): This endpoint returns the metadata of a Segment
- [List Segments](https://configcat.com/docs/api/reference/get-segments.md): This endpoint returns the list of the Segments that belongs to the given Product identified by the
- [Get value](https://configcat.com/docs/api/reference/get-setting-value-by-sdkkey-v-2.md): This endpoint returns the value of a Feature Flag or Setting
- [Get value](https://configcat.com/docs/api/reference/get-setting-value-by-sdkkey.md): This endpoint returns the value of a Feature Flag or Setting
- [Get value](https://configcat.com/docs/api/reference/get-setting-value-v-2.md): This endpoint returns the value of a Feature Flag or Setting
- [Get value](https://configcat.com/docs/api/reference/get-setting-value.md): This endpoint returns the value of a Feature Flag or Setting
- [Get values](https://configcat.com/docs/api/reference/get-setting-values-v-2.md): This endpoint returns all Feature Flag and Setting values of a Config identified by the `configId` parameter
- [Get values](https://configcat.com/docs/api/reference/get-setting-values.md): This endpoint returns the value of a specified Config's Feature Flags or Settings identified by the `configId` parameter
- [Get Flag](https://configcat.com/docs/api/reference/get-setting.md): This endpoint returns the metadata attributes of a Feature Flag or Setting
- [List Settings by Tag](https://configcat.com/docs/api/reference/get-settings-by-tag.md): This endpoint returns the list of the Settings that
- [List Flags](https://configcat.com/docs/api/reference/get-settings.md): This endpoint returns the list of the Feature Flags and Settings defined in a
- [List Zombie (stale) flags for Product](https://configcat.com/docs/api/reference/get-staleflags.md): This endpoint returns the list of Zombie (stale) flags for a given Product
- [Get Tag](https://configcat.com/docs/api/reference/get-tag.md): This endpoint returns the metadata of a Tag
- [List Tags](https://configcat.com/docs/api/reference/get-tags.md): This endpoint returns the list of the Tags in a
- [Get Webhook Signing Keys](https://configcat.com/docs/api/reference/get-webhook-signing-keys.md): This endpoint returns the signing keys of a Webhook
- [Get Webhook](https://configcat.com/docs/api/reference/get-webhook.md): This endpoint returns the metadata of a Webhook
- [List Webhooks](https://configcat.com/docs/api/reference/get-webhooks.md): This endpoint returns the list of the Webhooks that belongs to the given Product identified by the
- [Integrations](https://configcat.com/docs/api/reference/integrations.md): Integrations
- [Invite Member](https://configcat.com/docs/api/reference/invite-member.md): This endpoint invites a Member into the given Product identified by the `productId` parameter.
- [Me](https://configcat.com/docs/api/reference/me.md): Me
- [Members](https://configcat.com/docs/api/reference/members.md): Members
- [Organizations](https://configcat.com/docs/api/reference/organizations.md): Organizations
- [Permission Groups](https://configcat.com/docs/api/reference/permission-groups.md): Permission Groups
- [Post values](https://configcat.com/docs/api/reference/post-setting-values-v-2.md): This endpoint batch updates the Feature Flags and Settings of a Config identified by the `configId` parameter
- [Post values](https://configcat.com/docs/api/reference/post-setting-values.md): This endpoint replaces the values of a specified Config's Feature Flags or Settings identified by the `configId` parameter
- [Products](https://configcat.com/docs/api/reference/products.md): Products
- [Replace value](https://configcat.com/docs/api/reference/replace-setting-value-by-sdkkey-v-2.md): This endpoint replaces the value and the Targeting Rules of a Feature Flag or Setting
- [Replace value](https://configcat.com/docs/api/reference/replace-setting-value-by-sdkkey.md): This endpoint replaces the value of a Feature Flag or Setting
- [Replace value](https://configcat.com/docs/api/reference/replace-setting-value-v-2.md): This endpoint replaces the value and the Targeting Rules of a Feature Flag or Setting
- [Replace value](https://configcat.com/docs/api/reference/replace-setting-value.md): This endpoint replaces the whole value of a Feature Flag or Setting in a specified Environment.
- [Replace Flag](https://configcat.com/docs/api/reference/replace-setting.md): This endpoint replaces the whole value of a Feature Flag or Setting
- [Replace Webhook](https://configcat.com/docs/api/reference/replace-webhook.md): This endpoint replaces the whole value of a Webhook identified by the `webhookId` parameter.
- [SDK Keys](https://configcat.com/docs/api/reference/sdk-keys.md): SDK Keys
- [Segments](https://configcat.com/docs/api/reference/segments.md): Segments
- [Tags](https://configcat.com/docs/api/reference/tags.md): Tags
- [Update Config](https://configcat.com/docs/api/reference/update-config.md): This endpoint updates a Config identified by the `configId` parameter.
- [Update Environment](https://configcat.com/docs/api/reference/update-environment.md): This endpoint updates an Environment identified by the `environmentId` parameter.
- [Update Integration](https://configcat.com/docs/api/reference/update-integration.md): This endpoint updates a Config identified by the `integrationId` parameter.
- [Update Permission Group](https://configcat.com/docs/api/reference/update-permission-group.md): This endpoint updates a Permission Group identified by the `permissionGroupId` parameter.
- [Update predefined variations (Beta)](https://configcat.com/docs/api/reference/update-predefined-variations.md): This endpoint updates the predefined variations for a Feature Flag or Setting identified by the `settingId` parameter.
- [Update Product Preferences](https://configcat.com/docs/api/reference/update-product-preferences.md): This endpoint updates the preferences of a Product identified by the `productId` parameter.
- [Update Product](https://configcat.com/docs/api/reference/update-product.md): This endpoint updates a Product identified by the `productId` parameter.
- [Update Segment](https://configcat.com/docs/api/reference/update-segment.md): This endpoint updates a Segment identified by the `segmentId` parameter.
- [Update value](https://configcat.com/docs/api/reference/update-setting-value-by-sdkkey-v-2.md): This endpoint updates the value of a Feature Flag or Setting
- [Update value](https://configcat.com/docs/api/reference/update-setting-value-by-sdkkey.md): This endpoint updates the value of a Feature Flag or Setting
- [Update value](https://configcat.com/docs/api/reference/update-setting-value-v-2.md): This endpoint updates the value of a Feature Flag or Setting
- [Update value](https://configcat.com/docs/api/reference/update-setting-value.md): This endpoint updates the value of a Feature Flag or Setting
- [Update Flag](https://configcat.com/docs/api/reference/update-setting.md): This endpoint updates the metadata of a Feature Flag or Setting
- [Update Tag](https://configcat.com/docs/api/reference/update-tag.md): This endpoint updates a Tag identified by the `tagId` parameter.
- [Update Webhook](https://configcat.com/docs/api/reference/update-webhook.md): This endpoint updates a Webhook identified by the `webhookId` parameter with a collection of [JSON Patch](https://jsonpatch.com) operations.
- [Upload References](https://configcat.com/docs/api/reference/upload-references.md)
- [Webhooks](https://configcat.com/docs/api/reference/webhooks.md): Webhooks
- [Zombie (stale) flags](https://configcat.com/docs/api/reference/zombie-stale-flags.md): Zombie (stale) flags
- [ConfigCat User Provisioning (SCIM) API](https://configcat.com/docs/api/scim/configcat-user-provisioning-scim-api.md): The purpose of this API is to allow user and group synchronization from your Identity Provider into a ConfigCat Organization via the SCIM protocol.
- [Create Group](https://configcat.com/docs/api/scim/create-group.md): This endpoint creates a new group with the given attributes.
- [Create User](https://configcat.com/docs/api/scim/create-user.md): This endpoint creates a new user with the given attributes.
- [Delete Group](https://configcat.com/docs/api/scim/delete-group.md): This endpoint deletes an existing group.
- [Delete User](https://configcat.com/docs/api/scim/delete-user.md): This endpoint deletes an existing user.
- [Get Group](https://configcat.com/docs/api/scim/get-group.md): This endpoint returns a group.
- [Get Groups](https://configcat.com/docs/api/scim/get-groups.md): This endpoint returns a list of groups.
- [Get Resource Type](https://configcat.com/docs/api/scim/get-resource-type.md): This endpoint returns a resource type.
- [Get Resource Types](https://configcat.com/docs/api/scim/get-resource-types.md): This endpoint returns the supported resource types.
- [Get Schema](https://configcat.com/docs/api/scim/get-schema.md): This endpoint returns a schema.
- [Get Schemas](https://configcat.com/docs/api/scim/get-schemas.md): This endpoint returns the supported schema list.
- [Get Service Provider Config](https://configcat.com/docs/api/scim/get-service-provider-config.md): This endpoint returns the service provider config.
- [Get User](https://configcat.com/docs/api/scim/get-user.md): This endpoint returns a user.
- [Get Users](https://configcat.com/docs/api/scim/get-users.md): This endpoint returns a list of users.
- [Replace Group](https://configcat.com/docs/api/scim/replace-group.md): This endpoint updates an existing group by replacing all attributes present in the request.
- [Replace User](https://configcat.com/docs/api/scim/replace-user.md): This endpoint updates an existing user by replacing all attributes present in the request.
- [Update Group](https://configcat.com/docs/api/scim/update-group.md): This endpoint updates an existing group by applying JSON Patch operations.
- [Update User](https://configcat.com/docs/api/scim/update-user.md): This endpoint updates an existing user by applying JSON Patch operations.


---

# Full Documentation Content

## [ðï¸<!-- --> <!-- -->Get Groups](https://configcat.com/docs/docs/api/scim/get-groups/.md)

[This endpoint returns a list of groups.](https://configcat.com/docs/docs/api/scim/get-groups/.md)


---

## [ðï¸<!-- --> <!-- -->Get Service Provider Config](https://configcat.com/docs/docs/api/scim/get-service-provider-config/.md)

[This endpoint returns the service provider config.](https://configcat.com/docs/docs/api/scim/get-service-provider-config/.md)


---

## [ðï¸<!-- --> <!-- -->Get Users](https://configcat.com/docs/docs/api/scim/get-users/.md)

[This endpoint returns a list of users.](https://configcat.com/docs/docs/api/scim/get-users/.md)


---

# Update Member Permissions

```
POST 
/v1/organizations/:organizationId/members/:userId
```

This endpoint updates the permissions of a Member identified by the `userId`. This endpoint can also be used to move a Member between Permission Groups within a Product. Only a single Permission Group can be set per Product.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When the update was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Audit logs

Access audit log entries.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Audit log items for Product](https://configcat.com/docs/docs/api/reference/get-auditlogs/.md)

[This endpoint returns the list of Audit log items for a given Product](https://configcat.com/docs/docs/api/reference/get-auditlogs/.md)

## [ðï¸<!-- --> <!-- -->List Deleted Settings](https://configcat.com/docs/docs/api/reference/get-deleted-settings/.md)

[This endpoint returns the list of Feature Flags and Settings that were deleted from the given Config.](https://configcat.com/docs/docs/api/reference/get-deleted-settings/.md)

## [ðï¸<!-- --> <!-- -->List Audit log items for Organization](https://configcat.com/docs/docs/api/reference/get-organization-auditlogs/.md)

[This endpoint returns the list of Audit log items for a given Organization](https://configcat.com/docs/docs/api/reference/get-organization-auditlogs/.md)


---

# Code References

With this endpoint you can upload Feature Flag and Setting usage references that will be shown on the ConfigCat Dashboard.

[Here](https://configcat.com/docs/docs/advanced/code-references/overview/.md) you can read more about the concept of Code References.

<!-- -->

## [ðï¸<!-- --> <!-- -->Get References for Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/get-references-for-feature-flag-or-setting/.md)

## [ðï¸<!-- --> <!-- -->Delete Reference reports](https://configcat.com/docs/docs/api/reference/delete-reference-reports/.md)

## [ðï¸<!-- --> <!-- -->Upload References](https://configcat.com/docs/docs/api/reference/upload-references/.md)


---

Version: v1

# ConfigCat Public Management API

The purpose of this API is to access the ConfigCat platform programmatically. You can **Create**, **Read**, **Update** and **Delete** any entities like **Feature Flags, Configs, Environments** or **Products** within ConfigCat.

**Base API URL**: <https://api.configcat.com>

If you prefer the swagger documentation, you can find it here: [Swagger UI](https://api.configcat.com/swagger).

The API is based on HTTP REST, uses resource-oriented URLs, status codes and supports JSON format.

**Important:** Do not use this API for accessing and evaluating feature flag values. Use the [SDKs](https://configcat.com/docs/docs/sdk-reference/overview/.md) or the [ConfigCat Proxy](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md) instead.

## OpenAPI Specification[â](#openapi-specification "Direct link to OpenAPI Specification")

The complete specification is publicly available in the following formats:

* [OpenAPI v3](https://api.configcat.com/docs/v1/swagger.json)
* [Swagger v2](https://api.configcat.com/docs/v1/swagger.v2.json)

You can use it to generate client libraries in various languages with [OpenAPI Generator](https://github.com/OpenAPITools/openapi-generator) or [Swagger Codegen](https://swagger.io/tools/swagger-codegen/) to interact with this API.

## Throttling and rate limits[â](#throttling-and-rate-limits "Direct link to Throttling and rate limits")

All the rate limited API calls are returning information about the current rate limit period in the following HTTP headers:

| Header                 | Description                                                                |
| ---------------------- | -------------------------------------------------------------------------- |
| X-Rate-Limit-Remaining | The maximum number of requests remaining in the current rate limit period. |
| X-Rate-Limit-Reset     | The time when the current rate limit period resets.                        |

When the rate limit is exceeded by a request, the API returns with a `HTTP 429 - Too many requests` status along with a `Retry-After` HTTP header.

## Authentication[â](#authentication "Direct link to Authentication")

* HTTP: Basic Auth

To authenticate with the API you have to fill the `Authorization` HTTP request header with your Public API credentials.

You can create your credentials on the [Public API credentials management page](https://app.configcat.com/my-account/public-api-credentials).

| Security Scheme Type:      | http  |
| -------------------------- | ----- |
| HTTP Authorization Scheme: | basic |

### Contact

ConfigCat: <support@configcat.com>

URL: <https://configcat.com>

### Terms of Service

<https://configcat.com/policies>


---

# Configs

With these endpoints you can manage your Configs. This also can be used to manage [Feature Flags and Settings](https://configcat.com/docs/docs/api/reference/feature-flags-settings/.md) and their [served values](https://configcat.com/docs/docs/api/reference/feature-flag-setting-values/.md) through this API.

[Here](https://configcat.com/docs/docs/main-concepts/.md#config) you can read more about the concept of Configs.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Configs](https://configcat.com/docs/docs/api/reference/get-configs/.md)

[This endpoint returns the list of the Configs that belongs to the given Product identified by the](https://configcat.com/docs/docs/api/reference/get-configs/.md)

## [ðï¸<!-- --> <!-- -->Create Config](https://configcat.com/docs/docs/api/reference/create-config/.md)

[This endpoint creates a new Config in a specified Product](https://configcat.com/docs/docs/api/reference/create-config/.md)

## [ðï¸<!-- --> <!-- -->Get Config](https://configcat.com/docs/docs/api/reference/get-config/.md)

[This endpoint returns the metadata of a Config](https://configcat.com/docs/docs/api/reference/get-config/.md)

## [ðï¸<!-- --> <!-- -->Update Config](https://configcat.com/docs/docs/api/reference/update-config/.md)

[This endpoint updates a Config identified by the \`configId\` parameter.](https://configcat.com/docs/docs/api/reference/update-config/.md)

## [ðï¸<!-- --> <!-- -->Delete Config](https://configcat.com/docs/docs/api/reference/delete-config/.md)

[This endpoint removes a Config identified by the \`configId\` parameter.](https://configcat.com/docs/docs/api/reference/delete-config/.md)


---

# Create Config

```
POST 
/v1/products/:productId/configs
```

This endpoint creates a new Config in a specified Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 404
* 429

When the creation was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Create Environment

```
POST 
/v1/products/:productId/environments
```

This endpoint creates a new Environment in a specified Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 404
* 429

When the creation was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Create Integration

```
POST 
/v1/products/:productId/integrations
```

This endpoint creates a new Integration in a specified Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

The Parameters dictionary differs for each IntegrationType:

* Datadog

  <!-- -->

  * `apikey`: Required. Datadog API key.
  * `site`: Datadog site. Available values: `Us`, `Eu`, `Us1Fed`, `Us3`, `Us5`. Default: `Us`.

* Slack
  <br />
  <!-- -->
  Connecting the Slack integration through the Public Management API will not post messages with the ConfigCat Feature Flags Slack app but with an incoming webhook.
  <!-- -->
  * `incoming_webhook.url`: Required. The [incoming webhook URL](https://api.slack.com/messaging/webhooks) where the integration should post messages.

* Amplitude

  <!-- -->

  * `apiKey`: Required. Amplitude API Key.
  * `secretKey`: Required. Amplitude Secret Key.

* Mixpanel

  <!-- -->

  * `serviceAccountUserName`: Required. Mixpanel Service Account Username.
  * `serviceAccountSecret`: Required. Mixpanel Service Account Secret.
  * `projectId`: Required. Mixpanel Project ID.
  * `server`: Mixpanel Server. Available values: `StandardServer`, `EUResidencyServer`. Default: `StandardServer`.

* Twilio Segment

  <!-- -->

  * `writeKey`: Required. Twilio Segment Write Key.
  * `server`: Twilio Segment Server. Available values: `Us`, `Eu`. Default: `Us`.

* PubNub (work in progress)

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 404
* 429

When the creation was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Create Permission Group

```
POST 
/v1/products/:productId/permissions
```

This endpoint creates a new Permission Group in a specified Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 404
* 429

When the creation was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Create Product

```
POST 
/v1/organizations/:organizationId/products
```

This endpoint creates a new Product in a specified Organization identified by the `organizationId` parameter, which can be obtained from the [List Organizations](https://configcat.com/docs/docs/api/reference/get-organizations/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 404
* 429

When the creation was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Create Segment

```
POST 
/v1/products/:productId/segments
```

This endpoint creates a new Segment in a specified Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 404
* 429

When the creation was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Create Flag

```
POST 
/v1/configs/:configId/settings
```

This endpoint creates a new Feature Flag or Setting in a specified Config identified by the `configId` parameter.

**Important:** The `key` attribute must be unique within the given Config.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 404
* 429

When the creation was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Create Tag

```
POST 
/v1/products/:productId/tags
```

This endpoint creates a new Tag in a specified Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 404
* 429

When the creation was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Create Webhook

```
POST 
/v1/configs/:configId/environments/:environmentId/webhooks
```

This endpoint creates a new Webhook in a specified Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 404
* 429

When the creation was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Config

```
DELETE 
/v1/configs/:configId
```

This endpoint removes a Config identified by the `configId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Environment

```
DELETE 
/v1/environments/:environmentId
```

This endpoint removes an Environment identified by the `environmentId` parameter. If the `cleanupAuditLogs` flag is set to true, it also deletes the audit log records related to the environment (except for the `Created a new environment` and `Deleted an environment` records).

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Integration

```
DELETE 
/v1/integrations/:integrationId
```

This endpoint removes a Integration identified by the `integrationId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Invitation

```
DELETE 
/v1/invitations/:invitationId
```

This endpoint removes an Invitation identified by the `invitationId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Member from Organization

```
DELETE 
/v1/organizations/:organizationId/members/:userId
```

This endpoint removes a Member identified by the `userId` from the given Organization identified by the `organizationId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Permission Group

```
DELETE 
/v1/permissions/:permissionGroupId
```

This endpoint removes a Permission Group identified by the `permissionGroupId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Member from Product

```
DELETE 
/v1/products/:productId/members/:userId
```

This endpoint removes a Member identified by the `userId` from the given Product identified by the `productId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Product

```
DELETE 
/v1/products/:productId
```

This endpoint removes a Product identified by the `productId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Reference reports

```
POST 
/v1/code-references/delete-reports
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

OK

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Segment

```
DELETE 
/v1/segments/:segmentId
```

This endpoint removes a Segment identified by the `segmentId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Flag

```
DELETE 
/v1/settings/:settingId
```

This endpoint removes a Feature Flag or Setting from a specified Config, identified by the `configId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Tag

```
DELETE 
/v1/tags/:tagId
```

This endpoint deletes a Tag identified by the `tagId` parameter. To remove a Tag from a Feature Flag or Setting use the [Update Flag](https://configcat.com/docs/docs/api/reference/update-setting/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Webhook

```
DELETE 
/v1/webhooks/:webhookId
```

This endpoint removes a Webhook identified by the `webhookId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 400
* 404
* 429

When the delete was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Environments

With these endpoints you can update existing Environments or add new ones into your selected [Product](https://configcat.com/docs/docs/api/reference/products/.md).

[Here](https://configcat.com/docs/docs/main-concepts/.md#environment) you can read more about the concept of Environments.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Environments](https://configcat.com/docs/docs/api/reference/get-environments/.md)

[This endpoint returns the list of the Environments that belongs to the given Product identified by the](https://configcat.com/docs/docs/api/reference/get-environments/.md)

## [ðï¸<!-- --> <!-- -->Create Environment](https://configcat.com/docs/docs/api/reference/create-environment/.md)

[This endpoint creates a new Environment in a specified Product](https://configcat.com/docs/docs/api/reference/create-environment/.md)

## [ðï¸<!-- --> <!-- -->Get Environment](https://configcat.com/docs/docs/api/reference/get-environment/.md)

[This endpoint returns the metadata of an Environment](https://configcat.com/docs/docs/api/reference/get-environment/.md)

## [ðï¸<!-- --> <!-- -->Update Environment](https://configcat.com/docs/docs/api/reference/update-environment/.md)

[This endpoint updates an Environment identified by the \`environmentId\` parameter.](https://configcat.com/docs/docs/api/reference/update-environment/.md)

## [ðï¸<!-- --> <!-- -->Delete Environment](https://configcat.com/docs/docs/api/reference/delete-environment/.md)

[This endpoint removes an Environment identified by the \`environmentId\` parameter.](https://configcat.com/docs/docs/api/reference/delete-environment/.md)


---

# Feature Flag & Setting values using SDK Key V2

*These endpoints are exclusive for [**Config V2**](https://configcat.com/docs/docs/advanced/config-v2/.md) Feature Flags.*<br />*They can only be used on a Config that has `evaluationVersion` set to `v2`.*<br /><br />With these endpoints you can control how your existing Feature Flags and Settings should serve their values. You can turn Feature Flags on or off, update Setting values and change Targeting Rules.

These endpoints are determining the Environment and Config by the [SDK key](https://app.configcat.com/sdkkey) passed in the `X-CONFIGCAT-SDKKEY` request header. To identify the desired Feature Flag or Setting to change, you can use either its `settingId` or `key` attribute. You can get those attributes from the [Feature Flag & Setting](https://configcat.com/docs/docs/api/reference/feature-flags-settings/.md) endpoints.

<!-- -->

## [ðï¸<!-- --> <!-- -->Get value](https://configcat.com/docs/docs/api/reference/get-setting-value-by-sdkkey-v-2/.md)

[This endpoint returns the value of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/get-setting-value-by-sdkkey-v-2/.md)

## [ðï¸<!-- --> <!-- -->Replace value](https://configcat.com/docs/docs/api/reference/replace-setting-value-by-sdkkey-v-2/.md)

[This endpoint replaces the value and the Targeting Rules of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/replace-setting-value-by-sdkkey-v-2/.md)

## [ðï¸<!-- --> <!-- -->Update value](https://configcat.com/docs/docs/api/reference/update-setting-value-by-sdkkey-v-2/.md)

[This endpoint updates the value of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/update-setting-value-by-sdkkey-v-2/.md)


---

# Feature Flag & Setting values using SDK Key

With these endpoints you can control how your existing Feature Flags and Settings should serve their values. You can turn Feature Flags on or off, update Setting values and also add, remove or change the order of Percentage and Targeting Rules.

These endpoints are determining the Environment and Config by the [SDK key](https://app.configcat.com/sdkkey) passed in the `X-CONFIGCAT-SDKKEY` request header. To identify the desired Feature Flag or Setting to change, you can use either its `settingId` or `key` attribute. You can get those attributes from the [Feature Flag & Setting](https://configcat.com/docs/docs/api/reference/feature-flags-settings/.md) endpoints.

<!-- -->

## [ðï¸<!-- --> <!-- -->Get value](https://configcat.com/docs/docs/api/reference/get-setting-value-by-sdkkey/.md)

[This endpoint returns the value of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/get-setting-value-by-sdkkey/.md)

## [ðï¸<!-- --> <!-- -->Replace value](https://configcat.com/docs/docs/api/reference/replace-setting-value-by-sdkkey/.md)

[This endpoint replaces the value of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/replace-setting-value-by-sdkkey/.md)

## [ðï¸<!-- --> <!-- -->Update value](https://configcat.com/docs/docs/api/reference/update-setting-value-by-sdkkey/.md)

[This endpoint updates the value of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/update-setting-value-by-sdkkey/.md)


---

# Feature Flag & Setting values V2

*These endpoints are exclusive for [**Config V2**](https://configcat.com/docs/docs/advanced/config-v2/.md) Feature Flags.*<br />*They can only be used on a Config that has `evaluationVersion` set to `v2`.*<br /><br />With these endpoints you can control how your existing Feature Flags and Settings should serve their values. You can turn Feature Flags on or off, update Setting values and change Targeting Rules.

To determine which Feature Flag or Setting you want to work with you have to pass its `settingId`. It can be obtained from the [Feature Flag & Setting](https://configcat.com/docs/docs/api/reference/feature-flags-settings/.md) endpoints.

You also have to specify in which Environment you want to change the served value configuration by its `environmentId` which can be obtained from the [List Environments](https://configcat.com/docs/docs/api/reference/get-environments/.md) endpoint.

<!-- -->

## [ðï¸<!-- --> <!-- -->Get value](https://configcat.com/docs/docs/api/reference/get-setting-value-v-2/.md)

[This endpoint returns the value of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/get-setting-value-v-2/.md)

## [ðï¸<!-- --> <!-- -->Replace value](https://configcat.com/docs/docs/api/reference/replace-setting-value-v-2/.md)

[This endpoint replaces the value and the Targeting Rules of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/replace-setting-value-v-2/.md)

## [ðï¸<!-- --> <!-- -->Update value](https://configcat.com/docs/docs/api/reference/update-setting-value-v-2/.md)

[This endpoint updates the value of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/update-setting-value-v-2/.md)

## [ðï¸<!-- --> <!-- -->Get values](https://configcat.com/docs/docs/api/reference/get-setting-values-v-2/.md)

[This endpoint returns all Feature Flag and Setting values of a Config identified by the \`configId\` parameter](https://configcat.com/docs/docs/api/reference/get-setting-values-v-2/.md)

## [ðï¸<!-- --> <!-- -->Post values](https://configcat.com/docs/docs/api/reference/post-setting-values-v-2/.md)

[This endpoint batch updates the Feature Flags and Settings of a Config identified by the \`configId\` parameter](https://configcat.com/docs/docs/api/reference/post-setting-values-v-2/.md)


---

# Feature Flag & Setting values

With these endpoints you can control how your existing Feature Flags and Settings should serve their values. You can turn Feature Flags on or off, update Setting values and also add, remove or reorder Percentage and Targeting Rules.

To determine which Feature Flag or Setting you want to work with you have to pass its `settingId`. It can be obtained from the [Feature Flag & Setting](https://configcat.com/docs/docs/api/reference/feature-flags-settings/.md) endpoints.

You also have to specify in which Environment you want to change the served value configuration by its `environmentId` which can be obtained from the [List Environments](https://configcat.com/docs/docs/api/reference/get-environments/.md) endpoint.

<!-- -->

## [ðï¸<!-- --> <!-- -->Get value](https://configcat.com/docs/docs/api/reference/get-setting-value/.md)

[This endpoint returns the value of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/get-setting-value/.md)

## [ðï¸<!-- --> <!-- -->Replace value](https://configcat.com/docs/docs/api/reference/replace-setting-value/.md)

[This endpoint replaces the whole value of a Feature Flag or Setting in a specified Environment.](https://configcat.com/docs/docs/api/reference/replace-setting-value/.md)

## [ðï¸<!-- --> <!-- -->Update value](https://configcat.com/docs/docs/api/reference/update-setting-value/.md)

[This endpoint updates the value of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/update-setting-value/.md)

## [ðï¸<!-- --> <!-- -->Get values](https://configcat.com/docs/docs/api/reference/get-setting-values/.md)

[This endpoint returns the value of a specified Config's Feature Flags or Settings identified by the \`configId\` parameter](https://configcat.com/docs/docs/api/reference/get-setting-values/.md)

## [ðï¸<!-- --> <!-- -->Post values](https://configcat.com/docs/docs/api/reference/post-setting-values/.md)

[This endpoint replaces the values of a specified Config's Feature Flags or Settings identified by the \`configId\` parameter](https://configcat.com/docs/docs/api/reference/post-setting-values/.md)


---

# Feature Flags & Settings

With these endpoints you can manage your Feature Flags or Settings within a Config. However you can't use them for manipulating the values of your Feature Flags and Settings, to do that please visit the [Feature Flag & Setting values using SDK Key](https://configcat.com/docs/docs/api/reference/feature-flag-setting-values-using-sdk-key/.md) and [Feature Flag & Setting values](https://configcat.com/docs/docs/api/reference/feature-flag-setting-values/.md) sections of the API.

For using these endpoints, first you have to select which Config you want to work with by its `configId` which can be obtained from the [List Configs](https://configcat.com/docs/docs/api/reference/get-configs/.md) endpoint. Then you can use it to create new Feature Flags or to get information about existing ones.

Then you can obtain the `settingId` or `key` of your desired Feature Flag or Setting to use them for further operations in this API.

[Here](https://configcat.com/docs/docs/main-concepts/.md#setting) you can read more about the concept of Settings.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Flags](https://configcat.com/docs/docs/api/reference/get-settings/.md)

[This endpoint returns the list of the Feature Flags and Settings defined in a](https://configcat.com/docs/docs/api/reference/get-settings/.md)

## [ðï¸<!-- --> <!-- -->Create Flag](https://configcat.com/docs/docs/api/reference/create-setting/.md)

[This endpoint creates a new Feature Flag or Setting in a specified Config](https://configcat.com/docs/docs/api/reference/create-setting/.md)

## [ðï¸<!-- --> <!-- -->Get Flag](https://configcat.com/docs/docs/api/reference/get-setting/.md)

[This endpoint returns the metadata attributes of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/get-setting/.md)

## [ðï¸<!-- --> <!-- -->Replace Flag](https://configcat.com/docs/docs/api/reference/replace-setting/.md)

[This endpoint replaces the whole value of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/replace-setting/.md)

## [ðï¸<!-- --> <!-- -->Update Flag](https://configcat.com/docs/docs/api/reference/update-setting/.md)

[This endpoint updates the metadata of a Feature Flag or Setting](https://configcat.com/docs/docs/api/reference/update-setting/.md)

## [ðï¸<!-- --> <!-- -->Delete Flag](https://configcat.com/docs/docs/api/reference/delete-setting/.md)

[This endpoint removes a Feature Flag or Setting from a specified Config,](https://configcat.com/docs/docs/api/reference/delete-setting/.md)

## [ðï¸<!-- --> <!-- -->Update predefined variations (Beta)](https://configcat.com/docs/docs/api/reference/update-predefined-variations/.md)

[This endpoint updates the predefined variations for a Feature Flag or Setting identified by the \`settingId\` parameter.](https://configcat.com/docs/docs/api/reference/update-predefined-variations/.md)


---

# List Audit log items for Product

```
GET 
/v1/products/:productId/auditlogs
```

This endpoint returns the list of Audit log items for a given Product and the result can be optionally filtered by Config and/or Environment.

If neither `fromUtcDateTime` nor `toUtcDateTime` is set, the audit logs for the **last 7 days** will be returned.

The distance between `fromUtcDateTime` and `toUtcDateTime` cannot exceed **30 days**.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Config

```
GET 
/v1/configs/:configId
```

This endpoint returns the metadata of a Config identified by the `configId`.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the config data returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Configs

```
GET 
/v1/products/:productId/configs
```

This endpoint returns the list of the Configs that belongs to the given Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Deleted Settings

```
GET 
/v1/configs/:configId/deleted-settings
```

This endpoint returns the list of Feature Flags and Settings that were deleted from the given Config.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Environment

```
GET 
/v1/environments/:environmentId
```

This endpoint returns the metadata of an Environment identified by the `environmentId`.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the environment data returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Environments

```
GET 
/v1/products/:productId/environments
```

This endpoint returns the list of the Environments that belongs to the given Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Integration

```
GET 
/v1/integrations/:integrationId
```

This endpoint returns the metadata of an Integration identified by the `integrationId`.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the integration data returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Integrations

```
GET 
/v1/products/:productId/integrations
```

This endpoint returns the list of the Integrations that belongs to the given Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get authenticated user details

```
GET 
/v1/me
```

## Responses[â](#responses "Direct link to Responses")

* 200
* 429

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Audit log items for Organization

```
GET 
/v1/organizations/:organizationId/auditlogs
```

This endpoint returns the list of Audit log items for a given Organization and the result can be optionally filtered by Product and/or Config and/or Environment.

If neither `fromUtcDateTime` nor `toUtcDateTime` is set, the audit logs for the **last 7 days** will be returned.

The distance between `fromUtcDateTime` and `toUtcDateTime` cannot exceed **30 days**.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Organization Members

```
GET 
/v2/organizations/:organizationId/members
```

This endpoint returns the list of Members that belongs to the given Organization, identified by the `organizationId` parameter.

The results may vary based on the access level of the user who calls the endpoint:

* When it's called with Organization Admin privileges, the result will contain each member in the Organization.
* When it's called without Organization Admin privileges, the result will contain each Organization Admin along with members of those products where the caller has `Team members and permission groups` (`canManageMembers`) permission.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Organization Members

```
GET 
/v1/organizations/:organizationId/members
```

deprecated

This endpoint has been deprecated and may be replaced or removed in future versions of the API.

This endpoint returns the list of Members that belongs to the given Organization, identified by the `organizationId` parameter.

The results may vary based on the access level of the user who calls the endpoint:

* When it's called with Organization Admin privileges, the result will contain each member in the Organization.
* When it's called without Organization Admin privileges, the result will contain each Organization Admin along with members of those products where the caller has `Team members and permission groups` (`canManageMembers`) permission.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Organizations

```
GET 
/v1/organizations
```

This endpoint returns the list of the Organizations that belongs to the user.

## Responses[â](#responses "Direct link to Responses")

* 200
* 429

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Pending Invitations in Organization

```
GET 
/v1/organizations/:organizationId/invitations
```

This endpoint returns the list of pending invitations within the given Organization identified by the `organizationId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Pending Invitations in Product

```
GET 
/v1/products/:productId/invitations
```

This endpoint returns the list of pending invitations within the given Product identified by the `productId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Permission Group

```
GET 
/v1/permissions/:permissionGroupId
```

This endpoint returns the metadata of a Permission Group identified by the `permissionGroupId`.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the permission group data returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Permission Groups

```
GET 
/v1/products/:productId/permissions
```

This endpoint returns the list of the Permission Groups that belongs to the given Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Product Members

```
GET 
/v1/products/:productId/members
```

This endpoint returns the list of Members that belongs to the given Product, identified by the `productId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Product Preferences

```
GET 
/v1/products/:productId/preferences
```

This endpoint returns the preferences of a Product identified by the `productId`.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the product preferences data is returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Product

```
GET 
/v1/products/:productId
```

This endpoint returns the metadata of a Product identified by the `productId`.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the product data is returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Products

```
GET 
/v1/products
```

This endpoint returns the list of the Products that belongs to the user.

## Responses[â](#responses "Direct link to Responses")

* 200
* 429

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get References for Feature Flag or Setting

```
GET 
/v1/settings/:settingId/code-references
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get SDK Key

```
GET 
/v1/configs/:configId/environments/:environmentId
```

This endpoint returns the SDK Key for your Config in a specified Environment.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Segment

```
GET 
/v1/segments/:segmentId
```

This endpoint returns the metadata of a Segment identified by the `segmentId`.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the config data returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Segments

```
GET 
/v1/products/:productId/segments
```

This endpoint returns the list of the Segments that belongs to the given Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get value

```
GET 
/v2/settings/:settingKeyOrId/value
```

This endpoint returns the value of a Feature Flag or Setting in a specified Environment identified by the [SDK key](https://app.configcat.com/sdkkey) passed in the `X-CONFIGCAT-SDKKEY` header.

The most important fields in the response are the `defaultValue`, `targetingRules`. The `defaultValue` represents what the clients will get when the evaluation requests of our SDKs are not matching to any of the defined Targeting Rules, or when there are no additional rules to evaluate.

The `targetingRules` represents the current Targeting Rule configuration of the actual Feature Flag or Setting in an **ordered** collection, which means the order of the returned rules is matching to the evaluation order. You can read more about these rules [here](https://configcat.com/docs/docs/targeting/targeting-overview/.md).

The `percentageEvaluationAttribute` represents the custom [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) attribute that must be used at the [percentage evaluation](https://configcat.com/docs/docs/targeting/percentage-options/.md) of the Feature Flag or Setting.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get value

```
GET 
/v1/settings/:settingKeyOrId/value
```

This endpoint returns the value of a Feature Flag or Setting in a specified Environment identified by the [SDK key](https://app.configcat.com/sdkkey) passed in the `X-CONFIGCAT-SDKKEY` header.

The most important attributes in the response are the `value`, `rolloutRules` and `percentageRules`. The `value` represents what the clients will get when the evaluation requests of our SDKs are not matching to any of the defined Targeting or Percentage Rules, or when there are no additional rules to evaluate.

The `rolloutRules` and `percentageRules` attributes are representing the current Targeting and Percentage Rules configuration of the actual Feature Flag or Setting in an **ordered** collection, which means the order of the returned rules is matching to the evaluation order. You can read more about these rules [here](https://configcat.com/docs/docs/targeting/targeting-overview/.md).

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get value

```
GET 
/v2/environments/:environmentId/settings/:settingId/value
```

This endpoint returns the value of a Feature Flag or Setting in a specified Environment identified by the `environmentId` parameter.

The most important fields in the response are the `defaultValue`, `targetingRules`, and `percentageEvaluationAttribute`. The `defaultValue` represents what the clients will get when the evaluation requests of our SDKs are not matching to any of the defined Targeting Rules, or when there are no additional rules to evaluate.

The `targetingRules` represents the current Targeting Rule configuration of the actual Feature Flag or Setting in an **ordered** collection, which means the order of the returned rules is matching to the evaluation order. You can read more about these rules [here](https://configcat.com/docs/docs/targeting/targeting-overview/.md).

The `percentageEvaluationAttribute` represents the custom [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) attribute that must be used for [percentage evaluation](https://configcat.com/docs/docs/targeting/percentage-options/.md) of the Feature Flag or Setting.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the setting value data returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get value

```
GET 
/v1/environments/:environmentId/settings/:settingId/value
```

This endpoint returns the value of a Feature Flag or Setting in a specified Environment identified by the `environmentId` parameter.

The most important attributes in the response are the `value`, `rolloutRules` and `percentageRules`. The `value` represents what the clients will get when the evaluation requests of our SDKs are not matching to any of the defined Targeting or Percentage Rules, or when there are no additional rules to evaluate.

The `rolloutRules` and `percentageRules` attributes are representing the current Targeting and Percentage Rules configuration of the actual Feature Flag or Setting in an **ordered** collection, which means the order of the returned rules is matching to the evaluation order. You can read more about these rules [here](https://configcat.com/docs/docs/targeting/targeting-overview/.md).

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the setting value data returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get values

```
GET 
/v2/configs/:configId/environments/:environmentId/values
```

This endpoint returns all Feature Flag and Setting values of a Config identified by the `configId` parameter in a specified Environment identified by the `environmentId` parameter.

The most important fields in the response are the `defaultValue`, `targetingRules`. The `defaultValue` represents what the clients will get when the evaluation requests of our SDKs are not matching to any of the defined Targeting Rules, or when there are no additional rules to evaluate.

The `targetingRules` represents the current Targeting Rule configuration of the actual Feature Flag or Setting in an **ordered** collection, which means the order of the returned rules is matching to the evaluation order. You can read more about these rules [here](https://configcat.com/docs/docs/targeting/targeting-overview/.md).

The `percentageEvaluationAttribute` represents the custom [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) attribute that must be used for [percentage evaluation](https://configcat.com/docs/docs/targeting/percentage-options/.md) of the Feature Flag or Setting.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the setting values returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get values

```
GET 
/v1/configs/:configId/environments/:environmentId/values
```

This endpoint returns the value of a specified Config's Feature Flags or Settings identified by the `configId` parameter in a specified Environment identified by the `environmentId` parameter.

The most important attributes in the response are the `value`, `rolloutRules` and `percentageRules`. The `value` represents what the clients will get when the evaluation requests of our SDKs are not matching to any of the defined Targeting or Percentage Rules, or when there are no additional rules to evaluate.

The `rolloutRules` and `percentageRules` attributes are representing the current Targeting and Percentage Rules configuration of the actual Feature Flag or Setting in an **ordered** collection, which means the order of the returned rules is matching to the evaluation order. You can read more about these rules [here](https://configcat.com/docs/docs/targeting/targeting-overview/.md).

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the setting values returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Flag

```
GET 
/v1/settings/:settingId
```

This endpoint returns the metadata attributes of a Feature Flag or Setting identified by the `settingId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the setting data returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Settings by Tag

```
GET 
/v1/tags/:tagId/settings
```

This endpoint returns the list of the Settings that has the specified Tag, identified by the `tagId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the settings data returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Flags

```
GET 
/v1/configs/:configId/settings
```

This endpoint returns the list of the Feature Flags and Settings defined in a specified Config, identified by the `configId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Zombie (stale) flags for Product

```
GET 
/v1/products/:productId/staleflags
```

This endpoint returns the list of Zombie (stale) flags for a given Product and the result can be optionally filtered by various parameters.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Tag

```
GET 
/v1/tags/:tagId
```

This endpoint returns the metadata of a Tag identified by the `tagId`.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the tag data returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Tags

```
GET 
/v1/products/:productId/tags
```

This endpoint returns the list of the Tags in a specified Product, identified by the `productId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 429

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Webhook Signing Keys

```
GET 
/v1/webhooks/:webhookId/keys
```

This endpoint returns the signing keys of a Webhook identified by the `webhookId`.

Signing keys are used for ensuring the Webhook requests you receive are actually sent by ConfigCat.

[Here](https://configcat.com/docs/docs/advanced/notifications-webhooks/.md#verifying-webhook-requests) you can read more about Webhook request verification.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the webhook signing keys are returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Webhook

```
GET 
/v1/webhooks/:webhookId
```

This endpoint returns the metadata of a Webhook identified by the `webhookId`.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the webhook data is returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# List Webhooks

```
GET 
/v1/products/:productId/webhooks
```

This endpoint returns the list of the Webhooks that belongs to the given Product identified by the `productId` parameter, which can be obtained from the [List Products](https://configcat.com/docs/docs/api/reference/get-products/.md) endpoint.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 429

Too many requests. In case of the request rate exceeds the rate limits.


---

# Integrations

With these endpoints you can manage your Integrations.

* [Datadog](https://configcat.com/docs/docs/integrations/datadog/.md)
* [Slack](https://configcat.com/docs/docs/integrations/slack/.md)
* [Amplitude](https://configcat.com/docs/docs/integrations/amplitude/.md)
* [MixPanel](https://configcat.com/docs/docs/integrations/mixpanel/.md)
* [Segment](https://configcat.com/docs/docs/integrations/segment/.md)
* PubNub (work in progress)

<!-- -->

## [ðï¸<!-- --> <!-- -->List Integrations](https://configcat.com/docs/docs/api/reference/get-integrations/.md)

[This endpoint returns the list of the Integrations that belongs to the given Product identified by the](https://configcat.com/docs/docs/api/reference/get-integrations/.md)

## [ðï¸<!-- --> <!-- -->Create Integration](https://configcat.com/docs/docs/api/reference/create-integration/.md)

[This endpoint creates a new Integration in a specified Product](https://configcat.com/docs/docs/api/reference/create-integration/.md)

## [ðï¸<!-- --> <!-- -->Get Integration](https://configcat.com/docs/docs/api/reference/get-integration/.md)

[This endpoint returns the metadata of an Integration](https://configcat.com/docs/docs/api/reference/get-integration/.md)

## [ðï¸<!-- --> <!-- -->Update Integration](https://configcat.com/docs/docs/api/reference/update-integration/.md)

[This endpoint updates a Config identified by the \`integrationId\` parameter.](https://configcat.com/docs/docs/api/reference/update-integration/.md)

## [ðï¸<!-- --> <!-- -->Delete Integration](https://configcat.com/docs/docs/api/reference/delete-integration/.md)

[This endpoint removes a Integration identified by the \`integrationId\` parameter.](https://configcat.com/docs/docs/api/reference/delete-integration/.md)


---

# Invite Member

```
POST 
/v1/products/:productId/members/invite
```

This endpoint invites a Member into the given Product identified by the `productId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When the invite was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Me

Information about the current user.

<!-- -->

## [ðï¸<!-- --> <!-- -->Get authenticated user details](https://configcat.com/docs/docs/api/reference/get-me/.md)


---

# Members

With these endpoints you can manage your Members.

[Here](https://configcat.com/docs/docs/advanced/team-management/team-management-basics/.md) you can read more about Team Management.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Organization Members](https://configcat.com/docs/docs/api/reference/get-organization-members/.md)

[This endpoint returns the list of Members that belongs](https://configcat.com/docs/docs/api/reference/get-organization-members/.md)

## [ðï¸<!-- --> <!-- -->List Organization Members](https://configcat.com/docs/docs/api/reference/get-organization-members-v-2/.md)

[This endpoint returns the list of Members that belongs](https://configcat.com/docs/docs/api/reference/get-organization-members-v-2/.md)

## [ðï¸<!-- --> <!-- -->List Pending Invitations in Organization](https://configcat.com/docs/docs/api/reference/get-pending-invitations-org/.md)

[This endpoint returns the list of pending invitations within the](https://configcat.com/docs/docs/api/reference/get-pending-invitations-org/.md)

## [ðï¸<!-- --> <!-- -->List Pending Invitations in Product](https://configcat.com/docs/docs/api/reference/get-pending-invitations/.md)

[This endpoint returns the list of pending invitations within the](https://configcat.com/docs/docs/api/reference/get-pending-invitations/.md)

## [ðï¸<!-- --> <!-- -->List Product Members](https://configcat.com/docs/docs/api/reference/get-product-members/.md)

[This endpoint returns the list of Members that belongs](https://configcat.com/docs/docs/api/reference/get-product-members/.md)

## [ðï¸<!-- --> <!-- -->Invite Member](https://configcat.com/docs/docs/api/reference/invite-member/.md)

[This endpoint invites a Member into the given Product identified by the \`productId\` parameter.](https://configcat.com/docs/docs/api/reference/invite-member/.md)

## [ðï¸<!-- --> <!-- -->Update Member Permissions](https://configcat.com/docs/docs/api/reference/add-member-to-group/.md)

[This endpoint updates the permissions of a Member identified by the \`userId\`.](https://configcat.com/docs/docs/api/reference/add-member-to-group/.md)

## [ðï¸<!-- --> <!-- -->Delete Member from Organization](https://configcat.com/docs/docs/api/reference/delete-organization-member/.md)

[This endpoint removes a Member identified by the \`userId\` from the](https://configcat.com/docs/docs/api/reference/delete-organization-member/.md)

## [ðï¸<!-- --> <!-- -->Delete Invitation](https://configcat.com/docs/docs/api/reference/delete-invitation/.md)

[This endpoint removes an Invitation identified by the \`invitationId\` parameter.](https://configcat.com/docs/docs/api/reference/delete-invitation/.md)

## [ðï¸<!-- --> <!-- -->Delete Member from Product](https://configcat.com/docs/docs/api/reference/delete-product-member/.md)

[This endpoint removes a Member identified by the \`userId\` from the](https://configcat.com/docs/docs/api/reference/delete-product-member/.md)


---

# Organizations

With these endpoints you can get useful information about your Organizations. This also can be used to manage your [Products](https://configcat.com/docs/docs/api/reference/products/.md).

[Here](https://configcat.com/docs/docs/organization/.md) you can read more about the Organizations.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Organizations](https://configcat.com/docs/docs/api/reference/get-organizations/.md)

[This endpoint returns the list of the Organizations that belongs to the user.](https://configcat.com/docs/docs/api/reference/get-organizations/.md)


---

# Permission Groups

With these endpoints you can manage your Permission Groups.

[Here](https://configcat.com/docs/docs/advanced/team-management/team-management-basics/.md) you can read more about Permissions.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Permission Groups](https://configcat.com/docs/docs/api/reference/get-permission-groups/.md)

[This endpoint returns the list of the Permission Groups that belongs to the given Product identified by the](https://configcat.com/docs/docs/api/reference/get-permission-groups/.md)

## [ðï¸<!-- --> <!-- -->Create Permission Group](https://configcat.com/docs/docs/api/reference/create-permission-group/.md)

[This endpoint creates a new Permission Group in a specified Product](https://configcat.com/docs/docs/api/reference/create-permission-group/.md)

## [ðï¸<!-- --> <!-- -->Get Permission Group](https://configcat.com/docs/docs/api/reference/get-permission-group/.md)

[This endpoint returns the metadata of a Permission Group](https://configcat.com/docs/docs/api/reference/get-permission-group/.md)

## [ðï¸<!-- --> <!-- -->Update Permission Group](https://configcat.com/docs/docs/api/reference/update-permission-group/.md)

[This endpoint updates a Permission Group identified by the \`permissionGroupId\` parameter.](https://configcat.com/docs/docs/api/reference/update-permission-group/.md)

## [ðï¸<!-- --> <!-- -->Delete Permission Group](https://configcat.com/docs/docs/api/reference/delete-permission-group/.md)

[This endpoint removes a Permission Group identified by the \`permissionGroupId\` parameter.](https://configcat.com/docs/docs/api/reference/delete-permission-group/.md)


---

# Post values

```
POST 
/v2/configs/:configId/environments/:environmentId/values
```

This endpoint batch updates the Feature Flags and Settings of a Config identified by the `configId` parameter in a specified Environment identified by the `environmentId` parameter.

Only those Feature Flags and Settings are updated which are part of the request, all the others are left untouched.

**Important:** As this endpoint is doing a complete replace on those Feature Flags and Settings, which are set in the request. It's important to set every other field that you don't want to change in its original state. Not listing a field means that it will reset.

For example: We have the following resource of a Feature Flag.

```
{
  "settingFormulas": [
    {
      "defaultValue": {
        "boolValue": false
      },
      "targetingRules": [
        {
          "conditions": [
            {
              "userCondition": {
                "comparisonAttribute": "Email",
                "comparator": "sensitiveTextEquals",
                "comparisonValue": {
                  "stringValue": "test@example.com"
                }
              }
            }
          ],
          "percentageOptions": [],
          "value": {
            "boolValue": true
          }
        }
      ],
      "settingId": 1
    }
  ]
}
```

If we send a batch replace request body as below:

```
{ 
  "updateFormulas": [
    {
      "defaultValue": {
        "boolValue": false
      },
      "settingId": 1
    }
  ]
}
```

Then besides that the default value is set to `true`, all Targeting Rules of the related Feature Flag are deleted. So we get a response like this:

```
{
  "settingFormulas": [
    {
      "defaultValue": {
        "boolValue": false
      },
      "targetingRules": [],
      "setting": 
      {
        "settingId": 1
      }
    }
  ]
}
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the updated setting values returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Post values

```
POST 
/v1/configs/:configId/environments/:environmentId/values
```

This endpoint replaces the values of a specified Config's Feature Flags or Settings identified by the `configId` parameter in a specified Environment identified by the `environmentId` parameter.

Only the `value`, `rolloutRules` and `percentageRules` attributes are modifiable by this endpoint.

**Important:** As this endpoint is doing a complete replace, it's important to set every other attribute that you don't want to change in its original state. Not listing one means it will reset.

For example: We have the following resource.

```
{
  "settingValues": [
    {
      "rolloutPercentageItems": [
        {
          "percentage": 30,
          "value": true
        },
        {
          "percentage": 70,
          "value": false
        }
      ],
      "rolloutRules": [],
      "value": false,
      "settingId": 1
    }
  ]
}
```

If we send a replace request body as below:

```
{ 
  "settingValues": [
    {
      "value": true,
      "settingId": 1
    }
  ]
}
```

Then besides that the default value is set to `true`, all the Percentage Rules are deleted. So we get a response like this:

```
{
  "settingValues": [
    {
      "rolloutPercentageItems": [],
      "rolloutRules": [],
      "value": true,
      "setting": 
      {
        "settingId": 1
      }
    }
  ]
}
```

The `rolloutRules` property describes two types of rules:

* **Targeting rules**: When you want to add or update a targeting rule, the `comparator`, `comparisonAttribute`, and `comparisonValue` members are required.
* **Segment rules**: When you want to add add or update a segment rule, the `segmentId` which identifies the desired segment and the `segmentComparator` members are required.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When everything is ok, the updated setting values returned.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Products

With these endpoints you can manage your Products. By gathering the right `productId`, you can also manage [Environments](https://configcat.com/docs/docs/api/reference/environments/.md), [Configs](https://configcat.com/docs/docs/api/reference/configs/.md), [Tags](https://configcat.com/docs/docs/api/reference/tags/.md), [Webhooks](https://configcat.com/docs/docs/api/reference/webhooks/.md), and [Permission Groups](https://configcat.com/docs/docs/api/reference/permission-groups/.md) through the API.

[Here](https://configcat.com/docs/docs/main-concepts/.md#product) you can read more about the concept of Products.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Products](https://configcat.com/docs/docs/api/reference/get-products/.md)

[This endpoint returns the list of the Products that belongs to the user.](https://configcat.com/docs/docs/api/reference/get-products/.md)

## [ðï¸<!-- --> <!-- -->Get Product](https://configcat.com/docs/docs/api/reference/get-product/.md)

[This endpoint returns the metadata of a Product](https://configcat.com/docs/docs/api/reference/get-product/.md)

## [ðï¸<!-- --> <!-- -->Update Product](https://configcat.com/docs/docs/api/reference/update-product/.md)

[This endpoint updates a Product identified by the \`productId\` parameter.](https://configcat.com/docs/docs/api/reference/update-product/.md)

## [ðï¸<!-- --> <!-- -->Delete Product](https://configcat.com/docs/docs/api/reference/delete-product/.md)

[This endpoint removes a Product identified by the \`productId\` parameter.](https://configcat.com/docs/docs/api/reference/delete-product/.md)

## [ðï¸<!-- --> <!-- -->Get Product Preferences](https://configcat.com/docs/docs/api/reference/get-product-preferences/.md)

[This endpoint returns the preferences of a Product](https://configcat.com/docs/docs/api/reference/get-product-preferences/.md)

## [ðï¸<!-- --> <!-- -->Update Product Preferences](https://configcat.com/docs/docs/api/reference/update-product-preferences/.md)

[This endpoint updates the preferences of a Product identified by the \`productId\` parameter.](https://configcat.com/docs/docs/api/reference/update-product-preferences/.md)

## [ðï¸<!-- --> <!-- -->Create Product](https://configcat.com/docs/docs/api/reference/create-product/.md)

[This endpoint creates a new Product in a specified Organization](https://configcat.com/docs/docs/api/reference/create-product/.md)


---

# Replace value

```
PUT 
/v2/settings/:settingKeyOrId/value
```

This endpoint replaces the value and the Targeting Rules of a Feature Flag or Setting in a specified Environment identified by the [SDK key](https://app.configcat.com/sdkkey) passed in the `X-CONFIGCAT-SDKKEY` header.

Only the `defaultValue`, `targetingRules`, and `percentageEvaluationAttribute` fields are modifiable by this endpoint.

**Important:** As this endpoint is doing a complete replace, it's important to set every other field that you don't want to change to its original state. Not listing one means it will reset.

For example: We have the following resource of a Feature Flag.

```
{
  "defaultValue": {
    "boolValue": false
  },
  "targetingRules": [
    {
      "conditions": [
        {
          "userCondition": {
            "comparisonAttribute": "Email",
            "comparator": "sensitiveTextEquals",
            "comparisonValue": {
              "stringValue": "test@example.com"
            }
          }
        }
      ],
      "percentageOptions": [],
      "value": {
        "boolValue": true
      }
    }
  ]
}
```

If we send a replace request body as below:

```
{
  "defaultValue": {
    "boolValue": true
  }
}
```

Then besides that the default served value is set to `true`, all the Targeting Rules are deleted. So we get a response like this:

```
{
  "defaultValue": {
    "boolValue": true
  },
  "targetingRules": []
}
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Replace value

```
PUT 
/v1/settings/:settingKeyOrId/value
```

This endpoint replaces the value of a Feature Flag or Setting in a specified Environment identified by the [SDK key](https://app.configcat.com/sdkkey) passed in the `X-CONFIGCAT-SDKKEY` header.

Only the `value`, `rolloutRules` and `percentageRules` attributes are modifiable by this endpoint.

**Important:** As this endpoint is doing a complete replace, it's important to set every other attribute that you don't want to change to its original state. Not listing one means it will reset.

For example: We have the following resource.

```
{
  "rolloutPercentageItems": [
    {
      "percentage": 30,
      "value": true
    },
    {
      "percentage": 70,
      "value": false
    }
  ],
  "rolloutRules": [],
  "value": false
}
```

If we send a replace request body as below:

```
{
  "value": true
}
```

Then besides that the default served value is set to `true`, all the Percentage Rules are deleted. So we get a response like this:

```
{
  "rolloutPercentageItems": [],
  "rolloutRules": [],
  "value": true
}
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Replace value

```
PUT 
/v2/environments/:environmentId/settings/:settingId/value
```

This endpoint replaces the value and the Targeting Rules of a Feature Flag or Setting in a specified Environment identified by the [SDK key](https://app.configcat.com/sdkkey) passed in the `X-CONFIGCAT-SDKKEY` header.

Only the `defaultValue`, `targetingRules`, and `percentageEvaluationAttribute` fields are modifiable by this endpoint.

**Important:** As this endpoint is doing a complete replace, it's important to set every other field that you don't want to change to its original state. Not listing one means it will reset.

For example: We have the following resource of a Feature Flag.

```
{
  "defaultValue": {
    "boolValue": false
  },
  "targetingRules": [
    {
      "conditions": [
        {
          "userCondition": {
            "comparisonAttribute": "Email",
            "comparator": "sensitiveTextEquals",
            "comparisonValue": {
              "stringValue": "test@example.com"
            }
          }
        }
      ],
      "percentageOptions": [],
      "value": {
        "boolValue": true
      }
    }
  ]
}
```

If we send a replace request body as below:

```
{
  "defaultValue": {
    "boolValue": true
  }
}
```

Then besides that the default served value is set to `true`, all the Targeting Rules are deleted. So we get a response like this:

```
{
  "defaultValue": {
    "boolValue": true
  },
  "targetingRules": []
}
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Replace value

```
PUT 
/v1/environments/:environmentId/settings/:settingId/value
```

This endpoint replaces the whole value of a Feature Flag or Setting in a specified Environment.

Only the `value`, `rolloutRules` and `percentageRules` attributes are modifiable by this endpoint.

**Important:** As this endpoint is doing a complete replace, it's important to set every other attribute that you don't want to change in its original state. Not listing one means it will reset.

For example: We have the following resource.

```
{
  "rolloutPercentageItems": [
    {
      "percentage": 30,
      "value": true
    },
    {
      "percentage": 70,
      "value": false
    }
  ],
  "rolloutRules": [],
  "value": false
}
```

If we send a replace request body as below:

```
{
  "value": true
}
```

Then besides that the default value is set to `true`, all the Percentage Rules are deleted. So we get a response like this:

```
{
  "rolloutPercentageItems": [],
  "rolloutRules": [],
  "value": true
}
```

The `rolloutRules` property describes two types of rules:

* **Targeting rules**: When you want to add or update a targeting rule, the `comparator`, `comparisonAttribute`, and `comparisonValue` members are required.
* **Segment rules**: When you want to add add or update a segment rule, the `segmentId` which identifies the desired segment and the `segmentComparator` members are required.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Replace Flag

```
PUT 
/v1/settings/:settingId
```

This endpoint replaces the whole value of a Feature Flag or Setting identified by the `settingId` parameter.

**Important:** As this endpoint is doing a complete replace, it's important to set every other attribute that you don't want to change in its original state. Not listing one means it will reset.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When the replace was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Replace Webhook

```
PUT 
/v1/webhooks/:webhookId
```

This endpoint replaces the whole value of a Webhook identified by the `webhookId` parameter.

**Important:** As this endpoint is doing a complete replace, it's important to set every other attribute that you don't want to change in its original state. Not listing one means it will reset.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When the replace was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# SDK Keys

With these endpoints you can manage your SDK Keys.

<!-- -->

## [ðï¸<!-- --> <!-- -->Get SDK Key](https://configcat.com/docs/docs/api/reference/get-sdk-keys/.md)

[This endpoint returns the SDK Key for your Config in a specified Environment.](https://configcat.com/docs/docs/api/reference/get-sdk-keys/.md)


---

# Segments

With these endpoints you can manage your Segments. Segments allow you to group your users based on any of their properties. Define user segments and add them to multiple feature flags.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Segments](https://configcat.com/docs/docs/api/reference/get-segments/.md)

[This endpoint returns the list of the Segments that belongs to the given Product identified by the](https://configcat.com/docs/docs/api/reference/get-segments/.md)

## [ðï¸<!-- --> <!-- -->Create Segment](https://configcat.com/docs/docs/api/reference/create-segment/.md)

[This endpoint creates a new Segment in a specified Product](https://configcat.com/docs/docs/api/reference/create-segment/.md)

## [ðï¸<!-- --> <!-- -->Get Segment](https://configcat.com/docs/docs/api/reference/get-segment/.md)

[This endpoint returns the metadata of a Segment](https://configcat.com/docs/docs/api/reference/get-segment/.md)

## [ðï¸<!-- --> <!-- -->Update Segment](https://configcat.com/docs/docs/api/reference/update-segment/.md)

[This endpoint updates a Segment identified by the \`segmentId\` parameter.](https://configcat.com/docs/docs/api/reference/update-segment/.md)

## [ðï¸<!-- --> <!-- -->Delete Segment](https://configcat.com/docs/docs/api/reference/delete-segment/.md)

[This endpoint removes a Segment identified by the \`segmentId\` parameter.](https://configcat.com/docs/docs/api/reference/delete-segment/.md)


---

# Tags

With these endpoints you can manage Tags. Tags are stored under a Product. You can and add a Tag to a Feature Flag or Setting using the [Update Flag](https://configcat.com/docs/docs/api/reference/update-setting/.md) endpoint.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Tags](https://configcat.com/docs/docs/api/reference/get-tags/.md)

[This endpoint returns the list of the Tags in a](https://configcat.com/docs/docs/api/reference/get-tags/.md)

## [ðï¸<!-- --> <!-- -->Create Tag](https://configcat.com/docs/docs/api/reference/create-tag/.md)

[This endpoint creates a new Tag in a specified Product](https://configcat.com/docs/docs/api/reference/create-tag/.md)

## [ðï¸<!-- --> <!-- -->List Settings by Tag](https://configcat.com/docs/docs/api/reference/get-settings-by-tag/.md)

[This endpoint returns the list of the Settings that](https://configcat.com/docs/docs/api/reference/get-settings-by-tag/.md)

## [ðï¸<!-- --> <!-- -->Get Tag](https://configcat.com/docs/docs/api/reference/get-tag/.md)

[This endpoint returns the metadata of a Tag](https://configcat.com/docs/docs/api/reference/get-tag/.md)

## [ðï¸<!-- --> <!-- -->Update Tag](https://configcat.com/docs/docs/api/reference/update-tag/.md)

[This endpoint updates a Tag identified by the \`tagId\` parameter.](https://configcat.com/docs/docs/api/reference/update-tag/.md)

## [ðï¸<!-- --> <!-- -->Delete Tag](https://configcat.com/docs/docs/api/reference/delete-tag/.md)

[This endpoint deletes a Tag identified by the \`tagId\` parameter. To remove a Tag from a Feature Flag or Setting use the \[Update Flag\](/docs/api/reference/update-setting) endpoint.](https://configcat.com/docs/docs/api/reference/delete-tag/.md)


---

# Update Config

```
PUT 
/v1/configs/:configId
```

This endpoint updates a Config identified by the `configId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update Environment

```
PUT 
/v1/environments/:environmentId
```

This endpoint updates an Environment identified by the `environmentId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update Integration

```
PUT 
/v1/integrations/:integrationId
```

This endpoint updates a Config identified by the `integrationId` parameter.

The Parameters dictionary differs for each IntegrationType:

* Datadog

  <!-- -->

  * `apikey`: Required. Datadog API key.
  * `site`: Datadog site. Available values: `Us`, `Eu`, `Us1Fed`, `Us3`, `Us5`. Default: `Us`.

* Slack
  <br />
  <!-- -->
  Connecting the Slack integration through the Public Management API will not post messages with the ConfigCat Feature Flags Slack app but with an incoming webhook.
  <!-- -->
  * `incoming_webhook.url`: Required. The [incoming webhook URL](https://api.slack.com/messaging/webhooks) where the integration should post messages.

* Amplitude

  <!-- -->

  * `apiKey`: Required. Amplitude API Key.
  * `secretKey`: Required. Amplitude Secret Key.

* Mixpanel

  <!-- -->

  * `serviceAccountUserName`: Required. Mixpanel Service Account Username.
  * `serviceAccountSecret`: Required. Mixpanel Service Account Secret.
  * `projectId`: Required. Mixpanel Project ID.
  * `server`: Mixpanel Server. Available values: `StandardServer`, `EUResidencyServer`. Default: `StandardServer`.

* Twilio Segment

  <!-- -->

  * `writeKey`: Required. Twilio Segment Write Key.
  * `server`: Twilio Segment Server. Available values: `Us`, `Eu`. Default: `Us`.

* PubNub (work in progress)

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update Permission Group

```
PUT 
/v1/permissions/:permissionGroupId
```

This endpoint updates a Permission Group identified by the `permissionGroupId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update predefined variations (Beta)

```
PUT 
/v1/settings/:settingId/predefined-variations
```

This endpoint updates the predefined variations for a Feature Flag or Setting identified by the `settingId` parameter.

**Important:** You can only update a predefined variation's value if it is not used anywhere in your feature flags.

**Beta feature:** The feature is currently in closed beta state and cannot be used.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When the update was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update Product Preferences

```
POST 
/v1/products/:productId/preferences
```

This endpoint updates the preferences of a Product identified by the `productId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When the update was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update Product

```
PUT 
/v1/products/:productId
```

This endpoint updates a Product identified by the `productId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update Segment

```
PUT 
/v1/segments/:segmentId
```

This endpoint updates a Segment identified by the `segmentId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update value

```
PATCH 
/v2/settings/:settingKeyOrId/value
```

This endpoint updates the value of a Feature Flag or Setting with a collection of [JSON Patch](https://jsonpatch.com) operations in a specified Environment.

Only the `defaultValue`, `targetingRules`, and `percentageEvaluationAttribute` fields are modifiable by this endpoint.

The advantage of using JSON Patch is that you can describe individual update operations on a resource without touching attributes that you don't want to change. It supports collection reordering, so it also can be used for reordering the targeting rules of a Feature Flag or Setting.

For example: We have the following resource of a Feature Flag.

```
{
  "defaultValue": {
    "boolValue": false
  },
  "targetingRules": [
    {
      "conditions": [
        {
          "userCondition": {
            "comparisonAttribute": "Email",
            "comparator": "sensitiveTextEquals",
            "comparisonValue": {
              "stringValue": "test@example.com"
            }
          }
        }
      ],
      "percentageOptions": [],
      "value": {
        "boolValue": true
      }
    }
  ]
}
```

If we send an update request body as below:

```
[
  {
    "op": "replace",
    "path": "/targetingRules/0/value/boolValue",
    "value": true
  }
]
```

Only the first Targeting Rule's `value` is going to be set to `false` and all the other fields are remaining unchanged.

So we get a response like this:

```
{
  "defaultValue": {
    "boolValue": false
  },
  "targetingRules": [
    {
      "conditions": [
        {
          "userCondition": {
            "comparisonAttribute": "Email",
            "comparator": "sensitiveTextEquals",
            "comparisonValue": {
              "stringValue": "test@example.com"
            }
          }
        }
      ],
      "percentageOptions": [],
      "value": {
        "boolValue": false
      }
    }
  ]
}
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 204
* 400
* 404
* 429

When no change applied on the resource.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update value

```
PATCH 
/v1/settings/:settingKeyOrId/value
```

This endpoint updates the value of a Feature Flag or Setting with a collection of [JSON Patch](https://jsonpatch.com) operations in a specified Environment identified by the [SDK key](https://app.configcat.com/sdkkey) passed in the `X-CONFIGCAT-SDKKEY` header.

Only the `value`, `rolloutRules` and `percentageRules` attributes are modifiable by this endpoint.

The advantage of using JSON Patch is that you can describe individual update operations on a resource without touching attributes that you don't want to change. It supports collection reordering, so it also can be used for reordering the targeting rules of a Feature Flag or Setting.

For example: We have the following resource.

```
{
  "rolloutPercentageItems": [
    {
      "percentage": 30,
      "value": true
    },
    {
      "percentage": 70,
      "value": false
    }
  ],
  "rolloutRules": [],
  "value": false
}
```

If we send an update request body as below:

```
[
  {
    "op": "replace",
    "path": "/value",
    "value": true
  }
]
```

Only the default served value is going to be set to `true` and all the Percentage Rules are remaining unchanged. So we get a response like this:

```
{
  "rolloutPercentageItems": [
    {
      "percentage": 30,
      "value": true
    },
    {
      "percentage": 70,
      "value": false
    }
  ],
  "rolloutRules": [],
  "value": true
}
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 204
* 400
* 404
* 429

When no change applied on the resource.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update value

```
PATCH 
/v2/environments/:environmentId/settings/:settingId/value
```

This endpoint updates the value of a Feature Flag or Setting with a collection of [JSON Patch](https://jsonpatch.com) operations in a specified Environment.

Only the `defaultValue`, `targetingRules`, and `percentageEvaluationAttribute` fields are modifiable by this endpoint.

The advantage of using JSON Patch is that you can describe individual update operations on a resource without touching attributes that you don't want to change. It supports collection reordering, so it also can be used for reordering the targeting rules of a Feature Flag or Setting.

For example: We have the following resource of a Feature Flag.

```
{
  "defaultValue": {
    "boolValue": false
  },
  "targetingRules": [
    {
      "conditions": [
        {
          "userCondition": {
            "comparisonAttribute": "Email",
            "comparator": "sensitiveTextEquals",
            "comparisonValue": {
              "stringValue": "test@example.com"
            }
          }
        }
      ],
      "percentageOptions": [],
      "value": {
        "boolValue": true
      }
    }
  ]
}
```

If we send an update request body as below:

```
[
  {
    "op": "replace",
    "path": "/targetingRules/0/value/boolValue",
    "value": true
  }
]
```

Only the first Targeting Rule's `value` is going to be set to `false` and all the other fields are remaining unchanged.

So we get a response like this:

```
{
  "defaultValue": {
    "boolValue": false
  },
  "targetingRules": [
    {
      "conditions": [
        {
          "userCondition": {
            "comparisonAttribute": "Email",
            "comparator": "sensitiveTextEquals",
            "comparisonValue": {
              "stringValue": "test@example.com"
            }
          }
        }
      ],
      "percentageOptions": [],
      "value": {
        "boolValue": false
      }
    }
  ]
}
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 204
* 400
* 404
* 429

When the patch was successful.

When no change applied on the resource.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update value

```
PATCH 
/v1/environments/:environmentId/settings/:settingId/value
```

This endpoint updates the value of a Feature Flag or Setting with a collection of [JSON Patch](https://jsonpatch.com) operations in a specified Environment.

Only the `value`, `rolloutRules` and `percentageRules` attributes are modifiable by this endpoint.

The advantage of using JSON Patch is that you can describe individual update operations on a resource without touching attributes that you don't want to change. It supports collection reordering, so it also can be used for reordering the targeting rules of a Feature Flag or Setting.

For example: We have the following resource.

```
{
  "rolloutPercentageItems": [
    {
      "percentage": 30,
      "value": true
    },
    {
      "percentage": 70,
      "value": false
    }
  ],
  "rolloutRules": [],
  "value": false
}
```

If we send an update request body as below:

```
[
  {
    "op": "replace",
    "path": "/value",
    "value": true
  }
]
```

Only the default value is going to be set to `true` and all the Percentage Rules are remaining unchanged. So we get a response like this:

```
{
  "rolloutPercentageItems": [
    {
      "percentage": 30,
      "value": true
    },
    {
      "percentage": 70,
      "value": false
    }
  ],
  "rolloutRules": [],
  "value": true
}
```

The `rolloutRules` property describes two types of rules:

* **Targeting rules**: When you want to add or update a targeting rule, the `comparator`, `comparisonAttribute`, and `comparisonValue` members are required.
* **Segment rules**: When you want to add add or update a segment rule, the `segmentId` which identifies the desired segment and the `segmentComparator` members are required.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 204
* 400
* 404
* 429

When the patch was successful.

When no change applied on the resource.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update Flag

```
PATCH 
/v1/settings/:settingId
```

This endpoint updates the metadata of a Feature Flag or Setting with a collection of [JSON Patch](https://jsonpatch.com) operations in a specified Config.

Only the `name`, `hint` and `tags` attributes are modifiable by this endpoint. The `tags` attribute is a simple collection of the [tag IDs](https://configcat.com/docs/docs/api/reference/get-tags/.md) attached to the given setting.

The advantage of using JSON Patch is that you can describe individual update operations on a resource without touching attributes that you don't want to change.

For example: We have the following resource.

```
{
  "settingId": 5345,
  "key": "myGrandFeature",
  "name": "Tihs is a naem with soem typos.",
  "hint": "This flag controls my grandioso feature.",
  "settingType": "boolean",
  "tags": [
    {
      "tagId": 0, 
      "name": "sample tag", 
      "color": "whale"
    }
  ]
}
```

If we send an update request body as below (it changes the `name` and adds the already existing tag with the id `2`):

```
[
  {
    "op": "replace", 
    "path": "/name", 
    "value": "This is the name without typos."
  }, 
  {
    "op": "add", 
    "path": "/tags/-", 
    "value": 2
  }
]
```

Only the `name` and `tags` are updated and all the other attributes remain unchanged. So we get a response like this:

```
{
  "settingId": 5345, 
  "key": "myGrandFeature", 
  "name": "This is the name without typos.", 
  "hint": "This flag controls my grandioso feature.", 
  "settingType": "boolean", 
  "tags": [
    {
      "tagId": 0, 
      "name": "sample tag", 
      "color": "whale"
    }, 
    {
      "tagId": 2, 
      "name": "another tag", 
      "color": "koala"
    }
  ]
}
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When the update was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update Tag

```
PUT 
/v1/tags/:tagId
```

This endpoint updates a Tag identified by the `tagId` parameter.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update Webhook

```
PATCH 
/v1/webhooks/:webhookId
```

This endpoint updates a Webhook identified by the `webhookId` parameter with a collection of [JSON Patch](https://jsonpatch.com) operations.

The advantage of using JSON Patch is that you can describe individual update operations on a resource without touching attributes that you don't want to change.

For example: We have the following resource.

```
{
  "webhookId": 6,
  "url": "https://example.com/hook",
  "httpMethod": "post",
  "content": "null",
  "webHookHeaders": []
}
```

If we send an update request body as below (it changes the `content` field and adds a new HTTP header):

```
[
  {
    "op": "replace", 
    "path": "/content", 
    "value": "Some webhook content."
  }, 
  {
    "op": "add", 
    "path": "/webHookHeaders/-", 
    "value": {
      "key": "X-Custom-Header", 
      "value": "Custom header value"
    }
  }
]
```

Only the `content` and `webHookHeaders` are updated and all the other attributes remain unchanged. So we get a response like this:

```
{
  "webhookId": 6,
  "url": "https://example.com/hook",
  "httpMethod": "post", 
  "content": "Some webhook content.", 
  "webHookHeaders": [
    {
      "key": "X-Custom-Header", 
      "value": "Custom header value", 
      "isSecure": false
    }
  ]
}
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

When the update was successful.

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Upload References

```
POST 
/v1/code-references
```

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 404
* 429

OK

Bad request.

Not found.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Webhooks

With these endpoints you can manage Webhooks.

[Here](https://configcat.com/docs/docs/advanced/notifications-webhooks/.md) you can read more about the concept of Webhooks.

<!-- -->

## [ðï¸<!-- --> <!-- -->List Webhooks](https://configcat.com/docs/docs/api/reference/get-webhooks/.md)

[This endpoint returns the list of the Webhooks that belongs to the given Product identified by the](https://configcat.com/docs/docs/api/reference/get-webhooks/.md)

## [ðï¸<!-- --> <!-- -->Get Webhook](https://configcat.com/docs/docs/api/reference/get-webhook/.md)

[This endpoint returns the metadata of a Webhook](https://configcat.com/docs/docs/api/reference/get-webhook/.md)

## [ðï¸<!-- --> <!-- -->Replace Webhook](https://configcat.com/docs/docs/api/reference/replace-webhook/.md)

[This endpoint replaces the whole value of a Webhook identified by the \`webhookId\` parameter.](https://configcat.com/docs/docs/api/reference/replace-webhook/.md)

## [ðï¸<!-- --> <!-- -->Update Webhook](https://configcat.com/docs/docs/api/reference/update-webhook/.md)

[This endpoint updates a Webhook identified by the \`webhookId\` parameter with a collection of \[JSON Patch\](https://jsonpatch.com) operations.](https://configcat.com/docs/docs/api/reference/update-webhook/.md)

## [ðï¸<!-- --> <!-- -->Delete Webhook](https://configcat.com/docs/docs/api/reference/delete-webhook/.md)

[This endpoint removes a Webhook identified by the \`webhookId\` parameter.](https://configcat.com/docs/docs/api/reference/delete-webhook/.md)

## [ðï¸<!-- --> <!-- -->Get Webhook Signing Keys](https://configcat.com/docs/docs/api/reference/get-webhook-signing-keys/.md)

[This endpoint returns the signing keys of a Webhook](https://configcat.com/docs/docs/api/reference/get-webhook-signing-keys/.md)

## [ðï¸<!-- --> <!-- -->Create Webhook](https://configcat.com/docs/docs/api/reference/create-webhook/.md)

[This endpoint creates a new Webhook in a specified Product](https://configcat.com/docs/docs/api/reference/create-webhook/.md)


---

# Zombie (stale) flags

List Zombie (stale) flags

<!-- -->

## [ðï¸<!-- --> <!-- -->List Zombie (stale) flags for Product](https://configcat.com/docs/docs/api/reference/get-staleflags/.md)

[This endpoint returns the list of Zombie (stale) flags for a given Product](https://configcat.com/docs/docs/api/reference/get-staleflags/.md)


---

Version: v1

# ConfigCat User Provisioning (SCIM) API

The purpose of this API is to allow user and group synchronization from your Identity Provider into a ConfigCat Organization via the SCIM protocol.

[Here](https://configcat.com/docs/advanced/team-management/scim/scim-overview/) you can read more about the user provisioning process.

**Base API URL**: `https://scim-api.configcat.com`

## OpenAPI Specification[â](#openapi-specification "Direct link to OpenAPI Specification")

The complete specification is publicly available in the following formats:

* [OpenAPI v3](https://scim-api.configcat.com/openapi/v1/openapi.json)

## Throttling and rate limits[â](#throttling-and-rate-limits "Direct link to Throttling and rate limits")

All the rate limited API calls are returning information about the current rate limit period in the following HTTP headers:

| Header                 | Description                                                                |
| ---------------------- | -------------------------------------------------------------------------- |
| X-Rate-Limit-Remaining | The maximum number of requests remaining in the current rate limit period. |
| X-Rate-Limit-Reset     | The time when the current rate limit period resets.                        |

When the rate limit is exceeded by a request, the API returns with a `HTTP 429 - Too many requests` status along with a `Retry-After` HTTP header.

## Authentication[â](#authentication "Direct link to Authentication")

* HTTP: Bearer Auth

To authenticate with the API you have to fill the `Authorization` HTTP request header with your SCIM token.

You can retrieve your credentials on the [Authentication & Provisioning page](https://app.configcat.com/organization/authentication). Example: `Bearer 12345abcdef`

| Security Scheme Type:      | http   |
| -------------------------- | ------ |
| HTTP Authorization Scheme: | bearer |

### Contact

ConfigCat: <support@configcat.com>

URL: <https://configcat.com>

### Terms of Service

<https://configcat.com/policies>


---

# Create Group

```
POST 
/v2/:organizationId/Groups
```

This endpoint creates a new group with the given attributes.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 401
* 409
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Create User

```
POST 
/v2/:organizationId/Users
```

This endpoint creates a new user with the given attributes.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 201
* 400
* 401
* 409
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete Group

```
DELETE 
/v2/:organizationId/Groups/:groupId
```

This endpoint deletes an existing group.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 401
* 404
* 429

No content.

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Delete User

```
DELETE 
/v2/:organizationId/Users/:userId
```

This endpoint deletes an existing user.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 204
* 401
* 404
* 429

No content.

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Group

```
GET 
/v2/:organizationId/Groups/:groupId
```

This endpoint returns a group.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 401
* 404
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Groups

```
GET 
/v2/:organizationId/Groups
```

This endpoint returns a list of groups.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 401
* 404
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Resource Type

```
GET 
/v2/:organizationId/ResourceTypes/:resourceTypeId
```

This endpoint returns a resource type.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 401
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Resource Types

```
GET 
/v2/:organizationId/ResourceTypes
```

This endpoint returns the supported resource types.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 401
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Schema

```
GET 
/v2/:organizationId/Schemas/:schemaId
```

This endpoint returns a schema.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 401
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Schemas

```
GET 
/v2/:organizationId/Schemas
```

This endpoint returns the supported schema list.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 401
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Service Provider Config

```
GET 
/v2/:organizationId/ServiceProviderConfig
```

This endpoint returns the service provider config.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 401
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get User

```
GET 
/v2/:organizationId/Users/:userId
```

This endpoint returns a user.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 401
* 404
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Get Users

```
GET 
/v2/:organizationId/Users
```

This endpoint returns a list of users.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 401
* 404
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Replace Group

```
PUT 
/v2/:organizationId/Groups/:groupId
```

This endpoint updates an existing group by replacing all attributes present in the request.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 401
* 404
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Replace User

```
PUT 
/v2/:organizationId/Users/:userId
```

This endpoint updates an existing user by replacing all attributes present in the request.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 400
* 401
* 404
* 429

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update Group

```
PATCH 
/v2/:organizationId/Groups/:groupId
```

This endpoint updates an existing group by applying JSON Patch operations.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 204
* 400
* 401
* 404
* 429

No content.

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

# Update User

```
PATCH 
/v2/:organizationId/Users/:userId
```

This endpoint updates an existing user by applying JSON Patch operations.

## Request[â](#request "Direct link to Request")

## Responses[â](#responses "Direct link to Responses")

* 200
* 204
* 400
* 401
* 404
* 429

No content.

Unauthorized. In case of the SCIM token is invalid.

Too many requests. In case of the request rate exceeds the rate limits.


---

### Basics

Familiarize with ConfigCat basics.

* [Getting started](https://configcat.com/docs/docs/getting-started/.md)
* [Main Concepts](https://configcat.com/docs/docs/main-concepts/.md)
* [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md)
* [What is a config JSON download?](https://configcat.com/docs/docs/requests/.md)
* [Network Traffic](https://configcat.com/docs/docs/network-traffic/.md)
* [Plans, Purchase & Billing](https://configcat.com/docs/docs/purchase/.md)
* [Organization & Roles](https://configcat.com/docs/docs/organization/.md)
* [News & Product Updates](https://configcat.com/docs/docs/news/.md)
* [FAQ](https://configcat.com/docs/docs/faq/.md)
* [Glossary](https://configcat.com/docs/docs/glossary/.md)


---

# Polling modes & Caching

There are 3 different ways (polling modes) to control caching.

## Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

In auto polling mode, the ConfigCat SDK downloads the latest feature flags and settings from the ConfigCat CDN automatically and stores them in the cache. By default, this happens every 60 seconds. You can set the polling interval to any value between 1 and 2,147,483 seconds.

## Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

In lazy loading mode, the ConfigCat SDK downloads the latest feature flags and settings from the ConfigCat CDN only if they are not already present in the cache, or if the cache has expired. By default, the cache Time To Live (TTL) value is 60 seconds. You can set it to any value between 1 and 2,147,483,647 seconds.

## Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the feature flags and settings are downloaded from the ConfigCat CDN. The ConfigCat SDK will not download them automatically. You can (and should) update the cache manually, by calling a `forceRefresh()` - this will download the latest feature flags and settings and update the cache.

This animation explains the different polling modes:

## Caching[â](#caching "Direct link to Caching")

ConfigCat SDKs in their default setup store all the information they need for feature flag evaluation in memory. This behavior is extendable with custom cache implementations that you can use for pointing the SDK to your own data storage.

The main reason for caching is to accelerate serving feature flag evaluation requests when your application is in a stateless environment or frequently restarts. When the SDK notices that it has a valid cache entry to work with, it will use the data from the cache rather than initiating a new HTTP request towards ConfigCat. The cache's validity is based on the polling interval in case of [auto polling](#auto-polling-default) or on the TTL in case of [lazy loading](#lazy-loading).

info

See the [SDK specific docs](https://configcat.com/docs/docs/sdk-reference/overview/.md) for your desired platform to learn how to use custom cache implementations.

### Offline mode[â](#offline-mode "Direct link to Offline mode")

ConfigCat SDKs have the capability to go offline. In offline mode, they work only from the configured cache and never communicate with ConfigCat over HTTP.

This allows you to set up a centralized cache that only one online ConfigCat SDK writes, but serves many offline ones.

info

See the [SDK specific docs](https://configcat.com/docs/docs/sdk-reference/overview/.md) for your desired platform to learn how to enable offline mode.

### Shared cache[â](#shared-cache "Direct link to Shared cache")

As of certain versions, ConfigCat SDKs support using a shared cache. To achieve that, each SDK constructs the key for identifying a specific cache entry based on the SDK key passed at initialization. This means each platform specific SDK that uses the same SDK key will use the same cache entry.

Mixing this behavior with [offline mode](#offline-mode), you can have a centralized shared cache that serves many SDKs regardless of what platform they run on.

Support for shared caching was introduced in these SDK versions:

| SDK                                                                             | Version                                                           |
| ------------------------------------------------------------------------------- | ----------------------------------------------------------------- |
| .NET                                                                            | >=Â [v8.1.0](https://github.com/configcat/.net-sdk/releases)       |
| Android (Java)                                                                  | >=Â [v9.0.0](https://github.com/configcat/android-sdk/releases)    |
| C++                                                                             | >=Â [v3.0.0](https://github.com/configcat/cpp-sdk/releases)        |
| Dart (Flutter)                                                                  | >=Â [v3.0.0](https://github.com/configcat/dart-sdk/releases)       |
| Elixir                                                                          | >=Â [v3.0.0](https://github.com/configcat/elixir-sdk/releases)     |
| Go                                                                              | >=Â [v8.0.0](https://github.com/configcat/go-sdk/releases)         |
| Java                                                                            | >=Â [v8.2.0](https://github.com/configcat/java-sdk/releases)       |
| JavaScript (Browser, Bun, Chromium Extension, Cloudflare Worker, Deno, Node.js) | >=Â [v1.0.0](https://github.com/configcat/js-unified-sdk/releases) |
| JS - Legacy                                                                     | >=Â [v8.0.0](https://github.com/configcat/js-sdk/releases)         |
| JS SSR - Legacy                                                                 | >=Â [v7.0.0](https://github.com/configcat/js-ssr-sdk/releases)     |
| Kotlin                                                                          | >=Â [v2.0.0](https://github.com/configcat/kotlin-sdk/releases)     |
| Node.js - Legacy                                                                | >=Â [v10.0.0](https://github.com/configcat/node-sdk/releases)      |
| PHP                                                                             | >=Â [v8.0.0](https://github.com/configcat/php-sdk/releases)        |
| Python                                                                          | >=Â [v8.0.0](https://github.com/configcat/python-sdk/releases)     |
| React                                                                           | >=Â [v3.0.0](https://github.com/configcat/react-sdk/releases)      |
| Ruby                                                                            | >=Â [v7.0.0](https://github.com/configcat/ruby-sdk/releases)       |
| Rust                                                                            | >=Â [v0.1.0](https://github.com/configcat/rust-sdk/releases)       |
| Swift (iOS)                                                                     | >=Â [v10.0.0](https://github.com/configcat/swift-sdk/releases)     |


---

# Command Line Interface (CLI)

The [ConfigCat Command Line Interface (CLI)](https://github.com/configcat/cli) allows you to interact with the [Public Management API](https://configcat.com/docs/docs/api/reference/configcat-public-management-api/.md) via the command line. It supports most functionality found on the ConfigCat Dashboard. You can manage ConfigCat resources like Feature Flags, Targeting / Percentage rules, Products, Configs, Environments, and more.

The CLI also has the ability to [scan your source code](https://configcat.com/docs/docs/advanced/code-references/overview/.md) for feature flag and setting usage and upload the found code references to ConfigCat.

Finally, the CLI provides a few useful utilities, such as validating a config JSON file, downloading one from the ConfigCat CDN by SDK Key, etc. These can come in handy when you use [flag overrides](https://configcat.com/docs/docs/sdk-reference/js/overview/.md#flag-overrides) in your application.

```
configcat
  This is the Command Line Tool of ConfigCat.
  ConfigCat is a hosted feature flag service: https://configcat.com
  For more information, see the documentation here: https://configcat.com/docs/advanced/cli

Usage:
  configcat [command] [options]

Options:
  -v, --verbose           Print detailed execution information
  -ni, --non-interactive  Turn off progress rendering and interactive features
  --version               Show version information
  -?, -h, --help          Show help and usage information

Commands:
  setup                        Setup the CLI with Public Management API host and credentials
  ls                           List all Product, Config, and Environment IDs
  p, product                   Manage Products
  c, config                    Manage Configs
  webhook, wh                  Manage Webhooks
  e, environment               Manage Environments
  f, flag, s, setting          Manage Feature Flags & Settings
  f2, flag-v2, s2, setting-v2  Manage V2 Feature Flags & Settings
  seg, segment                 Manage Segments
  permission-group, pg         Manage Permission Groups
  m, member                    Manage Members
  t, tag                       Manage Tags
  k, sdk-key                   List SDK Keys
  scan <directory>             Scan files for Feature Flag & Setting usages
  config-json                  Config JSON-related utilities
  w, workspace                 Manage the CLI workspace. When set, the CLI's interactive mode
                               filters Product and Config selectors by the values set in the
                               workspace

Use "configcat [command] -?" for more information about a command.
```

## Reference[â](#reference "Direct link to Reference")

See the [command reference documentation](https://configcat.github.io/cli/) for more information about each available command.

## Getting started[â](#getting-started "Direct link to Getting started")

The following instructions will guide you through the first steps to start using this tool.

### Installation[â](#installation "Direct link to Installation")

You can install the CLI on multiple operating systems using the following sources.

**Homebrew (macOS / Linux)**

Install the CLI with [Homebrew](https://brew.sh) from [ConfigCat's tap](https://github.com/configcat/homebrew-tap) by executing the following command:

```
brew tap configcat/tap
brew install configcat
```

**Snap (Linux)**

Install the CLI with [Snapcraft](https://snapcraft.io) by executing the following command:

```
sudo snap install configcat
```

**Scoop (Windows)**

Install the CLI with [Scoop](https://scoop.sh) from [ConfigCat's bucket](https://github.com/configcat/scoop-configcat) by executing the following command:

```
scoop bucket add configcat https://github.com/configcat/scoop-configcat
scoop install configcat
```

**Chocolatey (Windows)**

Install the CLI with [Chocolatey](https://chocolatey.org/) by executing the following command:

```
choco install configcat
```

**.NET tool / NuGet.org**

The CLI can be installed as a [.NET tool](https://learn.microsoft.com/en-us/dotnet/core/tools/global-tools) via the .NET SDK.

```
dotnet tool install -g configcat-cli
```

After installing, you can execute the CLI using the `configcat` command:

```
configcat scan "/repository" --print --config-id <CONFIG-ID>
```

**Docker**

The CLI can be executed from a [Docker](https://www.docker.com/) image.

```
docker pull configcat/cli
```

An example of how to scan a repository for feature flag & setting references with the docker image.

```
docker run --rm \
    --env CONFIGCAT_API_HOST=<API-HOST> \
    --env CONFIGCAT_API_USER=<API-USER> \
    --env CONFIGCAT_API_PASS=<API-PASSWORD> \
    -v /path/to/repository:/repository \
  configcat/cli scan "/repository" --print --config-id <CONFIG-ID>
```

**Install Script**

On Unix platforms, you can install the CLI by executing an install script.

```
curl -fsSL "https://raw.githubusercontent.com/configcat/cli/main/scripts/install.sh" | bash
```

By default, the script downloads the OS specific artifact from the latest [GitHub Release](https://github.com/configcat/cli/releases) with `curl` and moves it into the `/usr/local/bin` directory.

It might happen that you don't have permissions to write into `/usr/local/bin`, then you should execute the install script with `sudo`.

```
curl -fsSL "https://raw.githubusercontent.com/configcat/cli/main/scripts/install.sh" | sudo bash
```

The script accepts the following input parameters:

| Parameter         | Description                                      | Default value    |
| ----------------- | ------------------------------------------------ | ---------------- |
| `-d`, `--dir`     | The directory where the CLI should be installed. | `/usr/local/bin` |
| `-v`, `--version` | The desired version to install.                  | `latest`         |
| `-a`, `--arch`    | The desired architecture to install.             | `x64`            |

Available **architecture** values for Linux: `x64`, `musl-x64`, `arm`, `arm64`.

Available **architecture** values for macOS: `x64`, `arm64`.

**Script usage examples**:

*Custom installation directory*:

```
curl -fsSL "https://raw.githubusercontent.com/configcat/cli/main/scripts/install.sh" | bash -s -- -d=/path/to/install
```

*Install a different version*:

```
curl -fsSL "https://raw.githubusercontent.com/configcat/cli/main/scripts/install.sh" | bash -s -- -v=1.4.2
```

*Install with custom architecture*:

```
curl -fsSL "https://raw.githubusercontent.com/configcat/cli/main/scripts/install.sh" | bash -s -- -a=arm
```

**Standalone executables**

You can download the executables directly from [GitHub Releases](https://github.com/configcat/cli/releases) for your desired platform.

### Setup[â](#setup "Direct link to Setup")

After a successful installation, the CLI must be set up with your [ConfigCat Public Management API credentials](https://app.configcat.com/my-account/public-api-credentials).

You can do this by using the `configcat setup` command.

![interactive](/docs/assets/cli/cli-setup.gif)

#### Environment variables[â](#environment-variables "Direct link to Environment variables")

Besides the `setup` command above, the CLI can read your credentials from the following environment variables.

| Name                 | Description                              |
| -------------------- | ---------------------------------------- |
| `CONFIGCAT_API_HOST` | API host (default: `api.configcat.com`). |
| `CONFIGCAT_API_USER` | API basic auth user name.                |
| `CONFIGCAT_API_PASS` | API basic auth password.                 |

caution

When any of these environment variables are set, the CLI will use them over the local values set by the `configcat setup` command.

## Modes[â](#modes "Direct link to Modes")

The CLI supports both interactive and argument driven execution. When no arguments provided for a command and user input is enabled (stdout is not redirected), the CLI automatically activates interactive mode.

### Interactive[â](#interactive "Direct link to Interactive")

![interactive](/docs/assets/cli/cli-flag-create.gif)

### With arguments[â](#with-arguments "Direct link to With arguments")

The same operation with command arguments would look like this:

```
configcat flag-v2 create \
  --config-id <config-id> \
  --name "My awesome feature" \
  --hint "This is my awesome feature" \
  --key my_awesome_feature
  --type boolean \
  --tag-ids <tag-id-1> <tag-id-2> \
  --init-values-per-environment <environment-id>:<initial-value> \
```

info

Each `create` command writes the newly created resource's ID to the standard output so you can save that for further operations.

Example:

```
#!/bin/bash

ORGANIZATION_ID="<your-organization-id>"
PRODUCT_ID=$(configcat product create -o $ORGANIZATION_ID -n "<product-name>")
CONFIG_ID=$(configcat config create -p $PRODUCT_ID -n "<config-name>")
```

info

You can change the output format of several commands' result to JSON with the `--json` option, like: `configcat flag ls --json`. See more about these commands in the [command reference documentation](https://configcat.github.io/cli/).

## Scan & upload code references[â](#scan--upload-code-references "Direct link to Scan & upload code references")

The CLI has the ability to scan your source code for feature flag and setting usage and upload the found code references to ConfigCat. You can read more about this feature [here](https://configcat.com/docs/docs/advanced/code-references/overview/.md).

## Examples[â](#examples "Direct link to Examples")

Here are a few examples showing the true power of the CLI.

### Create a feature flag[â](#create-a-feature-flag "Direct link to Create a feature flag")

The following example shows how you can create a feature flag in a specific config.

![create flag](/docs/assets/cli/cli-flag-create.gif)

### Value update[â](#value-update "Direct link to Value update")

The following example shows how you can update the value of a feature flag in a specific environment.

![flag value update](/docs/assets/cli/cli-flag-update.gif)

### Add targeting rules[â](#add-targeting-rules "Direct link to Add targeting rules")

The following example shows how you can add targeting rules to a feature flag.

![flag targeting add](/docs/assets/cli/cli-flag-targeting-add.gif)

### Add percentage options[â](#add-percentage-options "Direct link to Add percentage options")

The following example shows how you can set percentage options in a feature flag.

![flag percentage add](/docs/assets/cli/cli-flag-targeting-percentage.gif)


---

# Azure DevOps - Scan your source code for feature flags

This section describes how to use the [ConfigCat CLI](https://configcat.com/docs/docs/advanced/cli/.md) in [Azure DevOps Pipelines](https://docs.microsoft.com/en-us/azure/devops/pipelines/?view=azure-devops) to automatically scan your source code for feature flag and setting usages and upload the found code references to ConfigCat.

## Setup[â](#setup "Direct link to Setup")

1. Create a new [ConfigCat Management API credential](https://app.configcat.com/my-account/public-api-credentials) and store its values in Azure DevOps [Pipeline Variables](https://docs.microsoft.com/en-us/azure/devops/pipelines/process/variables) with the following names: `CONFIGCAT_API_USER`, `CONFIGCAT_API_PASS`.

   ![Azure secrets](/docs/assets/cli/scan/azure_secrets.png)

2. Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

3. Create a new or open your existing `azure-pipelines.yml` file, and add the following [job](https://docs.microsoft.com/en-us/azure/devops/pipelines/yaml-schema#job) to your `jobs` definition. Don't forget to replace the `PASTE-YOUR-CONFIG-ID-HERE` value with your actual Config ID.

   ```
   - job: configcat_scan_and_upload
     container: configcat/cli:azure-devops-2.4.2
     pool:
       vmImage: ubuntu-latest
     steps:
       - checkout: self
         persistCredentials: true
       - script: configcat scan $(Build.Repository.LocalPath)
           --config-id=PASTE-YOUR-CONFIG-ID-HERE
           --repo=$(Build.Repository.Name)
           --branch=$(Build.SourceBranchName)
           --file-url-template="$(Build.Repository.Uri)?path={filePath}&version=GC{commitHash}&line={lineNumber}&lineStartColumn=1&lineEndColumn=1"
           --commit-url-template="$(Build.Repository.Uri)/commit/{commitHash}"
           --runner="ConfigCat Azure DevOps Job"
           --upload
           --non-interactive
         name: scan_repository
         env:
           CONFIGCAT_API_PASS: $(CONFIGCAT_API_PASS)
           CONFIGCAT_API_USER: $(CONFIGCAT_API_USER)
   ```

info

If you are using a different VCS than Azure DevOps' Git, you should set the `--file-url-template` and `--commit-url-template` according to your VCS provider.

4. Commit & push your changes.

Scan reports are uploaded for each branch of your repository that triggers the job.


---

# Bitbucket Pipe - Scan your source code for feature flags

This section describes how to use ConfigCat's [Bitbucket Pipe](https://bitbucket.org/product/features/pipelines/integrations?p=configcat/scan-repository-pipe) to automatically scan your source code for feature flag and setting usages and upload the found code references to ConfigCat. You can find more information about Bitbucket Pipelines [here](https://bitbucket.org/product/features/pipelines).

## Setup[â](#setup "Direct link to Setup")

1. Create a new [ConfigCat Management API credential](https://app.configcat.com/my-account/public-api-credentials) and store its values in secure pipeline variables with the following names: `CONFIGCAT_API_USER`, `CONFIGCAT_API_PASS`.

   ![Bitbucket Pipe secrets](/docs/assets/cli/scan/pipe_secrets.png)

2. Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

3. Add the following snippet to the script section of your `bitbucket-pipelines.yml` file. Don't forget to replace the `PASTE-YOUR-CONFIG-ID-HERE` value with your actual Config ID.

   ```
   - pipe: configcat/scan-repository-pipe:1.8.1
     variables:
       CONFIG_ID: 'PASTE-YOUR-CONFIG-ID-HERE'
       # LINE_COUNT: '3'         # optional
       # TIMEOUT: '1800'         # optional
       # SUB_FOLDER: '/src'      # optional
       # EXCLUDE_KEYS: >         # optional
       #   flag_key_to_exclude_1
       #   flag_key_to_exclude_2
       # ALIAS_PATTERNS: (\w+) = :CC_KEY,const (\w+) = feature_flags\.enabled\(:CC_KEY\)  # optional
       # USAGE_PATTERNS: feature_flags\.enabled\(:CC_KEY\)
       # VERBOSE: 'true'         # optional
   ```

4. Commit & push your changes.

Scan reports are uploaded for each branch of your repository that triggers the job.

## Available Options[â](#available-options "Direct link to Available Options")

| Parameter            | Description                                                                                                                                                                             | Required | Default             |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------------------- |
| `CONFIG_ID`          | ID of the ConfigCat config to scan against.                                                                                                                                             | â        |                     |
| `CONFIGCAT_API_HOST` | ConfigCat Management API host.                                                                                                                                                          |          | `api.configcat.com` |
| `LINE_COUNT`         | Context line count before and after the reference line. (min: 1, max: 10)                                                                                                               |          | 4                   |
| `TIMEOUT`            | Scan timeout in seconds (default: 1800, min: 60). If the scan does not finish within this time, it is aborted. No partial results are returned. The command exits with a timeout error. |          | 1800                |
| `SUB_FOLDER`         | Sub-folder to scan, relative to the repository root folder.                                                                                                                             |          |                     |
| `EXCLUDE_KEYS`       | List of feature flag keys that must be excluded from the scan report.                                                                                                                   |          |                     |
| `ALIAS_PATTERNS`     | Comma delimited list of custom regex patterns used to search for additional aliases.                                                                                                    |          |                     |
| `USAGE_PATTERNS`     | Comma delimited list of custom regex patterns that describe additional feature flag key usages.                                                                                         |          |                     |
| `VERBOSE`            | Turns on detailed logging.                                                                                                                                                              |          | false               |


---

# Bitrise - Scan your source code for feature flags

This section describes how to use ConfigCat's [Bitrise Step](https://www.bitrise.io/integrations/steps/configcat-feature-flag-sync) to automatically scan your source code for feature flag and setting usages and upload the found code references to ConfigCat. [Bitrise](https://www.bitrise.io/) is full-featured mobile CI/CD platform. You can find more information about Bitrise Steps [here](https://devcenter.bitrise.io/en/steps-and-workflows/introduction-to-steps.html).

## Setup[â](#setup "Direct link to Setup")

1. Create a new [ConfigCat Management API credential](https://app.configcat.com/my-account/public-api-credentials) and store its values in secure pipeline variables with the following names: `CONFIGCAT_API_USER`, `CONFIGCAT_API_PASS`.

   ![Bitrise secrets](/docs/assets/cli/scan/bitrise_secrets.png)

2. Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

3. Add the following step to the workflows section of your `bitrise.yml` file. Don't forget to replace the `PASTE-YOUR-CONFIG-ID-HERE` value with your actual Config ID.

   ```
   - configcat-feature-flag-sync@0:
     inputs:
       - configcat_config_id: 'PASTE-YOUR-CONFIG-ID-HERE' # required
       # - line-count: 3           # optional
       # - sub-folder: 'src'       # optional
       # - exclude-keys: >         # optional
       #   flag_key_to_exclude_1
       #   flag_key_to_exclude_2
       # - alias-patterns: "(\w+) = :CC_KEY,const (\w+) = feature_flags\.enabled\(:CC_KEY\)" # optional
       # - usage-patterns: feature_flags\.enabled\(:CC_KEY\)   # optional
       # - verbose: true           # optional
   ```

4. Commit & push your changes.

Scan reports are uploaded for each branch of your repository that triggers the job.

## Available Options[â](#available-options "Direct link to Available Options")

| Parameter             | Description                                                                                                                                                                   | Required | Default             |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------------------- |
| `configcat_config_id` | The [config ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id) tells the step which feature flags it should search for in your source code. | â        |                     |
| `configcat_api_host`  | ConfigCat Management API host.                                                                                                                                                |          | `api.configcat.com` |
| `line_count`          | Code snippet line count before and after the reference line. (min: 1, max: 10)                                                                                                |          | 4                   |
| `sub_folder`          | Sub-folder to scan, relative to the repository root folder.                                                                                                                   |          |                     |
| `exclude-keys`        | List of feature flag keys that must be excluded from the scan report.                                                                                                         |          |                     |
| `alias-patterns`      | Comma delimited list of custom regex patterns used to search for additional aliases.                                                                                          |          |                     |
| `usage-patterns`      | Comma delimited list of custom regex patterns that describe additional feature flag key usages.                                                                               |          |                     |
| `verbose`             | Turns on detailed logging.                                                                                                                                                    |          | false               |


---

# CircleCI Orb - Scan your source code for feature flags

This section describes how to use ConfigCat's [CircleCI Orb](https://circleci.com/developer/orbs/orb/configcat/scan-repository) to automatically scan your source code for feature flag and setting usages and upload the found code references to ConfigCat. You can find more information about CircleCI Orbs [here](https://circleci.com/orbs/).

## Setup[â](#setup "Direct link to Setup")

1. Create a new [ConfigCat Management API credential](https://app.configcat.com/my-account/public-api-credentials) and store its values in [CircleCI Environment Variables](https://circleci.com/docs/2.0/env-vars/#setting-an-environment-variable-in-a-project) with the following names: `CONFIGCAT_API_USER`, `CONFIGCAT_API_PASS`.

   ![CircleCI Orb secrets](/docs/assets/cli/scan/cco_secrets.png)

2. Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

3. Create a new CircleCI YAML config in your repository under the `.circleci` folder, and put the following snippet into it. Don't forget to replace the `PASTE-YOUR-CONFIG-ID-HERE` value with your actual Config ID.

   ```
   version: 2.1

   orbs:
     configcat: configcat/scan-repository@1.11.1

   workflows:
     main:
       jobs:
         - configcat/scan:
             config-id: PASTE-YOUR-CONFIG-ID-HERE # required
             file-url-template: 'https://github.com/your/repo/blob/{commitHash}/{filePath}#L{lineNumber}' # optional
             commit-url-template: 'https://github.com/your/repo/commit/{commitHash}' # optional
             # line-count: 3           # optional
             # timeout: 1800           # optional
             # sub-folder: 'src'       # optional
             # exclude-keys: >         # optional
             #   flag_key_to_exclude_1
             #   flag_key_to_exclude_2
             # alias-patterns: (\w+) = :CC_KEY,const (\w+) = feature_flags\.enabled\(:CC_KEY\) # optional
             # usage-patterns: feature_flags\.enabled\(:CC_KEY\)   # optional
             # verbose: true           # optional
   ```

4. Commit & push your changes.

The above example configures a workflow that executes the scan and code reference upload on every git `push` event. Scan reports are uploaded for each branch of your repository that triggers the workflow.

## Available Options[â](#available-options "Direct link to Available Options")

| Parameter             | Description                                                                                                                                                                                           | Required | Default              |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | -------------------- |
| `config-id`           | ID of the ConfigCat config to scan against.                                                                                                                                                           | â        |                      |
| `api-host`            | ConfigCat Management API host.                                                                                                                                                                        |          | `api.configcat.com`  |
| `api-user`            | Name of the environment variable where the [ConfigCat Management API basic authentication username](https://app.configcat.com/my-account/public-api-credentials) is stored.                           |          | CONFIGCAT\_API\_USER |
| `api-pass`            | Name of the environment variable where the [ConfigCat Management API basic authentication password](https://app.configcat.com/my-account/public-api-credentials) is stored.                           |          | CONFIGCAT\_API\_PASS |
| `file-url-template`   | Template url used to generate VCS file links. Available template parameters: `commitHash`, `filePath`, `lineNumber`. Example: `https://github.com/my/repo/blob/{commitHash}/{filePath}#L{lineNumber}` |          |                      |
| `commit-url-template` | Template url used to generate VCS commit links. Available template parameters: `commitHash`. Example: `https://github.com/my/repo/commit/{commitHash}`                                                |          |                      |
| `line-count`          | Context line count before and after the reference line. (min: 1, max: 10)                                                                                                                             |          | 4                    |
| `timeout`             | Scan timeout in seconds (default: 1800, min: 60). If the scan does not finish within this time, it is aborted. No partial results are returned. The command exits with a timeout error.               |          | 1800                 |
| `sub-folder`          | Sub-folder to scan, relative to the repository root folder.                                                                                                                                           |          |                      |
| `exclude-keys`        | List of feature flag keys that must be excluded from the scan report.                                                                                                                                 |          |                      |
| `alias-patterns`      | Comma delimited list of custom regex patterns used to search for additional aliases.                                                                                                                  |          |                      |
| `usage-patterns`      | Comma delimited list of custom regex patterns that describe additional feature flag key usages.                                                                                                       |          |                      |
| `verbose`             | Turns on detailed logging.                                                                                                                                                                            |          | false                |


---

# GitHub Action - Scan your source code for feature flags

This section describes how to use ConfigCat's [GitHub Action](https://github.com/marketplace/actions/configcat-scan-repository) to automatically scan your source code for feature flag and setting usages and upload the found code references to ConfigCat. You can find more information about GitHub Actions [here](https://github.com/features/actions).

## Setup[â](#setup "Direct link to Setup")

1. Create a new [ConfigCat Management API credential](https://app.configcat.com/my-account/public-api-credentials) and store its values in your repository's [GitHub Secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-a-repository) with the following names: `CONFIGCAT_API_USER`, `CONFIGCAT_API_PASS`.

   ![Github Action secrets](/docs/assets/cli/scan/gh_secrets.png)

2. Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

3. Create a new Actions workflow in your GitHub repository under the `.github/workflows` folder, and put the following snippet into it. Don't forget to replace the `PASTE-YOUR-CONFIG-ID-HERE` value with your actual Config ID.

   ```
   on: [push]
   name: Code references
   jobs:
     scan-repo:
       runs-on: ubuntu-latest
       name: Scan repository for code references
       steps:
         - name: Checkout
           uses: actions/checkout@v3
         - name: Scan & upload
           uses: configcat/scan-repository@v2
           with:
             api-user: ${{ secrets.CONFIGCAT_API_USER }}
             api-pass: ${{ secrets.CONFIGCAT_API_PASS }}
             config-id: PASTE-YOUR-CONFIG-ID-HERE
             # line-count: 5             # optional
             # timeout: 1800             # optional
             # sub-folder: src           # optional
             # exclude-keys: >           # optional
             #   flag_key_to_exclude_1
             #   flag_key_to_exclude_2
             # alias-patterns: (\w+) = :CC_KEY,const (\w+) = feature_flags\.enabled\(:CC_KEY\) #optional
             # usage-patterns: feature_flags\.enabled\(:CC_KEY\)   # optional, comma delimited flag key usage patterns
             # verbose: true             # optional
   ```

4. Commit & push your action.

The above example configures a workflow that executes the scan and code references upload on every git `push` event. Scan reports are uploaded for each branch of your repository that triggers the workflow.

## Available Options[â](#available-options "Direct link to Available Options")

| Parameter        | Description                                                                                                                                                                             | Required | Default             |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------------------- |
| `config-id`      | ID of the ConfigCat config to scan against.                                                                                                                                             | â        |                     |
| `api-user`       | [ConfigCat Management API basic authentication username](https://app.configcat.com/my-account/public-api-credentials).                                                                  | â        |                     |
| `api-pass`       | [ConfigCat Management API basic authentication password](https://app.configcat.com/my-account/public-api-credentials).                                                                  | â        |                     |
| `api-host`       | ConfigCat Management API host.                                                                                                                                                          |          | `api.configcat.com` |
| `line-count`     | Context line count before and after the reference line. (min: 1, max: 10)                                                                                                               |          | 4                   |
| `timeout`        | Scan timeout in seconds (default: 1800, min: 60). If the scan does not finish within this time, it is aborted. No partial results are returned. The command exits with a timeout error. |          | 1800                |
| `sub-folder`     | Sub-folder to scan, relative to the repository root folder.                                                                                                                             |          |                     |
| `exclude-keys`   | List of feature flag keys that must be excluded from the scan report.                                                                                                                   |          |                     |
| `alias-patterns` | Comma delimited list of custom regex patterns used to search for additional aliases.                                                                                                    |          |                     |
| `usage-patterns` | Comma delimited list of custom regex patterns that describe additional feature flag key usages.                                                                                         |          |                     |
| `verbose`        | Turns on detailed logging.                                                                                                                                                              |          | false               |


---

# GitLab - Scan your source code for feature flags

This section describes how to use the [ConfigCat CLI](https://configcat.com/docs/docs/advanced/cli/.md) in [GitLab CI/CD](https://docs.gitlab.com/ee/ci/) to automatically scan your source code for feature flag and setting usages and upload the found code references to ConfigCat.

## Setup[â](#setup "Direct link to Setup")

1. Create a new [ConfigCat Management API credential](https://app.configcat.com/my-account/public-api-credentials) and store its values in GitLab's [CI/CD Variables](https://docs.gitlab.com/ee/ci/variables/) with the following names: `CONFIGCAT_API_USER`, `CONFIGCAT_API_PASS`.

   ![GitLab secrets](/docs/assets/cli/scan/gl_secrets.png)

2. Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

3. Create a new or open your existing `.gitlab-ci.yml` file, and put the following job into it. Don't forget to replace the `PASTE-YOUR-CONFIG-ID-HERE` value with your actual Config ID.

   ```
   configcat-scan-repository:
     stage: deploy # the job will run in the deploy phase, but you can choose from any other phases you have
     image:
       name: configcat/cli:2.4.2
       entrypoint: ['']
     script:
       - configcat scan $CI_PROJECT_DIR
         --config-id=PASTE-YOUR-CONFIG-ID-HERE
         --repo=${CI_PROJECT_NAME}
         --branch=${CI_COMMIT_REF_NAME}
         --file-url-template=https://gitlab.com/${CI_PROJECT_PATH}/blob/{commitHash}/{filePath}#L{lineNumber}
         --commit-url-template=https://gitlab.com/${CI_PROJECT_PATH}/commit/{commitHash}
         --runner="ConfigCat GitLab Job"
         --upload
         --non-interactive
   ```

4. Commit & push your changes.

Scan reports are uploaded for each branch of your repository that triggers the job.


---

# CLI - Add to CI/CD pipelines manually

This section describes how to use the [ConfigCat CLI](https://configcat.com/docs/docs/advanced/cli/.md) to scan your source code for feature flag and setting usages and upload the found code references to ConfigCat.

## Prerequisites[â](#prerequisites "Direct link to Prerequisites")

* [Install](https://configcat.com/docs/docs/advanced/cli/.md#installation) the CLI in your CI/CD or local environment.
* [Setup](https://configcat.com/docs/docs/advanced/cli/.md#setup) the CLI with your ConfigCat Management API credentials.
* Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

## Scan & Upload[â](#scan--upload "Direct link to Scan & Upload")

To initiate the scanning with uploading the results, you can use the `scan` command with the `--upload` option.

### With Git VCS[â](#with-git-vcs "Direct link to With Git VCS")

The scan command detects when it's being executed on a Git repository and automatically [extracts additional information](https://configcat.com/docs/docs/advanced/code-references/overview/.md#scanning-git-repositories). The following snippet shows a minimal example that uses only the required parameters in the case of a Git repository.

```
configcat scan /path/to/your/repo \
    --config-id YOUR-CONFIG-ID \ # required
    --repo YOUR-REPOSITORY-NAME \ # required
    --upload # upload the scan report
```

You can use the optional template URL parameters for generating VCS links to your source code.

```
configcat scan /path/to/your/repo \
    --config-id YOUR-CONFIG-ID \ # required
    --repo YOUR-REPOSITORY-NAME \ # required
    --file-url-template "https://github.com/my/repo/blob/{commitHash}/{filePath}#L{lineNumber}" \ # optional, used to generate VCS file links
    --commit-url-template "https://github.com/my/repo/commit/{commitHash}" \ # optional, used to generate VCS commit links
    --upload # upload the scan report
```

info

The template parameters (`filePath`, `lineNumber`, and `commitHash`) are automatically replaced by the CLI based on the collected information from the Git repository.

### With Non-Git VCS[â](#with-non-git-vcs "Direct link to With Non-Git VCS")

As the `scan` command cannot determine such information as `branch` and `commitHash` when you execute it on a non-Git repository, you have to set these parameters manually.

```
configcat scan /path/to/your/repo \
    --config-id YOUR-CONFIG-ID \ # required
    --repo YOUR-REPOSITORY-NAME \ # required
    --branch BRANCH-NAME \ # required in case of non-git repository
    --commit-hash \ # optional, used to show it on the report and generate commit links
    --file-url-template "https://github.com/my/repo/blob/{commitHash}/{filePath}#L{lineNumber}" \ # optional, used to generate VCS file links
    --commit-url-template "https://github.com/my/repo/commit/{commitHash}" \ # optional, used to generate VCS commit links
    --upload # upload the scan report
```

### Docker[â](#docker "Direct link to Docker")

After [installing](https://configcat.com/docs/docs/advanced/cli/.md#installation) the ConfigCat CLI with Docker, you can scan your repository by mounting its folder as a volume and setting the [ConfigCat Management API credentials](https://app.configcat.com/my-account/public-api-credentials) as environment variables on the executing container.

```
docker run --rm \
    -v /path/to/your/repo:/repository \ # mount the repository as volume
    -e CONFIGCAT_API_USER=YOUR-API-USER \ # Management API username
    -e CONFIGCAT_API_PASS=YOUR-API-PASS \ # Management API password
    configcat/cli scan /repository \ # scan the mounted volume
    --config-id YOUR-CONFIG-ID \ # required
    --repo YOUR-REPOSITORY-NAME \ # required
    --upload # upload the scan report
```

## Reference[â](#reference "Direct link to Reference")

See the `scan` command's [reference documentation](https://configcat.github.io/cli/configcat-scan.html) for all available command parameters.


---

# Scan & Upload Code References Overview

ConfigCat's<!-- --> [CLI](https://configcat.com/docs/docs/advanced/cli/.md) <!-- -->has the ability to scan your source code for feature flag and setting usages and upload the found code references to ConfigCat.

This feature makes the elimination of the technical debt easier, as it can show which repositories reference your feature flags and settings in one centralized place on your [Dashboard](https://app.configcat.com).

You can integrate the CLI into your CI/CD pipeline or use it with other execution mechanisms like scheduled jobs or VCS push triggered workflows.

## Scan[â](#scan "Direct link to Scan")

The following example shows a simple scan execution that prints the scan result to the console. The `scan` command searches for every feature flag and setting key defined within a selected Config.

![ConfigCat scan command in action](/docs/assets/cli/cli-scan.gif)

If you want to see this in action on your project, run the following command in its root folder:

```
configcat scan . --print
```

See the `scan` command's [reference documentation](https://configcat.github.io/cli/configcat-scan.html) for all available command parameters.

### Deleted Flags[â](#deleted-flags "Direct link to Deleted Flags")

As part of the scanning operation, the CLI gathers all deleted feature flags and settings from the last 180 days and looks for their usage in your source code. When it finds a reference to a deleted feature flag or setting, it prints a warning that lists their keys.

```
[warning]: 5 deleted feature flag/setting reference(s) found in 4 file(s). Keys: [featureThatWasDeleted1, featureThatWasDeleted2]
```

### Exclude Flags from Scanning[â](#exclude-flags-from-scanning "Direct link to Exclude Flags from Scanning")

There's an option to exclude feature flags or settings from the scanning operation by their keys.

```
configcat scan <dir> --exclude-flag-keys featureFlagToExclude1 featureFlagToExclude2
```

## Config ID[â](#config-id "Direct link to Config ID")

In non-interactive environments, like in a CI/CD pipeline, you have to pass the ID of your ConfigCat Config that you want to scan against. The scanner will use this ID to determine which feature flags & settings to search for in your source code.

To get the ID of a Config, follow the steps below:

1. Go to your [ConfigCat Dashboard](https://app.configcat.com), select the desired Config, and click the code references icon on one of your feature flags.

![ConfigCat code references button](/docs/assets/cli/scan/code_ref.png)

2. Copy the Config ID from the highlighted box.

![ConfigCat Config ID](/docs/assets/cli/scan/config_id.png)

## How Scanning Works[â](#how-scanning-works "Direct link to How Scanning Works")

The scanner looks for feature flag and setting keys between quotation marks (`'` `"` `` ` ``) in the first place.

info

There's an option to extend the feature flag and setting key usage regex patterns with the `--usage-patterns` argument of the `scan` command.

```
configcat scan <dir> --usage-patterns "<pattern1>" "<pattern2>"
```

Usage patterns can also be set via the `CONFIGCAT_USAGE_PATTERNS` environment variable as a comma delimited list.

```
export CONFIGCAT_USAGE_PATTERNS="<pattern1>,<pattern2>";
```

The regex pattern must include the `CC_KEY` placeholder that represents the actual feature flag or setting key in your code. For example, the following pattern allows the recognition of Ruby symbols as flag key usages:

```
configcat scan <dir> --usage-patterns ":CC_KEY"
```

It will match the following usage:

```
if FeatureFlags.enabled(:my_feature_key)
  #...
end
```

### Aliases[â](#aliases "Direct link to Aliases")

The found keys' context is examined for **aliases**, like variables, constants, or enumerations used to store these keys. **Aliases** are treated as indirect references and are included in the searching process.

For example, the following `C#` constant's name (`MyAwesomeFeature`) will be recognized as an alias:

```
public static class FeatureFlagKeys
{
    public const string MyAwesomeFeature = "my_awesome_feature";
}
```

The scanner will treat this constant's usage as an indirect reference to the flag.

```
if (await configCatClient.GetValueAsync(FeatureFlagKeys.MyAwesomeFeature, false))
{
    // the feature is on.
}
```

info

The alias recognition **adapts to the characteristics of different languages**.<br /><!-- -->For example, it can find aliases in `Go` constants/variable assignments:

```
const (
	myAwesomeFeature string = "my_awesome_feature"
)

myAwesomeFeature := "my_awesome_feature"
```

And in `Swift` enums/variable assignments as well:

```
enum FlagKeys : String {
  case MyAwesomeFeature = "my_awesome_feature"
}

let myAwesomeFeature: String = "my_awesome_feature"
```

You can check [here](https://raw.githubusercontent.com/configcat/cli/main/test/ConfigCat.Cli.Tests/alias.txt) a bunch of other samples that we tested.

info

An alias must be at least **30% identical to the feature flag/setting key**. The similarity check is case insensitive and ignores `_` characters. This behavior prevents false recognitions in expressions like `<input type="text" value="my_awesome_feature">` where `value` shouldn't be treated as alias.

### Custom alias match patterns[â](#custom-alias-match-patterns "Direct link to Custom alias match patterns")

There's an option to set custom regex patterns for identifying additional aliases. The `scan` command accepts a list of patterns via the `--alias-patterns` argument.

```
configcat scan <dir> --alias-patterns "<pattern1>" "<pattern2>"
```

The CLI also accepts patterns from the `CONFIGCAT_ALIAS_PATTERNS` environment variable as a comma delimited list.

```
export CONFIGCAT_ALIAS_PATTERNS="<pattern1>,<pattern2>";
```

#### Match pattern format[â](#match-pattern-format "Direct link to Match pattern format")

The regex pattern must include at least one capture group that represents the actual alias. When more than one group is defined, the first one is selected. To bind the actual flag keys to aliases, the CLI uses a `CC_KEY` placeholder to inject the known keys into the pattern.

For example, the following pattern allows to find aliases that point to Ruby symbols:

```
configcat scan <dir> --alias-patterns "(\w+) = client\.get_value\(:CC_KEY"
```

It will match to the following usage:

```
# 'my_feature_enabled' is now treated as an alias to the 'my_feature_key' flag.
my_feature_enabled = client.get_value(:my_feature_key, false)
```

note

The CLI implicitly adds the optional `` ` ``, `'`, `"` wrapping around flag keys, so you don't have to wrap the `CC_KEY` placeholder manually.

For example, the pattern `(\w+) = CC_KEY` will either match to `alias = flag_key`, `alias = "flag_key"`, `alias = 'flag_key'`, or ``alias = `flag_key` ``.

### Wrappers[â](#wrappers "Direct link to Wrappers")

In addition to aliases, the scanner also looks for different feature flag/setting key usage patterns. This helps to recognize functions and properties used to wrap direct ConfigCat SDK calls as indirect references. Aliases are also included in this search.

For example, the scanner will treat the `IsMyAwesomeFeatureEnabled` function of the following `C#` wrapper class as an indirect reference:

```
public class FeatureFlagProvider
{
  public async Task<bool> IsMyAwesomeFeatureEnabled(bool defaultValue = false)
  {
    return await configCatClient.GetValueAsync("my_awesome_feature", defaultValue);
  }
}
```

And will include its usage in the scan report:

```
if (await featureFlagProvider.IsMyAwesomeFeatureEnabled())
{
  // the feature is on.
}
```

info

The scanner uses the following patterns to look for wrapper usages (case insensitive):

* `[.|->|::]{settingKeyOrAlias}`
* `[.|->|::]get{settingKeyOrAlias}`
* `[.|->|::]is{settingKeyOrAlias}`
* `[.|->|::]is{settingKeyOrAlias}enabled`

Given the key/alias `my_awesome_feature`, the scanner will find any of the following usage examples:

* `.my_awesome_feature` (also: `->my_awesome_feature` / `::my_awesome_feature`)
* `.MY_AWESOME_FEATURE` (also: `->MY_AWESOME_FEATURE` / `::MY_AWESOME_FEATURE`)
* `.get_my_awesome_feature` (also: `->get_my_awesome_feature` / `::get_my_awesome_feature`)
* `.GET_MY_AWESOME_FEATURE` (also: `->GET_MY_AWESOME_FEATURE` / `::GET_MY_AWESOME_FEATURE`)
* `.is_my_awesome_feature` (also: `->is_my_awesome_feature` / `::is_my_awesome_feature`)
* `.is_my_awesome_feature_enabled` (also: `->is_my_awesome_feature_enabled` / `::is_my_awesome_feature_enabled`)
* `.myAwesomeFeature` (also: `->myAwesomeFeature` / `::myAwesomeFeature`)
* `.getMyAwesomeFeature` (also: `->getMyAwesomeFeature` / `::getMyAwesomeFeature`)
* `.isMyAwesomeFeature` (also: `->isMyAwesomeFeature` / `::isMyAwesomeFeature`)
* `.isMyAwesomeFeatureEnabled` (also: `->isMyAwesomeFeatureEnabled` / `::isMyAwesomeFeatureEnabled`)
* `.IsMyAwesomeFeatureEnabled` (also: `->IsMyAwesomeFeatureEnabled` / `::IsMyAwesomeFeatureEnabled`)

## Upload Scan Reports[â](#upload-scan-reports "Direct link to Upload Scan Reports")

You have the option to upload scan reports for each branch of your repository to ConfigCat. Each scan report is associated to one of these branches.

The following screenshot shows how an uploaded report looks like.

![ConfigCat code references report](/docs/assets/cli/scan/scan_report.png)

### Scanning Git Repositories[â](#scanning-git-repositories "Direct link to Scanning Git Repositories")

The `scan` command automatically detects when it's being executed on a git repository. It collects additional information from Git like the current **branch name**, the actual **commit hash**, and each active **remote branch**. These extra details are used to enrich the uploaded report on the ConfigCat Dashboard with links to your actual source code.

info

If you are not using Git as VCS, you have to set at least the `--branch` parameter of the `scan` command.

### Template URLs[â](#template-urls "Direct link to Template URLs")

The `scan` command's `--file-url-template` and `--commit-url-template` parameters are used for generating links to your repository. Based on the information available during the scanning, the CLI replaces the corresponding template parameters to generate the actual links.

* **File URL template**: Used to generate VCS file links.<br /><!-- -->Available template parameters:

  * `commitHash`
  * `filePath`
  * `lineNumber`

  With the following example template URL: `https://github.com/my/repo/blob/{commitHash}/{filePath}#L{lineNumber}`<br /><!-- -->For the file `src/example.js`, the result is: `https://github.com/my/repo/blob/4451d61b63a4b4499ed5c607be6c40ce9eeadb9c/src/example.js#L69`

* **Commit URL template**: Used to generate VCS commit links.<br /><!-- -->Available template parameters:

  * `commitHash`

  With the following example template URL: `https://github.com/my/repo/commit/{commitHash}`<br /><!-- -->For the commit hash `4451d61b63a4b4499ed5c607be6c40ce9eeadb9c`, the result is: `https://github.com/my/repo/commit/4451d61b63a4b4499ed5c607be6c40ce9eeadb9c`

info

When these template URLs are not set, the uploaded report will not contain VCS links.

### Stale Branches[â](#stale-branches "Direct link to Stale Branches")

When the scan is executed on a Git repository, the CLI attaches the currently active remote branches to the uploaded report. This information is used for cleaning up each stale report that belongs to a deleted branch.

### CI/CD Integrations[â](#cicd-integrations "Direct link to CI/CD Integrations")

We prepared the following integrations to simplify the usage of the scanner in your CI/CD workflow:

* [GitHub Action](https://configcat.com/docs/docs/advanced/code-references/github-action/.md)
* [CircleCI Orb](https://configcat.com/docs/docs/advanced/code-references/circleci-orb/.md)
* [GitLab CI/CD](https://configcat.com/docs/docs/advanced/code-references/gitlab-ci/.md)
* [Azure DevOps](https://configcat.com/docs/docs/advanced/code-references/azure-devops/.md)
* [Bitbucket Pipe](https://configcat.com/docs/docs/advanced/code-references/bitbucket-pipe/.md)
* [Bitrise Step](https://configcat.com/docs/docs/advanced/code-references/bitrise-step/.md)

### Manual Integration[â](#manual-integration "Direct link to Manual Integration")

If your workflow doesn't have an integration, you can follow the instructions [here](https://configcat.com/docs/docs/advanced/code-references/manual/.md) to set scan executions directly with the ConfigCat CLI.

## Ignore Files[â](#ignore-files "Direct link to Ignore Files")

The `scan` command respects all include and exclude patterns listed inside `.gitignore` and `.ignore` files within the scanned directory. In addition, you can create an extra `.ccignore` file with patterns that the scanner must take into account.

Each pattern must follow the [gitignore pattern format](https://git-scm.com/docs/gitignore#_pattern_format).


---

# Config V2 Migration Guide

This guide will help you migrate from Config V1 to Config V2.

## What is Config V2?[â](#what-is-config-v2 "Direct link to What is Config V2?")

**Config V2 is the next generation of ConfigCat.** It comes with a new Dashboard, Public Management API and SDKs.

**Config V2 supports all the features of V1**, so you can continue using those, but **it offers interesting new features as well**. However, you won't be able to use the new features with the V1 versions of the Dashboard, Public Management API and SDKs.

Read more about the new features in the [Config V2 Overview](https://configcat.com/docs/docs/advanced/config-v2/.md).

## A few things to consider before migration[â](#a-few-things-to-consider-before-migration "Direct link to A few things to consider before migration")

* **Migration from Config V1 means that a V2 config will be copied from the V1 config. The V1 config will remain unchanged and accessible.** The V2 version will have a new SDK key for each environment.
* **Config V2 and V1 are completely separate.** They don't affect each other in any way. You can use them side by side.
* **There is no automatic sync between the V1 and V2 configs.** If you want to keep them in sync, you have to manually update the V2 config when you make changes to the V1 config and vice versa.
* There is no pressure to migrate. Although we have plans to phase out V1 eventually, you can stay on it for a long time.
* Once the migration process is started, it's recommended to migrate your V1 configs to V2 as quickly as possible to avoid confusion.
* Keep in mind that the [integrations](https://app.configcat.com/integrations) and [webhooks](https://app.configcat.com/product/webhooks) connected to V1 configs are not migrated automatically and you have to set them up manually for the migrated V2 configs.
* Every newly created config will be a V2 config by default.

## Migrating from Config V1 to Config V2[â](#migrating-from-config-v1-to-config-v2 "Direct link to Migrating from Config V1 to Config V2")

The migration process starts with copying your V1 config to a new V2 one and updating your applications to use the new config. The complete process is the following:

### Step 1: Create the V2 config[â](#step-1-create-the-v2-config "Direct link to Step 1: Create the V2 config")

1. Open the ConfigCat Dashboard and click on the `Start migration` button on top of a V1 config.
2. Click `Create V2 config` to create a new config with the same settings as the V1 config.

It's important to note that the V2 config will be created with the same settings as the V1 config and the V1 config will still be accessible and unchanged.

### Step 2: Upgrade the ConfigCat SDK version[â](#step-2-upgrade-the-configcat-sdk-version "Direct link to Step 2: Upgrade the ConfigCat SDK version")

In your application, upgrade the ConfigCat SDK to the latest version. Old versions of the SDK will not be able to access the new config. Make sure you upgrade every application that uses the migrated V2 config.

Here is a list of the SDKs that support Config V2: [See the supported SDK versions.](https://configcat.com/docs/docs/advanced/config-v2-sdk-compatibility/.md)

### Step 3: Update the ConfigCat SDK Key[â](#step-3-update-the-configcat-sdk-key "Direct link to Step 3: Update the ConfigCat SDK Key")

In your application, replace the old ConfigCat SDK Key with the new one (i.e. with the one that belongs to the V2 version of the config) in every environment. The new key can be found on the ConfigCat Dashboard on the V2 config's page.

### Step 4: Deploy your application[â](#step-4-deploy-your-application "Direct link to Step 4: Deploy your application")

Deploy your application to production and wait until all your users upgrade to the new version. You can check the migration status on the ConfigCat Dashboard under the migration status page that is available from a config's context menu in the sidebar.

### Step 5: Clean up[â](#step-5-clean-up "Direct link to Step 5: Clean up")

After confirming that all your users have transitioned to the latest version of your application, you can finalize the migration by removing the V1 config.

To verify that the V1 configs haven't been accessed for a significant period, check the migration status page accessible via a config's context menu in the sidebar. This step helps eliminate any mix-ups and prevents the unintended use of outdated configurations.

caution

Once you delete the V1 config, you won't be able to restore it.


---

# Config V2 SDK Compatibility

This table shows which SDK versions support Config V2. Read more about [Config V2](https://configcat.com/docs/docs/advanced/config-v2/.md)

| SDK                                                                             | Version    | Release Notes                                                     |
| ------------------------------------------------------------------------------- | ---------- | ----------------------------------------------------------------- |
| .NET                                                                            | >=Â v9.1.0  | <https://github.com/configcat/.net-sdk/releases>                  |
| Android (Java)                                                                  | >=Â v10.1.0 | <https://github.com/configcat/android-sdk/releases>               |
| C++                                                                             | >=Â v4.0.0  | <https://github.com/configcat/cpp-sdk/releases>                   |
| Dart (Flutter)                                                                  | >=Â v4.1.0  | <https://github.com/configcat/dart-sdk/releases>                  |
| Elixir                                                                          | >=Â v4.0.0  | <https://github.com/configcat/elixir-sdk/releases>                |
| Go                                                                              | >=Â v9.0.3  | <https://github.com/configcat/go-sdk/releases>                    |
| Java                                                                            | >=Â v9.1.0  | <https://github.com/configcat/java-sdk/releases>                  |
| JavaScript (Browser, Bun, Chromium Extension, Cloudflare Worker, Deno, Node.js) | >=Â v1.0.0  | <https://github.com/configcat/js-unified-sdk/releases>            |
| JavaScript - Legacy                                                             | >=Â v9.5.0  | <https://github.com/configcat/js-sdk/releases>                    |
| JavaScript (Chromium Extension) - Legacy                                        | >=Â v2.4.0  | <https://github.com/configcat/js-chromium-extension-sdk/releases> |
| JavaScript (SSR) - Legacy                                                       | >=Â v8.4.0  | <https://github.com/configcat/js-ssr-sdk/releases>                |
| Kotlin Multiplatform                                                            | >=Â v3.0.0  | <https://github.com/configcat/kotlin-sdk/releases>                |
| Node.js - Legacy                                                                | >=Â v11.3.0 | <https://github.com/configcat/node-sdk/releases>                  |
| PHP 8.1+                                                                        | >=Â v9.1.0  | <https://github.com/configcat/php-sdk/releases>                   |
| PHP 7.1+                                                                        | >=Â v3.0.0  | <https://github.com/configcat/php7-sdk/releases>                  |
| Python                                                                          | >=Â v9.0.3  | <https://github.com/configcat/python-sdk/releases>                |
| React                                                                           | >=Â v4.6.0  | <https://github.com/configcat/react-sdk/releases>                 |
| Ruby                                                                            | >=Â v8.0.0  | <https://github.com/configcat/ruby-sdk/releases>                  |
| Rust                                                                            | >=Â v0.1.0  | <https://github.com/configcat/rust-sdk/releases/>                 |
| Swift (iOS)                                                                     | >=Â v11.0.0 | <https://github.com/configcat/swift-sdk/releases>                 |
| Unreal Engine                                                                   | >=Â v2.0.0  | <https://github.com/configcat/unreal-engine-sdk/releases/>        |


---

# Config V2 Overview

Config V2 is a new version of ConfigCat. It comes with a new Dashboard, Public Management API, SDKs, and features.

## What's new?[â](#whats-new "Direct link to What's new?")

* A bunch of new features and improvements listed below.
* New config editor UI on the Dashboard.
* [New and improved config JSON schema.](https://github.com/configcat/config-json)
* New API: [See the API Docs.](https://configcat.com/docs/docs/api/reference/configcat-public-management-api/.md)
* New SDKs: [See the supported SDK versions.](https://configcat.com/docs/docs/advanced/config-v2-sdk-compatibility/.md)

## How to migrate from Config V1 to Config V2?[â](#how-to-migrate-from-config-v1-to-config-v2 "Direct link to How to migrate from Config V1 to Config V2?")

See the [Config V2 Migration Guide](https://configcat.com/docs/docs/advanced/config-v2-migration-guide/.md). If you get stuck or have any questions about the migration, feel free to [contact us](https://configcat.com/support/).

## New features[â](#new-features "Direct link to New features")

### AND conditions[â](#and-conditions "Direct link to AND conditions")

With AND conditions, you can define more complex Targeting Rules, such as "serve this value for the users who use my Android app AND whose email domain is '@example.com'".

You can add multiple conditions to a Targeting Rule and they will be evaluated with an AND connection between them.

![AND conditions](/docs/assets/images/and-conditions-1885d725ca07feb98918be74caf847ac.png)

### New comparators[â](#new-comparators "Direct link to New comparators")

With the new comparators, you can create Targeting Rules based on date comparisons, array comparisons, and more.

* New text and confidential text comparators: `EQUALS`, `NOT EQUALS`, `STARTS WITH ANY OF`, `ENDS WITH ANY OF`, `NOT STARTS WITH ANY OF`, `NOT ENDS WITH ANY OF`.
* New array comparators: `ARRAY CONTAINS ANY OF`, `ARRAY NOT CONTAINS ANY OF`.
* New date comparators: `BEFORE`, `AFTER`.

![New comparators](/docs/assets/images/new-comparators-20f2a035bd85c2416e9bb89599234608.png)

### Prerequisite flags[â](#prerequisite-flags "Direct link to Prerequisite flags")

With prerequisite flags, you can create feature flags that depend on other feature flags. Prerequisite feature flags (aka. master feature flag, inter-dependent feature flag, global toggle) are particularly useful for managing complex feature dependencies and ensuring a smooth user experience during feature rollouts.

![Prerequisite flags](/docs/assets/images/prerequisite-flags-8d735217aefdcab04a16517a782f13b1.png)

### Comparison value hints[â](#comparison-value-hints "Direct link to Comparison value hints")

With comparison value hints, you can associate arbitrary text with your comparison values. This way you can add a description to your comparison value list items that helps you remember what they are for.

### Percentage Options within Targeting Rules[â](#percentage-options-within-targeting-rules "Direct link to Percentage Options within Targeting Rules")

You can add Percentage Options to your Targeting Rules. This is useful if you want to create more complex Targeting Rules, such as "turn on the feature for 20% of the users who are on iOS, and off for 80%".

![Percentage Options within Targeting Rules](/docs/assets/images/percentage-options-within-targeting-rules-19525180c556b212b688a76daa59f754.png)

### Custom Percentage Attributes[â](#custom-percentage-attributes "Direct link to Custom Percentage Attributes")

With custom Percentage Attributes, you can create Percentage Options based on custom attributes. This way you can create Percentage Options based on any of your user attributes. For example, you can create a Percentage Option that is based on the user's company or organization. So you can serve a value for 20% of the users from company A and serve another value for 80% of the users from company B.

![Custom Percentage Attributes](/docs/assets/images/custom-percentage-attributes-8b44f64042ed7947f08ccfa0b6f17c84.png)


---

# Data Governance - CDN

ConfigCat's Data Governance feature gives you control over how and where your config JSONs are published and served from. This helps you comply with regional data handling requirements such as GDPR.

## CDN - Data Centers[â](#cdn---data-centers "Direct link to CDN - Data Centers")

To ensure high availability and low response times worldwide, ConfigCat provides multiple global data centers, each with multiple CDN nodes for built-in redundancy and failover.

### ConfigCat Data Center locations[â](#configcat-data-center-locations "Direct link to ConfigCat Data Center locations")

ConfigCat uses Cloudflare Edge Cache Network to deliver the configuration JSONs to the SDKs. Read more about Cloudflare data centers [here](https://www.cloudflare.com/network/).

## How to govern the data?[â](#how-to-govern-the-data "Direct link to How to govern the data?")

Currently available geographical areas:

### Global \[Default][â](#global-default "Direct link to Global \[Default]")

Provides geo-location based load balancing on all nodes around the globe to ensure the lowest response times.

### EU Only[â](#eu-only "Direct link to EU Only")

Compliant with GDPR. This way your data will never leave the EU.

## Set preferences on the Dashboard[â](#set-preferences-on-the-dashboard "Direct link to Set preferences on the Dashboard")

Open [Data Governance page](https://app.configcat.com/organization/data-governance) and follow the steps to set preferences.

> Only team members with Organization Admin role can access Data Governance preferences.

## Set up the ConfigCat SDK in your application code[â](#set-up-the-configcat-sdk-in-your-application-code "Direct link to Set up the ConfigCat SDK in your application code")

Make sure the `dataGovernance` option is specified when initializing the ConfigCat SDK in your application code.

> The `dataGovernance` option's value must be in sync with the selected option on the Dashboard.

## Troubleshooting[â](#troubleshooting "Direct link to Troubleshooting")

#### What if I forget to specify the `dataGovernance` option?[â](#what-if-i-forget-to-specify-the-datagovernance-option "Direct link to what-if-i-forget-to-specify-the-datagovernance-option")

By default, the ConfigCat SDK contacts the ConfigCat Global CDN. However, if you switch to the EU CDN on the Dashboard, your config JSONs will only be published to the EU CDN nodes. Therefore, if you forget to specify the `dataGovernance` option when initializing the ConfigCat SDK, feature flag data download requests will need to be redirected to the EU CDN. To avoid this, it's recommended to specify the correct `dataGovernance` option, otherwise response times can be significantly longer.

#### `Warning: The dataGovernance parameter specified at the client initialization is not in sync with the preferences on the ConfigCat Dashboard....`[â](#warning-the-datagovernance-parameter-specified-at-the-client-initialization-is-not-in-sync-with-the-preferences-on-the-configcat-dashboard "Direct link to warning-the-datagovernance-parameter-specified-at-the-client-initialization-is-not-in-sync-with-the-preferences-on-the-configcat-dashboard")

**Don't worry,** your feature flags will still be served. See above example.


---

# MCP Server

## Overview[â](#overview "Direct link to Overview")

[Model Context Protocol (MCP)](https://modelcontextprotocol.io/docs/getting-started/intro) is an open protocol that standardizes how applications provide context to large language models (LLMs). The ConfigCat MCP server lets you manage feature flags and configurations via the Public Management API seamlessly from AI tools. It also enables your code editor to understand your feature flags, integrate the appropriate ConfigCat SDK into your project or even create new feature flags directly in your codebase.

Your browser does not support the video tag. You can download the video here: [mcp-demo.mp4](https://configcat.com/docs/docs/assets/mcp/mcp-demo.mp4).

## Features[â](#features "Direct link to Features")

* Manage organizations, members and permissions
* Create and update products, configs, and environments
* Manage feature flags and settings
* Manage tags and user segments
* Connect with integrations and webhooks
* Track activity with audit logs and zombie flag (stale flag) reports
* Find code references linked to your features
* Integrate ConfigCat SDK and implement feature flags in your project

## Prerequisites[â](#prerequisites "Direct link to Prerequisites")

* [Node.js](https://nodejs.org) version 16 or higher installed
* [Public Management API basic auth credentials](https://app.configcat.com/my-account/public-api-credentials) for ConfigCat MCP server created

## Setup[â](#setup "Direct link to Setup")

Supply your [Public Management API basic auth credentials](https://app.configcat.com/my-account/public-api-credentials).

The MCP server's configuration includes the following environment variables:

| Variable             | Required | Default                     | Description                         |
| -------------------- | -------- | --------------------------- | ----------------------------------- |
| `CONFIGCAT_API_USER` | â        | â                           | Management API basic auth username. |
| `CONFIGCAT_API_PASS` | â        | â                           | Management API basic auth password. |
| `CONFIGCAT_BASE_URL` |          | `https://api.configcat.com` | Override API host (rarely needed).  |

### Client Configuration[â](#client-configuration "Direct link to Client Configuration")

* Cursor
* Visual Studio Code
* Claude Desktop

1. Install [Cursor](https://cursor.com/)
2. Open **Preferences** â **Cursor Settings** â **MCP & Integrations**
3. Click **Add Custom MCP**
4. Add (or merge) the snippet below into your JSON settings:

```
{
  "mcpServers": {
    "ConfigCat": {
      "command": "npx",
      "args": ["-y", "@configcat/mcp-server"],
      "env": {
        "CONFIGCAT_API_USER": "YOUR_API_USER",
        "CONFIGCAT_API_PASS": "YOUR_API_PASSWORD"
      }
    }
  }
}
```

5. **Save** â the server will start on demand.
6. You can start writing prompts into Cursor's AI panel.

1) Install [VS Code](https://code.visualstudio.com/) and [GitHub Copilot](https://code.visualstudio.com/docs/copilot/setup)
2) Create a `.vscode/mcp.json` file in your project root with the following content:

```
{
  "servers": {
    "ConfigCat": {
      "command": "npx",
      "args": ["-y", "@configcat/mcp-server"],
      "env": {
        "CONFIGCAT_API_USER": "YOUR_API_USER",
        "CONFIGCAT_API_PASS": "YOUR_API_PASSWORD"
      }
    }
  }
}
```

3. Save the settings file. The MCP server should now be available in VS Code.
4. You can start writing prompts into VS Code's AI panel.

1) Install [Claude Desktop](https://claude.ai/download)
2) Open **Settings** â **Developer**
3) Click **Edit Config**
4) In `claude_desktop_config.json` add:

```
{
  "mcpServers": {
    "ConfigCat": {
      "command": "npx",
      "args": ["-y", "@configcat/mcp-server"],
      "env": {
        "CONFIGCAT_API_USER": "YOUR_API_USER",
        "CONFIGCAT_API_PASS": "YOUR_API_PASSWORD"
      }
    }
  }
}
```

5. **Save** & restart Claude Desktop.

info

Replace `YOUR_API_USER` and `YOUR_API_PASSWORD` environment variables with your [Public Management API basic auth credentials](https://app.configcat.com/my-account/public-api-credentials).

## Interaction[â](#interaction "Direct link to Interaction")

After you install the ConfigCat MCP server in your AI client, you can prompt your agent to create or manage your feature flags and configurations. Typically you need to click Run tool (or the equivalent option in your AI client) to execute the result.

For example, you could try asking

> Create a boolean feature flag called "my\_awesome\_feature" in the "Backend" config

or

> Turn the "my\_awesome\_feature" flag ON in all environments

or

> Update the "my\_awesome\_featureâ flag in dev environment so itâs only enabled for users in Canada

or

> Create a new feature flag by cloning the configuration of the "my\_awesome\_feature" flag, and name it "my\_another\_awesome\_feature".

or

> Update the "my\_awesome\_feature" flag description: "When enabled, show my awesome feature.â

or

> List the stale feature flags that havenât been modified in the past 6 days.

or

> Show who last modified the "myNewAwesomeFeature" flag, and to what.

or

> Invite sarah\@example.com to the "Main" product with "Administrators" permissions.

## See Also[â](#see-also "Direct link to See Also")

* [ConfigCat MCP server GitHub repository](https://github.com/configcat/mcp-server)
* [ConfigCat MCP server available tools](https://github.com/configcat/mcp-server?tab=readme-ov-file#available-tools)
* [Management API Reference](https://configcat.com/docs/docs/api/reference/configcat-public-management-api/.md)
* [How to Manage Feature Flags with ConfigCat's MCP Server - Blog post](https://configcat.com/blog/mcp-server-feature-flags/)


---

# Details of LaunchDarkly to ConfigCat Translation

This document discusses the details of how [ConfigCat's "Import from LaunchDarkly" tool](https://configcat.com/docs/docs/advanced/migration-from-launchdarkly/.md#migrate-launchdarkly-feature-flags-and-segments-to-configcat) translates LaunchDarkly projects to ConfigCat products (i.e., how, in practice, the import tool converts the project data fetched fromLaunchDarkly's REST API to ConfigCat's Export/Import JSON format).

You need this information if you want to understand

* why the import tool produces the result that it does,
* what issues can arise during translation, and how to solve them,
* what the limitations of translation are.

## Mapping between LaunchDarkly and ConfigCat entities[â](#mapping-between-launchdarkly-and-configcat-entities "Direct link to Mapping between LaunchDarkly and ConfigCat entities")

The table below shows how LaunchDarkly entities are mapped to ConfigCat entities.

| LaunchDarkly entity        | Corresponding ConfigCat entity                                                                                                                                                                       | Notes                                                                                                                                                                                                                                                                                |
| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| project                    | [product](https://configcat.com/docs/docs/main-concepts/.md#product)                                                                                                                                 |                                                                                                                                                                                                                                                                                      |
| environment                | [environment](https://configcat.com/docs/docs/main-concepts/.md#environment)                                                                                                                         |                                                                                                                                                                                                                                                                                      |
| segment                    | [segment](https://configcat.com/docs/docs/targeting/targeting-rule/segment-condition/.md#what-is-a-segment-condition-what-is-a-segment)                                                              | LaunchDarkly segments are specific to an environment, but ConfigCat segments are specific to a product, so mapped segment names are prefixed with the environment name to avoid ambiguity.                                                                                           |
| feature flag               | [feature flag / setting](https://configcat.com/docs/docs/targeting/targeting-overview/.md#feature-flag--setting)                                                                                     | LaunchDarkly feature flags are directly contained by a project, but ConfigCat feature flags are organized into [configs](https://configcat.com/docs/docs/main-concepts/.md#config), so a config named "Main Config" is created to contain them.                                      |
| targeting toggle           | -                                                                                                                                                                                                    | No direct translation is possible. More on this [here](https://configcat.com/docs/docs/advanced/migration-from-launchdarkly/.md#targeting-toggle-translation-mode).                                                                                                                  |
| prerequisites              | -                                                                                                                                                                                                    | Each prerequisite is translated to a [Targeting Rule](https://configcat.com/docs/docs/targeting/targeting-overview/.md#targeting-rule) containing a [Flag Condition](https://configcat.com/docs/docs/targeting/targeting-rule/flag-condition/.md).                                   |
| individual targets         | -                                                                                                                                                                                                    | Each target group is translated to a [Targeting Rule](https://configcat.com/docs/docs/targeting/targeting-overview/.md#targeting-rule) containing an IS ONE OF [User Condition](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md).                        |
| custom rule                | [Targeting Rule](https://configcat.com/docs/docs/targeting/targeting-overview/.md#targeting-rule)                                                                                                    | Multiple clauses (i.e. [AND conditions](https://configcat.com/docs/docs/targeting/targeting-rule/targeting-rule-overview/.md#and-and-or-relationships) in ConfigCat's terminology) are not supported for segments, only for feature flags at the moment.                             |
| custom rule clause         | [User Condition](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md) or [Segment Condition](https://configcat.com/docs/docs/targeting/targeting-rule/segment-condition/.md) | Some LaunchDarkly clauses cannot be translated to ConfigCat conditions with the same evaluation behavior, or at all. See also [translation issues](#translation-issues)                                                                                                              |
| clause attribute reference | [comparison attribute](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#comparison-attribute)                                                                             | LaunchDarkly context attribute paths don't always translate to ConfigCat user attribute names directly. See also [this section](#mapping-between-launchdarkly-contexts-and-configcat-user-objects).                                                                                  |
| clause operator            | [comparator](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#comparator)                                                                                                 | Most LaunchDarkly operators have their counterparts in ConfigCat (there can be minor or major differences between them though), but a few operators are not supported by ConfigCat at all (e.g. "matches" / "does not match").                                                       |
| clause values              | [comparison value](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#comparison-value)                                                                                     | As opposed to LaunchDarkly, not all counterparts of operators support multiple values.                                                                                                                                                                                               |
| percentage rollout         | [Percentage Options](https://configcat.com/docs/docs/targeting/percentage-options/.md)                                                                                                               | In LaunchDarkly, the basis of the grouping can be set for each percentage rollout, while in ConfigCat [Percentage Evaluation Attribute](https://configcat.com/docs/docs/targeting/percentage-options/.md#percentage-evaluation-attribute) can only be set at the feature flag level. |
| default rule               | [trivial / fallback rule](https://configcat.com/docs/docs/targeting/targeting-overview/.md#to-all-users--to-all-other--to-unidentified-value)                                                        |                                                                                                                                                                                                                                                                                      |

## Mapping between LaunchDarkly contexts and ConfigCat User Objects[â](#mapping-between-launchdarkly-contexts-and-configcat-user-objects "Direct link to Mapping between LaunchDarkly contexts and ConfigCat User Objects")

Both LaunchDarkly and ConfigCat support passing user and/or session-related contextual information to feature flag evaluation, which is essential for targeting: LaunchDarkly offers [contexts](https://launchdarkly.com/docs/home/observability/contexts), while ConfigCat offers [User Objects](https://configcat.com/docs/docs/targeting/user-object/.md) for this purpose.

However, the data structure of these is different:

* In LaunchDarkly, in addition to the default user context, it is possible to define and use other, arbitrary contexts (e.g. device, application, etc.). [Multi-contexts](https://launchdarkly.com/docs/home/flags/multi-contexts) and nested objects are also possible.
* On the contrary, ConfigCat's User Object is a simpler data structure, primarily designed for storing user-related information. However, via custom attributes it's still able to store arbitrary information.

On top of that, LaunchDarkly context attributes are identified by the combination of a context kind and a path expression, while ConfigCat uses simple attribute names. For this reason, it is necessary to define an unambiguous mapping between the two.

This is done as shown in the following table:

| LaunchDarkly context kind | LaunchDarkly context attribute path | Corresponding ConfigCat user attribute name |
| ------------------------- | ----------------------------------- | ------------------------------------------- |
| not specified or `user`   | empty string or `/`                 | `/`                                         |
| not specified or `user`   | `key` or `/key`                     | `Identifier`                                |
| not specified or `user`   | `email` or `/email`                 | `Email`                                     |
| not specified or `user`   | `country` or `/country`             | `Country`                                   |
| not specified or `user`   | `Identifier` or `/Identifier`       | `/Identifier`                               |
| not specified or `user`   | `Email` or `/Email`                 | `/Email`                                    |
| not specified or `user`   | `Country` or `/Country`             | `/Country`                                  |
| not specified or `user`   | `name` or `/name`                   | `name`                                      |
| not specified or `user`   | `/address/city`                     | `/address/city`                             |
| `device`                  | empty string or `/`                 | `device:/`                                  |
| `device`                  | `name` or `/name`                   | `device:name`                               |
| `organization`            | `name` or `/name`                   | `organization:name`                         |
| `organization`            | `/address/city`                     | `organization:/address/city`                |
| any                       | `kind` or `/kind`                   | `/kind`                                     |

Please note that:

* Both LaunchDarkly context attribute paths and ConfigCat user attribute names are case-sensitive.
* In ConfigCat, `Identifier`, `Email` and `Country` are predefined attributes. Everything else qualifies as custom attributes.
* One-component LaunchDarkly attribute path expressions are always normalized to their unescaped form if possible. E.g. `/~0~1x` â `~/x`, but `/~1~00` â `/~1~00` (as `/~0` would be an ambiguous mapping).
* Multi-component LaunchDarkly attribute path expressions are kept as is (unless they contain `:` characters - see below).
* Context kinds other than `user` are included as a prefix in the mapped ConfigCat user attribute name, with `:` as the separator. Because of this, LaunchDarkly context attribute paths containing `:` characters needs to be escaped to avoid ambiguity. E.g. `a:b` -> `/a~;b`, `/a:b` -> `/a~;b`.

## Translation issues[â](#translation-issues "Direct link to Translation issues")

There are technical differences between LaunchDarkly and ConfigCat, therefore it's not always possible to translate all entities accurately, i.e. so that they are represented identically in ConfigCat, and provide equivalent behavior to the original. (By equivalent behaviour we primarily mean equivalent evaluation behaviour, i.e. that the evaluation of a feature flag or segment produces the same result for the same input parameters.)

Such problematic cases are called *translation issues*, and a *severity level* is assigned to them as follows.

ð´Â HIGH - The imported entity cannot provide equivalent behavior to the original at all.<br />ð¡Â MEDIUM - The imported entity may not provide equivalent behavior to the original in every case.<br />ðµÂ LOW - The imported entity does not exactly reflect the original in some way, but it is expected to provide equivalent behavior to the original.

The tables below show the possible translation issues.

### Limitations[â](#limitations "Direct link to Limitations")

info

Usually these issues arise when you are on a lower plan, and hitting a subscription limit. If that's the case, feel free to [contact us](https://configcat.com/support/?prefilled=ld-import-limit), we are happy to raise your limits temporarily so you can fully explore the product and evaluate it at your pace.

| Code | Level   | Issue                                                                                                                                                                                            | What can be the cause?                                                                               | How is it handled?                                                                                                                                                                                             |
| ---- | ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| L001 | ð´Â HIGH | The number of Targeting Rules resulting from the translation would exceed the [subscription / technical limit](https://configcat.com/docs/docs/subscription-plan-limits/.md).                    | There are too many rules in the original feature flag.                                               | As many LaunchDarkly rules as the limit allows are imported, but the rest is omitted.                                                                                                                          |
| L002 | ð´Â HIGH | The number of conditions resulting from the translation would exceed the [subscription / technical limit](https://configcat.com/docs/docs/subscription-plan-limits/.md).                         | There are too many clauses in a rule of the original feature flag.                                   | As many LaunchDarkly clauses as the limit allows are imported, but the rest is omitted.                                                                                                                        |
| L003 | ð´Â HIGH | The number of percentage options resulting from the translation would exceed the [subscription / technical limit](https://configcat.com/docs/docs/subscription-plan-limits/.md).                 | There are too many percentage rollout variations in the original feature flag.                       | As many LaunchDarkly percentage rollout variations as the limit allows are imported, but the rest is omitted. The percentage of the last imported item is adjusted so that the sum of percentages equals 100%. |
| L004 | ð´Â HIGH | The length of a comparison value resulting from the translation would exceed the [subscription / technical limit](https://configcat.com/docs/docs/subscription-plan-limits/.md).                 | The value(s) of a LaunchDarkly clause translate to a string comparison value that would be too long. | The comparison value is truncated so that it fits within the limit.                                                                                                                                            |
| L005 | ð´Â HIGH | The number of items in a comparison value list resulting from the translation would exceed the [subscription / technical limit](https://configcat.com/docs/docs/subscription-plan-limits/.md).   | The values of a clause translate to a comparison value list that would have too many items.          | The comparison value list is truncated so that it fits within the limit.                                                                                                                                       |
| L006 | ð´Â HIGH | The length of an item in a comparison value list resulting from the translation would exceed the [subscription / technical limit](https://configcat.com/docs/docs/subscription-plan-limits/.md). | One or more values of a clause translate to a comparison value item that would be too long.          | The comparison value item is truncated so that it fits within the limit.                                                                                                                                       |
| L007 | ð´Â HIGH | The length of a text setting value resulting from the translation would exceed the [subscription / technical limit](https://configcat.com/docs/docs/subscription-plan-limits/.md).               | A feature flag variation value translates to a text setting value that would be too long.            | The text setting value is truncated so that it fits within the limit.                                                                                                                                          |

### Technical differences[â](#technical-differences "Direct link to Technical differences")

| Code | Level     | Issue                                                                                                                                       | What can be the cause?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | How is it handled?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ---- | --------- | ------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| T001 | ðµÂ LOW    | A project, environment, segment or feature flag was imported under a different name than the original.                                      | 1. LaunchDarkly project, environment and segment names do not have to be unique (since those items always have a unique key in LaunchDarkly too). The corresponding ConfigCat entities, however, must have a case-insensitive unique name.<br />2. LaunchDarkly allows longer names than ConfigCat.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 1. In the case of identical names, the LaunchDarkly unique key is included in the name. If this is still not unique, then a number suffix is added as well.<br />2. Names that are too long are truncated at the maximum length. If this results in a conflicting name, it is made unique by adding a number suffix.                                                                                                                                                                                                                                                                                                                                                                                                                |
| T002 | ð¡Â MEDIUM | A feature flag was imported with a different key than the original.                                                                         | 1. Feature flag keys are unique in both systems, but they must be case sensitive in LaunchDarkly and case insensitive in ConfigCat.<br />2. As opposed to LaunchDarkly, ConfigCat feature flag keys are not allowed to start with a number or contain dots.<br />3. Depending on the Targeting Toggle Translation Mode option, the targeting toggle may be emulated using an extra prerequisite flag. The key for this is generated by adding the suffix `_tt` to the key of the main flag.                                                                                                                                                                                                                                                                                                      | 1. Conflicts are resolved by adding a number suffix.<br />2. Characters that are invalid in ConfigCat are replaced with `_`. If the first character is not a letter, the prefix `x_` is also added to the key. If this results in a conflicting key, it is made unique by adding a number suffix.<br />3. Conflicts are resolved by adding a number suffix. (But always the uniqueness of the the actually imported flags' keys are ensured first.)                                                                                                                                                                                                                                                                                 |
| T003 | ðµÂ LOW    | A feature flag tag name was truncated.                                                                                                      | LaunchDarkly may allow longer tag names than ConfigCat.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Names that are too long are truncated at the maximum length. If this results in a conflicting name, no effort is made to make it unique.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| T004 | ðµÂ LOW    | A JSON feature flag was encountered.                                                                                                        | LaunchDarkly allows feature flags with JSON values, but ConfigCat doesn't support that directly at the moment.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | A text setting is created in ConfigCat, with values containing the JSON variation values serialized to text. It is your responsibility to deserialize the text once returned by feature flag evaluation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| T005 | ð¡Â MEDIUM | A comparison attribute name was truncated.                                                                                                  | A context attribute name is mapped to a user attribute name that is too long.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | The comparison attribute name is truncated so that it fits within the limit. If this results in a conflicting name, no effort is made to make it unique.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| T006 | ð´Â HIGH   | Unset off variation was encountered.                                                                                                        | In LaunchDarkly, it is not required to set a variation for the case when targeting is turned off. In that case, feature flag evaluation will return the default value you pass to the LaunchDarkly SDK. There is no way to reproduce this behavior in ConfigCat.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | There is no way to emulate this behavior in ConfigCat, so a placeholder value is used as follows:- boolean flag: `false`<br />- string flag: `""` (empty string)<br />- json flag: `"null"`<br />- number flag: 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| T007 | ðµÂ LOW    | Targeting is turned off, and the targeting toggle was respected.                                                                            | Targeting Toggle Translation Mode option was set to "Respect targeting toggle and don't import rules", and1. targeting is turned off for the feature flag in the specific environment,<br />2. or targeting is turned off for one or more prerequisites in the specific environment (see also the "Prerequisite flags must be on" section in [this article](https://launchdarkly.com/docs/home/flags/prereqs)).                                                                                                                                                                                                                                                                                                                                                                                  | A single Targeting Rule that returns the off variation is created in ConfigCat, and the actual rules are not imported for the specific environment. (The imported feature flag will work as it does in LaunchDarkly at the time of import.)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| T008 | ð¡Â MEDIUM | Targeting is turned off, and the targeting toggle was ignored.                                                                              | Targeting Toggle Translation Mode option was set to "Ignore targeting toggle and import rules anyway", and1. targeting is turned off for the feature flag in the specific environment,<br />2. or targeting is turned off for one or more prerequisites in the specific environment (see also the "Prerequisite flags must be on" section in [this article](https://launchdarkly.com/docs/home/flags/prereqs)).                                                                                                                                                                                                                                                                                                                                                                                  | The off variation is ignored, and the actual rules are imported for the specific environment. (The imported feature flag will not work as it does in LaunchDarkly at the time of import.)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| T009 | ð´Â HIGH   | A segment clause references multiple segments, but cannot be translated due to subscription / technical limit.                              | ConfigCat doesn't support referencing multiple segments in Segment Conditions. There is a workaround though: non-negated LaunchDarkly clauses can be expanded into multiple ConfigCat Targeting Rules, negated LaunchDarkly clauses can be expanded into multiple ConfigCat conditions. However, in the specific case the expansion is not possible because of subscription / technical limits.                                                                                                                                                                                                                                                                                                                                                                                                  | A Segment Condition is created in ConfigCat but it references the first segment only. The rest of the segment references are omitted.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| T010 | ð´Â HIGH   | A segment that references another segment was encountered.                                                                                  | ConfigCat segments do not support targeting segments.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | A placeholder condition is created in ConfigCat.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| T011 | ð´Â HIGH   | An untranslatable clause was encountered in a feature flag or segment rule.                                                                 | The LaunchDarkly clause is not translatable to a ConfigCat condition, not even via a workaround. Such cases are:1. Feature flag or segment rule clause uses the "matches" / "does not match" operators.<br />2. Feature flag rule clause is based on Context kind but cannot be translated to an ARRAY IS (NOT) ONE OF condition.<br />3. Segment rule clause is based on Context kind.<br />4. Segment rule clause uses the "starts with" / "does not start with" / "ends with" / "does not end with" operators.<br />5. Segment rule clause uses the "before" or "after" operator.<br />6. Feature flag or segment rule targets application versions (no such feature in ConfigCat).                                                                                                           | A placeholder condition is created in ConfigCat.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| T012 | ðµÂ LOW    | A clause was translated to multiple Targeting Rules or conditions.                                                                          | Some LaunchDarkly clauses like segment clauses referencing multiple segments cannot be directly translated to a single ConfigCat condition. However, in the specific case, a workaround that provides logically equivalent evaluation behavior is possible.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | If the LaunchDarkly clause is non-negated, it is expanded into multiple ConfigCat Targeting Rules, otherwise it is expanded into multiple ConfigCat conditions.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| T013 | ð´Â HIGH   | A "contains" / "does not contain" segment clause with multiple values was encountered.                                                      | In segments, the ConfigCat counterparts of the "contains" / "does not contain" operators only accept a single comparison value at the moment.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | The clause is translated to a CONTAINS / DOES NOT CONTAIN segment, however only the first clause value is preserved. The rest of the values are omitted.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| T014 | ðµÂ LOW    | A "<", "<=", ">", ">=", "SemVer <", "SemVer <=", "SemVer >", "SemVer >=" or "before" / "after" clause with multiple values was encountered. | The ConfigCat counterpart of these operators allows a single comparison value only.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Multiple comparison values are reduced to a single one. (This can be done in such a way that the clause remains logically accurate.) The rest of the values are omitted though.<br />It is also worth noting that the evaluation behavior of "SemVer <=" and "SemVer >=" clauses with multiple values is inconsistent with similar operators in LaunchDarkly. So, since translation preserves the inconsistent behavior, it may produce surprising results in such cases.                                                                                                                                                                                                                                                           |
| T015 | ð¡Â MEDIUM | A "Context kind is (not) one of" clause was encountered.                                                                                    | In ConfigCat, there is no such concept as contexts and context kinds. ConfigCat SDKs won't automatically provide context kinds as an attribute via the User Object.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | An ARRAY IS (NOT) ONE OF condition is created in ConfigCat, but it is your responsibility to pass the context kind values to the ConfigCat SDK via the custom user attribute named `/kind`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| T016 | ð¡Â MEDIUM | A mobile targeting-related clause was encountered.                                                                                          | For mobile apps, LaunchDarkly allows targeting special, [automatically provided context attributes](https://launchdarkly.com/docs/sdk/features/environment-attributes) of context kinds `ld_application` and `ld_device`. ConfigCat SDKs won't automatically provide these attributes via the User Object.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | The clause is translated, but it is your responsibility to pass the attribute values to the ConfigCat SDK via custom user attributes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| T017 | ð¡Â MEDIUM | A not accurately translatable "is (not) one of" clause was encountered.                                                                     | In LaunchDarkly, "is (not) one of" clauses can work with string, boolean and number values, but their ConfigCat counterparts can work with strings only. This can be a problem in two cases:1. "is (not) one of" clauses with boolean comparison values cannot be translated accurately as ConfigCat offers no comparators that work with boolean values at the moment,<br />2. "is (not) one of" clauses with number comparison values may be translated accurately using the = (number) / != (number) comparators. These accept a single comparison value though, so clauses with multiple values must be expanded into multiple targeting rules or conditions, depending on negation. However, in the specific case the expansion is not possible because of subscription / technical limits. | An IS (NOT) ONE OF condition is created in ConfigCat and the non-string values are converted to string.<br />From the perspective of feature flag evaluation this means the following: the ConfigCat SDK will convert non-string user attributes to string, and do case-sensitive string comparisons when evaluating the feature flag. In the case of boolean and decimal number values this can lead to undesired behavior. E.g. on some platforms, the ConfigCat SDK may convert the false boolean value to the string `False`, which won't be matched by an IS ONE OF condition having a comparison value `false`. Similarly, there could be subtle differences in decimal number to string conversion across various platforms. |
| T018 | ðµÂ LOW    | One or more variations of a percentage rollout had to be omitted.                                                                           | LaunchDarkly includes all the feature flag variations in a percentage rollout even if most of them are set 0%. However, this could lead to exceeding the subscription limit on Percentage Options in ConfigCat (especially, on lower plans).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | As variations set to 0% don't affect the evaluation of the imported Percentage Options, translation omits as many of them as needed to fit within the limit.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| T019 | ð¡Â MEDIUM | One or more percentage values of a percentage rollout had to be adjusted.                                                                   | As opposed to LaunchDarkly, ConfigCat doesn't allow fractional percentage values in Percentage Options.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Non-integer percentage values are rounded. This may also cause the sum of the percentage values to over or undershoot 100%. In such cases, further adjustments are performed to make the sum exactly 100%.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| T020 | ð´Â HIGH   | There are multiple percentage rollout rules in the feature flag, but they do not use the same attribute as the basis of the rollout.        | In LaunchDarkly, it is possible to set different attributes as the basis of the rollout for each percentage rollout rule. In ConfigCat, this can only be set at the feature flag level.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | There is no workaround. The attribute that occurs the most times is set as the flag's Percentage Evaluation Attribute.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| T021 | ð´Â HIGH   | A segment with no rules was encountered.                                                                                                    | LaunchDarkly allows segments to have no rules, while ConfigCat segments specify exactly one rule.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | A segment with a placeholder condition is created in ConfigCat.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| T022 | ð´Â HIGH   | A segment with multiple rules was encountered.                                                                                              | LaunchDarkly allows segments to have multiple rules, while ConfigCat segments specify exactly one rule.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | A segment is created in ConfigCat, with a translation of the first rule only. The rest of the rules are omitted.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| T023 | ð´Â HIGH   | A segment rule with multiple clauses was encountered.                                                                                       | LaunchDarkly allows multiple clauses in segment rules, while ConfigCat doesn't support AND conditions in segments at the moment.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | There is no workaround. Clauses except for the first one are omitted.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| T024 | ð´Â HIGH   | A segment rule with percentage targeting was encountered.                                                                                   | LaunchDarkly allows segment rules to include a percentage of targets only. ConfigCat segments doesn't offer such feature.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | There is no workaround. The percentage targeting part is ignored.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| T025 | ð´Â HIGH   | A segment rule was only partially translated.                                                                                               | Translating the segment rule would require multiple rules in ConfigCat, which is not supported.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | The segment rule is only partially imported.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| T026 | ð´Â HIGH   | A big segment was encountered.                                                                                                              | Big segments are not supported by ConfigCat.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | A normal segment with a hint about the issue is created in ConfigCat.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| T027 | ð´Â HIGH   | Comparison value list item contains comma.                                                                                                  | In the case of segments, multiple clause values translate to a comma separated comparison value list. There is no way to escape the comma, so it must be replaced with another character, otherwise values containing a comma would be interpreted as multiple items.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Comma is replaced with semicolon in comparison value list items.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |

### Data consistency[â](#data-consistency "Direct link to Data consistency")

| Code | Level     | Issue                                                                                        | What can be the cause?                                                                                                                                                                                                                                                                                                                                                                                                    | How is it handled?                                                                                                                                                                                                                                   |
| ---- | --------- | -------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| D001 | ð´Â HIGH   | The data model fetched from LaunchDarkly contains invalid, inconsistent or unexpected data.  | In theory, such a thing cannot happen, but in practice it cannot be excluded.                                                                                                                                                                                                                                                                                                                                             | Obviously, the import tool cannot produce a correct result from an inherently incorrect input. As a best effort, it generates a valid import model so that the import operation can go through, and you can review and fix the problematic entities. |
| D002 | ð¡Â MEDIUM | The feature flag was modified in LaunchDarkly while the feature flag data was being fetched. | Due to the peculiarities of the LaunchDarkly REST API, the full data model of a feature flag can only be queried for a single environment per a single request. So, it may happen that some non-environment-related properties of the feature flag are modified while fetching the feature flag data (e.g. name, variations, etc.) In such cases, inconsistencies across environments are possible in the retrieved data. | The import tool can only detect inconsistencies, but cannot do anything about them. Please check whether the imported feature flag is set correctly in each environment. Alternatively, you may try to re-import the specific feature flag.          |

## Further technical differences[â](#further-technical-differences "Direct link to Further technical differences")

* As opposed to LaunchDarkly, ConfigCat distinguishes between integer and decimal number feature flags. Therefore, when translating number feature flags, the ConfigCat setting type is guessed based on the variation values specified at the time of the import.

* For percentage rollouts, LaunchDarkly and ConfigCat use different algorithms to split users into groups. That is, even if the percentage values are the same, the distribution of users will be different. In other words, [stickiness](https://configcat.com/docs/docs/targeting/percentage-options/.md#stickiness) of percentage rollouts cannot be transferred to ConfigCat.

* In the case of percentage rollouts within custom rules, evaluation behavior is different between the two services when the attribute used as the basis of the percentage rollout is not provided (i.e. not passed to the SDK on evaluation):

  <!-- -->

  * LaunchDarkly will serve the value of the first variation whose percentage value is not 0%.
  * ConfigCat will skip the targeting rule and continue evaluation with the next rule.

* In LaunchDarkly, all clause operators can work with context attribute value lists. In ConfigCat, most of the comparators (counterparts of operators) can work with a single user attribute only. The only exceptions is ARRAY IS (NOT) ONE OF.

* In LaunchDarkly, it is possible to control whether or not specific feature flags are visible to mobile and/or client-side SDKs ([Client-side SDK availability](https://launchdarkly.com/docs/home/flags/new#make-flags-available-to-client-side-and-mobile-sdks)). There is no such feature in ConfigCat, so this preference is ignored. All the feature flags are imported into a single config which can be accessed by all kinds of ConfigCat SDKs.

* In LaunchDarkly, it is possible to mark a feature flag as temporary or permanent. There is no such feature in ConfigCat. Yet translation preserves this piece of information by adding a tag to the feature flag.

* In LaunchDarkly, it is possible to assign a name to the variations (possible outcomes of the feature flag). There is no such feature in ConfigCat at the moment, so these pieces of information are not transferred.


---

# Migration from LaunchDarkly

This document is for current LaunchDarkly users who want to migrate to ConfigCat. It guides you through the migration process while providing information on the technical differences between the two services that you need to be aware of.

Migration can be done on a LaunchDarkly project basis, and migration of a project usually consists of the following three steps:

1. Migrating LaunchDarkly feature flags and segments to ConfigCat
2. Adjusting the code of your applications to use ConfigCat instead of LaunchDarkly
3. Migrating LaunchDarkly teams and permissions to ConfigCat

ConfigCat provides a wizard-like tool that is able to do the heavy lifting for step 1. However, there is currently no automation for step 2 and 3. So please expect these steps to require some manual work.

However, before diving into it all, please check [this list](https://configcat.com/docs/docs/sdk-reference/overview/.md) to see if ConfigCat supports the platform your applications are running on. If not, feel free to [contact us](https://configcat.com/support). Maybe we can still figure out a way for you to migrate to ConfigCat.

## Getting started[â](#getting-started "Direct link to Getting started")

To be able to perform the migration, it's essential that you have a basic understanding of ConfigCat's main concepts and hierarchy. So, as the very first step, please read through [this brief guide](https://configcat.com/docs/docs/main-concepts/.md).

LaunchDarkly projects correspond to ConfigCat products in the ConfigCat hierarchy. However, as you already know, products are not standalone entities, they are contained by a ConfigCat organization.

So, to get started with migration, you will need to have a ConfigCat account and be a member of the ConfigCat organization that you want to host the products corresponding to the projects you plan to migrate from LaunchDarkly. You will also need to have the Organization Admin permission in that ConfigCat organization to be able to create products.

* If the target ConfigCat organization does not exist yet, you can create one by [signing up](https://app.configcat.com/auth/signup). During the signup process, you will have the opportunity to create your own organization, in which you will have the Organization Admin permission by default.
* Otherwise, you will need to get an invitation to the target ConfigCat organization, and after joining, you will need to request the Organization Admin permission.

Once the target ConfigCat organization is set up and you have the necessary permissions in it, you can start the actual migration.

## Migrate LaunchDarkly feature flags and segments to ConfigCat[â](#migrate-launchdarkly-feature-flags-and-segments-to-configcat "Direct link to Migrate LaunchDarkly feature flags and segments to ConfigCat")

It is recommended to migrate your LaunchDarkly feature flags and segments to ConfigCat first, using ConfigCat's official import tool, which was designed for this specific purpose.

The tool also takes care of creating the corresponding ConfigCat products and environments, and it does everything possible to reproduce your LaunchDarkly feature flags and segments in ConfigCat so they match the original evaluation behavior as closely as possible.

### Using the import tool[â](#using-the-import-tool "Direct link to Using the import tool")

To launch the import tool, open the dropdown menu in the top left corner of the [ConfigCat Dashboard](https://app.configcat.com/organization), navigate to the Organization Overview page, then click the card labeled "Import from LaunchDarkly".

![Launching the import tool](/docs/assets/migration-from-launchdarkly/launch-import-tool_192dpi.png)

This will take you to a page with a wizard-like UI:

![The import tool](/docs/assets/migration-from-launchdarkly/import-tool_192dpi.png)

Follow the instructions and go through the steps to perform the import.

Feel free to experiment with the import tool. You can't really cause any irreversible damage by doing so. After finishing an import, you can delete the imported products in ConfigCat and start over if you are not satisfied with the result.

It is also possible to re-import products or specific parts of those without having to delete the products created previously. The import tool is able to update the existing entities with fresh data. However, this may involve undoable overwriting of existing data, so please be careful. The import tool will warn you if something like this is about to happen.

### Targeting toggle translation mode[â](#targeting-toggle-translation-mode "Direct link to Targeting toggle translation mode")

In step 3 of the wizard, you may need to make a decision that might not be self-evident.

LaunchDarkly feature flags have a [toggle](https://docs.launchdarkly.com/home/flags/toggle) that allows you to enable or disable targeting for the specific feature flag. However, there is no similar feature in ConfigCat.

So, in case the LaunchDarkly projects you selected for import contain feature flags where the targeting toggle is turned off in some of the environments, you need to decide how to work around such cases.

Your options are the following:

#### Ignore targeting toggle and import rules anyway[â](#ignore-targeting-toggle-and-import-rules-anyway "Direct link to Ignore targeting toggle and import rules anyway")

This will result in an evaluation behavior different from LaunchDarkly. Choose this option if you want to keep your targeting rules even if the targeting toggle is off.

Please consider the following consequences:

* The state of targeting toggles will be ignored.
* The *off variation* values won't be served.
* The targeting rules will be imported and evaluated as if the targeting toggle was on.

#### Respect targeting toggle and don't import rules[â](#respect-targeting-toggle-and-dont-import-rules "Direct link to Respect targeting toggle and don't import rules")

This will result in the same evaluation behavior as in LaunchDarkly. Choose this option if you want your feature flags to produce the same values as in LaunchDarkly.

Please consider the following consequences:

* The state of targeting toggles will be respected.
* The *off variation* values will be served.
* The targeting rules won't be imported in environments where the targeting toggle is off.

#### Emulate targeting toggle using a prerequisite flag[â](#emulate-targeting-toggle-using-a-prerequisite-flag "Direct link to Emulate targeting toggle using a prerequisite flag")

This is a workaround that combines the upsides of the other two options at the expense of creating extra feature flags. Choose this option if you want to import your targeting rules in all cases, and also want your feature flags to produce the same values as they do in LaunchDarkly.

Please consider the following consequences:

* The state of targeting toggles will be respected, however, for each problematic LaunchDarkly feature flag an extra [prerequisite flag](https://configcat.com/docs/docs/targeting/targeting-rule/flag-condition/.md) will be created in ConfigCat to emulate the targeting toggle.
* The *off variation* values will be served.
* The targeting rules will be imported and evaluated depending on the state of the extra prerequisite flag.

### About the import operation[â](#about-the-import-operation "Direct link to About the import operation")

After making your choices on what and how to import in the first steps of the wizard, the import tool performs the operation by importing the selected LaunchDarkly projects one by one. Importing a project consists of two phases:

#### Translation phase[â](#translation-phase "Direct link to Translation phase")

First, the import tool translates the LaunchDarkly project to a ConfigCat product. For more details on how this is done, please refer to [this document](https://configcat.com/docs/docs/advanced/migration-from-launchdarkly-translation/.md).

It's important to note that the import tool performs translation on a best effort basis. It aims to do translation in such a way that you get a feature flag evaluation behavior as close to the original as possible. However, since there are technical differences between LaunchDarkly and ConfigCat, an accurate translation is not possible in every case.

Such problematic cases are called *translation issues*. The import tool detects and collects these issues during translation, and includes them in the report generated at the end of the import operation so you can review them, and make the necessary adjustments where necessary.

You can find the list of possible translation issues [here](https://configcat.com/docs/docs/advanced/migration-from-launchdarkly-translation/.md#translation-issues).

#### Import phase[â](#import-phase "Direct link to Import phase")

After the translation phase, the import tool loads the result into ConfigCat. This is when the corresponding ConfigCat product is actually created (or updated if it already exists).

As the import tool has previously performed all the necessary validation and adjustments, generally you shouldn't encounter any issues during this phase. However, in rare cases failures may occur (most likely, due to a concurrent modification in ConfigCat).

The import tool notifies you of such cases, and it also includes the failure details in the report.

### Final steps[â](#final-steps "Direct link to Final steps")

After finishing the import operation, the import tool displays a summary. This shows you the overall success of each LaunchDarkly project selected for import.

* If you see success icons next to every project, it means everything went fine, no significant issues were detected.
* If you see a warning or error icon next to any project, it means that there are significant issues you need to pay closer attention to, and you will almost certainly need to make manual adjustments, or, in case of failure, even repeat the import.

In either case, it's highly recommended to download and go through the report. It provides details about the detected issues, and also includes links to the original and imported entities, which can make it easier for you to look into and resolve the issues.

## Adjust the code of your applications[â](#adjust-the-code-of-your-applications "Direct link to Adjust the code of your applications")

The next step in the migration process is to adjust the code of your applications to use ConfigCat instead of LaunchDarkly to evaluate your feature flags.

This will also require more or less manual work, depending on what API your applications currently use for feature flag evaluation.

### Adjust a codebase that uses LaunchDarkly SDK[â](#adjust-a-codebase-that-uses-launchdarkly-sdk "Direct link to Adjust a codebase that uses LaunchDarkly SDK")

If your applications implement feature flagging by directly consuming the LaunchDarkly SDK API, you will need to change those parts to use the ConfigCat SDK API. We show how to do this through a simple example.

Let's assume you have the following simple Node.js application:

```
import LaunchDarkly from "@launchdarkly/node-server-sdk";

const sdkKey = process.env.LAUNCHDARKLY_SDK_KEY ?? "#YOUR-SDK-KEY#";
const client = LaunchDarkly.init(sdkKey);

try {
  await client.waitForInitialization({ timeout: 10 });
} catch (error) {
  console.error(`SDK failed to initialize: ${error}`);
  process.exit(1);
}

const context = {
  "kind": "multi",
  "user": {
    "key": "#UNIQUE-USER-IDENTIFIER#",
    "name": "Alice",
    "email": "alice@example.com",
    "country": "UK"
  },
  "organization": {
    "key": "#UNIQUE-ORG-IDENTIFIER#",
    "address": {
      "city": "London"
    }
  }
};

const flagValue = await client.variation("isAwesomeFeatureEnabled", context, false);

if (flagValue) {
  console.log("Feature is enabled.")
} else {
  console.log("Feature is disabled.")
}

process.exit(0);
```

Let's see now step by step how to convert this code to ConfigCat:

1. Uninstall the LaunchDarkly SDK package, and install the ConfigCat one instead:

   ```
   npm uninstall @launchdarkly/node-server-sdk
   npm install configcat-node
   ```

2. Instead of the `LaunchDarkly` namespace, import `configcat`:

   ```
   import configcat from "configcat-node";
   ```

3. Replace the LaunchDarkly SDK key with the ConfigCat one.

   You can obtain it from the [ConfigCat Dashboard](https://app.configcat.com/organization), by selecting the config containing the imported feature flag on the sidebar, and clicking the "VIEW SDK KEY" button in the top right corner of the page.

4. Instead of a LaunchDarkly client instance, obtain a ConfigCat one:

   ```
   const client = configcat.getClient(sdkKey, configcat.PollingMode.AutoPoll, {
      maxInitWaitTimeSeconds: 10
   });
   ```

   Please note that the ConfigCat client doesn't maintain a persistent connection to the remote server, but uses different polling strategies to get the data necessary for feature flag evaluation. Refer to the [SDK reference](https://configcat.com/docs/docs/sdk-reference/js/overview/.md#creating-the-configcat-client) to learn more about the options. For frontend applications and long-running backend services, Auto Polling mode is usually a good choice.

5. Adjust the wait-for-initialization logic.

   * When using Auto Polling mode, you can rewrite it like this:

     ```
     const clientCacheState = await client.waitForReady();
     if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
       /* ... */
       process.exit(1);
     }
     ```

     Please note that the `waitForReady` method is not available on all platforms. On such platforms, you can't really implement this logic at the moment. However, you don't really need to as the feature flag evaluation methods wait for initialization internally anyway. (It's worth noting that if initialization can't complete within the timeout duration specified by the `maxInitWaitTimeSeconds` option, then feature flag evaluation methods will return the default value you pass to them.)

     Actually, you only need this wait-for-initialization logic at the startup of your applications if you want to use [synchronous feature flag evaluation via snapshots](https://configcat.com/docs/docs/sdk-reference/js/overview/.md#snapshots-and-synchronous-feature-flag-evaluation).

   * For other polling modes, the wait-for-initialization logic doesn't make sense, so just omit it.

6. Rewrite LaunchDarkly contexts to ConfigCat User Objects.

   ConfigCat uses the concept of [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) to pass user and/or session-related contextual data to feature flag evaluation. It serves the same purpose as [LaunchDarkly contexts](https://launchdarkly.com/docs/home/observability/contexts), but it's a simpler data structure.

   To be able to convert a context data structure to a User Object one, you will need to do the following:

   * Read [the section on User Objects](https://configcat.com/docs/docs/sdk-reference/js/overview/.md#user-object) in the reference of the SDK for your platform.
   * Read [this section](https://configcat.com/docs/docs/advanced/migration-from-launchdarkly-translation/.md#mapping-between-launchdarkly-contexts-and-configcat-user-objects) to learn how context paths are mapped to User Object attribute names.

   For an example of such conversion, see the adjusted code at the end of this section.

   Please also keep in mind:

   * Some LaunchDarkly SDKs may [automatically provide additional attributes](https://launchdarkly.com/docs/sdk/features/environment-attributes) in contexts. ConfigCat SDKs don't offer a feature like that at the moment, so in case you target such additional attributes in your feature flags, you will need to provide them manually in your applications.
   * LaunchDarkly allows multiple attribute values (an array of values) for all clause operators, but ConfigCat allows multiple attribute values (an array of strings) for the ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF comparators only. This means that it's not possible to specify multiple values for a user attribute if the evaluated feature flag contains a [User Condition](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md) that references the attribute, but has a comparator other than the two mentioned. Unfortunately, no workaround exists for this case.

7. Rewrite feature flag evaluation calls.

   This step is pretty straightforward as ConfigCat SDKs provide similar evaluation methods to LaunchDarkly SDKs. Those methods are named `getValue`, `getValueAsync` or similar.

   A few things to pay attention to:

   * The order of parameters is different. In ConfigCat, the User Object comes last.
   * The ConfigCat feature flag key may be different from the LaunchDarkly one. E.g. if the key starts with a non-letter character, or contains a dot, it will be changed by the import tool because such keys are not valid in ConfigCat. To see which keys have been changed, look for [T002](https://configcat.com/docs/docs/advanced/migration-from-launchdarkly-translation/.md#translation-issue-T002) translation issues in the report.
   * ConfigCat SDKs don't support [automatic camel casing](https://launchdarkly.com/docs/sdk/client-side/react/react-web#flag-keys-in-the-react-web-sdk) of feature flag keys.
   * In statically typed languages, ConfigCat evaluation methods require that the default value type and the feature flag type match. (Usually, there is [a section about this](https://configcat.com/docs/docs/sdk-reference/js/overview/.md#setting-type-mapping) in the SDK reference.)
   * Please be extra careful when evaluating number type feature flags. ConfigCat distinguishes between integer and decimal number feature flags. The former must be evaluated using `getValue<int>`, `getIntValue` or similar, while the latter must be evaluated using `getValue<double>`, `getDoubleValue` or similar. (JavaScript-based SDKs don't have this issue, but you can run into it in other languages.)
   * On some platforms, the ConfigCat client provides asynchronous evaluation methods only. In such cases, synchronous feature flag evaluation is usually still possible, [via snapshots](https://configcat.com/docs/docs/sdk-reference/js/overview/.md#snapshots-and-synchronous-feature-flag-evaluation). But this works slightly differently from the asynchronous methods, so make sure you understand its behavior and possible pitfalls.

By adjusting the example code according to the above, we get this:

```
import configcat from "configcat-node";

const sdkKey = process.env.CONFIGCAT_SDK_KEY ?? "#YOUR-SDK-KEY#";
const client = configcat.getClient(sdkKey, configcat.PollingMode.AutoPoll, {
  maxInitWaitTimeSeconds: 10
});

const clientCacheState = await client.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  console.error("SDK failed to initialize.");
  process.exit(1);
}

const user = {
  identifier: "#UNIQUE-USER-IDENTIFIER#",
  email: "alice@example.com",
  country: "UK",
  custom: {
    "name": "Alice",
    "organization:key": "#UNIQUE-ORG-IDENTIFIER#",
    "organization:/address/city": "London",
    "/kind": ["user", "organization"],
  }
};

const flagValue = await client.getValueAsync("isAwesomeFeatureEnabled", false, user);

if (flagValue) {
  console.log("Feature is enabled.")
} else {
  console.log("Feature is disabled.")
}

process.exit(0);
```

The conversion can be done in a similar way on other platforms as well. Obviously, there may be minor differences, plus advanced topics are not covered here, so it's recommended to start this work by going through the SDK reference for your platform.

### Adjust a codebase that uses OpenFeature[â](#adjust-a-codebase-that-uses-openfeature "Direct link to Adjust a codebase that uses OpenFeature")

You should have an easier time if feature flagging is done using the [OpenFeature](https://openfeature.dev/docs/reference/intro/) abstraction in your applications.

In this case, please check [this list](https://configcat.com/docs/sdk-reference/openfeature/overview/) to see if a ConfigCat OpenFeature provider is available for your platform.

If you're out of luck, you can still use the ConfigCat SDK directly as explained in the previous section, or [contact us](https://configcat.com/support) about the missing OpenFeature provider.

Otherwise, to switch to ConfigCat, you need to do the following:

1. Uninstall the LaunchDarkly OpenFeature provider package, and install the ConfigCat one instead.

2. Adjust the initialization logic.

   Look for a call to `setProvider`, `setProviderAndWait` or similar, and change it so an instance of ConfigCat OpenFeature provider is passed to it. (For ConfigCat, use `setProviderAndWait` if possible.)

3. Convert [LaunchDarkly-specific evaluation context objects](https://github.com/launchdarkly/openfeature-node-server?tab=readme-ov-file#openfeature-specific-considerations) to have a data structure compatible with ConfigCat.

   This is done in a very similar way to what's described in the previous section. Read [this section](https://configcat.com/docs/docs/advanced/migration-from-launchdarkly-translation/.md#mapping-between-launchdarkly-contexts-and-configcat-user-objects) to learn how context paths are mapped to User Object attribute names.

   For example, something like

   ```
   const evaluationContext = {
     kind: "multi",
     user: {
       targetingKey: "#UNIQUE-USER-IDENTIFIER#",
       name: "Alice",
       email: "alice@example.com",
       country: "UK"
     },
     organization: {
       targetingKey: "#UNIQUE-ORG-IDENTIFIER#",
       address: {
         city: "London"
       }
     }
   };
   ```

   should be converted to this:

   ```
   const evaluationContext = {
     targetingKey: "#UNIQUE-USER-IDENTIFIER#",
     name: "Alice"
     email: "alice@example.com",
     country: "UK",
     "organization:key": "#UNIQUE-ORG-IDENTIFIER#",
     "organization:/address/city": "London",
     "/kind": ["user", "organization"],
   };
   ```

4. Review feature flag evaluation calls.

   Most of the pitfalls pointed out in the "Rewrite feature flag evaluation calls" part of the previous section applies here too.

### Implement experiments and analytics[â](#implement-experiments-and-analytics "Direct link to Implement experiments and analytics")

There are some fundamental differences in the feature flag evaluation process between LaunchDarkly and ConfigCat. In ConfigCat, feature flag evaluation is entirely implemented within the SDKs, meaning your users' sensitive data never leaves your system. The data flow is one-way â from ConfigCat CDN servers to your SDKs â and ConfigCat does not receive or store any attributes of the [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) passed to the SDKs. This design prioritizes the privacy and security of user data.

However, this has an important consequence: as opposed to LaunchDarkly, ConfigCat cannot provide an out-of-the-box solution to A/B testing, experiments or other analytics.

For this, you will need an additional service that provides the necessary functionality. Here are some examples of how you can integrate such tools with ConfigCat to replicate LaunchDarkly's analytics features:

* [Amplitude](https://configcat.com/docs/docs/integrations/amplitude/.md#experiments)
* [Google Analytics](https://configcat.com/docs/docs/integrations/google-analytics/.md)
* [Mixpanel](https://configcat.com/docs/docs/integrations/mixpanel/.md#experiments)
* [Twilio Segment](https://configcat.com/docs/docs/integrations/segment/.md#analytics)

## Migrate LaunchDarkly teams and permissions to ConfigCat[â](#migrate-launchdarkly-teams-and-permissions-to-configcat "Direct link to Migrate LaunchDarkly teams and permissions to ConfigCat")

To complete the migration process, you will also need to migrate your teams and permissions from LaunchDarkly.

At the moment, ConfigCat doesn't offer a tool or other automated solution for this task since there are fundamental differences between the user management and permission systems of the two services.

LaunchDarkly allows more fine-grained access control over resources, while ConfigCat's permission system was designed to be simpler and easier to understand, at the expense of fewer possibilities for fine-tuning access control.

Therefore, we can only give you some pointers, but this task will inevitably require some effort on your part.

As the first step, we recommend getting familiar with ConfigCat's user management and permission system. You can find the basic concepts in the following guides:

* [Organization & Roles](https://configcat.com/docs/docs/organization/.md)
* [Team Management Basics](https://configcat.com/docs/docs/advanced/team-management/team-management-basics/.md)

As you can see from this, ConfigCat doesn't use the concept of teams and roles of LaunchDarkly. You can't define such entities at the organization level, but *permission groups* per product instead.

### Map LaunchDarkly roles to ConfigCat permission groups[â](#map-launchdarkly-roles-to-configcat-permission-groups "Direct link to Map LaunchDarkly roles to ConfigCat permission groups")

Permission groups roughly correspond to LaunchDarkly roles, with a few key differences:

* They are scoped to the product where they are defined.
* There are no [built-in roles](https://launchdarkly.com/docs/home/account/built-in-roles) like Reader or Writer. To recreate these in ConfigCat, you will need to define the corresponding permission groups in each relevant product. However, LaunchDarkly's Admin and Owner roles can't really be represented using permission groups. ConfigCat supports the concept of [Organization Admin role](https://configcat.com/docs/docs/organization/.md#organization-admin-role) but it's an organization-level permission. You can assign this to users on invite or on your organization's "Members & Roles" page as shown in the next section.
* To migrate [custom roles](https://launchdarkly.com/docs/home/account/custom-roles) to ConfigCat, you will need to translate the [policies](https://launchdarkly.com/docs/home/account/role-concepts#policies) they define to the fixed set of permissions offered by ConfigCat permission groups. Obviously, this won't be entirely possible in every case.

With this in mind, create the necessary permission groups in your products, based on the roles defined in your LaunchDarkly organization.

To set up permission groups for a product, open the [ConfigCat Dashboard](https://app.configcat.com/organization), select the product on the sidebar, and choose "Permission Groups" in the top menu.

![Launching the import tool](/docs/assets/migration-from-launchdarkly/permission-groups_192dpi.png)

### Invite users to ConfigCat and assign them to permission groups[â](#invite-users-to-configcat-and-assign-them-to-permission-groups "Direct link to Invite users to ConfigCat and assign them to permission groups")

Permission groups also act as per-product teams. Once created, you can assign users to them, who will then have the permissions specified by the permission group. (A user can only be a member of a single permission group at a time though.) This is how you map your LaunchDarkly teams to ConfigCat.

However, users don't yet exist in ConfigCat at this point. You need to invite them to ConfigCat first. To do this, follow [these instructions](https://configcat.com/docs/docs/advanced/team-management/team-management-basics/.md#invite-others-to-collaborate).

When inviting users, you will need to choose a product, more specifically, a permission group to invite them to. This means that they will be automatically assigned to the specified permission groups after signing up. So, as you have already created the permission groups, ideally you can immediately invite your users to the right permission groups. (Of course, you may need to do this in batches.)

It can easily happen that you want to add a user to more than one product. In such cases, invite the user to one of the products (it doesn't matter which one), then, after they've signed up, navigate to the "Members & Roles" page of your organization, and assign them to the other products too, using the "Change roles" feature of the "Members & Roles" table.

![Launching the import tool](/docs/assets/migration-from-launchdarkly/member-and-roles_192dpi.png)


---

# Notifications - Webhooks

ConfigCat Webhooks can notify your applications when a feature flag or other Setting changes by calling a public HTTP endpoint on your end. This allows your applications to react almost immediately to updates. Webhooks add the speed of near real-time updates to the reliability of Polling, giving your applications a fast and robust way to stay in sync. To enable Webhooks, simply tell us which HTTP endpoint to call. ConfigCat will send a request to that URL whenever a change occurs.

## Adding a Webhook[â](#adding-a-webhook "Direct link to Adding a Webhook")

1. Go to the [Webhooks](https://app.configcat.com/webhook) screen.
2. Click the **+ ADD WEBHOOK** button.
3. Choose **when** webhook notifications should be sent by selecting the **Config** and **Environment** where changes should trigger the Webhook.
4. Define **how** to notify your system by setting the **URL** and the **HTTP METHOD**. This tells us which endpoint to call.
5. (Optional) Add custom HTTP headers and a request body if needed.

## Request body with variables[â](#request-body-with-variables "Direct link to Request body with variables")

You can customize the request body that will be sent with each Webhook call. ConfigCat will replace certain placeholders in the body with real values at runtime.

| Variable                   | Replaced with                                                                                                                   |
| -------------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| **##ConfigName##**         | The name of the Config where the change happened.                                                                               |
| **##ConfigId##**           | ID of the Config where the change happened.                                                                                     |
| **##EnvironmentName##**    | The name of the Environment where the change happened.                                                                          |
| **##EnvironmentId##**      | ID of the Environment where the change happened.                                                                                |
| **##URL##**                | A direct link to the Config in the *ConfigCat Dashboard.*                                                                       |
| **##ChangeNotes##**        | The **Mandatory notes** added to the actual changeset.                                                                          |
| **##ChangedBy##**          | The name and email address of the user who made the changes.                                                                    |
| **##ChangeDetails##**      | Detailed change info in JSON format, including the name of the Setting or feature flag, old and new values and Targeting Rules. |
| **##ChangeDetailsTeams##** | Change details formatted for Microsoft Teams.                                                                                   |
| **##ChangeDetailsSlack##** | Change details formatted for Slack.                                                                                             |

The ##ChangeDetails## variable is replaced with a JSON array in the following format:

```
[
  {
    "settingKey":"myAwesomeFeature1",
    "event":"changed",
    "details":"\r\nmyAwesomeFeature1: false â true"
  },
  {
    "settingKey":"myAwesomeFeature2",
    "event":"changed",
    "details":"\r\nmyAwesomeFeature2:\r\n  Rollout percentage items changed:\r\n    + 20% true\r\n    + 80% false"
  }
]
```

## Testing your Webhook[â](#testing-your-webhook "Direct link to Testing your Webhook")

1. Change some of your settings in the *ConfigCat Dashboard.*
2. Click **SAVE & PUBLISH CHANGES**.
3. Check if your Webhook was called correctly.

info

**Developer Tip**

* Running your Webhook on `localhost`? Expose it to the public internet temporarily by using a tool like [ngrok](https://ngrok.com/). This enables ConfigCat to call your webhook even in your local development environment.
* Just interested in what ConfigCat sends? Try [Webhhok.site](https://webhook.site/). This allows you to catch HTTP requests and see their content without requiring your to run anything anywhere.

## Verifying Webhook requests[â](#verifying-webhook-requests "Direct link to Verifying Webhook requests")

To make sure the requests you receive are actually sent by ConfigCat, we strongly recommend verifying the signature included in the request headers. You can do this by comparing the received signature with one you compute using your signing key.

Each webhook request includes the following headers:

| Header                             | Description                                                                                  |
| ---------------------------------- | -------------------------------------------------------------------------------------------- |
| `X-ConfigCat-Webhook-ID`           | A unique ID for the webhook request. This is different for every request.                    |
| `X-ConfigCat-Webhook-Timestamp`    | The time the request was sent, in Unix timestamp format (seconds since epoch).               |
| `X-ConfigCat-Webhook-Signature-V1` | A comma-separated list of base64-encoded HMAC-SHA-256 signatures (one for each signing key). |

Currently, the latest (and the only) signature header version is `V1`. If the signing process changes in the future, new headers will be added with incremented version numbers.

Example request:

```
POST /path HTTP/1.1
Host: <your-host>
X-ConfigCat-Webhook-ID: b616ca659d154a5fb907dd8475792eeb
X-ConfigCat-Webhook-Timestamp: 1669580020
X-ConfigCat-Webhook-Signature-V1: RoO/UMvSRqzJ0OolMMuhHBbM8/Vjn+nTh+SKyLcQf0M=,heIrGPw6aylAZEX6xmSLrxIWVif5injeBCxWQ+0+b2U=
```

### Content to sign[â](#content-to-sign "Direct link to Content to sign")

The signature is calculated from the content constructed by concatenating the webhook's `id`, `timestamp`, and raw `body` together.

```
const contentToSign = `${webhookId}${timestamp}${body}`;
```

| Content part | Description                                                                                                  |
| ------------ | ------------------------------------------------------------------------------------------------------------ |
| `webhookId`  | The webhook's identifier received in the `X-ConfigCat-Webhook-ID` request header.                            |
| `timestamp`  | The timestamp value received in the `X-ConfigCat-Webhook-Timestamp` request header.                          |
| `body`       | The raw body of the received webhook request. If the webhook doesn't have a request body it can be left out. |

caution

The signature calculation is sensitive to any changes on the signed content, so it's important to not change the request body before the verification. Otherwise, the calculated signature could be completely different from the value received in the<br />`X-ConfigCat-Webhook-Signature-V1` header.

### Calculating signature[â](#calculating-signature "Direct link to Calculating signature")

ConfigCat uses `HMAC` with `SHA-256` to sign webhooks. You can retrieve the **signing key(s)** required for the signature calculation from the [ConfigCat Dashboard's webhook page](https://app.configcat.com/product/webhooks).

![signing keys](/docs/assets/whsk.png)

info

For **key rotation** purposes, you can generate a secondary signing key. In this case ConfigCat sends two signatures (one signed with the *primary* and one signed with the *secondary* key) in the `X-ConfigCat-Webhook-Signature-V1` header separated by a comma (`,`):

```
X-ConfigCat-Webhook-Signature-V1: RoO/UMvSRqzJ0OolMMuhHBbM8/Vjn+nTh+SKyLcQf0M=,heIrGPw6aylAZEX6xmSLrxIWVif5injeBCxWQ+0+b2U=
```

* Node.js
* Python
* Ruby
* PHP
* Go
* .NET
* Java

```
const crypto = require('crypto');

// retrieved from the ConfigCat Dashboard
const signingKey =
  'configcat_whsk_VN3juirnVh5pNvCKd81RYRYchxUX4j3NykbZG2fAy88=';

// retrieved from the the X-ConfigCat-Webhook-Signature-V1 request header
const receivedSignature = 'Ks3cYsu9Lslfo+hVxNC3oQWnsF9e5d73TI5t94D9DRA=';

// retrieved from the the X-ConfigCat-Webhook-ID request header
const requestId = 'b616ca659d154a5fb907dd8475792eeb';

// retrieved from the the X-ConfigCat-Webhook-Timestamp request header
const timestamp = 1669629035;

// the webhook request's raw body
const body = 'examplebody';

const contentToSign = `${requestId}${timestamp}${body}`;

const calculatedSignature = crypto
  .createHmac('sha256', signingKey)
  .update(contentToSign)
  .digest('base64');

console.log(calculatedSignature == receivedSignature); // must be true
```

```
import hmac
import base64

# retrieved from the ConfigCat Dashboard
signing_key = "configcat_whsk_VN3juirnVh5pNvCKd81RYRYchxUX4j3NykbZG2fAy88="

# retrieved from the X-ConfigCat-Webhook-Signature-V1 request header
received_signature = "Ks3cYsu9Lslfo+hVxNC3oQWnsF9e5d73TI5t94D9DRA="

# retrieved from the X-ConfigCat-Webhook-ID request header
request_id = "b616ca659d154a5fb907dd8475792eeb"

# retrieved from the X-ConfigCat-Webhook-Timestamp request header
timestamp = 1669629035

# the webhook request's raw body
body = "examplebody"

content_to_sign = request_id+str(timestamp)+body

signing_key_bytes = bytes(signing_key, 'utf-8')
calculated_signature = base64.b64encode(hmac.new(signing_key_bytes, bytes(content_to_sign, 'utf-8'), 'sha256').digest())

print(calculated_signature.decode() == received_signature) # must be true
```

```
require 'openssl'
require 'base64'

# retrieved from the ConfigCat Dashboard
signing_key = "configcat_whsk_VN3juirnVh5pNvCKd81RYRYchxUX4j3NykbZG2fAy88="

# retrieved from the X-ConfigCat-Webhook-Signature-V1 request header
received_signature = "Ks3cYsu9Lslfo+hVxNC3oQWnsF9e5d73TI5t94D9DRA="

# retrieved from the X-ConfigCat-Webhook-ID request header
request_id = "b616ca659d154a5fb907dd8475792eeb"

# retrieved from the X-ConfigCat-Webhook-Timestamp request header
timestamp = 1669629035

# the webhook request's raw body
body = "examplebody"

content_to_sign = "#{request_id}#{timestamp}#{body}"

calculated_signature = Base64.strict_encode64(OpenSSL::HMAC.digest("sha256", signing_key, content_to_sign))

puts calculated_signature == received_signature # must be true
```

```
<?php

// retrieved from the ConfigCat Dashboard
$signing_key = "configcat_whsk_VN3juirnVh5pNvCKd81RYRYchxUX4j3NykbZG2fAy88=";

// retrieved from the X-ConfigCat-Webhook-Signature-V1 request header
$received_signature = "Ks3cYsu9Lslfo+hVxNC3oQWnsF9e5d73TI5t94D9DRA=";

// retrieved from the X-ConfigCat-Webhook-ID request header
$request_id = "b616ca659d154a5fb907dd8475792eeb";

// retrieved from the X-ConfigCat-Webhook-Timestamp request header
$timestamp = 1669629035;

// the webhook request's raw body
$body = "examplebody";

$content_to_sign = "{$request_id}{$timestamp}{$body}";

$calculated_signature = base64_encode(hash_hmac("sha256", $content_to_sign, $signing_key, true));

echo hash_equals($calculated_signature, $received_signature); // must be true
```

```
package main

import (
  "fmt"
  "crypto/hmac"
  "crypto/sha256"
  "encoding/base64"
)

func main() {
  // retrieved from the ConfigCat Dashboard
  signingKey := "configcat_whsk_VN3juirnVh5pNvCKd81RYRYchxUX4j3NykbZG2fAy88="

  // retrieved from the X-ConfigCat-Webhook-Signature-V1 request header
  receivedSignature := "Ks3cYsu9Lslfo+hVxNC3oQWnsF9e5d73TI5t94D9DRA="

  // retrieved from the X-ConfigCat-Webhook-ID request header
  requestId := "b616ca659d154a5fb907dd8475792eeb"

  // retrieved from the X-ConfigCat-Webhook-Timestamp request header
  timestamp := 1669629035

  // the webhook request's raw body
  body := "examplebody"

  contentToSign := fmt.Sprintf("%s%d%s", requestId, timestamp, body)

  hasher := hmac.New(sha256.New, []byte(signingKey))
  hasher.Write([]byte(contentToSign))

  calculatedSignature := base64.StdEncoding.EncodeToString(hasher.Sum(nil))

  fmt.Println(calculatedSignature == receivedSignature) // must be true
}
```

```
using System;
using System.Security.Cryptography;
using System.Text;

// retrieved from the ConfigCat Dashboard
var signingKey = "configcat_whsk_VN3juirnVh5pNvCKd81RYRYchxUX4j3NykbZG2fAy88=";

// retrieved from the X-ConfigCat-Webhook-Signature-V1 request header
var receivedSignature = "Ks3cYsu9Lslfo+hVxNC3oQWnsF9e5d73TI5t94D9DRA=";

// retrieved from the X-ConfigCat-Webhook-ID request header
var requestId = "b616ca659d154a5fb907dd8475792eeb";

// retrieved from the X-ConfigCat-Webhook-Timestamp request header
var timestamp = 1669629035;

// the webhook request's raw body
var body = "examplebody";

var contentToSign = $"{requestId}{timestamp}{body}";

using (var hmac = new HMACSHA256(Encoding.UTF8.GetBytes(signingKey)))
{
	var calculatedSignature = Convert.ToBase64String(hmac.ComputeHash(Encoding.UTF8.GetBytes(contentToSign)));

	Console.WriteLine(calculatedSignature == receivedSignature); // must be true
}
```

```
import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;
import java.util.Base64;
import java.io.UnsupportedEncodingException;
import java.security.NoSuchAlgorithmException;
import java.security.InvalidKeyException;

public class Main {
  public static void main(String[] args) throws NoSuchAlgorithmException, UnsupportedEncodingException, InvalidKeyException {
    // retrieved from the ConfigCat Dashboard
    String signingKey = "configcat_whsk_VN3juirnVh5pNvCKd81RYRYchxUX4j3NykbZG2fAy88=";

    // retrieved from the X-ConfigCat-Webhook-Signature-V1 request header
    String receivedSignature = "Ks3cYsu9Lslfo+hVxNC3oQWnsF9e5d73TI5t94D9DRA=";

    // retrieved from the X-ConfigCat-Webhook-ID request header
    String requestId = "b616ca659d154a5fb907dd8475792eeb";

    // retrieved from the X-ConfigCat-Webhook-Timestamp request header
    int timestamp = 1669629035;

    // the webhook request's raw body
    String body = "examplebody";

    String contentToSign = requestId + timestamp + body;

    Mac mac = Mac.getInstance("HmacSHA256");
    SecretKeySpec secretKeySpec = new SecretKeySpec(signingKey.getBytes("UTF-8"), "HmacSHA256");
    mac.init(secretKeySpec);
    String calculatedSignature = Base64.getEncoder().encodeToString(mac.doFinal(contentToSign.getBytes("UTF-8")));

    System.out.println(calculatedSignature.equals(receivedSignature)); // must be true
  }
}
```

### Timestamp validation[â](#timestamp-validation "Direct link to Timestamp validation")

To prevent replay attacks, you can check if the request was sent within an acceptable time window. Compare the timestamp from the `X-ConfigCat-Webhook-Timestamp` header with your system's current time. If timestamp is too old, you can safely reject the request.

Since the timestamp is part of the signed content, an attacker cannot modify it without invalidating the signature.

## Retries[â](#retries "Direct link to Retries")

If ConfigCat detects that a Webhook request may not have been delivered successfully (for example, due to network issues or a non-2XX response), it will retry the request up to 5 times, using variable delays between attempts.

## Connecting to Slack[â](#connecting-to-slack "Direct link to Connecting to Slack")

A few steps to set up Slack and get a message when a setting changes:

1. In Slack, create an [Incoming Webhook](https://docs.slack.dev/messaging/sending-messages-using-incoming-webhooks#create_a_webhook) and copy the **Webhook URL**.
2. In ConfigCat, go to the [Webhooks](https://app.configcat.com/webhook) screen, and click **+ ADD WEBHOOK**.
3. Paste Slack's **Webhhok URL** to ConfigCat's **URL** field.
4. Select **POST** as the **HTTP METHOD**.
5. Add the following request body:

```
{
  "text": "<##URL##|##ConfigName## - ##EnvironmentName##> changed in ConfigCat: \n\n##ChangeDetailsSlack##"
}
```

## Connecting to Microsoft Teams[â](#connecting-to-microsoft-teams "Direct link to Connecting to Microsoft Teams")

A few steps to set up Microsoft Teams and get a message when a setting changes:

1. In Microsoft Teams, create an [Incoming Webhook](https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook#create-incoming-webhook-1) and copy the **Webhook URL**.
2. In ConfigCat, go to the [Webhooks](https://app.configcat.com/webhook) screen, and click **+ ADD WEBHOOK**.
3. Paste Microsoft Teams' **Webhhok URL** to ConfigCat's **URL** field.
4. Select **POST** as the **HTTP METHOD**.
5. Add the following request body:

```
{
  "@context": "https://schema.org/extensions",
  "@type": "MessageCard",
  "themeColor": "0072C6",
  "title": "##ConfigName## - ##EnvironmentName##",
  "text": "##ChangeDetailsTeams##",
  "potentialAction": [
    {
      "@type": "OpenUri",
      "name": "Open Config in ConfigCat Dashboard",
      "targets": [
        { "os": "default", "uri": "##URL##" }
      ]
    }
  ]
}
```


---

# Endpoints

The Proxy accepts HTTP requests on the following endpoints.

## CDN Proxy[â](#cdn-proxy "Direct link to CDN Proxy")

The CDN proxy endpoint's purpose is to forward the underlying *config JSON* to other ConfigCat SDKs used by your application.

GETOPTIONS/configuration-files/{path}

This endpoint is mainly used by ConfigCat SDKs to retrieve all required data for feature flag evaluation.

**Route parameters**:

* `path`: It's set by the ConfigCat SDK configured to use the ConfigCat Proxy. It contains either an SDK key or an [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) that uniquely identifies an SDK within the Proxy.

**Responses**:

* 200: The `config.json` file is downloaded successfully.
* 204: In response to an `OPTIONS` request.
* 304: The `config.json` file isn't modified based on the `Etag` sent in the `If-None-Match` header.
* 400: The `sdkId` is missing.
* 404: The `sdkId` is pointing to a non-existent SDK.

### SDK Usage[â](#sdk-usage "Direct link to SDK Usage")

In order to let a ConfigCat SDK use the Proxy, you have to set the SDK's `baseUrl` parameter to point to the Proxy's host.

example.js

```
import * as configcat from "@configcat/sdk";

const configCatClient = configcat.getClient(
  "#YOUR-SDK-KEY#", 
  configcat.PollingMode.AutoPoll,
  { baseUrl: "http://localhost:8050" } // Proxy URL
);
```

Additionally, as the Proxy maps [unique identifiers to each configured SDK key](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) it works with, you can use that identifier prefixed with `configcat-proxy/` as the SDK key at the ConfigCat SDK's initialization.

So, let's assume you set up the Proxy with an SDK key mapped to the `my_sdk` SDK identifier:

example.js

```
import * as configcat from "@configcat/sdk";

const configCatClient = configcat.getClient(
  "configcat-proxy/my_sdk", // SDK identifier prefixed with 'configcat-proxy/'
  configcat.PollingMode.AutoPoll,
  { baseUrl: "http://localhost:8050" } // Proxy URL
);
```

### Supported SDK Versions[â](#supported-sdk-versions "Direct link to Supported SDK Versions")

The following SDK versions are supported by the `>=v0.3.X` Proxy's CDN endpoint:

| SDK                                                                          | Version                                                                     |
| ---------------------------------------------------------------------------- | --------------------------------------------------------------------------- |
| .NET                                                                         | >=Â [v9.0.0](https://github.com/configcat/.net-sdk/releases/tag/v9.0.0)      |
| Android (Java)                                                               | >=Â [v10.0.0](https://github.com/configcat/android-sdk/releases/tag/v10.0.0) |
| C++                                                                          | >=Â [v4.0.0](https://github.com/configcat/cpp-sdk/releases/tag/v4.0.0)       |
| Dart (Flutter)                                                               | >=Â [v4.0.0](https://github.com/configcat/dart-sdk/releases/tag/4.0.0)       |
| Elixir                                                                       | >=Â [v4.0.0](https://github.com/configcat/elixir-sdk/releases/tag/v4.0.0)    |
| Go                                                                           | >=Â [v9.0.0](https://github.com/configcat/go-sdk/releases/tag/v9.0.0)        |
| Java                                                                         | >=Â [v9.0.0](https://github.com/configcat/java-sdk/releases/tag/v9.0.0)      |
| JavaScript (Browser, Bun, Chromium Extension, Cloudflare Worker, Deno, Node) | >=Â [v1.0.0](https://github.com/configcat/js-unified-sdk/releases)           |
| JS - Legacy                                                                  | >=Â [v9.0.0](https://github.com/configcat/js-sdk/releases/tag/v9.0.0)        |
| JS SSR - Legacy                                                              | >=Â [v8.0.0](https://github.com/configcat/js-ssr-sdk/releases/tag/v8.0.0)    |
| Kotlin                                                                       | >=Â [v3.0.0](https://github.com/configcat/kotlin-sdk/releases/tag/3.0.0)     |
| Node - Legacy                                                                | >=Â [v11.0.0](https://github.com/configcat/node-sdk/releases/tag/v11.0.0)    |
| PHP 8.1+                                                                     | >=Â [v9.0.0](https://github.com/configcat/php-sdk/releases/tag/v9.0.0)       |
| PHP 7.1+                                                                     | >=Â [v3.0.0](https://github.com/configcat/php7-sdk/releases/tag/v3.0.0)      |
| Python                                                                       | >=Â [v9.0.3](https://github.com/configcat/python-sdk/releases/tag/v9.0.3)    |
| React                                                                        | >=Â [v4.0.0](https://github.com/configcat/react-sdk/releases/tag/v4.0.0)     |
| Ruby                                                                         | >=Â [v8.0.0](https://github.com/configcat/ruby-sdk/releases/tag/v8.0.0)      |
| Rust                                                                         | >=Â [v0.1.0](https://github.com/configcat/rust-sdk/releases/tag/v0.1.0)      |
| Swift (iOS)                                                                  | >=Â [v11.0.0](https://github.com/configcat/swift-sdk/releases/tag/11.0.0)    |

### Available Options[â](#available-options "Direct link to Available Options")

The following CDN Proxy related options are available:

| Option                                                                                                                                                                                                                                                                                                                    | Default | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
http:
  cdn_proxy:
    enabled: <true|false>
``````
CONFIGCAT_HTTP_CDN_PROXY_ENABLED=<true|false>
```                                                                                                                                                                                     | `true`  | Turns the hosting of the CDN proxy endpoint on/off. This endpoint can be used by other ConfigCat SDKs in your applications.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| - YAML<br />- Environment variable```
http:
  cdn_proxy:
    cors:
      enabled: <true|false>
``````
CONFIGCAT_HTTP_CDN_PROXY_CORS_ENABLED=<true|false>
```                                                                                                                                                                     | `true`  | Turns the sending of CORS headers on/off. It can be used to restrict access to specific domains. By default, the Proxy allows each origin by setting the `Access-Control-Allow-Origin` response header to the request's origin. You can override this functionality by restricting the allowed origins with the `allowed_origins` or `allowed_origins_regex` options.                                                                                                                                                                                                                                                                                             |
| - YAML<br />- Environment variable```
http:
  cdn_proxy:
    cors:
      allowed_origins: 
        - https://domain1.com
        - https://domain2.com
``````
CONFIGCAT_HTTP_CDN_PROXY_CORS_ALLOWED_ORIGINS='["https://domain1.com","https://domain2.com"]'
```                                                                    | -       | List of allowed CORS origins. When it's set, the Proxy will include only that origin in the `Access-Control-Allow-Origin` response header which matches the request's `Origin`.<br />When there's no matching request origin and the `allowed_origins_regex` option is not set, the Proxy will set the `Access-Control-Allow-Origin` response header to the first item in the allowed origins list.                                                                                                                                                                                                                                                               |
| - YAML<br />- Environment variable```
http:
  cdn_proxy:
    cors:
      allowed_origins_regex:
        patterns:
          - https:\/\/.*domain1\.com
          - https:\/\/.*domain2\.com
``````
CONFIGCAT_HTTP_CDN_PROXY_CORS_ALLOWED_ORIGINS_REGEX_PATTERNS='["https:\\/\\/.*domain1\\.com","https:\\/\\/.*domain2\\.com"]'
``` | -       | List of regex patterns used to match allowed CORS origins. When it's set, the Proxy will match the request's `Origin` with the given regex patterns. When there's a match, the `Access-Control-Allow-Origin` response header will be set to the matched origin.<br />When there's no matching request origin, the Proxy will set the `Access-Control-Allow-Origin` response header to the `if_no_match` field's value.<br />The `if_no_match` option is mandatory if this option is used.<br />When using the environment variable, the regex escape character must be doubled (`\\`) because it's parsed as a JSON list and `\` is also a JSON escape character. |
| - YAML<br />- Environment variable```
http:
  cdn_proxy:
    cors:
      allowed_origins_regex:
        if_no_match: https://domain1.com
``````
CONFIGCAT_HTTP_CDN_PROXY_CORS_ALLOWED_ORIGINS_REGEX_IF_NO_MATCH="https://domain1.com"
```                                                                                         | -       | Required when the previous `patterns` option is set. It's value is used in the `Access-Control-Allow-Origin` header when an incoming request's `Origin` doesn't match with any previously configured regex patterns.                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| - YAML<br />- Environment variable```
http:
  cdn_proxy:
    headers:
      Custom-Header-Name: "<header-value>"
``````
CONFIGCAT_HTTP_CDN_PROXY_HEADERS='{"Custom-Header-Name":"<header-value>"}'
```                                                                                                                           | -       | Additional headers that must be sent back on each CDN proxy endpoint response.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |

## API[â](#api "Direct link to API")

The API endpoints are for server side feature flag evaluation.

POSTOPTIONS/api/{sdkId}/eval

This endpoint evaluates a single feature flag identified by a `key` with the given [User Object](https://configcat.com/docs/docs/targeting/user-object/.md).

**Route parameters**:

* `sdkId`: The [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) that uniquely identifies an SDK within the Proxy.

**Request body**:

```
{
  "key": "<feature-flag-key>",
  "user": {
    "Identifier": "<user-id>",
    "Rating": 4.5,
    "Roles": ["Role1","Role2"],
    // any other attribute
  }
}
```

The type of the `user` object's fields can only be `string`, `number`, or `string[]`.

**Responses**:

* 200: The feature flag evaluation finished successfully.
* Response body:
  ```
  {
    "value": <evaluated-value>,
    "variationId": "<variation-id>"
  }
  ```
  204: In response to an `OPTIONS` request.
* 400: The `sdkId` or the `key` from the request body is missing.
* 404: The `sdkId` is pointing to a non-existent SDK.

**Example**:

example.js

```
const url = "http://localhost:8050/api/#SDK-IDENTIFIER#/eval"; // Proxy API URL with SDK identifier

const data = {
  key: "isMyAwesomeFeatureEnabled", // Feature flag key
  user: { // User Object for evaluation
    Identifier: "#UNIQUE-USER-IDENTIFIER#"
  }
};

const requestOptions = {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(data),
};

try {
  const response = await fetch(url, requestOptions);
  const responseData = await response.json();
  console.log(responseData); // {"value":<evaluated-value>,"variationId":"<variation-id>"}
} catch (error) {
  console.error('Error:', error)
}
```

POSTOPTIONS/api/{sdkId}/eval-all

This endpoint evaluates all feature flags with the given [User Object](https://configcat.com/docs/docs/targeting/user-object/.md).

**Route parameters**:

* `sdkId`: The [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) that uniquely identifies an SDK within the Proxy.

**Request body**:

```
{
  "user": {
    "Identifier": "<user-id>",
    "Rating": 4.5,
    "Roles": ["Role1","Role2"],
    // any other attribute
  }
}
```

The type of the `user` object's fields can only be `string`, `number`, or `string[]`.

**Responses**:

* 200: The evaluation of all feature flags finished successfully.
* Response body:
  ```
  {
    "feature-flag-key-1": {
      "value": <evaluated-value>,
      "variationId": "<variation-id>"
    },
    "feature-flag-key-2": {
      "value": <evaluated-value>,
      "variationId": "<variation-id>"
    }
  }
  ```
  204: In response to an `OPTIONS` request.
* 400: The `sdkId` is missing.
* 404: The `sdkId` is pointing to a non-existent SDK.

**Example**:

example.js

```
const url = "http://localhost:8050/api/#SDK-IDENTIFIER#/eval-all"; // Proxy API URL with SDK identifier

const data = {
  user: { // User Object for evaluation
    Identifier: "#UNIQUE-USER-IDENTIFIER#"
  }
};

const requestOptions = {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(data),
};

try {
  const response = await fetch(url, requestOptions);
  const responseData = await response.json();
  console.log(responseData);
} catch (error) {
  console.error('Error:', error)
}
```

POSTOPTIONS/api/{sdkId}/refresh

This endpoint commands the underlying SDK to download the latest available *config JSON*.

**Route parameters**:

* `sdkId`: The [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) that uniquely identifies an SDK within the Proxy.

**Responses**:

* 200: The refresh was successful.
* 204: In response to an `OPTIONS` request.
* 400: The `sdkId` is missing.
* 404: The `sdkId` is pointing to a non-existent SDK.

GETOPTIONS/api/{sdkId}/keys

This endpoint returns all feature flag keys belonging to the given [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key).

**Route parameters**:

* `sdkId`: The [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) that uniquely identifies an SDK within the Proxy.

**Responses**:

* 200: The keys are returned successfully.
* Response body:
  ```
  {
    "keys": [
      "feature-flag-key-1",
      "feature-flag-key-1"
    ]
  }
  ```
  204: In response to an `OPTIONS` request.
* 400: The `sdkId` is missing.
* 404: The `sdkId` is pointing to a non-existent SDK.

### Available Options[â](#available-options-1 "Direct link to Available Options")

The following API related options are available:

| Option                                                                                                                                                                                                                                                                                                        | Default | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
http:
  api:
    enabled: <true|false>
``````
CONFIGCAT_HTTP_API_ENABLED=<true|false>
```                                                                                                                                                                                     | `true`  | Turns the hosting of the API endpoints on/off. These endpoints can be used for server side feature flag evaluation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| - YAML<br />- Environment variable```
http:
  api:
    cors:
      enabled: <true|false>
``````
CONFIGCAT_HTTP_API_CORS_ENABLED=<true|false>
```                                                                                                                                                                     | `true`  | Turns the sending of CORS headers on/off. It can be used to restrict access to specific domains. By default, the Proxy allows each origin by setting the `Access-Control-Allow-Origin` response header to the request's origin. You can override this functionality by restricting the allowed origins with the `allowed_origins` or `allowed_origins_regex` options.                                                                                                                                                                                                                                                                                             |
| - YAML<br />- Environment variable```
http:
  api:
    cors:
      allowed_origins: 
        - https://domain1.com
        - https://domain2.com
``````
CONFIGCAT_HTTP_API_CORS_ALLOWED_ORIGINS='["https://domain1.com","https://domain2.com"]'
```                                                                    | -       | List of allowed CORS origins. When it's set, the Proxy will include only that origin in the `Access-Control-Allow-Origin` response header which matches the request's `Origin`.<br />When there's no matching request origin and the `allowed_origins_regex` option is not set, the Proxy will set the `Access-Control-Allow-Origin` response header to the first item in the allowed origins list.                                                                                                                                                                                                                                                               |
| - YAML<br />- Environment variable```
http:
  api:
    cors:
      allowed_origins_regex:
        patterns:
          - https:\/\/.*domain1\.com
          - https:\/\/.*domain2\.com
``````
CONFIGCAT_HTTP_API_CORS_ALLOWED_ORIGINS_REGEX_PATTERNS='["https:\\/\\/.*domain1\\.com","https:\\/\\/.*domain2\\.com"]'
``` | -       | List of regex patterns used to match allowed CORS origins. When it's set, the Proxy will match the request's `Origin` with the given regex patterns. When there's a match, the `Access-Control-Allow-Origin` response header will be set to the matched origin.<br />When there's no matching request origin, the Proxy will set the `Access-Control-Allow-Origin` response header to the `if_no_match` field's value.<br />The `if_no_match` option is mandatory if this option is used.<br />When using the environment variable, the regex escape character must be doubled (`\\`) because it's parsed as a JSON list and `\` is also a JSON escape character. |
| - YAML<br />- Environment variable```
http:
  api:
    cors:
      allowed_origins_regex:
        if_no_match: https://domain1.com
``````
CONFIGCAT_HTTP_API_CORS_ALLOWED_ORIGINS_REGEX_IF_NO_MATCH="https://domain1.com"
```                                                                                         | -       | Required when the previous `patterns` option is set. It's value is used in the `Access-Control-Allow-Origin` header when an incoming request's `Origin` doesn't match with any previously configured regex patterns.                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| - YAML<br />- Environment variable```
http:
  api:
    headers:
      Custom-Header-Name: "<header-value>"
``````
CONFIGCAT_HTTP_API_HEADERS='{"Custom-Header-Name":"<header-value>"}'
```                                                                                                                           | -       | Additional headers that must be sent back on each API endpoint response.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| - YAML<br />- Environment variable```
http:
  api:
    auth_headers:
      X-API-KEY: "<auth-value>"
``````
CONFIGCAT_HTTP_API_AUTH_HEADERS='{"X-API-KEY":"<auth-value>"}'
```                                                                                                                                       | -       | Additional headers that must be on each request sent to the API endpoints. If the request doesn't include the specified header, or the values are not matching, the Proxy will respond with a `401` HTTP status code.                                                                                                                                                                                                                                                                                                                                                                                                                                             |

## OpenFeature Remote Evaluation Protocol (OFREP)[â](#openfeature-remote-evaluation-protocol-ofrep "Direct link to OpenFeature Remote Evaluation Protocol (OFREP)")

info

OFREP compatibility is only available from Proxy version [`v2.0.0`](https://github.com/configcat/configcat-proxy/releases/tag/v2.0.0).

The Proxy conforms to the [OpenFeature Remote Evaluation Protocol](https://github.com/open-feature/protocol), which means it can be used with OFREP compatible OpenFeature providers.

POSTOPTIONS/ofrep/v1/evaluate/flags/{key}

This endpoint is used by OFREP compatible OpenFeature providers to evaluate a feature flag.

**Route parameters**:

* `key`: The key of the feature flag to evaluate.

**Headers**:

* `X-ConfigCat-SdkId`: The [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) that uniquely identifies an SDK within the Proxy.

**Request body**:

```
{
  "context": {
    "targetingKey": "<user-id>",
    "Rating": 4.5,
    "Roles": ["Role1","Role2"],
  }
}
```

**Responses**:

* 200: The feature flag evaluation finished successfully.
* Response body:
  ```
  {
    "key": "<flag-key>",
    "value": <evaluated-value>,
    "variant": "<variation-id>",
    "reason": "<reason>"
  }
  ```
  204: In response to an `OPTIONS` request.
* 400: The `X-ConfigCat-SdkId` header is missing.
* 404: The `X-ConfigCat-SdkId` header is pointing to a non-existent SDK or the feature flag for `key` is not found.

**Example**:

example.js

```
import { OpenFeature } from "@openfeature/web-sdk";
import { OFREPWebProvider } from '@openfeature/ofrep-web-provider';

OpenFeature.setProvider(
  new OFREPWebProvider({
    baseUrl: 'http://localhost:8050', // Proxy URL
    headers: [
      ['X-ConfigCat-SdkId', `#SDK-IDENTIFIER#`],
    ],
  }),
);
```

POSTOPTIONS/ofrep/v1/evaluate/flags

This endpoint is used by OFREP compatible OpenFeature providers to evaluate all feature flags.

**Headers**:

* `X-ConfigCat-SdkId`: The [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) that uniquely identifies an SDK within the Proxy.

**Request body**:

```
{
  "context": {
    "targetingKey": "<user-id>",
    "Rating": 4.5,
    "Roles": ["Role1","Role2"],
  }
}
```

**Responses**:

* 200: The evaluation of all feature flags finished successfully.
* Response body:
  ```
  {
    "flags": [
      {
        "key": "<flag1-key>",
        "value": <evaluated-value>,
        "variant": "<variation-id>",
        "reason": "<reason>"
      },
      {
        "key": "<flag2-key>",
        "value": <evaluated-value>,
        "variant": "<variation-id>",
        "reason": "<reason>"
      }
    ]
  }
  ```
  204: In response to an `OPTIONS` request.
* 400: The `X-ConfigCat-SdkId` header is missing.
* 404: The `X-ConfigCat-SdkId` header is pointing to a non-existent SDK.

**Example**:

example.js

```
import { OpenFeature } from "@openfeature/web-sdk";
import { OFREPWebProvider } from '@openfeature/ofrep-web-provider';

OpenFeature.setProvider(
  new OFREPWebProvider({
    baseUrl: 'http://localhost:8050', // Proxy URL
    headers: [
      ['X-ConfigCat-SdkId', '#SDK-IDENTIFIER#'],
    ],
  }),
);
```

### Available Options[â](#available-options-2 "Direct link to Available Options")

The following OFREP related options are available:

| Option                                                                                                                                                                                                                                                                                                            | Default | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
http:
  ofrep:
    enabled: <true|false>
``````
CONFIGCAT_HTTP_OFREP_ENABLED=<true|false>
```                                                                                                                                                                                     | `false` | Turns the hosting of the OFREP endpoints on/off. These endpoints can be used by OFREP compatible OpenFeature providers for server side feature flag evaluation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| - YAML<br />- Environment variable```
http:
  ofrep:
    cors:
      enabled: <true|false>
``````
CONFIGCAT_HTTP_OFREP_CORS_ENABLED=<true|false>
```                                                                                                                                                                     | `true`  | Turns the sending of CORS headers on/off. It can be used to restrict access to specific domains. By default, the Proxy allows each origin by setting the `Access-Control-Allow-Origin` response header to the request's origin. You can override this functionality by restricting the allowed origins with the `allowed_origins` or `allowed_origins_regex` options.                                                                                                                                                                                                                                                                                             |
| - YAML<br />- Environment variable```
http:
  ofrep:
    cors:
      allowed_origins: 
        - https://domain1.com
        - https://domain2.com
``````
CONFIGCAT_HTTP_OFREP_CORS_ALLOWED_ORIGINS='["https://domain1.com","https://domain2.com"]'
```                                                                    | -       | List of allowed CORS origins. When it's set, the Proxy will include only that origin in the `Access-Control-Allow-Origin` response header which matches the request's `Origin`.<br />When there's no matching request origin and the `allowed_origins_regex` option is not set, the Proxy will set the `Access-Control-Allow-Origin` response header to the first item in the allowed origins list.                                                                                                                                                                                                                                                               |
| - YAML<br />- Environment variable```
http:
  ofrep:
    cors:
      allowed_origins_regex:
        patterns:
          - https:\/\/.*domain1\.com
          - https:\/\/.*domain2\.com
``````
CONFIGCAT_HTTP_OFREP_CORS_ALLOWED_ORIGINS_REGEX_PATTERNS='["https:\\/\\/.*domain1\\.com","https:\\/\\/.*domain2\\.com"]'
``` | -       | List of regex patterns used to match allowed CORS origins. When it's set, the Proxy will match the request's `Origin` with the given regex patterns. When there's a match, the `Access-Control-Allow-Origin` response header will be set to the matched origin.<br />When there's no matching request origin, the Proxy will set the `Access-Control-Allow-Origin` response header to the `if_no_match` field's value.<br />The `if_no_match` option is mandatory if this option is used.<br />When using the environment variable, the regex escape character must be doubled (`\\`) because it's parsed as a JSON list and `\` is also a JSON escape character. |
| - YAML<br />- Environment variable```
http:
  ofrep:
    cors:
      allowed_origins_regex:
        if_no_match: https://domain1.com
``````
CONFIGCAT_HTTP_OFREP_CORS_ALLOWED_ORIGINS_REGEX_IF_NO_MATCH="https://domain1.com"
```                                                                                         | -       | Required when the previous `patterns` option is set. It's value is used in the `Access-Control-Allow-Origin` header when an incoming request's `Origin` doesn't match with any previously configured regex patterns.                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| - YAML<br />- Environment variable```
http:
  ofrep:
    headers:
      Custom-Header-Name: "<header-value>"
``````
CONFIGCAT_HTTP_OFREP_HEADERS='{"Custom-Header-Name":"<header-value>"}'
```                                                                                                                           | -       | Additional headers that must be sent back on each OFREP endpoint response.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| - YAML<br />- Environment variable```
http:
  ofrep:
    auth_headers:
      X-API-KEY: "<auth-value>"
``````
CONFIGCAT_HTTP_OFREP_AUTH_HEADERS='{"X-API-KEY":"<auth-value>"}'
```                                                                                                                                       | -       | Additional headers that must be on each request sent to the OFREP endpoints. If the request doesn't include the specified header, or the values are not matching, the Proxy will respond with a `401` HTTP status code.                                                                                                                                                                                                                                                                                                                                                                                                                                           |

## SSE[â](#sse "Direct link to SSE")

The SSE endpoint allows you to subscribe for feature flag value changes through [Server-Sent Events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events) connections.

GETOPTIONS/sse/{sdkId}/eval/{data}

This endpoint subscribes to a single flag's changes. Whenever the watched flag's value changes, the Proxy sends the new value to each connected client.

**Route parameters**:

* `sdkId`: The [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) that uniquely identifies an SDK within the Proxy.
* `data`: The `base64` encoded input data for feature flag evaluation that must contain the feature flag's key and a [User Object](https://configcat.com/docs/docs/targeting/user-object/.md).

**Responses**:

* 200: The SSE connection established successfully.
* Response body:
  ```
  {
    "value": <evaluated-value>,
    "variationId": "<variation-id>"
  }
  ```
  204: In response to an `OPTIONS` request.
* 400: The `sdkId`, `data`, or the `key` attribute of `data` is missing.
* 404: The `sdkId` is pointing to a non-existent SDK.

**Example**:

example.js

```
const rawData = {
  key: "<feature-flag-key>",
  user: { // field types can only be `string`, `number`, or `string[]`.
    Identifier: "<user-id>",
    Rating: 4.5,
    Roles: ["Role1","Role2"],
    // any other attribute
  }
}

const data = btoa(JSON.stringify(rawData))
const evtSource = new EventSource("http://localhost:8050/sse/#SDK-IDENTIFIER#/eval/" + data);
evtSource.onmessage = (event) => {
  console.log(event.data); // {"value":<evaluated-value>,"variationId":"<variation-id>"}
};
```

GETOPTIONS/sse/{sdkId}/eval-all/{data}

This endpoint subscribes to all feature flags' changes behind the given [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key). When any of the watched flags' value change, the Proxy sends its new value to each connected client.

**Route parameters**:

* `sdkId`: The [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) that uniquely identifies an SDK within the Proxy.
* `data`: **Optional**. The `base64` encoded input data for feature flag evaluation that contains a [User Object](https://configcat.com/docs/docs/targeting/user-object/.md).

**Responses**:

* 200: The SSE connection established successfully.
* Response body:
  ```
  {
    "feature-flag-key-1": {
      "value": <evaluated-value>,
      "variationId": "<variation-id>"
    },
    "feature-flag-key-2": {
      "value": <evaluated-value>,
      "variationId": "<variation-id>"
    }
  }
  ```
  204: In response to an `OPTIONS` request.
* 400: The `sdkId` is missing.
* 404: The `sdkId` is pointing to a non-existent SDK.

**Example**:

example.js

```
const rawData = {
  user: { // field types can only be `string`, `number`, or `string[]`.
    Identifier: "<user-id>",
    Rating: 4.5,
    Roles: ["Role1","Role2"],
    // any other attribute
  }
}

const data = btoa(JSON.stringify(rawData))
const evtSource = new EventSource("http://localhost:8050/sse/#SDK-IDENTIFIER#/eval-all/" + data);
evtSource.onmessage = (event) => {
  console.log(event.data); // {"feature-flag-key":{"value":<evaluated-value>,"variationId":"<variation-id>"}}
};
```

### Available Options[â](#available-options-3 "Direct link to Available Options")

The following SSE related options are available:

| Option                                                                                                                                                                                                                                                                                                        | Default | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
http:
  sse:
    enabled: <true|false>
``````
CONFIGCAT_HTTP_SSE_ENABLED=<true|false>
```                                                                                                                                                                                     | `true`  | Turns the hosting of the SSE endpoint on/off, This endpoint can be used to stream feature flag value changes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| - YAML<br />- Environment variable```
http:
  sse:
    cors:
      enabled: <true|false>
``````
CONFIGCAT_HTTP_SSE_CORS_ENABLED=<true|false>
```                                                                                                                                                                     | `true`  | Turns the sending of CORS headers on/off. It can be used to restrict access to specific domains. By default, the Proxy allows each origin by setting the `Access-Control-Allow-Origin` response header to the request's origin. You can override this functionality by restricting the allowed origins with the `allowed_origins` or `allowed_origins_regex` options.                                                                                                                                                                                                                                                                                             |
| - YAML<br />- Environment variable```
http:
  sse:
    cors:
      allowed_origins: 
        - https://domain1.com
        - https://domain2.com
``````
CONFIGCAT_HTTP_SSE_CORS_ALLOWED_ORIGINS='["https://domain1.com","https://domain2.com"]'
```                                                                    | -       | List of allowed CORS origins. When it's set, the Proxy will include only that origin in the `Access-Control-Allow-Origin` response header which matches the request's `Origin`.<br />When there's no matching request origin and the `allowed_origins_regex` option is not set, the Proxy will set the `Access-Control-Allow-Origin` response header to the first item in the allowed origins list.                                                                                                                                                                                                                                                               |
| - YAML<br />- Environment variable```
http:
  sse:
    cors:
      allowed_origins_regex:
        patterns:
          - https:\/\/.*domain1\.com
          - https:\/\/.*domain2\.com
``````
CONFIGCAT_HTTP_SSE_CORS_ALLOWED_ORIGINS_REGEX_PATTERNS='["https:\\/\\/.*domain1\\.com","https:\\/\\/.*domain2\\.com"]'
``` | -       | List of regex patterns used to match allowed CORS origins. When it's set, the Proxy will match the request's `Origin` with the given regex patterns. When there's a match, the `Access-Control-Allow-Origin` response header will be set to the matched origin.<br />When there's no matching request origin, the Proxy will set the `Access-Control-Allow-Origin` response header to the `if_no_match` field's value.<br />The `if_no_match` option is mandatory if this option is used.<br />When using the environment variable, the regex escape character must be doubled (`\\`) because it's parsed as a JSON list and `\` is also a JSON escape character. |
| - YAML<br />- Environment variable```
http:
  sse:
    cors:
      allowed_origins_regex:
        if_no_match: https://domain1.com
``````
CONFIGCAT_HTTP_SSE_CORS_ALLOWED_ORIGINS_REGEX_IF_NO_MATCH="https://domain1.com"
```                                                                                         | -       | Required when the previous `patterns` option is set. It's value is used in the `Access-Control-Allow-Origin` header when an incoming request's `Origin` doesn't match with any previously configured regex patterns.                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| - YAML<br />- Environment variable```
http:
  sse:
    headers:
      Custom-Header-Name: "<header-value>"
``````
CONFIGCAT_HTTP_SSE_HEADERS='{"Custom-Header-Name":"<header-value>"}'
```                                                                                                                           | -       | Additional headers that must be sent back on each [SSE endpoint](#sse) response.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| - YAML<br />- Environment variable```
http:
  sse:
    log:
      level: "<error|warn|info|debug>"
``````
CONFIGCAT_HTTP_SSE_LOG_LEVEL="<error|warn|info|debug>"
```                                                                                                                                                 | `warn`  | The verbosity of the SSE related logs.<br />Possible values: `error`, `warn`, `info` or `debug`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

## Webhook[â](#webhook "Direct link to Webhook")

Through the webhook endpoint, you can notify the Proxy about the availability of new feature flag evaluation data. Also, with the appropriate [SDK options](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#additional-options-for-underlying-sdks), the Proxy can [validate the signature](https://configcat.com/docs/docs/advanced/notifications-webhooks/.md#verifying-webhook-requests) of each incoming webhook request.

info

If you use the [automatic configuration with Proxy profiles](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#1-automatic-configuration-with-proxy-profiles), you don't have to set up individual webhooks manually. You can follow the documentation of webhook notifications for Proxy profiles [here](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#webhook-notification).

GETPOST/hook/{sdkId}

Notifies the Proxy that the SDK with the given [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) must refresh its *config JSON* to the latest version.

**Route parameters**:

* `sdkId`: The [SDK identifier](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#sdk-identifier--sdk-key) that uniquely identifies an SDK within the Proxy.

**Responses**:

* 200: The Proxy accepted the notification.
* 400: The `sdkId` is missing or the [webhook signature validation](https://configcat.com/docs/docs/advanced/notifications-webhooks/.md#verifying-webhook-requests) failed.
* 404: The `sdkId` is pointing to a non-existent SDK.

### ConfigCat Dashboard[â](#configcat-dashboard "Direct link to ConfigCat Dashboard")

You can set up webhooks to invoke the Proxy on the [Webhooks page](https://app.configcat.com/product/webhooks) of the ConfigCat Dashboard.

![Webhook](/docs/assets/proxy/webhook.png)

### Available Options[â](#available-options-4 "Direct link to Available Options")

The following webhook related options are available:

| Option                                                                                                                                                                          | Default | Description                                                                                                                                                                                                      |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
http:
  webhook:
    enabled: <true|false>
``````
CONFIGCAT_HTTP_WEBHOOK_ENABLED=<true|false>
```                                               | `true`  | Turns the hosting of the Webhook endpoint on/off. This endpoint can be used to notify the Proxy about the availability of new feature flag evaluation data.                                                      |
| - YAML<br />- Environment variable```
http:
  webhook:
    auth:
      user: "<auth-user>"
``````
CONFIGCAT_HTTP_WEBHOOK_AUTH_USER="<auth-user>"
```                                   | -       | Basic authentication user. The basic authentication webhook header can be set on the [Webhooks page](https://app.configcat.com/product/webhooks) of the ConfigCat Dashboard.                                     |
| - YAML<br />- Environment variable```
http:
  webhook:
    auth:
      password: "<auth-pass>"
``````
CONFIGCAT_HTTP_WEBHOOK_AUTH_PASSWORD="<auth-pass>"
```                           | -       | Basic authentication password. The basic authentication webhook header can be set on the [Webhooks page](https://app.configcat.com/product/webhooks) of the ConfigCat Dashboard.                                 |
| - YAML<br />- Environment variable```
http:
  webhook:
    auth_headers:
      X-API-KEY: "<auth-value>"
``````
CONFIGCAT_HTTP_WEBHOOK_AUTH_HEADERS='{"X-API-KEY":"<auth-value>"}'
``` | -       | Additional headers that ConfigCat must send with each request to the Webhook endpoint. Webhook headers can be set on the [Webhooks page](https://app.configcat.com/product/webhooks) of the ConfigCat Dashboard. |


---

# gRPC

The ConfigCat Proxy can communicate over [gRPC](https://grpc.io), an open-source, high-performance RPC framework with client support in several languages.

To establish gRPC connections, you'll need the protobuf and the gRPC [service definition](https://github.com/configcat/configcat-proxy/blob/main/grpc/proto/flag_service.proto). It's required to generate clients with [`protoc`](https://protobuf.dev/downloads/) for your [desired platform](https://protobuf.dev/reference/).

flag\_service.proto

```
syntax = "proto3";

option go_package = "github.com/configcat/configcat-proxy/grpc/proto";

package configcat;

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

// Service that contains feature flag evaluation procedures.
service FlagService {
  // Stream for getting notified when a feature flag's value changes.
  rpc EvalFlagStream(EvalRequest) returns (stream EvalResponse) {}
  // Stream for getting notified when any feature flag's value changes.
  rpc EvalAllFlagsStream(EvalRequest) returns (stream EvalAllResponse) {}

  // Evaluates a feature flag.
  rpc EvalFlag(EvalRequest) returns (EvalResponse) {}
  // Evaluates each feature flag.
  rpc EvalAllFlags(EvalRequest) returns (EvalAllResponse) {}
  // Requests the keys of each feature flag.
  rpc GetKeys(KeysRequest) returns (KeysResponse) {}
  // Commands the underlying SDK to refresh its evaluation data.
  rpc Refresh(RefreshRequest) returns (google.protobuf.Empty) {}
}

// Feature flag evaluation request message.
message EvalRequest {
  // The SDK identifier.
  string sdk_id = 1;
  // The feature flag's key to evaluate.
  string key = 2;
  // The User Object.
  map<string, UserValue> user = 3;
}

// Feature flag evaluation response message.
message EvalResponse {
  // The evaluated value.
  oneof value {
    int32 int_value = 1;
    double double_value = 2;
    string string_value = 3;
    bool bool_value = 4;
  }
  // The variation ID.
  string variation_id = 5;
}

// Response message that contains the evaluation result of each feature flag.
message EvalAllResponse {
  // The evaluated value of each feature flag.
  map<string, EvalResponse> values = 1;
}

// Request message for getting each available feature flag's key.
message KeysRequest {
  // The SDK identifier.
  string sdk_id = 1;
}

// Response message that contains each available feature flag's key.
message KeysResponse {
  // The keys of each feature flag.
  repeated string keys = 1;
}

// Request message for the given SDK to refresh its evaluation data.
message RefreshRequest {
  // The SDK identifier.
  string sdk_id = 1;
}

// Defines the possible values that can be set in the `user` map.
message UserValue {
  oneof value {
    double number_value = 1;
    string string_value = 2;
    google.protobuf.Timestamp time_value = 3;
    StringList string_list_value = 4;
  }
}

// Represents a list of strings.
message StringList {
  repeated string values = 1;
}
```

info

In order to secure the gRPC communication with the Proxy, set up [TLS](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#tls).

## Client Usage[â](#client-usage "Direct link to Client Usage")

The following example uses a generated Go client, but gRPC clients generated for other languages are working as well.

example.go

```
opts := []grpc.DialOption{
    grpc.WithBlock(),
    grpc.WithTransportCredentials(credentials.NewTLS(&tls.Config{
        // Any TLS options
    })),
}

conn, err := grpc.DialContext(context.Background(), 
    "localhost:50051", // Proxy host and gRPC port
    opts...)
if err != nil {
    panic(err)
}

defer func() {
    _ = conn.Close()
}()

client := proto.NewFlagServiceClient(conn)

ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)
defer cancel()

resp, err := client.EvalFlag(ctx, &proto.EvalRequest{
    SdkId: "<sdk-identifier>", 
    Key: "<flag-key>", 
    User: map[string]*proto.UserValue{"Identifier": {Value: &proto.UserValue_StringValue{StringValue: "<user-id>"}}}
})
if err != nil {
    panic(err)
}

fmt.Printf("Evaluation result: %v", resp.GetBoolValue())
```

## Health Check[â](#health-check "Direct link to Health Check")

The Proxy exposes health information over a [standardized health RPC service](https://github.com/grpc/grpc-proto/blob/master/grpc/health/v1/health.proto).

Clients can set `""` as the `service` parameter (or skip specifying it) to get the health status of the gRPC server. Exposing the health check service is configurable and turned on by default.

For more details about gRPC health checking, check out the [official documentation](https://grpc.io/docs/guides/health-checking/).

## Server Reflection[â](#server-reflection "Direct link to Server Reflection")

The Proxy can expose its protobuf-defined feature flag evaluation API over a [standardized reflection RPC service](https://github.com/grpc/grpc-proto/blob/master/grpc/reflection/v1/reflection.proto), including all types referenced by the request and response messages. Exposing the reflection service is configurable and turned off by default.

For more details about gRPC server reflection, check out the [official documentation](https://grpc.io/docs/guides/reflection/).

## Available Options[â](#available-options "Direct link to Available Options")

The following gRPC related options are available:

* YAML
* Environment variables

options.yml

```
grpc:
  enabled: <true|false>
  port: 50051
  server_reflection_enabled: <true|false>
  health_check_enabled: <true|false>
  keep_alive:
    max_connection_idle: 15
    max_connection_age: 30
    max_connection_age_grace: 5
    time: 5
    timeout: 1
  log:
    level: "<error|warn|info|debug>"
```

```
CONFIGCAT_GRPC_ENABLED=<true|false>
CONFIGCAT_GRPC_PORT=50051
CONFIGCAT_GRPC_HEALTH_CHECK_ENABLED=<true|false>
CONFIGCAT_GRPC_SERVER_REFLECTION_ENABLED=<true|false>
CONFIGCAT_GRPC_KEEP_ALIVE_MAX_CONNECTION_IDLE=15
CONFIGCAT_GRPC_KEEP_ALIVE_MAX_CONNECTION_AGE=30
CONFIGCAT_GRPC_KEEP_ALIVE_MAX_CONNECTION_AGE_GRACE=5
CONFIGCAT_GRPC_KEEP_ALIVE_TIME=5
CONFIGCAT_GRPC_KEEP_ALIVE_TIMEOUT=1
CONFIGCAT_GRPC_LOG_LEVEL="<error|warn|info|debug>"
```

Here's the explanation for each option:

| Option                                                                                                                                              | Default              | Description                                                                                                                                                                                                                        |
| --------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
grpc:
  enabled: <true|false>
``````
CONFIGCAT_GRPC_ENABLED=<true|false>
```                                       | `true`               | Turns the ability to communicate with the Proxy through gRPC on/off.                                                                                                                                                               |
| - YAML<br />- Environment variable```
grpc:
  port: 50051
``````
CONFIGCAT_GRPC_PORT=50051
```                                                           | `50051`              | The port used for gRPC communication.                                                                                                                                                                                              |
| - YAML<br />- Environment variable```
grpc:
  health_check_enabled: <true|false>
``````
CONFIGCAT_GRPC_HEALTH_CHECK_ENABLED=<true|false>
```             | `true`               | Turns the [gRPC health check service](https://grpc.io/docs/guides/health-checking/) on/off.                                                                                                                                        |
| - YAML<br />- Environment variable```
grpc:
  server_reflection_enabled: <true|false>
``````
CONFIGCAT_GRPC_SERVER_REFLECTION_ENABLED=<true|false>
```   | `false`              | Turns the [gRPC server reflection](https://grpc.io/docs/guides/reflection/) on/off.                                                                                                                                                |
| - YAML<br />- Environment variable```
grpc:
  keep_alive:
    max_connection_idle: 15
``````
CONFIGCAT_GRPC_KEEP_ALIVE_MAX_CONNECTION_IDLE=15
```         | `INT_MAX (Infinite)` | Maximum time in seconds that a channel may have no outstanding rpcs, after which the server will close the connection. [More about the gRPC keep-alive](https://grpc.io/docs/guides/keepalive/).                                   |
| - YAML<br />- Environment variable```
grpc:
  keep_alive:
    max_connection_age: 30
``````
CONFIGCAT_GRPC_KEEP_ALIVE_MAX_CONNECTION_AGE=30
```           | `INT_MAX (Infinite)` | Maximum time in seconds that a channel may exist. [More about the gRPC keep-alive](https://grpc.io/docs/guides/keepalive/).                                                                                                        |
| - YAML<br />- Environment variable```
grpc:
  keep_alive:
    max_connection_age_grace: 5
``````
CONFIGCAT_GRPC_KEEP_ALIVE_MAX_CONNECTION_AGE_GRACE=5
``` | `INT_MAX (Infinite)` | Grace period in seconds after the channel reaches its max age. [More about the gRPC keep-alive](https://grpc.io/docs/guides/keepalive/).                                                                                           |
| - YAML<br />- Environment variable```
grpc:
  keep_alive:
    time: 5
``````
CONFIGCAT_GRPC_KEEP_ALIVE_TIME=5
```                                         | `7200`               | The interval in seconds between PING frames. [More about the gRPC keep-alive](https://grpc.io/docs/guides/keepalive/).                                                                                                             |
| - YAML<br />- Environment variable```
grpc:
  keep_alive:
    timeout: 1
``````
CONFIGCAT_GRPC_KEEP_ALIVE_TIMEOUT=1
```                                   | `20`                 | The timeout in seconds for a PING frame to be acknowledged. If sender does not receive an acknowledgment within this time, it will close the connection. [More about the gRPC keep-alive](https://grpc.io/docs/guides/keepalive/). |
| - YAML<br />- Environment variable```
grpc:
  log:
    level: "<error|warn|info|debug>"
``````
CONFIGCAT_GRPC_LOG_LEVEL="<error|warn|info|debug>"
```     | `warn`               | The verbosity of the gRPC related logs.<br />Possible values: `error`, `warn`, `info` or `debug`.<br />When `debug` is set, the Proxy will log each RPC with additional details.                                                   |


---

# Monitoring

The ConfigCat Proxy provides diagnostic data via its `/status` and a Prometheus-compatible `/metrics` endpoint. These endpoints are served on a specific port, so you can separate them from the public HTTP communication.

The following diagnostics related configuration options are available:

| Option                                                                                                                            | Default | Description                                                                                |
| --------------------------------------------------------------------------------------------------------------------------------- | ------- | ------------------------------------------------------------------------------------------ |
| - YAML<br />- Environment variable```
diag:
  enabled: <true|false>
``````
CONFIGCAT_DIAG_ENABLED=<true|false>
```                     | `true`  | Turns the diagnostics HTTP server on/off.                                                  |
| - YAML<br />- Environment variable```
diag:
  port: 8051
``````
CONFIGCAT_DIAG_PORT=8051
```                                           | `8051`  | The port used by the diagnostics HTTP server.                                              |
| - YAML<br />- Environment variable```
diag:
  status:
    enabled: <true|false>
``````
CONFIGCAT_DIAG_STATUS_ENABLED=<true|false>
```   | `true`  | Turns the hosting of the [status endpoint](#status) on the diagnostics HTTP server on/off. |
| - YAML<br />- Environment variable```
diag:
  metrics:
    enabled: <true|false>
``````
CONFIGCAT_DIAG_METRICS_ENABLED=<true|false>
``` | `true`  | Turns the [Prometheus metrics](#prometheus-metrics) on the diagnostics HTTP server on/off. |

## Status Endpoint[â](#status "Direct link to Status Endpoint")

The Proxy provides status information (health check) about its components on the following endpoint:

GETOPTIONS/status

The Proxy regularly checks whether the underlying SDKs can communicate with their configured source and with the cache. This endpoint returns the actual state of these checks.

**Responses**:

* 200: The status returned successfully.
* 204: In response to an `OPTIONS` request.

**Example Response**:

```
{
  "status": "healthy",
  "sdks": {
    "my_sdk": {
      "key": "****************************************hwTYg",
      "mode": "online",
      "source": {
        "type": "remote",
        "status": "healthy",
        "records": [
          "Mon, 29 May 2023 16:36:40 UTC: [ok] config fetched"
        ]
      }
    },
    "another_sdk": {
      "key": "****************************************ovVnQ",
      "mode": "offline",
      "source": {
        "type": "cache",
        "status": "healthy",
        "records": [
          "Mon, 29 May 2023 16:36:40 UTC: [ok] reload from cache succeeded",
          "Mon, 29 May 2023 16:36:45 UTC: [ok] config from cache not modified"
        ]
      }
    }
  },
  "cache": {
    "status": "healthy",
    "records": [
      "Mon, 29 May 2023 16:36:40 UTC: [ok] cache read succeeded",
      "Mon, 29 May 2023 16:36:40 UTC: [ok] cache write succeeded",
      "Mon, 29 May 2023 16:36:40 UTC: [ok] cache read succeeded",
      "Mon, 29 May 2023 16:36:45 UTC: [ok] cache read succeeded"
    ]
  }
}
```

**Details**:

If everything is operational, each `status` node shows the value `healthy`. If a component encounters a failure, it'll put an error to its `records` collection. If a component's last two records are errors, its `status` will switch to `degraded`. If a component becomes operational again it'll put an `[ok]` to the `records` and will switch back to `healthy`.

If an SDK couldn't initialize itself neither from an external cache nor from the ConfigCat CDN, its status will be `down`. It means, this SDK is not able to accept evaluation requests because it doesn't have a valid *config JSON* to work with.

If an SDK was able to initialize from its configured source, but its last two attempts to refresh has been failed (either from cache or from the ConfigCat CDN), it will become `degraded` because each refresh attempt will put an error to its `records` collection. This means, it's still able to evaluate feature flags, but it might work on a stale *config JSON*.

The root `status` is `healthy` if all of the SDKs are `healthy`. If any of the SDKs become `degraded` or `down`, the root will also switch to `degraded` (or `down` if each SDK is `down`).

note

You can enable the status endpoint on the main HTTP port (default: `8050`) with the [HTTP configuration options](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#http).

## Prometheus Metrics[â](#prometheus-metrics "Direct link to Prometheus Metrics")

You can set up the Proxy to export metrics about its internal state in Prometheus format. These metrics are served via the `/metrics` endpoint.

The following metrics are exported:

| Name                                          | Type      | Description                                                                                                                                                                                                              |
| --------------------------------------------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `configcat_http_request_duration_seconds`     | Histogram | Histogram of Proxy HTTP response time in seconds.<br /><br />Tags:- `route`: The request's URL path.<br />- `method`: The request's HTTP method.<br />- `status`: The response's HTTP status.                            |
| `configcat_grpc_rpc_duration_seconds`         | Histogram | Histogram of RPC call latency in seconds.<br /><br />Tags:- `method`: The RPCs name.<br />- `code`: The RPCs response code.                                                                                              |
| `configcat_sdk_http_request_duration_seconds` | Histogram | Histogram of ConfigCat CDN HTTP response time in seconds.<br /><br />Tags:- `sdk`: The SDK's identifier that initiated the request.<br />- `route`: The request's URL path.<br />- `status`: The response's HTTP status. |
| `configcat_stream_connections`                | Gauge     | Number of active client connections per stream.<br /><br />Tags:- `sdk`: The SDK's identifier that handles the connection.<br />- `type`: `sse` or `grpc`.<br />- `flag`: The streamed feature flag's key.               |
| `configcat_stream_msg_sent_total`             | Counter   | Total number of all messages sent with streaming.<br /><br />Tags:- `sdk`: The related SDK's identifier.<br />- `type`: `sse` or `grpc`.<br />- `flag`: The evaluated feature flag's key.                                |

info

The Proxy also exports metrics about the Go environment, e.g., `go_goroutines` or `go_memstats_alloc_bytes`, and process-related stats, e.g., `process_cpu_seconds_total`.

To integrate with Prometheus, put the following scrape configâthat points to the Proxyâinto your Prometheus configuration:

```
scrape_configs:
  - job_name: configcat_proxy
    metrics_path: /metrics
    static_configs:
      - targets:
          - <proxy-host>:8051
```


---

# ConfigCat Proxy

The [ConfigCat Proxy](https://github.com/configcat/configcat-proxy) allows you to host a feature flag evaluation service in your own infrastructure. It's a small Go application that communicates with ConfigCat's CDN network and caches/proxies *config JSON* files for your frontend and backend applications. The *config JSON* contains all the data that is needed for ConfigCat SDKs to evaluate feature flags.

The Proxy provides the following:

* **Performance**: The Proxy can be deployed close to your applications and can serve the downloaded *config JSON* files from memory. ConfigCat SDKs then can operate on the [proxied *config JSON*](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#cdn-proxy). This can reduce the duration of feature flag evaluation for stateless or short lived applications.
* **Reliability**: The Proxy can store the downloaded *config JSON* files in an external [cache](#cache). It can fall back to operating on the cached *config JSON* if the ConfigCat CDN network becomes inaccessible.
* **Security**: The Proxy can act as a [server side flag evaluation](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#api) component. Using it like that can prevent the exposure of *config JSON* files to frontend and mobile applications.
* **Scalability**: Horizontal scaling allows you to align with the load coming from your applications accordingly.
* **Streaming**: The Proxy provides real-time feature flag change notifications via [Server-Sent Events (SSE)](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#sse) and [gRPC](https://configcat.com/docs/docs/advanced/proxy/grpc/.md).

## Architecture[â](#architecture "Direct link to Architecture")

The following diagram shows the high level architecture of the Proxy.

![High level Proxy architecture](/docs/assets/proxy/proxy_arch.png)

### How It Works[â](#how-it-works "Direct link to How It Works")

The Proxy wraps one or more SDK instances for handling feature flag evaluation requests. It also serves the related *config JSON* files that can be consumed by other ConfigCat SDKs running in your applications.

Within the Proxy, the underlying SDK instances can run in the following modes:

* **Online**: In this mode, the underlying SDK has an active connection to the ConfigCat CDN network through the internet.
* **Offline**: In [this mode](#offline-mode), the underlying SDK doesn't have an active connection to ConfigCat. Instead, it uses the configured cache or a file as a source of its *config JSON*.

With the combination of the above modes, you can construct a cluster of proxies where only one node is responsible for the communication with ConfigCat, and all the other nodes are working from a central cache.

![Load balanced Proxy architecture](/docs/assets/proxy/load_balanced.png)

### Communication[â](#communication "Direct link to Communication")

There are three ways how the Proxy is informed about the availability of new feature flag evaluation data:

* **Polling**: The ConfigCat SDKs within the Proxy are regularly polling the ConfigCat CDN for new *config JSON* versions.
* **Webhook**: The Proxy has [webhook endpoints](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#webhook) (for each underlying SDK) which can be set on the [ConfigCat Dashboard](https://app.configcat.com/product/webhooks) to be invoked when someone saves & publishes new feature flag changes.
* **Cache polling / file watching**: In [offline mode](#offline-mode), the Proxy can regularly poll a cache or watch a file for new *config JSON* versions.

These are the ports used by the Proxy by default:

* **8050**: for standard HTTP communication. ([API](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#api), [CDN proxy](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#cdn-proxy), [Webhook](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#webhook), [SSE](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#sse))
* **8051**: for providing diagnostic data ([status](https://configcat.com/docs/docs/advanced/proxy/monitoring/.md#status), [prometheus metrics](https://configcat.com/docs/docs/advanced/proxy/monitoring/.md#prometheus-metrics)).
* **50051**: for [gRPC](https://configcat.com/docs/docs/advanced/proxy/grpc/.md) communication.

## Installation[â](#installation "Direct link to Installation")

You can install the ConfigCat Proxy from the following sources:

**Docker**

The docker image is available on DockerHub. You can run the image either as a standalone docker container or via `docker-compose`.

* Standalone
* docker-compose

Pull the docker image:

```
docker pull configcat/proxy
```

Run the ConfigCat Proxy:

```
docker run -d --name configcat-proxy \ 
  -p 8050:8050 -p 8051:8051 -p 50051:50051 \
  -e CONFIGCAT_SDKS='{"<sdk-identifier>":"<your-sdk-key>"}' \
  configcat/proxy
```

docker-compose.yml

```
services:
  configcat_proxy:
    image: configcat/proxy
    environment:
      - CONFIGCAT_SDKS={"<sdk-identifier>":"<your-sdk-key>"}
    ports:
      - "8050:8050"
      - "8051:8051"
      - "50051:50051"
```

To start docker services, execute the following command:

```
docker-compose up -f docker-compose.yml -d
```

**Standalone executable**

You can download the executables directly from [GitHub Releases](https://github.com/configcat/configcat-proxy/releases) for your desired platform.

You can then check the [status endpoint](https://configcat.com/docs/docs/advanced/proxy/monitoring/.md#status) of the Proxy to ensure it's working correctly: `http://localhost:8051/status`

## Usage Scenarios[â](#usage-scenarios "Direct link to Usage Scenarios")

This section describes the possible ways of how you can use the Proxy from your application. You can decide where you want the actual feature flag evaluation to happen.

* **Local evaluation**: Feature flags are evaluated in your application by the ConfigCat SDK running in your application. The Proxy only provides the data required for the evaluation process.
* **Remote evaluation**: Feature flags are evaluated within the Proxy, your application only gets the result of the evaluation process.

### 1. Local evaluation using a ConfigCat SDK connected to the Proxy[â](#1-local-evaluation-using-a-configcat-sdk-connected-to-the-proxy "Direct link to 1. Local evaluation using a ConfigCat SDK connected to the Proxy")

The Proxy has the ability to forward all information required for feature flag evaluation to ConfigCat SDKs via its [CDN proxy](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#cdn-proxy) endpoint. This means that you can set up your ConfigCat SDK instances to use the Proxy as their data source.

To do this, you have to set the SDK's `baseUrl` option to the Proxy's host.

example.js (Initializing the ConfigCat JS SDK to use the Proxy with SDK Key)

```
import * as configcat from "@configcat/sdk";

const configCatClient = configcat.getClient(
  "#YOUR-SDK-KEY#", 
  configcat.PollingMode.AutoPoll,
  { baseUrl: "http://localhost:8050" } // Proxy URL
);
```

Additionally, as the Proxy maps [unique identifiers to each configured SDK key](#sdk-identifier--sdk-key) it works with, you can use that identifier prefixed with `configcat-proxy/` as the SDK key at the ConfigCat SDK's initialization.

example.js (Initializing the ConfigCat JS SDK to use the Proxy with SDK identifier)

```
import * as configcat from "@configcat/sdk";

var configCatClient = configcat.getClient(
  "configcat-proxy/#SDK-IDENTIFIER#", // SDK identifier prefixed with 'configcat-proxy/'
  configcat.PollingMode.AutoPoll,
  { baseUrl: "http://localhost:8050" } // Proxy URL
);
```

### 2. Remote evaluation with the Proxy's API endpoints[â](#2-remote-evaluation-with-the-proxys-api-endpoints "Direct link to 2. Remote evaluation with the Proxy's API endpoints")

You can leverage the Proxy's server side feature flag evaluation feature by sending simple HTTP requests to the Proxy's API endpoints.

example.js (Evaluating a feature flag with API)

```
const url = "http://localhost:8050/api/#SDK-IDENTIFIER#/eval"; // Proxy API URL with SDK identifier

const data = {
  key: "isMyAwesomeFeatureEnabled", // Feature flag key
  user: { // User Object for evaluation
    Identifier: "#UNIQUE-USER-IDENTIFIER#"
  }
};

const requestOptions = {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(data),
};

try {
  const response = await fetch(url, requestOptions);
  const responseData = await response.json();
  console.log(responseData); // {"value":<evaluated-value>,"variationId":"<variation-id>"}
} catch (error) {
  console.error('Error:', error)
}
```

You can find the available API endpoints with their HTTP request/response schemas [here](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#api).

### 3. Remote evaluation with OpenFeature Remote Evaluation Protocol (OFREP)[â](#3-remote-evaluation-with-openfeature-remote-evaluation-protocol-ofrep "Direct link to 3. Remote evaluation with OpenFeature Remote Evaluation Protocol (OFREP)")

info

OFREP compatibility is only available from Proxy version [`v2.0.0`](https://github.com/configcat/configcat-proxy/releases/tag/v2.0.0).

info

The OFREP feature of the Proxy is turned OFF by default, to use it, you have to turn it ON with the [OFREP endpoint options](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#available-options-2).

The Proxy conforms to the [OpenFeature Remote Evaluation Protocol](https://github.com/open-feature/protocol), which means it can be used with OFREP compatible OpenFeature providers.

example.js (Initializing the OFREP JS Web provider to use the Proxy)

```
import { OpenFeature } from "@openfeature/web-sdk";
import { OFREPWebProvider } from '@openfeature/ofrep-web-provider';

OpenFeature.setProvider(
  new OFREPWebProvider({
    baseUrl: 'http://localhost:8050', // Proxy URL
    headers: [
      ['X-ConfigCat-SdkId', '#SDK-IDENTIFIER#'],
    ],
  }),
);
```

You can find the available OFREP endpoints with their HTTP request/response schemas [here](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#openfeature-remote-evaluation-protocol-ofrep).

### 4. Remote evaluation and streaming with SSE[â](#4-remote-evaluation-and-streaming-with-sse "Direct link to 4. Remote evaluation and streaming with SSE")

The Proxy has the ability to evaluate feature flags and send notifications about subsequent evaluated flag value changes through [Server-Sent Events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events) connections.

example.js (Evaluating a feature flag and listening to changes with SSE)

```
const rawData = {
  key: "isMyAwesomeFeatureEnabled", // Feature flag key
  user: { // User Object for evaluation
    Identifier: "#UNIQUE-USER-IDENTIFIER#"
  }
}

const data = btoa(JSON.stringify(rawData))
const url = "http://localhost:8050/sse/#SDK-IDENTIFIER#/eval"; // Proxy SSE URL with SDK identifier

const evtSource = new EventSource(url + "/" + data);
evtSource.onmessage = (event) => {
  console.log(event.data); // {"value":<evaluated-value>,"variationId":"<variation-id>"}
};
```

For more information and usage examples, see the related [SSE endpoints documentation](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#sse).

### 5. Remote evaluation and streaming with gRPC[â](#5-remote-evaluation-and-streaming-with-grpc "Direct link to 5. Remote evaluation and streaming with gRPC")

The Proxy supports both unary feature flag evaluation RPCs and server streaming of evaluated flag value changes. For more information and usage examples, see the [gRPC section of this documentation](https://configcat.com/docs/docs/advanced/proxy/grpc/.md).

## Configuration Options[â](#configuration-options "Direct link to Configuration Options")

You can specify options for the Proxy either via a YAML file or with environment variables. When an option is defined in both places, the environment variable's value takes precedence.

By default, the Proxy reads the options YAML from the following default locations:

* **Windows**: `%PROGRAMDATA%\configcat\proxy\options.yml`, usually `C:\ProgramData\configcat\proxy\options.yml`
* **macOS**: `/Library/Application Support/configcat/proxy/options.yml`
* **Linux**: `/etc/configcat/proxy/options.yml`

When the default location is not suitable, you can specify a custom location for your options YAML file via the `-c` argument.

* YAML
* Environment variables

**Docker**

When running the Proxy in docker, you can mount the options YAML file as a volume.

```
docker run -d --name configcat-proxy \ 
  -p 8050:8050 -p 8051:8051 -p 50051:50051 \
  -v <path-to-file>/options.yml:/etc/configcat/proxy/options.yml
```

(Optional) With the `-c` argument to specify a custom path for your options YAML file:

```
docker run -d --name configcat-proxy \ 
  -p 8050:8050 -p 8051:8051 -p 50051:50051 \
  -v <path-to-file>/options.yml:/cnf/options.yml \
  configcat/proxy -c /cnf/options.yml
```

**Standalone executable**

Run the Proxy as a standalone executable with the options YAML file in its default location:

* macOS / Linux
* Windows

```
./configcat-proxy
```

```
.\configcat-proxy.exe
```

(Optional) With the `-c` argument to specify a custom path for your options YAML file:

* macOS / Linux
* Windows

```
./configcat-proxy -c /path-to-file/options.yml
```

```
.\configcat-proxy.exe -c \path-to-file\options.yml
```

**Docker**

When running the Proxy in docker, you can pass environment variables to the executing container.

```
docker run -d --name configcat-proxy \ 
  -p 8050:8050 -p 8051:8051 -p 50051:50051 \
  -e CONFIGCAT_SDKS='{"<sdk-identifier>":"<your-sdk-key>"}' \
  configcat/proxy
```

**Standalone executable**

Make sure the related environment variables are available for the Proxy's hosting process.

* shell
* PowerShell

```
export CONFIGCAT_SDKS='{"<sdk-identifier>":"<your-sdk-key>"}'
```

Then start the Proxy:

```
./configcat-proxy
```

```
$Env:CONFIGCAT_SDKS='{"<sdk-identifier>":"<your-sdk-key>"}'
```

Then start the Proxy:

```
.\configcat-proxy.exe
```

The following sections will go through each available option in detail.

## How does the Proxy learn about feature flags?[â](#sdk "Direct link to How does the Proxy learn about feature flags?")

In order to make the Proxy work properly, it must be set up with one or more [SDK keys](https://app.configcat.com/sdkkey). It creates one SDK instance per SDK key internally and uses those for feature flag evaluation.

### SDK Identifier[â](#sdk-identifier--sdk-key "Direct link to SDK Identifier")

Within the Proxy, [SDK keys](https://app.configcat.com/sdkkey) are mapped to unique SDK identifiers.

The *SDK key* identifies a config/environment pair and is used to configure an SDK instance to fetch the config JSON of that config/environment pair. The *SDK identifier* identifies an SDK instance running within the Proxy and configured to use the associated SDK key. That is, the SDK identifier is effectively an alias for the associated SDK key and is used in [endpoint routes](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md) to avoid exposing the SDK Key.

There are two ways to let the Proxy know which SDK Keys it should use:

### 1. Automatic configuration with Proxy profiles[â](#1-automatic-configuration-with-proxy-profiles "Direct link to 1. Automatic configuration with Proxy profiles")

info

**Beta Feature**: Automatic configuration with Proxy profiles is in public beta. We're now collecting feedback from real-world usage to fine-tune the experience. Share your feedback [here](https://configcat.com/support).

info

The automatic configuration with Proxy profiles feature is only available from Proxy version [`v2.0.0`](https://github.com/configcat/configcat-proxy/releases/tag/v2.0.0).

The Proxy has the ability to use *Proxy profiles* to determine which SDK keys to download and distribute. It periodically checks for profile changes, allowing it to pick up the changes on the fly, without needing a restart.

You can set up Proxy profiles under the `Manage organization` -> `Proxy Profiles` menu on the [ConfigCat Dashboard](https://app.configcat.com/organization/proxy-profiles).

![Proxy Profiles menu](/docs/assets/proxy/profile-menu.png)

<br />

<br />

To connect a Proxy instance to a Proxy profile, follow these steps:

* #### Create a new Proxy profile[â](#create-a-new-proxy-profile "Direct link to Create a new Proxy profile")

  Click on the `+ ADD PROFILE` button.

  ![Add Profile](/docs/assets/proxy/profile-add.png)

  Give the profile a meaningful name and description, then click `CREATE`.

  ![Create Profile](/docs/assets/proxy/profile-create.png)

  <br />

  <br />

* #### Configure your Proxy instance[â](#configure-your-proxy-instance "Direct link to Configure your Proxy instance")

  Grab the `Key` and `Secret` from the profile creation dialog and put them into the Proxy's configuration.

  ![Configure Proxy with key and secret](/docs/assets/proxy/profile-key-secret.png)

  * YAML
  * Environment variables

  options.yml

  ```
  profile:
    key: <key>
    secret: <secret>
  ```

  ```
  CONFIGCAT_PROFILE_KEY="<key>"
  CONFIGCAT_PROFILE_SECRET="<secret>"
  ```

  <br />

* #### Select which SDK Keys your Proxy should use[â](#select-which-sdk-keys-your-proxy-should-use "Direct link to Select which SDK Keys your Proxy should use")

  Click on the edit icon in the `SDK Keys` column.

  ![Click on Select SDK Keys](/docs/assets/proxy/profile-sdk-keys-configure.png)

  Select the config/environment pairs whose SDK key you want to make available for your Proxy instance.

  ![Select SDK Keys](/docs/assets/proxy/profile-sdk-keys-select.png)

  info

  You can click config names in the first column to toggle all SDK keys in a row, or environment names in the column headers to toggle all SDK keys in a column.

  <br />

* #### Locate SDK identifiers for the selected SDK Keys[â](#locate-sdk-identifiers-for-the-selected-sdk-keys "Direct link to Locate SDK identifiers for the selected SDK Keys")

  You can find the SDK identifiers generated for the selected config/environment pairs on the ConfigCat Dashboard right where you find their SDK Key.

  ![Click on view SDK identifiers for ConfigCat Proxy](/docs/assets/proxy/profile-sdk-ids-arrow.png)

  In the dialog that appears, you can find the SDK identifiers for the current config/environment pair, listed for each available Proxy profile.

  ![Click on view SDK identifiers for ConfigCat Proxy](/docs/assets/proxy/profile-sdk-ids-dialog.png)

  <br />

  <br />

* #### (Optional) Set up how your Proxy should learn about feature flag changes[â](#optional-set-up-how-your-proxy-should-learn-about-feature-flag-changes "Direct link to (Optional) Set up how your Proxy should learn about feature flag changes")

  There are two ways a Proxy can detect feature flag changes. Each config/environment pair identified by each SDK key is automatically monitored for changes by periodic polling of the corresponding config JSON file at a configured frequency. Besides polling, the Proxy can receive change notifications over HTTP, via its [webhook endpoint](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#webhook).

  * ##### Config JSON poll interval[â](#config-json-poll-interval "Direct link to Config JSON poll interval")

    You have the option to control how frequently the Proxy should poll for config JSON changes.<br /><!-- -->Click on the configure icon in the `Connection preferences` column, set the poll interval and click on `SAVE POLL INTERVAL`.

    ![Set config JSON poll interval](/docs/assets/proxy/profile-sdk-poll-interval.png)

    <br />

    <br />

  * ##### Webhook notification[â](#webhook-notification "Direct link to Webhook notification")

    You can set up automatic webhook notifications about feature flag changes for your Proxy by providing its public URL.<br /><!-- -->Click on the configure icon in the `Connection preferences` column and select `Webhook notification`. Then, enter your Proxy instance's public URL and click `ADD PROXY URL`.

    ![Set Proxy webhook URL](/docs/assets/proxy/profile-webhook-url.png)

    Put the displayed webhook signing key(s) into your Proxy's configuration. Signing keys are for making sure that webhook requests received by your Proxy are sent by ConfigCat. Signatures are automatically [verified](https://configcat.com/docs/docs/advanced/notifications-webhooks/.md#verifying-webhook-requests) by the Proxy.

    ![Copy webhook signing key](/docs/assets/proxy/profile-webhook-signing-key.png)

    * YAML
    * Environment variables

    options.yml

    ```
    profile:
      webhook_signing_key: <signing-key>
    ```

    ```
    CONFIGCAT_PROFILE_WEBHOOK_SIGNING_KEY="<signing-key>"
    ```

    Test the connection to your Proxy instance.

    ![Test the webhook configuration](/docs/assets/proxy/profile-webhook-test.png)

    <br />

    <br />

* #### All configuration options related to Proxy profiles[â](#all-configuration-options-related-to-proxy-profiles "Direct link to All configuration options related to Proxy profiles")

  | Option                                                                                                                                                                | Default                             | Description                                                                                                                                                                                                                               |
  | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
  | - YAML<br />- Environment variable```
  profile:
    key: "<key>"
  ``````
  CONFIGCAT_PROFILE_KEY="<key>"
  ```                                                                     | -                                   | The Proxy profile's key.                                                                                                                                                                                                                  |
  | - YAML<br />- Environment variable```
  profile:
    secret: "<secret>"
  ``````
  CONFIGCAT_PROFILE_SECRET="<secret>"
  ```                                                         | -                                   | The Proxy profile's secret used by the Proxy to authenticate requests to the Public Management API.                                                                                                                                       |
  | - YAML<br />- Environment variable```
  profile:
    base_url: "<base-url>"
  ``````
  CONFIGCAT_PROFILE_BASE_URL="<base-url>"
  ```                                                 | ConfigCat Public Management API URL | The base URL from where the Proxy should fetch the SDK Keys selected in the connected Proxy profile.                                                                                                                                      |
  | - YAML<br />- Environment variable```
  profile:
    poll_interval: 300
  ``````
  CONFIGCAT_PROFILE_POLL_INTERVAL=300
  ```                                                         | 300                                 | The interval (in seconds) specifying how frequently the Proxy should poll for changes in the connected Proxy profile.                                                                                                                     |
  | - YAML<br />- Environment variable```
  profile:
    webhook_signing_key: "<signing-key>"
  ``````
  CONFIGCAT_PROFILE_WEBHOOK_SIGNING_KEY="<signing-key>"
  ```                     | -                                   | The [key used to sign](https://configcat.com/docs/docs/advanced/notifications-webhooks/.md#calculating-signature) the webhook requests sent to the Proxy. [More about how to set up webhooks for a Proxy profile](#webhook-notification). |
  | - YAML<br />- Environment variable```
  profile:
    webhook_signature_valid_for: 300
  ``````
  CONFIGCAT_PROFILE_WEBHOOK_SIGNATURE_VALID_FOR=300
  ```                             | 300                                 | The time period (in seconds) within which webhook requests are considered valid. [More about how to set up webhooks for a Proxy profile](#webhook-notification).                                                                          |
  | - YAML<br />- Environment variable```
  profile:
    log:
      level: "<error|warn|info|debug>"
  ``````
  CONFIGCAT_PROFILE_LOG_LEVEL="<error|warn|info|debug>"
  ```                 | `warn`                              | The verbosity level for Proxy profile-related logging.<br />Possible values: `error`, `warn`, `info`, or `debug`.                                                                                                                         |
  | - YAML<br />- Environment variable```
  profile:
    sdks:
      base_url: "<sdk-base-url>"
  ``````
  CONFIGCAT_PROFILE_SDKS_BASE_URL="<sdk-base-url>"
  ```                           | ConfigCat's CDN URL.                | The CDN base URL (forward proxy, dedicated subscription) from where the ConfigCat SDKs should download the config JSON.                                                                                                                   |
  | - YAML<br />- Environment variable```
  profile:
    sdks:
      log:
        level: "<error|warn|info|debug>"
  ``````
  CONFIGCAT_PROFILE_SDKS_LOG_LEVEL="<error|warn|info|debug>"
  ``` | `warn`                              | The verbosity level for logging performed by the ConfigCat SDKs spawned for the connected Proxy profile.<br />Possible values: `error`, `warn`, `info`, or `debug`.                                                                       |

  <br />

  #### Profile caching[â](#profile-caching "Direct link to Profile caching")

  Proxy instances running in online mode are caching their connected profile if they have a [cache](#cache) configured. This means that other Proxy instances running with [global offline mode](#global-offline-mode) enabled can use those cached profiles from the same shared cache.

  info

  Offline Proxy instances only need the profile's `key` to read the connected profile from the cache, the `secret` option is not mandatory in this mode.

### 2. Manual configuration[â](#2-manual-configuration "Direct link to 2. Manual configuration")

When using environment variables, the SDK keys can be specified as a JSON object, where the **property name is the SDK identifier** (the identifier of the config/environment pair whose SDK Key the underlying SDK instance is configured to use) and the **property value is the actual SDK key**. The **SDK identifier** part is later used in [endpoint routes](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md) to recognize which SDK must serve the given flag evaluation request.

Furthermore, when configuring the Proxy **via environment variables**, the identifier becomes a **part of the SDK specific environment variable's name** in the following format: `CONFIGCAT_<SDK_ID>_<OPTION>`.

For example, suppose we have the following setup: `CONFIGCAT_SDKS={"my_sdk":"<your-sdk-key>"}`.<br /><!-- -->In this case, the environment variable that sets the corresponding SDK instance's poll interval will be named as follows: `CONFIGCAT_MY_SDK_POLL_INTERVAL`.

info

The SDK identifier part of the environment variables is always transformed to uppercase and each hyphen (`-`) character is replaced with underscore (`_`).

In case of a YAML file, the **SDK identifier** is the property name set under the `sdks` node.

options.yml

```
sdks:
  my_sdk:
    ...
```

* YAML
* Environment variables

This is the whole YAML section of the SDK specific options.

options.yml

```
sdks:
  my_sdk:
    key: "<your-sdk-key>"
    base_url: "<base-url>"
    poll_interval: 60
    data_governance: <"eu"|"global">
    webhook_signing_key: "<key>"
    webhook_signature_valid_for: 300
    default_user_attributes:
      attribute_key: "<attribute_value>"
    log:
      level: "<error|warn|info|debug>"
    offline:
      log:
        level: "<error|warn|info|debug>"
      enabled: <true|false>
      use_cache: <true|false>
      cache_poll_interval: 5
      local:
        file_path: "./path/local.json"
        polling: <true|false>
        poll_interval: 5
  another_sdk:
    ...
```

These are the SDK specific environment variables.

```
CONFIGCAT_SDKS='{"my_sdk":"<your-sdk-key>","another-sdk":"<another-sdk-key>"}'
CONFIGCAT_MY_SDK_BASE_URL="<base-url>"
CONFIGCAT_MY_SDK_POLL_INTERVAL=30
CONFIGCAT_MY_SDK_DATA_GOVERNANCE="<eu|global>"
CONFIGCAT_MY_SDK_LOG_LEVEL="<error|warn|info|debug>"
CONFIGCAT_MY_SDK_OFFLINE_ENABLED=<true|false>
CONFIGCAT_MY_SDK_OFFLINE_LOG_LEVEL="<error|warn|info|debug>"
CONFIGCAT_MY_SDK_OFFLINE_LOCAL_FILE_PATH="./path/local.json"
CONFIGCAT_MY_SDK_OFFLINE_LOCAL_POLLING=<true|false>
CONFIGCAT_MY_SDK_OFFLINE_LOCAL_POLL_INTERVAL=5
CONFIGCAT_MY_SDK_OFFLINE_USE_CACHE=<true|false>
CONFIGCAT_MY_SDK_OFFLINE_CACHE_POLL_INTERVAL=5
CONFIGCAT_MY_SDK_WEBHOOK_SIGNING_KEY="<key>"
CONFIGCAT_MY_SDK_WEBHOOK_SIGNATURE_VALID_FOR=300
CONFIGCAT_MY_SDK_DEFAULT_USER_ATTRIBUTES='{"attribute_key":"<attribute_value>"}'

CONFIGCAT_ANOTHER_SDK_POLL_INTERVAL=15
...
```

Here's the explanation for each option:

#### SDK Identifier / SDK Key mapping[â](#sdk-identifier--sdk-key-mapping "Direct link to SDK Identifier / SDK Key mapping")

| Option                                                                                                                 | Description                                                                                                    |
| ---------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
my_sdk:
  key: "<your-sdk-key>"
``````
CONFIGCAT_SDKS={"my_sdk":"<your-sdk-key>"}
``` | The [SDK identifier](#sdk-identifier--sdk-key) and the associated [SDK key](https://app.configcat.com/sdkkey). |

#### Additional options for underlying SDKs[â](#additional-options-for-underlying-sdks "Direct link to Additional options for underlying SDKs")

| Option                                                                                                                                                                                                | Default              | Description                                                                                                                                                                                                                                                                                                                                     |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
my_sdk:
  base_url: "<base-url>"
``````
CONFIGCAT_MY_SDK_BASE_URL="<base-url>"
```                                                                                   | ConfigCat's CDN URL. | The CDN base URL (forward proxy, dedicated subscription) from where the SDK should download the `config JSON`.                                                                                                                                                                                                                                  |
| - YAML<br />- Environment variable```
my_sdk:
  poll_interval: 60
``````
CONFIGCAT_MY_SDK_POLL_INTERVAL=60
```                                                                                             | `60`                 | The underlying SDK's polling interval in seconds.                                                                                                                                                                                                                                                                                               |
| - YAML<br />- Environment variable```
my_sdk:
  data_governance: "<global|eu>"
``````
CONFIGCAT_MY_SDK_DATA_GOVERNANCE="<global|eu>"
```                                                                   | `global`             | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md).                                                                                    |
| - YAML<br />- Environment variable```
my_sdk:
  webhook_signing_key: "<key>"
``````
CONFIGCAT_MY_SDK_WEBHOOK_SIGNING_KEY="<key>"
```                                                                       | -                    | The [key used to sign](https://configcat.com/docs/docs/advanced/notifications-webhooks/.md#calculating-signature) the webhook requests sent to the Proxy. [More about the webhook endpoint](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#webhook).                                                                              |
| - YAML<br />- Environment variable```
my_sdk:
  webhook_signature_valid_for: 300
``````
CONFIGCAT_MY_SDK_WEBHOOK_SIGNATURE_VALID_FOR=300
```                                                               | `300`                | The time period (in seconds) within which webhook requests are considered valid. [More about the webhook endpoint](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#webhook).                                                                                                                                                       |
| - YAML<br />- Environment variable```
my_sdk:
  default_user_attributes:
    attribute_key: "<attribute_value>"
``````
CONFIGCAT_MY_SDK_DEFAULT_USER_ATTRIBUTES='{"attribute_key":"<attribute_value>"}'
``` | -                    | Additional SDK specific [default user attributes](#default-user-attributes). The Proxy will use these attributes when an evaluation request doesn't contain a value for the predefined attribute.<br />When there's a default value defined for the same attribute at both SDK and global level, the one at the SDK level will take precedence. |
| - YAML<br />- Environment variable```
my_sdk:
  log:
    level: "<error|warn|info|debug>"
``````
CONFIGCAT_MY_SDK_LOG_LEVEL="<error|warn|info|debug>"
```                                                   | `warn`               | The verbosity level for logging performed by the underlying SDK.<br />Possible values: `error`, `warn`, `info`, or `debug`.                                                                                                                                                                                                                     |

#### Offline Mode[â](#offline-mode "Direct link to Offline Mode")

The following options are specific to the SDK's offline mode. In offline mode, there are two ways the Proxy can provide the underlying SDKs with the data required for feature flag evaluation.

* **Polling a cache**: The Proxy can poll a cache for feature flag changes. It can use a shared cache that an **online** Proxy instance writes to. [More about the cache option](#cache).
* **Watching / polling a file**: The Proxy can watch or poll for modifications in a file that contains data for feature flag evaluation. For watching, the Proxy uses the [fsnotify](https://github.com/fsnotify/fsnotify) library.

| Option                                                                                                                                                                    | Default | Description                                                                                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
my_sdk:
  offline:
    enabled: <true|false>
``````
CONFIGCAT_MY_SDK_OFFLINE_ENABLED=<true|false>
```                                     | `false` | Turns the SDK's offline mode on/off. In offline mode, the SDK will not communicate with the ConfigCat CDN network. Instead, it uses the configured cache or a file as the source of its config JSON. |
| - YAML<br />- Environment variable```
my_sdk:
  offline:
    use_cache: <true|false>
``````
CONFIGCAT_MY_SDK_OFFLINE_USE_CACHE=<true|false>
```                                 | `false` | Controls whether the SDK should use the configured cache as the source of its config JSON. [More about the cache option](#cache).                                                                    |
| - YAML<br />- Environment variable```
my_sdk:
  offline:
    cache_poll_interval: 5
``````
CONFIGCAT_MY_SDK_OFFLINE_CACHE_POLL_INTERVAL=5
```                                   | `5`     | The cache polling interval in seconds. Used only, when the `use_cache` option is `true`. [More about the cache option](#cache).                                                                      |
| - YAML<br />- Environment variable```
my_sdk:
  offline:
    log:
      level: "<error|warn|info|debug>"
``````
CONFIGCAT_MY_SDK_OFFLINE_LOG_LEVEL="<error|warn|info|debug>"
``` | `warn`  | The verbosity level for offline mode-related logging.<br />Possible values: `error`, `warn`, `info` or `debug`.                                                                                      |
| - YAML<br />- Environment variable```
my_sdk:
  offline:
    local:
      file_path: "./path/local.json"
``````
CONFIGCAT_MY_SDK_OFFLINE_LOCAL_FILE_PATH="./path/local.json"
``` | -       | Path to the local file that contains the config JSON to use for feature flag evaluation.                                                                                                             |
| - YAML<br />- Environment variable```
my_sdk:
  offline:
    local:
      polling: <true|false>
``````
CONFIGCAT_MY_SDK_OFFLINE_LOCAL_POLLING=<true|false>
```                   | `false` | Controls whether the Proxy should use polling instead of file system watching for monitoring the local file for changes.                                                                             |
| - YAML<br />- Environment variable```
my_sdk:
  offline:
    local:
      poll_interval: 5
``````
CONFIGCAT_MY_SDK_OFFLINE_LOCAL_POLL_INTERVAL=5
```                             | `5`     | The interval to use for polling the local file in seconds.                                                                                                                                           |

## Default User Attributes[â](#default-user-attributes "Direct link to Default User Attributes")

There's an option to predefine [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) attributes with default values. Whenever the Proxy receives an evaluation request, it will automatically attach these predefined attributes to the request. If the evaluation request contains a different value for an attribute you previously defined, the request's value will take precedence.

* YAML
* Environment variables

```
default_user_attributes:
  attribute_key1: "<attribute_value1>"
  attribute_key2: "<attribute_value2>"
```

```
CONFIGCAT_DEFAULT_USER_ATTRIBUTES='{"attribute_key1":"<attribute_value1>","attribute_key2":"<attribute_value2>"}'
```

info

It's also possible to set default user attributes at the SDK level. See the [SDK options](#additional-options-for-underlying-sdks) section above for more details.

## Global Offline Mode[â](#global-offline-mode "Direct link to Global Offline Mode")

It is possible to turn on offline mode globally for a whole Proxy instance. When it's turned on, each underlying SDK switches to work from the configured [cache](#cache).

| Option                                                                                                                                                | Default | Description                                                                                               |
| ----------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | --------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
offline:
  enabled: <true|false>
``````
CONFIGCAT_OFFLINE_ENABLED=<true|false>
```                                   | `false` | Turns the global offline mode on/off.                                                                     |
| - YAML<br />- Environment variable```
offline:
  cache_poll_interval: 5
``````
CONFIGCAT_OFFLINE_CACHE_POLL_INTERVAL=5
```                                 | `5`     | The cache polling interval in seconds. [More about the cache option](#cache).                             |
| - YAML<br />- Environment variable```
offline:
  log:
    level: "<error|warn|info|debug>"
``````
CONFIGCAT_OFFLINE_LOG_LEVEL="<error|warn|info|debug>"
``` | `warn`  | The verbosity of the offline mode related logs.<br />Possible values: `error`, `warn`, `info` or `debug`. |

note

When an SDK also has its offline option set, that will override what it would inherit from the global offline option.

## Cache[â](#cache "Direct link to Cache")

The Proxy in its default setup stores all the information it needs for feature flag evaluation in memory. This behavior is extendable with an external cache that you can use for pointing the underlying SDKs to your own data storage.

Currently, [Redis](https://redis.io), [MongoDB](https://mongodb.com/), and [DynamoDB](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide) is supported as external cache. The cache key for the underlying SDKs is based on the [SDK Key](#sdk-identifier--sdk-key). This means that multiple Proxy instances using the same SDK key will read/write the same cache entry.

info

The ConfigCat Proxy supports *shared caching*, which means it can feed an external cache that is shared by other ConfigCat SDKs. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

![Shared cache architecture](/docs/assets/proxy/shared_cache.png)

### Redis[â](#redis "Direct link to Redis")

* YAML
* Environment variables

This is the whole YAML section of the Redis specific options.

options.yml

```
cache:
  redis:
    enabled: <true|false>
    db: 0
    user: "<user>"
    password: "<pass>"
    addresses: ["<addr1>", "<addr2>"]
    tls: 
      enabled: <true|false>
      min_version: <1.0|1.1|1.2|1.3>
      server_name: "<server-name>"
      certificates:
        - cert: "<path-to-cert>"
          key: "<path-to-key>"
```

These are the Redis specific environment variables.

```
CONFIGCAT_CACHE_REDIS_ENABLED=<true|false>
CONFIGCAT_CACHE_REDIS_DB=0
CONFIGCAT_CACHE_REDIS_USER="<user>"
CONFIGCAT_CACHE_REDIS_PASSWORD="<pass>"
CONFIGCAT_CACHE_REDIS_ADDRESSES='["<addr1>", "<addr2>"]'
CONFIGCAT_CACHE_REDIS_TLS_ENABLED=<true|false>
CONFIGCAT_CACHE_REDIS_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
CONFIGCAT_CACHE_REDIS_TLS_SERVER_NAME="<server-name>"
CONFIGCAT_CACHE_REDIS_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
```

Here's the explanation for each option:

| Option                                                                                                                                                    | Default              | Description                                                                                                                                                                                                          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
cache:
  redis:
    enabled: <true|false>
``````
CONFIGCAT_CACHE_REDIS_ENABLED=<true|false>
```                           | `false`              | Turns caching into Redis on/off.                                                                                                                                                                                     |
| - YAML<br />- Environment variable```
cache:
  redis:
    addresses: ["<addr1>", "<addr2>"]
``````
CONFIGCAT_CACHE_REDIS_ADDRESSES='["<addr1>", "<addr2>"]'
``` | `["localhost:6379"]` | The addresses of the Redis instances. The Proxy uses [Universal Redis clients](https://redis.uptrace.dev/guide/universal.html), so if the array contains multiple addresses, it will use a `ClusterClient` instance. |
| - YAML<br />- Environment variable```
cache:
  redis:
    db: 0
``````
CONFIGCAT_CACHE_REDIS_DB=0
```                                                           | `0`                  | The selected Redis database.                                                                                                                                                                                         |
| - YAML<br />- Environment variable```
cache:
  redis:
    user: "<user>"
``````
CONFIGCAT_CACHE_REDIS_USER="<user>"
```                                         | -                    | The username for connecting to Redis.                                                                                                                                                                                |
| - YAML<br />- Environment variable```
cache:
  redis:
    password: "<pass>"
``````
CONFIGCAT_CACHE_REDIS_PASSWORD="<pass>"
```                                 | -                    | The password for connecting to Redis.                                                                                                                                                                                |

The following options are for securing the connection to Redis with TLS.

| Option                                                                                                                                                                                                                            | Default | Description                               |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ----------------------------------------- |
| - YAML<br />- Environment variable```
cache:
  redis:
    tls: 
      enabled: <true|false>
``````
CONFIGCAT_CACHE_REDIS_TLS_ENABLED=<true|false>
```                                                                                    | `false` | Turns the TLS connection to Redis on/off. |
| - YAML<br />- Environment variable```
cache:
  redis:
    tls: 
      min_version: <1.0|1.1|1.2|1.3>
``````
CONFIGCAT_CACHE_REDIS_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
```                                                                  | `1.2`   | The minimum TLS version to use.           |
| - YAML<br />- Environment variable```
cache:
  redis:
    tls: 
      server_name: "<server-name>"
``````
CONFIGCAT_CACHE_REDIS_TLS_SERVER_NAME="<server-name>"
```                                                                      | -       | The name of the Redis server.             |
| - YAML<br />- Environment variable```
cache:
  redis:
    certificates:
      - cert: "<path-to-cert>"
        key: "<path-to-key>"
``````
CONFIGCAT_CACHE_REDIS_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
``` | -       | A list of TLS certificate/key pairs.      |

### MongoDB[â](#mongodb "Direct link to MongoDB")

When the configured MongoDB database and collection doesn't exist, the Proxy automatically creates them. The following document structure is used to store the downloaded *config JSON* in BSON format:

```
{ 
  "key": "<The unique cache key determined by the ConfigCat SDK within the Proxy>", 
  "payload": "<The downloaded config JSON in a standardized format determined by the ConfigCat SDK within the Proxy>" 
}
```

At the collection creation, the Proxy also creates a unique index for the `key` field.

* YAML
* Environment variables

This is the whole YAML section of the MongoDB specific options.

options.yml

```
cache:
  mongodb:
    enabled: <true|false>
    url: "<connection-url>"
    database: "<database-name>"
    collection: "<collection-name>"
    tls: 
      enabled: <true|false>
      min_version: <1.0|1.1|1.2|1.3>
      server_name: "<server-name>"
      certificates:
        - cert: "<path-to-cert>"
          key: "<path-to-key>"
```

These are the MongoDB specific environment variables.

```
CONFIGCAT_CACHE_MONGODB_ENABLED=<true|false>
CONFIGCAT_CACHE_MONGODB_URL="<connection-url>"
CONFIGCAT_CACHE_MONGODB_DATABASE="<database-name>"
CONFIGCAT_CACHE_MONGODB_COLLECTION="<collection-name>"
CONFIGCAT_CACHE_MONGODB_TLS_ENABLED=<true|false>
CONFIGCAT_CACHE_MONGODB_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
CONFIGCAT_CACHE_MONGODB_TLS_SERVER_NAME="<server-name>"
CONFIGCAT_CACHE_MONGODB_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
```

Here's the explanation for each option:

| Option                                                                                                                                                  | Default           | Description                                                                                                                                 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
cache:
  mongodb:
    enabled: <true|false>
``````
CONFIGCAT_CACHE_MONGODB_ENABLED=<true|false>
```                     | `false`           | Turns caching into MongoDB on/off.                                                                                                          |
| - YAML<br />- Environment variable```
cache:
  mongodb:
    url: "<connection-url>"
``````
CONFIGCAT_CACHE_MONGODB_URL="<connection-url>"
```                 | `-`               | The [connection url](https://www.mongodb.com/docs/drivers/go/current/fundamentals/connections/connection-guide/#connection-uri) to MongoDB. |
| - YAML<br />- Environment variable```
cache:
  mongodb:
    database: "<database-name>"
``````
CONFIGCAT_CACHE_MONGODB_DATABASE="<database-name>"
```         | `configcat_proxy` | The name of the MongoDB database that the Proxy will use for storing data.                                                                  |
| - YAML<br />- Environment variable```
cache:
  mongodb:
    collection: "<collection-name>"
``````
CONFIGCAT_CACHE_MONGODB_COLLECTION="<collection-name>"
``` | `cache`           | The name of the collection inside the MongoDB database.                                                                                     |

The following options are for securing the connection to MongoDB with TLS.

| Option                                                                                                                                                                                                                                | Default | Description                                 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ------------------------------------------- |
| - YAML<br />- Environment variable```
cache:
  mongodb:
    tls: 
      enabled: <true|false>
``````
CONFIGCAT_CACHE_MONGODB_TLS_ENABLED=<true|false>
```                                                                                    | `false` | Turns the TLS connection to MongoDB on/off. |
| - YAML<br />- Environment variable```
cache:
  mongodb:
    tls: 
      min_version: <1.0|1.1|1.2|1.3>
``````
CONFIGCAT_CACHE_MONGODB_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
```                                                                  | `1.2`   | The minimum TLS version to use.             |
| - YAML<br />- Environment variable```
cache:
  mongodb:
    tls: 
      server_name: "<server-name>"
``````
CONFIGCAT_CACHE_MONGODB_TLS_SERVER_NAME="<server-name>"
```                                                                      | -       | The name of the MongoDB server.             |
| - YAML<br />- Environment variable```
cache:
  mongodb:
    certificates:
      - cert: "<path-to-cert>"
        key: "<path-to-key>"
``````
CONFIGCAT_CACHE_MONGODB_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
``` | -       | A list of TLS certificate/key pairs.        |

### DynamoDB[â](#dynamodb "Direct link to DynamoDB")

By default, the Proxy uses the standard [AWS CLI environment variables](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html) (or a local AWS configuration file) to read the AWS credentials and region for connecting to DynamoDB.

The Proxy doesn't create the DynamoDB table automatically, it must already exist with a partition key called `key`. The data stored in the table has the following attributes:

* `key`: The unique cache key determined by the ConfigCat SDK within the Proxy.
* `payload`: The downloaded *config JSON* in a standardized format determined by the ConfigCat SDK within the Proxy.

The following permissions are needed to read and write the table:

* `GetItem`
* `PutItem`

- YAML
- Environment variables

This is the whole YAML section of the DynamoDB specific options.

options.yml

```
cache:
  dynamodb:
    enabled: <true|false>
    url: "<url>"
    table: "<table-name>"
```

These are the DynamoDB specific environment variables.

```
CONFIGCAT_CACHE_DYNAMODB_ENABLED=<true|false>
CONFIGCAT_CACHE_DYNAMODB_URL="<url>"
CONFIGCAT_CACHE_DYNAMODB_TABLE="<table-name>"
```

Here's the explanation for each option:

| Option                                                                                                                                | Default                 | Description                                                              |
| ------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- | ------------------------------------------------------------------------ |
| - YAML<br />- Environment variable```
cache:
  dynamodb:
    enabled: <true|false>
``````
CONFIGCAT_CACHE_DYNAMODB_ENABLED=<true|false>
``` | `false`                 | Turns caching into DynamoDB on/off.                                      |
| - YAML<br />- Environment variable```
cache:
  dynamodb:
    url: "<url>"
``````
CONFIGCAT_CACHE_DYNAMODB_URL="<url>"
```                   | `-`                     | The DynamoDB service endpoint.                                           |
| - YAML<br />- Environment variable```
cache:
  dynamodb:
    table: "<table-name>"
``````
CONFIGCAT_CACHE_DYNAMODB_TABLE="<table-name>"
``` | `configcat_proxy_cache` | The name of the DynamoDB table that the Proxy will use for storing data. |

## HTTP[â](#http "Direct link to HTTP")

The following HTTP and HTTP Proxy related options are available:

* YAML
* Environment variables

options.yml

```
http:
  enabled: <true|false>
  port: 8050
  log: 
    level: "<error|warn|info|debug>"
  status:
    enabled: <true|false>

http_proxy:
  url: "<proxy-url>"
```

```
CONFIGCAT_HTTP_ENABLED=<true|false>
CONFIGCAT_HTTP_PORT=8050
CONFIGCAT_HTTP_LOG_LEVEL="<error|warn|info|debug>"
CONFIGCAT_HTTP_STATUS_ENABLED=<true|false>

CONFIGCAT_HTTP_PROXY_URL="<proxy-url>"
```

Here's the explanation for each option:

| Option                                                                                                                                          | Default | Description                                                                                                                                                                                                                                                                                                                                                                                    |
| ----------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
http: 
  enabled: <true|false>
``````
CONFIGCAT_HTTP_ENABLED=<true|false>
```                                  | `true`  | Turns the main HTTP server on/off. This server hosts the [CDN proxy](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#cdn-proxy), [API](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#api), [SSE](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#sse), and [webhook](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#webhook) endpoints. |
| - YAML<br />- Environment variable```
http:
  port: 8050
``````
CONFIGCAT_HTTP_PORT=8050
```                                                         | `8050`  | The main HTTP server's port.                                                                                                                                                                                                                                                                                                                                                                   |
| - YAML<br />- Environment variable```
http:
  log:
    level: "<error|warn|info|debug>"
``````
CONFIGCAT_HTTP_LOG_LEVEL="<error|warn|info|debug>"
``` | `warn`  | The verbosity of the HTTP related logs.<br />Possible values: `error`, `warn`, `info`, or `debug`.<br />When `debug` is set, the Proxy will log each HTTP request with additional details.                                                                                                                                                                                                     |
| - YAML<br />- Environment variable```
http:
  status: 
    enabled: <true|false>
``````
CONFIGCAT_HTTP_STATUS_ENABLED=<true|false>
```                | `false` | Turns the hosting of the [status endpoint](https://configcat.com/docs/docs/advanced/proxy/monitoring/.md#status) on the main HTTP port (default: `8050`) on/off.                                                                                                                                                                                                                               |

### HTTP Proxy[â](#http-proxy "Direct link to HTTP Proxy")

| Option                                                                                                              | Default | Description                                                                                       |
| ------------------------------------------------------------------------------------------------------------------- | ------- | ------------------------------------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
http_proxy:
  url: "<proxy-url>"
``````
CONFIGCAT_HTTP_PROXY_URL="<proxy-url>"
``` | -       | The network proxy's URL that the ConfigCat Proxy must use for communication through the internet. |

### Endpoints[â](#endpoints "Direct link to Endpoints")

The options for HTTP endpoints are discussed in the [Endpoints](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md) section.

## TLS[â](#tls "Direct link to TLS")

For securing direct communication to the ConfigCat Proxy, you have the option to set up TLS. Another option would be to use a full-featured reverse proxy that secures the communication and forwards each request to the Proxy.

The following options are for the first scenario where you secure the direct HTTP and gRPC communication.

* YAML
* Environment variables

options.yml

```
tls: 
  enabled: <true|false>
  min_version: <1.0|1.1|1.2|1.3>
  certificates:
    - cert: "<path-to-cert>"
      key: "<path-to-key>"
```

```
CONFIGCAT_TLS_ENABLED=<true|false>
CONFIGCAT_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
CONFIGCAT_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
```

Here's the explanation for each option:

| Option                                                                                                                                                                                                | Default | Description                                                            |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ---------------------------------------------------------------------- |
| - YAML<br />- Environment variable```
tls: 
  enabled: <true|false>
``````
CONFIGCAT_TLS_ENABLED=<true|false>
```                                                                                          | `false` | Turns the enforcement of TLS connection to the ConfigCat Proxy on/off. |
| - YAML<br />- Environment variable```
tls: 
  min_version: <1.0|1.1|1.2|1.3>
``````
CONFIGCAT_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
```                                                                        | `1.2`   | The minimum TLS version to accept.                                     |
| - YAML<br />- Environment variable```
tls:
  certificates:
    - cert: "<path-to-cert>"
      key: "<path-to-key>"
``````
CONFIGCAT_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
``` | -       | A list of TLS certificate/key pairs.                                   |

## Logging[â](#logging "Direct link to Logging")

The Proxy supports the following log levels: `debug`, `info`, `warn`, and `error`. The default is `warn`.

You can specify the log level either globally or for each individual component. If you don't set a component's log level explicitly, it will inherit the global level's value.

* YAML
* Environment variables

```
log:
  level: "<error|warn|info|debug>"
```

```
CONFIGCAT_LOG_LEVEL="<error|warn|info|debug>"
```

info

When the main HTTP server's or gRPC server's log level is set to `debug`, each HTTP request or RPC the Proxy receives is logged with additional details. (duration, response status, etc.)


---

# Auto-assign Users

All new users who sign up with a [verified email domain](https://configcat.com/docs/docs/advanced/team-management/domain-verification/.md) will be automatically added to your organization. Furthermore, you can also set which Organization roles / Product permissions they should get upon on-boarding.

## Steps to configure[â](#steps-to-configure "Direct link to Steps to configure")

* Open your organization's authentication settings on the [ConfigCat Dashboard](https://app.configcat.com/organization/authentication).

  ![Authentication settings](/docs/assets/saml/dashboard/authentication.png)

* Select the domain you want to configure, and click `RE-CONFIGURE` (or just `CONFIGURE` if you haven't configured it yet) under the `Auto-assign status`.

  ![Auto-assign configuration](/docs/assets/saml/dashboard/auto_assign_config_new.png)

* In the dialog that appears, you can select which `Organization roles` and `Product permissions` should be assigned to the newly registered users.

  ![Auto-assign setup](/docs/assets/saml/dashboard/auto_assign_set_new.png)

* When you are ready, just hit `Save`.


---

# Domain Verification

In order to use the [SAML Single Sign-On](https://configcat.com/docs/docs/advanced/team-management/saml/saml-overview/.md) and the [Auto-assign Users](https://configcat.com/docs/docs/advanced/team-management/auto-assign-users/.md) features, you have to verify the ownership of the domain that your company uses for email addresses.

## Steps to verify your domain[â](#steps-to-verify-your-domain "Direct link to Steps to verify your domain")

* Open your organization's authentication settings on the [ConfigCat Dashboard](https://app.configcat.com/organization/authentication).

  ![ConfigCat authentication settings](/docs/assets/saml/dashboard/authentication.png)

* Click `ADD & VERIFY DOMAIN`.

  ![ConfigCat add & verify domain](/docs/assets/saml/dashboard/add_domain_new.png)

* Type your domain name, then click `ADD`

  ![ConfigCat add domain](/docs/assets/saml/dashboard/domain_name_new.png)

* Follow the instructions on the appearing dialog to verify your domain.

  ![ConfigCat verify domain](/docs/assets/saml/dashboard/verify_domain_new.png)


---

# ADFS Identity Provider

Connect ConfigCat with Active Directory Federation Services (ADFS) via SAML.

## Introduction[â](#introduction "Direct link to Introduction")

Each SSO Identity Provider requires specific information to configure a SAML integration. The following guide will walk you through how you can connect ConfigCat with ADFS as a SAML Identity Provider.

## 1. Collect SAML Metadata from ConfigCat[â](#1-collect-saml-metadata-from-configcat "Direct link to 1. Collect SAML Metadata from ConfigCat")

* Open your organization's authentication settings on the [ConfigCat Dashboard](https://app.configcat.com/organization/authentication).

  ![ConfigCat authentication settings](/docs/assets/saml/dashboard/authentication.png)

* Click `ADD SAML IDENTITY PROVIDER`.

  ![ConfigCat Add Identity Provider](/docs/assets/saml/dashboard/add_idp.png)

* Give a name for your Identity Provider, and click `Create`.

  ![ConfigCat Name Identity Provider](/docs/assets/saml/dashboard/adfs_name.png)

* From the next section of the dialog, copy the following values and save them for further use.

  * `Entity ID`

  * `Assertion Consumer Service`

    ![ConfigCat SAML configuration](/docs/assets/saml/dashboard/acs_entity_id_1.png)

## 2. Configure a Relying Party Trust[â](#2-configure-a-relying-party-trust "Direct link to 2. Configure a Relying Party Trust")

* Open the ADFS Management console, and click `Add Relying Party Trust`.

  ![ADFS add relying party trust](/docs/assets/saml/adfs/2_add_relying_party.png)

* Make sure the `Claims aware` option is selected, and click `Start`.

  ![ADFS claims aware](/docs/assets/saml/adfs/3_claims_aware.png)

* Select the `Enter data about this relying party manually` option, and click `Next`.

  ![ADFS manual relying party setup](/docs/assets/saml/adfs/4_manual_metadata.png)

* Type a descriptive `Display name`, and click `Next`.

  ![ADFS display name](/docs/assets/saml/adfs/5_name.png)

* No action required on the `Configure Certificate` pane, click `Next`.

  ![ADFS certificate configuration](/docs/assets/saml/adfs/6_configure_cert.png)

* Select the `Enable support for the SAML 2.0 WebSSO protocol` option, and paste the value of `Assertion Consumer Service` from [Step 1](#1-collect-saml-metadata-from-configcat) into the `Relying party SAML 2.0 SSO service URL` field.<br /><!-- -->Then, Click `Next`.

  ![ADFS acs URL](/docs/assets/saml/adfs/7_acs_url.png)

* Paste the value of `Entity ID` from [Step 1](#1-collect-saml-metadata-from-configcat) into the `Relying party trust identifier` field, and click `Add`.<br /><!-- -->Then, click `Next`.

  ![ADFS entity ID](/docs/assets/saml/adfs/8_add_entity_id.png)

* No action required on the `Choose Access Control Policy` pane, click `Next`.

  ![ADFS Access Control Policy](/docs/assets/saml/adfs/9_access_control_policy.png)

* Review the changes, then click `Next`.

  ![ADFS add trust](/docs/assets/saml/adfs/10_ready_to_add_trust.png)

* The Relying Party Trust is now successfully added, make sure the `Configure claims issuance policy for this application` option is checked, and click `Close`.

  ![ADFS finish configuration](/docs/assets/saml/adfs/11_finish_party.png)

## 3. Configure Claims Issuance Policy[â](#3-configure-claims-issuance-policy "Direct link to 3. Configure Claims Issuance Policy")

* After adding the Relying Party Trust, the following dialog should appear.<br /><!-- -->Click `Add rule`.

  ![ADFS edit claims](/docs/assets/saml/adfs/12_edit_claims.png)

* Select `Send LDAP Attributes as Claims` as the `Claim rule template`, and click `Next`.

  ![ADFS LDAP claims](/docs/assets/saml/adfs/13_ldap_claims.png)

* Apply the following, and click `Finish`.

  * Add a descriptive `Claim rule name`.
  * Select `Active Directory` as `Attribute store`.
  * Select `User-Principal-Name` as `LDAP Attribute`.
  * Select `Name ID` as `Outgoing Claim Type`.

  ![ADFS unc to nameid](/docs/assets/saml/adfs/14_unc_to_nameid.png)

* Click `OK`.

  ![ADFS finish claims](/docs/assets/saml/adfs/15_finish_claims.png)

## 4. Configure ConfigCat with SAML Details from ADFS[â](#4-configure-configcat-with-saml-details-from-adfs "Direct link to 4. Configure ConfigCat with SAML Details from ADFS")

You can choose one of the following options to configure ConfigCat with SAML Identity Provider metadata.

* Metadata URL
* Manual Configuration

- Select `Endpoints`, and copy the URL Path of the `Federation Metadata` endpoint.

  ![ADFS metadata url path](/docs/assets/saml/adfs/metadata_url.png)

- Type the URL into the `Metadata URL` field at ConfigCat in the following format: `https://[ADFS-DOMAIN]/[FEDERATION-METADATA-URL-PATH]`.

  ![ADFS metadata url](/docs/assets/saml/adfs/cc_metadata_new.png)

- Select the **trusted domains**. Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

- Click on `Save`.

* Select `Endpoints`, and save the URL Path of the `SAML 2.0/WS-Federation` endpoint.

  ![ADFS SAML verification](/docs/assets/saml/adfs/login_url.png)

* Select `Certificates`, then select the `Token Signing` certificate, and click `View Certificate`.

  ![ADFS certificates](/docs/assets/saml/adfs/view_cert.png)

* On the `Details` tab click `Copy to File`.

  ![ADFS cert details](/docs/assets/saml/adfs/copy_cert_to_file.png)

* Click `Next`.

  ![ADFS cert wizard](/docs/assets/saml/adfs/cert_wizard.png)

* Select the `Base-64 encoded X.509 (.CER)` option, and click `Next`.

  ![ADFS export base64](/docs/assets/saml/adfs/cert_export_base64.png)

* Browse the location where the certificate should be exported, and click `Next`.

  ![ADFS cert name](/docs/assets/saml/adfs/cert_name.png)

* Click `Finish`.

  ![ADFS finish cert](/docs/assets/saml/adfs/cert_finish.png)

* Click `OK`.

  ![ADFS cert OK](/docs/assets/saml/adfs/cert_export_ok.png)

* Type the `SAML 2.0/WS-Federation` endpoint into the `Sign-on URL` field in the following format: `https://[ADFS-DOMAIN]/[WS-FEDERATION-URL-PATH]`. Then, paste the exported `Token Signing` certificate into the `X.509 Certificate` field.

  ![ConfigCat manual configuration](/docs/assets/saml/adfs/cc_manual_new.png)

* Select the **trusted domains**. Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

* Click on `Save`.

## 5. Sign In[â](#5-sign-in "Direct link to 5. Sign In")

* Go to the [ConfigCat Log In](https://app.configcat.com/auth/login) page, and click `COMPANY ACCOUNT - SAML`.

  ![ConfigCat SAML login](/docs/assets/saml/dashboard/saml_login.png)

* Sign in with your company email address.

  ![ConfigCat SAML company login](/docs/assets/saml/dashboard/company_email.png)

* ConfigCat will redirect you to the ADFS sign in page. Type your credentials, and click `Sign in`.

  ![ADFS log in](/docs/assets/saml/adfs/login.png)

* You should be redirected to ConfigCat signed in with your company account.

## 6. Next Steps[â](#6-next-steps "Direct link to 6. Next Steps")

* Configure the [auto-assignment of users](https://configcat.com/docs/docs/advanced/team-management/auto-assign-users/.md).


---

# Auth0 Identity Provider

Connect ConfigCat with Auth0 via SAML.

## Introduction[â](#introduction "Direct link to Introduction")

Each SSO Identity Provider requires specific information to configure a SAML integration. The following guide will walk you through how you can connect ConfigCat with Auth0 as a SAML Identity Provider.

## 1. Create an Application in Auth0[â](#1-create-an-application-in-auth0 "Direct link to 1. Create an Application in Auth0")

* Log in to [Auth0](https://auth0.com/auth/login), select `Applications` from the menu, then click `Create Application`.

  ![Auth0 applications](/docs/assets/saml/auth0/applications.png)

* Enter a descriptive `Name`, select `Regular Web Applications`, then click `Create`.

  ![Auth0 app name](/docs/assets/saml/auth0/app_name.png)

* Select the `Addons` tab, and click `SAML2`.

  ![Auth0 enable SAML](/docs/assets/saml/auth0/enable_saml.png)

The next step will guide you on how to collect the information required for the appearing configuration dialog.

## 2. Configure SAML for the Auth0 Application[â](#2-configure-saml-for-the-auth0-application "Direct link to 2. Configure SAML for the Auth0 Application")

* Open your organization's authentication settings on the [ConfigCat Dashboard](https://app.configcat.com/organization/authentication).

  ![ConfigCat authentication settings](/docs/assets/saml/dashboard/authentication.png)

* Click `ADD SAML IDENTITY PROVIDER`.

  ![ConfigCat Add Identity Provider](/docs/assets/saml/dashboard/add_idp.png)

* Give a name for your Identity Provider, and click `Create`.

  ![ConfigCat Name Identity Provider](/docs/assets/saml/dashboard/auth0_name.png)

* From the next section of the dialog, copy the following values and paste them into the Auth0 configuration dialog.

  * `Entity ID` -> `"audience": "<entity-id>"` in the configuration JSON below.
  * `Assertion Consumer Service` -> `Application Callback URL`
  * For `Settings`, use the following JSON value:

  ```
  {
    "audience": "<paste-your-entity-id-here>",
    "signatureAlgorithm": "rsa-sha256",
    "nameIdentifierProbes": [
      "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"
    ]
  }
  ```

  ![ConfigCat ACS configuration](/docs/assets/saml/dashboard/acs_entity_id_1.png) ![Auth0 ACS configuration](/docs/assets/saml/auth0/auth0_acs_eid.png)

  * Click on `Save`.

## 3. Configure ConfigCat with SAML Details from Auth0[â](#3-configure-configcat-with-saml-details-from-auth0 "Direct link to 3. Configure ConfigCat with SAML Details from Auth0")

You can choose one of the following options to configure ConfigCat with SAML Identity Provider metadata.

* Metadata URL
* Manual Configuration

- Copy the URL of `Identity Provide metadata`.

  ![Auth0 metadata URL](/docs/assets/saml/auth0/metadata_url.png)

- Paste the copied value into the `Metadata URL` field at ConfigCat.

  ![ConfigCat metadata URL](/docs/assets/saml/auth0/cc_metadata_url_new.png)

- Select the **trusted domains**. Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

- Click on `Save`.

* Copy the value of `Identity Provider Login URL` and download the `Identity Provider Certificate`, then paste them into the Configuration dialog at ConfigCat.

  ![Auth0 manual configuration](/docs/assets/saml/auth0/manual.png)![ConfigCat manual configuration](/docs/assets/saml/auth0/cc_manual_new.png)

* Select the **trusted domains**. Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

* Click on `Save`.

## 4. Sign In[â](#4-sign-in "Direct link to 4. Sign In")

* Go to the [ConfigCat Log In](https://app.configcat.com/auth/login) page, and click `COMPANY ACCOUNT - SAML`.

  ![ConfigCat SAML login](/docs/assets/saml/dashboard/saml_login.png)

* Sign in with your company email address assigned to the Auth0 application.

  ![ConfigCat SAML company login](/docs/assets/saml/dashboard/company_email.png)

* ConfigCat will redirect you to Auth0's sign in page. Type your credentials, and click `Continue`.

  ![Auth0 login](/docs/assets/saml/auth0/login.png)

* You should be redirected to ConfigCat signed in with your company account.

## 5. Next Steps[â](#5-next-steps "Direct link to 5. Next Steps")

* Configure the [auto-assignment of users](https://configcat.com/docs/docs/advanced/team-management/auto-assign-users/.md).


---

# Entra ID (Azure AD) Identity Provider

Connect ConfigCat with Entra ID via SAML.

## Introduction[â](#introduction "Direct link to Introduction")

Each SSO Identity Provider requires specific information to configure a SAML integration. The following guide will walk you through how you can connect ConfigCat with Entra ID as a SAML Identity Provider.

## 1. Create an Entra ID Enterprise Application[â](#1-create-an-entra-id-enterprise-application "Direct link to 1. Create an Entra ID Enterprise Application")

* Log in to the [Azure Portal](https://portal.azure.com/), go to the `Entra ID` resource, and select `Enterprise applications`.

  ![Entra ID enterprise applications](/docs/assets/saml/azure-ad/eapplications.png)

* Click on `New application`.

  ![Entra ID new application](/docs/assets/saml/azure-ad/new_app.png)

* Click on `Create your own application`.

  ![Entra ID create own application](/docs/assets/saml/azure-ad/create_app.png)

* Enter a descriptive `App name`, select the `Integrate any other application you don't find in the gallery (Non-gallery)` option, then click `Create`.

  ![Entra ID app name](/docs/assets/saml/azure-ad/app_name.png)

* On the `Manage` section of the application, select `Single sign-on`, then select `SAML`.

  ![Entra ID enable SAML](/docs/assets/saml/azure-ad/enable_saml.png)

The next step will guide you on how to collect the information required for Configuring SAML in the application.

## 2. Configure SAML for the Azure Enterprise Application[â](#2-configure-saml-for-the-azure-enterprise-application "Direct link to 2. Configure SAML for the Azure Enterprise Application")

* Open your organization's authentication settings on the [ConfigCat Dashboard](https://app.configcat.com/organization/authentication).

  ![ConfigCat authentication settings](/docs/assets/saml/dashboard/authentication.png)

* Click `ADD SAML IDENTITY PROVIDER`.

  ![ConfigCat Add Identity Provider](/docs/assets/saml/dashboard/add_idp.png)

* Give a name for your Identity Provider, and click `Create`.

  ![ConfigCat Name Identity Provider](/docs/assets/saml/dashboard/aad_name.png)

* From the next section of the dialog, copy the following values and paste them into the Enterprise application.

  * `Entity ID` -> `Identifier (Entity ID)`

  * `Assertion Consumer Service` -> `Reply URL (Assertion Consumer Service URL)`

    ![ConfigCat SAML configuration](/docs/assets/saml/dashboard/acs_entity_id_1.png) ![Entra ID URL configuration](/docs/assets/saml/azure-ad/saml_urls.png) ![Entra ID URLs](/docs/assets/saml/azure-ad/aad_acs_eid.png)

## 3. Configure ConfigCat with SAML Details from Azure[â](#3-configure-configcat-with-saml-details-from-azure "Direct link to 3. Configure ConfigCat with SAML Details from Azure")

You can choose one of the following options to configure ConfigCat with SAML Identity Provider metadata.

* Metadata URL
* Manual Configuration

- Copy the value of `App Federation Metadata Url`.

  ![Entra ID metadata URL](/docs/assets/saml/azure-ad/metadata_url.png)

- Paste the copied value into the `Metadata URL` field at ConfigCat.

  ![ConfigCat Entra ID metadata URL](/docs/assets/saml/azure-ad/cc_metadata_new.png)

- Select the **trusted domains**. Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

- Click on `Save`.

* Copy the value of `Login URL` and download the `Certificate (Base64)`, then paste them into the Configuration dialog at ConfigCat.

  ![Entra ID metadata login URL](/docs/assets/saml/azure-ad/metadata_logon.png)![Entra ID metadata certificate](/docs/assets/saml/azure-ad/metadata_cert.png)![ConfigCat Entra ID manual configuration](/docs/assets/saml/azure-ad/cc_manual_new.png)

* Select the **trusted domains**. Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

* Click on `Save`.

## 4. Assign Users to the Enterprise Application[â](#4-assign-users-to-the-enterprise-application "Direct link to 4. Assign Users to the Enterprise Application")

To let users authenticate via SAML, you need to assign individual users or groups to the Enterprise application.

* Select `Users and groups` on the `Manage` section of the menu.

  ![Entra ID users and groups](/docs/assets/saml/azure-ad/users_groups.png)

* Click `Add user/group`, then select the users or groups you want to assign.

  ![Entra ID add user/group](/docs/assets/saml/azure-ad/add_users.png)

## 5. Sign In[â](#5-sign-in "Direct link to 5. Sign In")

* Go to the [ConfigCat Log In](https://app.configcat.com/auth/login) page, and click `COMPANY ACCOUNT - SAML`.

  ![ConfigCat SAML login](/docs/assets/saml/dashboard/saml_login.png)

* Sign in with your company email address assigned to the Enterprise application.

  ![ConfigCat SAML company login](/docs/assets/saml/dashboard/company_email.png)

* ConfigCat will redirect you to Microsoft's sign in page. Type your credentials for sign-in.

  ![Entra ID sign in page](/docs/assets/saml/azure-ad/login.png)

* You should be redirected to ConfigCat signed in with your company account.

## 6. Next Steps[â](#6-next-steps "Direct link to 6. Next Steps")

* Configure [User provisioning (SCIM)](https://configcat.com/docs/docs/advanced/team-management/scim/scim-overview/.md)
* or configure the [auto-assignment of users](https://configcat.com/docs/docs/advanced/team-management/auto-assign-users/.md) if you don't want to provision your users with your Identity Provider.


---

# Cloudflare Zero Trust

Connect ConfigCat with Cloudflare Zero Trust via SAML.

## Introduction[â](#introduction "Direct link to Introduction")

Each SSO Identity Provider requires specific information to configure a SAML integration. The following guide will walk you through how you can connect ConfigCat with Cloudflare Zero Trust as a SAML Identity Provider.

## 1. Create an Application in Cloudflare[â](#1-create-an-application-in-cloudflare "Direct link to 1. Create an Application in Cloudflare")

* Log in to [CloudFlare](https://dash.cloudflare.com/), go to the Zero Trust Dashboard, and select `Applications` under the `Access` menu.<br /><!-- -->Then click on `Add an application`.

  ![Create Cloudflare application](/docs/assets/saml/cloudflare/add_app.png)

* Select `SaaS`.

  ![Select SaaS](/docs/assets/saml/cloudflare/add_saas.png)

* Enter a descriptive name in the `Application` field.

  ![Cloudflare app name](/docs/assets/saml/cloudflare/app_name.png)

The next step will guide you on how to collect the information required for the appearing configuration section.

## 2. Configure SAML for the Cloudflare Application[â](#2-configure-saml-for-the-cloudflare-application "Direct link to 2. Configure SAML for the Cloudflare Application")

* Open your organization's authentication settings on the [ConfigCat Dashboard](https://app.configcat.com/organization/authentication).

  ![ConfigCat authentication settings](/docs/assets/saml/dashboard/authentication.png)

* Click `ADD SAML IDENTITY PROVIDER`.

  ![ConfigCat Add Identity Provider](/docs/assets/saml/dashboard/add_idp.png)

* Give a name for your Identity Provider, and click `Create`.

  ![ConfigCat Name Identity Provider](/docs/assets/saml/dashboard/cf_name.png)

* From the next section of the dialog, copy the following values and paste them into the Cloudflare application.

  * `Entity ID` -> `Entity ID`

  * `Assertion Consumer Service` -> `Assertion Consumer Service URL`

    ![ConfigCat SAML configuration](/docs/assets/saml/dashboard/acs_entity_id_1.png) ![Cloudflare SAML url EID](/docs/assets/saml/cloudflare/meta.png)

* Set the `Name ID Format` to `Email`.

  ![Cloudflare SAML name id](/docs/assets/saml/cloudflare/name_id.png)

* Click `Next` at the bottom of the page.

## 3. Configure policies for the Cloudflare Application[â](#3-configure-policies-for-the-cloudflare-application "Direct link to 3. Configure policies for the Cloudflare Application")

To let users authenticate via SAML, you need to assign groups to the Cloudflare application.

* Give a name for the Cloudflare Application's policy and check those groups that you want to assign.

  ![Cloudflare SAML name id](/docs/assets/saml/cloudflare/policy.png)

* Click `Next` at the bottom of the page.

## 4. Configure ConfigCat with SAML Details from Cloudflare[â](#4-configure-configcat-with-saml-details-from-cloudflare "Direct link to 4. Configure ConfigCat with SAML Details from Cloudflare")

* Copy the value of `SSO endpoint` and `Public key` fields.

  ![Cloudflare SSO url cert](/docs/assets/saml/cloudflare/cert_sign_on_url.png)

* On the ConfigCat Dashboard, select the `3. Set up ConfigCat` step, click `Manual Configuration`, then paste the copied values into the appearing fields.

  * `SSO endpoint` -> `Sign-on URL`

  * `Public key` -> `X.509 Certificate`

    ![ConfigCat manual configuration](/docs/assets/saml/dashboard/cf_manual.png)

## 5. Select Trusted Domains on the SAML Configuration Dialog[â](#5-select-trusted-domains-on-the-saml-configuration-dialog "Direct link to 5. Select Trusted Domains on the SAML Configuration Dialog")

* Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

* Click `Save`.

## 5. Sign In[â](#5-sign-in "Direct link to 5. Sign In")

* Go to the [ConfigCat Log In](https://app.configcat.com/auth/login) page, and click `COMPANY ACCOUNT - SAML`.

  ![ConfigCat SAML login](/docs/assets/saml/dashboard/saml_login.png)

* Sign in with your company email address assigned to the Cloudflare application.

  ![ConfigCat SAML company login](/docs/assets/saml/dashboard/company_email.png)

* ConfigCat will redirect you to Cloudflare's sign in page.

  ![Cloudflare sign in](/docs/assets/saml/cloudflare/login_page.png)

## 6. Next Steps[â](#6-next-steps "Direct link to 6. Next Steps")

* Configure the [auto-assignment of users](https://configcat.com/docs/docs/advanced/team-management/auto-assign-users/.md).


---

# Google Identity Provider

Connect ConfigCat with Google via SAML.

## Introduction[â](#introduction "Direct link to Introduction")

Each SSO Identity Provider requires specific information to configure a SAML integration. The following guide will walk you through how you can connect ConfigCat with Google as a SAML Identity Provider.

## 1. Create a SAML Application in Google[â](#1-create-a-saml-application-in-google "Direct link to 1. Create a SAML Application in Google")

* Log in to [Google Admin console](https://admin.google.com/), select `Apps` from the side menu, then select `Web and mobile apps`.

  ![Google applications](/docs/assets/saml/google/applications.png)

* Click `Add App`, then select `Add custom SAML app`.

  ![Google add SAML app](/docs/assets/saml/google/add_saml_app.png)

* Enter a descriptive `App name`, then click `CONTINUE`.

  ![Google SAML app name](/docs/assets/saml/google/app_name.png)

The next step will guide you on how to configure ConfigCat with appearing information.

## 2. Configure ConfigCat with SAML Details from Google[â](#2-configure-configcat-with-saml-details-from-google "Direct link to 2. Configure ConfigCat with SAML Details from Google")

* Copy the value of `SSO URL` and `Certificate` fields and save them for further use.

  ![Google SSO url](/docs/assets/saml/google/meta_url_cert.png)

* Open your organization's authentication settings on the [ConfigCat Dashboard](https://app.configcat.com/organization/authentication).

  ![ConfigCat authentication settings](/docs/assets/saml/dashboard/authentication.png)

* Click `ADD SAML IDENTITY PROVIDER`.

  ![ConfigCat Add Identity Provider](/docs/assets/saml/dashboard/add_idp.png)

* Give a name for your Identity Provider, and click `Create`.

  ![ConfigCat Name Identity Provider](/docs/assets/saml/dashboard/google_name.png)

* Select the `3. Set up ConfigCat` step, click `Manual Configuration`, then paste the copied values into the appearing fields.

  ![ConfigCat manual configuration](/docs/assets/saml/google/cc_manual_new.png)

* Click `CONTINUE` on the Google App configuration.

  ![Google SSO app configuration](/docs/assets/saml/google/meta_continue.png)

The next step will guide you on how to configure the Google App with details provided by ConfigCat.

## 3. Configure the Google Application with Service Provider Details from ConfigCat[â](#3-configure-the-google-application-with-service-provider-details-from-configcat "Direct link to 3. Configure the Google Application with Service Provider Details from ConfigCat")

* Select `2. Set up your Identity Provider` step on the ConfigCat configuration dialog, and copy the following values to the Google App.

  * `Entity ID` -> `Entity ID`

  * `Assertion Consumer Service` -> `ACS URL`

    ![Google acs url](/docs/assets/saml/dashboard/acs_entity_id_2.png)

  * Make sure the `Signed response` option is checked.

  * Select `EMAIL` as `Name ID format`.

  * Select `Basic Information > Primary email` as `Name ID`.

  * Click `CONTINUE`.

    ![Google meta data](/docs/assets/saml/google/google_acs_eid.png)

* Click `FINISH`.

  ![Google attribute mapping](/docs/assets/saml/google/attribute_mapping.png)

## 4. Select Trusted Domains on the SAML Configuration Dialog[â](#4-select-trusted-domains-on-the-saml-configuration-dialog "Direct link to 4. Select Trusted Domains on the SAML Configuration Dialog")

* Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

* Click `Save`.

## 5. Give Users Access to the Application[â](#5-give-users-access-to-the-application "Direct link to 5. Give Users Access to the Application")

* Click on `View details` under the `User access` section.

  ![Google user access](/docs/assets/saml/google/user_access.png)

* Select `ON for everyone`, then click `SAVE`.

  ![Google ON for everyone](/docs/assets/saml/google/on_for_everyone.png)

## 6. Sign In[â](#6-sign-in "Direct link to 6. Sign In")

* Go to the [ConfigCat Log In](https://app.configcat.com/auth/login) page, and click `COMPANY ACCOUNT - SAML`.

  ![ConfigCat SAML login](/docs/assets/saml/dashboard/saml_login.png)

* Sign in with your company email address used in Google.

  ![ConfigCat SAML company login](/docs/assets/saml/dashboard/company_email.png)

* ConfigCat will redirect you to Google's sign in page. Type your credentials, and sign in.

  ![Google SSO login](/docs/assets/saml/google/login.png)

* You should be redirected to ConfigCat signed in with your company account.

## 7. Next Steps[â](#7-next-steps "Direct link to 7. Next Steps")

* Configure the [auto-assignment of users](https://configcat.com/docs/docs/advanced/team-management/auto-assign-users/.md).


---

# Okta Identity Provider

Connect ConfigCat with Okta via SAML.

## Introduction[â](#introduction "Direct link to Introduction")

Each SSO Identity Provider requires specific information to configure a SAML integration. The following guide will walk you through how you can connect ConfigCat with Okta as a SAML Identity Provider.

## 1. Create an Application in Okta[â](#1-create-an-application-in-okta "Direct link to 1. Create an Application in Okta")

* Log in to [Okta](https://login.okta.com/), go to the admin Dashboard, and select `Applications`.

  ![Okta applications](/docs/assets/saml/okta/applications.png)

* Click on `Create App Integration`.

  ![Okta create app](/docs/assets/saml/okta/create_app.png)

* Select `SAML 2.0` as the Sign-in method.

  ![Okta select SAML](/docs/assets/saml/okta/select_saml.png)

* Enter a descriptive `App name`, then click `Next`.

  ![Okta app name](/docs/assets/saml/okta/app_name.png)

The next step will guide you on how to collect the information required for the appearing `Configure SAML` section.

## 2. Configure SAML for the Okta Application[â](#2-configure-saml-for-the-okta-application "Direct link to 2. Configure SAML for the Okta Application")

* Open your organization's authentication settings on the [ConfigCat Dashboard](https://app.configcat.com/organization/authentication).

  ![ConfigCat authentication settings](/docs/assets/saml/dashboard/authentication.png)

* Click `ADD SAML IDENTITY PROVIDER`.

  ![ConfigCat Add Identity Provider](/docs/assets/saml/dashboard/add_idp.png)

* Give a name for your Identity Provider, and click `Create`.

  ![ConfigCat Name Identity Provider](/docs/assets/saml/dashboard/okta_name.png)

* From the next section of the dialog, copy the following values and paste them into the Okta application.

  * `Entity ID` -> `Audience URI (SP Entity ID)`

  * `Assertion Consumer Service` -> `Single sign on URL`

    ![ConfigCat SAML configuration](/docs/assets/saml/dashboard/acs_entity_id_1.png) ![Okta SAML url EID](/docs/assets/saml/okta/okta_acs_eid.png)

* Set the `Name ID format` to `EmailAddress`, then click `Next`.

  ![Okta SAML nameid](/docs/assets/saml/okta/okta_name_id.png)

* Select `I'm an Okta customer adding an internal app`. Complete the form with any comments and click `Finish`.

  ![Okta SAML feedback](/docs/assets/saml/okta/feedback.png)

## 3. Configure ConfigCat with SAML Details from Okta[â](#3-configure-configcat-with-saml-details-from-okta "Direct link to 3. Configure ConfigCat with SAML Details from Okta")

You can choose one of the following options to configure ConfigCat with SAML Identity Provider metadata.

* Metadata URL
* Manual Configuration

- Select the `Sign On` tab.

  ![Okta sign on tab](/docs/assets/saml/okta/metadata_url1.png)

- Copy the URL of `View IdP metadata`.

  ![Okta metadata url](/docs/assets/saml/okta/metadata_url2.png)

- Paste the copied value into the `Metadata URL` field at ConfigCat.

  ![ConfigCat metadata url](/docs/assets/saml/okta/cc_metadata_new.png)

- Select the **trusted domains**. Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

- Click on `Save`.

* Select the `Sign On` tab, and click on `View SAML setup instructions`.

  ![Okta SAML setup](/docs/assets/saml/okta/manual_setup.png)

* Copy the value of the `Identity Provider Single Sign-On URL` and `X.509 Certificate` fields and paste them into the Configuration dialog at ConfigCat.

  ![Okta manual configuration](/docs/assets/saml/okta/manual.png)![ConfigCat manual configuration](/docs/assets/saml/okta/manual_cc_new.png)

* Select the **trusted domains**. Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

* Click on `Save`.

## 4. Assign Users to Okta Application[â](#4-assign-users-to-okta-application "Direct link to 4. Assign Users to Okta Application")

To let users authenticate via SAML, you need to assign individual users or groups to the Okta application.

* Select the `Assignments` tab, and select either the `Assign to People` or the `Assign to Groups` option.

  ![Okta assign to groups](/docs/assets/saml/okta/assign.png)

## 5. Sign In[â](#5-sign-in "Direct link to 5. Sign In")

* Go to the [ConfigCat Log In](https://app.configcat.com/auth/login) page, and click `COMPANY ACCOUNT - SAML`.

  ![ConfigCat SAML login](/docs/assets/saml/dashboard/saml_login.png)

* Sign in with your company email address assigned to the Okta application.

  ![ConfigCat SAML company login](/docs/assets/saml/dashboard/company_email.png)

* ConfigCat will redirect you to Okta's sign in page. Type your credentials, and click `Sign In`.

  ![Okta sign in](/docs/assets/saml/okta/okta_sign_in.png)

* You should be redirected to ConfigCat signed in with your company account.

## 6. Next Steps[â](#6-next-steps "Direct link to 6. Next Steps")

* Configure [User provisioning (SCIM)](https://configcat.com/docs/docs/advanced/team-management/scim/scim-overview/.md)
* or configure the [auto-assignment of users](https://configcat.com/docs/docs/advanced/team-management/auto-assign-users/.md) if you don't want to provision your users with your Identity Provider.


---

# OneLogin Identity Provider

Connect ConfigCat with OneLogin via SAML.

## Introduction[â](#introduction "Direct link to Introduction")

Each SSO Identity Provider requires specific information to configure a SAML integration. The following guide will walk you through how you can connect ConfigCat with OneLogin as a SAML Identity Provider.

## 1. Create an Application in OneLogin[â](#1-create-an-application-in-onelogin "Direct link to 1. Create an Application in OneLogin")

* Log in to [OneLogin](https://app.onelogin.com/login), and select `Applications`.

  ![OneLogin applications](/docs/assets/saml/onelogin/applications.png)

* Click on `Add App`.

  ![OneLogin add application](/docs/assets/saml/onelogin/add_app.png)

* Type `SAML` into the search bar, and select `SAML Custom Connector (Advanced)`.

  ![OneLogin select APP](/docs/assets/saml/onelogin/select_app.png)

* Enter a descriptive `Display Name`, then click `Save`.

  ![OneLogin app name](/docs/assets/saml/onelogin/app_name.png)

The next step will guide you on how to collect the information required for the appearing `Configuration` page.

## 2. Configure SAML for the OneLogin Application[â](#2-configure-saml-for-the-onelogin-application "Direct link to 2. Configure SAML for the OneLogin Application")

* Open your organization's authentication settings on the [ConfigCat Dashboard](https://app.configcat.com/organization/authentication).

  ![ConfigCat authentication settings](/docs/assets/saml/dashboard/authentication.png)

* Click `ADD SAML IDENTITY PROVIDER`.

  ![ConfigCat Add Identity Provider](/docs/assets/saml/dashboard/add_idp.png)

* Give a name for your Identity Provider, and click `Create`.

  ![ConfigCat Name Identity Provider](/docs/assets/saml/dashboard/onelogin_name.png)

* From the next section of the dialog, copy the following values and paste them into the OneLogin application's configuration page.

  * Copy `Entity ID` and paste it into the `Audience (EntityID)` field.

  * Copy `Assertion Consumer Service` and paste it into the `ACS (Consumer) URL` field.

  * Paste the same `Assertion Consumer Service` into the `ACS (Consumer) URL Validator` field in regex format e.g. `^https:\/\/dashboard\-api\.configcat\.com\/saml\/acs\/08db93fc\-c4e7\-441f\-834f\-17c804385c29$`

    ![ConfigCat SAML configuration](/docs/assets/saml/dashboard/acs_entity_id_1.png) ![OneLogin SML configuration](/docs/assets/saml/onelogin/onelogin_acs_eid.png)

* Scroll down a bit on this page and configure the following:

  * Select `OneLogin` as `SAML Initiator`.

  * Select `Email` as `SAML nameID format`.

  * Select `Both` as `SAML signature element`.

    ![OneLogin SAML initiator](/docs/assets/saml/onelogin/saml_config2.png)

* Select `Parameters`, and make sure there is a `NameID value` entry under the `SAML Custom Connector (Advanced) Field` with the value `Email`.

  ![OneLogin nameID](/docs/assets/saml/onelogin/name_id.png)

* Select `SSO`, then select `SHA-256` as `SAML Signature Algorithm`.

  ![OneLogin SAML Signature Algorithm](/docs/assets/saml/onelogin/sso_signing_algo.png)

## 3. Configure ConfigCat with SAML Details from OneLogin[â](#3-configure-configcat-with-saml-details-from-onelogin "Direct link to 3. Configure ConfigCat with SAML Details from OneLogin")

You can choose one of the following options to configure ConfigCat with SAML Identity Provider metadata.

* Metadata URL
* Manual Configuration

- Select `SSO`, and copy the value of `Issuer URL`.

  ![OneLogin SAML SSO configuration](/docs/assets/saml/onelogin/sso_config.png)

- Paste the copied value into the `Metadata URL` field at ConfigCat.

  ![ConfigCat SAML configuration](/docs/assets/saml/onelogin/cc_meta_url_new.png)

- Select the **trusted domains**. Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

- Click on `Save`.

* Select `SSO`, and copy the value of `SAML 2.0 Endpoint (HTTP)`, then click `View Details` under the `X.509 Certificate`.

  ![OneLogin manual SAML SSO configuration](/docs/assets/saml/onelogin/sso_config_manual.png)

* Copy the value of the `X.509 Certificate`.

  ![OneLogin certificate](/docs/assets/saml/onelogin/cert.png)

* Paste the value of the `SAML 2.0 Endpoint (HTTP)` and the `X.509 Certificate` into the Configuration dialog at ConfigCat

  ![ConfigCat manual configuration](/docs/assets/saml/onelogin/cc_manual_new.png)

* Select the **trusted domains**. Only user accounts from trusted domains can login with SAML SSO. You can bind multiple verified domains to a SAML Identity Provider.

  ![Select trusted domains](/docs/assets/saml/dashboard/select_trusted_domains.png)

* Click on `Save`.

## 4. Assign the OneLogin Application to Users[â](#4-assign-the-onelogin-application-to-users "Direct link to 4. Assign the OneLogin Application to Users")

To let users authenticate via SAML, you need to assign the newly created application to them.

* Select `Users`.

  ![OneLogin users](/docs/assets/saml/onelogin/users.png)

* Select the user you want to get access to the application.

  ![OneLogin select user](/docs/assets/saml/onelogin/select_user.png)

* Select `Applications`, then click on the `+` sign.

  ![OneLogin add application](/docs/assets/saml/onelogin/add_application.png)

* Select your application, then click `Continue`.

  ![OneLogin application added](/docs/assets/saml/onelogin/app_added.png)

* Click `Save`.

  ![OneLogin application details](/docs/assets/saml/onelogin/app_details.png)

## 5. Sign In[â](#5-sign-in "Direct link to 5. Sign In")

* Go to the [ConfigCat Log In](https://app.configcat.com/auth/login) page, and click `COMPANY ACCOUNT - SAML`.

  ![ConfigCat SAML login](/docs/assets/saml/dashboard/saml_login.png)

* Sign in with your company email address assigned to the OneLogin application.

  ![ConfigCat SAML company login](/docs/assets/saml/dashboard/company_email.png)

* ConfigCat will redirect you to OneLogin's sign in page. Type your credentials, and click `Continue`.

  ![OneLogin SAML login](/docs/assets/saml/onelogin/login.png)

* You should be redirected to ConfigCat signed in with your company account.

## 6. Next Steps[â](#6-next-steps "Direct link to 6. Next Steps")

* Configure [User provisioning (SCIM)](https://configcat.com/docs/docs/advanced/team-management/scim/scim-overview/.md)
* or configure the [auto-assignment of users](https://configcat.com/docs/docs/advanced/team-management/auto-assign-users/.md) if you don't want to provision your users with your Identity Provider.


---

# SAML SSO Overview

This section describes how you can enable SAML Single Sign-On (SSO) for your organization in ConfigCat.

SAML SSO allows your team members to sign up and log in to ConfigCat via their company accounts using your own Identity Provider (IdP).

Go to the [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page to set up SAML SSO. You need to be an organization admin to do this.

## Prerequisites[â](#prerequisites "Direct link to Prerequisites")

* [Verified domain](https://configcat.com/docs/docs/advanced/team-management/domain-verification/.md)
  <br />
  <!-- -->
  In order to configure SAML, you have to verify the ownership of the domain that your company uses for email addresses. This step is required because, at the beginning of the login process, we use the user's email domain to select the appropriate SAML Identity Provider.
* Identity Provider that supports SAML 2.0

## Configure a SAML Identity Provider[â](#configure-a-saml-identity-provider "Direct link to Configure a SAML Identity Provider")

We tested and validated the following SAML Identity Providers:

* [Entra ID (Azure AD)](https://configcat.com/docs/docs/advanced/team-management/saml/identity-providers/azure-ad/.md)
* [ADFS](https://configcat.com/docs/docs/advanced/team-management/saml/identity-providers/adfs/.md)
* [Google](https://configcat.com/docs/docs/advanced/team-management/saml/identity-providers/google/.md)
* [Okta](https://configcat.com/docs/docs/advanced/team-management/saml/identity-providers/okta/.md)
* [Auth0](https://configcat.com/docs/docs/advanced/team-management/saml/identity-providers/auth0/.md)
* [OneLogin](https://configcat.com/docs/docs/advanced/team-management/saml/identity-providers/onelogin/.md)
* [Cloudflare Zero Trust](https://configcat.com/docs/docs/advanced/team-management/saml/identity-providers/cloudflare/.md)

info

Other Identity Providers might also work with ConfigCat, if they support the SAML 2.0 protocol.

## Supported SAML flows[â](#supported-saml-flows "Direct link to Supported SAML flows")

* Identity Provider initiated SSO
* Service Provider initiated SSO

## SAML Requirements[â](#saml-requirements "Direct link to SAML Requirements")

These are the Identity Provider configuration requirements for ConfigCat:

* **Name ID**: ConfigCat only supports the email address in the `NameID` field.
* **Signature algorithm**: ConfigCat only supports the `RSA-SHA256` signature algorithm.


---

# (Beta) User Provisioning (SCIM) with Entra ID (Azure AD)

info

**Beta Feature**: SCIM provisioning is in public beta. It has been thoroughly tested with various Identity Providers. We're now collecting feedback from real-world usage to fine-tune the experience. Share your feedback [here](https://configcat.com/support).

## Introduction[â](#introduction "Direct link to Introduction")

Each Identity Provider requires specific information to configure a SCIM integration. The following guide will walk you through how you can connect ConfigCat with Entra ID via SCIM.

## 1. Create an Entra ID Enterprise Application[â](#1-create-an-entra-id-enterprise-application "Direct link to 1. Create an Entra ID Enterprise Application")

info

If you already configured your organization to use Entra ID as a SAML provider, you can use the existing Entra ID Enterprise application and skip to the [next step](#2-configure-provisioning-scim-for-the-azure-enterprise-application).

* Log in to the [Azure Portal](https://portal.azure.com/), go to the `Entra ID` resource, select `Enterprise applications`, and click on `New application`.

  ![Entra ID enterprise applications](/docs/assets/scim/entra_id/new_application.png)

* Click on `Create your own application`.

  ![Entra ID create own application](/docs/assets/scim/entra_id/create_application.png)

* Enter a descriptive `App name`, select the `Integrate any other application you don't find in the gallery (Non-gallery)` option, then click `Create`.

  ![Entra ID app name](/docs/assets/scim/entra_id/app_name.png)

The next step will guide you on how to setup Entra ID to synchronize your Identity Provider users and Identity Provider groups to ConfigCat.

## 2. Configure Provisioning (SCIM) for the Azure Enterprise Application[â](#2-configure-provisioning-scim-for-the-azure-enterprise-application "Direct link to 2. Configure Provisioning (SCIM) for the Azure Enterprise Application")

* On the `Manage` section of the application, select `Provisioning`, then click on `New Configuration`.

  ![Entra ID new SCIM configuration](/docs/assets/scim/entra_id/new_config.png)

* Gather the `SCIM URL` and the `Token` from the [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page in ConfigCat.

  ![SCIM URL and token](/docs/assets/scim/dashboard/token_generate_url.png) ![SCIM token](/docs/assets/scim/dashboard/token.png)

* Add the `SCIM URL` as the `Tenant URL` and the `Token` as the `Secret token` on the New provisioning configuration page in Azure. Click on the `Create` button.

  ![Entra ID SCIM URL and token](/docs/assets/scim/entra_id/scim_meta.png)

* Select the `Provisioning` menu and in the Mappings, configure the mapping for Users and Groups.

  ![Entra ID SCIM mappings](/docs/assets/scim/entra_id/mappings.png)

  * Mapping for Users: Configure only the following mappings and remove all other mappings if there are any.

    | Provisioning Attribute | Microsoft Entra ID Attribute                                 |
    | ---------------------- | ------------------------------------------------------------ |
    | externalId             | objectId                                                     |
    | userName               | userPrincipalName                                            |
    | displayName            | displayName                                                  |
    | active                 | Switch(\[IsSoftDeleted], , "False", "True", "True", "False") |

    ![Entra ID SCIM User mappings](/docs/assets/scim/entra_id/user_mappings2.png)

  * Mapping for Groups: Configure only the following mappings and remove all other mappings if there are any.

    | Provisioning Attribute | Microsoft Entra ID Attribute |
    | ---------------------- | ---------------------------- |
    | externalId             | objectId                     |
    | displayName            | displayName                  |
    | members                | members                      |

    ![Entra ID SCIM Group mappings](/docs/assets/scim/entra_id/group_mappings.png)

## 3. Assign Users/Groups to the Enterprise Application[â](#3-assign-usersgroups-to-the-enterprise-application "Direct link to 3. Assign Users/Groups to the Enterprise Application")

To start user provisioning with Entra ID, you need to assign groups to the Enterprise application.

* Select `Users and groups` on the `Manage` section of the menu, and click `Add user/group`. Then, you can select the groups you want to assign.

  ![Entra ID users and groups](/docs/assets/scim/entra_id/add_user.png)

caution

In ConfigCat, you can assign permissions only to groups that are synchronized from your Identity Provider, therefore it's important to select groups for synchronization rather than individual users.

## 4. Start provisioning[â](#4-start-provisioning "Direct link to 4. Start provisioning")

* Go to the `Overview` page of the provisioning configuration and click on `Start provisioning`.

  ![Entra ID start provisioning](/docs/assets/scim/entra_id/start_provisioning.png)

* Wait until the first provisioning is finished, and you should see each synced group and user on ConfigCat's [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page.

## 5. Next Steps[â](#5-next-steps "Direct link to 5. Next Steps")

* Continue with [assigning ConfigCat permissions to the synced groups](https://configcat.com/docs/docs/advanced/team-management/scim/scim-overview/.md#groups).


---

# (Beta) User Provisioning (SCIM) with Okta

info

**Beta Feature**: SCIM provisioning is in public beta. It has been thoroughly tested with various Identity Providers. We're now collecting feedback from real-world usage to fine-tune the experience. Share your feedback [here](https://configcat.com/support).

## Introduction[â](#introduction "Direct link to Introduction")

Each Identity Provider requires specific information to configure a SCIM integration. The following guide will walk you through how you can connect ConfigCat with Okta via SCIM.

## 1. Create an Application in Okta[â](#1-create-an-application-in-okta "Direct link to 1. Create an Application in Okta")

* Log in to [Okta](https://login.okta.com/), go to the admin Dashboard, select `Applications`, and click on `Create App Integration`.

  ![Okta applications](/docs/assets/scim/okta/create_app.png)

* Select `SAML 2.0` as the Sign-in method.

  ![Okta select SAML](/docs/assets/scim/okta/app_type.png)

* Enter a descriptive `App name`, then click `Next`.

  ![Okta app name](/docs/assets/scim/okta/app_name.png)

The next step will guide you on how to collect the information required for the appearing `Configure SAML` section.

## 2. Configure SAML authentication for the Okta Application[â](#2-configure-saml-authentication-for-the-okta-application "Direct link to 2. Configure SAML authentication for the Okta Application")

* Follow our [SAML configuration guide for Okta](https://configcat.com/docs/docs/advanced/team-management/saml/identity-providers/okta/.md#2-configure-saml-for-the-okta-application).

## 3. Configure Provisioning (SCIM) for the Okta Application[â](#3-configure-provisioning-scim-for-the-okta-application "Direct link to 3. Configure Provisioning (SCIM) for the Okta Application")

* Click on `Edit` at the `App Settings`.

  ![Okta edit app settings](/docs/assets/scim/okta/edit_settings.png)

* Check the `Enable SCIM provisioning` checkbox, and hit `Save`.

  ![Okta enable provisioning](/docs/assets/scim/okta/enable_provisioning.png)

* Gather the `SCIM URL` and the `Token` from the [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page in ConfigCat.

  ![SCIM URL and token](/docs/assets/scim/dashboard/token_generate_url.png) ![SCIM token](/docs/assets/scim/dashboard/token.png)

* Select the `Provisioning` tab and click on the `Edit` button.

  ![Okta edit provisioning](/docs/assets/scim/okta/edit_provisioning.png)

* On the `SCIM Connection` section configure the following:

  * Add the `SCIM URL` from the ConfigCat Dashboard as the `SCIM connector base URL`.

  * Set the `Unique identifier field for users` field to `email`.

  * Check the following `Supported provisioning actions`:

    <!-- -->

    * `Push New Users`
    * `Push Profile Updates`
    * `Push Groups`

  * Select the `HTTP Header` as the `Authentication Mode`.

  * Set the `Token` from the ConfigCat Dashboard as the `HTTP Header Authorization`.

  * Click on `Save`.
    <br />
    <br />

  ![Okta SCIM connection](/docs/assets/scim/okta/scim_connection.png)

* Select the `To App` menu item and click on `Edit`.

  ![Okta To App edit](/docs/assets/scim/okta/to_app_edit.png)

* Check the `Create Users`, `Update User Attributes`, and `Deactivate Users` checkboxes, and hit `Save`.

  ![Okta To App save](/docs/assets/scim/okta/to_app_save.png)

## 4. Assign Users/Groups to Okta Application[â](#4-assign-usersgroups-to-okta-application "Direct link to 4. Assign Users/Groups to Okta Application")

To select users for synchronization into ConfigCat, you have to assign their Okta group to the Application.

* Select the `Assignments` tab, click on the `Assign` dropdown, and select `Assign to Groups`.

  ![Okta assign groups](/docs/assets/scim/okta/assign_groups.png)

* Click the `Assign` button on those groups whose members you want to sync to ConfigCat.

  ![Okta assign group](/docs/assets/scim/okta/assign_group.png)

The above action starts the synchronization of the selected users but not their groups.

caution

Okta does not support using the same Okta group for assignments and for syncing group-member relations. You need to create a separate group that is used exclusively for syncing group-member relations. These groups are called `Push Groups` in Okta.

To learn more, see [Okta's documentation about Push Groups](https://help.okta.com/en-us/content/topics/users-groups-profiles/usgp-about-group-push.htm).

To enable group syncing, create separate groups for the users that you want to sync and add these new groups to the application as `Push Groups`.

* Go to the `Push Groups` tab, click on the `Push Groups` dropdown, and select `Find groups by name`.

  ![Okta push groups](/docs/assets/scim/okta/push_groups.png)

* Select the group that you want to push, and click on the `Save` button.

  ![Okta add push group](/docs/assets/scim/okta/add_push_group.png)

* Make sure that the created push group's status is active.

  ![Okta push group active](/docs/assets/scim/okta/push_group_active.png)

* You should see each synced group and user on ConfigCat's [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page.

## 5. Next Steps[â](#5-next-steps "Direct link to 5. Next Steps")

* Continue with [assigning ConfigCat permissions to the synced groups](https://configcat.com/docs/docs/advanced/team-management/scim/scim-overview/.md#groups).


---

# (Beta) User Provisioning (SCIM) with Onelogin

info

**Beta Feature**: SCIM provisioning is in public beta. It has been thoroughly tested with various Identity Providers. We're now collecting feedback from real-world usage to fine-tune the experience. Share your feedback [here](https://configcat.com/support).

## Introduction[â](#introduction "Direct link to Introduction")

Each Identity Provider requires specific information to configure a SCIM integration. The following guide will walk you through how you can connect ConfigCat with OneLogin via SCIM.

## 1. Create an Application in OneLogin[â](#1-create-an-application-in-onelogin "Direct link to 1. Create an Application in OneLogin")

* Log in to [OneLogin](https://app.onelogin.com/login), select `Applications` and click on `Add App`.

  ![OneLogin add application](/docs/assets/scim/onelogin/add_app.png)

* Type `SCIM V2` into the search bar, and select `SCIM Provisioner with SAML (SCIM v2 Core)`.

  ![OneLogin select APP](/docs/assets/scim/onelogin/select_app.png)

* Enter a descriptive `Display Name`, then click `Save`.

  ![OneLogin app name](/docs/assets/scim/onelogin/app_name.png)

## 2. Configure Provisioning (SCIM) for the OneLogin Application[â](#2-configure-provisioning-scim-for-the-onelogin-application "Direct link to 2. Configure Provisioning (SCIM) for the OneLogin Application")

* Gather the `SCIM URL` and the `Token` from the [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page in ConfigCat.

  ![SCIM URL and token](/docs/assets/scim/dashboard/token_generate_url.png) ![SCIM token](/docs/assets/scim/dashboard/token.png)

* On the OneLogin application's Configuration tab's API Connection section configure the following:

  * Add the `SCIM URL` from the ConfigCat Dashboard as the `SCIM Base URL`.
  * Add the `Token` from the ConfigCat Dashboard as the `SCIM Bearer Token`.
  * Add the following as the `SCIM JSON Template`:
    <!-- -->
    ```
    {
      "schemas": [
        "urn:ietf:params:scim:schemas:core:2.0:User"
      ],
      "userName": "{$parameters.scimusername}",
      "displayName": "{$user.display_name}"
    }
    ```

  ![OneLogin API Connection configuration](/docs/assets/scim/onelogin/configuration.png)

* On the OneLogin application's Provisioning tab configure the following:

  * Check the `Enable provisioning` checkbox.
  * Configure the other checkboxes and dropdowns based on your preference.

  ![OneLogin enable provisioning](/docs/assets/scim/onelogin/enable_provisioning.png)

* On the OneLogin application's Parameters tab configure the following:

  * Set Email as the `scimusername` parameter.
    <!-- -->
    ![OneLogin SCIM username parameter](/docs/assets/scim/onelogin/scimusername.png)
  * Check the `Include in User Provisioning` checkbox at the Groups parameter.
    <!-- -->
    ![OneLogin Groups parameter](/docs/assets/scim/onelogin/include_in_provisioning.png)

* On the OneLogin application's Rules tab configure which property should OneLogin send as the user's groups to ConfigCat.<br /><!-- -->In the following example we are mapping the user's role in OneLogin as the synced group to ConfigCat, but you can create other mappings as well based on your preference. Read more about mappings [here](https://developers.onelogin.com/scim/create-app#scimruleexamples).

  * Click on te `Add rule` button.
  * Specify a `Name` for your rule.
  * Select `Set Groups in ##YOUR APPLICATION NAME##` at the `Actions`.
  * Select `role` at the `For each` dropdown.
  * Set `.*` for the `with value that matches` input.

  ![OneLogin group mapping rule](/docs/assets/scim/onelogin/rule.png)

## 3. Assign users manually to the application or set access based on policies/roles on the OneLogin application's Access tab.[â](#3-assign-users-manually-to-the-application-or-set-access-based-on-policiesroles-on-the-onelogin-applications-access-tab "Direct link to 3. Assign users manually to the application or set access based on policies/roles on the OneLogin application's Access tab.")

![OneLogin assign groups/roles/users](/docs/assets/scim/onelogin/assign.png)

## 4. Start provisioning[â](#4-start-provisioning "Direct link to 4. Start provisioning")

* On the OneLogin application's Configuration tab click on the `Enable` button to start the provisioning.

  ![OneLogin enable provisioning](/docs/assets/scim/onelogin/enable.png)

* Wait until the first provisioning is finished, and you should see each synced group and user on ConfigCat's [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page.

## 5. Next Steps[â](#5-next-steps "Direct link to 5. Next Steps")

* Continue with [assigning ConfigCat permissions to the synced groups](https://configcat.com/docs/docs/advanced/team-management/scim/scim-overview/.md#groups).


---

# (Beta) User provisioning (SCIM) Overview

info

**Beta Feature**: SCIM provisioning is in public beta. It has been thoroughly tested with various Identity Providers. We're now collecting feedback from real-world usage to fine-tune the experience. Share your feedback [here](https://configcat.com/support).

This section describes how to configure *User provisioning (SCIM)* for your Organization in ConfigCat.

User provisioning (SCIM) allows you to synchronize users and groups from your Identity Provider into a ConfigCat Organization. ConfigCat permissions then can be assigned to each synchronized Identity Provider (IdP) group, which puts their members to the selected *ConfigCat permission groups* upon a user provisioning process.

Go to the **User provisioning (SCIM)** section on the [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page to set up User provisioning. You need to be an Organization Admin to do this.

## Prerequisites[â](#prerequisites "Direct link to Prerequisites")

* [Verified domain](https://configcat.com/docs/docs/advanced/team-management/domain-verification/.md): You must verify your company's email domain before you can set up User provisioning (SCIM).
* Identity Provider that supports SCIM 2.0.

## Supported SCIM 2.0 endpoints[â](#supported-scim-20-endpoints "Direct link to Supported SCIM 2.0 endpoints")

Check our User Provisioning (SCIM) API documentation [here](https://configcat.com/docs/docs/api/scim/configcat-user-provisioning-scim-api/.md).

## 1. Connect your Identity Provider[â](#connect "Direct link to 1. Connect your Identity Provider")

To enable SCIM in your Identity Provider, you have to let it know where ConfigCat accepts SCIM endpoint calls and how these calls are authorized. Configcat displays this information on its [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page, where you'll find:

* The **SCIM URL**: this points your Identity Provider to ConfigCat's SCIM endpoint.
* The **Token**: use this to authorize requests with the `Bearer:` scheme.

To get the bearer token, go to the **1. Connect your Identity Provider** section and click the **+ GENERATE** button.

![ConfigCat SCIM token generate](/docs/assets/scim/dashboard/token_generate.png)

A dialog will open. Copy the *token* and save it somewhere safe - you'll need it when setting up your Identity Provider.

![ConfigCat SCIM token](/docs/assets/scim/dashboard/token.png)

Go to your Identity Provider, and connect it to ConfigCat. To help, we prepared specific Identity Provider-specific instructions for a few providers. These instructions are tested and validated:

* [Entra ID (Azure AD)](https://configcat.com/docs/docs/advanced/team-management/scim/identity-providers/entra-id/.md)
* [Okta](https://configcat.com/docs/docs/advanced/team-management/scim/identity-providers/okta/.md)
* [OneLogin](https://configcat.com/docs/docs/advanced/team-management/scim/identity-providers/onelogin/.md)

info

Other Identity Providers might also work with ConfigCat, if they support the SCIM 2.0 protocol.

info

Connecting your Identity Provider and starting to sync users and groups is safe. It won't affect your current ConfigCat users or permissions until you click the `START PROVISIONING` button later.

## 2. Assign ConfigCat permissions to Identity Provider groups[â](#groups "Direct link to 2. Assign ConfigCat permissions to Identity Provider groups")

After the first successful sync, your Identity Provider groups will show up in ConfigCat. You will find them in the **2. Assign ConfigCat permissions to Identity Provider groups** section of the [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page. For each Identity Provider group, you can assign ConfigCat permissions by clicking their gear icon.

![ConfigCat SCIM assign permissions](/docs/assets/scim/dashboard/assign_permissions.png)

A dialog will appear. Choose which ConfigCat permissions should be assigned to the members of the given *Identity Provider group*.

![ConfigCat SCIM select permissions](/docs/assets/scim/dashboard/select_permissions.png)

### How permission conflicts are resolved[â](#how-permission-conflicts-are-resolved "Direct link to How permission conflicts are resolved")

An Identity Provider user can be a member of multiple Identity Provider groups. ConfigCat's user provisioning merges the associated permissions using the following rules:

* If a user is in an Identity Provider group linked to ConfigCat's Organization Admin role, they get Organization Admin access in ConfigCat.
* If a user is in an Identity Provider group linked to ConfigCat's Billing Manager role, they get Billing Manager access in ConfigCat.
* If none of the groups have the Organization Admin role, ConfigCat merges the product-level permissions from each Identity Provider group.

If there's a conflict, the group with a higher priority (listed first) wins. You can change the Identity Provider group priorities by clicking the **Set priority** button above the **Identity Provider groups** table.

![ConfigCat SCIM set group priority](/docs/assets/scim/dashboard/set_priority.png)

You can change the group order by dragging and dropping items in the list.

![ConfigCat SCIM change group priority](/docs/assets/scim/dashboard/change_priority.png)

### Example[â](#example "Direct link to Example")

A ConfigCat Organization has 2 *products*. Each product has its own *permission groups*:

| Product   | Permission groups                   |
| --------- | ----------------------------------- |
| Product A | Readers, Writers, Developers        |
| Product B | Readers, Product owners, Developers |

There are 5 *Identity Provider groups* that are marked for synchronization with the following permissions:

| Priority | Identity Provider group | Associated ConfigCat Permissions           |
| -------- | ----------------------- | ------------------------------------------ |
| 1.       | Owners                  | Organziation Admin, Billing Manager        |
| 2.       | Billing Managers        | Organziation Admin                         |
| 3.       | Developers              | Product A/Developers, Product B/Developers |
| 4.       | Product owners          | Product B/Product owners                   |
| 5.       | Readers                 | Product A/Readers, Product B/Readers       |

Based on their *Identity Provider groups*, users will get the following *ConfigCat permissions*:

| Identity Provider user | Identity Provider groups  | Calculated ConfigCat Permissions                      | Explanation                                                                                                                                                                                                                                                                   |
| ---------------------- | ------------------------- | ----------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| John                   | Owners, Readers           | Organization Admin, Billing Manager                   | John is in the Owners group (IdP), which gives him the Organization Admin role in ConfigCat. Product-level permissions from the Readers group (IdP) are skipped because ConfigCat's Organization Admin role automatically grants all permissions in all *ConfigCat products*. |
| Jane                   | Readers, Billing Managers | Billing Manager, Product A/Readers, Product B/Readers | Jane gets both Billing Manager and product-level permissions. These are merged from her groups.                                                                                                                                                                               |
| Peter                  | Readers, Developers       | Product A/Developers, Product B/Developers            | As both the Readers and Developers Identity Provider groups have associated permissions to the same Products, the permissions will be merged based on the Identity Provider group's priority.                                                                                 |

## 3. Start and stop provisioning for Identity Provider users[â](#users "Direct link to 3. Start and stop provisioning for Identity Provider users")

After successful synchronization, Identity Provider users will appear in ConfigCat. You can find them in the **3. Start and stop provisioning for Identity Provider users** section of the [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page. You can see and control their provisioning state there.

Some of those users are new to ConfigCat, and they do not yet have a ConfigCat account under your Organization. When they are synced from your Identity Provider, ConfigCat does not create accounts for them right away.

Other users might already have a ConfigCat account in your Organization - either because they joined earlier or accepted a previous invite. For them, ConfigCat permissions won't change automatically. You must start provisioning manually to apply the permissions linked to their Identity Provider groups.

![Start/Stop provisioning](/docs/assets/scim/dashboard/start_stop_provisioning.png)

### What is managed by the provisioning?[â](#what-is-managed-by-the-provisioning "Direct link to What is managed by the provisioning?")

After you start provisioning an Identity Provider user, the following user-related attributes are managed:

* **ConfigCat permissions**: with a fine-tuned provisioning configuration, you can manage your team members' *ConfigCat permissions* through your Identity Provider.
* **ConfigCat account's email address**: if an *Identity Provider user*'s email address has been changed in the Identity Provider, the associated *ConfigCat user*'s email address will be changed too. The *ConfigCat user* will be able to log in with the new email address only.
* **ConfigCat account's full name**: the *Identity Provider user*'s full name is synchronized from the Identity Provider and overwrites the *ConfigCat user*'s full name property.
* **Soft delete**: if an *Identity Provider user* is soft deleted in the Identity Provider, the *ConfigCat account* will be disabled and cannot be used.
* **Hard delete**: if an *Identity Provider user* is hard deleted in the Identity Provider, the *ConfigCat account* will be removed from your ConfigCat Organization entirely, but the *ConfigCat account* will not be deleted for a while.

### Start/stop provisioning[â](#startstop-provisioning "Direct link to Start/stop provisioning")

In the **Identity Provider users** table, the last column has a start/stop button. This indicates whether an *Identity Provider user*'s provisioning is active or not. As long as the provisioning is not started, you can adjust your Identity Provider groups' provisioning configurations till the permissions for your Identity Provider users match the expected permissions without having to worry about changing existing users' permissions. The provisioning status column can give you an overview what will happen if you start the provisioning for the *Identity Provider user*.

If you start the provisioning for an *Identity Provider user* who already has a *ConfigCat account*, the provisioning will overwrite the account's current *ConfigCat permissions*. If you start the provisioning for an *Identity Provider user* who doesn't have a *ConfigCat account yet*, their *ConfigCat permissions* will be set based on the permissions you see in the **Identity Provider user** table after they sign up for a *ConfigCat account*.

info

After you start provisioning an *Identity Provider user*, you won't be able to set their ConfigCat permissions manually on the [Team Members](https://app.configcat.com/product/members/) or [Members & Roles](https://app.configcat.com/organization/members/) pages. Their *ConfigCat permissions* can only be changed by modifying their group memberships in your Identity Provider, or by changing the *ConfigCat permissions* associated with those groups in the **Identity Provider groups table** in ConfigCat.

If you stop provisioning an Identity Provider user, it will disconnect that user's *ConfigCat permissions* from their *Identity Provider group memberships*. Modifying provisioning permissions or changing the user's *Identity Provider groups* will not change their *ConfigCat permissions*. If you want to manage the *ConfigCat permissions* of that user, you should use ConfigCat's [Team Members](https://app.configcat.com/product/members/) and [Members & Roles](https://app.configcat.com/organization/members/) pages.<br /><!-- -->After starting the provisioning again, *ConfigCat permissions* may change according to the actual provisioning configurations.

### Provisioning status[â](#provisioning-status "Direct link to Provisioning status")

The **Provisioning status** column in the **Identity Provider users** table shows important information about the provisioning state.

#### Identity Provider user with an unverified email domain[â](#identity-provider-user-with-an-unverified-email-domain "Direct link to Identity Provider user with an unverified email domain")

User Provisioning synchronizes all *Identity Provider users* from your Identity Provider regardless of whether the *Identity Provider user*'s email domain is a verified email domain in ConfigCat. **Provisioning status** displays an error message if the Identity Provider user's email address is not from a *verified domain*. You will not be able to start provisioning for that Identity Provider user until you verify the email domain in ConfigCat.

#### Identity Provider user without a ConfigCat account[â](#identity-provider-user-without-a-configcat-account "Direct link to Identity Provider user without a ConfigCat account")

The Provisioning status shows you information about what permissions will be assigned and what will happen to the Identity Provider user after a successful sign up.<br />**Provisioning status** displays a warning if an Identity Provider user will have no permissions in ConfigCat after signup. This allows you to fine-tune your provisioning configuration.

#### Identity Provider user with an already existing ConfigCat account[â](#identity-provider-user-with-an-already-existing-configcat-account "Direct link to Identity Provider user with an already existing ConfigCat account")

If the provisioning of the *Identity Provider user* is stopped, the **provisioning status** shows what will happen to the *ConfigCat account* when you start provisioning again. After the provisioning is started again, the **provisioning status** can take the following values:

* **Provisioning is active**: all permissions and user properties match your Identity Provider configuration for the *Identity Provider user*.
* **Provisioning is in progress**: the provisioning process is running in the background. For a short time, you can see the **provisioning is in progress** status. This happens when your Identity Provider sends updates to ConfigCat about the *Identity Provider user*, or when you modify your *Identity Provider group*'s provisioning permissions.

## 4. Provision future users automatically[â](#auto-provisioning "Direct link to 4. Provision future users automatically")

By default, after the Identity Provider synchronizes a new Identity Provider user to ConfigCat, the Identity Provider user will be in the **provisioning stopped** state. This allows you time to verify your configuration/permissions and adjust your settings if needed.<br /><!-- -->After you are confident that the provisioning works as expected, you can turn ON the **Provision future users automatically** toggle. This will immediately start the provisioning for newly synchronized Identity Provider users.

![Auto provisioning for new users](/docs/assets/scim/dashboard/auto_provisioning.png)

### Disable Domain Auto-assign[â](#disable-domain-auto-assign "Direct link to Disable Domain Auto-assign")

ConfigCat has a few other features that might interfere with *User provisioning*:

* **Domain verification**: after verifying your domain name in ConfigCat, all users signing up with that domain will be added to your Organization.
* **Auto-assign**: the *auto-assign feature* assigns initial permissions to those users automatically.

If you want to allow only provisioned users into your ConfigCat Organization, you should deactivate the auto-assign feature in **Domain verification & Auto-assign users** panel.

![Disable domain auto-assign](/docs/assets/scim/dashboard/disable_auto_assign.png)

## 5. Review ConfigCat users who are not managed by user provisioning[â](#not-managed "Direct link to 5. Review ConfigCat users who are not managed by user provisioning")

Even after configuring *user provisioning* and synchronizing *Identity Provider users* from your Identity Provider, there might be *ConfigCat accounts* in your Organization that are not managed by *user provisioning*.

There can always be exceptions, but in most cases:

* Either they no longer need access to ConfigCat - you may want to delete them.
* Or you want to manage them through your Identity Provider - in this case, go to your Identity Provider and set up sync for them.
* Or you want to keep them this way - in this case, you need to manage their ConfigCat permissions on the [Team Members](https://app.configcat.com/product/members/) or [Members & Roles](https://app.configcat.com/organization/members/) page.


---

# SSO (Single Sign-On)

You can let your organization members sign in to ConfigCat using 3rd party SSO (Single Sign-On) providers.

Go to the [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page to set up 3rd party SSO. You need to be an organization admin to do this.

Currently supported SSO providers:

* Google
* Entra ID (Azure AD)
* GitHub
* Bitbucket
* Microsoft

Under the `Login / Sign up methods` section you can enable / disable SSO providers one by one. These are organization level preferences. Your selection will be applied to all members of your organization.

## SAML SSO[â](#saml-sso "Direct link to SAML SSO")

SAML SSO allows your team members to sign up and log in to ConfigCat via their company accounts using your own Identity Provider (IdP) Read more about [SAML SSO](https://configcat.com/docs/docs/advanced/team-management/saml/saml-overview/.md).


---

# Team Management Basics

*Team members* are your friends, colleagues, and clients who work on the same *Product*. You can invite as many of them to your *Product* as you want.

The following guide provides an overview of how to manage your team in ConfigCat.

## Invite others to collaborate[â](#invite-others-to-collaborate "Direct link to Invite others to collaborate")

1. Click the `Invite Team Members` button on the sidebar.
2. Enter the invitees' email addresses (comma separated list).
3. Select a *Permission group* and click on **SEND INVITATION EMAIL**.
4. An invitation will be sent to the invitees' email addresses.

You can modify their permission group later anytime.

## Managing Team Members (Product level)[â](#managing-team-members-product-level "Direct link to Managing Team Members (Product level)")

You can manage your team on the [Team Members page](https://app.configcat.com/product/members) of every Product.

*Organization Admins* have unlimited access to every Product under an Organization, their permissions can't be edited under the product. [Read more on Organization Management](https://configcat.com/docs/docs/organization/.md)

## Managing Team Members (Organization level)[â](#managing-team-members-organization-level "Direct link to Managing Team Members (Organization level)")

Only *Organization Admins* can manage Organization level permissions.

To manage organization members, go to: [Organization Members & Roles page.](https://app.configcat.com/organization/members)

## Permissions & Permission Groups (Product level)[â](#permissions--permission-groups-product-level "Direct link to Permissions & Permission Groups (Product level)")

*Permission groups* are collections of permissions. They help you organize the permissions into groups that are meaningful to you. You can control your *Team members'* permissions by assigning them to *Permission groups*.

Manage *Permission Groups* on the [Permission Groups page](https://app.configcat.com/product/permission-groups) of every Product.

## 2FA (Two-Factor Authentication)[â](#2fa-two-factor-authentication "Direct link to 2FA (Two-Factor Authentication)")

Enforce 2FA for your team members to increase the security of your organization. Go to the [Authentication & Provisioning](https://app.configcat.com/organization/authentication/) page to enable 2FA. You need to be an organization admin to do this.

## Auto-assign users[â](#auto-assign-users "Direct link to Auto-assign users")

All new users who sign up with a [verified email domain](https://configcat.com/docs/docs/advanced/team-management/domain-verification/.md) can be automatically added to your organization. Furthermore, you can also set which Organization roles / Product permissions they should get upon on-boarding.

Read more about [Auto-assigning users](https://configcat.com/docs/docs/advanced/team-management/auto-assign-users/.md).

## SSO (Single Sign-On)[â](#sso-single-sign-on "Direct link to SSO (Single Sign-On)")

You can let your organization members sign in to ConfigCat using 3rd party SSO (Single Sign-On) providers.

Read more about [SSO](https://configcat.com/docs/docs/advanced/team-management/single-sign-on-sso/.md).


---

# Troubleshooting

The following issues were reported by customers. We've collected what we've learned and provided the possible solutions below.

## Long response times and connection issues[â](#long-response-times-and-connection-issues "Direct link to Long response times and connection issues")

First, check the [Service Status Monitor](https://status.configcat.com) to see if ConfigCat is up and running or if there is any planned maintenance.

### General SDK Checklist[â](#general-sdk-checklist "Direct link to General SDK Checklist")

1. Make sure you're using the latest version of the ConfigCat SDK.
2. Check if you've configured the [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) functionality correctly.
3. Singleton: We strongly recommend using the ConfigCat SDK as a Singleton object. Initializing the SDK multiple times can cause serious performance issues in production. If you need to use multiple SDK Keys in the same application, create only one *ConfigCat Client* per SDK Key.
4. Are you using the proper polling mode for your use case? Details on polling modes in the [SDK Docs](https://configcat.com/docs/docs/sdk-reference/overview/.md).
5. Are you using the right polling interval for `Auto Polling`? Too frequent polling will increase your network traffic. Please check the [SDK Docs](https://configcat.com/docs/docs/sdk-reference/overview/.md).
6. In `Manual Polling` mode, are you calling `forceRefresh()` in your code as frequently as needed? Excessive refreshes will increase your network traffic.
7. You can try one of our lightweight sample applications to rule out local issues. Find in the [repository of each SDK](https://github.com/configcat).

### Network Checklist[â](#network-checklist "Direct link to Network Checklist")

caution

Please, **do not load test** the ConfigCat production infrastructure without our consent.

1. You can check response times manually by navigating to `https://cdn.configcat.com/ping.txt` and opening your browser's network tab.
2. Does the machine/server running your code have access to the above address?
3. You might need to whitelist the following addresses in your firewall: `cdn.configcat.com`, `cdn-eu.configcat.com`, `cdn-global.configcat.com`.

***

## Too many requests error in Angular[â](#too-many-requests-error-in-angular "Direct link to Too many requests error in Angular")

This issue can occur due to Angular's Hot Module Replacement functionality during development when you have a class that wraps the ConfigCat SDK running in Auto Polling mode and the wrapper class is edited. The Hot Module Replacement may reinitialize the whole class without stopping the ConfigCat SDK's Auto Polling timer in the old, replaced module.

We consider this a rare edge case that only happens during development.

## Python Auto Polling issue with uWSGI web server[â](#python-auto-polling-issue-with-uwsgi-web-server "Direct link to Python Auto Polling issue with uWSGI web server")

The Python SDK's Auto Polling mode runs its polling job in a `threading.Thread` object. If you run your application behind an uWSGI web server, the Auto Polling mode may not work as expected because the uWSGI web server disables Python's threading by default. Please [enable threading](https://uwsgi-docs.readthedocs.io/en/latest/Options.html#enable-threads) or switch to another polling mode in this case.


---

# FAQ - Frequently Asked Questions

A collection of frequently asked questions.

## General[â](#general "Direct link to General")

### Learning how ConfigCat can work with your product[â](#learning-how-configcat-can-work-with-your-product "Direct link to Learning how ConfigCat can work with your product")

You can book a free demo session [here](https://calendly.com/configcat/demo), where we'll show you how to use ConfigCat and answer any questions you have.

## Billing, Payments & Subscriptions[â](#billing-payments--subscriptions "Direct link to Billing, Payments & Subscriptions")

### What if I exceed the [config JSON download](https://configcat.com/docs/docs/requests/.md) limit of my plan?[â](#what-if-i-exceed-the-config-json-download-limit-of-my-plan "Direct link to what-if-i-exceed-the-config-json-download-limit-of-my-plan")

Don't worry, we will keep serving your data and feature flags. Someone from our team will contact you to discuss your options. You can always check your Usage & Quota [here](https://app.configcat.com/organization/usage).

### Where can I find and download my invoices?[â](#where-can-i-find-and-download-my-invoices "Direct link to Where can I find and download my invoices?")

All the invoices we've issued are available for download from the [Billing & Invoices page](https://app.configcat.com/organization/billing). You need to have the [Billing Manager](https://configcat.com/docs/docs/organization/.md#billing-manager-role) role to access the Billing & Invoices page.

### Is it possible to pay via wire transfer?[â](#is-it-possible-to-pay-via-wire-transfer "Direct link to Is it possible to pay via wire transfer?")

Using a credit card via the ConfigCat Dashboard is the preferred way of payment, but a wire transfer is also an option for larger subscription plans. [Contact us](https://configcat.com/support/) directly for more details.

### How do I upgrade / downgrade my billing plan?[â](#how-do-i-upgrade--downgrade-my-billing-plan "Direct link to How do I upgrade / downgrade my billing plan?")

You can change your billing plan on the [Plans](https://app.configcat.com/organization/plans) page. You need to have the [Billing Manager](https://configcat.com/docs/docs/organization/.md#billing-manager-role) role to access the Plans page.

### Can I get a discounted rate?[â](#can-i-get-a-discounted-rate "Direct link to Can I get a discounted rate?")

Discounts are available through our partnership program. [Contact us](https://configcat.com/support/) directly for more information.

### Can I change the email address associated with my account?[â](#can-i-change-the-email-address-associated-with-my-account "Direct link to Can I change the email address associated with my account?")

Currently, there's no direct way to change the email address of an account. However, you can:

1. Invite the new email to join your ConfigCat organization; this will create a fresh ConfigCat account.
2. Grant all the necessary permissions to the new account.
3. Proceed with deleting your old account from [here](https://app.configcat.com/my-account).

If you don't have the required permissions, contact your organization admin or a team member who has "Team members and permission groups" permissions.

Please note: Switching emails means you'll lose preferences from your old account, such as permissions, API keys, and Zombie flag settings. Transfer essential settings first.

### How do I change the billing email address where I receive my invoices?[â](#how-do-i-change-the-billing-email-address-where-i-receive-my-invoices "Direct link to How do I change the billing email address where I receive my invoices?")

Go to the [Billing & Invoices page](https://app.configcat.com/organization/billing) and click the `Update billing details` link. You need to have the [Billing Manager](https://configcat.com/docs/docs/organization/.md#billing-manager-role) role to access the Billing & Invoices page.

### How do I change my payment method or billing information?[â](#how-do-i-change-my-payment-method-or-billing-information "Direct link to How do I change my payment method or billing information?")

Go to the [Billing & Invoices page.](https://app.configcat.com/organization/billing) and click the `Update billing details` link. You need to have a [Billing Manager](https://configcat.com/docs/docs/organization/.md#billing-manager-role) role to access the Billing & Invoices page.

### The ChargeBee payment gets stuck | Throws an error[â](#the-chargebee-payment-gets-stuck--throws-an-error "Direct link to The ChargeBee payment gets stuck | Throws an error")

If you're using Firefox, try switching to a Chromium-based browser that has extensions turned off. If this doesn't work, [contact us](https://configcat.com/support/) for help.

### How do I cancel my account?[â](#how-do-i-cancel-my-account "Direct link to How do I cancel my account?")

Go to the [Plans](https://app.configcat.com/organization/plans) page and click the `Switch Plan` button under the Free plan. You need to have a [Billing Manager](https://configcat.com/docs/docs/organization/.md#billing-manager-role) role to access the Plans page.

### How do I change my currency?[â](#how-do-i-change-my-currency "Direct link to How do I change my currency?")

Go to the [Plans](https://app.configcat.com/organization/plans) page and use the currency toggle to switch between USD and EUR. You need to have a [Billing Manager](https://configcat.com/docs/docs/organization/.md#billing-manager-role) role to access the Plans page.

## Security[â](#security "Direct link to Security")

### Are you ISO certified?[â](#are-you-iso-certified "Direct link to Are you ISO certified?")

Yes, ConfigCat complies with the ISO/IEC 27001:2022 standard for Information Security Management Systems (ISMS). Click [here](https://configcat.com/iso/) to learn more.

### I'm setting up my firewall, which addresses should I whitelist?[â](#im-setting-up-my-firewall-which-addresses-should-i-whitelist "Direct link to I'm setting up my firewall, which addresses should I whitelist?")

If possible, you can allow the whole "configcat.com" domain. Alternatively, you can manually whitelist the following addresses:

* Global CDN: `https://cdn-global.configcat.com`
* EU CDN: `https://cdn-eu.configcat.com`
* The Public Management API: <https://api.configcat.com>
* The Dashboard URL: <https://app.configcat.com>

### I can't log in to ConfigCat using two-factor authentication (2FA).[â](#i-cant-log-in-to-configcat-using-two-factor-authentication-2fa "Direct link to I can't log in to ConfigCat using two-factor authentication (2FA).")

*Solution 1:* There might be an authenticator app on your phone that you can use to log in to ConfigCat.

*Solution 2:* Use your recovery codes that you received when you first set your 2FA up.

*Solution 3:* Contact your `Organization Admin`, and ask them to disable 2FA for your account until you set it up again. `Organization Admins` can disable 2FA on the [Members & Roles](https://app.configcat.com/organization/members) page. After you re-enable the 2FA, new recovery codes will also be (re)generated. It might be a good idea to save them to avoid such issues in the future.

### The Audit log doesn't show old operations[â](#the-audit-log-doesnt-show-old-operations "Direct link to The Audit log doesn't show old operations")

The Free plan includes a 7-day retention period. The Pro and Smart plans offer a 35-day retention, while the Enterprise and Dedicated plans provide a 2-year retention.

### Is there a way to allow a group access to only one config rather than all of them?[â](#is-there-a-way-to-allow-a-group-access-to-only-one-config-rather-than-all-of-them "Direct link to Is there a way to allow a group access to only one config rather than all of them?")

You can't set config-level access in one product. Instead, split your configs into multiple products with the appropriate permission settings.

### I cannot access my account using Google sign-in.[â](#i-cannot-access-my-account-using-google-sign-in "Direct link to I cannot access my account using Google sign-in.")

Browser extensions may interfere. Please disable all browser extensions and try again.

## Privacy[â](#privacy "Direct link to Privacy")

### How can I be sure that my data is safe?[â](#how-can-i-be-sure-that-my-data-is-safe "Direct link to How can I be sure that my data is safe?")

ConfigCat SDKs evaluate feature flags locally, in your application. They send no user data to the ConfigCat servers.

See our architecture explained [here](https://configcat.com/architecture/).

### Can we sign a data processing agreement with you?[â](#can-we-sign-a-data-processing-agreement-with-you "Direct link to Can we sign a data processing agreement with you?")

Yes. You can review our DPA through our [Trust Center](https://configcat.com/trust-center/) page, or [contact us](https://configcat.com/support/?prefilled=dpa-sign-request) and we'll send it to you for signing.

### Does ConfigCat collect browser data when serving feature flag data download requests?[â](#does-configcat-collect-browser-data-when-serving-feature-flag-data-download-requests "Direct link to Does ConfigCat collect browser data when serving feature flag data download requests?")

No. ConfigCat doesn't collect, store or process any user or browser fingerprinting data.

The data flow is one directional - the SDKs are only downloading the config JSON files and the feature flag evaluation happens in the SDKs.

ConfigCat doesn't collect any information about the customer's users.

### Is data hosted only within the EU?[â](#is-data-hosted-only-within-the-eu "Direct link to Is data hosted only within the EU?")

Our main infrastructure and database is in the EU, but CDN servers are located both in the EU and globally. You can set where you want us to keep your data, so its always within reach for your needs.

You can read more [here](https://configcat.com/docs/docs/advanced/data-governance/.md).

### Is it possible to export the feature flags?[â](#is-it-possible-to-export-the-feature-flags "Direct link to Is it possible to export the feature flags?")

Yes! You can export and download your current product as a standard JSON file anytime you want. The export will include:

* All feature flags and settings together with their values, Targeting Rules, Percentage Options, segments, tags
* All configs
* All environments
* All tags
* All segments

### How long does ConfigCat keep my data?[â](#how-long-does-configcat-keep-my-data "Direct link to How long does ConfigCat keep my data?")

We keep organization data as long as we see activity in that organization. After several months of inactivity, we send you a series of email notifications about or plans to delete your organization and all associated data. We consider an organization inactive if it meets all of the following criteria:

* no audit log events are generated in the organization,
* no valid calls are made to the organization via the Public Management API,
* config JSONs aren't downloaded from the ConfigCat CDN,
* the organization does not have an active paid subscription.

## A/B Testing & Targeting[â](#ab-testing--targeting "Direct link to A/B Testing & Targeting")

### Can I use AND operators in my Targeting Rules?[â](#can-i-use-and-operators-in-my-targeting-rules "Direct link to Can I use AND operators in my Targeting Rules?")

Yes, you can use AND operators in your Targeting Rules. (Only available in [Config V2](https://configcat.com/docs/docs/advanced/config-v2/.md) and later)

### Are Percentage Options sticky?[â](#are-percentage-options-sticky "Direct link to Are Percentage Options sticky?")

Yes. The percentage-based targeting is sticky by design and consistent across all SDKs.

Also, consider the following:

* All SDKs evaluate the rules in the exact same way. (10% is the same 10% in all SDKs)
* The percentage rules are sticky by feature flag. (10% is a different 10% for each feature flag)

More on [stickiness](https://configcat.com/docs/docs/targeting/percentage-options/.md#stickiness) and [consistency](https://configcat.com/docs/docs/targeting/percentage-options/.md#consistency)

### How to use Targeting Rules based on sensitive data?[â](#how-to-use-targeting-rules-based-on-sensitive-data "Direct link to How to use Targeting Rules based on sensitive data?")

If you want to use Targeting Rules based on email address, phone number, or other sensitive data, you can use the [Confidential text comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators).

## Technical Debt[â](#technical-debt "Direct link to Technical Debt")

### What are Zombie (Stale) Flags?[â](#what-are-zombie-stale-flags "Direct link to What are Zombie (Stale) Flags?")

![Zombie cat](/docs/assets/faq/zombie.svg)

Zombie (Stale) flags are feature flags that are not changed in the last (configurable) number of days. Most of the time if a feature flag isn't changed for a long time it means it is time to be removed from your source code and from the [ConfigCat Dashboard](https://app.configcat.com/) as well to avoid technical debt.

### What is the Zombie (Stale) Flags Report?[â](#what-is-the-zombie-stale-flags-report "Direct link to What is the Zombie (Stale) Flags Report?")

The [Zombie (Stale) Flags Report](https://app.configcat.com/my-account/zombie-flags-report) is a list of all feature flags that are not changed in the last (configurable) number of days. You can use this report to identify and remove stale feature flags from your source code. This report is weekly emailed to you. You can set your [email preferences here](https://app.configcat.com/my-account/zombie-flags-report).

### I am not getting the Zombie Feature Flag email report. What am I doing wrong?[â](#i-am-not-getting-the-zombie-feature-flag-email-report-what-am-i-doing-wrong "Direct link to I am not getting the Zombie Feature Flag email report. What am I doing wrong?")

You can change the frequency, criteria and scope of the Zombie Feature Flag report on the Dashboard.

**Note:** Please be aware that feature flags are only treated as zombie flags if they haven't been modified (with save & publish) in the past given timeframe. It currently doesn't have any connection with your real usage in your code.

### How to avoid technical debt caused by feature flags?[â](#how-to-avoid-technical-debt-caused-by-feature-flags "Direct link to How to avoid technical debt caused by feature flags?")

The [ConfigCat CLI](https://configcat.com/docs/docs/advanced/code-references/overview/.md) can scan your code, upload code references to the [ConfigCat Dashboard](https://app.configcat.com/) and notify you about stale feature flags.

![Code references screenshot](/docs/assets/cli/code-refs.png)

### Is there a way to compare flag statuses between two or more environments?[â](#is-there-a-way-to-compare-flag-statuses-between-two-or-more-environments "Direct link to Is there a way to compare flag statuses between two or more environments?")

Yes, you can see the state of all your Feature Flags across all your environments in our simplified [overview](https://app.configcat.com/overview).

## Joining an Organization[â](#joining-an-organization "Direct link to Joining an Organization")

### Is there an expiration date for sent invitations?[â](#is-there-an-expiration-date-for-sent-invitations "Direct link to Is there an expiration date for sent invitations?")

Invitations are valid for 14 days by default, but you can re-send them anytime to extend their expiration.

### I can't see the organization that I just joined[â](#i-cant-see-the-organization-that-i-just-joined "Direct link to I can't see the organization that I just joined")

If you created a new account before joining an organization via an invite (like the one sent by your company via email), then it is likely that a duplicate organization is created for you by ConfigCat.

Once you find the proper organization where you are supposed to be, we recommend deleting the duplicate from [here](https://app.configcat.com/organization/preferences), but please make sure that you don't accidentally delete the one that you want to keep.

## Technical Ones[â](#technical-ones "Direct link to Technical Ones")

### Is it possible to rename a product or config?[â](#is-it-possible-to-rename-a-product-or-config "Direct link to Is it possible to rename a product or config?")

Yes, you can rename almost everything within ConfigCat. Organizations, products, configs, environments, tags and feature flags can all be renamed. What you can't rename is feature flag keys, as that could cause a tsunami of reference error messages in your applications.

### Can I change my Feature Flag based on a date?[â](#can-i-change-my-feature-flag-based-on-a-date "Direct link to Can I change my Feature Flag based on a date?")

You can pass the current date as a [custom User Object attribute](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#comparison-attribute) to the ConfigCat SDK attribute when evaluating the feature flag, and you can use that attribute with our [Date and Time comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#date-and-time-comparators) in your targeting rules to target specific dates.

### Does ConfigCat guarantee percentage distribution?[â](#does-configcat-guarantee-percentage-distribution "Direct link to Does ConfigCat guarantee percentage distribution?")

ConfigCat guarantees percentage distribution across all SDKs, and it guarantees that each user will receive the same experience every time.

### Is it possible to set up A/B/C test (33%/33%/33%) distribution with ConfigCat?[â](#is-it-possible-to-set-up-abc-test-333333-distribution-with-configcat "Direct link to Is it possible to set up A/B/C test (33%/33%/33%) distribution with ConfigCat?")

Yes, it is possible. All you have to do is to create a text setting and apply the percentage rules. With a normal feature flag you have only two options - true or false, but with a text setting you can apply as many A/B/n options as you want with the percentages.

### Is there a way to create feature flags via the API?[â](#is-there-a-way-to-create-feature-flags-via-the-api "Direct link to Is there a way to create feature flags via the API?")

Yes there is. We have a public management API at <https://api.configcat.com>.

### How to resolve Domain verification issues?[â](#how-to-resolve-domain-verification-issues "Direct link to How to resolve Domain verification issues?")

**Txt record-based verification**

**Solution 1:** Check the 'Host' field in your DNS settings. One common cause of verification failure is an incorrectly set 'Host' field. Make sure that it is set to '@' or left empty. To check this setting, you will need to log into your domain provider's management console.

**Solution 2:** After you've added the TXT record to your DNS settings, it may take some time for the changes to propagate through the DNS system. If you have recently added or updated the TXT record, it's possible that the verification hasn't been completed due to DNS caching. Sometimes you even need to wait a few hours before trying to verify the domain again.

**File-Based verification**

If you're having trouble verifying your domain with the file-based verification method, make sure you've uploaded the file to the proper directory, and you can download it from under your domain.


---

# Getting Started

This page is an overview and a short guide on how to get started.

**ConfigCat** is a cloud-based service that lets you release features without code deployments.

You can use it with many similar techniques, such as feature flags/toggles, canary releases, soft launches, A-B testing, remote configuration management, and phased rollouts. Configure your application and features even after deployment.

## The birth of a Feature Flag[â](#the-birth-of-a-feature-flag "Direct link to The birth of a Feature Flag")

First, **add a feature flag** on the *ConfigCat Dashboard*, and then you can **connect your application** to the ConfigCat service to access your feature flag.

### Create a feature flag on the *ConfigCat Dashboard*[â](#create-a-feature-flag-on-the-configcat-dashboard "Direct link to create-a-feature-flag-on-the-configcat-dashboard")

1. [Log in](https://app.configcat.com/auth/login) to the *Dashboard*
2. Click *ADD FEATURE FLAG* and give it a name.

![Add feature flag](/docs/assets/add-feature-flag_192dpi.png)

### Explore with Our Tutorial App[â](#explore-with-our-tutorial-app "Direct link to Explore with Our Tutorial App")

Before diving into connecting your actual application, consider exploring our [Feature Flags Tutorial](https://tutorial.configcat.com/?lm=11). This interactive app provides a practical and engaging way to learn about ConfigCat and feature flags without needing to integrate immediately with your current projects. It's perfect for beginners to understand the functionalities and advantages of using feature flags effectively.

![Feature Flags Tutorial](/docs/assets/news/tutorial_192dpi.png)

[Start the Feature Flags Tutorial](https://tutorial.configcat.com/?lm=12)

### Connect your application[â](#connect-your-application "Direct link to Connect your application")

There are ready-to-use code snippets for `Browser (JavaScript)`, `Angular`, `React`, `Node.js`, `Deno`, `Bun`, `Cloudflare Worker`, `.NET (C#)`, `Java`, `Go`, `PHP`, `Python`, `Android (Java)`, `iOS (Swift)`, `Dart / Flutter`, `Kotlin Multiplatform`, `Ruby`, `Elixir`, `C++`, `Rust`, `Unreal Engine` on the [ConfigCat Dashboard](https://app.configcat.com), just scroll down to the **SDK Key and steps to connect your application** section.

All the ConfigCat SDKs are open-source and available on [GitHub](https://github.com/configcat).

See the detailed [Docs on how to use the ConfigCat SDKs.](https://configcat.com/docs/docs/sdk-reference/overview/.md)

Here's a short example to demonstrate the concept:

```
// 0. If necessary, install the ConfigCat SDK package for the platform you use.
// E.g. `npm install @configcat/sdk`

// 1. Import the ConfigCat SDK package.
import * as configcat from '@configcat/sdk';

// 2. Get a client object for the SDK Key of your config.
const client = configcat.getClient('#YOUR-SDK-KEY#');

// 3. Evaluate a feature flag using the client object.
const value = await client.getValueAsync('isMyFeatureEnabled', false);

// 4. Based on the value of the feature flag decide whether or not to enable the related feature.
if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```


---

# Glossary of Terms

An alphabetical list of terms used around feature management and software development in general in the context of ConfigCat.

## A[â](#a "Direct link to A")

#### [A/B Testing](https://configcat.com/blog/2022/05/02/what-is-ab-testing/)[â](#ab-testing "Direct link to ab-testing")

A/B testing is a method of comparing two versions of a product or feature to determine which one performs better. A/B testing is a form of controlled experimentation.

#### [Alpha Testing](https://configcat.com/docs/docs/glossary/alpha-testing/.md)[â](#alpha-testing "Direct link to alpha-testing")

Alpha testing examines a product's functionality and compliance with the business requirements through the initial end-to-end testing.

## B[â](#b "Direct link to B")

#### [Beta Testing](https://configcat.com/docs/docs/glossary/beta-testing/.md)[â](#beta-testing "Direct link to beta-testing")

Testing in the beta phase allows users to discover any issues or bugs before a general release by using a product in a real-world environment.

#### [Blue/Green Deployment](https://configcat.com/docs/docs/glossary/blue-green-deployment/.md)[â](#bluegreen-deployment "Direct link to bluegreen-deployment")

Blue/Green deployments offer near-zero downtime and rollback capabilities. The concept of a blue/green deployment involves switching traffic between two identical environments running different versions of your application.

## C[â](#c "Direct link to C")

#### [Canary Release](https://configcat.com/canary-testing)[â](#canary-release "Direct link to canary-release")

A Canary Release is a type of progressive delivery where a small percentage of users are exposed to a new feature. If the feature works as expected, the percentage of users exposed to the feature is increased. If the feature does not work as expected, the feature is rolled back.

#### [Canary Testing](https://configcat.com/canary-testing/)[â](#canary-testing "Direct link to canary-testing")

Canary testing is a software deployment technique where updates or new features are rolled out to a small, carefully selected subset of users before being released to the entire user base, to test and ensure their effectiveness and safety.

#### [CI/CD Pipeline](https://configcat.com/docs/docs/glossary/ci-cd-pipeline/.md)[â](#cicd-pipeline "Direct link to cicd-pipeline")

A CI/CD (Continuous Integration and Continuous Deployment) pipeline is a set of steps that must be followed to deliver a new software version to customers.

#### [Continuous Delivery](https://configcat.com/blog/2022/06/13/decoupling-feature-releases-from-deployment/)[â](#continuous-delivery "Direct link to continuous-delivery")

A continuous delivery process enables changes - including new features, configuration changes, bug fixes and experiments - to be released into production in a safe and timely manner while maintaining sustainability.

#### [Continuous Deployment](https://configcat.com/blog/2022/06/13/decoupling-feature-releases-from-deployment/)[â](#continuous-deployment "Direct link to continuous-deployment")

Continuous Deployment is a process where any code changes brought to an application are released automatically into the production environment.

#### [Continuous Integration](https://configcat.com/docs/docs/glossary/continuous-integration/.md)[â](#continuous-integration "Direct link to continuous-integration")

Continuous Integration refers to the regular merging of code changes into a central repository, followed by automated builds and tests.

## D[â](#d "Direct link to D")

#### [Dark Launch](https://configcat.com/blog/2022/06/13/decoupling-feature-releases-from-deployment/#feature-release-with-dark-launch)[â](#dark-launch "Direct link to dark-launch")

A dark launch involves releasing a feature to a subset of users before a full release to test reactions.

#### [Developer Advocate](https://configcat.com/blog/2023/07/11/role-of-developer-advocates/)[â](#developer-advocate "Direct link to developer-advocate")

A Developer Advocate is a person whose job is to help developers be successful with a platform or a technology and to speak (or write) on their behalf.

#### [DevOps Engineer](https://configcat.com/docs/docs/glossary/devops-engineer/.md)[â](#devops-engineer "Direct link to devops-engineer")

The DevOps Engineer is responsible for the development and maintenance of the infrastructure and the deployment of the software. The DevOps Engineer is also responsible for the monitoring and maintenance of the software and the infrastructure.

## E[â](#e "Direct link to E")

## F[â](#f "Direct link to F")

#### [Fake Door Testing](https://configcat.com/fake-door-testing/)[â](#fake-door-testing "Direct link to fake-door-testing")

Fake Door Testing is a technique used to assess the market demand for a product prior to investing in its development.

#### [Feature Branch](https://configcat.com/feature-branch/)[â](#feature-branch "Direct link to feature-branch")

A feature branch is a copy of the main codebase where an individual or team of software developers can work on a new feature until it is complete.

#### [Feature Flag](https://configcat.com/featureflags/)[â](#feature-flag "Direct link to feature-flag")

A feature flag is a toggle used to activate or deactivate specific features you may have in your application without redeploying code.

#### [Feature Testing](https://configcat.com/docs/docs/glossary/feature-testing/.md)[â](#feature-testing "Direct link to feature-testing")

An experiment to determine which version of a feature offers the best user experience is called a Feature Test.

#### [Feature Flag Framework](https://configcat.com/feature-flag-framework-explained/)[â](#feature-flag-framework "Direct link to feature-flag-framework")

A feature flag framework is a system that allows developers to enable or disable specific functionalities of an application, enabling testing, gradual rollouts, and easy adjustments without redeploying the whole software.

#### [Feature Flagging Tools](https://configcat.com/feature-flagging-tools/)[â](#feature-flagging-tools "Direct link to feature-flagging-tools")

Feature flagging tools are software utilities that enable developers to control the visibility and operational state of individual features in a software product, allowing for selective exposure and A/B testing without requiring system-wide updates or redeployments.

#### [Feature Flags as a Service](https://configcat.com/feature-flag-as-a-service/)[â](#feature-flags-as-a-service "Direct link to feature-flags-as-a-service")

Providing feature flags as a service involves delivering (under a subscription model) a cloud solution for managing software features, enhancing development efficiency, risk control, and user experience.

#### [Feature Toggles](https://configcat.com/feature-toggles/)[â](#feature-toggles "Direct link to feature-toggles")

Feature toggles, also known as feature flags, are a software development technique that allows the enabling or disabling of specific functionalities within an application, facilitating testing, incremental rollouts, and feature control without redeploying the software.

#### [Feature Toggle Management](https://configcat.com/feature-toggle-management/)[â](#feature-toggle-management "Direct link to feature-toggle-management")

Feature toggle management refers to the process of controlling and coordinating the use of feature flags or toggles in software development, enabling developers to switch on or off certain functionalities for testing, deployment, or user experience customization.

## G[â](#g "Direct link to G")

## H[â](#h "Direct link to H")

## I[â](#i "Direct link to I")

## J[â](#j "Direct link to J")

## K[â](#k "Direct link to K")

#### [Kill Switch](https://configcat.com/blog/2022/03/24/how-kantan-successfully-uses-configcat-in-its-ci-pipeline/#retiring-feature-flags-or-keeping-them-as-emergency-kill-switches)[â](#kill-switch "Direct link to kill-switch")

A kill switch is a mechanism that can be used to quickly disable a feature or an entire application in case of an emergency.

## L[â](#l "Direct link to L")

## M[â](#m "Direct link to M")

#### [Multi-Armed Bandit](https://configcat.com/docs/docs/glossary/multi-armed-bandit/.md)[â](#multi-armed-bandit "Direct link to multi-armed-bandit")

The Multi-Armed Bandit (MAB) is a machine learning framework that involves an agent making selections, referred to as "arms," with the goal of maximizing long-term cumulative rewards.

## N[â](#n "Direct link to N")

## O[â](#o "Direct link to O")

## P[â](#p "Direct link to P")

#### [Product Lifecycle Manager](https://configcat.com/docs/docs/glossary/product-lifecycle-manager/.md)[â](#product-lifecycle-manager "Direct link to product-lifecycle-manager")

The role of a product lifecycle manager is to supervise the project team and ensure timely completion of each stage in the lifecycle of a project.

#### [Platform Engineering](https://configcat.com/platform-engineering/)[â](#platform-engineering "Direct link to platform-engineering")

Platform engineering is the design and maintenance of the foundational infrastructure and tools that support software development teams in building, deploying, and operating applications at scale. It combines elements of systems and software engineering with automation to provide standardized environments and CI/CD pipelines, enabling developers to focus on code while minimizing infrastructure complexity.

#### [Progressive Delivery](https://configcat.com/blog/2022/01/14/progressive-delivery/)[â](#progressive-delivery "Direct link to progressive-delivery")

A progressive delivery approach to DevOps combines the principles of Continuous Integration and Continuous Delivery (CI/CD) with modern software development practices, facilitating faster code deployment, reducing risk, and improving user experiences.

## Q[â](#q "Direct link to Q")

## R[â](#r "Direct link to R")

#### [Rails Feature Flags](https://configcat.com/rails-feature-flag/)[â](#rails-feature-flags "Direct link to rails-feature-flags")

Rails feature flags are conditional coding elements used in Ruby on Rails applications that enable or disable specific features dynamically, facilitating controlled release, A/B testing, and gradual rollout of software functionalities.

#### [React Feature Flags](https://configcat.com/react-feature-flag/)[â](#react-feature-flags "Direct link to react-feature-flags")

React feature flags are conditional codes used in React.js applications to enable or disable certain features dynamically, allowing for controlled release, testing, and customization of software functionalities.

#### [Release Manager](https://configcat.com/docs/docs/glossary/release-manager/.md)[â](#release-manager "Direct link to release-manager")

A release manager is an IT professional responsible for defining and executing the software release process within a company, ensuring smooth deployment and high-quality releases.

#### [Remote Configuration](https://configcat.com/docs/docs/glossary/remote-configuration/.md)[â](#remote-configuration "Direct link to remote-configuration")

Remote configuration is a software development technique that allows you to modify certain features of an app remotely without having to deploy a new version of the app.

#### [Ring Deployment](https://configcat.com/ring-deployment/)[â](#ring-deployment "Direct link to ring-deployment")

Ring deployment is a form of gradual rollout where new features are released gradually to different groups of users to mitigate risk.

## S[â](#s "Direct link to S")

#### [Site Reliability Engineer](https://configcat.com/site-reliability-engineers/)[â](#site-reliability-engineer "Direct link to site-reliability-engineer")

A site reliability engineer (SRE) is a professional in the field of information technology who uses automation tools to monitor the reliability of software in a live production environment.

#### [Smoke Testing](https://configcat.com/docs/docs/glossary/smoke-testing/.md)[â](#smoke-testing "Direct link to smoke-testing")

Smoke testing is a type of testing done early in the software development process to confirm that the most critical features of an application are functioning correctly.

#### [Soak Testing](https://configcat.com/soak-testing/)[â](#soak-testing "Direct link to soak-testing")

Soak testing is a type of non-functional testing that assesses a software application's performance under a high volume of load over an extended period of time.

#### [Software Development Life Cycle](https://configcat.com/software-development-lifecycle/)[â](#software-development-life-cycle "Direct link to software-development-life-cycle")

The Software Development Life Cycle (SDLC) is a systematic approach aimed at producing high-quality, low-cost software efficiently and within a shorter timeframe.

#### [Software as a Service](https://configcat.com/feature-flag-saas/)[â](#software-as-a-service "Direct link to software-as-a-service")

Software as a Service (SaaS) is a cloud-based delivery model where applications are hosted and maintained by a service provider and accessed by users over the internet, typically on a subscription basis.

#### [Staging Environment](https://configcat.com/docs/docs/glossary/what-is-a-staging-environment/.md)[â](#staging-environment "Direct link to staging-environment")

A staging environment is a dry run for your code under the closest possible parameters to its real-world application. It is a near-perfect replica of the servers, infrastructure, architecture, and application of the actual production environment your code will run in. The key difference is that it is completely walled off from the front-facing actual environment.

## T[â](#t "Direct link to T")

#### [Testing in Production](https://configcat.com/testing-in-production/)[â](#testing-in-production "Direct link to testing-in-production")

Testing in production is the practice of evaluating software in its live environment, with real users and real-world conditions. Unlike traditional testing in controlled settings, this approach exposes the software to actual usage scenarios, uncovering issues that may be missed otherwise. However, it requires vigilant monitoring and quick problem resolution to minimize user impact.

#### [Type I and Type II Errors](https://configcat.com/docs/docs/glossary/type-i-and-type-ii-errors/.md)[â](#type-i-and-type-ii-errors "Direct link to type-i-and-type-ii-errors")

A Type I error occurs when the null hypothesis is incorrectly rejected, even though it is actually true. A Type II error occurs when the null hypothesis is wrongly not rejected while it is actually false.

#### [Trunk-Based Development](https://configcat.com/trunk-based-development/)[â](#trunk-based-development "Direct link to trunk-based-development")

Trunk-based development is a version control technique where developers regularly merge small updates into a central "trunk" or main branch.

## U[â](#u "Direct link to U")

#### [User Acceptance Testing](https://configcat.com/user-acceptance-testing/)[â](#user-acceptance-testing "Direct link to user-acceptance-testing")

User Acceptance Testing (UAT) is a stage in software development where the software is tested in a simulated real-world environment by its intended users or business representatives.

## V[â](#v "Direct link to V")

#### [Version Control](https://configcat.com/docs/docs/glossary/version-control/.md)[â](#version-control "Direct link to version-control")

Version control, also referred to as source control or revision control, is a crucial software development practice that tracks and manages changes to code and other files, and is closely linked to source code management.

## W[â](#w "Direct link to W")

## X[â](#x "Direct link to X")

## Y[â](#y "Direct link to Y")

## Z[â](#z "Direct link to Z")


---

# Alpha Testing - The Unsung Hero of Product Development

## Introduction[â](#introduction "Direct link to Introduction")

In the vast world of software development, testing plays a pivotal role in ensuring that products not only function as intended but also provide a seamless user experience. Among the various testing methodologies, alpha testing often stands out as a critical early-stage evaluation process. Let's delve into the nuances of alpha testing and understand its significance in the product development lifecycle.

## What is Alpha Testing?[â](#what-is-alpha-testing "Direct link to What is Alpha Testing?")

Alpha testing is an in-house testing methodology conducted to identify bugs and issues before a product is released to a select group of external users. Typically performed by developers or QA teams, this type of testing is done in a controlled environment and aims to mimic real-world scenarios to ensure the software's functionality and reliability.

## The Objectives of Alpha Testing[â](#the-objectives-of-alpha-testing "Direct link to The Objectives of Alpha Testing")

* **Bug Identification**: Detecting and addressing glitches, errors, and other issues.
* **Functionality Verification**: Ensuring all features work as intended.
* **Usability Assessment**: Evaluating the product's user-friendliness and overall experience.
* **Performance Evaluation**: Checking the software's response times, load times, and overall efficiency.

## The Alpha Testing Process[â](#the-alpha-testing-process "Direct link to The Alpha Testing Process")

* **Planning**: Setting the scope, objectives, and timelines for the test.
* **Environment Setup**: Creating a controlled environment that simulates real-world usage.
* **Test Execution**: Running a series of tests, both manual and automated, to evaluate different aspects of the software.
* **Feedback Collection**: Gathering insights and observations from the testing team.
* **Issue Resolution**: Addressing and rectifying identified problems before moving to the next testing phase.

## Why Alpha Testing is Crucial[â](#why-alpha-testing-is-crucial "Direct link to Why Alpha Testing is Crucial")

* **Early Detection**: Catching issues early on can save time, effort, and resources in the later stages of development.
* **Internal Feedback**: Gaining valuable insights from the team members who are familiar with the product's objectives and design.
* **Risk Mitigation**: Reducing the chances of major issues appearing in subsequent testing phases or post-launch.
* **Enhanced User Experience**: Ensuring that the end-users get a product that is polished, functional, and user-friendly.

## Challenges in Alpha Testing and Solutions[â](#challenges-in-alpha-testing-and-solutions "Direct link to Challenges in Alpha Testing and Solutions")

* **Limited Perspective**: Being an internal process, alpha testing might miss issues that external users might encounter. Solution: Diverse testing teams and scenario simulations.
* **Environment Limitations**: The controlled environment might not perfectly mimic all real-world scenarios. Solution: Use of virtual machines and diverse testing tools.
* **Feedback Management**: Handling and prioritizing the feedback can be challenging. Solution: Use of feedback management tools and regular team sync-ups.

## Conclusion[â](#conclusion "Direct link to Conclusion")

Alpha testing, while often overshadowed by its successor, beta testing, holds immense value in the software development process. By ensuring that a product is rigorously tested in its early stages, developers can pave the way for smoother subsequent testing phases and, ultimately, a successful product launch. As the adage goes, "Well begun is half done," and alpha testing ensures that software development begins on the right foot.


---

# Beta Testing - Navigating the Road to Market Readiness

## Introduction[â](#introduction "Direct link to Introduction")

Beta testing stands as a critical milestone before a software product meets its audience. This phase is the trial test, bridging the gap between internal development and user experience. Let's explore the role of beta testing in software development and its significance in refining software products.

## What is Beta Testing in Software Development?[â](#what-is-beta-testing-in-software-development "Direct link to What is Beta Testing in Software Development?")

Beta testing in software development involves releasing a near-complete version of the software to a selected group of external users. This phase follows alpha testing and is crucial for gathering feedback under real usage conditions to fine-tune the software before its official release.

## The Objectives of Beta Testing in Software Development[â](#the-objectives-of-beta-testing-in-software-development "Direct link to The Objectives of Beta Testing in Software Development")

* **Gathering User Feedback**: Collecting insights about user experiences and preferences.
* **Assessing Market Response**: Evaluating how the software is perceived and received in the market.
* **Identifying Real-World Bugs**: Detecting issues that might have been missed during internal testing.
* **Refinement for Market Launch**: Adjusting and improving the software based on user feedback.

## The Beta Testing Process in Software Development[â](#the-beta-testing-process-in-software-development "Direct link to The Beta Testing Process in Software Development")

* **Selection of Beta Testers**: Recruiting a diverse and representative sample of the target user base.
* **Distribution of Beta Version**: Providing the beta software to the chosen testers.
* **Monitoring and Feedback Collection**: Observing user interactions and gathering structured feedback.
* **Analysis and Iteration**: Analyzing user feedback to identify areas for improvement and implementing changes.
* **Release Readiness Assessment**: Evaluating if the software is ready for public launch based on tester feedback.

## Why Beta Testing is Crucial in Software Development[â](#why-beta-testing-is-crucial-in-software-development "Direct link to Why Beta Testing is Crucial in Software Development")

* **Insights from Real Users**: Obtaining feedback from actual users in varied real-world scenarios.
* **Market Acceptance Evaluation**: Gauging the market's reaction and the software's readiness for launch.
* **Enhancement of Software Quality**: Identifying and fixing bugs, and polishing features to improve overall quality.
* **Building Early User Base**: Establishing an initial user community and fostering early adopter loyalty.

## Challenges in Beta Testing for Software and Solutions[â](#challenges-in-beta-testing-for-software-and-solutions "Direct link to Challenges in Beta Testing for Software and Solutions")

* **Diverse User Scenarios**: Testers may have different usage patterns and environments. Solution: Carefully select a diverse group of beta testers.
* **Handling Feedback Effectively**: Managing a large volume of feedback can be challenging. Solution: Implement structured feedback collection tools and clear guidelines.
* **Maintaining Tester Engagement**: Keeping beta testers motivated and engaged throughout the process. Solution: Provide incentives for participation and maintain open, responsive communication channels.

## Conclusion[â](#conclusion "Direct link to Conclusion")

Beta testing in software development is more than just a phase; it's a strategic approach to ensuring that the software not only functions but also resonates with its intended audience. Itâs a vital step in the journey towards launching a software product that is not just functional, but also aligned with user expectations and market demands. Through beta testing, software developers can pave the way for a successful product launch, grounded in quality, user satisfaction, and market readiness.


---

# Blue/Green Deployment - Streamlining Software Releases

## Introduction[â](#introduction "Direct link to Introduction")

In the dynamic realm of software development, deploying updates without disrupting user experience is paramount. Blue/Green Deployment emerges as a strategic method that enables this seamless transition. Let's delve into its mechanics and recognize its significance in software deployment.

## What is Blue/Green Deployment?[â](#what-is-bluegreen-deployment "Direct link to What is Blue/Green Deployment?")

Blue/Green Deployment is a strategy used to reduce downtime and risk by running two identical production environments. Simply put, the 'Blue' environment is the active one, while the 'Green' is a clone, ready to be switched over at any moment. This approach allows for testing in the production environment itself without affecting users.

## Objectives of Blue/Green Deployment[â](#objectives-of-bluegreen-deployment "Direct link to Objectives of Blue/Green Deployment")

* **Minimal Downtime**: Achieve nearly zero downtime during deployments.
* **Risk Reduction**: Mitigate risks associated with the release of new features or updates.
* **Rapid Rollback**: Provide the ability to quickly revert to the previous version if issues arise post-deployment.
* **Continuous Delivery**: Facilitate a smoother continuous delivery pipeline.

## The Blue/Green Deployment Process[â](#the-bluegreen-deployment-process "Direct link to The Blue/Green Deployment Process")

* **Preparation**: Setting up two identical environments â Blue (current) and Green (new).
* **Testing**: Validating the Green environment to ensure it's ready for live traffic.
* **Routing Traffic**: Shifting user traffic from Blue to Green seamlessly.
* **Monitoring**: Keeping a close watch on the Green environment for any issues.
* **Finalization or Rollback**: If successful, decommission the Blue environment, or if problems are detected, revert traffic back to Blue.

## Why Blue/Green Deployment is Essential[â](#why-bluegreen-deployment-is-essential "Direct link to Why Blue/Green Deployment is Essential")

* **Enhanced Reliability**: Increases the reliability of the deployment process.
* **User Experience**: Ensures uninterrupted service to users during updates.
* **Simplified Troubleshooting**: Allows easy identification and resolution of issues.
* **Flexibility**: Offers flexibility in managing and scheduling deployments.

## Challenges in Blue/Green Deployment and Solutions[â](#challenges-in-bluegreen-deployment-and-solutions "Direct link to Challenges in Blue/Green Deployment and Solutions")

* **Resource Intensiveness**: Requires duplicating the production environment. Solution: Efficient resource management and cloud-based solutions.
* **Data Synchronization**: Keeping data in sync between Blue and Green environments. Solution: Robust data management strategies and tools.
* **Complex Configuration**: Managing complex configurations during the switch. Solution: Automation tools and thorough planning.

## Conclusion[â](#conclusion "Direct link to Conclusion")

Blue/Green Deployment serves as a cornerstone for modern software delivery, ensuring that updates and new features are rolled out smoothly, without disturbing the end-user experience. By integrating this strategy into deployment practices, organizations can enhance the reliability and efficiency of their software delivery process, ultimately leading to greater user satisfaction and business success.


---

# CI/CD Pipeline - Streamlining Software Delivery

## Introduction[â](#introduction "Direct link to Introduction")

In the ever-evolving realm of software development, efficiency and speed are paramount. The CI/CD pipeline emerges as a cornerstone in achieving these goals, merging coding, testing, and deployment into a streamlined and automated process. Letâs unpack the components of CI/CD pipelines and their impact on software delivery.

## What is a CI/CD Pipeline?[â](#what-is-a-cicd-pipeline "Direct link to What is a CI/CD Pipeline?")

CI/CD stands for Continuous Integration and Continuous Deployment/Delivery. This method introduces automation into the development process to enable frequent application delivery to customers. The primary concepts central to CI/CD include continuous integration, continuous delivery, and continuous deployment.

## The Objectives of a CI/CD Pipeline[â](#the-objectives-of-a-cicd-pipeline "Direct link to The Objectives of a CI/CD Pipeline")

* **Rapid Deployment**: Facilitating frequent and reliable software updates.
* **Quality Assurance**: Ensuring consistent quality and performance through automated testing.
* **Risk Reduction**: Minimizing errors and issues in production through early detection.
* **Efficient Development**: Streamlining the development process for faster turnaround times.

## The CI/CD Pipeline Process[â](#the-cicd-pipeline-process "Direct link to The CI/CD Pipeline Process")

* **Code Integration**: Developers merge their changes into a shared repository, triggering automated builds and tests.
* **Automated Testing**: The integrated code is automatically tested for bugs, performance issues, and other potential problems.
* **Deployment**: Upon successful testing, the code is deployed to a staging or production environment.
* **Monitoring and Feedback**: Continuous monitoring of the application's performance and gathering feedback for future improvements.

## Why CI/CD Pipelines are Essential[â](#why-cicd-pipelines-are-essential "Direct link to Why CI/CD Pipelines are Essential")

* **Speedy Deliveries**: Accelerates the process of getting software improvements to end-users.
* **Enhanced Collaboration**: Fosters a collaborative environment where code integration and problem-solving happen in real-time.
* **Adaptability**: Allows for quick adaptation to market changes and user feedback.
* **Cost-Effectiveness**: Reduces costs associated with manual processes and delayed releases.

## Challenges in CI/CD Pipeline and Solutions[â](#challenges-in-cicd-pipeline-and-solutions "Direct link to Challenges in CI/CD Pipeline and Solutions")

* **Complex Integration**: Integrating various tools and platforms can be challenging. Solution: Utilize versatile CI/CD tools that offer broad integration capabilities.
* **Security Concerns**: Continuous deployment could introduce security vulnerabilities. Solution: Implement robust security checks within the pipeline.
* **Managing Dependencies**: Handling dependencies in a constantly changing environment. Solution: Effective dependency management strategies and tools.

## Conclusion[â](#conclusion "Direct link to Conclusion")

The CI/CD pipeline is more than just a development strategy; itâs a catalyst for agility, quality, and innovation in software development. By embracing the utility of CI/CD pipelines, organizations can ensure that they not only keep pace with market demands but also drive forward with efficiency and precision. As the backbone of modern DevOps practices, the CI/CD pipeline stands as an essential element in the journey towards streamlined, resilient, and customer-centric software delivery.


---

# Continuous Integration - The Backbone of Modern Software Development

## Introduction[â](#introduction "Direct link to Introduction")

In the rapidly evolving landscape of software development, Continuous Integration (CI) has emerged as an essential practice. It represents a fundamental shift in the approach to software building and testing, emphasizing speed, efficiency, and early error detection. Here, we explore the ins and outs of Continuous Integration and its pivotal role in modern software development.

## What is Continuous Integration?[â](#what-is-continuous-integration "Direct link to What is Continuous Integration?")

Continuous Integration is a development practice where developers frequently merge their code changes into a central repository, usually several times a day. After each merge, automated builds and tests are run, ensuring that the new code integrates seamlessly with the existing codebase.

## The Objectives of Continuous Integration[â](#the-objectives-of-continuous-integration "Direct link to The Objectives of Continuous Integration")

* **Early Problem Detection**: Identifying and resolving issues promptly, reducing the risk of compounded problems.
* **Streamlined Development**: Facilitating smoother collaboration and integration among team members.
* **Quality Assurance**: Maintaining a high standard of code quality through automated testing.
* **Reduced Integration Costs**: Lowering the time and resources spent on fixing integration issues.

## The Continuous Integration Process[â](#the-continuous-integration-process "Direct link to The Continuous Integration Process")

* **Commit Code Regularly**: Developers regularly commit small code changes to the central repository.
* **Automated Builds**: Automated systems build the software with each new code commit.
* **Automated Testing**: Running a suite of tests to ensure code quality and functionality.
* **Immediate Feedback**: Providing developers with immediate feedback on the integration process.
* **Rapid Issue Resolution**: Quickly addressing any integration or test failures.

## Why Continuous Integration is Essential[â](#why-continuous-integration-is-essential "Direct link to Why Continuous Integration is Essential")

* **Improved Collaboration**: Encourages more frequent code integration, leading to better team collaboration.
* **Increased Efficiency**: Reduces manual integration efforts, making the development process more efficient.
* **Enhanced Code Quality**: Consistent testing ensures high code quality and reduces bugs in production.
* **Faster Release Cycles**: Accelerates the process from development to deployment, enabling faster release cycles.

## Challenges in Continuous Integration and Solutions[â](#challenges-in-continuous-integration-and-solutions "Direct link to Challenges in Continuous Integration and Solutions")

* **Maintaining Quality with Speed**: Balancing rapid integration with maintaining code quality. Solution: Implement robust automated testing frameworks.
* **Managing Build Failures**: Addressing and preventing frequent build failures. Solution: Enforce coding standards and regular code reviews.
* **Infrastructure Overheads**: Managing the infrastructure required for CI. Solution: Use cloud-based CI tools and services.

## Conclusion[â](#conclusion "Direct link to Conclusion")

Continuous Integration stands as a transformative approach in software development. By automating the integration and testing process, it not only enhances efficiency and quality but also fosters a more collaborative and agile development environment. Embracing Continuous Integration is not just a choice but a necessity for teams aiming to excel in the competitive world of software development.


---

# DevOps Engineer - The Backbone of Efficient Software Deployment

## Introduction[â](#introduction "Direct link to Introduction")

The role of a DevOps Engineer has become indispensable. Bridging the gap between software creation and its operational performance, a DevOps Engineer is a key player in the orchestration of code life cycles, ensuring that everything from development to deployment and beyond runs seamlessly. Letâs delve into what makes the DevOps Engineer role so vital.

## Who is a DevOps Engineer?[â](#who-is-a-devops-engineer "Direct link to Who is a DevOps Engineer?")

A DevOps Engineer is a multi-faceted professional who specializes in the development (Dev) and operations (Ops) aspects of software engineering. Their responsibilities extend across the entire development pipeline, focusing on streamlining processes, enhancing performance, and ensuring the reliability of both software and infrastructure.

## Key Responsibilities of a DevOps Engineer[â](#key-responsibilities-of-a-devops-engineer "Direct link to Key Responsibilities of a DevOps Engineer")

* **Development and Maintenance**: Spearheading the development of infrastructure and ensuring its robust maintenance.
* **Deployment**: Orchestrating the deployment process to ensure smooth and timely delivery of software.
* **Monitoring**: Vigilantly monitoring both software and infrastructure to preemptively identify and address issues.
* **Continuous Improvement**: Implementing strategies for continuous development, integration, and deployment.
* **Collaboration**: Acting as a bridge between various teams to foster a cohesive working environment.

## The Importance of DevOps Engineers[â](#the-importance-of-devops-engineers "Direct link to The Importance of DevOps Engineers")

* **Efficiency**: By automating processes and improving communication between development and operations teams, DevOps Engineers significantly enhance efficiency.
* **Agility**: They enable organizations to respond swiftly to market changes and customer demands.
* **Reliability**: Through continuous monitoring and maintenance, they ensure that systems are robust and downtime is minimized.
* **Innovation**: By streamlining workflows, they provide more room for innovation and experimentation.

## Challenges Faced by DevOps Engineers and Solutions[â](#challenges-faced-by-devops-engineers-and-solutions "Direct link to Challenges Faced by DevOps Engineers and Solutions")

* **Complex Workflows**: Handling intricate workflows can be challenging. Solution: Implementation of automation tools and clear communication channels.
* **Rapid Technology Changes**: Keeping pace with ever-evolving technologies. Solution: Continuous learning and adaptation.
* **Balancing Speed and Security**: Ensuring rapid deployment without compromising on security. Solution: Integrating security measures into the development process.

## Conclusion[â](#conclusion "Direct link to Conclusion")

The DevOps Engineer is more than just a role; itâs a mindset that embodies efficiency, collaboration, and continuous improvement. In the current technological era, a proficient DevOps Engineer is not just an asset but a necessity for organizations aiming for resilience, agility, and sustained growth.


---

# Feature Testing - Tailoring the Ultimate User Experience

## Introduction[â](#introduction "Direct link to Introduction")

The competitive edge of any software lies in its features â but how do you ensure that each feature resonates with your users? Feature Testing is the answer. It's a strategic approach that enables teams to determine the most impactful version of a feature to deliver a superior user experience. Here's an insight into Feature Testing and its vital role in user-centric development.

## What is Feature Testing?[â](#what-is-feature-testing "Direct link to What is Feature Testing?")

Feature Testing, also known as A/B Testing or Split Testing, is an experimental process where two or more variants of a feature are compared to determine which one performs better in the context of user engagement and satisfaction. It involves exposing your audience to different versions of a feature within your application or website and using data-driven insights to decide which version yields the best outcomes.

## Objectives of Feature Testing[â](#objectives-of-feature-testing "Direct link to Objectives of Feature Testing")

* **User Experience Enhancement**: Refining features to match user expectations and preferences.
* **Performance Measurement**: Quantifying how different feature iterations affect user behavior.
* **Data-Driven Decisions**: Basing feature iterations on concrete analytics rather than guesswork.
* **Conversion Rate Optimization**: Improving the rate at which users take the desired action within the app or site.

## The Feature Testing Process[â](#the-feature-testing-process "Direct link to The Feature Testing Process")

* **Hypothesis Formation**: Begin with a theory or question about how a feature change might impact user behavior.
* **Variant Creation**: Develop multiple versions of the feature in question.
* **Experimentation**: Randomly expose users to different versions and collect data on their interactions.
* **Analysis**: Evaluate the data to determine which version achieved the defined objectives.

## Why Feature Testing is Indispensable[â](#why-feature-testing-is-indispensable "Direct link to Why Feature Testing is Indispensable")

* **Risk Mitigation**: Before a full-scale rollout, test and understand the impact of new features.
* **Improved Retention**: By optimizing features for user satisfaction, increase the likelihood of users sticking around.
* **Agile Development**: Quickly adapt and respond to user feedback, making your development cycle more efficient.
* **Competitive Advantage**: Stay ahead by continuously evolving your product to meet the latest user trends and needs.

## Challenges in Feature Testing and Strategies to Overcome Them[â](#challenges-in-feature-testing-and-strategies-to-overcome-them "Direct link to Challenges in Feature Testing and Strategies to Overcome Them")

* **Statistical Significance**: Ensuring your test results are statistically valid. Strategy: Run tests for adequate durations and with sufficient sample sizes.
* **Bias Elimination**: Preventing the test environment from skewing results. Strategy: Use randomization and control groups effectively.
* **User Segmenting**: Not all users are the same. Strategy: Segment your user base to ensure relevant feedback.

## Conclusion[â](#conclusion "Direct link to Conclusion")

Feature Testing is not just about choosing between 'A' or 'B' â it's about crafting experiences that resonate and retain. It empowers teams to make informed decisions, leading to a product that your users love, every single time. Unlock the potential of every feature and let the data guide your path to success.


---

# Multi-Armed Bandit - Optimizing Decisions in Real-Time

## Introduction[â](#introduction "Direct link to Introduction")

In an ever-evolving digital landscape, making optimal decisions swiftly can be the difference between success and stagnation. The Multi-Armed Bandit framework embodies this principle, offering a dynamic approach to decision-making that balances the exploration of new opportunities with the exploitation of known strategies. Explore the strategic world of Multi-Armed Bandits, where every choice has the potential to significantly enhance performance and outcomes.

## What is a Multi-Armed Bandit?[â](#what-is-a-multi-armed-bandit "Direct link to What is a Multi-Armed Bandit?")

At its core, the Multi-Armed Bandit (MAB) problem is a scenario in which an agent is faced with several choices, or "arms," each with uncertain rewards. The agent must choose which arm to pull, metaphorically speaking, in a sequence of trials to maximize its total reward over time. This framework is a simplified model of the complex decision-making processes that occur in various fields such as finance, healthcare, online advertising, and more.

## The Goals of Multi-Armed Bandit Algorithms[â](#the-goals-of-multi-armed-bandit-algorithms "Direct link to The Goals of Multi-Armed Bandit Algorithms")

* **Optimal Action Identification**: To discover and exploit the best possible actions that yield the highest rewards.
* **Uncertainty Reduction**: To gather information about the reward distribution of each action.
* **Regret Minimization**: To minimize the difference between the rewards received and the rewards that could have been received by always choosing the best action.

## The Multi-Armed Bandit Process[â](#the-multi-armed-bandit-process "Direct link to The Multi-Armed Bandit Process")

* **Trial and Error**: The agent tests different arms to gather data on their performance.
* **Reward Assessment**: After each trial, the agent assesses the reward from the chosen arm.
* **Strategy Adaptation**: Based on accumulated knowledge, the agent refines its selection strategy.
* **Continuous Learning**: The process is iterative, allowing continuous learning and adaptation to changing environments.

## Why Multi-Armed Bandit is Essential[â](#why-multi-armed-bandit-is-essential "Direct link to Why Multi-Armed Bandit is Essential")

* **Real-Time Decision Making**: MAB algorithms provide a framework for making decisions on-the-fly in real-time environments.
* **Resource Efficiency**: They help allocate limited resources to the most effective strategies.
* **Adaptability**: MABs are robust to changes and can quickly adjust strategies based on new data.
* **Experimental Efficiency**: They are crucial in A/B testing scenarios where rapid learning is essential.

## Challenges in Multi-Armed Bandit Implementations and Solutions[â](#challenges-in-multi-armed-bandit-implementations-and-solutions "Direct link to Challenges in Multi-Armed Bandit Implementations and Solutions")

* **Exploration vs. Exploitation Dilemma**: Balancing the need to explore new actions with the need to exploit known high-reward actions. Solution: Employ algorithms like epsilon-greedy, UCB (Upper Confidence Bound), or Thompson Sampling to manage this trade-off effectively.
* **Dynamic Environments**: Adapting to environments where reward distributions change over time. Solution: Use non-stationary MAB algorithms that adjust to trends and volatility.
* **Complex Reward Structures**: Dealing with scenarios where rewards are not immediate or straightforward. Solution: Develop MAB models that can handle delayed feedback and complex reward mechanisms.

## Conclusion[â](#conclusion "Direct link to Conclusion")

The Multi-Armed Bandit framework is a powerful tool in the modern decision-maker's arsenal, allowing for smarter, data-driven choices that evolve with experience. Whether it's optimizing click-through rates in digital marketing or determining treatment plans in clinical trials, MABs offer a structured yet flexible approach to navigating the uncertainties inherent in decision-making processes. As we continue to harness the potential of these algorithms, the ceiling for innovation and efficiency rises ever higher.


---

# Product Lifecycle Manager â Steering Projects to Success

## Introduction[â](#introduction "Direct link to Introduction")

In the dynamic world of product development, the trajectory from an idea to a market-ready product is intricate and layered with challenges. A Product Lifecycle Manager is the maestro of this journey, synchronizing each movement to create a symphony of efficiency and success. Dive into the role of these pivotal professionals and how they are integral to a product's evolution.

## Who is a Product Lifecycle Manager?[â](#who-is-a-product-lifecycle-manager "Direct link to Who is a Product Lifecycle Manager?")

A Product Lifecycle Manager is a strategic orchestrator responsible for overseeing the progression of a product through its lifecycle. They are the guardians of the project timeline, ensuring that every stage, from conception to release, adheres to the planned schedule and quality standards.

## Responsibilities of a Product Lifecycle Manager[â](#responsibilities-of-a-product-lifecycle-manager "Direct link to Responsibilities of a Product Lifecycle Manager")

* **Strategic Planning**: Crafting a comprehensive plan that outlines each stage of the product's lifecycle.
* **Team Coordination**: Leading and motivating the project team to achieve the set objectives.
* **Milestone Tracking**: Monitoring the progress and ensuring that key deliverables are met on time.
* **Quality Assurance**: Upholding the highest standards of quality at each phase of the product's development.
* **Risk Management**: Identifying potential issues and implementing strategies to mitigate risks.

## The Lifecycle of a Product[â](#the-lifecycle-of-a-product "Direct link to The Lifecycle of a Product")

* **Conceptualization**: Ideation and initial planning of the product's vision.
* **Development**: Transforming the concept into a tangible prototype or early version.
* **Testing**: Rigorous evaluation to refine the product and prepare it for market.
* **Launch**: Introducing the product to the market with strategic marketing and distribution.
* **Evaluation**: Analyzing the product's performance and gathering feedback for improvement.

## The Impact of a Product Lifecycle Manager[â](#the-impact-of-a-product-lifecycle-manager "Direct link to The Impact of a Product Lifecycle Manager")

* **Project Efficiency**: Streamlining processes to minimize waste and optimize resources.
* **Timely Delivery**: Ensuring that products are developed and launched within the expected timelines.
* **Market Relevance**: Keeping the product aligned with market needs and consumer expectations.
* **Continuous Improvement**: Leveraging feedback for ongoing product enhancement and evolution.

## Conclusion[â](#conclusion "Direct link to Conclusion")

The role of a Product Lifecycle Manager is indispensable in navigating the complex waters of product development. With their expertise, products don't just reach completion; they do so with a competitive edge and in alignment with market demands. They ensure that the lifecycle of a project is not just a passage of time but a curated path towards excellence.


---

# Release Manager â Orchestrating Successful Software Deployments

## Introduction[â](#introduction "Direct link to Introduction")

The Release Manager plays a crucial role, choreographing the movements between coding and client delivery. Gain insights on the multifaceted responsibilities of a Release Manager and the importance of this role in the IT industry.

## Who is a Release Manager?[â](#who-is-a-release-manager "Direct link to Who is a Release Manager?")

A Release Manager is a professional within the IT realm, tasked with overseeing the software release lifecycle from development to deployment. Their goal is to ensure that every software release is executed efficiently, meets quality standards, and is delivered on schedule.

## The Role of a Release Manager[â](#the-role-of-a-release-manager "Direct link to The Role of a Release Manager")

* **Process Definition**: Creating and refining the release management process to align with business goals.
* **Coordination and Planning**: Orchestrating the efforts of development, operations, and quality assurance teams to ensure a harmonious release process.
* **Quality Assurance**: Certifying that each release meets the necessary quality thresholds before it reaches customers.
* **Risk Management**: Identifying potential issues in the release process and mitigating them to prevent delays or failures.

## Key Responsibilities[â](#key-responsibilities "Direct link to Key Responsibilities")

* **Release Planning**: Crafting a detailed release schedule and ensuring all teams adhere to it.
* **Change Management**: Supervising the change process to maintain stability and integrity of the product.
* **Deployment**: Overseeing the final stages of the release, including the deployment strategy and execution.
* **Post-Release Support**: Ensuring support systems are in place for post-deployment issues and feedback.

## Why a Release Manager is Indispensable[â](#why-a-release-manager-is-indispensable "Direct link to Why a Release Manager is Indispensable")

* **Streamlined Deployments**: A Release Manager irons out any issues in the deployment process, making it as efficient as possible
* **Quality Control**: Their oversight helps maintain the high standards expected of modern software releases.
* **Communication Hub**: Acting as the central point of communication, they keep all stakeholders informed and coordinated.

## Challenges and Strategies[â](#challenges-and-strategies "Direct link to Challenges and Strategies")

* **Managing Diverse Teams**: A Release Manager often navigates varied team dynamics. Strategy: Clear communication and strong leadership skills are key.
* **Adapting to Change**: With technology evolving rapidly, release managers must be agile. Strategy: Continuous learning and adaptation to new tools and practices.
* **Ensuring Security**: Security concerns are paramount. Strategy: Implementing thorough security checks and balances within the release process.

## Conclusion[â](#conclusion "Direct link to Conclusion")

The Release Manager is the unsung hero ensuring that software deployments are successful and seamless. In a world where software is integral to business success, the role of a Release Manager cannot be overstated. They ensure that new features reach users smoothly, securely, and without disrupting the service â a true linchpin in the software development cycle.


---

# Remote Configuration - Agile Adjustments at Your Fingertips

## Introduction[â](#introduction "Direct link to Introduction")

In the dynamic world of software development, the ability to make quick adjustments to live applications is a game-changer. Remote configuration is the magic wand that enables developers and product teams to update features or settings of an app in real-time, without rolling out a new version. Dive into the flexibility and control offered by remote configuration and how it can be a critical tool for your appâs success.

## What is Remote Configuration?[â](#what-is-remote-configuration "Direct link to What is Remote Configuration?")

Remote configuration allows teams to seamlessly modify an application's functionality and user interface without rolling out a new version or update. This approach provides the agility to adapt features or address problems instantly, keeping the application adaptive and user-centric at all times

## The Power of Remote Configuration[â](#the-power-of-remote-configuration "Direct link to The Power of Remote Configuration")

* **Rapid Changes**: Implement feature toggles or turn features on and off quickly.
* **User Experience Customization**: Personalize content and features for different user segments in real-time.
* **A/B Testing**: Test out new features with selected user groups before a wide release to gather data and feedback.
* **Issue Mitigation**: Quickly respond to unforeseen bugs or issues by remotely adjusting app settings.

## Implementing Remote Configuration[â](#implementing-remote-configuration "Direct link to Implementing Remote Configuration")

* **Integration**: Setting up remote configuration starts with integrating a remote configuration service or platform with your app.
* **Control Panel**: Use a dashboard to manage the configurations that control various features of your app.
* **Monitoring**: Keep an eye on how changes affect app performance and user experience with real-time monitoring tools.

## Why Remote Configuration is a Staple for Modern Apps[â](#why-remote-configuration-is-a-staple-for-modern-apps "Direct link to Why Remote Configuration is a Staple for Modern Apps")

* **Agility**: Update your app on-the-go to keep up with rapidly changing market demands.
* **Cost-Effectiveness**: Save on resources by reducing the number of deployments.
* **User Retention**: Improve user retention by quickly adapting to user feedback and market trends.
* **Reduced Risk**: Test changes with a small percentage of your user base to reduce the risk of negative impact.

## Challenges and Best Practices[â](#challenges-and-best-practices "Direct link to Challenges and Best Practices")

* **Overuse**: Avoid confusion by not overdoing the frequency and volume of changes.
* **User Feedback**: Implement mechanisms to gather user feedback after making changes.
* **Documentation**: Keep detailed logs of changes to track the impact and revert if necessary.

## Conclusion[â](#conclusion "Direct link to Conclusion")

Remote configuration stands out as an essential feature in the arsenal of modern software development. By incorporating remote configuration techniques, developers can ensure that their applications are as adaptable as they are robust, providing the best possible experience for the end-user with minimal disruption.


---

# Smoke Testing - Ensuring the Core of Your Software Stands Strong

## Introduction[â](#introduction "Direct link to Introduction")

Smoke testing acts as a preliminary check to confirm that the key features of an application are working effectively. Delve into the fundamentals of smoke testing and its critical role in the early stages of the development cycle.

## What is Smoke Testing?[â](#what-is-smoke-testing "Direct link to What is Smoke Testing?")

Smoke testing, often known as "build verification testing," is a shallow and wide approach to testing that evaluates whether the most fundamental functions of an application operate without any critical issues. It's like doing an initial health check-up for software.

## The Aims of Smoke Testing[â](#the-aims-of-smoke-testing "Direct link to The Aims of Smoke Testing")

* **Critical Feature Check**: Ensuring that the primary functions perform correctly.
* **Build Stability**: Validating the stability of initial software builds.
* **Early Problem Detection**: Catching severe issues at the onset before they propagate.

## The Smoke Testing Cycle[â](#the-smoke-testing-cycle "Direct link to The Smoke Testing Cycle")

* **Build**: The latest version of the application is prepared for testing.
* **Deploy**: The build is placed in a testing environment similar to production.
* **Test**: Core functionalities are tested to ensure they work as expected.
* **Report**: Results are documented, with failures addressed immediately.

## The Importance of Smoke Testing[â](#the-importance-of-smoke-testing "Direct link to The Importance of Smoke Testing")

* **Saves Time**: Identifies major problems early, avoiding wasted effort on flawed builds.
* **Enhances Quality**: Promotes a more stable and reliable software development process.
* **Facilitates Continuous Integration**: Acts as a checkpoint for new integrations and deployments.

## Challenges in Smoke Testing and Overcoming Them[â](#challenges-in-smoke-testing-and-overcoming-them "Direct link to Challenges in Smoke Testing and Overcoming Them")

* **Scope Definition**: Determining what constitutes the 'smoke' can be subjective. Solution: Develop clear criteria for essential features.
* **Environment Differences**: Discrepancies between testing and production environments can skew results. Solution: Mirror production settings as closely as possible.
* **Automation Balance**: Deciding what to automate versus what to manually test. Solution: Automate common and stable features; manually test newly added features.

## Conclusion[â](#conclusion "Direct link to Conclusion")

Smoke testing serves as the first line of defense, ensuring that the application's backbone is robust before it's subject to detailed testing. By verifying the core functionality after each build, developers can proceed with confidence, knowing that the foundation of their application is solid.


---

# Navigating Type I & Type II Errors in Software Testing

## Exploring Type I and Type II Errors in Software Testing[â](#exploring-type-i-and-type-ii-errors-in-software-testing "Direct link to Exploring Type I and Type II Errors in Software Testing")

In the intricate process of software development, testing stands as a guardian of quality, ensuring that applications perform as expected. Type I and Type II errors represent critical checkpoints in software testing, influencing the effectiveness of identifying true software defects.

### Understanding Type I and Type II Errors in Software[â](#understanding-type-i-and-type-ii-errors-in-software "Direct link to Understanding Type I and Type II Errors in Software")

* **Type I Error (False Positive)**: Occurs when a software test incorrectly flags a function as failing, despite it working as intended.
* **Type II Error (False Negative)**: Happens when a test overlooks an actual flaw in the software, falsely indicating that everything is functioning properly.

### The Significance for Software Quality[â](#the-significance-for-software-quality "Direct link to The Significance for Software Quality")

* **Type I Error Consequences**: Although false positives can be time-consuming, they are typically less detrimental than Type II errors as they rarely allow defects to go unnoticed.
* **Type II Error Consequences**: False negatives are more critical as they can lead to faulty software being released, which can compromise functionality and user trust.

### Strategies for Reducing Error Risks[â](#strategies-for-reducing-error-risks "Direct link to Strategies for Reducing Error Risks")

Effective strategies to reduce the risk of these errors in software testing include:

* **Enhanced Test Coverage**: Broadening the scope of testing to cover more features and use cases.
* **Automated and Manual Testing**: Leveraging both automated and manual testing approaches to complement each other.
* **Continuous Testing in CI/CD**: Integrating continuous testing in the development pipeline to catch issues early.
* **Real-world User Scenarios**: Incorporating real user testing to identify problems that might not be evident in controlled test environments.

### Conclusion[â](#conclusion "Direct link to Conclusion")

Acknowledging and addressing Type I and Type II errors is a cornerstone of a quality-driven development process. It sharpens the focus on delivering software that not only meets the functional requirements but also upholds the highest standards of reliability.


---

# Version Control - The Backbone of Successful Software Development

## Introduction[â](#introduction "Direct link to Introduction")

In software development, version control is a crucial tool that keeps track of every modification to the code. With version control, developers can easily coordinate updates, prevent conflicts, and ensure that all changes are accurately recorded. This system acts as a historical archive, allowing developers to see past versions of their work and plan future updates. It's an essential part of managing and maintaining a clean and efficient codebase.

## What is Version Control?[â](#what-is-version-control "Direct link to What is Version Control?")

Version control, at its essence, is the practice of tracking and managing changes to software code. It's a system that records changes to a file or set of files over time so that specific versions can be recalled later on. This becomes especially critical as projects grow in complexity and size.

## The Objectives of Version Control[â](#the-objectives-of-version-control "Direct link to The Objectives of Version Control")

* **Change Tracking**: Keeping a detailed record of who changed what, and when.
* **Collaboration**: Coordinating smoothly among teams, especially when multiple people work on the same files.
* **Backup & Restore**: Saving work and recovering from unintended changes or errors.
* **Branching & Merging**: Developing features in parallel and combining changes from different contributors.

## The Version Control Process[â](#the-version-control-process "Direct link to The Version Control Process")

* **Committing Changes**: Developers make changes to their code and then "commit" these changes, which records them in the version control system.
* **Updating**: Synchronizing the local work with the shared repository to keep current with others' work.
* **Branching**: Creating branches allows teams to work on new features without disrupting the main codebase.
* **Merging**: Combining different code branches back into the main branch to unify the codebase.

## Why Version Control is Essential[â](#why-version-control-is-essential "Direct link to Why Version Control is Essential")

* **History and Audit Trail**: A complete log of the changes, comments, and decision-making process.
* **Recovery**: The ability to revert back to previous versions if something goes wrong.
* **Parallel Development**: Multiple streams of work can happen simultaneously without conflict.
* **Accountability**: Clear accountability for each change made in the project.

## Challenges in Version Control[â](#challenges-in-version-control "Direct link to Challenges in Version Control")

* **Merge Conflicts**: Can occur when changes in one branch are incompatible with those in another. **Solution**: Regular merges and automated testing can identify conflicts early.
* **Learning Curve**: Version control systems can be complex. **Solution**: Training and the use of intuitive tools can ease the learning process.
* **Repository Bloat**: Over time, the repository can become unwieldy. **Solution**: Good housekeeping practices, like pruning old branches, can keep the repository clean.

## Conclusion[â](#conclusion "Direct link to Conclusion")

Version control is more than just a tool; it's a foundational practice that supports the complexities and collaborative nature of software development. It's a powerful ally in the developer's quest to build robust, error-free software, making it a pillar of any development team's toolbox. With version control, we chart the past and present, giving us the power to foresee and shape the future of our projects.


---

# What Is a Staging Environment?

When youâre in the process of deploying new code, the possibility that bad code could throw off your rollout and render the whole project a failure may always be at the forefront of your mind.

A staging environment is a natural solution to this problem, allowing you to ensure your code is in tip-top shape before it is deployed.

In this article, weâll explore:

* What a staging environment is, and why itâs important.
* The various components of a staging environment.
* Different types of testing that can be conducted.
* Best practices and potential challenges with staging environments.

## What Is a Staging Environment?[â](#what-is-a-staging-environment "Direct link to What Is a Staging Environment?")

A staging environment is a dry run for your code under the closest possible parameters to its real-world application. It is a near-perfect replica of the servers, infrastructure, architecture, and application of the actual use environment of your code. The key difference is that it is completely walled off from the front-facing actual environment.

## Components of a Staging Environment[â](#components-of-a-staging-environment "Direct link to Components of a Staging Environment")

While a staging environment is a means of testing code, it is distinct from a testing environment as it uses a complete replica setup to test the code in a variety of different, simultaneous ways that would be present in actual applications. To that end, staging environments are made up of a variety of components you wouldnât find in a test environment.

### Hardware and Infrastructure[â](#hardware-and-infrastructure "Direct link to Hardware and Infrastructure")

A staging environment must run as similarly as possible to the codeâs intended environment. Because of this requirement, the hardware and infrastructure of your staging environment need to match the hardware and infrastructure of that intended environment in order to test the code in circumstances as close to real-world as possible.

#### Staging Environment vs. Production Environment[â](#staging-environment-vs-production-environment "Direct link to Staging Environment vs. Production Environment")

The production environment refers to new code that is made live and put in front of its intended users â the final stage of the production life cycle. Since a staging environment runs on the exact same hardware and infrastructure and is subject to the same technical stresses as the production environment, the key difference is the lack of real users.

### Data in Staging[â](#data-in-staging "Direct link to Data in Staging")

The purpose of a staging environment is to collect as much data as possible on the performance and stresses on code before it gets in front of users. The more data you can collect and assess, the better equipped you are to find issues and resolve them before your product goes live.

## The Importance of a Staging Environment[â](#the-importance-of-a-staging-environment "Direct link to The Importance of a Staging Environment")

We can see how a staging environment that is set up well and part of a robust testing schedule is a fundamental step in getting new code user-ready. However, what are the key benefits a staging environment offers?

### Catching Bugs Early[â](#catching-bugs-early "Direct link to Catching Bugs Early")

Buggy code can be an absolute disaster, and the worst-case scenario is a catastrophic issue being discovered after deployment to the intended users. Obviously, having an environment in which you can put code under the pressures of the actual hardware and architecture it has to run on has a lot of benefits in catching bugs early.

### Testing New Features[â](#testing-new-features "Direct link to Testing New Features")

Rolling out new code could mean a completely new product built from the ground up. It could also mean adding new functionality to existing code. A staging environment allows you to test how new features interact with the pre-existing product and develop solutions to any incompatibilities before they go live.

### Preparing for Scalability[â](#preparing-for-scalability "Direct link to Preparing for Scalability")

If you imagine a staging environment as a model of your real-world coding environment, then using it as an opportunity to see how your code behaves as you scale it up across multiple platforms or applications is a key feature of the process.

## Types of Testing in a Staging Environment[â](#types-of-testing-in-a-staging-environment "Direct link to Types of Testing in a Staging Environment")

A staging environment offers a lot of different opportunities to test a range of features and capabilities of your code. Some are simple tests that will be clear as soon as you deploy the product to your staging environment, while others require a direct effort to test.

### Integration Testing[â](#integration-testing "Direct link to Integration Testing")

Integration testing is the process of introducing successive pieces of software into an environment and eventually testing how they function in concert with one another. Introducing code systematically into a staging environment allows you to assess how it will operate within existing systems.

### User Acceptance Testing[â](#user-acceptance-testing "Direct link to User Acceptance Testing")

User acceptance testing is a process where software is tested by its intended users. This can take the form of in-house volunteers, developers playing the role of the end-user, or paid test subjects. In any case, user acceptance testing should be carried out in a staging environment to put your code through its paces under realistic conditions.

### Performance & Load Testing[â](#performance--load-testing "Direct link to Performance & Load Testing")

The first thing youâll likely think of when you think of testing your product is performance or load testing. These are the classic tests: How well does the code do what itâs supposed to do? How does it handle multiple requests? How does it handle rapid spikes in use? These tests are all instrumental in determining how your product will cope with day-to-day use.

### Security Testing[â](#security-testing "Direct link to Security Testing")

Security testing in a staging environment gives you the chance to test security features without actually putting any important data or accesses out in the open. This is obviously a good idea if your code deals with sensitive information, but a crucial step for any software or coding product.

### Regression Testing[â](#regression-testing "Direct link to Regression Testing")

Regression testing helps ensure no old bugs raise their ugly head with the introduction of new code. This occasional problem is better assessed and dealt with in a staging environment rather than leaving end users to discover it.

## Best Practices for Effective Staging[â](#best-practices-for-effective-staging "Direct link to Best Practices for Effective Staging")

### Continuous Integration and Delivery[â](#continuous-integration-and-delivery "Direct link to Continuous Integration and Delivery")

A staging environment is an excellent system for managing continuous integration and delivery. This increases efficiency and reliability of code implementation.

### Regular Testing and Monitoring[â](#regular-testing-and-monitoring "Direct link to Regular Testing and Monitoring")

Regular testing and monitoring in a staging environment for each and every new deployment or update keep your project running smoothly without any hiccups. Be sure to devote appropriate time to running multiple tests and reviewing the accompanying data.

### Testing and Debugging[â](#testing-and-debugging "Direct link to Testing and Debugging")

Ensure you run your debugging before the product goes live. The staging environment gives you the best setting in which to perform debugging and testing, and it prepares you for real-world debugging requirements.

## Potential Challenges with Staging Environments[â](#potential-challenges-with-staging-environments "Direct link to Potential Challenges with Staging Environments")

While staging environments are an integral tool in any development process, there are a handful of challenges you need to be aware of when implementing this stage of development. These challenges include:

* Data synchronization and drift challenges
* Resource limitations and contention
* Configuration discrepancies and version control
* Delayed bug detection and testing scalability
* Security vulnerabilities and collaboration bottlenecks.

Understanding how these challenges can arise and experimenting within the staging environment to find solutions to them is a normal part of the staging environment process, and is worth investing time and effort into before the product goes live.

## A Handy Tool in the Development Process: Closing Thoughts[â](#a-handy-tool-in-the-development-process-closing-thoughts "Direct link to A Handy Tool in the Development Process: Closing Thoughts")

As weâve covered, a staging environment is a handy tool in the development process of any coding project. It gives you the flexibility to experiment with solutions, the opportunity to prepare for potential bugs, and the best chance of success by working in a similar environment to your final product. Taking advantage of the value that a staging environment brings will make your project rollout smoother, more efficient, and the highest quality it can be.


---

# Amplitude - Add feature flag changes to your charts

## Overview[â](#overview "Direct link to Overview")

There are two available integration opportunities between ConfigCat and Amplitude:

* [Monitoring your feature flag change events in Amplitude with Annotations](#annotations)
* [Sending feature flag evaluation analytics to Amplitude Experiments](#experiments)

## Monitoring your feature flag change events in Amplitude with Annotations[â](#annotations "Direct link to Monitoring your feature flag change events in Amplitude with Annotations")

Every feature flag change in ConfigCat is annotated on the Amplitude charts as a vertical line and some details are added automatically about the change.

![amplitude\_chart](/docs/assets/amplitude_chart.png)

### Installation[â](#installation "Direct link to Installation")

1. Have an [Amplitude subscription.](https://www.amplitude.com/)
2. Get an [Amplitude API Key and Secret Key.](https://www.docs.developers.amplitude.com/analytics/find-api-credentials/) ![amplitude\_apikey\_secretkey](/docs/assets/amplitude_apikey_secretkey.png)
3. Open the [integrations tab](https://app.configcat.com/product/integrations) on ConfigCat Dashboard.
4. Click on Amplitude's **Connect** button and set your Amplitude API key and Secret key.
5. You're all set. Go ahead and make some changes on your feature flags, then check your charts in Amplitude.

### Un-installation[â](#un-installation "Direct link to Un-installation")

1. Open the [integrations tab](https://app.configcat.com/product/integrations) on ConfigCat Dashboard.
2. Click on Amplitude's **Connected** button.
3. Select the connection from the **Connected** dropdown.
4. Click the **Disconnect** button in the edit dialog.
5. Click **Yes** in the confirmation dialog.

### Chart Annotation[â](#chart-annotation "Direct link to Chart Annotation")

Every annotation sent to Amplitude by ConfigCat has:

* **Name:** A brief summary of the change.
* **Description:** A direct link to the Product/Config/Environment of the feature flag in ConfigCat.

![amplitude\_annotation](/docs/assets/amplitude_annotation.png)

## Sending feature flag evaluation analytics to Amplitude Experiments[â](#experiments "Direct link to Sending feature flag evaluation analytics to Amplitude Experiments")

Ensures that feature flag evaluations are logged into [Amplitude Experiments](https://amplitude.com/docs/experiment/). With this integration, you can have advanced analytics about your feature flag usages, A/B test results.

### Setup[â](#setup "Direct link to Setup")

1. **Install SDKs:** Add both the ConfigCat SDK and Amplitude SDK to your application.

2. **Configure SDKs:**

   * **ConfigCat SDK:** Initialize with your ConfigCat SDK key.
   * **Amplitude SDK:** Set up with your Amplitude ApiKey.

3. **Integrate Feature Flag Evaluations:**

   * During the initialization of the ConfigCat SDK, subscribe to the `flagEvaluated` hook.

   * Send feature flag evaluation data to Amplitude using the `$exposure` event name. Include the following parameters:

     <!-- -->

     * `flag_key`: the feature flag's key.
     * `variant`: the evaluated feature flag's value or variation ID
     * `variation_id` (optional): the evaluated feature flag's variation ID

   * You can use the [Identify API](https://www.docs.developers.amplitude.com/analytics/apis/identify-api/) in Amplitude to enrich all your events with feature flag metadata. This way you can easily group/filter your existing Amplitude events by feature flag evaluations.

Code samples:

* JavaScript, Node, SSR
* React
* Python
* Go
* Java
* Android
* Swift (iOS)
* Other languages

```
const configCatClient = configcat.getClient("#YOUR_SDK_KEY", PollingMode.AutoPoll, {
    setupHooks: (hooks) =>
        hooks.on('flagEvaluated', evaluationDetails => {
            // Send an `$exposure` event.
            amplitude.track('$exposure',
                {
                    'flag_key': evaluationDetails.key,
                    'variant': evaluationDetails.value,
                    'variation_id': evaluationDetails.variationId
                });

            // Use the identify API.
            const identifyEvent = new amplitude.Identify();
            identifyEvent.set("configcat_" + evaluationDetails.key, evaluationDetails.value);
            amplitude.identify(identifyEvent);
        }),
});
```

```
<ConfigCatProvider
  sdkKey="#YOUR_SDK_KEY"
  pollingMode={PollingMode.AutoPoll}
  options={{
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', evaluationDetails => {
         // Send an `$exposure` event.
         amplitude.track('$exposure',
               {
                  'flag_key': evaluationDetails.key,
                  'variant': evaluationDetails.value,
                  'variation_id': evaluationDetails.variationId
               });

         // Use the identify API.
         const identifyEvent = new amplitude.Identify();
         identifyEvent.set("configcat_" + evaluationDetails.key, evaluationDetails.value);
         amplitude.identify(identifyEvent);
      }),
  }}
>
</ConfigCatProvider>
```

```
def on_flag_evaluated(evaluation_details):
   # Send an `$exposure` event.
   amplitude.track(
      BaseEvent(
         event_type="$exposure",
         user_id=evaluation_details.user.get_identifier(),
         event_properties={
            "flag_key": evaluation_details.key,
            "variant": evaluation_details.value,
            "variation_id": evaluation_details.variation_id
         }
   ))

   # Use the identify API.
   identify_obj=Identify()
   identify_obj.set(f'configcat_{evaluationDetails.key}', evaluation_details.value)
   amplitude.identify(identify_obj, EventOptions(user_id=evaluation_details.user.get_identifier()))
   pass

client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        hooks=Hooks(on_flag_evaluated=on_flag_evaluated)
    )
)
```

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
    Hooks: &configcat.Hooks{OnFlagEvaluated: func(details *configcat.EvaluationDetails) {
         // Send an `$exposure` event.
         amplitude.Track(amplitude.Event{
            UserID:    details.Data.User.(*configcat.UserData).Identifier,
            EventType: "$exposure",
            EventProperties: map[string]interface{}{
               "flag_key": details.Data.Key,
               "variant": details.Value,
               "variation_id": details.Data.VariationID,
            },
         })
        
         // Use the identify API.
         identifyObj := amplitude.Identify{}
         identifyObj.Set("configcat_" + details.Data.Key, details.Value)
         amplitude.Identify(identifyObj, amplitude.EventOptions{UserID: details.Data.User.(*configcat.UserData).Identifier})
    }}})
```

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
   options.hooks().addOnFlagEvaluated(details -> {
      // Send an `$exposure` event.
      JSONObject eventProps = new JSONObject();
      eventProps.put("flag_key", details.getKey());
      eventProps.put("variant", details.getValue());
      eventProps.put("variation_id", details.getVariationId());
      Event event = new Event("$exposure", details.getUser().getIdentifier());
      amplitude.logEvent(event);

      // Use the identify API.
      JSONObject userProps = new JSONObject();
      userProps.put("configcat_" + details.getKey(), details.getValue());
      Event updateUser = new Event("$identify", details.getUser().getIdentifier());
      updateUser.userProperties = userProps;
      amplitude.logEvent(event);
   });
});
```

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
   options.hooks().addOnFlagEvaluated(details -> {
      // Send an `$exposure` event.
      amplitude.track(
         "$exposure",
         mutableMapOf<String, Any?>(
            "flag_key" to details.getKey(), 
            "variant" to details.getValue(), 
            "variation_id" to details.getVariationId()
      ))

      // Use the identify API.
      val identify = Identify()
      identify.set("configcat_" + details.getKey(), details.getValue())
    });
});
```

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
   options.hooks.addOnFlagEvaluated { details in
      // Send an `$exposure` event.
      let event = BaseEvent(
         eventType: "$exposure", 
         eventProperties: [
            "flag_key": details.key,
            "variant": details.value,
            "variation_id": details.variationId ?? ""
         ]
      )

      // Use the identify API.
      let identify = Identify()
      identify.set(property: "configcat_" + details.key, value: details.value)
      amplitude.identify(identify: identify)
   }
}
```

While our documentation primarily provides code examples for languages that Amplitude natively supports and has an official SDK, you can integrate with other languages by sending an event to Amplitude with a third-party SDK or with using the [Amplitude's Upload request API](https://www.docs.developers.amplitude.com/analytics/apis/http-v2-api/#upload-request).

1. **Subscribe to the FlagEvaluated hook** in the ConfigCat SDK.

2. **Send an event to Amplitude** using the `$exposure` event name. Include the following event properties:

   <!-- -->

   * `flag_key`: the feature flag's key from the FlagEvaluated hook's EvaluationDetails
   * `variant`: the evaluated feature flag's value or the variationId from the FlagEvaluated hook's EvaluationDetails
   * `variation_id`: the evaluated feature flag's value or the variationId from the FlagEvaluated hook's EvaluationDetails
   * `user_id` (optional): in case you are using the tracking in a backend component or you don't identify all your event sendings to Amplitude with user details, you have to send the `user_id` property as well to identify your user. You can use the User object's Identifier property from the FlagEvaluated hook or a value that best describes your user.

note

For Text feature flags with lengthy values (e.g., JSON), send the `variationId` instead of the `value` as the `variant` to Amplitude. The `variationId` is a hashed version of the feature flag value, accessible on the ConfigCat Dashboard by enabling the *Show VariationIDs to support A/B testing* setting. Learn more [here](https://app.configcat.com/product/preferences).

4. Deploy your application and wait for feature flag evaluations to happen so Experiments in Amplitude could be populated.

### Usage with Experiments[â](#usage-with-experiments "Direct link to Usage with Experiments")

Check your Experiments page in Amplitude and select your feature flag as the Experiment.

### Usage with custom chart[â](#usage-with-custom-chart "Direct link to Usage with custom chart")

If you don't have access to the Experiments feature in Amplitude, you can create a custom chart based on the `Exposure` event. You can filter for your feature flag keys with the `Flag Key` property and visualize the different variants by using the `Variant` property as a Breakdown. Example:

![Amplitude custom chart](/docs/assets/amplitude/customchart.png)

### Usage with enriched user properties for your custom events.[â](#usage-with-enriched-user-properties-for-your-custom-events "Direct link to Usage with enriched user properties for your custom events.")

If you use the [Identify API](https://www.docs.developers.amplitude.com/analytics/apis/identify-api/) approach, you'll be able to use the feature flag evaluation data in your current reports. You can Group Segments by your feature flag evaluations:

![Amplitude chart with enriched data](/docs/assets/amplitude/enriched.png)

## Useful Resources[â](#useful-resources "Direct link to Useful Resources")

* [A/B Testing in Android Kotlin with ConfigCat and Amplitude - Blog post](https://configcat.com/blog/2023/06/09/how-to-ab-test-kotlin/)
* [Discover User Insights with Amplitude and ConfigCat - Blog post](https://configcat.com/blog/2024/09/24/user-insights-amplitude-configcat/)
* [A/B testing in React with Amplitude and ConfigCat - Blog post](https://configcat.com/blog/2022/05/18/measuring-the-impact-of-a-test-variation-in-react/)
* [A/B Testing in iOS with Feature Flags and Amplitude](https://configcat.com/blog/2023/01/24/how-to-implement-ab-testing-in-ios/)
* [ConfigCat Integrations API](https://configcat.com/docs/api/reference/integrations/)


---

# Bitbucket - Scan your code for feature flag usages

ConfigCat's<!-- --> [Bitbucket Pipe](https://bitbucket.org/product/features/pipelines/integrations?p=configcat/scan-repository-pipe) <!-- -->has the ability to scan your source code for feature flag and setting usages and upload the found code references to ConfigCat.

This feature makes the elimination of the technical debt easier, as it can show which repositories reference your feature flags and settings in one centralized place on your [Dashboard](https://app.configcat.com).

[Here](https://configcat.com/docs/docs/advanced/code-references/overview/.md) you can find more details about how this feature works.

This section describes how to use ConfigCat's [Bitbucket Pipe](https://bitbucket.org/product/features/pipelines/integrations?p=configcat/scan-repository-pipe) to automatically scan your source code for feature flag and setting usages and upload the found code references to ConfigCat. You can find more information about Bitbucket Pipelines [here](https://bitbucket.org/product/features/pipelines).

## Setup[â](#setup "Direct link to Setup")

1. Create a new [ConfigCat Management API credential](https://app.configcat.com/my-account/public-api-credentials) and store its values in secure pipeline variables with the following names: `CONFIGCAT_API_USER`, `CONFIGCAT_API_PASS`.

   ![Bitbucket Pipe secrets](/docs/assets/cli/scan/pipe_secrets.png)

2. Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

3. Add the following snippet to the script section of your `bitbucket-pipelines.yml` file. Don't forget to replace the `PASTE-YOUR-CONFIG-ID-HERE` value with your actual Config ID.

   ```
   - pipe: configcat/scan-repository-pipe:1.8.1
     variables:
       CONFIG_ID: 'PASTE-YOUR-CONFIG-ID-HERE'
       # LINE_COUNT: '3'         # optional
       # TIMEOUT: '1800'         # optional
       # SUB_FOLDER: '/src'      # optional
       # EXCLUDE_KEYS: >         # optional
       #   flag_key_to_exclude_1
       #   flag_key_to_exclude_2
       # ALIAS_PATTERNS: (\w+) = :CC_KEY,const (\w+) = feature_flags\.enabled\(:CC_KEY\)  # optional
       # USAGE_PATTERNS: feature_flags\.enabled\(:CC_KEY\)
       # VERBOSE: 'true'         # optional
   ```

4. Commit & push your changes.

Scan reports are uploaded for each branch of your repository that triggers the job.

## Available Options[â](#available-options "Direct link to Available Options")

| Parameter            | Description                                                                                                                                                                             | Required | Default             |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------------------- |
| `CONFIG_ID`          | ID of the ConfigCat config to scan against.                                                                                                                                             | â        |                     |
| `CONFIGCAT_API_HOST` | ConfigCat Management API host.                                                                                                                                                          |          | `api.configcat.com` |
| `LINE_COUNT`         | Context line count before and after the reference line. (min: 1, max: 10)                                                                                                               |          | 4                   |
| `TIMEOUT`            | Scan timeout in seconds (default: 1800, min: 60). If the scan does not finish within this time, it is aborted. No partial results are returned. The command exits with a timeout error. |          | 1800                |
| `SUB_FOLDER`         | Sub-folder to scan, relative to the repository root folder.                                                                                                                             |          |                     |
| `EXCLUDE_KEYS`       | List of feature flag keys that must be excluded from the scan report.                                                                                                                   |          |                     |
| `ALIAS_PATTERNS`     | Comma delimited list of custom regex patterns used to search for additional aliases.                                                                                                    |          |                     |
| `USAGE_PATTERNS`     | Comma delimited list of custom regex patterns that describe additional feature flag key usages.                                                                                         |          |                     |
| `VERBOSE`            | Turns on detailed logging.                                                                                                                                                              |          | false               |


---

# Bitrise - Scan your code for feature flag usages

ConfigCat's<!-- --> [Bitrise Step](https://www.bitrise.io/integrations/steps/configcat-feature-flag-sync) <!-- -->has the ability to scan your source code for feature flag and setting usages and upload the found code references to ConfigCat.

This feature makes the elimination of the technical debt easier, as it can show which repositories reference your feature flags and settings in one centralized place on your [Dashboard](https://app.configcat.com).

[Here](https://configcat.com/docs/docs/advanced/code-references/overview/.md) you can find more details about how this feature works.

This section describes how to use ConfigCat's [Bitrise Step](https://www.bitrise.io/integrations/steps/configcat-feature-flag-sync) to automatically scan your source code for feature flag and setting usages and upload the found code references to ConfigCat. [Bitrise](https://www.bitrise.io/) is full-featured mobile CI/CD platform. You can find more information about Bitrise Steps [here](https://devcenter.bitrise.io/en/steps-and-workflows/introduction-to-steps.html).

## Setup[â](#setup "Direct link to Setup")

1. Create a new [ConfigCat Management API credential](https://app.configcat.com/my-account/public-api-credentials) and store its values in secure pipeline variables with the following names: `CONFIGCAT_API_USER`, `CONFIGCAT_API_PASS`.

   ![Bitrise secrets](/docs/assets/cli/scan/bitrise_secrets.png)

2. Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

3. Add the following step to the workflows section of your `bitrise.yml` file. Don't forget to replace the `PASTE-YOUR-CONFIG-ID-HERE` value with your actual Config ID.

   ```
   - configcat-feature-flag-sync@0:
     inputs:
       - configcat_config_id: 'PASTE-YOUR-CONFIG-ID-HERE' # required
       # - line-count: 3           # optional
       # - sub-folder: 'src'       # optional
       # - exclude-keys: >         # optional
       #   flag_key_to_exclude_1
       #   flag_key_to_exclude_2
       # - alias-patterns: "(\w+) = :CC_KEY,const (\w+) = feature_flags\.enabled\(:CC_KEY\)" # optional
       # - usage-patterns: feature_flags\.enabled\(:CC_KEY\)   # optional
       # - verbose: true           # optional
   ```

4. Commit & push your changes.

Scan reports are uploaded for each branch of your repository that triggers the job.

## Available Options[â](#available-options "Direct link to Available Options")

| Parameter             | Description                                                                                                                                                                   | Required | Default             |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------------------- |
| `configcat_config_id` | The [config ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id) tells the step which feature flags it should search for in your source code. | â        |                     |
| `configcat_api_host`  | ConfigCat Management API host.                                                                                                                                                |          | `api.configcat.com` |
| `line_count`          | Code snippet line count before and after the reference line. (min: 1, max: 10)                                                                                                |          | 4                   |
| `sub_folder`          | Sub-folder to scan, relative to the repository root folder.                                                                                                                   |          |                     |
| `exclude-keys`        | List of feature flag keys that must be excluded from the scan report.                                                                                                         |          |                     |
| `alias-patterns`      | Comma delimited list of custom regex patterns used to search for additional aliases.                                                                                          |          |                     |
| `usage-patterns`      | Comma delimited list of custom regex patterns that describe additional feature flag key usages.                                                                               |          |                     |
| `verbose`             | Turns on detailed logging.                                                                                                                                                    |          | false               |


---

# CircleCI - Scan your code for feature flag usages

ConfigCat's<!-- --> [CircleCI Orb](https://circleci.com/developer/orbs/orb/configcat/scan-repository) <!-- -->has the ability to scan your source code for feature flag and setting usages and upload the found code references to ConfigCat.

This feature makes the elimination of the technical debt easier, as it can show which repositories reference your feature flags and settings in one centralized place on your [Dashboard](https://app.configcat.com).

[Here](https://configcat.com/docs/docs/advanced/code-references/overview/.md) you can find more details about how this feature works.

This section describes how to use ConfigCat's [CircleCI Orb](https://circleci.com/developer/orbs/orb/configcat/scan-repository) to automatically scan your source code for feature flag and setting usages and upload the found code references to ConfigCat. You can find more information about CircleCI Orbs [here](https://circleci.com/orbs/).

## Setup[â](#setup "Direct link to Setup")

1. Create a new [ConfigCat Management API credential](https://app.configcat.com/my-account/public-api-credentials) and store its values in [CircleCI Environment Variables](https://circleci.com/docs/2.0/env-vars/#setting-an-environment-variable-in-a-project) with the following names: `CONFIGCAT_API_USER`, `CONFIGCAT_API_PASS`.

   ![CircleCI Orb secrets](/docs/assets/cli/scan/cco_secrets.png)

2. Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

3. Create a new CircleCI YAML config in your repository under the `.circleci` folder, and put the following snippet into it. Don't forget to replace the `PASTE-YOUR-CONFIG-ID-HERE` value with your actual Config ID.

   ```
   version: 2.1

   orbs:
     configcat: configcat/scan-repository@1.11.1

   workflows:
     main:
       jobs:
         - configcat/scan:
             config-id: PASTE-YOUR-CONFIG-ID-HERE # required
             file-url-template: 'https://github.com/your/repo/blob/{commitHash}/{filePath}#L{lineNumber}' # optional
             commit-url-template: 'https://github.com/your/repo/commit/{commitHash}' # optional
             # line-count: 3           # optional
             # timeout: 1800           # optional
             # sub-folder: 'src'       # optional
             # exclude-keys: >         # optional
             #   flag_key_to_exclude_1
             #   flag_key_to_exclude_2
             # alias-patterns: (\w+) = :CC_KEY,const (\w+) = feature_flags\.enabled\(:CC_KEY\) # optional
             # usage-patterns: feature_flags\.enabled\(:CC_KEY\)   # optional
             # verbose: true           # optional
   ```

4. Commit & push your changes.

The above example configures a workflow that executes the scan and code reference upload on every git `push` event. Scan reports are uploaded for each branch of your repository that triggers the workflow.

## Available Options[â](#available-options "Direct link to Available Options")

| Parameter             | Description                                                                                                                                                                                           | Required | Default              |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | -------------------- |
| `config-id`           | ID of the ConfigCat config to scan against.                                                                                                                                                           | â        |                      |
| `api-host`            | ConfigCat Management API host.                                                                                                                                                                        |          | `api.configcat.com`  |
| `api-user`            | Name of the environment variable where the [ConfigCat Management API basic authentication username](https://app.configcat.com/my-account/public-api-credentials) is stored.                           |          | CONFIGCAT\_API\_USER |
| `api-pass`            | Name of the environment variable where the [ConfigCat Management API basic authentication password](https://app.configcat.com/my-account/public-api-credentials) is stored.                           |          | CONFIGCAT\_API\_PASS |
| `file-url-template`   | Template url used to generate VCS file links. Available template parameters: `commitHash`, `filePath`, `lineNumber`. Example: `https://github.com/my/repo/blob/{commitHash}/{filePath}#L{lineNumber}` |          |                      |
| `commit-url-template` | Template url used to generate VCS commit links. Available template parameters: `commitHash`. Example: `https://github.com/my/repo/commit/{commitHash}`                                                |          |                      |
| `line-count`          | Context line count before and after the reference line. (min: 1, max: 10)                                                                                                                             |          | 4                    |
| `timeout`             | Scan timeout in seconds (default: 1800, min: 60). If the scan does not finish within this time, it is aborted. No partial results are returned. The command exits with a timeout error.               |          | 1800                 |
| `sub-folder`          | Sub-folder to scan, relative to the repository root folder.                                                                                                                                           |          |                      |
| `exclude-keys`        | List of feature flag keys that must be excluded from the scan report.                                                                                                                                 |          |                      |
| `alias-patterns`      | Comma delimited list of custom regex patterns used to search for additional aliases.                                                                                                                  |          |                      |
| `usage-patterns`      | Comma delimited list of custom regex patterns that describe additional feature flag key usages.                                                                                                       |          |                      |
| `verbose`             | Turns on detailed logging.                                                                                                                                                                            |          | false                |


---

# Datadog - Monitor your feature flags events

## Overview[â](#overview "Direct link to Overview")

Monitor feature flag events in real-time. Feature flag changes will appear as events in Datadog, tagged with relevant product, config, and environment details.

![Feature flag events logged to Datadog](/docs/assets/datadog-event_192dpi.png)

## Installation[â](#installation "Direct link to Installation")

1. Have a [Datadog subscription.](https://www.datadoghq.com/)
2. Get a [Datadog API Key.](https://docs.datadoghq.com/account_management/api-app-keys/#api-keys)

![Datadog API Key](/docs/assets/datadog-apikey_192dpi.png)

3. Open the [integrations tab](https://app.configcat.com/product/integrations) on ConfigCat Dashboard.
4. Click on Datadog's **Connect** button and set your Datadog API key.
5. OPTIONAL - Set the proper site of your Datadog account. [More about Datadog site](https://docs.datadoghq.com/getting_started/site/).
6. You're all set. Go ahead and make some changes on your feature flags, then check your Events in Datadog.

## Un-installation[â](#un-installation "Direct link to Un-installation")

1. Open the [integrations tab](https://app.configcat.com/product/integrations) on ConfigCat Dashboard.
2. Click on Datadog's **Connected** button.
3. Select the connection from the **Connected** dropdown.
4. Click the **Disconnect** button in the edit dialog.
5. Click **Yes** in the confirmation dialog.

## Event details[â](#event-details "Direct link to Event details")

Every event sent to Datadog by ConfigCat has a *source* property of `configcat` and *tagged* with the `product_name`, `config_name` and `environment_name` where the change has happened.

### Searching for Events[â](#searching-for-events "Direct link to Searching for Events")

For example here is how to search for events that happened in the production environment: `sources:configcat production`

![Filtering feature flag change events](/docs/assets/datadog-filtering_192dpi.png)

## Useful Resources[â](#useful-resources "Direct link to Useful Resources")

* [How to send feature flag change notifications to DataDog - Blog Post](https://configcat.com/blog/2021/03/17/connect-configcat-and-datadog/)
* [ConfigCat Integrations API](https://configcat.com/docs/api/reference/integrations/)


---

# GitHub Action - Scan your code for feature flag usages

ConfigCat's<!-- --> [GitHub Action](https://github.com/marketplace/actions/configcat-scan-repository) <!-- -->has the ability to scan your source code for feature flag and setting usages and upload the found code references to ConfigCat.

This feature makes the elimination of the technical debt easier, as it can show which repositories reference your feature flags and settings in one centralized place on your [Dashboard](https://app.configcat.com).

[Here](https://configcat.com/docs/docs/advanced/code-references/overview/.md) you can find more details about how this feature works.

This section describes how to use ConfigCat's [GitHub Action](https://github.com/marketplace/actions/configcat-scan-repository) to automatically scan your source code for feature flag and setting usages and upload the found code references to ConfigCat. You can find more information about GitHub Actions [here](https://github.com/features/actions).

## Setup[â](#setup "Direct link to Setup")

1. Create a new [ConfigCat Management API credential](https://app.configcat.com/my-account/public-api-credentials) and store its values in your repository's [GitHub Secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-a-repository) with the following names: `CONFIGCAT_API_USER`, `CONFIGCAT_API_PASS`.

   ![Github Action secrets](/docs/assets/cli/scan/gh_secrets.png)

2. Get your selected [Config's ID](https://configcat.com/docs/docs/advanced/code-references/overview/.md#config-id).

3. Create a new Actions workflow in your GitHub repository under the `.github/workflows` folder, and put the following snippet into it. Don't forget to replace the `PASTE-YOUR-CONFIG-ID-HERE` value with your actual Config ID.

   ```
   on: [push]
   name: Code references
   jobs:
     scan-repo:
       runs-on: ubuntu-latest
       name: Scan repository for code references
       steps:
         - name: Checkout
           uses: actions/checkout@v3
         - name: Scan & upload
           uses: configcat/scan-repository@v2
           with:
             api-user: ${{ secrets.CONFIGCAT_API_USER }}
             api-pass: ${{ secrets.CONFIGCAT_API_PASS }}
             config-id: PASTE-YOUR-CONFIG-ID-HERE
             # line-count: 5             # optional
             # timeout: 1800             # optional
             # sub-folder: src           # optional
             # exclude-keys: >           # optional
             #   flag_key_to_exclude_1
             #   flag_key_to_exclude_2
             # alias-patterns: (\w+) = :CC_KEY,const (\w+) = feature_flags\.enabled\(:CC_KEY\) #optional
             # usage-patterns: feature_flags\.enabled\(:CC_KEY\)   # optional, comma delimited flag key usage patterns
             # verbose: true             # optional
   ```

4. Commit & push your action.

The above example configures a workflow that executes the scan and code references upload on every git `push` event. Scan reports are uploaded for each branch of your repository that triggers the workflow.

## Available Options[â](#available-options "Direct link to Available Options")

| Parameter        | Description                                                                                                                                                                             | Required | Default             |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------------------- |
| `config-id`      | ID of the ConfigCat config to scan against.                                                                                                                                             | â        |                     |
| `api-user`       | [ConfigCat Management API basic authentication username](https://app.configcat.com/my-account/public-api-credentials).                                                                  | â        |                     |
| `api-pass`       | [ConfigCat Management API basic authentication password](https://app.configcat.com/my-account/public-api-credentials).                                                                  | â        |                     |
| `api-host`       | ConfigCat Management API host.                                                                                                                                                          |          | `api.configcat.com` |
| `line-count`     | Context line count before and after the reference line. (min: 1, max: 10)                                                                                                               |          | 4                   |
| `timeout`        | Scan timeout in seconds (default: 1800, min: 60). If the scan does not finish within this time, it is aborted. No partial results are returned. The command exits with a timeout error. |          | 1800                |
| `sub-folder`     | Sub-folder to scan, relative to the repository root folder.                                                                                                                             |          |                     |
| `exclude-keys`   | List of feature flag keys that must be excluded from the scan report.                                                                                                                   |          |                     |
| `alias-patterns` | Comma delimited list of custom regex patterns used to search for additional aliases.                                                                                                    |          |                     |
| `usage-patterns` | Comma delimited list of custom regex patterns that describe additional feature flag key usages.                                                                                         |          |                     |
| `verbose`        | Turns on detailed logging.                                                                                                                                                              |          | false               |


---

# Google Analytics - Send feature flag analytics to Google Analytics

## Sending Feature Flag Evaluation Analytics to Google Analytics[â](#sending-feature-flag-evaluation-analytics-to-google-analytics "Direct link to Sending Feature Flag Evaluation Analytics to Google Analytics")

Integrate your feature flag evaluations with [Google Analytics experiments](https://developers.google.com/analytics/devguides/collection/ga4/integration) to gain advanced insights into how your features are used and to assess the outcomes of A/B tests.

### Setup Instructions[â](#setup-instructions "Direct link to Setup Instructions")

1. **Install SDKs:** Add both the ConfigCat SDK and the Google Analytics SDK to your application.

2. **Configure SDKs:**

   * **ConfigCat SDK:** Initialize with your ConfigCat SDK key.
   * **Google Analytics SDK:** Set up with your Google Analytics measurement ID.

3. **Integrate Feature Flag Evaluations:**

   * During the initialization of the ConfigCat SDK, subscribe to the `flagEvaluated` hook.
   * Send feature flag evaluation data to Google Analytics using the `experience_impression` event name. Include the following parameter:
     <!-- -->
     * `exp_variant_string`: Construct this string to include the tool name (`configcat`), the feature flag's key, and its value. For example: `configcat-isMyAwesomeFeatureEnabled-true`.

Code samples:

* JavaScript, SSR
* React
* Other languages

```
const configCatClient = configcat.getClient("#YOUR_SDK_KEY", PollingMode.AutoPoll, {
    setupHooks: (hooks) =>
        hooks.on('flagEvaluated', evaluationDetails => {
            const variant = "configcat-" + evaluationDetails.key + "-" + evaluationDetails.value;
            gtag('event', 'experience_impression',
                {
                    'exp_variant_string': variant,
                    'variation_id': evaluationDetails.variationId
                });
        }),
});
```

```
<ConfigCatProvider
  sdkKey="#YOUR_SDK_KEY"
  pollingMode={PollingMode.AutoPoll}
  options={{
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', evaluationDetails => {
        const variant = "configcat-" + evaluationDetails.key + "-" + evaluationDetails.value;
        gtag('event', 'experience_impression',
            {
                'exp_variant_string': variant,
                'variation_id': evaluationDetails.variationId
            });
      }),
  }}
>
</ConfigCatProvider>
```

While our documentation primarily provides code examples for JavaScript-based SDKs, you can integrate with other languages by utilizing the [Send Measurement Protocol events to Google Analytics](https://developers.google.com/analytics/devguides/collection/protocol/ga4/sending-events?client_type=gtag) endpoint. Here's how to set it up:

1. **Subscribe to the FlagEvaluated hook** in the ConfigCat SDK.

2. **Send an event to Google Analytics** using the `experience_impression` event name. Include the following event properties:

   <!-- -->

   * `exp_variant_string`: Format this string as `configcat-<feature_flag_key>-<feature_flag_value>`. For example, `configcat-isMyAwesomeFeatureEnabled-true`.
   * `variant_id`: The evaluated feature flag's value or the variationId from the FlagEvaluated hook's EvaluationDetails.
   * `user_id` (optional): If tracking in a backend component and utilizing the user\_id feature in Google Analytics, include this property to identify your user. Use the Identifier property from the User object in the FlagEvaluated hook, or another value that best describes your user.

note

For Text feature flags with lengthy values (e.g., JSON), send the `variationId` instead of the `value` as the `exp_variant_string` to Google Analytics. The `variationId` is a hashed version of the feature flag value, accessible on the ConfigCat Dashboard by enabling the *Show VariationIDs to support A/B testing* setting. Learn more [here](https://app.configcat.com/product/preferences).

4. **Deploy your application** and wait for feature flag evaluations to occur. This process might take 1-2 days for the `experience_impression` events to populate in Google Analytics.

5. **Define an audience** in Google Analytics using the `exp_variant_string` parameter with the same values you used in your events (e.g. `configcat-isMyAwesomeFeatureEnabled-true`) by following the guide [here](https://support.google.com/analytics/answer/9267572). This allows you to leverage feature flag evaluation events effectively.

### Example audiences reports[â](#example-audiences-reports "Direct link to Example audiences reports")

![Google Analytics Audience report](/docs/assets/googleanalytics/audiences.png)

### Useful resources[â](#useful-resources "Direct link to Useful resources")

* [A/B Testing with ConfigCat and Google Analytics - Blog post](https://configcat.com/blog/2024/09/20/ab-testing-configcat-google-analytics/)
* [A/B Testing with ConfigCat and Google Analytics - Sample app](https://github.com/configcat-labs/configcat-google-analytics-integration-sample)
* [Creating Audiences in Google Analytics - Google documentation](https://support.google.com/analytics/answer/9267572)


---

# JetBrains/IntelliJ Plugin - Manage your feature flags from JetBrains/IntelliJ IDEs

[ConfigCat's JetBrains/IntelliJ IDE plugin](https://plugins.jetbrains.com/plugin/26096-configcat-feature-flags) to manage feature flags from IDEs.

Connect your ConfigCat Product and Config to your JetBrains/IntelliJ IDE. Find your Feature Flag's usages in your code easily.

This guide will help you install the JetBrains/IntelliJ IDE Plugin and familiarize you with its usage.

## Feature overview[â](#feature-overview "Direct link to Feature overview")

* View your Feature Flags within the IDE.
* Create Feature Flags within the IDE.
* Open a Feature Flag on the ConfigCat Dashboard.
* Find Feature Flag usages in your code.
* Copy a Feature Flag's key to the clipboard.
* View your Products & Configs.
* Create Configs within the IDE.
* Open a Config on ConfigCat Dashboard.

Your browser does not support the video tag.

## Install plugin[â](#install-plugin "Direct link to Install plugin")

### Install within the IDE from Marketplace[â](#install-within-the-ide-from-marketplace "Direct link to Install within the IDE from Marketplace")

1. In your IDE, open the **File** > **Settings/Preferences** menu.
2. Go to the **Plugin** page and select the **Marketplace** tab.
3. Search for **ConfigCat Feature Flags**.
4. **Install** the plugin.
5. Configure the plugin ([see below](#configure-extension)).

### Install manually within the IDE[â](#install-manually-within-the-ide "Direct link to Install manually within the IDE")

1. Download the latest release from [GitHub](https://github.com/configcat/intellij-plugin/releases/latest) or from [JetBrains Marketplace](https://plugins.jetbrains.com/plugin/26096-configcat-feature-flags).
2. In your IDE, open the **File** > **Settings/Preferences** menu.
3. Go to the **Plugin** page and open the **Gear Icon** menu.
4. Select the **Install plugin from disk...** option.
5. Configure the plugin ([see below](#configure-extension)).

### Compatible IDEs[â](#compatible-ides "Direct link to Compatible IDEs")

The plugin is compatible with the following IDEs. Check the plugin [JetBrains Marketplace](https://plugins.jetbrains.com/plugin/26096-configcat-feature-flags) page for the full, detailed compatibility list.

* Android Studio
* Aqua
* CLion
* DataGrip
* DataSpell
* GoLand
* IntelliJ IDEA (Community & Ultimate)
* MPS
* PhpStorm
* PyCharm (Community & Professional)
* Rider
* RubyMine
* RustRover
* WebStorm
* Writerside

## Configure extension[â](#configure-extension "Direct link to Configure extension")

### Authentication[â](#authentication "Direct link to Authentication")

1. Get your API credentials for [ConfigCat Public Management API](https://app.configcat.com/my-account/public-api-credentials).
2. In your IDE, open the **File** > **Settings/Preferences** menu.
3. Search for **ConfigCat Feature Flags** page.
4. Fill out the **Basic auth user name** and **Basic auth password** inputs.

Your browser does not support the video tag.

### Advanced[â](#advanced "Direct link to Advanced")

This section is for you if you use a dedicated hosted/[on-premise](https://configcat.com/on-premise/) ConfigCat instance. In that case, you can specify your custom ConfigCat URLs in the IDE.

1. In your IDE, open the **File** > **Settings/Preferences** menu.
2. Search for **ConfigCat Feature Flags** page.
3. Fill out the **Public Api Base URL** and **Dashboard Base URL** inputs.

* `Public Api Base URL`: the base URL for the ConfigCat Public Management API. Defaults to: <https://api.configcat.com>.
* `Dashboard Base URL`: the base URL for ConfigCat Dashboard. Defaults to: <https://app.configcat.com>.

## Usage of ConfigCat Feature Flags Plugin[â](#usage-of-configcat-feature-flags-plugin "Direct link to Usage of ConfigCat Feature Flags Plugin")

The ConfigCat Feature Flags Tool Window can be opened by clicking the ConfigCat Feature Flags icon on the side of the IDE main window.

### Feature Flags & Settings tab[â](#feature-flags--settings-tab "Direct link to Feature Flags & Settings tab")

After you successfully configured your ConfigCat account in the **Settings**, you can use the **Feature Flags & Settings** tab and:

* View all of your Products, Configs and Feature Flags.
* Create new Configs and Feature Flags.
* Open your Configs and Feature Flags on the ConfigCat Dashboard.
* Copy a Feature Flag's key to the clipboard.
* Find your Feature Flag's usages in your code.

Your browser does not support the video tag.

#### Create a new Feature Flag[â](#create-a-new-feature-flag "Direct link to Create a new Feature Flag")

1. Select the Config in the tree where you want to create your new flag.
2. Click the **+** button on the action bar to open the **Create Flag** dialog.
3. Select the setting type.
4. Enter the new Feature Flag name.
5. Enter the new Feature Flag key.
6. Add a hint to your Feature Flag (optional).
7. Select **OK** to confirm the Flag creation.

#### Copy a Feature Flag's key to the clipboard[â](#copy-a-feature-flags-key-to-the-clipboard "Direct link to Copy a Feature Flag's key to the clipboard")

1. Select the Feature Flag in the tree whose key you want to copy.
2. Click the **Copy** button on the action bar to copy the key to the clipboard.

#### Open your Feature Flags on the ConfigCat Dashboard[â](#open-your-feature-flags-on-the-configcat-dashboard "Direct link to Open your Feature Flags on the ConfigCat Dashboard")

1. In the tree, select the Feature Flag you want to open in the Dashboard.
2. Click the **Open Config in ConfigCat Dashboard** button on the action bar to open the Feature Flag in the Dashboard.

#### Find your Feature Flag's usages in your code[â](#find-your-feature-flags-usages-in-your-code "Direct link to Find your Feature Flag's usages in your code")

1. Select the Feature Flag in the tree you want to search.
2. Click the **Find Usage** button on the action bar.
3. See the search results in the opened dialog.

#### Create a new Config under a product[â](#create-a-new-config-under-a-product "Direct link to Create a new Config under a product")

1. Select the Products in the tree where you want to create your new config.
2. Click the **+** button on the action bar to open the **Create Config** dialog.
3. Enter a name for the new config.
4. Add a hint to your config (optional).
5. Select **OK** to confirm the Config creation.

#### Open your Configs on the ConfigCat Dashboard[â](#open-your-configs-on-the-configcat-dashboard "Direct link to Open your Configs on the ConfigCat Dashboard")

1. Select the Config which you want to open in the Dashboard.
2. Click the **Open Config in ConfigCat Dashboard** button on the action bar to open the Config in the Dashboard.

info

The actions are available by right click menu as well.

### Help & Feedback Tab[â](#help--feedback-tab "Direct link to Help & Feedback Tab")

The Help & Feedback tab provides quick links to open ConfigCat's Documentation and Dashboard and allows you to report issues.


---

# Jira Cloud Plugin - Manage feature flags from Jira

The [ConfigCat Feature Flags Jira Cloud Plugin](https://marketplace.atlassian.com/1222421) allows you to connect your Jira Issues and feature flags. Create or link existing flags to your Jira issues without leaving your Jira instance.

Turn features On/Off right from a linked Issue on your Jira board. You can also easily modify the linked flags to edit or add new Targeting or Percentage Rules.

This guide will help you with the plugin installation and familiarise you with the plugin usage.

info

This integration is for Jira Cloud. It does not work on Jira Data Center or Jira Server instances.

## Installation[â](#installation "Direct link to Installation")

1. Add [ConfigCat Feature Flags](https://marketplace.atlassian.com/1222421) to your Jira Cloud instance.
2. Select **Configure**.
3. Copy your ConfigCat Public API credentials to the inputs. Read more about [ConfigCat Public API credentials here](https://app.configcat.com/my-account/public-api-credentials).
4. Click **Authorize**.

info

Every Jira user must authorize ConfigCat in Jira who wants to use the ConfigCat Feature Flags Plugin.

Your browser does not support the video tag.

## Usage[â](#usage "Direct link to Usage")

### Linking existing feature flags[â](#linking-existing-feature-flags "Direct link to Linking existing feature flags")

1. Navigate to any Issue on your Jira board.
2. Open the **ConfigCat Feature Flag** issue context.
3. On the **Link existing** tab, select a ConfigCat Product, Config, Environment, and Feature Flag to be linked to your Issue.
4. When linked, you can manage the selected feature flag from this Issue.

Your browser does not support the video tag.

### Creating new feature flags[â](#creating-new-feature-flags "Direct link to Creating new feature flags")

1. Navigate to any Issue on your Jira board.
2. Open the **ConfigCat Feature Flag** issue context.
3. On the **Create and Link** tab, select a ConfigCat Product and Config where you want to create the feature flag.
4. Set up your feature flag.
5. Select which environment you would like to link to this item.
6. When linked, you can manage the selected feature flag from this Issue.

Your browser does not support the video tag.

### View and Edit linked feature flags[â](#view-and-edit-linked-feature-flags "Direct link to View and Edit linked feature flags")

1. Open an Issue on your Jira board with a linked feature flag.
2. See the linked feature flags in the **Feature Flag (ConfigCat)** issue section.
3. You can manage the selected feature flag from this Issue.
4. You can add new Targeting Rules or Percentage Options to Feature Flags.
5. You can add new Targeting Rules with User, Segment or Prerequisite Conditions with a large selection of Comparators. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md)
6. You can remove Targeting Rules as well.

Your browser does not support the video tag.

### Remove linked feature flags[â](#remove-linked-feature-flags "Direct link to Remove linked feature flags")

1. Open an Issue on your Jira board with a linked feature flag.
2. Remove the linked feature flag by opening the **More menu** and selecting the **Remove from Issue** option.

Your browser does not support the video tag.

### View flag status in Releases[â](#view-flag-status-in-releases "Direct link to View flag status in Releases")

1. Open an Issue on your Jira board with a linked feature flag.
2. Check the **Releases** field values in the issue **Details** section to see the linked feature flags status in the Issue.
3. Click it for a more detailed dialog.

Your browser does not support the video tag.

1. Open a version in the Jira project's Release Hub page to see the related issues feature flag status.
2. Click it for a more detailed dialog.

Your browser does not support the video tag.

info

This plugin doesn't implement the **Releases - Create/Connect feature flag** action. Instead, you can create or link feature flags from the ConfigCat Feature Flags section below the Details section of the Issue.

### View linked issues in ConfigCat[â](#view-linked-issues-in-configcat "Direct link to View linked issues in ConfigCat")

1. View linked issues next to your Feature Flags in ConfigCat and jump to the Jira Issue directly.

Your browser does not support the video tag.


---

# Mixpanel - Monitor your feature flag change events and feature flag analytics

## Overview[â](#overview "Direct link to Overview")

There are two available integration opportunities between [ConfigCat and Mixpanel](https://mixpanel.com/partners/integrations/configcat):

* [Monitoring your feature flag change events in Mixpanel with Annotations](#annotations)
* [Sending feature flag evaluation analytics to Mixpanel Experiments](#experiments)

## Monitoring your feature flag change events in Mixpanel with Annotations[â](#annotations "Direct link to Monitoring your feature flag change events in Mixpanel with Annotations")

Ensures that every setting change in ConfigCat is sent to Mixpanel as an [Annotation](https://docs.mixpanel.com/docs/reports/insights#annotations).

![Mixpanel Annotation](/docs/assets/mixpanel/annotation.png)

### Installation[â](#installation "Direct link to Installation")

1. Have a [Mixpanel account](https://mixpanel.com/).
2. Create a Service account that has at least an Analyst role. ![mixpanel\_service\_Account](/docs/assets/mixpanel/service_account.png)
3. Open the [integrations tab](https://app.configcat.com/product/integrations) on the ConfigCat Dashboard.
4. Click on Mixpanel's CONNECT button and set your Mixpanel Service Account's Username, Secret, and your Project ID.
5. OPTIONAL - Set the proper server of your Mixpanel account. [More about Mixpanel servers](https://docs.mixpanel.com/docs/privacy/eu-residency).
6. You're all set. Go ahead and make some changes on your feature flags, then check your annotations in Mixpanel.

### Un-installation[â](#un-installation "Direct link to Un-installation")

1. Open the [integrations tab](https://app.configcat.com/product/integrations) on the ConfigCat Dashboard.
2. Click on Mixpanel's DISCONNECT button.

### Annotation details[â](#annotation-details "Direct link to Annotation details")

Every annotation sent to Mixpanel by ConfigCat has:

* **Integration ID:** configcat.
* **Date:** When the change happened
* **Description:** A brief summary of the change.

## Sending feature flag evaluation analytics to Mixpanel Experiments[â](#experiments "Direct link to Sending feature flag evaluation analytics to Mixpanel Experiments")

Ensures that feature flag evaluations are logged into [Mixpanel Experiments](https://docs.mixpanel.com/docs/reports/apps/experiments). With this integration, you can have advanced analytics about your feature flag usages, A/B test results.

### Setup[â](#setup "Direct link to Setup")

1. **Install SDKs:** Add both the ConfigCat SDK and Mixpanel SDK to your application.

2. **Configure SDKs:**

   * **ConfigCat SDK:** Initialize with your ConfigCat SDK key.
   * **Mixpanel SDK:** Set up with your Mixpanel token.

3. **Integrate Feature Flag Evaluations:**

   * During the initialization of the ConfigCat SDK, subscribe to the `flagEvaluated` hook.

   * Send feature flag evaluation data to Mixpanel using the `$experiment_started` event name. Include the following parameters:

     <!-- -->

     * `Experiment name`: the feature flag's key.
     * `Variant name`: the evaluated feature flag's value or variation ID
     * `Variation ID` (optional): the evaluated feature flag's variation ID

   * You can use the [Identify API](https://docs.mixpanel.com/docs/tracking-methods/id-management/identifying-users) in Mixpanel to enrich all your events with feature flag metadata. This way you can easily group/filter your existing Mixpanel events by feature flag evaluations.

Code samples:

* JavaScript, Node, SSR
* React
* Python
* Ruby
* Go
* Java
* Android
* Swift (iOS)
* Other languages

```
const configCatClient = configcat.getClient("#YOUR_SDK_KEY", PollingMode.AutoPoll, {
    setupHooks: (hooks) =>
        hooks.on('flagEvaluated', evaluationDetails => {
            // Send an `$experiment_started` event.
            mixpanel.track('$experiment_started',
                {
                    'Experiment name': evaluationDetails.key,
                    'Variant name': evaluationDetails.value,
                    'Variation ID': evaluationDetails.variationId
                });
            
            // Use the identify API.
            mixpanel.people.set({ ["configcat_" + evaluationDetails.key]: evaluationDetails.value });
        }),
});
```

```
<ConfigCatProvider
  sdkKey="#YOUR_SDK_KEY"
  pollingMode={PollingMode.AutoPoll}
  options={{
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', evaluationDetails => {
        // Send an `$experiment_started` event.
        mixpanel.track('$experiment_started',
            {
                'Experiment name': evaluationDetails.key,
                'Variant name': evaluationDetails.value,
                'Variation ID': evaluationDetails.variationId
            });
         
        // Use the identify API.
        mixpanel.people.set({ ["configcat_" + evaluationDetails.key]: evaluationDetails.value });
      }),
  }}
>
</ConfigCatProvider>
```

```
def on_flag_evaluated(evaluation_details):
    # Send an `$experiment_started` event.
    mixpanel.track(evaluation_details.user.get_identifier(), '$experiment_started',  {
        'Experiment name': evaluation_details.key,
        'Variant name': evaluation_details.value,
        'Variation ID': evaluation_details.variation_id
    })

    # Use the identify API.
    mixpanel.people_set(evaluation_details.user.get_identifier(), {
        f'configcat_{evaluationDetails.key}': evaluation_details.value,
    })
    pass

client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        hooks=Hooks(on_flag_evaluated=on_flag_evaluated)
    )
)
```

```
def on_flag_evaluated(evaluation_details):
    # Send an `$experiment_started` event.
    mixpanel.track(evaluation_details.user.get_identifier(), "$experiment_started",  {
        "Experiment name": evaluation_details.key,
        "Variant name": evaluation_details.value,
        "Variation ID": evaluation_details.variation_id
    })

    # Use the identify API.
    mixpanel.people.set(evaluation_details.user.get_identifier(), {
        "configcat_#{evaluationDetails.key}" => evaluation_details.value,
    })
end

client = ConfigCat.get("#YOUR-SDK-KEY#",
    ConfigCat::ConfigCatOptions.new(
        hooks: ConfigCat::Hooks.new(on_flag_evaluated: method(:on_flag_evaluated))
    )
)
```

```
mp := mixpanel.NewApiClient("#YOUR-MIXPANEL-PROJECT-TOKEN#")

client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
    Hooks: &configcat.Hooks{OnFlagEvaluated: func(details *configcat.EvaluationDetails) {
        // Send an `$experiment_started` event.
        _ = mp.Track(context.Background(), []*mixpanel.Event{
            mp.NewEvent("$experiment_started", details.Data.User.(*configcat.UserData).Identifier, map[string]any{
                "Experiment name": details.Data.Key,
                "Variant name":    details.Value,
                "Variation ID":    details.Data.VariationID,
            }),
        })

        // Use the identify API.
        _ = mp.PeopleSet(context.Background(),
            []*mixpanel.PeopleProperties{
                mixpanel.NewPeopleProperties(details.Data.User.(*configcat.UserData).Identifier, map[string]any{
                    "configcat_" + details.Data.Key: details.Value,
                }),
            },
        )
    }}})
```

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.hooks().addOnFlagEvaluated(details -> {
        // Send an `$experiment_started` event.
        JSONObject eventProps = new JSONObject();
        eventProps.put("Experiment name", details.getKey());
        eventProps.put("Variant name", details.getValue());
        eventProps.put("Variation ID", details.getVariationId());
        JSONObject event = messageBuilder.event(details.getUser().getIdentifier(), "$experiment_started", eventProps);
        mixpanel.sendMessage(event);

        // Use the identify API.
        JSONObject userProps = new JSONObject();
        userProps.put("configcat_" + details.getKey(), details.getValue());
        JSONObject updateUser = messageBuilder.set(details.getUser().getIdentifier(), userProps);
        mixpanel.sendMessage(updateUser);
    });
});
```

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.hooks().addOnFlagEvaluated(details -> {
        // Send an `$experiment_started` event.
        JSONObject eventProps = new JSONObject();
        eventProps.put("Experiment name", details.getKey());
        eventProps.put("Variant name", details.getValue());
        eventProps.put("Variation ID", details.getVariationId());
        mixpanel.track("$experiment_started", eventProps);

        // Use the identify API.
        mixpanel.getPeople().set("configcat_" + details.getKey(), details.getValue());
    });
});
```

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.hooks.addOnFlagEvaluated { details in
        // Send an `$experiment_started` event.
        Mixpanel.mainInstance().track(event:"$experiment_started", properties: [
            "Experiment name": details.key,
            "Variant name": details.value,
            "Variation ID": details.variationId ?? "",
        ])
        
        // Use the identify API.
        let keyProperty = "configcat_" + details.Data.Key;
        Mixpanel.mainInstance().people.set(properties: [ keyProperty: details.value])
    }
}
```

While our documentation primarily provides code examples for languages that Mixpanel natively supports and has an official SDK, you can integrate with other languages by sending an event to Mixpanel with a third-party SDK or with using the [Mixpanel's Track Events API](https://developer.mixpanel.com/reference/track-event).

1. **Subscribe to the FlagEvaluated hook** in the ConfigCat SDK.

2. **Send an event to Mixpanel** using the `$experiment_started` event name. Include the following event properties:

   <!-- -->

   * `Experiment name`: the feature flag's key from the FlagEvaluated hook's EvaluationDetails
   * `Variant name`: the evaluated feature flag's value or the variationId from the FlagEvaluated hook's EvaluationDetails
   * `Variant name`: the evaluated feature flag's value or the variationId from the FlagEvaluated hook's EvaluationDetails
   * `distinct_id` (optional): in case you are using the tracking in a backend component or you don't identify all your event sendings to Mixpanel with user details, you have to send the [distinct\_id](https://docs.mixpanel.com/docs/tracking-methods/id-management/identifying-users#what-is-distinct-id) property as well to identify your user. You can use the User object's Identifier property from the FlagEvaluated hook or a value that best describes your user.

note

For Text feature flags with lengthy values (e.g., JSON), send the `variationId` instead of the `value` as the `Variant name` to Mixpanel. The `variationId` is a hashed version of the feature flag value, accessible on the ConfigCat Dashboard by enabling the *Show VariationIDs to support A/B testing* setting. Learn more [here](https://app.configcat.com/product/preferences).

4. Deploy your application and wait for feature flag evaluations to happen so Experiments in Mixpanel could be populated.

### Usage with Experiments[â](#usage-with-experiments "Direct link to Usage with Experiments")

Check your Experiments page in Mixpanel, select your feature flag as the Experiment.

![Mixpanel Experiments report](/docs/assets/mixpanel/experiments.png)

### Usage with Insights report[â](#usage-with-insights-report "Direct link to Usage with Insights report")

If you don't have access to the Experiments feature in Mixpanel, you can create a custom Insights report based on the `Experiment Started` event. You can filter for your feature flag keys with the `Experiment name` property and visualize the different variants by using the `Variant name` property as a Breakdown. Example:

![Mixpanel Insights report](/docs/assets/mixpanel/insights.png)

### Usage with enriched user properties for your custom events.[â](#usage-with-enriched-user-properties-for-your-custom-events "Direct link to Usage with enriched user properties for your custom events.")

If you use the [Identify API](https://docs.mixpanel.com/docs/tracking-methods/id-management/identifying-users) approach, you'll be able to use the feature flag evaluation data in your current reports. Example with a Breakdown:

![Mixpanel Insights report with enriched data](/docs/assets/mixpanel/enrichment.png)

## Useful Resources[â](#useful-resources "Direct link to Useful Resources")

* [Integrating ConfigCat and Mixpanel Analytics for Business Success - Blog Post](https://configcat.com/blog/2024/07/29/configcat-mixpanel-integration/)
* [ConfigCat Integrations API](https://configcat.com/docs/api/reference/integrations/)


---

# monday.com - Manage feature flags from monday

The [ConfigCat Feature Flags monday app](https://monday.com/marketplace/10000079) allows you to connect your Monday items and feature flags. Create or link existing flags to your items without leaving your monday instance.

Turn features On/Off right from a linked item on your Monday board. You can also easily modify the linked flags to edit or add new Targeting or Percentage Rules.

This guide will help you with the plugin installation and familiarise you with the plugin usage.

## Installation[â](#installation "Direct link to Installation")

1. Install [ConfigCat Feature Flags](https://monday.com/marketplace/10000079) monday.com app to your monday account.
2. Open one of your boards on monday.com and click on an Item.
3. Add the ConfigCat Feature Flags monday app to your Item.
4. To use ConfigCat Feature Flags, you must first authorize it with your ConfigCat Public API credentials.
5. Copy your ConfigCat Public API credentials to the inputs. Read more about [ConfigCat Public API credentials here](https://app.configcat.com/my-account/public-api-credentials).
6. Click **Authorize**.

info

Every monday.com user must authorize ConfigCat in monday.com who wants to use the ConfigCat Feature Flags app.

Your browser does not support the video tag.

## Usage[â](#usage "Direct link to Usage")

### Linking existing feature flags[â](#linking-existing-feature-flags "Direct link to Linking existing feature flags")

1. Open any Item on your monday.com board.
2. Push the **Link existing feature flag** button.
3. Select a Product, Config, Environment, and Feature Flag to be linked to your monday.com Item.
4. When linked, you can manage the selected feature flag from this monday.com Item.

Your browser does not support the video tag.

### Creating new feature flags[â](#creating-new-feature-flags "Direct link to Creating new feature flags")

1. Open any Item on your monday.com board.
2. Push the **Create and link feature flag** button.
3. Select a Product and Config where you want to create the feature flag.
4. Set up your feature flag.
5. Select which environment you would like to link to this Item.
6. When linked, you can manage the selected feature flag from this monday.com Item.

Your browser does not support the video tag.

### View and Edit linked feature flags[â](#view-and-edit-linked-feature-flags "Direct link to View and Edit linked feature flags")

1. Open any Item on your monday.com board.
2. See the linked feature flags in the **Feature Flag (ConfigCat)** view.
3. You can manage the selected feature flag from this Item.
4. You can add new Targeting Rules or Percentage Options to Feature Flags.
5. You can add new Targeting Rules with User, Segment or Prerequisite conditions with a large selection of Comparators. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md)
6. You can remove Targeting Rules as well.

Your browser does not support the video tag.

### Remove linked feature flags[â](#remove-linked-feature-flags "Direct link to Remove linked feature flags")

1. Open any Item on your monday.com board with a linked feature flag.
2. Remove the linked feature flag by opening the **More menu** and selecting the **Unlink** option.

Your browser does not support the video tag.

### View linked Items in ConfigCat[â](#view-linked-items-in-configcat "Direct link to View linked Items in ConfigCat")

1. View the linked Item next to your Feature Flags in ConfigCat and jump to the monday.com Item directly.

Your browser does not support the video tag.


---

# Integrations Overview

Streamline your workflows by integrating ConfigCat with your essential tools and platforms. Leverage these integrations to manage feature flags efficiently and enhance collaboration across your tech stack. Explore our available integrations below to maximize the impact of feature flags in your development process.

## Amplitude[â](#amplitude "Direct link to Amplitude")

Monitor your feature flag changes in Amplitude, and send feature flag evaluation analytics to Amplitude Experiments. [See the detailed guide](https://configcat.com/docs/docs/integrations/amplitude/.md)

## Bitbucket Pipe[â](#bitbucket-pipe "Direct link to Bitbucket Pipe")

Scan your code repository to identify unused feature flags, helping you maintain a clean and efficient codebase. [See the detailed guide](https://configcat.com/docs/docs/integrations/bitbucket/.md)

## Bitrise Step[â](#bitrise-step "Direct link to Bitrise Step")

Scan your code repository to identify unused feature flags, helping you maintain a clean and efficient codebase. [See the detailed guide](https://configcat.com/docs/docs/integrations/bitrise/.md)

## CircleCI Orb[â](#circleci-orb "Direct link to CircleCI Orb")

Scan your code repository to identify unused feature flags, helping you maintain a clean and efficient codebase. [See the detailed guide](https://configcat.com/docs/docs/integrations/circleci/.md)

## DataDog[â](#datadog "Direct link to DataDog")

Monitor feature flag events in real-time. Feature flag changes will appear as events in Datadog, tagged with relevant product, config, and environment details. [See the detailed guide](https://configcat.com/docs/docs/integrations/datadog/.md)

## GitHub Action[â](#github-action "Direct link to GitHub Action")

Discover feature flag usages in your source code and upload the found code references to ConfigCat. [See the detailed guide](https://configcat.com/docs/docs/integrations/github/.md)

## Google Analytics[â](#google-analytics "Direct link to Google Analytics")

Log feature flag evaluations into Google Analytics experiments for advanced analytics and A/B test results. [See the detailed guide](https://configcat.com/docs/docs/integrations/google-analytics/.md)

## JetBrains/IntelliJ IDE plugin[â](#jetbrainsintellij-ide-plugin "Direct link to JetBrains/IntelliJ IDE plugin")

Manage your feature flags from JetBrains/IntelliJ IDE. [See the detailed guide](https://configcat.com/docs/docs/integrations/intellij/.md)

## Jira Cloud Plugin[â](#jira-cloud-plugin "Direct link to Jira Cloud Plugin")

Link ConfigCat feature flags to Jira issues, enabling you to turn features on or off, add targeting or percentage rules right from Jira. [See the detailed guide](https://configcat.com/docs/docs/integrations/jira/.md)

## Mixpanel[â](#mixpanel "Direct link to Mixpanel")

This integration enables you to log feature flag data into Mixpanel, providing insights into user interactions and experiment results. [See the detailed guide](https://configcat.com/docs/docs/integrations/mixpanel/.md)

## monday.com[â](#mondaycom "Direct link to monday.com")

Turn features On / Off right from a linked item on your monday.com board. [See the detailed guide](https://configcat.com/docs/docs/integrations/monday/.md)

## Slack[â](#slack "Direct link to Slack")

Receive instant notifications in Slack about feature flag updates, ensuring everyone is always in the loop. [See the detailed guide](https://configcat.com/docs/docs/integrations/slack/.md)

## Terraform[â](#terraform "Direct link to Terraform")

Configure and access ConfigCat resources via Terraform. [See the detailed guide](https://configcat.com/docs/docs/integrations/terraform/.md)

## Trello Power-Up[â](#trello-power-up "Direct link to Trello Power-Up")

Turn features On / Off right from a linked card on your Trello board. [See the detailed guide](https://configcat.com/docs/docs/integrations/trello/.md)

## Twilio Segment[â](#twilio-segment "Direct link to Twilio Segment")

Track feature flag evaluations and monitor change events. This integration allows you to analyze user interactions and experiment results seamlessly. [See the detailed guide](https://configcat.com/docs/docs/integrations/segment/.md)

## Visual Studio Code[â](#visual-studio-code "Direct link to Visual Studio Code")

Manage your feature flags from VSCode. [See the detailed guide](https://configcat.com/docs/docs/integrations/vscode/.md)

## Zapier Zap[â](#zapier-zap "Direct link to Zapier Zap")

Integrate ConfigCat with Zapier to automate workflows and connect with over 2,000 web services. [See the detailed guide](https://configcat.com/docs/docs/integrations/zapier/.md)

## Zoho Flow[â](#zoho-flow "Direct link to Zoho Flow")

Integrate ConfigCat with Zoho Flow to connect with over 500 web apps and automate your feature flag workflows without any coding. [See the detailed guide](https://configcat.com/docs/docs/integrations/zoho-flow/.md)


---

# Twilio Segment - Monitor your feature flag change events and feature flag analytics

## Overview[â](#overview "Direct link to Overview")

There are two available integration opportunities between [ConfigCat and Twilio Segment](https://segment.com/docs/connections/sources/catalog/cloud-apps/configcat/):

* [Sending feature flag change events to Twilio Segment](#changeevents)
* [Sending feature flag evaluation analytics to Twilio Segment](#analytics)

## Sending feature flag change events to Twilio Segment[â](#changeevents "Direct link to Sending feature flag change events to Twilio Segment")

Ensures that every setting change in ConfigCat is sent to Segment as a [track event](https://segment.com/docs/connections/spec/track/).

![Twilio Segment Feature Flag Changed event](/docs/assets/segment/featureflagchanged.png)

### Installation[â](#installation "Direct link to Installation")

1. Have a [Twilio Segment account.](https://segment.com/)
2. Add the [ConfigCat source](https://segment.com/catalog/integrations/source/configcat/) to your Twilio Segment account and copy the Write Key.
3. Open the [integrations tab](https://app.configcat.com/product/integrations) on the ConfigCat Dashboard.
4. Click on Twilio Segment's CONNECT button and set the Twilio Segment Write Key acquired while adding the ConfigCat source in Twilio Segment.
5. OPTIONAL - Set the proper server of your Twilio Segment account. [More about Segment servers](https://segment.com/docs/guides/regional-segment/).
6. You're all set. Go ahead and make some changes to your feature flags, then check your events in Twilio Segment.

### Un-installation[â](#un-installation "Direct link to Un-installation")

1. Open the [integrations tab](https://app.configcat.com/product/integrations) on the ConfigCat Dashboard.
2. Click on Twilio Segment's DISCONNECT button.

### Event details[â](#event-details "Direct link to Event details")

Every feature flag change event sent to Twilio Segment by ConfigCat has the following properties:

* **event name:** `Feature Flag Changed`.
* **timestamp:** When the change happened.
* **details:** A summary of the change.
* **product\_id, product\_name**: The product where the change happened.
* **config\_id, config\_name**: The config where the change happened.
* **environment\_id, environment\_name**: The environment where the change happened.
* **url**: A direct link to the config/feature flag.
* **userId, user\_email, user\_full\_name**: Who made the changes.

## Sending feature flag evaluation analytics to Twilio Segment[â](#analytics "Direct link to Sending feature flag evaluation analytics to Twilio Segment")

Ensures that feature flag evaluations are sent into the Twilio Segment [ConfigCat source](https://segment.com/catalog/integrations/source/configcat/). With this integration, you get advanced analytics on your feature flag usage and A/B test results in any of Segment's destinations.

### Setup[â](#setup "Direct link to Setup")

1. **Add ConfigCat source in Twilio Segment:** Add the ConfigCat source in Twilio Segment.

2. **Install SDKs:** Add both the ConfigCat SDK and Segment SDK to your application.

3. **Configure SDKs:**

   * **ConfigCat SDK:** Initialize with your ConfigCat SDK key.
   * **Twilio Segment SDK:** Set up with the Twilio Segment Write Key acquired while adding the ConfigCat source in Twilio Segment.

4. **Integrate Feature Flag Evaluations:**

   * During the initialization of the ConfigCat SDK, subscribe to the `flagEvaluated` hook.

   * Send feature flag evaluation data to Twilio Segment using the `Feature Flag Evaluated` event name. Include the following parameters:

     <!-- -->

     * `feature_flag_key`: the feature flag's key.
     * `value`: the evaluated feature flag's value or Variation ID.
     * `variation_id` (optional): the evaluated feature flag's Variation ID.
     * `userId` (optional): the user object's identifier used during feature flag evaluation.
     * `user` (optional): the user object used during feature flag evaluation.

Code samples:

* JavaScript, Node, SSR
* React
* Python
* Ruby
* Go
* Java
* Android
* Swift (iOS)
* Other languages

```
const segmentAnalytics = AnalyticsBrowser.load({ writeKey: "#YOUR_SEGMENT_WRITE_KEY#" });
segmentAnalytics.addSourceMiddleware(({payload, next}) => {
    payload.obj.context.integration = payload.obj.context.integration || {};
    payload.obj.context.integration['name'] = 'configcat';
    payload.obj.context.integration['version'] = '1.0.0';
    next(payload);
});

const configCatClient = configcat.getClient("#YOUR_SDK_KEY#", PollingMode.AutoPoll, {
    setupHooks: (hooks) =>
        hooks.on('flagEvaluated', evaluationDetails => {
            if (evaluationDetails.user) {
                segmentAnalytics.identify(evaluationDetails.user.identifier, evaluationDetails.user);
            }
            segmentAnalytics.track('Feature Flag Evaluated',
                {
                    'feature_flag_key': evaluationDetails.key,
                    'value': evaluationDetails.value,
                    'variation_id': evaluationDetails.variationId,
                    'user': evaluationDetails.user
                });
        }),
});
```

```
const segmentAnalytics = AnalyticsBrowser.load({ writeKey: "#YOUR_SEGMENT_WRITE_KEY#" });
segmentAnalytics.addSourceMiddleware(({payload, next}) => {
    payload.obj.context.integration = payload.obj.context.integration || {};
    payload.obj.context.integration['name'] = 'configcat';
    payload.obj.context.integration['version'] = '1.0.0';
    next(payload);
});

//...

<ConfigCatProvider
  sdkKey="#YOUR_SDK_KEY"
  pollingMode={PollingMode.AutoPoll}
  options={{
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', evaluationDetails => {
        if (evaluationDetails.user) {
            segmentAnalytics.identify(evaluationDetails.user.identifier, evaluationDetails.user);
        }
        segmentAnalytics.track('Feature Flag Evaluated',
            {
                'feature_flag_key': evaluationDetails.key,
                'value': evaluationDetails.value,
                'variation_id': evaluationDetails.variationId,
                'user': evaluationDetails.user
            });
      }),
  }}
>
</ConfigCatProvider>
```

```
import segment.analytics as analytics
import configcatclient
from configcatclient.configcatoptions import ConfigCatOptions, Hooks
import uuid

analytics.write_key = '#YOUR_SEGMENT_WRITE_KEY#'

def on_flag_evaluated(evaluation_details):
    if evaluation_details.user is not None:
        analytics.track(user_id=evaluation_details.user.get_identifier(), 
            event='Feature Flag Evaluated',  
            properties={
                'feature_flag_key': evaluation_details.key,
                'value': evaluation_details.value,
                'variation_id': evaluation_details.variation_id,
                'user': vars(evaluation_details.user)
            }, 
            context={
                'integration': {
                    'name': 'configcat',
                    'version': '1.0.0'
                }
            }
        )
    else:
        analytics.track(anonymous_id=str(uuid.uuid4()), # Or any other kind of random anonymus id.
        event='Feature Flag Evaluated',  
        properties={
            'feature_flag_key': evaluation_details.key,
            'value': evaluation_details.value,
            'variation_id': evaluation_details.variation_id
        }, 
        context={
            'integration': {
                'name': 'configcat',
                'version': '1.0.0'
            }
        })
    pass

client = configcatclient.get('#YOUR_SDK_KEY#',
    ConfigCatOptions(
        hooks=Hooks(on_flag_evaluated=on_flag_evaluated)
    )
)
```

```
require 'configcat'
require 'segment/analytics'
require 'securerandom'

Analytics = Segment::Analytics.new({
    write_key: '#YOUR-SEGMENT-WRITE-KEY#',
    on_error: Proc.new { |status, msg| print msg }
})

def on_flag_evaluated(evaluation_details)
    if evaluation_details.user
        Analytics.track(
            user_id: evaluation_details.user.get_identifier(),
            event: "Feature Flag Evaluated",  
            properties: {
                feature_flag_key: evaluation_details.key,
                value: evaluation_details.value,
                variation_id: evaluation_details.variation_id,
                user: evaluation_details.user
            },
            context: {
                integration: {
                    name: 'configcat',
                    version: '1.0.0'
                }
            }
        )
    else
        Analytics.track(
            anonymous_id: SecureRandom.uuid, # Or any other kind of random anonymus id.
            event: "Feature Flag Evaluated",  
            properties: {
                feature_flag_key: evaluation_details.key,
                value: evaluation_details.value,
                variation_id: evaluation_details.variation_id
            },
            context: {
                integration: {
                    name: 'configcat',
                    version: '1.0.0'
                }
            }
        )
    end
end

client = ConfigCat.get("#YOUR-SDK-KEY#",
    ConfigCat::ConfigCatOptions.new(
        hooks: ConfigCat::Hooks.new(on_flag_evaluated: method(:on_flag_evaluated))
    )
)
```

```
import (
	configcat "github.com/configcat/go-sdk/v9"
	"github.com/google/uuid"
	"github.com/segmentio/analytics-go"
)

analyticsClient := analytics.New("#YOUR_SEGMENT_WRITE_KEY#")

configCatClient := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR_SDK_KEY#",
    Hooks: &configcat.Hooks{OnFlagEvaluated: func(details *configcat.EvaluationDetails) {
        if details.Data.User != nil {
            analyticsClient.Enqueue(analytics.Track{
                UserId: details.Data.User.(*configcat.UserData).Identifier,
                Event:  "Feature Flag Evaluated",
                Properties: analytics.NewProperties().
                    Set("feature_flag_key", details.Data.Key).
                    Set("value", details.Value).
                    Set("variation_id", details.Data.VariationID).
                    Set("user", details.Data.User.(*configcat.UserData)),
                Context: &analytics.Context{
                    Extra: map[string]interface{}{
                        "integration": map[string]interface{}{
                            "name":    "configcat",
                            "version": "1.0.0",
                        },
                    },
                },
            })
        } else {
            analyticsClient.Enqueue(analytics.Track{
                AnonymousId: uuid.New().String(), // Or any other kind of random anonymus id.
                Event:       "Feature Flag Evaluated",
                Properties: analytics.NewProperties().
                    Set("feature_flag_key", details.Data.Key).
                    Set("value", details.Value).
                    Set("variation_id", details.Data.VariationID),
                Context: &analytics.Context{
                    Extra: map[string]interface{}{
                        "integration": map[string]interface{}{
                            "name":    "configcat",
                            "version": "1.0.0",
                        },
                    },
                },
            })
        }
    }}})
```

```
import com.configcat.ConfigCatClient;
import com.configcat.User;
import com.segment.analytics.Analytics;
import com.segment.analytics.messages.TrackMessage;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;
import java.util.UUID;

//...

Analytics analytics = Analytics.builder("#YOUR_SEGMENT_WRITE_KEY#").build();
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.hooks().addOnFlagEvaluated(details -> {
        
        Map<String, String> contextMapIntegrations = new HashMap<>();
        contextMapIntegrations.put("name", "configcat");
        contextMapIntegrations.put("version", "1.0.0");

        Map<String, Object> contextMap = new HashMap<>();
        contextMap.put("integration", contextMapIntegrations);

        Map<String, Object> propertiesMap = new HashMap<>();
        propertiesMap.put("feature_flag_key", details.getKey());
        propertiesMap.put("value", details.getValue());
        propertiesMap.put("variation_id", details.getVariationId());

        if (details.getUser() != null){
            propertiesMap.put("user", details.getUser());

            analytics.enqueue(TrackMessage.builder("Feature Flag Evaluated")
                    .userId(details.getUser().getIdentifier())
                    .properties(propertiesMap)
                    .context(contextMap)
            );
        } else {
            analytics.enqueue(TrackMessage.builder("Feature Flag Evaluated")
                    .anonymousId(UUID.randomUUID().toString())
                    .properties(propertiesMap)
                    .context(contextMap)
            );
        }
    });
});
```

```
Analytics analytics = new Analytics.Builder(getApplicationContext(), "#YOUR_SEGMENT_WRITE_KEY#").build();
Analytics.setSingletonInstance(analytics);
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.cache(new SharedPreferencesCache(getApplicationContext()));
    options.hooks().addOnFlagEvaluated(details -> {
        Properties properties = new Properties()
            .putValue("feature_flag_key", details.getKey())
            .putValue("value", details.getValue())
            .putValue("variation_id", details.getVariationId());

        Map<String, Object> contextMapIntegrations = new HashMap<>();
        contextMapIntegrations.put("name", "configcat");
        contextMapIntegrations.put("version", "1.0.0");

        Options optionsAnalytics = new Options().putContext("integration", contextMapIntegrations);

        if (details.getUser() != null){
            analytics.identify(details.getUser().getIdentifier());
            properties.putValue("user", details.getUser());
        } else {
            analytics.identify(new Traits().putValue("anonymousId", UUID.randomUUID().toString()));
        }

        analytics.track("Feature Flag Evaluated", properties, optionsAnalytics);
    });
});
```

```
import ConfigCat
import Segment

let configuration = Configuration(writeKey: "#YOUR_SEGMENT_WRITE_KEY#")
let analytics = Analytics(configuration: configuration)
analytics.add { ev in
    var event = ev
    if var ctx = ev?.context?.dictionaryValue {
        ctx[keyPath: "integration.name"] = "configcat"
        ctx[keyPath: "integration.version"] = "1.0.0"
        event?.context = try? JSON(ctx)
    }
    return event
}
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.hooks.addOnFlagEvaluated { details in
        if let user = details.user {
            analytics.identify(userId: user.identifier)
        }

        analytics.track(name: "Feature Flag Evaluated", properties: [
            "feature_flag_key": details.key,
            "value": details.value,
            "variation_id": details.variationId ?? "",
            "user": details.user?.description ?? ""
        ])
    }
}
```

While our documentation primarily provides code examples for languages that Twilio Segment natively supports and has an official SDK, you can integrate with other languages by sending an event to Twilio Segment with a third-party SDK or with using the [Segment's HTTP API source](https://segment.com/docs/connections/sources/catalog/libraries/server/http-api/).

1. **Subscribe to the FlagEvaluated hook** in the ConfigCat SDK.

2. **Send an event to Twilio Segment** using the `Feature Flag Evaluated` event name. If the feature flag was evaluated with a user object, set the event's `userId` property to the user object's identifier. Otherwise, set the `anonymousId` property to a random generated string. Also, include the following event properties:

   <!-- -->

   * `feature_flag_key`: the feature flag's key from the FlagEvaluated hook's EvaluationDetails.
   * `value`: the evaluated feature flag's value or the variationId from the FlagEvaluated hook's EvaluationDetails.
   * `variation_id`: the evaluated feature flag's value or the variationId from the FlagEvaluated hook's EvaluationDetails.
   * `user` (optional): the user object used during feature flag evaluation.

note

For Text feature flags with lengthy values (e.g., JSON), send the `variationId` instead of the `value` as the `value` to Twilio Segment. The `variationId` is a hashed version of the feature flag value, accessible on the ConfigCat Dashboard by enabling the *Show VariationIDs to support A/B testing* setting. Learn more [here](https://app.configcat.com/product/preferences).

4. Deploy your application and wait for feature flag evaluations to happen so feature flag evaluation events can be sent to Twilio Segment.
5. Add the preferred destination in Twilio Segment for your source and configure your mappings.
6. Enable the destination and utilize advanced feature flag analytics in the destination.

### Example event[â](#example-event "Direct link to Example event")

Check your source's debugger to see the events.

![Twilio Segment event debugger](/docs/assets/segment/featureflagevaluated.png)

## Useful Resources[â](#useful-resources "Direct link to Useful Resources")

* [Using Twilio and ConfigCat to Understand Your Business - Blog Post](https://configcat.com/blog/2024/11/28/using-twilio-and-configcat/)
* [ConfigCat Integrations API](https://configcat.com/docs/api/reference/integrations/)


---

# Slack - Get notified when a feature flag changes

## Overview[â](#overview "Direct link to Overview")

Receive notifications via a Slack Channel message when someone changes a feature flag using the [ConfigCat Feature Flags app for Slack](https://configcat.slack.com/apps/A011CN2QZJB-configcat-feature-flags).

![slack\_notification](/docs/assets/slack/notification.png)

## Installation[â](#installation "Direct link to Installation")

1. Open the [integrations tab](https://app.configcat.com/product/integrations) on the ConfigCat Dashboard.
2. Click on Slack's CONNECT button and connect ConfigCat Feature Flags with your Slack workspace.
3. You're all set. Go ahead and make some changes to your feature flags, then check your Slack Channel for notifications.

## Un-installation[â](#un-installation "Direct link to Un-installation")

1. Open the [integrations tab](https://app.configcat.com/product/integrations) on ConfigCat Dashboard.
2. Click on Slack's DISCONNECT button.

Disconnection from ConfigCat stops sending notifications to your selected Slack channel. To manage authorization or remove the integration completely, please follow the instructions below:

1. Open your Slack App Directory: `<YOUR-WORKSPACE>.slack.com/apps/manage`

2. Select the `ConfigCat Feature Flags` app.

3. Select the `Configuration` tab.

   <!-- -->

   * If you'd like to remove the integration from an individual channel, you can **Revoke** its access in the `Your authorization` section.
   * If you'd like to remove the integration from your workspace completely, click the **Remove app** button in the `Remove app` section.

## Usage[â](#usage "Direct link to Usage")

1. Make some changes to your feature flags.
2. Check your Slack Channel for notifications.


---

# Terraform - Manage feature flags from HCL scripts

[ConfigCat Feature Flags Provider](https://registry.terraform.io/providers/configcat/configcat) allows you to configure and access ConfigCat resources via ConfigCat Public Management API with [Terraform.](https://www.terraform.io/)

## Installation[â](#installation "Direct link to Installation")

Please refer to the [official documentation](https://registry.terraform.io/providers/configcat/configcat/latest/docs).

## Sample usage[â](#sample-usage "Direct link to Sample usage")

```
terraform {
  required_providers {
    configcat = {
      source  = "configcat/configcat"
      version = "~> 5.0"
    }
  }
}

provider "configcat" {
  // Get your ConfigCat Public API credentials at https://app.configcat.com/my-account/public-api-credentials
  basic_auth_username = var.configcat_basic_auth_username
  basic_auth_password = var.configcat_basic_auth_password
}

# Retrieve your Product
data "configcat_products" "my_products" {
  name_filter_regex = "ConfigCat's product"
}

# Retrieve your Config
data "configcat_configs" "my_configs" {
  product_id        = data.configcat_products.my_products.products[0].product_id
  name_filter_regex = "Main Config"
}

# Retrieve your Environment
data "configcat_environments" "my_environments" {
  product_id        = data.configcat_products.my_products.products[0].product_id
  name_filter_regex = "Test"
}

# Create a Feature Flag/Setting
resource "configcat_setting" "setting" {
  config_id    = data.configcat_configs.my_configs.configs[0].config_id
  key          = "isAwesomeFeatureEnabled"
  name         = "My awesome feature flag"
  hint         = "This is the hint for my awesome feature flag"
  setting_type = "boolean"
  order        = 0
}

# Initialize the Feature Flag/Setting's value
resource "configcat_setting_value" "setting_value" {
  environment_id = data.configcat_environments.my_environments.environments[0].environment_id
  setting_id     = configcat_setting.setting.id
  value          = "false"
}
```

## Useful Resources[â](#useful-resources "Direct link to Useful Resources")

* [Automating ConfigCat Resources with Terraform - Blog Post](https://configcat.com/blog/2023/06/02/infrastructure-as-code-terraform-integration/)


---

# Trello Power-Up - Manage feature flags from Trello

The [ConfigCat's Trello Power-Up](https://trello.com/power-ups/5e694b66d2511a3601ebd0fb) allows you to connect your Trello Cards and feature flags. Create or link existing flags to your Trello cards without leaving your Trello board.

Turn features On/Off right from a linked card on your Trello board. You can also easily modify the linked flags to edit or add new Targeting or Percentage Rules.

This guide will help you with the power-up installation and familiarise you with the plugin usage.

## Installation[â](#installation "Direct link to Installation")

1. In Trello, add the [ConfigCat Power-Up](https://trello.com/power-ups/5e694b66d2511a3601ebd0fb) to your board.
2. Select **Settings** -> **Authorize Account**.
3. Copy your ConfigCat Public API credentials to the inputs. Read more about [ConfigCat Public API credentials here](https://app.configcat.com/my-account/public-api-credentials).
4. Click **AUTHORIZE**.

info

Every Trello user must authorize ConfigCat in Trello who wants to use the ConfigCat Feature Flags power-up.

Your browser does not support the video tag.

## Usage[â](#usage "Direct link to Usage")

### Linking existing feature flags[â](#linking-existing-feature-flags "Direct link to Linking existing feature flags")

1. Open any Card on your Trello board.
2. Push the **Link Feature Flag** button.
3. Select a ConfigCat Product, Config, Environment, and Feature Flag to be linked to your Card.
4. When linked, you can manage the selected feature flag from this Card.

Your browser does not support the video tag.

### Creating new feature flags[â](#creating-new-feature-flags "Direct link to Creating new feature flags")

1. Open any Card on your Trello board.
2. Push the **Create and Link Feature Flag** button.
3. Select a ConfigCat Product and Config where you want to create the feature flag.
4. Set up your feature flag.
5. Select which environment you would like to link to this item.
6. When linked, you can manage the selected feature flag from this Card.

Your browser does not support the video tag.

### View and Edit linked feature flags[â](#view-and-edit-linked-feature-flags "Direct link to View and Edit linked feature flags")

1. Open a Card on your Trello board with a linked feature flag.
2. See the linked feature flags in the **Feature Flag (ConfigCat)** section.
3. You can manage the selected feature flag from this Card.
4. Add new Percentage Options to Feature Flags or Targeting Rules.
5. You can add new Targeting Rules with User, Segment or Prerequisite conditions with a large selection of Comparators. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md)
6. You can remove Targeting Rules as well.

Your browser does not support the video tag.

### Remove linked feature flags[â](#remove-linked-feature-flags "Direct link to Remove linked feature flags")

1. Open a Card on your Trello board with a linked feature flag.
2. In the **ConfigCat** section, click the **â®** ("More" menu) in the top right corner of the feature flag panel.
3. Remove the linked feature flag by selecting the **Remove from card** option.

Your browser does not support the video tag.

### View linked Cards in ConfigCat[â](#view-linked-cards-in-configcat "Direct link to View linked Cards in ConfigCat")

1. In ConfigCat, find your feature flag.
2. Locate the **Connected tickets** section in the top right corner of the feature flag panel.
3. Jump to the Trello cards directly by clicking the links in the **Connected tickets** section.

Your browser does not support the video tag.


---

# Visual Studio Code - Manage your feature flags from VSCode

[ConfigCat's Visual Studio Code extension](https://marketplace.visualstudio.com/items?itemName=ConfigCat.configcat-feature-flags) to manage feature flags from Visual Studio Code.

Connect your ConfigCat Product and Config to your Visual Studio Code Workspace. Find your Feature Flag's usages in your code easily. Turn features On/Off right from VSCode. You can also easily modify the linked flags to edit or add new Targeting or Percentage Rules.

This guide will help you with the Visual Studio Code Extensions installation and familiarize you with the Extensions usage.

## Feature overview[â](#feature-overview "Direct link to Feature overview")

* Turn features On / Off right from Visual Studio Code.
* Add Targeting or Percentage Rules from Visual Studio Code.
* Find Feature Flag usages in your code.
* Create Feature Flags within Visual Studio Code.
* Copy a Feature Flag's key to the clipboard.
* View your Products & Configs.
* Create Configs within Visual Studio Code.
* Connect a Config to your Workspace.
* Open a Config on ConfigCat Dashboard.

Your browser does not support the video tag.

## Install extension[â](#install-extension "Direct link to Install extension")

### Install from Visual Studio Code Marketplace[â](#install-from-visual-studio-code-marketplace "Direct link to Install from Visual Studio Code Marketplace")

1. In the Visual Studio Marketplace, open the [ConfigCat Feature Flags Extension](https://marketplace.visualstudio.com/items?itemName=ConfigCat.configcat-feature-flags).
2. Click on the **Install** button.
3. [Configure extension](#configure-extension).

### Install within Visual Studio Code[â](#install-within-visual-studio-code "Direct link to Install within Visual Studio Code")

1. In Visual Studio Code, open the Extensions page, and search for ConfigCat Feature Flags.
2. Click on the **Install** button.
3. [Configure extension](#configure-extension).

## Configure extension[â](#configure-extension "Direct link to Configure extension")

### Authentication[â](#authentication "Direct link to Authentication")

1. Get your API credentials for [ConfigCat Public Management API](https://app.configcat.com/my-account/public-api-credentials).

2. Authenticate ConfigCat in Visual Studio Code by

   <!-- -->

   * clicking on the ConfigCat Feature Flags icon on the Activity Bar and clicking on any of the **Authenticate** buttons.
   * or running the **ConfigCat - Log In** command from the Command Palette.

Your browser does not support the video tag.

### Advanced[â](#advanced "Direct link to Advanced")

This section is for you if you use a dedicated hosted/[on-premise](https://configcat.com/on-premise/) ConfigCat instance. In that case, you can specify your custom ConfigCat URLs in Visual Studio Code. You can do that by executing the `Preferences: Open Workspace Settings` command from the Command Palette and searching for `Extensions/ConfigCat` or clicking the manage button on the ConfigCat Feature Flags extension's page. Important settings:

* **Public Api Base URL**: the base URL for the ConfigCat Public Management API. Defaults to: <https://api.configcat.com>.
* **Dashboard Base URL**: the base URL for ConfigCat Dashboard. Defaults to: <https://app.configcat.com>.

## Usage of ConfigCat Feature Flags Views[â](#usage-of-configcat-feature-flags-views "Direct link to Usage of ConfigCat Feature Flags Views")

The ConfigCat Feature Flags Views can be opened by clicking the ConfigCat Feature Flags icon on the Visual Studio Code's Activity Bar. There are three different views.

### Feature Flags & Settings View[â](#feature-flags--settings-view "Direct link to Feature Flags & Settings View")

After you successfully connect your ConfigCat Config to your Visual Studio Code Workspace, open the Feature Flags & Settings View and:

* View the connected Config's Feature Flags.
* View or Update your Feature Flag's value.
* Create new Feature Flags.
* Copy a Feature Flag's key to the clipboard.
* Find your Feature Flag's usages in your code.

Your browser does not support the video tag.

#### View or Update your Feature Flag's value[â](#view-or-update-your-feature-flags-value "Direct link to View or Update your Feature Flag's value")

1. Open the **Feature Flags & Settings** view.
2. Find the Flag and click the **View or Update Feature Flag values** icon next to the Flag name.
3. Select the Environment.
4. See the Feature Flag in the opened tab.
5. You can turn your features On / Off right from the opened tab.
6. You can add new Targeting Rules with User, Segment or Prerequisite conditions with a large selection of Comparators. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md)
7. You can add new Percentage Options to Feature Flags or Targeting Rules

#### Create a new Feature Flag[â](#create-a-new-feature-flag "Direct link to Create a new Feature Flag")

1. Open the **Feature Flags & Settings** view.
2. Click the **+** in the view header.
3. Select the Setting type.
4. Enter the new Feature Flag name.
5. Enter the new Feature Flag key.
6. Add a hint to your Feature Flag (optional).
7. Select **Yes** to confirm the Flag creation.

#### Copy a Feature Flag's key to the clipboard[â](#copy-a-feature-flags-key-to-the-clipboard "Direct link to Copy a Feature Flag's key to the clipboard")

1. Open the **Feature Flags & Settings** View.
2. Find the Flag and click the **Copy Key to clipboard** icon next to the Flag name.

#### Find your Feature Flag's usages in your code[â](#find-your-feature-flags-usages-in-your-code "Direct link to Find your Feature Flag's usages in your code")

1. Open the **Feature Flags & Settings** view.
2. Find the Flag and click the **Find usage** icon next to the Flag name.
3. See the search results in the opened tab.

### Products & Configs View[â](#products--configs-view "Direct link to Products & Configs View")

Manage your products and configs on the **Products & Configs** view by performing the following actions:

* View all of your Products & Configs.
* Create Configs under a Product.
* Connect a Config to your current Workspace.
* Open your Configs on the ConfigCat Dashboard.

Your browser does not support the video tag.

#### Create a new Config under a product[â](#create-a-new-config-under-a-product "Direct link to Create a new Config under a product")

1. Open the **Products & Configs** view.
2. In the products list, click the **+** icon next to the product where you want to create the new config.
3. Enter a name for the new Config.
4. Add a description to your Config (optional).
5. Connect the new config to your current Workspace (optional).

#### Connect a Config to your current Workspace[â](#connect-a-config-to-your-current-workspace "Direct link to Connect a Config to your current Workspace")

1. Open the **Products & Configs** view.
2. Find the Config you want to connect to your current Workspace under your product list.
3. Click the **Connector** icon next to the Config in the list.
4. You can see the Config's Feature Flags in the **Feature Flags & Setting** view.

#### Open your Configs on the ConfigCat Dashboard[â](#open-your-configs-on-the-configcat-dashboard "Direct link to Open your Configs on the ConfigCat Dashboard")

1. Open the **Products & Configs** view.
2. Find the Config you want to connect to your current Workspace under your product list.
3. Click the **Open Config in ConfigCat Dashboard** icon next to the Config in the list.

### Help & Feedback View[â](#help--feedback-view "Direct link to Help & Feedback View")

The **Help & Feedback** view provides quick links to open ConfigCat's Documentation and Dashboard and allows you to report issues.


---

# Zapier Zap - Build feature flag workflows

## Connect ConfigCat to hundreds of other apps with Zapier[â](#connect-configcat-to-hundreds-of-other-apps-with-zapier "Direct link to Connect ConfigCat to hundreds of other apps with Zapier")

[ConfigCat's Zap](https://zapier.com/apps/configcat/integrations) lets you connect ConfigCat to 8,000+ other web services. Automated connections called Zaps, set up in minutes with no coding, can automate your day-to-day tasks and build workflows between apps that otherwise wouldn't be possible.

Each Zap has one app as the **Trigger**, where your information comes from and which causes one or more **Actions** in other apps, where your data gets sent automatically.

[ConfigCat's Zap](https://zapier.com/apps/configcat/integrations) can notify you about feature flag and setting changes, so you can easily set up workflows in Zapier (e.g. Send out a Slack message or e-mail when somebody updated a flag).

## Setup[â](#setup "Direct link to Setup")

### Connect ConfigCat[â](#connect-configcat "Direct link to Connect ConfigCat")

1. Log in to your [Zapier account](https://zapier.com/sign-up) or create a new account.
2. Navigate to **App Connections** from the side menu.
3. Click the **Add connection** button and search for **ConfigCat** in the **Add new connection** dialog.
4. Click the **Add connection** button to connect ConfigCat.
5. Get your API credentials for [ConfigCat Public Management API](https://app.configcat.com/my-account/public-api-credentials).
6. Use the generated **Basic auth user name** and **Basic auth password** to connect your ConfigCat account to Zapier.

![zapier\_auth](/docs/assets/zapier_auth.png)

## Usage[â](#usage "Direct link to Usage")

Once ConfigCat is connected, you can start creating an automation! Use a pre-made Zap or create your own with the Zap Editor. Creating a Zap requires no coding knowledge and you'll be walked step-by-step through the setup. Need inspiration? See everything that's possible with [ConfigCat and Zapier](https://zapier.com/apps/configcat/integrations).

### Setup ConfigCat Trigger[â](#setup-configcat-trigger "Direct link to Setup ConfigCat Trigger")

1. Create a new Trigger.
2. Select **ConfigCat** app, **Feature Flag & Setting value changed** as Trigger event and the connected account.
3. Select the Product for which you want to receive notifications about Feature Flag or Setting changes.
4. For more specific notifications, select a Config and/or Environment.

![zapier\_customize](/docs/assets/zapier_customize.png)

### ConfigCat fields[â](#configcat-fields "Direct link to ConfigCat fields")

ConfigCat provide the following fields to include in your flow:

* **When**: When the change happened
* **Who (email), Who (full name)**: Who made the change
* **Where**: To which Config and Environment the change belongs to
* **What**: The exact values that changed

## Example Slack notification setup[â](#example-slack-notification-setup "Direct link to Example Slack notification setup")

### Configuration in Zapier[â](#configuration-in-zapier "Direct link to Configuration in Zapier")

![zapier\_config](/docs/assets/zapier_config.png)

### Result in Slack[â](#result-in-slack "Direct link to Result in Slack")

![zapier\_slack](/docs/assets/zapier_slack.png)

## Need help?[â](#need-help "Direct link to Need help?")

[Contact us](https://configcat.com/support/) if you need any help or you have any awesome improvement ideas for this Zap.


---

# Zoho Flow - Automate your feature flag workflows

## Connect ConfigCat to 500+ apps with Zoho Flow[â](#connect-configcat-to-500-apps-with-zoho-flow "Direct link to Connect ConfigCat to 500+ apps with Zoho Flow")

[ConfigCat's Zoho Flow integration](https://www.zohoflow.com/apps/configcat/integrations/) helps you connect ConfigCat to 1000+ other web apps without any code. It helps you automate day-to-day tasks and build complex business workflows within minutes.

You can set **triggers**, add **actions**, use **Delays and Decisions** to create your entire workflow on an easy to use builder.

[ConfigCat's Zoho Flow integration](https://www.zohoflow.com/apps/configcat/integrations/) can notify you about Feature Flags or Settings changes in ConfigCat, so for example you can set it up with Slack to send a message about the feature flag changes in ConfigCat.

## Setup[â](#setup "Direct link to Setup")

1. Log in to your [Zoho Flow account](https://www.zoho.com/flow/) or create a new one.

2. Navigate to **My Flows** using the side menu.

3. Click on **Create Flow**, fill the name and description boxes then click on **Create**.

4. Select the **App** trigger by clicking it's **Configure** button.

![zoho\_trigger](/docs/assets/zoho/select_trigger.png)

5. Search for **ConfigCat**, select it and hit the **NEXT** button.

![zoho\_cc\_search](/docs/assets/zoho/cc_trigger.png)

6. On the **Choose ConfigCat Trigger** pane select the **Audit event occured** trigger.

![zoho\_audit\_trigger](/docs/assets/zoho/audit_select.png)

7. On the next pane you have to connect the integration with your ConfigCat environment. Hit the **Connect** button.

![zoho\_connect](/docs/assets/zoho/connect.png)

8. Get your API credentials for [ConfigCat Dashboard](https://app.configcat.com/my-account/public-api-credentials).

9. Use the generated **Basic auth user name** and **Basic auth password** to connect your ConfigCat account to Zoho Flow.

![zoho\_fill\_form](/docs/assets/zoho/fill_connect_form.png)

10. On the next pane you have to select the ConfigCat [Product](https://configcat.com/docs/docs/main-concepts/.md#product), [Config](https://configcat.com/docs/docs/main-concepts/.md#config) and [Environment](https://configcat.com/docs/docs/main-concepts/.md#environment) you want to be notified about. The **Variable name** field is auto-generated by the system, you can leave it as is. Optionally, you can also set filter conditions to control exactly when should the trigger fire.

![zoho\_product\_config\_environment](/docs/assets/zoho/select_product_config_environment.png)

11. Your trigger is set and will be called by ConfigCat. You can go ahead building your flows. See the list of [available Zoho Flow Apps](https://www.zoho.com/flow/apps/) for inspiration.

### Example on how to get Slack notifications on feature flag changes.[â](#example-on-how-to-get-slack-notifications-on-feature-flag-changes "Direct link to Example on how to get Slack notifications on feature flag changes.")

1. Use the **Send public/private channel message** action from the Slack app and drag it under the ConfigCat trigger.

![zoho\_slack\_add](/docs/assets/zoho/add_slack.png)

2. Configure the Slack action to which channel and exactly what it should send.

info

You may have to connect the Zoho Flow Slack app to your Slack subscription if you didn't do it before.

![zoho\_slack\_config](/docs/assets/zoho/slack_configuration.png)

3. Hit the `Test & Debug` button on the right top corner and wait for the results in your Slack workspace. You should get a message like this:

![zoho\_slack\_config](/docs/assets/zoho/slack_message.png)

## Need help?[â](#need-help "Direct link to Need help?")

[Contact us](https://configcat.com/support/) if you have questions or any improvement ideas for this app.


---

# Main Concepts

## Feature Flag or Setting[â](#feature-flag-or-setting "Direct link to Feature Flag or Setting")

A *Setting* is an essential bit of *ConfigCat*. It can be of multiple types, such as an on/off switch (bool), number (int, double) or any text (string). You can use it to change your application's behavior remotely, without a new deployment.

A *Feature Flag* is a *Setting* of type Bool.

### Anatomy of a *Feature Flag* or *Setting*[â](#anatomy-of-a-feature-flag-or-setting "Direct link to anatomy-of-a-feature-flag-or-setting")

| Properties | Description                                                                                                            |
| ---------- | ---------------------------------------------------------------------------------------------------------------------- |
| Name       | A human readable name that differentiates the *Setting* on the *ConfigCat Dashboard*. e.g., `My Cool Feature enabled`. |
| Key        | A variable name within your code. e.g., `isCoolFeatureEnabled`.                                                        |
| Type       | Type of information you'd like to keep in the *Setting*. e.g., On/Off Toggle, Text, Number                             |
| Value      | The actual value of your *Setting*. e.g., `true`, `false`. Can be different in each environment.                       |

### About *Setting* types[â](#about-setting-types "Direct link to about-setting-types")

| Setting Kind   | Setting Type | Description                                                                       |
| -------------- | ------------ | --------------------------------------------------------------------------------- |
| On/Off Toggle  | Boolean      | true/false, usually referenced as Feature Flag, Feature Toggle or Feature switch. |
| Text           | String       | Any string, max. 100000 characters, can't be empty.                               |
| Whole Number   | Integer      | Any whole number within the range of `Int32`.                                     |
| Decimal Number | Double       | Any decimal number within the range of `double`.                                  |

## Config[â](#config "Direct link to Config")

A *Config* is a collection of *Settings*. *Configs* help you organize settings around topics, or around your software components. A *Config* is like an online version of a traditional config file.

## Environment[â](#environment "Direct link to Environment")

An environment in ConfigCat represents an environment in your development lifecycle (like production, staging, development etc.). Different environments have the same settings but can have different values.

info

Each environment-config pair has its own SDK Key which must be used to initialize the ConfigCat SDK within your application.

## Product[â](#product "Direct link to Product")

A collection of *Configs*, *Environments* and *Team members*. A *Product* typically represents your application (or your service) and the people working on it. It might be a good idea to invite others to your *Product* to collaborate.

## Organization[â](#organization "Direct link to Organization")

An *Organization* represents a collection of preferences that are valid for all the *Products* and *Members* who belong to an *Organization*. Like billing information, authentication rules or data privacy preferences.


---

# Network Traffic

Network Traffic refers to the data transmitted between your applications and ConfigCat CDN. It includes the requests made to fetch feature flags and settings.

Generally speaking, the Network Traffic is proportional to:

* the size of the `config JSON`,
* the number of clients connecting to ConfigCat,
* and the frequency of changes in the `config JSON`.

Here are a few examples of config JSON file sizes:

| Config JSON complexity |                 | Network Traffic     |                                     |
| ---------------------- | --------------- | ------------------- | ----------------------------------- |
| # of feature flags     | Targeting Rules | first download size | no change<br />`304 - Not Modified` |
| 11                     | none            | 0.5 kB              | 65 B                                |
| 17                     | few             | 1.6 kB              | 65 B                                |
| 370                    | many            | 159 kB              | 65 B                                |

#### Size of the `config JSON`[â](#size-of-the-config-json "Direct link to size-of-the-config-json")

It is affected by the number of feature flags, settings, targeting rules, segments, and the length of their values.

#### Number of clients connecting to ConfigCat[â](#number-of-clients-connecting-to-configcat "Direct link to Number of clients connecting to ConfigCat")

Every time a client downloads the config JSON, it contributes to the overall Network Traffic.

#### Frequency of changes in the `config JSON`[â](#frequency-of-changes-in-the-config-json "Direct link to frequency-of-changes-in-the-config-json")

The `config JSON` is cached on the ConfigCat CDN. If there is no change, the ConfigCat CDN will respond with `304 Not Modified`. If there is a change, the ConfigCat CDN will respond with `200 OK` and the new `config JSON` content in the response body.

### Shared infrastructure[â](#shared-infrastructure "Direct link to Shared infrastructure")

The following plans run on shared infrastructure. So all customers use the same API nodes and Config Delivery Network (CDN).

| Plan           | Data / month |
| -------------- | ------------ |
| **Free**       | 20 GB        |
| **Pro**        | 100 GB       |
| **Smart**      | 1 TB         |
| **Enterprise** | 4 TB         |

info

If you hit this limit, we will keep your application up and running. However, you can expect us to contact you on how we can meet your needs.

### Dedicated infrastructure[â](#dedicated-infrastructure "Direct link to Dedicated infrastructure")

The following plans include dedicated API and CDN nodes.

#### Hosted[â](#hosted "Direct link to Hosted")

Runs on dedicated servers provided by ConfigCat.

|                   | Data / month |
| ----------------- | ------------ |
| **Basic package** | 24 TB        |

#### On-Premise (Self-hosted)[â](#on-premise-self-hosted "Direct link to On-Premise (Self-hosted)")

Runs on the customer's own servers. We suggest [contacting ConfigCat's engineering](https://configcat.com/support/) team on exact requirements and performance.

## How to reduce the monthly Network Traffic?[â](#how-to-reduce-the-monthly-network-traffic "Direct link to How to reduce the monthly Network Traffic?")

### Delete the old feature flags and unused Targeting Rules[â](#delete-the-old-feature-flags-and-unused-targeting-rules "Direct link to Delete the old feature flags and unused Targeting Rules")

If you have a large number of feature flags and Targeting Rules in a config, you can reduce the size of the `config JSON` by deleting the old ones. The [Zombie Flags](https://configcat.com/docs/docs/zombie-flags/.md) feature can help you finding stale feature flags.

### Avoid keeping lots of data in the comparison value of Targeting Rules or segments[â](#avoid-keeping-lots-of-data-in-the-comparison-value-of-targeting-rules-or-segments "Direct link to Avoid keeping lots of data in the comparison value of Targeting Rules or segments")

The comparison value of a Targeting Rule or segment is stored in the `config JSON` and downloaded by the SDKs. If you have a lot of Targeting Rules or segments with lengthy comparison values, you can reduce the size of the `config JSON` by shortening them.

### Consider the amount of text you keep in a text setting's value[â](#consider-the-amount-of-text-you-keep-in-a-text-settings-value "Direct link to Consider the amount of text you keep in a text setting's value")

Similarly to the comparison value of Targeting Rules or segments, the value of a text setting is stored in the `config JSON` and downloaded by the SDKs. If you have a lot of text settings with lengthy values, you can reduce the size of the `config JSON` by shortening them.

### Separate your feature flags into multiple configs[â](#separate-your-feature-flags-into-multiple-configs "Direct link to Separate your feature flags into multiple configs")

If you have a large number of feature flags, you can reduce the size of the `config JSON` by separating them into multiple configs. This way, the payload of each download will be smaller.

### Use the ConfigCat Proxy to cache/proxy config JSON downloads[â](#use-the-configcat-proxy-to-cacheproxy-config-json-downloads "Direct link to Use the ConfigCat Proxy to cache/proxy config JSON downloads")

The [ConfigCat Proxy](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md) allows you to host a feature flag evaluation and config JSON proxy/cache service within your own infrastructure.<br /><!-- -->The [CDN proxy](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#cdn-proxy) feature allows you to proxy/cache config JSON downloads, and the ConfigCat SDKs can be routed to the ConfigCat Proxy running in your own infrastructure greatly reducing network traffic.

### Purchase additional network traffic[â](#purchase-additional-network-traffic "Direct link to Purchase additional network traffic")

You can purchase an add-on for your subscription to increase your limits. [Contact us](https://configcat.com/support/) for more information.

| Plan           | Price             | Additional config JSON downloads | Additional network traffic |
| -------------- | ----------------- | -------------------------------- | -------------------------- |
| **Smart**      | $250 or â¬229 / mo | +250 million                     | +1TB                       |
| **Enterprise** | $700 or â¬649 / mo | +1 billion                       | +4TB                       |


---

# News & Product Updates

Here, you'll find all the latest updates, enhancements, and new features we've added to our service. Stay tuned to this page to keep up with all the latest news from ConfigCat!

<!-- -->

## ConfigCat MCP Server[â](#configcat-mcp-server "Direct link to ConfigCat MCP Server")

#### Spet 30, 2025[â](#spet-30-2025 "Direct link to Spet 30, 2025")

We just released a new official ConfigCat's Model Context Protocol (MCP) Server. AI tools like Cursor can now interact with ConfigCat via our new MCP server.

* **Complete set of tools for ConfigCat's Public Management API operations** You can Create, Read, Update and Delete any entities like Feature Flags, Configs, Environments or Products within ConfigCat.
* **Enables your code editor to understand your feature flags** Integrate the appropriate ConfigCat SDK, implement feature flags in your project, remove Zombie (stale) flags and more.

[]()

For more info about how to set up the MCP server, [see Documentation](https://configcat.com/docs/docs/advanced/mcp-server/.md).

## Automatic ConfigCat Proxy configuration with Proxy profiles / OpenFeature Remote Evaluation Protocol[â](#automatic-configcat-proxy-configuration-with-proxy-profiles--openfeature-remote-evaluation-protocol "Direct link to Automatic ConfigCat Proxy configuration with Proxy profiles / OpenFeature Remote Evaluation Protocol")

#### Aug 22, 2025[â](#aug-22-2025 "Direct link to Aug 22, 2025")

We have two exciting [ConfigCat Proxy](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md) related news:

1. From the [v2.0.0](https://github.com/configcat/configcat-proxy/releases/tag/v2.0.0) version, the Proxy has the ability to use [Proxy profiles](https://app.configcat.com/organization/proxy-profiles) to determine which SDK keys to download and distribute.

   info

   You need to be an Organization Admin to access the Proxy profiles page on the Dashboard.

   ![Proxy profiles page](/docs/assets/news/proxy-profiles.png)

   [See the documentation](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md#1-automatic-configuration-with-proxy-profiles) for more information on how to set up your Proxy with profiles.

2. From the [v2.0.0](https://github.com/configcat/configcat-proxy/releases/tag/v2.0.0) version, the Proxy conforms to the [OpenFeature Remote Evaluation Protocol](https://github.com/open-feature/protocol) (OFREP), which means it can be used with OFREP compatible OpenFeature providers. [See the API documentation](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#openfeature-remote-evaluation-protocol-ofrep) for the OFREP implementation with usage examples.

## New SDK for JavaScript with Cloudflare Workers support[â](#new-sdk-for-javascript-with-cloudflare-workers-support "Direct link to New SDK for JavaScript with Cloudflare Workers support")

#### Aug 15, 2025[â](#aug-15-2025 "Direct link to Aug 15, 2025")

We just released the [new, revamped ConfigCat SDK for JavaScript platforms](https://configcat.com/docs/sdk-reference/js/overview/). Unlike the previous platform-specific SDKs, it ships as a [single, unified NPM package](https://www.npmjs.com/package/@configcat/sdk) that supports multiple JS environments.

![Unified NPM package](/docs/assets/news/unified-js-sdk_192dpi.png)

The new SDK combines and, thus, supersedes these SDKs:

* [ConfigCat SDK for JavaScript frontend applications](https://configcat.com/docs/sdk-reference/js/)
* [ConfigCat SDK for JavaScript Server-Side Rendered applications](https://configcat.com/docs/sdk-reference/js-ssr/)
* [ConfigCat SDK for Node.js](https://configcat.com/docs/sdk-reference/node/)
* [ConfigCat SDK for Chromium Extensions](https://github.com/configcat/js-chromium-extension-sdk)

The legacy SDKs remain available for use but won't receive new features and improvements any more. They will continue getting security updates until official support ends on August 31, 2026.

The new SDK maintains strong backward compatibility, so in most cases migration is simple and straightforward. For details, see the "Migration to the new SDK" section in the SDK references linked above.

But there are other advantages to upgrading to the new SDK sooner rather than later:

* Most notably, it adds support for **Deno**, **Bun** and **Cloudflare Workers**. Plus, makes the Browser and Chromium Extension SDKs work in **Web Workers** too.
* Another improvement worth mentioning is that the new SDK is a **zero-dependency library**, which can spare you some package management-related headaches. It distributes **ES2017-compatible code** to allow you to minimize the library's footprint in your application bundles.
* A nice new feature is **query string-based flag overrides** (especially handy during development) and the possibility of **custom flag override data sources** - even with full feature flags, not just simple values (useful for testing).
* Then there is a **new hook** named `configFetched` for observing config fetch errors and **new options** named `configFetcher` and `logFilter` for customizing config fetching and logging.
* Error reporting received nice improvements as well: among others, the SDK now includes **error codes** to help identify error causes.

For the full list of new features and improvements, take a look at the [release notes](https://github.com/configcat/js-unified-sdk/releases/tag/v1.0.0).

## New ConfigCat OpenFeature providers[â](#new-configcat-openfeature-providers "Direct link to New ConfigCat OpenFeature providers")

#### July 4, 2025[â](#july-4-2025 "Direct link to July 4, 2025")

We're happy to share that we have released new OpenFeature providers for the following platforms:

* [Angular](https://configcat.com/docs/docs/sdk-reference/openfeature/angular/.md)
* [React](https://configcat.com/docs/docs/sdk-reference/openfeature/react/.md)
* [NestJS](https://configcat.com/docs/docs/sdk-reference/openfeature/nestjs/.md)
* [Swift (iOS)](https://configcat.com/docs/docs/sdk-reference/openfeature/swift/.md)
* [Kotlin (Android)](https://configcat.com/docs/docs/sdk-reference/openfeature/kotlin/.md)
* [Ruby](https://configcat.com/docs/docs/sdk-reference/openfeature/ruby/.md)

[See the documentation](https://configcat.com/docs/docs/sdk-reference/openfeature/overview/.md) for the complete list of currently supported platforms.

***

## Quality of Life improvements[â](#quality-of-life-improvements "Direct link to Quality of Life improvements")

#### Jun 3, 2025[â](#jun-3-2025 "Direct link to Jun 3, 2025")

We've just rolled out a set of updates that make working with feature flags in ConfigCat smoother and more practical. Here's what's new:

### Zombie flag Report improvements[â](#zombie-flag-report-improvements "Direct link to Zombie flag Report improvements")

Stale feature flags can build up quickly and lead to technical debt. We've improved the Zombie Flags feature to make it more useful and easier to manage:

* **New Zombie Flags page** The original email report didn't offer immediate feedback. That's why we created the new [Zombie Flags page](https://app.configcat.com/product/zombie-flags), where you can instantly view stale flags and filter them by product. If you're using our [Code References](https://configcat.com/docs/docs/advanced/code-references/overview/.md) feature, the page also shows exactly where the flags appear in your code, making it easier to clean things up.
* **Ignore flags by tag** If you have long-lived feature flags that are meant to stay, you can now tag them (for example, with âpermanentâ) and exclude them from the Zombie Flags Report.
* **Less noise, more focus** The previous report included any flag that was stale in at least one selected environment. Now, you can adjust the settings so only flags that are stale in all selected environments appear in the report.
* **Now available via API** You can also check stale flags programmatically using the [Zombie (stale) flags](https://configcat.com/docs/docs/api/reference/get-staleflags/.md) endpoint in our Public Management API.

Narrow down your [Zombie Flags Report](https://app.configcat.com/my-account/zombie-flags-report) email with the new preferences, try out our new [Zombie Flags page](https://app.configcat.com/product/zombie-flags), or check the [documentation](https://configcat.com/docs/docs/zombie-flags/.md) to learn more.

![Zombie Flags page](/docs/assets/news/zombie-page_192dpi.png)

### Clone feature flag[â](#clone-feature-flag "Direct link to Clone feature flag")

Cloning a feature flag now lets you quickly create a new flag in any config. It copies over all the targeting rules, values across environments, and tags, making setup faster and more consistent.

![Clone feature flag](/docs/assets/news/clone-feature-flag_192dpi.png)

### Copy all feature flag rules[â](#copy-all-feature-flag-rules "Direct link to Copy all feature flag rules")

We've made it easier to copy flag values across environments. Now, you can:

* Copy rules for an entire config, or
* Choose specific feature flags to copy.

![Copy all feature flag rules](/docs/assets/news/copy-all-feature-flag-values_192dpi.png)

### A Smoother Flag Creation Experience[â](#a-smoother-flag-creation-experience "Direct link to A Smoother Flag Creation Experience")

When creating a new feature flag, you no longer have to set values separately for each environment. You can now set them once globally, then fine-tune as needed later.

We truly hope you'll love these new features and improvements. Happy feature flagging! â¤ï¸

***

## ð Refer & Earn with ConfigCat[â](#-refer--earn-with-configcat "Direct link to ð Refer & Earn with ConfigCat")

#### May 30, 2025[â](#may-30-2025 "Direct link to May 30, 2025")

Earn up to **$10,000 per referral** just by sharing something you already love.

### Hereâs how it works:[â](#heres-how-it-works "Direct link to Hereâs how it works:")

* ð¥ The people you refer get **10% off** any paid plan.
* ð° You earn **20% of their payments**, up to **$10,000 per referral**.
* ð¸ Get paid via **PayPal** (more payout options coming soon).
* ð Share your unique referral link via **email, LinkedIn, or QR code** â powered by [Cello](https://cello.so/).

![Refer and Earn](/docs/assets/news/refer-and-earn.png)

![Refer and Earn](/docs/assets/news/invite.png)

> This isnât just a referral program - itâs our way of saying *thank you* for being part of the ConfigCat community.<br /><!-- -->You help us grow, and we make sure you benefit too.

â No cold outreach. No contact sharing. You're simply sharing something you already use and like.

**Ready to start earning?**<br /><!-- -->Click the **âRefer & Earnâ** button in your ConfigCat dashboard and let the rewards roll in.

***

## User provisioning (SCIM) is here\![â](#user-provisioning-scim-is-here "Direct link to User provisioning (SCIM) is here!")

#### May 21, 2025[â](#may-21-2025 "Direct link to May 21, 2025")

**We're happy to announce that ConfigCat now supports user provisioning using SCIM (System for Cross-domain Identity Management)!**

SCIM makes it easy to sync users and groups from your Identity Provider into your ConfigCat Organization. Once synced, you can link Identity Provider groups to ConfigCat permission groups, so users are placed in the right roles without manual work.

We've tested the feature with [Entra ID (Azure AD)](https://configcat.com/docs/docs/advanced/team-management/scim/identity-providers/entra-id/.md), [Okta](https://configcat.com/docs/docs/advanced/team-management/scim/identity-providers/okta/.md) and [OneLogin](https://configcat.com/docs/docs/advanced/team-management/scim/identity-providers/onelogin/.md), but any Identity Provider that supports the SCIM 2.0 protocol should work too.

SCIM provisioning is available on all ConfigCat plans, including the Free plan. Each plan includes limits for synced users, groups, and permission assignments. See details [here](https://configcat.com/docs/docs/subscription-plan-limits/.md).

Read our [documentation](https://configcat.com/docs/docs/advanced/team-management/scim/scim-overview/.md) and set up the User provisioning on the [Authentication & Provisioning](https://app.configcat.com/organization/authentication) page in your ConfigCat Dashboard.

info

You'll need to be an Organization Admin to access it.

![Identity Provider groups](/docs/assets/news/scim-groups.png)

![Identity Provider users](/docs/assets/news/scim-users.png)

***

## Import from LaunchDarkly is here\![â](#import-from-launchdarkly-is-here "Direct link to Import from LaunchDarkly is here!")

#### Apr 29, 2025[â](#apr-29-2025 "Direct link to Apr 29, 2025")

**Thinking about moving away from LaunchDarkly? ConfigCat just made that easier for you.**

If you're curious about switching to a LaunchDarkly alternative, ConfigCat has good news for you: we've launched a new feature called the "Import from LaunchDarkly" tool, which makes it a breeze to migrate LaunchDarkly feature flags and segments into ConfigCat.

It's available on all plans, even the Free plan. So if you're just exploring, you can give it a go with zero commitment. (Just a heads-up: your plan's limits still apply. If you bump into anything, [contact us](https://configcat.com/support/?prefilled=ld-import-limit), and we'll surely figure out a solution for you!)

You can find the import tool on the [Organization Overview](https://app.configcat.com/organization) page in your ConfigCat Dashboard:

![Launching the import tool](/docs/assets/migration-from-launchdarkly/launch-import-tool_192dpi.png)

info

You'll need to be an Organization Admin to access it.

If you decide to make the full switch, we've prepared a [migration guide](https://configcat.com/docs/docs/advanced/migration-from-launchdarkly/.md) to walk you through the whole process.

So why not make the jump? You'll land on your paws anyway. <!-- -->ð±

***

## Price Adjustment & Smart Plan Update[â](#price-adjustment--smart-plan-update "Direct link to Price Adjustment & Smart Plan Update")

#### Feb 17, 2025[â](#feb-17-2025 "Direct link to Feb 17, 2025")

As of 17th February 2025, we've made the following updates:

### Price adjustment[â](#price-adjustment "Direct link to Price adjustment")

Due to changes in the EUR-USD exchange rate, we've made an adjustment to our prices:

* Our EUR plans will have a 10% increase
* Our USD plans will have a 1% increase

This applies only to new upgrades and future customers.

### Smart plan Update[â](#smart-plan-update "Direct link to Smart plan Update")

* The Smart Plan now has a product limit of 10.

Existing Smart plan customers are not affected by this change.

***

## What's new in 2025[â](#whats-new-in-2025 "Direct link to What's new in 2025")

#### Jan 20, 2025[â](#jan-20-2025 "Direct link to Jan 20, 2025")

We have a few important updates to share with you, including new integrations, changes to our pricing, and some highly requested features. Here's what's happening:

### ð ConfigCat now available in JetBrains Marketplace[â](#-configcat-now-available-in-jetbrains-marketplace "Direct link to ð ConfigCat now available in JetBrains Marketplace")

We're happy to announce that the ConfigCat Feature Flag plugin is now available on the JetBrains Marketplace. You can now manage your feature flags directly from 15 supported JetBrains IDEs. Check out the plugin [here](https://configcat.com/docs/integrations/intellij/).

### ð Dark Mode & UI Facelift[â](#-dark-mode--ui-facelift "Direct link to ð Dark Mode & UI Facelift")

Dark Mode has been one of the most requested features, and we're happy to announce that it's now available!<br /><!-- -->Plus, we've given the UI a fresh, modern look to make things even easier and more enjoyable to use.

![Darkmode](/docs/assets/news/darkmode.png)

### ð³ Multiple Payment Sources[â](#-multiple-payment-sources "Direct link to ð³ Multiple Payment Sources")

You can now add backup credit cards to your organization, making your payments more flexible and secure.

### ð Price adjustments and Plan updates[â](#-price-adjustments-and-plan-updates "Direct link to ð Price adjustments and Plan updates")

We're making a few changes to our pricing plans, which will take effect on 17th February 2025.

* *Price adjustment* Over the past few years, the constantly fluctuating USD/EUR exchange rate has significantly widened the gap between our EUR and USD pricing. We're making adjustments to bring these prices closer together:

  <!-- -->

  * Our EUR plans will have a 10% increase
  * Our USD plans will have a 1% increase This change will only apply to upgrades and will affect future customers starting on the 17th February 2025.

* *Updates to Free and Smart plans*

  * Free Plan: The Product limit has been increased to 2. Existing Free plan users have automatically received this benefit.
  * Smart Plan (effective from 17 February 2025): The Product limit will be capped at 10. Existing Smart plan customers will not be affected by this change.

***

## Disable two-factor authentication permission[â](#disable-two-factor-authentication-permission "Direct link to Disable two-factor authentication permission")

#### Oct 8, 2024[â](#oct-8-2024 "Direct link to Oct 8, 2024")

You can disable two-factor authentication for your team members. This feature is useful if someone loses the device used for two-factor authentication.

*Only team members with Organization Admin role or with 'Can disable two-factor authentication for other team members' permission can disable two-factor authentication.*

[Open Team Members page on our Dashboard](https://app.configcat.com/product/members)

***

## Introducing ConfigCat Playground: Test Feature Flags Easily in a safe environment[â](#introducing-configcat-playground-test-feature-flags-easily-in-a-safe-environment "Direct link to Introducing ConfigCat Playground: Test Feature Flags Easily in a safe environment")

#### Sept 26, 2024[â](#sept-26-2024 "Direct link to Sept 26, 2024")

We've just released the ConfigCat Playground, a simulator that provides a safe virtual environment where you can try out everything ConfigCat has to offer.

This new feature gives you virtual devices and a virtual app that can be connected to your ConfigCat feature flags. This lets you test feature flags and targeting rules without needing to connect any real applications.

Please do not use the Playground with feature flags already connected to live applications. We highly recommend using feature flags from non-production environments when experimenting in the Playground.

To get started, simply click on the **"Test in Playground"** option in the **...** menu of any boolean feature flag inside your ConfigCat Dashboard.

![ConfigCat Playground](/docs/assets/news/playground.png) ![Test in Playground option in the ... menu](/docs/assets/news/playground-context-menu.png)

***

## New ConfigCat OpenFeature providers[â](#new-configcat-openfeature-providers-1 "Direct link to New ConfigCat OpenFeature providers")

#### Sept 6, 2024[â](#sept-6-2024 "Direct link to Sept 6, 2024")

We're happy to share that we have released new OpenFeature providers for the following platforms:

* [PHP](https://configcat.com/docs/docs/sdk-reference/openfeature/php/.md)
* [Python](https://configcat.com/docs/docs/sdk-reference/openfeature/python/.md)
* [Rust](https://configcat.com/docs/docs/sdk-reference/openfeature/rust/.md)

[See the documentation](https://configcat.com/docs/docs/sdk-reference/openfeature/overview/.md) for the complete list of currently supported platforms.

***

## Integration management via Public Management API and Terraform[â](#integration-management-via-public-management-api-and-terraform "Direct link to Integration management via Public Management API and Terraform")

#### Aug 13, 2024[â](#aug-13-2024 "Direct link to Aug 13, 2024")

From now on, you can manage your Integrations through the ConfigCat Public Management API and Terraform provider. See the docs for details:

* ConfigCat Public Management API: use the [Integrations](https://api.configcat.com/docs/index.html#tag/Integrations) endpoints.

* ConfigCat Feature Flags Provider for Terraform: use the [configcat\_integration ](https://registry.terraform.io/providers/configcat/configcat/latest/docs/resources/integration)resource.

***

## New ConfigCat SDK for Unreal Engine[â](#new-configcat-sdk-for-unreal-engine "Direct link to New ConfigCat SDK for Unreal Engine")

#### Jul 31, 2024[â](#jul-31-2024 "Direct link to Jul 31, 2024")

We just released a new official ConfigCat SDK supporting Unreal Engine applications.

![ConfigCat SDK for Unreal Engine](/docs/assets/news/unreal.jpg)

[See Documentation](https://configcat.com/docs/docs/sdk-reference/unreal/.md)

***

## New ConfigCat SDK for Rust[â](#new-configcat-sdk-for-rust "Direct link to New ConfigCat SDK for Rust")

#### Jul 19, 2024[â](#jul-19-2024 "Direct link to Jul 19, 2024")

We just released a new official ConfigCat SDK supporting Rust applications.

[See Documentation](https://configcat.com/docs/docs/sdk-reference/rust/.md)

***

## Ability to connect multiple integrations[â](#ability-to-connect-multiple-integrations "Direct link to Ability to connect multiple integrations")

#### Jun 27, 2024[â](#jun-27-2024 "Direct link to Jun 27, 2024")

We're happy to share that we have added the ability to connect multiple [integrations](https://app.configcat.com/integrations) of the same type.<br />Moreover, it's now possible to apply environment/config filters on each individual integration.

![Multiple integrations menu](/docs/assets/news/multi_integ_1.png) ![Multiple integrations dialog](/docs/assets/news/multi_integ_2.png)

***

## Advanced feature flag analytics with Twilio Segment[â](#advanced-feature-flag-analytics-with-twilio-segment "Direct link to Advanced feature flag analytics with Twilio Segment")

#### Jun 14, 2024[â](#jun-14-2024 "Direct link to Jun 14, 2024")

We're happy to share that we have introduced a new way to track your feature flags in your analytics tools. From now on you can [send feature flag change events and](https://configcat.com/docs/docs/integrations/segment/.md#changeevents) and [send feature flag evaluation analytics](https://configcat.com/docs/docs/integrations/segment/.md#analytics) to Twilio Segment.

***

## Introducing the ConfigCat Feature Flags Tutorial[â](#introducing-the-configcat-feature-flags-tutorial "Direct link to Introducing the ConfigCat Feature Flags Tutorial")

#### Jun 11, 2024[â](#jun-11-2024 "Direct link to Jun 11, 2024")

We're excited to launch our [Feature Flags Tutorial](https://tutorial.configcat.com/?lm=13), a comprehensive guide designed to enhance your skills in feature management. This tutorial covers everything from basic toggling and simple targeting to advanced techniques like percentage rollouts and handling rollbacks.

![Feature Flags Tutorial](/docs/assets/news/tutorial_192dpi.png)

### Tutorial Highlights:[â](#tutorial-highlights "Direct link to Tutorial Highlights:")

* Begin with toggling a feature flag on and off to see its immediate impact on a user interface, simulating real-world user scenarios.
* Simple Targeting: Learn to apply basic targeting rules by enabling a feature for all users except those in a specific country.
* Dogfooding: Practice internal testing by setting the feature to be visible only to users from your company.
* Percentage Rollout: Advance to partial feature deployment by enabling a new feature for a percentage of your users, testing its acceptance incrementally.
* Rollback: Master the ability to quickly revert changes for specific user groups when encountering issues during rollout.

This step-by-step guide is ideal for anyone looking to integrate feature flags into their projects efficiently.

[Explore the Tutorial](https://tutorial.configcat.com/?lm=14)

***

## Advanced feature flag analytics with Mixpanel, Amplitude and Google Analytics[â](#advanced-feature-flag-analytics-with-mixpanel-amplitude-and-google-analytics "Direct link to Advanced feature flag analytics with Mixpanel, Amplitude and Google Analytics")

#### May 15, 2024[â](#may-15-2024 "Direct link to May 15, 2024")

We're happy to share that we have introduced new ways to track your feature flags in your analytics tools.

From now on you can:

* [Monitor feature flag change events in Mixpanel with Annotations](https://configcat.com/docs/integrations/mixpanel/#annotations)
* [Send feature flag evaluation analytics to Mixpanel Experiments](https://configcat.com/docs/integrations/mixpanel/#experiments)
* [Send feature flag evaluation analytics to Amplitude Experiments](https://configcat.com/docs/integrations/amplitude/#experiments)
* [Send feature flag evaluation analytics to Google Analytics](https://configcat.com/docs/integrations/google-analytics)

***

## Webhook and Product preference management in Public Management API and Terraform[â](#webhook-and-product-preference-management-in-public-management-api-and-terraform "Direct link to Webhook and Product preference management in Public Management API and Terraform")

#### May 8, 2024[â](#may-8-2024 "Direct link to May 8, 2024")

From now on, you can manage your Webhooks and Product preferences through the ConfigCat Public Management API and the Terraform provider. See the docs for details:

* ConfigCat Public Management API: use the [Webhooks ](https://api.configcat.com/docs/index.html#tag/Webhooks), [Get Product Preferences](https://api.configcat.com/docs/index.html#tag/Products/operation/get-product-preferences) and [Update Product Preferences](https://api.configcat.com/docs/index.html#tag/Products/operation/update-product-preferences) endpoints.

* ConfigCat Feature Flags Provider for Terraform: use the [configcat\_webhook ](https://registry.terraform.io/providers/configcat/configcat/latest/docs/resources/webhook)and [configcat\_product\_preferences](https://registry.terraform.io/providers/configcat/configcat/latest/docs/resources/product_preferences) resources.

***

## ConfigCat Proxy Released\![â](#configcat-proxy-released "Direct link to ConfigCat Proxy Released!")

#### Apr 17, 2024[â](#apr-17-2024 "Direct link to Apr 17, 2024")

We're happy to announce the official release of [ConfigCat Proxy](https://github.com/configcat/configcat-proxy). ð

ConfigCat Proxy allows you to host feature flag evaluation service in your own infrastructure.<br /><!-- -->The Proxy provides the following:

ð **Performance**: Faster evaluation for stateless or short-lived apps.<br />ð¦¾ **Reliability**: Continuous operation, even if ConfigCat CDN is down.<br />ð **Security**: Protect config JSON files from exposure to frontend and mobile apps.<br />ð **Scalability**: Easily handle varying application loads.<br />ð¡ **Streaming**: Real-time feature flag change notifications via SSE and gRPC.<br />

Learn more about ConfigCat Proxy [here](https://configcat.com/docs/advanced/proxy/proxy-overview/).

***

## Introducing Config V2: More Powerful Feature Flagging\![â](#introducing-config-v2-more-powerful-feature-flagging "Direct link to Introducing Config V2: More Powerful Feature Flagging!")

#### Apr 05, 2024[â](#apr-05-2024 "Direct link to Apr 05, 2024")

We're thrilled to announce the upcoming launch of Config V2, the next generation of ConfigCat. This major update introduces a number of enhancements including a revamped Dashboard, Public Management API, updated SDKs, and a host of new features designed to streamline your feature flag and configuration management experience.

### What's New in Config V2?[â](#whats-new-in-config-v2 "Direct link to What's New in Config V2?")

* A modernized config editor UI for an enhanced Dashboard experience.
* Advanced targeting rules with AND conditions for more precise user targeting.
* New comparators and prerequisite flags for complex rule creation.

### Gradual Release & Opt-in[â](#gradual-release--opt-in "Direct link to Gradual Release & Opt-in")

Config V2 will be rolled out gradually over the next three months. Interested customers are encouraged to opt-in early by [contacting our support team](https://configcat.com/support/)

### Seamless Migration, No Immediate Changes Required[â](#seamless-migration-no-immediate-changes-required "Direct link to Seamless Migration, No Immediate Changes Required")

Post-release, rest assured that your existing configurations will continue to function just as before. There's no immediate pressure to migrate, allowing you to transition to Config V2 when it suits you best.

Here is a [detailed guide](https://configcat.com/docs/advanced/config-v2/) to know more about Config V2 and the new features.

***

## ConfigCat customer experience survey[â](#configcat-customer-experience-survey "Direct link to ConfigCat customer experience survey")

#### Mar 22, 2024[â](#mar-22-2024 "Direct link to Mar 22, 2024")

Please take a moment to share your experience with ConfigCat. Fill out [this survey](https://forms.gle/VepSDp3pF9FCVzAE9) and help us improve our product!<br /><!-- -->Thank you for your time! ð

***

## Join the Config V2 Beta Program[â](#join-the-config-v2-beta-program "Direct link to Join the Config V2 Beta Program")

#### Jan 19, 2024[â](#jan-19-2024 "Direct link to Jan 19, 2024")

We're looking for ConfigCat users willing to participate in the beta testing of Config V2.

### What is Config V2?[â](#what-is-config-v2 "Direct link to What is Config V2?")

Config V2 is a new version of ConfigCat. It brings together a bundle of highly requested features like AND conditions, new comparators (Text Equals, Text Starts with Any of, Text Ends with Any of, Before/After), Prerequisite flags, and more. [Read more about Config V2 and the new features.](https://configcat.com/docs/docs/advanced/config-v2/.md)

You can get early access to the new features and shape the final product with your feedback.

### How to join the beta program?[â](#how-to-join-the-beta-program "Direct link to How to join the beta program?")

1. [Apply via this form](https://forms.gle/wEFxKYs5Lv5iiLUF8)
2. Join the **#config-v2-beta-testing** channel in our [Community Slack](https://configcat.com/slack/) to give feedback.

***

## Resource ordering in Public Management API and Terraform[â](#resource-ordering-in-public-management-api-and-terraform "Direct link to Resource ordering in Public Management API and Terraform")

#### Jan 9, 2024[â](#jan-9-2024 "Direct link to Jan 9, 2024")

From now on, you can change the order of your products, configs and environments trough the ConfigCat Public Management API and the Terraform provider. See the docs for details:

* *ConfigCat Public Management API*: specify the order argument in the [Products](https://configcat.com/docs/docs/api/reference/products/.md), [Configs](https://configcat.com/docs/docs/api/reference/configs/.md), [Environment](https://configcat.com/docs/docs/api/reference/environments/.md) and [Feature Flags & Settings](https://configcat.com/docs/docs/api/reference/feature-flags-settings/.md) endpoints
* *ConfigCat Feature Flags Provider for Terraform*: specify the order argument of the [configcat\_product](https://registry.terraform.io/providers/configcat/configcat/latest/docs/resources/product#argument-reference), [configcat\_config](https://registry.terraform.io/providers/configcat/configcat/latest/docs/resources/config#argument-reference), [configcat\_environment](https://registry.terraform.io/providers/configcat/configcat/latest/docs/resources/environment#argument-reference) and [configcat\_setting](https://registry.terraform.io/providers/configcat/configcat/latest/docs/resources/setting#argument-reference).

***

## ConfigCat OpenFeature Providers available[â](#configcat-openfeature-providers-available "Direct link to ConfigCat OpenFeature Providers available")

#### Jan 5, 2024[â](#jan-5-2024 "Direct link to Jan 5, 2024")

OpenFeature now supports ConfigCat via dedicated providers for their SDKs. So if you prefer using ConfigCat via the OpenFeature API, you can now do so with the following providers:

* [ConfigCat OpenFeature Provider for Java](https://github.com/open-feature/java-sdk-contrib/tree/main/providers/configcat)
* [ConfigCat OpenFeature Provider for Go](https://github.com/open-feature/go-sdk-contrib/tree/main/providers/configcat)
* [ConfigCat OpenFeature Provider for JavaScript](https://github.com/open-feature/js-sdk-contrib/tree/main/libs/providers/config-cat)

***

## ConfigCat Proxy Beta[â](#configcat-proxy-beta "Direct link to ConfigCat Proxy Beta")

#### Nov 17, 2023[â](#nov-17-2023 "Direct link to Nov 17, 2023")

We're happy to share that the ConfigCat Proxy is now in the Beta phase and we need your help to make it even better!

ð Want to learn more about the ConfigCat Proxy? Get all the details [here](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md).

ð§ We'd like to invite you to participate in the beta testing. If you're interested, join the dedicated **#configcat-proxy-beta** channel in our [Slack Community](https://configcat.com/slack). Share your experiences, ask questions, and collaborate with our team and fellow community members.

***

## New cleartext comparators in Segments[â](#new-cleartext-comparators-in-segments "Direct link to New cleartext comparators in Segments")

#### Oct 26, 2023[â](#oct-26-2023 "Direct link to Oct 26, 2023")

ConfigCat now supports two new cleartext comparators: IS ONE OF and IS NOT ONE OF.

![New cleartext comparators](/docs/assets/images/isoneofcleartext-ac6dd72b09032cd397f39bccd1651c2f.png)

These new comparators allow you to check if a given value is part of a list or not. This is in addition to the hashed confidential versions that were previously available.

***

## Unique tag names[â](#unique-tag-names "Direct link to Unique tag names")

#### Oct 4, 2023[â](#oct-4-2023 "Direct link to Oct 4, 2023")

Now, tag names within a product must be unique. This new feature ensures better organization and avoids any potential confusion with colliding tag names.

***

## Manage Permission Groups with Terraform[â](#manage-permission-groups-with-terraform "Direct link to Manage Permission Groups with Terraform")

#### Aug 23, 2023[â](#aug-23-2023 "Direct link to Aug 23, 2023")

Introducing Permission Group management in [**ConfigCat Feature Flags Provider for Terraform**](https://registry.terraform.io/providers/configcat/configcat/latest/docs)! Use the [**configcat\_permission\_group**](https://registry.terraform.io/providers/configcat/configcat/latest/docs/resources/permission_group) resource for control and the [**configcat\_permission\_groups**](https://registry.terraform.io/providers/configcat/configcat/latest/docs/data-sources/permission_groups) data source for access to existing Permission Groups.

***

## Some updates regarding SLA guaranteed Uptime[â](#some-updates-regarding-sla-guaranteed-uptime "Direct link to Some updates regarding SLA guaranteed Uptime")

#### Aug 15, 2023[â](#aug-15-2023 "Direct link to Aug 15, 2023")

We're excited to announce important updates to our Service Level Agreement (SLA) concerning uptime commitments.

We're increasing our uptime commitment for the following plans:

| Uptime Changes  | Previous | Current         |
| --------------- | -------- | --------------- |
| Free Plan       | 99%      | 99% (No Change) |
| Pro Plan        | 99.8%    | 99.9%           |
| Smart Plan      | 99.9%    | 99.95%          |
| Enterprise Plan | 99.9%    | 99.99%          |
| Dedicated Plan  | 99.9%    | 99.99%          |

By enhancing our SLA terms, we aim to provide a more consistent and trustworthy service that you can depend on, day in and day out.

***

## Old SDKs will stop working after October 1st, 2023[â](#old-sdks-will-stop-working-after-october-1st-2023 "Direct link to Old SDKs will stop working after October 1st, 2023")

#### Aug 10, 2023[â](#aug-10-2023 "Direct link to Aug 10, 2023")

All ConfigCat SDKs released before Feb, 2020 will stop working after October 1st, 2023. Please, upgrade all your SDKs to the latest.

Although we aim to keep older SDK versions functional, those trailing more than one major or minor release lack official support and SLA. Many of these outdated SDKs will no longer remain functional.

### Affected SDKs and versions[â](#affected-sdks-and-versions "Direct link to Affected SDKs and versions")

| SDK Type | Latest available version | Will stop working |
| -------- | ------------------------ | ----------------- |
| Python   | v8.0.0                   | < v3.0.2          |
| Ruby     | v7.0.0                   | < v2.0.3          |
| .NET     | v8.2.0                   | < v4.0.0          |
| Go       | v8.0.0                   | < v4.0.0          |
| Java     | v8.2.2                   | < v4.0.0          |
| Android  | v9.0.1                   | < v4.0.0          |
| JS       | v8.1.0                   | < v3.0.0          |
| JS-SSR   | v7.1.0                   | < v1.0.2          |
| Node     | v10.1.0                  | < v4.0.0          |
| PHP      | v7.1.1                   | < v3.0.2          |
| Swift    | v9.4.0                   | < v4.0.0          |

***

## Introducing Network Traffic limits for all plans[â](#introducing-network-traffic-limits-for-all-plans "Direct link to Introducing Network Traffic limits for all plans")

#### Aug 1, 2023[â](#aug-1-2023 "Direct link to Aug 1, 2023")

We are introducing [**Network Traffic**](https://configcat.com/docs/docs/network-traffic/.md) limits for all plans. The usage is based on the Network Traffic your applications are making to the ConfigCat CDN.

### Why are we introducing these limits?[â](#why-are-we-introducing-these-limits "Direct link to Why are we introducing these limits?")

Our cloud provider charges us for the Network Traffic we use to serve your feature flags. By introducing these limits, we can cover these costs and continue providing the service. Instead of raising prices for all users in general, we decided to specifically reflect the network-related operation costs in our current pricing plans.

### What are the limits?[â](#what-are-the-limits "Direct link to What are the limits?")

| Free       | Pro         | Smart     | Enterprise |
| ---------- | ----------- | --------- | ---------- |
| 20 GB / mo | 100 GB / mo | 1 TB / mo | 4 TB / mo  |

### What to expect?[â](#what-to-expect "Direct link to What to expect?")

94% of our users will not be affected by these limits. If you are in the 6% that exceeds the limit, we will reach out to you directly to assist in the next 3 months in finding the best solution for your specific use case. Rest assured that even if you exceed the limit, your feature flags will continue to work seamlessly.

If you have any further questions or need assistance, please don't hesitate to [**reach out to us**](https://configcat.com/support). We're here to help!

***

## Introducing "Test with User"[â](#introducing-test-with-user "Direct link to Introducing \"Test with User\"")

#### Jul 26, 2023[â](#jul-26-2023 "Direct link to Jul 26, 2023")

We're pleased to announce the arrival of "Test with User" for feature flags!

With "Test with User," you can now test your feature flags before deploying them to production. Wondering how your flags will perform for specific users? This feature allows you to see the evaluation results based on a given User Object.

***

## Chromium Extension SDK (Beta)[â](#chromium-extension-sdk-beta "Direct link to Chromium Extension SDK (Beta)")

#### Dec 3, 2022[â](#dec-3-2022 "Direct link to Dec 3, 2022")

A new JS SDK for Chromium Extensions supporting the [Manifest V3](https://developer.chrome.com/docs/extensions/mv3/intro/) API is now on public beta and available via [npm](https://www.npmjs.com/package/configcat-js-chromium-extension).

[Open on GitHub](https://github.com/configcat/js-chromium-extension-sdk)

***

## New ConfigCat SDK for C++[â](#new-configcat-sdk-for-c "Direct link to New ConfigCat SDK for C++")

#### Oct 7, 2022[â](#oct-7-2022 "Direct link to Oct 7, 2022")

We just released a new official ConfigCat SDK supporting C++ applications.

[See Documentation](https://configcat.com/docs/docs/sdk-reference/cpp/.md)

***

## New ConfigCat SDK for React[â](#new-configcat-sdk-for-react "Direct link to New ConfigCat SDK for React")

#### Sept 6, 2022[â](#sept-6-2022 "Direct link to Sept 6, 2022")

We just released a new official ConfigCat SDK supporting React applications.

[See Documentation](https://configcat.com/docs/docs/sdk-reference/react/.md)

***

## monday.com integration[â](#mondaycom-integration "Direct link to monday.com integration")

#### Jul 18, 2022[â](#jul-18-2022 "Direct link to Jul 18, 2022")

Turn your features On / Off right from a monday.com item.

[ConfigCat Feature Flags monday.com app](https://monday.com/marketplace/10000079)

***

## ISO/IEC 27001:2013 certification[â](#isoiec-270012013-certification "Direct link to ISO/IEC 27001:2013 certification")

#### Jun 27, 2022[â](#jun-27-2022 "Direct link to Jun 27, 2022")

We're happy to announce that ConfigCat has achieved the ISO/IEC 27001:2013 certification for Information Security Management Systems (ISMS).

[Read more and download the certificates here](https://configcat.com/iso/)

***

## Reordering feature flags and other entities[â](#reordering-feature-flags-and-other-entities "Direct link to Reordering feature flags and other entities")

#### Mar 22, 2022[â](#mar-22-2022 "Direct link to Mar 22, 2022")

Click the Reorder icon on any overview to change the ordering of your feature flags, environments, configs or products.

***

## Copy feature flag values between environments[â](#copy-feature-flag-values-between-environments "Direct link to Copy feature flag values between environments")

#### Feb 23, 2022[â](#feb-23-2022 "Direct link to Feb 23, 2022")

You can copy feature flag values (including segment, targeting, percentage rules) from one environment to another.

***

## Segments are here[â](#segments-are-here "Direct link to Segments are here")

#### Feb 15, 2022[â](#feb-15-2022 "Direct link to Feb 15, 2022")

Segments let you group your users based on any of their properties (e.g: Beta Testers). You can target the same segment with multiple feature flags.

[Go to segments on our Dashboard](https://app.configcat.com/product/segments)

***

## TV Mode[â](#tv-mode "Direct link to TV Mode")

#### Dec 15, 2021[â](#dec-15-2021 "Direct link to Dec 15, 2021")

Display your feature flags on the TVs around the office!

[Config overview on our Dashboard](https://app.configcat.com/overview)

***

## Config Overview[â](#config-overview "Direct link to Config Overview")

#### Nov 17, 2021[â](#nov-17-2021 "Direct link to Nov 17, 2021")

Introducing a new overview to track your feature flag values in all your environments side-by-side.

Open the environment menu to access the overview.

[Open config overview on our Dashboard](https://app.configcat.com/overview)

***

## "Which projects are using this flag?"[â](#which-projects-are-using-this-flag "Direct link to \"Which projects are using this flag?\"")

#### Nov 2, 2021[â](#nov-2-2021 "Direct link to Nov 2, 2021")

ConfigCat: "Say no more fam! Let me show you!"

[See the documentation for details](https://configcat.com/docs/docs/advanced/code-references/overview/.md)

***

## Searching feature flags instead of Ctrl+F[â](#searching-feature-flags-instead-of-ctrlf "Direct link to Searching feature flags instead of Ctrl+F")

#### Oct 5, 2021[â](#oct-5-2021 "Direct link to Oct 5, 2021")

Added a search bar to the feature flags page.

We recommend using it instead of Ctr+F and Cmd+F since the page is lazy loaded. So it might not yield results from parts of the page that are not currently rendered.

***

## Environment colors are finally here[â](#environment-colors-are-finally-here "Direct link to Environment colors are finally here")

#### Sep 24, 2021[â](#sep-24-2021 "Direct link to Sep 24, 2021")

Just updated the UX on the product overview page and added a few small features.

* You can choose from a number of colors for your environments.
* Also adding descriptions helps teammates to find their way around environments and configs.

[Set your colors and add descriptions on the product overview page on our Dashboard](https://app.configcat.com/product)

***

## Send less invitations using SAML SSO, Auto-assign users and product join requests[â](#send-less-invitations-using-saml-sso-auto-assign-users-and-product-join-requests "Direct link to Send less invitations using SAML SSO, Auto-assign users and product join requests")

#### Sep 23, 2021[â](#sep-23-2021 "Direct link to Sep 23, 2021")

To make organization level user management more convenient we added a bunch of new features:

* Added an [organization overview on our Dashboard page](https://app.configcat.com/) to see products more clearly.
* Team members can send join requests to admins if they want to join a product.
* Whenever someone signs up to ConfigCat using a verified email domain, they could be automatically assigned to products.
* SAML Single Sign-On supporting all of the major identity providers.
* Improved layout for admins to [manage organization members](https://app.configcat.com/organization/members) on our Dashboard page.

*Only team members with Organization Admin role can access these features.*

[Set up user provisioning and SAML Single Sign-On on our Dashboard](https://app.configcat.com/organization/authentication)

***

## New Organization Admin functionalities[â](#new-organization-admin-functionalities "Direct link to New Organization Admin functionalities")

#### Aug 13, 2021[â](#aug-13-2021 "Direct link to Aug 13, 2021")

* Organization Admins can remove a member from the whole organization.
* Organization Admins can modify a member's permissions globally.

*Only team members with Organization Admin role can access these features.*

[Open Organization Members & Roles page on our Dashboard](https://app.configcat.com/organization/members)

***

## Disable Two-factor authentication[â](#disable-two-factor-authentication "Direct link to Disable Two-factor authentication")

#### Aug 4, 2021[â](#aug-4-2021 "Direct link to Aug 4, 2021")

Disable Two-factor authentication for your team members. This feature is useful if somebody lost the device used for Two-factor authentication.

*Only team members with Organization Admin role can disable Two-factor authentication.*

[Open Organization Members & Roles page on our Dashboard](https://app.configcat.com/organization/members)

***

## Export / Import[â](#export--import "Direct link to Export / Import")

#### Jul 28, 2021[â](#jul-28-2021 "Direct link to Jul 28, 2021")

Export (download), and import (upload) Configs, Environments, and Feature Flags from, and to file.

[Open Export / Import page on our Dashboard](https://app.configcat.com/product/exportimport)

***

## Dashboard v3 released[â](#dashboard-v3-released "Direct link to Dashboard v3 released")

#### Jun 30, 2021[â](#jun-30-2021 "Direct link to Jun 30, 2021")

Hope you like it.

Tell us your opinion over [Slack](https://configcat.com/slack) or [Email](mailto:team@configcat.com).

***

## Help us grow[â](#help-us-grow "Direct link to Help us grow")

#### Jun 10, 2021[â](#jun-10-2021 "Direct link to Jun 10, 2021")

If you like ConfigCat, you can help us grow by leaving a review. Plus Capterra is giving **20â¬ as a reward** to the first 100 reviewers.

Any of the following works:

* [TrustRadius](https://www.trustradius.com/welcome/configcat)
* [Trust Pilot](https://www.trustpilot.com/evaluate/configcat.com)
* [G2 Crowd](https://www.g2.com/products/configcat/reviews/start)
* [Capterra](https://reviews.capterra.com/new/187099) (**20â¬ reward**)
* [Alternative.me](https://alternative.me/configcat)
* [AlternativeTo](https://alternativeto.net/software/configcat/reviews)

***

## Visual Studio Code Extension[â](#visual-studio-code-extension "Direct link to Visual Studio Code Extension")

#### May 06, 2021[â](#may-06-2021 "Direct link to May 06, 2021")

Turn your features On / Off and manage your Feature Flags from Visual Studio Code.

* [Visual Studio Code Extension](https://marketplace.visualstudio.com/items?itemName=ConfigCat.configcat-feature-flags)

***

## Detailed Permission Group system[â](#detailed-permission-group-system "Direct link to Detailed Permission Group system")

#### Mar 10, 2021[â](#mar-10-2021 "Direct link to Mar 10, 2021")

Permission Groups can be customized in more advanced levels:

* Resource-based permissions (Configs, Environments, Tags, Webhooks)

* Create/Update and Delete permissions are separated

* Team member management permission

* Product preferences permission

* Product Audit Log/Statistics permission

* Integration management permission

* SDK Key View/Rotate permissions

* [Fine-tune Permission Groups on our Dashboard](https://app.configcat.com/product/permission-groups)

***

## Zombie Flags (Stale Flags) Report via email[â](#zombie-flags-stale-flags-report-via-email "Direct link to Zombie Flags (Stale Flags) Report via email")

#### Mar 4, 2021[â](#mar-4-2021 "Direct link to Mar 4, 2021")

Feature flags have a tendency to multiply rapidly. In order to keep the tech-debt low, we recommend removing the flags no longer needed. You can now set up a regular email report with a list of these zombie or stale flags.

* [Set up the Zombie Flags Report on our Dashboard](https://app.configcat.com/zombie-flags-report)

***

## Invoice download[â](#invoice-download "Direct link to Invoice download")

#### Feb 8, 2021[â](#feb-8-2021 "Direct link to Feb 8, 2021")

You can download all your current and previous invoices from the Billing & Invoices page.

* [Open Billing & Invoices on our Dashboard](https://app.configcat.com/organization/billing)

***

## Accepting USD payments[â](#accepting-usd-payments "Direct link to Accepting USD payments")

#### Nov 26, 2020[â](#nov-26-2020 "Direct link to Nov 26, 2020")

We are accepting payments in USD from now on.

* [See plans on our Dashboard](https://app.configcat.com/organization/plans)

***

## ConfigCat & Zoho Flow[â](#configcat--zoho-flow "Direct link to ConfigCat & Zoho Flow")

#### Nov 21, 2020[â](#nov-21-2020 "Direct link to Nov 21, 2020")

ConfigCat's Zoho Flow integration is now available.

* [Detailed Docs and Setup Guide](https://configcat.com/docs/docs/integrations/zoho-flow/.md)

***

## Default Permission Group[â](#default-permission-group "Direct link to Default Permission Group")

#### Nov 13, 2020[â](#nov-13-2020 "Direct link to Nov 13, 2020")

Set a default Permission Group for Team member invites. The chosen group will be the default on the permission group list when inviting others. So you can be sure not to invite someone as an admin by accident.

***

## Amplitude integration[â](#amplitude-integration "Direct link to Amplitude integration")

#### Oct 28, 2020[â](#oct-28-2020 "Direct link to Oct 28, 2020")

Annotate your setting changes on your Amplitude charts.

* [Docs and Setup Guide](https://configcat.com/docs/docs/integrations/amplitude/.md)

***

## ConfigCat Feature Flags Provider for Terraform[â](#configcat-feature-flags-provider-for-terraform "Direct link to ConfigCat Feature Flags Provider for Terraform")

#### Oct 16, 2020[â](#oct-16-2020 "Direct link to Oct 16, 2020")

Configure and access ConfigCat resources via Terraform.

* [ConfigCat Feature Flags Provider for Terraform](https://registry.terraform.io/providers/configcat/configcat/latest/docs)

***

## Data Governance - Action required[â](#data-governance---action-required "Direct link to Data Governance - Action required")

#### Oct 10, 2020[â](#oct-10-2020 "Direct link to Oct 10, 2020")

Addressing global data handling and processing trends, we have introduced the Data Governance feature in ConfigCat. We require all our customers to make a statement if they want to use our:

* **Global CDN**: providing geo-location based load balancing on server nodes all around the globe to ensure low response times.

* **EU CDN**: Staying compliant with GDPR by using ConfigCat EU CDN. This way your data will never leave the EU.

* [Read more on Data Governance and CDN](https://configcat.com/docs/docs/advanced/data-governance/.md)

***

## Organization Management[â](#organization-management "Direct link to Organization Management")

#### Sep 07, 2020[â](#sep-07-2020 "Direct link to Sep 07, 2020")

Featuring:

* **Organization Admin** and **Billing Manager** roles.

* General **security** preferences for the entire organization.

* Customizable **SSO** methods.

* Organization level **audit logs** and usage **statistics**.

* [See Docs](https://configcat.com/docs/docs/organization/.md)

***

## Public Management API v1 released[â](#public-management-api-v1-released "Direct link to Public Management API v1 released")

#### Jul 08, 2020[â](#jul-08-2020 "Direct link to Jul 08, 2020")

You can programmatically **CREATE**, **UPDATE**, **DELETE** Feature Flags, Configs, Products and Environments from now on!

* [See Docs and examples](https://configcat.com/docs/docs/api/reference/configcat-public-management-api/.md)

***

## Tags & Filtering[â](#tags--filtering "Direct link to Tags & Filtering")

#### May 29, 2020[â](#may-29-2020 "Direct link to May 29, 2020")

Add colored tags to your feature flags.

***

## Jira Cloud Plugin[â](#jira-cloud-plugin "Direct link to Jira Cloud Plugin")

#### May 28, 2020[â](#may-28-2020 "Direct link to May 28, 2020")

Turn your features On / Off right from a Jira Issue.

* [ConfigCat Jira Cloud Plugin](https://marketplace.atlassian.com/apps/1222421/configcat-feature-flags?hosting=cloud\&tab=overview)

***

## Slack App[â](#slack-app "Direct link to Slack App")

#### April 12, 2020[â](#april-12-2020 "Direct link to April 12, 2020")

Get updated via a Slack Channel message when someone changes a feature flag.

* [ConfigCat Feature Flags in Slack App Directory](https://configcat.slack.com/apps/A011CN2QZJB-configcat-feature-flags)

***

## API Key --> SDK Key[â](#api-key----sdk-key "Direct link to API Key --> SDK Key")

#### April 7, 2020[â](#april-7-2020 "Direct link to April 7, 2020")

Renamed API Key to SDK Key since it was more confusing as the Public Management API went to production. The API and the API Key are not related. This is a breaking change in some of the SDKs, released under new major versions.

***

## New JavaScript SDK for SSR[â](#new-javascript-sdk-for-ssr "Direct link to New JavaScript SDK for SSR")

#### April 3, 2020[â](#april-3-2020 "Direct link to April 3, 2020")

New JavaScript SDK supporting Server Side Rendered (SSR) frameworks like [NuxtJS](https://nuxtjs.org).

* [See Documentation](https://configcat.com/docs/docs/sdk-reference/js-ssr/.md)

***

## Trello Power-Up[â](#trello-power-up "Direct link to Trello Power-Up")

#### March 30, 2020[â](#march-30-2020 "Direct link to March 30, 2020")

Turn your features On / Off right from a Trello Card.

* [ConfigCat Power-Up](https://trello.com/power-ups/5e694b66d2511a3601ebd0fb)

***

## Integrations[â](#integrations "Direct link to Integrations")

#### March 21, 2020[â](#march-21-2020 "Direct link to March 21, 2020")

Connect the apps you use everyday and be more productive. Check out the [Integrations tab](https://app.configcat.com/product/integrations) in our Dashboard.

***

## View SDK Key permission[â](#view-sdk-key-permission "Direct link to View SDK Key permission")

#### March 21, 2020[â](#march-21-2020-1 "Direct link to March 21, 2020")

Visibility of information that is normally useful for developers only - like SDK Keys and code examples - can be set for [Permission Groups](https://app.configcat.com/product/permission-groups) on our Dashboard.

***

## Audit log improvements[â](#audit-log-improvements "Direct link to Audit log improvements")

#### March 20, 2020[â](#march-20-2020 "Direct link to March 20, 2020")

User friendly Feature Flag or Setting value changes in the [Audit log on our Dashboard](https://app.configcat.com/auditlog) to improve readability.

***

## Long text improvements[â](#long-text-improvements "Direct link to Long text improvements")

#### March 20, 2020[â](#march-20-2020-1 "Direct link to March 20, 2020")

Feature Flag or Setting text values and Targeting comparison values can be viewed and updated in a `textarea`.

***

## Upper case key generation mode[â](#upper-case-key-generation-mode "Direct link to Upper case key generation mode")

#### March 17, 2020[â](#march-17-2020 "Direct link to March 17, 2020")

Besides "camelCase" and "lower\_case" we have added an "UPPER\_CASE" key generation mode to preferences.

* [Open Preferences on in our Dashboard](https://app.configcat.com/product/preferences)

***

## Statistics[â](#statistics "Direct link to Statistics")

#### March 15, 2020[â](#march-15-2020 "Direct link to March 15, 2020")

See detailed statistics about the number of config.json downloads made towards ConfigCat CDN. Also a pie-chart of the SDK types and versions being used.

* [Open Stats on our Dashboard](https://app.configcat.com/product/statistics)

***

## ConfigCat Zap[â](#configcat-zap "Direct link to ConfigCat Zap")

#### March 12, 2020[â](#march-12-2020 "Direct link to March 12, 2020")

Zapier integration is now accessible.

* [Detailed Docs and Setup Guide](https://configcat.com/docs/docs/integrations/zapier/.md)

***

## Public Management API (Beta)[â](#public-management-api-beta "Direct link to Public Management API (Beta)")

#### March 11, 2020[â](#march-11-2020 "Direct link to March 11, 2020")

Released Public Management API to Beta. From now on you can execute Dashboard management operations programmatically.

* [API Documentation](https://configcat.com/docs/docs/api/reference/configcat-public-management-api/.md)

***

## Sensitive text comparators[â](#sensitive-text-comparators "Direct link to Sensitive text comparators")

#### March 3, 2020[â](#march-3-2020 "Direct link to March 3, 2020")

Introduced sensitive text comparators to make sure sensitive info (like email address, user name) is kept hidden in Targeting Rules. Comes handy in front-end applications.

* [Detailed Docs about comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#comparator)
* [Related blog post](https://configcat.com/blog/2020/03/02/sensitive-comparators/)

***

## Semantic version based user targeting[â](#semantic-version-based-user-targeting "Direct link to Semantic version based user targeting")

#### March 3, 2020[â](#march-3-2020-1 "Direct link to March 3, 2020")

Especially useful for Mobile developers.

* [Detailed Docs about comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#comparator)
* [Related blog post](https://configcat.com/blog/2020/01/27/semver)

***

## Ruby SDK[â](#ruby-sdk "Direct link to Ruby SDK")

#### Oct 29, 2019[â](#oct-29-2019 "Direct link to Oct 29, 2019")

It is out!

* [Ruby SDK Docs](https://configcat.com/docs/docs/sdk-reference/ruby/.md)
* [GitHub repo](https://github.com/configcat/ruby-sdk)
* [Blog post](https://configcat.com/blog/2019/10/29/ruby-sdk/)

***


---

# Organization & Roles

An *Organization* represents a collection of preferences that apply to all your *Products* and *Members* in that *Organization*. This includes things like billing information, sign-in methods, and data privacy settings.

The *Manage Organization* menu is only available for *Organization Admins*.

![Organization-menu](/docs/assets/organization-menu.png)

## Organization Admin role[â](#organization-admin-role "Direct link to Organization Admin role")

*Organization Admins* have full access to the entire organization and all products. For example, they can:

* Add or remove members
* Set up security settings
* Change sign-in methods
* Create or delete products, feature flags, and environments

They **do not** have access to billing or subscription settings unless they are also *Billing Managers*.

Only *Organization Admins* can assign or remove the *Organization Admin* role from others.

## Billing Manager role[â](#billing-manager-role "Direct link to Billing Manager role")

Only *Billing Managers* can:

* View and update billing information
* Change the subscription plan
* Assign or remove the *Billing Manager* role from others

*Billing Managers* **cannot** access products, environments, configs, or feature flags, unless they are also *Organization Admins*.


---

# Plans, Purchase & Billing

## Plans[â](#plans "Direct link to Plans")

ConfigCat is a feature flag service with unlimited team size, awesome support, and a reasonable price tag. You can use ConfigCat by subscribing with an email address which is free forever. Additionally, we offer three more plans with fewer limitations and more additional features. For a detailed comparison [check out the pricing table](https://configcat.com/pricing/).

If you need a comprehensive table of all the business and technical limits of each plan, see the [Subscription Plan Limits Table](https://configcat.com/docs/docs/subscription-plan-limits/.md).

### Shared vs Dedicated infrastructure[â](#shared-vs-dedicated-infrastructure "Direct link to Shared vs Dedicated infrastructure")

**Free, Pro, Smart, Enterprise plans** run on shared infrastructure. So all the customers are using the same API and Config Delivery Network.

**Hosted** plan has dedicated API and CDN nodes for their exclusive use, fully separated from the shared infrastructure. Dedicated customers can also drop their nodes to preferred geographic locations.

**On-Premise** plan includes only the distribution of the ConfigCat service via [Docker containers](https://www.docker.com/resources/what-container). So customers can run the service on their own infrastructure.

### Self-service vs Assisted plans[â](#self-service-vs-assisted-plans "Direct link to Self-service vs Assisted plans")

**Free, Pro, Smart plans** are self-service. Using any of those plans should not require manual assistance from the ConfigCat team.

**Enterprise, Hosted, On-Premise plans** include manual assistance from the ConfigCat team like filling forms, providing reports, reviewing contracts or setting up bank transfers.

## How to purchase a ConfigCat plan?[â](#how-to-purchase-a-configcat-plan "Direct link to How to purchase a ConfigCat plan?")

You can purchase a ConfigCat subscription plan on the [Plans page](https://app.configcat.com/plans).

info

You must have a [Billing Manager](https://configcat.com/docs/docs/organization/.md) role in your Organization to change or upgrade your plan.

### Our payment provider[â](#our-payment-provider "Direct link to Our payment provider")

If you select to upgrade your current plan, we are taking you to a third party provider called [Chargebee](https://www.chargebee.com/). After completing the purchase, you are taken back to your newly upgraded ConfigCat account.

### Security[â](#security "Direct link to Security")

Credit card information is stored and managed by [Chargebee](https://www.chargebee.com/), our payment provider.

## How to update billing information?[â](#how-to-update-billing-information "Direct link to How to update billing information?")

You can update your billing info on the [Manage Billing page](https://app.configcat.com/organization/billing).

info

You must have a [Billing Manager](https://configcat.com/docs/docs/organization/.md) role in your Organization to update your billing info.


---

# What is a config JSON download?

A config JSON download is counted every time your application downloads a configuration file from the ConfigCat CDN. The frequency of these downloads is totally under your control. Between downloads, you can evaluate your feature flags as many times as you like, it still counts as one config JSON download.

See an [overview of the ConfigCat architecture](https://configcat.com/architecture/).

Use the [Plan Calculator](https://configcat.com/calculator/) to calculate your estimated config JSON downloads.

Keep track of the number of config JSON downloads your apps are making on the [Usage & Quota page.](https://app.configcat.com/product/usage)

![ConfigCat Statistics](/docs/assets/stats.png)

## Current config JSON download limits[â](#current-config-json-download-limits "Direct link to Current config JSON download limits")

### Shared infrastructure[â](#shared-infrastructure "Direct link to Shared infrastructure")

The following plans run on shared infrastructure. So all customers use the same API nodes and Config Delivery Network (CDN).

| Plan           | total req/month | avg. req/sec | max. spike req/s |
| -------------- | --------------- | ------------ | ---------------- |
| **Free**       | 5,000,000       | \~2          | \~4              |
| **Pro**        | 25,000,000      | \~10         | \~20             |
| **Smart**      | 250,000,000     | \~100        | \~200            |
| **Enterprise** | 1,000,000,000   | \~400        | \~800            |

Use the [Plan Calculator](https://configcat.com/calculator/) to get your estimated config JSON downloads.

info

If you reach this limit, we will keep your application up and running. However, you can expect us to contact you on how we can meet your needs.

### Dedicated infrastructure[â](#dedicated-infrastructure "Direct link to Dedicated infrastructure")

The following plans include dedicated API and CDN nodes.

#### Hosted[â](#hosted "Direct link to Hosted")

Runs on dedicated infrastructure provided by ConfigCat. The basic package includes:

* 1x API node
* 6x CDN nodes

|                               | total req/month | avg. req/sec | max. spike req/s |
| ----------------------------- | --------------- | ------------ | ---------------- |
| **Basic package**             | 6,000,000,000   | \~2400       | \~4800           |
| **Every additional CDN node** | + 1,000,000,000 | \~400        | \~800            |

#### On-Premise (Self-hosted)[â](#on-premise-self-hosted "Direct link to On-Premise (Self-hosted)")

Runs on the customer's own infrastructure. We suggest [contacting ConfigCat's engineering](https://configcat.com/support/) team for exact requirements and performance characteristics.

## config JSON downloads[â](#config-json-downloads "Direct link to config JSON downloads")

The ConfigCat SDK, which you import into your applications, downloads your feature flags and settings in the form of a config JSON file from the ConfigCat CDN and caches it locally.

## `GetValue()` call is NOT a config JSON download[â](#getvalue-call-is-not-a-config-json-download "Direct link to getvalue-call-is-not-a-config-json-download")

Reading feature flag and setting values from cache with `GetValue()` is not considered as a config JSON download. If the cache is empty (e.g., upon application launch) or expired, a config JSON will be downloaded, and all subsequent `GetValue()` calls will then be served from the cache.

## Example use cases[â](#example-use-cases "Direct link to Example use cases")

### Frontend/mobile/desktop applications[â](#frontendmobiledesktop-applications "Direct link to Frontend/mobile/desktop applications")

Typically, you have a high number of frontend/mobile/desktop application instances. Your user count determines this number.

#### Example: A standard web application with 15k active users[â](#example-a-standard-web-application-with-15k-active-users "Direct link to Example: A standard web application with 15k active users")

Web apps run in the browser, so for each user, there will be a different ConfigCat SDK instance running. In this example, we have 15,000 active users who usually spend 5 hours on your web application per month. The ConfigCat SDK runs in Auto polling mode with the default 60 seconds polling interval.

> **18,000** *(5 hours in seconds)* / **60** *polling interval* = **300 config JSON downloads/user/month**<br />**15,000** *(users)* Ã **300** *(config JSON downloads/user/month)* = **4,500,000 config JSON downloads / month**

#### Example: A mobile application running on 5k devices 24/7[â](#example-a-mobile-application-running-on-5k-devices-247 "Direct link to Example: A mobile application running on 5k devices 24/7")

Having a mobile app that runs on the devices as a background process. The ConfigCat SDK runs in Auto polling mode with 1 hour polling interval. Your application runs on 5,000 devices.

> **5,000** *(devices)* Ã **730** *(hours in a month)* = **3,650,000 config JSON downloads / month**

### Backend applications[â](#backend-applications "Direct link to Backend applications")

Backend applications typically have fewer instances than frontend applications.

#### Example: Average frequency polling in 4 instances[â](#example-average-frequency-polling-in-4-instances "Direct link to Example: Average frequency polling in 4 instances")

Let's say you have an API for your frontend application, and you have 4 instances of it behind a load balancer. All these 4 instances use the ConfigCat SDK in Auto Polling mode with a 1-minute polling interval.

> **4** *(instances)* Ã **43,800** *(minutes in a month)* = **175,200 config JSON downloads / month**

#### Example: High frequency polling in 10 instances[â](#example-high-frequency-polling-in-10-instances "Direct link to Example: High frequency polling in 10 instances")

Suppose you want your system to react faster after changing a feature flag in ConfigCat. You can decrease the default polling interval all the way down to 1 second. In this case, we are calculating with 10 running instances.

> **10** *(instances)* Ã **2,592,000** *(seconds in a month)* = **25,920,000 config JSON downloads / month**

## How to lower the monthly config JSON download count?[â](#how-to-lower-the-monthly-config-json-download-count "Direct link to How to lower the monthly config JSON download count?")

### Use the ConfigCat Client as a Singleton[â](#use-the-configcat-client-as-a-singleton "Direct link to Use the ConfigCat Client as a Singleton")

Make sure that you use the *ConfigCat Client* as a Singleton object in your application code. If you want to use multiple SDK Keys in the same application, create only one *ConfigCat Client* per SDK Key.

### Increase the polling interval[â](#increase-the-polling-interval "Direct link to Increase the polling interval")

You can lower the frequency your application downloads the `config JSON` by setting larger polling intervals or using a different [polling mode](https://configcat.com/docs/docs/advanced/caching/.md) other than the default auto polling. See the [SDK References for more.](https://configcat.com/docs/docs/sdk-reference/overview/.md)

### Use webhooks[â](#use-webhooks "Direct link to Use webhooks")

In a backend application, you may want to consider using [Webhooks.](https://configcat.com/docs/docs/advanced/notifications-webhooks/.md) This way your application receives notifications about changes and downloads the `config JSON` only when needed.

### Call your backend instead of the ConfigCat CDN[â](#call-your-backend-instead-of-the-configcat-cdn "Direct link to Call your backend instead of the ConfigCat CDN")

In the case of a frontend application, you can reduce the number of calls made towards the ConfigCat CDN by moving the evaluation logic from the frontend application to your backend.

### Use the ConfigCat Proxy to cache/proxy config JSON downloads[â](#use-the-configcat-proxy-to-cacheproxy-config-json-downloads "Direct link to Use the ConfigCat Proxy to cache/proxy config JSON downloads")

The [ConfigCat Proxy](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md) allows you to host a feature flag evaluation and config JSON proxy/cache service within your own infrastructure.<br /><!-- -->The [CDN proxy](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#cdn-proxy) feature allows you to proxy/cache config JSON downloads, and the ConfigCat SDKs can be routed to the ConfigCat Proxy running in your own infrastructure, greatly reducing the number of config JSON downloads.

### Purchase additional config JSON downloads[â](#purchase-additional-config-json-downloads "Direct link to Purchase additional config JSON downloads")

You can purchase an add-on for your subscription to increase your limits. [Contact us](https://configcat.com/support/) for more information.

| Plan           | Price             | Additional config JSON downloads | Additional network traffic |
| -------------- | ----------------- | -------------------------------- | -------------------------- |
| **Smart**      | $250 or â¬229 / mo | +250 million                     | +1TB                       |
| **Enterprise** | $700 or â¬649 / mo | +1 billion                       | +4TB                       |


---

# Android (Java) SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/android-sdk.svg?style=social)](https://github.com/configcat/android-sdk/stargazers) [![Android CI](https://github.com/configcat/android-sdk/actions/workflows/android-ci.yml/badge.svg?branch=master)](https://github.com/configcat/android-sdk/actions/workflows/android-ci.yml) [![Maven Central](https://img.shields.io/maven-central/v/com.configcat/configcat-android-client)](https://central.sonatype.com/artifact/com.configcat/configcat-android-client) [![Javadocs](https://javadoc.io/badge/com.configcat/configcat-android-client.svg)](https://javadoc.io/doc/com.configcat/configcat-android-client) [![Coverage Status](https://img.shields.io/sonar/coverage/configcat_android-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_android-sdk) [![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=configcat_android-sdk\&metric=alert_status)](https://sonarcloud.io/dashboard?id=configcat_android-sdk)

info

This SDK is mainly for Java-based Android applications. For a more modern Android development experience, check our [Kotlin Multiplatform SDK](https://configcat.com/docs/docs/sdk-reference/kotlin/.md).

[ConfigCat Android (Java) SDK on GitHub](https://github.com/configcat/android-sdk)

### Compatibility[â](#compatibility "Direct link to Compatibility")

The minimum supported Android SDK version is 21 (Lollipop).

### R8 (ProGuard)[â](#r8-proguard "Direct link to R8 (ProGuard)")

When you use R8 or ProGuard, the aar artifact automatically applies the [included rules](https://github.com/configcat/android-sdk/blob/master/configcat-proguard-rules.pro) for the SDK.

## Getting Started[â](#getting-started "Direct link to Getting Started")

### 1. Add the ConfigCat SDK to your project[â](#1-add-the-configcat-sdk-to-your-project "Direct link to 1. Add the ConfigCat SDK to your project")

build.gradle

```
dependencies {
    implementation 'com.configcat:configcat-android-client:10.+'
}
```

### 2. Import the ConfigCat SDK[â](#2-import-the-configcat-sdk "Direct link to 2. Import the ConfigCat SDK")

```
import com.configcat.*;
```

### 3. Create the *ConfigCat* client with your *SDK Key*[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3-create-the-configcat-client-with-your-sdk-key")

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#");
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

```
boolean isMyAwesomeFeatureEnabled = client.getValue(Boolean.class, "<key-of-my-awesome-feature>", false);
if (isMyAwesomeFeatureEnabled) {
    doTheNewThing();
} else {
    doTheOldThing();
}

// Or asynchronously
client.getValueAsync(Boolean.class, "<key-of-my-awesome-feature>", false)
    .thenAccept(isMyAwesomeFeatureEnabled -> {
        if (isMyAwesomeFeatureEnabled) {
            doTheNewThing();
        } else {
            doTheOldThing();
        }
    });
```

### 5. Stop *ConfigCat* client[â](#5-stop-configcat-client "Direct link to 5-stop-configcat-client")

You can safely shut down all clients at once or individually and release all associated resources on application exit.

```
ConfigCatClient.closeAll(); // closes all clients

client.close(); // closes a specific client
```

## Creating the *ConfigCat Client*[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`ConfigCatClient.get("#YOUR-SDK-KEY#")` returns a client with default options.

### Customizing the *ConfigCat Client*[â](#customizing-the-configcat-client "Direct link to customizing-the-configcat-client")

To customize the SDK's behavior, you can pass an additional `Consumer<Options>` parameter to the `get()` static factory method where the `Options` class is used to set up the *ConfigCat Client*.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.pollingMode(PollingModes.autoPoll());
    options.logLevel(LogLevel.INFO);
});
```

These are the available options on the `Options` class:

| Options                                                | Description                                                                                                                                                                                                                                                                                                                         |
| ------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `dataGovernance(DataGovernance)`                       | Optional, defaults to `Global`. Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `Global`, `EuOnly`. |
| `baseUrl(string)`                                      | Optional, sets the CDN base url (forward proxy, dedicated subscription) from where the sdk will download the config JSON.                                                                                                                                                                                                           |
| `httpClient(OkHttpClient)`                             | Optional, sets the underlying `OkHttpClient` used to download the feature flags and settings over HTTP. [More about the HTTP Client](#httpclient).                                                                                                                                                                                  |
| `cache(ConfigCache)`                                   | Optional, sets a custom cache implementation for the client. [More about cache](#custom-cache).                                                                                                                                                                                                                                     |
| `pollingMode(PollingMode)`                             | Optional, sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                                         |
| `logLevel(LogLevel)`                                   | Optional, defaults to `WARNING`. Sets the internal log level. [More about logging](#logging).                                                                                                                                                                                                                                       |
| `flagOverrides(OverrideDataSource, OverrideBehaviour)` | Optional, sets the local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                    |
| `defaultUser(User)`                                    | Optional, sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                          |
| `offline(boolean)`                                     | Optional, defaults to `false`. Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                   |
| `hooks()`                                              | Optional, used to subscribe events that the SDK sends in specific scenarios. [More about hooks](#hooks).                                                                                                                                                                                                                            |
| `logFilter(LogFilterFunction)`                         | Optional, sets a custom log filter. [More about log filtering](#log-filtering).                                                                                                                                                                                                                                                     |

caution

We strongly recommend you to use the `ConfigCatClient` as a Singleton object in your application. The `ConfigCatClient.get("#YOUR-SDK-KEY#")` static factory method constructs singleton client instances for your SDK keys. These clients can be closed all at once with the `ConfigCatClient.closeAll()` method or individually with `client.close()`.

## Anatomy of `getValue()`[â](#anatomy-of-getvalue "Direct link to anatomy-of-getvalue")

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `classOfT`     | **REQUIRED.** The type of the setting.                                                                                                                  |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |

```
boolean value = client.getValue(
    Boolean.class, // Setting type
    "keyOfMySetting", // Setting Key
    User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#"), // Optional User Object
    false // Default value
);
```

caution

It is important to provide an argument for the `classOfT` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | Type parameter `T`    |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean` / `Boolean` |
| Text           | `String`              |
| Whole Number   | `int` / `Integer`     |
| Decimal Number | `double` / `Double`   |

It's important to note that providing any other type for the type parameter will result in an `IllegalArgumentException`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `classOfT`     | **REQUIRED.** The type of the setting.                                                                                                                  |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |

```
client.getValueAsync(
    Boolean.class, // Setting type
    "keyOfMySetting", // Setting Key
    User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#"), // Optional User Object
    false // Default value
).thenAccept(isMyAwesomeFeatureEnabled -> {
    if (isMyAwesomeFeatureEnabled) {
        doTheNewThing();
    } else {
        doTheOldThing();
    }
});
```

caution

It is important to provide an argument for the `classOfT` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

## Anatomy of `getValueDetails()`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`getValueDetails()` is similar to `getValue()` but instead of returning the evaluated value only, it gives more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `classOfT`     | **REQUIRED.** The type of the setting.                                                                                                                  |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |

```
EvaluationDetails<Boolean> details = client.getValueDetails(
    Boolean.class, // Setting type
    "keyOfMySetting", // Setting Key
    User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#"), // Optional User Object
    false // Default value
);

// Or asynchronously
client.getValueDetailsAsync(
    Boolean.class, // Setting type
    "keyOfMySetting", // Setting Key
    User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#"), // Optional User Object
    false // Default value
).thenAccept(details -> {
    // Use the details result
});
```

caution

It is important to provide an argument for the `classOfT` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The details result contains the following information:

| Property                         | Type                                    | Description                                                                                                |
| -------------------------------- | --------------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `getValue()`                     | `boolean` / `String` / `int` / `double` | The evaluated value of the feature flag or setting.                                                        |
| `getKey()`                       | `String`                                | The key of the evaluated feature flag or setting.                                                          |
| `isDefaultValue()`               | `boolean`                               | True when the default value passed to `getValueDetails()` is returned due to an error.                     |
| `getError()`                     | `String`                                | In case of an error, this property contains the error message.                                             |
| `getUser()`                      | `User`                                  | The User Object that was used for evaluation.                                                              |
| `getMatchedPercentageOption()`   | `PercentageOption`                      | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `getMatchedTargetingRule()`      | `TargetingRule`                         | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `getFetchTimeUnixMilliseconds()` | `long`                                  | The last download time of the current config in unix milliseconds format.                                  |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
User user = User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#"); // Optional User Object
```

```
User user = User.newBuilder().build("john@example.com");
```

### Customized User Object creation[â](#customized-user-object-creation "Direct link to Customized User Object creation")

| Builder options | Description                                                                                                                     |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier()`  | **REQUIRED.** Unique identifier of a user in your application. Can be any value, even an email address.                         |
| `email()`       | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country()`     | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom()`      | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. e.g. User role, Subscription type. |

```
java.util.Map<String,Object> customAttributes = new java.util.HashMap<String,Object>();
customAttributes.put("SubscriptionType", "Pro");
customAttributes.put("UserRole", "Admin");

User user = User.newBuilder()
    .email("john@example.com")
    .country("United Kingdom")
    .custom(customAttributes)
    .build("#UNIQUE-USER-IDENTIFIER#"); // UserID
```

The `Custom` dictionary also allows attribute values other than `String` values:

```
java.util.Map<String,Object> customAttributes = new java.util.HashMap<String,Object>();
customAttributes.put("Rating", 4.5);
customAttributes.put("RegisteredAt", new Date("2023-11-22 12:34:56 +00:00"));
customAttributes.put("Roles", new String[]{"Role1", "Role2"});

User user = User.newBuilder()
    .email("john@example.com")
    .country("United Kingdom")
    .custom(customAttributes)
    .build("#UNIQUE-USER-IDENTIFIER#");
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `String` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `String` values,
* all other values are automatically converted to `String` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `String` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `Double` values and all other numeric values which can safely be converted to `Double`,
* accept `String` values containing a properly formatted, valid `Double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `Double` values representing a second-based Unix timestamp and all other numeric values which can safely be converted to `Double`,
* accept `String` values containing a properly formatted, valid `Double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays and list of `String`,
* accept `String` values containing a valid JSON string which can be deserialized to an array of `String`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object either on SDK initialization:

```

ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.defaultUser(User.newBuilder().build("john@example.com"));
});
```

or with the `setDefaultUser()` method of the ConfigCat client.

```
client.setDefaultUser(User.newBuilder().build("john@example.com"));
```

Whenever the `getValue[Async]()`, `getValueDetails[Async]()`, or `getAllValues[Async]()` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.defaultUser(User.newBuilder().build("john@example.com"));
});

// The default user will be used at the evaluation process.
boolean value = client.getValue(Boolean.class, "keyOfMySetting", false);
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.defaultUser(User.newBuilder().build("john@example.com"));
});

User otherUser = User.newBuilder().build("brian@example.com");

// otherUser will be used at the evaluation process.
boolean value = client.getValue(Boolean.class, "keyOfMySetting", otherUser, false);
```

For deleting the default user, you can do the following:

```
client.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValue()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the the `autoPollIntervalInSeconds` option parameter of the `PollingModes.autoPoll()` to change the polling interval.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.pollingMode(PollingModes.autoPoll(60 /* polling interval in seconds */));
});
```

Available options:

| Option Parameter            | Description                                                                                         | Default |
| --------------------------- | --------------------------------------------------------------------------------------------------- | ------- |
| `autoPollIntervalInSeconds` | Polling interval.                                                                                   | 60      |
| `maxInitWaitTimeSeconds`    | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5       |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValue()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValue()` will return the setting value after the cache is updated.

Use the `cacheRefreshIntervalInSeconds` parameter of the `PollingModes.lazyLoad()` to set cache lifetime.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.pollingMode(PollingModes.lazyLoad(60 /* the cache will expire in 120 seconds */));
});
```

Available options:

| Option Parameter                | Description | Default |
| ------------------------------- | ----------- | ------- |
| `cacheRefreshIntervalInSeconds` | Cache TTL.  | 60      |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefresh()` is your application's responsibility.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.pollingMode(PollingModes.manualPoll());
});

client.forceRefresh();
```

> `getValue()` returns `defaultValue` if the cache is empty. Call `forceRefresh()` to update the cache.

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `onClientReady(ClientCacheState)`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after instantiation.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `ClientCacheState` argument.

* `onConfigChanged(Map<string, Setting>)`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `onFlagEvaluated(EvaluationDetails)`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetails()`](#anatomy-of-getvaluedetails).

* `onError(String)`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on SDK initialization:

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.hooks().addOnFlagEvaluated(details -> {
        /* handle the event */
    });
});
```

or with the `getHooks()` property of the ConfigCat client:

```
client.getHooks().addOnFlagEvaluated(details -> {
    /* handle the event */
});
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

```
client.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

```
client.setOnline();
```

> With `client.isOffline()` you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LOCAL_ONLY`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LOCAL_OVER_REMOTE`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.REMOTE_OVER_LOCAL`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can load your feature flag & setting overrides from a `Map<String, Object>` structure.

```
Map<String, Object> map = new HashMap<>();
map.put("enabledFeature", true);
map.put("disabledFeature", false);
map.put("intSetting", 5);
map.put("doubleSetting", 3.14);
map.put("stringSetting", "test");

ConfigCatClient client = ConfigCatClient.get("localhost", options -> {
    options.flagOverrides(OverrideDataSource.map(map), OverrideBehaviour.LOCAL_ONLY);
});
```

## `getAllKeys()`, `getAllKeysAsync()`[â](#getallkeys-getallkeysasync "Direct link to getallkeys-getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeys()` or `getAllKeysAsync()` method of the `ConfigCatClient`.

```
ConfigCatClient client = new ConfigCatClient("#YOUR-SDK-KEY#");
java.util.Collection<String> keys = client.getAllKeys();
```

```
ConfigCatClient client = new ConfigCatClient("#YOUR-SDK-KEY#");
client.getAllKeysAsync().thenAccept(keys -> {
    // use the keys
});
```

## `getAllValues()`, `getAllValuesAsync()`[â](#getallvalues-getallvaluesasync "Direct link to getallvalues-getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a User Object is optional.

```
ConfigCatClient client = new ConfigCatClient("#YOUR-SDK-KEY#");
Map<String, Object> settingValues = client.getAllValues();

// invoke with User Object
User user = User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#")
Map<String, Object> settingValuesTargeting = client.getAllValues(user);
```

```
ConfigCatClient client = new ConfigCatClient("#YOUR-SDK-KEY#");
client.getAllValuesAsync().thenAccept(settingValues -> { });

// invoke with User Object
User user = User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#")
client.getAllValuesAsync(user).thenAccept(settingValuesTargeting -> { });
```

## `getAllValueDetails()`, `getAllValueDetailsAsync()`[â](#getallvaluedetails-getallvaluedetailsasync "Direct link to getallvaluedetails-getallvaluedetailsasync")

Evaluates and returns the detailed values of all feature flags and settings. Passing a User Object is optional.

```
User user = User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#");
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#");
List<EvaluationDetails<?>> allValueDetails = client.getAllValueDetails(user);
```

```
User user = User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#");
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#");
client.getAllValueDetailsAsync(user).thenAccept(allValueDetails -> { });
```

## Cache[â](#cache "Direct link to Cache")

The SDK by default uses a memory-only cache. If you want to change the default behavior, you can either use the built-in `SharedPreferencesCache` or your custom cache implementation.

The `SharedPreferencesCache` implementation uses the Android `SharedPreferences` to store the downloaded `config JSON`. `SharedPreferencesCache` has a dependency on `android.content.Context`, so it won't be enabled by default. The cache can be explicitly set by providing an appropriate `Context`.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
        options.cache(new SharedPreferencesCache(getApplicationContext())); // Use ConfigCat's shared preferences cache.
});
```

### Custom cache[â](#custom-cache "Direct link to Custom cache")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can subclass the [`ConfigCache`](https://github.com/configcat/android-sdk/blob/master/src/main/java/com/configcat/ConfigCache.java) abstract class and call the `cache` method with your implementation in the setup callback of `ConfigCatClient.get`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
public class MyCustomCache extends ConfigCache {

    @Override
    public String read(String key) {
        // here you have to return with the cached value
    }

    @Override
    public void write(String key, String value) {
        // here you have to store the new value in the cache
    }
}
```

Then use your custom cache implementation:

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.cache(new MyCustomCache()); // inject your custom cache
});
```

info

The Android SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## HttpClient[â](#httpclient "Direct link to HttpClient")

The ConfigCat SDK internally uses an [OkHttpClient](https://github.com/square/okhttp) instance to fetch the latest config JSON over HTTP. You have the option to override the internal Http client with your customized one.

### HTTP Proxy[â](#http-proxy "Direct link to HTTP Proxy")

If your application runs behind a proxy you can do the following:

```
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("proxyHost", proxyPort));

ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.httpClient(new OkHttpClient.Builder()
                .proxy(proxy)
                .build());
});
```

### HTTP Timeout[â](#http-timeout "Direct link to HTTP Timeout")

You can set the maximum wait time for a ConfigCat HTTP response by using OkHttpClient's timeouts.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    .httpClient(new OkHttpClient.Builder()
                .readTimeout(2, TimeUnit.SECONDS) // set the read timeout to 2 seconds
                .build());
});
```

OkHttpClient's default timeout is 10 seconds.

> As the ConfigCatClient SDK maintains the whole lifetime of the internal http client, it's being closed simultaneously with the ConfigCatClient, refrain from closing the http client manually.

### Force refresh[â](#force-refresh "Direct link to Force refresh")

Call the `forceRefresh()` method on the client to download the latest config JSON and update the cache.

## Logging[â](#logging "Direct link to Logging")

The SDK uses the facade of [slf4j](https://www.slf4j.org) for logging, so you can use any of the slf4j implementation packages.

You can change the verbosity of the logs by passing a `LogLevel` parameter to the ConfigCatClientBuilder's `logLevel` function.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.logLevel(LogLevel.INFO);
});
```

Available log levels:

| Level     | Description                                                                             |
| --------- | --------------------------------------------------------------------------------------- |
| `NO_LOG`  | Turn the logging off.                                                                   |
| `ERROR`   | Only error level events are logged.                                                     |
| `WARNING` | Default. Errors and Warnings are logged.                                                |
| `INFO`    | Errors, Warnings and feature flag evaluation is logged.                                 |
| `DEBUG`   | All of the above plus debug info is logged. Debug logs can be different for other SDKs. |

Info level logging helps to inspect how a feature flag was evaluated:

```
INFO com.configcat.ConfigCatClient - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'False' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'True' => MATCH, applying rule
  Returning 'True'.
```

### Logging Implementation[â](#logging-implementation "Direct link to Logging Implementation")

You have the flexibility to use any slf4j implementation for logging with ConfigCat. However, some logger implementations may not display debug level messages by default. In these cases, you simply need to adjust the logger configuration to receive all log messages from the ConfigCat SDK.

Examples for [android-logger](https://github.com/configcat/android-sdk/blob/master/samples/android-kotlin/app/src/android-logger.properties) and [logback](https://github.com/configcat/android-sdk/blob/master/samples/android-java/app/src/main/assets/logback.xml) are available under the [Sample Apps](#sample-apps) section.

### Log Filtering[â](#log-filtering "Direct link to Log Filtering")

You can define a custom log filter by implementing the `LogFilterFunction` interface. The `apply` method will be called by the *ConfigCat SDK* each time a log event occurs (and the event passes the minimum log level specified by the `logLevel` option). That is, the `apply` method allows you to filter log events by `logLevel`, `eventId`, `message` or `exception`. The formatted message string can be obtained by calling `toString()` on the `message` parameter. If the `apply` method returns `true`, the event will be logged, otherwise it will be skipped.

```
// Filter out events with id 1001 from the log.
LogFilterFunction filterLogFunction = ( LogLevel logLevel, int eventId, Object message, Throwable exception) -> eventId != 1001;

ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> options.logFilter(filterLogFunction));
```

caution

Please make sure that your log filter logic doesn't perform heavy computation and doesn't block the executing thread. A complex or incorrectly implemented log filter can degrade the performance of the SDK.

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the ConfigCat SDK that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Sample App[â](#sample-apps "Direct link to Sample App")

[Android App with auto polling and change listener](https://github.com/configcat/android-sdk/tree/master/samples)

## Guides[â](#guides "Direct link to Guides")

See [this](https://configcat.com/blog/2022/01/24/feature-flags-in-android/) guide on how to use ConfigCat's Android SDK.

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat Android SDK's repository on GitHub](https://github.com/configcat/android-sdk)
* [ConfigCat Android SDK's javadoc page](https://javadoc.io/doc/com.configcat/configcat-android-client)
* [ConfigCat Android SDK on Maven Central](https://search.maven.org/artifact/com.configcat/configcat-android-client)


---

# ConfigCat package for Laravel

[![Star on GitHub](https://img.shields.io/github/stars/pod-point/laravel-configcat.svg?style=social)](https://github.com/pod-point/laravel-configcat/stargazers) [![Latest Version on Packagist](https://img.shields.io/packagist/v/pod-point/laravel-configcat.svg?style=flat-square)](https://packagist.org/packages/pod-point/laravel-configcat) ![GitHub Workflow Status](https://img.shields.io/github/actions/workflow/status/pod-point/laravel-configcat/run-tests.yml?branch=main\&label=tests) [![Software License](https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square)](https://github.com/Pod-Point/laravel-configcat/blob/main/LICENSE.md) [![Total Downloads](https://img.shields.io/packagist/dt/pod-point/laravel-configcat.svg?style=flat-square)](https://packagist.org/packages/pod-point/laravel-configcat)

caution

As this is a community maintained package, ConfigCat can't guarantee it's stability, safety and can't provide official customer support.

[ConfigCat package for Laravel on GitHub](https://github.com/Pod-Point/laravel-configcat)

## Installation[â](#installation "Direct link to Installation")

You can install the package via composer:

```
composer require pod-point/laravel-configcat
```

### Publishing the config file[â](#publishing-the-config-file "Direct link to Publishing the config file")

Next, you should publish the Laravel package configuration file using the `vendor:publish` Artisan command. It will be placed in your application's config directory:

```
php artisan vendor:publish --provider="PodPoint\ConfigCat\ConfigCatServiceProvider"
```

Don't forget to specify your [ConfigCat SDK `key`](https://app.configcat.com/sdkkey) within the freshly published Laravel configuration file under `config/configcat.php`.

The Laravel configuration for this package comes with sensible defaults. See [`config/configcat.php`](https://github.com/Pod-Point/laravel-configcat/blob/main/config/configcat.php) for more details.

## Usage[â](#usage "Direct link to Usage")

### Facade & global helper[â](#facade--global-helper "Direct link to Facade & global helper")

The `ConfigCat` facade as well as the global helper can be used to retrieve the actual value of the feature flag, text or number setting:

```
use PodPoint\ConfigCat\Facades\ConfigCat;

$flag = ConfigCat::get('new_registration_flow');

$flag = configcat('new_registration_flow');
```

> **Note:** You can define the actual value of a feature flag to be `bool(true)` or `bool(false)` on ConfigCat but not only, it can also be [a number or a text setting](https://configcat.com/docs/docs/main-concepts/.md#about-setting-types).

If the feature flag is undefined or something went wrong, `bool(false)` will be returned by default, however you can change this by specifying a default value **only when using the Facade or the global helper** to retrieve the feature flag value using:

```
use PodPoint\ConfigCat\Facades\ConfigCat;

$flag = ConfigCat::get('new_registration_flow', true);

$flag = configcat('new_registration_flow', true);
```

You can also globally sepcify a default value from the [`config/configcat.php`](https://github.com/Pod-Point/laravel-configcat/blob/main/config/configcat.php) file.

â ï¸<!-- --> **Only** `boolean`, `string`, `integer` or `float` default value types are supported as these are the only [setting types](https://configcat.com/docs/docs/main-concepts/.md#about-setting-types) available from ConfigCat.

### Validation rule[â](#validation-rule "Direct link to Validation rule")

Given the following validation rules:

```
Validator::make([
    'email' => 'taylor@laravel.com',
    'username' => 'taylor',
], [
    'email' => 'required_if_configcat:new_registration_flow,true',
    'username' => 'required_if_configcat:new_registration_flow,false',
]);
```

* When the feature flag is **on**

  * The `email` will be a required field
  * The `username` will be an optional field

* When the feature flag is **off**, undefined, a text or number setting

  <!-- -->

  * The `email` will be an optional field
  * The `username` will be a required field

### HTTP middleware[â](#http-middleware "Direct link to HTTP middleware")

The following route will only be accessible if the [feature flag](https://configcat.com/docs/docs/main-concepts/.md#about-setting-types) is truthy, otherwise a `404` will be thrown.

```
Router::get('/registration')->middleware('configcat.on:new_registration_flow');
```

The opposite is possible, also throwing a `404` if the feature flag is falsy:

```
Router::get('/sign-up')->middleware('configcat.off:new_registration_flow');
```

**Note:** undefined, text or number settings will be considered as feature flags turned `off`.

### Blade directive[â](#blade-directive "Direct link to Blade directive")

The following view content will only be rendered if the feature flag is truthy:

```
@configcat('new_registration_flow')
    New registration form
@endconfigcat
```

```
@unlessconfigcat('new_registration_flow')
    Old registration form
@endconfigcat
```

```
@configcat('new_registration_flow_1')
    Sign up
@elseconfigcat('new_registration_flow_2')
    Get started
@else
    Register
@endconfigcat
```

**Note:** undefined, text or number settings will be considered as feature flags turned `off`.

## Advanced usage[â](#advanced-usage "Direct link to Advanced usage")

### User targeting[â](#user-targeting "Direct link to User targeting")

The [User Object](https://configcat.com/docs/docs/sdk-reference/php/.md#user-object) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

ConfigCat needs to understand the representation of your users from your application. To do so, you will need to transform your user into a `ConfigCat\User` object. This can be done directly from the [`config/configcat.php`](https://github.com/Pod-Point/laravel-configcat/blob/main/config/configcat.php) file. Here is an example:

```
'user' => \PodPoint\ConfigCat\Support\DefaultUserTransformer::class,
```

Which will be using a sensible default transformer:

```
class DefaultUserTransformer
{
    public function __invoke(\Illuminate\Foundation\Auth\User $user)
    {
        return new \ConfigCat\User($user->getKey(), $user->email);
    }
}
```

Feel free to create your own transformer class and use it instead, just **remember** that it needs to be **callable** with the `__invoke()` function.

> **Note:** for security reasons, all of the logic computation for the user targeting is executed on your application side of things using ConfigCat's SDK. No user details will be leaving your application in order find out wether or not a user should have a feature flag enabled or not.

Once you have defined your mapping, you will be able to explicitly use the representation of your user when checking a feature flag:

```
use App\Models\User;
use PodPoint\ConfigCat\Facades\ConfigCat;

$user = User::where('email', 'taylor@laravel.com')->firstOrFail();
ConfigCat::get('new_registration_flow', $default, $user);
```

This is also applicable for the global helper and the Blade directive:

```
configcat('new_registration_flow', $default, $user);
```

```
@configcat('new_registration_flow', $user)
    New registration form
@endconfigcat
```

> **Note:** if you have defined your user mapping but are not explicitly using a specific user when checking for a flag, we will automatically try to use the logged in user, if any, for convenience.

### Caching & logging[â](#caching--logging "Direct link to Caching & logging")

This package supports native Laravel caching and logging capabilities in order to cache the feature flag values from ConfigCat's CDN as well as log any information when resolving feature flags. We've setup some sensible defaults but various levels of caching and logging can be configured.

See [`config/configcat.php`](https://github.com/Pod-Point/laravel-configcat/blob/main/config/configcat.php) for more info.

### Test support: mock, fake & overrides[â](#test-support-mock-fake--overrides "Direct link to Test support: mock, fake & overrides")

#### In-memory testing[â](#in-memory-testing "Direct link to In-memory testing")

When writing unit or functional tests, you may need to be able to mock or fake this package completely so you can test various behaviors within your application. This is all possible through the powerful Facade.

**Mocking:**

```
use PodPoint\ConfigCat\Facades\ConfigCat;

ConfigCat::shouldReceive('get')
    ->once()
    ->with('new_registration_flow')
    ->andReturn(true);
```

See <https://laravel.com/docs/mocking#mocking-facades> for more info.

**Fake:**

Faking it will prevent the package to genuinely try to hit ConfigCat's CDN:

```
use PodPoint\ConfigCat\Facades\ConfigCat;

// you can fake it
ConfigCat::fake();
// optionally setup some predefined feature flags for your test
ConfigCat::fake(['new_registration_flow' => true]);
```

#### End-to-end testing[â](#end-to-end-testing "Direct link to End-to-end testing")

When running tests within a browser which doesn't share the same instance of the application, using mocks or fakes is not applicable. This is why we provide some overrides through ConfigCat SDK which will make the client under the hood localhost only and will use a locally generated `json` file in order to read the feature flags for the system under test.

First of all, you will need to make sure to enable `overrides` from [`config/configcat.php`](https://github.com/Pod-Point/laravel-configcat/blob/main/config/configcat.php). You could also optionally tweak the file path for the `json` file if you wish to. The file will be automatically created for you when using overrides.

Similarly to `ConfigCat::fake()` you can come up with some predefined feature flags which will be saved into a `json` file:

```
use PodPoint\ConfigCat\Facades\ConfigCat;

ConfigCat::override(['new_registration_flow' => true]);
```

## Testing[â](#testing "Direct link to Testing")

Run the tests with:

```
composer test
```

## Changelog[â](#changelog "Direct link to Changelog")

Please see our [Releases](https://github.com/pod-point/laravel-configcat/releases) for more information on what has changed recently.

## Contributing[â](#contributing "Direct link to Contributing")

Please see [CONTRIBUTING](https://github.com/Pod-Point/laravel-configcat/blob/main/CONTRIBUTING.md) for details.

## Credits[â](#credits "Direct link to Credits")

* [configcat/php-sdk](https://github.com/configcat/php-sdk)
* [ylsideas/feature-flags](https://github.com/ylsideas/feature-flags) for inspiration
* [Pod Point](https://github.com/pod-point)
* [All Contributors](https://github.com/pod-point/laravel-configcat/graphs/contributors)

## License[â](#license "Direct link to License")

The MIT License (MIT). Please see [License File](https://github.com/Pod-Point/laravel-configcat/blob/main/LICENSE.md) for more information.


---

# ConfigCat SDK for Vue.js

caution

As this is a community-maintained package, ConfigCat can't guarantee its stability, and safety and can't provide official customer support.

[ConfigCat SDK for Vue.js on GitHub](https://github.com/codedbychavez/configcat-vue)

## Getting Started[â](#getting-started "Direct link to Getting Started")

### 1. Install the package[â](#1-install-the-package "Direct link to 1. Install the package")

*via [npm](https://www.npmjs.com/package/configcat-vue)*

```
npm i configcat-vue
```

### 2. Import and use the `ConfigCatPlugin` with your SDK Key[â](#2-import-and-use-the-configcatplugin-with-your-sdk-key "Direct link to 2-import-and-use-the-configcatplugin-with-your-sdk-key")

In **main.ts**:

```
import { ConfigCatPlugin } from "configcat-vue";
```

```
app.use(ConfigCatPlugin, {
  sdkKey: "YOUR-CONFIGCAT-SDK-KEY-GOES-HERE", // sdkKey is required
});
```

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

This SDK includes a `FeatureWrapper` component. It enables users to control the visibility of specific parts within their Vue.js application (such as components or HTML elements) when the feature flag is enabled.

In any `.vue` component file:

```
<script setup lang="ts">

import { FeatureWrapper } from "configcat-vue";

</script>
```

Pass the feature flag key as a prop:

```
<template>
  <div class="my-app">
    <FeatureWrapper featureKey="YOUR-FEATURE-KEY-GOES-HERE">
      <!-- This is displayed when the feature flag is turned on --> 
      <TheNewFeature />
    </FeatureWrapper>
  </div>
</template>
```

Optionally, the `FeatureWrapper` component also provides an `#else` and `#loading` template. Components or HTML elements can be included within these templates that would display when the feature flag is **turned off** or **loading** respectively.

```
<FeatureWrapper
  featureKey="YOUR-FEATURE-KEY-GOES-HERE"
>
  <TheNewFeature />
  <template #else>
    <!-- Displayed when the feature flag is turned off -->
    <div class="feature-not-available-wrapper">
      <p>Sorry, this feature is not available. Your feature flag is off.</p>
    </div>
  </template>
  <template #loading>
    <!-- Display while the feature flag is loading -->
    <div class="loading-wrapper">
      <p>Loading...</p>
    </div>
  </template>
</FeatureWrapper>
```

## Advanced Usage[â](#advanced-usage "Direct link to Advanced Usage")

### Specifying a polling mode[â](#specifying-a-polling-mode "Direct link to Specifying a polling mode")

Polling modes are used to control how often ConfigCat's SDK client downloads the values of feature flags from ConfigCat's servers. The default polling mode is `AutoPoll`. Auto Polling fetches the latest feature flag values every 60 seconds by default. To change this, Specify a polling mode and set the polling interval (in seconds) via the `pollingIntervalInSeconds` property.

Import:

```
import { PollingMode } from "configcat-vue";
```

Add `pollingMode` to the `ConfigCatPlugin` options and set the polling interval via the `clientOptions` property:

```
app.use(ConfigCatPlugin, {
    sdkKey: "YOUR-CONFIGCAT-SDKKEY-GOES-HERE",
    pollingMode: PollingMode.AutoPoll, // Optional. Default is AutoPoll
    clientOptions: {
        pollIntervalSeconds: 5 // Optional. Specify the polling interval in seconds. The default is 60 seconds.
    }
});
```

`pollingMode` can be set to: `PollingMode.AutoPoll`, `PollingMode.ManualPoll` and `PollingMode.LazyLoad`

> See documentation [here](https://configcat.com/docs/docs/advanced/caching/.md).

### Using the plugin with a logger[â](#using-the-plugin-with-a-logger "Direct link to Using the plugin with a logger")

You may want to log the actions of the underlying ConfigCat SDK client. To do this, specify a logger in `clientOptions`:

> See documentation [here](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#logging).

Add `createConsoleLogger`, and `LoggerLevel` to your import:

```
import { createConsoleLogger, LogLevel } from "configcat-vue"; 
```

Create the logger with a specified log level:

> See documentation [here](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#setting-log-levels).

Use the logger in `clientOptions`:

```
app.use(ConfigCatPlugin, {
  sdkKey: "YOUR-CONFIGCAT-SDK-KEY-GOES-HERE", // // sdkKey is required
  clientOptions: { // clientOptions is optional
    // ...
    logger: createConsoleLogger(LogLevel.Info),
  }
});
```

#### Available log levels[â](#available-log-levels "Direct link to Available log levels")

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

### Specifying a User Object[â](#specifying-a-user-object "Direct link to Specifying a User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) stores attributes of a user in your application. It works hand in hand with ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) rules for targeting specific users with feature flags. A User Object can be passed as a prop to the `FeatureWrapper` component.

> See documentation [here](https://configcat.com/docs/docs/targeting/user-object/.md).

Define the User Object:

```
<script setup lang="ts">
import { ref } from 'vue';
import { User } from 'configcat-vue';

// Define the User Object
const user = { identifier: 'john@example.com' };
const userObject = ref<User>(user)

</script>
```

Pass it to the `FeatureWrapper` component:

```
<template>
  <div class="my-app">
    <FeatureWrapper featureKey="YOUR-FEATURE-KEY-GOES-HERE" :userObject="userObject">
      <TheNewFeature />
    </FeatureWrapper>
  </div>
</template>
```

### Listening to flag changes emitted from the FeatureWrapper component[â](#listening-to-flag-changes-emitted-from-the-featurewrapper-component "Direct link to Listening to flag changes emitted from the FeatureWrapper component")

When a feature flag is toggled ON or OFF in the [ConfigCat Dashboard](https://app.configcat.com) the `FeatureWrapper` component emits the updated feature flag value. How quickly the updated value is emitted depends on the polling interval set in the `clientOptions` property of the `ConfigCatPlugin`.

Listen and handle changes using `@flag-value-changed`:

```
<template>
  <div class="my-app">
    <FeatureWrapper featureKey="YOUR-FEATURE-KEY-GOES-HERE" @flag-value-changed="handleFlagValueChange">
      <TheNewFeature />
    </FeatureWrapper>
  </div>
</template>
```

```
<script setup lang="ts">
// Handle to the flag value changes
const handleFlagValueChange = (flagValue: boolean) => {
  console.log('Flag value changed to: ', flagValue);
}
</script>
```

### Using the underlying ConfigCat client[â](#using-the-underlying-configcat-client "Direct link to Using the underlying ConfigCat client")

This plugin exposes (provides) the underlying ConfigCat client. By injecting the provided client instance, you can use all the features it offers.

> See documentation [here](https://configcat.com/docs/docs/sdk-reference/js/browser/.md).

One of the ways it can be used is by subscribing to events emitted by the ConfigCat client.

Inject the ConfigCat client into your component:

```
<script setup lang="ts">
import { inject, onBeforeMount } from 'vue';
import { FeatureWrapper } from "configcat-vue";

// Import the ConfigCat client interface
import type { IConfigCatClient } from 'configcat-vue';

// Inject the ConfigCat client
const configCatClient = inject<IConfigCatClient>('configCatClient');

onBeforeMount(() => {
  // Subscribe to the events using the .on method of the ConfigCat SDK client
  configCatClient?.on('flagEvaluated', () => {
    console.log('Flag evaluated');
  });
});
</script>
```

## Sample Application[â](#sample-application "Direct link to Sample Application")

* [Sample Vue.js App](https://github.com/codedbychavez/configcat-vue-sample)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat Vue.js SDK on GitHub](https://github.com/codedbychavez/configcat-vue)
* [ConfigCat Vue.js SDK on NPM](https://www.npmjs.com/package/configcat-vue)


---

# C++ SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/cpp-sdk.svg?style=social)](https://github.com/configcat/cpp-sdk/stargazers) [![Build Status](https://img.shields.io/github/actions/workflow/status/configcat/cpp-sdk/cpp-ci.yml?logo=GitHub\&label=windows%20%2F%20macos%20%2F%20linux\&branch=main)](https://github.com/configcat/cpp-sdk/actions/workflows/cpp-ci.yml) [![Coverage Status](https://codecov.io/gh/configcat/cpp-sdk/branch/main/graph/badge.svg?token=cvUgfof8k7)](https://codecov.io/gh/configcat/cpp-sdk)

[ConfigCat C++ SDK on GitHub](https://github.com/configcat/cpp-sdk)

## Getting Started[â](#getting-started "Direct link to Getting Started")

### 1. Add the ConfigCat SDK to your project[â](#1-add-the-configcat-sdk-to-your-project "Direct link to 1. Add the ConfigCat SDK to your project")

With **[Vcpkg](https://github.com/microsoft/vcpkg)**

* On Windows:

  ```
  git clone https://github.com/microsoft/vcpkg
  .\vcpkg\bootstrap-vcpkg.bat
  .\vcpkg\vcpkg install configcat
  ```

  In order to use vcpkg with Visual Studio, run the following command (may require administrator elevation):

  ```
  .\vcpkg\vcpkg integrate install
  ```

  After this, you can create a New non-CMake Project (or open an existing one). All installed libraries are immediately ready to be `#include`d and used in your project without additional setup.

* On Linux/Mac:

  ```
  git clone https://github.com/microsoft/vcpkg
  ./vcpkg/bootstrap-vcpkg.sh
  ./vcpkg/vcpkg install configcat
  ```

### 2. Include *configcat.h* header in your application code[â](#2-include-configcath-header-in-your-application-code "Direct link to 2-include-configcath-header-in-your-application-code")

```
#include <configcat/configcat.h>

using namespace configcat;
```

### 3. Create the *ConfigCat* client with your *SDK Key*[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3-create-the-configcat-client-with-your-sdk-key")

```
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#");
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

```
bool isMyAwesomeFeatureEnabled = client->getValue("isMyAwesomeFeatureEnabled", false);
if (isMyAwesomeFeatureEnabled) {
    doTheNewThing();
} else {
    doTheOldThing();
}
```

### 5. Close *ConfigCat* clientâ[â](#5-close-configcat-client "Direct link to 5-close-configcat-client")

You can safely shut down all clients at once or individually and release all associated resources on application exit.

```
ConfigCatClient::closeAll(); // closes all clients

ConfigCatClient::close(client); // closes a specific client
```

## Setting up the *ConfigCat Client*[â](#setting-up-the-configcat-client "Direct link to setting-up-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`ConfigCatClient::get("#YOUR-SDK-KEY#")` returns a client with default options.

| Properties         | Description                                                                                                                                                                                                                                                                                                                         |
| ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `baseUrl`          | Optional, sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                           |
| `dataGovernance`   | Optional, defaults to `Global`. Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `Global`, `EuOnly`. |
| `connectTimeoutMs` | Optional, defaults to `8000ms`. Sets the amount of milliseconds to wait for the server to make the initial connection (i.e. completing the TCP connection handshake). `0` means it never times out during transfer                                                                                                                  |
| `readTimeoutMs`    | Optional, defaults to `5000ms`. Sets the amount of milliseconds to wait for the server to respond before giving up. `0` means it never times out during transfer.                                                                                                                                                                   |
| `pollingMode`      | Optional, sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                                         |
| `configCache`      | Optional, sets a custom cache implementation for the client. [More about cache](#custom-cache).                                                                                                                                                                                                                                     |
| `logger`           | Optional, sets the internal logger and log level. [More about logging](#logging).                                                                                                                                                                                                                                                   |
| `flagOverrides`    | Optional, sets the local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                    |
| `defaultUser`      | Optional, sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                          |
| `offline`          | Optional, defaults to `false`. Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                   |
| `hooks`            | Optional, used to subscribe events that the SDK sends in specific scenarios. [More about hooks](#hooks).                                                                                                                                                                                                                            |

```
ConfigCatOptions options;
options.pollingMode = PollingMode::manualPoll();
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

caution

We strongly recommend you to use the `ConfigCatClient` as a Singleton object in your application. The `ConfigCatClient` constructs singleton client instances for your SDK keys with its `ConfigCatClient::get(<sdkKey>)` static factory method. These clients can be closed all at once with `ConfigCatClient::closeAll()` method or individually with the `ConfigCatClient::close(client)`.

## Anatomy of `getValue()`[â](#anatomy-of-getvalue "Direct link to anatomy-of-getvalue")

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
auto user = ConfigCatUser::create("#USER-IDENTIFIER#");
auto value = client->getValue(
    "keyOfMySetting", // key
    false, // defaultValue
    user, // Optional User Object
);
```

caution

It is important to choose the correct `getValue` overload, where the type of the `defaultValue` parameter matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | Type of `defaultValue`        |
| -------------- | ----------------------------- |
| On/Off Toggle  | `bool`                        |
| Text           | `std::string` / `const char*` |
| Whole Number   | `int32_t`                     |
| Decimal Number | `double`                      |

In addition to the overloads mentioned above, you also have the option to choose an overload that doesn't expect a default value. In that case any setting kind is allowed, and in case of error, the return value will be `std::nullopt`.

If you specify a default value whose type mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetails()`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`getValueDetails()` is similar to `getValue()` but instead of returning the evaluated value only, it gives more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
auto user = ConfigCatUser::create("#USER-IDENTIFIER#");
auto details = client->getValueDetails(
    "keyOfMySetting", // key
    false, // defaultValue
    user, // Optional User Object
);
```

caution

It is important to choose the correct `getValueDetails` overload, where the type of the `defaultValue` parameter matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                   | Type                              | Description                                                                                                |
| ----------------------- | --------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `value`                 | `std::optional<Value>`            | The evaluated value of the feature flag or setting.                                                        |
| `key`                   | `std::string`                     | The key of the evaluated feature flag or setting.                                                          |
| `isDefaultValue`        | `bool`                            | True when the default value passed to `getValueDetails()` is returned due to an error.                     |
| `errorMessage`          | `std::optional<std::string>`      | In case of an error, this field contains the error message.                                                |
| `errorException`        | `std::exception_ptr`              | In case of an error, this property contains the related exception object (if any).                         |
| `user`                  | `std::shared_ptr<ConfigCatUser>`  | The User Object that was used for evaluation.                                                              |
| `matchedTargetingRule`  | `std::optional<TargetingRule>`    | The targeting rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageRule` | `std::optional<PercentageOption>` | The percentage option (if any) that was used to select the evaluated value.                                |
| `fetchTime`             | `std::chrono::time_point`         | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
auto user = ConfigCatUser::create("#UNIQUE-USER-IDENTIFIER#");
```

```
auto user = ConfigCatUser::create("john@example.com");
```

### Customized User Object creation[â](#customized-user-object-creation "Direct link to Customized User Object creation")

| Argument  | Description                                                                                                                     |
| --------- | ------------------------------------------------------------------------------------------------------------------------------- |
| `id`      | **REQUIRED.** Unique identifier of a user in your application. Can be any value, even an email address.                         |
| `email`   | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country` | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`  | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. e.g. User role, Subscription type. |

```
auto user = ConfigCatUser::create(
    "#UNIQUE-USER-IDENTIFIER#", // userID
    "john@example.com", // email
    "United Kingdom", // country
    {
        { "SubscriptionType", "Pro" },
        { "UserRole", "Admin" }
    } // custom
);
```

The `custom` dictionary also allows attribute values other than `std::string` values:

```
auto user = ConfigCatUser::create(
    "#UNIQUE-USER-IDENTIFIER#", // userID
    "john@example.com", // email
    "United Kingdom", // country
    {
        { "Rating", 4.5 },
        { "RegisteredAt",  make_datetime(2023, 11, 22, 12, 34, 56) },
        { "Roles", std::vector<std::string>{"Role1", "Role2"} }
    } // custom
)
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `std::string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS\_ONE\_OF, etc.)

* accept `std::string` values,
* all other values are automatically converted to `std::string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS\_ONE\_OF\_SEMVER, LESS\_THAN\_SEMVER, GREATER\_THAN\_SEMVER, etc.)

* accept `std::string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (EQUALS\_NUMBER, LESS\_THAN\_NUMBER, GREATER\_THAN\_OR\_EQUAL\_NUMBER, etc.)

* accept `double` values and all other numeric values which can safely be converted to `double`,
* accept `std::string` values containing a properly formatted, valid `double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE\_DATETIME / AFTER\_DATETIME)

* accept `configcat::date_time_t` (`std::chrono::system_clock::time_point`) values, which are automatically converted to a second-based Unix timestamp,
* accept `double` values representing a second-based Unix timestamp and all other numeric values which can safely be converted to `double`,
* accept `std::string` values containing a properly formatted, valid `double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY\_CONTAINS\_ANY\_OF / ARRAY\_NOT\_CONTAINS\_ANY\_OF)

* accept lists of `std::string` (i.e. `std::vector<std::string>`),
* accept `std::string` values containing a valid JSON string which can be deserialized to an array of `std::string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object either on SDK initialization:

```
ConfigCatOptions options;
options.defaultUser = ConfigCatUser::create("john@example.com");
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

or with the `setDefaultUser()` method of the ConfigCat client.

```
client->setDefaultUser(ConfigCatUser::create("john@example.com"));
```

Whenever the `getValue()`, `getValueDetails()`, `getAllValues()`, or `getAllValueDetails()` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
auto user = ConfigCatUser::create("john@example.com");
client->setDefaultUser(user);

// The default user will be used at the evaluation process.
auto value = client->getValue("keyOfMySetting", false);
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

```
auto user = ConfigCatUser::create("john@example.com");
client->setDefaultUser(user);

auto otherUser = ConfigCatUser::create("brian@example.com");

// otherUser will be used at the evaluation process.
auto value = client->getValue("keyOfMySetting", false, otherUser.get());
```

For deleting the default user, you can do the following:

```
client->clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValue()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `autoPollIntervalInSeconds` option parameter of the `PollingMode::autoPoll()` to change the polling interval.

```
auto autoPollIntervalInSeconds = 100;
ConfigCatOptions options;
options.pollingMode = PollingMode::autoPoll(autoPollIntervalInSeconds);
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

Available options:

| Option Parameter            | Description                                                                                         | Default |
| --------------------------- | --------------------------------------------------------------------------------------------------- | ------- |
| `autoPollIntervalInSeconds` | Polling interval.                                                                                   | 60      |
| `maxInitWaitTimeInSeconds`  | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5       |

### Lazy Loading[â](#lazy-loading "Direct link to Lazy Loading")

When calling `getValue()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValue()` will return the setting value after the cache is updated.

Use the `cacheRefreshIntervalInSeconds` option parameter of the `PollingMode::lazyLoad()` to set cache lifetime.

```
auto cacheRefreshIntervalInSeconds = 100;
ConfigCatOptions options;
options.pollingMode = PollingMode::lazyLoad(cacheRefreshIntervalInSeconds);
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

Available options:

| Parameter                       | Description | Default |
| ------------------------------- | ----------- | ------- |
| `cacheRefreshIntervalInSeconds` | Cache TTL.  | 60      |

### Manual Polling[â](#manual-polling "Direct link to Manual Polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefresh()` is your application's responsibility.

```
ConfigCatOptions options;
options.pollingMode = PollingMode::manualPoll();
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
client->forceRefresh();
```

> `getValue()` returns `defaultValue` if the cache is empty. Call `forceRefresh()` to update the cache.

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `onClientReady()`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after instantiation.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeInSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. Alternatively, in Auto Polling mode, you can wait for the first `onConfigChanged` event to be notified when the internal cache is actually populated with config data.

* `onConfigChanged(std::shared_ptr<const Settings>)`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `onFlagEvaluated(const EvaluationDetailsBase&)`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetails()`](#anatomy-of-getvaluedetails).

* `onError(const std::string&, const std::exception_ptr&)`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on SDK initialization:

```
ConfigCatOptions options;
options.pollingMode = PollingMode::manualPoll();
options.hooks = std::make_shared<Hooks>(
    []() { /* onClientReady callback */ },
    [](std::shared_ptr<const Settings> config) { /* onConfigChanged callback */ },
    [](const EvaluationDetailsBase& details) { /* onFlagEvaluated callback */ },
    [](const std::string& error, const std::exception_ptr& exception) { /* onError callback */ }
);
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

or with the `getHooks()` method of the ConfigCat client:

```
client->getHooks->addOnFlagEvaluated([](const EvaluationDetailsBase& details) { /* onFlagEvaluated callback */ });
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

```
client->setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

```
client->setOnline();
```

> With `client->isOffline()` you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour::LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour::LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour::RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a file or a map.

### JSON File[â](#json-file "Direct link to JSON File")

The SDK can be set up to load your feature flag & setting overrides from a file.

#### File[â](#file "Direct link to File")

```
ConfigCatOptions options;
options.flagOverrides = std::make_shared<FileFlagOverrides>("path/to/the/local_flags.json", LocalOnly);
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

#### JSON File Structure[â](#json-file-structure "Direct link to JSON File Structure")

The SDK supports 2 types of JSON structures to describe feature flags & settings.

##### 1. Simple (key-value) structure[â](#1-simple-key-value-structure "Direct link to 1. Simple (key-value) structure")

```
{
  "flags": {
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
  }
}
```

##### 2. Complex (full-featured) structure[â](#2-complex-full-featured-structure "Direct link to 2. Complex (full-featured) structure")

This is the same format that the SDK downloads from the ConfigCat CDN. It allows the usage of all features that are available on the ConfigCat Dashboard.

You can download your current config JSON from ConfigCat's CDN and use it as a baseline.

A convenient way to get the config JSON for a specific SDK Key is to install the [ConfigCat CLI](https://github.com/configcat/cli) tool and execute the following command:

```
configcat config-json get -f v6 -p {YOUR-SDK-KEY} > config.json
```

(Depending on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings, you may need to add the `--eu` switch.)

Alternatively, you can download the config JSON manually, based on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings:

* GLOBAL: `https://cdn-global.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`
* EU: `https://cdn-eu.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`

```
{
  "p": {
    // hash salt, required only when confidential text comparator(s) are used
    "s": "80xCU/SlDz1lCiWFaxIBjyJeJecWjq46T4eu6GtozkM="
  },
  "s": [ // array of segments
    {
      "n": "Beta Users", // segment name
      "r": [ // array of User Conditions (there is a logical AND relation between the elements)
        {
          "a": "Email", // comparison attribute
          "c": 0, // comparator (see below)
          "l": [ // comparison value (see below)
            "john@example.com", "jane@example.com"
          ]
        }
      ]
    }
  ],
  "f": { // key-value map of feature flags & settings
    "isFeatureEnabled": { // key of a particular flag / setting
      "t": 0, // setting type, possible values:
              // 0 -> on/off setting (feature flag)
              // 1 -> text setting
              // 2 -> whole number setting
              // 3 -> decimal number setting
      "r": [ // array of Targeting Rules (there is a logical OR relation between the elements)
        {
          "c": [ // array of conditions (there is a logical AND relation between the elements)
            {
              "u": { // User Condition
                "a": "Email", // comparison attribute
                "c": 2, // comparator, possible values and required comparison value types:
                        // 0  -> IS ONE OF (cleartext) + string array comparison value ("l")
                        // 1  -> IS NOT ONE OF (cleartext) + string array comparison value ("l")
                        // 2  -> CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 3  -> NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 4  -> IS ONE OF (semver) + semver string array comparison value ("l")
                        // 5  -> IS NOT ONE OF (semver) + semver string array comparison value ("l")
                        // 6  -> < (semver) + semver string comparison value ("s")
                        // 7  -> <= (semver + semver string comparison value ("s")
                        // 8  -> > (semver) + semver string comparison value ("s")
                        // 9  -> >= (semver + semver string comparison value ("s")
                        // 10 -> = (number) + number comparison value ("d")
                        // 11 -> <> (number + number comparison value ("d")
                        // 12 -> < (number) + number comparison value ("d")
                        // 13 -> <= (number + number comparison value ("d")
                        // 14 -> > (number) + number comparison value ("d")
                        // 15 -> >= (number) + number comparison value ("d")
                        // 16 -> IS ONE OF (hashed) + string array comparison value ("l")
                        // 17 -> IS NOT ONE OF (hashed) + string array comparison value ("l")
                        // 18 -> BEFORE (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 19 -> AFTER (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 20 -> EQUALS (hashed) + string comparison value ("s")
                        // 21 -> NOT EQUALS (hashed) + string comparison value ("s")
                        // 22 -> STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 23 -> NOT STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 24 -> ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 25 -> NOT ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 26 -> ARRAY CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 27 -> ARRAY NOT CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 28 -> EQUALS (cleartext) + string comparison value ("s")
                        // 29 -> NOT EQUALS (cleartext) + string comparison value ("s")
                        // 30 -> STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 31 -> NOT STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 32 -> ENDS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 33 -> NOT ENDS WITH ANY OF (cleartext + string array comparison value ("l")
                        // 34 -> ARRAY CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 35 -> ARRAY NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                "l": [ // comparison value - depending on the comparator, another type of value may need
                       // to be specified (see above):
                       // "s": string
                       // "d": number
                  "@example.com"
                ]
              }
            },
            {
              "p": { // Flag Condition (Prerequisite)
                "f": "mainIntFlag", // key of prerequisite flag
                "c": 0, // comparator, possible values: 0 -> EQUALS, 1 -> NOT EQUALS
                "v": { // comparison value (value's type must match the prerequisite flag's type)
                  "i": 42
                }
              }
            },
            {
              "s": { // Segment Condition
                "s": 0, // segment index, a valid index into the top-level segment array ("s")
                "c": 1 // comparator, possible values: 0 -> IS IN SEGMENT, 1 -> IS NOT IN SEGMENT
              }
            }
          ],
          "s": { // alternatively, an array of Percentage Options ("p", see below) can also be specified
            "v": { // the value served when the rule is selected during evaluation
              "b": true
            },
            "i": "bcfb84a7"
          }
        }
      ],
      "p": [ // array of Percentage Options
        {
          "p": 10, // % value
          "v": { // the value served when the Percentage Option is selected during evaluation
            "b": true
          },
          "i": "bcfb84a7"
        },
        {
          "p": 90,
          "v": {
            "b": false
          },
          "i": "bddac6ae"
        }
      ],
      "v": { // fallback value, served when none of the Targeting Rules match,
             // no Percentage Options are defined or evaluation of these is not possible
        "b": false // depending on the setting type, another type of value may need to be specified:
                   // text setting -> "s": string
                   // whole number setting -> "i": number
                   // decimal number setting -> "d": number
      },
      "i": "430bded3" // variation id (for analytical purposes)
    }
  }
}
```

For a more comprehensive specification of the config JSON v6 format, you may refer to [this JSON schema document](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

### Map[â](#map "Direct link to Map")

You can set up the SDK to load your feature flag & setting overrides from a map.

```
const std::unordered_map<std::string, Value>& map = {
    { "enabledFeature", true },
    { "disabledFeature", false },
    { "intSetting", 5 },
    { "doubleSetting", 3.14 },
    { "stringSetting", "test" }
};

ConfigCatOptions options;
options.flagOverrides = std::make_shared<MapFlagOverrides>(map, LocalOnly);
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

## `getAllKeys()`[â](#getallkeys "Direct link to getallkeys")

You can get the keys for all available feature flags and settings by calling the `getAllKeys()` method.

```
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#");
auto keys = client->getAllKeys();
```

## `getAllValues()`[â](#getallvalues "Direct link to getallvalues")

Evaluates and returns the values of all feature flags and settings. Passing a User Object is optional.

```
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#");
auto settingValues = client->getAllValues();

// invoke with User Object
auto user = ConfigCatUser::create("#UNIQUE-USER-IDENTIFIER#");
auto settingValuesTargeting = client->getAllValues(user);
```

## `getAllValueDetails`[â](#getallvaluedetails "Direct link to getallvaluedetails")

Evaluates and returns the detailed values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#");

// invoke with User Object
auto user = ConfigCatUser::create("#UNIQUE-USER-IDENTIFIER#");
auto allValueDetails = client->getAllValueDetails(user)
```

## Custom Cache[â](#custom-cache "Direct link to Custom Cache")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`ConfigCache`](https://github.com/configcat/cpp-sdk/blob/main/include/configcat/configcache.h#L8) interface and set the `configCache` parameter in the options passed to `ConfigCatClient::get`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

You have the option to inject your custom cache implementation into the client. All you have to do is to inherit from the `ConfigCatCache` abstract class:

```
class MyCustomCache : public ConfigCatCache {
public:
    const std::string& read(const std::string& key) override {
        // here you have to return with the cached value
    }

    void write(const std::string& key, const std::string& value) override {
        // here you have to store the new value in the cache
    }
};
```

Then use your custom cache implementation:

```
ConfigCatOptions options;
options.configCache = std::make_shared<MyCustomCache>();
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

info

The C++ SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Force refresh[â](#force-refresh "Direct link to Force refresh")

Call the `forceRefresh()` method on the client to download the latest config JSON and update the cache.

## Using ConfigCat behind a proxy[â](#using-configcat-behind-a-proxy "Direct link to Using ConfigCat behind a proxy")

Provide your own network credentials (username/password), and proxy server settings (proxy server/port) in the `ConfigCatOptions`.

```
ConfigCatOptions options;
options.proxies = {{"https", "proxyhost:port"}}; // Protocol, Proxy
options.proxyAuthentications = {
    {"https", ProxyAuthentication{"user", "password"}} // Protocol, ProxyAuthentication
};
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

## Changing the default HTTP timeout[â](#changing-the-default-http-timeout "Direct link to Changing the default HTTP timeout")

Set the maximum wait time for a ConfigCat HTTP response by changing the *connectTimeoutMs* or *readTimeoutMs* in the `ConfigCatOptions`. The default *connectTimeoutMs* is 8 seconds. The default *readTimeoutMs* is 5 seconds.

```
ConfigCatOptions options;
options.connectTimeoutMs = 10000; // Timeout in milliseconds for establishing a HTTP connection with the server
options.readTimeoutMs = 8000; // Timeout in milliseconds for reading the server's HTTP response
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
#include <configcat/configcat.h>
#include <configcat/consolelogger.h>

auto logger = std::make_shared<ConsoleLogger>(LOG_LEVEL_WARNING);
ConfigCatOptions options;
options.logger = logger;
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

You can change the verbosity of the logs by setting the `LogLevel`.

```
logger->setLogLevel(LOG_LEVEL_INFO);
```

Available log levels:

| Level               | Description                                                                             |
| ------------------- | --------------------------------------------------------------------------------------- |
| `LOG_LEVEL_ERROR`   | Only error level events are logged.                                                     |
| `LOG_LEVEL_WARNING` | Default. Errors and Warnings are logged.                                                |
| `LOG_LEVEL_INFO`    | Errors, Warnings and feature flag evaluation is logged.                                 |
| `LOG_LEVEL_DEBUG`   | All of the above plus debug info is logged. Debug logs can be different for other SDKs. |

Info level logging helps to inspect how a feature flag was evaluated:

```
[INFO]:[5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

In the ConfigCat SDK, the default logger (`ConsoleLogger`) writes logs to the standard output, but you can override it with your implementation via the `logger` client option. The custom logger must implement the `ILogger` abstract class.

```
#include "log.h"

class CustomLogger : public ILogger {
public:
    void log(LogLevel level, const std::string& message, const std::exception_ptr& exception) override {
        // Write the logs
        std::cout << logLevelAsString(level) << ": " << message << std::endl;
        if (exception) {
            std::cout << "Exception details: " << unwrap_exception_message(exception) << std::endl;
        }
    }
};
```

```
auto logger = std::make_shared<CustomLogger>();
logger->setLogLevel(LOG_LEVEL_INFO);

ConfigCatOptions options;
options.logger = logger;
auto client = ConfigCatClient::get("#YOUR-SDK-KEY#", &options);
```

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the ConfigCat SDK that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

Check out our Sample Application how they use the ConfigCat SDK

* [ConfigCat C++ Console Sample App](https://github.com/configcat/cpp-sdk/tree/main/samples/)

## Guides[â](#guides "Direct link to Guides")

See [this](https://configcat.com/blog/2022/10/21/configcat-cpp-sdk-announcement/) guide on how to use ConfigCat's C++ SDK.

## Look Under the Hood[â](#look-under-the-hood "Direct link to Look Under the Hood")

* [ConfigCat C++ SDK's repository on GitHub](https://github.com/configcat/cpp-sdk)


---

# Dart (Flutter) SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/dart-sdk.svg?style=social)](https://github.com/configcat/dart-sdk/stargazers) [![pub package](https://img.shields.io/pub/v/configcat_client.svg)](https://pub.dev/packages/configcat_client) [![Dart CI](https://github.com/configcat/dart-sdk/actions/workflows/dart-ci.yml/badge.svg?branch=main)](https://github.com/configcat/dart-sdk/actions/workflows/dart-ci.yml)

[ConfigCat Dart (Flutter) SDK on GitHub](https://github.com/configcat/dart-sdk)

## Getting Started[â](#getting-started "Direct link to Getting Started")

### 1. Add the ConfigCat SDK to your project[â](#1-add-the-configcat-sdk-to-your-project "Direct link to 1. Add the ConfigCat SDK to your project")

* Dart
* Flutter

```
dart pub add configcat_client
```

```
flutter pub add configcat_client
```

Or put the following directly to your `pubspec.yml` and run `dart pub get` or `flutter pub get`.

pubspec.yml

```
dependencies:
  configcat_client: ^4.0.0
```

### 2. Import the ConfigCat SDK[â](#2-import-the-configcat-sdk "Direct link to 2. Import the ConfigCat SDK")

```
import 'package:configcat_client/configcat_client.dart';
```

### 3. Create the *ConfigCat* client with your *SDK Key*[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3-create-the-configcat-client-with-your-sdk-key")

```
final client = ConfigCatClient.get(sdkKey: '#YOUR-SDK-KEY#');
```

### 4. (Optional) Set up Flutter caching[â](#4-optional-set-up-flutter-caching "Direct link to 4. (Optional) Set up Flutter caching")

If you're using the SDK in a Flutter application, it's recommended to use the [Flutter Preferences Cache](https://github.com/configcat/flutter-preferences-cache) implementation for caching. It stores the downloaded `config JSON` using the [shared\_preferences](https://pub.dev/packages/shared_preferences) package.

```
import 'package:configcat_preferences_cache/configcat_preferences_cache.dart';
```

```
final client = ConfigCatClient.get(
    sdkKey: '#YOUR-SDK-KEY#',
    options: ConfigCatOptions(cache: ConfigCatPreferencesCache()));
```

### 5. Get your setting value[â](#5-get-your-setting-value "Direct link to 5. Get your setting value")

```
final isMyAwesomeFeatureEnabled = await client.getValue(key: 'isMyAwesomeFeatureEnabled', defaultValue: false);
if (isMyAwesomeFeatureEnabled) {
    doTheNewThing();
} else {
    doTheOldThing();
}
```

### 6. Close *ConfigCat* clientâ[â](#6-close-configcat-client "Direct link to 6-close-configcat-client")

You can safely shut down all clients at once or individually and release all associated resources on application exit.

```
ConfigCatClient.closeAll(); // closes all clients

client.close(); // closes the specific client
```

## Setting up the *ConfigCat Client*[â](#setting-up-the-configcat-client "Direct link to setting-up-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`ConfigCatClient.get(sdkKey: <sdkKey>)` returns a client with default options.

### Customizing the *ConfigCat Client*[â](#customizing-the-configcat-client "Direct link to customizing-the-configcat-client")

To customize the SDK's behavior, you can pass an additional `ConfigCatOptions` parameter to the `get()` static factory method where the `ConfigCatOptions` class is used to set up the *ConfigCat Client*.

```
final client = ConfigCatClient.get(
    sdkKey: '#YOUR-SDK-KEY#',
    options: ConfigCatOptions(
        pollingMode: PollingMode.manualPoll(),
        logger: ConfigCatLogger(level: LogLevel.info)
    )
);
```

These are the available options on the `ConfigCatOptions` class:

| Properties       | Description                                                                                                                                                                                                                                                                                                                         |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `dataGovernance` | Optional, defaults to `global`. Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `global`, `euOnly`. |
| `baseUrl`        | Optional, sets the CDN base url (forward proxy, dedicated subscription) from where the sdk will download the config JSON.                                                                                                                                                                                                           |
| `connectTimeout` | Optional, sets the underlying [Dio](https://github.com/flutterchina/dio) HTTP client's connect timeout. [More about the HTTP Client](#httpclient).                                                                                                                                                                                  |
| `receiveTimeout` | Optional, sets the underlying [Dio](https://github.com/flutterchina/dio) HTTP client's receive timeout. [More about the HTTP Client](#httpclient).                                                                                                                                                                                  |
| `sendTimeout`    | Optional, sets the underlying [Dio](https://github.com/flutterchina/dio) HTTP client's send timeout. [More about the HTTP Client](#httpclient).                                                                                                                                                                                     |
| `cache`          | Optional, sets a custom cache implementation for the client. [More about cache](#custom-cache).                                                                                                                                                                                                                                     |
| `pollingMode`    | Optional, sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                                         |
| `logger`         | Optional, sets the internal logger and log level. [More about logging](#logging).                                                                                                                                                                                                                                                   |
| `override`       | Optional, sets local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                        |
| `defaultUser`    | Optional, sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                          |
| `offline`        | Optional, defaults to `false`. Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                   |
| `hooks`          | Optional, used to subscribe events that the SDK sends in specific scenarios. [More about hooks](#hooks).                                                                                                                                                                                                                            |

caution

We strongly recommend you to use the `ConfigCatClient` as a Singleton object in your application. The `ConfigCatClient.get(sdkKey: <sdkKey>)` static factory method constructs singleton client instances for your SDK keys. These clients can be closed all at once with the `ConfigCatClient.closeAll()` method or individually with `client.close()`.

## Anatomy of `getValue()`[â](#anatomy-of-getvalue "Direct link to anatomy-of-getvalue")

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
final value = await client.getValue(
    key: 'keyOfMySetting',
    defaultValue: false,
    user: ConfigCatUser(identifier: '#USER-IDENTIFIER#'), // Optional User Object
);
```

caution

It is important to provide an argument for the `defaultValue` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | Type parameter `T` |
| -------------- | ------------------ |
| On/Off Toggle  | `bool`/`bool?`     |
| Text           | `String`/`String?` |
| Whole Number   | `int`/`int?`       |
| Decimal Number | `double`/`double?` |

In addition to the types mentioned above, you also have the option to provide `object`, `object?` or `dynamic` for the type parameter regardless of the setting kind.

It's important to note that providing any other type for the type parameter will result in an `ArgumentError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

When relying on type inference and not explicitly specifying the type parameter, be mindful of potential type mismatch issues, especially with number types. For example, `client.getValue(key: "keyOfMyDecimalSetting", defaultValue: 0)` will return `defaultValue` (`0`) instead of the actual value of the decimal setting because the compiler infers the type as `int` instead of `double`, that is, the call is equivalent to `client.getValue<int>("keyOfMyDecimalSetting", 0)`, which is a type mismatch.

To correctly evaluate a decimal setting, you should use:

```
var value = client.getValue("keyOfMyDecimalSetting", 0.0);
// -or-
var value = client.getValue<double>("keyOfMyDecimalSetting", 0);
```

## Anatomy of `getValueDetails()`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`getValueDetails()` is similar to `getValue()` but instead of returning the evaluated value only, it gives more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
final details = await client.getValueDetails(
    key: 'keyOfMySetting',
    defaultValue: false,
    user: ConfigCatUser(identifier: '#USER-IDENTIFIER#'), // Optional User Object
);
```

caution

It is important to provide an argument for the `defaultValue` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                                 | Description                                                                                                |
| ------------------------- | ------------------------------------ | ---------------------------------------------------------------------------------------------------------- |
| `value`                   | `bool` / `String` / `int` / `double` | The evaluated value of the feature flag or setting.                                                        |
| `key`                     | `String`                             | The key of the evaluated feature flag or setting.                                                          |
| `isDefaultValue`          | `bool`                               | True when the default value passed to `getValueDetails()` is returned due to an error.                     |
| `error`                   | `String?`                            | In case of an error, this property contains the error message.                                             |
| `user`                    | `ConfigCatUser?`                     | The User Object that was used for evaluation.                                                              |
| `matchedPercentageOption` | `PercentageOption?`                  | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `matchedTargetingRule`    | `TargetingRule?`                     | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `fetchTime`               | `DateTime`                           | The last download time of the current config.                                                              |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
final user = ConfigCatUser(identifier: '#UNIQUE-USER-IDENTIFIER#');
```

```
final user = ConfigCatUser(identifier: 'john@example.com');
```

### Customized User Object creation[â](#customized-user-object-creation "Direct link to Customized User Object creation")

| Argument     | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any value, even an email address.                         |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. e.g. User role, Subscription type. |

```
final user = ConfigCatUser(
    identifier: '#UNIQUE-USER-IDENTIFIER#',
    email: 'john@example.com',
    country: 'United Kingdom',
    custom: {
        'SubscriptionType': 'Pro',
        'UserRole': 'Admin'
    }
);
```

The `custom` map also allows attribute values other than `String` values:

```
final user = ConfigCatUser(
    identifier: '#UNIQUE-USER-IDENTIFIER#',
    email: 'john@example.com',
    country: 'United Kingdom',
    custom:  {
      'Rating': 4.5,
      'RegisteredAt': DateTime.parse('2023-11-22 12:34:56 +00:00'),
      'Roles': {"Role1", "Role2"}
    }
);
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `String` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `String` values,
* all other values are automatically converted to `String` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `String` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `double` values and all other numeric values which can safely be converted to `double`,
* accept `String` values containing a properly formatted, valid `double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `DateTime` values, which are automatically converted to a second-based Unix timestamp,
* accept `double` values representing a second-based Unix timestamp and all other numeric values which can safely be converted to `Double`,
* accept `String` values containing a properly formatted, valid `double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept lists or sets of `String`,
* accept `String` values containing a valid JSON string which can be deserialized to an array of `String`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object either on SDK initialization:

```
final client = ConfigCatClient.get(
    sdkKey: '#YOUR-SDK-KEY#',
    options: ConfigCatOptions(
        defaultUser: ConfigCatUser(identifier: 'john@example.com')
    )
);
```

or with the `setDefaultUser()` method of the ConfigCat client.

```
client.setDefaultUser(ConfigCatUser(identifier: 'john@example.com'));
```

Whenever the `getValue()`, `getValueDetails()`, `getAllValues()`, or `getAllVariationIds()` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
final user = ConfigCatUser(identifier: 'john@example.com');
client.setDefaultUser(user);

// The default user will be used at the evaluation process.
final value = await client.getValue(key: 'keyOfMySetting', defaultValue: false);
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

```
final user = ConfigCatUser(identifier: 'john@example.com');
client.setDefaultUser(user);

final otherUser = ConfigCatUser(identifier: 'brian@example.com');

// otherUser will be used at the evaluation process.
final value = await client.getValue(key: 'keyOfMySetting', defaultValue: false, user: otherUser);
```

For deleting the default user, you can do the following:

```
client.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValue()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the the `autoPollInterval` option parameter of the `PollingMode.autoPoll()` to change the polling interval.

```
final client = ConfigCatClient.get(
    sdkKey: '<PLACE-YOUR-SDK-KEY-HERE>',
    options: ConfigCatOptions(
        pollingMode: PollingMode.autoPoll(
            autoPollInterval: Duration(seconds: 100),
        ),
    )
);
```

Available options:

| Option Parameter   | Description                                                                                         | Default |
| ------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `autoPollInterval` | Polling interval.                                                                                   | 60      |
| `maxInitWaitTime`  | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5       |

### Lazy Loading[â](#lazy-loading "Direct link to Lazy Loading")

When calling `getValue()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValue()` will return the setting value after the cache is updated.

Use the `cacheRefreshInterval` option parameter of the `PollingMode.lazyLoad()` to set cache lifetime.

```
final client = ConfigCatClient.get(
    sdkKey: '<PLACE-YOUR-SDK-KEY-HERE>',
    options: ConfigCatOptions(
        pollingMode: PollingMode.lazyLoad(
            // the cache will expire in 100 seconds
            cacheRefreshInterval: Duration(seconds: 100),
        ),
    )
);
```

Available options:

| Parameter              | Description | Default |
| ---------------------- | ----------- | ------- |
| `cacheRefreshInterval` | Cache TTL.  | 60      |

### Manual Polling[â](#manual-polling "Direct link to Manual Polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefresh()` is your application's responsibility.

```
final client = ConfigCatClient.get(
    sdkKey: '<PLACE-YOUR-SDK-KEY-HERE>',
    options: ConfigCatOptions(
        pollingMode: PollingMode.manualPoll(),
    )
);

client.forceRefresh();
```

> `getValue()` returns `defaultValue` if the cache is empty. Call `forceRefresh()` to update the cache.

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `onClientReady()`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after instantiation.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTime` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. Alternatively, in Auto Polling mode, you can wait for the first `onConfigChanged` event to be notified when the internal cache is actually populated with config data.

* `onConfigChanged(Map<string, Setting>)`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `onFlagEvaluated(EvaluationDetails)`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetails()`](#anatomy-of-getvaluedetails).

* `onError(String)`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on SDK initialization:

```
final client = ConfigCatClient.get(
    sdkKey: '#YOUR-SDK-KEY#',
    options: ConfigCatOptions(
        pollingMode: PollingMode.manualPoll(),
        hooks: Hooks(
            onFlagEvaluated: (details) => /* handle the event */
        )
    )
);
```

or with the `hooks` property of the ConfigCat client:

```
client.hooks.addOnFlagEvaluated((details) => /* handle the event */);
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

```
client.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

```
client.setOnline();
```

> With `client.isOffline()` you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.localOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.localOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.remoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `Map<String, Object>`.

```
final client = ConfigCatClient.get(
    sdkKey: 'localhost',
    options: ConfigCatOptions(
        override: FlagOverrides(
            dataSource: OverrideDataSource.map({
                'enabledFeature': true,
                'disabledFeature': false,
                'intSetting': 5,
                'doubleSetting': 3.14,
                'stringSetting': 'test',
            }),
            behaviour: OverrideBehaviour.localOnly
        )
    )
);
```

## `getAllKeys()`[â](#getallkeys "Direct link to getallkeys")

You can get the keys for all available feature flags and settings by calling the `getAllKeys()` method.

```
final client = ConfigCatClient.get(sdkKey: '#YOUR-SDK-KEY#');
final keys = await client.getAllKeys();
```

## `getAllValues()`[â](#getallvalues "Direct link to getallvalues")

Evaluates and returns the values of all feature flags and settings. Passing a User Object is optional.

```
final client = ConfigCatClient.get(sdkKey: '#YOUR-SDK-KEY#');
final settingValues = await client.getAllValues();

// invoke with User Object
final user = ConfigCatUser(identifier: '#UNIQUE-USER-IDENTIFIER#');
final settingValuesTargeting = await client.getAllValues(user);
```

## Cache[â](#cache "Direct link to Cache")

The SDK caches the downloaded `config JSON` only in memory by default. In case you have a Flutter application, you can use the [Flutter Preferences Cache](https://github.com/configcat/flutter-preferences-cache) for caching.<br /><!-- -->It's based on the [shared\_preferences](https://pub.dev/packages/shared_preferences) package that uses the following storage locations by platform:

* **Web**: Browser `LocalStorage`.
* **iOS / macOS**: `NSUserDefaults`.
* **Android**: `SharedPreferences`.
* **Linux**: File in `XDG_DATA_HOME` directory.
* **Windows**: File in roaming `AppData` directory.

```
final client = ConfigCatClient.get(
    sdkKey: '#YOUR-SDK-KEY#',
    options: ConfigCatOptions(cache: ConfigCatPreferencesCache()));
```

### Custom Cache[â](#custom-cache "Direct link to Custom Cache")

You have the option to inject your custom cache implementation into the client. All you have to do is to inherit from the `ConfigCatCache` abstract class:

```
class MyCustomCache extends ConfigCatCache {
    @override
    Future<String> read(String key) {
        // here you have to return with the cached value
    }

    @override
    Future<void> write(String key, String value) {
        // here you have to store the new value in the cache
    }
}
```

Then use your custom cache implementation:

```
final client = ConfigCatClient.get(
    sdkKey: '<PLACE-YOUR-SDK-KEY-HERE>',
    options: ConfigCatOptions(cache: MyCustomCache()));
```

info

The Dart (Flutter) SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## HttpClient[â](#httpclient "Direct link to HttpClient")

The ConfigCat SDK internally uses a [Dio HTTP client](https://github.com/flutterchina/dio) instance to download the latest config JSON over HTTP. You have the option to customize the internal HTTP client.

### HTTP Timeout[â](#http-timeout "Direct link to HTTP Timeout")

You can set the maximum wait time for a ConfigCat HTTP response by using Dio's timeouts.

```
final client = ConfigCatClient.get(
    sdkKey: '<PLACE-YOUR-SDK-KEY-HERE>',
    options: ConfigCatOptions(
        connectTimeout: Duration(seconds: 10), // timeout for establishing a HTTP connection with the server
        sendTimeout: Duration(seconds: 10), // timeout for sending a HTTP request to the server
        receiveTimeout: Duration(seconds: 10), // timeout for reading the server's HTTP response
    )
);
```

Default timeout values:

* `connectTimeout`: 10 seconds
* `sendTimeout`: 20 seconds
* `receiveTimeout`: 20 seconds

### HTTP Proxy[â](#http-proxy "Direct link to HTTP Proxy")

If your application runs behind a proxy you can do the following:

```
import 'package:dio/adapter.dart';

(client.httpClient.httpClientAdapter as DefaultHttpClientAdapter)
    .onHttpClientCreate = (client) {
        client.findProxy = (uri) {
            return 'PROXY proxyHost:proxyPort';
        };
    };
```

## Force refresh[â](#force-refresh "Direct link to Force refresh")

Call the `forceRefresh()` method on the client to download the latest config JSON and update the cache.

## Logging[â](#logging "Direct link to Logging")

The default logger used by the SDK simply outputs the log messages with `print()`, but you can override it with your implementation via the `logger` client option. The custom implementation must satisfy the [Logger](https://github.com/configcat/dart-sdk/blob/main/lib/src/log/logger.dart) abstract class.

```
class MyCustomLogger implements Logger {
  @override
  void close() {
    // close the logger
  }

  @override
  void debug(message, [error, StackTrace? stackTrace]) {
    // write the debug logs
  }

  @override
  void error(message, [error, StackTrace? stackTrace]) {
    // write the error logs
  }

  @override
  void info(message, [error, StackTrace? stackTrace]) {
    // write the info logs
  }

  @override
  void warning(message, [error, StackTrace? stackTrace]) {
    // write the warning logs
  }
}
```

Then you can use your custom logger implementation at the SDK's initialization:

```
final client = ConfigCatClient.get(
    sdkKey: '<PLACE-YOUR-SDK-KEY-HERE>',
    options: ConfigCatOptions(
        logger: ConfigCatLogger(internalLogger: MyCustomLogger()),
    )
);
```

You can change the verbosity of the logs by passing a `LogLevel` parameter to the `logger` option.

```
final client = ConfigCatClient.get(
    sdkKey: '<PLACE-YOUR-SDK-KEY-HERE>',
    options: ConfigCatOptions(
        logger: ConfigCatLogger(level: LogLevel.info),
    )
);
```

Available log levels:

| Level     | Description                                                                             |
| --------- | --------------------------------------------------------------------------------------- |
| `nothing` | Turn the logging off.                                                                   |
| `error`   | Only error level events are logged.                                                     |
| `warning` | Default. Errors and Warnings are logged.                                                |
| `info`    | Errors, Warnings and feature flag evaluation is logged.                                 |
| `debug`   | All of the above plus debug info is logged. Debug logs can be different for other SDKs. |

Info level logging helps to inspect how a feature flag was evaluated:

```
[INFO] 2022-01-20T18:22:02.313703 ConfigCat - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'False' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'True' => MATCH, applying rule
  Returning 'True'.
```

## Sample Apps[â](#sample-apps "Direct link to Sample Apps")

Check out our Sample Applications how they use the ConfigCat SDK

* [Console Application](https://github.com/configcat/dart-sdk/tree/main/example/lib)
* [Flutter Application](https://github.com/configcat/dart-sdk/tree/main/example/flutter)

## Guides[â](#guides "Direct link to Guides")

See [this](https://configcat.com/blog/2022/10/18/feature-flags-in-dart/) guide on how to use ConfigCat's Dart SDK.

## Look Under the Hood[â](#look-under-the-hood "Direct link to Look Under the Hood")

* [ConfigCat Dart (Flutter) SDK's repository on GitHub](https://github.com/configcat/dart-sdk)
* [ConfigCat Dart (Flutter) SDK's pub.dev page](https://pub.dev/packages/configcat_client)


---

# .NET SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/.net-sdk.svg?style=social)](https://github.com/configcat/.net-sdk/stargazers) [![Build status](https://github.com/configcat/.net-sdk/actions/workflows/dotnet-sdk-ci.yml/badge.svg?branch=master)](https://github.com/configcat/.net-sdk/actions/workflows/dotnet-sdk-ci.yml) [![NuGet Version](https://img.shields.io/nuget/v/ConfigCat.Client)](https://www.nuget.org/packages/ConfigCat.Client/) [![Sonar Coverage](https://img.shields.io/sonar/coverage/net-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=net-sdk) [![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=net-sdk\&metric=alert_status)](https://sonarcloud.io/dashboard?id=net-sdk)

[ConfigCat .NET SDK on GitHub](https://github.com/configcat/.net-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install *ConfigCat SDK* [NuGet package](https://www.nuget.org/packages/ConfigCat.Client)[â](#1-install-configcat-sdk-nuget-package "Direct link to 1-install-configcat-sdk-nuget-package")

* Powershell / NuGet Package Manager Console
* .NET CLI

```
Install-Package ConfigCat.Client
```

```
dotnet add package ConfigCat.Client
```

info

To get the *ConfigCat SDK* up and running in Unity, please refer to [this guide](https://configcat.com/docs/docs/sdk-reference/unity/.md).

### 2. Import package[â](#2-import-package "Direct link to 2. Import package")

```
using ConfigCat.Client;
```

### 3. Create the *ConfigCat* client with your *SDK Key*[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3-create-the-configcat-client-with-your-sdk-key")

```
var client = ConfigCatClient.Get("#YOUR-SDK-KEY#");
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

```
var isMyAwesomeFeatureEnabled = await client.GetValueAsync("isMyAwesomeFeatureEnabled", false);
if (isMyAwesomeFeatureEnabled)
{
    doTheNewThing();
}
else
{
    doTheOldThing();
}
```

The *ConfigCat SDK* also offers a synchronous API for feature flag evaluation. Read more [here](#snapshots-and-non-blocking-synchronous-feature-flag-evaluation).

### 5. Dispose the *ConfigCat* client[â](#5-dispose-the-configcat-client "Direct link to 5-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
ConfigCatClient.DisposeAll(); // disposes all clients
// -or-
client.Dispose(); // disposes a specific client
```

## Creating the *ConfigCat Client*[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`ConfigCatClient.Get(sdkKey: "<sdkKey>")` returns a client with default options.

### Customizing the *ConfigCat Client*[â](#customizing-the-configcat-client "Direct link to customizing-the-configcat-client")

To customize the SDK's behavior, you can pass an additional `Action<ConfigCatClientOptions>` parameter to the `Get()` static factory method where the `ConfigCatClientOptions` class is used to set up the *ConfigCat Client*.

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
{
    options.PollingMode = PollingModes.ManualPoll;
    options.Logger = new ConsoleLogger(LogLevel.Info);
});
```

These are the available options on the `ConfigCatClientOptions` class:

| Properties          | Description                                                                                                                                                                                                                                                                                                  | Default                                                                                                                                     |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------- |
| `PollingMode`       | Optional, sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                  | `PollingModes.AutoPoll()`                                                                                                                   |
| `ConfigFetcher`     | Optional, [`IConfigCatConfigFetcher`](https://github.com/configcat/.net-sdk/blob/master/src/ConfigCatClient/ConfigService/IConfigCatConfigFetcher.cs) instance for downloading a config.                                                                                                                     | [`HttpClientConfigFetcher`](https://github.com/configcat/.net-sdk/blob/master/src/ConfigCatClient/ConfigService/HttpClientConfigFetcher.cs) |
| `ConfigCache`       | Optional, [`IConfigCatCache`](https://github.com/configcat/.net-sdk/blob/master/src/ConfigCatClient/Cache/IConfigCatCache.cs) instance for caching the downloaded config.                                                                                                                                    | [`InMemoryConfigCache`](https://github.com/configcat/.net-sdk/blob/master/src/ConfigCatClient/Cache/InMemoryConfigCache.cs)                 |
| `Logger`            | Optional, [`IConfigCatLogger`](https://github.com/configcat/.net-sdk/blob/master/src/ConfigCatClient/Logging/IConfigCatLogger.cs) instance for tracing.                                                                                                                                                      | [`ConsoleLogger`](https://github.com/configcat/.net-sdk/blob/master/src/ConfigCatClient/Logging/ConsoleLogger.cs) (with WARNING level)      |
| `LogFilter`         | Optional, sets a custom log filter. [More about log filtering](#log-filtering).                                                                                                                                                                                                                              | `null` (none)                                                                                                                               |
| `BaseUrl`           | Optional, sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                    |                                                                                                                                             |
| `HttpClientHandler` | Optional, `HttpClientHandler` to provide network credentials and proxy settings. [More about the proxy settings](#using-configcat-behind-a-proxy).                                                                                                                                                           | built-in `HttpClientHandler`                                                                                                                |
| `HttpTimeout`       | Optional, sets the underlying HTTP client's timeout. [More about the HTTP timeout](#http-timeout).                                                                                                                                                                                                           | `TimeSpan.FromSeconds(30)`                                                                                                                  |
| `FlagOverrides`     | Optional, sets the local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                             |                                                                                                                                             |
| `DataGovernance`    | Optional, describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `Global`, `EuOnly` | `Global`                                                                                                                                    |
| `DefaultUser`       | Optional, sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                   | `null` (none)                                                                                                                               |
| `Offline`           | Optional, determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                             | `false`                                                                                                                                     |

Via the events provided by `ConfigCatClientOptions` you can also subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
{
    options.ClientReady += (s, e) =>
    {
        var keys = ((IConfigCatClient)s).Snapshot().GetAllKeys();
        Console.WriteLine("Client is ready! Number of available feature flags: " + keys.Count);
    };
});
```

info

You can acquire singleton client instances for your SDK keys using the `ConfigCatClient.Get(sdkKey: "<sdkKey>")` static factory method. (However, please keep in mind that subsequent calls to `ConfigCatClient.Get()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `ConfigCatClient.DisposeAll()` method or do it individually using the `client.Dispose()` method.

## Anatomy of `GetValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
User userObject = new User("#UNIQUE-USER-IDENTIFIER#"); // Optional User Object
var value = await client.GetValueAsync("keyOfMyFeatureFlag", false, userObject);
```

caution

It is important to provide an argument for the `defaultValue` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | Type parameter `T`                |
| -------------- | --------------------------------- |
| On/Off Toggle  | `bool` / `bool?`                  |
| Text           | `string` / `string?`              |
| Whole Number   | `int` / `int?` / `long` / `long?` |
| Decimal Number | `double` / `double?`              |

In addition to the types mentioned above, you also have the option to provide `object` or `object?` for the type parameter regardless of the setting kind. However, this approach is not recommended as it may involve [boxing](https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/types/boxing-and-unboxing).

It's important to note that providing any other type for the type parameter will result in an `ArgumentException`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

When relying on type inference and not explicitly specifying the type parameter, be mindful of potential type mismatch issues, especially with number types. For example, `client.GetValueAsync("keyOfMyDecimalSetting", 0)` will return `defaultValue` (`0`) instead of the actual value of the decimal setting because the compiler infers the type as `int` instead of `double`, that is, the call is equivalent to `client.GetValueAsync<int>("keyOfMyDecimalSetting", 0)`, which is a type mismatch.

To correctly evaluate a decimal setting, you should use:

```
var value = await client.GetValueAsync("keyOfMyDecimalSetting", 0.0);
// -or-
var value = await client.GetValueAsync("keyOfMyDecimalSetting", 0d);
// -or-
var value = await client.GetValueAsync<double>("keyOfMyDecimalSetting", 0);
```

## Anatomy of `GetValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`GetValueDetailsAsync()` is similar to `GetValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
User userObject = new User("#UNIQUE-USER-IDENTIFIER#"); // Optional User Object
var details = await client.GetValueDetailsAsync("keyOfMyFeatureFlag", false, userObject);
```

caution

It is important to provide an argument for the `defaultValue` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                                 | Description                                                                                                |
| ------------------------- | ------------------------------------ | ---------------------------------------------------------------------------------------------------------- |
| `Key`                     | `string`                             | The key of the evaluated feature flag or setting.                                                          |
| `Value`                   | `bool` / `string` / `int` / `double` | The evaluated value of the feature flag or setting.                                                        |
| `User`                    | `User`                               | The User Object used for the evaluation.                                                                   |
| `IsDefaultValue`          | `bool`                               | True when the default value passed to `GetValueDetailsAsync()` is returned due to an error.                |
| `ErrorCode`               | `EvaluationErrorCode`                | In case of an error, this property contains a code that identifies the reason for the error.               |
| `ErrorMessage`            | `string`                             | In case of an error, this property contains the error message.                                             |
| `ErrorException`          | `Exception`                          | In case of an error, this property contains the related exception object (if any).                         |
| `MatchedTargetingRule`    | `ITargetingRule`                     | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `MatchedPercentageOption` | `IPercentageOption`                  | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `FetchTime`               | `DateTime`                           | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
User userObject = new User("#UNIQUE-USER-IDENTIFIER#");
```

```
User userObject = new User("john@example.com");
```

| Parameters | Description                                                                                                                     |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------- |
| `Id`       | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `Email`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `Country`  | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `Custom`   | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

```
User userObject = new User("#UNIQUE-USER-IDENTIFIER#")
{
    Email = "john@example.com",
    Country = "United Kingdom",
    Custom =
    {
        ["SubscriptionType"] = "Pro",
        ["UserRole"] = "Admin"
    }
};
```

The `Custom` dictionary also allows attribute values other than `string` values:

```
User userObject = new User("#UNIQUE-USER-IDENTIFIER#")
{
    Custom =
    {
        ["Rating"] = 4.5,
        ["RegisteredAt"] = DateTimeOffset.Parse("2023-11-22 12:34:56 +00:00", CultureInfo.InvariantCulture),
        ["Roles"] = new[] { "Role1", "Role2" }
    }
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `double` values and all other numeric values which can safely be converted to `double`,
* accept `string` values containing a properly formatted, valid `double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `DateTime` or `DateTimeOffset` values, which are automatically converted to a second-based Unix timestamp,
* accept `double` values representing a second-based Unix timestamp and all other numeric values which can safely be converted to `double`,
* accept `string` values containing a properly formatted, valid `double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
    options.DefaultUser = new User(identifier: "john@example.com"));
```

...or using the `SetDefaultUser()` method of the `ConfigCatClient` object:

```
client.SetDefaultUser(new User(identifier: "john@example.com"));
```

Whenever the evaluation methods like `GetValueAsync()`, `GetValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
var user = new User(identifier: "john@example.com");
client.SetDefaultUser(user);

// The default user will be used in the evaluation process.
var value = await client.GetValueAsync(key: "keyOfMyFeatureFlag", defaultValue: false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
var user = new User(identifier: "john@example.com");
client.SetDefaultUser(user);

var otherUser = new User(identifier: "brian@example.com");

// otherUser will be used in the evaluation process.
var value = await client.GetValueAsync(key: "keyOfMyFeatureFlag", defaultValue: false, user: otherUser);
```

You can also remove the default user by doing the following:

```
client.ClearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `GetValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollInterval` option parameter to change the polling interval.

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
{
    options.PollingMode = PollingModes.AutoPoll(pollInterval: TimeSpan.FromSeconds(95));
});
```

Available options:

| Option Parameter  | Description                                                                              | Default |
| ----------------- | ---------------------------------------------------------------------------------------- | ------- |
| `pollInterval`    | Polling interval.                                                                        | 60s     |
| `maxInitWaitTime` | Maximum waiting time between the client initialization and the first config acquisition. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `GetValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `GetValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLive` parameter to manage configuration lifetime.

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
{
    options.PollingMode = PollingModes.LazyLoad(cacheTimeToLive: TimeSpan.FromSeconds(600));
});
```

Available options:

| Option Parameter  | Description | Default |
| ----------------- | ----------- | ------- |
| `cacheTimeToLive` | Cache TTL.  | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `ForceRefreshAsync()` is your application's responsibility.

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
{
    options.PollingMode = PollingModes.ManualPoll;
});

await client.ForceRefreshAsync();
```

> `GetValueAsync()` returns `defaultValue` if the cache is empty. Call `ForceRefreshAsync()` to update the cache.

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
{
    options.PollingMode = PollingModes.ManualPoll;
});

Console.WriteLine(await client.GetValueAsync("keyOfMyTextSetting", "my default value")); // console: "my default value"
await client.ForceRefreshAsync();
Console.WriteLine(await client.GetValueAsync("keyOfMyTextSetting", "my default value")); // console: "value from server"
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. Via the following events you can subscribe to particular events raised by the *ConfigCat* client:

* `event EventHandler<ClientReadyEventArgs> ClientReady`: This event is raised when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTime` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `CacheState` property of the event arguments.

* `event EventHandler<ConfigFetchedEventArgs> ConfigFetched`: This event is raised each time the client attempts to refresh the cached config by fetching the latest version from the ConfigCat CDN. It is raised not only when `ForceRefreshAsync` is called but also when the refresh is initiated by the client automatically. Thus, this event allows you to observe potential network issues that occur under the hood.

* `event EventHandler<ConfigChangedEventArgs> ConfigChanged`: This event is raised first when the client's internal cache gets populated. Afterwards, it is raised again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `event EventHandler<FlagEvaluatedEventArgs> FlagEvaluated`: This event is raised each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`GetValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `event EventHandler<ConfigCatClientErrorEventArgs> Error`: This event is raised when an error occurs within the client.

You can subscribe to these events either on initialization:

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
{
    options.PollingMode = PollingModes.ManualPoll;
    options.FlagEvaluated += (s, e) => { /* handle the event */ };
});
```

...or directly on the `ConfigCatClient` instance:

```
client.FlagEvaluated += (s, e) => { /* handle the event */ };
```

caution

Some events (e.g. `ClientReady`, `ConfigChanged` and `Error`) may be raised before `ConfigCatClient.Get` returns. This means you may miss them unless you subscribe on initialization.

However, even if you do, there's another gotcha: it's not safe to use the outer `client` variable in your event handler because it may not yet be assigned when the handler is called. Instead, you can safely access the client instance via the sender parameter like `var client = (IConfigCatClient)s;`.

## Snapshots and non-blocking synchronous feature flag evaluation[â](#snapshots-and-non-blocking-synchronous-feature-flag-evaluation "Direct link to Snapshots and non-blocking synchronous feature flag evaluation")

Currently, the *ConfigCat* client provides both asynchronous and synchronous methods for evaluating feature flags and settings. However, depending on the setup, the synchronous methods may block the executing thread for longer periods of time (e.g. when downloading config data from the ConfigCat CDN servers), which can lead to an unresponsive application. To prevent such issues, the problematic methods have been deprecated and are going to be removed in a future major version.

As an alternative, since v9.2.0, the .NET SDK provides a way to synchronously evaluate feature flags and settings as a non-blocking operation, via *snapshots*.

Using the `Snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
using var client = ConfigCatClient.Get("#YOUR-SDK-KEY#",
    options => options.PollingMode = PollingModes.AutoPoll());

// Wait for the client to initialize.
await client.WaitForReadyAsync();

var snapshot = client.Snapshot();

var user = new User("#UNIQUE-USER-IDENTIFIER#");
foreach (var key in snapshot.GetAllKeys())
{
    var value = snapshot.GetValue(key, default(object), user);
    Console.WriteLine($"{key}: {value}");
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `ForceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `WaitForReadyAsync` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTime` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `WaitForReadyAsync` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
var clientCacheState = await client.WaitForReadyAsync();
if (clientCacheState == ClientCacheState.NoFlagData)
{
    // Handle initialization failure (see below).
    Console.WriteLine("ConfigCat client failed to obtain the config data during initialization.");
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `ConfigChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
client.SetOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
client.SetOnline();
```

Using the `client.IsOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can load your feature flag & setting overrides from a file or from a simple `Dictionary<string, object>` structure.

### JSON File[â](#json-file "Direct link to JSON File")

The SDK can load your feature flag & setting overrides from a file. You can also specify whether the file should be reloaded when it gets modified.

#### File[â](#file "Direct link to File")

```
IConfigCatClient client = ConfigCatClient.Get("localhost", options =>
{
    options.FlagOverrides = FlagOverrides.LocalFile(
        "path/to/local_flags.json", // path to the file
        true, // reload the file when it gets modified
        OverrideBehaviour.LocalOnly
    );
});
```

#### JSON File Structure[â](#json-file-structure "Direct link to JSON File Structure")

The SDK supports 2 types of JSON structures to describe feature flags & settings.

##### 1. Simple (key-value) structure[â](#1-simple-key-value-structure "Direct link to 1. Simple (key-value) structure")

```
{
  "flags": {
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
  }
}
```

##### 2. Complex (full-featured) structure[â](#2-complex-full-featured-structure "Direct link to 2. Complex (full-featured) structure")

This is the same format that the SDK downloads from the ConfigCat CDN. It allows the usage of all features that are available on the ConfigCat Dashboard.

You can download your current config JSON from ConfigCat's CDN and use it as a baseline.

A convenient way to get the config JSON for a specific SDK Key is to install the [ConfigCat CLI](https://github.com/configcat/cli) tool and execute the following command:

```
configcat config-json get -f v6 -p {YOUR-SDK-KEY} > config.json
```

(Depending on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings, you may need to add the `--eu` switch.)

Alternatively, you can download the config JSON manually, based on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings:

* GLOBAL: `https://cdn-global.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`
* EU: `https://cdn-eu.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`

```
{
  "p": {
    // hash salt, required only when confidential text comparator(s) are used
    "s": "80xCU/SlDz1lCiWFaxIBjyJeJecWjq46T4eu6GtozkM="
  },
  "s": [ // array of segments
    {
      "n": "Beta Users", // segment name
      "r": [ // array of User Conditions (there is a logical AND relation between the elements)
        {
          "a": "Email", // comparison attribute
          "c": 0, // comparator (see below)
          "l": [ // comparison value (see below)
            "john@example.com", "jane@example.com"
          ]
        }
      ]
    }
  ],
  "f": { // key-value map of feature flags & settings
    "isFeatureEnabled": { // key of a particular flag / setting
      "t": 0, // setting type, possible values:
              // 0 -> on/off setting (feature flag)
              // 1 -> text setting
              // 2 -> whole number setting
              // 3 -> decimal number setting
      "r": [ // array of Targeting Rules (there is a logical OR relation between the elements)
        {
          "c": [ // array of conditions (there is a logical AND relation between the elements)
            {
              "u": { // User Condition
                "a": "Email", // comparison attribute
                "c": 2, // comparator, possible values and required comparison value types:
                        // 0  -> IS ONE OF (cleartext) + string array comparison value ("l")
                        // 1  -> IS NOT ONE OF (cleartext) + string array comparison value ("l")
                        // 2  -> CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 3  -> NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 4  -> IS ONE OF (semver) + semver string array comparison value ("l")
                        // 5  -> IS NOT ONE OF (semver) + semver string array comparison value ("l")
                        // 6  -> < (semver) + semver string comparison value ("s")
                        // 7  -> <= (semver + semver string comparison value ("s")
                        // 8  -> > (semver) + semver string comparison value ("s")
                        // 9  -> >= (semver + semver string comparison value ("s")
                        // 10 -> = (number) + number comparison value ("d")
                        // 11 -> <> (number + number comparison value ("d")
                        // 12 -> < (number) + number comparison value ("d")
                        // 13 -> <= (number + number comparison value ("d")
                        // 14 -> > (number) + number comparison value ("d")
                        // 15 -> >= (number) + number comparison value ("d")
                        // 16 -> IS ONE OF (hashed) + string array comparison value ("l")
                        // 17 -> IS NOT ONE OF (hashed) + string array comparison value ("l")
                        // 18 -> BEFORE (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 19 -> AFTER (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 20 -> EQUALS (hashed) + string comparison value ("s")
                        // 21 -> NOT EQUALS (hashed) + string comparison value ("s")
                        // 22 -> STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 23 -> NOT STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 24 -> ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 25 -> NOT ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 26 -> ARRAY CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 27 -> ARRAY NOT CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 28 -> EQUALS (cleartext) + string comparison value ("s")
                        // 29 -> NOT EQUALS (cleartext) + string comparison value ("s")
                        // 30 -> STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 31 -> NOT STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 32 -> ENDS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 33 -> NOT ENDS WITH ANY OF (cleartext + string array comparison value ("l")
                        // 34 -> ARRAY CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 35 -> ARRAY NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                "l": [ // comparison value - depending on the comparator, another type of value may need
                       // to be specified (see above):
                       // "s": string
                       // "d": number
                  "@example.com"
                ]
              }
            },
            {
              "p": { // Flag Condition (Prerequisite)
                "f": "mainIntFlag", // key of prerequisite flag
                "c": 0, // comparator, possible values: 0 -> EQUALS, 1 -> NOT EQUALS
                "v": { // comparison value (value's type must match the prerequisite flag's type)
                  "i": 42
                }
              }
            },
            {
              "s": { // Segment Condition
                "s": 0, // segment index, a valid index into the top-level segment array ("s")
                "c": 1 // comparator, possible values: 0 -> IS IN SEGMENT, 1 -> IS NOT IN SEGMENT
              }
            }
          ],
          "s": { // alternatively, an array of Percentage Options ("p", see below) can also be specified
            "v": { // the value served when the rule is selected during evaluation
              "b": true
            },
            "i": "bcfb84a7"
          }
        }
      ],
      "p": [ // array of Percentage Options
        {
          "p": 10, // % value
          "v": { // the value served when the Percentage Option is selected during evaluation
            "b": true
          },
          "i": "bcfb84a7"
        },
        {
          "p": 90,
          "v": {
            "b": false
          },
          "i": "bddac6ae"
        }
      ],
      "v": { // fallback value, served when none of the Targeting Rules match,
             // no Percentage Options are defined or evaluation of these is not possible
        "b": false // depending on the setting type, another type of value may need to be specified:
                   // text setting -> "s": string
                   // whole number setting -> "i": number
                   // decimal number setting -> "d": number
      },
      "i": "430bded3" // variation id (for analytical purposes)
    }
  }
}
```

For a more comprehensive specification of the config JSON v6 format, you may refer to [this JSON schema document](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

### Dictionary[â](#dictionary "Direct link to Dictionary")

You can set up the SDK to load your feature flag & setting overrides from a `Dictionary<string, object>`.

```
var dictionary = new Dictionary<string, object>
{
    {"enabledFeature", true},
    {"disabledFeature", false},
    {"intSetting", 5},
    {"doubleSetting", 3.14},
    {"stringSetting", "test"},
};

IConfigCatClient client = ConfigCatClient.Get("localhost", options =>
{
    options.FlagOverrides = FlagOverrides.LocalDictionary(dictionary, OverrideBehaviour.LocalOnly);
});
```

## Logging[â](#logging "Direct link to Logging")

### Setting log level[â](#setting-log-level "Direct link to Setting log level")

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#");

client.LogLevel = LogLevel.Info;
```

Available log levels:

| Level   | Description                                             |
| ------- | ------------------------------------------------------- |
| Off     | Nothing is logged.                                      |
| Error   | Only error level events are logged.                     |
| Warning | Default. Errors and Warnings are logged.                |
| Info    | Errors, Warnings and feature flag evaluation is logged. |
| Debug   | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat.INFO  [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'False' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'True' => MATCH, applying rule
  Returning 'True'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

By default, the SDK logs to [the console's standard output](https://learn.microsoft.com/en-us/dotnet/api/system.console.out) but it also allows you to inject any custom logger implementation via the `ConfigCatClientOptions.Logger` property.

Sample code on how to create a basic file logger implementation for ConfigCat client: [See Sample Code](https://github.com/configcat/.net-sdk/blob/master/samples/FileLoggerSample.cs)

Another sample which shows how to implement an adapter to [the built-in logging framework](https://learn.microsoft.com/en-us/aspnet/core/fundamentals/logging) of .NET Core/.NET 5+: [See Sample Code](https://github.com/configcat/.net-sdk/blob/master/samples/ASP.NETCore/WebApplication/Adapters/ConfigCatToMSLoggerAdapter.cs)

### Log Filtering[â](#log-filtering "Direct link to Log Filtering")

You can define a custom log filter by providing a callback function via the `ConfigCatClientOptions.LogFilter` property. The callback will be called by the *ConfigCat SDK* each time a log event occurs (and the event passes the minimum log level specified by the `IConfigCatLogger.LogLevel` property). That is, the callback allows you to filter log events by `level`, `eventId`, `message` or `exception`. The formatted message string can be obtained via `message.InvariantFormattedMessage`. If the callback function returns `true`, the event will be logged, otherwise it will be skipped.

```
// Filter out events with id 1001 from the log.
LogFilterCallback logFilter = (LogLevel level, LogEventId eventId, ref FormattableLogMessage message, Exception? exception) => eventId != 1001;

var client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options => options.LogFilter = logFilter);
```

caution

Please make sure that your log filter logic doesn't perform heavy computation and doesn't block the executing thread. A complex or incorrectly implemented log filter can degrade the performance of the SDK.

## `GetAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `GetAllKeysAsync()` method of the `ConfigCatClient`.

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#");
IEnumerable<string> keys = await client.GetAllKeysAsync();
```

## `GetAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#");
IDictionary<string, object> settingValues = await client.GetAllValuesAsync();

// invoke with User Object
User userObject = new User("#UNIQUE-USER-IDENTIFIER#");
IDictionary<string, object> settingValuesTargeting = await client.GetAllValuesAsync(userObject);
```

## `GetAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#");
IReadOnlyList<EvaluationDetails> settingValues = await client.GetAllValueDetailsAsync();

// invoke with User Object
User userObject = new User("435170f4-8a8b-4b67-a723-505ac7cdea92");
IReadOnlyList<EvaluationDetails> settingValuesTargeting = await client.GetAllValueDetailsAsync(userObject);
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/.net-sdk/blob/master/src/ConfigCatClient/Cache/IConfigCatCache.cs) interface and set the `ConfigCache` parameter in the setup callback of `ConfigCatClient.Get`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
public class MyCustomCache : IConfigCatCache
{
    public string? Get(string key)
    {
        /* insert your synchronous cache read logic here */
    }

    public Task<string?> GetAsync(string key, CancellationToken cancellationToken = default)
    {
        /* insert your asynchronous cache read logic here */
    }

    public void Set(string key, string value)
    {
        /* insert your synchronous cache write logic here */
    }

    public Task SetAsync(string key, string value, CancellationToken cancellationToken = default)
    {
        /* insert your asynchronous cache write logic here */
    }
}
```

then

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
{
    options.ConfigCache = new MyCustomCache()
});
```

info

The .NET SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Using ConfigCat behind a proxy[â](#using-configcat-behind-a-proxy "Direct link to Using ConfigCat behind a proxy")

Provide your own network credentials (username/password) and proxy server settings (proxy server/port) by setting the `HttpClientHandler` property in the setup callback of `ConfigCatClient.Get`.

```
var myProxySettings = new WebProxy(proxyHost, proxyPort)
{
    UseDefaultCredentials = false,
    Credentials = new NetworkCredential(proxyUserName, proxyPassword)
};

var myHttpClientHandler = new HttpClientHandler { Proxy = myProxySettings };

IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
{
    options.HttpClientHandler = myHttpClientHandler;
});
```

## HTTP Timeout[â](#http-timeout "Direct link to HTTP Timeout")

You can set the maximum wait time for a ConfigCat HTTP response.

```
IConfigCatClient client = ConfigCatClient.Get("#YOUR-SDK-KEY#", options =>
{
    options.HttpTimeout = TimeSpan.FromSeconds(10);
});
```

The default timeout is 30 seconds.

## Platform compatibility[â](#platform-compatibility "Direct link to Platform compatibility")

The *ConfigCat SDK* supports all the widespread .NET JIT runtimes, everything that implements [.NET Standard 2.0](https://learn.microsoft.com/en-us/dotnet/standard/net-standard?tabs=net-standard-2-0)+ and supports TLS 1.2 should work. Starting with v9.3.0, it can also be used in applications that employ [trimmed self-contained](https://learn.microsoft.com/en-us/dotnet/core/deploying/trimming/trim-self-contained) or various [ahead-of-time (AOT) compilation](https://en.wikipedia.org/wiki/Ahead-of-time_compilation) deployment models.

Based on our tests, the SDK is compatible with the following runtimes/deployment models:

* .NET Framework 4.5+ (including Ngen)
* .NET Core 3.1, .NET 5+ (including Crossgen2/ReadyToRun and Native AOT)
* Mono 5.10+
* .NET for Android (formerly known as Xamarin.Android)
* .NET for iOS (formerly known as Xamarin.iOS)
* Unity 2021.3+ (Mono JIT)
* Unity 2021.3+ (IL2CPP)\*
* Universal Windows Platform 10.0.16299.0+ (.NET Native)\*\*
* WebAssembly (Mono AOT/Emscripten, also known as wasm-tools)

\*Unity WebGL also works but needs a bit of extra effort: you will need to enable WebGL compatibility by calling the `ConfigCatClient.PlatformCompatibilityOptions.EnableUnityWebGLCompatibility` method. For more details, see [Sample Scripts](https://github.com/configcat/.net-sdk/tree/master/samples/UnityWebGL).<br />\*\*To make the SDK work in Release builds on UWP, you will need to add `<Namespace Name="System.Text.Json.Serialization.Converters" Browse="Required All"/>` to your application's [.rd.xml](https://learn.microsoft.com/en-us/windows/uwp/dotnet-native/runtime-directives-rd-xml-configuration-file-reference) file. See also [this discussion](https://github.com/dotnet/runtime/issues/29912#issuecomment-638471351).

info

We strive to provide an extensive support for the various .NET runtimes and versions. If you still encounter an issue with the SDK on some platform, please open a [GitHub issue](https://github.com/configcat/.net-sdk/issues/new/choose) or [contact support](https://configcat.com/support).

## Troubleshooting[â](#troubleshooting "Direct link to Troubleshooting")

When the *ConfigCat SDK* does not work as expected in your application, please check for the following potential problems:

* **Symptom:** Instead of the actual value, the default one is constantly returned by `GetValueAsync()` and the log contains the following message (provided that the client is set up to log error level events as described [here](#logging)): "Secure connection could not be established. Please make sure that your application is enabled to use TLS 1.2+."

  **Problem:** ConfigCat CDN servers require TLS 1.2 or newer security protocol for communication. As for allowed security protocols, please keep in mind that newer .NET runtimes rely on operating system settings, older versions, however, may need additional setup to make secure communication with the CDN servers work.

  | Runtime Version                              | Default Protocols      |
  | -------------------------------------------- | ---------------------- |
  | .NET Framework 4.5 and earlier               | SSL 3.0, TLS 1.0       |
  | .NET Framework 4.6                           | TLS 1.0, 1.1, 1.2, 1.3 |
  | .NET Framework 4.7+, .NET Core 1.0+, .NET 5+ | System (OS) Defaults   |

  As shown in the table above, if your application runs on .NET Framework 4.5, by default it will fail to establish a connection to the CDN servers. Read [this](https://stackoverflow.com/a/58195987/8656352) for more details.

  **Solution**: The best solution to the problem is to upgrade your application to target a newer runtime but in case that is not possible, you can use the following workaround:

  ```
  ServicePointManager.SecurityProtocol |= SecurityProtocolType.Tls12;
  ```

  (Place this code at the startup of your application, **before** any instances of `ConfigCatClient` is created.)

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

Check out our Sample Applications how they use the *ConfigCat SDK*:

* [Sample Console App](https://github.com/configcat/.net-sdk/tree/master/samples/ConsoleApp)
* [Sample Multi-page Web App (ASP.NET Core MVC)](https://github.com/configcat/.net-sdk/tree/master/samples/ASP.NETCore)
* [Sample Single-page Web App (ASP.NET Core Blazor WebAssembly)](https://github.com/configcat/.net-sdk/tree/master/samples/BlazorWasm)
* [Sample Mobile/Windows Store App (.NET MAUI)](https://github.com/configcat/.net-sdk/tree/master/samples/MAUI)

## Guides[â](#guides "Direct link to Guides")

See the following guides on how to use ConfigCat's .NET SDK:

* [.NET 6](https://configcat.com/blog/2022/11/25/feature-flags-in-net6/)
* [ASP.NET Core](https://configcat.com/blog/2021/10/10/aspnetcore-options-pattern/)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat .NET SDK on GitHub](https://github.com/configcat/.net-sdk)
* [ConfigCat .NET SDK on nuget.org](https://www.nuget.org/packages/ConfigCat.Client)


---

# Elixir SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/elixir-sdk.svg?style=social)](https://github.com/configcat/elixir-sdk/stargazers) [![Elixir CI](https://github.com/configcat/elixir-sdk/actions/workflows/elixir-ci.yml/badge.svg?branch=main)](https://github.com/configcat/elixir-sdk/actions/workflows/elixir-ci.yml) [![Coverage Status](https://codecov.io/github/configcat/elixir-sdk/badge.svg?branch=main)](https://codecov.io/github/configcat/elixir-sdk?branch=main) [![Hex.pm](https://img.shields.io/hexpm/v/configcat.svg?style=circle)](https://hex.pm/packages/configcat) [![HexDocs.pm](https://img.shields.io/badge/hex-docs-lightgreen.svg)](https://hexdocs.pm/configcat/) [![Hex.pm](https://img.shields.io/hexpm/dt/configcat.svg?style=circle)](https://hex.pm/packages/configcat) [![Hex.pm](https://img.shields.io/hexpm/l/configcat.svg)](https://hex.pm/packages/configcat) [![Last Updated](https://img.shields.io/github/last-commit/configcat/elixir-sdk.svg)](https://github.com/configcat/elixir-sdk/commits/main)

[ConfigCat Elixir SDK on GitHub](https://github.com/configcat/elixir-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Add `configcat` to your list of dependencies in `mix.exs`[â](#1-add-configcat-to-your-list-of-dependencies-in-mixexs "Direct link to 1-add-configcat-to-your-list-of-dependencies-in-mixexs")

```
def deps do
  [
    {:configcat, "~> 4.0.0"}
  ]
end
```

### 2. Add `ConfigCat` to your application Supervisor tree[â](#2-add-configcat-to-your-application-supervisor-tree "Direct link to 2-add-configcat-to-your-application-supervisor-tree")

```
def start(_type, _args) do
  children = [
    {ConfigCat, [sdk_key: "#YOUR-SDK-KEY#"]},
    MyApp
  ]

  opts = [strategy: :one_for_one, name: MyApp.Supervisor]
  Supervisor.start_link(children, opts)
end
```

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

```
isMyAwesomeFeatureEnabled = ConfigCat.get_value("isMyAwesomeFeatureEnabled", false)
if isMyAwesomeFeatureEnabled do
  do_the_new_thing()
else
  do_the_old_thing()
end
```

## Setting up the *ConfigCat Client*[â](#setting-up-the-configcat-client "Direct link to setting-up-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`{ConfigCat, options}` returns a client with default options.

| Properties                     | Description                                                                                                                                                                                                                                                                                                                                                    |
| ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `sdk_key`                      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from the *ConfigCat Dashboard*.                                                                                                                                                                                                                                                        |
| `base_url`                     | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                                                |
| `data_governance`              | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. Defaults to `:global`. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `:global`, `:eu_only`.                                  |
| `cache_policy`                 | `CachePolicy.auto/1`, `CachePolicy.lazy/1` and `CachePolicy.manual/0`. Defaults to: `CachePolicy.auto/0` See [See below](#polling-modes) for details.                                                                                                                                                                                                          |
| `cache`                        | Caching module you want `configcat` to use. Defaults to: `ConfigCat.InMemoryCache`. [More about cache](#custom-cache-behaviour-with-cache-option-parameter).                                                                                                                                                                                                   |
| `http_proxy`                   | Specify this option if you need to use a proxy server to access your ConfigCat settings. You can provide a simple URL, like `https://my_proxy.example.com` or include authentication information, like `https://user:password@my_proxy.example.com/`.                                                                                                          |
| `connect_timeout_milliseconds` | Timeout for establishing a TCP or SSL connection, in milliseconds. Default is 8000.                                                                                                                                                                                                                                                                            |
| `read_timeout_milliseconds`    | Timeout for receiving an HTTP response from the socket, in milliseconds. Default is 5000.                                                                                                                                                                                                                                                                      |
| `flag_overrides`               | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides)                                                                                                                                                                                                                                                                   |
| `default_user`                 | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                                               |
| `offline`                      | Defaults to `false`. Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                                        |
| `hooks`                        | Used to subscribe events that the SDK sends in specific scenarios. [More about hooks](#hooks).                                                                                                                                                                                                                                                                 |
| `name`                         | A unique identifier for this instance of `ConfigCat`. Defaults to `ConfigCat`. Must be provided if you need to run more than one instance of `ConfigCat` in the same application. If you provide a `name`, you must then pass that name to all of the API functions using the `client` option. [More about multiple instances](#multiple-configcat-instances). |

## Anatomy of `get_value()`[â](#anatomy-of-get_value "Direct link to anatomy-of-get_value")

| Parameters      | Description                                                                                                                                                       |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`           | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                                       |
| `default_value` | **REQUIRED.** This value will be returned in case of an error.                                                                                                    |
| `user`          | Optional, *ConfigCat.User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |
| `client`        | If you are running multiple instances of `ConfigCat`, provide the `client: :unique_name` option, specifying the name of the instance which you want to access.    |

```
value = ConfigCat.get_value(
  "keyOfMySetting", # Setting Key
  false, # Default value
  ConfigCat.User.new("#UNIQUE-USER-IDENTIFIER#") # Optional User Object
)
```

## Anatomy of `get_value_details()`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`get_value_details()` is similar to `get_value()` but instead of returning the evaluated value only, it gives more detailed information about the evaluation result.

| Parameters      | Description                                                                                                                                                    |
| --------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`           | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                                    |
| `default_value` | **REQUIRED.** This value will be returned in case of an error.                                                                                                 |
| `user`          | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md)        |
| `client`        | If you are running multiple instances of `ConfigCat`, provide the `client: :unique_name` option, specifying the name of the instance which you want to access. |

```
details = ConfigCat.get_value_details(
  "keyOfMySetting", # Setting Key
  false, # Default value
  ConfigCat.User.new("#UNIQUE-USER-IDENTIFIER#") # Optional User Object
)
```

The `details` result contains the following information:

| Field                       | Description                                                                                                |
| --------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `value`                     | The evaluated value of the feature flag or setting.                                                        |
| `key`                       | The key of the evaluated feature flag or setting.                                                          |
| `default_value?`            | True when the default value passed to `get_value_details()` is returned due to an error.                   |
| `error`                     | In case of an error, this field contains the error message.                                                |
| `user`                      | The User Object that was used for evaluation.                                                              |
| `matched_targeting_rule`    | The targeting rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matched_percentage_option` | The percentage option (if any) that was used to select the evaluated value.                                |
| `fetch_time`                | The last download time (UTC DateTime) of the current config.                                               |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
user_object = ConfigCat.User.new("#UNIQUE-USER-IDENTIFIER#")
user_object = ConfigCat.User.new("john@example.com")
```

| Parameters   | Description                                                                                                                |
| ------------ | -------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `String` value, even an email address.           |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                  |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                  |
| `custom`     | Optional `Map` for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

```
user_object = ConfigCat.User.new("#UNIQUE-USER-IDENTIFIER#", email: "john@example", country: "United Kingdom",
                custom: %{SubscriptionType: "Pro", UserRole: "Admin"})
```

The `custom` dictionary also allows attribute values other than `String` values:

```
user_object = ConfigCat.User.new(
    "#UNIQUE-USER-IDENTIFIER#",
    custom: %{
        "Rating" => 4.5,
        "RegisteredAt" => ~U[2023-09-19T11:01:35.999Z],
        "Roles" => [ "Role1", "Role2" ]
    }
)
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `String` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS\_ONE\_OF, etc.)

* accept `String` values,
* all other values are automatically converted to `String` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS\_ONE\_OF\_SEMVER, LESS\_THAN\_SEMVER, GREATER\_THAN\_SEMVER, etc.)

* accept `String` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (EQUALS\_NUMBER, LESS\_THAN\_NUMBER, GREATER\_THAN\_OR\_EQUAL\_NUMBER, etc.)

* accept `Float` values and all other numeric values which can safely be converted to `Float`,
* accept `String` values containing a properly formatted, valid `Float` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE\_DATETIME / AFTER\_DATETIME)

* accept `DateTime` and `NaiveDateTime` values, which are automatically converted to a second-based Unix timestamp (`NaiveDateTime` values are considered to be in UTC),
* accept `Float` values representing a second-based Unix timestamp and all other numeric values which can safely be converted to `Float`,
* accept `String` values containing a properly formatted, valid `Float` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY\_CONTAINS\_ANY\_OF / ARRAY\_NOT\_CONTAINS\_ANY\_OF)

* accept arrays of `String`,
* accept `String` values containing a valid JSON string which can be deserialized to an array of `String`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object either on SDK initialization:

```
{ConfigCat, [
  sdk_key: "#YOUR-SDK-KEY#",
  default_user: ConfigCat.User.new("john@example.com")
]}
```

or with the `set_default_user` method of the ConfigCat client.

```
ConfigCat.set_default_user(ConfigCat.User.new("john@example.com"))
```

Whenever the `get_value`, `get_value_details`, `get_variation_id`, `get_all_variation_ids`, or `get_all_values` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
{ConfigCat, [
  sdk_key: "#YOUR-SDK-KEY#",
  default_user: ConfigCat.User.new("john@example.com")
]}
```

```
# The default user will be used in the evaluation process.
value = ConfigCat.get_value("keyOfMySetting", false)
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

```
other_user = ConfigCat.User.new("brian@example.com")
# otherUser will be used in the evaluation process.
value = ConfigCat.get_value("keyOfMySetting", false, other_user)
```

For deleting the default user, you can do the following:

```
ConfigCat.clear_default_user()
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `get_value()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `poll_interval_seconds` option parameter to change the polling interval.

```
{ConfigCat, [
  sdk_key: "#YOUR-SDK-KEY#",
  cache_policy: ConfigCat.CachePolicy.auto(poll_interval_seconds: 60)
]},
```

Available options:

| Option Parameter             | Description                                                                                          | Default |
| ---------------------------- | ---------------------------------------------------------------------------------------------------- | ------- |
| `poll_interval_seconds`      | Polling interval.                                                                                    | 60      |
| `max_init_wait_time_seconds` | Maximum waiting time between the client initialization and the first config acquisition in secconds. | 5       |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `get_value()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `get_value()` will return the setting value after the cache is updated.

Use `cache_refresh_interval_seconds` option parameter to set cache lifetime.

```
{ConfigCat, [
  sdk_key: "#YOUR-SDK-KEY#",
  cache_policy: ConfigCat.CachePolicy.lazy(cache_refresh_interval_seconds: 300)
]}
```

Available options:

| Option Parameter                 | Description | Default |
| -------------------------------- | ----------- | ------- |
| `cache_refresh_interval_seconds` | Cache TTL.  | 60      |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `force_refresh()` is your application's responsibility.

```
ConfigCat.force_refresh()
```

> `get_value()` returns `default_value` if the cache is empty. Call `force_refresh()` to update the cache.

```
value = ConfigCat.get_value("key", "my default value") # Returns "my default value"
ConfigCat.force_refresh()
value = ConfigCat.get_value("key", "my default value") # Returns "value from server"
```

### Custom cache behaviour with `cache:` option parameter[â](#custom-cache-behaviour-with-cache-option-parameter "Direct link to custom-cache-behaviour-with-cache-option-parameter")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`ConfigCache`](https://github.com/configcat/elixir-sdk/blob/main/lib/config_cat/config_cache.ex) behaviour and provide the `cache` option when initializing the SDK. This allows you to integrate ConfigCat with your existing caching infrastructure seamlessly.

To be able to customize the caching layer, you need to implement the `ConfigCat.ConfigCache` behaviour:

```
defmodule MyApp.CustomConfigCache do
  alias ConfigCat.ConfigCache

  @behaviour ConfigCache

  @impl ConfigCache
  def get(cache_key) do
    # here you have to return with the cached value
  end

  @impl ConfigCache
  def set(cache_key, value) do
    # here you have to store the new value in the cache
  end
end
```

Then use your custom cache implementation:

```
{ConfigCat, [
  sdk_key: "#YOUR-SDK-KEY#",
  cache: MyApp.CustomConfigCache
]}
```

info

The Elixir SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

### Multiple `ConfigCat` instances[â](#multiple-configcat-instances "Direct link to multiple-configcat-instances")

If you need to run more than one instance of `ConfigCat`, there are two ways you can do it.

#### Module-Based[â](#module-based "Direct link to Module-Based")

You can create a module that uses ConfigCat and then call the ConfigCat API functions on that module. This is the recommended option, as it makes the calling code a bit clearer and simpler.<br /><!-- -->You can pass any of the options listed above as arguments to `use ConfigCat` or specify them in your supervisor. Arguments specified by the supervisor take precedence over those provided to `use ConfigCat`.

```
# lib/my_app/first_flags.ex
defmodule MyApp.FirstFlags do
  use ConfigCat, sdk_key: "sdk_key_1"
end

# lib/my_app/second_flags.ex
defmodule MyApp.SecondFlags do
  use ConfigCat, sdk_key: "sdk_key_2"
end

# lib/my_app/application.ex
def start(_type, _args) do
  children = [
    # ... other children ...
    FirstFlags,
    SecondFlags,
  ]

  opts = [strategy: :one_for_one, name: MyApp.Supervisor]
  Supervisor.start_link(children, opts)
end

# Calling code:
FirstFlags.get_value("someKey", "default value")
SecondFlags.get_value("otherKey", "other default")
```

#### Explicit Client[â](#explicit-client "Direct link to Explicit Client")

If you prefer not to use the module-based solution, you can instead add multiple `ConfigCat` children to your application's supervision tree. You will need to give `ConfigCat` a unique `name` option for each, as well as using `Supervisor.child_spec/2` to provide a unique `id` for each instance. When calling the ConfigCat API functions, you'll pass a `client:` keyword argument with the unique `name` you gave to that instance.

```
# lib/my_app/application.ex
def start(_type, _args) do
  children = [
    # ... other children ...
    Supervisor.child_spec({ConfigCat, [sdk_key: "sdk_key_1", name: :first]}, id: :config_cat_1),
    Supervisor.child_spec({ConfigCat, [sdk_key: "sdk_key_2", name: :second]}, id: :config_cat_2),
  ]

  opts = [strategy: :one_for_one, name: MyApp.Supervisor]
  Supervisor.start_link(children, opts)
end

# Calling code:
ConfigCat.get_value("someKey", "default value", client: :first)
ConfigCat.get_value("otherKey", "other default", client: :second)
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `on_client_ready`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after instantiation.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `max_init_wait_time_seconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. Alternatively, in Auto Polling mode, you can wait for the first `onConfigChanged` event to be notified when the internal cache is actually populated with config data.

* `on_config_changed(config: map())`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `on_flag_evaluated(evaluation_details: EvaluationDetails.t())`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`get_value_details`](#anatomy-of-getvaluedetails).

* `on_error(error: String.t())`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on SDK initialization:

```
def on_flag_evaluated(evaluation_details) do
  # handle the event
end

{ConfigCat, [
  sdk_key: "#YOUR-SDK-KEY#",
  hooks: [on_flag_evaluated: {__MODULE__, :on_flag_evaluated, []}]
]}
```

or with the `Hooks` property of the ConfigCat client:

```
ConfigCat.Hooks.add_on_flag_evaluated({__MODULE__, :on_flag_evaluated, []})
```

A hook callback is either an anonymous function or a module/function name/extra\_arguments tuple. Each callback is passed specific arguments. These specific arguments are prepended to the extra arguments provided in the tuple (if any). For example, you might want to define a callback that sends a message to another process which the config changes. You can pass the pid of that process as an extra argument:

```
def MyModule do
  def subscribe_to_config_changes(subscriber_pid) do
    ConfigCat.hooks()
    |> ConfigCat.Hooks.add_on_config_changed({__MODULE__, :on_config_changed, [subscriber_pid]})
  end
  def on_config_changed(config, pid) do
    send pid, {:config_changed, config}
  end
end
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

```
ConfigCat.set_offline()
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

```
ConfigCat.set_online()
```

> With `ConfigCat.offline?` you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`:local_only`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`:local_over_remote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`:remote_over_local`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a file or a map.

### JSON File[â](#json-file "Direct link to JSON File")

The SDK can load your feature flag & setting overrides from a file.

#### File[â](#file "Direct link to File")

```
{ConfigCat, [
  sdk_key: "#YOUR-SDK-KEY#",
  flag_overrides: ConfigCat.LocalFileDataSource.new(
    "path/to/the/local_flags.json",  # path to the file
    :local_only  # local/offline mode
  )
]}
```

#### JSON File Structure[â](#json-file-structure "Direct link to JSON File Structure")

The SDK supports 2 types of JSON structures to describe feature flags & settings.

##### 1. Simple (key-value) structure[â](#1-simple-key-value-structure "Direct link to 1. Simple (key-value) structure")

```
{
  "flags": {
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
  }
}
```

##### 2. Complex (full-featured) structure[â](#2-complex-full-featured-structure "Direct link to 2. Complex (full-featured) structure")

This is the same format that the SDK downloads from the ConfigCat CDN. It allows the usage of all features that are available on the ConfigCat Dashboard.

You can download your current config JSON from ConfigCat's CDN and use it as a baseline.

A convenient way to get the config JSON for a specific SDK Key is to install the [ConfigCat CLI](https://github.com/configcat/cli) tool and execute the following command:

```
configcat config-json get -f v6 -p {YOUR-SDK-KEY} > config.json
```

(Depending on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings, you may need to add the `--eu` switch.)

Alternatively, you can download the config JSON manually, based on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings:

* GLOBAL: `https://cdn-global.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`
* EU: `https://cdn-eu.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`

```
{
  "p": {
    // hash salt, required only when confidential text comparator(s) are used
    "s": "80xCU/SlDz1lCiWFaxIBjyJeJecWjq46T4eu6GtozkM="
  },
  "s": [ // array of segments
    {
      "n": "Beta Users", // segment name
      "r": [ // array of User Conditions (there is a logical AND relation between the elements)
        {
          "a": "Email", // comparison attribute
          "c": 0, // comparator (see below)
          "l": [ // comparison value (see below)
            "john@example.com", "jane@example.com"
          ]
        }
      ]
    }
  ],
  "f": { // key-value map of feature flags & settings
    "isFeatureEnabled": { // key of a particular flag / setting
      "t": 0, // setting type, possible values:
              // 0 -> on/off setting (feature flag)
              // 1 -> text setting
              // 2 -> whole number setting
              // 3 -> decimal number setting
      "r": [ // array of Targeting Rules (there is a logical OR relation between the elements)
        {
          "c": [ // array of conditions (there is a logical AND relation between the elements)
            {
              "u": { // User Condition
                "a": "Email", // comparison attribute
                "c": 2, // comparator, possible values and required comparison value types:
                        // 0  -> IS ONE OF (cleartext) + string array comparison value ("l")
                        // 1  -> IS NOT ONE OF (cleartext) + string array comparison value ("l")
                        // 2  -> CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 3  -> NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 4  -> IS ONE OF (semver) + semver string array comparison value ("l")
                        // 5  -> IS NOT ONE OF (semver) + semver string array comparison value ("l")
                        // 6  -> < (semver) + semver string comparison value ("s")
                        // 7  -> <= (semver + semver string comparison value ("s")
                        // 8  -> > (semver) + semver string comparison value ("s")
                        // 9  -> >= (semver + semver string comparison value ("s")
                        // 10 -> = (number) + number comparison value ("d")
                        // 11 -> <> (number + number comparison value ("d")
                        // 12 -> < (number) + number comparison value ("d")
                        // 13 -> <= (number + number comparison value ("d")
                        // 14 -> > (number) + number comparison value ("d")
                        // 15 -> >= (number) + number comparison value ("d")
                        // 16 -> IS ONE OF (hashed) + string array comparison value ("l")
                        // 17 -> IS NOT ONE OF (hashed) + string array comparison value ("l")
                        // 18 -> BEFORE (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 19 -> AFTER (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 20 -> EQUALS (hashed) + string comparison value ("s")
                        // 21 -> NOT EQUALS (hashed) + string comparison value ("s")
                        // 22 -> STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 23 -> NOT STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 24 -> ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 25 -> NOT ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 26 -> ARRAY CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 27 -> ARRAY NOT CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 28 -> EQUALS (cleartext) + string comparison value ("s")
                        // 29 -> NOT EQUALS (cleartext) + string comparison value ("s")
                        // 30 -> STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 31 -> NOT STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 32 -> ENDS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 33 -> NOT ENDS WITH ANY OF (cleartext + string array comparison value ("l")
                        // 34 -> ARRAY CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 35 -> ARRAY NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                "l": [ // comparison value - depending on the comparator, another type of value may need
                       // to be specified (see above):
                       // "s": string
                       // "d": number
                  "@example.com"
                ]
              }
            },
            {
              "p": { // Flag Condition (Prerequisite)
                "f": "mainIntFlag", // key of prerequisite flag
                "c": 0, // comparator, possible values: 0 -> EQUALS, 1 -> NOT EQUALS
                "v": { // comparison value (value's type must match the prerequisite flag's type)
                  "i": 42
                }
              }
            },
            {
              "s": { // Segment Condition
                "s": 0, // segment index, a valid index into the top-level segment array ("s")
                "c": 1 // comparator, possible values: 0 -> IS IN SEGMENT, 1 -> IS NOT IN SEGMENT
              }
            }
          ],
          "s": { // alternatively, an array of Percentage Options ("p", see below) can also be specified
            "v": { // the value served when the rule is selected during evaluation
              "b": true
            },
            "i": "bcfb84a7"
          }
        }
      ],
      "p": [ // array of Percentage Options
        {
          "p": 10, // % value
          "v": { // the value served when the Percentage Option is selected during evaluation
            "b": true
          },
          "i": "bcfb84a7"
        },
        {
          "p": 90,
          "v": {
            "b": false
          },
          "i": "bddac6ae"
        }
      ],
      "v": { // fallback value, served when none of the Targeting Rules match,
             // no Percentage Options are defined or evaluation of these is not possible
        "b": false // depending on the setting type, another type of value may need to be specified:
                   // text setting -> "s": string
                   // whole number setting -> "i": number
                   // decimal number setting -> "d": number
      },
      "i": "430bded3" // variation id (for analytical purposes)
    }
  }
}
```

For a more comprehensive specification of the config JSON v6 format, you may refer to [this JSON schema document](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

### Map[â](#map "Direct link to Map")

You can set up the SDK to load your feature flag & setting overrides from a map.

```
map = %{
  "enabledFeature" => true,
  "disabledFeature" => false,
  "intSetting" => 5,
  "doubleSetting" => 3.14,
  "stringSetting" => "test"
}

{ConfigCat, [
  sdk_key: "#YOUR-SDK-KEY#",
  flag_overrides: ConfigCat.LocalMapDataSource.new(map, :local_only)
]}
```

## Logging[â](#logging "Direct link to Logging")

In the *ConfigCat SDK*, we use the default Elixir's [Logger](https://hexdocs.pm/logger/Logger.html) so you can customise as you like.

Debug level logging helps to inspect how a feature flag was evaluated:

```
[debug] [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

The following example shows how to set the *Log Level* on the internal *ConfigCat* logger. Set the log level of the module with [put\_module\_level/2](https://hexdocs.pm/logger/1.15.6/Logger.html#put_module_level/2) function. Put the following code into your application.ex file and run it on start:

```
defp set_config_cat_log_level do
  :configcat
  |> Application.spec(:modules)
  |> Logger.put_module_level(:debug)
end
```

On Elixir 1.13 or later you can use [put\_application\_level/2](https://hexdocs.pm/logger/1.15.6/Logger.html#put_application_level/2) function which is equivalent to the code above.

## `get_all_keys()`[â](#get_all_keys "Direct link to get_all_keys")

You can get the keys for all available feature flags and settings by calling the `get_all_keys()` method.

```
keys = ConfigCat.get_all_keys()
```

## `get_all_values()`[â](#get_all_values "Direct link to get_all_values")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
values = ConfigCat.get_all_values(
  ConfigCat.User.new("#UNIQUE-USER-IDENTIFIER#")  # Optional User Object
)
```

## `get_all_value_details()`[â](#get_all_value_details "Direct link to get_all_value_details")

Evaluates and returns the detailed values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
all_value_details = ConfigCat.get_all_value_details(
  ConfigCat.User.new("#UNIQUE-USER-IDENTIFIER#")  # Optional User Object
)
```

## Using ConfigCat behind a proxy[â](#using-configcat-behind-a-proxy "Direct link to Using ConfigCat behind a proxy")

Provide your own network credentials (username/password), and proxy server settings (proxy server/port) by passing the proxy details to the creator method.

```
{ConfigCat, [
    sdk_key: "#YOUR-SDK-KEY#",
    http_proxy: "https://user@pass:yourproxy.com"
]}
```

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

* [Sample App](https://github.com/configcat/elixir-sdk/tree/main/samples)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat's Elixir SDK on GitHub](https://github.com/configcat/elixir-sdk)
* [ConfigCat's HexDocs](https://hexdocs.pm/configcat)
* [ConfigCat's Elixir SDK on Hex.pm](https://hex.pm/packages/configcat)


---

# Go SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/go-sdk.svg?style=social)](https://github.com/configcat/go-sdk/stargazers) [![Build Status](https://github.com/configcat/go-sdk/actions/workflows/go-ci.yml/badge.svg?branch=v9)](https://github.com/configcat/go-sdk/actions/workflows/go-ci.yml) [![Go Report Card](https://goreportcard.com/badge/github.com/configcat/go-sdk/v9)](https://goreportcard.com/report/github.com/configcat/go-sdk/v9) [![GoDoc](https://godoc.org/github.com/configcat/go-sdk?status.svg)](https://pkg.go.dev/github.com/configcat/go-sdk/v9) [![Sonar Coverage](https://img.shields.io/sonar/coverage/configcat_go-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_go-sdk) [![Sonar Quality Gate](https://img.shields.io/sonar/quality_gate/configcat_go-sdk?logo=sonarcloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_go-sdk)

[ConfigCat Go SDK on GitHub](https://github.com/configcat/go-sdk)

## Getting Started[â](#getting-started "Direct link to Getting Started")

### 1. Get the SDK with `go`[â](#1-get-the-sdk-with-go "Direct link to 1-get-the-sdk-with-go")

```
go get github.com/configcat/go-sdk/v9
```

### 2. Import the ConfigCat package[â](#2-import-the-configcat-package "Direct link to 2. Import the ConfigCat package")

```
import "github.com/configcat/go-sdk/v9"
```

### 3. Create the *ConfigCat* client with your *SDK Key*[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3-create-the-configcat-client-with-your-sdk-key")

```
client := configcat.NewClient("#YOUR-SDK-KEY#")
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

```
isMyAwesomeFeatureEnabled := client.GetBoolValue("isMyAwesomeFeatureEnabled", false, nil)
if isMyAwesomeFeatureEnabled {
    doTheNewThing()
} else {
    doTheOldThing()
}
```

### 5. Stop *ConfigCat* client[â](#5-stop-configcat-client "Direct link to 5-stop-configcat-client")

You can safely shut down the client instance and release all associated resources on application exit.

```
client.Close()
```

## Creating the *ConfigCat Client*[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.NewClient(<sdkKey>)` returns a client with default options.

| Arguments | Description                                                                               |
| --------- | ----------------------------------------------------------------------------------------- |
| `sdkKey`  | SDK Key to access your feature flags and settings. Get it from the *ConfigCat Dashboard*. |

### Custom client options[â](#custom-client-options "Direct link to Custom client options")

`configcat.NewCustomClient(options)` returns a customized client. The `options` parameter is a structure which contains the optional properties.

Available optional properties:

| Properties         | Type                       | Description                                                                                                                                                                                                                                                                                                               |
| ------------------ | -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `SDKKey`           | `string`                   | SDK Key to access your feature flags and settings. Get it from the *ConfigCat Dashboard*.                                                                                                                                                                                                                                 |
| `DataGovernance`   | `configcat.DataGovernance` | Defaults to `Global`. Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `Global`, `EuOnly`. |
| `BaseUrl`          | `string`                   | Sets the CDN base url (forward proxy, dedicated subscription) from where the sdk will download the configurations.                                                                                                                                                                                                        |
| `Cache`            | `ConfigCache`              | Sets a custom cache implementation for the client. [See below](#custom-cache).                                                                                                                                                                                                                                            |
| `NoWaitForRefresh` | `bool`                     | Defaults to `false`. When it's `true` the typed get methods (`Get[TYPE]Value()`) will never wait for a configuration refresh to complete before returning. When it's `false` and `PollingMode` is `AutoPoll`, the first request may block, when `PollingMode` is `Lazy`, any request may block.                           |
| `HttpTimeout`      | `time.Duration`            | Sets the maximum wait time for a HTTP response. [More about the HTTP timeout](#http-timeout)                                                                                                                                                                                                                              |
| `Transport`        | `http.RoundTripper`        | Sets the transport options for the underlying HTTP calls.                                                                                                                                                                                                                                                                 |
| `Logger`           | `configcat.Logger`         | Sets the `Logger` implementation used by the SDK for logging. [More about logging](#logging)                                                                                                                                                                                                                              |
| `LogLevel`         | `configcat.LogLevel`       | Sets the logging verbosity. [More about logging](#logging)                                                                                                                                                                                                                                                                |
| `PollingMode`      | `configcat.PollingMode`    | Defaults to `AutoPoll`. Sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                 |
| `PollInterval`     | `time.Duration`            | Sets after how much time a configuration is considered stale. When `PollingMode` is `AutoPoll` this value is used as the polling rate.                                                                                                                                                                                    |
| `FlagOverrides`    | `*configcat.FlagOverrides` | Sets the local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                    |
| `DefaultUser`      | `configcat.User`           | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                          |
| `Offline`          | `bool`                     | Defaults to `false`. Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                   |
| `Hooks`            | `*configcat.Hooks`         | Used to subscribe events that the SDK sends in specific scenarios. [More about hooks](#hooks).                                                                                                                                                                                                                            |

Then you can pass it to the `NewCustomClient()` method:

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
        PollingMode: configcat.Manual,
        Logger: configcat.DefaultLogger(configcat.LogLevelInfo)})
```

caution

We strongly recommend you to use the *ConfigCat Client* as a Singleton object in your application. If you want to use multiple SDK Keys in the same application, create only one *ConfigCat Client* per SDK Key.

## Anatomy of `Get[TYPE]Value()`[â](#anatomy-of-gettypevalue "Direct link to anatomy-of-gettypevalue")

All feature flag evaluator methods share the same signature, they only differ in their served value type. `GetBoolValue()` is for evaluating feature flags, `GetIntValue()` and `GetFloatValue()` are for numeric and `GetStringValue()` is for textual settings.

| Parameters     | Description                                                                                                                                   |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                          |
| `defaultValue` | This value will be returned in case of an error.                                                                                              |
| `user`         | *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
boolValue := client.GetBoolValue(
    "keyOfMyBoolSetting", // Setting Key
    false, // Default value
    &configcat.UserData{Identifier: "#UNIQUE-USER-IDENTIFIER#"} // User Object
)
```

```
intValue := client.GetIntValue(
    "keyOfMyIntSetting", // Setting Key
    0, // Default value
    &configcat.UserData{Identifier: "#UNIQUE-USER-IDENTIFIER#"} // User Object
)
```

## Anatomy of `Get[TYPE]ValueDetails()`[â](#anatomy-of-gettypevaluedetails "Direct link to anatomy-of-gettypevaluedetails")

`GetValueDetails()` is similar to `GetValue()` but instead of returning the evaluated value only, it gives more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                   |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                          |
| `defaultValue` | This value will be returned in case of an error.                                                                                              |
| `user`         | *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
details := client.GetBoolValueDetails(
    "keyOfMyBoolSetting", // Setting Key
    false, // Default value
    &configcat.UserData{Identifier: "#UNIQUE-USER-IDENTIFIER#"} // User Object
)
```

```
details := client.GetIntValueDetails(
    "keyOfMyIntSetting", // Setting Key
    0, // Default value
    &configcat.UserData{Identifier: "#UNIQUE-USER-IDENTIFIER#"} // User Object
)
```

The `details` result contains the following information:

| Field                          | Type                                  | Description                                                                                                |
| ------------------------------ | ------------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `Value`                        | `bool` / `string` / `int` / `float64` | The evaluated value of the feature flag or setting.                                                        |
| `Data.Key`                     | `string`                              | The key of the evaluated feature flag or setting.                                                          |
| `Data.IsDefaultValue`          | `bool`                                | True when the default value passed to `Get[TYPE]ValueDetails()` is returned due to an error.               |
| `Data.Error`                   | `error`                               | In case of an error, this field contains the error message.                                                |
| `Data.User`                    | `User`                                | The User Object that was used for evaluation.                                                              |
| `Data.MatchedPercentageOption` | `*PercentageOption`                   | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `Data.MatchedTargetingRule`    | `*TargetingRule`                      | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `Data.FetchTime`               | `time.Time`                           | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
user = &configcat.UserData{Identifier: "#UNIQUE-USER-IDENTIFIER#"}
```

```
user = &configcat.UserData{Identifier: "john@example.com"}
```

### Customized User Object creation[â](#customized-user-object-creation "Direct link to Customized User Object creation")

| Arguments    | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `Identifier` | Unique identifier of a user in your application. Can be any value, even an email address.                                       |
| `Email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `Country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `Custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. e.g. User role, Subscription type. |

```
custom := map[string]interface{}
custom["SubscriptionType"] = "Pro"
custom["UserRole"] = "Admin"
user := &configcat.UserData{Identifier: "#UNIQUE-USER-IDENTIFIER#",
            Email: "john@example.com",
            Company: "United Kingdom",
            Custom: custom}
```

The `Custom` dictionary also allows attribute values other than `string` values:

```
registeredAt, _ := time.Parse(time.DateTime, "2023-11-22 12:34:56")
custom := map[string]interface{}
custom["Rating"] = 4.5
custom["RegisteredAt"] = registeredAt
custom["Roles"] = []string{"Role1","Role2"}
user := &configcat.UserData{Identifier: "#UNIQUE-USER-IDENTIFIER#", Custom: custom}
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (`EQUALS`, `IS_ONE_OF`, etc.)

* accept `string` or `[]byte` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (`IS_ONE_OF_SEMVER`, `LESS_THAN_SEMVER`, `GREATER_THAN_SEMVER`, etc.)

* accept `string` or `[]byte` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (`EQUALS_NUMBER`, `LESS_THAN_NUMBER`, `GREATER_THAN_OR_EQUAL_NUMBER`, etc.)

* accept `float64` values and all other numeric values which can safely be converted to `float64`,
* accept `string` or `[]byte` values containing a properly formatted, valid `float64` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (`BEFORE_DATETIME` / `AFTER_DATETIME`)

* accept `time.Time` values, which are automatically converted to a second-based Unix timestamp (`time.Time` values with naive timezone are considered to be in UTC),
* accept `float64` values representing a second-based Unix timestamp and all other numeric values which can safely be converted to `float64`,
* accept `string` or `[]byte` values containing a properly formatted, valid `float64` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (`ARRAY_CONTAINS_ANY_OF` / `ARRAY_NOT_CONTAINS_ANY_OF`)

* accept arrays of `string` (`[]string`),
* accept `string` or `[]byte` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Other options to create a User Object[â](#other-options-to-create-a-user-object "Direct link to Other options to create a User Object")

1. Using a simple `map[string]interface{}`. In this case the passed map is used for looking up the user attributes.

2. Using a custom `struct`. The *ConfigCat SDK* uses reflection to determine what attributes are available on the passed type. You can either implement the `UserAttributes` interface - which's `GetAttribute(string) interface{}` method will be used to retrieve the attributes - or use a pointer to a `struct` which's public fields are treated as user attributes.

If a field's type is `map[string]interface{}`, the map is used to look up any custom attribute not found directly in the struct. There should be at most one of these fields.

Otherwise, a field type must be a numeric type, a `string`, a `[]byte`, a `[]string` or a `time.Time`.

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object on SDK initialization:

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
        DefaultUser: &configcat.UserData{Identifier: "#UNIQUE-USER-IDENTIFIER#"}})
```

Whenever the `Get[TYPE]Value()`, `Get[TYPE]ValueDetails()`, `GetAllValues()`, or `GetAllValueDetails()` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
        DefaultUser: &configcat.UserData{Identifier: "john@example.com"}})

// The default user will be used at the evaluation process.
value := client.GetBoolValue("keyOfMyBoolSetting", false, nil)
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
        DefaultUser: &configcat.UserData{Identifier: "john@example.com"}})

otherUser = &configcat.UserData{Identifier: "brian@example.com"}

// otherUser will be used at the evaluation process.
value := client.GetBoolValue("keyOfMyBoolSetting", false, otherUser)
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `GetValue()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the the `PollInterval` option parameter of the *ConfigCat Client* to change the polling interval.

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
    PollingMode: configcat.AutoPoll,
    PollInterval: time.Second * 120 /* polling interval in seconds */})
```

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `GetBoolValue()`, `GetIntValue()`, `GetFloatValue()` or `GetStringValue()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case, when the `NoWaitForRefresh` option is `false` the new setting value will be returned right after the cache update. When it's set to `true` the setting value retrievals will not wait for the downloads and they will return immediately with the previous setting value.

Use the `PollInterval` option parameter of the *ConfigCat Client* to set the cache TTL.

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
    PollingMode: configcat.Lazy,
    PollInterval: time.Second * 120 /* cache TTL in seconds */})
```

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `Refresh()` is your application's responsibility.

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
    PollingMode: configcat.Manual})

client.Refresh()
```

> The setting value retrieval methods will return `defaultValue` if the cache is empty. Call `Refresh()` to update the cache.

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `OnConfigChanged()`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.
* `OnFlagEvaluated(EvaluationDetails)`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`Get[TYPE]ValueDetails()`](#anatomy-of-gettypevaluedetails).
* `OnError(error)`: This event is emitted when an error occurs within the client.

You can subscribe to these events on SDK initialization:

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
    Hooks: &configcat.Hooks{OnFlagEvaluated: func(details *configcat.EvaluationDetails) {
        /* handle the event */
    }}})
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

```
client.SetOffline()
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

```
client.SetOnline()
```

> With `client.IsOffline()` you can check whether the SDK is in offline mode.

## `GetAllKeys()`[â](#getallkeys "Direct link to getallkeys")

You can get the keys for all available feature flags and settings by calling the `GetAllKeys()` method of the *ConfigCat Client*.

```
client := configcat.NewClient("#YOUR-SDK-KEY#")
keys := client.GetAllKeys()
```

## `GetAllValues()`[â](#getallvalues "Direct link to getallvalues")

Evaluates and returns the values of all feature flags and settings. Passing a User Object is optional.

```
client := configcat.NewClient("#YOUR-SDK-KEY#")
settingValues := client.GetAllValues(nil)

// invoke with User Object
user := &configcat.UserData{Identifier: "#UNIQUE-USER-IDENTIFIER#"}
settingValuesTargeting := client.GetAllValues(user)
```

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can load your feature flag & setting overrides from a file or from a simple `map[string]interface{}` structure.

### JSON File[â](#json-file "Direct link to JSON File")

The SDK can load your feature flag & setting overrides from a file.

```
client := configcat.NewCustomClient(configcat.Config{
    SDKKey: "localhost",
    FlagOverrides: &configcat.FlagOverrides{
        FilePath: "path/to/local_flags.json",
        Behavior: configcat.LocalOnly,
    },
})
```

#### JSON File Structure[â](#json-file-structure "Direct link to JSON File Structure")

The SDK supports 2 types of JSON structures to describe feature flags & settings.

##### 1. Simple (key-value) structure[â](#1-simple-key-value-structure "Direct link to 1. Simple (key-value) structure")

```
{
  "flags": {
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
  }
}
```

##### 2. Complex (full-featured) structure[â](#2-complex-full-featured-structure "Direct link to 2. Complex (full-featured) structure")

This is the same format that the SDK downloads from the ConfigCat CDN. It allows the usage of all features that are available on the ConfigCat Dashboard.

You can download your current config JSON from ConfigCat's CDN and use it as a baseline.

A convenient way to get the config JSON for a specific SDK Key is to install the [ConfigCat CLI](https://github.com/configcat/cli) tool and execute the following command:

```
configcat config-json get -f v6 -p {YOUR-SDK-KEY} > config.json
```

(Depending on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings, you may need to add the `--eu` switch.)

Alternatively, you can download the config JSON manually, based on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings:

* GLOBAL: `https://cdn-global.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`
* EU: `https://cdn-eu.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`

```
{
  "p": {
    // hash salt, required only when confidential text comparator(s) are used
    "s": "80xCU/SlDz1lCiWFaxIBjyJeJecWjq46T4eu6GtozkM="
  },
  "s": [ // array of segments
    {
      "n": "Beta Users", // segment name
      "r": [ // array of User Conditions (there is a logical AND relation between the elements)
        {
          "a": "Email", // comparison attribute
          "c": 0, // comparator (see below)
          "l": [ // comparison value (see below)
            "john@example.com", "jane@example.com"
          ]
        }
      ]
    }
  ],
  "f": { // key-value map of feature flags & settings
    "isFeatureEnabled": { // key of a particular flag / setting
      "t": 0, // setting type, possible values:
              // 0 -> on/off setting (feature flag)
              // 1 -> text setting
              // 2 -> whole number setting
              // 3 -> decimal number setting
      "r": [ // array of Targeting Rules (there is a logical OR relation between the elements)
        {
          "c": [ // array of conditions (there is a logical AND relation between the elements)
            {
              "u": { // User Condition
                "a": "Email", // comparison attribute
                "c": 2, // comparator, possible values and required comparison value types:
                        // 0  -> IS ONE OF (cleartext) + string array comparison value ("l")
                        // 1  -> IS NOT ONE OF (cleartext) + string array comparison value ("l")
                        // 2  -> CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 3  -> NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 4  -> IS ONE OF (semver) + semver string array comparison value ("l")
                        // 5  -> IS NOT ONE OF (semver) + semver string array comparison value ("l")
                        // 6  -> < (semver) + semver string comparison value ("s")
                        // 7  -> <= (semver + semver string comparison value ("s")
                        // 8  -> > (semver) + semver string comparison value ("s")
                        // 9  -> >= (semver + semver string comparison value ("s")
                        // 10 -> = (number) + number comparison value ("d")
                        // 11 -> <> (number + number comparison value ("d")
                        // 12 -> < (number) + number comparison value ("d")
                        // 13 -> <= (number + number comparison value ("d")
                        // 14 -> > (number) + number comparison value ("d")
                        // 15 -> >= (number) + number comparison value ("d")
                        // 16 -> IS ONE OF (hashed) + string array comparison value ("l")
                        // 17 -> IS NOT ONE OF (hashed) + string array comparison value ("l")
                        // 18 -> BEFORE (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 19 -> AFTER (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 20 -> EQUALS (hashed) + string comparison value ("s")
                        // 21 -> NOT EQUALS (hashed) + string comparison value ("s")
                        // 22 -> STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 23 -> NOT STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 24 -> ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 25 -> NOT ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 26 -> ARRAY CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 27 -> ARRAY NOT CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 28 -> EQUALS (cleartext) + string comparison value ("s")
                        // 29 -> NOT EQUALS (cleartext) + string comparison value ("s")
                        // 30 -> STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 31 -> NOT STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 32 -> ENDS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 33 -> NOT ENDS WITH ANY OF (cleartext + string array comparison value ("l")
                        // 34 -> ARRAY CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 35 -> ARRAY NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                "l": [ // comparison value - depending on the comparator, another type of value may need
                       // to be specified (see above):
                       // "s": string
                       // "d": number
                  "@example.com"
                ]
              }
            },
            {
              "p": { // Flag Condition (Prerequisite)
                "f": "mainIntFlag", // key of prerequisite flag
                "c": 0, // comparator, possible values: 0 -> EQUALS, 1 -> NOT EQUALS
                "v": { // comparison value (value's type must match the prerequisite flag's type)
                  "i": 42
                }
              }
            },
            {
              "s": { // Segment Condition
                "s": 0, // segment index, a valid index into the top-level segment array ("s")
                "c": 1 // comparator, possible values: 0 -> IS IN SEGMENT, 1 -> IS NOT IN SEGMENT
              }
            }
          ],
          "s": { // alternatively, an array of Percentage Options ("p", see below) can also be specified
            "v": { // the value served when the rule is selected during evaluation
              "b": true
            },
            "i": "bcfb84a7"
          }
        }
      ],
      "p": [ // array of Percentage Options
        {
          "p": 10, // % value
          "v": { // the value served when the Percentage Option is selected during evaluation
            "b": true
          },
          "i": "bcfb84a7"
        },
        {
          "p": 90,
          "v": {
            "b": false
          },
          "i": "bddac6ae"
        }
      ],
      "v": { // fallback value, served when none of the Targeting Rules match,
             // no Percentage Options are defined or evaluation of these is not possible
        "b": false // depending on the setting type, another type of value may need to be specified:
                   // text setting -> "s": string
                   // whole number setting -> "i": number
                   // decimal number setting -> "d": number
      },
      "i": "430bded3" // variation id (for analytical purposes)
    }
  }
}
```

For a more comprehensive specification of the config JSON v6 format, you may refer to [this JSON schema document](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

### Map[â](#map "Direct link to Map")

You can set up the SDK to load your feature flag & setting overrides from a `map[string]interface{}`.

```
client := configcat.NewCustomClient(configcat.Config{
    SDKKey: "localhost",
    FlagOverrides: &configcat.FlagOverrides{
        Values: map[string]interface{}{
			"enabledFeature":  true,
			"disabledFeature": false,
			"intSetting":      5,
			"doubleSetting":   3.14,
			"stringSetting":   "test",
		},
        Behavior: configcat.LocalOnly,
    },
})
```

## Snapshots[â](#snapshots "Direct link to Snapshots")

A `Snapshot` represents an immutable state of the given User's current setting values. Because of the immutability they are suitable for sharing between components that rely more on a consistent data state rather than maintaining their own states with individual get setting value calls.

Snapshot creation:

```
snapshot := client.Snapshot(user)
```

You can define setting descriptors that could be also shared between those components and used for evaluation:

```
boolSettingDescriptor := configcat.Bool("keyOfMyBoolSetting" /* Setting Key */, false /* Default value */)
```

Then you can use the descriptor to retrieve the setting's value from a snapshot:

```
boolValue := boolSettingDescriptor.Get(snapshot)
```

## Custom Cache[â](#custom-cache "Direct link to Custom Cache")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`ConfigCache`](https://github.com/configcat/go-sdk/blob/v9/configcat_client.go#L106) interface.

```
type CustomCache struct {
}

func (cache *CustomCache) Get(ctx context.Context, key string) ([]byte, error) {
    // here you have to return with the cached value
}

func (cache *CustomCache) Set(ctx context.Context, key string, value []byte) error {
    // here you have to store the new value in the cache
}
```

Then use your custom cache implementation:

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
    Cache: CustomCache{}})
```

info

The Go SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Force refresh[â](#force-refresh "Direct link to Force refresh")

Call the `Refresh()` method on the client to download the latest config JSON and update the cache.

You can also use the `RefreshIfOlder()` variant when you want to add expiration time windows for local cache updates.

## HTTP Proxy[â](#http-proxy "Direct link to HTTP Proxy")

You can use the `Transport` config option to set up http transport related (like proxy) settings for the http client used by the SDK:

```
proxyURL, _ := url.Parse("<PROXY-URL>")
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
    Transport: &http.Transport{
	    Proxy: http.ProxyURL(proxyURL),
    }
})
```

## HTTP Timeout[â](#http-timeout "Direct link to HTTP Timeout")

You can set the maximum wait time for a ConfigCat HTTP response.

```
client := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
    HTTPTimeout: time.Second * 10
})
```

## Logging[â](#logging "Direct link to Logging")

The default logger implementation used by the SDK is based on the `log` package, but you have the option to override it with your logger via the `Logger` config option. It only has to satisfy the [Logger](https://github.com/configcat/go-sdk/blob/v9/logger.go) interface:

```
type Logger interface {
	Debugf(format string, args ...interface{})
	Infof(format string, args ...interface{})
	Warnf(format string, args ...interface{})
	Errorf(format string, args ...interface{})
}
```

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
import {
	"github.com/configcat/go-sdk/v9"
}

client := configcat.NewCustomClient(configcat.Config{
    SDKKey: "#YOUR-SDK-KEY#",
    LogLevel: configcat.LogLevelInfo})
```

Available log levels:

| Level           | Description                                             |
| --------------- | ------------------------------------------------------- |
| `LogLevelNone`  | Turns off logging.                                      |
| `LogLevelError` | Only error level events are logged.                     |
| `LogLevelWarn`  | Default, Errors and Warnings are logged.                |
| `LogLevelInfo`  | Errors, Warnings and feature flag evaluation is logged. |
| `LogLevelDebug` | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
[ConfigCat] 2024/01/08 13:27:56 INFO: [5000] Evaluating 'isPOCFeatureEnabled' for User '&configcat.UserData{Identifier:"##SOME-USER-IDENTIFICATION##", Email:"configcat@example.com", Country:"", Custom:map[string]interface{}(nil)}'
Evaluating targeting rules and applying the first match if any:
- IF User.Email CONTAINS ANY OF ['@something.com'] => false, skipping the remaining AND conditions
  THEN 'false' => no match
- IF User.Email CONTAINS ANY OF ['@example.com'] => true
  THEN 'true' => MATCH, applying rule
Returning 'true'.
```

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

* [Sample Console App](https://github.com/configcat/go-sdk/tree/master/samples/console)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat Go SDK's repository on GitHub](https://github.com/configcat/go-sdk)


---

# Swift (iOS) SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/swift-sdk.svg?style=social)](https://github.com/configcat/swift-sdk/stargazers) [![Build Status](https://github.com/configcat/swift-sdk/actions/workflows/swift-ci.yml/badge.svg?branch=master)](https://github.com/configcat/swift-sdk/actions/workflows/swift-ci.yml) [![CocoaPods](https://img.shields.io/cocoapods/v/ConfigCat.svg)](https://cocoapods.org/pods/ConfigCat) [![Supported Platforms](https://img.shields.io/cocoapods/p/ConfigCat.svg?style=flat)](https://configcat.com/docs/sdk-reference/ios) [![Coverage Status](https://img.shields.io/sonar/coverage/configcat_swift-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_swift-sdk) [![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=configcat_swift-sdk\&metric=alert_status)](https://sonarcloud.io/dashboard?id=configcat_swift-sdk)

[ConfigCat Swift SDK on GitHub](https://github.com/configcat/swift-sdk)

## Getting Started[â](#getting-started "Direct link to Getting Started")

### 1. Add the ConfigCat SDK to your project[â](#1-add-the-configcat-sdk-to-your-project "Direct link to 1. Add the ConfigCat SDK to your project")

* CocoaPods
* Carthage
* Swift Package Manager

Podfile

```
target '<YOUR TARGET>' do
pod 'ConfigCat'
end
```

Then, run the following command to install your dependencies:

```
pod install
```

Cartfile

```
github "configcat/swift-sdk"
```

Then, run the carthage update command and then follow the Carthage integration steps to link the framework with your project.

Add the SDK to your `Package.swift`.

Package.swift

```
dependencies: [
    .package(
        url: "https://github.com/configcat/swift-sdk",
        from: "11.0.1"
    )
]
```

### 2. Import the ConfigCat SDK[â](#2-import-the-configcat-sdk "Direct link to 2. Import the ConfigCat SDK")

* Swift
* Objective-C

```
import ConfigCat
```

```
@import ConfigCat;
```

### 3. Create the *ConfigCat* client with your *SDK Key*[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3-create-the-configcat-client-with-your-sdk-key")

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#")
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                                 options:NULL];
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

* Swift
* Objective-C

```
client.getValue(for: "isMyAwesomeFeatureEnabled", defaultValue: false) { isMyAwesomeFeatureEnabled in
    if isMyAwesomeFeatureEnabled {
        doTheNewThing()
    } else {
        doTheOldThing()
    }
}

// Or with async/await
let isMyAwesomeFeatureEnabled = await client.getValue(for: "isMyAwesomeFeatureEnabled", defaultValue: false)
if isMyAwesomeFeatureEnabled {
    doTheNewThing()
} else {
    doTheOldThing()
}
```

```
[client getBoolValueFor:@"isMyAwesomeFeatureEnabled"
           defaultValue:false
                   user:NULL
             completion:^(BOOL isMyAwesomeFeatureEnabled) {
    if (isMyAwesomeFeatureEnabled) {
        // do the new thing
    } else {
        // do the old thing
    }
}];
```

The *ConfigCat SDK* also offers a synchronous API for feature flag evaluation. Read more [here](#snapshots-and-non-blocking-synchronous-feature-flag-evaluation).

### 5. Close ConfigCat clientâ[â](#5-close-configcat-client "Direct link to 5. Close ConfigCat clientâ")

You can safely shut down all clients at once or individually and release all associated resources on application exit.

* Swift
* Objective-C

```
ConfigCatClient.closeAll() // closes all clients

client.close() // closes the specific client
```

```
[ConfigCatClient closeAll]; // closes all clients

[client close]; // closes the specific client
```

## Supported platform versions[â](#supported-platform-versions "Direct link to Supported platform versions")

The following device platform versions are supported:

| Platform | Version  |
| -------- | -------- |
| iOS      | >= 12.0  |
| watchOS  | >= 4.0   |
| tvOS     | >= 12.0  |
| macOS    | >= 10.13 |
| visionOS | >= 1.0   |

## Creating the *ConfigCat Client*[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`ConfigCatClient.get(sdkKey: <sdkKey>)` returns a client with default options.

### Customizing the *ConfigCat Client*[â](#customizing-the-configcat-client "Direct link to customizing-the-configcat-client")

To customize the SDK's behavior, you can pass an additional `(ConfigCatOptions) -> ()` parameter to the `get()` static factory method where the `ConfigCatOptions` class is used to set up the *ConfigCat Client*.

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.pollingMode = PollingModes.manualPoll()
    options.logLevel = .info
}
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {
    options.pollingMode = [PollingModes manualPoll];
    options.logLevel = LogLevelInfo;
}];
```

These are the available options on the `ConfigCatOptions` class:

| Arguments              | Type                      | Description                                                                                                                                                                                                                                                                                                                         |
| ---------------------- | ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `dataGovernance`       | `DataGovernance`          | Optional, defaults to `global`. Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `global`, `euOnly`. |
| `configCache`          | `ConfigCache?`            | Optional, sets a custom cache implementation for the client. [More about cache](#custom-cache).                                                                                                                                                                                                                                     |
| `pollingMode`          | `PollingMode`             | Optional, sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                                         |
| `sessionConfiguration` | `URLSessionConfiguration` | Optional, sets a custom `URLSessionConfiguration` used by the HTTP calls.                                                                                                                                                                                                                                                           |
| `baseUrl`              | `String`                  | Optional, sets the CDN base url (forward proxy, dedicated subscription) from where the sdk will download the config JSON.                                                                                                                                                                                                           |
| `flagOverrides`        | `OverrideDataSource?`     | Optional, sets the local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                    |
| `logLevel`             | `LogLevel`                | Optional, sets the internal log level. [More about logging.](#logging).                                                                                                                                                                                                                                                             |
| `defaultUser`          | `ConfigCatUser?`          | Optional, sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                          |
| `logger`               | `ConfigCatLogger`         | Optional, sets the logger implementation used by the SDK. [More about logging](#logging)                                                                                                                                                                                                                                            |
| `offline`              | `Bool`                    | Optional, defaults to `false`. Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                   |
| `hooks`                | `Hooks`                   | Optional, used to subscribe events that the SDK sends in specific scenarios. [More about hooks](#hooks).                                                                                                                                                                                                                            |

caution

We strongly recommend you to use the `ConfigCatClient` as a Singleton object in your application. The `ConfigCatClient.get(sdkKey: <sdkKey>)` static factory method constructs singleton client instances for your SDK keys. These clients can be closed all at once with the `ConfigCatClient.closeAll()` method or individually with `client.close()`.

## Anatomy of `getValue()`[â](#anatomy-of-getvalue "Direct link to anatomy-of-getvalue")

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |
| `completion`   | **REQUIRED.** Callback function to call, when the result is ready.                                                                                      |

* Swift
* Objective-C

```
client.getValue(
    for: "keyOfMySetting", // Setting Key
    defaultValue: false, // Default value
    user: ConfigCatUser(identifier: "#UNIQUE-USER-IDENTIFIER#") // Optional User Object
) { isMyAwesomeFeatureEnabled in
    if isMyAwesomeFeatureEnabled {
        doTheNewThing()
    } else {
        doTheOldThing()
    }
}

// Or with async/await
let isMyAwesomeFeatureEnabled = await client.getValue(
    for: "keyOfMySetting", // Setting Key
    defaultValue: false, // Default value
    user: ConfigCatUser(identifier: "#UNIQUE-USER-IDENTIFIER#") // Optional User Object

if isMyAwesomeFeatureEnabled {
    doTheNewThing()
} else {
    doTheOldThing()
}
```

```
ConfigCatUser* user = [[ConfigCatUser alloc]initWithIdentifier:@"#UNIQUE-USER-IDENTIFIER#"
                                                         email:NULL country:NULL custom:NULL];

[client getBoolValueFor:@"keyOfMySetting" // Setting Key
           defaultValue:false // Default value
                   user:user // Optional User Object
             completion:^(BOOL isMyAwesomeFeatureEnabled) {
    if (isMyAwesomeFeatureEnabled) {
        // do the new thing
    } else {
        // do the old thing
    }
}];
```

caution

*The following is only related to the SDK's generic-typed API which's only accessible from Swift.*

It is important to provide an argument for the `defaultValue` parameter, specifically for the `Value` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | Type parameter `Value` |
| -------------- | ---------------------- |
| On/Off Toggle  | `Bool` / `Bool?`       |
| Text           | `String` / `String?`   |
| Whole Number   | `Int` / `Int?`         |
| Decimal Number | `Double` / `Double?`   |

In addition to the types mentioned above, you also have the option to provide `Any` or `Any?` for the type parameter (or to use the `getAnyValue` method) regardless of the setting kind.

If you provide any other type for the type parameter, or if you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

When relying on type inference, be mindful of potential type mismatch issues, especially with number types. For example, `await client.getValue(for: "keyOfMyDecimalSetting", defaultValue: 0)` will return `defaultValue` (`0`) instead of the actual value of the decimal setting because the compiler infers the type as `Int` instead of `Double`.

To correctly evaluate a decimal setting, you should use:

```
let value = await client.getValue(for: "keyOfMyDecimalSetting", defaultValue: 0.0);
```

## Anatomy of `getValueDetails()`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`getValueDetails()` is similar to `getValue()` but instead of returning the evaluated value only, it gives more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

* Swift
* Objective-C

```
client.getValueDetails(
    for: "keyOfMySetting", // Setting Key
    defaultValue: false, // Default value
    user: ConfigCatUser(identifier: "#UNIQUE-USER-IDENTIFIER#") // Optional User Object
) { details in
    // Use the details result
}

// Or with async/await
let details = await client.getValueDetails(
    for: "keyOfMySetting", // Setting Key
    defaultValue: false, // Default value
    user: ConfigCatUser(identifier: "#UNIQUE-USER-IDENTIFIER#") // Optional User Object
```

```
ConfigCatUser* user = [[ConfigCatUser alloc]initWithIdentifier:@"#UNIQUE-USER-IDENTIFIER#"
                                                         email:NULL country:NULL custom:NULL];

[client getBoolValueDetailsFor:@"keyOfMySetting" // Setting Key
                  defaultValue:false // Default value
                          user:user // Optional User Object
                    completion:^(BoolEvaluationDetails* details) {
    // Use the details result
}];
```

caution

*The following is only related to the SDK's generic-typed API which's only accessible from Swift.*

It is important to provide an argument for the `defaultValue` parameter, specifically for the `Value` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The details result contains the following information:

| Field                     | Type                                 | Description                                                                                                |
| ------------------------- | ------------------------------------ | ---------------------------------------------------------------------------------------------------------- |
| `value`                   | `Bool` / `String` / `Int` / `Double` | The evaluated value of the feature flag or setting.                                                        |
| `key`                     | `String`                             | The key of the evaluated feature flag or setting.                                                          |
| `isDefaultValue`          | `Bool`                               | True when the default value passed to `getValueDetails()` is returned due to an error.                     |
| `error`                   | `String?`                            | In case of an error, this property contains the error message.                                             |
| `user`                    | `ConfigCatUser?`                     | The User Object that was used for evaluation.                                                              |
| `matchedPercentageOption` | `PercentageOption?`                  | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `matchedTargetingRule`    | `TargetingRule?`                     | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `fetchTime`               | `Date`                               | The last download time of the current config.                                                              |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

* Swift
* Objective-C

```
let user = ConfigCatUser(identifier: "#UNIQUE-USER-IDENTIFIER#")
```

```
ConfigCatUser* user = [[ConfigCatUser alloc]initWithIdentifier:@"#UNIQUE-USER-IDENTIFIER#"
                                                         email:NULL
                                                       country:NULL
                                                        custom:NULL];
```

* Swift
* Objective-C

```
let user = ConfigCatUser(identifier: "john@example.com")
```

```
ConfigCatUser* user = [[ConfigCatUser alloc]initWithIdentifier:@"john@example.com"
                                                         email:NULL
                                                       country:NULL
                                                        custom:NULL];
```

| Arguments    | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any value, even an email address.                         |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. e.g. User role, Subscription type. |

* Swift
* Objective-C

```
let user = ConfigCatUser(identifier: "#UNIQUE-USER-IDENTIFIER#",
    email: "john@example.com",
    country: "United Kingdom",
    custom: ["SubscriptionType":"Pro", "UserRole":"Admin"])
```

```
ConfigCatUser* user = [[ConfigCatUser alloc]initWithIdentifier:@"#UNIQUE-USER-IDENTIFIER#"
                                                         email:@"john@example.com"
                                                       country:@"United Kingdom"
                                                        custom:@{@"SubscriptionType": @"Pro", @"UserRole": @"Admin"}];
```

The `custom` map also allows attribute values other than `String` values:

* Swift
* Objective-C

```
let dateFormatter = DateFormatter()
dateFormatter.dateFormat = "yyyy-MM-dd'T'HH:mm:ss.SSSZ"
let registeredAt = dateFormatter.date(from:"2023-03-31T23:59:59.999Z")!

let user = ConfigCatUser(identifier: "#UNIQUE-USER-IDENTIFIER#",
    email: "john@example.com",
    country: "United Kingdom",
    custom: ["Rating":4.5, "RegisteredAt":registeredAt, "Roles": ["Role1", "Role2"]])
```

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSSZ"];
NSDate *registeredAt = [dateFormatter dateFromString: @"2023-03-31T23:59:59.999Z"];

ConfigCatUser* user = [[ConfigCatUser alloc]initWithIdentifier:@"#UNIQUE-USER-IDENTIFIER#"
                                                         email:@"john@example.com"
                                                       country:@"United Kingdom"
                                                        custom:@{@"Rating": @4.5, 
                                                                 @"RegisteredAt": registeredAt,
                                                                 @"Roles":@[@"Role1", @"Role2"]}];
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `String` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `String` values,
* all other values are automatically converted to `String` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `String` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated targeting rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `Int`, `UInt`, `Double`, or `Float` values,
* accept `String` values containing a properly formatted, valid `Double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated targeting rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `Int`, `UInt`, `Double`, or `Float` values representing a second-based Unix timestamp,
* accept `String` values containing a properly formatted, valid `Double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated targeting rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `String`,
* accept `String` values containing a valid JSON string which can be deserialized to an array of `String`,
* all other values are considered invalid (a warning will be logged and the currently evaluated targeting rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object either on SDK initialization:

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.defaultUser = ConfigCatUser(identifier: "john@example.com")
}
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.defaultUser = [[ConfigCatUser alloc]initWithIdentifier:@"john@example.com"
                                                             email:NULL
                                                           country:NULL
                                                            custom:NULL];
}];
```

or with the `setDefaultUser()` method of the ConfigCat client.

* Swift
* Objective-C

```
client.setDefaultUser(user: ConfigCatUser(identifier: "john@example.com"))
```

```
[client setDefaultUserWithUser:[[ConfigCatUser alloc]initWithIdentifier:@"john@example.com"
                                                                  email:NULL
                                                                country:NULL
                                                                 custom:NULL]];
```

Whenever the `getValue()`, `getValueDetails()`, `getAllValues()`, or `getAllVariationIds()` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

* Swift
* Objective-C

```
let user = ConfigCatUser(identifier: "john@example.com")
client.setDefaultUser(user)

// The default user will be used at the evaluation process.
let value = await client.getValue(for: "keyOfMySetting", defaultValue: false)
```

```
ConfigCatUser* user = [[ConfigCatUser alloc]initWithIdentifier:@"john@example.com"
                                                         email:NULL
                                                       country:NULL
                                                        custom:NULL];

[client setDefaultUserWithUser:user];

// The default user will be used at the evaluation process.
[client getBoolValueFor:@"keyOfMySetting"
           defaultValue:false 
                   user:NULL 
             completion:^(BOOL value) {
    // You can use the evaluation's result here.
}];
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

* Swift
* Objective-C

```
et user = ConfigCatUser(identifier: "john@example.com")
client.setDefaultUser(user)

let otherUser = ConfigCatUser(identifier: "brian@example.com")

// otherUser will be used at the evaluation process.
let value = await client.getValue(for: 'keyOfMySetting', defaultValue: false, user: otherUser)
```

```
ConfigCatUser* user = [[ConfigCatUser alloc]initWithIdentifier:@"john@example.com"
                                                         email:NULL
                                                       country:NULL
                                                        custom:NULL];

[client setDefaultUserWithUser:user];

ConfigCatUser* otherUser = [[ConfigCatUser alloc]initWithIdentifier:@"brian@example.com"
                                                              email:NULL
                                                            country:NULL
                                                             custom:NULL];

// otherUser will be used at the evaluation process.
[client getBoolValueFor:@"keyOfMySetting"
           defaultValue:false 
                   user:otherUser 
             completion:^(BOOL value) {
    // You can use the evaluation's result here.
}];
```

For deleting the default user, you can do the following:

* Swift
* Objective-C

```
client.clearDefaultUser()
```

```
[client clearDefaultUser];
```

## `getAllKeys()`[â](#getallkeys "Direct link to getallkeys")

You can get the keys for all available feature flags and settings by calling the `getAllKeys()` method of the `ConfigCatClient`.

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#")

// Completion callback
client.getAllKeys() { keys in
    // use keys
}

// Async/await
let keys = await client.getAllKeys()
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#" options:NULL];

[client getAllKeysWithCompletion:^(NSArray<NSString*>* keys) {
    // use keys
}];
```

## `getAllValues()`[â](#getallvalues "Direct link to getallvalues")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

| Parameters | Description                                                                                                                                             |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `user`     | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#")
let user = ConfigCatUser(identifier: "#UNIQUE-USER-IDENTIFIER#")

// Completion callback
client.getAllValues(
    user:  user// Optional User Object
) { allValues in
    // use allValues
}

// Async/await
let allValues = await client.getAllValues(
    user: user // Optional User Object
)
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#" options:NULL];

ConfigCatUser* user = [[ConfigCatUser alloc]initWithIdentifier:@"#UNIQUE-USER-IDENTIFIER#"
                                                         email:NULL
                                                       country:NULL
                                                        custom:NULL];

[client getAllValuesWithUser:user completion:^(NSDictionary<NSString*,id>* values) {
    // use values
}];
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValue()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the the `autoPollIntervalInSeconds` option parameter of the `PollingModes.autoPoll()` to change the polling interval.

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.pollingMode = PollingModes.autoPoll(autoPollIntervalInSeconds: 120 /* polling interval in seconds */)
}
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.pollingMode = [PollingModes autoPollWithAutoPollIntervalInSeconds:120 maxInitWaitTimeInSeconds:5];
}];
```

Available options:

| Option Parameter            | Description                                                                                          | Default |
| --------------------------- | ---------------------------------------------------------------------------------------------------- | ------- |
| `autoPollIntervalInSeconds` | Polling interval.                                                                                    | 60      |
| `maxInitWaitTimeInSeconds`  | Maximum waiting time between the client initialization and the first config acquisition in secconds. | 5       |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValue()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValue()` will return the setting value after the cache is updated.

Use the `cacheRefreshIntervalInSeconds` option parameter of the `PollingModes.lazyLoad()` to set cache lifetime.

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.pollingMode = PollingModes.lazyLoad(cacheRefreshIntervalInSeconds: 120 /* the cache will expire in 120 seconds */)
}
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.pollingMode = [PollingModes lazyLoadWithCacheRefreshIntervalInSeconds:120];
}];
```

Available options:

| Option Parameter                | Description | Default |
| ------------------------------- | ----------- | ------- |
| `cacheRefreshIntervalInSeconds` | Cache TTL.  | 60      |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `refresh()` is your application's responsibility.

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.pollingMode = PollingModes.manualPoll()
}

// Completion callback
client.forceRefresh() { _ in
    // The client uses the latest config JSON
}

// Async/await
await client.forceRefresh()
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.pollingMode = [PollingModes manualPoll];
}];

[client forceRefreshWithCompletion:^(RefreshResult* result) {
    // The client uses the latest config JSON
}];
```

> `getValue()` returns `defaultValue` if the cache is empty. Call `refresh()` to update the cache.

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `onReady(ClientCacheState)`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeInSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `ClientCacheState` argument.

* `onConfigChanged((Config, ConfigCatClientSnapshot))`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `onFlagEvaluated(EvaluationDetails)`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetails()`](#anatomy-of-getvaluedetails).

* `onError(String)`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on SDK initialization:

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.hooks.addOnFlagEvaluated { details in
        /* handle the event */
    }
}
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    [options.hooks addOnFlagEvaluatedWithHandler:^(EvaluationDetails* details) {
        /* handle the event */
    }];
}];
```

or with the `hooks` property of the ConfigCat client:

* Swift
* Objective-C

```
client.hooks.addOnFlagEvaluated { details in
    /* handle the event */
}
```

```
[client.hooks addOnFlagEvaluatedWithHandler:^(EvaluationDetails* details) {
    /* handle the event */
}];
```

## Snapshots and non-blocking synchronous feature flag evaluation[â](#snapshots-and-non-blocking-synchronous-feature-flag-evaluation "Direct link to Snapshots and non-blocking synchronous feature flag evaluation")

The *ConfigCat* client doesn't directly provide synchronous methods for evaluating feature flags and settings because such synchronous methods could block the executing thread for longer periods of time (e.g. when downloading config data from the ConfigCat CDN servers), which could lead to an unresponsive application.

However, there can be circumstances where synchronous evaluation is preferable, thus, since `v10.0.0`, the Swift SDK provides a way to synchronously evaluate feature flags and settings as a non-blocking operation, via *snapshots*.

* Swift
* Objective-C

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.pollingMode = PollingModes.autoPoll()
}

// Wait for the client to initialize.
await client.waitForReady()

let snapshot = client.snapshot()

let user = ConfigCatUser(identifier: "#UNIQUE-USER-IDENTIFIER#")
for key in snapshot.getAllKeys() {
    let value: Any? = snapshot.getValue(for: key, defaultValue: nil, user: user)
    print("\(key): \(String(describing: value))")
}
```

Subscribing to the `onReady` hook gives you a snapshot of the captured initialized state of the *ConfigCat* client (including the latest downloaded config data) that you can use to synchronously evaluate feature flags and settings:

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#" configurator:^(ConfigCatOptions* options) {
    [options.hooks addOnReadyWithSnapshotHandler:^(ConfigCatClientSnapshot* snapshot) {
        ConfigCatUser* user = [[ConfigCatUser alloc]initWithIdentifier:@"#UNIQUE-USER-IDENTIFIER#"
                                                                 email:NULL
                                                               country:NULL
                                                                custom:NULL];
                
        for (NSString* key in [snapshot getAllKeys]) {
            id def = NULL;
            id value = [snapshot getAnyValueFor:key defaultValue:def user:user];
            NSLog(@"%@: %@", key, value);
        }
    }];
}];
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefresh`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeInSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application. (In Objective-C, `waitForReady` is not available. As an alternative, you can subscribe to the `onReady` hook and wait for the first event.)

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

* Swift
* Objective-C

```
let clientCacheState = await client.waitForReady()
if (clientCacheState == .noFlagData) {
    // Handle initialization failure (see below).
}
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#" configurator:^(ConfigCatOptions* options) {
    [options.hooks addOnReadyWithSnapshotHandler:^(ConfigCatClientSnapshot* snapshot) {
        if ([snapshot cacheState] == ClientCacheStateNoFlagData) {
            // Handle initialization failure (see below).        
        }
    }];
}];
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `onConfigChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

* Swift
* Objective-C

```
client.setOffline()
```

```
[client setOffline];
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

* Swift
* Objective-C

```
client.setOnline()
```

```
[client setOnline];
```

> With `client.isOffline` you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.localOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.localOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.remoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `[String: Any]` dictionary.

* Swift
* Objective-C

```
let dictionary:[String: Any] = [
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
]

let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.flagOverrides = LocalDictionaryDataSource(source: dictionary, behaviour: .localOnly)
}
```

```
NSDictionary<NSString*,id>* dictionary = @{
    @"enabledFeature": @true,
    @"disabledFeature": @false,
    @"intSetting": @5,
    @"doubleSetting": @3.14,
    @"stringSetting": @"test"
};

ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.flagOverrides = [[LocalDictionaryDataSource alloc]initWithSource:dictionary
                                                                   behaviour:OverrideBehaviourLocalOnly];
}];
```

## Cache[â](#cache "Direct link to Cache")

The SDK uses `UserDefaults` as the default cache to store the downloaded `config JSON`.

If you want to turn off the default behavior, you can set the SDK's cache to `nil` or to your own cache implementation.

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.configCache = nil
}
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.configCache = NULL;
}];
```

### Custom cache[â](#custom-cache "Direct link to Custom cache")

You have the option to inject your custom cache implementation into the client. All you have to do is to conform the `ConfigCache` protocol:

* Swift
* Objective-C

```
@import ConfigCat

public class MyCustomCache: ConfigCache {
    public func read(key: String) throws -> String {
        // here you have to return with the cached value
    }

    public func write(key: String, value: String) throws {
        // here you have to store the new value in the cache
    }
}
```

MyCustomCache.h

```
@import Foundation;
@import ConfigCat;

@interface MyCustomCache: NSObject <ConfigCache>

@end
```

MyCustomCache.m

```
#import "MyCustomCache.h"

@implementation MyCustomCache

- (NSString *)readFor:(NSString *)key error:(NSError * __autoreleasing *)error {
    // here you have to return with the cached value
}

- (BOOL)writeFor:(NSString *)key value:(NSString *)value error:(NSError * __autoreleasing *)error {
    // here you have to store the new value in the cache
}

@end
```

Then you can use your custom cache implementation at the SDK's initialization:

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.configCache = MyCustomCache()
}
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.configCache = [MyCustomCache alloc];
}];
```

info

The Swift SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Force refresh[â](#force-refresh "Direct link to Force refresh")

Call the `forceRefresh()` method on the client to download the latest config JSON and update the cache.

## Using ConfigCat behind a proxy[â](#using-configcat-behind-a-proxy "Direct link to Using ConfigCat behind a proxy")

Provide your own network credentials (username/password), and proxy server settings (proxy server/port) by adding a *ProxyDictionary* to the ConfigCat's `URLSessionConfiguration`.

* Swift
* Objective-C

```
let proxyHost = "127.0.0.1"
let proxyPort = 8080
let proxyUser = "user"
let proxyPassword = "password"

let sessionConfiguration = URLSessionConfiguration.default
sessionConfiguration.connectionProxyDictionary = [
    kCFNetworkProxiesHTTPEnable: true,
    kCFNetworkProxiesHTTPProxy: proxyHost,
    kCFNetworkProxiesHTTPPort: proxyPort,
    kCFNetworkProxiesHTTPSEnable: true,
    kCFNetworkProxiesHTTPSProxy: proxyHost,
    kCFNetworkProxiesHTTPSPort: proxyPort,
    kCFProxyUsernameKey: proxyUser, // Optional
    kCFProxyPasswordKey: proxyPassword // Optional
]

let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.sessionConfiguration = sessionConfiguration
}
```

```
NSString* proxyHost = @"127.0.0.1";
NSNumber* proxyPort = @8080;
NSString* proxyUser = @"user";
NSString* proxyPassword = @"password";

NSURLSessionConfiguration* sessionConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration];
sessionConfiguration.connectionProxyDictionary = @{
    (NSString *)kCFNetworkProxiesHTTPEnable: @true,
    (NSString *)kCFNetworkProxiesHTTPProxy: proxyHost,
    (NSString *)kCFNetworkProxiesHTTPPort: proxyPort,
    (NSString *)kCFNetworkProxiesHTTPSEnable: @true,
    (NSString *)kCFNetworkProxiesHTTPSProxy: proxyHost,
    (NSString *)kCFNetworkProxiesHTTPSPort: proxyPort,
    (NSString *)kCFProxyUsernameKey: proxyUser, // Optional
    (NSString *)kCFProxyPasswordKey: proxyPassword // Optional
};

ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.sessionConfiguration = sessionConfiguration;
}];
```

## Changing the default HTTP timeout[â](#changing-the-default-http-timeout "Direct link to Changing the default HTTP timeout")

Set the maximum wait time for a ConfigCat HTTP response by changing the *timeoutIntervalForRequest* of the ConfigCat's `URLSessionConfiguration`. The default *timeoutIntervalForRequest* is 60 seconds.

* Swift
* Objective-C

```
let sessionConfiguration = URLSessionConfiguration.default
sessionConfiguration.timeoutIntervalForRequest = 10 // Timeout in seconds

let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.sessionConfiguration = sessionConfiguration
}
```

```
NSURLSessionConfiguration* sessionConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration];
sessionConfiguration.timeoutIntervalForRequest = 10; // Timeout in seconds

ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.sessionConfiguration = sessionConfiguration;
}];
```

## Logging[â](#logging "Direct link to Logging")

The default logger used by the SDK is using the *Unified Logging System*. For more information about *Unified Logging* please visit [Apple's developer page](https://developer.apple.com/documentation/os/logging) or check [Session 721 - Unified Logging and Activity Tracing](https://developer.apple.com/videos/play/wwdc2016/721) from WWDC 2016.

You can override the default logger with your custom implementation via the `logger` client option. The custom implementation must conform the `ConfigCatLogger` protocol.

* Swift
* Objective-C

```
@import ConfigCat

class MyCustomLogger: ConfigCatLogger {
    func debug(message: String) {
        // write the debug logs
    }
    
    func info(message: String) {
        // write the info logs
    }
    
    func warning(message: String) {
        // write the warning logs
    }
    
    func error(message: String) {
        // write the error logs
    }
}
```

MyCustomLogger.h

```
@import Foundation;
@import ConfigCat;

@interface MyCustomLogger: NSObject <ConfigCatLogger>

@end
```

MyCustomLogger.m

```
#import "MyCustomLogger.h"

@implementation MyCustomLogger

- (void)debugWithMessage:(NSString * _Nonnull)message { 
    // write the debug logs
}

- (void)infoWithMessage:(NSString * _Nonnull)message { 
    // write the info logs
}

- (void)warningWithMessage:(NSString * _Nonnull)message { 
    // write the warning logs
}

- (void)errorWithMessage:(NSString * _Nonnull)message { 
    // write the error logs
}

@end
```

Then you can use your custom logger implementation at the SDK's initialization:

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.logger = MyCustomLogger()
}
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.logger = [MyCustomLogger alloc];
}];
```

### Log level[â](#log-level "Direct link to Log level")

You can change the verbosity of the logs by setting the `logLevel` option.

* Swift
* Objective-C

```
let client = ConfigCatClient.get(sdkKey: "#YOUR-SDK-KEY#") { options in
    options.logLevel = .info
}
```

```
ConfigCatClient* client = [ConfigCatClient getWithSdkKey:@"#YOUR-SDK-KEY#"
                                            configurator:^(ConfigCatOptions* options) {

    options.logLevel = ConfigCatLogLevelInfo;
}];
```

Available log levels:

* Swift
* Objective-C

| Level      | Description                                                                             |
| ---------- | --------------------------------------------------------------------------------------- |
| `.nolog`   | Turn the ConfigCat logging off.                                                         |
| `.error`   | Only error level events are logged.                                                     |
| `.warning` | Default. Errors and Warnings are logged.                                                |
| `.info`    | Errors, Warnings and feature flag evaluation is logged.                                 |
| `.debug`   | All of the above plus debug info is logged. Debug logs can be different for other SDKs. |

| Level                      | Description                                                                             |
| -------------------------- | --------------------------------------------------------------------------------------- |
| `ConfigCatLogLevelNolog`   | Turn the ConfigCat logging off.                                                         |
| `ConfigCatLogLevelError`   | Only error level events are logged.                                                     |
| `ConfigCatLogLevelWarning` | Default. Errors and Warnings are logged.                                                |
| `ConfigCatLogLevelInfo`    | Errors, Warnings and feature flag evaluation is logged.                                 |
| `ConfigCatLogLevelDebug`   | All of the above plus debug info is logged. Debug logs can be different for other SDKs. |

Info level logging helps to inspect the feature flag evaluation process.<br /><!-- -->Example log entries:

```
[5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","version":"1.0.0","Email":"configcat@example.com","Country":"CountryID"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the ConfigCat SDK that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Sample App[â](#sample-app "Direct link to Sample App")

Check out our Sample Application how they use the ConfigCat SDK

* [iOS with auto polling and change listener](https://github.com/configcat/swift-sdk/tree/master/samples/ios)


---

# Java SDK reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/java-sdk.svg?style=social)](https://github.com/configcat/java-sdk/stargazers) [![Java CI](https://github.com/configcat/java-sdk/actions/workflows/java-ci.yml/badge.svg?branch=master)](https://github.com/configcat/java-sdk/actions/workflows/java-ci.yml) [![Maven Central](https://img.shields.io/maven-central/v/com.configcat/configcat-java-client)](https://central.sonatype.com/artifact/com.configcat/configcat-java-client) [![Javadocs](https://javadoc.io/badge/com.configcat/configcat-java-client.svg)](https://javadoc.io/doc/com.configcat/configcat-java-client) [![Coverage Status](https://img.shields.io/sonar/coverage/configcat_java-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_java-sdk) [![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=configcat_java-sdk\&metric=alert_status)](https://sonarcloud.io/dashboard?id=configcat_java-sdk)

[ConfigCat Java SDK on GitHub](https://github.com/configcat/java-sdk)

## Getting Started[â](#getting-started "Direct link to Getting Started")

### 1. Add the ConfigCat SDK to your project[â](#1-add-the-configcat-sdk-to-your-project "Direct link to 1. Add the ConfigCat SDK to your project")

* Gradle
* Maven

build.gradle

```
dependencies {
    implementation 'com.configcat:configcat-java-client:9.+'
}
```

pom.xml

```
<dependency>
  <groupId>com.configcat</groupId>
  <artifactId>configcat-java-client</artifactId>
  <version>[9.0.0,)</version>
</dependency>
```

### 2. Import the ConfigCat SDK[â](#2-import-the-configcat-sdk "Direct link to 2. Import the ConfigCat SDK")

```
import com.configcat.*;
```

### 3. Create and get the *ConfigCat* client for your *SDK Key*[â](#3-create-and-get-the-configcat-client-for-your-sdk-key "Direct link to 3-create-and-get-the-configcat-client-for-your-sdk-key")

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#");
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

```
boolean isMyAwesomeFeatureEnabled = client.getValue(Boolean.class, "isMyAwesomeFeatureEnabled", false);
if (isMyAwesomeFeatureEnabled) {
    doTheNewThing();
} else {
    doTheOldThing();
}
```

### 5. Stop *ConfigCat* client[â](#5-stop-configcat-client "Direct link to 5-stop-configcat-client")

You can safely shut down the client instance and release all associated resources on application exit.

```
client.close();
```

You can close all singleton client instances and release all associated resources on application exit.

```
ConfigCatClient.closeAll();
```

## Java compatibility[â](#java-compatibility "Direct link to Java compatibility")

The ConfigCat Java SDK is compatible with Java 8 and higher.

## Creating the *ConfigCat Client*[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`ConfigCatClient.get(<sdkKey>)` returns a client with default options.

### Customizing the *ConfigCat Client*[â](#customizing-the-configcat-client "Direct link to customizing-the-configcat-client")

To customize the SDK's behavior, you can pass an additional `Consumer<Options>` parameter to the `get()` static factory method where the `Options` class is used to set up the *ConfigCat Client*.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.pollingMode(PollingModes.autoPoll());
    options.logLevel(LogLevel.INFO);
});
```

These are the available options on the `Options` class:

| Option                                                        | Description                                                                                                                                                                                                                                                                                                                         |
| ------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `dataGovernance(DataGovernance)`                              | Optional, defaults to `Global`. Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `Global`, `EuOnly`. |
| `baseUrl(string)`                                             | Optional, sets the CDN base url (forward proxy, dedicated subscription) from where the sdk will download the configurations.                                                                                                                                                                                                        |
| `httpClient(OkHttpClient)`                                    | Optional, sets the underlying `OkHttpClient` used to download the feature flags and settings over HTTP. [More about the HTTP Client](#httpclient).                                                                                                                                                                                  |
| `cache(ConfigCache)`                                          | Optional, sets a custom cache implementation for the client. [More about cache](#custom-cache).                                                                                                                                                                                                                                     |
| `pollingMode(PollingMode)`                                    | Optional, sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                                         |
| `logLevel(LogLevel)`                                          | Optional, defaults to `WARNING`. Sets the internal log level. [More about logging](#logging).                                                                                                                                                                                                                                       |
| `logFilter(LogFilterFunction)`                                | Optional, sets a custom log filter. [More about log filtering](#log-filtering).                                                                                                                                                                                                                                                     |
| `flagOverrides(OverrideDataSourceBuilder, OverrideBehaviour)` | Optional, sets the local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                    |
| `defaultUser(User)`                                           | Optional, sets default user. [More about default user](#default-user).                                                                                                                                                                                                                                                              |
| `offline(boolean)`                                            | Optional, defaults to `false`. Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                   |
| `hooks()`                                                     | Optional, used to subscribe events that the SDK sends in specific scenarios. [More about hooks](#hooks).                                                                                                                                                                                                                            |

caution

We strongly recommend you to use the `ConfigCatClient` as a Singleton object in your application. The `ConfigCatClient.get("#YOUR-SDK-KEY#")` static factory method constructs singleton client instances for your SDK keys. These clients can be closed all at once with the `ConfigCatClient.closeAll()` method or individually with `client.close()`.

## Anatomy of `getValue()`[â](#anatomy-of-getvalue "Direct link to anatomy-of-getvalue")

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `classOfT`     | **REQUIRED.** The type of the setting.                                                                                                                  |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |

```
boolean value = client.getValue(
    Boolean.class, // Setting type
    "keyOfMySetting", // Setting Key
    User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#"), // Optional User Object
    false // Default value
);
```

caution

It is important to provide an argument for the `classOfT` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | Type parameter `T`    |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean` / `Boolean` |
| Text           | `String`              |
| Whole Number   | `int` / `Integer`     |
| Decimal Number | `double` / `Double`   |

It's important to note that providing any other type for the type parameter will result in an `IllegalArgumentException`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `classOfT`     | **REQUIRED.** The type of the setting.                                                                                                                  |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |

```
client.getValueAsync(
    Boolean.class, // Setting type
    "keyOfMySetting", // Setting Key
    User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#"), // Optional User Object
    false // Default value
).thenAccept(isMyAwesomeFeatureEnabled -> {
    if (isMyAwesomeFeatureEnabled) {
        doTheNewThing();
    } else {
        doTheOldThing();
    }
});
```

caution

It is important to provide an argument for the `classOfT` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

## Anatomy of `getValueDetails()`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`getValueDetails()` is similar to `getValue()` but instead of returning the evaluated value only, it gives more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `classOfT`     | **REQUIRED.** The type of the setting.                                                                                                                  |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |

```
EvaluationDetails<Boolean> details = client.getValueDetails(
    Boolean.class, // Setting type
    "keyOfMySetting", // Setting Key
    User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#"), // Optional User Object
    false // Default value
);
// Or asynchronously
client.getValueDetailsAsync(
    Boolean.class, // Setting type
    "keyOfMySetting", // Setting Key
    User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#"), // Optional User Object
    false // Default value
).thenAccept(details -> {
    // Use the details result
});
```

caution

It is important to provide an argument for the `classOfT` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The details result contains the following information:

| Property                         | Type                                    | Description                                                                                                |
| -------------------------------- | --------------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `getValue()`                     | `boolean` / `String` / `int` / `double` | The evaluated value of the feature flag or setting.                                                        |
| `getKey()`                       | `String`                                | The key of the evaluated feature flag or setting.                                                          |
| `isDefaultValue()`               | `boolean`                               | True when the default value passed to `getValueDetails()` is returned due to an error.                     |
| `getError()`                     | `String`                                | In case of an error, this property contains the error message.                                             |
| `getUser()`                      | `User`                                  | The User Object that was used for evaluation.                                                              |
| `getMatchedPercentageOption()`   | `PercentageOption`                      | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `getMatchedTargetingRule()`      | `TargetingRule`                         | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `getFetchTimeUnixMilliseconds()` | `long`                                  | The last download time of the current config in unix milliseconds format.                                  |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
User user = User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#");
```

```
User user = User.newBuilder().build("john@example.com");
```

| Builder options | Description                                                                                                                     |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier()`  | **REQUIRED.** Unique identifier of a user in your application. Can be any value, even an email address.                         |
| `email()`       | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country()`     | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom()`      | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. e.g. User role, Subscription type. |

```
java.util.Map<String,Object> customAttributes = new java.util.HashMap<String,Object>();
customAttributes.put("SubscriptionType", "Pro");
customAttributes.put("UserRole", "Admin");

User user = User.newBuilder()
    .email("john@example.com")
    .country("United Kingdom")
    .custom(customAttributes)
    .build("#UNIQUE-USER-IDENTIFIER#");
```

The `Custom` dictionary also allows attribute values other than `String` values:

```
java.util.Map<String,Object> customAttributes = new java.util.HashMap<String,Object>();
customAttributes.put("Rating", 4.5);
customAttributes.put("RegisteredAt", new Date("2023-11-22 12:34:56 +00:00"));
customAttributes.put("Roles", new String[]{"Role1", "Role2"});

User user = User.newBuilder()
    .email("john@example.com")
    .country("United Kingdom")
    .custom(customAttributes)
    .build("#UNIQUE-USER-IDENTIFIER#");
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `String` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `String` values,
* all other values are automatically converted to `String` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `String` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `Double` values and all other numeric values which can safely be converted to `Double`,
* accept `String` values containing a properly formatted, valid `Double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` or `Instant` values, which are automatically converted to a second-based Unix timestamp,
* accept `Double` values representing a second-based Unix timestamp and all other numeric values which can safely be converted to `Double`,
* accept `String` values containing a properly formatted, valid `Double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays and list of `String`,
* accept `String` values containing a valid JSON string which can be deserialized to an array of `String`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default User[â](#default-user "Direct link to Default User")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object either with the ConfigCatClient builder:

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.mode(PollingModes.manualPoll());
    options.baseUrl(server.url("/").toString());
    options.defaultUser(User.newBuilder().build("john@example.com"));
});
```

or with the `setDefaultUser()` method of the ConfigCat client.

```
client.setDefaultUser(User.newBuilder().build("john@example.com"));
```

Whenever the `getValue()`, `getValueDetails()`, `getAllValues()`, or `getAllValueDetails()` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
client.setDefaultUser(User.newBuilder().build("john@example.com"));
// The default user will be used at the evaluation process.
boolean value = client.getValue(Boolean.class, "keyOfMySetting", false);
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

```
client.setDefaultUser(User.newBuilder().build("john@example.com"));

User otherUser = User.newBuilder().build("user");
// otherUser will be used at the evaluation process.
boolean value =  client.getValue(Boolean.class, "keyOfMySetting", false, otherUser);
```

For deleting the default user, you can do the following:

```
client.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValue()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the the `autoPollIntervalInSeconds` option parameter of the `PollingModes.autoPoll()` to change the polling interval.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.pollingMode(PollingModes.autoPoll(60 /* polling interval in seconds */));
});
```

Available options:

| Option Parameter            | Description                                                                                         | Default |
| --------------------------- | --------------------------------------------------------------------------------------------------- | ------- |
| `autoPollIntervalInSeconds` | Polling interval.                                                                                   | 60      |
| `maxInitWaitTimeSeconds`    | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5       |

### Lazy Loading[â](#lazy-loading "Direct link to Lazy Loading")

When calling `getValue()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValue()` will return the setting value after the cache is updated.

Use the `cacheRefreshIntervalInSeconds` option parameter of the `PollingModes.lazyLoad()` to set cache lifetime.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.pollingMode(PollingModes.lazyLoad(60 /* the cache will expire in 120 seconds */));
});
```

Available options:

| Option Parameter                | Description | Default |
| ------------------------------- | ----------- | ------- |
| `cacheRefreshIntervalInSeconds` | Cache TTL.  | 60      |

### Manual Polling[â](#manual-polling "Direct link to Manual Polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefresh()` is your application's responsibility.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options ->{
    options.pollingMode(PollingModes.manualPoll());
});

client.forceRefresh();
```

> `getValue()` returns `defaultValue` if the cache is empty. Call `forceRefresh()` to update the cache.

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `onClientReady(ClientCacheState)`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after instantiation.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `ClientCacheState` argument.

* `onConfigChanged(Map<string, Setting>)`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `onFlagEvaluated(EvaluationDetails)`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetails()`](#anatomy-of-getvaluedetails).

* `onError(String)`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on SDK initialization:

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.hooks().addOnFlagEvaluated(details -> {
        /* handle the event */
    });
});
```

or with the `getHooks()` property of the ConfigCat client:

```
client.getHooks().addOnFlagEvaluated(details -> {
    /* handle the event */
});
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

```
client.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

```
client.setOnline();
```

> With `client.isOffline()` you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LOCAL_ONLY`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LOCAL_OVER_REMOTE`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.REMOTE_OVER_LOCAL`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can load your feature flag & setting overrides from a file or from a simple `Map<String, Object>` structure.

### JSON File[â](#json-file "Direct link to JSON File")

The SDK can load your feature flag & setting overrides from a file or classpath resource. You can also specify whether the file should be reloaded when it gets modified.

#### File[â](#file "Direct link to File")

```
ConfigCatClient client = ConfigCatClient.get("localhost", options -> {
    options.flagOverrides(OverrideDataSourceBuilder.localFile(
            "path/to/the/local_flags.json", // path to the file
            true // reload the file when it gets modified
        ),
        OverrideBehaviour.LOCAL_ONLY
    );
});
```

#### Classpath Resource[â](#classpath-resource "Direct link to Classpath Resource")

```
ConfigCatClient client = ConfigCatClient.get("localhost", options -> {
    options.flagOverrides(OverrideDataSourceBuilder.classPathResource(
            "local_flags.json", // name of the resource
            true // reload the resource when it gets modified
        ),
        OverrideBehaviour.LOCAL_ONLY
    );
});
```

#### JSON File Structure[â](#json-file-structure "Direct link to JSON File Structure")

The SDK supports 2 types of JSON structures to describe feature flags & settings.

##### 1. Simple (key-value) structure[â](#1-simple-key-value-structure "Direct link to 1. Simple (key-value) structure")

```
{
  "flags": {
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
  }
}
```

##### 2. Complex (full-featured) structure[â](#2-complex-full-featured-structure "Direct link to 2. Complex (full-featured) structure")

This is the same format that the SDK downloads from the ConfigCat CDN. It allows the usage of all features that are available on the ConfigCat Dashboard.

You can download your current config JSON from ConfigCat's CDN and use it as a baseline.

A convenient way to get the config JSON for a specific SDK Key is to install the [ConfigCat CLI](https://github.com/configcat/cli) tool and execute the following command:

```
configcat config-json get -f v6 -p {YOUR-SDK-KEY} > config.json
```

(Depending on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings, you may need to add the `--eu` switch.)

Alternatively, you can download the config JSON manually, based on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings:

* GLOBAL: `https://cdn-global.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`
* EU: `https://cdn-eu.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`

```
{
  "p": {
    // hash salt, required only when confidential text comparator(s) are used
    "s": "80xCU/SlDz1lCiWFaxIBjyJeJecWjq46T4eu6GtozkM="
  },
  "s": [ // array of segments
    {
      "n": "Beta Users", // segment name
      "r": [ // array of User Conditions (there is a logical AND relation between the elements)
        {
          "a": "Email", // comparison attribute
          "c": 0, // comparator (see below)
          "l": [ // comparison value (see below)
            "john@example.com", "jane@example.com"
          ]
        }
      ]
    }
  ],
  "f": { // key-value map of feature flags & settings
    "isFeatureEnabled": { // key of a particular flag / setting
      "t": 0, // setting type, possible values:
              // 0 -> on/off setting (feature flag)
              // 1 -> text setting
              // 2 -> whole number setting
              // 3 -> decimal number setting
      "r": [ // array of Targeting Rules (there is a logical OR relation between the elements)
        {
          "c": [ // array of conditions (there is a logical AND relation between the elements)
            {
              "u": { // User Condition
                "a": "Email", // comparison attribute
                "c": 2, // comparator, possible values and required comparison value types:
                        // 0  -> IS ONE OF (cleartext) + string array comparison value ("l")
                        // 1  -> IS NOT ONE OF (cleartext) + string array comparison value ("l")
                        // 2  -> CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 3  -> NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 4  -> IS ONE OF (semver) + semver string array comparison value ("l")
                        // 5  -> IS NOT ONE OF (semver) + semver string array comparison value ("l")
                        // 6  -> < (semver) + semver string comparison value ("s")
                        // 7  -> <= (semver + semver string comparison value ("s")
                        // 8  -> > (semver) + semver string comparison value ("s")
                        // 9  -> >= (semver + semver string comparison value ("s")
                        // 10 -> = (number) + number comparison value ("d")
                        // 11 -> <> (number + number comparison value ("d")
                        // 12 -> < (number) + number comparison value ("d")
                        // 13 -> <= (number + number comparison value ("d")
                        // 14 -> > (number) + number comparison value ("d")
                        // 15 -> >= (number) + number comparison value ("d")
                        // 16 -> IS ONE OF (hashed) + string array comparison value ("l")
                        // 17 -> IS NOT ONE OF (hashed) + string array comparison value ("l")
                        // 18 -> BEFORE (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 19 -> AFTER (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 20 -> EQUALS (hashed) + string comparison value ("s")
                        // 21 -> NOT EQUALS (hashed) + string comparison value ("s")
                        // 22 -> STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 23 -> NOT STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 24 -> ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 25 -> NOT ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 26 -> ARRAY CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 27 -> ARRAY NOT CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 28 -> EQUALS (cleartext) + string comparison value ("s")
                        // 29 -> NOT EQUALS (cleartext) + string comparison value ("s")
                        // 30 -> STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 31 -> NOT STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 32 -> ENDS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 33 -> NOT ENDS WITH ANY OF (cleartext + string array comparison value ("l")
                        // 34 -> ARRAY CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 35 -> ARRAY NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                "l": [ // comparison value - depending on the comparator, another type of value may need
                       // to be specified (see above):
                       // "s": string
                       // "d": number
                  "@example.com"
                ]
              }
            },
            {
              "p": { // Flag Condition (Prerequisite)
                "f": "mainIntFlag", // key of prerequisite flag
                "c": 0, // comparator, possible values: 0 -> EQUALS, 1 -> NOT EQUALS
                "v": { // comparison value (value's type must match the prerequisite flag's type)
                  "i": 42
                }
              }
            },
            {
              "s": { // Segment Condition
                "s": 0, // segment index, a valid index into the top-level segment array ("s")
                "c": 1 // comparator, possible values: 0 -> IS IN SEGMENT, 1 -> IS NOT IN SEGMENT
              }
            }
          ],
          "s": { // alternatively, an array of Percentage Options ("p", see below) can also be specified
            "v": { // the value served when the rule is selected during evaluation
              "b": true
            },
            "i": "bcfb84a7"
          }
        }
      ],
      "p": [ // array of Percentage Options
        {
          "p": 10, // % value
          "v": { // the value served when the Percentage Option is selected during evaluation
            "b": true
          },
          "i": "bcfb84a7"
        },
        {
          "p": 90,
          "v": {
            "b": false
          },
          "i": "bddac6ae"
        }
      ],
      "v": { // fallback value, served when none of the Targeting Rules match,
             // no Percentage Options are defined or evaluation of these is not possible
        "b": false // depending on the setting type, another type of value may need to be specified:
                   // text setting -> "s": string
                   // whole number setting -> "i": number
                   // decimal number setting -> "d": number
      },
      "i": "430bded3" // variation id (for analytical purposes)
    }
  }
}
```

For a more comprehensive specification of the config JSON v6 format, you may refer to [this JSON schema document](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

### Map[â](#map "Direct link to Map")

You can set up the SDK to load your feature flag & setting overrides from a `Map<String, Object>`.

```
Map<String, Object> map = new HashMap<>();
map.put("enabledFeature", true);
map.put("disabledFeature", false);
map.put("intSetting", 5);
map.put("doubleSetting", 3.14);
map.put("stringSetting", "test");

ConfigCatClient client = ConfigCatClient.get("localhost", options -> {
    options.flagOverrides(OverrideDataSourceBuilder.map(map), OverrideBehaviour.LOCAL_ONLY)
});
```

## `getAllKeys()`, `getAllKeysAsync()`[â](#getallkeys-getallkeysasync "Direct link to getallkeys-getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeys()` or `getAllKeysAsync()` method.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#");
java.util.Collection<String> keys = client.getAllKeys();
```

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#");
client.getAllKeysAsync().thenAccept(keys -> {
});
```

## `getAllValues()`, `getAllValuesAsync()`[â](#getallvalues-getallvaluesasync "Direct link to getallvalues-getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a User Object is optional.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#");
Map<String, Object> settingValues = client.getAllValues();

// invoke with User Object
User user = User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#")
Map<String, Object> settingValuesTargeting = client.getAllValues(user);
```

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#");
client.getAllValuesAsync().thenAccept(settingValues -> { });

// invoke with User Object
User user = User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#")
client.getAllValuesAsync(user).thenAccept(settingValuesTargeting -> { });
```

## `getAllValueDetails()`, `getAllValueDetailsAsync()`[â](#getallvaluedetails-getallvaluedetailsasync "Direct link to getallvaluedetails-getallvaluedetailsasync")

Evaluates and returns the detailed values of all feature flags and settings. Passing a User Object is optional.

```
User user = User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#");

ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#");
List<EvaluationDetails<Object>> allValueDetails = client.getAllValueDetails(user);
```

```
User user = User.newBuilder().build("#UNIQUE-USER-IDENTIFIER#");

ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#");
client.getAllValueDetailsAsync(user).thenAccept(allValueDetails -> { });
```

## Custom Cache[â](#custom-cache "Direct link to Custom Cache")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can subclass the [`ConfigCache`](https://github.com/configcat/java-sdk/blob/master/src/main/java/com/configcat/ConfigCache.java) abstract class and call the `cache` method with your implementation in the setup callback of `ConfigCatClient.get`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
public class MyCustomCache extends ConfigCache {

    @Override
    public String read(String key) {
        // here you have to return with the cached value
    }

    @Override
    public void write(String key, String value) {
        // here you have to store the new value in the cache
    }
}
```

Then use your custom cache implementation:

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.cache(new MyCustomCache()) // inject your custom cache
});
```

info

The Java SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## HttpClient[â](#httpclient "Direct link to HttpClient")

The ConfigCat SDK internally uses an [OkHttpClient](https://github.com/square/okhttp) instance to download the latest configuration over HTTP. You have the option to override the internal Http client with your customized one.

### HTTP Proxy[â](#http-proxy "Direct link to HTTP Proxy")

If your application runs behind a proxy you can do the following:

```
import java.net.InetSocketAddress;
import java.net.Proxy;

Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("proxyHost", proxyPort));

ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.httpClient(new OkHttpClient.Builder()
            .proxy(proxy)
            .build())
});
```

### HTTP Timeout[â](#http-timeout "Direct link to HTTP Timeout")

You can set the maximum wait time for a ConfigCat HTTP response by using OkHttpClient's timeouts.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.httpClient(new OkHttpClient.Builder()
            .readTimeout(2, TimeUnit.SECONDS) // set the read timeout to 2 seconds
            .build())
});
```

OkHttpClient's default timeout is 10 seconds.

> As the ConfigCatClient SDK maintains the whole lifetime of the internal http client, it's being closed simultaneously with the ConfigCatClient, refrain from closing the http client manually.

## Force refresh[â](#force-refresh "Direct link to Force refresh")

Call the `forceRefresh()` method on the client to download the latest config JSON and update the cache.

## Logging[â](#logging "Direct link to Logging")

The SDK uses the facade of [slf4j](https://www.slf4j.org) for logging, so you can use any of the slf4j implementation packages.

You can change the verbosity of the logs by passing a `LogLevel` parameter to the ConfigCatClientBuilder's `logLevel` function.

```
ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> {
    options.logLevel(LogLevel.INFO);
});
```

Available log levels:

| Level     | Description                                                                             |
| --------- | --------------------------------------------------------------------------------------- |
| `NO_LOG`  | Turn the logging off.                                                                   |
| `ERROR`   | Only error level events are logged.                                                     |
| `WARNING` | Default. Errors and Warnings are logged.                                                |
| `INFO`    | Errors, Warnings and feature flag evaluation is logged.                                 |
| `DEBUG`   | All of the above plus debug info is logged. Debug logs can be different for other SDKs. |

Info level logging helps to inspect how a feature flag was evaluated:

```
INFO com.configcat.ConfigCatClient - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'False' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'True' => MATCH, applying rule
  Returning 'True'.
```

### Logging Implementation[â](#logging-implementation "Direct link to Logging Implementation")

You have the flexibility to use any slf4j implementation for logging with ConfigCat. However, some logger implementations may not display debug level messages by default. In these cases, you simply need to adjust the logger configuration to receive all log messages from the ConfigCat SDK.

Examples fo [slf4j-simple](https://github.com/configcat/java-sdk/blob/master/samples/console/src/main/resources/simplelogger.properties) and [logback](https://github.com/configcat/java-sdk/blob/master/samples/web/src/main/resources/logback.xml) are available under the [Sample Apps](#sample-apps) section.

### Log Filtering[â](#log-filtering "Direct link to Log Filtering")

You can define a custom log filter by implementing the `LogFilterFunction` interface. The `apply` method will be called by the *ConfigCat SDK* each time a log event occurs (and the event passes the minimum log level specified by the `logLevel` option). That is, the `apply` method allows you to filter log events by `logLevel`, `eventId`, `message` or `exception`. The formatted message string can be obtained by calling `toString()` on the `message` parameter. If the `apply` method returns `true`, the event will be logged, otherwise it will be skipped.

```
// Filter out events with id 1001 from the log.
LogFilterFunction filterLogFunction = ( LogLevel logLevel, int eventId, Object message, Throwable exception) -> eventId != 1001;

ConfigCatClient client = ConfigCatClient.get("#YOUR-SDK-KEY#", options -> options.logFilter(filterLogFunction));
```

caution

Please make sure that your log filter logic doesn't perform heavy computation and doesn't block the executing thread. A complex or incorrectly implemented log filter can degrade the performance of the SDK.

## Sample Apps[â](#sample-apps "Direct link to Sample Apps")

Check out our Sample Applications how they use the ConfigCat SDK

* [Simple Console Application](https://github.com/configcat/java-sdk/tree/master/samples/console)
* [Spring Boot Web Application](https://github.com/configcat/java-sdk/tree/master/samples/web)

## Guides[â](#guides "Direct link to Guides")

See [this](https://configcat.com/blog/2022/10/28/using-feature-flags-in-java/) guide on how to use ConfigCat's Java SDK.

## Look Under the Hood[â](#look-under-the-hood "Direct link to Look Under the Hood")

* [ConfigCat Java SDK's repository on GitHub](https://github.com/configcat/java-sdk)
* [ConfigCat Java SDK's javadoc page](https://javadoc.io/doc/com.configcat/configcat-java-client)
* [ConfigCat Java SDK on Maven Central](https://search.maven.org/artifact/com.configcat/configcat-java-client)


---

# Legacy JavaScript (SSR) SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/js-ssr-sdk.svg?style=social)](https://github.com/configcat/js-ssr-sdk/stargazers) [![JS-SSR CI](https://github.com/configcat/js-ssr-sdk/actions/workflows/js-ssr-ci.yml/badge.svg?branch=master)](https://github.com/configcat/js-ssr-sdk/actions/workflows/js-ssr-ci.yml) [![codecov](https://codecov.io/gh/configcat/js-ssr-sdk/branch/master/graph/badge.svg)](https://codecov.io/gh/configcat/js-ssr-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/js-ssr-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/js-ssr-sdk?targetFile=package.json)

caution

This SDK is superseded by the new [Browser (JavaScript) SDK](https://configcat.com/docs/docs/sdk-reference/js/browser/.md).

This legacy SDK is in maintenance mode now, it will receive only critical security patches until **official support ends on August 31, 2026**.

For guidance on migration, see [this section](#migration-to-the-new-sdk).

info

This SDK is for Server-Side Rendered JavaScript frameworks like [NuxtJS](https://nuxtjs.org).

[ConfigCat JavaScript (SSR) SDK on GitHub](https://github.com/configcat/js-ssr-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install and import package[â](#1-install-and-import-package "Direct link to 1. Install and import package")

*via NPM:*

```
npm i configcat-js-ssr
```

```
import * as configcat from 'configcat-js-ssr';
```

### 2. Create the *ConfigCat* client with your SDK Key[â](#2-create-the-configcat-client-with-your-sdk-key "Direct link to 2-create-the-configcat-client-with-your-sdk-key")

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');
```

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

The async/await way:

```
const value = await configCatClient.getValueAsync(
  'isMyAwesomeFeatureEnabled',
  false,
);

if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```

(Please note that [top-level await in modules](https://exploringjs.com/js/book/ch_modules.html#top-level-await) is available only if your project is [set up to use the ECMAScript module system](https://nodejs.org/api/esm.html). Otherwise you will need either to use Promises or wrap your code in an async function as shown [here](https://github.com/configcat/node-sdk/blob/master/samples/console/index.js).)

The Promise way:

```
configCatClient
  .getValueAsync('isMyAwesomeFeatureEnabled', false)
  .then((value) => {
    if (value) {
      do_the_new_thing();
    } else {
      do_the_old_thing();
    }
  });
```

### 4. Dispose the *ConfigCat* client[â](#4-dispose-the-configcat-client "Direct link to 4-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
configcat.disposeAllClients(); // disposes all clients
// -or-
configCatClient.dispose(); // disposes a specific client
```

## Creating the *ConfigCat* Client[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.getClient('<sdkKey>')` returns a client with default options.

The `getClient` function has optional parameters, which can be used to adjust the behavior of the client.

| Parameters    | Description                                                                                                                    | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from the *ConfigCat Dashboard*.                        | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes). | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                             | -                      |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                 |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/common-js/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                                | [`ConfigCatConsoleLogger`](https://github.com/configcat/common-js/blob/master/src/ConfigCatLogger.ts) (with WARN level) |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                   |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                         |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                 |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                            | [`InMemoryConfigCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts)                       |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     | -                                                                                                                       |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                      |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                 |

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('clientReady', () => console.log('Client is ready!')),
  },
);
```

info

You can acquire singleton client instances for your SDK keys using the `configcat.getClient(sdkKey: "<sdkKey>")` factory function. (However, please keep in mind that subsequent calls to `getClient()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `configcat.disposeAllClients()` function or do it individually using the `configCatClient.dispose()` method.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

Returns a Promise with the value.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
);
```

or

```
configCatClient
  .getValueAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
  )
  .then((value) => {
    console.log(value);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the return type of the `getValue` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`getValueDetailsAsync()` is similar to `getValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const details = await configCatClient.getValueDetailsAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
);
```

or

```
configCatClient
  .getValueDetailsAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
  )
  .then((details) => {
    console.log(details);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                            | Description                                                                                                |
| ------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                     | `string`                        | The key of the evaluated feature flag or setting.                                                          |
| `value`                   | `boolean` / `string` / `number` | The evaluated value of the feature flag or setting.                                                        |
| `user`                    | `User`                          | The User Object used for the evaluation.                                                                   |
| `isDefaultValue`          | `boolean`                       | True when the default value passed to `getValueDetailsAsync()` is returned due to an error.                |
| `errorMessage`            | `string`                        | In case of an error, this property contains the error message.                                             |
| `errorException`          | `any`                           | In case of an error, this property contains the related exception object (if any).                         |
| `matchedTargetingRule`    | `ITargetingRule`                | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageOption` | `IPercentageOption`             | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetchTime`               | `Date`                          | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
let userObject = new configcat.User('#UNIQUE-USER-IDENTIFIER#');
```

```
let userObject = new configcat.User('john@example.com');
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
let userObject = new configcat.User(
  /* identifier: */ '#UNIQUE-USER-IDENTIFIER#',
  /*      email: */ 'john@example.com',
  /*    country: */ 'United Kingdom',
  /*     custom: */ {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
);
```

The `custom` dictionary also allows attribute values other than `string` values:

```
let userObject = new configcat.User('#UNIQUE-USER-IDENTIFIER#');
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    defaultUser: new configcat.User('john@example.com'),
  },
);
```

...or using the `setDefaultUser()` method of the `configCatClient` object:

```
configCatClient.setDefaultUser(new configcat.User('john@example.com'));
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
const user = new configcat.User('john@example.com');
configCatClient.setDefaultUser(user);

// The default user will be used in the evaluation process.
const value = await configCatClient.getValueAsync('keyOfMyFeatureFlag', false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const user = new configcat.User('john@example.com');
configCatClient.setDefaultUser(user);

const otherUser = new configcat.User('brian@example.com');

// otherUser will be used in the evaluation process.
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag',
  false,
  otherUser,
);
```

You can also remove the default user by doing the following:

```
configCatClient.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    pollIntervalSeconds: 95,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.LazyLoad,
  {
    cacheTimeToLiveSeconds: 600,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

await configCatClient.forceRefreshAsync();
let value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

> `getValueAsync()` returns `defaultValue` if the cache is empty. Call `forceRefreshAsync()` to update the cache.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

let value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value); // console: "my default value"

await configCatClient.forceRefreshAsync();
value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', () => {
        /* handle the event */
      }),
  },
);
```

...or directly on the `ConfigCatClient` instance:

```
configCatClient.on('flagEvaluated', () => {
  /* handle the event */
});
```

## Snapshots and synchronous feature flag evaluation[â](#snapshots-and-synchronous-feature-flag-evaluation "Direct link to Snapshots and synchronous feature flag evaluation")

On JavaScript platforms, the *ConfigCat* client provides only asynchronous methods for evaluating feature flags and settings because these operations may involve network communication (e.g. downloading config data from the ConfigCat CDN servers), which is necessarily an asynchronous operation in JavaScript.

However, there can be circumstances where synchronous evaluation is preferable, thus, since v7.1.0, the JavaScript (SSR) SDK provides a way to synchronously evaluate feature flags and settings via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
);

// Wait for the client to initialize.
await configCatClient.waitForReady();

const snapshot = configCatClient.snapshot();

const user = new configcat.User('#UNIQUE-USER-IDENTIFIER#');
for (const key of snapshot.getAllKeys()) {
  const value = snapshot.getValue(key, null, user);
  console.log(`${key}: ${value}`);
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
const clientCacheState = await configCatClient.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  // Handle initialization failure (see below).
  console.warn('ConfigCat client failed to obtain the config data during initialization.');
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `configChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
configCatClient.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
configCatClient.setOnline();
```

Using the `configCatClient.isOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` map.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: configcat.createFlagOverridesFromMap(
      {
        enabledFeature: true,
        disabledFeature: false,
        intSetting: 5,
        doubleSetting: 3.14,
        stringSetting: 'test',
      },
      configcat.OverrideBehaviour.LocalOnly,
    ),
  },
);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: configcat.createConsoleLogger(configcat.LogLevel.Info), // Setting log level to Info
  },
);
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
// set the `MyCustomLogger` implementation on creating the client instance

const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: new MyCustomLogger(),
  },
);
```

## `getAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeysAsync()` method.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

const keys = await configCatClient.getAllKeysAsync();
console.log(keys);
```

## `getAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValuesAsync();
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);

// invoke with User Object
const userObject = new configcat.User('john@example.com');

settingValues = await configCatClient.getAllValuesAsync(userObject);
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);
```

## `getAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValueDetailsAsync();
settingValues.forEach((details) => console.log(details));

// invoke with User Object
const userObject = new configcat.User('john@example.com');

settingValues = await configCatClient.getAllValueDetailsAsync(userObject);
settingValues.forEach((details) => console.log(details));
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `getClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
// set the `MyCustomCache` implementation on creating the client instance

const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    cache: new MyCustomCache(),
  },
);
```

info

The JavaScript (SSR) SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the *ConfigCat SDK* that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Browser compatibility[â](#browser-compatibility "Direct link to Browser compatibility")

This SDK should be compatible with all modern browsers.

The SDK is [tested](https://github.com/configcat/js-ssr-sdk/blob/master/.github/workflows/js-ssr-ci.yml) against the following browsers:

* Chrome (stable, latest, beta)
* Chromium (64.0.3282.0, 72.0.3626.0, 80.0.3987.0)
* Firefox (latest, latest-beta, 84.0).

These tests are running on each pull request, before each deploy, and on a daily basis. You can view a sample run [here](https://github.com/configcat/js-ssr-sdk/actions/runs/6400037904).

## Next.js/AWS lambda recommendation[â](#nextjsaws-lambda-recommendation "Direct link to Next.js/AWS lambda recommendation")

If the SDK is running in a Next.js application that is hosted on Vercel (AWS lambda) or your application is hosted directly in AWS lambdas, it is recommended to use the SDK in Lazy loading or Manual polling mode instead of the default Auto polling mode.

As AWS lamdbas try to minimize their uptime, the applications are terminated as soon as the sytem detects inactivity in the application.

The Auto polling mode is using a background thread to acquire the setting values from the ConfigCat servers periodically and the AWS lambda does not detect it as a running application and terminates it.

However, it can easily happen that there is an ongoing HTTP GET call towards our servers and this termination can cause errors. The most possible error message in this case is `Request timed out while trying to fetch config JSON.`.

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

* [NuxtJS](https://github.com/configcat/js-ssr-sdk/tree/master/samples/nuxt-ssr)

## Guides[â](#guides "Direct link to Guides")

See the guides on how to use ConfigCat's JavaScript SSR SDK with the following libraries and frameworks:

* [NuxtJS](https://configcat.com/blog/2022/07/01/how-to-use-feature-flags-in-nuxtjs/)
* [NextJS](https://configcat.com/blog/2022/04/22/how-to-use-feature-flags-in-nextjs/)
* [Remix](https://configcat.com/blog/2022/04/01/feature-flags-in-remix/)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat JavaScript (SSR) SDK on GitHub](https://github.com/configcat/js-ssr-sdk)
* [ConfigCat JavaScript (SSR) SDK in NPM](https://www.npmjs.com/package/configcat-js-ssr)

## Migration to the new SDK[â](#migration-to-the-new-sdk "Direct link to Migration to the new SDK")

The new SDK maintains strong backward compatibility, so migration is typically as simple as:

1. Replacing the old NPM package with the new one.

   ```
   npm uninstall configcat-js-ssr
   npm i @configcat/sdk
   ```

2. Adjusting the `import` statements, i.e., replacing

   ```
   import * as configcat from 'configcat-js-ssr';
   ```

   * with the following in client contexts:

     ```
     import * as configcat from '@configcat/sdk/browser';
     ```

   * with the following in server contexts:

     ```
     import * as configcat from '@configcat/sdk/node';
     ```

   * with the following if your code needs to run in both contexts:

     ```
     import * as configcat from '@configcat/sdk';
     ```

   In the case of bundler compatibility or TypeScript issues, refer to [this documentation](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#1-install-and-import-package).

And usually, that's all there is to it! ð

If you encounter issues, please note these minor breaking changes which may require further adjustments:

* The config model has been reworked. Interfaces like `IConfig`, `ITargetingRule`, `IPercentageOption` have been replaced with different types (`Config`, `TargetingRule`, `PercentageOption`, etc.)
* The `IEvaluationDetails` interface has been deprecated in favor of the new, more accurate `EvaluationDetails` discriminated union type. Although the old type is structurally compatible with the new, it's recommended to use the new one for improved type narrowing.
* The `RefreshResult` class has been replaced with a new, more accurate discriminated union type with the same name. In most cases, no further action is necessary on your part. However, you can no longer create instances of it using `new RefreshResult`, `RefreshResult.success()`, etc.

For a more comprehensive list of breaking changes, see the [release notes](https://github.com/configcat/js-unified-sdk/releases/tag/v1.0.0).


---

# Legacy JavaScript SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/js-sdk.svg?style=social)](https://github.com/configcat/js-sdk/stargazers) [![JS CI](https://github.com/configcat/js-sdk/actions/workflows/js-ci.yml/badge.svg?branch=master)](https://github.com/configcat/js-sdk/actions/workflows/js-ci.yml) [![codecov](https://codecov.io/gh/configcat/js-sdk/branch/master/graph/badge.svg)](https://codecov.io/gh/configcat/js-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/js-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/js-sdk?targetFile=package.json) [![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=configcat_js-sdk\&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=configcat_js-sdk) [![JSDELIVR](https://data.jsdelivr.com/v1/package/npm/configcat-js/badge)](https://www.jsdelivr.com/package/npm/configcat-js)

caution

This SDK is superseded by the new [Browser (JavaScript) SDK](https://configcat.com/docs/docs/sdk-reference/js/browser/.md).

This legacy SDK is in maintenance mode now, it will receive only critical security patches until **official support ends on August 31, 2026**.

For guidance on migration, see [this section](#migration-to-the-new-sdk).

[ConfigCat JavaScript SDK on GitHub](https://github.com/configcat/js-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install and import package[â](#1-install-and-import-package "Direct link to 1. Install and import package")

* NPM
* CDN

```
npm i configcat-js
```

```
import * as configcat from 'configcat-js';
```

```
<script
  type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/configcat-js@latest/dist/configcat.min.js">
</script>
```

### 2. Create the *ConfigCat* client with your SDK Key[â](#2-create-the-configcat-client-with-your-sdk-key "Direct link to 2-create-the-configcat-client-with-your-sdk-key")

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');
```

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

The async/await way:

```
const value = await configCatClient.getValueAsync(
  'isMyAwesomeFeatureEnabled',
  false,
);

if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```

(Please note that [top-level await in modules](https://exploringjs.com/js/book/ch_modules.html#top-level-await) may not be available [in older browsers](https://caniuse.com/mdn-javascript_operators_await_top_level). If you need to target such browser versions, you will need to use Promises or wrap your code in an async function or configure your build tools to downlevel this language feature.)

The Promise way:

```
configCatClient
  .getValueAsync('isMyAwesomeFeatureEnabled', false)
  .then((value) => {
    if (value) {
      do_the_new_thing();
    } else {
      do_the_old_thing();
    }
  });
```

### 4. Dispose the *ConfigCat* client[â](#4-dispose-the-configcat-client "Direct link to 4-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
configcat.disposeAllClients(); // disposes all clients
// -or-
configCatClient.dispose(); // disposes a specific client
```

## Working Demo on CodePen[â](#working-demo-on-codepen "Direct link to Working Demo on CodePen")

See the Pen [ConfigCat Feature Flag Demo](https://codepen.io/configcat/pen/pozaLLV) on [CodePen](https://codepen.io).

## Creating the *ConfigCat* Client[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.getClient('<sdkKey>')` returns a client with default options.

The `getClient` function has optional parameters, which can be used to adjust the behavior of the client.

| Parameters    | Description                                                                                                                    | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from the *ConfigCat Dashboard*.                        | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes). | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                             | -                      |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                 |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/common-js/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                                | [`ConfigCatConsoleLogger`](https://github.com/configcat/common-js/blob/master/src/ConfigCatLogger.ts) (with WARN level) |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                   |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                         |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                 |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                            | [`InMemoryConfigCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts)                       |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     | -                                                                                                                       |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                      |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                 |

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('clientReady', () => console.log('Client is ready!')),
  },
);
```

info

You can acquire singleton client instances for your SDK keys using the `configcat.getClient(sdkKey: "<sdkKey>")` factory function. (However, please keep in mind that subsequent calls to `getClient()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `configcat.disposeAllClients()` function or do it individually using the `configCatClient.dispose()` method.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

Returns a Promise with the value.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
);
```

or

```
configCatClient
  .getValueAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
  )
  .then((value) => {
    console.log(value);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the return type of the `getValue` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`getValueDetailsAsync()` is similar to `getValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const details = await configCatClient.getValueDetailsAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
);
```

or

```
configCatClient
  .getValueDetailsAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
  )
  .then((details) => {
    console.log(details);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                            | Description                                                                                                |
| ------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                     | `string`                        | The key of the evaluated feature flag or setting.                                                          |
| `value`                   | `boolean` / `string` / `number` | The evaluated value of the feature flag or setting.                                                        |
| `user`                    | `User`                          | The User Object used for the evaluation.                                                                   |
| `isDefaultValue`          | `boolean`                       | True when the default value passed to `getValueDetailsAsync()` is returned due to an error.                |
| `errorMessage`            | `string`                        | In case of an error, this property contains the error message.                                             |
| `errorException`          | `any`                           | In case of an error, this property contains the related exception object (if any).                         |
| `matchedTargetingRule`    | `ITargetingRule`                | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageOption` | `IPercentageOption`             | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetchTime`               | `Date`                          | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
let userObject = new configcat.User('#UNIQUE-USER-IDENTIFIER#');
```

```
let userObject = new configcat.User('john@example.com');
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
let userObject = new configcat.User(
  /* identifier: */ '#UNIQUE-USER-IDENTIFIER#',
  /*      email: */ 'john@example.com',
  /*    country: */ 'United Kingdom',
  /*     custom: */ {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
);
```

The `custom` dictionary also allows attribute values other than `string` values:

```
let userObject = new configcat.User('#UNIQUE-USER-IDENTIFIER#');
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    defaultUser: new configcat.User('john@example.com'),
  },
);
```

...or using the `setDefaultUser()` method of the `configCatClient` object:

```
configCatClient.setDefaultUser(new configcat.User('john@example.com'));
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
const user = new configcat.User('john@example.com');
configCatClient.setDefaultUser(user);

// The default user will be used in the evaluation process.
const value = await configCatClient.getValueAsync('keyOfMyFeatureFlag', false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const user = new configcat.User('john@example.com');
configCatClient.setDefaultUser(user);

const otherUser = new configcat.User('brian@example.com');

// otherUser will be used in the evaluation process.
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag',
  false,
  otherUser,
);
```

You can also remove the default user by doing the following:

```
configCatClient.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    pollIntervalSeconds: 95,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.LazyLoad,
  {
    cacheTimeToLiveSeconds: 600,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

await configCatClient.forceRefreshAsync();
let value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

> `getValueAsync()` returns `defaultValue` if the cache is empty. Call `forceRefreshAsync()` to update the cache.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

let value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value); // console: "my default value"

await configCatClient.forceRefreshAsync();
value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', () => {
        /* handle the event */
      }),
  },
);
```

...or directly on the `ConfigCatClient` instance:

```
configCatClient.on('flagEvaluated', () => {
  /* handle the event */
});
```

## Snapshots and synchronous feature flag evaluation[â](#snapshots-and-synchronous-feature-flag-evaluation "Direct link to Snapshots and synchronous feature flag evaluation")

On JavaScript platforms, the *ConfigCat* client provides only asynchronous methods for evaluating feature flags and settings because these operations may involve network communication (e.g. downloading config data from the ConfigCat CDN servers), which is necessarily an asynchronous operation in JavaScript.

However, there can be circumstances where synchronous evaluation is preferable, thus, since v8.1.0, the JavaScript SDK provides a way to synchronously evaluate feature flags and settings via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
);

// Wait for the client to initialize.
await configCatClient.waitForReady();

const snapshot = configCatClient.snapshot();

const user = new configcat.User('#UNIQUE-USER-IDENTIFIER#');
for (const key of snapshot.getAllKeys()) {
  const value = snapshot.getValue(key, null, user);
  console.log(`${key}: ${value}`);
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
const clientCacheState = await configCatClient.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  // Handle initialization failure (see below).
  console.warn('ConfigCat client failed to obtain the config data during initialization.');
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `configChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
configCatClient.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
configCatClient.setOnline();
```

Using the `configCatClient.isOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` map.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: configcat.createFlagOverridesFromMap(
      {
        enabledFeature: true,
        disabledFeature: false,
        intSetting: 5,
        doubleSetting: 3.14,
        stringSetting: 'test',
      },
      configcat.OverrideBehaviour.LocalOnly,
    ),
  },
);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: configcat.createConsoleLogger(configcat.LogLevel.Info), // Setting log level to Info
  },
);
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
// set the `MyCustomLogger` implementation on creating the client instance

const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: new MyCustomLogger(),
  },
);
```

## `getAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeysAsync()` method.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

const keys = await configCatClient.getAllKeysAsync();
console.log(keys);
```

## `getAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValuesAsync();
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);

// invoke with User Object
const userObject = new configcat.User('john@example.com');

settingValues = await configCatClient.getAllValuesAsync(userObject);
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);
```

## `getAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValueDetailsAsync();
settingValues.forEach((details) => console.log(details));

// invoke with User Object
const userObject = new configcat.User('john@example.com');

settingValues = await configCatClient.getAllValueDetailsAsync(userObject);
settingValues.forEach((details) => console.log(details));
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `getClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
// set the `MyCustomCache` implementation on creating the client instance

const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    cache: new MyCustomCache(),
  },
);
```

info

The JavaScript SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the *ConfigCat SDK* that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Browser compatibility[â](#browser-compatibility "Direct link to Browser compatibility")

This SDK should be compatible with all modern browsers.

The SDK is [tested](https://github.com/configcat/js-sdk/blob/master/.github/workflows/js-ci.yml) against the following browsers:

* Chrome (stable, latest, beta)
* Chromium (64.0.3282.0, 72.0.3626.0, 80.0.3987.0)
* Firefox (latest, latest-beta, 84.0).

These tests are running on each pull request, before each deploy, and on a daily basis. You can view a sample run [here](https://github.com/configcat/js-sdk/actions/runs/6399980215).

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

* [Angular 2+](https://github.com/configcat/js-sdk/tree/master/samples/angular-sample)
* [React](https://github.com/configcat/js-sdk/tree/master/samples/react-sample)
* [Pure HTML + JS](https://github.com/configcat/js-sdk/tree/master/samples/html)

## Guides[â](#guides "Direct link to Guides")

See the guides on how to use ConfigCat's JavaScript SDK with the following libraries and frameworks:

* [React](https://configcat.com/blog/2021/12/13/feature-flags-in-react/)
* [Angular](https://configcat.com/blog/2022/08/09/using-feature-flags-in-angular/)
* [VueJS](https://configcat.com/blog/2022/01/28/how-to-use-feature-flag-in-vuejs/)
* [Ionic](https://configcat.com/blog/2022/07/29/how-to-use-feature-flags-in-ionic-js/)
* [Phaser](https://configcat.com/blog/2022/02/04/feature-flags-in-phaser/)
* [Solid.js](https://configcat.com/blog/2022/11/11/how-to-use-feature-flags-in-solidjs/)
* [melonJS](https://configcat.com/blog/2022/02/19/feature-flags-in-melonjs/)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat JavaScript SDK on GitHub](https://github.com/configcat/js-sdk)
* [ConfigCat JavaScript SDK in NPM](https://www.npmjs.com/package/configcat-js)

## Migration to the new SDK[â](#migration-to-the-new-sdk "Direct link to Migration to the new SDK")

The new SDK maintains strong backward compatibility, so migration is typically as simple as:

1. Replacing the old NPM package with the new one.

   ```
   npm uninstall configcat-js
   npm i @configcat/sdk
   ```

2. Adjusting the `import` statements, i.e., replacing

   ```
   import * as configcat from 'configcat-js';
   ```

   with

   ```
   import * as configcat from '@configcat/sdk/browser';
   ```

   In the case of bundler compatibility or TypeScript issues, refer to [this documentation](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#1-install-and-import-package).

And usually, that's all there is to it! ð

If you encounter issues, please note these minor breaking changes which may require further adjustments:

* The config model has been reworked. Interfaces like `IConfig`, `ITargetingRule`, `IPercentageOption` have been replaced with different types (`Config`, `TargetingRule`, `PercentageOption`, etc.)
* The `IEvaluationDetails` interface has been deprecated in favor of the new, more accurate `EvaluationDetails` discriminated union type. Although the old type is structurally compatible with the new, it's recommended to use the new one for improved type narrowing.
* The `RefreshResult` class has been replaced with a new, more accurate discriminated union type with the same name. In most cases, no further action is necessary on your part. However, you can no longer create instances of it using `new RefreshResult`, `RefreshResult.success()`, etc.

For a more comprehensive list of breaking changes, see the [release notes](https://github.com/configcat/js-unified-sdk/releases/tag/v1.0.0).


---

# Browser (JavaScript) SDK

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

[![Star on GitHub](https://img.shields.io/github/stars/configcat/js-unified-sdk.svg?style=social)](https://github.com/configcat/js-unified-sdk/stargazers) [![JS SDK CI](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml/badge.svg?branch=master)](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml) [![SonarCloud Coverage](https://img.shields.io/sonar/coverage/configcat_js-unified-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_js-unified-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/js-unified-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/js-unified-sdk?targetFile=package.json) [![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=configcat_js-sdk\&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=configcat_js-sdk) [![JSDELIVR](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)

<!-- -->

info

This SDK supersedes the legacy [JavaScript SDK](https://configcat.com/docs/docs/sdk-reference/js/.md) and [JavaScript (SSR) SDK](https://configcat.com/docs/docs/sdk-reference/js-ssr/.md).

It is suitable for the following types of browser applications:

* Static HTML websites
* Server-side rendered Multi-Page Applications (MPA), e.g. PHP, ASP.NET Core Razor Pages, Spring MVC, etc.
* Client-side rendered Single-Page Applications (SPA), e.g. Angular, React, Vue.js, etc.
* Server-side rendered Single-Page Applications (SSR), e.g. Angular SSR, Next.js, Nuxt, etc.
* Prerendered Single/Multi-Page Applications (SSG), e.g. Angular SSG, Vue.js SSG, Astro, etc.
* Web Workers

<!-- -->

[ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install and import package[â](#1-install-and-import-package "Direct link to 1. Install and import package")

<!-- -->

<!-- -->

* via NPM
* via CDN

First install the [NPM package](https://npmjs.com/package/@configcat/sdk):

```
npm i @configcat/sdk
```

Then import it into your application:

```
import * as configcat from "@configcat/sdk/browser";
```

info

**In SSR/SSG applications**, you can either import from `@configcat/sdk/node` or `@configcat/sdk/browser` depending on whether your code executes in a server or client context, or import from the uniform main entry point `@configcat/sdk` if your code needs to run in both contexts.

info

For subpath imports to work **in TypeScript**, you must set the [moduleResolution](https://www.typescriptlang.org/tsconfig/#moduleResolution) option to `node16`, `nodenext` or `bundler` in your `tsconfig.json`. For TypeScript versions older than 4.7, where these options are not available, you need to fall back to module resolution `node` and importing from the main entry point `@configcat/sdk`.

info

Please note that subpath imports require your bundler to support the [exports](https://nodejs.org/api/packages.html#exports) package.json field, introduced in Node.js v12.7. **In the unlikely case of bundler compatibility issues**, you can fall back to importing from the main entry point `@configcat/sdk` as long as your bundler recognizes the [browser](https://github.com/defunctzombie/package-browser-field-spec) package.json field.

Import the package directly from a CDN server into your application:

```
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@configcat/sdk@latest/dist/configcat.browser.umd.min.js"></script>
```

or

```
<script type="module">
  import * as configcat from "https://cdn.jsdelivr.net/npm/@configcat/sdk@latest/dist/configcat.browser.esm.min.js";
</script>
```

<!-- -->

### 2. Create the *ConfigCat* client with your SDK Key[â](#2-create-the-configcat-client-with-your-sdk-key "Direct link to 2-create-the-configcat-client-with-your-sdk-key")

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');
```

<!-- -->

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

The async/await way:

```
const value = await configCatClient.getValueAsync(
  'isMyAwesomeFeatureEnabled',
  false,
);

if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```

info

Please note that [top-level await in modules](https://exploringjs.com/js/book/ch_modules.html#top-level-await) may not be available [in older browsers](https://caniuse.com/mdn-javascript_operators_await_top_level). If you need to target such browser versions, you will need to use Promises, wrap your code in an async function or configure your build tools to downlevel this language feature.

<!-- -->

The Promise way:

```
configCatClient
  .getValueAsync('isMyAwesomeFeatureEnabled', false)
  .then((value) => {
    if (value) {
      do_the_new_thing();
    } else {
      do_the_old_thing();
    }
  });
```

The *ConfigCat SDK* also offers a synchronous API for feature flag evaluation. Read more [here](#snapshots-and-synchronous-feature-flag-evaluation).

### 4. Dispose the *ConfigCat* client[â](#4-dispose-the-configcat-client "Direct link to 4-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
configcat.disposeAllClients(); // disposes all clients
// -or-
configCatClient.dispose(); // disposes a specific client
```

## Demo on CodePen[â](#demo-on-codepen "Direct link to Demo on CodePen")

See the Pen [ConfigCat Feature Flag Demo](https://codepen.io/configcat/pen/myemzYW) on [CodePen](https://codepen.io).

## Creating the *ConfigCat* Client[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.getClient('<sdkKey>')` returns a client with default options.

The `getClient` function has optional parameters, which can be used to adjust the behavior of the client.

| Parameters    | Description                                                                                                                    | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from *ConfigCat Dashboard*.                            | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes). | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                             | -                      |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

<!-- -->

<!-- -->

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                                                                                                                                               |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `configFetcher`    | Custom [`IConfigCatConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigFetcher.ts) instance for downloading a config.                                                                                                                                                                               | [`XmlHttpRequestConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/browser/XmlHttpRequestConfigFetcher.ts)                                                                                                                   |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                       | [`LocalStorageConfigCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/browser/LocalStorageConfigCache.ts) or e [`IndexedDBConfigCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/shared/IndexedDBConfigCache.ts) |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                           | [`ConfigCatConsoleLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) (with WARN level)                                                                                                                          |
| `logFilter`        | Sets a custom log filter. [More about log filtering](#log-filtering).                                                                                                                                                                                                                                                             | `undefined` (none)                                                                                                                                                                                                                                    |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                       |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                                                                                                                                                 |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                       |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                                                                                                                                               |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                                                                                                                                                    |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                                                                                                                                               |

<!-- -->

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    setupHooks: (hooks) => hooks.on('clientReady', function() {
      const keys = this.configCatClient.snapshot().getAllKeys();
      console.log(`Client is ready! Number of available feature flags: ${keys.length}`);
    }),
  },
);
```

info

You can acquire singleton client instances for your SDK keys using the `configcat.getClient(sdkKey: "<sdkKey>")` factory function. (However, please keep in mind that subsequent calls to `getClient()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `configcat.disposeAllClients()` function or do it individually using the `configCatClient.dispose()` method.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

Returns a Promise with the value.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((value) => {
    console.log(value);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the return type of the `getValue` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`getValueDetailsAsync()` is similar to `getValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const details = await configCatClient.getValueDetailsAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueDetailsAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((details) => {
    console.log(details);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                            | Description                                                                                                |
| ------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                     | `string`                        | The key of the evaluated feature flag or setting.                                                          |
| `value`                   | `boolean` / `string` / `number` | The evaluated value of the feature flag or setting.                                                        |
| `user`                    | `User`                          | The User Object used for the evaluation.                                                                   |
| `isDefaultValue`          | `boolean`                       | True when the default value passed to `getValueDetailsAsync()` is returned due to an error.                |
| `errorCode`               | `EvaluationErrorCode`           | In case of an error, this property contains a code that identifies the reason for the error.               |
| `errorMessage`            | `string`                        | In case of an error, this property contains the error message.                                             |
| `errorException`          | `any`                           | In case of an error, this property contains the related exception object (if any).                         |
| `matchedTargetingRule`    | `TargetingRule`                 | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageOption` | `PercentageOption`              | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetchTime`               | `Date`                          | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
```

```
const userObject = { identifier: 'john@example.com' };
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
const userObject = {
  identifier: '#UNIQUE-USER-IDENTIFIER#',
  email: 'john@example.com',
  country: 'United Kingdom',
  custom: {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
};
```

The `custom` dictionary also allows attribute values other than `string` values:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    defaultUser: { identifier: 'john@example.com' },
  },
);
```

...or using the `setDefaultUser()` method of the `configCatClient` object:

```
configCatClient.setDefaultUser({ identifier: 'john@example.com' });
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

// The default user will be used in the evaluation process.
const value = await configCatClient.getValueAsync('keyOfMyFeatureFlag', false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

const otherUser = { identifier: 'brian@example.com' };

// otherUser will be used in the evaluation process.
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag',
  false,
  otherUser,
);
```

You can also remove the default user by doing the following:

```
configCatClient.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    pollIntervalSeconds: 95,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.LazyLoad,
  {
    cacheTimeToLiveSeconds: 600,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

await configCatClient.forceRefreshAsync();
const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

> `getValueAsync()` returns `defaultValue` if the cache is empty. Call `forceRefreshAsync()` to update the cache.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value); // console: "my default value"

await configCatClient.forceRefreshAsync();
value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configFetched: [result: RefreshResult, isInitiatedByUser: boolean]`: This event is emitted each time the client attempts to refresh the cached config by fetching the latest version from the ConfigCat CDN. It is emitted not only when `ForceRefreshAsync` is called but also when the refresh is initiated by the client automatically. Thus, this event allows you to observe potential network issues that occur under the hood.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', function() {
        /* handle the event */
      }),
  },
);
```

...or directly on the `ConfigCatClient` instance:

```
configCatClient.on('flagEvaluated', function() {
  /* handle the event */
});
```

caution

Some events (e.g. `clientReady`, `configChanged` and `clientError`) may be emitted before `getClient` returns. This means you may miss them unless you subscribe on initialization.

However, even if you do, there's another gotcha: it's not safe to use the outer `configCatClient` variable in your event handler because it may not yet be assigned when the handler is called. Instead, you can safely access the client instance via `this.configCatClient` - provided that the event handler is a normal function, not an arrow function.

## Snapshots and synchronous feature flag evaluation[â](#snapshots-and-synchronous-feature-flag-evaluation "Direct link to Snapshots and synchronous feature flag evaluation")

On JavaScript platforms, the *ConfigCat* client provides only asynchronous methods for evaluating feature flags and settings because these operations may involve network communication (e.g. downloading config data from the ConfigCat CDN servers), which is necessarily an asynchronous operation in JavaScript.

However, there can be circumstances where synchronous evaluation is preferable, thus, since v8.1.0, the JavaScript SDK provides a way to synchronously evaluate feature flags and settings via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
);

// Wait for the client to initialize.
await configCatClient.waitForReady();

const snapshot = configCatClient.snapshot();

const user = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
for (const key of snapshot.getAllKeys()) {
  const value = snapshot.getValue(key, null, user);
  console.log(`${key}: ${value}`);
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
const clientCacheState = await configCatClient.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  // Handle initialization failure (see below).
  console.warn('ConfigCat client failed to obtain the config data during initialization.');
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `configChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
configCatClient.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
configCatClient.setOnline();
```

Using the `configCatClient.isOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` object<!-- -->, from the current query string<!-- --> or from a custom flag override data source.

### Map[â](#map "Direct link to Map")

You can specify simple feature flag & setting overrides using a `{ [key: string]: boolean | string | number }` map.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: configcat.createFlagOverridesFromMap(
      {
        enabledFeature: true,
        disabledFeature: false,
        intSetting: 5,
        doubleSetting: 3.14,
        stringSetting: 'test',
      },
      configcat.OverrideBehaviour.LocalOnly,
    ),
  },
);
```

### Query string[â](#query-string "Direct link to Query string")

It is also possible to override feature flags & settings using query string parameters.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: createFlagOverridesFromQueryParams(configcat.OverrideBehaviour.LocalOverRemote),
  },
);
```

With that setup, you can override feature flags and settings by appending query string parameters to the URL of your application in the following form: `https://app.example.com/?cc-myBooleanFlag=true&cc-myStringSetting=abc&...`

The setting type is automatically inferred from the value. Please pay attention to this behavior. The inferred type of the value must match the type of the feature flag or setting you override (see also [this table](#setting-type-mapping)). In case you want to force a boolean or number value to be interpreted as a string value, use the `;str` suffix: `&cc-myStringSetting;str=true`.

If the default prefix used to differentiate between normal and flag override query string parameters (`cc-`) is not suitable for you, you can set a custom prefix using the corresponding optional parameter of `createFlagOverridesFromQueryParams`.

### Custom data source implementation[â](#custom-data-source-implementation "Direct link to Custom data source implementation")

You can create a custom flag override data source by implementing `IOverrideDataSource`.

The SDK provides the `createSettingFromValue` function to create `Setting` objects from simple `boolean`, `string` and `number` values. In case you need complex (full-featured) flag overrides, you can use the `deserializeConfig` function to obtain `Setting` objects from a config JSON conforming to the [config JSON v6 format](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

```
class MyCustomOverrideDataSource implements IOverrideDataSource {
  private settings: Record<string, Setting>;

  constructor(configJson: string) {
    this.settings = deserializeConfig(configJson).f ?? {};
  }

  getOverrides(): Record<string, Setting> {
    return this.settings;
  }
}
```

or

```
function MyCustomOverrideDataSource(configJson) {
  this.settings = deserializeConfig(configJson).f ?? {};
}

MyCustomOverrideDataSource.prototype.getOverrides = function () {
  return this.settings;
};
```

then

```
// Set the `MyCustomOverrideDataSource` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: {
      dataSource: new MyCustomOverrideDataSource('{ "f": { ... } }'),
      behaviour: configcat.OverrideBehaviour.LocalOnly,
    }
  },
);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: configcat.createConsoleLogger(configcat.LogLevel.Info), // Setting log level to Info
  },
);
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
// Set the `MyCustomLogger` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: new MyCustomLogger(),
  },
);
```

### Log Filtering[â](#log-filtering "Direct link to Log Filtering")

You can define a custom log filter by providing a callback function via the `logFilter` option. The callback will be called by the *ConfigCat SDK* each time a log event occurs (and the event passes the minimum log level specified by the `IConfigCatLogger.level` property). That is, the callback allows you to filter log events by `level`, `eventId`, `message` or `exception`. The formatted message string can be obtained via `message.toString()`. If the callback function returns `true`, the event will be logged, otherwise it will be skipped.

```
// Filter out events with id 1001 from the log.
const logFilter = (level, eventId, message, exception) => eventId != 1001;

const configCatClient = configcat.getClient(
  "#YOUR-SDK-KEY#",
  configcat.PollingMode.AutoPoll,
  {
    logFilter: logFilter
  }
);
```

caution

Please make sure that your log filter logic doesn't perform heavy computation. A complex or incorrectly implemented log filter can degrade the performance of the SDK.

## `getAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeysAsync()` method.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

const keys = await configCatClient.getAllKeysAsync();
console.log(keys);
```

## `getAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValuesAsync();
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValuesAsync(userObject);
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);
```

## `getAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValueDetailsAsync();
settingValues.forEach((details) => console.log(details));

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValueDetailsAsync(userObject);
settingValues.forEach((details) => console.log(details));
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `getClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
// Set the `MyCustomCache` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    cache: new MyCustomCache(),
  },
);
```

info

The JavaScript SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

<!-- -->

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the *ConfigCat SDK* that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Platform compatibility[â](#platform-compatibility "Direct link to Platform compatibility")

<!-- -->

The SDK should be compatible with all modern, widely used browsers and bundlers.

The SDK is [tested](https://github.com/configcat/js-unified-sdk/blob/master/.github/workflows/js-sdk-ci.yml) against the following <!-- -->browsers<!-- -->:

* Chrome (stable, latest, beta)
* Chromium (71.0.3556.0, 72.0.3626.0, 80.0.3987.0)
* Firefox (84.0, latest, latest-beta)
* Safari (latest)

The SDK is compatible with TypeScript v4.0.2 or newer. Earlier versions may work but those are not tested, thus, not supported officially.

These tests are running on each pull request, before each deploy, and on a daily basis.

You can view a sample run [here](https://github.com/configcat/js-unified-sdk/actions/runs/11745259578).

## Best practices[â](#best-practices "Direct link to Best practices")

### Choosing polling mode for serverless functions[â](#choosing-polling-mode-for-serverless-functions "Direct link to Choosing polling mode for serverless functions")

In most cases, Auto polling is a good choice, but it's not ideal for short-lived serverless functions like AWS Lambdas, Azure Functions, Cloudflare Workers, etc.

For example, if the SDK is running in a Next.js application that is hosted on Vercel (AWS Lambda), or your application is hosted directly in AWS Lambdas, it is recommended to use the SDK in Lazy loading or Manual polling mode instead of the default Auto polling mode.

As AWS Lambdas try to minimize their uptime, the applications are terminated as soon as the sytem detects inactivity in the application.

Auto polling mode is implemented using an asynchronous background loop to periodically get the config data from the ConfigCat servers, however the AWS Lambda doesn't detect it as a running application and terminates it.

So it can easily happen that there is an ongoing HTTP GET request towards our servers and this termination can cause errors. The most likely error message in this case is `Request timed out while trying to fetch config JSON.`

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

* [Plain HTML + JS](https://github.com/configcat/js-unified-sdk/tree/master/samples/html)
* [Plain HTML + JS using ECMAScript module system](https://github.com/configcat/js-unified-sdk/tree/master/samples/html-esm)
* [Plain HTML + TS running the SDK in a Web Worker](https://github.com/configcat/js-unified-sdk/tree/master/samples/web-worker)
* [Sample Angular web application](https://github.com/configcat/js-unified-sdk/tree/master/samples/angular-sample)
* [Sample React web application](https://github.com/configcat/js-unified-sdk/tree/master/samples/react-sample)
* [Sample React Native application](https://github.com/configcat/js-unified-sdk/tree/master/samples/react-native-sample)
* [Sample Vue SSR web application](https://github.com/configcat/js-unified-sdk/tree/master/samples/vue-ssr-sample)

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

## Guides[â](#guides "Direct link to Guides")

See the guides on how to use ConfigCat's JavaScript SDK with the following libraries and frameworks:

info

Some of these guides may use legacy SDKs. However, the parts beyond NPM package installation and import should still work with modern SDKs.

Client-side frontend frameworks:

* [Angular](https://configcat.com/blog/2022/08/09/using-feature-flags-in-angular/)
* [React](https://configcat.com/blog/2021/12/13/feature-flags-in-react/)
* [Vue.js](https://configcat.com/blog/2022/01/28/how-to-use-feature-flag-in-vuejs/)
* [Ionic](https://configcat.com/blog/2022/07/29/how-to-use-feature-flags-in-ionic-js/)
* [Phaser](https://configcat.com/blog/2022/02/04/feature-flags-in-phaser/)
* [Solid.js](https://configcat.com/blog/2022/11/11/how-to-use-feature-flags-in-solidjs/)
* [melonJS](https://configcat.com/blog/2022/02/19/feature-flags-in-melonjs/)

SSR frontend frameworks:

* [Nuxt](https://configcat.com/blog/2022/07/01/how-to-use-feature-flags-in-nuxtjs/)
* [Next.js](https://configcat.com/blog/2022/04/22/how-to-use-feature-flags-in-nextjs/)
* [Remix](https://configcat.com/blog/2022/04/01/feature-flags-in-remix/)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)
* [ConfigCat SDK for JavaScript in NPM](https://www.npmjs.com/package/@configcat/sdk)


---

# Bun SDK

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

[![Star on GitHub](https://img.shields.io/github/stars/configcat/js-unified-sdk.svg?style=social)](https://github.com/configcat/js-unified-sdk/stargazers) [![JS SDK CI](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml/badge.svg?branch=master)](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml) [![SonarCloud Coverage](https://img.shields.io/sonar/coverage/configcat_js-unified-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_js-unified-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/js-unified-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/js-unified-sdk?targetFile=package.json) [![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=configcat_js-sdk\&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=configcat_js-sdk) [![JSDELIVR](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)

<!-- -->

<!-- -->

<!-- -->

[ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install and import package[â](#1-install-and-import-package "Direct link to 1. Install and import package")

<!-- -->

<!-- -->

<!-- -->

First install the [NPM package](https://npmjs.com/package/@configcat/sdk):

```
npm i @configcat/sdk
```

Then import it into your application:

```
import * as configcat from "@configcat/sdk/bun";
```

### 2. Create the *ConfigCat* client with your SDK Key[â](#2-create-the-configcat-client-with-your-sdk-key "Direct link to 2-create-the-configcat-client-with-your-sdk-key")

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');
```

<!-- -->

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

The async/await way:

```
const value = await configCatClient.getValueAsync(
  'isMyAwesomeFeatureEnabled',
  false,
);

if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```

<!-- -->

<!-- -->

The Promise way:

```
configCatClient
  .getValueAsync('isMyAwesomeFeatureEnabled', false)
  .then((value) => {
    if (value) {
      do_the_new_thing();
    } else {
      do_the_old_thing();
    }
  });
```

The *ConfigCat SDK* also offers a synchronous API for feature flag evaluation. Read more [here](#snapshots-and-synchronous-feature-flag-evaluation).

### 4. Dispose the *ConfigCat* client[â](#4-dispose-the-configcat-client "Direct link to 4-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
configcat.disposeAllClients(); // disposes all clients
// -or-
configCatClient.dispose(); // disposes a specific client
```

<!-- -->

## Creating the *ConfigCat* Client[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.getClient('<sdkKey>')` returns a client with default options.

The `getClient` function has optional parameters, which can be used to adjust the behavior of the client.

| Parameters    | Description                                                                                                                    | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from *ConfigCat Dashboard*.                            | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes). | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                             | -                      |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

<!-- -->

<!-- -->

<!-- -->

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                      |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| `configFetcher`    | Custom [`IConfigCatConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigFetcher.ts) instance for downloading a config.                                                                                                                                                                               | [`NodeHttpConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/node/NodeHttpConfigFetcher.ts)         |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                       | [`InMemoryConfigCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts)                       |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                           | [`ConfigCatConsoleLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) (with WARN level) |
| `logFilter`        | Sets a custom log filter. [More about log filtering](#log-filtering).                                                                                                                                                                                                                                                             | `undefined` (none)                                                                                                           |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                              |
| `httpAgent`        | The [`http.Agent`](https://nodejs.org/api/http.html#class-httpagent) instance to use for non-secure HTTP communication. Can be used to route `http://...` requests made by the SDK through an HTTP, HTTPS or SOCKS proxy (see also [this section](#using-configcat-behind-a-proxy)).                                              |                                                                                                                              |
| `httpsAgent`       | The [`https.Agent`](https://nodejs.org/api/https.html#class-httpsagent) instance to use for secure HTTP communication. Can be used to route `https://...` requests made by the SDK through an HTTP, HTTPS or SOCKS proxy (see also [this section](#using-configcat-behind-a-proxy)).                                              |                                                                                                                              |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                        |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     |                                                                                                                              |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                      |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                           |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                      |

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    setupHooks: (hooks) => hooks.on('clientReady', function() {
      const keys = this.configCatClient.snapshot().getAllKeys();
      console.log(`Client is ready! Number of available feature flags: ${keys.length}`);
    }),
  },
);
```

info

You can acquire singleton client instances for your SDK keys using the `configcat.getClient(sdkKey: "<sdkKey>")` factory function. (However, please keep in mind that subsequent calls to `getClient()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `configcat.disposeAllClients()` function or do it individually using the `configCatClient.dispose()` method.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

Returns a Promise with the value.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((value) => {
    console.log(value);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the return type of the `getValue` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`getValueDetailsAsync()` is similar to `getValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const details = await configCatClient.getValueDetailsAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueDetailsAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((details) => {
    console.log(details);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                            | Description                                                                                                |
| ------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                     | `string`                        | The key of the evaluated feature flag or setting.                                                          |
| `value`                   | `boolean` / `string` / `number` | The evaluated value of the feature flag or setting.                                                        |
| `user`                    | `User`                          | The User Object used for the evaluation.                                                                   |
| `isDefaultValue`          | `boolean`                       | True when the default value passed to `getValueDetailsAsync()` is returned due to an error.                |
| `errorCode`               | `EvaluationErrorCode`           | In case of an error, this property contains a code that identifies the reason for the error.               |
| `errorMessage`            | `string`                        | In case of an error, this property contains the error message.                                             |
| `errorException`          | `any`                           | In case of an error, this property contains the related exception object (if any).                         |
| `matchedTargetingRule`    | `TargetingRule`                 | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageOption` | `PercentageOption`              | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetchTime`               | `Date`                          | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
```

```
const userObject = { identifier: 'john@example.com' };
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
const userObject = {
  identifier: '#UNIQUE-USER-IDENTIFIER#',
  email: 'john@example.com',
  country: 'United Kingdom',
  custom: {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
};
```

The `custom` dictionary also allows attribute values other than `string` values:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    defaultUser: { identifier: 'john@example.com' },
  },
);
```

...or using the `setDefaultUser()` method of the `configCatClient` object:

```
configCatClient.setDefaultUser({ identifier: 'john@example.com' });
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

// The default user will be used in the evaluation process.
const value = await configCatClient.getValueAsync('keyOfMyFeatureFlag', false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

const otherUser = { identifier: 'brian@example.com' };

// otherUser will be used in the evaluation process.
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag',
  false,
  otherUser,
);
```

You can also remove the default user by doing the following:

```
configCatClient.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    pollIntervalSeconds: 95,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.LazyLoad,
  {
    cacheTimeToLiveSeconds: 600,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

await configCatClient.forceRefreshAsync();
const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

> `getValueAsync()` returns `defaultValue` if the cache is empty. Call `forceRefreshAsync()` to update the cache.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value); // console: "my default value"

await configCatClient.forceRefreshAsync();
value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configFetched: [result: RefreshResult, isInitiatedByUser: boolean]`: This event is emitted each time the client attempts to refresh the cached config by fetching the latest version from the ConfigCat CDN. It is emitted not only when `ForceRefreshAsync` is called but also when the refresh is initiated by the client automatically. Thus, this event allows you to observe potential network issues that occur under the hood.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', function() {
        /* handle the event */
      }),
  },
);
```

...or directly on the `ConfigCatClient` instance:

```
configCatClient.on('flagEvaluated', function() {
  /* handle the event */
});
```

caution

Some events (e.g. `clientReady`, `configChanged` and `clientError`) may be emitted before `getClient` returns. This means you may miss them unless you subscribe on initialization.

However, even if you do, there's another gotcha: it's not safe to use the outer `configCatClient` variable in your event handler because it may not yet be assigned when the handler is called. Instead, you can safely access the client instance via `this.configCatClient` - provided that the event handler is a normal function, not an arrow function.

## Snapshots and synchronous feature flag evaluation[â](#snapshots-and-synchronous-feature-flag-evaluation "Direct link to Snapshots and synchronous feature flag evaluation")

On JavaScript platforms, the *ConfigCat* client provides only asynchronous methods for evaluating feature flags and settings because these operations may involve network communication (e.g. downloading config data from the ConfigCat CDN servers), which is necessarily an asynchronous operation in JavaScript.

However, there can be circumstances where synchronous evaluation is preferable, thus, since v8.1.0, the JavaScript SDK provides a way to synchronously evaluate feature flags and settings via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
);

// Wait for the client to initialize.
await configCatClient.waitForReady();

const snapshot = configCatClient.snapshot();

const user = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
for (const key of snapshot.getAllKeys()) {
  const value = snapshot.getValue(key, null, user);
  console.log(`${key}: ${value}`);
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
const clientCacheState = await configCatClient.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  // Handle initialization failure (see below).
  console.warn('ConfigCat client failed to obtain the config data during initialization.');
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `configChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
configCatClient.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
configCatClient.setOnline();
```

Using the `configCatClient.isOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` object<!-- --> or from a custom flag override data source.

### Map[â](#map "Direct link to Map")

You can specify simple feature flag & setting overrides using a `{ [key: string]: boolean | string | number }` map.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: configcat.createFlagOverridesFromMap(
      {
        enabledFeature: true,
        disabledFeature: false,
        intSetting: 5,
        doubleSetting: 3.14,
        stringSetting: 'test',
      },
      configcat.OverrideBehaviour.LocalOnly,
    ),
  },
);
```

<!-- -->

### Custom data source implementation[â](#custom-data-source-implementation "Direct link to Custom data source implementation")

You can create a custom flag override data source by implementing `IOverrideDataSource`.

The SDK provides the `createSettingFromValue` function to create `Setting` objects from simple `boolean`, `string` and `number` values. In case you need complex (full-featured) flag overrides, you can use the `deserializeConfig` function to obtain `Setting` objects from a config JSON conforming to the [config JSON v6 format](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

```
class MyCustomOverrideDataSource implements IOverrideDataSource {
  private settings: Record<string, Setting>;

  constructor(configJson: string) {
    this.settings = deserializeConfig(configJson).f ?? {};
  }

  getOverrides(): Record<string, Setting> {
    return this.settings;
  }
}
```

or

```
function MyCustomOverrideDataSource(configJson) {
  this.settings = deserializeConfig(configJson).f ?? {};
}

MyCustomOverrideDataSource.prototype.getOverrides = function () {
  return this.settings;
};
```

then

```
// Set the `MyCustomOverrideDataSource` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: {
      dataSource: new MyCustomOverrideDataSource('{ "f": { ... } }'),
      behaviour: configcat.OverrideBehaviour.LocalOnly,
    }
  },
);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: configcat.createConsoleLogger(configcat.LogLevel.Info), // Setting log level to Info
  },
);
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
// Set the `MyCustomLogger` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: new MyCustomLogger(),
  },
);
```

### Log Filtering[â](#log-filtering "Direct link to Log Filtering")

You can define a custom log filter by providing a callback function via the `logFilter` option. The callback will be called by the *ConfigCat SDK* each time a log event occurs (and the event passes the minimum log level specified by the `IConfigCatLogger.level` property). That is, the callback allows you to filter log events by `level`, `eventId`, `message` or `exception`. The formatted message string can be obtained via `message.toString()`. If the callback function returns `true`, the event will be logged, otherwise it will be skipped.

```
// Filter out events with id 1001 from the log.
const logFilter = (level, eventId, message, exception) => eventId != 1001;

const configCatClient = configcat.getClient(
  "#YOUR-SDK-KEY#",
  configcat.PollingMode.AutoPoll,
  {
    logFilter: logFilter
  }
);
```

caution

Please make sure that your log filter logic doesn't perform heavy computation. A complex or incorrectly implemented log filter can degrade the performance of the SDK.

## `getAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeysAsync()` method.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

const keys = await configCatClient.getAllKeysAsync();
console.log(keys);
```

## `getAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValuesAsync();
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValuesAsync(userObject);
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);
```

## `getAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValueDetailsAsync();
settingValues.forEach((details) => console.log(details));

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValueDetailsAsync(userObject);
settingValues.forEach((details) => console.log(details));
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `getClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
// Set the `MyCustomCache` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    cache: new MyCustomCache(),
  },
);
```

info

The JavaScript SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Using ConfigCat behind a proxy[â](#using-configcat-behind-a-proxy "Direct link to Using ConfigCat behind a proxy")

It is possible to set up the SDK to route HTTP requests through a HTTP, HTTPS or SOCKS proxy.

```
npm i https-proxy-agent
```

```
import { HttpsProxyAgent } from 'https-proxy-agent';

const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    httpsAgent: new HttpsProxyAgent("http://192.168.1.1:8080"),
  },
);
```

info

By default, you need to specify the `httpsAgent` option because the SDK always uses HTTPS to access the ConfigCat CDN. However, if you set the `baseUrl` to a `http://...` URL, you will need to install `http-proxy-agent` and set the `httpAgent` option instead.

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the *ConfigCat SDK* that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Platform compatibility[â](#platform-compatibility "Direct link to Platform compatibility")

<!-- -->

The SDK should be compatible with newer versions of Bun.

The SDK is [tested](https://github.com/configcat/js-unified-sdk/blob/master/.github/workflows/js-sdk-ci.yml) against the following <!-- -->runtimes<!-- -->:

* Bun (v1.1.0, latest stable) on Windows / Ubuntu / macOS

The SDK is compatible with TypeScript v4.0.2 or newer. Earlier versions may work but those are not tested, thus, not supported officially.

These tests are running on each pull request, before each deploy, and on a daily basis.

You can view a sample run [here](https://github.com/configcat/js-unified-sdk/actions/runs/11745259578).

<!-- -->

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

<!-- -->

<!-- -->

<!-- -->

* [Sample Bun console application](https://github.com/configcat/js-unified-sdk/tree/master/samples/bun-console)

<!-- -->

<!-- -->

<!-- -->

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)
* [ConfigCat SDK for JavaScript in NPM](https://www.npmjs.com/package/@configcat/sdk)


---

# Chromium Extension SDK

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

[![Star on GitHub](https://img.shields.io/github/stars/configcat/js-unified-sdk.svg?style=social)](https://github.com/configcat/js-unified-sdk/stargazers) [![JS SDK CI](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml/badge.svg?branch=master)](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml) [![SonarCloud Coverage](https://img.shields.io/sonar/coverage/configcat_js-unified-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_js-unified-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/js-unified-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/js-unified-sdk?targetFile=package.json) [![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=configcat_js-sdk\&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=configcat_js-sdk) [![JSDELIVR](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)

<!-- -->

<!-- -->

<!-- -->

[ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install and import package[â](#1-install-and-import-package "Direct link to 1. Install and import package")

<!-- -->

<!-- -->

* via NPM
* via CDN

First install the [NPM package](https://npmjs.com/package/@configcat/sdk):

```
npm i @configcat/sdk
```

Then import it into your application:

```
import * as configcat from "@configcat/sdk/chromium-extension";
```

info

For subpath imports to work **in TypeScript**, you must set the [moduleResolution](https://www.typescriptlang.org/tsconfig/#moduleResolution) option to `node16`, `nodenext` or `bundler` in your `tsconfig.json`. For TypeScript versions older than 4.7, where these options are not available, you need to fall back to module resolution `node` and importing from the main entry point `@configcat/sdk`.

info

Please note that subpath imports require your bundler to support the [exports](https://nodejs.org/api/packages.html#exports) package.json field, introduced in Node.js v12.7. **In the unlikely case of bundler compatibility issues**, you can fall back to importing from the main entry point `@configcat/sdk` as long as your bundler recognizes the [browser](https://github.com/defunctzombie/package-browser-field-spec) package.json field.

Import the package directly from a CDN server into your application:

```
<script type="module">
  import * as configcat from "https://cdn.jsdelivr.net/npm/@configcat/sdk@latest/dist/configcat.chromium-extension.esm.min.js";
</script>
```

<!-- -->

### 2. Create the *ConfigCat* client with your SDK Key[â](#2-create-the-configcat-client-with-your-sdk-key "Direct link to 2-create-the-configcat-client-with-your-sdk-key")

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');
```

<!-- -->

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

The async/await way:

```
const value = await configCatClient.getValueAsync(
  'isMyAwesomeFeatureEnabled',
  false,
);

if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```

<!-- -->

<!-- -->

The Promise way:

```
configCatClient
  .getValueAsync('isMyAwesomeFeatureEnabled', false)
  .then((value) => {
    if (value) {
      do_the_new_thing();
    } else {
      do_the_old_thing();
    }
  });
```

The *ConfigCat SDK* also offers a synchronous API for feature flag evaluation. Read more [here](#snapshots-and-synchronous-feature-flag-evaluation).

### 4. Dispose the *ConfigCat* client[â](#4-dispose-the-configcat-client "Direct link to 4-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
configcat.disposeAllClients(); // disposes all clients
// -or-
configCatClient.dispose(); // disposes a specific client
```

<!-- -->

## Creating the *ConfigCat* Client[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.getClient('<sdkKey>')` returns a client with default options.

The `getClient` function has optional parameters, which can be used to adjust the behavior of the client.

| Parameters    | Description                                                                                                                    | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from *ConfigCat Dashboard*.                            | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes). | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                             | -                      |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

<!-- -->

<!-- -->

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                                                                                                                                                                    |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `configFetcher`    | Custom [`IConfigCatConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigFetcher.ts) instance for downloading a config.                                                                                                                                                                               | [`FetchApiConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/shared/FetchApiConfigFetcher.ts)                                                                                                                                                     |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                       | [`ChromeLocalStorageConfigCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/chromium-extension/ChromeLocalStorageConfigCache.ts) or [`IndexedDBConfigCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/shared/IndexedDBConfigCache.ts) |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                           | [`ConfigCatConsoleLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) (with WARN level)                                                                                                                                               |
| `logFilter`        | Sets a custom log filter. [More about log filtering](#log-filtering).                                                                                                                                                                                                                                                             | `undefined` (none)                                                                                                                                                                                                                                                         |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                            |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                                                                                                                                                                      |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                            |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                                                                                                                                                                    |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                                                                                                                                                                         |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                                                                                                                                                                    |

<!-- -->

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    setupHooks: (hooks) => hooks.on('clientReady', function() {
      const keys = this.configCatClient.snapshot().getAllKeys();
      console.log(`Client is ready! Number of available feature flags: ${keys.length}`);
    }),
  },
);
```

info

You can acquire singleton client instances for your SDK keys using the `configcat.getClient(sdkKey: "<sdkKey>")` factory function. (However, please keep in mind that subsequent calls to `getClient()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `configcat.disposeAllClients()` function or do it individually using the `configCatClient.dispose()` method.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

Returns a Promise with the value.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((value) => {
    console.log(value);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the return type of the `getValue` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`getValueDetailsAsync()` is similar to `getValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const details = await configCatClient.getValueDetailsAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueDetailsAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((details) => {
    console.log(details);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                            | Description                                                                                                |
| ------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                     | `string`                        | The key of the evaluated feature flag or setting.                                                          |
| `value`                   | `boolean` / `string` / `number` | The evaluated value of the feature flag or setting.                                                        |
| `user`                    | `User`                          | The User Object used for the evaluation.                                                                   |
| `isDefaultValue`          | `boolean`                       | True when the default value passed to `getValueDetailsAsync()` is returned due to an error.                |
| `errorCode`               | `EvaluationErrorCode`           | In case of an error, this property contains a code that identifies the reason for the error.               |
| `errorMessage`            | `string`                        | In case of an error, this property contains the error message.                                             |
| `errorException`          | `any`                           | In case of an error, this property contains the related exception object (if any).                         |
| `matchedTargetingRule`    | `TargetingRule`                 | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageOption` | `PercentageOption`              | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetchTime`               | `Date`                          | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
```

```
const userObject = { identifier: 'john@example.com' };
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
const userObject = {
  identifier: '#UNIQUE-USER-IDENTIFIER#',
  email: 'john@example.com',
  country: 'United Kingdom',
  custom: {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
};
```

The `custom` dictionary also allows attribute values other than `string` values:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    defaultUser: { identifier: 'john@example.com' },
  },
);
```

...or using the `setDefaultUser()` method of the `configCatClient` object:

```
configCatClient.setDefaultUser({ identifier: 'john@example.com' });
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

// The default user will be used in the evaluation process.
const value = await configCatClient.getValueAsync('keyOfMyFeatureFlag', false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

const otherUser = { identifier: 'brian@example.com' };

// otherUser will be used in the evaluation process.
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag',
  false,
  otherUser,
);
```

You can also remove the default user by doing the following:

```
configCatClient.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    pollIntervalSeconds: 95,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.LazyLoad,
  {
    cacheTimeToLiveSeconds: 600,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

await configCatClient.forceRefreshAsync();
const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

> `getValueAsync()` returns `defaultValue` if the cache is empty. Call `forceRefreshAsync()` to update the cache.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value); // console: "my default value"

await configCatClient.forceRefreshAsync();
value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configFetched: [result: RefreshResult, isInitiatedByUser: boolean]`: This event is emitted each time the client attempts to refresh the cached config by fetching the latest version from the ConfigCat CDN. It is emitted not only when `ForceRefreshAsync` is called but also when the refresh is initiated by the client automatically. Thus, this event allows you to observe potential network issues that occur under the hood.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', function() {
        /* handle the event */
      }),
  },
);
```

...or directly on the `ConfigCatClient` instance:

```
configCatClient.on('flagEvaluated', function() {
  /* handle the event */
});
```

caution

Some events (e.g. `clientReady`, `configChanged` and `clientError`) may be emitted before `getClient` returns. This means you may miss them unless you subscribe on initialization.

However, even if you do, there's another gotcha: it's not safe to use the outer `configCatClient` variable in your event handler because it may not yet be assigned when the handler is called. Instead, you can safely access the client instance via `this.configCatClient` - provided that the event handler is a normal function, not an arrow function.

## Snapshots and synchronous feature flag evaluation[â](#snapshots-and-synchronous-feature-flag-evaluation "Direct link to Snapshots and synchronous feature flag evaluation")

On JavaScript platforms, the *ConfigCat* client provides only asynchronous methods for evaluating feature flags and settings because these operations may involve network communication (e.g. downloading config data from the ConfigCat CDN servers), which is necessarily an asynchronous operation in JavaScript.

However, there can be circumstances where synchronous evaluation is preferable, thus, since v8.1.0, the JavaScript SDK provides a way to synchronously evaluate feature flags and settings via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
);

// Wait for the client to initialize.
await configCatClient.waitForReady();

const snapshot = configCatClient.snapshot();

const user = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
for (const key of snapshot.getAllKeys()) {
  const value = snapshot.getValue(key, null, user);
  console.log(`${key}: ${value}`);
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
const clientCacheState = await configCatClient.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  // Handle initialization failure (see below).
  console.warn('ConfigCat client failed to obtain the config data during initialization.');
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `configChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
configCatClient.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
configCatClient.setOnline();
```

Using the `configCatClient.isOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` object<!-- -->, from the current query string<!-- --> or from a custom flag override data source.

### Map[â](#map "Direct link to Map")

You can specify simple feature flag & setting overrides using a `{ [key: string]: boolean | string | number }` map.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: configcat.createFlagOverridesFromMap(
      {
        enabledFeature: true,
        disabledFeature: false,
        intSetting: 5,
        doubleSetting: 3.14,
        stringSetting: 'test',
      },
      configcat.OverrideBehaviour.LocalOnly,
    ),
  },
);
```

### Query string[â](#query-string "Direct link to Query string")

It is also possible to override feature flags & settings using query string parameters.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: createFlagOverridesFromQueryParams(configcat.OverrideBehaviour.LocalOverRemote),
  },
);
```

With that setup, you can override feature flags and settings by appending query string parameters to the URL of your application in the following form: `https://app.example.com/?cc-myBooleanFlag=true&cc-myStringSetting=abc&...`

The setting type is automatically inferred from the value. Please pay attention to this behavior. The inferred type of the value must match the type of the feature flag or setting you override (see also [this table](#setting-type-mapping)). In case you want to force a boolean or number value to be interpreted as a string value, use the `;str` suffix: `&cc-myStringSetting;str=true`.

If the default prefix used to differentiate between normal and flag override query string parameters (`cc-`) is not suitable for you, you can set a custom prefix using the corresponding optional parameter of `createFlagOverridesFromQueryParams`.

### Custom data source implementation[â](#custom-data-source-implementation "Direct link to Custom data source implementation")

You can create a custom flag override data source by implementing `IOverrideDataSource`.

The SDK provides the `createSettingFromValue` function to create `Setting` objects from simple `boolean`, `string` and `number` values. In case you need complex (full-featured) flag overrides, you can use the `deserializeConfig` function to obtain `Setting` objects from a config JSON conforming to the [config JSON v6 format](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

```
class MyCustomOverrideDataSource implements IOverrideDataSource {
  private settings: Record<string, Setting>;

  constructor(configJson: string) {
    this.settings = deserializeConfig(configJson).f ?? {};
  }

  getOverrides(): Record<string, Setting> {
    return this.settings;
  }
}
```

or

```
function MyCustomOverrideDataSource(configJson) {
  this.settings = deserializeConfig(configJson).f ?? {};
}

MyCustomOverrideDataSource.prototype.getOverrides = function () {
  return this.settings;
};
```

then

```
// Set the `MyCustomOverrideDataSource` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: {
      dataSource: new MyCustomOverrideDataSource('{ "f": { ... } }'),
      behaviour: configcat.OverrideBehaviour.LocalOnly,
    }
  },
);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: configcat.createConsoleLogger(configcat.LogLevel.Info), // Setting log level to Info
  },
);
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
// Set the `MyCustomLogger` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: new MyCustomLogger(),
  },
);
```

### Log Filtering[â](#log-filtering "Direct link to Log Filtering")

You can define a custom log filter by providing a callback function via the `logFilter` option. The callback will be called by the *ConfigCat SDK* each time a log event occurs (and the event passes the minimum log level specified by the `IConfigCatLogger.level` property). That is, the callback allows you to filter log events by `level`, `eventId`, `message` or `exception`. The formatted message string can be obtained via `message.toString()`. If the callback function returns `true`, the event will be logged, otherwise it will be skipped.

```
// Filter out events with id 1001 from the log.
const logFilter = (level, eventId, message, exception) => eventId != 1001;

const configCatClient = configcat.getClient(
  "#YOUR-SDK-KEY#",
  configcat.PollingMode.AutoPoll,
  {
    logFilter: logFilter
  }
);
```

caution

Please make sure that your log filter logic doesn't perform heavy computation. A complex or incorrectly implemented log filter can degrade the performance of the SDK.

## `getAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeysAsync()` method.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

const keys = await configCatClient.getAllKeysAsync();
console.log(keys);
```

## `getAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValuesAsync();
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValuesAsync(userObject);
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);
```

## `getAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValueDetailsAsync();
settingValues.forEach((details) => console.log(details));

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValueDetailsAsync(userObject);
settingValues.forEach((details) => console.log(details));
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `getClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
// Set the `MyCustomCache` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    cache: new MyCustomCache(),
  },
);
```

info

The JavaScript SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

<!-- -->

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the *ConfigCat SDK* that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Platform compatibility[â](#platform-compatibility "Direct link to Platform compatibility")

<!-- -->

The SDK should be compatible with modern Chromium-based browsers and bundlers.

The SDK is [tested](https://github.com/configcat/js-unified-sdk/blob/master/.github/workflows/js-sdk-ci.yml) against the following <!-- -->browsers<!-- -->:

* Chrome (stable, latest, beta)
* Chromium (72.0.3626.0, 80.0.3987.0)

The SDK is compatible with TypeScript v4.0.2 or newer. Earlier versions may work but those are not tested, thus, not supported officially.

These tests are running on each pull request, before each deploy, and on a daily basis.

You can view a sample run [here](https://github.com/configcat/js-unified-sdk/actions/runs/11745259578).

<!-- -->

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

* [Sample Chrome extension](https://github.com/configcat/js-unified-sdk/tree/master/samples/chrome-extension)

<!-- -->

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)
* [ConfigCat SDK for JavaScript in NPM](https://www.npmjs.com/package/@configcat/sdk)


---

# Cloudflare Worker SDK

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

[![Star on GitHub](https://img.shields.io/github/stars/configcat/js-unified-sdk.svg?style=social)](https://github.com/configcat/js-unified-sdk/stargazers) [![JS SDK CI](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml/badge.svg?branch=master)](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml) [![SonarCloud Coverage](https://img.shields.io/sonar/coverage/configcat_js-unified-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_js-unified-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/js-unified-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/js-unified-sdk?targetFile=package.json) [![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=configcat_js-sdk\&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=configcat_js-sdk) [![JSDELIVR](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)

<!-- -->

<!-- -->

<!-- -->

[ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install and import package[â](#1-install-and-import-package "Direct link to 1. Install and import package")

<!-- -->

<!-- -->

<!-- -->

First install the [NPM package](https://npmjs.com/package/@configcat/sdk):

```
npm i @configcat/sdk
```

Then import it into your application:

```
import * as configcat from "@configcat/sdk/cloudflare-worker";
```

### 2. Create the *ConfigCat* client with your SDK Key[â](#2-create-the-configcat-client-with-your-sdk-key "Direct link to 2-create-the-configcat-client-with-your-sdk-key")

<!-- -->

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#', configcat.PollingMode.LazyLoad);
```

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

The async/await way:

```
const value = await configCatClient.getValueAsync(
  'isMyAwesomeFeatureEnabled',
  false,
);

if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```

<!-- -->

<!-- -->

The Promise way:

```
configCatClient
  .getValueAsync('isMyAwesomeFeatureEnabled', false)
  .then((value) => {
    if (value) {
      do_the_new_thing();
    } else {
      do_the_old_thing();
    }
  });
```

The *ConfigCat SDK* also offers a synchronous API for feature flag evaluation. Read more [here](#snapshots-and-synchronous-feature-flag-evaluation).

### 4. Dispose the *ConfigCat* client[â](#4-dispose-the-configcat-client "Direct link to 4-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
configcat.disposeAllClients(); // disposes all clients
// -or-
configCatClient.dispose(); // disposes a specific client
```

<!-- -->

## Creating the *ConfigCat* Client[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.getClient('<sdkKey>')` returns a client with default options.

The `getClient` function has optional parameters, which can be used to adjust the behavior of the client.

| Parameters    | Description                                                                                                                    | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from *ConfigCat Dashboard*.                            | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes). | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                             | -                      |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

<!-- -->

<!-- -->

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                           |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| `configFetcher`    | Custom [`IConfigCatConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigFetcher.ts) instance for downloading a config.                                                                                                                                                                               | [`FetchApiConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/shared/FetchApiConfigFetcher.ts)            |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                       | [`CloudflareConfigCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/cloudflare-worker/CloudflareConfigCache.ts) |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                           | [`ConfigCatConsoleLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) (with WARN level)      |
| `logFilter`        | Sets a custom log filter. [More about log filtering](#log-filtering).                                                                                                                                                                                                                                                             | `undefined` (none)                                                                                                                |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                                   |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                             |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     |                                                                                                                                   |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                           |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                                |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                           |

<!-- -->

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    setupHooks: (hooks) => hooks.on('clientReady', function() {
      const keys = this.configCatClient.snapshot().getAllKeys();
      console.log(`Client is ready! Number of available feature flags: ${keys.length}`);
    }),
  },
);
```

info

You can acquire singleton client instances for your SDK keys using the `configcat.getClient(sdkKey: "<sdkKey>")` factory function. (However, please keep in mind that subsequent calls to `getClient()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `configcat.disposeAllClients()` function or do it individually using the `configCatClient.dispose()` method.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

Returns a Promise with the value.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((value) => {
    console.log(value);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the return type of the `getValue` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`getValueDetailsAsync()` is similar to `getValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const details = await configCatClient.getValueDetailsAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueDetailsAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((details) => {
    console.log(details);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                            | Description                                                                                                |
| ------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                     | `string`                        | The key of the evaluated feature flag or setting.                                                          |
| `value`                   | `boolean` / `string` / `number` | The evaluated value of the feature flag or setting.                                                        |
| `user`                    | `User`                          | The User Object used for the evaluation.                                                                   |
| `isDefaultValue`          | `boolean`                       | True when the default value passed to `getValueDetailsAsync()` is returned due to an error.                |
| `errorCode`               | `EvaluationErrorCode`           | In case of an error, this property contains a code that identifies the reason for the error.               |
| `errorMessage`            | `string`                        | In case of an error, this property contains the error message.                                             |
| `errorException`          | `any`                           | In case of an error, this property contains the related exception object (if any).                         |
| `matchedTargetingRule`    | `TargetingRule`                 | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageOption` | `PercentageOption`              | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetchTime`               | `Date`                          | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
```

```
const userObject = { identifier: 'john@example.com' };
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
const userObject = {
  identifier: '#UNIQUE-USER-IDENTIFIER#',
  email: 'john@example.com',
  country: 'United Kingdom',
  custom: {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
};
```

The `custom` dictionary also allows attribute values other than `string` values:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    defaultUser: { identifier: 'john@example.com' },
  },
);
```

...or using the `setDefaultUser()` method of the `configCatClient` object:

```
configCatClient.setDefaultUser({ identifier: 'john@example.com' });
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

// The default user will be used in the evaluation process.
const value = await configCatClient.getValueAsync('keyOfMyFeatureFlag', false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

const otherUser = { identifier: 'brian@example.com' };

// otherUser will be used in the evaluation process.
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag',
  false,
  otherUser,
);
```

You can also remove the default user by doing the following:

```
configCatClient.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    pollIntervalSeconds: 95,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.LazyLoad,
  {
    cacheTimeToLiveSeconds: 600,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

await configCatClient.forceRefreshAsync();
const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

> `getValueAsync()` returns `defaultValue` if the cache is empty. Call `forceRefreshAsync()` to update the cache.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value); // console: "my default value"

await configCatClient.forceRefreshAsync();
value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configFetched: [result: RefreshResult, isInitiatedByUser: boolean]`: This event is emitted each time the client attempts to refresh the cached config by fetching the latest version from the ConfigCat CDN. It is emitted not only when `ForceRefreshAsync` is called but also when the refresh is initiated by the client automatically. Thus, this event allows you to observe potential network issues that occur under the hood.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', function() {
        /* handle the event */
      }),
  },
);
```

...or directly on the `ConfigCatClient` instance:

```
configCatClient.on('flagEvaluated', function() {
  /* handle the event */
});
```

caution

Some events (e.g. `clientReady`, `configChanged` and `clientError`) may be emitted before `getClient` returns. This means you may miss them unless you subscribe on initialization.

However, even if you do, there's another gotcha: it's not safe to use the outer `configCatClient` variable in your event handler because it may not yet be assigned when the handler is called. Instead, you can safely access the client instance via `this.configCatClient` - provided that the event handler is a normal function, not an arrow function.

## Snapshots and synchronous feature flag evaluation[â](#snapshots-and-synchronous-feature-flag-evaluation "Direct link to Snapshots and synchronous feature flag evaluation")

On JavaScript platforms, the *ConfigCat* client provides only asynchronous methods for evaluating feature flags and settings because these operations may involve network communication (e.g. downloading config data from the ConfigCat CDN servers), which is necessarily an asynchronous operation in JavaScript.

However, there can be circumstances where synchronous evaluation is preferable, thus, since v8.1.0, the JavaScript SDK provides a way to synchronously evaluate feature flags and settings via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
);

// Wait for the client to initialize.
await configCatClient.waitForReady();

const snapshot = configCatClient.snapshot();

const user = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
for (const key of snapshot.getAllKeys()) {
  const value = snapshot.getValue(key, null, user);
  console.log(`${key}: ${value}`);
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
const clientCacheState = await configCatClient.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  // Handle initialization failure (see below).
  console.warn('ConfigCat client failed to obtain the config data during initialization.');
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `configChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
configCatClient.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
configCatClient.setOnline();
```

Using the `configCatClient.isOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` object<!-- -->, from the current query string<!-- --> or from a custom flag override data source.

### Map[â](#map "Direct link to Map")

You can specify simple feature flag & setting overrides using a `{ [key: string]: boolean | string | number }` map.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: configcat.createFlagOverridesFromMap(
      {
        enabledFeature: true,
        disabledFeature: false,
        intSetting: 5,
        doubleSetting: 3.14,
        stringSetting: 'test',
      },
      configcat.OverrideBehaviour.LocalOnly,
    ),
  },
);
```

### Query string[â](#query-string "Direct link to Query string")

It is also possible to override feature flags & settings using query string parameters.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: createFlagOverridesFromQueryParams(configcat.OverrideBehaviour.LocalOverRemote, request),
  },
);
```

With that setup, you can override feature flags and settings by appending query string parameters to the URL of your application in the following form: `https://app.example.com/?cc-myBooleanFlag=true&cc-myStringSetting=abc&...`

The setting type is automatically inferred from the value. Please pay attention to this behavior. The inferred type of the value must match the type of the feature flag or setting you override (see also [this table](#setting-type-mapping)). In case you want to force a boolean or number value to be interpreted as a string value, use the `;str` suffix: `&cc-myStringSetting;str=true`.

If the default prefix used to differentiate between normal and flag override query string parameters (`cc-`) is not suitable for you, you can set a custom prefix using the corresponding optional parameter of `createFlagOverridesFromQueryParams`.

### Custom data source implementation[â](#custom-data-source-implementation "Direct link to Custom data source implementation")

You can create a custom flag override data source by implementing `IOverrideDataSource`.

The SDK provides the `createSettingFromValue` function to create `Setting` objects from simple `boolean`, `string` and `number` values. In case you need complex (full-featured) flag overrides, you can use the `deserializeConfig` function to obtain `Setting` objects from a config JSON conforming to the [config JSON v6 format](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

```
class MyCustomOverrideDataSource implements IOverrideDataSource {
  private settings: Record<string, Setting>;

  constructor(configJson: string) {
    this.settings = deserializeConfig(configJson).f ?? {};
  }

  getOverrides(): Record<string, Setting> {
    return this.settings;
  }
}
```

or

```
function MyCustomOverrideDataSource(configJson) {
  this.settings = deserializeConfig(configJson).f ?? {};
}

MyCustomOverrideDataSource.prototype.getOverrides = function () {
  return this.settings;
};
```

then

```
// Set the `MyCustomOverrideDataSource` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: {
      dataSource: new MyCustomOverrideDataSource('{ "f": { ... } }'),
      behaviour: configcat.OverrideBehaviour.LocalOnly,
    }
  },
);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: configcat.createConsoleLogger(configcat.LogLevel.Info), // Setting log level to Info
  },
);
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
// Set the `MyCustomLogger` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: new MyCustomLogger(),
  },
);
```

### Log Filtering[â](#log-filtering "Direct link to Log Filtering")

You can define a custom log filter by providing a callback function via the `logFilter` option. The callback will be called by the *ConfigCat SDK* each time a log event occurs (and the event passes the minimum log level specified by the `IConfigCatLogger.level` property). That is, the callback allows you to filter log events by `level`, `eventId`, `message` or `exception`. The formatted message string can be obtained via `message.toString()`. If the callback function returns `true`, the event will be logged, otherwise it will be skipped.

```
// Filter out events with id 1001 from the log.
const logFilter = (level, eventId, message, exception) => eventId != 1001;

const configCatClient = configcat.getClient(
  "#YOUR-SDK-KEY#",
  configcat.PollingMode.AutoPoll,
  {
    logFilter: logFilter
  }
);
```

caution

Please make sure that your log filter logic doesn't perform heavy computation. A complex or incorrectly implemented log filter can degrade the performance of the SDK.

## `getAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeysAsync()` method.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

const keys = await configCatClient.getAllKeysAsync();
console.log(keys);
```

## `getAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValuesAsync();
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValuesAsync(userObject);
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);
```

## `getAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValueDetailsAsync();
settingValues.forEach((details) => console.log(details));

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValueDetailsAsync(userObject);
settingValues.forEach((details) => console.log(details));
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `getClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
// Set the `MyCustomCache` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    cache: new MyCustomCache(),
  },
);
```

info

The JavaScript SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

<!-- -->

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the *ConfigCat SDK* that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Platform compatibility[â](#platform-compatibility "Direct link to Platform compatibility")

<!-- -->

The SDK should be compatible with latest versions of [workerd](https://github.com/cloudflare/workerd).

The SDK is [tested](https://github.com/configcat/js-unified-sdk/blob/master/.github/workflows/js-sdk-ci.yml) against the following <!-- -->runtimes<!-- -->:

* Workerd (2023-02-28)

The SDK is compatible with TypeScript v4.0.2 or newer. Earlier versions may work but those are not tested, thus, not supported officially.

These tests are running on each pull request, before each deploy, and on a daily basis.

You can view a sample run [here](https://github.com/configcat/js-unified-sdk/actions/runs/11745259578).

## Best practices[â](#best-practices "Direct link to Best practices")

### Choosing polling mode for serverless functions[â](#choosing-polling-mode-for-serverless-functions "Direct link to Choosing polling mode for serverless functions")

Auto polling is not ideal for short-lived serverless functions like Cloudflare Workers.

It is recommended to use the SDK in Lazy loading or Manual polling mode instead of the default Auto polling mode.

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

<!-- -->

<!-- -->

<!-- -->

<!-- -->

* [Sample Cloudflare Worker](https://github.com/configcat/js-unified-sdk/tree/master/samples/cloudflare-worker)

<!-- -->

<!-- -->

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)
* [ConfigCat SDK for JavaScript in NPM](https://www.npmjs.com/package/@configcat/sdk)


---

# Deno SDK

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

[![Star on GitHub](https://img.shields.io/github/stars/configcat/js-unified-sdk.svg?style=social)](https://github.com/configcat/js-unified-sdk/stargazers) [![JS SDK CI](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml/badge.svg?branch=master)](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml) [![SonarCloud Coverage](https://img.shields.io/sonar/coverage/configcat_js-unified-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_js-unified-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/js-unified-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/js-unified-sdk?targetFile=package.json) [![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=configcat_js-sdk\&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=configcat_js-sdk) [![JSDELIVR](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)

<!-- -->

<!-- -->

<!-- -->

[ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install and import package[â](#1-install-and-import-package "Direct link to 1. Install and import package")

<!-- -->

<!-- -->

<!-- -->

First install the [NPM package](https://npmjs.com/package/@configcat/sdk):

```
npm i @configcat/sdk
```

Then import it into your application:

```
import * as configcat from "@configcat/sdk/deno";
```

info

To make this work in older versions of Deno, you may need to enable the [unstable-byonm](https://deno.com/blog/node-to-deno-challenge#what-are-all-these-unstable-node-compatibility-settings) feature or adjust your [import map](https://docs.deno.com/runtime/fundamentals/modules/#differentiating-between-imports-or-importmap-in-deno.json-and---import-map-option).

### 2. Create the *ConfigCat* client with your SDK Key[â](#2-create-the-configcat-client-with-your-sdk-key "Direct link to 2-create-the-configcat-client-with-your-sdk-key")

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');
```

<!-- -->

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

The async/await way:

```
const value = await configCatClient.getValueAsync(
  'isMyAwesomeFeatureEnabled',
  false,
);

if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```

<!-- -->

<!-- -->

The Promise way:

```
configCatClient
  .getValueAsync('isMyAwesomeFeatureEnabled', false)
  .then((value) => {
    if (value) {
      do_the_new_thing();
    } else {
      do_the_old_thing();
    }
  });
```

The *ConfigCat SDK* also offers a synchronous API for feature flag evaluation. Read more [here](#snapshots-and-synchronous-feature-flag-evaluation).

### 4. Dispose the *ConfigCat* client[â](#4-dispose-the-configcat-client "Direct link to 4-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
configcat.disposeAllClients(); // disposes all clients
// -or-
configCatClient.dispose(); // disposes a specific client
```

<!-- -->

## Creating the *ConfigCat* Client[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.getClient('<sdkKey>')` returns a client with default options.

The `getClient` function has optional parameters, which can be used to adjust the behavior of the client.

| Parameters    | Description                                                                                                                    | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from *ConfigCat Dashboard*.                            | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes). | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                             | -                      |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

<!-- -->

<!-- -->

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                      |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| `configFetcher`    | Custom [`IConfigCatConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigFetcher.ts) instance for downloading a config.                                                                                                                                                                               | [`DenoHttpConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/deno/DenoHttpConfigFetcher.ts)         |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                       | [`InMemoryConfigCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts)                       |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                           | [`ConfigCatConsoleLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) (with WARN level) |
| `logFilter`        | Sets a custom log filter. [More about log filtering](#log-filtering).                                                                                                                                                                                                                                                             | `undefined` (none)                                                                                                           |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                              |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                        |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     |                                                                                                                              |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                      |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                           |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                      |

<!-- -->

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    setupHooks: (hooks) => hooks.on('clientReady', function() {
      const keys = this.configCatClient.snapshot().getAllKeys();
      console.log(`Client is ready! Number of available feature flags: ${keys.length}`);
    }),
  },
);
```

info

You can acquire singleton client instances for your SDK keys using the `configcat.getClient(sdkKey: "<sdkKey>")` factory function. (However, please keep in mind that subsequent calls to `getClient()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `configcat.disposeAllClients()` function or do it individually using the `configCatClient.dispose()` method.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

Returns a Promise with the value.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((value) => {
    console.log(value);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the return type of the `getValue` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`getValueDetailsAsync()` is similar to `getValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const details = await configCatClient.getValueDetailsAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueDetailsAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((details) => {
    console.log(details);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                            | Description                                                                                                |
| ------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                     | `string`                        | The key of the evaluated feature flag or setting.                                                          |
| `value`                   | `boolean` / `string` / `number` | The evaluated value of the feature flag or setting.                                                        |
| `user`                    | `User`                          | The User Object used for the evaluation.                                                                   |
| `isDefaultValue`          | `boolean`                       | True when the default value passed to `getValueDetailsAsync()` is returned due to an error.                |
| `errorCode`               | `EvaluationErrorCode`           | In case of an error, this property contains a code that identifies the reason for the error.               |
| `errorMessage`            | `string`                        | In case of an error, this property contains the error message.                                             |
| `errorException`          | `any`                           | In case of an error, this property contains the related exception object (if any).                         |
| `matchedTargetingRule`    | `TargetingRule`                 | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageOption` | `PercentageOption`              | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetchTime`               | `Date`                          | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
```

```
const userObject = { identifier: 'john@example.com' };
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
const userObject = {
  identifier: '#UNIQUE-USER-IDENTIFIER#',
  email: 'john@example.com',
  country: 'United Kingdom',
  custom: {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
};
```

The `custom` dictionary also allows attribute values other than `string` values:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    defaultUser: { identifier: 'john@example.com' },
  },
);
```

...or using the `setDefaultUser()` method of the `configCatClient` object:

```
configCatClient.setDefaultUser({ identifier: 'john@example.com' });
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

// The default user will be used in the evaluation process.
const value = await configCatClient.getValueAsync('keyOfMyFeatureFlag', false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

const otherUser = { identifier: 'brian@example.com' };

// otherUser will be used in the evaluation process.
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag',
  false,
  otherUser,
);
```

You can also remove the default user by doing the following:

```
configCatClient.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    pollIntervalSeconds: 95,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.LazyLoad,
  {
    cacheTimeToLiveSeconds: 600,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

await configCatClient.forceRefreshAsync();
const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

> `getValueAsync()` returns `defaultValue` if the cache is empty. Call `forceRefreshAsync()` to update the cache.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value); // console: "my default value"

await configCatClient.forceRefreshAsync();
value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configFetched: [result: RefreshResult, isInitiatedByUser: boolean]`: This event is emitted each time the client attempts to refresh the cached config by fetching the latest version from the ConfigCat CDN. It is emitted not only when `ForceRefreshAsync` is called but also when the refresh is initiated by the client automatically. Thus, this event allows you to observe potential network issues that occur under the hood.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', function() {
        /* handle the event */
      }),
  },
);
```

...or directly on the `ConfigCatClient` instance:

```
configCatClient.on('flagEvaluated', function() {
  /* handle the event */
});
```

caution

Some events (e.g. `clientReady`, `configChanged` and `clientError`) may be emitted before `getClient` returns. This means you may miss them unless you subscribe on initialization.

However, even if you do, there's another gotcha: it's not safe to use the outer `configCatClient` variable in your event handler because it may not yet be assigned when the handler is called. Instead, you can safely access the client instance via `this.configCatClient` - provided that the event handler is a normal function, not an arrow function.

## Snapshots and synchronous feature flag evaluation[â](#snapshots-and-synchronous-feature-flag-evaluation "Direct link to Snapshots and synchronous feature flag evaluation")

On JavaScript platforms, the *ConfigCat* client provides only asynchronous methods for evaluating feature flags and settings because these operations may involve network communication (e.g. downloading config data from the ConfigCat CDN servers), which is necessarily an asynchronous operation in JavaScript.

However, there can be circumstances where synchronous evaluation is preferable, thus, since v8.1.0, the JavaScript SDK provides a way to synchronously evaluate feature flags and settings via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
);

// Wait for the client to initialize.
await configCatClient.waitForReady();

const snapshot = configCatClient.snapshot();

const user = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
for (const key of snapshot.getAllKeys()) {
  const value = snapshot.getValue(key, null, user);
  console.log(`${key}: ${value}`);
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
const clientCacheState = await configCatClient.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  // Handle initialization failure (see below).
  console.warn('ConfigCat client failed to obtain the config data during initialization.');
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `configChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
configCatClient.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
configCatClient.setOnline();
```

Using the `configCatClient.isOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` object<!-- --> or from a custom flag override data source.

### Map[â](#map "Direct link to Map")

You can specify simple feature flag & setting overrides using a `{ [key: string]: boolean | string | number }` map.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: configcat.createFlagOverridesFromMap(
      {
        enabledFeature: true,
        disabledFeature: false,
        intSetting: 5,
        doubleSetting: 3.14,
        stringSetting: 'test',
      },
      configcat.OverrideBehaviour.LocalOnly,
    ),
  },
);
```

<!-- -->

### Custom data source implementation[â](#custom-data-source-implementation "Direct link to Custom data source implementation")

You can create a custom flag override data source by implementing `IOverrideDataSource`.

The SDK provides the `createSettingFromValue` function to create `Setting` objects from simple `boolean`, `string` and `number` values. In case you need complex (full-featured) flag overrides, you can use the `deserializeConfig` function to obtain `Setting` objects from a config JSON conforming to the [config JSON v6 format](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

```
class MyCustomOverrideDataSource implements IOverrideDataSource {
  private settings: Record<string, Setting>;

  constructor(configJson: string) {
    this.settings = deserializeConfig(configJson).f ?? {};
  }

  getOverrides(): Record<string, Setting> {
    return this.settings;
  }
}
```

or

```
function MyCustomOverrideDataSource(configJson) {
  this.settings = deserializeConfig(configJson).f ?? {};
}

MyCustomOverrideDataSource.prototype.getOverrides = function () {
  return this.settings;
};
```

then

```
// Set the `MyCustomOverrideDataSource` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: {
      dataSource: new MyCustomOverrideDataSource('{ "f": { ... } }'),
      behaviour: configcat.OverrideBehaviour.LocalOnly,
    }
  },
);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: configcat.createConsoleLogger(configcat.LogLevel.Info), // Setting log level to Info
  },
);
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
// Set the `MyCustomLogger` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: new MyCustomLogger(),
  },
);
```

### Log Filtering[â](#log-filtering "Direct link to Log Filtering")

You can define a custom log filter by providing a callback function via the `logFilter` option. The callback will be called by the *ConfigCat SDK* each time a log event occurs (and the event passes the minimum log level specified by the `IConfigCatLogger.level` property). That is, the callback allows you to filter log events by `level`, `eventId`, `message` or `exception`. The formatted message string can be obtained via `message.toString()`. If the callback function returns `true`, the event will be logged, otherwise it will be skipped.

```
// Filter out events with id 1001 from the log.
const logFilter = (level, eventId, message, exception) => eventId != 1001;

const configCatClient = configcat.getClient(
  "#YOUR-SDK-KEY#",
  configcat.PollingMode.AutoPoll,
  {
    logFilter: logFilter
  }
);
```

caution

Please make sure that your log filter logic doesn't perform heavy computation. A complex or incorrectly implemented log filter can degrade the performance of the SDK.

## `getAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeysAsync()` method.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

const keys = await configCatClient.getAllKeysAsync();
console.log(keys);
```

## `getAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValuesAsync();
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValuesAsync(userObject);
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);
```

## `getAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValueDetailsAsync();
settingValues.forEach((details) => console.log(details));

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValueDetailsAsync(userObject);
settingValues.forEach((details) => console.log(details));
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `getClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
// Set the `MyCustomCache` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    cache: new MyCustomCache(),
  },
);
```

info

The JavaScript SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

<!-- -->

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the *ConfigCat SDK* that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Platform compatibility[â](#platform-compatibility "Direct link to Platform compatibility")

<!-- -->

The SDK should be compatible with latest versions of Deno.

The SDK is [tested](https://github.com/configcat/js-unified-sdk/blob/master/.github/workflows/js-sdk-ci.yml) against the following <!-- -->runtimes<!-- -->:

* Deno (v1.31, v1.46, latest stable) on Windows / Ubuntu / macOS

The SDK is compatible with TypeScript v4.0.2 or newer. Earlier versions may work but those are not tested, thus, not supported officially.

These tests are running on each pull request, before each deploy, and on a daily basis.

You can view a sample run [here](https://github.com/configcat/js-unified-sdk/actions/runs/11745259578).

<!-- -->

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

<!-- -->

<!-- -->

* [Sample Deno console application](https://github.com/configcat/js-unified-sdk/tree/master/samples/deno-console)

<!-- -->

<!-- -->

<!-- -->

<!-- -->

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)
* [ConfigCat SDK for JavaScript in NPM](https://www.npmjs.com/package/@configcat/sdk)


---

# Node.js SDK

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

[![Star on GitHub](https://img.shields.io/github/stars/configcat/js-unified-sdk.svg?style=social)](https://github.com/configcat/js-unified-sdk/stargazers) [![JS SDK CI](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml/badge.svg?branch=master)](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml) [![SonarCloud Coverage](https://img.shields.io/sonar/coverage/configcat_js-unified-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_js-unified-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/js-unified-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/js-unified-sdk?targetFile=package.json) [![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=configcat_js-sdk\&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=configcat_js-sdk) [![JSDELIVR](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)

<!-- -->

<!-- -->

info

This SDK supersedes the legacy [Node.js SDK](https://configcat.com/docs/docs/sdk-reference/js/.md).

[ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install and import package[â](#1-install-and-import-package "Direct link to 1. Install and import package")

<!-- -->

<!-- -->

<!-- -->

First install the [NPM package](https://npmjs.com/package/@configcat/sdk):

```
npm i @configcat/sdk
```

Then import it into your application:

```
const configcat = require("@configcat/sdk/node");
```

or

```
import * as configcat from "@configcat/sdk/node";
```

info

For subpath imports to work **in TypeScript** when using [ts-node](https://www.npmjs.com/package/ts-node), you must set the [moduleResolution](https://www.typescriptlang.org/tsconfig/#moduleResolution) option to `node16` or `nodenext` in your `tsconfig.json`. For TypeScript versions older than 4.7, where these options are not available, you need to fall back to module resolution `node` and importing from the main entry point `@configcat/sdk`.

### 2. Create the *ConfigCat* client with your SDK Key[â](#2-create-the-configcat-client-with-your-sdk-key "Direct link to 2-create-the-configcat-client-with-your-sdk-key")

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');
```

<!-- -->

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

The async/await way:

```
const value = await configCatClient.getValueAsync(
  'isMyAwesomeFeatureEnabled',
  false,
);

if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```

<!-- -->

info

Please note that [top-level await in modules](https://exploringjs.com/js/book/ch_modules.html#top-level-await) is available only if your project is [set up to use the ECMAScript module system](https://nodejs.org/api/esm.html). Otherwise you will need to use Promises or wrap your code in an async function as shown [here](https://github.com/configcat/js-unified-sdk/blob/master/samples/node-console/index.js).

The Promise way:

```
configCatClient
  .getValueAsync('isMyAwesomeFeatureEnabled', false)
  .then((value) => {
    if (value) {
      do_the_new_thing();
    } else {
      do_the_old_thing();
    }
  });
```

The *ConfigCat SDK* also offers a synchronous API for feature flag evaluation. Read more [here](#snapshots-and-synchronous-feature-flag-evaluation).

### 4. Dispose the *ConfigCat* client[â](#4-dispose-the-configcat-client "Direct link to 4-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
configcat.disposeAllClients(); // disposes all clients
// -or-
configCatClient.dispose(); // disposes a specific client
```

<!-- -->

## Creating the *ConfigCat* Client[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.getClient('<sdkKey>')` returns a client with default options.

The `getClient` function has optional parameters, which can be used to adjust the behavior of the client.

| Parameters    | Description                                                                                                                    | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from *ConfigCat Dashboard*.                            | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes). | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                             | -                      |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

<!-- -->

<!-- -->

<!-- -->

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                      |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| `configFetcher`    | Custom [`IConfigCatConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigFetcher.ts) instance for downloading a config.                                                                                                                                                                               | [`NodeHttpConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/node/NodeHttpConfigFetcher.ts)         |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                       | [`InMemoryConfigCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts)                       |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                           | [`ConfigCatConsoleLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) (with WARN level) |
| `logFilter`        | Sets a custom log filter. [More about log filtering](#log-filtering).                                                                                                                                                                                                                                                             | `undefined` (none)                                                                                                           |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                              |
| `httpAgent`        | The [`http.Agent`](https://nodejs.org/api/http.html#class-httpagent) instance to use for non-secure HTTP communication. Can be used to route `http://...` requests made by the SDK through an HTTP, HTTPS or SOCKS proxy (see also [this section](#using-configcat-behind-a-proxy)).                                              |                                                                                                                              |
| `httpsAgent`       | The [`https.Agent`](https://nodejs.org/api/https.html#class-httpsagent) instance to use for secure HTTP communication. Can be used to route `https://...` requests made by the SDK through an HTTP, HTTPS or SOCKS proxy (see also [this section](#using-configcat-behind-a-proxy)).                                              |                                                                                                                              |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                        |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     |                                                                                                                              |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                      |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                           |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                      |

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    setupHooks: (hooks) => hooks.on('clientReady', function() {
      const keys = this.configCatClient.snapshot().getAllKeys();
      console.log(`Client is ready! Number of available feature flags: ${keys.length}`);
    }),
  },
);
```

info

You can acquire singleton client instances for your SDK keys using the `configcat.getClient(sdkKey: "<sdkKey>")` factory function. (However, please keep in mind that subsequent calls to `getClient()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `configcat.disposeAllClients()` function or do it individually using the `configCatClient.dispose()` method.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

Returns a Promise with the value.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((value) => {
    console.log(value);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the return type of the `getValue` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`getValueDetailsAsync()` is similar to `getValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const details = await configCatClient.getValueDetailsAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueDetailsAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((details) => {
    console.log(details);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                            | Description                                                                                                |
| ------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                     | `string`                        | The key of the evaluated feature flag or setting.                                                          |
| `value`                   | `boolean` / `string` / `number` | The evaluated value of the feature flag or setting.                                                        |
| `user`                    | `User`                          | The User Object used for the evaluation.                                                                   |
| `isDefaultValue`          | `boolean`                       | True when the default value passed to `getValueDetailsAsync()` is returned due to an error.                |
| `errorCode`               | `EvaluationErrorCode`           | In case of an error, this property contains a code that identifies the reason for the error.               |
| `errorMessage`            | `string`                        | In case of an error, this property contains the error message.                                             |
| `errorException`          | `any`                           | In case of an error, this property contains the related exception object (if any).                         |
| `matchedTargetingRule`    | `TargetingRule`                 | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageOption` | `PercentageOption`              | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetchTime`               | `Date`                          | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
```

```
const userObject = { identifier: 'john@example.com' };
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
const userObject = {
  identifier: '#UNIQUE-USER-IDENTIFIER#',
  email: 'john@example.com',
  country: 'United Kingdom',
  custom: {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
};
```

The `custom` dictionary also allows attribute values other than `string` values:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    defaultUser: { identifier: 'john@example.com' },
  },
);
```

...or using the `setDefaultUser()` method of the `configCatClient` object:

```
configCatClient.setDefaultUser({ identifier: 'john@example.com' });
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

// The default user will be used in the evaluation process.
const value = await configCatClient.getValueAsync('keyOfMyFeatureFlag', false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

const otherUser = { identifier: 'brian@example.com' };

// otherUser will be used in the evaluation process.
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag',
  false,
  otherUser,
);
```

You can also remove the default user by doing the following:

```
configCatClient.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    pollIntervalSeconds: 95,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.LazyLoad,
  {
    cacheTimeToLiveSeconds: 600,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

await configCatClient.forceRefreshAsync();
const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

> `getValueAsync()` returns `defaultValue` if the cache is empty. Call `forceRefreshAsync()` to update the cache.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value); // console: "my default value"

await configCatClient.forceRefreshAsync();
value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configFetched: [result: RefreshResult, isInitiatedByUser: boolean]`: This event is emitted each time the client attempts to refresh the cached config by fetching the latest version from the ConfigCat CDN. It is emitted not only when `ForceRefreshAsync` is called but also when the refresh is initiated by the client automatically. Thus, this event allows you to observe potential network issues that occur under the hood.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', function() {
        /* handle the event */
      }),
  },
);
```

...or directly on the `ConfigCatClient` instance:

```
configCatClient.on('flagEvaluated', function() {
  /* handle the event */
});
```

caution

Some events (e.g. `clientReady`, `configChanged` and `clientError`) may be emitted before `getClient` returns. This means you may miss them unless you subscribe on initialization.

However, even if you do, there's another gotcha: it's not safe to use the outer `configCatClient` variable in your event handler because it may not yet be assigned when the handler is called. Instead, you can safely access the client instance via `this.configCatClient` - provided that the event handler is a normal function, not an arrow function.

## Snapshots and synchronous feature flag evaluation[â](#snapshots-and-synchronous-feature-flag-evaluation "Direct link to Snapshots and synchronous feature flag evaluation")

On JavaScript platforms, the *ConfigCat* client provides only asynchronous methods for evaluating feature flags and settings because these operations may involve network communication (e.g. downloading config data from the ConfigCat CDN servers), which is necessarily an asynchronous operation in JavaScript.

However, there can be circumstances where synchronous evaluation is preferable, thus, since v8.1.0, the JavaScript SDK provides a way to synchronously evaluate feature flags and settings via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
);

// Wait for the client to initialize.
await configCatClient.waitForReady();

const snapshot = configCatClient.snapshot();

const user = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
for (const key of snapshot.getAllKeys()) {
  const value = snapshot.getValue(key, null, user);
  console.log(`${key}: ${value}`);
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
const clientCacheState = await configCatClient.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  // Handle initialization failure (see below).
  console.warn('ConfigCat client failed to obtain the config data during initialization.');
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `configChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
configCatClient.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
configCatClient.setOnline();
```

Using the `configCatClient.isOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` object<!-- --> or from a custom flag override data source.

### Map[â](#map "Direct link to Map")

You can specify simple feature flag & setting overrides using a `{ [key: string]: boolean | string | number }` map.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: configcat.createFlagOverridesFromMap(
      {
        enabledFeature: true,
        disabledFeature: false,
        intSetting: 5,
        doubleSetting: 3.14,
        stringSetting: 'test',
      },
      configcat.OverrideBehaviour.LocalOnly,
    ),
  },
);
```

<!-- -->

### Custom data source implementation[â](#custom-data-source-implementation "Direct link to Custom data source implementation")

You can create a custom flag override data source by implementing `IOverrideDataSource`.

The SDK provides the `createSettingFromValue` function to create `Setting` objects from simple `boolean`, `string` and `number` values. In case you need complex (full-featured) flag overrides, you can use the `deserializeConfig` function to obtain `Setting` objects from a config JSON conforming to the [config JSON v6 format](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

```
class MyCustomOverrideDataSource implements IOverrideDataSource {
  private settings: Record<string, Setting>;

  constructor(configJson: string) {
    this.settings = deserializeConfig(configJson).f ?? {};
  }

  getOverrides(): Record<string, Setting> {
    return this.settings;
  }
}
```

or

```
function MyCustomOverrideDataSource(configJson) {
  this.settings = deserializeConfig(configJson).f ?? {};
}

MyCustomOverrideDataSource.prototype.getOverrides = function () {
  return this.settings;
};
```

then

```
// Set the `MyCustomOverrideDataSource` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: {
      dataSource: new MyCustomOverrideDataSource('{ "f": { ... } }'),
      behaviour: configcat.OverrideBehaviour.LocalOnly,
    }
  },
);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: configcat.createConsoleLogger(configcat.LogLevel.Info), // Setting log level to Info
  },
);
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
// Set the `MyCustomLogger` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: new MyCustomLogger(),
  },
);
```

### Log Filtering[â](#log-filtering "Direct link to Log Filtering")

You can define a custom log filter by providing a callback function via the `logFilter` option. The callback will be called by the *ConfigCat SDK* each time a log event occurs (and the event passes the minimum log level specified by the `IConfigCatLogger.level` property). That is, the callback allows you to filter log events by `level`, `eventId`, `message` or `exception`. The formatted message string can be obtained via `message.toString()`. If the callback function returns `true`, the event will be logged, otherwise it will be skipped.

```
// Filter out events with id 1001 from the log.
const logFilter = (level, eventId, message, exception) => eventId != 1001;

const configCatClient = configcat.getClient(
  "#YOUR-SDK-KEY#",
  configcat.PollingMode.AutoPoll,
  {
    logFilter: logFilter
  }
);
```

caution

Please make sure that your log filter logic doesn't perform heavy computation. A complex or incorrectly implemented log filter can degrade the performance of the SDK.

## `getAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeysAsync()` method.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

const keys = await configCatClient.getAllKeysAsync();
console.log(keys);
```

## `getAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValuesAsync();
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValuesAsync(userObject);
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);
```

## `getAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValueDetailsAsync();
settingValues.forEach((details) => console.log(details));

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValueDetailsAsync(userObject);
settingValues.forEach((details) => console.log(details));
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `getClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
// Set the `MyCustomCache` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    cache: new MyCustomCache(),
  },
);
```

info

The JavaScript SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Using ConfigCat behind a proxy[â](#using-configcat-behind-a-proxy "Direct link to Using ConfigCat behind a proxy")

It is possible to set up the SDK to route HTTP requests through a HTTP, HTTPS or SOCKS proxy.

```
npm i https-proxy-agent
```

```
import { HttpsProxyAgent } from 'https-proxy-agent';

const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    httpsAgent: new HttpsProxyAgent("http://192.168.1.1:8080"),
  },
);
```

info

By default, you need to specify the `httpsAgent` option because the SDK always uses HTTPS to access the ConfigCat CDN. However, if you set the `baseUrl` to a `http://...` URL, you will need to install `http-proxy-agent` and set the `httpAgent` option instead.

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the *ConfigCat SDK* that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Platform compatibility[â](#platform-compatibility "Direct link to Platform compatibility")

<!-- -->

The SDK should be compatible with latest versions of Node.js.

The SDK is [tested](https://github.com/configcat/js-unified-sdk/blob/master/.github/workflows/js-sdk-ci.yml) against the following <!-- -->runtimes<!-- -->:

* Node.js (v14.x, v16.x, v18.x, v20.x, v22.x) on Windows / Ubuntu / macOS

The SDK is compatible with TypeScript v4.0.2 or newer. Earlier versions may work but those are not tested, thus, not supported officially.

These tests are running on each pull request, before each deploy, and on a daily basis.

You can view a sample run [here](https://github.com/configcat/js-unified-sdk/actions/runs/11745259578).

## Best practices[â](#best-practices "Direct link to Best practices")

### Choosing polling mode for serverless functions[â](#choosing-polling-mode-for-serverless-functions "Direct link to Choosing polling mode for serverless functions")

In most cases, Auto polling is a good choice, but it's not ideal for short-lived serverless functions like AWS Lambdas, Azure Functions, Cloudflare Workers, etc.

For example, if the SDK is running in a Next.js application that is hosted on Vercel (AWS Lambda), or your application is hosted directly in AWS Lambdas, it is recommended to use the SDK in Lazy loading or Manual polling mode instead of the default Auto polling mode.

As AWS Lambdas try to minimize their uptime, the applications are terminated as soon as the sytem detects inactivity in the application.

Auto polling mode is implemented using an asynchronous background loop to periodically get the config data from the ConfigCat servers, however the AWS Lambda doesn't detect it as a running application and terminates it.

So it can easily happen that there is an ongoing HTTP GET request towards our servers and this termination can cause errors. The most likely error message in this case is `Request timed out while trying to fetch config JSON.`

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

<!-- -->

* [Sample Node.js console application](https://github.com/configcat/js-unified-sdk/tree/master/samples/node-console)
* [Sample Node.js console application using ECMAScript module system](https://github.com/configcat/js-unified-sdk/tree/master/samples/node-console-esm)
* [Sample Node.js console application using TypeScript](https://github.com/configcat/js-unified-sdk/tree/master/samples/ts-node-console)
* [Sample Node.js console application using TypeScript and ECMAScript module system](https://github.com/configcat/js-unified-sdk/tree/master/samples/ts-node-console-esm)
* [Sample Node.js application using Express and Docker](https://github.com/configcat/js-unified-sdk/tree/master/samples/node-expresswithdocker)
* [Sample Node.js application on how to get real time updates on feature flag changes](https://github.com/configcat/js-unified-sdk/tree/master/samples/node-realtimeupdate)

<!-- -->

<!-- -->

<!-- -->

<!-- -->

## Guides[â](#guides "Direct link to Guides")

See the guides on how to use ConfigCat's JavaScript SDK with the following libraries and frameworks:

info

Some of these guides may use legacy SDKs. However, the parts beyond NPM package installation and import should still work with modern SDKs.

* [NestJS](https://configcat.com/blog/2022/08/19/how-to-use-feature-flags-in-nestjs/)
* [Express](https://configcat.com/blog/2022/09/02/how-to-use-feature-flag-in-expressjs/)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)
* [ConfigCat SDK for JavaScript in NPM](https://www.npmjs.com/package/@configcat/sdk)


---

# ConfigCat SDK for JavaScript

<!-- -->

<!-- -->

<!-- -->

<!-- -->

<!-- -->

[![Star on GitHub](https://img.shields.io/github/stars/configcat/js-unified-sdk.svg?style=social)](https://github.com/configcat/js-unified-sdk/stargazers) [![JS SDK CI](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml/badge.svg?branch=master)](https://github.com/configcat/js-unified-sdk/actions/workflows/js-sdk-ci.yml) [![SonarCloud Coverage](https://img.shields.io/sonar/coverage/configcat_js-unified-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_js-unified-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/js-unified-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/js-unified-sdk?targetFile=package.json) [![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=configcat_js-sdk\&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=configcat_js-sdk) [![JSDELIVR](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)](https://data.jsdelivr.com/v1/package/npm/@configcat/sdk/badge)

info

The ConfigCat SDK for JavaScript unifies the following platform-specific SDKs into a [single, unified NPM package](https://www.npmjs.com/package/@configcat/sdk):

* [Browser (JavaScript) SDK](https://configcat.com/docs/docs/sdk-reference/js/browser/.md)
* [Bun SDK](https://configcat.com/docs/docs/sdk-reference/js/bun/.md)
* [Chromium Extension SDK](https://configcat.com/docs/docs/sdk-reference/js/chromium-extension/.md)
* [Cloudflare Worker SDK](https://configcat.com/docs/docs/sdk-reference/js/cloudflare-worker/.md)
* [Deno SDK](https://configcat.com/docs/docs/sdk-reference/js/deno/.md)
* [Node.js SDK](https://configcat.com/docs/docs/sdk-reference/js/node/.md)

<!-- -->

<!-- -->

[ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install and import package[â](#1-install-and-import-package "Direct link to 1. Install and import package")

<!-- -->

For instructions on installation, see the platform-specific SDK references:

* [Browser (JavaScript) SDK](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#1-install-and-import-package)
* [Bun SDK](https://configcat.com/docs/docs/sdk-reference/js/bun/.md#1-install-and-import-package)
* [Chromium Extension SDK](https://configcat.com/docs/docs/sdk-reference/js/chromium-extension/.md#1-install-and-import-package)
* [Cloudflare Worker SDK](https://configcat.com/docs/docs/sdk-reference/js/cloudflare-worker/.md#1-install-and-import-package)
* [Deno SDK](https://configcat.com/docs/docs/sdk-reference/js/deno/.md#1-install-and-import-package)
* [Node.js SDK](https://configcat.com/docs/docs/sdk-reference/js/node/.md#1-install-and-import-package)

<!-- -->

<!-- -->

### 2. Create the *ConfigCat* client with your SDK Key[â](#2-create-the-configcat-client-with-your-sdk-key "Direct link to 2-create-the-configcat-client-with-your-sdk-key")

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');
```

<!-- -->

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

The async/await way:

```
const value = await configCatClient.getValueAsync(
  'isMyAwesomeFeatureEnabled',
  false,
);

if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```

<!-- -->

<!-- -->

The Promise way:

```
configCatClient
  .getValueAsync('isMyAwesomeFeatureEnabled', false)
  .then((value) => {
    if (value) {
      do_the_new_thing();
    } else {
      do_the_old_thing();
    }
  });
```

The *ConfigCat SDK* also offers a synchronous API for feature flag evaluation. Read more [here](#snapshots-and-synchronous-feature-flag-evaluation).

### 4. Dispose the *ConfigCat* client[â](#4-dispose-the-configcat-client "Direct link to 4-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
configcat.disposeAllClients(); // disposes all clients
// -or-
configCatClient.dispose(); // disposes a specific client
```

## Demo on CodePen[â](#demo-on-codepen "Direct link to Demo on CodePen")

See the Pen [ConfigCat Feature Flag Demo](https://codepen.io/configcat/pen/myemzYW) on [CodePen](https://codepen.io).

## Creating the *ConfigCat* Client[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.getClient('<sdkKey>')` returns a client with default options.

The `getClient` function has optional parameters, which can be used to adjust the behavior of the client.

| Parameters    | Description                                                                                                                    | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from *ConfigCat Dashboard*.                            | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes). | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                             | -                      |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

<!-- -->

<!-- -->

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                      |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| `configFetcher`    | Custom [`IConfigCatConfigFetcher`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigFetcher.ts) instance for downloading a config.                                                                                                                                                                               | a default implementation corresponding to the platform                                                                       |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                       | a default implementation corresponding to the platform                                                                       |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                           | [`ConfigCatConsoleLogger`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatLogger.ts) (with WARN level) |
| `logFilter`        | Sets a custom log filter. [More about log filtering](#log-filtering).                                                                                                                                                                                                                                                             | `undefined` (none)                                                                                                           |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                              |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                        |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     |                                                                                                                              |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                      |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                           |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                      |

<!-- -->

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    setupHooks: (hooks) => hooks.on('clientReady', function() {
      const keys = this.configCatClient.snapshot().getAllKeys();
      console.log(`Client is ready! Number of available feature flags: ${keys.length}`);
    }),
  },
);
```

info

You can acquire singleton client instances for your SDK keys using the `configcat.getClient(sdkKey: "<sdkKey>")` factory function. (However, please keep in mind that subsequent calls to `getClient()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `configcat.disposeAllClients()` function or do it individually using the `configCatClient.dispose()` method.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

Returns a Promise with the value.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((value) => {
    console.log(value);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the return type of the `getValue` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`getValueDetailsAsync()` is similar to `getValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const details = await configCatClient.getValueDetailsAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
);
```

or

```
configCatClient
  .getValueDetailsAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    { identifier: '#UNIQUE-USER-IDENTIFIER#' }, // Optional User Object
  )
  .then((details) => {
    console.log(details);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                            | Description                                                                                                |
| ------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                     | `string`                        | The key of the evaluated feature flag or setting.                                                          |
| `value`                   | `boolean` / `string` / `number` | The evaluated value of the feature flag or setting.                                                        |
| `user`                    | `User`                          | The User Object used for the evaluation.                                                                   |
| `isDefaultValue`          | `boolean`                       | True when the default value passed to `getValueDetailsAsync()` is returned due to an error.                |
| `errorCode`               | `EvaluationErrorCode`           | In case of an error, this property contains a code that identifies the reason for the error.               |
| `errorMessage`            | `string`                        | In case of an error, this property contains the error message.                                             |
| `errorException`          | `any`                           | In case of an error, this property contains the related exception object (if any).                         |
| `matchedTargetingRule`    | `TargetingRule`                 | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageOption` | `PercentageOption`              | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetchTime`               | `Date`                          | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
```

```
const userObject = { identifier: 'john@example.com' };
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
const userObject = {
  identifier: '#UNIQUE-USER-IDENTIFIER#',
  email: 'john@example.com',
  country: 'United Kingdom',
  custom: {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
};
```

The `custom` dictionary also allows attribute values other than `string` values:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    defaultUser: { identifier: 'john@example.com' },
  },
);
```

...or using the `setDefaultUser()` method of the `configCatClient` object:

```
configCatClient.setDefaultUser({ identifier: 'john@example.com' });
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

// The default user will be used in the evaluation process.
const value = await configCatClient.getValueAsync('keyOfMyFeatureFlag', false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const user = { identifier: 'john@example.com' };
configCatClient.setDefaultUser(user);

const otherUser = { identifier: 'brian@example.com' };

// otherUser will be used in the evaluation process.
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag',
  false,
  otherUser,
);
```

You can also remove the default user by doing the following:

```
configCatClient.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    pollIntervalSeconds: 95,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.LazyLoad,
  {
    cacheTimeToLiveSeconds: 600,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

await configCatClient.forceRefreshAsync();
const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

> `getValueAsync()` returns `defaultValue` if the cache is empty. Call `forceRefreshAsync()` to update the cache.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

const value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value); // console: "my default value"

await configCatClient.forceRefreshAsync();
value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configFetched: [result: RefreshResult, isInitiatedByUser: boolean]`: This event is emitted each time the client attempts to refresh the cached config by fetching the latest version from the ConfigCat CDN. It is emitted not only when `ForceRefreshAsync` is called but also when the refresh is initiated by the client automatically. Thus, this event allows you to observe potential network issues that occur under the hood.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', function() {
        /* handle the event */
      }),
  },
);
```

...or directly on the `ConfigCatClient` instance:

```
configCatClient.on('flagEvaluated', function() {
  /* handle the event */
});
```

caution

Some events (e.g. `clientReady`, `configChanged` and `clientError`) may be emitted before `getClient` returns. This means you may miss them unless you subscribe on initialization.

However, even if you do, there's another gotcha: it's not safe to use the outer `configCatClient` variable in your event handler because it may not yet be assigned when the handler is called. Instead, you can safely access the client instance via `this.configCatClient` - provided that the event handler is a normal function, not an arrow function.

## Snapshots and synchronous feature flag evaluation[â](#snapshots-and-synchronous-feature-flag-evaluation "Direct link to Snapshots and synchronous feature flag evaluation")

On JavaScript platforms, the *ConfigCat* client provides only asynchronous methods for evaluating feature flags and settings because these operations may involve network communication (e.g. downloading config data from the ConfigCat CDN servers), which is necessarily an asynchronous operation in JavaScript.

However, there can be circumstances where synchronous evaluation is preferable, thus, since v8.1.0, the JavaScript SDK provides a way to synchronously evaluate feature flags and settings via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
);

// Wait for the client to initialize.
await configCatClient.waitForReady();

const snapshot = configCatClient.snapshot();

const user = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
for (const key of snapshot.getAllKeys()) {
  const value = snapshot.getValue(key, null, user);
  console.log(`${key}: ${value}`);
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
const clientCacheState = await configCatClient.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  // Handle initialization failure (see below).
  console.warn('ConfigCat client failed to obtain the config data during initialization.');
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `configChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
configCatClient.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
configCatClient.setOnline();
```

Using the `configCatClient.isOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` object<!-- --> or from a custom flag override data source.

### Map[â](#map "Direct link to Map")

You can specify simple feature flag & setting overrides using a `{ [key: string]: boolean | string | number }` map.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: configcat.createFlagOverridesFromMap(
      {
        enabledFeature: true,
        disabledFeature: false,
        intSetting: 5,
        doubleSetting: 3.14,
        stringSetting: 'test',
      },
      configcat.OverrideBehaviour.LocalOnly,
    ),
  },
);
```

<!-- -->

### Custom data source implementation[â](#custom-data-source-implementation "Direct link to Custom data source implementation")

You can create a custom flag override data source by implementing `IOverrideDataSource`.

The SDK provides the `createSettingFromValue` function to create `Setting` objects from simple `boolean`, `string` and `number` values. In case you need complex (full-featured) flag overrides, you can use the `deserializeConfig` function to obtain `Setting` objects from a config JSON conforming to the [config JSON v6 format](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

```
class MyCustomOverrideDataSource implements IOverrideDataSource {
  private settings: Record<string, Setting>;

  constructor(configJson: string) {
    this.settings = deserializeConfig(configJson).f ?? {};
  }

  getOverrides(): Record<string, Setting> {
    return this.settings;
  }
}
```

or

```
function MyCustomOverrideDataSource(configJson) {
  this.settings = deserializeConfig(configJson).f ?? {};
}

MyCustomOverrideDataSource.prototype.getOverrides = function () {
  return this.settings;
};
```

then

```
// Set the `MyCustomOverrideDataSource` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: {
      dataSource: new MyCustomOverrideDataSource('{ "f": { ... } }'),
      behaviour: configcat.OverrideBehaviour.LocalOnly,
    }
  },
);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: configcat.createConsoleLogger(configcat.LogLevel.Info), // Setting log level to Info
  },
);
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
// Set the `MyCustomLogger` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: new MyCustomLogger(),
  },
);
```

### Log Filtering[â](#log-filtering "Direct link to Log Filtering")

You can define a custom log filter by providing a callback function via the `logFilter` option. The callback will be called by the *ConfigCat SDK* each time a log event occurs (and the event passes the minimum log level specified by the `IConfigCatLogger.level` property). That is, the callback allows you to filter log events by `level`, `eventId`, `message` or `exception`. The formatted message string can be obtained via `message.toString()`. If the callback function returns `true`, the event will be logged, otherwise it will be skipped.

```
// Filter out events with id 1001 from the log.
const logFilter = (level, eventId, message, exception) => eventId != 1001;

const configCatClient = configcat.getClient(
  "#YOUR-SDK-KEY#",
  configcat.PollingMode.AutoPoll,
  {
    logFilter: logFilter
  }
);
```

caution

Please make sure that your log filter logic doesn't perform heavy computation. A complex or incorrectly implemented log filter can degrade the performance of the SDK.

## `getAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeysAsync()` method.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

const keys = await configCatClient.getAllKeysAsync();
console.log(keys);
```

## `getAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValuesAsync();
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValuesAsync(userObject);
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);
```

## `getAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValueDetailsAsync();
settingValues.forEach((details) => console.log(details));

// invoke with User Object
const userObject = { identifier: 'john@example.com' };

settingValues = await configCatClient.getAllValueDetailsAsync(userObject);
settingValues.forEach((details) => console.log(details));
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/js-unified-sdk/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `getClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
// Set the `MyCustomCache` implementation on client creation.
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    cache: new MyCustomCache(),
  },
);
```

info

The JavaScript SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

<!-- -->

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the *ConfigCat SDK* that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Platform compatibility[â](#platform-compatibility "Direct link to Platform compatibility")

For details on compatibility with runtimes and build tools, see the platform-specific SDK references:

* [Browser (JavaScript) SDK](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#platform-compatibility)
* [Bun SDK](https://configcat.com/docs/docs/sdk-reference/js/bun/.md#platform-compatibility)
* [Chromium Extension SDK](https://configcat.com/docs/docs/sdk-reference/js/chromium-extension/.md#platform-compatibility)
* [Cloudflare Worker SDK](https://configcat.com/docs/docs/sdk-reference/js/cloudflare-worker/.md#platform-compatibility)
* [Deno SDK](https://configcat.com/docs/docs/sdk-reference/js/deno/.md#platform-compatibility)
* [Node.js SDK](https://configcat.com/docs/docs/sdk-reference/js/node/.md#platform-compatibility)

<!-- -->

<!-- -->

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

<!-- -->

Browser applications:

* [Plain HTML + JS](https://github.com/configcat/js-unified-sdk/tree/master/samples/html)
* [Plain HTML + JS using ECMAScript module system](https://github.com/configcat/js-unified-sdk/tree/master/samples/html-esm)
* [Plain HTML + TS running the SDK in a Web Worker](https://github.com/configcat/js-unified-sdk/tree/master/samples/web-worker)
* [Sample Angular web application](https://github.com/configcat/js-unified-sdk/tree/master/samples/angular-sample)
* [Sample React web application](https://github.com/configcat/js-unified-sdk/tree/master/samples/react-sample)
* [Sample React Native application](https://github.com/configcat/js-unified-sdk/tree/master/samples/react-native-sample)
* [Sample Vue SSR web application](https://github.com/configcat/js-unified-sdk/tree/master/samples/vue-ssr-sample)

<!-- -->

Node.js applications:

* [Sample Node.js console application](https://github.com/configcat/js-unified-sdk/tree/master/samples/node-console)
* [Sample Node.js console application using ECMAScript module system](https://github.com/configcat/js-unified-sdk/tree/master/samples/node-console-esm)
* [Sample Node.js console application using TypeScript](https://github.com/configcat/js-unified-sdk/tree/master/samples/ts-node-console)
* [Sample Node.js console application using TypeScript and ECMAScript module system](https://github.com/configcat/js-unified-sdk/tree/master/samples/ts-node-console-esm)
* [Sample Node.js application using Express and Docker](https://github.com/configcat/js-unified-sdk/tree/master/samples/node-expresswithdocker)
* [Sample Node.js application on how to get real time updates on feature flag changes](https://github.com/configcat/js-unified-sdk/tree/master/samples/node-realtimeupdate)

<!-- -->

Deno applications:

* [Sample Deno console application](https://github.com/configcat/js-unified-sdk/tree/master/samples/deno-console)

<!-- -->

Bun applications:

* [Sample Bun console application](https://github.com/configcat/js-unified-sdk/tree/master/samples/bun-console)

<!-- -->

Cloudflare Workers:

* [Sample Cloudflare Worker](https://github.com/configcat/js-unified-sdk/tree/master/samples/cloudflare-worker)

<!-- -->

Extensions for Chromium-based browsers:

* [Sample Chrome extension](https://github.com/configcat/js-unified-sdk/tree/master/samples/chrome-extension)

## Guides[â](#guides "Direct link to Guides")

See the guides on how to use ConfigCat's JavaScript SDK with the following libraries and frameworks:

info

Some of these guides may use legacy SDKs. However, the parts beyond NPM package installation and import should still work with modern SDKs.

Client-side frontend frameworks:

* [Angular](https://configcat.com/blog/2022/08/09/using-feature-flags-in-angular/)
* [React](https://configcat.com/blog/2021/12/13/feature-flags-in-react/)
* [Vue.js](https://configcat.com/blog/2022/01/28/how-to-use-feature-flag-in-vuejs/)
* [Ionic](https://configcat.com/blog/2022/07/29/how-to-use-feature-flags-in-ionic-js/)
* [Phaser](https://configcat.com/blog/2022/02/04/feature-flags-in-phaser/)
* [Solid.js](https://configcat.com/blog/2022/11/11/how-to-use-feature-flags-in-solidjs/)
* [melonJS](https://configcat.com/blog/2022/02/19/feature-flags-in-melonjs/)

SSR frontend frameworks:

* [Nuxt](https://configcat.com/blog/2022/07/01/how-to-use-feature-flags-in-nuxtjs/)
* [Next.js](https://configcat.com/blog/2022/04/22/how-to-use-feature-flags-in-nextjs/)
* [Remix](https://configcat.com/blog/2022/04/01/feature-flags-in-remix/)

Node.js backend frameworks:

* [NestJS](https://configcat.com/blog/2022/08/19/how-to-use-feature-flags-in-nestjs/)
* [Express](https://configcat.com/blog/2022/09/02/how-to-use-feature-flag-in-expressjs/)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat SDK for JavaScript on GitHub](https://github.com/configcat/js-unified-sdk)
* [ConfigCat SDK for JavaScript in NPM](https://www.npmjs.com/package/@configcat/sdk)


---

# Kotlin Multiplatform SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/kotlin-sdk.svg?style=social)](https://github.com/configcat/kotlin-sdk/stargazers) [![Kotlin CI](https://github.com/configcat/kotlin-sdk/actions/workflows/ci.yml/badge.svg?branch=main)](https://github.com/configcat/kotlin-sdk/actions/workflows/ci.yml) [![Maven Central](https://img.shields.io/maven-central/v/com.configcat/configcat-kotlin-client?label=maven%20central)](https://search.maven.org/artifact/com.configcat/configcat-kotlin-client/) [![Quality Gate Status](https://img.shields.io/sonar/quality_gate/configcat_kotlin-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_kotlin-sdk) [![SonarCloud Coverage](https://img.shields.io/sonar/coverage/configcat_kotlin-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_kotlin-sdk)

* [ConfigCat Kotlin Multiplatform SDK on GitHub](https://github.com/configcat/kotlin-sdk)
* [API Documentation](https://configcat.github.io/kotlin-sdk/)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the ConfigCat SDK[â](#1-install-the-configcat-sdk "Direct link to 1. Install the ConfigCat SDK")

build.bradle.kts

```
val configcatVersion: String by project

kotlin {
    sourceSets {
        val commonMain by getting {
            dependencies {
                implementation("com.configcat:configcat-kotlin-client:configcatVersion")
            }
        }
    }
}
```

### 2. Import the ConfigCat SDK[â](#2-import-the-configcat-sdk "Direct link to 2. Import the ConfigCat SDK")

```
import com.configcat.*
```

### 3. Create the ConfigCat client with your SDK Key[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3. Create the ConfigCat client with your SDK Key")

```
import com.configcat.*

suspend fun main() {
    val client = ConfigCatClient("#YOUR-SDK-KEY#")
}
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

```
import com.configcat.*

suspend fun main() {
    val client = ConfigCatClient("#YOUR-SDK-KEY#")
    val isMyAwesomeFeatureEnabled = client.getValue("isMyAwesomeFeatureEnabled", false)
    if (isMyAwesomeFeatureEnabled) {
        doTheNewThing()
    } else {
        doTheOldThing()
    }
}
```

The *ConfigCat SDK* also offers a synchronous API for feature flag evaluation. Read more [here](#snapshots-and-non-blocking-synchronous-feature-flag-evaluation).

### 5. Close the client on application exit[â](#5-close-the-client-on-application-exit "Direct link to 5. Close the client on application exit")

You can safely shut down all clients at once or individually and release all associated resources on application exit.

```
ConfigCatClient.closeAll() // closes all clients

client.close() // closes a specific client
```

## Setting up the *ConfigCat Client*[â](#setting-up-the-configcat-client "Direct link to setting-up-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`ConfigCatClient(<sdkKey>)` returns a client with default options.

### Customizing the *ConfigCat Client*[â](#customizing-the-configcat-client "Direct link to customizing-the-configcat-client")

To customize the SDK's behavior, you can pass an additional `ConfigCatOptions.() -> Unit` parameter to the `ConfigCatClient()` method where the `ConfigCatOptions` class is used to set up the *ConfigCat Client*.

```
import com.configcat.*
import kotlin.time.Duration.Companion.seconds

val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    pollingMode = autoPoll()
    logLevel = LogLevel.INFO
    requestTimeout = 10.seconds
}
```

These are the available options on the `ConfigCatOptions` class:

| Properties       | Type                          | Description                                                                                                                                                                                                                                                                                                                                                                       |
| ---------------- | ----------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `dataGovernance` | `DataGovernance`              | Optional, defaults to `DataGovernance.GLOBAL`. Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.GLOBAL`, `DataGovernance.EU_ONLY`. |
| `baseUrl`        | `String`                      | Optional, sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                                                         |
| `requestTimeout` | `Duration`                    | Optional, defaults to `30s`. Sets the underlying HTTP client's request timeout. [More about HTTP Timeout](#http-timeout).                                                                                                                                                                                                                                                         |
| `configCache`    | `ConfigCache`                 | Optional, sets a custom cache implementation for the client. [More about cache](#custom-cache).                                                                                                                                                                                                                                                                                   |
| `pollingMode`    | `PollingMode`                 | Optional, sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                                                                                       |
| `logger`         | `Logger`                      | Optional, sets the internal logger. [More about logging](#logging).                                                                                                                                                                                                                                                                                                               |
| `logLevel`       | `LogLevel`                    | Optional, defaults to `LogLevel.WARNING`. Sets the internal log level. [More about logging](#logging).                                                                                                                                                                                                                                                                            |
| `flagOverrides`  | `(FlagOverrides.() -> Unit)?` | Optional, sets the local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                                                  |
| `httpEngine`     | `HttpClientEngine?`           | Optional, sets the underlying `Ktor` HTTP engine. [More about HTTP engines](#http-engine).                                                                                                                                                                                                                                                                                        |
| `httpProxy`      | `ProxyConfig?`                | Optional, sets up the HTTP proxy for the underlying `Ktor` HTTP engine. [More about HTTP proxy](#http-proxy).                                                                                                                                                                                                                                                                     |
| `defaultUser`    | `ConfigCatUser?`              | Optional, sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                                                        |
| `offline`        | `Bool`                        | Optional, defaults to `false`. Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                                                 |
| `hooks`          | `Hooks`                       | Optional, used to subscribe events that the SDK sends in specific scenarios. [More about hooks](#hooks).                                                                                                                                                                                                                                                                          |

caution

We strongly recommend you to use the `ConfigCatClient` as a Singleton object in your application. The `ConfigCatClient(sdkKey: <sdkKey>)` method constructs singleton client instances for your SDK keys. These clients can be closed all at once with the `ConfigCatClient.closeAll()` method or individually with `client.close()`.

## Anatomy of `getValue()`[â](#anatomy-of-getvalue "Direct link to anatomy-of-getvalue")

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
val value = client.getValue(
    key = "keyOfMySetting",
    defaultValue = false,
    user = ConfigCatUser(identifier = "#USER-IDENTIFIER#"), // Optional User Object
)
```

caution

It is important to provide an argument for the `defaultValue` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | Type parameter `T`     |
| -------------- | ---------------------- |
| On/Off Toggle  | `Boolean` / `Boolean?` |
| Text           | `String` / `String?`   |
| Whole Number   | `Integer` / `Integer?` |
| Decimal Number | `Double` / `Double?`   |

In addition to the types mentioned above, you also have the option to use the `getAnyValue` method, where the `defaultValue` parameter can be any value (including `null`) regardless of the setting kind.

It's important to note that providing any other type for the type parameter will result in an `IllegalArgumentException`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

When relying on type inference and not explicitly specifying the type parameter, be mindful of potential type mismatch issues, especially with number types. For example, `client.getValue("keyOfMyDecimalSetting", 0)` will return `defaultValue` (`0`) instead of the actual value of the decimal setting because the compiler infers the type as `Integer` instead of `Double`, that is, the call is equivalent to `client.getValue<Integer>("keyOfMyDecimalSetting", 0)`, which is a type mismatch.

To correctly evaluate a decimal setting, you should use:

```
var value = client.getValue("keyOfMyDecimalSetting", 0.0);
```

## Anatomy of `getValueDetails()`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`getValueDetails()` is similar to `getValue()` but instead of returning the evaluated value only, it gives more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
val details = client.getValueDetails(
    key = "keyOfMySetting",
    defaultValue = false,
    user = ConfigCatUser(identifier = "#USER-IDENTIFIER#"), // Optional User Object
)
```

caution

It is important to provide an argument for the `defaultValue` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The details result contains the following information:

| Field                       | Type                                    | Description                                                                                                |
| --------------------------- | --------------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `value`                     | `Boolean` / `String` / `Int` / `Double` | The evaluated value of the feature flag or setting.                                                        |
| `key`                       | `String`                                | The key of the evaluated feature flag or setting.                                                          |
| `isDefaultValue`            | `Boolean`                               | True when the default value passed to `getValueDetails()` is returned due to an error.                     |
| `error`                     | `String?`                               | In case of an error, this property contains the error message.                                             |
| `user`                      | `ConfigCatUser?`                        | The User Object that was used for evaluation.                                                              |
| `matchedPercentageOption`   | `PercentageOption?`                     | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `matchedTargetingRule`      | `TargetingRule?`                        | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `fetchTimeUnixMilliseconds` | `Long`                                  | The last download time of the current config in unix milliseconds format.                                  |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
val user = ConfigCatUser(identifier = "#UNIQUE-USER-IDENTIFIER#")
```

```
val user = ConfigCatUser(identifier = "john@example.com")
```

### Customized User Object creation[â](#customized-user-object-creation "Direct link to Customized User Object creation")

| Argument     | Description                                                                                                              |
| ------------ | ------------------------------------------------------------------------------------------------------------------------ |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any value, even an email address.                  |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                |
| `custom`     | Optional map for custom attributes of a user for advanced Targeting Rule definitions. e.g. User role, Subscription type. |

```
val user = ConfigCatUser(
    identifier = "#UNIQUE-USER-IDENTIFIER#",
    email = "john@example.com",
    country = "United Kingdom",
    custom = mapOf(
        "SubscriptionType" to "Pro",
        "UserRole" to "Admin"
    )
)
```

The `custom` map also allows attribute values other than `String` values:

```
val user = ConfigCatUser(
    identifier = "#UNIQUE-USER-IDENTIFIER#",
    email = "john@example.com",
    country = "United Kingdom",
    custom = mapOf(
        "Rating" to 4.5,
        "RegisteredAt" to Instant.parse("2023-11-22T12:34:56.999Z"),
        "Roles" to arrayOf("Role1", "Role2")
    )
)
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `String` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `String` values,
* all other values are automatically converted to `String` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `String` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `Double` values and all other numeric values which can safely be converted to `Double`,
* accept `String` values containing a properly formatted, valid `Double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `kotlin.time.Instant` values, which are automatically converted to a second-based Unix timestamp,
* accept `Double` values representing a second-based Unix timestamp and all other numeric values which can safely be converted to `Double`,
* accept `String` values containing a properly formatted, valid `Double` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept lists or array of `String`,
* accept `String` values containing a valid JSON string which can be deserialized to an array of `String`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object either on SDK initialization:

```
val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    defaultUser = ConfigCatUser(identifier = "john@example.com")
}
```

or with the `setDefaultUser()` method of the ConfigCat client.

```
client.setDefaultUser(ConfigCatUser(identifier = "john@example.com"))
```

Whenever the `getValue()`, `getValueDetails()`, or `getAllValues()` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
val user = ConfigCatUser(identifier = "john@example.com")
client.setDefaultUser(user)

// The default user will be used at the evaluation process.
val value = client.getValue("keyOfMySetting", false)
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

```
val user = ConfigCatUser(identifier = "john@example.com")
client.setDefaultUser(user)

val otherUser = ConfigCatUser(identifier = "brian@example.com")

// otherUser will be used at the evaluation process.
val value = client.getValue("keyOfMySetting", false, otherUser)
```

For deleting the default user, you can do the following:

```
client.clearDefaultUser()
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValue()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the the `pollingInterval` option parameter of the `autoPoll()` to change the polling interval.

```
import com.configcat.*
import kotlin.time.Duration.Companion.seconds

val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    pollingMode = autoPoll {
        pollingInterval = 100.seconds
    }
}
```

Available options:

| Option Parameter  | Description                                                                                         | Default      |
| ----------------- | --------------------------------------------------------------------------------------------------- | ------------ |
| `pollingInterval` | Polling interval.                                                                                   | `60.seconds` |
| `maxInitWaitTime` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | `5.seconds`  |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValue()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValue()` will return the setting value after the cache is updated.

Use the `cacheRefreshInterval` option parameter of the `lazyLoad()` to set cache lifetime.

```
import com.configcat.*
import kotlin.time.Duration.Companion.seconds

val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    pollingMode = lazyLoad {
        cacheRefreshInterval = 100.seconds
    }
}
```

Available options:

| Parameter              | Description | Default      |
| ---------------------- | ----------- | ------------ |
| `cacheRefreshInterval` | Cache TTL.  | `60.seconds` |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefresh()` is your application's responsibility.

```
val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    pollingMode = manualPoll()
}

client.forceRefresh()
```

> `getValue()` returns `defaultValue` if the cache is empty. Call `forceRefresh()` to update the cache.

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `onClientReady(ClientCacheState)`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTime` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `ClientCacheState` argument.

* `onConfigChanged(Map<String, Setting>, ConfigCatClientSnapshot)`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `onFlagEvaluated(EvaluationDetails)`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetails()`](#anatomy-of-getvaluedetails).

* `onError(String)`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on SDK initialization:

```
val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    hooks.addOnFlagEvaluated { details ->
        /* handle the event */
    }
}
```

or with the `hooks` property of the ConfigCat client:

```
client.hooks.addOnFlagEvaluated { details ->
    /* handle the event */
}
```

## Snapshots and non-blocking synchronous feature flag evaluation[â](#snapshots-and-non-blocking-synchronous-feature-flag-evaluation "Direct link to Snapshots and non-blocking synchronous feature flag evaluation")

The *ConfigCat* client doesn't directly provide synchronous methods for evaluating feature flags and settings because such synchronous methods could block the executing thread for longer periods of time (e.g. when downloading config data from the ConfigCat CDN servers), which could lead to an unresponsive application.

However, there can be circumstances where synchronous evaluation is preferable, thus, since `v4.2.0`, the Kotlin Multiplatform SDK provides a way to synchronously evaluate feature flags and settings as a non-blocking operation, via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    pollingMode = autoPoll
}

// Wait for the client to initialize.
client.waitForReady()

val snapshot = client.snapshot()

val user = ConfigCatUser(identifier = "#UNIQUE-USER-IDENTIFIER#")
for (key in snapshot.getAllKeys()) {
    val value = snapshot.getAnyValue(key, null, user)
    println("$key: $value")
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cache in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefresh`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTime` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
val clientCacheState = client.waitForReady()
if (clientCacheState == ClientCacheState.NO_FLAG_DATA) {
    // Handle initialization failure (see below).
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `onConfigChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

```
client.setOffline()
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

```
client.setOnline()
```

> With `client.isOffline` you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehavior.LOCAL_ONLY`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehavior.LOCAL_OVER_REMOTE`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehavior.REMOTE_OVER_LOCAL`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

### Map[â](#map "Direct link to Map")

You can set up the SDK to load your feature flag & setting overrides from a `Map<String, Any>`.

```
val client = ConfigCatClient("localhost") {
    flagOverrides = {
        behavior = OverrideBehavior.LOCAL_ONLY
        dataSource = OverrideDataSource.map(
            mapOf(
                "enabledFeature" to true,
                "disabledFeature" to false,
                "intSetting" to 5,
                "doubleSetting" to 3.14,
                "stringSetting" to "test"
            )
        )
    }
}
```

### Config[â](#config "Direct link to Config")

You can set up the SDK to load your feature flag & setting overrides from a `Config`.

```
val client = ConfigCatClient("localhost") {
    flagOverrides = {
        behavior = OverrideBehavior.LOCAL_ONLY
        dataSource = OverrideDataSource.config(
            config = Config(
                preferences = Preferences(baseUrl = "test", salt = "test-salt"),
                settings = mapOf(
                    "noRuleOverride" to Setting(
                        1,
                        "",
                        null,
                        null,
                        SettingsValue(stringValue = "noRule"),
                        "myVariationId"
                    ),
                    "ruleOverride" to Setting(
                        1,
                        "",
                        null,
                        arrayOf(
                            TargetingRule(
                                conditions = arrayOf(
                                    Condition(
                                        UserCondition("Identifier", 2, stringArrayValue = arrayOf("@test1")),
                                        null,
                                        null
                                    )
                                ),
                                null,
                                ServedValue(
                                    SettingsValue(stringValue = "ruleMatch"),
                                    "ruleVariationId"
                                )
                            )
                        ),
                        SettingsValue(stringValue = "noMatch"),
                        "myVariationId"
                    ),
                    "percentageOverride" to Setting(
                        1,
                        "",
                        arrayOf(
                            PercentageOption(75, SettingsValue(stringValue = "A"), "percentageAVariationID"),
                            PercentageOption(25, SettingsValue(stringValue = "B"), "percentageAVariationID")
                        ),
                        emptyArray(),
                        SettingsValue(stringValue = "noMatch"),
                        "myVariationId"
                    )
                )
            )
        )
    }
}
```

## `getAllKeys()`[â](#getallkeys "Direct link to getallkeys")

You can get the keys for all available feature flags and settings by calling the `getAllKeys()` method.

```
val client = ConfigCatClient("#YOUR-SDK-KEY#")
val keys = client.getAllKeys()
```

## `getAllValues()`[â](#getallvalues "Direct link to getallvalues")

Evaluates and returns the values of all feature flags and settings. Passing a User Object is optional.

```
val client = ConfigCatClient("#YOUR-SDK-KEY#")
val settingValues = client.getAllValues()

// invoke with User Object
val user = ConfigCatUser(identifier = "#UNIQUE-USER-IDENTIFIER#")
val settingValuesTargeting = client.getAllValues(user)
```

## Cache[â](#cache "Direct link to Cache")

The SDK uses platform specific caching to store the downloaded `config JSON`.<br /><!-- -->These are the storage locations by platform:

* **Android**: `SharedPreferences`. It has a dependency on `android.content.Context`, so it won't be enabled by default, but it can be explicitly set by providing an appropriate `Context`. ([Here](https://github.com/configcat/kotlin-sdk/blob/main/samples/android/app/src/main/java/com/example/configcat_android/MainActivity.kt#L23) is an example)
* **iOS / macOS / tvOS / watchOS**: `NSUserDefaults`.
* **JS (browser only)**: Browser `localStorage`.
* On other platforms the SDK uses a memory-only cache.

If you want to turn off the default behavior, you can set the SDK's cache to `null` or to your own cache implementation.

```
val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    configCache = null
}
```

### Custom Cache[â](#custom-cache "Direct link to Custom Cache")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`ConfigCache`](https://github.com/configcat/kotlin-sdk/blob/main/src/commonMain/kotlin/com/configcat/ConfigCache.kt) interface and set the `configCache` parameter in the setup callback of `ConfigCatClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache : ConfigCache {
    override suspend fun read(key: String): String? {
        // here you have to return with the cached value
    }

    override suspend fun write(key: String, value: String) {
        // here you have to store the new value in the cache
    }
}
```

Then use your custom cache implementation:

```
val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    configCache = MyCustomCache()
}
```

info

The Kotlin SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## HTTP Engine[â](#http-engine "Direct link to HTTP Engine")

The ConfigCat SDK internally uses [Ktor](https://ktor.io) to download the latest config JSON over HTTP. For each platform the SDK includes a specific [HTTP engine](https://ktor.io/docs/http-client-engines.html#limitations):

* **Android / JVM**: `ktor-client-okhttp`
* **macOS / iOS / tvOS / watchOS**: `ktor-client-darwin`
* **JavaScript / Node.js**: `ktor-client-js`
* **Windows / Linux**: It is possible to use Ktor's [Curl engine](https://ktor.io/docs/http-client-engines.html#curl).

You can set/override the HTTP engine like the following:

```
// this example sets up the SDK to use the Curl engine for HTTP communication.
import com.configcat.*
import io.ktor.client.engine.curl.*

val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    httpEngine = Curl.create {
        // additional engine setup
    }
}
```

### HTTP Timeout[â](#http-timeout "Direct link to HTTP Timeout")

You can set the maximum wait time for a ConfigCat HTTP response.

```
import com.configcat.*
import kotlin.time.Duration.Companion.seconds

val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    requestTimeout = 10.seconds
}
```

> The default request timeout is 30 seconds.

### HTTP Proxy[â](#http-proxy "Direct link to HTTP Proxy")

If your application runs behind a proxy you can do the following:

```
val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    httpProxy = ProxyBuilder.http("http://proxy-server:1234/")
}
```

> You can check the availability of the proxy configuration in specific HTTP engines [here](https://ktor.io/docs/proxy.html).

## Force refresh[â](#force-refresh "Direct link to Force refresh")

Call the `forceRefresh()` method on the client to download the latest config JSON and update the cache.

## Logging[â](#logging "Direct link to Logging")

The default logger used by the SDK is simply using `println()` to log messages, but you can override it with your custom logger implementation via the `logger` client option. The custom implementation must satisfy the [Logger](https://github.com/configcat/kotlin-sdk/blob/main/src/commonMain/kotlin/com/configcat/log/Logger.kt) interface.

```
class MyCustomLogger: Logger {
    override fun error(message: String) {
        // write the error logs
    }

    override fun error(message: String, throwable: Throwable) {
        // write the error logs
    }

    override fun warning(message: String) {
        // write the warning logs
    }

    override fun info(message: String) {
        // write the info logs
    }

    override fun debug(message: String) {
        // write the debug logs
    }
}
```

Then you can use your custom logger implementation at the SDK's initialization:

```
val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    logger = MyCustomLogger()
}
```

You can change the verbosity of the logs by passing a `logLevel` parameter to the client options.

```
val client = ConfigCatClient("#YOUR-SDK-KEY#") {
    logLevel = LogLevel.INFO
}
```

Available log levels:

| Level     | Description                                                                             |
| --------- | --------------------------------------------------------------------------------------- |
| `OFF`     | Turn the logging off.                                                                   |
| `ERROR`   | Only error level events are logged.                                                     |
| `WARNING` | Default. Errors and Warnings are logged.                                                |
| `INFO`    | Errors, Warnings and feature flag evaluation is logged.                                 |
| `DEBUG`   | All of the above plus debug info is logged. Debug logs can be different for other SDKs. |

Info level logging helps to inspect how a feature flag was evaluated:

```
[INFO] 2022-01-20T18:22:02.313703 ConfigCat - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'False' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'True' => MATCH, applying rule
  Returning 'True'.
```

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the ConfigCat SDK that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Sample Apps[â](#sample-apps "Direct link to Sample Apps")

Check out our Sample Applications how they use the ConfigCat SDK

* [Kotlin Multiplatform Mobile app](https://github.com/configcat/kotlin-sdk/tree/main/samples/kmm)
* [Android app](https://github.com/configcat/kotlin-sdk/tree/main/samples/android)
* [Kotlin app](https://github.com/configcat/kotlin-sdk/tree/main/samples/kotlin)
* [React app](https://github.com/configcat/kotlin-sdk/tree/main/samples/js)
* [Node.js app](https://github.com/configcat/kotlin-sdk/tree/main/samples/node-js)

## Look Under the Hood[â](#look-under-the-hood "Direct link to Look Under the Hood")

* [ConfigCat Kotlin Multiplatform SDK's repository on GitHub](https://github.com/configcat/kotlin-sdk)
* [ConfigCat Kotlin Multiplatform SDK's API documentation](https://configcat.github.io/kotlin-sdk/)
* [ConfigCat Kotlin Multiplatform SDK on Maven Central](https://central.sonatype.com/artifact/com.configcat/configcat-kotlin-client)


---

# Legacy Node.js SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/node-sdk.svg?style=social)](https://github.com/configcat/node-sdk/stargazers) [![Node CI](https://github.com/configcat/node-sdk/actions/workflows/node-ci.yml/badge.svg?branch=master)](https://github.com/configcat/node-sdk/actions/workflows/node-ci.yml) [![codecov](https://codecov.io/gh/configcat/node-sdk/branch/master/graph/badge.svg)](https://codecov.io/gh/configcat/node-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/node-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/node-sdk?targetFile=package.json) ![License](https://img.shields.io/github/license/configcat/node-sdk.svg) [![Node.JS](https://img.shields.io/node/v/configcat-node)](https://img.shields.io/node/v/configcat-node)

caution

This SDK is superseded by the new [Node.js SDK](https://configcat.com/docs/docs/sdk-reference/js/node/.md).

This legacy SDK is in maintenance mode now, it will receive only critical security patches until **official support ends on August 31, 2026**.

For guidance on migration, see [this section](#migration-to-the-new-sdk).

[ConfigCat Node.js SDK on GitHub](https://github.com/configcat/node-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install *ConfigCat SDK*[â](#1-install-configcat-sdk "Direct link to 1-install-configcat-sdk")

*via NPM*

```
npm i configcat-node
```

### 2. Import package[â](#2-import-package "Direct link to 2. Import package")

```
const configcat = require('configcat-node');
```

### 3. Create the *ConfigCat* client with your *SDK Key*[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3-create-the-configcat-client-with-your-sdk-key")

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

The async/await way:

```
const value = await configCatClient.getValueAsync(
  'isMyAwesomeFeatureEnabled',
  false,
);

if (value) {
  do_the_new_thing();
} else {
  do_the_old_thing();
}
```

(Please note that [top-level await in modules](https://exploringjs.com/js/book/ch_modules.html#top-level-await) is available only if your project is [set up to use the ECMAScript module system](https://nodejs.org/api/esm.html). Otherwise you will need to use Promises or wrap your code in an async function as shown [here](https://github.com/configcat/node-sdk/blob/master/samples/console/index.js).)

The Promise way:

```
configCatClient
  .getValueAsync('isMyAwesomeFeatureEnabled', false)
  .then((value) => {
    if (value) {
      do_the_new_thing();
    } else {
      do_the_old_thing();
    }
  });
```

### 5. Dispose the *ConfigCat* client[â](#5-dispose-the-configcat-client "Direct link to 5-dispose-the-configcat-client")

You can safely dispose all clients at once or individually and release all associated resources on application exit.

```
configcat.disposeAllClients(); // disposes all clients
// -or-
configCatClient.dispose(); // disposes a specific client
```

## Creating the *ConfigCat Client*[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcat.getClient('<sdkKey>')` returns a client with default options.

The `getClient` function has optional parameters, which can be used to adjust the behavior of the client.

| Parameters    | Description                                                                                                                    | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from the *ConfigCat Dashboard*.                        | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes). | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                             | -                      |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                 |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/common-js/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                                | [`ConfigCatConsoleLogger`](https://github.com/configcat/common-js/blob/master/src/ConfigCatLogger.ts) (with WARN level) |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                   |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                         |
| `proxy`            | Proxy settings. [More about the proxy settings](#using-configcat-behind-a-proxy).                                                                                                                                                                                                                                                 |                                                                                                                         |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                 |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                            | [`InMemoryConfigCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts)                       |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     | -                                                                                                                       |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                      |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                 |

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('clientReady', () => console.log('Client is ready!')),
  },
);
```

info

You can acquire singleton client instances for your SDK keys using the `configcat.getClient(sdkKey: "<sdkKey>")` factory function. (However, please keep in mind that subsequent calls to `getClient()` with the *same SDK Key* return a *shared* client instance, which was set up by the first call.)

You can close all open clients at once using the `configcat.disposeAllClients()` function or do it individually using the `configCatClient.dispose()` method.

## Anatomy of `getValueAsync()`[â](#anatomy-of-getvalueasync "Direct link to anatomy-of-getvalueasync")

Returns a Promise with the value.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
);
```

or

```
configCatClient
  .getValueAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
  )
  .then((value) => {
    console.log(value);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the return type of the `getValue` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `getValueDetailsAsync()`[â](#anatomy-of-getvaluedetailsasync "Direct link to anatomy-of-getvaluedetailsasync")

`getValueDetailsAsync()` is similar to `getValueAsync()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
const details = await configCatClient.getValueDetailsAsync(
  'keyOfMyFeatureFlag', // Setting Key
  false, // Default value
  new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
);
```

or

```
configCatClient
  .getValueDetailsAsync(
    'keyOfMyFeatureFlag', // Setting Key
    false, // Default value
    new configcat.User('#UNIQUE-USER-IDENTIFIER#'), // Optional User Object
  )
  .then((details) => {
    console.log(details);
  });
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                     | Type                            | Description                                                                                                |
| ------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                     | `string`                        | The key of the evaluated feature flag or setting.                                                          |
| `value`                   | `boolean` / `string` / `number` | The evaluated value of the feature flag or setting.                                                        |
| `user`                    | `User`                          | The User Object used for the evaluation.                                                                   |
| `isDefaultValue`          | `boolean`                       | True when the default value passed to `getValueDetailsAsync()` is returned due to an error.                |
| `errorMessage`            | `string`                        | In case of an error, this property contains the error message.                                             |
| `errorException`          | `any`                           | In case of an error, this property contains the related exception object (if any).                         |
| `matchedTargetingRule`    | `ITargetingRule`                | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matchedPercentageOption` | `IPercentageOption`             | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetchTime`               | `Date`                          | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
let userObject = new configcat.User('#UNIQUE-USER-IDENTIFIER#');
```

```
let userObject = new configcat.User('john@example.com');
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
let userObject = new configcat.User(
  /* identifier: */ '#UNIQUE-USER-IDENTIFIER#',
  /*      email: */ 'john@example.com',
  /*    country: */ 'United Kingdom',
  /*     custom: */ {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
);
```

The `custom` dictionary also allows attribute values other than `string` values:

```
let userObject = new configcat.User('#UNIQUE-USER-IDENTIFIER#');
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    defaultUser: new configcat.User('john@example.com'),
  },
);
```

...or using the `setDefaultUser()` method of the `configCatClient` object:

```
configCatClient.setDefaultUser(new configcat.User('john@example.com'));
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
const user = new configcat.User('john@example.com');
configCatClient.setDefaultUser(user);

// The default user will be used in the evaluation process.
const value = await configCatClient.getValueAsync('keyOfMyFeatureFlag', false);
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const user = new configcat.User('john@example.com');
configCatClient.setDefaultUser(user);

const otherUser = new configcat.User('brian@example.com');

// otherUser will be used in the evaluation process.
const value = await configCatClient.getValueAsync(
  'keyOfMyFeatureFlag',
  false,
  otherUser,
);
```

You can also remove the default user by doing the following:

```
configCatClient.clearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    pollIntervalSeconds: 95,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `getValueAsync()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValueAsync()` will return the setting value after the cache is updated.

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.LazyLoad,
  {
    cacheTimeToLiveSeconds: 600,
  },
);
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

await configCatClient.forceRefreshAsync();
let value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

> `getValueAsync()` returns `defaultValue` if the cache is empty. Call `forceRefreshAsync()` to update the cache.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
);

let value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value); // console: "my default value"

await configCatClient.forceRefreshAsync();
value = await configCatClient.getValueAsync(
  'keyOfMyTextSetting',
  'my default value',
);
console.log(value);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetailsAsync()`](#anatomy-of-getvaluedetailsasync).

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.ManualPoll,
  {
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', () => {
        /* handle the event */
      }),
  },
);
```

...or directly on the `ConfigCatClient` instance:

```
configCatClient.on('flagEvaluated', () => {
  /* handle the event */
});
```

## Snapshots and synchronous feature flag evaluation[â](#snapshots-and-synchronous-feature-flag-evaluation "Direct link to Snapshots and synchronous feature flag evaluation")

On JavaScript platforms, the *ConfigCat* client provides only asynchronous methods for evaluating feature flags and settings because these operations may involve network communication (e.g. downloading config data from the ConfigCat CDN servers), which is necessarily an asynchronous operation in JavaScript.

However, there can be circumstances where synchronous evaluation is preferable, thus, since v10.1.0, the Node.js SDK provides a way to synchronously evaluate feature flags and settings via *snapshots*.

Using the `snapshot()` method, you can capture the current state of the *ConfigCat* client (including the latest downloaded config data) and use the resulting snapshot object to synchronously evaluate feature flags and settings based on the captured state:

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
);

// Wait for the client to initialize.
await configCatClient.waitForReady();

const snapshot = configCatClient.snapshot();

const user = new configcat.User('#UNIQUE-USER-IDENTIFIER#');
for (const key of snapshot.getAllKeys()) {
  const value = snapshot.getValue(key, null, user);
  console.log(`${key}: ${value}`);
}
```

Creating a snapshot is a cheap operation. This is possible because snapshots capture the client's internal (in-memory) cache. No attempt is made to refresh the internal cache, even if it's empty or expired.

caution

Please note that creating and using a snapshot

* won't trigger a sync with the external cache when working with [shared caching](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache),
* won't fetch the latest config data from the ConfigCat CDN when the internally cached config data is empty or expired.

For the above reasons, it's recommended to use snapshots in conjunction with the Auto Polling mode, where the SDK automatically updates the internal cach in the background. (For other polling modes, you'll need to manually initiate a cache refresh by calling `forceRefreshAsync`.)

Because of this behavior, it's important to make sure that the client has completed initialization and populated its internal cache before creating snapshots. Otherwise the snapshot's evaluation methods won't have the data to do actual evaluation, but will just return the default value you pass to them. Which behavior is usually not what you want in your application.

In Auto Polling mode, you can use the `waitForReady` method to wait for the latest config data to become available locally. This is an asynchronous operation, which completes as soon as the client reaches the ready state, i.e. completes initialization (or the time specified via the `maxInitWaitTimeSeconds` option passes).

(Please note that this doesn't apply to other polling modes. In those cases, the client doesn't contact the ConfigCat CDN during initialization, so the ready state is reached as soon as the first sync with the external cache completes.)

Typically, you call `waitForReady` and wait for its completion only once, in the initialization phase of your application.

caution

Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the return value.

```
const clientCacheState = await configCatClient.waitForReady();
if (clientCacheState === configcat.ClientCacheState.NoFlagData) {
  // Handle initialization failure (see below).
  console.warn('ConfigCat client failed to obtain the config data during initialization.');
}
```

You have the following options to handle unsuccessful initialization:

* If it's acceptable for your application to start up and use the default values passed to the evaluation methods, you may log some warning (or skip the check altogether as the client will log warnings anyway), and let the application continue.
* Otherwise, you need to either terminate the application or continue waiting. The latter is an option because the client might be able to obtain the config data later, in the case of a transient problem like some temporary network issue. However, the *ConfigCat SDK* doesn't provide out-of-the-box support for this case currently. You can implement this logic by subscribing to the `configChanged` hook and waiting for the first event.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
configCatClient.setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
configCatClient.setOnline();
```

Using the `configCatClient.isOffline` property you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` map.

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    flagOverrides: configcat.createFlagOverridesFromMap(
      {
        enabledFeature: true,
        disabledFeature: false,
        intSetting: 5,
        doubleSetting: 3.14,
        stringSetting: 'test',
      },
      configcat.OverrideBehaviour.LocalOnly,
    ),
  },
);
```

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: configcat.createConsoleLogger(configcat.LogLevel.Info), // Setting log level to Info
  },
);
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
// set the `MyCustomLogger` implementation on creating the client instance

const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    logger: new MyCustomLogger(),
  },
);
```

## `getAllKeysAsync()`[â](#getallkeysasync "Direct link to getallkeysasync")

You can get the keys for all available feature flags and settings by calling the `getAllKeysAsync()` method.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

const keys = await configCatClient.getAllKeysAsync();
console.log(keys);
```

## `getAllValuesAsync()`[â](#getallvaluesasync "Direct link to getallvaluesasync")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValuesAsync();
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);

// invoke with User Object
const userObject = new configcat.User('john@example.com');

settingValues = await configCatClient.getAllValuesAsync(userObject);
settingValues.forEach((i) =>
  console.log(i.settingKey + ' -> ' + i.settingValue),
);
```

## `getAllValueDetailsAsync()`[â](#getallvaluedetailsasync "Direct link to getallvaluedetailsasync")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
const configCatClient = configcat.getClient('#YOUR-SDK-KEY#');

let settingValues = await configCatClient.getAllValueDetailsAsync();
settingValues.forEach((details) => console.log(details));

// invoke with User Object
const userObject = new configcat.User('john@example.com');

settingValues = await configCatClient.getAllValueDetailsAsync(userObject);
settingValues.forEach((details) => console.log(details));
```

## Using ConfigCat behind a proxy[â](#using-configcat-behind-a-proxy "Direct link to Using ConfigCat behind a proxy")

Provide your own proxy server settings (proxy server/port) by adding a `proxy` option parameter when creating the ConfigCat client.

```
const options = { pollIntervalSeconds: 2, proxy: 'http://192.168.1.1:8080' };

const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  options,
);
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `getClient`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
// set the `MyCustomCache` implementation on creating the client instance

const configCatClient = configcat.getClient(
  '#YOUR-SDK-KEY#',
  configcat.PollingMode.AutoPoll,
  {
    cache: new MyCustomCache(),
  },
);
```

> In some cases (eg: fs) you may have to use [promisify](https://nodejs.org/dist/latest-v8.x/docs/api/util.html#util_util_promisify_original) to create promises from callback-style functions.

[See implementation of Redis cache.](https://github.com/configcat/node-sdk/tree/master/samples/customcache)

info

The Node.js SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Sample Application[â](#sample-application "Direct link to Sample Application")

* [Sample Console App](https://github.com/configcat/node-sdk/blob/master/samples/console)
* [Sample Console App with ECMAScript module system](https://github.com/configcat/node-sdk/blob/master/samples/console-esm)
* [Sample Console App with custom cache](https://github.com/configcat/node-sdk/tree/master/samples/customcache)

## Guides[â](#guides "Direct link to Guides")

See the guides on how to use ConfigCat's Node SDK with the following libraries and frameworks:

* [NestJS](https://configcat.com/blog/2022/08/19/how-to-use-feature-flags-in-nestjs/)
* [Express](https://configcat.com/blog/2022/09/02/how-to-use-feature-flag-in-expressjs/)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat Node.js SDK on GitHub](https://github.com/configcat/node-sdk)
* [ConfigCat's Node.js SDK in NPM](https://www.npmjs.com/package/configcat-node)

## Migration to the new SDK[â](#migration-to-the-new-sdk "Direct link to Migration to the new SDK")

The new SDK maintains strong backward compatibility, so migration is typically as simple as:

1. Replacing the old NPM package with the new one.

   ```
   npm uninstall configcat-node
   npm i @configcat/sdk
   ```

2. Adjusting the `require` or `import` statements, i.e., replacing

   ```
   const configcat = require('configcat-node');
   ```

   with

   ```
   const configcat = require("@configcat/sdk/node");
   ```

   In the case of TypeScript issues, refer to [this documentation](https://configcat.com/docs/docs/sdk-reference/js/node/.md#1-install-and-import-package).

And usually, that's all there is to it! ð

If you encounter issues, please note these minor breaking changes which may require further adjustments:

* The `proxy` option has been removed as the SDK no longer provides out-of-the-box support for using a HTTP(S) proxy. You can implement equivalent functionality using the `httpsAgent` option as documented [here](https://configcat.com/docs/docs/sdk-reference/js/node/.md#using-configcat-behind-a-proxy).
* The config model has been reworked. Interfaces like `IConfig`, `ITargetingRule`, `IPercentageOption` have been replaced with different types (`Config`, `TargetingRule`, `PercentageOption`, etc.)
* The `IEvaluationDetails` interface has been deprecated in favor of the new, more accurate `EvaluationDetails` discriminated union type. Although the old type is structurally compatible with the new, it's recommended to use the new one for improved type narrowing.
* The `RefreshResult` class has been replaced with a new, more accurate discriminated union type with the same name. In most cases, no further action is necessary on your part. However, you can no longer create instances of it using `new RefreshResult`, `RefreshResult.success()`, etc.

For a more comprehensive list of breaking changes, see the [release notes](https://github.com/configcat/js-unified-sdk/releases/tag/v1.0.0).


---

# Using ConfigCat's OpenFeature Provider in Angular

## Getting started[â](#getting-started "Direct link to Getting started")

OpenFeature offers an [Angular SDK](https://github.com/open-feature/js-sdk/tree/main/packages/angular) to streamline the use of OpenFeature in Angular applications. This SDK is built on top of the [OpenFeature JavaScript Web SDK](https://github.com/open-feature/js-sdk/blob/main/packages/web).

Since ConfigCat implements [a provider](https://configcat.com/docs/docs/sdk-reference/openfeature/js/.md) for the Web SDK, you can use ConfigCat with the OpenFeature Angular SDK, as explained below.

### 1. Install the Angular SDK and the ConfigCat provider[â](#1-install-the-angular-sdk-and-the-configcat-provider "Direct link to 1. Install the Angular SDK and the ConfigCat provider")

```
npm i @openfeature/angular-sdk @openfeature/config-cat-web-provider
```

### 2. Initialize the Angular SDK[â](#2-initialize-the-angular-sdk "Direct link to 2. Initialize the Angular SDK")

The `ConfigCatWebProvider.create()` function takes the SDK key and an optional `options` argument containing additional configuration options for the underlying [ConfigCat client](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#creating-the-configcat-client):

* For applications using modules:

  ```
  import { NgModule } from '@angular/core';
  import { BooleanFeatureFlagDirective, type EvaluationContext, OpenFeatureModule } from '@openfeature/angular-sdk';
  import { ConfigCatWebProvider } from '@openfeature/config-cat-web-provider';
  import { createConsoleLogger, LogLevel } from '@configcat/sdk';

  const configCatProvider = ConfigCatWebProvider.create('#YOUR-SDK-KEY#', {
    // Specify options for the underlying ConfigCat client
    logger: createConsoleLogger(LogLevel.Info),
    setupHooks: (hooks) => hooks.on('clientReady', () => console.log('Client is ready!')),
    // ...
  });

  // Set the initial context for your evaluations
  const initialContext: EvaluationContext = {
    targetingKey: 'user-1',
    admin: false
  };

  @NgModule({
    declarations: [
      // ...
    ],
    imports: [
      // ...
      OpenFeatureModule.forRoot({
        provider: configCatProvider,
        context: initialContext
      }),
      // Alternatively, you can import the directive directly in your components
      BooleanFeatureFlagDirective
    ],
    exports: [
      // Not needed if you import the directive directly in your components
      BooleanFeatureFlagDirective
    ],
    bootstrap: [/* ... */]
  })
  export class AppModule { }
  ```

* For applications using standalone components:

  ```
  import { type ApplicationConfig, importProvidersFrom } from '@angular/core';
  import { type EvaluationContext, OpenFeatureModule } from '@openfeature/angular-sdk';
  import { ConfigCatWebProvider } from '@openfeature/config-cat-web-provider';
  import { createConsoleLogger, LogLevel } from '@configcat/sdk';

  const configCatProvider = ConfigCatWebProvider.create('#YOUR-SDK-KEY#', {
    // Specify options for the underlying ConfigCat client
    logger: createConsoleLogger(LogLevel.Info),
    setupHooks: (hooks) => hooks.on('clientReady', () => console.log('Client is ready!')),
    // ...
  });

  // Set the initial context for your evaluations
  const initialContext: EvaluationContext = {
    targetingKey: 'user-1',
    admin: false
  };

  export const appConfig: ApplicationConfig = {
    providers: [
      // ...
      importProvidersFrom(
        OpenFeatureModule.forRoot({
          provider: configCatProvider,
          context: initialContext
        })
      )
    ]
  };
  ```

### 3. Use your feature flag[â](#3-use-your-feature-flag "Direct link to 3. Use your feature flag")

```
<div
  *booleanFeatureFlag="'isAwesomeFeatureEnabled'; default: false; else: booleanFeatureElse; initializing: booleanFeatureInitializing; reconciling: booleanFeatureReconciling">
  This is shown when the feature flag is enabled.
</div>
<ng-template #booleanFeatureElse>
  This is shown when the feature flag is disabled.
</ng-template>
<ng-template #booleanFeatureInitializing>
  This is shown when the feature flag is initializing.
</ng-template>
<ng-template #booleanFeatureReconciling>
  This is shown when the feature flag is reconciling.
</ng-template>
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation.

You can find [here](https://configcat.com/docs/docs/sdk-reference/openfeature/js/.md#evaluation-context) how the ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#user-object).

## Advanced features[â](#advanced-features "Direct link to Advanced features")

Read the documentation of the [OpenFeature Angular SDK](https://openfeature.dev/docs/reference/technologies/client/web/angular/) to learn more about the advanced capabilities of the SDK.

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/open-feature/js-sdk-contrib/tree/main/libs/providers/config-cat-web)
* [ConfigCat OpenFeature Provider in NPM](https://www.npmjs.com/package/@openfeature/config-cat-web-provider)


---

# OpenFeature Provider for .NET

[ConfigCat OpenFeature Provider for .NET on GitHub](https://github.com/open-feature/dotnet-sdk-contrib/tree/main/src/OpenFeature.Contrib.Providers.ConfigCat)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider[â](#1-install-the-provider "Direct link to 1. Install the provider")

* Powershell / NuGet Package Manager Console
* .NET CLI
* Package Reference

```
Install-Package OpenFeature.Contrib.Providers.ConfigCat
```

```
dotnet add package OpenFeature.Contrib.Providers.ConfigCat
```

```
<PackageReference Include="OpenFeature.Contrib.Providers.ConfigCat" />
```

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The `ConfigCatProvider` constructor takes the SDK key and an optional callback that can be used to specify additional configuration options for the [ConfigCat .NET SDK](https://configcat.com/docs/docs/sdk-reference/dotnet/.md#creating-the-configcat-client):

```
using System;
using ConfigCat.Client;
using OpenFeature.Contrib.ConfigCat;

// Specify options for the ConfigCat SDK.
Action<ConfigCat.Client.Configuration.ConfigCatClientOptions> configureOptions = (options) =>
{
    options.PollingMode = PollingModes.AutoPoll(pollInterval: TimeSpan.FromSeconds(60));
    options.Logger = new ConsoleLogger(LogLevel.Warning);
    // ...
};

// Configure the provider.
await OpenFeature.Api.Instance.SetProviderAsync(new ConfigCatProvider("#YOUR-SDK-KEY#", configureOptions));

// Create a client.
var client = OpenFeature.Api.Instance.GetClient();
```

For more information about all the configuration options, see the [.NET SDK documentation](https://configcat.com/docs/docs/sdk-reference/dotnet/.md#creating-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
var isAwesomeFeatureEnabled = await client.GetBooleanValueAsync("isAwesomeFeatureEnabled", false);
if (isAwesomeFeatureEnabled)
{
    doTheNewThing();
}
else
{
    doTheOldThing();
}
```

### 4. Cleaning up[â](#4-cleaning-up "Direct link to 4. Cleaning up")

On application shutdown, clean up the OpenFeature provider and the underlying ConfigCat client.

```
await OpenFeature.Api.Instance.ShutdownAsync();
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/dotnet/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context | User Object  | Required |
| ------------------ | ------------ | -------- |
| `Id`/`Identifier`  | `Identifier` | â        |
| `Email`            | `Email`      |          |
| `Country`          | `Country`    |          |
| Any other          | `Custom`     |          |

To evaluate feature flags for a context, use the [OpenFeature Evaluation API](https://openfeature.dev/docs/reference/concepts/evaluation-api/):

```
var context = OpenFeature.Model.EvaluationContext.Builder()
    .Set("Id", "#SOME-USER-ID#")
    .Set("Email", "configcat@example.com")
    .Set("Country", "CountryID")
    .Set("Rating", 4.5)
    .Set("RegisteredAt", DateTime.Parse("2023-11-22 12:34:56 +00:00", System.Globalization.CultureInfo.InvariantCulture))
    .Build();

var isAwesomeFeatureEnabled = await client.GetBooleanValueAsync("isAwesomeFeatureEnabled", false, context);
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/open-feature/dotnet-sdk-contrib/tree/main/src/OpenFeature.Contrib.Providers.ConfigCat)
* [ConfigCat OpenFeature Provider on nuget.org](https://www.nuget.org/packages/OpenFeature.Contrib.Providers.ConfigCat)


---

# OpenFeature Provider for Go

[ConfigCat OpenFeature Provider for Go on GitHub](https://github.com/open-feature/go-sdk-contrib/tree/main/providers/configcat)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider[â](#1-install-the-provider "Direct link to 1. Install the provider")

```
go get github.com/open-feature/go-sdk-contrib/providers/configcat
```

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The ConfigCat Provider needs a pre-configured [ConfigCat Go SDK](https://configcat.com/docs/docs/sdk-reference/go/.md#creating-the-configcat-client) client:

```
import (
    "time"

    configcat "github.com/configcat/go-sdk/v9"
    configcatprovider "github.com/open-feature/go-sdk-contrib/providers/configcat/pkg"

    "github.com/open-feature/go-sdk/openfeature"
)

func main() {
    // Configure the ConfigCat SDK.
    configcatClient := configcat.NewCustomClient(configcat.Config{SDKKey: "#YOUR-SDK-KEY#",
        PollingMode:  configcat.AutoPoll,
        PollInterval: time.Second * 60})

    // Configure the provider.
    _ = openfeature.SetProviderAndWait(configcatprovider.NewProvider(configcatClient))

    // Create a client.
    client := openfeature.NewClient("app")
}
```

For more information about all the configuration options, see the [Go SDK documentation](https://configcat.com/docs/docs/sdk-reference/go/.md#creating-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
isAwesomeFeatureEnabled, err := client.BooleanValue(
    context.Background(), "isAwesomeFeatureEnabled", false, openfeature.EvaluationContext{},
)

if err == nil && isAwesomeFeatureEnabled {
    doTheNewThing()
} else {
    doTheOldThing()
}
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/go/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context         | User Object  | Required |
| -------------------------- | ------------ | -------- |
| `openfeature.TargetingKey` | `Identifier` | â        |
| `configcat.EmailKey`       | `Email`      |          |
| `configcat.CountryKey`     | `Country`    |          |
| Any other                  | `Custom`     |          |

To evaluate feature flags for a context, use the [OpenFeature Evaluation API](https://openfeature.dev/docs/reference/concepts/evaluation-api/):

```
registeredAt, _ := time.Parse(time.DateTime, "2023-11-22 12:34:56")
context := openfeature.NewEvaluationContext("#SOME-USER-ID#", map[string]any{
    configcat.EmailKey: "configcat@example.com",
    configcat.CountryKey: "CountryID",
    "Rating": 4.5,
    "RegisteredAt": registeredAt,
    "Roles": []string{"Role1","Role2"},
})

isAwesomeFeatureEnabled, err := client.BooleanValue(
    context.Background(), "isAwesomeFeatureEnabled", false, context,
)
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/open-feature/go-sdk-contrib/tree/main/providers/configcat)


---

# OpenFeature Provider for Java

[ConfigCat OpenFeature Provider for Java on GitHub](https://github.com/open-feature/java-sdk-contrib/tree/main/providers/configcat)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider[â](#1-install-the-provider "Direct link to 1. Install the provider")

* Gradle
* Maven

build.gradle

```
dependencies {
    implementation 'dev.openfeature.contrib.providers:configcat:0.1.+'
    implementation 'dev.openfeature:sdk:1.+'
}
```

pom.xml

```
<dependency>
    <groupId>dev.openfeature.contrib.providers</groupId>
    <artifactId>configcat</artifactId>
    <version>[0.1,)</version>
</dependency>
<dependency>
    <groupId>dev.openfeature</groupId>
    <artifactId>sdk</artifactId>
    <version>[1.0,)</version>
</dependency>
```

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The `ConfigCatProvider` constructor takes a `ConfigCatProviderConfig` argument containing the configuration options for the [ConfigCat Java SDK](https://configcat.com/docs/docs/sdk-reference/java/.md#creating-the-configcat-client):

```
// Build options for the ConfigCat SDK.
ConfigCatProviderConfig configCatProviderConfig = ConfigCatProviderConfig.builder()
        .sdkKey("#YOUR-SDK-KEY#")
        .options(options -> {
            options.pollingMode(PollingModes.autoPoll());
            options.logLevel(LogLevel.WARNING);
            // ...
        })
        .build();

// Configure the provider.
OpenFeatureAPI.getInstance().setProviderAndWait(new ConfigCatProvider(configCatProviderConfig));

// Create a client.
Client client = OpenFeatureAPI.getInstance().getClient();
```

For more information about all the configuration options, see the [Java SDK documentation](https://configcat.com/docs/docs/sdk-reference/java/.md#creating-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
boolean isAwesomeFeatureEnabled = client.getBooleanValue("isAwesomeFeatureEnabled", false);
if (isAwesomeFeatureEnabled)
{
    doTheNewThing();
}
else
{
    doTheOldThing();
}
```

### 4. Cleaning up[â](#4-cleaning-up "Direct link to 4. Cleaning up")

On application shutdown, clean up the OpenFeature provider and the underlying ConfigCat client.

```
OpenFeatureAPI.getInstance().shutdown();
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/java/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context | User Object  | Required |
| ------------------ | ------------ | -------- |
| `TargetingKey`     | `identifier` | â        |
| `Email`            | `email`      |          |
| `Country`          | `country`    |          |
| Any other          | `custom`     |          |

To evaluate feature flags for a context, use the [OpenFeature Evaluation API](https://openfeature.dev/docs/reference/concepts/evaluation-api/):

```
MutableContext context = new MutableContext();
context.setTargetingKey("#SOME-USER-ID#");
context.add("Email", "configcat@example.com");
context.add("Country", "CountryID");
context.add("Rating", 4.5);

boolean isAwesomeFeatureEnabled = client.getBooleanValue("isAwesomeFeatureEnabled", false, context);
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/open-feature/java-sdk-contrib/tree/main/providers/configcat)
* [ConfigCat OpenFeature Provider on Maven Central](https://search.maven.org/artifact/dev.openfeature.contrib.providers/configcat)


---

# OpenFeature Provider for JavaScript

[ConfigCat OpenFeature Provider for JavaScript on GitHub](https://github.com/open-feature/js-sdk-contrib/tree/main/libs/providers/config-cat-web)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider[â](#1-install-the-provider "Direct link to 1. Install the provider")

```
npm i @openfeature/config-cat-web-provider
```

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The `ConfigCatWebProvider.create()` function takes the SDK key and an optional `options` argument containing additional configuration options for the [ConfigCat Browser (JavaScript) SDK](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#creating-the-configcat-client):

```
import { OpenFeature } from "@openfeature/web-sdk";
import { ConfigCatWebProvider } from '@openfeature/config-cat-web-provider';
import { createConsoleLogger, LogLevel } from "@configcat/sdk";

// Build options for the ConfigCat SDK.
const options = {
  logger: createConsoleLogger(LogLevel.Info),
  setupHooks: (hooks) => hooks.on('clientReady', () => console.log('Client is ready!')),
  // ...
}

// Configure the provider.
await OpenFeature.setProviderAndWait(ConfigCatWebProvider.create('#YOUR-SDK-KEY#', options));

// Create a client.
const client = OpenFeature.getClient();
```

For more information about all the configuration options, see the [Browser (JavaScript) SDK documentation](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#creating-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
const isAwesomeFeatureEnabled = client.getBooleanValue('isAwesomeFeatureEnabled', false);
if (isAwesomeFeatureEnabled) {
  doTheNewThing();
} else {
  doTheOldThing();
}
```

### 4. Cleaning up[â](#4-cleaning-up "Direct link to 4. Cleaning up")

On application shutdown, clean up the OpenFeature provider and the underlying ConfigCat client.

```
await OpenFeature.clearProviders();
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context | User Object  | Required |
| ------------------ | ------------ | -------- |
| `targetingKey`     | `identifier` | â        |
| `email`            | `email`      |          |
| `country`          | `country`    |          |
| Any other          | `custom`     |          |

To evaluate feature flags for a context, use the [OpenFeature Evaluation API](https://openfeature.dev/docs/reference/concepts/evaluation-api/):

```
await OpenFeature.setContext({
  targetingKey: '#SOME-USER-ID#',
  email: 'configcat@example.com',
  country: 'CountryID',
});

const isAwesomeFeatureEnabled = client.getBooleanValue('isAwesomeFeatureEnabled', false);
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/open-feature/js-sdk-contrib/tree/main/libs/providers/config-cat-web)
* [ConfigCat OpenFeature Provider in NPM](https://www.npmjs.com/package/@openfeature/config-cat-web-provider)


---

# OpenFeature Provider for Kotlin

[![CI](https://github.com/configcat/openfeature-kotlin/actions/workflows/ci.yml/badge.svg?branch=main)](https://github.com/configcat/openfeature-kotlin/actions/workflows/ci.yml) [![Maven Central](https://img.shields.io/maven-central/v/com.configcat/configcat-openfeature-provider?label=maven%20central)](https://central.sonatype.com/artifact/com.configcat/configcat-openfeature-provider)

[ConfigCat OpenFeature Provider for Kotlin on GitHub](https://github.com/configcat/openfeature-kotlin)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider[â](#1-install-the-provider "Direct link to 1. Install the provider")

```
dependencies {
    implementation("com.configcat:configcat-openfeature-provider:$providerVersion")
}
```

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The `ConfigCatProvider` function takes the SDK key and an optional `ConfigCatOptions` argument containing the additional configuration options for the [ConfigCat Kotlin SDK](https://configcat.com/docs/docs/sdk-reference/kotlin/.md#setting-up-the-configcat-client):

```
import com.configcat.*
import dev.openfeature.kotlin.sdk.*

coroutineScope.launch(Dispatchers.IO) {
    // Configure the provider.
    val provider = ConfigCatProvider("<YOUR-CONFIGCAT-SDK-KEY>") {
        pollingMode = autoPoll { pollingInterval = 60.seconds }
    }

    // Configure the OpenFeature API with the ConfigCat provider.
    OpenFeatureAPI.setProviderAndWait(provider)

    // Create a client.
    val client = OpenFeatureAPI.getClient()
}
```

For more information about all the configuration options, see the [Kotlin SDK documentation](https://configcat.com/docs/docs/sdk-reference/kotlin/.md#setting-up-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
val isAwesomeFeatureEnabled = client.getBooleanValue("isAwesomeFeatureEnabled", false)
if (isAwesomeFeatureEnabled) {
    doTheNewThing()
} else {
    doTheOldThing()
}
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/kotlin/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context | User Object  | Required |
| ------------------ | ------------ | -------- |
| `targetingKey`     | `identifier` | â        |
| `Email`            | `email`      |          |
| `Country`          | `country`    |          |
| Any other          | `custom`     |          |

To evaluate feature flags for a context, use the `setEvaluationContext()` method on the `OpenFeatureAPI` to set the context for the provider:

```
val context = ImmutableContext(
    targetingKey = "#SOME-USER-ID#",
    attributes = mapOf(
        "Email" to Value.String("configcat@example.com"),
        "Country" to Value.String("CountryID"),
        "Rating" to Value.Double(4.5),
        "RegisteredAt" to Value.Instant(kotlin.time.Instant.parse("2025-05-30T10:15:30.00Z")),
        "Roles" to Value.List(listOf(Value.String("Role1"), Value.String("Role2")))
    ),
)
OpenFeatureAPI.setEvaluationContext(context)
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [Sample Android APP](https://github.com/configcat/openfeature-kotlin/tree/main/samples/android)
* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/configcat/openfeature-kotlin)
* [ConfigCat OpenFeature Provider on Maven Central](https://central.sonatype.com/artifact/com.configcat/configcat-openfeature-provider)


---

# Using ConfigCat's OpenFeature Provider in NestJS

## Getting started[â](#getting-started "Direct link to Getting started")

OpenFeature offers a [NestJS SDK](https://github.com/open-feature/js-sdk/tree/main/packages/nest) to streamline the use of OpenFeature in NestJS applications. This SDK is built on top of the [OpenFeature JavaScript Node.js SDK](https://github.com/open-feature/js-sdk/blob/main/packages/server).

Since ConfigCat implements [a provider](https://configcat.com/docs/docs/sdk-reference/openfeature/node/.md) for the Node.js SDK, you can use ConfigCat with the OpenFeature NestJS SDK, as explained below.

### 1. Install the NestJS SDK and the ConfigCat provider[â](#1-install-the-nestjs-sdk-and-the-configcat-provider "Direct link to 1. Install the NestJS SDK and the ConfigCat provider")

```
npm i @openfeature/nestjs-sdk @openfeature/config-cat-provider
```

### 2. Initialize the NestJS SDK[â](#2-initialize-the-nestjs-sdk "Direct link to 2. Initialize the NestJS SDK")

The `ConfigCatProvider.create()` function takes the SDK key, the desired [polling mode](https://configcat.com/docs/docs/sdk-reference/js/node/.md#polling-modes) (Auto Polling is recommended for this kind of application) and an optional `options` argument containing additional configuration options for the underlying [ConfigCat client](https://configcat.com/docs/docs/sdk-reference/js/node/.md#creating-the-configcat-client):

```
import { Module } from '@nestjs/common';
import { OpenFeatureModule } from '@openfeature/nestjs-sdk';
import { ConfigCatProvider } from '@openfeature/config-cat-provider';
import { createConsoleLogger, LogLevel, PollingMode } from '@configcat/sdk';
import { FeatureFlagService } from './_services/feature-flag.service';

const configCatProvider = ConfigCatProvider.create('#YOUR-SDK-KEY#', PollingMode.AutoPoll, {
  // Specify options for the underlying ConfigCat client
  logger: createConsoleLogger(LogLevel.Info),
  setupHooks: (hooks) => hooks.on('clientReady', () => console.log('Client is ready!')),
  // ...
});

@Module({
  imports: [
    OpenFeatureModule.forRoot({
      defaultProvider: configCatProvider,
      // Set the context for your evaluations
      contextFactory: (request) => ({ targetingKey: 'user-1' })
    }),
  ],
  controllers: [/* ... */],
  providers: [FeatureFlagService],
})
export class AppModule {}
```

### 3. Use your feature flag[â](#3-use-your-feature-flag "Direct link to 3. Use your feature flag")

To improve maintainability and testability, it's usually a good idea not to directly evaluate your feature flags, but to wrap them in a service:

```
import { Injectable } from '@nestjs/common';
import { OpenFeatureClient, Client } from '@openfeature/nestjs-sdk';

@Injectable()
export class FeatureFlagService {
  constructor(
    @OpenFeatureClient() private readonly defaultClient: Client,
  ) {
  }

  public async isAwesomeFeatureEnabled() {
    return await this.defaultClient.getBooleanValue('isAwesomeFeatureEnabled', false);
  }
}
```

Then you can inject this service into your controllers and use it to evaluate feature flags:

```
import { Controller, Get } from '@nestjs/common';
import { FeatureFlagService } from './_services/feature-flag.service';

@Controller()
export class AppController {
  constructor(
    private readonly featureFlagService: FeatureFlagService
  ) {}

  @Get()
  async welcome() {
    return await this.featureFlagService.isAwesomeFeatureEnabled()
      ? 'Awesome feature is enabled!'
      : 'Awesome feature is disabled.';
  }
}
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation.

You can find [here](https://configcat.com/docs/docs/sdk-reference/openfeature/node/.md#evaluation-context) how the ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/js/node/.md#user-object).

## Advanced features[â](#advanced-features "Direct link to Advanced features")

Read the documentation of the [OpenFeature NestJS SDK](https://openfeature.dev/docs/reference/technologies/server/javascript/nestjs/) to learn more about the advanced capabilities of the SDK.

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/open-feature/js-sdk-contrib/tree/main/libs/providers/config-cat)
* [ConfigCat OpenFeature Provider in NPM](https://www.npmjs.com/package/@openfeature/config-cat-provider)


---

# OpenFeature Provider for Node.js

[ConfigCat OpenFeature Provider for Node.js on GitHub](https://github.com/open-feature/js-sdk-contrib/tree/main/libs/providers/config-cat)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider[â](#1-install-the-provider "Direct link to 1. Install the provider")

```
npm i @openfeature/config-cat-provider
```

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The `ConfigCatProvider.create()` function takes the SDK key and an optional `options` argument containing additional configuration options for the [ConfigCat Node.js SDK](https://configcat.com/docs/docs/sdk-reference/js/node/.md#creating-the-configcat-client):

```
import { OpenFeature } from "@openfeature/server-sdk";
import { ConfigCatProvider } from '@openfeature/config-cat-provider';
import { createConsoleLogger, LogLevel, PollingMode } from "@configcat/sdk";

// Build options for the ConfigCat SDK.
const options = {
  logger: createConsoleLogger(LogLevel.Info),
  setupHooks: (hooks) => hooks.on('clientReady', () => console.log('Client is ready!')),
  // ...
}

// Configure the provider.
await OpenFeature.setProviderAndWait(ConfigCatProvider.create('#YOUR-SDK-KEY#', PollingMode.AutoPoll, options));

// Create a client.
const client = OpenFeature.getClient();
```

For more information about all the configuration options, see the [Node.js SDK documentation](https://configcat.com/docs/docs/sdk-reference/js/node/.md#creating-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
const isAwesomeFeatureEnabled = await client.getBooleanValue('isAwesomeFeatureEnabled', false);
if (isAwesomeFeatureEnabled) {
  doTheNewThing();
} else {
  doTheOldThing();
}
```

### 4. Cleaning up[â](#4-cleaning-up "Direct link to 4. Cleaning up")

On application shutdown, clean up the OpenFeature provider and the underlying ConfigCat client.

```
await OpenFeature.clearProviders();
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/js/node/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context | User Object  | Required |
| ------------------ | ------------ | -------- |
| `targetingKey`     | `identifier` | â        |
| `email`            | `email`      |          |
| `country`          | `country`    |          |
| Any other          | `custom`     |          |

To evaluate feature flags for a context, use the [OpenFeature Evaluation API](https://openfeature.dev/docs/reference/concepts/evaluation-api/):

```
const context = {
  targetingKey: '#SOME-USER-ID#',
  email: 'configcat@example.com',
  country: 'CountryID',
};

const isAwesomeFeatureEnabled = await client.getBooleanValue('isAwesomeFeatureEnabled', false, context);
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/open-feature/js-sdk-contrib/tree/main/libs/providers/config-cat)
* [ConfigCat OpenFeature Provider in NPM](https://www.npmjs.com/package/@openfeature/config-cat-provider)


---

# OpenFeature Providers

OpenFeature is an open specification that provides a vendor-agnostic, community-driven API for feature flagging.

OpenFeature providers are the abstraction between an OpenFeature SDK and an underlying flag management system like ConfigCat. To learn more, see the [OpenFeature documentation](https://openfeature.dev/docs/reference/intro).

ConfigCat offers providers for the following platforms supported by OpenFeature SDKs:

* [.NET](https://configcat.com/docs/docs/sdk-reference/openfeature/dotnet/.md)
* [Angular](https://configcat.com/docs/docs/sdk-reference/openfeature/angular/.md)
* [Go](https://configcat.com/docs/docs/sdk-reference/openfeature/go/.md)
* [Java](https://configcat.com/docs/docs/sdk-reference/openfeature/java/.md)
* [JavaScript](https://configcat.com/docs/docs/sdk-reference/openfeature/js/.md)
* [Kotlin (Android)](https://configcat.com/docs/docs/sdk-reference/openfeature/kotlin/.md)
* [NestJS](https://configcat.com/docs/docs/sdk-reference/openfeature/nestjs/.md)
* [Node.js](https://configcat.com/docs/docs/sdk-reference/openfeature/node/.md)
* [PHP](https://configcat.com/docs/docs/sdk-reference/openfeature/php/.md)
* [Python](https://configcat.com/docs/docs/sdk-reference/openfeature/python/.md)
* [React](https://configcat.com/docs/docs/sdk-reference/openfeature/react/.md)
* [Ruby](https://configcat.com/docs/docs/sdk-reference/openfeature/ruby/.md)
* [Rust](https://configcat.com/docs/docs/sdk-reference/openfeature/rust/.md)
* [Swift (iOS)](https://configcat.com/docs/docs/sdk-reference/openfeature/swift/.md)

## OpenFeature Remote Evaluation Protocol (OFREP)[â](#openfeature-remote-evaluation-protocol-ofrep "Direct link to OpenFeature Remote Evaluation Protocol (OFREP)")

The [OpenFeature Remote Flag Evaluation Protocol](https://github.com/open-feature/protocol) is an API specification for feature flagging that allows the use of generic providers to connect to any feature flag management systems that supports the protocol.

ConfigCat conforms to OFREP via the [ConfigCat Proxy](https://configcat.com/docs/docs/advanced/proxy/proxy-overview/.md). The API documentation for the OFREP implementation with usage examples is available [here](https://configcat.com/docs/docs/advanced/proxy/endpoints/.md#openfeature-remote-evaluation-protocol-ofrep).


---

# OpenFeature Provider for PHP

[![Build Status](https://github.com/configcat/openfeature-php/actions/workflows/ci.yml/badge.svg?branch=main)](https://github.com/configcat/openfeature-php/actions/workflows/ci.yml) [![Latest Stable Version](https://poser.pugx.org/configcat/openfeature-provider/version)](https://packagist.org/packages/configcat/openfeature-provider) [![Total Downloads](https://poser.pugx.org/configcat/openfeature-provider/downloads)](https://packagist.org/packages/configcat/openfeature-provider)

[ConfigCat OpenFeature Provider for PHP on GitHub](https://github.com/configcat/openfeature-php)

## Requirements[â](#requirements "Direct link to Requirements")

* PHP >= 8.1

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider with [Composer](https://getcomposer.org/)[â](#1-install-the-provider-with-composer "Direct link to 1-install-the-provider-with-composer")

```
composer require configcat/openfeature-provider
```

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The `ConfigCatProvider` constructor takes the SDK key and an optional `array` argument containing the additional configuration options for the [ConfigCat PHP SDK](https://configcat.com/docs/docs/sdk-reference/php/.md#creating-the-configcat-client):

```
use ConfigCat\ClientOptions;
use ConfigCat\Log\LogLevel;
use ConfigCat\OpenFeature\ConfigCatProvider;
use OpenFeature\implementation\flags\Attributes;
use OpenFeature\implementation\flags\EvaluationContext;
use OpenFeature\OpenFeatureAPI;

// Acquire an OpenFeature API instance.
$api = OpenFeatureAPI::getInstance();

// Build options for the ConfigCat SDK.
$options = [
  ClientOptions::LOG_LEVEL => LogLevel::WARNING,
  ClientOptions::CACHE_REFRESH_INTERVAL => 5,
  //...
];

// Configure the provider.
$api->setProvider(new ConfigCatProvider('#YOUR-SDK-KEY#', $options));

// Create a client.
$client = $api->getClient();
```

For more information about all the configuration options, see the [PHP SDK documentation](https://configcat.com/docs/docs/sdk-reference/php/.md#creating-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
$isAwesomeFeatureEnabled = $client->getBooleanValue('isAwesomeFeatureEnabled', false);
if (is_bool($isAwesomeFeatureEnabled) && $isAwesomeFeatureEnabled) {
    doTheNewThing();
} else {
    doTheOldThing();
}
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/php/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context | User Object  | Required |
| ------------------ | ------------ | -------- |
| `targetingKey`     | `identifier` | â        |
| `Email`            | `email`      |          |
| `Country`          | `country`    |          |
| Any other          | `custom`     |          |

To evaluate feature flags for a context, use the [OpenFeature Evaluation API](https://openfeature.dev/docs/reference/concepts/evaluation-api/):

```
$context = new EvaluationContext('#SOME-USER-ID#', new Attributes([
    'Email' => 'configcat@example.com',
    'Country' => 'CountryID',
    'Rating' => 4.5,
    'RegisteredAt' => new DateTimeImmutable('2023-11-22T12:34:56.0000000Z'),
    'Roles' => ['Role1', 'Role2']
]));

$isAwesomeFeatureEnabled = $client->getBooleanValue('isAwesomeFeatureEnabled', false, $context);
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [Sample PHP App](https://github.com/configcat/openfeature-php/tree/main/samples/ConfigCatProvider)
* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/configcat/php-openfeature)
* [ConfigCat OpenFeature Provider on packagist.org](https://packagist.org/packages/configcat/openfeature-provider)


---

# OpenFeature Provider for Python

[![CI](https://github.com/configcat/openfeature-python/actions/workflows/ci.yml/badge.svg?branch=main)](https://github.com/configcat/openfeature-python/actions/workflows/ci.yml) [![PyPI](https://img.shields.io/pypi/v/configcat-openfeature-provider.svg)](https://pypi.python.org/pypi/configcat-openfeature-provider) [![PyPI](https://img.shields.io/pypi/pyversions/configcat-openfeature-provider.svg)](https://pypi.python.org/pypi/configcat-openfeature-provider)

[ConfigCat OpenFeature Provider for Python on GitHub](https://github.com/configcat/openfeature-python)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider[â](#1-install-the-provider "Direct link to 1. Install the provider")

```
pip install configcat-openfeature-provider
```

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The `ConfigCatProvider` constructor takes the SDK key and an optional `ConfigCatOptions` argument containing the additional configuration options for the [ConfigCat Python SDK](https://configcat.com/docs/docs/sdk-reference/python/.md#creating-the-configcat-client):

```
from configcatclient import ConfigCatOptions, PollingMode
from openfeature import api
from configcat_openfeature_provider import ConfigCatProvider

# Configure the OpenFeature API with the ConfigCat provider.
api.set_provider(
    ConfigCatProvider(
        "#YOUR-SDK-KEY#",
        # Configure the ConfigCat SDK.
        ConfigCatOptions(
            polling_mode=PollingMode.auto_poll(60),
        ),
    )
)

# Create a client.
client = api.get_client()
```

For more information about all the configuration options, see the [Python SDK documentation](https://configcat.com/docs/docs/sdk-reference/python/.md#creating-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
is_awesome_feature_enabled = client.get_boolean_value("isAwesomeFeatureEnabled", False)
if is_awesome_feature_enabled:
    do_the_new_thing()
else:
    do_the_old_thing()
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/python/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context | User Object  | Required |
| ------------------ | ------------ | -------- |
| `targeting_key`    | `identifier` | â        |
| `Email`            | `email`      |          |
| `Country`          | `country`    |          |
| Any other          | `custom`     |          |

To evaluate feature flags for a context, use the [OpenFeature Evaluation API](https://openfeature.dev/docs/reference/concepts/evaluation-api/):

```
context = EvaluationContext(
    targeting_key='#SOME-USER-ID#',
    attributes={
        'Email': 'configcat@example.com',
        'Country': 'CountryID',
        'Rating': 4.5,
        'RegisteredAt': datetime.fromisoformat('2023-11-22 12:34:56 +00:00'),
        'Roles': [ 'Role1', 'Role2' ]
    }
)

is_awesome_feature_enabled = client.get_boolean_value('isAwesomeFeatureEnabled', False, context);
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/configcat/openfeature-python)
* [ConfigCat OpenFeature Provider in PyPI](https://pypi.org/project/configcat-openfeature-provider/)


---

# Using ConfigCat's OpenFeature Provider in React

## Getting started[â](#getting-started "Direct link to Getting started")

OpenFeature offers a [React SDK](https://github.com/open-feature/js-sdk/tree/main/packages/react) to streamline the use of OpenFeature in React applications. This SDK is built on top of the [OpenFeature JavaScript Web SDK](https://github.com/open-feature/js-sdk/blob/main/packages/web).

Since ConfigCat implements [a provider](https://configcat.com/docs/docs/sdk-reference/openfeature/js/.md) for the Web SDK, you can use ConfigCat with the OpenFeature React SDK, as explained below.

### 1. Install the React SDK and the ConfigCat provider[â](#1-install-the-react-sdk-and-the-configcat-provider "Direct link to 1. Install the React SDK and the ConfigCat provider")

```
npm i @openfeature/react-sdk @openfeature/config-cat-web-provider
```

### 2. Initialize the React SDK[â](#2-initialize-the-react-sdk "Direct link to 2. Initialize the React SDK")

The `ConfigCatWebProvider.create()` function takes the SDK key and an optional `options` argument containing additional configuration options for the underlying [ConfigCat client](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#creating-the-configcat-client):

```
import { OpenFeature, OpenFeatureProvider } from '@openfeature/react-sdk';
import { ConfigCatWebProvider } from '@openfeature/config-cat-web-provider';
import { createConsoleLogger, LogLevel } from '@configcat/sdk';

const configCatProvider = ConfigCatWebProvider.create('#YOUR-SDK-KEY#', {
  // Specify options for the underlying ConfigCat client
  logger: createConsoleLogger(LogLevel.Info),
  setupHooks: (hooks) => hooks.on('clientReady', () => console.log('Client is ready!')),
  // ...
});

// Set the initial context for your evaluations
OpenFeature.setContext({
  targetingKey: 'user-1',
  admin: false
});

// Instantiate and set our provider (be sure this only happens once)!
// Note: there's no need to await its initialization, the React SDK handles re-rendering and suspense for you!
OpenFeature.setProvider(configCatProvider);

// Enclose your content in the configured provider
function App() {
  return (
    <OpenFeatureProvider>
      <Page />
    </OpenFeatureProvider>
  );
}
```

The `OpenFeatureProvider` is a [React context provider](https://react.dev/reference/react/createContext#provider) which represents a scope for feature flag evaluations within a React application. It binds an OpenFeature client to all evaluations within child components, and allows the use of evaluation hooks.

### 3. Use your feature flag[â](#3-use-your-feature-flag "Direct link to 3. Use your feature flag")

```
import { useFlag } from '@openfeature/react-sdk';

function Page() {
  // Use the "query-style" flag evaluation hook, specifying a flag-key and a default value.
  const { value: isAwesomeFeatureEnabled } = useFlag('isAwesomeFeatureEnabled', false);
  return (
    <div>
      {isAwesomeFeatureEnabled ? <p>Awesome feature is enabled!</p> : <p>Awesome feature is not enabled.</p>}
    </div>
  )
}
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation.

You can find [here](https://configcat.com/docs/docs/sdk-reference/openfeature/js/.md#evaluation-context) how the ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/js/browser/.md#user-object).

## Advanced features[â](#advanced-features "Direct link to Advanced features")

Read the documentation of the [OpenFeature React SDK](https://openfeature.dev/docs/reference/technologies/client/web/react) to learn more about the advanced capabilities of the SDK.

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/open-feature/js-sdk-contrib/tree/main/libs/providers/config-cat-web)
* [ConfigCat OpenFeature Provider in NPM](https://www.npmjs.com/package/@openfeature/config-cat-web-provider)


---

# OpenFeature Provider for Ruby

[![Build Status](https://github.com/configcat/openfeature-ruby/actions/workflows/ci.yml/badge.svg?branch=main)](https://github.com/configcat/openfeature-ruby/actions/workflows/ci.yml) [![Gem Version](https://badge.fury.io/rb/configcat-openfeature-provider.svg?icon=si%3Arubygems)](https://badge.fury.io/rb/configcat-openfeature-provider)

[ConfigCat OpenFeature Provider for Ruby on GitHub](https://github.com/configcat/openfeature-ruby)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider[â](#1-install-the-provider "Direct link to 1. Install the provider")

```
gem install configcat-openfeature-provider
```

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The initializer of `ConfigCat::OpenFeature::Provider` takes the SDK key and an optional `ConfigCat::ConfigCatOptions` argument containing the additional configuration options for the [ConfigCat Ruby SDK](https://configcat.com/docs/docs/sdk-reference/ruby/.md#creating-the-configcat-client):

```
require "configcat-openfeature-provider"

# Configure the OpenFeature API with the ConfigCat provider.
OpenFeature::SDK.configure do |config|
  config.set_provider(ConfigCat::OpenFeature::Provider.new(
    sdk_key: "<YOUR-CONFIGCAT-SDK-KEY>",
    # Build options for the ConfigCat SDK.
    options: ConfigCat::ConfigCatOptions.new(
      polling_mode: ConfigCat::PollingMode.auto_poll
    )))
end

# Create a client.
client = OpenFeature::SDK.build_client
```

For more information about all the configuration options, see the [Ruby SDK documentation](https://configcat.com/docs/docs/sdk-reference/ruby/.md#creating-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
is_awesome_feature_enabled = client.fetch_boolean_value(
  flag_key: "isAwesomeFeatureEnabled",
  default_value: false
)
if is_awesome_feature_enabled
    do_the_new_thing
else
    do_the_old_thing
end
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/ruby/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context | User Object  | Required |
| ------------------ | ------------ | -------- |
| `targeting_key`    | `identifier` | â        |
| `Email`            | `email`      |          |
| `Country`          | `country`    |          |
| Any other          | `custom`     |          |

To evaluate feature flags for a context, use the [OpenFeature Evaluation API](https://openfeature.dev/docs/reference/concepts/evaluation-api/):

```
context = OpenFeature::SDK::EvaluationContext.new(
    OpenFeature::SDK::EvaluationContext::TARGETING_KEY => "#SOME-USER-ID#",
    "Email" => "configcat@example.com",
    "Country" => "CountryID",
    "Rating" => 4.5,
    "RegisteredAt" => DateTime.iso8601("2023-11-22T12:34:56+00:00"),
    "Roles" => [ "Role1", "Role2" ]
)

is_awesome_feature_enabled = client.fetch_boolean_value(
  flag_key: "isAwesomeFeatureEnabled",
  default_value: false,
  evaluation_context: context
)
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [Sample Ruby APP](https://github.com/configcat/openfeature-ruby/tree/main/samples/provider-sample)
* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/configcat/openfeature-ruby)
* [ConfigCat OpenFeature Provider in RubyGems](https://rubygems.org/gems/configcat-openfeature-provider)


---

# OpenFeature Provider for Rust

[![Build Status](https://github.com/configcat/openfeature-rust/actions/workflows/ci.yml/badge.svg?branch=main)](https://github.com/configcat/openfeature-rust/actions/workflows/ci.yml) [![crates.io](https://img.shields.io/crates/v/configcat-openfeature-provider.svg?logo=rust)](https://crates.io/crates/configcat-openfeature-provider) [![docs.rs](https://img.shields.io/badge/docs.rs-configcat_openfeature_provider-66c2a5?logo=docs.rs)](https://docs.rs/configcat-openfeature-provider)

[ConfigCat OpenFeature Provider for Rust on GitHub](https://github.com/configcat/openfeature-rust)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider[â](#1-install-the-provider "Direct link to 1. Install the provider")

Run the following Cargo command in your project directory:

```
cargo add configcat-openfeature-provider
```

Or add the following to your `Cargo.toml`:

```
[dependencies]
configcat-openfeature-provider = "0.1"
```

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The `ConfigCatProvider` needs a pre-configured [ConfigCat Rust SDK](https://configcat.com/docs/docs/sdk-reference/rust/.md#creating-the-configcat-client) client:

```
use std::time::Duration;
use configcat::{Client, PollingMode};
use open_feature::OpenFeature;
use configcat_openfeature_provider::ConfigCatProvider;

#[tokio::main]
async fn main() {
    // Acquire an OpenFeature API instance.
    let mut api = OpenFeature::singleton_mut().await;

    // Configure the ConfigCat SDK.
    let configcat_client = Client::builder("<YOUR-CONFIGCAT-SDK-KEY>")
        .polling_mode(PollingMode::AutoPoll(Duration::from_secs(60)))
        .build()
        .unwrap();

    // Configure the provider.
    api.set_provider(ConfigCatProvider::new(configcat_client)).await;

    // Create a client.
    let client = api.create_client();
}
```

For more information about all the configuration options, see the [Rust SDK documentation](https://configcat.com/docs/docs/sdk-reference/rust/.md#creating-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
let is_awesome_feature_enabled = client
    .get_bool_value("isAwesomeFeatureEnabled", None, None)
    .await
    .unwrap_or(false);

if is_awesome_feature_enabled {
    do_the_new_thing();
} else {
    do_the_old_thing();
}
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/rust/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context | User Object  | Required |
| ------------------ | ------------ | -------- |
| `targeting_key`    | `identifier` | â        |
| `Email`            | `email`      |          |
| `Country`          | `country`    |          |
| Any other          | `custom`     |          |

To evaluate feature flags for a context, use the [OpenFeature Evaluation API](https://openfeature.dev/docs/reference/concepts/evaluation-api/):

```
let context = EvaluationContext::default()
    .with_targeting_key("#SOME-USER-ID#")
    .with_custom_field("Email", "configcat@example.com")
    .with_custom_field("Country", "CountryID")
    .with_custom_field("Rating", 4.5)
    .with_custom_field("Roles", ["Role1", "Role2"]);

let is_awesome_feature_enabled = client
    .get_bool_value("isAwesomeFeatureEnabled", Some(&context), None)
    .await
    .unwrap_or(false);
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [Sample Rust App](https://github.com/configcat/openfeature-rust/tree/main/examples)
* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/configcat/openfeature-rust)
* [ConfigCat OpenFeature Provider on crates.io](https://crates.io/crates/configcat-openfeature-provider)
* [ConfigCat OpenFeature Provider on docs.rs](https://docs.rs/configcat-openfeature-provider/latest/configcat_openfeature_provider)


---

# OpenFeature Provider for Swift

[![CI](https://github.com/configcat/openfeature-swift/actions/workflows/ci.yml/badge.svg?branch=main)](https://github.com/configcat/openfeature-swift/actions/workflows/ci.yml)

[ConfigCat OpenFeature Provider for Swift on GitHub](https://github.com/configcat/openfeature-swift)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the provider[â](#1-install-the-provider "Direct link to 1. Install the provider")

#### Swift Package Manager[â](#swift-package-manager "Direct link to Swift Package Manager")

If you manage dependencies through SPM, in the dependencies section of Package.swift add:

```
.package(url: "https://github.com/configcat/openfeature-swift", from: "0.1.0")
```

and in the target dependencies section add:

```
.product(name: "ConfigCat", package: "openfeature-swift"),
```

#### Xcode Dependencies[â](#xcode-dependencies "Direct link to Xcode Dependencies")

* Open the dependencies dialog from `File` > `Add Package Dependencies...`
* Search for `https://github.com/configcat/openfeature-swift` and click `Add Package`.

### 2. Initialize the provider[â](#2-initialize-the-provider "Direct link to 2. Initialize the provider")

The initializer of `ConfigCatProvider` takes the SDK key and an optional `ConfigCatOptions` argument containing the additional configuration options for the [ConfigCat Swift SDK](https://configcat.com/docs/docs/sdk-reference/ios/.md#creating-the-configcat-client):

```
import ConfigCatOpenFeature
import ConfigCat
import OpenFeature

Task {
    // Configure the provider.
    let provider = ConfigCatProvider(sdkKey: "<YOUR-CONFIGCAT-SDK-KEY>") { opts in
        opts.pollingMode = PollingModes.autoPoll()
    }

    // Configure the OpenFeature API with the ConfigCat provider.
    await OpenFeatureAPI.shared.setProviderAndWait(provider: provider)

    // Create a client.
    let client = OpenFeatureAPI.shared.getClient()
}
```

For more information about all the configuration options, see the [Swift SDK documentation](https://configcat.com/docs/docs/sdk-reference/ios/.md#creating-the-configcat-client).

### 3. Evaluate your feature flag[â](#3-evaluate-your-feature-flag "Direct link to 3. Evaluate your feature flag")

```
let isAwesomeFeatureEnabled = client.getBooleanValue(key: "isAwesomeFeatureEnabled", defaultValue: false)
if isAwesomeFeatureEnabled {
    doTheNewThing()
} else {
    doTheOldThing()
}
```

## Evaluation Context[â](#evaluation-context "Direct link to Evaluation Context")

An [evaluation context](https://openfeature.dev/docs/reference/concepts/evaluation-context) in the OpenFeature specification is a container for arbitrary contextual data that can be used as a basis for feature flag evaluation. The ConfigCat provider translates these evaluation contexts to ConfigCat [User Objects](https://configcat.com/docs/docs/sdk-reference/ios/.md#user-object).

The following table shows how the different context attributes are mapped to User Object attributes.

| Evaluation context | User Object  | Required |
| ------------------ | ------------ | -------- |
| `targetingKey`     | `identifier` | â        |
| `Email`            | `email`      |          |
| `Country`          | `country`    |          |
| Any other          | `custom`     |          |

To evaluate feature flags for a context, use the `setEvaluationContext()` method on `OpenFeatureAPI.shared` to set the context for the provider:

```
let context = MutableContext(targetingKey: "#SOME-USER-ID#", structure: MutableStructure(attributes: [
    "Email": Value.string("configcat@example.com"),
    "Country": Value.string("CountryID"),
    "Rating": Value.double(4.5),
    "Roles": Value.list([Value.string("Role1"), Value.string("Role2")])
]))
OpenFeatureAPI.shared.setEvaluationContext(evaluationContext: context)
```

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [Sample iOS APP](https://github.com/configcat/openfeature-swift/tree/main/samples/ios)
* [ConfigCat OpenFeature Provider's repository on GitHub](https://github.com/configcat/openfeature-swift)


---

# ConfigCat SDK Overview

The purpose of the SDKs is to download and cache feature flag values and to evaluate Targeting Rules. All SDKs provide a simple interface for accessing your feature flags from your application.

Check out our language specific[ Getting Started Guide](https://app.configcat.com/sdkkey) on how to connect your applications.

## .NET[â](#net "Direct link to .NET")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/dotnet/.md) on how to connect your application.
* [GitHub repository of the ConfigCat .NET SDK.](https://github.com/configcat/.net-sdk)

## Android (Java)[â](#android-java "Direct link to Android (Java)")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/android/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Android (Java) SDK.](https://github.com/configcat/android-sdk)

## C++[â](#c "Direct link to C++")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/cpp/.md) on how to connect your application.
* [GitHub repository of the ConfigCat C++ SDK.](https://github.com/configcat/cpp-sdk)

## Dart (Flutter)[â](#dart-flutter "Direct link to Dart (Flutter)")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/dart/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Dart (Flutter) SDK.](https://github.com/configcat/dart-sdk)

## Elixir[â](#elixir "Direct link to Elixir")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/elixir/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Elixir SDK.](https://github.com/configcat/elixir-sdk)

## Go[â](#go "Direct link to Go")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/go/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Go SDK.](https://github.com/configcat/go-sdk)

## Java[â](#java "Direct link to Java")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/java/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Java SDK.](https://github.com/configcat/java-sdk)

## JavaScript[â](#javascript "Direct link to JavaScript")

* [GitHub repository of the ConfigCat SDK for JavaScript.](https://github.com/configcat/js-unified-sdk)

### Browser[â](#browser "Direct link to Browser")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/js/browser/.md) on how to connect your application.

### Bun[â](#bun "Direct link to Bun")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/js/bun/.md) on how to connect your application.

### Chromium Extension[â](#chromium-extension "Direct link to Chromium Extension")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/js/chromium-extension/.md) on how to connect your application.

### Cloudflare Worker[â](#cloudflare-worker "Direct link to Cloudflare Worker")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/js/cloudflare-worker/.md) on how to connect your application.

### Deno[â](#deno "Direct link to Deno")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/js/deno/.md) on how to connect your application.

### Node.js[â](#nodejs "Direct link to Node.js")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/js/node/.md) on how to connect your application.

### React[â](#react "Direct link to React")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/react/.md) on how to connect your application.
* [GitHub repository of the ConfigCat React SDK.](https://github.com/configcat/react-sdk)

### Vue.js - Community maintained[â](#vuejs---community-maintained "Direct link to Vue.js - Community maintained")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/community/vue/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Vue.js SDK.](https://github.com/codedbychavez/configcat-vue)

## Kotlin Multiplatform[â](#kotlin-multiplatform "Direct link to Kotlin Multiplatform")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/kotlin/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Kotlin Multiplatform SDK.](https://github.com/configcat/kotlin-sdk)

## PHP[â](#php "Direct link to PHP")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/php/.md) on how to connect your application.
* [GitHub repository of the ConfigCat PHP SDK.](https://github.com/configcat/php-sdk)

## PHP (Laravel) - Community maintained[â](#php-laravel---community-maintained "Direct link to PHP (Laravel) - Community maintained")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/community/laravel/.md) on how to connect your application.
* [GitHub repository of the Laravel ConfigCat package.](https://github.com/pod-point/laravel-configcat)

## Python[â](#python "Direct link to Python")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/python/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Python SDK.](https://github.com/configcat/python-sdk)

## Ruby[â](#ruby "Direct link to Ruby")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/ruby/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Ruby SDK.](https://github.com/configcat/ruby-sdk)

## Rust[â](#rust "Direct link to Rust")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/rust/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Rust SDK.](https://github.com/configcat/rust-sdk)

## Swift (iOS)[â](#swift-ios "Direct link to Swift (iOS)")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/ios/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Swift SDK.](https://github.com/configcat/swift-sdk)

## Unity[â](#unity "Direct link to Unity")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/unity/.md) on how to connect your application.
* [GitHub repository of the ConfigCat .NET SDK.](https://github.com/configcat/.net-sdk)

## Unreal Engine[â](#unreal-engine "Direct link to Unreal Engine")

* [Documentation](https://configcat.com/docs/docs/sdk-reference/unreal/.md) on how to connect your application.
* [GitHub repository of the ConfigCat Unreal Engine SDK.](https://github.com/configcat/unreal-engine-sdk)


---

# PHP SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/php-sdk.svg?style=social)](https://github.com/configcat/php-sdk/stargazers) [![Build Status](https://github.com/configcat/php-sdk/actions/workflows/php-ci.yml/badge.svg?branch=master)](https://github.com/configcat/php-sdk/actions/workflows/php-ci.yml) [![Latest Stable Version](https://poser.pugx.org/configcat/configcat-client/version)](https://packagist.org/packages/configcat/configcat-client) [![Total Downloads](https://poser.pugx.org/configcat/configcat-client/downloads)](https://packagist.org/packages/configcat/configcat-client) [![Sonar Quality Gate](https://img.shields.io/sonar/quality_gate/configcat_php-sdk?logo=sonarcloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_php-sdk) [![Sonar Coverage](https://img.shields.io/sonar/coverage/configcat_php-sdk?logo=SonarCloud\&server=https%3A%2F%2Fsonarcloud.io)](https://sonarcloud.io/project/overview?id=configcat_php-sdk)

[ConfigCat PHP SDK on GitHub](https://github.com/configcat/php-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the package with [Composer](https://getcomposer.org/)[â](#1-install-the-package-with-composer "Direct link to 1-install-the-package-with-composer")

```
composer require configcat/configcat-client
```

### 2. Create the *ConfigCat* client with your *SDK Key*[â](#2-create-the-configcat-client-with-your-sdk-key "Direct link to 2-create-the-configcat-client-with-your-sdk-key")

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
  \ConfigCat\ClientOptions::CACHE => new \ConfigCat\Cache\LaravelCache(\Illuminate\Support\Facades\Cache::store()),
]);
```

warning

Due to the nature of PHP, for each HTTP request, it spawns a dedicated PHP process that will instantiate a new ConfigCat client every time. Therefore, to avoid the download of all feature flag data at every initialization, it's crucial to set up appropriate caching.

For more caching options, see the [Cache](#cache) section of this documentation.

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

```
$isMyAwesomeFeatureEnabled = $client->getValue("isMyAwesomeFeatureEnabled", false);
if (is_bool($isMyAwesomeFeatureEnabled) && $isMyAwesomeFeatureEnabled) {
    doTheNewThing();
} else {
    doTheOldThing();
}
```

## Creating the *ConfigCat Client*[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

Constructor parameters:

| Name      | Type     | Description                                                                                       |
| --------- | -------- | ------------------------------------------------------------------------------------------------- |
| `sdkKey`  | `string` | **REQUIRED.** SDK Key to access your feature flag and setting. Get it from *ConfigCat Dashboard*. |
| `options` | `array`  | **Optional.** Additional SDK options, see below for the detailed list.                            |

Available options:

| Name                     | Type                                                                                                                         | Description                                                                                                                                                                                                                                                                                                                                                                               |
| ------------------------ | ---------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `data-governance`        | `int`                                                                                                                        | Optional, defaults to `DataGovernance::GLOBAL_`. Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `GLOBAL_`, `EU_ONLY`.                                    |
| `logger`                 | [`\Psr\Log\LoggerInterface`](https://github.com/php-fig/log/blob/master/src/LoggerInterface.php)                             | Optional, sets the logger for errors and warnings produced by the SDK, defaults to [Monolog](https://github.com/Seldaek/monolog). [More about logging](#logging).                                                                                                                                                                                                                         |
| `log-level`              | `int`                                                                                                                        | Optional, defaults to `LogLevel::WARNING`. Sets the internal log level. [More about log levels](#logging).                                                                                                                                                                                                                                                                                |
| `cache`                  | [`\ConfigCat\Cache\ConfigCache`](https://github.com/configcat/php-sdk/blob/master/src/Cache/ConfigCache.php)                 | Optional, sets a `\ConfigCat\Cache\ConfigCache` implementation for caching the latest feature flag and setting values. [More about cache](#cache). You can check the currently available implementations [here](https://github.com/configcat/php-sdk/tree/master/src/Cache).                                                                                                              |
| `cache-refresh-interval` | `int`                                                                                                                        | Optional, sets the refresh interval of the cache in seconds, after the initial cached value is set this value will be used to determine how much time must pass before initiating a [config JSON download](https://configcat.com/docs/docs/requests/.md). Defaults to 60.                                                                                                                 |
| `request-options`        | `array`                                                                                                                      | *(Deprecated)* Optional, sets the request options (e.g. [HTTP Timeout](#http-timeout), [HTTP Proxy](#http-proxy)) for the underlying `Guzzle` HTTP client used for [downloading the config JSON](https://configcat.com/docs/docs/requests/.md) files. See Guzzle's [official documentation](https://docs.guzzlephp.org/en/stable/request-options.html) for the available request options. |
| `fetch-client`           | [`\ConfigCat\Http\FetchClientInterface`](https://github.com/configcat/php-sdk/blob/master/src/Http/FetchClientInterface.php) | Custom fetch client that wraps an actual HTTP client used to make HTTP requests towards ConfigCat. When it's not set, [`\ConfigCat\Http\GuzzleFetchClient`](https://github.com/configcat/php-sdk/blob/master/src/Http/GuzzleFetchClient.php) is used by default.                                                                                                                          |
| `flag-overrides`         | [`\ConfigCat\Override\FlagOverrides`](https://github.com/configcat/php-sdk/blob/master/src/Override/FlagOverrides.php)       | Optional, sets the local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                                                          |
| `exceptions-to-ignore`   | `array`                                                                                                                      | Optional, sets an array of exception classes that should be ignored from logs.                                                                                                                                                                                                                                                                                                            |
| `base-url`               | `string`                                                                                                                     | Optional, sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the feature flags and settings.                                                                                                                                                                                                                                                  |
| `default-user`           | [`\ConfigCat\User`](https://github.com/configcat/php-sdk/blob/master/src/User.php)                                           | Optional, sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                                                                |
| `offline`                | `bool`                                                                                                                       | Optional, defaults to `false`. Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                                                         |

info

Each option name is available through constants of the [\ConfigCat\ClientOptions](https://github.com/configcat/php-sdk/blob/master/src/ClientOptions.php) class.

Example:

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::CACHE => new \ConfigCat\Cache\LaravelCache(Cache::store()),
    \ConfigCat\ClientOptions::CACHE_REFRESH_INTERVAL => 5
]);
```

## Anatomy of `getValue()`[â](#anatomy-of-getvalue "Direct link to anatomy-of-getvalue")

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
$value = $client->getValue(
    "keyOfMySetting", # Setting Key
    false, # Default value
    new \ConfigCat\User('#UNIQUE-USER-IDENTIFIER#') # Optional User Object
);
```

## Anatomy of `getValueDetails()`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`getValueDetails()` is similar to `getValue()` but instead of returning the evaluated value only, it gives more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
$details = $client->getValueDetails(
    "keyOfMySetting", # Setting Key
    false, # Default value
    new \ConfigCat\User('#UNIQUE-USER-IDENTIFIER#') # Optional User Object
);
```

The `details` result contains the following information:

| Property                         | Type                                 | Description                                                                                                |
| -------------------------------- | ------------------------------------ | ---------------------------------------------------------------------------------------------------------- |
| `getKey()`                       | `string`                             | The key of the evaluated feature flag or setting.                                                          |
| `getValue()`                     | `bool` / `string` / `int` / `double` | The evaluated value of the feature flag or setting.                                                        |
| `getUser()`                      | `?\ConfigCat\User`                   | The User Object used for the evaluation.                                                                   |
| `isDefaultValue()`               | `bool`                               | True when the default value passed to `getValueDetails()` is returned due to an error.                     |
| `getErrorMessage()`              | `?string`                            | In case of an error, this property contains the error message.                                             |
| `getErrorException()`            | `?Throwable`                         | In case of an error, this property contains the related exception object (if any).                         |
| `getMatchedTargetingRule()`      | `?array`                             | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `getMatchedPercentageOption()`   | `?array`                             | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `getFetchTimeUnixMilliseconds()` | `float`                              | The last download time of the current config in unix milliseconds format.                                  |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
$user = new \ConfigCat\User("#UNIQUE-USER-IDENTIFIER#");
```

```
$user = new \ConfigCat\User("john@example.com");
```

### Customized User Object creation[â](#customized-user-object-creation "Direct link to Customized User Object creation")

| Parameters   | Description                                                                                                                                                                                                                                                        |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                                                                                                                                                   |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                                                                                                                                                          |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                                                                                                                                                          |
| `custom`     | Optional associative array representing the custom attributes of a user for advanced Targeting Rule definitions. e.g. User role, Subscription type. The value's type of the array must be a `string`, `int`, `float`, `DateTimeInterface` or an array of `string`. |

```
$user = new \ConfigCat\User(
    '#UNIQUE-USER-IDENTIFIER#',
    'john@example',
    'United Kingdom',
    [
        'SubscriptionType' => 'Pro',
        'UserRole' => 'Admin'
    ]);
```

caution

If you want to use a `string` value containing non-ASCII characters as a user attribute, please make sure that the content of the string is a UTF-8 byte sequence. ([A PHP string is just a sequence of bytes](https://www.php.net/manual/en/language.types.string.php), it doesn't use any internal character encoding, that is, doesn't offer native Unicode support. Thus, to support Unicode text, the ConfigCat SDK assumes UTF-8 encoding.)

The `custom` array also allows attribute values other than `string` values:

```
$user = new \ConfigCat\User(
    '#UNIQUE-USER-IDENTIFIER#',
    null,
    null,
    [
        'Rating' => 4.5,
        'RegisteredAt' => new DateTimeImmutable('2023-11-22T12:34:56.0000000Z'),
        'Roles' => ['Role1', 'Role2']
    ]);
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `int` or `float` values,
* accept `string` values containing a properly formatted, valid `int` or `float` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `DateTimeInterface` values, which are automatically converted to a second-based Unix timestamp,
* accept `int` or `float` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `int` or `float` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object either on SDK initialization:

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::DEFAULT_USER => new \ConfigCat\User("john@example.com"),
]);
```

or with the `setDefaultUser()` method of the ConfigCat client.

```
$client->setDefaultUser(new \ConfigCat\User("john@example.com"));
```

Whenever the `getValue()`, `getValueDetails()`, `getAllValues()`, or `getAllVariationIds()` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
$user = new \ConfigCat\User("john@example.com");
$client->setDefaultUser($user);

// The default user will be used at the evaluation process.
$value = $client->getValue("keyOfMySetting", false);
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

```
$user = new \ConfigCat\User("john@example.com");
$client->setDefaultUser($user);

$otherUser = new \ConfigCat\User("brian@example.com");

// $otherUser will be used at the evaluation process.
$value = $client->getValue("keyOfMySetting", false, $otherUser);
```

For deleting the default user, you can do the following:

```
$client->clearDefaultUser();
```

## `getAllKeys()`[â](#getallkeys "Direct link to getallkeys")

You can get the keys for all available feature flags and settings by calling the `getAllKeys()` method.

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#");
$keys = $client->getAllKeys();
```

## `getAllValues()`[â](#getallvalues "Direct link to getallvalues")

Evaluates and returns the values of all feature flags and settings. Passing a User Object is optional.

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#");
$settingValues = $client->getAllValues();

// invoke with User Object
$user = new \ConfigCat\User("john@example.com");
$settingValuesTargeting = $client->getAllValues($user);
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `onConfigChanged([key => setting])`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.
* `onFlagEvaluated(EvaluationDetails)`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`getValueDetails()`](#anatomy-of-getvaluedetails).
* `onError(string)`: This event is emitted when an error occurs within the client.

You can subscribe to these events with the `hooks` property of the ConfigCat client:

```
$client->hooks()->addOnFlagEvaluated(function (EvaluationDetails $details) {
    /* handle the event */
});
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

```
$client->setOffline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

```
$client->setOnline();
```

> With `$client->isOffline()` you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour::LOCAL_ONLY`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour::LOCAL_OVER_REMOTE`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour::REMOTE_OVER_LOCAL`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can load your feature flag & setting overrides from a file or from a simple associative array.

### JSON File[â](#json-file "Direct link to JSON File")

The SDK can be set up to load your feature flag & setting overrides from a file. You can also specify whether the file should be reloaded when it gets modified.

```
$client = new \ConfigCat\ConfigCatClient("localhost", [
  \ConfigCat\ClientOptions::FLAG_OVERRIDES => new \ConfigCat\Override\FlagOverrides(
    \ConfigCat\Override\OverrideDataSource::localFile("path/to/the/local_flags.json"), // path to the file
    \ConfigCat\Override\OverrideBehaviour::LOCAL_ONLY
  ),
]);
```

#### JSON File Structure[â](#json-file-structure "Direct link to JSON File Structure")

The SDK supports 2 types of JSON structures to describe feature flags & settings.

##### 1. Simple (key-value) structure[â](#1-simple-key-value-structure "Direct link to 1. Simple (key-value) structure")

```
{
  "flags": {
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
  }
}
```

##### 2. Complex (full-featured) structure[â](#2-complex-full-featured-structure "Direct link to 2. Complex (full-featured) structure")

This is the same format that the SDK downloads from the ConfigCat CDN. It allows the usage of all features that are available on the ConfigCat Dashboard.

You can download your current config JSON from ConfigCat's CDN and use it as a baseline.

The URL to your current config JSON is based on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings:

* GLOBAL: `https://cdn-global.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`
* EU: `https://cdn-eu.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`

```
{
  "f": {
    // list of feature flags & settings
    "isFeatureEnabled": {
      // key of a particular flag
      "v": false, // default value, served when no rules are defined
      "i": "430bded3", // variation id (for analytical purposes)
      "t": 0, // feature flag's type, possible values:
      // 0 -> BOOLEAN
      // 1 -> STRING
      // 2 -> INT
      // 3 -> DOUBLE
      "p": [
        // list of percentage rules
        {
          "o": 0, // rule's order
          "v": true, // value served when the rule is selected during evaluation
          "p": 10, // % value
          "i": "bcfb84a7" // variation id (for analytical purposes)
        },
        {
          "o": 1, // rule's order
          "v": false, // value served when the rule is selected during evaluation
          "p": 90, // % value
          "i": "bddac6ae" // variation id (for analytical purposes)
        }
      ],
      "r": [
        // list of Targeting Rules
        {
          "o": 0, // rule's order
          "a": "Identifier", // comparison attribute
          "t": 2, // comparator, possible values:
          // 0  -> 'IS ONE OF',
          // 1  -> 'IS NOT ONE OF',
          // 2  -> 'CONTAINS',
          // 3  -> 'DOES NOT CONTAIN',
          // 4  -> 'IS ONE OF (SemVer)',
          // 5  -> 'IS NOT ONE OF (SemVer)',
          // 6  -> '< (SemVer)',
          // 7  -> '<= (SemVer)',
          // 8  -> '> (SemVer)',
          // 9  -> '>= (SemVer)',
          // 10 -> '= (Number)',
          // 11 -> '<> (Number)',
          // 12 -> '< (Number)',
          // 13 -> '<= (Number)',
          // 14 -> '> (Number)',
          // 15 -> '>= (Number)',
          // 16 -> 'IS ONE OF (Hashed)',
          // 17 -> 'IS NOT ONE OF Hashed)'
          "c": "@example.com", // comparison value
          "v": true, // value served when the rule is selected during evaluation
          "i": "bcfb84a7" // variation id (for analytical purposes)
        }
      ]
    }
  }
}
```

### Associative Array[â](#associative-array "Direct link to Associative Array")

You can set up the SDK to load your feature flag & setting overrides from an associative array.

```
$client = new \ConfigCat\ConfigCatClient("localhost", [
  \ConfigCat\ClientOptions::FLAG_OVERRIDES => new \ConfigCat\Override\FlagOverrides(
    \ConfigCat\Override\OverrideDataSource::localArray([
      'enabledFeature' => true,
      'disabledFeature' => false,
      'intSetting' => 5,
      'doubleSetting' => 3.14,
      'stringSetting' => "test",
    ]), \ConfigCat\Override\OverrideBehaviour::LOCAL_ONLY),
]);
```

## Cache[â](#cache "Direct link to Cache")

You can use the following caching options:

* Laravel:

  ```
  $client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::CACHE => new \ConfigCat\Cache\LaravelCache(\Illuminate\Support\Facades\Cache::store()),
  ]);
  ```

* PSR-6 cache (e.g. the [redis adapter](https://github.com/php-cache/redis-adapter) for PSR-6):

  ```
  $client = new \RedisArray(['127.0.0.1:6379', '127.0.0.2:6379']);
  $pool = new RedisCachePool($client);

  $client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::CACHE => new \ConfigCat\Cache\Psr6Cache($pool),
  ]);
  ```

  or with the [file system adapter](https://github.com/php-cache/filesystem-adapter):

  ```
  $filesystemAdapter = new \League\Flysystem\Adapter\Local(__DIR__.'/');
  $filesystem = new \League\Flysystem\Filesystem($filesystemAdapter);
  $pool = new \Cache\Adapter\Filesystem\FilesystemCachePool($filesystem);

  $client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::CACHE => new \ConfigCat\Cache\Psr6Cache($pool),
  ]);
  ```

* PSR-16 cache (e.g. the [redis adapter](https://github.com/php-cache/redis-adapter) for PSR-6 and the [PSR-6 to PSR-16 cache bridge](https://github.com/php-cache/simple-cache-bridge)):

  ```
  $client = new \RedisArray(['127.0.0.1:6379', '127.0.0.2:6379']);
  $pool = new RedisCachePool($client);
  $simpleCache = new SimpleCacheBridge($pool);

  $client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::CACHE => new \ConfigCat\Cache\Psr16Cache($simpleCache),
  ]);
  ```

  or with the [file system adapter](https://github.com/php-cache/filesystem-adapter):

  ```
  $filesystemAdapter = new \League\Flysystem\Adapter\Local(__DIR__.'/');
  $filesystem = new \League\Flysystem\Filesystem($filesystemAdapter);
  $pool = new \Cache\Adapter\Filesystem\FilesystemCachePool($filesystem);
  $simpleCache = new SimpleCacheBridge($pool);

  $client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::CACHE => new \ConfigCat\Cache\Psr16Cache($simpleCache),
  ]);
  ```

* Custom cache implementation

  ```
  class CustomCache extends \ConfigCat\Cache\ConfigCache
  {
      protected function get(string $key): ?string
      {
          // load from cache
      }

      protected function set(string $key, string $value): void
      {
          // save into cache
      }
  }
  ```

info

The PHP SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Logging[â](#logging "Direct link to Logging")

The SDK uses the PSR-3 `LoggerInterface` for logging, so you can use any implementor package like [Monolog](https://github.com/Seldaek/monolog).

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::LOGGER => new \Monolog\Logger("name"),
]);
```

You can change the verbosity of the logs by setting the `log-level` option.

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::LOG_LEVEL => \ConfigCat\Log\LogLevel::INFO
]);
```

The following levels are used by the ConfigCat SDK:

| Level     | Description                                                                             |
| --------- | --------------------------------------------------------------------------------------- |
| `NO_LOG`  | Turn the logging off.                                                                   |
| `ERROR`   | Only error level events are logged.                                                     |
| `WARNING` | Default. Errors and Warnings are logged.                                                |
| `INFO`    | Errors, Warnings and feature flag evaluation is logged.                                 |
| `DEBUG`   | All of the above plus debug info is logged. Debug logs can be different for other SDKs. |

Info level logging helps to inspect how a feature flag was evaluated:

```
[2022-01-06T18:34:16.846039+00:00] ConfigCat.INFO: [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

## HTTP Client[â](#http-client "Direct link to HTTP Client")

The SDK by default uses [Guzzle](https://docs.guzzlephp.org/en/stable/index.html) for the underlying HTTP calls. The default HTTP client is customizable through the `\ConfigCat\Http\GuzzleFetchClient::create()` method at the SDK's initialization. To learn more about Guzzle's customization options see the [official documentaion](https://docs.guzzlephp.org/en/stable/request-options.html).

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
     \ConfigCat\ClientOptions::FETCH_CLIENT => \ConfigCat\Http\GuzzleFetchClient::create([
         \GuzzleHttp\RequestOptions::CONNECT_TIMEOUT => 5,
     ]),
]);
```

Through the `\ConfigCat\ClientOptions::FETCH_CLIENT` option you can pass your own HTTP client by providing a `\ConfigCat\Http\FetchClientInterface` implementation.

```
class CustomFetchClient implements \ConfigCat\Http\FetchClientInterface
{
    public function getClient(): \Psr\Http\Client\ClientInterface
    {
        // return with a \Psr\Http\Client\ClientInterface implementation.
    }

    public function createRequest(string $method, string $uri): \Psr\Http\Message\RequestInterface
    {
        // return with a \Psr\Http\Message\RequestInterface implementation
    }
}
```

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
     \ConfigCat\ClientOptions::FETCH_CLIENT => new CustomFetchClient(),
]);
```

### HTTP Proxy[â](#http-proxy "Direct link to HTTP Proxy")

If your application runs behind a proxy you can do the following:

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::REQUEST_OPTIONS => [
        \GuzzleHttp\RequestOptions::PROXY => [
            'http'  => 'tcp://localhost:8125',
            'https' => 'tcp://localhost:9124',
        ]
    ],
]);
```

### HTTP Timeout[â](#http-timeout "Direct link to HTTP Timeout")

You can set the maximum wait time for a ConfigCat HTTP response by using Guzzle's timeouts.

```
$client = new \ConfigCat\ConfigCatClient("#YOUR-SDK-KEY#", [
    \ConfigCat\ClientOptions::REQUEST_OPTIONS => [
        \GuzzleHttp\RequestOptions::CONNECT_TIMEOUT => 5,
        \GuzzleHttp\RequestOptions::TIMEOUT => 10
    ],
]);
```

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

* [Sample Laravel App](https://github.com/configcat/php-sdk/tree/master/samples/laravel)

## Guides[â](#guides "Direct link to Guides")

See [this](https://configcat.com/blog/2022/09/16/how-to-use-feature-flags-in-php/) guide on how to use ConfigCat's PHP SDK.

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat PHP SDK's repository on GitHub](https://github.com/configcat/php-sdk)
* [ConfigCat PHP SDK on packagist.org](https://packagist.org/packages/configcat/configcat-client)


---

# Python SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/python-sdk.svg?style=social)](https://github.com/configcat/python-sdk/stargazers) [![Python CI](https://github.com/configcat/python-sdk/actions/workflows/python-ci.yml/badge.svg?branch=master)](https://github.com/configcat/python-sdk/actions/workflows/python-ci.yml) [![codecov](https://codecov.io/gh/ConfigCat/python-sdk/branch/master/graph/badge.svg)](https://codecov.io/gh/ConfigCat/python-sdk) [![PyPI](https://img.shields.io/pypi/v/configcat-client.svg)](https://pypi.python.org/pypi/configcat-client) [![PyPI](https://img.shields.io/pypi/pyversions/configcat-client.svg)](https://pypi.python.org/pypi/configcat-client) [![Vulnerabilities](https://sonarcloud.io/api/project_badges/measure?project=configcat_python-sdk\&metric=vulnerabilities)](https://sonarcloud.io/dashboard?id=configcat_python-sdk)

[ConfigCat Python SDK on GitHub](https://github.com/configcat/python-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install *ConfigCat SDK*[â](#1-install-configcat-sdk "Direct link to 1-install-configcat-sdk")

```
pip install configcat-client
```

### 2. Import the package[â](#2-import-the-package "Direct link to 2. Import the package")

```
import configcatclient
```

### 3. Create the *ConfigCat* client with your *SDK Key*[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3-create-the-configcat-client-with-your-sdk-key")

```
client = configcatclient.get('#YOUR-SDK-KEY#')
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

```
is_my_awesome_feature_enabled = client.get_value('isMyAwesomeFeatureEnabled', False)
if is_my_awesome_feature_enabled:
    do_the_new_thing()
else:
    do_the_old_thing()
```

### 5. Stop *ConfigCat* client[â](#5-stop-configcat-client "Direct link to 5-stop-configcat-client")

You can safely shut down all clients at once or individually and release all associated resources on application exit.

```
configcatclient.close_all() # closes all clients

client.close() # closes a specific client
```

## Creating the *ConfigCat Client*[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`configcatclient.get('#YOUR-SDK-KEY#')` returns a client with default options.

| Client options            | Description                                                                                                                                                                                                                                                                                         | Default                  |
| ------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------ |
| `base_url`                | *Obsolete*, sets the CDN base url (forward proxy, dedicated subscription) from where the sdk will download the config JSON.                                                                                                                                                                         | None                     |
| `polling_mode`            | Sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                   | PollingMode.auto\_poll() |
| `config_cache`            | Sets a custom config cache implementation for the client. [More about cache](#custom-cache).                                                                                                                                                                                                        | None                     |
| `proxies`                 | Sets custom proxies for the client. [More about proxy](#using-configcat-behind-a-proxy).                                                                                                                                                                                                            | None                     |
| `proxy_auth`              | Sets proxy authentication for the custom proxies. [More about proxy](#using-configcat-behind-a-proxy).                                                                                                                                                                                              | None                     |
| `connect_timeout_seconds` | The number of seconds to wait for the server to make the initial connection (i.e. completing the TCP connection handshake).                                                                                                                                                                         | 10                       |
| `read_timeout_seconds`    | The number of seconds to wait for the server to respond before giving up.                                                                                                                                                                                                                           | 30                       |
| `flag_overrides`          | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides)                                                                                                                                                                                                        | None                     |
| `data_governance`         | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `Global`, `EuOnly`. | `Global`                 |
| `default_user`            | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                    | None                     |
| `hooks`                   | Used to subscribe events that the SDK sends in specific scenarios. [More about hooks](#hooks).                                                                                                                                                                                                      | None                     |
| `offline`                 | Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                  | False                    |

```
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        polling_mode=PollingMode.auto_poll()
    )
)
```

caution

We strongly recommend you to use the *ConfigCat Client* as a Singleton object in your application. The `configcatclient.get()` static factory method constructs singleton client instances for your SDK keys. These clients can be closed all at once with the `configcatclient.close_all()` method or individually with `client.close()`.

## Anatomy of `get_value()`[â](#anatomy-of-get_value "Direct link to anatomy-of-get_value")

| Parameters      | Description                                                                                                                                             |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`           | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `default_value` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`          | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
value = client.get_value(
    'keyOfMySetting', # Setting Key
    False, # Default value
    User('#UNIQUE-USER-IDENTIFIER#') # Optional User Object
)
```

## Anatomy of `get_value_details()`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`get_value_details()` is similar to `get_value()` but instead of returning the evaluated value only, it gives an *EvaluationDetails* object with more detailed information about the evaluation result.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
details = client.get_value_details(
    'keyOfMySetting', # Setting Key
    False, # Default value
    User('#UNIQUE-USER-IDENTIFIER#') # Optional User Object
)
```

The details result contains the following information:

| Property                    | Description                                                                                                |
| --------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `value`                     | The evaluated value of the feature flag or setting.                                                        |
| `key`                       | The key of the evaluated feature flag or setting.                                                          |
| `is_default_value`          | True when the default value passed to `get_value_details()` is returned due to an error.                   |
| `error`                     | In case of an error, this property contains the error message.                                             |
| `user`                      | The User Object that was used for evaluation.                                                              |
| `matched_targeting_rule`    | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matched_percentage_option` | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetch_time`                | The last download time (UTC *datetime*) of the current config.                                             |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
user_object = User('#UNIQUE-USER-IDENTIFIER#')
```

```
user_object = User('john@example.com')
```

### Customized User Object creation[â](#customized-user-object-creation "Direct link to Customized User Object creation")

| Parameters   | Description                                                                                                                       |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                  |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                         |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                         |
| `custom`     | Optional `dictionary` for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

```
user_object = User(
  '#UNIQUE-USER-IDENTIFIER#',
  'john@example',
  'United Kingdom',
  { SubscriptionType: 'Pro', UserRole: 'Admin' }
)
```

The `custom` dictionary also allows attribute values other than `string` values:

```
user_object = User(
    '#UNIQUE-USER-IDENTIFIER#',
    custom={
        'Rating': 4.5,
        'RegisteredAt': datetime.fromisoformat('2023-11-22 12:34:56 +00:00'),
        'Roles': [ 'Role1', 'Role2' ]
    }
)
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS\_ONE\_OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS\_ONE\_OF\_SEMVER, LESS\_THAN\_SEMVER, GREATER\_THAN\_SEMVER, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (EQUALS\_NUMBER, LESS\_THAN\_NUMBER, GREATER\_THAN\_OR\_EQUAL\_NUMBER, etc.)

* accept `float` values and all other numeric values which can safely be converted to `float`,
* accept `string` values containing a properly formatted, valid `float` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE\_DATETIME / AFTER\_DATETIME)

* accept `datetime` values, which are automatically converted to a second-based Unix timestamp (`datetime` values with naive timezone are considered to be in UTC),
* accept `float` values representing a second-based Unix timestamp and all other numeric values which can safely be converted to `float`,
* accept `string` values containing a properly formatted, valid `float` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY\_CONTAINS\_ANY\_OF / ARRAY\_NOT\_CONTAINS\_ANY\_OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object either on SDK initialization:

```
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        default_user=User('john@example.com')
    )
)
```

or with the `set_default_user()` method of the ConfigCat client.

```
client.set_default_user(User('john@example.com'))
```

Whenever the `get_value()`, `get_value_details()`, `get_variation_id()`, `get_all_variation_ids()`, or `get_all_values()` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        default_user=User('john@example.com')
    )
)
# The default user will be used at the evaluation process.
value = client.get_value('keyOfMySetting', False)
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

```
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        default_user=User('john@example.com')
    )
)
other_user = User('brian@example.com')
# otherUser will be used at the evaluation process.
value = client.get_value('keyOfMySetting', False, other_user)
```

For deleting the default user, you can do the following:

```
client.clear_default_user()
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `get_value()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `poll_interval_seconds` option parameter of the `PollingMode.auto_poll()` to change the polling interval.

```
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        polling_mode=PollingMode.auto_poll(poll_interval_seconds=95)
    )
)
```

Available options:

| Option Parameter             | Description                                                                                         | Default |
| ---------------------------- | --------------------------------------------------------------------------------------------------- | ------- |
| `poll_interval_seconds`      | Polling interval.                                                                                   | 60      |
| `max_init_wait_time_seconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5       |

caution

Auto polling mode utilizes its polling job in a `threading.Thread` object. If you are running your application behind an uWSGI web server, the auto polling mode may not work as expected because the uWSGI web server disables Python's threading by default. Please [enable threading](https://uwsgi-docs.readthedocs.io/en/latest/Options.html#enable-threads) or switch to another polling mode in this case.

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `get_value()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `get_value()` will return the setting value after the cache is updated.

Use `cache_refresh_interval_seconds` option parameter to set cache lifetime.

```
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        polling_mode=PollingMode.lazy_load(cache_refresh_interval_seconds=600)
    )
)
```

Available options:

| Option Parameter                 | Description | Default |
| -------------------------------- | ----------- | ------- |
| `cache_refresh_interval_seconds` | Cache TTL.  | 60      |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `force_refresh()` is your application's responsibility.

```
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        polling_mode=PollingMode.manual_poll()
    )
)
client.force_refresh()
```

> `get_value()` returns `default_value` if the cache is empty. Call `force_refresh()` to update the cache.

```
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        polling_mode=PollingMode.manual_poll()
    )
)
value = client.get_value('key', 'my default value') # Returns "my default value"
client.force_refresh()
value = client.get_value('key', 'my default value') # Returns "value from server"
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `on_client_ready()`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after instantiation.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `max_init_wait_time_seconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. Alternatively, in Auto Polling mode, you can wait for the first `onConfigChanged` event to be notified when the internal cache is actually populated with config data.

* `on_config_changed(config: dict)`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `on_flag_evaluated(evaluation_details: EvaluationDetails)`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`get_value_details()`](#anatomy-of-getvaluedetails).

* `on_error(error: str)`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on SDK initialization:

```
def on_flag_evaluated(evaluation_details):
    # handle the event
    pass

client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        hooks=Hooks(on_flag_evaluated=on_flag_evaluated)
    )
)
```

or with the `get_hooks()` method of the ConfigCat client:

```
client.get_hooks().add_on_flag_evaluated(on_flag_evaluated)
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

```
client.set_offline()
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

```
client.set_online()
```

> With `client.is_offline()` you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a file or a dictionary.

### JSON File[â](#json-file "Direct link to JSON File")

The SDK can load your feature flag & setting overrides from a file.

#### File[â](#file "Direct link to File")

```
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        flag_overrides=LocalFileFlagOverrides(
            file_path='path/to/the/local_flags.json',  # path to the file
            override_behaviour=OverrideBehaviour.LocalOnly
        )
    )
)
```

#### JSON File Structure[â](#json-file-structure "Direct link to JSON File Structure")

The SDK supports 2 types of JSON structures to describe feature flags & settings.

##### 1. Simple (key-value) structure[â](#1-simple-key-value-structure "Direct link to 1. Simple (key-value) structure")

```
{
  "flags": {
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
  }
}
```

##### 2. Complex (full-featured) structure[â](#2-complex-full-featured-structure "Direct link to 2. Complex (full-featured) structure")

This is the same format that the SDK downloads from the ConfigCat CDN. It allows the usage of all features that are available on the ConfigCat Dashboard.

You can download your current config JSON from ConfigCat's CDN and use it as a baseline.

A convenient way to get the config JSON for a specific SDK Key is to install the [ConfigCat CLI](https://github.com/configcat/cli) tool and execute the following command:

```
configcat config-json get -f v6 -p {YOUR-SDK-KEY} > config.json
```

(Depending on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings, you may need to add the `--eu` switch.)

Alternatively, you can download the config JSON manually, based on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings:

* GLOBAL: `https://cdn-global.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`
* EU: `https://cdn-eu.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`

```
{
  "p": {
    // hash salt, required only when confidential text comparator(s) are used
    "s": "80xCU/SlDz1lCiWFaxIBjyJeJecWjq46T4eu6GtozkM="
  },
  "s": [ // array of segments
    {
      "n": "Beta Users", // segment name
      "r": [ // array of User Conditions (there is a logical AND relation between the elements)
        {
          "a": "Email", // comparison attribute
          "c": 0, // comparator (see below)
          "l": [ // comparison value (see below)
            "john@example.com", "jane@example.com"
          ]
        }
      ]
    }
  ],
  "f": { // key-value map of feature flags & settings
    "isFeatureEnabled": { // key of a particular flag / setting
      "t": 0, // setting type, possible values:
              // 0 -> on/off setting (feature flag)
              // 1 -> text setting
              // 2 -> whole number setting
              // 3 -> decimal number setting
      "r": [ // array of Targeting Rules (there is a logical OR relation between the elements)
        {
          "c": [ // array of conditions (there is a logical AND relation between the elements)
            {
              "u": { // User Condition
                "a": "Email", // comparison attribute
                "c": 2, // comparator, possible values and required comparison value types:
                        // 0  -> IS ONE OF (cleartext) + string array comparison value ("l")
                        // 1  -> IS NOT ONE OF (cleartext) + string array comparison value ("l")
                        // 2  -> CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 3  -> NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 4  -> IS ONE OF (semver) + semver string array comparison value ("l")
                        // 5  -> IS NOT ONE OF (semver) + semver string array comparison value ("l")
                        // 6  -> < (semver) + semver string comparison value ("s")
                        // 7  -> <= (semver + semver string comparison value ("s")
                        // 8  -> > (semver) + semver string comparison value ("s")
                        // 9  -> >= (semver + semver string comparison value ("s")
                        // 10 -> = (number) + number comparison value ("d")
                        // 11 -> <> (number + number comparison value ("d")
                        // 12 -> < (number) + number comparison value ("d")
                        // 13 -> <= (number + number comparison value ("d")
                        // 14 -> > (number) + number comparison value ("d")
                        // 15 -> >= (number) + number comparison value ("d")
                        // 16 -> IS ONE OF (hashed) + string array comparison value ("l")
                        // 17 -> IS NOT ONE OF (hashed) + string array comparison value ("l")
                        // 18 -> BEFORE (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 19 -> AFTER (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 20 -> EQUALS (hashed) + string comparison value ("s")
                        // 21 -> NOT EQUALS (hashed) + string comparison value ("s")
                        // 22 -> STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 23 -> NOT STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 24 -> ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 25 -> NOT ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 26 -> ARRAY CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 27 -> ARRAY NOT CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 28 -> EQUALS (cleartext) + string comparison value ("s")
                        // 29 -> NOT EQUALS (cleartext) + string comparison value ("s")
                        // 30 -> STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 31 -> NOT STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 32 -> ENDS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 33 -> NOT ENDS WITH ANY OF (cleartext + string array comparison value ("l")
                        // 34 -> ARRAY CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 35 -> ARRAY NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                "l": [ // comparison value - depending on the comparator, another type of value may need
                       // to be specified (see above):
                       // "s": string
                       // "d": number
                  "@example.com"
                ]
              }
            },
            {
              "p": { // Flag Condition (Prerequisite)
                "f": "mainIntFlag", // key of prerequisite flag
                "c": 0, // comparator, possible values: 0 -> EQUALS, 1 -> NOT EQUALS
                "v": { // comparison value (value's type must match the prerequisite flag's type)
                  "i": 42
                }
              }
            },
            {
              "s": { // Segment Condition
                "s": 0, // segment index, a valid index into the top-level segment array ("s")
                "c": 1 // comparator, possible values: 0 -> IS IN SEGMENT, 1 -> IS NOT IN SEGMENT
              }
            }
          ],
          "s": { // alternatively, an array of Percentage Options ("p", see below) can also be specified
            "v": { // the value served when the rule is selected during evaluation
              "b": true
            },
            "i": "bcfb84a7"
          }
        }
      ],
      "p": [ // array of Percentage Options
        {
          "p": 10, // % value
          "v": { // the value served when the Percentage Option is selected during evaluation
            "b": true
          },
          "i": "bcfb84a7"
        },
        {
          "p": 90,
          "v": {
            "b": false
          },
          "i": "bddac6ae"
        }
      ],
      "v": { // fallback value, served when none of the Targeting Rules match,
             // no Percentage Options are defined or evaluation of these is not possible
        "b": false // depending on the setting type, another type of value may need to be specified:
                   // text setting -> "s": string
                   // whole number setting -> "i": number
                   // decimal number setting -> "d": number
      },
      "i": "430bded3" // variation id (for analytical purposes)
    }
  }
}
```

For a more comprehensive specification of the config JSON v6 format, you may refer to [this JSON schema document](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

### Dictionary[â](#dictionary "Direct link to Dictionary")

You can set up the SDK to load your feature flag & setting overrides from a dictionary.

```
dictionary = {
    'enabledFeature': True,
    'disabledFeature': False,
    'intSetting': 5,
    'doubleSetting': 3.14,
    'stringSetting': 'test'
}

client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        flag_overrides=LocalDictionaryFlagOverrides(source=dictionary, override_behaviour=OverrideBehaviour.LocalOnly)
    )
)
```

## Logging[â](#logging "Direct link to Logging")

The *ConfigCat SDK* uses Python's built-in [logging library](https://docs.python.org/3/library/logging.html).

With the `logging.basicConfig()` method, you can set up the logging system. The following example shows how to set the default root logger to write logs to the standard output with `INFO` log level.

```
import logging
logging.basicConfig(level=logging.INFO)
```

The *ConfigCat SDK* specifies an internal logger called `'configcat'`. The following example shows how to set the *Log Level* on the internal *ConfigCat* logger.

```
logger = logging.getLogger('configcat')
logger.setLevel(logging.INFO)
```

Available log levels:

| Level | Description                                                                             |
| ----- | --------------------------------------------------------------------------------------- |
| ERROR | Only error level events are logged.                                                     |
| WARN  | Default. Errors and Warnings are logged.                                                |
| INFO  | Errors, Warnings and feature flag evaluation is logged.                                 |
| DEBUG | All of the above plus debug info is logged. Debug logs can be different for other SDKs. |

Info level logging helps to inspect the feature flag evaluation process:

```
INFO:configcat:[5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'False' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'True' => MATCH, applying rule
  Returning 'True'.
```

## `get_all_keys()`[â](#get_all_keys "Direct link to get_all_keys")

You can get the keys for all available feature flags and settings by calling the `get_all_keys()` method.

```
client = configcatclient.get('#YOUR-SDK-KEY#')
keys = client.get_all_keys()
```

## `get_all_values()`[â](#get_all_values "Direct link to get_all_values")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

| Parameters | Description                                                                                                                                             |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `user`     | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
client = configcatclient.get('#YOUR-SDK-KEY#')
all_values = client.get_all_values(User('#UNIQUE-USER-IDENTIFIER#'))  # Optional User Object
```

## `get_all_value_details()`[â](#get_all_value_details "Direct link to get_all_value_details")

Evaluates and returns the detailed values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
client = configcatclient.get('#YOUR-SDK-KEY#')
all_value_details = client.get_all_value_details(User('#UNIQUE-USER-IDENTIFIER#'))  # Optional User Object
```

## Custom cache[â](#custom-cache "Direct link to Custom cache")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`ConfigCache`](https://github.com/configcat/python-sdk/blob/master/configcatclient/interfaces.py) interface and set the `config_cache` parameter in the options passed to `configcatclient.get`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
from configcatclient.interfaces import ConfigCache

class InMemoryConfigCache(ConfigCache):
    def __init__(self):
        self._value = {}

    def get(self, key):
        # you should return the cached value
        return self._value.get(key)

    def set(self, key, value):
        # you should cache the new value
        self._value[key] = value
```

Then use your custom cache implementation:

```
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        config_cache=InMemoryConfigCache()
    )
)
```

info

The Python SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Using ConfigCat behind a proxy[â](#using-configcat-behind-a-proxy "Direct link to Using ConfigCat behind a proxy")

Provide your own network credentials (username/password), and proxy server settings (proxy server/port) by passing the proxy details to the creator method.

```
proxies = {'https': '127.0.0.1:8080'}
proxy_auth = HTTPProxyAuth('user', 'password')
client = configcatclient.get('#YOUR-SDK-KEY#',
    ConfigCatOptions(
        proxies=proxies,
        proxy_auth=proxy_auth
    )
)
```

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

* [Sample Console App](https://github.com/configcat/python-sdk/tree/master/samples/consolesample)
* [Django Web App](https://github.com/configcat/python-sdk/tree/master/samples/webappsample)

## Guides[â](#guides "Direct link to Guides")

See [this](https://configcat.com/blog/2022/08/12/how-to-use-feature-flag-with-flask/) guide on how to use ConfigCat's Python SDK in a Flask application.

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat's Python SDK on GitHub](https://github.com/configcat/python-sdk)
* [ConfigCat's Python SDK in PyPI](https://pypi.org/project/configcat-client/)


---

# React SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/react-sdk.svg?style=social)](https://github.com/configcat/react-sdk/stargazers) [![REACT CI](https://github.com/configcat/react-sdk/actions/workflows/react-ci.yml/badge.svg)](https://github.com/configcat/react-sdk/actions/workflows/react-ci.yml) [![codecov](https://codecov.io/gh/configcat/react-sdk/branch/main/graph/badge.svg?token=X9kFVT7xXL)](https://codecov.io/gh/configcat/react-sdk) [![Known Vulnerabilities](https://snyk.io/test/github/configcat/react-sdk/badge.svg?targetFile=package.json)](https://snyk.io/test/github/configcat/react-sdk?targetFile=package.json) [![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=configcat_react-sdk\&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=configcat_react-sdk) [![JSDELIVR](https://data.jsdelivr.com/v1/package/npm/configcat-react/badge)](https://www.jsdelivr.com/package/npm/configcat-react)

[ConfigCat React SDK on GitHub](https://github.com/configcat/react-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install package[â](#1-install-package "Direct link to 1. Install package")

*via [NPM package](https://npmjs.com/package/configcat-react):*

```
npm i configcat-react
```

### 2. Import and initialize a `ConfigCatProvider` with your SDK Key[â](#2-import-and-initialize-a-configcatprovider-with-your-sdk-key "Direct link to 2-import-and-initialize-a-configcatprovider-with-your-sdk-key")

In most cases you should wrap your root component with `ConfigCatProvider` to access ConfigCat features in child components with Context API.

```
import React from 'react';
import { ConfigCatProvider } from 'configcat-react';

function App() {
  return (
    <ConfigCatProvider sdkKey="#YOUR_SDK_KEY#">
      {/* your application code */}
    </ConfigCatProvider>
  );
}

export default App;
```

### 3. Get your setting value[â](#3-get-your-setting-value "Direct link to 3. Get your setting value")

The React hooks (`useFeatureFlag`) way:

```
function ButtonComponent() {
  const { value: isAwesomeFeatureEnabled, loading } = useFeatureFlag(
    'isAwesomeFeatureEnabled',
    false,
  );

  return loading ? (
    <div>Loading...</div>
  ) : (
    <div>Feature flag value: {isAwesomeFeatureEnabled ? 'ON' : 'OFF'}</div>
  );
}
```

The React HOC (`WithConfigCatClientProps`) way:

```
class TestHOCComponent extends React.Component<
  WithConfigCatClientProps,
  { isAwesomeFeatureEnabled: boolean; loading: boolean }
> {
  constructor(props: WithConfigCatClientProps) {
    super(props);

    this.state = { isAwesomeFeatureEnabled: false, loading: true };
  }

  componentDidMount() {
    this.evaluateFeatureFlag();
  }

  componentDidUpdate(prevProps: any) {
    // To achieve hot reload on config JSON updates.
    if (prevProps?.lastUpdated !== this.props.lastUpdated) {
      this.evaluateFeatureFlag();
    }
  }

  evaluateFeatureFlag() {
    this.props
      .getValue('isAwesomeFeatureEnabled', false)
      .then((v: boolean) =>
        this.setState({ isAwesomeFeatureEnabled: v, loading: false }),
      );
  }

  render() {
    return loading ? (
      <div>Loading...</div>
    ) : (
      <div>
        Feature flag value: {this.state.isAwesomeFeatureEnabled ? 'ON' : 'OFF'}
      </div>
    );
  }
}

const ConfigCatTestHOCComponent = withConfigCatClient(TestHOCComponent);
```

## Creating the *ConfigCat* Client[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`<ConfigCatProvider sdkKey="#YOUR_SDK_KEY#" pollingMode={PollingMode.AutoPoll} options={{ ... }}>` initializes a client.

| Attributes    | Description                                                                                                                                                                                                                           | Default                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |
| `sdkKey`      | **REQUIRED.** SDK Key to access your feature flags and settings. Get it from the *ConfigCat Dashboard*.                                                                                                                               | -                      |
| `pollingMode` | Optional. The polling mode to use to fetch the config data from the ConfigCat CDN. [More about polling modes](#polling-modes).                                                                                                        | `PollingMode.AutoPoll` |
| `options`     | Optional. The options object. See the table below.                                                                                                                                                                                    | -                      |
| `id`          | Optional. Instructs the ConfigCat Client to use a specific `ConfigCatProvider` instead of the default one. Use it if you have multiple `ConfigCatProvider`s in your code. [More about multiple providers](#using-multiple-providers). | `undefined` (none)     |

The available options depends on the chosen polling mode. However, there are some common options which can be set in the case of every polling mode:

| Option Parameter   | Description                                                                                                                                                                                                                                                                                                                       | Default                                                                                                                 |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `logger`           | Custom [`IConfigCatLogger`](https://github.com/configcat/common-js/blob/master/src/ConfigCatLogger.ts) implementation for tracing.                                                                                                                                                                                                | [`ConfigCatConsoleLogger`](https://github.com/configcat/common-js/blob/master/src/ConfigCatLogger.ts) (with WARN level) |
| `requestTimeoutMs` | The amount of milliseconds the SDK waits for a response from the ConfigCat servers before returning values from the cache.                                                                                                                                                                                                        | 30000                                                                                                                   |
| `baseUrl`          | Sets the CDN base url (forward proxy, dedicated subscription) from where the SDK will download the config JSON.                                                                                                                                                                                                                   |                                                                                                                         |
| `dataGovernance`   | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `DataGovernance.Global`, `DataGovernance.EuOnly`. | `DataGovernance.Global`                                                                                                 |
| `cache`            | Custom [`IConfigCatCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts) implementation for caching the downloaded config.                                                                                                                                                                            | [`InMemoryConfigCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts)                       |
| `flagOverrides`    | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                                     | -                                                                                                                       |
| `defaultUser`      | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                                  | `undefined` (none)                                                                                                      |
| `offline`          | Determines whether the client should be initialized to offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                                            | `false`                                                                                                                 |

Options also include a property named `setupHook`, which you can use to subscribe to the hooks (events) at the time of initialization. [More about hooks](#hooks).

For example:

```
<ConfigCatProvider
  sdkKey="YOUR_SDK_KEY"
  pollingMode={PollingMode.AutoPoll}
  options={{
    setupHooks: (hooks) =>
      hooks.on('clientReady', () => console.log('Client is ready!')),
  }}
>
  ...
</ConfigCatProvider>
```

### Acquire the ConfigCat instance[â](#acquire-the-configcat-instance "Direct link to Acquire the ConfigCat instance")

The SDK supports two ways to acquire the initialized ConfigCat instance:

* Custom hook: `useConfigCatClient()` (from React v16.8)
* Higher-order component: `withConfigCatClient()`

## Anatomy of `useFeatureFlag()`[â](#anatomy-of-usefeatureflag "Direct link to anatomy-of-usefeatureflag")

| Parameters     | Description                                                                                                                                                                                                                           |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                                                                                                    |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                                                                                                        |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md)                                                                               |
| `providerId`   | Optional. Instructs the ConfigCat Client to use a specific `ConfigCatProvider` instead of the default one. Use it if you have multiple `ConfigCatProvider`s in your code. [More about multiple providers](#using-multiple-providers). |

```
function ButtonComponent() {
  const { value: isAwesomeFeatureEnabled, loading } = useFeatureFlag(
    'isAwesomeFeatureEnabled',
    false,
  );

  return loading ? (
    <div>Loading...</div>
  ) : (
    <div>Feature flag value: {isAwesomeFeatureEnabled ? 'ON' : 'OFF'}</div>
  );
}
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | `typeof defaultValue` |
| -------------- | --------------------- |
| On/Off Toggle  | `boolean`             |
| Text           | `string`              |
| Whole Number   | `number`              |
| Decimal Number | `number`              |

In addition to the types mentioned above, you also have the option to provide `null` or `undefined` for the `defaultValue` parameter regardless of the setting kind. However, if you do so, the type of `value` returned by the `useFeatureFlag` method will be

* `boolean | string | number | null` when `defaultValue` is `null` or
* `boolean | string | number | undefined` when `defaultValue` is `undefined`.

This is because in these cases the exact return type cannot be determined at compile-time as the TypeScript compiler has no information about the setting type.

It's important to note that providing any other type for the `defaultValue` parameter will result in a `TypeError`.

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `defaultValue` will be returned.

## Anatomy of `useConfigCatClient()`[â](#anatomy-of-useconfigcatclient "Direct link to anatomy-of-useconfigcatclient")

| Parameters   | Description                                                                                                                                                                                                                           |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `providerId` | Optional. Instructs the ConfigCat Client to use a specific `ConfigCatProvider` instead of the default one. Use it if you have multiple `ConfigCatProvider`s in your code. [More about multiple providers](#using-multiple-providers). |

This custom hook returns the ConfigCat instance from the context API. You have to wrap your parent element with `ConfigCatProvider` to ensure a `ConfigCatContextData`.

```
export const FlagDetailsComponent = () => {
  const client = useConfigCatClient();

  const [flagDetails, setFlagDetails] =
    useState<IEvaluationDetails<boolean> | null>(null);

  useEffect(() => {
    client
      .getValueDetailsAsync('isAwesomeFeatureEnabled', false)
      .then((v) => setFlagDetails(v));
  }, [client]);

  return (
    <>{flagDetails && <p>FlagDetails: {JSON.stringify(flagDetails)}</p>}</>
  );
};
```

## Anatomy of `withConfigCatClient()`[â](#anatomy-of-withconfigcatclient "Direct link to anatomy-of-withconfigcatclient")

| Parameters   | Description                                                                                                                                                                                                                           |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `providerId` | Optional. Instructs the ConfigCat Client to use a specific `ConfigCatProvider` instead of the default one. Use it if you have multiple `ConfigCatProvider`s in your code. [More about multiple providers](#using-multiple-providers). |

This is a higher-order component that can take your React component and will return the component with the injected ConfigCat related props (`WithConfigCatClientProps`).

These props are the following:

```
export interface WithConfigCatClientProps {
  configCatClient: IConfigCatClient;
  getValue: GetValueType;
  lastUpdated?: Date;
}
```

Sample declaration of class component with *ConfigCat SDK*'s higher-order component:

```
class MyComponent extends React.Component<
  { myProp: string } & WithConfigCatClientProps
> {
  constructor(props: { myProp: string } & WithConfigCatClientProps) {
    super(props);

    // props.configCatClient - use any method on the instance
    // props.getValue - helper function for flag evaluation
  }

  ...
}

// HOC declaration
const ConfigCatMyComponent = withConfigCatClient(MyComponent);

// Usage of the wrapped component
<ConfigCatMyComponent myProp='ConfigCat <3 React' />
```

### Props - `configCatClient`[â](#props---configcatclient "Direct link to props---configcatclient")

The ConfigCat client instance (`IConfigCatClient`) to access all features of the *ConfigCat SDK*.

In this example the component can invoke the `forceRefreshAsync` method on the injected ConfigCat instance.

```
class ManualRefreshComponent extends React.Component<
  { featureFlagKey: string } & WithConfigCatClientProps,
  { refreshAt: string | null }
> {
  constructor(props: { featureFlagKey: string } & WithConfigCatClientProps) {
    super(props);

    this.state = { refreshAt: '-' };
  }

  refresh() {
    this.props.configCatClient
      .forceRefreshAsync()
      .then(() =>
        this.setState({ refreshAt: new Date().toLocaleTimeString() }),
      );
  }

  render() {
    return (
      <div>
        <button onClick={() => this.refresh()}>Refresh</button>
        <p>Last manual refresh: {this.state.refreshAt}</p>
      </div>
    );
  }
}

const ConfigCatManualRefreshComponent = withConfigCatClient(
  ManualRefreshComponent,
);
```

### Props - `getValue`[â](#props---getvalue "Direct link to props---getvalue")

A helper function to get the value of a feature flag.

| Parameters     | Description                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`          | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `defaultValue` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`         | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
class TestHOCComponent extends React.Component<
  WithConfigCatClientProps,
  { isAwesomeFeatureEnabled: string }
> {
  constructor(props: WithConfigCatClientProps) {
    super(props);

    this.state = { isAwesomeFeatureEnabled: false, loading: true };
  }

  componentDidMount() {
    this.evaluateFeatureFlag();
  }

  componentDidUpdate(prevProps: any) {
    // To achieve hot reload on config JSON updates.
    if (prevProps?.lastUpdated !== this.props.lastUpdated) {
      this.evaluateFeatureFlag();
    }
  }

  evaluateFeatureFlag() {
    this.props
      .getValue('isAwesomeFeatureEnabled', false)
      .then((v: boolean) =>
        this.setState({ isAwesomeFeatureEnabled: v, loading: false }),
      );
  }

  render() {
    return loading ? (
      <div>Loading...</div>
    ) : (
      <div>
        Feature flag value: {this.state.isAwesomeFeatureEnabled ? 'ON' : 'OFF'}
      </div>
    );
  }
}
```

caution

It is important to provide an argument for the `defaultValue` parameter that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

### Props - `lastUpdated`[â](#props---lastupdated "Direct link to props---lastupdated")

The timestamp of when the config was last updated.

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

For simple targeting:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
```

```
const userObject = { identifier: 'john@example.com' };
```

| Parameters   | Description                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address.                |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `custom`     | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type. |

For advanced targeting:

```
const userObject = {
  identifier: '#UNIQUE-USER-IDENTIFIER#',
  email: 'john@example.com',
  country: 'United Kingdom',
  custom: {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
};
```

```
function ButtonComponent() {
  const { value: isAwesomeFeatureEnabled, loading } = useFeatureFlag(
    'isAwesomeFeatureEnabled',
    false,
    userObject,
  );

  return loading ? (
    <div>Loading...</div>
  ) : (
    <div>Feature flag value: {isAwesomeFeatureEnabled ? 'ON' : 'OFF'}</div>
  );
}
```

The `custom` dictionary also allows attribute values other than `string` values:

```
const userObject = { identifier: '#UNIQUE-USER-IDENTIFIER#' };
userObject.custom = {
  Rating: 4.5,
  RegisteredAt: new Date('2023-11-22T12:34:56.000Z'),
  Roles: ['Role1', 'Role2'],
};
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `string` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS ONE OF, etc.)

* accept `string` values,
* all other values are automatically converted to `string` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS ONE OF, <, >=, etc.)

* accept `string` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (=, <, >=, etc.)

* accept `number` values,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE / AFTER)

* accept `Date` values, which are automatically converted to a second-based Unix timestamp,
* accept `number` values representing a second-based Unix timestamp,
* accept `string` values containing a properly formatted, valid `number` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY CONTAINS ANY OF / ARRAY NOT CONTAINS ANY OF)

* accept arrays of `string`,
* accept `string` values containing a valid JSON string which can be deserialized to an array of `string`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
<ConfigCatProvider
  sdkKey="YOUR_SDK_KEY"
  pollingMode={PollingMode.AutoPoll}
  options={{ defaultUser: { identifier: 'john@example.com' } }}
>
  ...
</ConfigCatProvider>
```

...or using the `setDefaultUser()` method of the `configCatClient` instance:

```
const currentUser = { identifier: 'john@example.com' };

export const SetConfigCatUserComponent = () => {
  const client = useConfigCatClient();

  const [user] = useState(currentUser);

  useEffect(() => {
    client.setDefaultUser(user);
  }, [client, user]);

  return null;
};
```

Whenever the evaluation methods like `getValueAsync()`, `getValueDetailsAsync()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
export const FlagValueDetailsComponent = () => {
  const client = useConfigCatClient();

  const [flagDetails, setFlagDetails] =
    useState<IEvaluationDetails<boolean> | null>(null);

  // invoke getValueDetailsAsync method WITHOUT User Object
  useEffect(() => {
    client
      .getValueDetailsAsync('featureFlagKey', false)
      .then((v) => setFlagDetails(v));
  }, [client]);

  return (
    <>{flagDetails && <p>FlagDetails: {JSON.stringify(flagDetails)}</p>}</>
  );
};
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
const currentUser = { identifier: 'john@example.com' };

export const FlagValueDetailsComponent = () => {
  const client = useConfigCatClient();

  const [flagDetails, setFlagDetails] =
    useState<IEvaluationDetails<boolean> | null>(null);
  const [user] = useState(currentUser);

  // invoke getValueDetailsAsync method WITH User Object
  useEffect(() => {
    client
      .getValueDetailsAsync('featureFlagKey', false, user)
      .then((v) => setFlagDetails(v));
  }, [client, user]);

  return (
    <>{flagDetails && <p>FlagDetails: {JSON.stringify(flagDetails)}</p>}</>
  );
};
```

You can also remove the default user by doing the following:

```
export const ClearConfigCatUserComponent = () => {
  const client = useConfigCatClient();

  useEffect(() => {
    client.clearDefaultUser();
  }, [client]);

  return null;
};
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `getValueAsync()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

#### Initialization[â](#initialization "Direct link to Initialization")

```
<ConfigCatProvider sdkKey="YOUR_SDK_KEY" options={{...}}>
  ...
</ConfigCatProvider>
```

or

```
<ConfigCatProvider sdkKey="YOUR_SDK_KEY" pollingMode={PollingMode.AutoPoll} options={{...}}>
  ...
</ConfigCatProvider>
```

Use the `pollIntervalSeconds` option parameter to change the polling interval.

```
<ConfigCatProvider
  sdkKey="YOUR_SDK_KEY"
  pollingMode={PollingMode.AutoPoll}
  options={{ pollIntervalSeconds: 95 }}
>
  ...
</ConfigCatProvider>
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description                                                                                         | Default |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ------- |
| `pollIntervalSeconds`    | Polling interval in seconds.                                                                        | 60s     |
| `maxInitWaitTimeSeconds` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5s      |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `useFeatureFlag()` or `WithConfigCatClientProps.getValue()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired.

#### Initialization[â](#initialization-1 "Direct link to Initialization")

```
<ConfigCatProvider sdkKey="YOUR_SDK_KEY" pollingMode={PollingMode.LazyLoad} options={{...}}>
  ...
</ConfigCatProvider>
```

Use `cacheTimeToLiveSeconds` option parameter to set cache lifetime.

```
<ConfigCatProvider
  sdkKey="YOUR_SDK_KEY"
  pollingMode="{PollingMode.LazyLoad}"
  options={{ cacheTimeToLiveSeconds: 600 }}
>
  ...
</ConfigCatProvider>
```

Available options (in addition to the [common ones](#creating-the-configcat-client)):

| Option Parameter         | Description           | Default |
| ------------------------ | --------------------- | ------- |
| `cacheTimeToLiveSeconds` | Cache TTL in seconds. | 60s     |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `forceRefreshAsync()` is your application's responsibility.

#### Initialization[â](#initialization-2 "Direct link to Initialization")

```
<ConfigCatProvider sdkKey="YOUR_SDK_KEY" pollingMode={PollingMode.ManualPoll} options={{...}}>
  ...
</ConfigCatProvider>
```

```
const client = useConfigCatClient();
useEffect(() => {
  client.forceRefreshAsync().then(() => {
    console.log('forceRefreshAsync() invoked');
  });
});
```

## SDK Hooks (not React Hooks)[â](#hooks "Direct link to SDK Hooks (not React Hooks)")

info

*ConfigCat SDK* hooks are different than React Hooks.

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `clientReady: [cacheState: ClientCacheState]`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after the initial sync with the external cache (if any) completes.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `maxInitWaitTimeSeconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. You can verify this by checking the `cacheState` argument.

* `configChanged: [newConfig: IConfig]`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `flagEvaluated: [evaluationDetails: IEvaluationDetails]`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from `getValueDetailsAsync()`.

* `clientError: [message: string, exception?: any]`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on initialization:

```
<ConfigCatProvider
  sdkKey="YOUR_SDK_KEY"
  pollingMode={PollingMode.ManualPoll}
  options={{
    setupHooks: (hooks) =>
      hooks.on('flagEvaluated', () => {
        /* handle the event */
      }),
  }}
>
  ...
</ConfigCatProvider>
```

...or directly on the `ConfigCatClient` instance:

```
export const ConfigCatWithHookComponent = () => {
  const client = useConfigCatClient();

  const [configChangedAt, setConfigChanged] = useState('-');

  useEffect(() => {
    function hookLogic() {
      const t = new Date().toISOString();
      setConfigChanged(t);
      console.log(t);
    }

    client.on('configChanged', hookLogic);

    return () => {
      client.off('configChanged', hookLogic);
    };
  });

  return <p>configChangedAt: {configChangedAt}</p>;
};
```

Using higher-order component (HOC):

```
class ConfigChangedComponent extends React.Component<
  WithConfigCatClientProps,
  { refreshAt: string | null }
> {
  constructor(props: WithConfigCatClientProps) {
    super(props);

    this.state = { refreshAt: '-' };
  }

  componentDidMount() {
    this.props.configCatClient.on('configChanged', () => this.myHookLogic());
  }

  componentWillUnmount() {
    this.props.configCatClient.off('configChanged', () => this.myHookLogic());
  }

  myHookLogic() {
    this.setState({ refreshAt: new Date().toISOString() });
  }

  render() {
    return (
      <div>
        <p>configChangedAt: {this.state.refreshAt}</p>
      </div>
    );
  }
}

const ConfigCatManualRefreshComponent = withConfigCatClient(
  ConfigChangedComponent,
);
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
export const ConfigCatIsOfflineComponent = () => {
  const client = useConfigCatClient();

  const [isOffline, setIsOffline] = useState(false);

  function setMode() {
    if (isOffline) {
      client.setOnline();
    } else {
      client.setOffline();
    }

    setIsOffline(client.isOffline);
  }

  return (
    <>
      <p>ConfigCat mode: {isOffline ? 'Offline' : 'Online'}</p>
      <button
        onClick={() => {
          setMode();
        }}
      >
        Set {isOffline ? 'Online' : 'Offline'}
      </button>
    </>
  );
};
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, invoke `setOnline()` method.

Using the `isOffline` property you can check whether the SDK is in offline mode or not.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour.LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour.LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour.RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can load your feature flag & setting overrides from a simple `{ [key: string]: boolean | string | number }` map or query string parameters.

### Map[â](#map "Direct link to Map")

You can set up the SDK to load your feature flag & setting overrides from a `{ [key: string]: boolean | string | number }` map.

```
const flagOverrides = createFlagOverridesFromMap({
    enabledFeature: true,
    disabledFeature: false,
    intSetting: 5,
    doubleSetting: 3.14,
    stringSetting: "test"
},
OverrideBehaviour.LocalOnly);
```

```
<ConfigCatProvider sdkKey="YOUR_SDK_KEY" options={{ flagOverrides }}>
  ...
</ConfigCatProvider>
```

### Query string[â](#query-string "Direct link to Query string")

Since v4.8.0, it is also possible to override feature flags & settings using query string parameters.

```
const flagOverrides = createFlagOverridesFromQueryParams(OverrideBehaviour.LocalOverRemote);
```

```
<ConfigCatProvider sdkKey="YOUR_SDK_KEY" options={{ flagOverrides }}>
  ...
</ConfigCatProvider>
```

With that setup, you can override feature flags and settings by appending query string parameters to the URL of your application in the following form: `https://app.example.com/?cc-myBooleanFlag=true&cc-myStringSetting=abc&...`

The setting type is automatically inferred from the value. Please pay attention to this behavior. The inferred type of the value must match the type of the feature flag or setting you override (see also [this table](#setting-type-mapping)). In case you want to force a boolean or number value to be interpreted as a string value, use the `;str` suffix: `&cc-myStringSetting;str=true`.

If the default prefix used to differentiate between normal and flag override query string parameters (`cc-`) is not suitable for you, you can set a custom prefix using the corresponding optional parameter of `createFlagOverridesFromQueryParams`.

## Logging[â](#logging "Direct link to Logging")

### Setting log levels[â](#setting-log-levels "Direct link to Setting log levels")

```
<ConfigCatProvider
  sdkKey="YOUR_SDK_KEY"
  pollingMode={PollingMode.ManualPoll}
  options={{ logger: createConsoleLogger(LogLevel.Info) }} // Setting log level to Info
>
  ...
</ConfigCatProvider>
```

Available log levels:

| Level | Description                                             |
| ----- | ------------------------------------------------------- |
| Off   | Nothing gets logged.                                    |
| Error | Only error level events are logged.                     |
| Warn  | Default. Errors and Warnings are logged.                |
| Info  | Errors, Warnings and feature flag evaluation is logged. |
| Debug | All of the above plus debug info is logged.             |

Info level logging helps to inspect the feature flag evaluation process:

```
ConfigCat - INFO - [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"#SOME-USER-ID#","Email":"configcat@example.com"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

### Custom logger implementation[â](#custom-logger-implementation "Direct link to Custom logger implementation")

The SDK provides a simple logger implementation that logs to [the debugging console](https://developer.mozilla.org/en-US/docs/Web/API/console) (`configcat.createConsoleLogger(...)`) but it also allows you to inject any custom implementation of `IConfigCatLogger`.

```
class MyCustomLogger implements IConfigCatLogger {
  /**
   * Writes an event into the log.
   * @param level Event severity level.
   * @param eventId Event identifier.
   * @param message Message.
   * @param exception The exception object related to the message (if any).
   */
  log(
    level: LogLevel,
    eventId: LogEventId,
    message: LogMessage,
    exception?: any,
  ): void {
    // insert your custom log logic
  }
}
```

or

```
function MyCustomLogger() {}

MyCustomLogger.prototype.log = function (level, eventId, message, exception) {
  // insert your custom log logic
};
```

then

```
<ConfigCatProvider
  sdkKey="YOUR_SDK_KEY"
  pollingMode={PollingMode.ManualPoll}
  options={{ cache: new MyCustomLogger() }}
>
  ...
</ConfigCatProvider>
```

## Using custom cache implementation[â](#using-custom-cache-implementation "Direct link to Using custom cache implementation")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`IConfigCatCache`](https://github.com/configcat/common-js/blob/master/src/ConfigCatCache.ts) interface and set the `cache` property in the options passed to `ConfigCatProvider`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
class MyCustomCache implements IConfigCatCache {
  set(key: string, value: string): Promise<void> | void {
    // insert your cache write logic here
  }

  get(
    key: string,
  ): Promise<string | null | undefined> | string | null | undefined {
    // insert your cache read logic here
  }
}
```

or

```
function MyCustomCache() {}

MyCustomCache.prototype.set = function (key, value) {
  // insert your cache write logic here
};
MyCustomCache.prototype.get = function (key) {
  // insert your cache read logic here
};
```

then

```
<ConfigCatProvider
  sdkKey="YOUR_SDK_KEY"
  pollingMode={PollingMode.ManualPoll}
  options={{ cache: new MyCustomCache() }}
>
  ...
</ConfigCatProvider>
```

info

The React SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is downloading a [config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the *ConfigCat SDK* that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Using multiple providers[â](#using-multiple-providers "Direct link to Using multiple providers")

`ConfigCatProvider` allows you to access the feature flags of a specific Config, identified by the `sdkKey` parameter. (More precisely, `sdkKey` identifies a combination of a Config and an Environment.)

However, in some cases, you may want to access feature flags from multiple Configs in your application. To do this, you will need to use multiple `ConfigCatProvider`s â each associated with a specific Config by providing the corresponding `sdkKey`.

It's also important to keep in mind that `useFeatureFlag` calls will default to using the nearest `ConfigCatProvider`, similar to how React's [useContext](https://react.dev/learn/passing-data-deeply-with-context) works.

So, when working with multiple providers, it may be necessary to differentiate between them. You can achieve this by assigning a unique `id` to each provider. (Note that the absence of `id` also acts as a unique identifier.)

Then, by passing the provider id in your `useFeatureFlag`, `useConfigCatClient`, or similar calls, you can explicitly specify which provider (i.e. which `sdkKey`, and ultimately which Config and Environment) to use.

```
const CC_PROVIDER_ID_COMMON = "COMMON";
const CC_PROVIDER_ID_FRONTEND = "FRONTEND";

<ConfigCatProvider sdkKey="#YOUR_COMMON_SDK_KEY#" id={CC_PROVIDER_ID_COMMON}> 
  <ConfigCatProvider sdkKey="#YOUR_FRONTEND_SDK_KEY#" id={CC_PROVIDER_ID_FRONTEND}>
      ...
      const myFeatureInCommon = useFeatureFlag("myFeatureInCommon", false, void 0, CC_PROVIDER_ID_COMMON)

      const myFeatureInFrontEnd = useFeatureFlag("myFeatureInFrontEnd", false, void 0, CC_PROVIDER_ID_FRONTEND)
      ...
  </ConfigCatProvider>
</ConfigCatProvider>
```

When you are using multiple providers and they are not nested, it is not necessary to specify the `id` attribute:

```
<ConfigCatProvider sdkKey="#YOUR_COMMON_SDK_KEY#">
  ...
  const myFeatureInCommon = useFeatureFlag("myFeatureInCommon", false);
  ...
</ConfigCatProvider>

<ConfigCatProvider sdkKey="#YOUR_FRONTEND_SDK_KEY#">
  ...
  const myFeatureInFrontEnd = useFeatureFlag("myFeatureInFrontEnd", false);
  ...
</ConfigCatProvider>
```

If you are using higher order components, you can set the `providerId` parameter in the `withConfigCatClient` function.

## Sample Application[â](#sample-application "Direct link to Sample Application")

* [React](https://github.com/configcat/react-sdk/tree/main/samples/react-sdk-sample)

## Guides[â](#guides "Direct link to Guides")

See [this](https://configcat.com/blog/2022/09/22/configcat-react-sdk-announcement/) guide on how to use ConfigCat's React SDK.

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat React SDK on GitHub](https://github.com/configcat/react-sdk)
* [ConfigCat React SDK in NPM](https://www.npmjs.com/package/configcat-react)


---

# Ruby SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/ruby-sdk.svg?style=social)](https://github.com/configcat/ruby-sdk/stargazers) [![Ruby CI](https://github.com/configcat/ruby-sdk/actions/workflows/ruby-ci.yml/badge.svg?branch=master)](https://github.com/configcat/ruby-sdk/actions/workflows/ruby-ci.yml) [![Coverage Status](https://coveralls.io/repos/github/configcat/ruby-sdk/badge.svg?branch=master)](https://coveralls.io/github/configcat/ruby-sdk?branch=master) [![Gem version](https://badge.fury.io/rb/configcat.svg)](https://rubygems.org/gems/configcat)

[ConfigCat Ruby SDK on GitHub](https://github.com/configcat/ruby-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install *ConfigCat SDK*[â](#1-install-configcat-sdk "Direct link to 1-install-configcat-sdk")

```
gem install configcat
```

### 2. Import the package[â](#2-import-the-package "Direct link to 2. Import the package")

```
require 'configcat'
```

### 3. Create the *ConfigCat* client with your *SDK Key*[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3-create-the-configcat-client-with-your-sdk-key")

```
client = ConfigCat.get('#YOUR-SDK-KEY#')
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

```
is_my_awesome_feature_enabled = client.get_value('isMyAwesomeFeatureEnabled', false)
if is_my_awesome_feature_enabled
    do_the_new_thing
else
    do_the_old_thing
end
```

### 5. Stop *ConfigCat* client[â](#5-stop-configcat-client "Direct link to 5-stop-configcat-client")

You can safely shut down all clients at once or individually and release all associated resources on application exit.

```
ConfigCat.close_all # closes all clients

client.close # closes a specific client
```

## Creating the *ConfigCat Client*[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`ConfigCat.get('#YOUR-SDK-KEY#')` returns a client with default options.

| Client options         | Description                                                                                                                                                                                                                                                                                          | Default                |
| ---------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |
| `base_url`             | Sets the CDN base url (forward proxy, dedicated subscription) from where the sdk will download the config JSON.                                                                                                                                                                                      | nil                    |
| `polling_mode`         | Sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                    | PollingMode.auto\_poll |
| `config_cache`         | Sets a custom config cache implementation for the client. [More about cache](#custom-cache).                                                                                                                                                                                                         | nil                    |
| `proxy_address`        | Sets custom proxy address for the client. [More about proxy](#using-configcat-behind-a-proxy).                                                                                                                                                                                                       | nil                    |
| `proxy_port`           | Sets custom proxy port for the client. [More about proxy](#using-configcat-behind-a-proxy).                                                                                                                                                                                                          | nil                    |
| `proxy_user`           | Sets custom proxy user for the client. [More about proxy](#using-configcat-behind-a-proxy).                                                                                                                                                                                                          | nil                    |
| `proxy_pass`           | Sets custom proxy password for the client. [More about proxy](#using-configcat-behind-a-proxy).                                                                                                                                                                                                      | nil                    |
| `open_timeout_seconds` | The number of seconds to wait for the server to make the initial connection (i.e. completing the TCP connection handshake).                                                                                                                                                                          | 10                     |
| `read_timeout_seconds` | The number of seconds to wait for the server to respond before giving up.                                                                                                                                                                                                                            | 30                     |
| `flag_overrides`       | Local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides)                                                                                                                                                                                                         | nil                    |
| `data_governance`      | Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `GLOBAL`, `EU_ONLY`. | `GLOBAL`               |
| `default_user`         | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                     | nil                    |
| `hooks`                | Used to subscribe events that the SDK sends in specific scenarios. [More about hooks](#hooks).                                                                                                                                                                                                       | nil                    |
| `offline`              | Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                   | false                  |

```
client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
        polling_mode: ConfigCat::PollingMode.auto_poll
    )
)
```

caution

We strongly recommend you to use the *ConfigCat Client* as a Singleton object in your application. The `ConfigCat.get` static factory method constructs singleton client instances for your SDK keys. These clients can be closed all at once with the `ConfigCat.close_all` method or individually with `client.close`.

## Anatomy of `get_value`[â](#anatomy-of-get_value "Direct link to anatomy-of-get_value")

| Parameters      | Description                                                                                                                                             |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`           | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `default_value` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`          | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
value = client.get_value(
    'keyOfMySetting', # Setting Key
    false, # Default value
    ConfigCat::User.new('#UNIQUE-USER-IDENTIFIER#') # Optional User Object
);
```

## Anatomy of `get_value_details`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`get_value_details` is similar to `get_value` but instead of returning the evaluated value only, it gives an *EvaluationDetails* object with more detailed information about the evaluation result.

| Parameters      | Description                                                                                                                                             |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`           | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `default_value` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`          | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
details = client.get_value_details(
    'keyOfMySetting', # Setting Key
    false, # Default value
    ConfigCat::User.new('#UNIQUE-USER-IDENTIFIER#') # Optional User Object
);
```

The details result contains the following information:

| Property                    | Description                                                                                                |
| --------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `value`                     | The evaluated value of the feature flag or setting.                                                        |
| `key`                       | The key of the evaluated feature flag or setting.                                                          |
| `is_default_value`          | True when the default value passed to `get_value_details()` is returned due to an error.                   |
| `error`                     | In case of an error, this property contains the error message.                                             |
| `user`                      | The User Object that was used for evaluation.                                                              |
| `matched_targeting_rule`    | The targeting rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matched_percentage_option` | The percentage option (if any) that was used to select the evaluated value.                                |
| `fetch_time`                | The last download time (UTC *Time*) of the current config.                                                 |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
user_object = ConfigCat::User.new('#UNIQUE-USER-IDENTIFIER#')
```

```
user_object = ConfigCat::User.new('john@example.com')
```

### Customized User Object creation[â](#customized-user-object-creation "Direct link to Customized User Object creation")

| Parameters   | Description                                                                                                                 |
| ------------ | --------------------------------------------------------------------------------------------------------------------------- |
| `identifier` | **REQUIRED.** Unique identifier of a user in your application. Can be any `String` value, even an email address.            |
| `email`      | Optional parameter for easier Targeting Rule definitions.                                                                   |
| `country`    | Optional parameter for easier Targeting Rule definitions.                                                                   |
| `custom`     | Optional `Hash` for custom attributes of a user for advanced Targeting Rule definitions. e.g. User role, Subscription type. |

```
user_object = ConfigCat::User.new('#UNIQUE-USER-IDENTIFIER#', email: 'john@example', country: 'United Kingdom',
                custom: {'SubscriptionType' => 'Pro', 'UserRole' => 'Admin'})
```

The `custom` Hash also allows attribute values other than `String` values:

```
user_object = ConfigCat::User.new(
    '#UNIQUE-USER-IDENTIFIER#',
    custom: {
        'Rating' => 4.5,
        'RegisteredAt' => DateTime.iso8601('2023-11-22T12:34:56+00:00'),
        'Roles' => ['Role1', 'Role2']
    }
)
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `String` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (EQUALS, IS\_ONE\_OF, etc.)

* accept `String` values,
* all other values are automatically converted to `String` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (IS\_ONE\_OF\_SEMVER, LESS\_THAN\_SEMVER, GREATER\_THAN\_SEMVER, etc.)

* accept `String` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Number-based comparators** (EQUALS\_NUMBER, LESS\_THAN\_NUMBER, GREATER\_THAN\_OR\_EQUAL\_NUMBER, etc.)

* accept `Float` values and all other numeric values which can safely be converted to `Float`,
* accept `String` values containing a properly formatted, valid `Float` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**Date time-based comparators** (BEFORE\_DATETIME / AFTER\_DATETIME)

* accept `DateTime` values, which are automatically converted to a second-based Unix timestamp (`DateTime` values with naive timezone are considered to be in UTC),
* accept `Float` values representing a second-based Unix timestamp and all other numeric values which can safely be converted to `Float`,
* accept `String` values containing a properly formatted, valid `Float` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

**String array-based comparators** (ARRAY\_CONTAINS\_ANY\_OF / ARRAY\_NOT\_CONTAINS\_ANY\_OF)

* accept arrays of `String`,
* accept `String` values containing a valid JSON string which can be deserialized to an array of `String`,
* all other values are considered invalid (a warning will be logged and the currently evaluated Targeting Rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object either on SDK initialization:

```
client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
        default_user: ConfigCat::User.new('john@example.com')
    )
)
```

or with the `set_default_user` method of the ConfigCat client.

```
client.set_default_user(ConfigCat::User.new('john@example.com'))
```

Whenever the `get_value`, `get_value_details`, `get_variation_id`, `get_all_variation_ids`, or `get_all_values` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
        default_user: ConfigCat::User.new('john@example.com')
    )
)
# The default user will be used at the evaluation process.
value = client.get_value('keyOfMySetting', false)
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

```
client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
        default_user: ConfigCat::User.new('john@example.com')
    )
)
other_user = ConfigCat::User.new('brian@example.com')
# otherUser will be used at the evaluation process.
value = client.get_value('keyOfMySetting', false, other_user)
```

For deleting the default user, you can do the following:

```
client.clear_default_user
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `get_value()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

Use the `poll_interval_seconds` option parameter to change the polling interval.

```
client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
      polling_mode: ConfigCat::PollingMode.auto_poll(poll_interval_seconds: 95)
    )
)
```

Available options:

| Option Parameter             | Description                                                                                          | Default |
| ---------------------------- | ---------------------------------------------------------------------------------------------------- | ------- |
| `poll_interval_seconds`      | Polling interval.                                                                                    | 60      |
| `max_init_wait_time_seconds` | Maximum waiting time between the client initialization and the first config acquisition in secconds. | 5       |

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `get_value`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `get_value` will return the setting value after the cache is updated.

Use `cache_refresh_interval_seconds` option parameter to set cache lifetime.

```
client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
      polling_mode: ConfigCat::PollingMode.lazy_load(cache_refresh_interval_seconds: 600)
    )
)
```

Available options:

| Option Parameter                 | Description | Default |
| -------------------------------- | ----------- | ------- |
| `cache_refresh_interval_seconds` | Cache TTL.  | 60      |

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `force_refresh` is your application's responsibility.

```
client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
      polling_mode: ConfigCat::PollingMode.manual_poll
    )
)
client.force_refresh
```

> `get_value` returns `default_value` if the cache is empty. Call `force_refresh` to update the cache.

```
client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
      polling_mode: ConfigCat::PollingMode.manual_poll
    )
)

value = client.get_value("key", "my default value") # Returns "my default value"
client.force_refresh
value = client.get_value("key", "my default value") # Returns "value from server"
```

## Hooks[â](#hooks "Direct link to Hooks")

The SDK provides several hooks (events), by means of which you can get notified of its actions. You can subscribe to the following events emitted by the *ConfigCat* client:

* `on_client_ready`: This event is emitted when the client reaches the ready state, i.e. completes initialization.

  * If Lazy Loading or Manual Polling is used, it's considered ready right after instantiation.

  * If Auto Polling is used, the ready state is reached as soon as

    <!-- -->

    * the initial sync with the external cache yields up-to-date config data,
    * otherwise, if the client is online (i.e. HTTP requests are allowed), the first config fetch operation completes (regardless of success or failure),
    * or the time specified via Auto Polling's `max_init_wait_time_seconds` option has passed.

  Reaching the ready state usually means the client is ready to evaluate feature flags and settings. However, please note that this is not guaranteed. In case of initialization failure or timeout, the internal cache may be empty or expired even after the ready state is reported. Alternatively, in Auto Polling mode, you can wait for the first `onConfigChanged` event to be notified when the internal cache is actually populated with config data.

* `on_config_changed(config: Hash)`: This event is emitted first when the client's internal cache gets populated. Afterwards, it is emitted again each time the internally cached config is updated to a newer version, either as a result of synchronization with the external cache, or as a result of fetching a newer version from the ConfigCat CDN.

* `on_flag_evaluated(evaluation_details: EvaluationDetails)`: This event is emitted each time the client evaluates a feature flag or setting. The event provides the same evaluation details that you would get from [`get_value_details`](#anatomy-of-getvaluedetails).

* `on_error(error: String)`: This event is emitted when an error occurs within the client.

You can subscribe to these events either on SDK initialization:

```
def on_flag_evaluated(evaluation_details)
    # handle the event
end

client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
        hooks: ConfigCat::Hooks.new(on_flag_evaluated: method(:on_flag_evaluated))
    )
)
```

or with the `hooks` property of the ConfigCat client:

```
client.hooks.add_on_flag_evaluated(method(:on_flag_evaluated))
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode:

```
client.set_offline
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can do the following:

```
client.set_online
```

> With `client.offline?` you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`ConfigCat::OverrideBehaviour::LOCAL_ONLY`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`ConfigCat::OverrideBehaviour::LOCAL_OVER_REMOTE`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`ConfigCat::OverrideBehaviour::REMOTE_OVER_LOCAL`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a file or a hash.

### JSON File[â](#json-file "Direct link to JSON File")

The SDK can be load your feature flag & setting overrides from a file.

#### File[â](#file "Direct link to File")

```
client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
        flag_overrides: ConfigCat::LocalFileFlagOverrides.new(
            'path/to/the/local_flags.json',  # path to the file
            ConfigCat::OverrideBehaviour::LOCAL_ONLY
        )
    )
)
```

#### JSON File Structure[â](#json-file-structure "Direct link to JSON File Structure")

The SDK supports 2 types of JSON structures to describe feature flags & settings.

##### 1. Simple (key-value) structure[â](#1-simple-key-value-structure "Direct link to 1. Simple (key-value) structure")

```
{
  "flags": {
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
  }
}
```

##### 2. Complex (full-featured) structure[â](#2-complex-full-featured-structure "Direct link to 2. Complex (full-featured) structure")

This is the same format that the SDK downloads from the ConfigCat CDN. It allows the usage of all features that are available on the ConfigCat Dashboard.

You can download your current config JSON from ConfigCat's CDN and use it as a baseline.

A convenient way to get the config JSON for a specific SDK Key is to install the [ConfigCat CLI](https://github.com/configcat/cli) tool and execute the following command:

```
configcat config-json get -f v6 -p {YOUR-SDK-KEY} > config.json
```

(Depending on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings, you may need to add the `--eu` switch.)

Alternatively, you can download the config JSON manually, based on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings:

* GLOBAL: `https://cdn-global.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`
* EU: `https://cdn-eu.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`

```
{
  "p": {
    // hash salt, required only when confidential text comparator(s) are used
    "s": "80xCU/SlDz1lCiWFaxIBjyJeJecWjq46T4eu6GtozkM="
  },
  "s": [ // array of segments
    {
      "n": "Beta Users", // segment name
      "r": [ // array of User Conditions (there is a logical AND relation between the elements)
        {
          "a": "Email", // comparison attribute
          "c": 0, // comparator (see below)
          "l": [ // comparison value (see below)
            "john@example.com", "jane@example.com"
          ]
        }
      ]
    }
  ],
  "f": { // key-value map of feature flags & settings
    "isFeatureEnabled": { // key of a particular flag / setting
      "t": 0, // setting type, possible values:
              // 0 -> on/off setting (feature flag)
              // 1 -> text setting
              // 2 -> whole number setting
              // 3 -> decimal number setting
      "r": [ // array of Targeting Rules (there is a logical OR relation between the elements)
        {
          "c": [ // array of conditions (there is a logical AND relation between the elements)
            {
              "u": { // User Condition
                "a": "Email", // comparison attribute
                "c": 2, // comparator, possible values and required comparison value types:
                        // 0  -> IS ONE OF (cleartext) + string array comparison value ("l")
                        // 1  -> IS NOT ONE OF (cleartext) + string array comparison value ("l")
                        // 2  -> CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 3  -> NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 4  -> IS ONE OF (semver) + semver string array comparison value ("l")
                        // 5  -> IS NOT ONE OF (semver) + semver string array comparison value ("l")
                        // 6  -> < (semver) + semver string comparison value ("s")
                        // 7  -> <= (semver + semver string comparison value ("s")
                        // 8  -> > (semver) + semver string comparison value ("s")
                        // 9  -> >= (semver + semver string comparison value ("s")
                        // 10 -> = (number) + number comparison value ("d")
                        // 11 -> <> (number + number comparison value ("d")
                        // 12 -> < (number) + number comparison value ("d")
                        // 13 -> <= (number + number comparison value ("d")
                        // 14 -> > (number) + number comparison value ("d")
                        // 15 -> >= (number) + number comparison value ("d")
                        // 16 -> IS ONE OF (hashed) + string array comparison value ("l")
                        // 17 -> IS NOT ONE OF (hashed) + string array comparison value ("l")
                        // 18 -> BEFORE (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 19 -> AFTER (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 20 -> EQUALS (hashed) + string comparison value ("s")
                        // 21 -> NOT EQUALS (hashed) + string comparison value ("s")
                        // 22 -> STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 23 -> NOT STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 24 -> ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 25 -> NOT ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 26 -> ARRAY CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 27 -> ARRAY NOT CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 28 -> EQUALS (cleartext) + string comparison value ("s")
                        // 29 -> NOT EQUALS (cleartext) + string comparison value ("s")
                        // 30 -> STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 31 -> NOT STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 32 -> ENDS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 33 -> NOT ENDS WITH ANY OF (cleartext + string array comparison value ("l")
                        // 34 -> ARRAY CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 35 -> ARRAY NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                "l": [ // comparison value - depending on the comparator, another type of value may need
                       // to be specified (see above):
                       // "s": string
                       // "d": number
                  "@example.com"
                ]
              }
            },
            {
              "p": { // Flag Condition (Prerequisite)
                "f": "mainIntFlag", // key of prerequisite flag
                "c": 0, // comparator, possible values: 0 -> EQUALS, 1 -> NOT EQUALS
                "v": { // comparison value (value's type must match the prerequisite flag's type)
                  "i": 42
                }
              }
            },
            {
              "s": { // Segment Condition
                "s": 0, // segment index, a valid index into the top-level segment array ("s")
                "c": 1 // comparator, possible values: 0 -> IS IN SEGMENT, 1 -> IS NOT IN SEGMENT
              }
            }
          ],
          "s": { // alternatively, an array of Percentage Options ("p", see below) can also be specified
            "v": { // the value served when the rule is selected during evaluation
              "b": true
            },
            "i": "bcfb84a7"
          }
        }
      ],
      "p": [ // array of Percentage Options
        {
          "p": 10, // % value
          "v": { // the value served when the Percentage Option is selected during evaluation
            "b": true
          },
          "i": "bcfb84a7"
        },
        {
          "p": 90,
          "v": {
            "b": false
          },
          "i": "bddac6ae"
        }
      ],
      "v": { // fallback value, served when none of the Targeting Rules match,
             // no Percentage Options are defined or evaluation of these is not possible
        "b": false // depending on the setting type, another type of value may need to be specified:
                   // text setting -> "s": string
                   // whole number setting -> "i": number
                   // decimal number setting -> "d": number
      },
      "i": "430bded3" // variation id (for analytical purposes)
    }
  }
}
```

For a more comprehensive specification of the config JSON v6 format, you may refer to [this JSON schema document](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

### Hash[â](#hash "Direct link to Hash")

You can set up the SDK to load your feature flag & setting overrides from a hash.

```
dictionary = {
    "enabledFeature" => true,
    "disabledFeature" => false,
    "intSetting" => 5,
    "doubleSetting" => 3.14,
    "stringSetting" => "test"
}

client = ConfigCat.get('#YOUR-SDK-KEY#',
    ConfigCat::ConfigCatOptions.new(
        flag_overrides: ConfigCat::LocalDictionaryFlagOverrides.new(dictionary, ConfigCat::OverrideBehaviour::LOCAL_ONLY)
    )
)
```

## Logging[â](#logging "Direct link to Logging")

In the *ConfigCat SDK*, a default logger writes logs to the standard output. The following example shows how to set the *Log Level* of the default logger.

```
ConfigCat.logger.level = Logger::INFO
```

Available log levels:

| Level | Description                                                                             |
| ----- | --------------------------------------------------------------------------------------- |
| ERROR | Only error level events are logged.                                                     |
| WARN  | Default. Errors and Warnings are logged.                                                |
| INFO  | Errors, Warnings and feature flag evaluation is logged.                                 |
| DEBUG | All of the above plus debug info is logged. Debug logs can be different for other SDKs. |

Info level logging helps to inspect the feature flag evaluation process:

```
INFO:configcat:[5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

You can easily replace the default logger with your own one. The following example shows how to set a logger writes logs into a text file.

```
ConfigCat.logger = Logger.new('log.txt')
```

## `get_all_keys`[â](#get_all_keys "Direct link to get_all_keys")

You can get the keys for all available feature flags and settings by calling the `get_all_keys` method.

```
client = ConfigCat.get('#YOUR-SDK-KEY#')
keys = client.get_all_keys
```

## `get_all_values`[â](#get_all_values "Direct link to get_all_values")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

| Parameters | Description                                                                                                                                             |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `user`     | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
client = ConfigCat.get('#YOUR-SDK-KEY#')
setting_values = client.get_all_values(ConfigCat::User.new('#UNIQUE-USER-IDENTIFIER#'))  # Optional User Object
```

## `get_all_value_details`[â](#get_all_value_details "Direct link to get_all_value_details")

Evaluates and returns the detailed values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
client = ConfigCat.get('#YOUR-SDK-KEY#')
all_value_details = client.get_all_value_details(ConfigCat::User.new('#UNIQUE-USER-IDENTIFIER#'))  # Optional User Object
```

## Custom cache[â](#custom-cache "Direct link to Custom cache")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`ConfigCache`](https://github.com/configcat/ruby-sdk/blob/master/lib/configcat/interfaces.rb) interface and set the `config_cache` parameter in the options passed to `ConfigCat.get`. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

You have the option to inject your custom cache implementation into the client. All you have to do is to inherit from the ConfigCache abstract class:

```
class InMemoryConfigCache < ConfigCat::ConfigCache
    attr_reader :value
    def initialize
        @value = {}
    end

    def get(key)
        # you should return the cached value
        return @value.fetch(key, nil)
    end

    def set(key, value)
        # you should cache the new value
        @value[key] = value
    end
end
```

Then use your custom cache implementation:

```
client = ConfigCat.get('#YOUR-SDK-KEY#',
      ConfigCat::ConfigCatOptions.new(
        config_cache: InMemoryConfigCache.new
    )
)
```

info

The Ruby SDK supports *shared caching*. You can read more about this feature and the required minimum SDK versions [here](https://configcat.com/docs/docs/advanced/caching/.md#shared-cache).

## Force refresh[â](#force-refresh "Direct link to Force refresh")

Call the `force_refresh` method on the client to download the latest config JSON and update the cache.

## Using ConfigCat behind a proxy[â](#using-configcat-behind-a-proxy "Direct link to Using ConfigCat behind a proxy")

Provide your own network credentials (username/password), and proxy server settings (proxy server/port) by passing the proxy details to the creator method.

```
configcat_client = ConfigCat.get("#YOUR-SDK-KEY#",
    ConfigCat::ConfigCatOptions.new(
        proxy_address: "127.0.0.1",
        proxy_port: 8080,
        proxy_user: "user",
        proxy_pass: "password"
    )
)
```

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

* [Sample Console App](https://github.com/configcat/ruby-sdk/tree/master/samples/consolesample.rb)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat's Ruby SDK on GitHub](https://github.com/configcat/ruby-sdk)
* [ConfigCat's Ruby SDK in RubyGems](https://rubygems.org/gems/configcat)


---

# Rust SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/rust-sdk.svg?style=social)](https://github.com/configcat/rust-sdk/stargazers) [![Build Status](https://github.com/configcat/rust-sdk/actions/workflows/ci.yml/badge.svg?branch=main)](https://github.com/configcat/rust-sdk/actions/workflows/ci.yml) [![crates.io](https://img.shields.io/crates/v/configcat.svg?logo=rust)](https://crates.io/crates/configcat) [![docs.rs](https://img.shields.io/badge/docs.rs-configcat-66c2a5?logo=docs.rs)](https://docs.rs/configcat)

[ConfigCat Rust SDK on GitHub](https://github.com/configcat/rust-sdk)

## Getting started[â](#getting-started "Direct link to Getting started")

### 1. Install the package[â](#1-install-the-package "Direct link to 1. Install the package")

Run the following Cargo command in your project directory:

```
cargo add configcat
```

Or add the following to your `Cargo.toml`:

```
[dependencies]
configcat = "0.1"
```

### 2. Import the `configcat` module to your application[â](#2-import-the-configcat-module-to-your-application "Direct link to 2-import-the-configcat-module-to-your-application")

```
use configcat::*;
```

### 3. Create the *ConfigCat* client with your *SDK Key*[â](#3-create-the-configcat-client-with-your-sdk-key "Direct link to 3-create-the-configcat-client-with-your-sdk-key")

```
use configcat::*;

#[tokio::main]
async fn main() {
    let client = Client::new("#YOUR-SDK-KEY#").unwrap();
}
```

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

```
use configcat::*;

#[tokio::main]
async fn main() {
    let client = Client::new("#YOUR-SDK-KEY#").unwrap();

    let is_awesome_feature_enabled = client.get_value("isAwesomeFeatureEnabled", false, None).await;
    
    if is_awesome_feature_enabled {
        do_the_new_thing();
    } else {
        do_the_old_thing();
    }
}
```

## Creating the *ConfigCat Client*[â](#creating-the-configcat-client "Direct link to creating-the-configcat-client")

*ConfigCat Client* is responsible for:

* managing the communication between your application and ConfigCat servers.
* caching your setting values and feature flags.
* serving values quickly in a failsafe way.

`Client::new(<sdk_key>)` returns a client with default options.

| Arguments | Description                                                                               |
| --------- | ----------------------------------------------------------------------------------------- |
| `sdk_key` | SDK Key to access your feature flags and settings. Get it from the *ConfigCat Dashboard*. |

### Custom client options[â](#custom-client-options "Direct link to Custom client options")

`Client::builder(<sdk_key>)` returns a builder used to construct a customized client.

```
use std::time::Duration;
use configcat::{Client, PollingMode, DataGovernance};

let builder = Client::builder("#YOUR-SDK-KEY#")
    .polling_mode(PollingMode::AutoPoll(Duration::from_secs(60)))
    .data_governance(DataGovernance::EU);

let client = builder.build().unwrap();
```

Available options:

| Option                                                     | Description                                                                                                                                                                                                                                                                                                               |
| ---------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `data_governance(DataGovernance)`                          | Defaults to `Global`. Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `Global`, `EuOnly`. |
| `base_url(&str)`                                           | Sets the CDN base url (forward proxy, dedicated subscription) from where the sdk will download the configurations.                                                                                                                                                                                                        |
| `cache(Box<dyn ConfigCache>)`                              | Sets a custom cache implementation for the client. [See below](#cache).                                                                                                                                                                                                                                                   |
| `http_timeout(Duration)`                                   | Sets the maximum wait time for a HTTP response. [More about the HTTP timeout](#http-timeout)                                                                                                                                                                                                                              |
| `polling_mode(PollingMode)`                                | Defaults to `AutoPoll`. Sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                 |
| `overrides(Box<dyn OverrideDataSource>, OverrideBehavior)` | Sets the local feature flag & setting overrides. [More about feature flag overrides](#flag-overrides).                                                                                                                                                                                                                    |
| `default_user(User)`                                       | Sets the default user. [More about default user](#default-user).                                                                                                                                                                                                                                                          |
| `offline(bool)`                                            | Defaults to `false`. Indicates whether the SDK should be initialized in offline mode. [More about offline mode](#online--offline-mode).                                                                                                                                                                                   |

caution

We strongly recommend you to use the *ConfigCat Client* as a Singleton object in your application. If you want to use multiple SDK Keys in the same application, create only one *ConfigCat Client* per SDK Key.

## Anatomy of `get_value()`[â](#anatomy-of-get_value "Direct link to anatomy-of-get_value")

| Parameters | Description                                                                                                                                             |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`      | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `default`  | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`     | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
let is_awesome_feature_enabled = client.get_value(
    "isAwesomeFeatureEnabled", // Setting Key
    false, // Default value
    Some(User::new("#UNIQUE-USER-IDENTIFIER#")) // Optional User Object
).await;
```

caution

It is important to provide an argument for the `default` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to the following table for the corresponding types.

### Setting type mapping[â](#setting-type-mapping "Direct link to Setting type mapping")

| Setting Kind   | Type parameter `T` |
| -------------- | ------------------ |
| On/Off Toggle  | `bool`             |
| Text           | `String`           |
| Whole Number   | `i64`              |
| Decimal Number | `f64`              |

If you specify an allowed type but it mismatches the setting kind, an error message will be logged and `default` will be returned.

When relying on type inference and not explicitly specifying the type parameter, be mindful of potential type mismatch issues, especially with number types. For example, `client.get_value("keyOfMyDecimalSetting", 0, None).await` will return `default` (`0`) instead of the actual value of the decimal setting because the compiler infers the type as `i64` instead of `f64`, that is, the call is equivalent to `client.get_value::<i64>("keyOfMyDecimalSetting", 0, None).await`, which is a type mismatch.

To correctly evaluate a decimal setting, you should use:

```
let value = client.get_value("keyOfMyDecimalSetting", 0.0, None).await;
// -or-
let value = client.get_value("keyOfMyDecimalSetting", 0_f64, None).await;
```

## Anatomy of `get_value_details()`[â](#anatomy-of-get_value_details "Direct link to anatomy-of-get_value_details")

`get_value_details()` is similar to `get_value()` but instead of returning the evaluated value only, it provides more detailed information about the evaluation result.

| Parameters | Description                                                                                                                                             |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `key`      | **REQUIRED.** Setting-specific key. Set on *ConfigCat Dashboard* for each setting.                                                                      |
| `default`  | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `user`     | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

```
let user = User::new("#UNIQUE-USER-IDENTIFIER#"); // Optional User Object
let details = client.get_value_details("keyOfMyFeatureFlag", false, Some(user)).await;
```

caution

It is important to provide an argument for the `default` parameter, specifically for the `T` generic type parameter, that matches the type of the feature flag or setting you are evaluating. Please refer to [this table](#setting-type-mapping) for the corresponding types.

The `details` result contains the following information:

| Field                       | Type                              | Description                                                                                                |
| --------------------------- | --------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| `key`                       | `String`                          | The key of the evaluated feature flag or setting.                                                          |
| `value`                     | `bool` / `String` / `i64` / `f64` | The evaluated value of the feature flag or setting.                                                        |
| `user`                      | `Option<User>`                    | The User Object used for the evaluation.                                                                   |
| `is_default_value`          | `bool`                            | True when the default value passed to `GetValueDetailsAsync()` is returned due to an error.                |
| `error`                     | `Option<ClientError>`             | In case of an error, this field contains the related error structure.                                      |
| `matched_targeting_rule`    | `Option<Arc<TargetingRule>>`      | The Targeting Rule (if any) that matched during the evaluation and was used to return the evaluated value. |
| `matched_percentage_option` | `Option<Arc<PercentageOption>>`   | The Percentage Option (if any) that was used to select the evaluated value.                                |
| `fetch_time`                | `Option<DateTime<Utc>>`           | The last download time (UTC) of the current config.                                                        |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

```
let user = User::new("#UNIQUE-USER-IDENTIFIER#");
```

```
let user = User::new("john@example.com");
```

| Option                          | Description                                                                                                      |
| ------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| `new(<identifier>)`             | **REQUIRED.** Unique identifier of a user in your application. Can be any `string` value, even an email address. |
| `email(&str)`                   | Optional email address for easier Targeting Rule definitions.                                                    |
| `country(&str)`                 | Optional country for easier Targeting Rule definitions.                                                          |
| `custom(&str, Into<UserValue>)` | Optional custom attribute of a user for advanced Targeting Rule definitions. E.g. User role, Subscription type.  |

```
let user = new User("#UNIQUE-USER-IDENTIFIER#")
    .email("john@example.com")
    .country("United Kingdom")
    .custom("SubscriptionType", "Pro")
    .custom("UserRole", "Admin");
```

The `custom()` method allows attribute values other than `String`:

```
let user = new User("#UNIQUE-USER-IDENTIFIER#")
    .custom("Rating", 4.5)
    .custom("RegisteredAt", DateTime::from_str("2023-06-14T15:27:15.8440000Z").unwrap())
    .custom("Roles", ["Role1", "Role2"]);
```

### User Object Attribute Types[â](#user-object-attribute-types "Direct link to User Object Attribute Types")

All comparators support `String` values as User Object attribute (in some cases they need to be provided in a specific format though, see below), but some of them also support other types of values. It depends on the comparator how the values will be handled. The following rules apply:

**Text-based comparators** (`EQUALS`, `IS ONE OF`, etc.)

* accept `String` values,
* all other values are automatically converted to `String` (a warning will be logged but evaluation will continue as normal).

**SemVer-based comparators** (`IS ONE OF`, `<`, `>=`, etc.)

* accept `String` values containing a properly formatted, valid semver value,
* all other values are considered invalid (a warning will be logged and the currently evaluated targeting rule will be skipped).

**Number-based comparators** (`=`, `<`, `>=`, etc.)

* accept `Int`, `UInt`, or `Float` values,
* accept `String` values containing a properly formatted, valid `Float` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated targeting rule will be skipped).

**Date time-based comparators** (`BEFORE` / `AFTER`)

* accept `DateTime` values, which are automatically converted to a second-based Unix timestamp,
* accept `Int`, `UInt`, or `Float` values representing a second-based Unix timestamp,
* accept `String` values containing a properly formatted, valid `Float` value,
* all other values are considered invalid (a warning will be logged and the currently evaluated targeting rule will be skipped).

**String array-based comparators** (`ARRAY CONTAINS ANY OF` / `ARRAY NOT CONTAINS ANY OF`)

* accept `Vec` of `String`s,
* accept `String` values containing a valid JSON string which can be deserialized to an array of `String`,
* all other values are considered invalid (a warning will be logged and the currently evaluated targeting rule will be skipped).

### Default user[â](#default-user "Direct link to Default user")

It's possible to set a default User Object that will be used on feature flag and setting evaluation. It can be useful when your application has a single user only or rarely switches users.

You can set the default User Object either on SDK initialization:

```
let client = Client::builder("#YOUR-SDK-KEY#")
    .default_user(User::new("john@example.com"))
    .build()
    .unwrap();
```

...or using the `set_default_user()` method of the `configcat::Client`:

```
client.set_default_user(User::new("john@example.com"));
```

Whenever the evaluation methods like `get_value()`, `get_value_details()`, etc. are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

```
let client = Client::builder("#YOUR-SDK-KEY#")
    .default_user(User::new("john@example.com"))
    .build()
    .unwrap();

// The default user will be used in the evaluation process.
let value = client.get_value("keyOfMyFeatureFlag", false, None).await;
```

When a `user` parameter is passed to the evaluation methods, it takes precedence over the default user.

```
let client = Client::builder("#YOUR-SDK-KEY#")
    .default_user(User::new("john@example.com"))
    .build()
    .unwrap();

let other_user = User::new("brian@example.com");

// other_user will be used in the evaluation process.
let value = client.get_value("keyOfMyFeatureFlag", false, Some(other_user)).await;
```

You can also remove the default user by doing the following:

```
client.clear_default_user();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `get_value()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle. [More about polling modes & caching](https://configcat.com/docs/docs/advanced/caching/.md).

When no polling mode is specified upon SDK initialization, `AutoPoll` will be selected with a `60s` poll interval.

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically and stores it in the cache. The `Duration` parameter specifies how frequent the config JSON downloads will happen.

```
let client = Client::builder("#YOUR-SDK-KEY#")
    .polling_mode(PollingMode::AutoPoll(Duration::from_secs(60)))
    .build()
    .unwrap();
```

### Lazy loading[â](#lazy-loading "Direct link to Lazy loading")

When calling `get_value()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `get_value()` will return the setting value after the cache is updated. The `Duration` parameter specifies after how much time the cache is considered stale.

```
let client = Client::builder("#YOUR-SDK-KEY#")
    .polling_mode(PollingMode::LazyLoad(Duration::from_secs(60)))
    .build()
    .unwrap();
```

### Manual polling[â](#manual-polling "Direct link to Manual polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `refresh()` is your application's responsibility.

```
let client = Client::builder("#YOUR-SDK-KEY#")
    .polling_mode(PollingMode::Manual)
    .build()
    .unwrap();

_ = client.refresh().await;
```

> `get_value()` returns `default` if the cache is empty. Call `refresh()` to update the cache.

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases where you want to prevent the SDK from making HTTP calls, you can switch it to offline mode:

```
client.offline();
```

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To switch the SDK back to online mode, do the following:

```
client.online();
```

Using the `client.is_offline()` method, you can check whether the SDK is in offline mode.

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehavior::LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehavior::LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehavior::RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can load your feature flag & setting overrides from a file or from a simple `HashMap<String, configcat::Value>`.

### JSON File[â](#json-file "Direct link to JSON File")

The SDK can load your feature flag & setting overrides from a file.

#### File[â](#file "Direct link to File")

```
use configcat::{Client, FileDataSource, OverrideBehavior};

let file_ds = FileDataSource::new("path/to/local_flags.json").unwrap();

let client = Client::builder("localhost")
    .overrides(Box::new(file_ds), OverrideBehavior::LocalOnly)
    .build()
    .unwrap();
```

#### JSON File Structure[â](#json-file-structure "Direct link to JSON File Structure")

The SDK supports 2 types of JSON structures to describe feature flags & settings.

##### 1. Simple (key-value) structure[â](#1-simple-key-value-structure "Direct link to 1. Simple (key-value) structure")

```
{
  "flags": {
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
  }
}
```

##### 2. Complex (full-featured) structure[â](#2-complex-full-featured-structure "Direct link to 2. Complex (full-featured) structure")

This is the same format that the SDK downloads from the ConfigCat CDN. It allows the usage of all features that are available on the ConfigCat Dashboard.

You can download your current config JSON from ConfigCat's CDN and use it as a baseline.

A convenient way to get the config JSON for a specific SDK Key is to install the [ConfigCat CLI](https://github.com/configcat/cli) tool and execute the following command:

```
configcat config-json get -f v6 -p {YOUR-SDK-KEY} > config.json
```

(Depending on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings, you may need to add the `--eu` switch.)

Alternatively, you can download the config JSON manually, based on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings:

* GLOBAL: `https://cdn-global.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`
* EU: `https://cdn-eu.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`

```
{
  "p": {
    // hash salt, required only when confidential text comparator(s) are used
    "s": "80xCU/SlDz1lCiWFaxIBjyJeJecWjq46T4eu6GtozkM="
  },
  "s": [ // array of segments
    {
      "n": "Beta Users", // segment name
      "r": [ // array of User Conditions (there is a logical AND relation between the elements)
        {
          "a": "Email", // comparison attribute
          "c": 0, // comparator (see below)
          "l": [ // comparison value (see below)
            "john@example.com", "jane@example.com"
          ]
        }
      ]
    }
  ],
  "f": { // key-value map of feature flags & settings
    "isFeatureEnabled": { // key of a particular flag / setting
      "t": 0, // setting type, possible values:
              // 0 -> on/off setting (feature flag)
              // 1 -> text setting
              // 2 -> whole number setting
              // 3 -> decimal number setting
      "r": [ // array of Targeting Rules (there is a logical OR relation between the elements)
        {
          "c": [ // array of conditions (there is a logical AND relation between the elements)
            {
              "u": { // User Condition
                "a": "Email", // comparison attribute
                "c": 2, // comparator, possible values and required comparison value types:
                        // 0  -> IS ONE OF (cleartext) + string array comparison value ("l")
                        // 1  -> IS NOT ONE OF (cleartext) + string array comparison value ("l")
                        // 2  -> CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 3  -> NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 4  -> IS ONE OF (semver) + semver string array comparison value ("l")
                        // 5  -> IS NOT ONE OF (semver) + semver string array comparison value ("l")
                        // 6  -> < (semver) + semver string comparison value ("s")
                        // 7  -> <= (semver + semver string comparison value ("s")
                        // 8  -> > (semver) + semver string comparison value ("s")
                        // 9  -> >= (semver + semver string comparison value ("s")
                        // 10 -> = (number) + number comparison value ("d")
                        // 11 -> <> (number + number comparison value ("d")
                        // 12 -> < (number) + number comparison value ("d")
                        // 13 -> <= (number + number comparison value ("d")
                        // 14 -> > (number) + number comparison value ("d")
                        // 15 -> >= (number) + number comparison value ("d")
                        // 16 -> IS ONE OF (hashed) + string array comparison value ("l")
                        // 17 -> IS NOT ONE OF (hashed) + string array comparison value ("l")
                        // 18 -> BEFORE (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 19 -> AFTER (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 20 -> EQUALS (hashed) + string comparison value ("s")
                        // 21 -> NOT EQUALS (hashed) + string comparison value ("s")
                        // 22 -> STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 23 -> NOT STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 24 -> ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 25 -> NOT ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 26 -> ARRAY CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 27 -> ARRAY NOT CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 28 -> EQUALS (cleartext) + string comparison value ("s")
                        // 29 -> NOT EQUALS (cleartext) + string comparison value ("s")
                        // 30 -> STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 31 -> NOT STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 32 -> ENDS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 33 -> NOT ENDS WITH ANY OF (cleartext + string array comparison value ("l")
                        // 34 -> ARRAY CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 35 -> ARRAY NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                "l": [ // comparison value - depending on the comparator, another type of value may need
                       // to be specified (see above):
                       // "s": string
                       // "d": number
                  "@example.com"
                ]
              }
            },
            {
              "p": { // Flag Condition (Prerequisite)
                "f": "mainIntFlag", // key of prerequisite flag
                "c": 0, // comparator, possible values: 0 -> EQUALS, 1 -> NOT EQUALS
                "v": { // comparison value (value's type must match the prerequisite flag's type)
                  "i": 42
                }
              }
            },
            {
              "s": { // Segment Condition
                "s": 0, // segment index, a valid index into the top-level segment array ("s")
                "c": 1 // comparator, possible values: 0 -> IS IN SEGMENT, 1 -> IS NOT IN SEGMENT
              }
            }
          ],
          "s": { // alternatively, an array of Percentage Options ("p", see below) can also be specified
            "v": { // the value served when the rule is selected during evaluation
              "b": true
            },
            "i": "bcfb84a7"
          }
        }
      ],
      "p": [ // array of Percentage Options
        {
          "p": 10, // % value
          "v": { // the value served when the Percentage Option is selected during evaluation
            "b": true
          },
          "i": "bcfb84a7"
        },
        {
          "p": 90,
          "v": {
            "b": false
          },
          "i": "bddac6ae"
        }
      ],
      "v": { // fallback value, served when none of the Targeting Rules match,
             // no Percentage Options are defined or evaluation of these is not possible
        "b": false // depending on the setting type, another type of value may need to be specified:
                   // text setting -> "s": string
                   // whole number setting -> "i": number
                   // decimal number setting -> "d": number
      },
      "i": "430bded3" // variation id (for analytical purposes)
    }
  }
}
```

For a more comprehensive specification of the config JSON v6 format, you may refer to [this JSON schema document](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

### Map[â](#map "Direct link to Map")

You can set up the SDK to load your feature flag & setting overrides from a `HashMap<String, configcat::Value>`.

```
use configcat::{Client, MapDataSource, OverrideBehavior, Value};

let map: MapDataSource = [
    ("enabledFeature", Value::Bool(true)),
    ("disabledFeature", Value::Bool(false)),
    ("intSetting", Value::Int(5)),
    ("doubleSetting", Value::Float(1.2)),
    ("stringSetting", Value::String("test".to_owned())),
].into();

let client = Client::builder("localhost")
    .overrides(Box::new(map), OverrideBehavior::LocalOnly)
    .build()
    .unwrap();
```

## `get_all_keys()`[â](#get_all_keys "Direct link to get_all_keys")

You can get the keys for all available feature flags and settings by calling the `get_all_keys()` method.

```
let client = Client::new("#YOUR-SDK-KEY#").unwrap();
let keys = client.get_all_keys().await;
```

## `get_all_values()`[â](#get_all_values "Direct link to get_all_values")

Evaluates and returns the values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
let client = Client::new("#YOUR-SDK-KEY#").unwrap();
let values = await client.get_all_values(None).await;

// invoke with User Object
let user = User::new("#UNIQUE-USER-IDENTIFIER#");
let values_with_user = await client.get_all_values(Some(user)).await;
```

## `get_all_value_details()`[â](#get_all_value_details "Direct link to get_all_value_details")

Evaluates and returns the values along with evaluation details of all feature flags and settings. Passing a [User Object](#user-object) is optional.

```
let client = Client::new("#YOUR-SDK-KEY#").unwrap();
let details = await client.get_all_value_details(None).await;

// invoke with User Object
let user = User::new("#UNIQUE-USER-IDENTIFIER#");
let details_with_user = await client.get_all_value_details(Some(user)).await;
```

## Cache[â](#cache "Direct link to Cache")

The *ConfigCat SDK* stores the downloaded config data in a local cache to minimize network traffic and enhance client performance. If you prefer to use your own cache solution, such as an external or distributed cache in your system, you can implement the [`ConfigCache`](https://github.com/configcat/rust-sdk/blob/main/src/cache.rs) trait and call the `cache()` method of the `ClientBuilder` with your implementation. This allows you to seamlessly integrate ConfigCat with your existing caching infrastructure.

```
struct CustomCache {}

impl ConfigCache for CustomCache {
    fn read(&self, key: &str) -> Option<String> {
        // here you have to return with the cached value
    }

    fn write(&self, key: &str, value: &str) {
        // here you have to store the new value in the cache
    }
}
```

Then use your custom cache implementation:

```
let client = Client::builder("#YOUR-SDK-KEY#")
    .cache(Box::new(CustomCache{}))
    .build()
    .unwrap();
```

## HTTP Proxy[â](#http-proxy "Direct link to HTTP Proxy")

The SDK uses the [`reqwest`](https://docs.rs/reqwest) crate for HTTP communication. This crate supports [HTTP proxies](https://docs.rs/reqwest/#proxies) via the `HTTP_PROXY` / `HTTPS_PROXY` environment variables.

## HTTP Timeout[â](#http-timeout "Direct link to HTTP Timeout")

You can set the maximum wait time for a ConfigCat HTTP response.

```
let client = Client::builder("#YOUR-SDK-KEY#")
    .http_timeout(Duration::from_secs(60));
    .build()
    .unwrap();
```

The default timeout is `30` seconds.

## Logging[â](#logging "Direct link to Logging")

The SDK uses the [`log`](https://docs.rs/log) crate for logging, so you can use any package that implements the `log::Log` trait.

`Info` level logging helps to inspect how a feature flag was evaluated:

```
INFO [5000] Evaluating 'isPOCFeatureEnabled' for User '{"Identifier":"<SOME USERID>","Email":"configcat@example.com","Country":"US","SubscriptionType":"Pro","Role":"Admin","version":"1.0.0"}'
  Evaluating targeting rules and applying the first match if any:
  - IF User.Email CONTAINS ANY OF ['@something.com'] THEN 'false' => no match
  - IF User.Email CONTAINS ANY OF ['@example.com'] THEN 'true' => MATCH, applying rule
  Returning 'true'.
```

As an example, [this](https://github.com/configcat/rust-sdk/blob/main/examples/print_eval.rs) sample app defines a [minimal `log::Log` implementation](https://github.com/configcat/rust-sdk/blob/main/examples/print_eval.rs#L36) that uses `println!()` to show log messages on the console.

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

Check out our Sample Applications how they use the *ConfigCat SDK*:

* [Sample App](https://github.com/configcat/rust-sdk/blob/main/examples/print_eval.rs)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat Rust SDK on GitHub](https://github.com/configcat/rust-sdk)
* [ConfigCat Rust SDK on crates.io](https://crates.io/crates/configcat)
* [ConfigCat Rust SDK on docs.rs](https://docs.rs/configcat)


---

# Using the ConfigCat SDK in Unity

## Getting Started[â](#getting-started "Direct link to Getting Started")

ConfigCat provides support for feature flagging in Unity applications and games via the [ConfigCat .NET SDK](https://configcat.com/docs/docs/sdk-reference/dotnet/.md).

However, compared to an ordinary .NET application, the installation process is different in Unity and requires a bit of extra effort. (Mainly because Unity doesn't support NuGet packages and uses .NET as a scripting platform.)

### 1. Get the SDK assembly files[â](#1-get-the-sdk-assembly-files "Direct link to 1. Get the SDK assembly files")

Since NuGet packages cannot be referenced in Unity projects directly, the SDK's assembly file (`ConfigCat.Client.dll`) and its dependencies must be added manually.

So, as a first step, you will need to get the assembly .dll files for `netstandard2.0` from the following packages:

* [ConfigCat.Client v9.3.2+](https://www.nuget.org/packages/ConfigCat.Client)
* [Microsoft.Bcl.AsyncInterfaces v6.0.0](https://www.nuget.org/packages/Microsoft.Bcl.AsyncInterfaces/6.0.0)
* [System.Buffers v4.5.1](https://www.nuget.org/packages/System.Buffers/4.5.1)
* [System.Memory v4.5.4](https://www.nuget.org/packages/System.Memory/4.5.4)
* [System.Numerics.Vectors v4.5.0](https://www.nuget.org/packages/System.Numerics.Vectors/4.5.0)
* [System.Runtime.CompilerServices.Unsafe v6.0.0](https://www.nuget.org/packages/System.Runtime.CompilerServices.Unsafe/6.0.0)
* [System.Text.Encodings.Web v6.0.0](https://www.nuget.org/packages/System.Text.Encodings.Web/6.0.0)
* [System.Text.Json v6.0.10](https://www.nuget.org/packages/System.Text.Json/6.0.10)
* [System.Threading.Tasks.Extensions v4.5.4](https://www.nuget.org/packages/System.Threading.Tasks.Extensions/4.5.4)

You can do this by downloading these packages and extracting the .dll files manually from the .nupkg files (which are actually plain ZIP files).

Or, if you have [.NET](https://dotnet.microsoft.com) installed, you can take a shortcut:

1. Create a file named `Plugins.csproj` (anywhere in your file system) with the following content:
   <!-- -->
   ```
   <Project Sdk="Microsoft.NET.Sdk">
     <PropertyGroup>
       <TargetFramework>netstandard2.0</TargetFramework>
     </PropertyGroup>
     <ItemGroup>
       <PackageReference Include="ConfigCat.Client" Version="*" />
     </ItemGroup>
   </Project>
   ```
2. Run `dotnet publish -c Release` in the same folder.
3. You will now have all the necessary .dll files in the `bin/Release/netstandard2.0/publish` folder.

### 2. Add the SDK assembly files to your Unity project[â](#2-add-the-sdk-assembly-files-to-your-unity-project "Direct link to 2. Add the SDK assembly files to your Unity project")

Create a folder named `Plugins` in your Unity project's Assets, then copy the SDK assembly files into this folder.

### 3. Create a script for hosting the *ConfigCat* client[â](#3-create-a-script-for-hosting-the-configcat-client "Direct link to 3-create-a-script-for-hosting-the-configcat-client")

To access your feature flags, you will need to create an instance of `ConfigCatClient` with your SDK Key. Usually you do this once, at the start of your application or game, then use the client throughout its lifetime.

However, sharing object instances between scripts is not straightforward in Unity. We recommend the following approach:

Create a folder named `Scripts` in your Unity project's Assets, then add a C# Script named `SingletonServices` to it. Replace the script content with the following code:

```
using System;
using System.Globalization;
using System.Threading;
using ConfigCat.Client;
using UnityEngine;

public class SingletonServices : MonoBehaviour
{
    private static SingletonServices instance;
    public static SingletonServices Instance => instance;

    [field: NonSerialized]
    public IConfigCatClient ConfigCatClient { get; private set; }

    private void Awake()
    {
        if (Interlocked.CompareExchange(ref instance, this, null) is not null)
        {
            // If another instance has been created already, get rid of this one.
            Destroy(this);
            return;
        }

        ConfigCatClient = ConfigCat.Client.ConfigCatClient.Get("YOUR_SDK_KEY", options =>
        {
            options.Logger = new ConfigCatToUnityDebugLogAdapter(LogLevel.Warning);
        });

        DontDestroyOnLoad(this.gameObject);
    }

    // Start is called before the first frame update
    void Start() { }

    // Update is called once per frame
    void Update() { }

    private void OnDestroy()
    {
        this.ConfigCatClient?.Dispose();
        this.ConfigCatClient = null;
    }

    private sealed class ConfigCatToUnityDebugLogAdapter : IConfigCatLogger
    {
        private readonly LogLevel logLevel;

        public ConfigCatToUnityDebugLogAdapter(LogLevel logLevel)
        {
            this.logLevel = logLevel;
        }

        public LogLevel LogLevel
        {
            get => this.logLevel;
            set { throw new NotSupportedException(); }
        }

        public void Log(LogLevel level, LogEventId eventId, ref FormattableLogMessage message, Exception exception = null)
        {
            var eventIdString = eventId.Id.ToString(CultureInfo.InvariantCulture);
            var exceptionString = exception is null ? string.Empty : Environment.NewLine + exception;
            var logMessage = $"ConfigCat[{eventIdString}] {message.InvariantFormattedMessage}{exceptionString}";
            switch (level)
            {
                case LogLevel.Error:
                    Debug.LogError(logMessage);
                    break;
                case LogLevel.Warning:
                    Debug.LogWarning(logMessage);
                    break;
                case LogLevel.Info:
                    Debug.Log(logMessage);
                    break;
                case LogLevel.Debug:
                    Debug.Log(logMessage);
                    break;
            }
        }
    }
}
```

caution

In case your application or game targets WebGL, this won't cut it. To make the *ConfigCat SDK* work, you will need additional code, as shown [here](https://github.com/configcat/.net-sdk/blob/master/samples/UnityWebGL/Assets/Scripts/SingletonServices.cs).

Finally, to activate the `SingletonServices` script, add an empty GameObject to your first scene and assign the script to it.

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

Once the setup above is done, you will be able to access the *ConfigCat* client in your other scripts and use it to evaluate feature flags and settings:

```
var configCatClient = SingletonServices.Instance.ConfigCatClient;

var isMyAwesomeFeatureEnabled = await configCatClient.GetValueAsync("isMyAwesomeFeatureEnabled", false);
if (isMyAwesomeFeatureEnabled)
{
    doTheNewThing();
}
else
{
    doTheOldThing();
}
```

info

As you can see, feature flag evaluation is asynchronous by default, which in some cases may not play well with Unity's programming model. (Might lead to `async void` event handlers or other cumbersome solutions.) If this is the case for you, consider using [non-blocking synchronous evaluation with snapshots](https://configcat.com/docs/docs/sdk-reference/dotnet/.md#snapshots-and-non-blocking-synchronous-feature-flag-evaluation).

## Platform compatibility[â](#platform-compatibility "Direct link to Platform compatibility")

Proper support for Unity is available since *ConfigCat .NET SDK* v9.3.0. Earlier versions may work with certain build settings (although certainly not with WebGL), but it is recommended to use the latest SDK version.

According to our tests, the *ConfigCat .NET SDK* works fine with Unity 2021.3 or newer, over both the Mono and IL2CPP [scripting backends](https://docs.unity3d.com/2021.3/Documentation/Manual/ScriptingRestrictions.html).

As long as you use the `netstandard2.0` build of the SDK and its dependencies, the "Api Compatibility Level" setting shouldn't matter, both the ".NET Framework" and ".NET Standard 2.1" options should be OK. If you experience any issue, try to set the "Api Compatibility Level" setting to ".NET Standard 2.1" on the Edit / Project Settings... / Player tab.

info

We strive to provide an extensive support for the various Unity versions and scripting backends. If you still encounter an issue with the SDK on some platform, please open a [GitHub issue](https://github.com/configcat/.net-sdk/issues/new/choose) or [contact support](https://configcat.com/support).

## Further reading[â](#further-reading "Direct link to Further reading")

You can read about the configuration and the advanced features of the ConfigCat .NET SDK [here](https://configcat.com/docs/docs/sdk-reference/dotnet/.md).

## Guides[â](#guides "Direct link to Guides")

See the following guides on how to use ConfigCat's .NET SDK in Unity:

* [How to use feature flags in Unity](https://configcat.com/blog/2023/01/27/how-to-use-feature-flags-in-unity/) (partly outdated)

## Look under the hood[â](#look-under-the-hood "Direct link to Look under the hood")

* [ConfigCat .NET SDK on GitHub](https://github.com/configcat/.net-sdk)
* [ConfigCat .NET SDK on nuget.org](https://www.nuget.org/packages/ConfigCat.Client)


---

# Unreal Engine SDK Reference

[![Star on GitHub](https://img.shields.io/github/stars/configcat/unreal-engine-sdk.svg?style=social)](https://github.com/configcat/unreal-engine-sdk/stargazers) [![Build Status](https://img.shields.io/github/actions/workflow/status/configcat/unreal-engine-sdk/plugin-ci.yml?logo=GitHub\&label=Unreal\&branch=main)](https://github.com/configcat/unreal-engine-sdk/actions/workflows/plugin-ci.yml)

[ConfigCat Unreal SDK on GitHub](https://github.com/configcat/unreal-engine-sdk)

## Getting Started[â](#getting-started "Direct link to Getting Started")

### 1. Installing the ConfigCat plugin to your project[â](#1-installing-the-configcat-plugin-to-your-project "Direct link to 1. Installing the ConfigCat plugin to your project")

Via **[Unreal Marketplace](https://www.unrealengine.com/marketplace/product/e142293a397d4ce4bf6a1f3053a2316d)**

Via **[GitHub](https://github.com/configcat/unreal-engine-sdk)**

Prequesities to building manually:

* you are working in a [C++ project](https://docs.unrealengine.com/5.2/en-US/compiling-game-projects-in-unreal-engine-using-cplusplus/)
* you've completed the [Visual Studio](https://docs.unrealengine.com/5.2/en-US/setting-up-visual-studio-development-environment-for-cplusplus-projects-in-unreal-engine/) or [Visual Studio Code](https://docs.unrealengine.com/5.2/en-US/setting-up-visual-studio-code-for-unreal-engine/) setup

To download:

* Create a `Plugins` folder in the root folder of your project (where the `.uproject` file is located).
* Head to the download the latest [ConfigCat.zip](https://github.com/configcat/unreal-engine-sdk/releases/latest/download/ConfigCat.zip) archive or any of the previous versions from: [Releases](https://github.com/configcat/unreal-engine-sdk/releases)
* Unzip the content inside the `Plugins` folder.

Note: if you are using a locally built plugin, you will need to rebuild from source manually.

### 2. Enable the ConfigCat plugin in your project[â](#2-enable-the-configcat-plugin-in-your-project "Direct link to 2. Enable the ConfigCat plugin in your project")

![Unreal Engine enable plugin](/docs/assets/unreal/enable-plugin.png)

Navigate to `Edit -> Plugins` and perform the following steps:

1. Find the `ConfigCat` plugin and **tick** the enable checkbox.
2. Press `Restart` to load up the editor.

### 3. Set up the *ConfigCat* settings with your *SDK Key*[â](#3-set-up-the-configcat-settings-with-your-sdk-key "Direct link to 3-set-up-the-configcat-settings-with-your-sdk-key")

You can configure all ConfigCat related settings inside the `Edit -> Project Settings -> Feature Flags -> ConfigCat`.

![Unreal Engine plugin settings](/docs/assets/unreal/plugin-settings.png)

| Properties                    | Description                                                                                                                                                                                                                                                                                                                         |
| ----------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Sdk Key`                     | SDK Key to access your feature flags and settings. Get it from the *ConfigCat Dashboard*.                                                                                                                                                                                                                                           |
| `Base Url`                    | Optional, sets the CDN base url (forward proxy, dedicated subscription) from where the sdk will download the config JSON.                                                                                                                                                                                                           |
| `Data Governance`             | Optional, defaults to `Global`. Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. [More about Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md). Available options: `Global`, `EuOnly`. |
| `Connect Timeout`             | Optional, defaults to `8000ms`. Sets the amount of milliseconds to wait for the server to make the initial connection (i.e. completing the TCP connection handshake). `0` means it never times out during transfer                                                                                                                  |
| `Read Timeout`                | Optional, defaults to `5000ms`. Sets the amount of milliseconds to wait for the server to respond before giving up. `0` means it never times out during transfer.                                                                                                                                                                   |
| `Polling Mode`                | Optional, sets the polling mode for the client. [More about polling modes](#polling-modes).                                                                                                                                                                                                                                         |
| `Auto Poll Interval`          | For PollingMode == Custom, sets at least how often this policy should fetch the latest config JSON and refresh the cache.                                                                                                                                                                                                           |
| `Maximum Inititial Wait Time` | For PollingMode == Custom, sets the maximum waiting time between initialization and the first config acquisition in seconds.                                                                                                                                                                                                        |
| `Cache Refresh Interval`      | For PollingMode == LazyLoad, sets how long the cache will store its value before fetching the latest from the network again.                                                                                                                                                                                                        |
| `Proxies`                     | Optional, sets proxy addresses. e.g. { "https": "your\_proxy\_ip<!-- -->:your\_proxy\_port<!-- -->" } on each http request                                                                                                                                                                                                          |
| `Proxy Authentications`       | Optional, sets proxy authentication on each http request.                                                                                                                                                                                                                                                                           |
| `Start Offline`               | Optional, sets the SDK ot be initialized in offline mode.                                                                                                                                                                                                                                                                           |
| `Auto Initialize`             | Optional, automatically initialization the SDK client. You can disable it if you want to manually initialize at a later stage.                                                                                                                                                                                                      |

### 4. Get your setting value[â](#4-get-your-setting-value "Direct link to 4. Get your setting value")

* Blueprints
* C++

![Unreal Engine Get Value](/docs/assets/unreal/blueprints-get-value.png)

Add the ConfigCat Dependency to your `.Build.cs` file:

```
PrivateDependencyModuleNames.AddRange(new string[]
{
  "ConfigCat"
});
```

Access feature flags:

```
#include "ConfigCatSubsystem.h"

UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);
bool bIsMyAwesomeFeatureEnabled = ConfigCat->GetBoolValue(TEXT("isMyAwesomeFeatureEnabled"), false);
SetMyAwesomeFeatureEnabled(bIsMyAwesomeFeatureEnabled);
```

## Anatomy of `GetValue`[â](#anatomy-of-getvalue "Direct link to anatomy-of-getvalue")

| Parameters      | Description                                                                                                                                             |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Key`           | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `Default Value` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `User`          | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

* Blueprints
* C++

![Unreal Engine Get Value Overloads](/docs/assets/unreal/blueprints-get-value-overloads.png)![Unreal Engine Get Values Targeted](/docs/assets/unreal/blueprints-get-value-targeted.png)

Access value depending on type:

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);

bool bMyFirstFeatureFlag = ConfigCat->GetBoolValue(TEXT("myFirstFeatureFlag"), false);
int MySecondFeatureFlag = ConfigCat->GetIntValue(TEXT("mySecondFeatureFlag"), 0);
double MyThirdFeatureFlag = ConfigCat->GetDoubleValue(TEXT("myThirdFeatureFlag"), 0.0);
FString MyFourthFeatureFlag = ConfigCat->GetStringValue(TEXT("myForthFeatureFlag"), TEXT(""));
```

Access value depending on type targeting an user:

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);

auto User = UConfigCatUserWrapper::CreateUser(TEXT("#USER-IDENTIFIER#"));
FString TargetValue = ConfigCat->GetStringValue(TEXT("targetValue"), TEXT(""), User);
```

## Anatomy of `GetValueDetails()`[â](#anatomy-of-getvaluedetails "Direct link to anatomy-of-getvaluedetails")

`GetValueDetails()` is similar to `GetValue()` but instead of returning the evaluated value only, it gives more detailed information about the evaluation result.

| Parameters      | Description                                                                                                                                             |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Key`           | **REQUIRED.** The key of a specific setting or feature flag. Set on *ConfigCat Dashboard* for each setting.                                             |
| `Default Value` | **REQUIRED.** This value will be returned in case of an error.                                                                                          |
| `User`          | Optional, *User Object*. Essential when using Targeting. [Read more about Targeting.](https://configcat.com/docs/docs/targeting/targeting-overview/.md) |

* Blueprints
* C++

![Unreal Engine Get Value Details](/docs/assets/unreal/blueprints-get-value-details.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);

auto User = UConfigCatUserWrapper::CreateUser(TEXT("#USER-IDENTIFIER#"));
auto Details = ConfigCat->GetStringValueDetails(TEXT("myFeatureFlag"),  TEXT(""), User);
```

The `Details` result contains the following information:

| Field                                | Description                                                                               |
| ------------------------------------ | ----------------------------------------------------------------------------------------- |
| `Value`                              | The evaluated value of the feature flag or setting.                                       |
| `Key`                                | The key of the evaluated feature flag or setting.                                         |
| `Is Default Value`                   | True when the default value passed to `getValueDetails()` is returned due to an error.    |
| `Error`                              | In case of an error, this field contains the error message.                               |
| `User`                               | The User Object that was used for evaluation.                                             |
| `Matched Evaluation Percentage Rule` | If the evaluation was based on a percentage rule, this field contains that specific rule. |
| `Matched Evaluation Rule`            | If the evaluation was based on a Targeting Rule, this field contains that specific rule.  |
| `FetchTime`                          | The last download time of the current config.                                             |

## User Object[â](#user-object "Direct link to User Object")

The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

* Blueprints
* C++

![Unreal Engine Create User](/docs/assets/unreal/blueprints-create-user.png)

```
auto User = UConfigCatUserWrapper::CreateUser(TEXT("#UNIQUE-USER-IDENTIFIER#"));
```

### Customized User Object creation[â](#customized-user-object-creation "Direct link to Customized User Object creation")

| Argument  | Description                                                                                                                     |
| --------- | ------------------------------------------------------------------------------------------------------------------------------- |
| `Id`      | **REQUIRED.** Unique identifier of a user in your application. Can be any value, even an email address.                         |
| `Email`   | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `Country` | Optional parameter for easier Targeting Rule definitions.                                                                       |
| `Custom`  | Optional dictionary for custom attributes of a user for advanced Targeting Rule definitions. e.g. User role, Subscription type. |

* Blueprints
* C++

![Unreal Engine Create User Custom](/docs/assets/unreal/blueprints-create-user-custom.png)

```
TMap<FString, FString> Attributes;
Attributes.Emplace(TEXT("SubscriptionType"), TEXT("Pro"));
Attributes.Emplace(TEXT("UserRole"), TEXT("Admin"));
auto User = UConfigCatUserWrapper::CreateUser(TEXT("#UNIQUE-USER-IDENTIFIER#"), TEXT("john@example.com"), 
  TEXT("United Kingdom"), Attributes);
```

### Default user[â](#default-user "Direct link to Default user")

There's an option to set a default User Object that will be used at feature flag and setting evaluation. It can be useful when your application has a single user only, or rarely switches users.

You can set the default User Object with the `setDefaultUser()` method of the ConfigCat client.

* Blueprints
* C++

![Unreal Engine Set Default User](/docs/assets/unreal/blueprints-set-default-user.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);
auto User = UConfigCatUserWrapper::CreateUser(TEXT("#UNIQUE-USER-IDENTIFIER#"));
ConfigCat->SetDefaultUser(User);
```

Whenever the `GetValue()`, `GetValueDetails()`, `GetAllValues()`, or `GetAllValueDetails()` methods are called without an explicit `user` parameter, the SDK will automatically use the default user as a User Object.

* Blueprints
* C++

![Unreal Engine Default User Example](/docs/assets/unreal/blueprints-default-user-example.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);
auto User = UConfigCatUserWrapper::CreateUser(TEXT("#UNIQUE-USER-IDENTIFIER#"));
ConfigCat->SetDefaultUser(User);

// The default user will be used at the evaluation process.
bool bMySetting = ConfigCat->GetBoolValue(TEXT("keyOfMySetting"), false);
```

When the `user` parameter is specified on the requesting method, it takes precedence over the default user.

* Blueprints
* C++

![Unreal Engine Other User Example](/docs/assets/unreal/blueprints-other-user-example.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);
auto User = UConfigCatUserWrapper::CreateUser(TEXT("#UNIQUE-USER-IDENTIFIER#"));
ConfigCat->SetDefaultUser(User);

auto OtherUser = UConfigCatUserWrapper::CreateUser(TEXT("#OTHER-UNIQUE-USER-IDENTIFIER#"));

// OtherUser will be used at the evaluation process.
bool bMySetting = ConfigCat->GetBoolValue(TEXT("keyOfMySetting"), false, OtherUser);
```

For deleting the default user, you can do the following:

* Blueprints
* C++

![Unreal Engine Clear Default User](/docs/assets/unreal/blueprints-clear-default-user.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);
ConfigCat->ClearDefaultUser();
```

## Polling Modes[â](#polling-modes "Direct link to Polling Modes")

The *ConfigCat SDK* supports 3 different polling strategies to fetch feature flags and settings from the ConfigCat CDN. Once the latest data is downloaded, it is stored in the cache, then calls to `GetValue()` use the cached data to evaluate feature flags and settings. With the following polling modes, you can customize the SDK to best fit to your application's lifecycle.<br />[More about polling modes.](https://configcat.com/docs/docs/advanced/caching/.md)

### Auto polling (default)[â](#auto-polling-default "Direct link to Auto polling (default)")

The *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN automatically every 60 seconds and stores it in the cache.

![Unreal Engine Polling Mode Auto](/docs/assets/unreal/settings-polling-mode-auto.png)

Available options:

| Option Parameter          | Description                                                                                         | Default |
| ------------------------- | --------------------------------------------------------------------------------------------------- | ------- |
| `Auto Poll Interval`      | Polling interval.                                                                                   | 60      |
| `Max Inititial Wait Time` | Maximum waiting time between the client initialization and the first config acquisition in seconds. | 5       |

### Lazy Loading[â](#lazy-loading "Direct link to Lazy Loading")

When calling `getValue()`, the *ConfigCat SDK* downloads the latest config data from the ConfigCat CDN only if it is not already present in the cache, or if the cache has expired. In this case `getValue()` will return the setting value after the cache is updated.

![Unreal Engine Polling Mode Lazy](/docs/assets/unreal/settings-polling-mode-lazy.png)

Available options:

| Parameter                | Description | Default |
| ------------------------ | ----------- | ------- |
| `Cache Refresh Interval` | Cache TTL.  | 60      |

### Manual Polling[â](#manual-polling "Direct link to Manual Polling")

Manual polling gives you full control over when the config data is downloaded from the ConfigCat CDN. The *ConfigCat SDK* will not download it automatically. Calling `ForceRefresh()` is your application's responsibility.

![Unreal Engine Polling Mode Manual](/docs/assets/unreal/settings-polling-mode-manual.png)

* Blueprints
* C++

![Unreal Engine Manual Force Refresh](/docs/assets/unreal/blueprints-manual-force-refresh.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);
ConfigCat->ForceRefresh();
```

> `GetValue()` returns `DefaultValue` if the cache is empty. Call `ForceRefresh()` to update the cache.

## Delegates[â](#delegates "Direct link to Delegates")

With the following delegates you can subscribe to particular events fired by the SDK:

* `OnClientReady`: This event is sent when the SDK reaches the ready state. If the SDK is initialized with lazy load or manual polling, it's considered ready right after instantiation. If it's using auto polling, the ready state is reached when the SDK has a valid config JSON loaded into memory either from cache or from HTTP. If the config couldn't be loaded neither from cache nor from HTTP the `onClientReady` event fires when the auto polling's `maxInitWaitTimeInSeconds` is reached.

* `OnConfigChanged`: This event is sent when the SDK loads a valid config JSON into memory from cache, and each subsequent time when the loaded config JSON changes via HTTP.

* `OnFlagEvaluated`: This event is sent each time when the SDK evaluates a feature flag or setting. The event sends the same evaluation details that you would get from [`getValueDetails()`](#anatomy-of-getvaluedetails).

* `OnError`: This event is sent when an error occurs within the ConfigCat SDK.

You can subscribe to these events either on SDK initialization:

* Blueprints
* C++

![Unreal Engine Blueprint Event Delegates](/docs/assets/unreal/blueprint-event-delegates.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);
    
ConfigCat->OnClientReady.AddWeakLambda(this, [](){ /* OnClientReady callback */ });
ConfigCat->OnConfigChanged.AddWeakLambda(this, [](UConfigCatSettingsWrapper* Config){ /* OnConfigChanged callback */ });
ConfigCat->OnFlagEvaluated.AddWeakLambda(this, [](UConfigCatEvaluationWrapper* Details){ /* OnFlagEvaluated callback */ });
ConfigCat->OnError.AddWeakLambda(this, [](const FString& Error, const FString& Exception){ /* OnError callback */ });
```

## Online / Offline mode[â](#online--offline-mode "Direct link to Online / Offline mode")

In cases when you'd want to prevent the SDK from making HTTP calls, you can put it in offline mode with `SetOffline`.

In offline mode, the SDK won't initiate HTTP requests and will work only from its cache.

To put the SDK back in online mode, you can use `SetOnline`;

> With `IsOffline` you can check whether the SDK is in offline mode.

* Blueprints
* C++

![Unreal Engine Blueprint Offline Functionality](/docs/assets/unreal/blueprint-offline-functionality.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);

ConfigCat->SetOffline();
ConfigCat->SetOnline();
bool bIsOffline = ConfigCat->IsOffline();
```

## Flag Overrides[â](#flag-overrides "Direct link to Flag Overrides")

With flag overrides you can overwrite the feature flags & settings downloaded from the ConfigCat CDN with local values. Moreover, you can specify how the overrides should apply over the downloaded values. The following 3 behaviours are supported:

* **Local only** (`OverrideBehaviour::LocalOnly`): When evaluating values, the SDK will not use feature flags & settings from the ConfigCat CDN, but it will use all feature flags & settings that are loaded from local-override sources.

* **Local over remote** (`OverrideBehaviour::LocalOverRemote`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the local-override version will take precedence.

* **Remote over local** (`OverrideBehaviour::RemoteOverLocal`): When evaluating values, the SDK will use all feature flags & settings that are downloaded from the ConfigCat CDN, plus all feature flags & settings that are loaded from local-override sources. If a feature flag or a setting is defined both in the downloaded and the local-override source then the downloaded version will take precedence.

You can set up the SDK to load your feature flag & setting overrides from a file or a map.

![Unreal Engine Settings Overrides](/docs/assets/unreal/settings-overrides.png)

### JSON File[â](#json-file "Direct link to JSON File")

The SDK can be set up to load your feature flag & setting overrides from a file.

#### File[â](#file "Direct link to File")

If specified the SDK will load the JSON data `%PROJECT_ROOT/Content/ConfigCat/flags.json` file. This file needs to be created manually in the specified folder to ensure it gets packaged in the final executable.

Note: This file needs to be created in your file explorer and cannot be done within Unreal.

#### JSON File Structure[â](#json-file-structure "Direct link to JSON File Structure")

The SDK supports 2 types of JSON structures to describe feature flags & settings.

##### 1. Simple (key-value) structure[â](#1-simple-key-value-structure "Direct link to 1. Simple (key-value) structure")

```
{
  "flags": {
    "enabledFeature": true,
    "disabledFeature": false,
    "intSetting": 5,
    "doubleSetting": 3.14,
    "stringSetting": "test"
  }
}
```

##### 2. Complex (full-featured) structure[â](#2-complex-full-featured-structure "Direct link to 2. Complex (full-featured) structure")

This is the same format that the SDK downloads from the ConfigCat CDN. It allows the usage of all features that are available on the ConfigCat Dashboard.

You can download your current config JSON from ConfigCat's CDN and use it as a baseline.

A convenient way to get the config JSON for a specific SDK Key is to install the [ConfigCat CLI](https://github.com/configcat/cli) tool and execute the following command:

```
configcat config-json get -f v6 -p {YOUR-SDK-KEY} > config.json
```

(Depending on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings, you may need to add the `--eu` switch.)

Alternatively, you can download the config JSON manually, based on your [Data Governance](https://configcat.com/docs/docs/advanced/data-governance/.md) settings:

* GLOBAL: `https://cdn-global.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`
* EU: `https://cdn-eu.configcat.com/configuration-files/{YOUR-SDK-KEY}/config_v6.json`

```
{
  "p": {
    // hash salt, required only when confidential text comparator(s) are used
    "s": "80xCU/SlDz1lCiWFaxIBjyJeJecWjq46T4eu6GtozkM="
  },
  "s": [ // array of segments
    {
      "n": "Beta Users", // segment name
      "r": [ // array of User Conditions (there is a logical AND relation between the elements)
        {
          "a": "Email", // comparison attribute
          "c": 0, // comparator (see below)
          "l": [ // comparison value (see below)
            "john@example.com", "jane@example.com"
          ]
        }
      ]
    }
  ],
  "f": { // key-value map of feature flags & settings
    "isFeatureEnabled": { // key of a particular flag / setting
      "t": 0, // setting type, possible values:
              // 0 -> on/off setting (feature flag)
              // 1 -> text setting
              // 2 -> whole number setting
              // 3 -> decimal number setting
      "r": [ // array of Targeting Rules (there is a logical OR relation between the elements)
        {
          "c": [ // array of conditions (there is a logical AND relation between the elements)
            {
              "u": { // User Condition
                "a": "Email", // comparison attribute
                "c": 2, // comparator, possible values and required comparison value types:
                        // 0  -> IS ONE OF (cleartext) + string array comparison value ("l")
                        // 1  -> IS NOT ONE OF (cleartext) + string array comparison value ("l")
                        // 2  -> CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 3  -> NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 4  -> IS ONE OF (semver) + semver string array comparison value ("l")
                        // 5  -> IS NOT ONE OF (semver) + semver string array comparison value ("l")
                        // 6  -> < (semver) + semver string comparison value ("s")
                        // 7  -> <= (semver + semver string comparison value ("s")
                        // 8  -> > (semver) + semver string comparison value ("s")
                        // 9  -> >= (semver + semver string comparison value ("s")
                        // 10 -> = (number) + number comparison value ("d")
                        // 11 -> <> (number + number comparison value ("d")
                        // 12 -> < (number) + number comparison value ("d")
                        // 13 -> <= (number + number comparison value ("d")
                        // 14 -> > (number) + number comparison value ("d")
                        // 15 -> >= (number) + number comparison value ("d")
                        // 16 -> IS ONE OF (hashed) + string array comparison value ("l")
                        // 17 -> IS NOT ONE OF (hashed) + string array comparison value ("l")
                        // 18 -> BEFORE (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 19 -> AFTER (UTC datetime) + second-based Unix timestamp number comparison value ("d")
                        // 20 -> EQUALS (hashed) + string comparison value ("s")
                        // 21 -> NOT EQUALS (hashed) + string comparison value ("s")
                        // 22 -> STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 23 -> NOT STARTS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 24 -> ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 25 -> NOT ENDS WITH ANY OF (hashed) + string array comparison value ("l")
                        // 26 -> ARRAY CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 27 -> ARRAY NOT CONTAINS ANY OF (hashed) + string array comparison value ("l")
                        // 28 -> EQUALS (cleartext) + string comparison value ("s")
                        // 29 -> NOT EQUALS (cleartext) + string comparison value ("s")
                        // 30 -> STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 31 -> NOT STARTS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 32 -> ENDS WITH ANY OF (cleartext) + string array comparison value ("l")
                        // 33 -> NOT ENDS WITH ANY OF (cleartext + string array comparison value ("l")
                        // 34 -> ARRAY CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                        // 35 -> ARRAY NOT CONTAINS ANY OF (cleartext) + string array comparison value ("l")
                "l": [ // comparison value - depending on the comparator, another type of value may need
                       // to be specified (see above):
                       // "s": string
                       // "d": number
                  "@example.com"
                ]
              }
            },
            {
              "p": { // Flag Condition (Prerequisite)
                "f": "mainIntFlag", // key of prerequisite flag
                "c": 0, // comparator, possible values: 0 -> EQUALS, 1 -> NOT EQUALS
                "v": { // comparison value (value's type must match the prerequisite flag's type)
                  "i": 42
                }
              }
            },
            {
              "s": { // Segment Condition
                "s": 0, // segment index, a valid index into the top-level segment array ("s")
                "c": 1 // comparator, possible values: 0 -> IS IN SEGMENT, 1 -> IS NOT IN SEGMENT
              }
            }
          ],
          "s": { // alternatively, an array of Percentage Options ("p", see below) can also be specified
            "v": { // the value served when the rule is selected during evaluation
              "b": true
            },
            "i": "bcfb84a7"
          }
        }
      ],
      "p": [ // array of Percentage Options
        {
          "p": 10, // % value
          "v": { // the value served when the Percentage Option is selected during evaluation
            "b": true
          },
          "i": "bcfb84a7"
        },
        {
          "p": 90,
          "v": {
            "b": false
          },
          "i": "bddac6ae"
        }
      ],
      "v": { // fallback value, served when none of the Targeting Rules match,
             // no Percentage Options are defined or evaluation of these is not possible
        "b": false // depending on the setting type, another type of value may need to be specified:
                   // text setting -> "s": string
                   // whole number setting -> "i": number
                   // decimal number setting -> "d": number
      },
      "i": "430bded3" // variation id (for analytical purposes)
    }
  }
}
```

For a more comprehensive specification of the config JSON v6 format, you may refer to [this JSON schema document](https://github.com/configcat/config-json/blob/main/V6/config.schema.json).

### Map[â](#map "Direct link to Map")

You can set up the SDK to load your feature flag & setting overrides from a map.

**Coming soon**: [Support for Flag overrides via Map #8](https://github.com/configcat/unreal-engine-sdk/issues/8)

info

The Unreal Engine SDK doesn't support programmatically setting a flag map override currently.

## `GetAllKeys()`[â](#getallkeys "Direct link to getallkeys")

You can get the keys for all available feature flags and settings by calling the `getAllKeys()` method.

* Blueprints
* C++

![Unreal Engine Get All Keys](/docs/assets/unreal/blueprints-get-all-keys.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);

TArray<FString> Keys = ConfigCat->GetAllKeys();
```

## `GetAllValues()`[â](#getallvalues "Direct link to getallvalues")

Evaluates and returns the values of all feature flags and settings. Passing a User Object is optional.

* Blueprints
* C++

![Unreal Engine Get All Values](/docs/assets/unreal/blueprints-get-all-values.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);
TMap<FString, UConfigCatValueWrapper*> SettingValues = ConfigCat->GetAllValues();

auto User = UConfigCatUserWrapper::CreateUser(TEXT("#UNIQUE-USER-IDENTIFIER#"));
TMap<FString, UConfigCatValueWrapper*> SettingValuesTargeting = ConfigCat->GetAllValues(User);
```

## `GetAllValueDetails`[â](#getallvaluedetails "Direct link to getallvaluedetails")

Evaluates and returns the detailed values of all feature flags and settings. Passing a [User Object](#user-object) is optional.

* Blueprints
* C++

![Unreal Engine Get All Value Details](/docs/assets/unreal/blueprints-get-all-value-details.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);
auto User = UConfigCatUserWrapper::CreateUser(TEXT("#UNIQUE-USER-IDENTIFIER#"));

TArray<UConfigCatEvaluationWrapper*> AllValueDetails = ConfigCat->GetAllValueDetails(User);
```

## Custom Cache[â](#custom-cache "Direct link to Custom Cache")

**Coming soon**: [Support for Custom Cache #9](https://github.com/configcat/unreal-engine-sdk/issues/9)

info

The Unreal Engine SDK doesn't support custom cache implementations currently.

## Force refresh[â](#force-refresh "Direct link to Force refresh")

Call the `forceRefresh()` method on the client to download the latest config JSON and update the cache.

* Blueprints
* C++

![Unreal Engine Blueprint Force Refresh](/docs/assets/unreal/blueprints-force-refresh.png)

```
UConfigCatSubsystem* ConfigCat = UConfigCatSubsystem::Get(this);

ConfigCat->ForceRefresh();
```

## Using ConfigCat behind a proxy[â](#using-configcat-behind-a-proxy "Direct link to Using ConfigCat behind a proxy")

info

The Unreal Engine HTTP module doesn't support running behinde a proxy.

## Changing the default HTTP timeout[â](#changing-the-default-http-timeout "Direct link to Changing the default HTTP timeout")

Set the maximum wait time for a ConfigCat HTTP response by changing the *ConnectTimeoutMs* or *ReadTimeoutMs* in the ConfigCat `ProjectSettings`. The default *ConnectTimeoutMs* is 8 seconds. The default *ReadTimeoutMs* is 5 seconds.

![Unreal Engine Settings Http Timeout](/docs/assets/unreal/settings-http-timeout.png)

## Logging[â](#logging "Direct link to Logging")

All ConfigCat logs are inside the `LogConfigCat` category. By default the verbosity is set to `Log`, but it can be changed to any [Verbosity Level](https://docs.unrealengine.com/5.3/en-US/logging-in-unreal-engine/#logverbosity).

The verbosity can be changed:

Via **Command line arguments**:

Run the executable with `-LogCmds="LogConfigCat VerbosityLevel"`. For example: `-LogCmds="LogConfigCat Warning"` to only show warnings and above.

Via **DefaultEngine.ini**:

In the `[Core.Log]` category add `LogConfigCat=VerbosityLevel` inside the `DefaultEngine.ini`. For example:

```
[Core.Log]
LogConfigCat=Warning ;to only show warnings and above
```

Note: Since the Unreal Engine SDK is a wrapper of the CPP SDK, all logs coming from the CPP SDK are tagged wtih `[CPP-SDK]`.

Info level logging helps to inspect how a feature flag was evaluated:

```
[Info]: Evaluating getValue(isPOCFeatureEnabled)
User object: {
    "Email": "john@example.com",
    "Identifier": "435170f4-8a8b-4b67-a723-505ac7cdea92",
}
Evaluating rule: [Email:john@example.com] [CONTAINS] [@something.com] => no match
Evaluating rule: [Email:john@example.com] [CONTAINS] [@example.com] => match, returning: true
```

## Sensitive information handling[â](#sensitive-information-handling "Direct link to Sensitive information handling")

The frontend/mobile SDKs are running in your users' browsers/devices. The SDK is [downloading a config JSON](https://configcat.com/docs/docs/requests/.md) file from ConfigCat's CDN servers. The URL path for this config JSON file contains your SDK key, so the SDK key and the content of your config JSON file (feature flag keys, feature flag values, Targeting Rules, % rules) can be visible to your users. In ConfigCat, all SDK keys are read-only. They only allow downloading your config JSON files, but nobody can make any changes with them in your ConfigCat account.

If you do not want to expose the SDK key or the content of the config JSON file, we recommend using the SDK in your backend components only. You can always create a backend endpoint using the ConfigCat SDK that can evaluate feature flags for a specific user, and call that backend endpoint from your frontend/mobile applications.

Also, we recommend using [confidential targeting comparators](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md#confidential-text-comparators) in the Targeting Rules of those feature flags that are used in the frontend/mobile SDKs.

## Sample Applications[â](#sample-applications "Direct link to Sample Applications")

Check out our Sample Application how they use the ConfigCat SDK

* [ConfigCat Unreal Engine SDK Sample App](https://github.com/configcat-labs/configcat-unreal-fps-sample)

## Look Under the Hood[â](#look-under-the-hood "Direct link to Look Under the Hood")

* [ConfigCat Unreal Engine SDK's repository on GitHub](https://github.com/configcat/unreal-engine-sdk)


---

# Service Status & Monitoring

To check the current health and status of the service visit: <https://status.configcat.com>.

## API[â](#api "Direct link to API")

Serves the Dashboard with data. Provides an interface for creating and updating Feature Flags. Runs the business logic and keeps CDN Servers consistent with the Database.

## CDN[â](#cdn "Direct link to CDN")

Serving our customers' JSON configuration files containing Feature Flags, Settings and their values. Designed to scale quickly and to handle a massive number of requests.

## Dashboard[â](#dashboard "Direct link to Dashboard")

Graphical user interface (GUI) even for non-technical people to easily manage Configs, Feature Flags and Settings, invite team mates, add/remove Group Permissions or view the Audit Log.


---

# Subscription Plan Limits

This page lists the limits of the different subscription plans. See the [pricing page](https://configcat.com/pricing) for more information about the plans.

info

Every value marked with a \* in the table marks a technical limit. If you reach a technical limit [contact our support team](https://configcat.com/support/) and we will increase it for you.

|                                                                                                                   | Free    | Pro     | Smart   | Enterprise | Dedicated | Student | Teacher |
| ----------------------------------------------------------------------------------------------------------------- | ------- | ------- | ------- | ---------- | --------- | ------- | ------- |
| Config JSON downloads (million)                                                                                   | 5       | 25      | 250     | 1000       | 6000      | 25      | 5       |
| Network traffic (per month)                                                                                       | 20GB    | 100GB   | 1TB     | 4TB        | 24TB      | 100GB   | 100GB   |
| Products                                                                                                          | 2       | 3       | 10      | 1000\*     | 1000\*    | 3       | 1000    |
| Environments (per product)                                                                                        | 2       | 3       | 50\*    | 50\*       | 50\*      | 3       | 2       |
| Segments (per product)                                                                                            | 2       | 3       | 500\*   | 1000\*     | 1000\*    | 3       | 3       |
| Feature flags / Settings (per product)                                                                            | 10      | 100     | 500\*   | 500\*      | 500\*     | 1000    | 10      |
| Percentage Options (per feature flag)                                                                             | 4       | 8       | 500\*   | 500\*      | 500\*     | 8       | 4       |
| Targeting Rules (per feature flag)                                                                                | 4       | 8       | 500\*   | 500\*      | 500\*     | 8       | 4       |
| Targeting Rule comparison value length (chars)                                                                    | 65535   | 65535   | 65535   | 65535      | 65535     | 65535   | 65535   |
| Webhooks (per environment)                                                                                        | 1       | 3       | 200\*   | 200\*      | 200\*     | 3       | 1       |
| Connected integrations (per product, per integration type)<br />e.g. Datadog, Slack, Amplitude, Mixpanel, Segment | 2       | 3       | 100\*   | 100\*      | 100\*     | 3       | 3       |
| Permission groups (per product)                                                                                   | 1       | 2       | 100\*   | 100\*      | 100\*     | 2       | 3       |
| Audit log retention (days)                                                                                        | 7       | 35      | 35      | 750        | 750       | 35      | 7       |
| Verified domains for SAML                                                                                         | 1       | 1       | 1000\*  | 1000\*     | 1000\*    | 1       | 1       |
| Comparison value list length                                                                                      | 100     | 1000    | 15000   | 15000      | 15000     | 1000    | 1000    |
| Comparison value item length                                                                                      | 255     | 255     | 255     | 255        | 255       | 255     | 255     |
| User Provisioning (SCIM) synced users                                                                             | 10000\* | 10000\* | 10000\* | 10000\*    | 10000\*   | 10000\* | 10000\* |
| User Provisioning (SCIM) synced groups                                                                            | 1000\*  | 1000\*  | 1000\*  | 1000\*     | 1000\*    | 1000\*  | 1000\*  |
| User Provisioning (SCIM) groups with permissions                                                                  | 2       | 5       | 10      | 500\*      | 500\*     | 5\*     | 5\*     |
| Proxy profiles                                                                                                    | 1       | 2       | 10      | 100\*      | 100\*     | 2\*     | 2\*     |
| Proxy profile max selected SDK keys                                                                               | 1000\*  | 1000\*  | 1000\*  | 1000\*     | 1000\*    | 1000\*  | 1000\*  |


---

# Feature Flag Evaluation

This document offers an in-depth explanation of how the SDK determines the value of a feature flag when executing the `GetValue` function. Understanding this process requires prior knowledge of [targeting concepts](https://configcat.com/docs/docs/targeting/targeting-overview/.md).

The feature flag's value is determined by:

* The feature flag's rules defined on the Dashboard,
* The [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) provided to the `GetValue` function, and
* The [default value](https://configcat.com/docs/docs/targeting/targeting-overview/.md#default-value) passed to the `GetValue` function.

The feature flag's value always comes from exactly one rule, following this algorithm:

1. **Evaluation of Targeting Rules:** If Targeting Rules are present, the SDK evaluates them one by one, from top to bottom. It checks if all the conditions in the rule's IF part are met (i.e. all the conditions evaluate to true).

   <!-- -->

   * If the conditions are met, the THEN part determines the value to return. However, if the THEN part contains Percentage Options but the [Percentage Evaluation Attribute](https://configcat.com/docs/docs/targeting/percentage-options/.md#percentage-evaluation-attribute) is missing from the User Object, the SDK will skip the Targeting Rule and continue with the next rule - even though the Targeting Rule's conditions are met.
   * If the conditions aren't met, the SDK moves to the next Targeting Rule, or to step 2 (below) if there are no more Targeting Rules.

2. **Evaluation of Percentage Options:** If a Percentage Options rule exists, the SDK executes the [Evaluation of Percentage Options](#evaluation-of-percentage-options) algorithm to determine which Percentage Option applies to the user and returns the value associated with that option. If the [Percentage Evaluation Attribute](https://configcat.com/docs/docs/targeting/percentage-options/.md#percentage-evaluation-attribute) is missing from the User Object, the SDK skips to step 3 (below).

3. **Returning simple value:** At this stage, the only remaining "rule" is the simple value specified at the end of the feature flag, which the SDK then returns.

In the event of an unexpected error during evaluation, the SDK returns the [default value](https://configcat.com/docs/docs/targeting/targeting-overview/.md#default-value) passed to the `GetValue` function.

## Evaluation of a Targeting Rule[â](#evaluation-of-a-targeting-rule "Direct link to Evaluation of a Targeting Rule")

The SDK evaluates the conditions in the rule's IF part one by one, from top to bottom. The result of a condition can be one of the following: `true`, `false` or `cannot evaluate`.

The result `cannot evaluate` occurs when the necessary user attribute is missing, invalid or incorrectly formatted (the SDK logs these issues as warnings).

A Targeting Rule matches only when all its conditions evaluate to `true`. In any other cases, it doesn't match.

### Evaluation of a User Condition[â](#evaluation-of-a-user-condition "Direct link to Evaluation of a User Condition")

The SDK looks up the comparison attribute (the user attribute referenced by the condition) in the [User Object](https://configcat.com/docs/docs/targeting/user-object/.md). It compares the attribute value to the comparison value that is set on the Dashboard. The comparison is done according to the selected comparator, resulting in a `true` or `false` value. This will be the result of the condition.

The result of the condition will be `cannot evaluate` in case the comparison attribute is missing (`null`, `undefined`, `""`) or invalid (not of the type expected by the comparator or not formatted properly). In such cases, the Targeting Rule containing the condition will be skipped, and the evaluation will continue with the next rule.

### Evaluation of a Flag Condition[â](#evaluation-of-a-flag-condition "Direct link to Evaluation of a Flag Condition")

Using the same User Object used to evaluate the dependent flag, the SDK evaluates the prerequisite flag (the feature flag referenced by the condition). Then, the result is checked against the comparator. In case the prerequisite flag is not a boolean setting, the result is compared to the comparison value that is set on the Dashboard. The comparison results in a `true` or `false` value. This will be the result of the condition.

In case the prerequisite flag is missing or there is a type mismatch between the return value and the comparison value, the evaluation process stops, and the SDK will return the [default value](https://configcat.com/docs/docs/targeting/targeting-overview/.md#default-value). (Though this can happen only when using the [flag overrides](https://configcat.com/docs/docs/sdk-reference/js/overview/.md#flag-overrides) feature with invalid data.)

### Evaluation of a Segment Condition[â](#evaluation-of-a-segment-condition "Direct link to Evaluation of a Segment Condition")

The SDK looks up the segment referenced by the condition. Then evaluates the condition described by the segment similarly to [User Conditions](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md). Finally, the result is checked against the comparator:

* For **IS IN SEGMENT**, the result of the Segment Condition will be the same as the result of the segment itself.
* For **IS NOT IN SEGMENT**, the result will be negated (i.e. it will be the opposite of the result of the segment).

If the segment evaluates to `cannot evaluate`, so does the Segment Condition.

The evaluation process stops if the referenced segment is missing, and the SDK will return the [default value](https://configcat.com/docs/docs/targeting/targeting-overview/.md#default-value). (Though this can happen only when using the [flag overrides](https://configcat.com/docs/docs/sdk-reference/js/overview/.md#flag-overrides) feature with invalid data.)

## Evaluation of Percentage Options[â](#evaluation-of-percentage-options "Direct link to Evaluation of Percentage Options")

[Percentage Options](https://configcat.com/docs/docs/targeting/percentage-options/.md) are designed to be *consistent* and *sticky* across all SDKs, which means that users with the same attributes fall in the same group and get the same feature flag value across the supported platforms as long as the percentage split is the same.

The SDK looks up the [Percentage Evaluation Attribute](https://configcat.com/docs/docs/targeting/percentage-options/.md#percentage-evaluation-attribute) in the [User Object](https://configcat.com/docs/docs/targeting/user-object/.md), then:

* The SDK creates a hash from the combination of the specific feature flag's key and the Percentage Evaluation Attribute's value (by default, it is the user identifier).
* The hashing algorithm assigns the user a number between 0 and 99.
* The assigned number determines which group the user falls into, i.e. which Percentage Option applies to the user.

The fact that the above algorithm is implemented across all SDKs guarantees [stickiness](https://configcat.com/docs/docs/targeting/percentage-options/.md#stickiness), [consistency](https://configcat.com/docs/docs/targeting/percentage-options/.md#consistency) and [randomness](https://configcat.com/docs/docs/targeting/percentage-options/.md#randomness).

info

The evaluation process is entirely implemented within the SDKs, meaning your users' sensitive data never leaves your system. The data flow is one-way â from ConfigCat CDN servers to your SDKs â and ConfigCat does not receive or store any attributes of the [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) passed to the SDKs. This design prioritizes the privacy and security of user data.

### Example scenarios for Percentage Options[â](#example-scenarios-for-percentage-options "Direct link to Example scenarios for Percentage Options")

The following scenarios show how Percentage Options enable controlled and gradual rollouts of features.

Let's imagine the following setup:

* you have two users: Jane and Joe,
* you have two features flags: **isTwitterSharingEnabled** and **isFacebookSharingEnabled**,
* the feature flags use percentage-based targeting,
* the Percentage Evaluation Attribute is the user identifier (which is simply the users' name in this example).

First, the users are assigned a number between 0 and 99 based on the hash of the feature flag's key and their identifier. According to the Percentage Options specified on the Dashboard, this number determines which group they are assigned to, i.e. whether or not the feature is enabled for them.

Let's assume the hash algorithm produces the following numbers:

|      | isTwitterSharingEnabled                                                  | isFacebookSharingEnabled                                                   |
| ---- | ------------------------------------------------------------------------ | -------------------------------------------------------------------------- |
| Jane | `hash('isTwitterSharingEnabled' + 'Jane') mod 100`<br />results in **8** | `hash('isFacebookSharingEnabled' + 'Jane') mod 100`<br />results in **64** |
| Joe  | `hash('isTwitterSharingEnabled' + 'Joe') mod 100`<br />results in **32** | `hash(isFacebookSharingEnabled' + 'Joe') mod 100`<br />results in **12**   |

1\. **Initial Setup: 0% ON / 100% OFF**

|      | isTwitterSharingEnabled<br />0% ON / 100% OFF | isFacebookSharingEnabled<br />0% ON / 100% OFF |
| ---- | --------------------------------------------- | ---------------------------------------------- |
| Jane | 8 >= 0<br />â **OFF**                         | 64 >= 0<br />â **OFF**                         |
| Joe  | 32 >= 0<br />â **OFF**                        | 12 >= 0<br />â **OFF**                         |

2\. **Adjustment to 10% ON / 90% OFF** In this case both feature flags are enabled for only 10% of users.

|      | isTwitterSharingEnabled<br />10% ON / 90% OFF | isFacebookSharingEnabled<br />10% ON / 90% OFF |
| ---- | --------------------------------------------- | ---------------------------------------------- |
| Jane | 8 < 10<br />â **ON**                          | 64 >= 10<br />â **OFF**                        |
| Joe  | 32 >= 10<br />â **OFF**                       | 12 >= 10<br />â **OFF**                        |

info

The **isTwitterSharingEnabled** feature flag is enabled only for Jane because Joe's user identifier places him in a different group.

However, **isFacebookSharingEnabled** is disabled for both of them even though both feature flags are set to 10% ON / 90% OFF. This happens because the feature flag key is also involved in computing the hash.

3\. **Increasing *isTwitterSharingEnabled* to 40% ON / 60% OFF**

|      | isTwitterSharingEnabled<br />40% ON / 60% OFF | isFacebookSharingEnabled<br />10% ON / 90% OFF |
| ---- | --------------------------------------------- | ---------------------------------------------- |
| Jane | 8 < 40<br />â **ON**                          | 64 >= 10<br />â **OFF**                        |
| Joe  | 32 < 40<br />â **ON**                         | 12 >= 10<br />â **OFF**                        |

4\. **Rolling Back to a Safer 10% ON / 90% OFF**

Same setup as in Step 2.

There are cases when you want to roll back a feature flag to a safer state. In this case, you can change the Percentage Options to 10% ON / 90% OFF again. The sticky nature of percentage-based targeting ensures that the same userbase is served **ON** as in Step 2, not another random 10% of users.

|      | isTwitterSharingEnabled<br />10% ON / 90% OFF | isFacebookSharingEnabled<br />10% ON / 90% OFF |
| ---- | --------------------------------------------- | ---------------------------------------------- |
| Jane | 8 < 10<br />â **ON**                          | 64 >= 10<br />â **OFF**                        |
| Joe  | 32 >= 10<br />â **OFF**                       | 12 >= 10<br />â **OFF**                        |

5\. **Final Step: Moving to 100% ON / 0% OFF**

After testing the feature flags, you can safely move them to 100% ON. This enables the features for all users.

|      | isTwitterSharingEnabled<br />100% ON / 0% OFF | isFacebookSharingEnabled<br />100% ON / 0% OFF |
| ---- | --------------------------------------------- | ---------------------------------------------- |
| Jane | 8 < 100<br />â **ON**                         | 64 < 100<br />â **ON**                         |
| Joe  | 32 < 100<br />â **ON**                        | 12 < 100<br />â **ON**                         |


---

# Percentage Options

## What are Percentage Options?[â](#what-are-percentage-options "Direct link to What are Percentage Options?")

Using *Percentage Options*, you can define that a certain percentage of users should receive a specific value.

This way, you can gradually release a new feature to a subset of users. Instead of releasing a feature to all users simultaneously, a specific percentage of users are selected to receive access to the feature. This allows developers to control and monitor the impact of the new feature in a controlled manner.

## How to add Percentage Options?[â](#how-to-add-percentage-options "Direct link to How to add Percentage Options?")

You can add Percentage Options to a feature flag by clicking the **+%** button on the Dashboard.

![Add percentage options](/docs/assets/targeting/percentage-options/add-percentage-options_192dpi.png)

## How does it work? - Anatomy of Percentage Options[â](#how-does-it-work---anatomy-of-percentage-options "Direct link to How does it work? - Anatomy of Percentage Options")

Percentage Options is a list of *% value* and *served value* pairs, where % values add up to 100.

It divides users into groups according to the percentage split defined by the % values. The grouping is random and based on the [Percentage Evaluation Attribute](#percentage-evaluation-attribute). By default, this is the [User Object's](https://configcat.com/docs/docs/targeting/user-object/.md) **Identifier** attribute. However, you can use any other user attribute as the basis of the grouping.

info

If the Percentage Evaluation Attribute is not present in the [User Object](https://configcat.com/docs/docs/targeting/user-object/.md), the ["To unidentified" value](https://configcat.com/docs/docs/targeting/targeting-overview/.md#to-all-users--to-all-other--to-unidentified-value) will be returned. (Read more about the feature flag evaluation algorithm [here](https://configcat.com/docs/docs/targeting/feature-flag-evaluation/.md).)

Percentage Options are designed to be [sticky](#stickiness) and [consistent](#consistency) across all SDKs, ensuring a reliable experience.

### % value[â](#-value "Direct link to % value")

Any number between 0 and 100 that represents a randomly allocated group of your users.

### Served value[â](#served-value "Direct link to Served value")

The value to return when the user falls into the group determined by the % value.

### Number of Percentage Options[â](#number-of-percentage-options "Direct link to Number of Percentage Options")

In the case of a feature flag (boolean setting), there must be two options. One for the **ON** and one for the **OFF** state.

In the case of a string, integer or double setting, the maximum number of options [depends on your subscription plan](https://configcat.com/docs/docs/subscription-plan-limits/.md). You can add options by clicking the **+% OPTION** button.

## Percentage Options within Targeting Rules[â](#percentage-options-within-targeting-rules "Direct link to Percentage Options within Targeting Rules")

Percentage Options can be used in combination with Targeting Rules.

In this case, the Percentage Options will be evaluated only if the Targeting Rule matches. In other words, the Percentage Options apply only to the users that matched the Targeting Rule.

info

If the Percentage Evaluation Attribute is not present in the [User Object](https://configcat.com/docs/docs/targeting/user-object/.md), the targeting rule will be skipped - despite the matching Targeting Rule. Read more about the feature flag evaluation algorithm [here](https://configcat.com/docs/docs/targeting/feature-flag-evaluation/.md).

![Percentage options within targeting rules](/docs/assets/targeting/percentage-options/percentage-options-within-targeting-rule_192dpi.png)

## Percentage Evaluation Attribute[â](#percentage-evaluation-attribute "Direct link to Percentage Evaluation Attribute")

The *Percentage Evaluation Attribute* (sometimes called *percentage attribute*) is the user attribute by which users are grouped. By default, it is the [User Object's](https://configcat.com/docs/docs/targeting/user-object/.md) **Identifier** attribute. However, you can use any other user attribute as the basis of the grouping (see the example use case [below](#percentage-options-based-on-other-user-attributes)).

### How to change the Percentage Evaluation Attribute?[â](#how-to-change-the-percentage-evaluation-attribute "Direct link to How to change the Percentage Evaluation Attribute?")

In the top right corner of the feature flag, open the kebab (3 dots) menu and choose the **Change percentage attribute** item.

info

The selected Percentage Evaluation Attribute applies to all Percentage Options within the feature flag - but only in the current ConfigCat environment.

![Change percentage attribute](/docs/assets/targeting/percentage-options/change-percentage-attribute_192dpi.png)

## Stickiness[â](#stickiness "Direct link to Stickiness")

*Stickiness* means that the same user will always get the same value for the same percentage split in the case of a specific feature flag, regardless of the history of the feature flag. This is achieved by implementing a deterministic hashing algorithm based on the feature flag's key and the Percentage Evaluation Attribute.

For example, if you have a feature flag with a Percentage Option of **20% ON**, then you change the Percentage Option to **40% ON**, and then back to **20% ON**, the same 20% of users will get the **ON** value for the feature flag just like the first time.

For a demonstration of this concept, see this [example scenario](https://configcat.com/docs/docs/targeting/feature-flag-evaluation/.md#example-scenarios-for-percentage-options).

## Consistency[â](#consistency "Direct link to Consistency")

*Consistency* means that the same user will always get the same value for the same percentage split in the case of a specific feature flag, no matter which SDK is used. This is achieved by using the same hashing algorithm across all SDKs.

For example, if you have a feature flag with a Percentage Option of **20% ON**, then the same 20% of users will get the **ON** value across all SDKs. No matter if a user is on iOS, Android, or Web, they will always get the same value for the feature flag.

## Randomness[â](#randomness "Direct link to Randomness")

The same user might get different values for the same percentage split in the case of different feature flags. This is because the hashing algorithm is based on the combination of the feature flag's key and the Percentage Evaluation Attribute. Since feature flag keys are unique, the resulting hashes will usually be different as well.

For example, if you have two feature flags with Percentage Options of **20% ON**, then a different 20% of users will get the **ON** value for each feature flag.

## Examples[â](#examples "Direct link to Examples")

### Simple phased rollout / Canary release / Percentage rollout scenario[â](#simple-phased-rollout--canary-release--percentage-rollout-scenario "Direct link to Simple phased rollout / Canary release / Percentage rollout scenario")

#### Context[â](#context "Direct link to Context")

Our demo company, Whisker Co. is about to release a new feature called **Park Weather Info**. The stakeholders want to make sure that the new feature is received well by the customers.

#### Goal[â](#goal "Direct link to Goal")

To get some feedback from our customers before releasing it to everyone, we initially want to make the feature available to 20% of the customers only.

#### Solution[â](#solution "Direct link to Solution")

Let's create a feature flag called **Enable Park Weather Info** with Percentage Options set to **20% ON** and **80% OFF**.

![Simple phased rollout example](/docs/assets/targeting/percentage-options/simple-phased-rollout-example_192dpi.png)

### A/B/n testing scenario[â](#abn-testing-scenario "Direct link to A/B/n testing scenario")

#### Context[â](#context-1 "Direct link to Context")

The marketing specialists at Whisker Co. want to introduce a discount strategy to boost webshop purchases. They have several ideas but lack the statistical data needed to determine which would be most effective.

#### Goal[â](#goal-1 "Direct link to Goal")

To learn which is the most effective discount strategy, we want to perform an A/B/C test.

#### Solution[â](#solution-1 "Direct link to Solution")

We need a string or integer setting for this task because we need to represent 3 different variations. Let's create a string setting named **Discount Type** (as textual values tell more than numbers).

The go-to feature for A/B testing is Percentage Options. So let's add one with 3 options, each covering 1/3rd of our customers.

![A/B/n testing example](/docs/assets/targeting/percentage-options/abn-testing-example_192dpi.png)

info

To make all this useful, that is, to measure the effectiveness of the different strategies, we also need to integrate with an analytics service like [Amplitude](https://configcat.com/docs/docs/integrations/amplitude/.md) or [Mixpanel](https://configcat.com/docs/docs/integrations/mixpanel/.md) and update our application to send feature flag evaluation results to it.

### Complex phased rollout / Canary release / Percentage rollout scenario[â](#complex-phased-rollout--canary-release--percentage-rollout-scenario "Direct link to Complex phased rollout / Canary release / Percentage rollout scenario")

#### Context[â](#context-2 "Direct link to Context")

Whisker Co. is about to release a new feature called **Park Weather Info**. The stakeholders want to make sure that the release of the new feature goes smoothly and it is received well by the customers.

#### Goal[â](#goal-2 "Direct link to Goal")

To do some in-house testing and also get some feedback from our customers before releasing it to everyone, we initially want to make the feature available to the employees and to 20% of the customers only.

#### Solution[â](#solution-2 "Direct link to Solution")

Let's create a feature flag called **Enable Park Weather Info** with a Targeting Rule that matches the employees at Whisker Co. and Percentage Options set to **20% ON** and **80% OFF** for the rest of the users (i.e. for the customers).

![Complex phased rollout example](/docs/assets/targeting/percentage-options/complex-phased-rollout-example_192dpi.png)

### Platform-specific phased rollout[â](#platform-specific-phased-rollout "Direct link to Platform-specific phased rollout")

#### Context[â](#context-3 "Direct link to Context")

Whisker Co. is about to release a new feature called **Cafe Notifications** in their mobile app, which has an Android and an iOS version. We know that the userbase of the iOS app is much larger than the Android app. The stakeholders want to make sure that the new feature is received well by the customers.

#### Goal[â](#goal-3 "Direct link to Goal")

To get some feedback from our customers before releasing it to everyone, we initially want to make the feature available to a limited number of customers only. We also want to release the feature to roughly the same number of Android and iOS users.

#### Solution[â](#solution-3 "Direct link to Solution")

Let's create a feature flag called **Cafe Notifications** with two Targeting Rules: one that matches Android users and one that matches iOS users. Then change the THEN part of both to Percentage Options. Finally, let's set the percentages so that the feature is enabled for roughly the same number of users (e.g. 60% for Android users, 20% for iOS users).

![Platform-specific phased rollout example](/docs/assets/targeting/percentage-options/platform-specific-phased-rollout-example_192dpi.png)

### Percentage Options based on other user attributes[â](#percentage-options-based-on-other-user-attributes "Direct link to Percentage Options based on other user attributes")

#### Context[â](#context-4 "Direct link to Context")

Let's imagine that at Whisker Co., we have a custom attribute named **Tenant ID** that is used to identify the tenants of our customers.

#### Goal[â](#goal-4 "Direct link to Goal")

We want to release a new feature, **Park Weather Info**, to 20% of our customers based on their **Tenant ID**.

#### Solution[â](#solution-4 "Direct link to Solution")

Let's create a feature flag called **Enable Park Weather Info** with Percentage Options set to **20% ON** and **80% OFF**. Finally, let's set the Percentage Evaluation Attribute to **Tenant ID** as described [here](#percentage-evaluation-attribute).

![Custom percentage attribute example](/docs/assets/targeting/percentage-options/custom-percentage-attribute-example_192dpi.png)


---

# Targeting Overview

Targeting allows you to enable or disable a feature for specific users or groups of users in your application. Typical use cases are:

* [Beta testing](https://configcat.com/docs/docs/glossary/.md#beta-testing)
* [A/B testing](https://configcat.com/docs/docs/glossary/.md#ab-testing)
* [Phased rollouts, canary releases](https://configcat.com/docs/docs/glossary/.md#canary-release)

## How does it work?[â](#how-does-it-work "Direct link to How does it work?")

1. On the [ConfigCat Dashboard](https://app.configcat.com), you add [Targeting Rules](https://configcat.com/docs/docs/targeting/targeting-rule/targeting-rule-overview/.md) and/or [Percentage Options](https://configcat.com/docs/docs/targeting/percentage-options/.md) to your feature flag.
2. You pass a [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) to the ConfigCat SDK in your application.
3. The ConfigCat SDK will use the User Object and the rules defined on the Dashboard to determine whether the feature should be enabled for the user.

## What is what?[â](#what-is-what "Direct link to What is what?")

![Targeting Overview](/docs/assets/targeting/targeting-overview/what-is-what_192dpi.png)

### Feature Flag / Setting[â](#feature-flag--setting "Direct link to Feature Flag / Setting")

A *setting* is a set of rules that yields a **boolean**, **string**, **integer** or **double** value, which can be used to configure your application. It is also known as a configuration value, configuration setting, configuration parameter, etc.

A *feature flag* is a **boolean** setting used to decide whether an application feature should be turned ON or OFF. It is also known as a feature toggle, feature switch, feature flipper, conditional feature, etc.

info

Throughout this documentation, we generally use the term *feature flag* to refer to both feature flags and settings for simplicity because feature flags are the most common type of settings.

### Targeting Rule[â](#targeting-rule "Direct link to Targeting Rule")

A *Targeting Rule* consists of a collection of conditions and a value to serve. If the conditions are met (the Targeting Rule *matches*), the value is served, i.e. returned as the result of the feature flag evaluation. More about Targeting Rules [here](https://configcat.com/docs/docs/targeting/targeting-rule/targeting-rule-overview/.md).

### Condition[â](#condition "Direct link to Condition")

A *condition* is a logical expression that can be evaluated to true or false. There are three types of conditions: [User Condition](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md), [Flag Condition (Prerequisite)](https://configcat.com/docs/docs/targeting/targeting-rule/flag-condition/.md), [Segment Condition](https://configcat.com/docs/docs/targeting/targeting-rule/segment-condition/.md). For a Targeting Rule to match, all of its conditions must evaluate to true.

### Percentage Options[â](#percentage-options "Direct link to Percentage Options")

*Percentage Options* divide users into groups, each receiving a specific value. The groups are allocated according to the specified percentage split. Percentage Options are often used for A/B testing or phased rollouts. More about Percentage Options [here](https://configcat.com/docs/docs/targeting/percentage-options/.md).

### "To all users" / "To all other" / "To unidentified" value[â](#to-all-users--to-all-other--to-unidentified-value "Direct link to \"To all users\" / \"To all other\" / \"To unidentified\" value")

A feature flag always contains a trivial "rule", a simple value after the actual rules. This value is returned when none of the preceding rules yields a result.

### Default value[â](#default-value "Direct link to Default value")

The ConfigCat SDK's feature flag evaluation functions (e.g. `GetValue`) require you to provide a *default value*. This value will be returned in case the SDK fails to fetch the config or some other error occurs during the evaluation of the feature flag.

### User Object[â](#user-object "Direct link to User Object")

A *User Object* is a collection of *user attributes* that describe the properties of a user. Referencing these attributes in conditions allows you to define rules for targeting users. More about the User Object [here](https://configcat.com/docs/docs/targeting/user-object/.md).

## Examples[â](#examples "Direct link to Examples")

### Phased rollout / Canary release / Percentage rollout scenario[â](#phased-rollout--canary-release--percentage-rollout-scenario "Direct link to Phased rollout / Canary release / Percentage rollout scenario")

#### Context[â](#context "Direct link to Context")

Our demo company, Whisker Co. is about to release a new feature called **Park Weather Info**. The stakeholders want to make sure that the release of the new feature goes smoothly and it is received well by the customers.

#### Goal[â](#goal "Direct link to Goal")

To make sure that the new feature is working as expected before releasing it to everyone, we initially want to make the feature available to the employees and to 20% of the customers only.

#### Solution[â](#solution "Direct link to Solution")

Let's create a feature flag called **Enable Park Weather Info** with a Targeting Rule that matches the employees at Whisker Co. and Percentage Options set to **20% ON** and **80% OFF** for the rest of the users (i.e. for the customers).

Here is what such a feature flag looks like on the Dashboard:

![Phased rollout example](/docs/assets/targeting/targeting-overview/phased-rollout-example_192dpi.png)

Here is how we get the value of the feature flag in your application:

```
// Create the User Object
const userObject = {
  // Used by the Percentage Options to split the users into groups
  identifier: '867428724',
  // Used by the Targeting Rule's User Condition to determine whether
  // the user is an employee at Whisker Co.
  email: 'isaac@whisker.cc',
};

// Get the value of the feature flag
const value = await configCatClient.getValueAsync(
  // Feature flag key
  'enableParkWeatherInfo',
  // Default value - by providing `false` we specify that the feature should not be
  // enabled if the SDK fails to fetch the config or some other error occurs
  false,
  // User Object
  userObject,
);
```


---

# Flag Condition (Prerequisite)

## What is a Flag Condition? What is a prerequisite flag?[â](#what-is-a-flag-condition-what-is-a-prerequisite-flag "Direct link to What is a Flag Condition? What is a prerequisite flag?")

A *Flag Condition* is a condition that is based on the comparison of another feature flag's value and a preset value (*comparison value*). In other words, a Flag Condition creates a dependency between the feature flag containing the condition (*dependent flag*) and another feature flag (*prerequisite flag*, aka. master feature flag, master switch, inter-dependent feature flag, global toggle, etc.)

This allows you to control the value of multiple feature flags by changing the value of a single, central feature flag. Prerequisite flags are useful for managing complex feature dependencies and ensuring a smooth user experience during feature rollouts.

## How does the Flag Condition work?[â](#how-does-the-flag-condition-work "Direct link to How does the Flag Condition work?")

The prerequisite flag is evaluated with the same User Object as the one used to evaluate the dependent flag, and then the result is checked against the comparator that you set on the Dashboard.

The prerequisite flag can be other than a feature flag (boolean setting), in which case the prerequisite flag's evaluated value will be compared to the comparison value that you set on the Dashboard. The comparison is done according to the selected comparator and will result in true or false. This will be the result of the condition.

For more details on the evaluation of Flag Conditions, please refer to [Feature Flag Evaluation](https://configcat.com/docs/docs/targeting/feature-flag-evaluation/.md#evaluation-of-a-flag-condition).

## How to set a Flag Condition?[â](#how-to-set-a-flag-condition "Direct link to How to set a Flag Condition?")

You can add a Flag Condition to a feature flag by clicking the **+IF** ("Add targeting rule") button on the Dashboard.

The prerequisite flag can be any feature flag already defined in the same config on the Dashboard. In the case of a non-boolean setting (e.g. text setting or number setting), you can also set a comparison value which the prerequisite flag's value will be compared to.

![Add prerequisite](/docs/assets/targeting/targeting-rule/flag-condition/add-prerequisite_192dpi.png)

## Anatomy of a Flag Condition[â](#anatomy-of-a-flag-condition "Direct link to Anatomy of a Flag Condition")

#### Prerequisite is a feature flag (boolean setting)[â](#prerequisite-is-a-feature-flag-boolean-setting "Direct link to Prerequisite is a feature flag (boolean setting)")

![Flag condition anatomy (feature flag)](/docs/assets/targeting/targeting-rule/flag-condition/flag-condition-anatomy1_192dpi.png)

#### Prerequisite is a string, integer or double setting[â](#prerequisite-is-a-string-integer-or-double-setting "Direct link to Prerequisite is a string, integer or double setting")

![Flag condition anatomy (non-boolean setting)](/docs/assets/targeting/targeting-rule/flag-condition/flag-condition-anatomy2_192dpi.png)

A Flag Condition consists of the following:

* ***Prerequisite flag key*:** The key of the feature flag or setting on which the condition is based.
* ***Comparator*:** The comparison operator that defines the relation between the prerequisite flag's value and the comparison value. See the available comparators below.
* ***Comparison value*:** The value that the prerequisite flag's value is compared to. Available only when the prerequisite flag is a string, integer or double setting.

### Comparator[â](#comparator "Direct link to Comparator")

Different comparators are available for different types of prerequisites.

When the prerequisite is a feature flag (boolean setting), the following comparators are available:

| Comparator | Description                                  |
| ---------- | -------------------------------------------- |
| IS ON      | Checks whether the prerequisite flag is ON.  |
| IS OFF     | Checks whether the prerequisite flag is OFF. |

When the prerequisite is a string, integer or double setting, the following comparators are available:

| Comparator | Description                                                                        |
| ---------- | ---------------------------------------------------------------------------------- |
| EQUALS     | Checks whether the prerequisite flag's value is equal to the comparison value.     |
| NOT EQUALS | Checks whether the prerequisite flag's value is not equal to the comparison value. |

## Examples[â](#examples "Direct link to Examples")

### Enable feature depending on the availability of another one[â](#enable-feature-depending-on-the-availability-of-another-one "Direct link to Enable feature depending on the availability of another one")

#### Context[â](#context "Direct link to Context")

Our demo company, Whisker Co. has a mobile app, which, among other things, can show the cat-friendly cafÃ©s in the neighborhood.

The app can send notifications about the users' favorite cafÃ©s. This feature is not available to everyone though, it's enabled using the **Enable Cafe Notifications** feature flag. There is another feature that allows users to rate cafÃ©s, whose availability is controlled similarly, via the **Enable Cafe Ratings** feature flag.

#### Goal[â](#goal "Direct link to Goal")

We want to make sure that users only receive notifications about their favorite cafÃ©s if they can rate them.

#### Solution[â](#solution "Direct link to Solution")

ConfigCat offers a built-in way to solve this problem without the need of extra coding: prerequisite flags.

We can achieve our goal by adding a Targeting Rule containing a Flag Condition to **Enable Cafe Notifications**, then referencing **Enable Cafe Ratings** in the condition and setting the comparator to **IS ON**, meaning that the **Enable Cafe Notifications** feature flag will be enabled only if the **Enable Cafe Ratings** feature flag is ON.

On the Dashboard:

![Flag condition example](/docs/assets/targeting/targeting-rule/flag-condition/flag-condition-example_192dpi.png)


---

# Segment Condition

## What is a Segment Condition? What is a segment?[â](#what-is-a-segment-condition-what-is-a-segment "Direct link to What is a Segment Condition? What is a segment?")

A *Segment Condition* is a condition that is based on the evaluation of a segment. A *segment* is approximately a reusable, predefined [User Condition](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md).

Segments allow you to define user groups based on any user attribute. You can reference segments in Targeting Rules. When you update a segment definition, the changes will be reflected automatically in all the Targeting Rules that reference it.

For example, you can define a segment called **Beta Testers** and use that segment for all features you want to be available to beta testers.

One segment belongs to one product and can be used in multiple feature flags within the same product.

## How does the Segment Condition work?[â](#how-does-the-segment-condition-work "Direct link to How does the Segment Condition work?")

The segment is evaluated with the [User Object](https://configcat.com/docs/docs/targeting/user-object/.md). Then the result is checked against the comparator you set on the Dashboard:

* For **IS IN SEGMENT**, the result of the Segment Condition will be the same as the result of the segment itself.
* For **IS NOT IN SEGMENT**, the result will be negated (i.e. it will be the opposite of the result of the segment).

For more details on the evaluation of Segment Conditions, please refer to [Feature Flag Evaluation](https://configcat.com/docs/docs/targeting/feature-flag-evaluation/.md#evaluation-of-a-segment-condition).

## How to set a Segment Condition?[â](#how-to-set-a-segment-condition "Direct link to How to set a Segment Condition?")

You can add a Segment Condition to a feature flag by clicking the **+IF** ("Add targeting rule") button on the Dashboard.

![Target a segment](/docs/assets/targeting/targeting-rule/segment-condition/target-segment_192dpi.png)

## Where can I define segments?[â](#where-can-i-define-segments "Direct link to Where can I define segments?")

You can define your segments on the ConfigCat Dashboard, on the [Segments page](https://app.configcat.com/product/segments).

![Add segment](/docs/assets/targeting/targeting-rule/segment-condition/add-segment_192dpi.png)

## Anatomy of a Segment Condition[â](#anatomy-of-a-segment-condition "Direct link to Anatomy of a Segment Condition")

![Segment condition](/docs/assets/targeting/targeting-rule/segment-condition/segment-condition-anatomy_192dpi.png)

A Segment Condition consists of two parts:

* ***Segment comparator*:** The comparison operator defines the relation between the user and the segment. See the available comparators below.
* ***Segment*:** The segment that the condition is based on.

### Segment comparator[â](#segment-comparator "Direct link to Segment comparator")

| Comparator        | Description                                             |
| ----------------- | ------------------------------------------------------- |
| IS IN SEGMENT     | Checks whether the user is in the selected segment.     |
| IS NOT IN SEGMENT | Checks whether the user is not in the selected segment. |

## Anatomy of a Segment[â](#anatomy-of-a-segment "Direct link to Anatomy of a Segment")

| Field                | Purpose                                                                                                                                            |
| -------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| Name                 | The name of the segment.                                                                                                                           |
| Description          | The description of the segment. It's a good idea to add a hint that helps you remember what the segment is for.                                    |
| Comparison attribute | The attribute that the segment is based on. Can be **Identifier** (user ID), **Email**, **Country**, or any custom attribute.                      |
| Comparator           | The comparison operator. Defines the relation between the comparison attribute and the comparison value.                                           |
| Comparison value     | The value that the attribute is compared to. Can be a string, a number, a semantic version or a comma-separated list, depending on the comparator. |

### Comparison attribute[â](#comparison-attribute "Direct link to Comparison attribute")

A property of your user (e.g. email address, geographic location). Your application should pass the attribute values (e.g. `'jane@example.com'`, `'Europe'`) to the ConfigCat SDK as a [User Object](https://configcat.com/docs/docs/targeting/user-object/.md).

There are 3 predefined attributes. Additionally, you can define your custom attributes as well:

| Comparison attribute name | Description                                                                                         |
| ------------------------- | --------------------------------------------------------------------------------------------------- |
| Identifier                | Usually, it is a unique user identifier in your application.                                        |
| Email                     | The e-mail address of your user.                                                                    |
| Country                   | The location of your user. Might be useful for testing a new feature in specific countries only.    |
| Custom                    | Any additional attribute (e.g. **OS version**). Can be defined by typing its name into the textbox. |

### Comparison value[â](#comparison-value "Direct link to Comparison value")

Any string, number, or comma-separated list. Will be compared to the selected comparison attribute using the comparator. **Max. length: 65535 characters.**

### Comparator[â](#comparator "Direct link to Comparator")

#### Confidential text comparators[â](#confidential-text-comparators "Direct link to Confidential text comparators")

We recommend using confidential text comparators when targeting users based on their sensitive data (like email address, name, etc.) In this case, the feature flag evaluation is performed using the SHA256 hashes of the values to ensure that the comparison values are not exposed. This can cause an increase in the size of the config JSON file and the overall network traffic. Yet it is not recommended to use the cleartext version of the confidential comparators unless the increased network traffic becomes an issue.

The following comparators expect the comparison attribute to be a string value and the comparison value to be a string or a list of strings. The comparison is case-sensitive.

| Comparator             | Description                                                                                                                                        |
| ---------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| IS ONE OF (hashed)     | Checks whether the comparison attribute is equal to any of the comparison values. (Comparison value is interpreted as a comma-separated list.)     |
| IS NOT ONE OF (hashed) | Checks whether the comparison attribute is not equal to any of the comparison values. (Comparison value is interpreted as a comma-separated list.) |

#### Text comparators[â](#text-comparators "Direct link to Text comparators")

The following comparators expect the comparison attribute to be a string value and the comparison value to be a string or a list of strings. The comparison is case-sensitive.

info

Consider using confidential text comparators if you plan to target users based on their sensitive data, e.g. email address or company domain.

| Comparator                   | Description                                                                                                                                        |
| ---------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| CONTAINS (cleartext)         | Checks whether the comparison attribute contains the comparison value as a substring.                                                              |
| DOES NOT CONTAIN (cleartext) | Checks whether the comparison attribute does not contain the comparison value as a substring.                                                      |
| IS ONE OF (cleartext)        | Checks whether the comparison attribute is equal to any of the comparison values. (Comparison value is interpreted as a comma-separated list.)     |
| IS NOT ONE OF (cleartext)    | Checks whether the comparison attribute is not equal to any of the comparison values. (Comparison value is interpreted as a comma-separated list.) |

#### Semantic version comparators[â](#semantic-version-comparators "Direct link to Semantic version comparators")

The following comparators expect the comparison attribute to be a string containing a valid semantic version and the comparison value to be a semantic version or a list of semantic versions.

Comparison is performed according to the [Semantic Versioning specification](https://semver.org/).

| Comparator             | Description                                                                                                                                                                                               |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| IS ONE OF (semver)     | Checks whether the comparison attribute interpreted as a semantic version is equal to any of the comparison values. (Comparison value is interpreted as a comma-separated list of semantic versions.)     |
| IS NOT ONE OF (semver) | Checks whether the comparison attribute interpreted as a semantic version is not equal to any of the comparison values. (Comparison value is interpreted as a comma-separated list of semantic versions.) |
| < (semver)             | Checks whether the comparison attribute interpreted as a semantic version is less than the comparison value.                                                                                              |
| <= (semver)            | Checks whether the comparison attribute interpreted as a semantic version is less than or equal to the comparison value.                                                                                  |
| > (semver)             | Checks whether the comparison attribute interpreted as a semantic version is greater than the comparison value.                                                                                           |
| >= (semver)            | Checks whether the comparison attribute interpreted as a semantic version is greater than or equal to the comparison value.                                                                               |

#### Number comparators[â](#number-comparators "Direct link to Number comparators")

The following comparators expect the comparison attribute and the comparison value to be numbers.

| Comparator  | Description                                                                                                               |
| ----------- | ------------------------------------------------------------------------------------------------------------------------- |
| = (number)  | Checks whether the comparison attribute interpreted as a decimal number is equal to the comparison value.                 |
| <> (number) | Checks whether the comparison attribute interpreted as a decimal number is not equal to the comparison value.             |
| < (number)  | Checks whether the comparison attribute interpreted as a decimal number is less than the comparison value.                |
| <= (number) | Checks whether the comparison attribute interpreted as a decimal number is less than or equal to the comparison value.    |
| > (number)  | Checks whether the comparison attribute interpreted as a decimal number is greater than the comparison value.             |
| >= (number) | Checks whether the comparison attribute interpreted as a decimal number is greater than or equal to the comparison value. |

## Examples[â](#examples "Direct link to Examples")

### Beta testing scenario[â](#beta-testing-scenario "Direct link to Beta testing scenario")

#### Context[â](#context "Direct link to Context")

The developers at our demo company, Whisker Co. just finished implementing a nice new feature which allows users to personalize the layout of the webshop. It's time for a beta test.

#### Goal[â](#goal "Direct link to Goal")

We want to make the **Personalized Layout** feature of the webshop available to the beta testers.

#### Solution[â](#solution "Direct link to Solution")

We could simply achieve our goal using a Targeting Rule with a User Condition. However, **Personalized Layout** is certainly not the last feature developed at Whisker Co., so it's a good idea to create a segment named e.g. **Beta Testers** for our beta testers. This makes it easier for us to release further features for beta testing in the future.

After creating the segment, we can complete our task by adding a Targeting Rule containing a Segment Condition to **Enable Personalized Layout**, then referencing the **Beta Testers** segment in the condition and setting the comparator to **IS IN SEGMENT**.

On the Dashboard:

![Beta testing example](/docs/assets/targeting/targeting-rule/segment-condition/beta-testing-example_192dpi.png)


---

# Targeting Rule

## What is a Targeting Rule?[â](#what-is-a-targeting-rule "Direct link to What is a Targeting Rule?")

*Targeting Rules* allow you to set different feature flag values for specific users or groups of users in your application.

You can set conditions based on user attributes, feature flags, or segments within a Targeting Rule.

### AND and OR relationships[â](#and-and-or-relationships "Direct link to AND and OR relationships")

The conditions within a Targeting Rule are in an **AND** relationship, meaning that all of them must evaluate to true for the Targeting Rule to match.

The Targeting Rules are in an **OR** relationship, meaning that the Targeting Rule which matches first in order, from top to bottom, will provide the value of the feature flag.

## How to add a Targeting Rule?[â](#how-to-add-a-targeting-rule "Direct link to How to add a Targeting Rule?")

You can add a Targeting Rule to a feature flag by clicking the **+IF** ("Add targeting rule") button on the Dashboard. To add more Targeting Rules, click the **+OR** button at the bottom of the last Targeting Rule.

![Add targeting rule](/docs/assets/targeting/targeting-rule/add-targeting-rule_192dpi.png)

## How does it work? - Anatomy of a Targeting Rule[â](#how-does-it-work---anatomy-of-a-targeting-rule "Direct link to How does it work? - Anatomy of a Targeting Rule")

A Targeting Rule consists of an *IF part* and a *THEN part*.

![Targeting rule anatomy](/docs/assets/targeting/targeting-rule/targeting-rule-anatomy_192dpi.png)

### IF part[â](#if-part "Direct link to IF part")

The *IF part* contains the conditions, which are logical expressions that evaluate to true or false.

The conditions are in an **AND** relationship, meaning that all of them must evaluate to true for the Targeting Rule to match.

The conditions can be added to the Targeting Rule on the Dashboard, using the **+AND** ("Add AND condition") button. There are three types of conditions:

* [User Condition](https://configcat.com/docs/docs/targeting/targeting-rule/user-condition/.md) - A condition that is based on some property of the user.
* [Flag Condition (Prerequisite)](https://configcat.com/docs/docs/targeting/targeting-rule/flag-condition/.md) - A condition that is based on the value of another feature flag.
* [Segment Condition](https://configcat.com/docs/docs/targeting/targeting-rule/segment-condition/.md) - A condition that is based on a segment.

### THEN part[â](#then-part "Direct link to THEN part")

The *THEN part* determines the result of the feature flag when the Targeting Rule matches. It can be either a simple value or Percentage Options.

## Multiple Targeting Rules and ordering[â](#multiple-targeting-rules-and-ordering "Direct link to Multiple Targeting Rules and ordering")

The order of Targeting Rules matters because they are in an **OR** relationship, meaning that the Targeting Rule which matches first in order, from top to bottom, will provide the value of the feature flag.

### How to change the order of the Targeting Rules?[â](#how-to-change-the-order-of-the-targeting-rules "Direct link to How to change the order of the Targeting Rules?")

The order of the Targeting Rules can be changed on the Dashboard by dragging and dropping the Targeting Rules.

![Change targeting rule order](/docs/assets/targeting/targeting-rule/targeting-rule-reorder_192dpi.png)

## Examples[â](#examples "Direct link to Examples")

### AND relationship between Conditions[â](#and-relationship-between-conditions "Direct link to AND relationship between Conditions")

#### Context[â](#context "Direct link to Context")

In our demo company (Whisker Co.) we have a new feature in our mobile app that notifies frequent shopper cat owners about the cat-friendly cafÃ©s in the neighborhood.

#### Goal[â](#goal "Direct link to Goal")

Since this feature is new, we want to make sure that only frequent shoppers and cat owners who have the right version of the app receive these notifications. The earlier versions of the app don't have this feature, so we want to make sure that only those who are running version 3.0.0 or higher receive the notifications.

#### Solution[â](#solution "Direct link to Solution")

We can achieve this by adding a Targeting Rule to the **Enable Cafe Notifications** feature flag. The Targeting Rule will have two conditions:

* a Segment Condition, which requires that the user is in segment **Frequent Shoppers**,
* a User Condition, which requires that the user attribute **AppVersion** is greater than or equal to **3.0.0**.

On the Dashboard:

![AND relationship example](/docs/assets/targeting/targeting-rule/and-example_192dpi.png)

In the code:

```
const userObject = {
  identifier: userId,
  email: userEmail,
  custom: {
    AppVersion: '3.1.2'
  },
};

const value = await configCatClient.getValueAsync("enableCafeNotifications", false, userObject);
```


---

# User Condition

## What is a User Condition?[â](#what-is-a-user-condition "Direct link to What is a User Condition?")

A *User Condition* is a condition that is based on the comparison of a user attribute (*comparison attribute*) and a preset value (*comparison value*).

It allows you to define Targeting Rules which target users based on their properties.

## How does the User Condition work?[â](#how-does-the-user-condition-work "Direct link to How does the User Condition work?")

The comparison attribute's value from the [User Object](https://configcat.com/docs/docs/targeting/user-object/.md) is compared to the comparison value you set on the Dashboard. The comparison is done according to the selected comparator and will result in true or false. This will be the result of the condition.

For more details on the evaluation of User Conditions, please refer to [Feature Flag Evaluation](https://configcat.com/docs/docs/targeting/feature-flag-evaluation/.md#evaluation-of-a-user-condition).

## How to set a User Condition?[â](#how-to-set-a-user-condition "Direct link to How to set a User Condition?")

You can add a User Condition to a feature flag by clicking the **+IF** ("Add targeting rule") button on the Dashboard. To add more conditions, click the **+AND** ("Add AND condition") button.

![Target users](/docs/assets/targeting/targeting-rule/user-condition/target-users_192dpi.png)

## Anatomy of a User Condition[â](#anatomy-of-a-user-condition "Direct link to Anatomy of a User Condition")

![User condition anatomy](/docs/assets/targeting/targeting-rule/user-condition/user-condition-anatomy_192dpi.png)

A User Condition consists of three parts:

* ***Comparison attribute*:** The user attribute on which the condition is based. Can be **Identifier** (user ID), **Email**, **Country**, or any custom attribute.
* ***Comparator*:** The comparison operator that defines the relation between the comparison attribute and the comparison value. See the available comparators [here](#comparator).
* ***Comparison value*:** The preset value to which the comparison attribute is compared. Depending on the comparator, can be a string, a list of strings, a number, a semantic version, a list of semantic versions or a date.

### Comparison attribute[â](#comparison-attribute "Direct link to Comparison attribute")

A property of your user (e.g. email address, geographic location). Your application should pass the attribute values (e.g. `'jane@example.com'`, `'Europe'`) to the ConfigCat SDK as a [User Object](https://configcat.com/docs/docs/targeting/user-object/.md).

There are 3 predefined attributes. Additionally, you can define your custom attributes as well:

| Comparison attribute name | Description                                                                                         |
| ------------------------- | --------------------------------------------------------------------------------------------------- |
| Identifier                | Usually, it is a unique user identifier in your application.                                        |
| Email                     | The e-mail address of your user.                                                                    |
| Country                   | The location of your user. Might be useful for testing a new feature in specific countries only.    |
| Custom                    | Any additional attribute (e.g. **OS version**). Can be defined by typing its name into the textbox. |

### Comparison value[â](#comparison-value "Direct link to Comparison value")

A string, a list of strings, a number, a semantic version, a list of semantic versions or a date value. Will be compared to the selected comparison attribute using the comparator. The length of the comparison value is limited, and the limit depends on your subscription plan. See the [Subscription Plan Limits page](https://configcat.com/docs/docs/subscription-plan-limits/.md) for more details.

### Comparator[â](#comparator "Direct link to Comparator")

#### Confidential text comparators[â](#confidential-text-comparators "Direct link to Confidential text comparators")

We recommend using confidential text comparators when targeting users based on their sensitive data (like email address, name, etc.) In this case, the feature flag evaluation is performed using the SHA256 hashes of the values to ensure that the comparison values are not exposed. This can cause an increase in the size of the config JSON file and the overall network traffic. Yet it is not recommended to use the cleartext version of the confidential comparators unless the increased network traffic becomes an issue.

The following comparators expect the comparison attribute to be a string value and the comparison value to be a string or a list of strings. The comparison is case-sensitive.

| Comparator                      | Description                                                                               |
| ------------------------------- | ----------------------------------------------------------------------------------------- |
| EQUALS (hashed)                 | Checks whether the comparison attribute is equal to the comparison value.                 |
| NOT EQUALS (hashed)             | Checks whether the comparison attribute is not equal to the comparison value.             |
| IS ONE OF (hashed)              | Checks whether the comparison attribute is equal to any of the comparison values.         |
| IS NOT ONE OF (hashed)          | Checks whether the comparison attribute is not equal to any of the comparison values.     |
| STARTS WITH ANY OF (hashed)     | Checks whether the comparison attribute starts with any of the comparison values.         |
| NOT STARTS WITH ANY OF (hashed) | Checks whether the comparison attribute does not start with any of the comparison values. |
| ENDS WITH ANY OF (hashed)       | Checks whether the comparison attribute ends with any of the comparison values.           |
| NOT ENDS WITH ANY OF (hashed)   | Checks whether the comparison attribute does not end with any of the comparison values.   |

#### Text comparators[â](#text-comparators "Direct link to Text comparators")

The following comparators expect the comparison attribute to be a string value and the comparison value to be a string or a list of strings. The comparison is case-sensitive.

info

Consider using confidential text comparators if you plan to target users based on their sensitive data, e.g. email address or company domain.

| Comparator                         | Description                                                                                    |
| ---------------------------------- | ---------------------------------------------------------------------------------------------- |
| EQUALS (cleartext)                 | Checks whether the comparison attribute is equal to the comparison value.                      |
| NOT EQUALS (cleartext)             | Checks whether the comparison attribute is not equal to the comparison value.                  |
| IS ONE OF (cleartext)              | Checks whether the comparison attribute is equal to any of the comparison values.              |
| IS NOT ONE OF (cleartext)          | Checks whether the comparison attribute is not equal to any of the comparison values.          |
| STARTS WITH ANY OF (cleartext)     | Checks whether the comparison attribute starts with any of the comparison values.              |
| NOT STARTS WITH ANY OF (cleartext) | Checks whether the comparison attribute does not start with any of the comparison values.      |
| ENDS WITH ANY OF (cleartext)       | Checks whether the comparison attribute ends with any of the comparison values.                |
| NOT ENDS WITH ANY OF (cleartext)   | Checks whether the comparison attribute does not end with any of the comparison values.        |
| CONTAINS ANY OF (cleartext)        | Checks whether the comparison attribute contains any comparison values as a substring.         |
| NOT CONTAINS ANY OF (cleartext)    | Checks whether the comparison attribute does not contain any comparison values as a substring. |

#### Semantic version comparators[â](#semantic-version-comparators "Direct link to Semantic version comparators")

The following comparators expect the comparison attribute to be a string containing a valid semantic version and the comparison value to be a semantic version or a list of semantic versions.

Comparison is performed according to the [Semantic Versioning specification](https://semver.org/).

| Comparator             | Description                                                                                                                 |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| IS ONE OF (semver)     | Checks whether the comparison attribute interpreted as a semantic version is equal to any of the comparison values.         |
| IS NOT ONE OF (semver) | Checks whether the comparison attribute interpreted as a semantic version is not equal to any of the comparison values.     |
| < (semver)             | Checks whether the comparison attribute interpreted as a semantic version is less than the comparison value.                |
| <= (semver)            | Checks whether the comparison attribute interpreted as a semantic version is less than or equal to the comparison value.    |
| > (semver)             | Checks whether the comparison attribute interpreted as a semantic version is greater than the comparison value.             |
| >= (semver)            | Checks whether the comparison attribute interpreted as a semantic version is greater than or equal to the comparison value. |

#### Number comparators[â](#number-comparators "Direct link to Number comparators")

The following comparators expect the comparison attribute and the comparison value to be numbers.

| Comparator  | Description                                                                                                               |
| ----------- | ------------------------------------------------------------------------------------------------------------------------- |
| = (number)  | Checks whether the comparison attribute interpreted as a decimal number is equal to the comparison value.                 |
| <> (number) | Checks whether the comparison attribute interpreted as a decimal number is not equal to the comparison value.             |
| < (number)  | Checks whether the comparison attribute interpreted as a decimal number is less than the comparison value.                |
| <= (number) | Checks whether the comparison attribute interpreted as a decimal number is less than or equal to the comparison value.    |
| > (number)  | Checks whether the comparison attribute interpreted as a decimal number is greater than the comparison value.             |
| >= (number) | Checks whether the comparison attribute interpreted as a decimal number is greater than or equal to the comparison value. |

#### Date and time comparators[â](#date-and-time-comparators "Direct link to Date and time comparators")

The following comparators expect the comparison attribute to be a date value (a second-based [Unix timestamp](https://en.wikipedia.org/wiki/Unix_time) or a platform-specific date object) and the comparison value to be a date.

| Comparator | Description                                                                                                                                                           |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| BEFORE     | Checks whether the comparison attribute interpreted as a second-based [Unix timestamp](https://en.wikipedia.org/wiki/Unix_time) is less than the comparison value.    |
| AFTER      | Checks whether the comparison attribute interpreted as a second-based [Unix timestamp](https://en.wikipedia.org/wiki/Unix_time) is greater than the comparison value. |

#### Array comparators[â](#array-comparators "Direct link to Array comparators")

The following comparators expect the comparison attribute to be an array of strings (or an array of strings serialized to JSON) and the comparison value to be a list of strings. The comparison is case-sensitive.

| Comparator                | Description                                                                                                              |
| ------------------------- | ------------------------------------------------------------------------------------------------------------------------ |
| ARRAY CONTAINS ANY OF     | Checks whether the comparison attribute interpreted as an array of strings contains any of the comparison values.        |
| ARRAY NOT CONTAINS ANY OF | Checks whether the comparison attribute interpreted as an array of strings does not contain any of the comparison values |

## Examples[â](#examples "Direct link to Examples")

### Black Friday sale[â](#black-friday-sale "Direct link to Black Friday sale")

#### Context[â](#context "Direct link to Context")

Black Friday is coming and we want to offer a special discount to our users.

#### Goal[â](#goal "Direct link to Goal")

The deals should become available at midnight on Black Friday. We want to make sure that the users can't access the deals before that. Also, the deals should be available for the whole weekend.

#### Solution[â](#solution "Direct link to Solution")

Let's use the **AFTER** comparator to check whether the current time is after midnight on Black Friday AND the current time is **BEFORE** midnight on Sunday.

On the Dashboard:

![Black Friday sale example](/docs/assets/targeting/targeting-rule/user-condition/black-friday-example_192dpi.png)

In the code:

```
const userObject = {
  identifier: userId,
  email: userEmail,
  custom: {
    // In case this code runs on the customer's device, we should consider getting the current time
    // from a time server since customers are free to set the system clock on their devices.
    Date: new Date()
  },
};

const value = await configCatClient.getValueAsync("enableBlackFridayDeals", false, userObject);
```

### Confidential CONTAINS and NOT CONTAINS workaround[â](#confidential-contains-and-not-contains-workaround "Direct link to Confidential CONTAINS and NOT CONTAINS workaround")

#### Context[â](#context-1 "Direct link to Context")

We use ConfigCat in our Angular frontend application to control the availability of a feature.

#### Goal[â](#goal-1 "Direct link to Goal")

We want to enable this feature for users from certain companies. To do the job, we would need to use the **CONTAINS** or **NOT CONTAINS** comparators.

However, there is no confidential version of these comparators and we are well aware that, for privacy reasons, it's not a good idea to use cleartext comparators for applications running in the browser.

How can we solve this?

#### Solution[â](#solution-1 "Direct link to Solution")

Let's work around the problem by extracting the domain part of the email and passing it as a custom attribute named **Domain** to the ConfigCat SDK.

This way we can define the desired Targeting Rule using confidential comparators only.

On the Dashboard:

![Confidential CONTAINS example](/docs/assets/targeting/targeting-rule/user-condition/confidential-contains-example_192dpi.png)

In the code:

```
const userDomain = userEmail.split('@').pop();

const userObject = {
  identifier: userId,
  email: userEmail,
  custom: {
    Domain: userDomain
  },
};

const value = await configCatClient.getValueAsync(key, defaultValue, userObject);
```

info

Since the introduction of [Config V2](https://configcat.com/docs/docs/advanced/config-v2/.md), this workaround is no longer needed: in a V2 config, you can simply use the hashed version of the **ENDS WITH ANY OF** comparator.


---

# User Object

The *User Object* represents a user in your application. It is a collection of *user attributes* that store various pieces of information about the user.

The User Object is necessary to evaluate [Targeting Rules](https://configcat.com/docs/docs/targeting/targeting-rule/targeting-rule-overview/.md) and [Percentage Options](https://configcat.com/docs/docs/targeting/percentage-options/.md). It allows you to pass the user attributes that are referenced in the rules of the feature flag to the ConfigCat SDK.

info

The User Object is essential if you'd like to use ConfigCat's [Targeting](https://configcat.com/docs/docs/targeting/targeting-overview/.md) feature.

## The relationship between the User Object and Targeting Rules[â](#the-relationship-between-the-user-object-and-targeting-rules "Direct link to The relationship between the User Object and Targeting Rules")

**As a product manager**, you can define [Targeting Rules](https://configcat.com/docs/docs/targeting/targeting-rule/targeting-rule-overview/.md) on the [ConfigCat Dashboard](https://app.configcat.com) based on the user attributes that are provided by your application.

**As a developer**, User Object allows you to pass user attributes to the ConfigCat SDK, which you (or your teammates) can reference in the [Targeting Rules](https://configcat.com/docs/docs/targeting/targeting-rule/targeting-rule-overview/.md) on the [Dashboard](https://app.configcat.com).

## Security and privacy concerns[â](#security-and-privacy-concerns "Direct link to Security and privacy concerns")

ConfigCat was designed with security and privacy in mind. The feature flag evaluation process is entirely implemented within the SDKs, meaning **your users' sensitive data never leaves your system**. The data flow is one-way â from ConfigCat CDN servers to your SDKs â and ConfigCat does not receive or store any attributes of the User Object passed to the SDKs. This design prioritizes the privacy and security of user data.

## Anatomy of the User Object[â](#anatomy-of-the-user-object "Direct link to Anatomy of the User Object")

The User Object offers the following properties to store user data:

| Attribute  | Description                                                                                                                                                                         |
| ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Identifier | **REQUIRED.** We recommend using a user ID, email address, or session ID.                                                                                                           |
| Email      | Optional. Set this if you want to target users based on their email address. E.g.: "Turn on a feature for users with **@example.com** addresses only."                              |
| Country    | Optional. Specify this for location or country-based targeting. E.g.: "Turn on a feature for users in Canada only."                                                                 |
| Custom     | Optional. A map/dictionary that lets you set custom user attributes to target users based on any user data. E.g.: age, subscription type, user role, device type, app version, etc. |

### Code example[â](#code-example "Direct link to Code example")

```
const userObject = {
  identifier: '#UNIQUE-USER-IDENTIFIER#', // required
  email: 'john@example.com',
  country: 'United Kingdom',
  custom: {
    SubscriptionType: 'Pro',
    UserRole: 'Admin',
  },
};
```

### Identifier attribute[â](#identifier-attribute "Direct link to Identifier attribute")

The unique identifier of a user in your application. This is a **REQUIRED** attribute. ConfigCat uses this attribute to differentiate your users from each other. By default, it is used to evaluate [Percentage Options](https://configcat.com/docs/docs/targeting/percentage-options/.md).

Our recommendation for an identifier:

* User ID - You can simply use the user ID native to your application.
* Email address - In most cases, using an email address works perfectly - as long as it is unique.
* Session ID - This is useful for targeting users who are not logged in to your application.

### Custom attributes[â](#custom-attributes "Direct link to Custom attributes")

To use custom attributes, you need to pass a User Object containing the `custom` property to the ConfigCat SDK.

info

The custom attribute's value can be of multiple types: e.g. string, number, date, array of strings, etc. Check the [SDK reference](https://configcat.com/docs/docs/sdk-reference/overview/.md) for more details.

## Examples[â](#examples "Direct link to Examples")

### Enable a feature for most valuable customers only[â](#enable-a-feature-for-most-valuable-customers-only "Direct link to Enable a feature for most valuable customers only")

#### Context[â](#context "Direct link to Context")

Our demo company, Whisker Co. developed a new feature called **Personalized Layout** to enhance the user experience of their most valuable customers.

#### Goal[â](#goal "Direct link to Goal")

We want to enable the **Personalized Layout** feature but only for customers with the **Pro** subscription.

#### Solution[â](#solution "Direct link to Solution")

To achieve this goal, we need a custom attribute named e.g. **SubscriptionType**, which stores the subscription type of the customer.

This allows us to define a Targeting Rule that turns on the feature for the customers whose **SubscriptionType** attribute is **Pro**. Finally, we need to make sure that the "To all others" value is **OFF** so the feature is turned off for the rest of the customers.

#### Dashboard[â](#dashboard "Direct link to Dashboard")

![Most valuable customers example](/docs/assets/targeting/user-object/most-valueable-customers-example_192dpi.png)

#### Code[â](#code "Direct link to Code")

Add the **SubscriptionType** custom attribute to the User Object in your application code.

```
const userObject = {
  identifier: userId,
  custom: {
    SubscriptionType: 'Pro',
  },
};
```


---

# Zombie Flags

Zombie flags (stale flags) are feature flags that are no longer needed or actively used. They often remain in the codebase long after their purpose has been fulfilled. Removing these outdated flags can reduce technical debt, improve performance, and simplify your codebase.

Common scenarios where zombie flags appear:

* A temporary feature becomes permanent, but its flag is never removed.
* A flag was introduced for a one-time rollout or experiment that's now complete.
* A decision was made to always keep a feature on or off, making the flag redundant.
* The flag hasn't been toggled or referenced for an extended period.

## Why Removing Zombie Flags Matters[â](#why-removing-zombie-flags-matters "Direct link to Why Removing Zombie Flags Matters")

Leaving stale flags in your code can lead to the following:

* **Increased complexity:** Unused flags clutter code and reduce maintainability.
* **Unexpected behavior:** Outdated flags might trigger legacy logic unintentionally.
* **Longer onboarding and reviews:** Developers waste time reviewing obsolete logic.
* **Performance degradation:** In large-scale systems, excess flags can slow down operations.

## Managing Zombie Flags in ConfigCat[â](#managing-zombie-flags-in-configcat "Direct link to Managing Zombie Flags in ConfigCat")

There are three ways to access and manage Zombie flags in ConfigCat:

* Through the [Dashboard](https://app.configcat.com/product/zombie-flags).
* Using the [Zombie Flags Email Report](https://app.configcat.com/my-account/zombie-flags-report).
* Via the [Zombie Flags API](https://api.configcat.com/docs/index.html#tag/Zombie-\(stale\)-flags).

### Using the Dashboard[â](#using-the-dashboard "Direct link to Using the Dashboard")

The [Zombie Flags page](https://app.configcat.com/product/zombie-flags) shows all the stale flags in a table for the selected product based on the filters set:

* **Inactivity**: How long the flag was inactive.
* **Feature flag scope**: Choose between all feature flags or only those you are watching.
* **Included environments**: The ConfigCat [environment(s)](https://configcat.com/docs/main-concepts/#environment) to include in the analysis.
* **Ignored flags based on tags**: Exclude flags based on assigned tags.
* **Stale in all/any selected environments**: Choose whether to include flags that are stale in all or any of the selected environments.
* **Filter by config or feature flag name**: Start typing to filter the list automatically.

![The Zombie Flags page in the ConfigCat dashboard](/docs/assets/guide/my-zombie-flags-report/the-zombie-flags-page-in-the-dashboard_192dpi.png)

By default, the Zombie Flags page will filter the zombie flags based on the filters set in the **My Zombie Flags Report** page.

info

If you have the [Code References](https://configcat.com/docs/advanced/code-references/overview/) feature enabled, you can also see where the flags are used in your code.

### Using the Zombie Flags Report Email[â](#using-the-zombie-flags-report-email "Direct link to Using the Zombie Flags Report Email")

The Zombie Flags Report scans your ConfigCat dashboard and sends an email report of the feature flags that haven't been updated or toggled within the configured timeframe.

You can customize the report to include only the flags you want to track, using filters similar to those available in the dashboard.

#### How to Set Up the Zombie Feature Flags Report[â](#how-to-set-up-the-zombie-feature-flags-report "Direct link to How to Set Up the Zombie Feature Flags Report")

1. Log in to the [ConfigCat dashboard](https://app.configcat.com/my-account/zombie-flags-report).
2. Click the Organization name in the top-left corner.
3. Select **My Zombie Flags Report** from the dropdown menu.

![Navigating to My Zombie Flags Report](/docs/assets/guide/my-zombie-flags-report/navigating-to-my-zombie-flags-report_192dpi.png)

#### The My Zombie Flags Report Page[â](#the-my-zombie-flags-report-page "Direct link to The My Zombie Flags Report Page")

The email report can be customized as follows:

* **Receive report via email:** Turn on email notifications and set the frequency (daily, weekly, monthly).
* **Criteria:** Define how long a flag must be inactive before it's marked as stale.
* **Scope:** Include all flags or only watched ones.
* **Environment:** Choose the ConfigCat [environment(s)](https://configcat.com/docs/main-concepts/#environment) you want to analyze.
* **Tags:** Exclude specific flags based on tags.
* **Stale in all/any selected environments:** Choose whether to include flags that are stale in all or any of the selected environments.

![My Zombie Flags Report page in the dashboard](/docs/assets/guide/my-zombie-flags-report/my-zombie-flags-report-page-in-the-dashboard_192dpi.png)

#### Sample Email Report[â](#sample-email-report "Direct link to Sample Email Report")

Here's a preview of what the Zombie Flags report email looks like:

![Zombie Flags Report Email](/docs/assets/guide/my-zombie-flags-report/zombie-flags-report-email_192dpi.png)

### Using the Zombie Flags API[â](#using-the-zombie-flags-api "Direct link to Using the Zombie Flags API")

The [Zombie Flags API](https://api.configcat.com/docs/index.html#tag/Zombie-\(stale\)-flags) allows programmatic access to zombie flag data. This is useful for integrating flag cleanup processes into your CI/CD workflows or internal tooling.

You can use tools like Postman to retrieve zombie flag data via the API for testing or integration. Here's a preview of what it looks like in Postman:

![Using the Zombie Flags API in Postman](/docs/assets/guide/my-zombie-flags-report/using-the-zombie-flags-api-in-postman_192dpi.png)

## Other Tools for Identifying Unused Feature Flags[â](#other-tools-for-identifying-unused-feature-flags "Direct link to Other Tools for Identifying Unused Feature Flags")

In addition to the methods mentioned, ConfigCat also provides several tools to help you detect and clean up unused feature flags:

* [Scan & Upload Code References](https://configcat.com/docs/advanced/code-references/overview): Track where feature flags appear in your code.
* [The ConfigCat CLI](https://configcat.com/docs/advanced/cli): Detect flags still in your code that no longer exist in the ConfigCat Dashboard.
* [GitHub Action](https://configcat.com/docs/integrations/github/) and [CircleCI Orb](https://configcat.com/docs/integrations/circleci): Find feature flags in your code that you might want to remove.
* [Bitrise Step](https://configcat.com/docs/integrations/bitrise/): Scan your source code for feature flag and setting usages and upload the found code references to ConfigCat.
* [Bitbucket Pipe](https://configcat.com/docs/integrations/bitbucket/): Scan your source code for feature flag and setting usages and upload the found code references to ConfigCat.


---

