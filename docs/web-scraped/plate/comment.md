# Plate Documentation
# Source: https://platejs.org/docs/comment
# Generated by llm-code-docs plate-docs.py scraper

Comment
Previous
Next
Copy Markdown
Open
Plus
Comment Leaf
Comment Toolbar Button
Block Discussion
Preview
Code
Loading...
Files
components
demo.tsx
discussion-value.tsx
editor
plugins
comment-kit.tsx
comment-base-kit.tsx
discussion-kit.tsx
suggestion-kit.tsx
suggestion-base-kit.tsx
basic-marks-kit.tsx
basic-marks-base-kit.tsx
align-base-kit.tsx
basic-blocks-base-kit.tsx
callout-base-kit.tsx
code-block-base-kit.tsx
column-base-kit.tsx
date-base-kit.tsx
font-base-kit.tsx
line-height-base-kit.tsx
link-base-kit.tsx
list-base-kit.tsx
indent-base-kit.tsx
math-base-kit.tsx
media-base-kit.tsx
mention-base-kit.tsx
table-base-kit.tsx
toc-base-kit.tsx
toggle-base-kit.tsx
markdown-kit.tsx
ai-kit.tsx
cursor-overlay-kit.tsx
align-kit.tsx
autoformat-kit.tsx
basic-nodes-kit.tsx
basic-blocks-kit.tsx
block-menu-kit.tsx
block-selection-kit.tsx
block-placeholder-kit.tsx
callout-kit.tsx
code-block-kit.tsx
column-kit.tsx
date-kit.tsx
dnd-kit.tsx
docx-kit.tsx
emoji-kit.tsx
excalidraw-kit.tsx
exit-break-kit.tsx
fixed-toolbar-kit.tsx
floating-toolbar-kit.tsx
font-kit.tsx
line-height-kit.tsx
link-kit.tsx
list-kit.tsx
indent-kit.tsx
math-kit.tsx
media-kit.tsx
mention-kit.tsx
slash-kit.tsx
table-kit.tsx
toc-kit.tsx
toggle-kit.tsx
editor-kit.tsx
editor-base-kit.tsx
use-chat.ts
transforms.ts
ui
comment-node.tsx
comment-node-static.tsx
comment-toolbar-button.tsx
block-discussion.tsx
block-suggestion.tsx
comment.tsx
editor.tsx
editor-static.tsx
ai-node.tsx
date-node.tsx
date-node-static.tsx
emoji-node.tsx
inline-combobox.tsx
link-node.tsx
link-node-static.tsx
mention-node.tsx
mention-node-static.tsx
suggestion-node.tsx
suggestion-node-static.tsx
suggestion-toolbar-button.tsx
toolbar.tsx
code-node.tsx
code-node-static.tsx
highlight-node.tsx
highlight-node-static.tsx
kbd-node.tsx
kbd-node-static.tsx
mark-toolbar-button.tsx
blockquote-node.tsx
blockquote-node-static.tsx
heading-node.tsx
heading-node-static.tsx
hr-node.tsx
hr-node-static.tsx
paragraph-node.tsx
paragraph-node-static.tsx
callout-node.tsx
callout-node-static.tsx
emoji-toolbar-button.tsx
code-block-node.tsx
code-block-node-static.tsx
column-node.tsx
column-node-static.tsx
resize-handle.tsx
block-list.tsx
block-list-static.tsx
equation-node.tsx
equation-node-static.tsx
media-audio-node.tsx
media-audio-node-static.tsx
caption.tsx
media-file-node.tsx
media-file-node-static.tsx
media-image-node.tsx
media-image-node-static.tsx
media-toolbar.tsx
media-video-node.tsx
media-video-node-static.tsx
table-node.tsx
table-icons.tsx
table-node-static.tsx
block-selection.tsx
font-color-toolbar-button.tsx
toc-node.tsx
toc-node-static.tsx
toggle-node.tsx
toggle-node-static.tsx
cursor-overlay.tsx
ai-menu.tsx
ai-chat-editor.tsx
ai-toolbar-button.tsx
align-toolbar-button.tsx
block-context-menu.tsx
block-draggable.tsx
excalidraw-node.tsx
fixed-toolbar.tsx
fixed-toolbar-buttons.tsx
font-size-toolbar-button.tsx
history-toolbar-button.tsx
list-toolbar-button.tsx
indent-toolbar-button.tsx
import-toolbar-button.tsx
insert-toolbar-button.tsx
line-height-toolbar-button.tsx
link-toolbar-button.tsx
media-toolbar-button.tsx
mode-toolbar-button.tsx
more-toolbar-button.tsx
table-toolbar-button.tsx
toggle-toolbar-button.tsx
turn-into-toolbar-button.tsx
export-toolbar-button.tsx
floating-toolbar.tsx
floating-toolbar-buttons.tsx
equation-toolbar-button.tsx
link-toolbar.tsx
media-embed-node.tsx
media-placeholder-node.tsx
media-preview-dialog.tsx
media-upload-toast.tsx
slash-node.tsx
hooks
use-debounce.ts
use-mounted.ts
use-is-touch-device.ts
use-upload-file.ts
app
api
ai
command
route.ts
utils.ts
prompts.ts
copilot
route.ts
lib
markdown-joiner-transform.ts
uploadthing.ts
components/demo.tsx
Copy
'use client'
;
import
*
as
React
from
'react'
;
import
{ Plate, usePlateEditor }
from
'platejs/react'
;
import
{ EditorKit }
from
'@/components/editor/editor-kit'
;
import
{ Editor, EditorContainer }
from
'@/components/ui/editor'
;
import
{ DEMO_VALUES }
from
'./values/demo-values'
;
export
default
function
Demo
({ id }
:
{ id
:
string
})
{
const
editor
=
usePlateEditor
({
plugins: EditorKit,
value:
DEMO_VALUES
[id],
});
return
(
<
Plate
editor
={
editor
}
>
<
EditorContainer
variant
=
"demo"
>
<
Editor
/>
</
EditorContainer
>
</
Plate
>
);
}
Features
Text Comments:
Add comments as text marks with inline annotations
Overlapping Comments:
Support multiple comments on the same text
Draft Comments:
Create draft comments before finalizing
State Tracking:
Track comment state and user interactions
Discussion Integration:
Works with discussion plugin for complete collaboration
Kit Usage
Installation
The fastest way to add comment functionality is with the
CommentKit
, which includes pre-configured
commentPlugin
and related components along with their
Plate UI
components.
comment-kit.tsx
npx shadcn@latest add
comment-kit
'use client'
;
import
type
{ ExtendConfig, Path }
from
'platejs'
;
import
{
type
BaseCommentConfig,
BaseCommentPlugin,
getDraftCommentKey,
}
from
'@platejs/comment'
;
import
{ isSlateString }
from
'platejs'
;
import
{ toTPlatePlugin }
from
'platejs/react'
;
import
{ CommentLeaf }
from
'@/components/ui/comment-node'
;
type
CommentConfig
=
ExtendConfig
<
BaseCommentConfig
,
{
activeId
:
string
|
null
;
commentingBlock
:
Path
|
null
;
hoverId
:
string
|
null
;
uniquePathMap
:
Map
<
string
,
Path
>;
}
>;
export
const
commentPlugin
=
toTPlatePlugin
<
CommentConfig
>(BaseCommentPlugin, {
handlers: {
onClick
: ({
api
,
event
,
setOption
,
type
})
=>
{
let
leaf
=
event.target
as
HTMLElement
;
let
isSet
=
false
;
const
unsetActiveSuggestion
=
()
=>
{
setOption
(
'activeId'
,
null
);
isSet
=
true
;
};
if
(
!
isSlateString
(leaf))
unsetActiveSuggestion
();
while
(leaf.parentElement) {
if
(leaf.classList.
contains
(
`slate-${
type
}`
)) {
const
commentsEntry
=
api.comment
!
.
node
();
if
(
!
commentsEntry) {
unsetActiveSuggestion
();
break
;
}
const
id
=
api.comment
!
.
nodeId
(commentsEntry[
0
]);
setOption
(
'activeId'
, id
??
null
);
isSet
=
true
;
break
;
}
leaf
=
leaf.parentElement;
}
if
(
!
isSet)
unsetActiveSuggestion
();
},
},
options: {
activeId:
null
,
commentingBlock:
null
,
hoverId:
null
,
uniquePathMap:
new
Map
(),
},
})
.
extendTransforms
(
({
editor,
setOption,
tf: {
comment: { setDraft },
},
})
=>
({
setDraft
: ()
=>
{
if
(editor.api.
isCollapsed
()) {
editor.tf.
select
(editor.api.
block
()
!
[
1
]);
}
setDraft
();
editor.tf.
collapse
();
setOption
(
'activeId'
,
getDraftCommentKey
());
setOption
(
'commentingBlock'
, editor.selection
!
.focus.path.
slice
(
0
,
1
));
},
})
)
.
configure
({
node: { component: CommentLeaf },
shortcuts: {
setDraft: { keys:
'mod+shift+m'
},
},
});
export
const
CommentKit
=
[commentPlugin];
Copy
CommentLeaf
: Renders comment text marks
BlockDiscussion
: Renders discussion UI with comments integration
Add Kit
import
{ createPlateEditor }
from
'platejs/react'
;
import
{ CommentKit }
from
'@/components/editor/plugins/comment-kit'
;
const
editor
=
createPlateEditor
({
plugins: [
// ...otherPlugins,
...
CommentKit,
],
});
Copy
Manual Usage
Installation
bun
npm
pnpm
yarn
pnpm add @platejs/comment
Copy
Extend Comment Plugin
Create the comment plugin with extended configuration for state management:
import
{
type
ExtendConfig,
type
Path, isSlateString }
from
'platejs'
;
import
{
type
BaseCommentConfig,
BaseCommentPlugin,
getDraftCommentKey,
}
from
'@platejs/comment'
;
import
{ toTPlatePlugin }
from
'platejs/react'
;
import
{ CommentLeaf }
from
'@/components/ui/comment-node'
;
type
CommentConfig
=
ExtendConfig
<
BaseCommentConfig
,
{
activeId
:
string
|
null
;
commentingBlock
:
Path
|
null
;
hoverId
:
string
|
null
;
uniquePathMap
:
Map
<
string
,
Path
>;
}
>;
export
const
commentPlugin
=
toTPlatePlugin
<
CommentConfig
>(
BaseCommentPlugin,
({
editor
})
=>
({
options: {
activeId:
null
,
commentingBlock:
null
,
hoverId:
null
,
uniquePathMap:
new
Map
(),
},
render: {
node: CommentLeaf,
},
})
);
Copy
options.activeId
: Currently active comment ID for visual highlighting
options.commentingBlock
: Path of the block currently being commented
options.hoverId
: Currently hovered comment ID for hover effects
options.uniquePathMap
: Map tracking unique paths for comment resolution
render.node
: Assigns
CommentLeaf
to render comment text marks
Add Click Handler
Add click handling to manage active comment state:
export
const
commentPlugin
=
toTPlatePlugin
<
CommentConfig
>(
BaseCommentPlugin,
({
editor
})
=>
({
handlers: {
// Set active comment when clicking on comment marks
onClick
: ({
api
,
event
,
setOption
,
type
})
=>
{
let
leaf
=
event.target
as
HTMLElement
;
let
isSet
=
false
;
const
unsetActiveComment
=
()
=>
{
setOption
(
'activeId'
,
null
);
isSet
=
true
;
};
if
(
!
isSlateString
(leaf))
unsetActiveComment
();
while
(leaf.parentElement) {
if
(leaf.classList.
contains
(
`slate-${
type
}`
)) {
const
commentsEntry
=
api.comment.
node
();
if
(
!
commentsEntry) {
unsetActiveComment
();
break
;
}
const
id
=
api.comment.
nodeId
(commentsEntry[
0
]);
setOption
(
'activeId'
, id
??
null
);
isSet
=
true
;
break
;
}
leaf
=
leaf.parentElement;
}
if
(
!
isSet)
unsetActiveComment
();
},
},
// ... previous options and render
})
);
Copy
The click handler tracks which comment is currently active:
Detects comment clicks
: Traverses DOM to find comment elements
Sets active state
: Updates
activeId
when clicking on comments
Clears state
: Unsets
activeId
when clicking outside comments
Visual feedback
: Enables hover/active styling in comment components
Extend Transforms
Extend the
setDraft
transform for enhanced functionality:
export
const
commentPlugin
=
toTPlatePlugin
<
CommentConfig
>(
BaseCommentPlugin,
({
editor
})
=>
({
// ... previous configuration
})
)
.
extendTransforms
(
({
editor,
setOption,
tf: {
comment: { setDraft },
},
})
=>
({
setDraft
: ()
=>
{
if
(editor.api.
isCollapsed
()) {
editor.tf.
select
(editor.api.
block
()
!
[
1
]);
}
setDraft
();
editor.tf.
collapse
();
setOption
(
'activeId'
,
getDraftCommentKey
());
setOption
(
'commentingBlock'
, editor.selection
!
.focus.path.
slice
(
0
,
1
));
},
})
)
.
configure
({
node: { component: CommentLeaf },
shortcuts: {
setDraft: { keys:
'mod+shift+m'
},
},
});
Copy
Add Toolbar Button
You can add
CommentToolbarButton
to your
Toolbar
to add comments on selected text.
Add Plugins
import
{ createPlateEditor }
from
'platejs/react'
;
const
editor
=
createPlateEditor
({
plugins: [
// ...otherPlugins,
commentPlugin,
],
});
Copy
Discussion Integration
The comment plugin works with the
discussion plugin
for complete collaboration:
import
{ discussionPlugin }
from
'@/components/editor/plugins/discussion-kit'
;
const
editor
=
createPlateEditor
({
plugins: [
// ...otherPlugins,
discussionPlugin,
commentPlugin,
],
});
Copy
Keyboard Shortcuts
Key
Description
Cmd + Shift + M
Add a comment on the selected text.
Plate Plus
Full stack example for Suggestion and Comment
Floating comments & suggestions UI with better user experience
Comment rendered with Plate editor
Discussion list in the sidebar
Preview
Get the code
Plugins
CommentPlugin
Plugin for creating and managing text comments with state tracking and discussion integration.
Options
Collapse all
activeId
string | null
Currently active comment ID for visual highlighting. Used internally to
track state.
commentingBlock
Path | null
Path of the block currently being commented on.
hoverId
string | null
Currently hovered comment ID for hover effects.
uniquePathMap
Map<string, Path>
Map tracking unique paths for comment resolution.
API
api.comment.has
Checks if a comment with the given ID exists in the editor.
Parameters
Collapse all
options
{ id: string }
Options containing the comment ID to check.
Returns
boolean
Whether the comment exists.
api.comment.node
Gets a comment node entry.
Options
EditorNodesOptions & { id?: string; isDraft?: boolean }
Options for finding the node.
Returns
NodeEntry<TCommentText> | undefined
The comment node entry if found.
api.comment.nodeId
Gets the ID of a comment from a leaf node.
Parameters
Collapse all
leaf
TCommentText
The comment leaf node.
Returns
string | undefined
The comment ID if found.
api.comment.nodes
Gets all comment node entries matching the options.
Options
EditorNodesOptions & { id?: string; isDraft?: boolean }
Options for finding the nodes.
Returns
NodeEntry<TCommentText>[]
Array of comment node entries.
Transforms
tf.comment.removeMark
Removes the comment mark from the current selection or a specified location.
tf.comment.setDraft
Sets a draft comment mark at the current selection.
Options
SetNodesOptions
Options for setting the draft comment.
tf.comment.unsetMark
Unsets comment nodes with the specified ID from the editor.
Parameters
Collapse all
options
{ id: string; transient?: boolean }
Options for unsetting comment marks.
Options
object
Collapse all
id
string
The comment ID to unset.
transient
optional
boolean
When true, removes all AI comments at once.
Default:
false
Utilities
getCommentCount
Gets the count of non-draft comments in a comment node.
Parameters
Collapse all
node
TCommentText
The comment node.
Returns
number
The count of comments.
getCommentKey
Generates a comment key based on the provided ID.
Parameters
Collapse all
id
string
The ID of the comment.
Returns
string
The generated comment key.
getCommentKeyId
Extracts the comment ID from a comment key.
Parameters
Collapse all
key
string
The comment key.
Returns
string
The extracted comment ID.
getCommentKeys
Returns an array of comment keys present in the given node.
Parameters
Collapse all
node
TCommentText
The node to check for comment keys.
Returns
string[]
Array of comment keys.
getDraftCommentKey
Gets the key used for draft comments.
Returns
string
The draft comment key.
isCommentKey
Checks if a given key is a comment key.
Parameters
Collapse all
key
string
The key to check.
Returns
boolean
Whether the key is a comment key.
isCommentNodeById
Checks if a given node is a comment with the specified ID.
Parameters
Collapse all
node
TNode
The node to check.
id
string
The ID of the comment.
Returns
boolean
Whether the node is a comment with the specified ID.
Types
TCommentText
Text nodes that can contain comments.
Attributes
Collapse all
comment
optional
boolean
Whether this text node contains comments.
comment_<id>
optional
boolean
Comment data keyed by comment ID. Multiple comments can exist in one text
node.
Copilot
Suggestion
On This Page
Features
Kit Usage
Installation
Add Kit
Manual Usage
Installation
Extend Comment Plugin
Add Click Handler
Extend Transforms
Add Toolbar Button
Add Plugins
Discussion Integration
Keyboard Shortcuts
Plate Plus
Plugins
CommentPlugin
API
api.comment.has
api.comment.node
api.comment.nodeId
api.comment.nodes
Transforms
tf.comment.removeMark
tf.comment.setDraft
tf.comment.unsetMark
Utilities
getCommentCount
getCommentKey
getCommentKeyId
getCommentKeys
getDraftCommentKey
isCommentKey
isCommentNodeById
Types
TCommentText
Build your editor
Production-ready AI template and reusable components.
Get all-access
Get all-access