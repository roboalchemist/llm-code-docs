# Plate Documentation
# Source: https://platejs.org/docs/code-block
# Generated by llm-code-docs plate-docs.py scraper

Code Block
Previous
Next
Copy Markdown
Open
Plus
Code Block Element
Preview
Code
Loading...
Files
components
demo.tsx
code-block-value.tsx
ui
code-block-node.tsx
code-block-node-static.tsx
editor.tsx
editor-static.tsx
blockquote-node.tsx
blockquote-node-static.tsx
heading-node.tsx
heading-node-static.tsx
hr-node.tsx
hr-node-static.tsx
paragraph-node.tsx
paragraph-node-static.tsx
code-node.tsx
code-node-static.tsx
highlight-node.tsx
highlight-node-static.tsx
kbd-node.tsx
kbd-node-static.tsx
callout-node.tsx
callout-node-static.tsx
emoji-toolbar-button.tsx
toolbar.tsx
column-node.tsx
column-node-static.tsx
resize-handle.tsx
comment-node.tsx
comment-node-static.tsx
date-node.tsx
date-node-static.tsx
link-node.tsx
link-node-static.tsx
block-list.tsx
block-list-static.tsx
equation-node.tsx
equation-node-static.tsx
media-audio-node.tsx
media-audio-node-static.tsx
caption.tsx
media-file-node.tsx
media-file-node-static.tsx
media-image-node.tsx
media-image-node-static.tsx
media-toolbar.tsx
media-video-node.tsx
media-video-node-static.tsx
mention-node.tsx
mention-node-static.tsx
inline-combobox.tsx
suggestion-node.tsx
suggestion-node-static.tsx
suggestion-toolbar-button.tsx
block-discussion.tsx
block-suggestion.tsx
comment.tsx
ai-node.tsx
emoji-node.tsx
mark-toolbar-button.tsx
table-node.tsx
table-icons.tsx
table-node-static.tsx
block-selection.tsx
font-color-toolbar-button.tsx
toc-node.tsx
toc-node-static.tsx
toggle-node.tsx
toggle-node-static.tsx
cursor-overlay.tsx
ai-menu.tsx
ai-chat-editor.tsx
ai-toolbar-button.tsx
align-toolbar-button.tsx
block-context-menu.tsx
comment-toolbar-button.tsx
block-draggable.tsx
excalidraw-node.tsx
fixed-toolbar.tsx
fixed-toolbar-buttons.tsx
font-size-toolbar-button.tsx
history-toolbar-button.tsx
list-toolbar-button.tsx
indent-toolbar-button.tsx
import-toolbar-button.tsx
insert-toolbar-button.tsx
line-height-toolbar-button.tsx
link-toolbar-button.tsx
media-toolbar-button.tsx
mode-toolbar-button.tsx
more-toolbar-button.tsx
table-toolbar-button.tsx
toggle-toolbar-button.tsx
turn-into-toolbar-button.tsx
export-toolbar-button.tsx
floating-toolbar.tsx
floating-toolbar-buttons.tsx
equation-toolbar-button.tsx
link-toolbar.tsx
media-embed-node.tsx
media-placeholder-node.tsx
media-preview-dialog.tsx
media-upload-toast.tsx
slash-node.tsx
editor
editor-kit.tsx
editor-base-kit.tsx
plugins
align-base-kit.tsx
basic-blocks-base-kit.tsx
basic-marks-base-kit.tsx
callout-base-kit.tsx
code-block-base-kit.tsx
column-base-kit.tsx
comment-base-kit.tsx
date-base-kit.tsx
font-base-kit.tsx
line-height-base-kit.tsx
link-base-kit.tsx
list-base-kit.tsx
indent-base-kit.tsx
math-base-kit.tsx
media-base-kit.tsx
mention-base-kit.tsx
suggestion-base-kit.tsx
suggestion-kit.tsx
discussion-kit.tsx
basic-marks-kit.tsx
table-base-kit.tsx
toc-base-kit.tsx
toggle-base-kit.tsx
markdown-kit.tsx
ai-kit.tsx
cursor-overlay-kit.tsx
align-kit.tsx
autoformat-kit.tsx
basic-nodes-kit.tsx
basic-blocks-kit.tsx
block-menu-kit.tsx
block-selection-kit.tsx
block-placeholder-kit.tsx
callout-kit.tsx
code-block-kit.tsx
column-kit.tsx
comment-kit.tsx
date-kit.tsx
dnd-kit.tsx
docx-kit.tsx
emoji-kit.tsx
excalidraw-kit.tsx
exit-break-kit.tsx
fixed-toolbar-kit.tsx
floating-toolbar-kit.tsx
font-kit.tsx
line-height-kit.tsx
link-kit.tsx
list-kit.tsx
indent-kit.tsx
math-kit.tsx
media-kit.tsx
mention-kit.tsx
slash-kit.tsx
table-kit.tsx
toc-kit.tsx
toggle-kit.tsx
use-chat.ts
transforms.ts
hooks
use-mounted.ts
use-debounce.ts
use-is-touch-device.ts
use-upload-file.ts
app
api
ai
command
route.ts
utils.ts
prompts.ts
copilot
route.ts
lib
markdown-joiner-transform.ts
uploadthing.ts
components/demo.tsx
Copy
'use client'
;
import
*
as
React
from
'react'
;
import
{ Plate, usePlateEditor }
from
'platejs/react'
;
import
{ EditorKit }
from
'@/components/editor/editor-kit'
;
import
{ Editor, EditorContainer }
from
'@/components/ui/editor'
;
import
{ DEMO_VALUES }
from
'./values/demo-values'
;
export
default
function
Demo
({ id }
:
{ id
:
string
})
{
const
editor
=
usePlateEditor
({
plugins: EditorKit,
value:
DEMO_VALUES
[id],
});
return
(
<
Plate
editor
={
editor
}
>
<
EditorContainer
variant
=
"demo"
>
<
Editor
/>
</
EditorContainer
>
</
Plate
>
);
}
Features
Syntax highlighting for code blocks
Support for multiple programming languages
Customizable language selection
Proper indentation handling
Kit Usage
Installation
The fastest way to add code block functionality is with the
CodeBlockKit
, which includes pre-configured
CodeBlockPlugin
,
CodeLinePlugin
, and
CodeSyntaxPlugin
with syntax highlighting and
Plate UI
components.
code-block-kit.tsx
npx shadcn@latest add
code-block-kit
'use client'
;
import
{
CodeBlockPlugin,
CodeLinePlugin,
CodeSyntaxPlugin,
}
from
'@platejs/code-block/react'
;
import
{ all, createLowlight }
from
'lowlight'
;
import
{
CodeBlockElement,
CodeLineElement,
CodeSyntaxLeaf,
}
from
'@/components/ui/code-block-node'
;
const
lowlight
=
createLowlight
(all);
export
const
CodeBlockKit
=
[
CodeBlockPlugin.
configure
({
node: { component: CodeBlockElement },
options: { lowlight },
shortcuts: { toggle: { keys:
'mod+alt+8'
} },
}),
CodeLinePlugin.
withComponent
(CodeLineElement),
CodeSyntaxPlugin.
withComponent
(CodeSyntaxLeaf),
];
Copy
CodeBlockElement
: Renders code block containers.
CodeLineElement
: Renders individual code lines.
CodeSyntaxLeaf
: Renders syntax highlighted text.
Add Kit
Add the kit to your plugins:
import
{ createPlateEditor }
from
'platejs/react'
;
import
{ CodeBlockKit }
from
'@/components/editor/plugins/code-block-kit'
;
const
editor
=
createPlateEditor
({
plugins: [
// ...otherPlugins,
...
CodeBlockKit,
],
});
Copy
Manual Usage
Installation
bun
npm
pnpm
yarn
pnpm add @platejs/code-block lowlight
Copy
Add Plugins
Include the code block plugins in your Plate plugins array when creating the editor.
import
{ CodeBlockPlugin, CodeLinePlugin, CodeSyntaxPlugin }
from
'@platejs/code-block/react'
;
import
{ createPlateEditor }
from
'platejs/react'
;
const
editor
=
createPlateEditor
({
plugins: [
// ...otherPlugins,
CodeBlockPlugin,
CodeLinePlugin,
CodeSyntaxPlugin,
],
});
Copy
Configure Plugins
Configure the plugins with syntax highlighting and custom components.
Basic Setup with All Languages:
import
{ CodeBlockPlugin, CodeLinePlugin, CodeSyntaxPlugin }
from
'@platejs/code-block/react'
;
import
{ all, createLowlight }
from
'lowlight'
;
import
{ createPlateEditor }
from
'platejs/react'
;
import
{ CodeBlockElement, CodeLineElement, CodeSyntaxLeaf }
from
'@/components/ui/code-block-node'
;
// Create a lowlight instance with all languages
const
lowlight
=
createLowlight
(all);
const
editor
=
createPlateEditor
({
plugins: [
// ...otherPlugins,
CodeBlockPlugin.
configure
({
node: { component: CodeBlockElement },
options: { lowlight },
shortcuts: { toggle: { keys:
'mod+alt+8'
} },
}),
CodeLinePlugin.
withComponent
(CodeLineElement),
CodeSyntaxPlugin.
withComponent
(CodeSyntaxLeaf),
],
});
Copy
Custom Language Setup (Optimized Bundle):
For optimized bundle size, you can register only specific languages:
import
{ createLowlight }
from
'lowlight'
;
import
css
from
'highlight.js/lib/languages/css'
;
import
js
from
'highlight.js/lib/languages/javascript'
;
import
ts
from
'highlight.js/lib/languages/typescript'
;
import
html
from
'highlight.js/lib/languages/xml'
;
// Create a lowlight instance
const
lowlight
=
createLowlight
();
// Register only the languages you need
lowlight.
register
(
'html'
, html);
lowlight.
register
(
'css'
, css);
lowlight.
register
(
'js'
, js);
lowlight.
register
(
'ts'
, ts);
const
editor
=
createPlateEditor
({
plugins: [
// ...otherPlugins,
CodeBlockPlugin.
configure
({
node: { component: CodeBlockElement },
options: {
lowlight,
defaultLanguage:
'js'
,
// Set default language (optional)
},
shortcuts: { toggle: { keys:
'mod+alt+8'
} },
}),
CodeLinePlugin.
withComponent
(CodeLineElement),
CodeSyntaxPlugin.
withComponent
(CodeSyntaxLeaf),
],
});
Copy
node.component
: Assigns
CodeBlockElement
to render code block containers.
options.lowlight
: Lowlight instance for syntax highlighting.
options.defaultLanguage
: Default language when no language is specified.
shortcuts.toggle
: Defines a keyboard
shortcut
to toggle code blocks.
withComponent
: Assigns components for code lines and syntax highlighting.
Turn Into Toolbar Button
You can add this item to the
Turn Into Toolbar Button
to convert blocks into code blocks:
{
icon
: <
FileCodeIcon
/>,
label
:
'Code'
,
value
:
KEYS
.codeBlock,
}
Copy
Insert Toolbar Button
You can add this item to the
Insert Toolbar Button
to insert code block elements:
{
icon
: <
FileCodeIcon
/>,
label
:
'Code'
,
value
:
KEYS
.codeBlock,
}
Copy
Plugins
CodeBlockPlugin
Options
Collapse all
defaultLanguage
optional
string | null
Default language to use when no language is specified. Set to null to disable syntax highlighting by default.
lowlight
optional
ReturnType<typeof createLowlight> | null
Lowlight instance to use for highlighting. If not provided, syntax highlighting will be disabled.
API
isCodeBlockEmpty
Returns
boolean
Whether the selection is in an empty code block.
isSelectionAtCodeBlockStart
Returns
boolean
Whether the selection is at the start of the first code line in a code block.
indentCodeLine
Indents the code line if the selection is expanded or there are no non-whitespace characters at left of the cursor. The indentation is 2 spaces by default.
Options
IndentCodeLineOptions
Collapse all
codeLine
ElementEntry
The code line to be indented.
indentDepth
number
The size of indentation for the code line.
Default:
2
insertCodeBlock
Inserts a code block by setting the node to code line and wrapping it with a code block. If the cursor is not at the block start, it inserts a break before the code block.
Parameters
Collapse all
insertNodesOptions
optional
Omit<InsertNodesOptions, 'match'>
Options for inserting nodes.
insertCodeLine
Inserts a code line starting with the specified indentation depth.
Parameters
Collapse all
indentDepth
optional
number
The depth of indentation for the code line.
Default:
0
outdentCodeLine
Outdents a code line, removing two whitespace characters if present.
Options
OutdentCodeLineOptions
Collapse all
codeLine
ElementEntry
The code line to be outdented.
codeBlock
ElementEntry
The code block containing the code line to be outdented.
toggleCodeBlock
Toggles the code block in the editor.
unwrapCodeBlock
Unwraps the code block in the editor.
Callout
Column
On This Page
Features
Kit Usage
Installation
Add Kit
Manual Usage
Installation
Add Plugins
Configure Plugins
Turn Into Toolbar Button
Insert Toolbar Button
Plugins
CodeBlockPlugin
API
isCodeBlockEmpty
isSelectionAtCodeBlockStart
indentCodeLine
insertCodeBlock
insertCodeLine
outdentCodeLine
toggleCodeBlock
unwrapCodeBlock
Build your editor
Production-ready AI template and reusable components.
Get all-access
Get all-access