# Source: https://alembic.sqlalchemy.org/en/latest/api/overview.html

Title: Overview — Alembic 1.18.4 documentation

URL Source: https://alembic.sqlalchemy.org/en/latest/api/overview.html

Markdown Content:
Overview[#](https://alembic.sqlalchemy.org/en/latest/api/overview.html#overview "Link to this heading")
-------------------------------------------------------------------------------------------------------

Note

this section is a technical overview of the **internal API of Alembic**. This section is only useful for developers who wish to extend the capabilities of Alembic; for regular users, reading this section is **not necessary**.

A visualization of the primary features of Alembic’s internals is presented in the following figure. The module and class boxes do not list out all the operations provided by each unit; only a small set of representative elements intended to convey the primary purpose of each system.

![Image 1: ../_images/api_overview.png](https://alembic.sqlalchemy.org/en/latest/_images/api_overview.png)
The script runner for Alembic is present in the [Configuration](https://alembic.sqlalchemy.org/en/latest/api/config.html#alembic-config-toplevel) module. This module produces a [`Config`](https://alembic.sqlalchemy.org/en/latest/api/config.html#alembic.config.Config "alembic.config.Config") object and passes it to the appropriate function in [Commands](https://alembic.sqlalchemy.org/en/latest/api/commands.html#alembic-command-toplevel). Functions within [Commands](https://alembic.sqlalchemy.org/en/latest/api/commands.html#alembic-command-toplevel) will typically instantiate an [`ScriptDirectory`](https://alembic.sqlalchemy.org/en/latest/api/script.html#alembic.script.ScriptDirectory "alembic.script.ScriptDirectory") instance, which represents the collection of version files, and an [`EnvironmentContext`](https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.environment.EnvironmentContext "alembic.runtime.environment.EnvironmentContext"), which is a configurational facade passed to the environment’s `env.py` script.

The [`EnvironmentContext`](https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.environment.EnvironmentContext "alembic.runtime.environment.EnvironmentContext") object is the primary object used within the `env.py` script, whose main purpose is that of a facade for creating and using a [`MigrationContext`](https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.migration.MigrationContext "alembic.runtime.migration.MigrationContext") object, which is the actual migration engine that refers to a database implementation. The primary method called on this object within an `env.py` script is the [`EnvironmentContext.configure()`](https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure "alembic.runtime.environment.EnvironmentContext.configure") method, which sets up the [`MigrationContext`](https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.migration.MigrationContext "alembic.runtime.migration.MigrationContext") with database connectivity and behavioral configuration. It also supplies methods for transaction demarcation and migration running, but these methods ultimately call upon the [`MigrationContext`](https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.migration.MigrationContext "alembic.runtime.migration.MigrationContext") that’s been configured.

[`MigrationContext`](https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.migration.MigrationContext "alembic.runtime.migration.MigrationContext") is the gateway to the database for other parts of the application, and produces a [`DefaultImpl`](https://alembic.sqlalchemy.org/en/latest/api/ddl.html#alembic.ddl.impl.DefaultImpl "alembic.ddl.impl.DefaultImpl") object which does the actual database communication, and knows how to create the specific SQL text of the various DDL directives such as ALTER TABLE; [`DefaultImpl`](https://alembic.sqlalchemy.org/en/latest/api/ddl.html#alembic.ddl.impl.DefaultImpl "alembic.ddl.impl.DefaultImpl") has subclasses that are per-database-backend. In “offline” mode (e.g. `--sql`), the [`MigrationContext`](https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.migration.MigrationContext "alembic.runtime.migration.MigrationContext") will produce SQL to a file output stream instead of a database.

During an upgrade or downgrade operation, a specific series of migration scripts are invoked starting with the [`MigrationContext`](https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.migration.MigrationContext "alembic.runtime.migration.MigrationContext") in conjunction with the [`ScriptDirectory`](https://alembic.sqlalchemy.org/en/latest/api/script.html#alembic.script.ScriptDirectory "alembic.script.ScriptDirectory"); the actual scripts themselves make use of the [`Operations`](https://alembic.sqlalchemy.org/en/latest/ops.html#alembic.operations.Operations "alembic.operations.Operations") object, which provide the end-user interface to specific database operations. The [`Operations`](https://alembic.sqlalchemy.org/en/latest/ops.html#alembic.operations.Operations "alembic.operations.Operations") object is generated based on a series of “operation directive” objects that are user-extensible, and start out in the [Built-in Operation Objects](https://alembic.sqlalchemy.org/en/latest/api/operations.html#alembic-operations-ops-toplevel) module.

Another prominent feature of Alembic is the “autogenerate” feature, which produces new migration scripts that contain Python code. The autogenerate feature starts in [Autogeneration](https://alembic.sqlalchemy.org/en/latest/api/autogenerate.html#alembic-autogenerate-toplevel), and is used exclusively by the [`alembic.command.revision()`](https://alembic.sqlalchemy.org/en/latest/api/commands.html#alembic.command.revision "alembic.command.revision") command when the `--autogenerate` flag is passed. Autogenerate refers to the [`MigrationContext`](https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.migration.MigrationContext "alembic.runtime.migration.MigrationContext") and [`DefaultImpl`](https://alembic.sqlalchemy.org/en/latest/api/ddl.html#alembic.ddl.impl.DefaultImpl "alembic.ddl.impl.DefaultImpl") in order to access database connectivity and access per-backend rules for autogenerate comparisons. It also makes use of [Built-in Operation Objects](https://alembic.sqlalchemy.org/en/latest/api/operations.html#alembic-operations-ops-toplevel) in order to represent the operations that it will render into scripts.
