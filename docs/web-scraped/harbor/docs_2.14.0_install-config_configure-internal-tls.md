# Harbor docs | Configure Internal TLS communication between Harbor Component

**Source:** https://goharbor.io/docs/2.14.0/install-config/configure-internal-tls/

Configure Internal TLS communication between Harbor Component

[Harbor version 2.14.0](/docs/2.14.0)

[Harbor Installation and Configuration](/docs/2.14.0/install-config/)

* [Test Harbor with the Demo Server](/docs/2.14.0/install-config/demo-server/)
* [Harbor Compatibility List](/docs/2.14.0/install-config/harbor-compatibility-list/)
* [Harbor Installation Prerequisites](/docs/2.14.0/install-config/installation-prereqs/)
* [Download the Harbor Installer](/docs/2.14.0/install-config/download-installer/)
* [Configure HTTPS Access to Harbor](/docs/2.14.0/install-config/configure-https/)
* [Configure Internal TLS communication between Harbor Component](/docs/2.14.0/install-config/configure-internal-tls/)
* [Configure the Harbor YML File](/docs/2.14.0/install-config/configure-yml-file/)
* [Run the Installer Script](/docs/2.14.0/install-config/run-installer-script/)
* [Deploying Harbor with High Availability via Helm](/docs/2.14.0/install-config/harbor-ha-helm/)
* [Troubleshooting Harbor Installation](/docs/2.14.0/install-config/troubleshoot-installation/)
* [Reconfigure Harbor and Manage the Harbor Lifecycle](/docs/2.14.0/install-config/reconfigure-manage-lifecycle/)
* [Customize the Harbor Token Service](/docs/2.14.0/install-config/customize-token-service/)
* [Harbor Configuration](/docs/2.14.0/install-config/configure-system-settings-cli/)

[Harbor Administration](/docs/2.14.0/administration/)

[Working with Projects](/docs/2.14.0/working-with-projects/)

[Building, Customizing, and Contributing to Harbor](/docs/2.14.0/build-customize-contribute/)

By default, The internal communication between Harbor’s component (harbor-core,harbor-jobservice,proxy,harbor-portal,registry,registryctl,trivy\_adapter,chartmuseum) use HTTP protocol which might not be secure enough for some production environment. Since Harbor v2.0, TLS can be used for this internal network. In production environments, always use HTTPS is a recommended best practice.

This functionality is introduced via the `internal_tls` in `harbor.yml` file. To enabled internal TLS, set `enabled` to `true` and set the `dir` value to the path of directory that contains the internal cert files.

All certs can be automatically generated by `prepare` tool.

```
docker run -v /:/hostfs goharbor/prepare:<current_harbor_version> gencert -p /path/to/internal/tls/cert
```

User also can provide their own CA to generate the other certs. Just put certificate and key of the CA on internal tls cert directory and name them as `harbor_internal_ca.key` and `harbor_internal_ca.crt`.
Besides, a user can also provide the certs for all components. However, there are some constraints for the certs:

* First, all certs must be signed by a single unique CA
* Second, the filename of the internal cert and `CN` field on cert file must follow the convention listed below.
* Third, because the self signed certificate without SAN was deprecated in Golang 1.5, you must add the SAN extension to your cert files when generating certs by yourself or the Harbor instance will not start up normally. The DNS name in SAN extension should the same as CN field in the table below. For more information please refer to
  [golang 1.5 release notes](https://golang.org/doc/go1.15#commonname) and
  [this issue](https://github.com/golang/go/issues/24151).

  | name | usage | CN |
  | --- | --- | --- |
  | `harbor_internal_ca.key` | ca’s key file for internal TLS | N/A |
  | `harbor_internal_ca.crt` | ca’s certificate file for internal TLS | N/A |
  | `core.key` | core’s key file | N/A |
  | `core.crt` | core’s certificate file | `core` |
  | `job_service.key` | job\_service’s key file | N/A |
  | `job_service.crt` | job\_service’s certificate file | `jobservice` |
  | `proxy.key` | proxy’s key file | N/A |
  | `proxy.crt` | proxy’s certificate file | `proxy` |
  | `portal.key` | portal’s key file | N/A |
  | `portal.crt` | portal’s certificate file | `portal` |
  | `registry.key` | registry’s key file | N/A |
  | `registry.crt` | registry’s certificate file | `registry` |
  | `registryctl.key` | registryctl’s key file | N/A |
  | `registryctl.crt` | registryctl’s certificate file | `registryctl` |
  | `trivy_adapter.key` | trivy\_adapter.’s key file | N/A |
  | `trivy_adapter.crt` | trivy\_adapter.’s certificate file | `trivy-adapter` |

Contributing

[Page source](https://github.com/goharbor/website/blob/release-2.14.0/docs/install-config/configure-internal-tls.md)
[Create issue](https://github.com/goharbor/harbor/issues)