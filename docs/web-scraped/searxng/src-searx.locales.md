# Source: https://docs.searxng.org/src/searx.locales.html

[]

# Locales[¬∂](#locales "Link to this heading")

-   [SearXNG's locale data](#searxngs-locale-data)

-   [SearXNG's locale codes](#module-searx.sxng_locales)

-   [SearXNG's locale implementations](#searxngs-locale-implementations)

[]

## [SearXNG's locale data](#id1)[¬∂](#searxngs-locale-data "Link to this heading")

The variables [[`RTL_LOCALES`]](#searx.locales.RTL_LOCALES "searx.locales.RTL_LOCALES") and [[`LOCALE_NAMES`]](#searx.locales.LOCALE_NAMES "searx.locales.LOCALE_NAMES") are loaded from [git://searx/data/locales.json](https://github.com/searxng/searxng/blob/master/searx/data/locales.json) / see [[`locales_initialize`]](#searx.locales.locales_initialize "searx.locales.locales_initialize") and [[update_locales.py]](../dev/searxng_extra/update.html#update-locales-py).

Hint

Whenever the value of [[`ADDITIONAL_TRANSLATIONS`]](#searx.locales.ADDITIONAL_TRANSLATIONS "searx.locales.ADDITIONAL_TRANSLATIONS") or [[`LOCALE_BEST_MATCH`]](#searx.locales.LOCALE_BEST_MATCH "searx.locales.LOCALE_BEST_MATCH") is modified, the [git://searx/data/locales.json](https://github.com/searxng/searxng/blob/master/searx/data/locales.json) needs to be rebuild:

    ./manage data.locales

[]

## [SearXNG's locale codes](#id2)[¬∂](#module-searx.sxng_locales "Link to this heading")

List of SearXNG's locale codes used for the search language/region.

Hint

Don't modify this file, this file is generated by:

    ./manage data.traits

[[searx.sxng_locales.]][[sxng_locales]][¬∂](#searx.sxng_locales.sxng_locales "Link to this definition")

:   A list of five-digit tuples:

    0.  SearXNG's internal locale tag (a language or region tag)

    1.  Name of the language ([[`babel.core.Locale.get_language_name`]](https://babel.readthedocs.io/en/latest/api/core.html#babel.core.Locale.get_language_name "(in Babel v2.2)"))

    2.  For region tags the name of the region ([[`babel.core.Locale.get_territory_name`]](https://babel.readthedocs.io/en/latest/api/core.html#babel.core.Locale.get_territory_name "(in Babel v2.2)")). Empty string for language tags.

    3.  English language name (from [[`babel.core.Locale.english_name`]](https://babel.readthedocs.io/en/latest/api/core.html#babel.core.Locale.english_name "(in Babel v2.2)"))

    4.  Unicode flag (emoji) that fits to SearXNG's internal region tag. Languages are represented by a globe (üåê)

    ::: 
    ::: highlight
        ('en',    'English', '',              'English', 'üåê'),
        ('en-CA', 'English', 'Canada',        'English', 'üá®üá¶'),
        ('en-US', 'English', 'United States', 'English', 'üá∫üá∏'),
        ..
        ('fr',    'Fran√ßais', '',             'French',  'üåê'),
        ('fr-BE', 'Fran√ßais', 'Belgique',     'French',  'üáßüá™'),
        ('fr-CA', 'Fran√ßais', 'Canada',       'French',  'üá®üá¶'),
    :::
    :::

## [SearXNG's locale implementations](#id3)[¬∂](#searxngs-locale-implementations "Link to this heading")

[[searx.locales.]][[LOCALE_NAMES]]*[[:]][ ][[dict]](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)")[[\[]][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[,]][ ][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[\]]]*[¬∂](#searx.locales.LOCALE_NAMES "Link to this definition")

:   Mapping of locales and their description. Locales e.g. 'fr' or 'pt-BR' (see [[`locales_initialize`]](#searx.locales.locales_initialize "searx.locales.locales_initialize")).

```
<!-- -->
```

[[searx.locales.]][[RTL_LOCALES]]*[[:]][ ][[set]](https://docs.python.org/3/library/stdtypes.html#set "(in Python v3.14)")[[\[]][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[\]]][ ][[=]][ ][ [\'fa-IR\',] [\'he\'}]*[¬∂](#searx.locales.RTL_LOCALES "Link to this definition")

:   List of *Right-To-Left* locales e.g. 'he' or 'fa-IR' (see [[`locales_initialize`]](#searx.locales.locales_initialize "searx.locales.locales_initialize")).

```
<!-- -->
```

[[searx.locales.]][[ADDITIONAL_TRANSLATIONS]]*[ ][[=]][ ][ [\'ﬁãﬁ®ﬁàﬁ¨ﬁÄﬁ®] [(Dhivehi)\',] [\'oc\':] [\'Occitan\',] [\'pap\':] [\'Papiamento\',] [\'szl\':] [\'≈öl≈çnski] [(Silesian)\'}]*[¬∂](#searx.locales.ADDITIONAL_TRANSLATIONS "Link to this definition")

:   Additional languages SearXNG has translations for but not supported by python-babel (see [[`locales_initialize`]](#searx.locales.locales_initialize "searx.locales.locales_initialize")).

```
<!-- -->
```

[[searx.locales.]][[LOCALE_BEST_MATCH]]*[ ][[=]][ ][ [\'si\',] [\'nl-BE\':] [\'nl\',] [\'oc\':] [\'fr-FR\',] [\'pap\':] [\'pt-BR\',] [\'szl\':] [\'pl\',] [\'zh-HK\':] [\'zh-Hant-TW\'}]*[¬∂](#searx.locales.LOCALE_BEST_MATCH "Link to this definition")

:   Map a locale we do not have a translations for to a locale we have a translation for. By example: use Taiwan version of the translation for Hong Kong.

```
<!-- -->
```

[[searx.locales.]][[get_translations]][(][)][[[\[source\]]]](../_modules/searx/locales.html#get_translations)[¬∂](#searx.locales.get_translations "Link to this definition")

:   Monkey patch of [[`flask_babel.get_translations`]](https://python-babel.github.io/flask-babel/index.html#flask_babel.get_translations "(in Flask-Babel)")

```
<!-- -->
```

[[searx.locales.]][[get_translation_locales]][(][)] [[‚Üí] [[[list]](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.14)")[[\[]][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[\]]]]][[[\[source\]]]](../_modules/searx/locales.html#get_translation_locales)[¬∂](#searx.locales.get_translation_locales "Link to this definition")

:   Returns the list of translation locales (*underscore*). The list is generated from the translation folders in [git://searx/translations](https://github.com/searxng/searxng/blob/master/searx/translations)

```
<!-- -->
```

[[searx.locales.]][[locales_initialize]][(][)][[[\[source\]]]](../_modules/searx/locales.html#locales_initialize)[¬∂](#searx.locales.locales_initialize "Link to this definition")

:   Initialize locales environment of the SearXNG session.

    -   monkey patch [[`flask_babel.get_translations`]](https://python-babel.github.io/flask-babel/index.html#flask_babel.get_translations "(in Flask-Babel)") by [[`get_translations`]](#searx.locales.get_translations "searx.locales.get_translations")

    -   init global names [[`LOCALE_NAMES`]](#searx.locales.LOCALE_NAMES "searx.locales.LOCALE_NAMES"), [[`RTL_LOCALES`]](#searx.locales.RTL_LOCALES "searx.locales.RTL_LOCALES")

```
<!-- -->
```

[[searx.locales.]][[region_tag]][(]*[[locale]][[:]][ ][[[Locale]](https://babel.readthedocs.io/en/latest/api/core.html#babel.core.Locale "(in Babel v2.2)")]*[)] [[‚Üí] [[[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")]][[[\[source\]]]](../_modules/searx/locales.html#region_tag)[¬∂](#searx.locales.region_tag "Link to this definition")

:   Returns SearXNG's region tag from the locale (e.g. zh-TW , en-US).

```
<!-- -->
```

[[searx.locales.]][[language_tag]][(]*[[locale]][[:]][ ][[[Locale]](https://babel.readthedocs.io/en/latest/api/core.html#babel.core.Locale "(in Babel v2.2)")]*[)] [[‚Üí] [[[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")]][[[\[source\]]]](../_modules/searx/locales.html#language_tag)[¬∂](#searx.locales.language_tag "Link to this definition")

:   Returns SearXNG's language tag from the locale and if exits, the tag includes the script name (e.g. en, zh_Hant).

```
<!-- -->
```

[[searx.locales.]][[get_locale]][(]*[[locale_tag]][[:]][ ][[[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")]*[)] [[‚Üí] [[[Locale]](https://babel.readthedocs.io/en/latest/api/core.html#babel.core.Locale "(in Babel v2.2)")[ ][[\|]][ ][[None]](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)")]][[[\[source\]]]](../_modules/searx/locales.html#get_locale)[¬∂](#searx.locales.get_locale "Link to this definition")

:   Returns a [`babel.Locale`] object parsed from argument [`locale_tag`]

```
<!-- -->
```

[[searx.locales.]][[get_official_locales]][(]*[[territory]][[:]][ ][[[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")]*, *[[languages]][[:]][ ][[[list]](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.14)")[[\[]][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[\]]][ ][[\|]][ ][[None]](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)")][ ][[=]][ ][[None]]*, *[[regional]][[:]][ ][[[bool]](https://docs.python.org/3/library/functions.html#bool "(in Python v3.14)")][ ][[=]][ ][[False]]*, *[[de_facto]][[:]][ ][[[bool]](https://docs.python.org/3/library/functions.html#bool "(in Python v3.14)")][ ][[=]][ ][[True]]*[)] [[‚Üí] [[[set]](https://docs.python.org/3/library/stdtypes.html#set "(in Python v3.14)")[[\[]][[Locale]](https://babel.readthedocs.io/en/latest/api/core.html#babel.core.Locale "(in Babel v2.2)")[[\]]]]][[[\[source\]]]](../_modules/searx/locales.html#get_official_locales)[¬∂](#searx.locales.get_official_locales "Link to this definition")

:   Returns a list of [`babel.Locale`] with languages from [[`babel.languages.get_official_languages`]](https://babel.readthedocs.io/en/latest/api/languages.html#babel.languages.get_official_languages "(in Babel v2.2)").

    Parameters[:]

    :   -   **territory** -- The territory (country or region) code.

        -   **languages** -- A list of language codes the languages from [[`babel.languages.get_official_languages`]](https://babel.readthedocs.io/en/latest/api/languages.html#babel.languages.get_official_languages "(in Babel v2.2)") should be in (intersection). If this argument is [`None`], all official languages in this territory are used.

        -   **regional** -- If the regional flag is set, then languages which are regionally official are also returned.

        -   **de_facto** -- If the de_facto flag is set to False, then languages which are "de facto" official are not returned.

```
<!-- -->
```

[[searx.locales.]][[get_engine_locale]][(]*[[searxng_locale]][[:]][ ][[[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")]*, *[[engine_locales]][[:]][ ][[[dict]](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)")[[\[]][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[,]][ ][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[\]]]]*, *[[default]][[:]][ ][[[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[ ][[\|]][ ][[None]](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)")][ ][[=]][ ][[None]]*[)] [[‚Üí] [[[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[ ][[\|]][ ][[None]](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)")]][[[\[source\]]]](../_modules/searx/locales.html#get_engine_locale)[¬∂](#searx.locales.get_engine_locale "Link to this definition")

:   Return engine's language (aka locale) string that best fits to argument [`searxng_locale`].

    Argument [`engine_locales`] is a python dict that maps *SearXNG locales* to corresponding *engine locales*:

    ::: 
    ::: highlight
        <engine>: 
    :::
    :::

    ::: 
    Hint

    The *SearXNG locale* string has to be known by babel!
    :::

    If there is no direct 1:1 mapping, this functions tries to narrow down engine's language (locale). If no value can be determined by these approximation attempts the [`default`] value is returned.

    Assumptions:

    1.  When user select a language the results should be optimized according to the selected language.

    2.  When user select a language and a territory the results should be optimized with first priority on territory and second on language.

    First approximation rule (*by territory*):

    > <div>
    >
    > When the user selects a locale with territory (and a language), the territory has priority over the language. If any of the official languages in the territory is supported by the engine ([`engine_locales`]) it will be used.
    >
    > </div>

    Second approximation rule (*by language*):

    > <div>
    >
    > If "First approximation rule" brings no result or the user selects only a language without a territory. Check in which territories the language has an official status and if one of these territories is supported by the engine.
    >
    > </div>

```
<!-- -->
```

[[searx.locales.]][[match_locale]][(]*[[searxng_locale]][[:]][ ][[[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")]*, *[[locale_tag_list]][[:]][ ][[[list]](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.14)")[[\[]][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[\]]]]*, *[[fallback]][[:]][ ][[[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[ ][[\|]][ ][[None]](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)")][ ][[=]][ ][[None]]*[)] [[‚Üí] [[[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[ ][[\|]][ ][[None]](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)")]][[[\[source\]]]](../_modules/searx/locales.html#match_locale)[¬∂](#searx.locales.match_locale "Link to this definition")

:   Return tag from [`locale_tag_list`] that best fits to [`searxng_locale`].

    Parameters[:]

    :   -   **searxng_locale** ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")) -- SearXNG's internal representation of locale (de, de-DE, fr-BE, zh, zh-CN, zh-TW ..).

        -   **locale_tag_list** ([*list*](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.14)")) -- The list of locale tags to select from

        -   **fallback** ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")) -- fallback locale tag (if unset --\> [`None`])

    The rules to find a match are implemented in [[`get_engine_locale`]](#searx.locales.get_engine_locale "searx.locales.get_engine_locale"), the [`engine_locales`] is build up by [[`build_engine_locales`]](#searx.locales.build_engine_locales "searx.locales.build_engine_locales").

    ::: 
    Hint

    The *SearXNG locale* string and the members of [`locale_tag_list`] has to be known by babel! The [[`ADDITIONAL_TRANSLATIONS`]](#searx.locales.ADDITIONAL_TRANSLATIONS "searx.locales.ADDITIONAL_TRANSLATIONS") are used in the UI and are not known by babel --\> will be ignored.
    :::

```
<!-- -->
```

[[searx.locales.]][[build_engine_locales]][(]*[[tag_list]][[:]][ ][[[list]](https://docs.python.org/3/library/stdtypes.html#list "(in Python v3.14)")[[\[]][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[\]]]]*[)] [[‚Üí] [[[dict]](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)")[[\[]][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[,]][ ][[str]](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)")[[\]]]]][[[\[source\]]]](../_modules/searx/locales.html#build_engine_locales)[¬∂](#searx.locales.build_engine_locales "Link to this definition")

:   From a list of locale tags a dictionary is build that can be passed by argument [`engine_locales`] to [[`get_engine_locale`]](#searx.locales.get_engine_locale "searx.locales.get_engine_locale"). This function is mainly used by [[`match_locale`]](#searx.locales.match_locale "searx.locales.match_locale") and is similar to what the [`fetch_traits(..)`] function of engines do.

    If there are territory codes in the [`tag_list`] that have a *script code* additional keys are added to the returned dictionary.

    ::: 
    ::: highlight
        >>> import locales
        >>> engine_locales = locales.build_engine_locales(['en', 'en-US', 'zh', 'zh-CN', 'zh-TW'])
        >>> engine_locales
        
        >>> get_engine_locale('zh-Hans', engine_locales)
        'zh-CN'
    :::
    :::

    This function is a good example to understand the language/region model of SearXNG:

    > <div>
    >
    > SearXNG only distinguishes between **search languages** and **search regions**, by adding the *script-tags*, languages with *script-tags* can be assigned to the **regions** that SearXNG supports.
    >
    > </div>