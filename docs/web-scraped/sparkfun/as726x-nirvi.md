# Source: https://learn.sparkfun.com/tutorials/as726x-nirvi

## Introduction

The AS726X Spectral Sensors from AMS brings a field of study to consumers that was previously unavailable, spectroscopy! It\'s now easier than ever to measure and characterize how different materials absorb and reflect different wavelengths of light. Don\'t know what part of the spectrum you want to look at? You\'re in luck! Sparkfun carries two different flavors of spectrometer. The [AS7262](https://www.sparkfun.com/products/14347) detects wavelengths in the visible range while the [AS7263](https://www.sparkfun.com/products/14351) detects wavelengths just below the visible range, in the Near Infrared (NIR) range.

[![SparkFun Spectral Sensor Breakout - AS7262 Visible (Qwiic)](https://cdn.sparkfun.com/r/600-600/assets/parts/1/2/3/2/6/14347-01.jpg)](https://www.sparkfun.com/sparkfun-spectral-sensor-breakout-as7262-visible-qwiic.html)

### [SparkFun Spectral Sensor Breakout - AS7262 Visible (Qwiic)](https://www.sparkfun.com/sparkfun-spectral-sensor-breakout-as7262-visible-qwiic.html) 

[ SEN-14347 ]

The SparkFun AS7262 Visible Spectral Sensor Breakout brings spectroscopy to the palm of your hand, making it easier than ever...

[ [\$28.50] ]

[![SparkFun Spectral Sensor Breakout - AS7263 NIR (Qwiic)](https://cdn.sparkfun.com/r/600-600/assets/parts/1/2/3/3/8/14351-01.jpg)](https://www.sparkfun.com/sparkfun-spectral-sensor-breakout-as7263-nir-qwiic.html)

### [SparkFun Spectral Sensor Breakout - AS7263 NIR (Qwiic)](https://www.sparkfun.com/sparkfun-spectral-sensor-breakout-as7263-nir-qwiic.html) 

[ SEN-14351 ]

The SparkFun AS7263 Near Infrared (NIR) Spectral Sensor Breakout brings spectroscopy to the palm of your hand, making it easi...

[ [\$33.95] ]

### Required Materials

To follow along with this hookup guide, you will need one of the following Qwiic shields to match your preference of microcontroller:

[![SparkFun Qwiic HAT for Raspberry Pi](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/4/9/5/14459-01.jpg)](https://www.sparkfun.com/sparkfun-qwiic-hat-for-raspberry-pi.html)

### [SparkFun Qwiic HAT for Raspberry Pi](https://www.sparkfun.com/sparkfun-qwiic-hat-for-raspberry-pi.html) 

[ DEV-14459 ]

The SparkFun Qwiic HAT for Raspberry Pi is the quickest and easiest way to make your way into the Qwiic ecosystem and still u...

[ [\$6.95] ]

[![SparkFun Qwiic Shield for Arduino](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/3/4/3/14352-01.jpg)](https://www.sparkfun.com/sparkfun-qwiic-shield-for-arduino.html)

### [SparkFun Qwiic Shield for Arduino](https://www.sparkfun.com/sparkfun-qwiic-shield-for-arduino.html) 

[ DEV-14352 ]

The SparkFun Qwiic Shield is an easy-to-assemble board that provides a simple way to incorporate the Qwiic Connect System wit...

[ [\$7.75] ]

[![SparkFun Qwiic Shield for Photon](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/5/2/6/14477-01.jpg)](https://www.sparkfun.com/products/14477)

### [SparkFun Qwiic Shield for Photon](https://www.sparkfun.com/products/14477) 

[ DEV-14477 ]

The SparkFun Qwiic Shield for Photon is an easy-to-assemble board that provides a simple way to incorporate the Qwiic System ...

**Retired**

You will also need a Qwiic cable to connect the shield to your AS726X, choose a length that suits your needs.

[![Qwiic Cable - 100mm](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/4/5/3/14427-Qwiic_Cable_-_100mm-01.jpg)](https://www.sparkfun.com/qwiic-cable-100mm.html)

### [Qwiic Cable - 100mm](https://www.sparkfun.com/qwiic-cable-100mm.html) 

[ PRT-14427 ]

This is a 100mm long 4-conductor cable with 1mm JST termination. It's designed to connect Qwiic enabled components together...

**Retired**

[![Qwiic Cable - 50mm](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/4/5/2/14426-Qwiic_Cable_-_50mm-01.jpg)](https://www.sparkfun.com/qwiic-cable-50mm.html)

### [Qwiic Cable - 50mm](https://www.sparkfun.com/qwiic-cable-50mm.html) 

[ PRT-14426 ]

This is a 50mm long 4-conductor cable with 1mm JST termination. It's designed to connect Qwiic enabled components together ...

**Retired**

[![Qwiic Cable - 200mm](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/4/5/4/14428-Qwiic_Cable_-_200mm-01.jpg)](https://www.sparkfun.com/products/14428)

### [Qwiic Cable - 200mm](https://www.sparkfun.com/products/14428) 

[ PRT-14428 ]

This is a 200mm long 4-conductor cable with 1mm JST termination. It's designed to connect Qwiic enabled components together...

**Retired**

[![Qwiic Cable - 500mm](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/4/5/5/14429-Qwiic_Cable_-_500mm-01.jpg)](https://www.sparkfun.com/products/14429)

### [Qwiic Cable - 500mm](https://www.sparkfun.com/products/14429) 

[ PRT-14429 ]

This is a 500mm long 4-conductor cable with 1mm JST termination. It's designed to connect Qwiic enabled components together...

**Retired**

### Suggested Reading

If you aren\'t familiar with the Qwiic system, we recommend reading [here for an overview](https://www.sparkfun.com/qwiic).

  -----------------------------------------------------------------------------------------------------------------------------------------------------
  [![Qwiic Connect System](https://cdn.sparkfun.com/assets/custom_pages/2/7/2/qwiic-logo.png "Qwiic Connect System")](https://www.sparkfun.com/qwiic)
  *[Qwiic Connect System](https://www.sparkfun.com/qwiic)*
  -----------------------------------------------------------------------------------------------------------------------------------------------------

We would also recommend taking a look at the following tutorials if you aren\'t familiar with them.

[](https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering)

### How to Solder: Through-Hole Soldering 

This tutorial covers everything you need to know about through-hole soldering.

[](https://learn.sparkfun.com/tutorials/serial-communication)

### Serial Communication 

Asynchronous serial communication concepts: packets, signal levels, baud rates, UARTs and more!

[](https://learn.sparkfun.com/tutorials/light)

### Light 

Light is a useful tool for the electrical engineer. Understanding how light relates to electronics is a fundamental skill for many projects.

[](https://learn.sparkfun.com/tutorials/i2c)

### I2C 

An introduction to I2C, one of the main embedded communications protocols in use today.

[](https://learn.sparkfun.com/tutorials/qwiic-shield-for-arduino--photon-hookup-guide)

### Qwiic Shield for Arduino & Photon Hookup Guide 

Get started with our Qwiic ecosystem with the Qwiic shield for Arduino or Photon.

## Hardware Overview

The AS7262 detects 450, 500, 550, 570, 600, and 650nm of light each with 40nm of full-width half-max detection. The AS7263 can detect 610, 680, 730, 760, 810, and 860nm of light each with 20nm of full-width half-max detection.

### Communication

âš¡ **Warning:** You should only use a **3.3V** USB-to-serial converter when connecting to the serial port. Using a 5V USB-to-serial converter may damage the components on the board.\
\

[![SparkFun FTDI Basic Breakout - 3.3V](https://cdn.sparkfun.com/r/140-140/assets/parts/3/9/5/8/09873-01a.jpg)](https://www.sparkfun.com/sparkfun-ftdi-basic-breakout-3-3v.html)

### [SparkFun FTDI Basic Breakout - 3.3V](https://www.sparkfun.com/sparkfun-ftdi-basic-breakout-3-3v.html) 

[ DEV-09873 ]

This is the newest revision of our \[FTDI Basic\](https://www.sparkfun.com/products/retired/8772). We now use a SMD 6-pin heade...

[ [\$18.50] ]

[![SparkFun Beefy 3 - FTDI Basic Breakout](https://cdn.sparkfun.com/r/140-140/assets/parts/1/1/2/7/6/13746-01.jpg)](https://www.sparkfun.com/sparkfun-beefy-3-ftdi-basic-breakout.html)

### [SparkFun Beefy 3 - FTDI Basic Breakout](https://www.sparkfun.com/sparkfun-beefy-3-ftdi-basic-breakout.html) 

[ DEV-13746 ]

This is SparkFun Beefy 3 FTDI Basic Breakout for the FTDI FT231X USB to serial IC. The pinout of this board matches the FTDI ...

[ [\$18.95] ]

[![SparkFun Serial Basic Breakout - CH340G](https://cdn.sparkfun.com/r/140-140/assets/parts/1/1/8/8/8/14050-01.jpg)](https://www.sparkfun.com/sparkfun-serial-basic-breakout-ch340g.html)

### [SparkFun Serial Basic Breakout - CH340G](https://www.sparkfun.com/sparkfun-serial-basic-breakout-ch340g.html) 

[ DEV-14050 ]

The SparkFun Serial Basic Breakout is an easy-to-use USB-to-Serial adapter based on the CH340G IC from WCH.

[ [\$9.25] ]

The AS726X is unique as it can communicate by both an I^2^C interface (through the onboard Qwiic connectors, or pins at the bottom of the board) and serial interface using AT commands (pins at the top of the board).

[![Serial Ports](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/i2cSerial.png)](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/i2cSerial.png)

While I^2^C is the default setting (The default I^2^C address is **0x49** for both AS7262 and AS7263), serial communication via UART can be enabled by removing solder from the jumpers labeled JP1, adding solder to the jumper labeled JP2 (on the back of the board), and using Sparkfun\'s [USB-to-Serial](https://www.sparkfun.com/products/14050) breakout to interface directly with the computer. JP1 also connects the I^2^C bus to pull-up resistors. If multiple sensors are connected to the bus with the pull-up resistors enabled, the parallel equivalent resistance will create too strong of a pull-up for the bus to operate correctly. As a general rule of thumb, disable all but one pair of pull-up resistors if multiple devices are connected to the bus. If you need to disconnect the pull up resistors they can be removed by removing the solder on jumper JP1 highlighted below.

  ---------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------
  [![Solder Jumper 1](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/jp1.png)](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/jp1.png)   [![Solder Jumper 2](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/jp2.png)](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/jp2.png)
  ---------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------

**Note:** Using both the AS7263 NIR and AS7262 VIS sensors in the same bus? Try using the Qwiic MUX board since they have the same I2C address!\
\

[![SparkFun Qwiic Mux Breakout - 8 Channel (TCA9548A)](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/8/9/0/14685-SparkFun_Qwiic_Mux_Breakout_-_8_Channel__TCA9548A_-01.jpg)](https://www.sparkfun.com/products/14685)

### [SparkFun Qwiic Mux Breakout - 8 Channel (TCA9548A)](https://www.sparkfun.com/products/14685) 

[ BOB-14685 ]

The SparkFun Qwiic Mux Breakout enables communication with multiple I2C devices that have the same address that makes it simp...

**Retired**

### LED

The board also has multiple ways for you to illuminate the object that you are trying to measure for a more accurate spectroscopy reading. There is an onboard, 5700K LED that has been picked out specifically for this task. However, if you aren\'t satisfied with the onboard LED, you can grab your own through hole incandescent. While you should find a bulb rated for 3.3V, a bulb rated for higher voltage, like 5V, will still work, but will not run as bright as it normally would with 5V. We\'ve found that [Mouser](http://www.mouser.com/Optoelectronics/Lamps-Holders/Lamps/_/N-5g6r?P=1yzs1o7Z1z0wtyvZ1z0w0pvZ1yyg4qyZ1yyg4rqZ1z0ws3kZ1z0wa5iZ1yzubgzZ1yyg4r3Z1z0w8xrZ1z0yt45) is a good place to look for these. If you are going to go that route and use your own bulb, be sure to disable the onboard LED by removing the solder from the JP4 jumper.

[![Solder Jumper 4](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/jp4.png)](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/jp4.png)

## Hardware Assembly

The beauty of Sparkfun\'s new Qwiic environment means that connecting the sensor could not be easier. Just plug one end of the Qwiic cable into the AS726X, the other into one of the Qwiic Shields, and stack the board on a development board. You\'ll be ready to upload a sketch to start taking spectroscopy measurements. It seems too easy, but thats why we made it this way! Here\'s an example using the RedBoard Programmed with Arduino.

[![alt text](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/6/8/5/Qwiic_Demo.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/Qwiic_Demo.jpg)

## Library Overview 

**Note:** This example assumes you are using the latest version of the Arduino IDE on your desktop. If this is your first time using Arduino, please review our tutorial on [installing the Arduino IDE.](https://learn.sparkfun.com/tutorials/installing-arduino-ide) If you have not previously installed an Arduino library, please check out our [installation guide.](https://learn.sparkfun.com/tutorials/installing-an-arduino-library)

Before we get started, we\'ll need to download and install SparkFun\'s AS726X Arduino library. You can use the Arduino Library Manager by searching \"**SparkFun AS726X**\" to automatically install. Or you can download the library and install it using the button below.

[Download the SparkFun AS726X Arduino Library (ZIP)](https://github.com/sparkfun/Sparkfun_AS726X_Arduino_Library/archive/master.zip)

Before we get started developing a sketch, let\'s look at the available functions of the library.

- `bool begin(TwoWire &wirePort, byte gain, byte measurementMode);` \-\-- Initializes the sensor with user given values for the wire port, gain, and measurement
- `void takeMeasurements();` \-\-- Sensor writes spectral measurements to memory locations.
- `void takeMeasurementsWithBulb();` \-\-- Illuminates onboard bulb, calls `takeMeasurements();`, then turns off the onboard bulb.
- `byte getTemperature();` \-\-- Fetches the temperature in degrees Celsius.
- `float getTemperatureF();` \-\-- Fetches the temperature in degrees Fahrenheit.
- `void setMeasurementMode(byte mode);` \-\-- Changes the measurement mode to 0, 1, 2, or 3
  - 0: Continuous reading of VBGY (Visible) / STUV (IR)
  - 1: Continuous reading of GYOR (Visible) / RTUX (IR)
  - 2: Continuous reading of all channels
  - 3: One-shot reading of all channels (power-on default)
- `boolean dataAvailable();` \-\-- Returns `true` or `false` based on whether or not data is available to be read.
- `void enableIndicator();` \-\-- Powers on the surface mounted blue indicator LED.
- `void disableIndicator();` \-\-- Powers off the surface mounted blue indicator LED.
- `void setIndicatorCurrent(byte current);` \-\-- Sets the current on the indicator LED. The default is `current = 3`, or 8 mA.
  - 0: 1 mA
  - 1: 2 mA
  - 2: 4 mA
  - 3: 8 mA
- `void enableBulb();` \-\-- Powers on the surface mounted blue indicator LED.
- `void disableBulb();` \-\-- Powers off the surface mounted blue indicator LED.
- `void setBulbCurrent(byte current);` \-\-- Sets the current limit on the indicator LED and optional bulb (They are connected in parallel) The default is `current = 0` or 12.5 mA.
  - 0: 12.5 mA
  - 1: 25 mA
  - 2: 50 mA
  - 3: 100 mA
- `void softReset();` \-\-- Gives the sensor a 1 second reset.
- `void setGain(byte gain);` \-\-- Pass in a 0, 1, 2 or 3 to change the gain.
  - 0: 1x
  - 1: 3.7x
  - 2: 16x
  - 3: 64x (power-on default)
- `void setIntegrationTime(byte integrationValue);` \-\-- This sets the time over which samples are taken.
  - Takes a value between 0 and 255.
  - Integration time will be 2.8 ms \* `integrationValue`.
- `void enableInterrupt();` \-\-- Pulls the interrupt pin low. (Note: not yet implemented)
- `void disableInterrupt();` \-\-- Pulls the interrupt pin high.
- If you\'d like access to just one channel, getting uncalibrated and calibrated spectral readings for the AS7262 (Visible) sensor can be accomplished with the following commands:
  - `int getViolet();`
  - `int getBlue();`
  - `int getGreen();`
  - `int getYellow();`
  - `int getOrange();`
  - `int getRed();`
  - `float getCalibratedViolet();`
  - `float getCalibratedBlue();`
  - `float getCalibratedGreen();`
  - `float getCalibratedYellow();`
  - `float getCalibratedOrange();`
  - `float getCalibratedRed();`
- A similar set of functions is available for accessing individual channels on the AS7263 (Near Infrared) sensor.
  - `int getR();`
  - `int getS();`
  - `int getT();`
  - `int getU();`
  - `int getV();`
  - `int getW();`
  - `float getCalibratedR();`
  - `float getCalibratedS();`
  - `float getCalibratedT();`
  - `float getCalibratedU();`
  - `float getCalibratedV();`
  - `float getCalibratedW();`

## Example Code

### Example 1 \-\-- Basic Readings

The below sketch will get you up and running taking calibrated spectral readings on all 6 channels. Once this sketch is uploaded, open the [serial monitor](https://learn.sparkfun.com/tutorials/terminal-basics) with a baud rate of 115200 to display the spectral data from the sensor.

    language:c
    #include "AS726X.h"

    AS726X sensor;

    void setup() 

    void loop() 
      else if (sensor.getVersion() == SENSORTYPE_AS7263)
      

      Serial.print("] tempF[");
      Serial.print(sensor.getTemperatureF(), 1);
      Serial.print("]");

      Serial.println();
    }

If we want, we can change the gain, measurement mode, and Wire that I^2^C uses by calling the `begin()` function with a few arguments. First, let\'s look at what values we can assign to which characteristic.

### Example 2 \-\-- Sensor Settings

The below example code will initialize our sensor with a gain of 16x, measurement mode of 0, and our regular I^2^C port (you can run the sensor on a different I^2^C port if you have the right hardware, a Teensy perhaps?).

    language:c
    #include "AS726X.h"
    AS726X sensor;//Creates the sensor object
    byte GAIN = 0;
    byte MEASUREMENT_MODE = 0;

    void setup() 

    void loop() 
      else if (sensor.getVersion() == SENSORTYPE_AS7263)
      

      Serial.print("] tempF[");
      Serial.print(sensor.getTemperatureF(), 1);
      Serial.print("]");

      Serial.println();
    }

#### Expected Output

Here is a picture of what to expect when bringing your AS726X online for either of the above sketches. (The program will print \"AS7263 online!\" instead if you have that sensor)

[![Example Output for AS7262](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/AS726Xdata.PNG)](https://cdn.sparkfun.com/assets/learn_tutorials/6/8/5/AS726Xdata.PNG)