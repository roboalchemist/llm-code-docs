# Source: https://learn.sparkfun.com/tutorials/micromod-weather-carrier-board-hookup-guide

## Introduction

Introducing the [MicroMod Weather Carrier Board](https://www.sparkfun.com/products/16794)! This nifty little weather station board works with all SparkFun MicroMod Processors so you can customize your weather station project to fit your needs.

[![SparkFun MicroMod Weather Carrier Board](https://cdn.sparkfun.com/r/600-600/assets/parts/1/5/7/0/3/16794-SparkFun_MicroMod_Weather_Carrier_Board-01b.jpg)](https://www.sparkfun.com/sparkfun-micromod-weather-carrier-board.html)

### [SparkFun MicroMod Weather Carrier Board](https://www.sparkfun.com/sparkfun-micromod-weather-carrier-board.html) 

[ SEN-16794 ]

The MicroMod Weather Carrier Board periphery for the MicroMod ecosystem that allows you to create your own weather station wi...

**Retired**

The Weather Carrier Board includes three sensors: the BME280 Temperature, Pressure and Humidity sensor, the VEML6075 UV light sensor and the AS3935 lightning detector. Along with these on-board sensors there is a 3-pin latch terminal to add an external [soil moisture sensor](https://www.sparkfun.com/products/13637) as well as a pair of RJ11 jacks to plug in the wind and rain sensors included with our [Weather Meter Kit](https://www.sparkfun.com/products/15901). To top it all off there is a microSD card slot so you can plug in an SD card to log all of that glorious weather data!

### Required Materials

Like all of our MicroMod Carrier Boards, there is no processor included but instead you can plug in a processor of your choice to the MicroMod M.2 connector on the carrier. Here are few options to choose for your processor:

[![SparkFun MicroMod ESP32 Processor](https://cdn.sparkfun.com/r/140-140/assets/parts/1/5/6/8/0/16781-SparkFun_MicroMod_ESP32_Processor-01.jpg)](https://www.sparkfun.com/sparkfun-micromod-esp32-processor.html)

### [SparkFun MicroMod ESP32 Processor](https://www.sparkfun.com/sparkfun-micromod-esp32-processor.html) 

[ WRL-16781 ]

This board combines Espressif\'s ESP32 with our M.2 connector interface to bring a power-packed processor board into our Micro...

[ [\$19.95] ]

[![SparkFun MicroMod nRF52840 Processor](https://cdn.sparkfun.com/r/140-140/assets/parts/1/5/9/2/1/16984-SparkFun_MicroMod_nRF52840_Processor-04.jpg)](https://www.sparkfun.com/sparkfun-micromod-nrf52840-processor.html)

### [SparkFun MicroMod nRF52840 Processor](https://www.sparkfun.com/sparkfun-micromod-nrf52840-processor.html) 

[ WRL-16984 ]

The SparkFun MicroMod nRF52840 Processor offers a powerful combination of ARM Cortex-M4 CPU and 2.4 GHz Bluetooth transceiver...

[ [\$29.50] ]

[![SparkFun MicroMod SAMD51 Processor](https://cdn.sparkfun.com/r/140-140/assets/parts/1/5/6/9/8/16791-SparkFun_MicroMod_SAMD51_Processor-01a.jpg)](https://www.sparkfun.com/sparkfun-micromod-samd51-processor.html)

### [SparkFun MicroMod SAMD51 Processor](https://www.sparkfun.com/sparkfun-micromod-samd51-processor.html) 

[ DEV-16791 ]

With a 32-bit ARM Cortex-M4F MCU, the SparkFun MicroMod SAMD51 Processor Board is one powerful microcontroller packaged on a ...

[ [\$18.95] ]

[![SparkFun MicroMod Artemis Processor](https://cdn.sparkfun.com/r/140-140/assets/parts/1/5/1/3/0/16401-SparkFun_MicroMod_Artemis_Processor-01.jpg)](https://www.sparkfun.com/sparkfun-micromod-artemis-processor.html)

### [SparkFun MicroMod Artemis Processor](https://www.sparkfun.com/sparkfun-micromod-artemis-processor.html) 

[ DEV-16401 ]

Featuring the Artemis Module, this processor is capable of machine learning, Bluetooth, I2C, GPIO, PWM, SPI & packaged to fit...

[ [\$17.50] ]

You\'ll also need a USB-C cable to connect the Carrier Board to your computer and if you want to add some Qwiic breakouts to your MicroMod project you\'ll want at least one Qwiic cable to connect it all together. Below are some options for both of those cables:

[![SparkFun Qwiic Cable Kit](https://cdn.sparkfun.com/r/140-140/assets/parts/1/3/4/3/1/15081-_01.jpg)](https://www.sparkfun.com/sparkfun-qwiic-cable-kit.html)

### [SparkFun Qwiic Cable Kit](https://www.sparkfun.com/sparkfun-qwiic-cable-kit.html) 

[ KIT-15081 ]

To make it even easier to get started, we\'ve assembled this Qwiic Cable Kit with a variety of Qwiic cables from 50mm to 500mm...

[ [\$12.95] ]

[![Flexible Qwiic Cable - 100mm](https://cdn.sparkfun.com/r/140-140/assets/parts/1/6/2/4/6/17259-Flexible_Qwiic_Cable_-_100mm-01.jpg)](https://www.sparkfun.com/flexible-qwiic-cable-100mm.html)

### [Flexible Qwiic Cable - 100mm](https://www.sparkfun.com/flexible-qwiic-cable-100mm.html) 

[ PRT-17259 ]

This polarized I2C cable insulation is made from silicon making it more flexible than our original Qwiic cable particularly i...

[ [\$1.95] ]

[![Reversible USB A to C Cable - 2m](https://cdn.sparkfun.com/r/140-140/assets/parts/1/3/9/8/3/15424-Reversible_USB_A_to_C_Cable_-_2m-01.jpg)](https://www.sparkfun.com/reversible-usb-a-to-c-cable-2m.html)

### [Reversible USB A to C Cable - 2m](https://www.sparkfun.com/reversible-usb-a-to-c-cable-2m.html) 

[ CAB-15424 ]

These 2m cables have minor modifications that allow them to be be plugged into their ports regardless of orientation on the U...

[ [\$10.50] ]

[![USB 3.1 Cable A to C - 3 Foot](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/9/7/2/14743-USB_3.1_Cable_A_to_C_-_3_Foot-01.jpg)](https://www.sparkfun.com/usb-3-1-cable-a-to-c-3-foot.html)

### [USB 3.1 Cable A to C - 3 Foot](https://www.sparkfun.com/usb-3-1-cable-a-to-c-3-foot.html) 

[ CAB-14743 ]

USB C is fantastic. But until we have converted all our hubs, chargers, and ports over to USB C this is the cable you\'re goin...

[ [\$7.95] ]

If you want to take full advantage of the features of the Weather Carrier Board you will also need a SparkFun Soil Moisture Sensor, the Weather Meter Kit and a microSD card:

[![Weather Meter Kit](https://cdn.sparkfun.com/r/140-140/assets/parts/1/4/5/3/9/15901-Weather_Meter-02.jpg)](https://www.sparkfun.com/weather-meter-kit.html)

### [Weather Meter Kit](https://www.sparkfun.com/weather-meter-kit.html) 

[ SEN-15901 ]

Whether you are measuring wind speed, direction or rain, this is the Weather Meter for you.

[ [\$79.95] ]

[![SparkFun Soil Moisture Sensor (with Screw Terminals)](https://cdn.sparkfun.com/r/140-140/assets/parts/1/1/0/4/0/13637-01.jpg)](https://www.sparkfun.com/sparkfun-soil-moisture-sensor-with-screw-terminals.html)

### [SparkFun Soil Moisture Sensor (with Screw Terminals)](https://www.sparkfun.com/sparkfun-soil-moisture-sensor-with-screw-terminals.html) 

[ SEN-13637 ]

A simple breakout for measuring the moisture in soil and similar materials. The exposed pads function together acting as a va...

[ [\$7.95] ]

[![SparkFun Soil Moisture Sensor](https://cdn.sparkfun.com/r/140-140/assets/parts/1/0/6/1/0/13322-01.jpg)](https://www.sparkfun.com/sparkfun-soil-moisture-sensor.html)

### [SparkFun Soil Moisture Sensor](https://www.sparkfun.com/sparkfun-soil-moisture-sensor.html) 

[ SEN-13322 ]

A simple breakout for measuring the moisture in soil and similar materials. The exposed pads function together acting as a va...

[ [\$6.55] ]

[![microSD Card - 16GB (Class 10)](https://cdn.sparkfun.com/r/140-140/assets/parts/1/3/3/9/4/15051-microSD_Card_-_16GB__Class_10_-01.jpg)](https://www.sparkfun.com/microsd-card-16gb-class-10.html)

### [microSD Card - 16GB (Class 10)](https://www.sparkfun.com/microsd-card-16gb-class-10.html) 

[ COM-15051 ]

This is a class 10 16GB microSD memory card, perfect for housing operating systems for single board computers and a multitude...

**Retired**

### Suggested Reading

The SparkFun MicroMod ecosystem offers a unique way to allow users to customize their project to their needs. Do you want to send your weather data via a wireless signal (e.g. Bluetooth or WiFi)? There\'s a MicroMod Processor for that. Looking to instead maximize efficiency and processing power? You guessed it, there\'s a MicroMod Processor for that.

If you aren\'t familiar with the MicroMod ecosystem, we recommend reading [here for an overview](https://www.sparkfun.com/micromod).

  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [![MicroMod Logo](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/8/9/micromod-logo.jpg "Click to learn more about the MicroMod ecosystem!")](https://www.sparkfun.com/micromod)
  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Before you get started with the Weather Carrier Board, you may want to read through the Hookup Guide for your chosen [MicroMod Processor](https://www.sparkfun.com/micromod#processor_boards). MicroMod Processor Hookup Guides can be found on the processors\' product pages. We also recommend reading through the following tutorials if you are not familiar with the concepts covered in them:

[](https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi)

### Serial Peripheral Interface (SPI) 

SPI is commonly used to connect microcontrollers to peripherals such as sensors, shift registers, and SD cards.

[](https://learn.sparkfun.com/tutorials/i2c)

### I2C 

An introduction to I2C, one of the main embedded communications protocols in use today.

[](https://learn.sparkfun.com/tutorials/terminal-basics)

### Serial Terminal Basics 

This tutorial will show you how to communicate with your serial devices using a variety of terminal emulator applications.

[](https://learn.sparkfun.com/tutorials/getting-started-with-micromod)

### Getting Started with MicroMod 

Dive into the world of MicroMod - a compact interface to connect a microcontroller to various peripherals via the M.2 Connector!

If you\'re interested in learning more about each of the sensors included on the Weather Carrier Board, take a look at their dedicated Hookup Guides:

[](https://learn.sparkfun.com/tutorials/qwiic-uv-sensor-veml6075-hookup-guide)

### Qwiic UV Sensor (VEML6075) Hookup Guide 

Learn how to connect your VEML6075 UV Sensor and figure out just when you should put some sunscreen on.

[](https://learn.sparkfun.com/tutorials/sparkfun-as3935-lightning-detector-hookup-guide-v20)

### SparkFun AS3935 Lightning Detector Hookup Guide (v20) 

Are you worried about the looming clouds in the distance, how far away is that storm exactly? Add lightning detection with the AS3935 to your next weather station or your next bike ride!

[](https://learn.sparkfun.com/tutorials/qwiic-atmospheric-sensor-bme280-hookup-guide)

### Qwiic Atmospheric Sensor (BME280) Hookup Guide 

Measure temperature, humidity, barometric pressure with the SparkFun Atmospheric Sensor Breakout BME280 (Qwiic).

## Hardware Overview

In this section we\'ll cover the various hardware, sensors and adjustable solder jumpers on the MicroMod Weather Carrier Board, the external sensor connections and the pinout of the Carrier Board for a detailed look at how it connects to your chosen MicroMod Processor.

### Common Components

Most SparkFun MicroMod Carrier Boards will have some common components and all MicroMod Carrier Boards will have the keyed M.2 MicroMod Connector to plug your processor into. The photo and list below outline some of the components you can expect on the Weather Carrier Board and most other SparkFun MicroMod Carrier Boards.

- **M.2 MicroMod Connector** - This special keyed M.2 connector lets you install your MicroMod Processor of choice on your Weather Carrier Board.
- **USB-C Connector** - Connect to your computer to program your processor and also can provide power to your MicroMod system.
- **3.3V Regulator** - Provides a regulated **3.3V** and sources up to **1A**.
- **Qwiic Connector** - The standard Qwiic connector so you can add other Qwiic devices to your MicroMod system.
- **Boot/Reset Buttons** - Push buttons to enter boot mode on processors and to reset your MicroMod circuit.
- **RTC Backup Battery & Charge Circuit** - **1mAh** backup battery for the Real-Time Clocks on MicroMod Processors that have a built-in RTC. Receives charge voltage from **3.3V**.
- **microSD Slot** - Insert a microSD card formatted to FAT32 here to log your weather data.

[![Annotated photo for common components on the Weather Carrier Board.](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MiroMod_Weather_CB_Common_Components.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MiroMod_Weather_CB_Common_Components.jpg)

### Weather Station Sensors and External Sensor Connections

As we mentioned in the introduction, the board comes with a BME280 Temperature, Pressure and Humidity Sensor, a VEML6075 UV Light Sensor and a AS3935 Lightning Detector. Along with those on board sensors there is a three pin latch terminal for a soil moisture sensor as well as a pair of RJ11 jacks for connecting wind and rain meters.

The three on board sensors paired with the external sensors allows for a powerful and customizable weather tracking tool.

#### BME280 Temperature, Pressure and Humidity Sensor

The BME280 Atmospheric Sensor from Bosch is the heavy lifter of the Weather Carrier Board. The BME280 is a highly-accurate, digital environmental sensor that measures ambient temperature, relative humidity and barometric pressure.

[![Weather Carrier Board with BME280 Highlighted.](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_BME280.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_BME280.jpg)

The BME280 measures humidity from 0 to 100% with an absolute accuracy of ±3 %RH (from 20-80%RH), temperatures between 0°C to 65°C with an absolute accuracy of ±0.5-1.5°C (full temperature range is -40°C to 85°C) and atmospheric pressures between 300 to 1100hPa with an absolute accuracy of ±1hPa (relative accuracy of ±0.12hPa). The I^2^C address of the BME280 is **0x77**.

For detailed information on the sensor\'s functionality and characteristics, refer to the [BME280 Datasheet](https://cdn.sparkfun.com/assets/e/7/3/b/1/BME280_Datasheet.pdf) or our Hookup Guide for the [SparkFun Qwiic Atmospheric Sensor (BME280)](https://learn.sparkfun.com/tutorials/qwiic-atmospheric-sensor-bme280-hookup-guide).

#### VEML6075 UV Sensor

The VEML6075 UV light sensor from Vishay Semiconductors measures UVA (320-400 nm, peak \@365 ±10nm ) and UVB (228-320 nm, peak \@330 ±10nm) irradiance so you can calculate the [UV Index](https://en.wikipedia.org/wiki/Ultraviolet_index) at your Weather Station. [Example 4 - Calculate UVI](https://github.com/sparkfun/SparkFun_VEML6075_Arduino_Library/blob/master/examples/Example4_Calculate_UVI/Example4_Calculate_UVI.ino) in the SparkFun VEML6075 Arduino Library demonstrates how to calculate that index using this sensor.

[![Weather Carrier Board with VEML6075 Highlighted.](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_VEML6075.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_VEML6075.jpg)

The VEML6075 has a UVA resolution of 0.93 counts/µW/cm^2^ and a UVB resolution of 2.1 counts/µW/cm^2^. The I^2^C address is **0x10**.

For more information about this UV sensor, refer to the [VEML6075 datasheet](https://cdn.sparkfun.com/assets/3/c/3/2/f/veml6075.pdf) or our Hookup Guide for the [SparkFun Qwiic UV Sensor (VEML6075)](https://learn.sparkfun.com/tutorials/qwiic-uv-sensor-veml6075-hookup-guide).

#### AS3935 Lightning Detector

The AS3935 Lightning Detector from AMS can detect lightning strikes up to 40km away with an accuracy of up to 1km from the storm front. The specially-tuned antenna picks up lightning events in the 500kHz band and a built-in algorithm helps check the incoming signal pattern to reject potential man-made disturbers such as DC/DC converters in large appliances.

[![Weather Carrier Board with AS3935 and Antenna Highlighted.](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_AS3935.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_AS3935.jpg)

The AS3935 Lightning Detector is connected to the primary SPI bus and Chip Select (CS) for the AS3935 is tied to **G1**/Bus1 (MicroMod pad 42).

For in-depth information about the sensor, refer to the [AS3935 Datasheet](https://cdn.sparkfun.com/assets/learn_tutorials/9/2/1/AS3935_Datasheet_EN_v2.pdf) or our Hookup Guide for the [SparkFun Lightning Detector Breakout](https://learn.sparkfun.com/tutorials/sparkfun-as3935-lightning-detector-hookup-guide-v20).

#### Soil Moisture Sensor Latch Terminal

The three-pin latch terminal makes it easy to connect a [Soil Moisture Sensor](https://www.sparkfun.com/products/13637) to your Weather Carrier Board. The soil moisture sensor is a handy addition to the Weather Carrier Board if you are using it in something like a greenhouse environment to keep an eye on your soil and, with some slick coding, you could even turn an irrigation system on or off depending on the sensor\'s measurements.

[![Weather Carrier Board with Soil Moisture Latch Terminal Highlighted.](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_Soil.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_Soil.jpg)

The Soil Moisture Sensor has two large coated pads that act as prongs for what is essentially a large variable resistor. The sensor takes advantage of a simple concept of moist soil being more conductive than dry soil so as more water is added to the soil, the resistance of the circuit drops and the SIG output increases.

Power (**3.3V**) for the sensor is provided by **G0** (MicroMod pad 40) allowing you to turn it on and off easily (continuous power is not recommended for the soil moisture sensor) and the Signal output is tied to **A0** (MicroMod pad 34).

If you are looking for some inspiration for an automated watering project, check out our [Product Showcase Video](https://www.youtube.com/watch?v=1h6D_pkeoks) and the [Soil Moisture Sensor Hookup Guide](https://learn.sparkfun.com/tutorials/soil-moisture-sensor-hookup-guide).

#### Wind and Rain RJ11 Connectors

The two RJ11 connectors allow you to connect the wind and rain sensors included with our [Weather Meters Kit](https://www.sparkfun.com/products/15901) to monitor wind speed, wind direction and rainfall. These two sensors are great additions to an outdoor Weather Carrier Board setup to get a more complete view of weather in the area.

[![Weather Carrier Board with Wind and Rain RJ11 Jacks Highlighted.](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_Wind-Rain.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_Wind-Rain.jpg)

The Weather Meters Kit includes an anemometer to measure wind speed, a wind vain to determine wind direction and a self-emptying tipping bucket collector to monitor rainfall. The anemometer outputs a digital signal tied to **D0** (MicroMod pad 10). The wind vain outputs an analog signal relative to its position tied to **A1** (MicroMod pad 38). The rainfall detector outputs a digital signal to **D1** (MicroMod pad 18).

For help assembling and testing your Weather Meters Kit, check out our [Weather Meter Hookup Guide](https://learn.sparkfun.com/tutorials/weather-meter-hookup-guide).

### Plated Through-Hole Headers

The Weather Carrier Board also routes several pins from a connected MicroMod Processor to a pair of plated through-hole (PTH) headers.

[![Weather Carrier Board with PTH Headers highlighted](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_PTH_Headers.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_PTH_Headers.jpg)

On the \"North\"/Top of the board, the primary SPI bus is routed to a PTH header (the CS pin on this header is routed to G2/BUS2), a trio of Ground pins and both PWM1 & PWM0 if users wish to solder components that can use pulse-width modulation.

The \"South\"/Bottom of the board features both Serial UARTs (UART1 & UART2), another pair of Ground pins as well as **3.3V** and SDA/SCL from the primary I^2^C bus if users prefer to have a soldered connection for I^2^C devices instead of the Qwiic connector.

### Solder Jumpers

If you have never worked with solder jumpers and PCB traces before or would like a quick refresher, check out our [How to Work with Solder Jumpers and PCB Traces](https://learn.sparkfun.com/tutorials/how-to-work-with-jumper-pads-and-pcb-traces) tutorial for detailed instructions and tips.

There are a total of seven adjustable solder jumpers on the MicroMod Weather Carrier Board labeled **I^2^C**, **MEAS**, **BYP**, **VE**, **UV**, **5V** and **3V3**. The table below briefly outlines their functionalities:

**Jumper Name/Label**

Description

Default State

I^2^C Pull-Up/I^2^C

Pulls the SDA/SCL lines to **3.3V** via two **2.2K Ohm** resistors

CLOSED

Measure/MEAS

Open this jumper to probe the current draw at the **3.3V** output of the regulator. For help measuring current, take a look at our [How to Use a Multimeter](https://learn.sparkfun.com/tutorials/how-to-use-a-multimeter#measuring-current) tutorial.

CLOSED

Bypass/BYP

The \"penny-in-the-fuse\" jumper. Bypasses the **6V/2A** fuse and nets VIN and V_USB together. **Close only if you know what you are doing!**

OPEN

Voltage Regulator Enable/VE

Voltage regulator control. Close this jumper to control the VREG in low-power applications.

OPEN

UV Sensor Power/UV

Connects VDD of the VEML6075 UV Sensor to **3.3V**. Open the jumper to disable power to the UV Sensor.

CLOSED

VIN LED Power/VIN LED

Connects the 5V/VIN LED to **5V** via a **1K Ohm** resistor. Open to disable the LED.

CLOSED

3.3V LED Power/3V3 LED

Connects the 3.3V LED to **3.3V** via a **1K Ohm** resistor. Open to disable the LED.

CLOSED

  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [![Highlighting the solder jumpers on the front of the Data Logging Carrier Board](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_Jumpers_Front.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_Jumpers_Front.jpg)   [![Highlighting the solder jumpers on the back of the Data Logging Carrier Board](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_Jumpers_Back.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_Jumpers_Back.jpg)
  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

*Having trouble viewing the detail in these photos? Click on them for a larger view.*

### MicroMod Pinout

Since this carrier board is designed to work with all of the MicroMod Processors we\'ve included the table below to outline which pins are used so, if you would like, you can compare them to the pinout tables in their respective Hookup Guides.

- [Weather Carrier Board Pinout Table](#WeatherCB)
- [MicroMod General Pinout Table](#MMGen)
- [MicroMod General Pin Descriptions](#MMDescript)

**AUDIO**

**UART**

**GPIO/BUS**

**I^2^C**

**SDIO**

**SPI**

**Dedicated**

  M.2 Connector Pin#   MicroMod Pin Name                Weather Station Connection   Description
  -------------------- -------------------------------- ---------------------------- ------------------------------------------------------------------------
  1                    [GND]   GND                          Ground plane.
  2                    3.3V                             3.3V                         Regulated 3.3V via USB-C.
  3                    USB_D+                           Passthrough                  USB D+ connection for Processor Board.
  4                    3.3V_EN                          3.3V Enable                  Voltage regulator enable input.
  5                    USB_D-                           Passthrough                  USB D- connection for Processor Board.
  6                    RESET                            RESET Button                 Connected to RESET Button. Reset is active LOW
  9                    USB_VIN                          VIN                          Input voltage from USB.
  10                   D0                               WSPEED                       Digital pin for wind speed.
  11                   BOOT                             BOOT Button                  Connected to BOOT Button. Boot is active LOW.
  12                   I2C_SDA                          I2C_SDA                      I^2^C data signal for BME280, VEML6075 and other Qwiic/I^2^C devices.
  14                   I2C_SCL                          I2C_SCL                      I^2^C clock signal for BME280, VEML6075 and other Qwiic/I^2^C devices.
  17                   UART_TX1                         TX1                          UART1 data output. Tied to TX1 PTH header pin.
  18                   D1/CAM_TRIG                      RAIN                         Digital pin for rain meter signal.
  19                   UART_RX1                         RX1                          UART1 data input. Tied to RX1 PTH header pin.
  20                   UART_RX2                         RX2                          UART2 data input. Tied to RX2 PTH header pin.
  21                   SWDCK                            SWDCK                        Serial Wire Debug Clock.
  22                   UART_TX2                         TX2                          UART2 data output. Tied to TX2 PTH header pin.
  23                   SWDIO                            SWDIO                        Serial Wire Debug I/O
  32                   PWM0                             PWM0                         Dedicated PWM0 pin. Broken out to PTH header pin.
  34                   A0                               SOIL_MOIST_SIG               Analog input from soil mositure sensor.
  38                   A1                               WDIR                         Analog input for wind direction.
  40                   G0/BUS0                          SOIL_MOIST_PWR               General purpose pin configured for 3.3V output.
  42                   G1/BUS1                          LIGHTNING_CS                 AS3935 Chip Select.
  44                   G2/BUS2                          HEADER_CS                    General chip select pin. Tied to SPI PTH header.
  46                   G3/BUS3                          LIGHTNING_INT                AS3935 interrupt pin.
  47                   PWM1                             PWM1                         Dedicated PWM1 pin. Broken out to PTH header pin.
  49                   BATT_VIN/3                       VIN/3                        Divided input voltage for monitoring power supply.
  55                   SPI_CS                           SD_CS                        µSD Chip Select.
  57                   SPI_SCK                          SPI_SCK                      SPI clock signal.
  59                   SPI_COPI                         SPI_COPI                     SPI Controller Out/Peripheral In signal.
  61                   SPI_CIPO                         SPI_CIPO                     SPI Controller In/Peripheral Out signal.
  72                   RTC_3V                           RTC_3V                       3V output for backup battery charging.

+-----------------------------------------------------------+---------+------------+---------------------------------------------------------------+
| Function                                                  | Bottom\ |    Top   \ | Function                                                      |
|                                                           | Pin     | Pin        |                                                               |
+==========+==========+===========+=========================+=========+============+====================================+=========+===========+====+
|          |          |           | (Not Connected)         |         | **75**     | GND                                |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | 3.3V                    | **74**  | **73**     | G5 / BUS5                          |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | RTC_3V_BATT             | **72**  | **71**     | G6 / BUS6                          |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          | SPI_CS1#  | SDIO_DATA3 (I/O)        | **70**  | **69**     | G7 / BUS7                          |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | SDIO_DATA2 (I/O)        | **68**  | **67**     | G8                                 |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | SDIO_DATA1 (I/O)        | **66**  | **65**     | G9                                 | ADC_D-  | CAM_HSYNC |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          | SPI_CIPO1 | SDIO_DATA0 (I/O)        | **64**  | **63**     | G10                                | ADC_D+  | CAM_VSYNC |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          | SPI COPI1 | SDIO_CMD (I/O)          | **62**  | **61**     | SPI_CIPO (I)                       |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          | SPI SCK1  | SDIO_SCK (O)            | **60**  | **59**     | SPI_COPI (O)                       | LED_DAT |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | AUD_MCLK (O)            | **58**  | **57**     | SPI_SCK (O)                        | LED_CLK |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
| CAM_MCLK | PCM_OUT  | I2S_OUT   | AUD_OUT                 | **56**  | **55**     | SPI_CS#                            |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
| CAM_PCLK | PCM_IN   | I2S_IN    | AUD_IN                  | **54**  | **53**     | I2C_SCL1 (I/O)                     |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
| PDM_DATA | PCM_SYNC | I2S_WS    | AUD_LRCLK               | **52**  | **51**     | I2C_SDA1 (I/O)                     |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
| PDM_CLK  | PCM_CLK  | I2S_SCK   | AUD_BCLK                | **50**  | **49**     | BATT_VIN / 3 (I - ADC) (0 to 3.3V) |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | G4 / BUS4               | **48**  | **47**     | PWM1                               |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | G3 / BUS3               | **46**  | **45**     | GND                                |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | G2 / BUS2               | **44**  | **43**     | CAN_TX                             |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | G1 / BUS1               | **42**  | **41**     | CAN_RX                             |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | G0 / BUS0               | **40**  | **39**     | GND                                |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | A1                      | **38**  | **37**     | USBHOST_D-                         |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | GND                     | **36**  | **35**     | USBHOST_D+                         |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | A0                      | **34**  | **33**     | GND                                |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | PWM0                    | **32**  | **31**     | Module Key                         |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | Module Key              | **30**  | **29**     | Module Key                         |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | Module Key              | **28**  | **27**     | Module Key                         |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | Module Key              | **26**  | **25**     | Module Key                         |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | Module Key              | **24**  | **23**     | SWDIO                              |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | UART_TX2 (O)            | **22**  | **21**     | SWDCK                              |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | UART_RX2 (I)            | **20**  | **19**     | UART_RX1 (I)                       |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          | CAM_TRIG  | D1                      | **18**  | **17**     | UART_TX1 (0)                       |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | I2C_INT#                | **16**  | **15**     | UART_CTS1 (I)                      |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | I2C_SCL (I/0)           | **14**  | **13**     | UART_RTS1 (O)                      |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | I2C_SDA (I/0)           | **12**  | **11**     | BOOT (I - Open Drain)              |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | D0                      | **10**  | **9**      | USB_VIN                            |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          | SWO       | G11                     | **8**   | **7**      | GND                                |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | RESET# (I - Open Drain) | **6**   | **5**      | USB_D-                             |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | 3.3V_EN                 | **4**   | **3**      | USB_D+                             |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+
|          |          |           | 3.3V                    | **2**   | **1**      | GND                                |         |           |    |
+----------+----------+-----------+-------------------------+---------+------------+------------------------------------+---------+-----------+----+

Signal Group

Signal

I/O

Description

Voltage

Power

3.3V

I

3.3V Source

3.3V

GND

Return current path

0V

USB_VIN

I

USB VIN compliant to USB 2.0 specification. Connect to pins on Processor Board that require 5V for USB functionality

4.8-5.2V

RTC_3V_BATT

I

3V provided by external coin cell or mini battery. Max draw=100μA. Connect to pins maintaining an RTC during power loss. Can be left NC.

3V

3.3V_EN

O

Controls the carrier board\'s main voltage regulator. Voltage above 1V will enable 3.3V power path.

3.3V

BATT_VIN/3

I

Carrier board raw voltage over 3. 1/3 resistor divider is implemented on carrier board. Amplify the analog signal as needed for full 0-3.3V range

3.3V

Reset

Reset

I

Input to processor. Open drain with pullup on processor board. Pulling low resets processor.

3.3V

Boot

I

Input to processor. Open drain with pullup on processor board. Pulling low puts processor into special boot mode. Can be left NC.

3.3V

USB

USB_D±

I/O

USB Data ±. Differential serial data interface compliant to USB 2.0 specification. If UART is required for programming, USB± must be routed to a USB-to-serial conversion IC on the processor board.

USB Host

USBHOST_D±

I/O

For processors that support USB Host Mode. USB Data±. Differential serial data interface compliant to USB 2.0 specification. Can be left NC.

CAN

CAN_RX

I

CAN Bus receive data.

3.3V

CAN_TX

O

CAN Bus transmit data.

3.3V

UART

UART_RX1

I

UART receive data.

3.3V

UART_TX1

O

UART transmit data.

3.3V

UART_RTS1

O

UART request to send.

3.3V

UART_CTS1

I

UART clear to send.

3.3V

UART_RX2

I

2nd UART receive data.

3.3V

UART_TX2

O

2nd UART transmit data.

3.3V

I2C

I2C_SCL

I/O

I^2^C clock. Open drain with pullup on carrier board.

3.3V

I2C_SDA

I/O

I^2^C data. Open drain with pullup on carrier board

3.3V

I2C_INT#

I

Interrupt notification from carrier board to processor. Open drain with pullup on carrier board. Active LOW

3.3V

I2C_SCL1

I/O

2nd I^2^C clock. Open drain with pullup on carrier board.

3.3V

I2C_SDA1

I/O

2nd I^2^C data. Open drain with pullup on carrier board.

3.3V

SPI

SPI_COPI

O

SPI Controller Output/Peripheral Input.

3.3V

SPI_CIPO

I

SPI Controller Input/Peripheral Output.

3.3V

SPI_SCK

O

SPI Clock.

3.3V

SPI_CS#

O

SPI Chip Select. Active LOW. Can be routed to GPIO if hardware CS is unused.

3.3V

SPI/SDIO

SPI_SCK1/SDIO_CLK

O

2nd SPI Clock. Secondary use is SDIO Clock.

3.3V

SPI_COPI1/SDIO_CMD

I/O

2nd SPI Controller Output/Peripheral Input. Secondary use is SDIO command interface.

3.3V

SPI_CIPO1/SDIO_DATA0

I/O

2nd SPI Peripheral Input/Controller Output. Secondary use is SDIO data exchange bit 0.

3.3V

SDIO_DATA1

I/O

SDIO data exchange bit 1.

3.3V

SDIO_DATA2

I/O

SDIO data exchange bit 2.

3.3V

SPI_CS1/SDIO_DATA3

I/O

2nd SPI Chip Select. Secondary use is SDIO data exchange bit 3.

3.3V

Audio

AUD_MCLK

O

Audio master clock.

3.3V

AUD_OUT/PCM_OUT/I2S_OUT/CAM_MCLK

O

Audio data output. PCM synchronous data output. I2S serial data out. Camera master clock.

3.3V

AUD_IN/PCM_IN/I2S_IN/CAM_PCLK

I

Audio data input. PCM syncrhonous data input. I2S serial data in. Camera periphperal clock.

3.3V

AUD_LRCLK/PCM_SYNC/I2S_WS/PDM_DATA

I/O

Audio left/right clock. PCM syncrhonous data SYNC. I2S word select. PDM data.

3.3V

AUD_BCLK/PCM_CLK/I2S_CLK/PDM_CLK

O

Audio bit clock. PCM clock. I2S continuous serial clock. PDM clock.

3.3V

SWD

SWDIO

I/O

Serial Wire Debug I/O. Connect if processor board supports SWD. Can be left NC.

3.3V

SWDCK

I

Serial Wire Debug clock. Connect if processor board supports SWD. Can be left NC.

3.3V

ADC

A0

I

Analog to digital converter 0. Amplify the analog signal as needed to enable full 0-3.3V range.

3.3V

A1

I

Analog to digital converter 1. Amplify the analog signal as needed to enable full 0-3.3V range.

3.3V

PWM

PWM0

O

Pulse width modulated output 0.

3.3V

PWM1

O

Pulse width modulated output 1.

3.3V

Digital

D0

I/O

General digital input/output pin.

3.3V

D1/CAM_TRIG

I/O

General digital input/output pin. Camera trigger.

3.3V

General/Bus

G0/BUS0

I/O

General purpose pins. Any unused processor pins should be assigned to Gx with ADC + PWM capable pins given priority (0, 1, 2, etc.) positions. The intent is to guarantee PWM, ADC and Digital Pin functionality on respective ADC/PWM/Digital pins. Gx pins do not guarantee ADC/PWM function. Alternative use is pins can support a fast read/write 8-bit or 4-bit wide bus.

3.3V

G1/BUS1

I/O

3.3V

G2/BUS2

I/O

3.3V

G3/BUS3

I/O

3.3V

G4/BUS4

I/O

3.3V

G5/BUS5

I/O

3.3V

G6/BUS6

I/O

3.3V

G7/BUS7

I/O

3.3V

G8

I/O

General purpose pin

3.3V

G9/ADC_D-/CAM_HSYNC

I/O

Differential ADC input if available. Camera horizontal sync.

3.3V

G10/ADC_D+/CAM_VSYNC

I/O

Differential ADC input if available. Camera vertical sync.

3.3V

G11/SWO

I/O

General purpose pin. Serial Wire Output

3.3V

### Board Dimensions

The Weather Carrier Board measures 2.65\" x 2.30\" (67.31mm x 58.42mm) and has four mounting holes that fit a standard [4-40 screw](https://www.sparkfun.com/products/10453).

[![MicroMod Weather Carrier Board Dimensions](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB-Dimensions.png)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB-Dimensions.png)

## Hardware Assembly

Now that we are familiar with the hardware and sensors on the Weather Carrier Board, it\'s time to assemble it with your chosen MicroMod Processor and get it connected to your computer.

### Inserting your Processor

With the M.2 MicroMod connector, connecting your processor board is a breeze. Simply match up the key on your processor\'s beveled edge connector to the key on the M.2 connector. At a 45° angle, insert the processor board to the M.2 connector. The processor board will stick up at an angle as seen here:

[![nRF52840 Processor is inserted to M.2 connector on Weather Carrier board at 45 degree angle.](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/4/0/1/MicroMod_nRF52840-Connected_Not_Secured.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/4/0/1/MicroMod_nRF52840-Connected_Not_Secured.jpg)

Once the board is in the socket, gently press the processor board down, grab the set screw and tighten it with a Phillip\'s head screwdriver:

[![Securing nRF52840 Processor into place with the MicroMod set screw and a screwdriver.](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/4/0/1/MicroMod_nRF52840-Securing_Processor.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/4/0/1/MicroMod_nRF52840-Securing_Processor.jpg)

Once the processor board is secure, your assembled MicroMod system should look similar to the image below!

[![MicroMod nRF52840 Processor secured to the Weather Carrier Board.](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/4/0/1/MicroMod_nRF52840-Processor_Secured.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/4/0/1/MicroMod_nRF52840-Processor_Secured.jpg)

**Note:** There is *technically* no way to insert the processor backward since the key prevents it from mating with the M.2 connector. As an extra safeguard to prevent inserting a processor improperly or with a poor connection, the mounting screw will not match up if the processor is not plugged in entirely.

### Assembling External Sensors

For users with the Soil Moisture Sensor and/or the Weather Meters Kit some extra assembly is required. We have detailed assembly instructions for both of these peripherals in their respective Hookup Guides. You can find them here:

[](https://learn.sparkfun.com/tutorials/soil-moisture-sensor-hookup-guide)

### Soil Moisture Sensor Hookup Guide 

A quick hookup guide and project to get you started with the Soil Moisture Sensor from SparkFun.

[](https://learn.sparkfun.com/tutorials/weather-meter-hookup-guide)

### Weather Meter Hookup Guide 

How to assemble your very own weather meter!

Once your external sensors are assembled, connecting them is a snap (literally). To connect the Soil Moisture Sensor, simply plug in the three wires to the three-pin latch terminals taking care to match the signals. For the Weather Meters, just plug the connectors for the Wind & Rain signals into their matching RJ11 jacks on the Weather Carrier Board.

### Connecting Everything Up

With your processor inserted and secured it\'s time to connect your MicroMod Weather Carrier Board to your computer using the USB-C connector. Depending on which processor you choose and which drivers you already have installed, you may need to install drivers for your board. Refer to your processor\'s hookup guide for detailed instructions on how to install them.

[![Fully assembled MicroMod Weather Carrier Board with external sensors](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_Assembled.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/1/1/9/3/MicroMod_Weather_CB_Assembled.jpg)

With your MicroMod Weather Carrier Board, Processor Board, and any external sensors assembled we can now move on to uploading some code to monitor your environment! Head on to the next section for an example to test all the sensors the Weather Carrier Board features.

## Weather Station Arduino Example

**Note:**These examples assume you are using the latest version of the Arduino IDE on your desktop. If this is your first time using Arduino, please review our tutorial on [installing the Arduino IDE](https://learn.sparkfun.com/tutorials/installing-arduino-ide). If you have not previously installed an Arduino library, please check out our [installation guide](https://learn.sparkfun.com/tutorials/installing-an-arduino-library).

We\'ve written a few examples to get started with the Weather Carrier Board. They can be found in the \"Examples\" folder of [Hardware GitHub Repository](https://github.com/sparkfun/MicroMod_Weather_Carrier_Board) and will work with any SparkFun MicroMod Processor you choose. In this section we\'ll only cover the comprehensive Weather Station example, but you can use the other examples to test each sensor on the Weather Carrier along with the additional soil moisture and weather meter sensors.

[] **Note:** Make sure that for whichever MicroMod Processor you choose, you have the correct board definitions installed.\
\
For this particular example, we are using the Artemis MicroMod Processor. Board definitions for this processor board can be found in the [Software Setup and Programming](https://learn.sparkfun.com/tutorials/micromod-artemis-processor-board-hookup-guide#software-setup-and-programming) section of the [Artemis MicroMod Processor Board Hookup Guide](https://learn.sparkfun.com/tutorials/micromod-artemis-processor-board-hookup-guide).\
\
If you are using a different processor, go to our [MicroMod Processor Boards](https://www.sparkfun.com/micromod#processor_boards) landing page, find your Processor, and head on over to its tutorial for help installing your board definition.

### MicroMod Weather Carrier Board Test Example

Before getting started with the Weather Carrier Board Example you will need to install the Board Definitions for your chosen MicroMod Processor (outlined above) as well as the [BME280](https://github.com/sparkfun/SparkFun_BME280_Arduino_Library), [VEML6075](https://github.com/sparkfun/SparkFun_VEML6075_Arduino_Library) and [AS3935](https://github.com/sparkfun/SparkFun_AS3935_Lightning_Detector_Arduino_Library) Arduino Libraries. You can install them using the Arduino Library manager and searching \'**SparkFun BME280**\', \'**SparkFun VEML6075**\' and \'**SparkFun AS3935**\'. Alternatively, you can download the libraries from their respective GitHub repositories linked above or you can download the .ZIP for each of them by clicking the buttons below:

[SparkFun BME280 Arduino Library (ZIP)](https://github.com/sparkfun/SparkFun_BME280_Arduino_Library/archive/master.zip)

[SparkFun VEML6075 Arduino Library (ZIP)](https://github.com/sparkfun/SparkFun_VEML6075_Arduino_Library/archive/master.zip)

[SparkFun AS3935 Arduino Library (ZIP)](https://github.com/sparkfun/SparkFun_AS3935_Lightning_Detector_Arduino_Library/archive/master.zip)

With the libraries and processor board definitions installed we can go ahead and move on to opening the MicroMod Weather Example sketch and uploading it to our MicroMod Processor. You can open a new blank sketch and copy the code from below or you can download the entire GitHub repository for the Weather Carrier Board which includes all of the examples by clicking the button below:

[SparkFun MicroMod Weather Carrier Board GitHub Repository (ZIP)](https://github.com/sparkfun/MicroMod_Carrier_Board-WeatherStation/archive/master.zip)

Navigate to the location the repository downloaded to and open the **Examples** folder. In that folder you\'ll find examples for each sensor as well as **MM_Weather_CB_Test**. Open that example in the Arduino IDE or copy the code below into a blank sketch, select your Board and Port and click \"Upload\".

    language:c
    /*
     * MicroMod Weather Carrier Board Example
     * 
     * This sketch tests all of the weather sensors on the carrier board:
     * atmospheric sensor - BME280, UV sensor - VEML6075, lightning detector - AS3935,
     * soil moisture sensor, wind and rain meters.
     * 
     * Priyanka Makin @ SparkX Labs
     * Original Creation Date: August 20, 2020
     * 
     * This code is Lemonadeware; if you see me (or any other SparkFun employee) at the
     * local, and you've found our code helpful, please buy us a round!
     * 
     * Hardware Connections:
     * Insert MicroMod Processor Board of your choice into the M.2 connector of the SparkFun Weather carrier
     *  Screw into place
     * Connect Weather carrier board to power useing USB-C cable
     * Connect SparkFun Soil Moisture Sensor to Weather carrier using latching terminals
     * Connect both wind and rain meters to Weather carrier using the RJ11 connectors
     */

    #include <Wire.h>
    #include <SPI.h>
    #include "SparkFunBME280.h"
    #include <SparkFun_VEML6075_Arduino_Library.h>
    #include "SparkFun_AS3935.h"

    BME280 tempSensor;
    VEML6075 uv;
    SparkFun_AS3935 lightning;

    #define INDOOR 0x12 
    #define OUTDOOR 0xE
    #define LIGHTNING_INT 0x08
    #define DISTURBER_INT 0x04
    #define NOISE_INT 0x01

    #if defined(ESP_PLATFORM)
    int LED_BUILTIN = 5;
    //int A0 = 34;
    int G0 = 4;
    int D0 = 23;
    //int A1 = 35;
    int D1 = 27;
    const int G3 = 17;
    int G1 = 12;
    #elif defined(ARDUINO_ARCH_SAMD)
    int G0 = 2;
    int D0 = 0;
    int D1 = 1;
    //const int lightningInt = G3;  //SPI does not currently work on the SAMD51 proto
    //int spiCS = G1;
    #endif

    int soilPin = A0;  //Pin number that measures analog moisture signal
    int soilPower = G0;  //Pin number that will power the soil moisture sensor
    int WSPEED = D0; //Digital I/O pin for wind speed
    int WDIR = A1; //Analog pin for wind direction
    int RAIN = D1;   //Digital I/O pin for rain fall
    const int lightningInt = G3; // Interrupt pin for lightning detection
    int spiCS = G1; //SPI chip select pin

    volatile bool rainFlag = false;
    volatile bool windFlag = false;

    //Function is called every time the rain bucket tips
    void rainIRQ()
    

    //Function is called when the magnet in the anemometer is activated
    void wspeedIRQ()
    

    // This variable holds the number representing the lightning or non-lightning
    // event issued by the lightning detector. 
    int intVal = 0;
    int noise = 2; // Value between 1-7 
    int disturber = 2; // Value between 1-10

    void setup() 
      if (uv.begin() == false) 

      pinMode(LED_BUILTIN, OUTPUT);
      pinMode(soilPower, OUTPUT);
      digitalWrite(soilPower, LOW);
      // When lightning is detected the interrupt pin goes HIGH.
      pinMode(lightningInt, INPUT);

      //Initialization for weather meter
      pinMode(WSPEED, INPUT_PULLUP);  //Input from wind meters windspeed sensor
      pinMode(RAIN, INPUT_PULLUP);    //Input from wind meters rain gauge sensor
      //attach external interrupt pins to IRQ functions
      attachInterrupt(digitalPinToInterrupt(RAIN), rainIRQ, FALLING);
      attachInterrupt(digitalPinToInterrupt(WSPEED), wspeedIRQ, FALLING);
      //turn on interrupts
      interrupts();

      if(lightning.beginSPI(spiCS, 2000000) == false)
      else
        Serial.println("Schmow-ZoW, Lightning Detector Ready!");

      // The lightning detector defaults to an indoor setting at 
      // the cost of less sensitivity, if you plan on using this outdoors 
      // uncomment the following line:
      lightning.setIndoorOutdoor(OUTDOOR); 
    }

    // the loop function runs over and over again forever
    void loop() 
      if (windFlag == true)

      // Hardware has alerted us to an event, now we read the interrupt register
      if(digitalRead(lightningInt) == HIGH)
        else if(intVal == DISTURBER_INT)
        else if(intVal == LIGHTNING_INT)
      }

      digitalWrite(LED_BUILTIN, LOW);    // turn the LED off by making the voltage LOW

      delay(3000);
    }

    int readSoil() 

    int getWindDirection()
    

The code begins by checking which MicroMod Processor was selected in Arduino and adjusts a few pin settings accordingly so it will work with any SparkFun MicroMod Processor. Next, it initializes all the on board sensors and checks for proper responses as well as checking for external sensors (wind, rain and soil).

Once all the sensors initialize, the code prints out data from each sensor. Open your [serial monitor](https://learn.sparkfun.com/tutorials/terminal-basics) and set the baud to **115200** to watch the data print out.