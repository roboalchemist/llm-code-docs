# Source: https://learn.sparkfun.com/tutorials/tsh82-configurable-opamp-hookup-guide

## Introduction

The [TSH82 Configurable OpAmp](https://www.sparkfun.com/products/14874) board was designed to give you the best combination of performance and flexibility that we could achieve. The TSH82 device itself has 2 gain stages, each one independently accessible via header. Each stage is natively configured as an inverting amplifier, giving you a gain of -4.7 with AC input coupling. Stringing both stages together gives you a gain of about 22. But with the use of the jumpers on the back of the board, you can additionally configure each stage for non-inverting operation, differential input, and DC input coupling. The board will also operate with a single-ended DC power supply of **4.5V** to **12V**, or a bipolar supply from +/-**2.25V** to +/-**6V**.

[![SparkFun Configurable OpAmp Board - TSH82](https://cdn.sparkfun.com/r/600-600/assets/parts/1/3/1/5/1/14874-SparkFun_Configurable_OpAmp_Board_-_TSH82_-01.jpg)](https://www.sparkfun.com/sparkfun-configurable-opamp-board-tsh82.html)

### [SparkFun Configurable OpAmp Board - TSH82](https://www.sparkfun.com/sparkfun-configurable-opamp-board-tsh82.html) 

[ BOB-14874 ]

The SparkFun TSH82 Configurable OpAmp Board gives you two gain stages, each individually accessible on the header pins. Confi...

[ [\$7.95] ]

### Required Materials

In order to get signals in and out of the board, you\'re going to have to solder some stuff together. You may not need everything on this list, depending on what you have. Add it to your cart, read through the guide, and adjust the cart as necessary.

### Suggested materials

In order to tailor the board to your specifications, you might want some other parts that we can offer.

[![Resistor Kit - 1/4W (500 total)](https://cdn.sparkfun.com/r/140-140/assets/parts/6/1/7/1/10969-Resistor_Kit_-_1_4W__500_total_-01.jpg)](https://www.sparkfun.com/resistor-kit-1-4w-500-total.html)

### [Resistor Kit - 1/4W (500 total)](https://www.sparkfun.com/resistor-kit-1-4w-500-total.html) 

[ COM-10969 ]

Nothing stops a project dead in its tracks faster than not having the right resistor. These components are arguably the most ...

[ [\$10.50] ]

[![Straight Header - Female (PTH, 0.1in., 40-Pin)](https://cdn.sparkfun.com/r/140-140/assets/parts/1/0/5/00115-03-L.jpg)](https://www.sparkfun.com/female-headers.html)

### [Straight Header - Female (PTH, 0.1in., 40-Pin)](https://www.sparkfun.com/female-headers.html) 

[ PRT-00115 ]

Single row of 40-holes, female header. Can be cut to size with a pair of wire-cutters. Standard .1\" spacing. We use them exte...

[ [\$1.95] ]

[![Right Angle Header - Male (PTH, 0.1in., 40-Pin)](https://cdn.sparkfun.com/r/140-140/assets/parts/3/7/8/00553-03-L.jpg)](https://www.sparkfun.com/break-away-male-headers-right-angle.html)

### [Right Angle Header - Male (PTH, 0.1in., 40-Pin)](https://www.sparkfun.com/break-away-male-headers-right-angle.html) 

[ PRT-00553 ]

A row of right angle male headers - break to fit. 40 pins that can be cut to any size. Used with custom PCBs or general custo...

[ [\$2.50] ]

[![Rotary Potentiometer - 100k Ohm, Linear (Panel Mount)](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/7/9/9/14622-Rotary_Potentiometer_-_100k_Ohm__Linear__Panel_Mount_-01.jpg)](https://www.sparkfun.com/rotary-potentiometer-100k-ohm-linear-panel-mount.html)

### [Rotary Potentiometer - 100k Ohm, Linear (Panel Mount)](https://www.sparkfun.com/rotary-potentiometer-100k-ohm-linear-panel-mount.html) 

[ COM-14622 ]

An adjustable potentiometer can open up many interesting user interfaces. With this 100k Ohm linear pot just turn the dial an...

[ [\$3.50] ]

[![Electrolytic Decoupling Capacitors - 10uF/25V](https://cdn.sparkfun.com/r/140-140/assets/parts/3/0/0/00523-02-L.jpg)](https://www.sparkfun.com/electrolytic-decoupling-capacitors-10uf-25v.html)

### [Electrolytic Decoupling Capacitors - 10uF/25V](https://www.sparkfun.com/electrolytic-decoupling-capacitors-10uf-25v.html) 

[ COM-00523 ]

Low-profile electrolytic decoupling capacitors 10uF/25V. These capacitors are great transient/surge suppressors and work well...

[ [\$0.55] ]

[![Rotary Potentiometer - 250k Ohm, Logarithmic (Panel Mount) ](https://cdn.sparkfun.com/r/140-140/assets/parts/1/2/8/0/0/14623-Rotary_Potentiometer_-_250k_Ohm__Logarithmic__Panel_Mount_-01.jpg)](https://www.sparkfun.com/products/14623)

### [Rotary Potentiometer - 250k Ohm, Logarithmic (Panel Mount) ](https://www.sparkfun.com/products/14623) 

[ COM-14623 ]

An adjustable potentiometer can open up many interesting user interfaces. With this 250k Ohm logarithmic pot just turn the di...

**Retired**

You may also want to examine these signals in real time as you\'re working with them, or maybe generate a signal to run through your opamp board.

[![Frequency Generator Kit - FG085](https://cdn.sparkfun.com/r/140-140/assets/parts/7/1/7/1/11394-01.jpg)](https://www.sparkfun.com/products/11394)

### [Frequency Generator Kit - FG085](https://www.sparkfun.com/products/11394) 

[ KIT-11394 ]

Function generators are useful in a ton of applications from RF to embedded logic. They\'re not usually super cheap though. Go...

**Retired**

[![SparkFun MiniGen - Pro Mini Signal Generator Shield](https://cdn.sparkfun.com/r/140-140/assets/parts/7/2/2/3/11420-01.jpg)](https://www.sparkfun.com/sparkfun-minigen-pro-mini-signal-generator-shield.html)

### [SparkFun MiniGen - Pro Mini Signal Generator Shield](https://www.sparkfun.com/sparkfun-minigen-pro-mini-signal-generator-shield.html) 

[ BOB-11420 ]

This is the SparkFun MiniGen Signal Generator, a small shield for the Arduino Pro Mini that is capable of generating sine, sq...

**Retired**

[![Digilent Analog Discovery 2](https://cdn.sparkfun.com/r/140-140/assets/parts/1/1/6/0/0/13929-08.jpg)](https://www.sparkfun.com/products/13929)

### [Digilent Analog Discovery 2](https://www.sparkfun.com/products/13929) 

[ TOL-13929 ]

The Digilent Analog Discovery 2 is a USB oscilloscope and multi-function instrument that allows users to measure, control, an...

**Retired**

[ ![Digital Storage Oscilloscope - 100MHz (TBS2104)](https://cdn.sparkfun.com/r/140-140/assets/parts/1/3/2/1/7/795-TBS2104.jpg) ]

### Digital Storage Oscilloscope - 100MHz (TBS2104) 

[ TOL-14925 ]

The Tektronix TBS2104 Digital Storage Oscilloscope offers a 9-inch WVGA display, 20 million point record length and 1GS/s sam...

**Retired**

### Suggested Reading

If any of this is new to you, have a look through these - the OpAmp intro with LT Spice is particularly good as an opamp primer.

[](https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering)

### How to Solder: Through-Hole Soldering 

This tutorial covers everything you need to know about through-hole soldering.

[](https://learn.sparkfun.com/tutorials/working-with-wire)

### Working with Wire 

How to strip, crimp, and work with wire.

[](https://learn.sparkfun.com/tutorials/how-to-use-an-oscilloscope)

### How to Use an Oscilloscope 

How to work the dials and buttons on an oscilloscope, and a glossary of the o-scope lexicon.

[](https://learn.sparkfun.com/tutorials/introduction-to-operational-amplifiers-with-ltspice)

### Introduction to Operational Amplifiers with LTSpice 

Picking up where we left off in \"Getting Started with LTSpice,\" we delve a little deeper into LTSpice through an introduction of Operational Amplifiers (OpAmps).

## Hardware Overview

The TSH82 Configurable OpAmp Board is meant to be hacked on, so you\'ll want to be familiar with the sections of the circuitry.

On the far left side of the board is the power and reference section, the middle section covers stage 1 of the amplifier, and the far right side has stage 2. Each section also has three corresponding pins directly below in the picture.

### Power and Reference

Positive voltage goes into +VCC, and negative voltage (or ground) goes into -VEE. The board generates an onboard reference voltage by way of two 2.2k 1% resistors decoupled with 10.1uF, giving a value halfway between +VCC and -VEE with a low frequency cutoff of about 15Hz. If you need better performance, VREF is accessible from the header and can be driven to any voltage between +VCC and -VEE without damaging the board.

[![Front side of board with Power and Reference Highlighted](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_Power.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_Power.jpg)

*Power and reference*

### Stages One and Two

Electrically speaking, the stages are identical. The default configuration is inverting with a gain of -4.7 with a bandwidth of almost 10MHz. Signal input is on -IN1 and output is taken from OUT1 (or -IN2 and OUT2 for stage two). Input signals are AC coupled with 1.0uF caps, and the input impedance is 10K with a low frequency cutoff of 15.9Hz. Outputs are DC coupled, so don\'t forget to add a capacitor to the output if you\'re running a single-ended supply and need to strip out the DC component. Of course, this isn\'t an issue if you\'re running the output of stage 1 to the input of stage 2.

[![](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_Stage1.jpg "Stage 1")](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_Stage1.jpg)\

[![](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_Stage2.jpg "Stage 2")](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_Stage2.jpg)\

*Stage 1*

*Stage 2*

### All Those Jumpers

On the back of the board you\'ll find 10 solder jumpers that can be used to change the board\'s performance, but nothing there needs to be changed to use it in it\'s default state. To demonstrate how to use the jumpers, we\'ll first describe their functions, then show you different circuit configurations with corresponding jumper settings. For the sake of clarity, it might be a good idea to have the [schematic](https://cdn.sparkfun.com/assets/0/f/2/9/9/TSH82_Configurable_Op_Amp_Board.pdf) open for reference as you read through the jumper settings description.

#### Stage 1:

  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [![](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_Stage1_Back.jpg "Stage 1")](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_Stage1_Back.jpg)\   [![](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/jumper_schematic_stage1.jpg "Stage 1 Schematic")](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/jumper_schematic_stage1.jpg)\

  *Stage 1*                                                                                                                                                                    *Stage 1 Schematic*
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

\

#### Stage 2:

  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [![](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_Stage2_Back.jpg "Stage 2")](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_Stage2_Back.jpg)\   [![](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/jumper_schematic_stage2.jpg "Stage 2 Schematic")](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/jumper_schematic_stage2.jpg)\

  *Stage 2*                                                                                                                                                                    *Stage 2 Schematic*
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#### Input signal path:

- **JP1 and JP2** - 3 way solder jumpers used to change the input signal path in Stage 1.
  - JP1 - inverting input
  - JP2 - non-inverting input
- **JP3 and JP4** - 3 way solder jumpers used to change the input signal path in Stage 2.
  - JP3 - inverting input
  - JP4 - non-inverting input

There are small traces within these jumpers to set the default inverting configuration **that will have to be cut out if you wish to change to differential or non-inverting configurations**.

#### AC vs DC coupling

- **JP5 and JP6** - Solder jumper used to select between AC and DC coupling for the inputs to Stage 1.
  - JP5 - inverting input
  - JP6 - non-inverting input
- **JP7 and JP8** - Solder jumper used to select between AC and DC coupling for the inputs to Stage 2.
  - JP7 - inverting input
  - JP8 - non-inverting input

#### Vref

- **JP9** - allows the user to tie the non-inverting input of stage 1 to Vref through a 47k resistor for differential operations.
- **JP10** - same functionality as JP9 but for stage 2

As you can see, there are a lot of options. But if any of that leaves you confused, let us show you some workable configurations!

## Configurations

### Inverting, Gain = -4.7, AC-coupled Input, 0-10V Supply (Default)

This is the easiest configuration to use as it requires no changes to the jumpers on the board.

In the picture below, the jumper settings for this default mode are highlighted for your reference. Note the small traces bridging the pads of the solder jumpers. If the board does not perform as expected, double check that these traces are still present. If they\'re not, just replace them with a blob of solder to make the default connections as shown here.

[![Picture of bottom of board with default jumper positions circled](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/default_jumpers_new.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/default_jumpers_new.jpg)

+10VDC power input is on +VCC and ground is on -VEE. Vref will assume a value near +5V.

For stage 1, signal input is between -IN1 and -VEE, and output is taken between OUT1 and -VEE. It\'s effectively the same for stage 2: signal input is between -IN2 and -VEE, and output is taken between OUT2 and -VEE. Each stage will give you a gain of -4.7, so to keep the output in the linear region your input signal can\'t be more than 2.12Vpp, as calculated here:

[![(+VCC - (-VEE)) / (4.7) = 2.12Vpp](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/CodeCogsEqn__3_.gif)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/CodeCogsEqn__3_.gif)

If you\'re running both stages in sequence, that maximum becomes 453mVpp. If you\'re not sure what your input signal magnitude is going to be, it\'s probably a good idea to use a potentiometer at the input of your circuit.

[![Fritzing diagram of default circuit, 2 stages in sequence with potentiometer at the front.](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/8/1/8/Fr_1_2_wlogo.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/Fr_1_2_wlogo.jpg)

### Differential Input, Gain = 4.7, DC-coupled Input, 0-5V Supply

[] **Note:** This configuration will require you cut the traces out from solder jumper 2 and 4! If the jumper pads for JP1 and JP3 were not modified, you can leave it as is without adding a solder jumper on the pads. The board in the image below had a solder jumper on JP1 and JP3 added for illustration.

Differential configuration gives the user the ability to compare two dynamic voltages rather than comparing one against a static reference. The jumper settings for differential configuration are as shown below.

[![Picture of jumpers for differential operation](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_inverting_gain.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_inverting_gain.jpg)

The picture above shows both stages set up for differential operation with DC input coupling (jumpers 5-8 are set). Put your first signal input, V1, between +IN1 and ground, and put your second signal input, V2, between -IN1 and ground. +5V goes in on +VCC and ground goes to -VEE. Also, set Vref to 0V by connecting the Vref header pin to -VEE. Gain for the circuit is 4.7, as calculated here:

[![(47K/10K) \* (V2-V1) = 4.7](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/CodeCogsEqn__4_.gif)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/CodeCogsEqn__4_.gif)

And, of course, all of this also applies to stage 2, just transpose all the numbers in the pin names from 1\'s to 2\'s.

[![Fritzing diagram of differential configuration for both stages.](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/Fr_2_wlogo.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/Fr_2_wlogo.jpg)

### Non-inverting, Gain = 4.7, AC-coupled Input, 0-6V Supply

[] **Note:** This configuration will require you cut the traces out from solder jumpers 1 through 4!

While the classic non-inverting topology can't be realized without replacing parts on the board, non-inverting functionality can be achieved by starting with the differential configuration and tying the inverting input to Vref. The jumper settings can be seen below.

[![Picture of jumpers for non-inverting operation.](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_non-inverting_gain.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/TSH82_non-inverting_gain.jpg)

The circuit is fully functional, but it\'s got a couple of quirks that the user should be aware of before use. First, because this isn\'t the \"normal\" non-inverting circuit topology, gain is about 4.7 instead of 5.7. Second, and for the same reason, there\'s some input offset that you might have to deal with, but it\'s not complicated. Specifically with this topology, Vref will normally sit halfway between +VCC (6V) and -VEE (0V), but the output will skew somewhat positive, to around 4V without any signal input. As a result, your output swing can only go +/-2V around Vref before it starts to clip, making your maximum allowable input signal about 851mVpp. If those numbers work for your design, then you\'re good to go!

[![Fritzing diagram of non-inverting configuration for both stages.](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/Fr_3_wlogo.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/Fr_3_wlogo.jpg)

On the other hand, if you move Vref (covered in the next section) to about 1.6V, the output will come back to 3V and allow the full +/-3V output swing. Dividing by our gain of 4.7 gives us a maximum input signal of 1.28Vpp, which is still less than the 3.6Vpp allowable window created by moving the reference voltage.

## Hacking the Board

### Changing Gain or Bandwidth

By this time, you've probably asked yourself about those two missing components. "What's up with that? Did I get a bum board?" Nope, those footprints are intentionally left open for you to change the circuit behavior. Primarily, we're talking about augmentations of the inverting configuration, as achieving similar results otherwise would require replacing parts; do-able, but more work and probably not necessary.

[![Picture of the board with open footprints highlighted](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/C4_C5.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/C4_C5.jpg)

In the schematic, the parts are shown as C4 for stage one (on the left) and C5 for stage 2 (on the right).

There are two easy things you can change about the circuits' behavior using the C4 and C5 footprints. First, you can alter it's high frequency cutoff by adding a capacitor, as calculated from

[![C = 1/(2 \* pi \* f \* 47k)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/CodeCogsEqn__2_.gif)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/CodeCogsEqn__2_.gif)

where f is the desired cutoff frequency, and C is capacitance in farads. If you're working with lower-frequency signals and you're concerned about high-frequency noise, this is an addition you might consider.

The second thing you can do is to reduce the gain in order to increase the bandwidth by placing a resistor instead of a cap. Gain is calculated from

[![Av = - (47k \|\| R) / 10K](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/CodeCogsEqn__1_.gif)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/CodeCogsEqn__1_.gif)

where R is the new component. For example, if you place an additional 47k resistor it will reduce your gain by half (Av = 2.35), but it will increase your workable bandwidth to around 18MHz.

### Dialing In your Reference

As described in the section on non-inverting functionality, you may have reason to move your reference voltage (Vref) around. The easiest way to do this is with a potentiometer with one end on -VEE, another on +VCC and the wiper on Vref (10k is a good choice). This puts the potentiometer in parallel with the 2.2k resistor divider that sets Vref natively and allows you to set the reference to any value easily.

[![Fritzing diagram of potentiometer on the reference voltage](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/8/1/8/Fr_4_wlogo.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/8/1/8/Fr_4_wlogo.jpg)

The on-board reference voltage is heavily decoupled with tantalum and ceramic capacitors to keep noise low. But if you need it lower, you might consider using a dedicated voltage source as the reference instead of the 2.2k resistor divider provided. Just attach your source to -VEE (0V) and Vref (positive voltage).