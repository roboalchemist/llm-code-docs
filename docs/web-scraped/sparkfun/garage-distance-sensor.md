# Source: https://learn.sparkfun.com/tutorials/garage-distance-sensor

## Introduction

Looking for a Qwiic and easy way to set up perfect parking? Look no further than the SparkFun Qwiic Ultrasonic Distance Sensor! This nifty device takes your garage parking game to the next level, offering a high-tech solution to prevent those dreaded wall bumps!

[![SparkFun Ultrasonic Distance Sensor - TCT40 (Qwiic)](https://cdn.sparkfun.com/r/600-600/assets/parts/2/5/0/9/7/SEN-24805-Ultrasonic-Distance-Sensor-Feature_2.jpg)](https://www.sparkfun.com/sparkfun-ultrasonic-distance-sensor-tct40-qwiic.html)

### [SparkFun Ultrasonic Distance Sensor - TCT40 (Qwiic)](https://www.sparkfun.com/sparkfun-ultrasonic-distance-sensor-tct40-qwiic.html) 

[ SEN-24805 ]

The TCT40 distance sensor is great for non-contact distance readings from 2cm to 400cm. This unit adds a pair of Qwiic connec...

[ [\$11.50] ]

If you are looking for the full Hookup Guide for the SparkFun Ultrasonic Distance Sensor - TCT40 (Qwiic), click the button bellow. This guide only covers a simple project to get you started quickly, while the full Hookup Guide goes over every detail of the sensor.

[View the Full Hookup Guide](https://docs.sparkfun.com/SparkFun_Ultrasonic_Distance_Sensor-Qwiic)

 

------------------------------------------------------------------------

## Hardware Needed

To follow this experiment, you will need the following materials. While this is a simple project we wanted to make sure that you have everything you need to get started before we get to the code. For this simple project we chose the [RedBoard Qwiic](https://www.sparkfun.com/products/15123) but you could choose from many of our development boards such as the [Qwiic Pro Micro](https://www.sparkfun.com/products/15795) as well.

[![SparkFun Ultrasonic Distance Sensor - TCT40 (Qwiic)](https://cdn.sparkfun.com/r/600-600/assets/parts/2/5/0/9/7/SEN-24805-Ultrasonic-Distance-Sensor-Feature_2.jpg)](https://www.sparkfun.com/sparkfun-ultrasonic-distance-sensor-tct40-qwiic.html)

### [SparkFun Ultrasonic Distance Sensor - TCT40 (Qwiic)](https://www.sparkfun.com/sparkfun-ultrasonic-distance-sensor-tct40-qwiic.html) 

[ SEN-24805 ]

The TCT40 distance sensor is great for non-contact distance readings from 2cm to 400cm. This unit adds a pair of Qwiic connec...

[ [\$11.50] ]

[![SparkFun RedBoard Qwiic](https://cdn.sparkfun.com/r/600-600/assets/parts/1/3/4/9/2/15123-SparkFun_RedBoard_Qwiic-01a.jpg)](https://www.sparkfun.com/sparkfun-redboard-qwiic.html)

### [SparkFun RedBoard Qwiic](https://www.sparkfun.com/sparkfun-redboard-qwiic.html) 

[ DEV-15123 ]

The SparkFun RedBoard Qwiic is an Arduino-compatible development board with a built in Qwiic connector, eliminating the need ...

[ [\$21.95] ]

[![SparkFun Qwiic Twist - RGB Rotary Encoder Breakout](https://cdn.sparkfun.com/r/600-600/assets/parts/1/3/4/3/3/15083-SparkFun_Qwiic_Twist_-_RGB_Rotary_Encoder_Breakout-01.jpg)](https://www.sparkfun.com/sparkfun-qwiic-twist-rgb-rotary-encoder-breakout.html)

### [SparkFun Qwiic Twist - RGB Rotary Encoder Breakout](https://www.sparkfun.com/sparkfun-qwiic-twist-rgb-rotary-encoder-breakout.html) 

[ DEV-15083 ]

The SparkFun Qwiic Twist is a digital RGB rotary encoder breakout that is also able to connect to our Qwiic Connect System.

[ [\$25.50] ]

[![SparkFun Qwiic OLED - (1.3in., 128x64)](https://cdn.sparkfun.com/r/600-600/assets/parts/2/3/7/6/0/23453-Qwiic-OLED-Feature-WithDisplay.jpg)](https://www.sparkfun.com/sparkfun-qwiic-oled-1-3in-128x64.html)

### [SparkFun Qwiic OLED - (1.3in., 128x64)](https://www.sparkfun.com/sparkfun-qwiic-oled-1-3in-128x64.html) 

[ LCD-23453 ]

The SparkFun Qwiic OLED 1.3in. is a Qwiic-enabled monochrome OLED that displays crisp white-on-black images and text.

[ [\$19.95] ]

[![Qwiic Cable - 100mm](https://cdn.sparkfun.com/r/600-600/assets/parts/1/2/4/5/3/14427-Qwiic_Cable_-_100mm-01.jpg)](https://www.sparkfun.com/qwiic-cable-100mm.html)

### [Qwiic Cable - 100mm](https://www.sparkfun.com/qwiic-cable-100mm.html) 

[ PRT-14427 ]

This is a 100mm long 4-conductor cable with 1mm JST termination. It's designed to connect Qwiic enabled components together...

**Retired**

[![Qwiic Cable - 100mm](https://cdn.sparkfun.com/r/600-600/assets/parts/1/2/4/5/3/14427-Qwiic_Cable_-_100mm-01.jpg)](https://www.sparkfun.com/qwiic-cable-100mm.html)

### [Qwiic Cable - 100mm](https://www.sparkfun.com/qwiic-cable-100mm.html) 

[ PRT-14427 ]

This is a 100mm long 4-conductor cable with 1mm JST termination. It's designed to connect Qwiic enabled components together...

**Retired**

[![Flexible Qwiic Cable - 500mm](https://cdn.sparkfun.com/r/600-600/assets/parts/1/6/2/4/4/17257-Flexible_Qwiic_Cable_-_500mm-01.jpg)](https://www.sparkfun.com/flexible-qwiic-cable-500mm.html)

### [Flexible Qwiic Cable - 500mm](https://www.sparkfun.com/flexible-qwiic-cable-500mm.html) 

[ PRT-17257 ]

This polarized I2C cable insulation is made from silicon making it more flexible than our original Qwiic cable particularly i...

[ [\$2.75] ]

[![USB Micro-B Cable - 6 Foot](https://cdn.sparkfun.com/r/600-600/assets/parts/4/5/5/8/10215-01.jpg)](https://www.sparkfun.com/usb-micro-b-cable-6-foot.html)

### [USB Micro-B Cable - 6 Foot](https://www.sparkfun.com/usb-micro-b-cable-6-foot.html) 

[ CAB-10215 ]

USB 2.0 type A to Micro-B 5-pin. This is a new, smaller connector for USB devices. Micro-B connectors are about half the heig...

[ [\$6.50] ]

**Note:** This tutorial calls for two 100mm Qwiic Cables (which is why it\'s listed twice), but any Qwiic cable can be used instead of the 100mm version. Please be sure to have the correct amount in your cart before purchasing.

------------------------------------------------------------------------

## Software Setup

**Note:** If this is your first time using Arduino, please review our tutorial on [installing the Arduino IDE.](https://learn.sparkfun.com/tutorials/installing-arduino-ide) If you have not previously installed an Arduino library, please check out our [installation guide.](https://learn.sparkfun.com/tutorials/installing-an-arduino-library)

## Installing the Required Libraries

- **Install the SparkFun Qwiic Ultrasonic Arduino Library**: Open the Arduino IDE and navigate to **Sketch \> Include Library \> Manage Libraries**. In the Library Manager, search for **\"SparkFun Qwiic Ultrasonic Arduino Library\"** and install the latest version from SparkFun, or by downloading it from the [GitHub Repository](https://github.com/sparkfun/SparkFun_Ultrasonic_Distance_Sensor-Qwiic).

------------------------------------------------------------------------

- **Install the SparkFun Qwiic OLED Arduino Library**: Open the Arduino IDE and navigate to **Sketch \> Include Library \> Manage Libraries**. In the Library Manager, search for **\"SparkFun Qwiic OLED Arduino Library\"** and install the latest version from SparkFun, or by downloading it from the [GitHub Repository](https://github.com/sparkfun/SparkFun_Qwiic_OLED_1.3in).

------------------------------------------------------------------------

- **Install the SparkFun Qwiic Twist Arduino Library**: Open the Arduino IDE and navigate to **Sketch \> Include Library \> Manage Libraries**. In the Library Manager, search for **\"SparkFun Qwiic Twist Arduino Library\"** and install the latest version from SparkFun, or by downloading it from the [GitHub Repository](https://github.com/sparkfun/Qwiic_Twist).

## Read Measurements with a Serial Monitor

Now that we\'ve installed the Arduino library, it\'s time to upload our first sketch to make sure everything is working properly and you are able to read basic measurements with your Serial Monitor in the Arduino IDE.

For this example you will need the following items [SparkFun RedBoard Qwiic](https://www.sparkfun.com/sparkfun-redboard-qwiic.html), a [SparkFun Ultrasonic Distance Sensor](https://www.sparkfun.com/sparkfun-ultrasonic-distance-sensor-tct40-qwiic.html), a [SparkFun Qwiic OLED - (1.3in., 128x64)](https://www.sparkfun.com/sparkfun-qwiic-oled-1-3in-128x64.html), a [SparkFun Qwiic Twist](https://www.sparkfun.com/sparkfun-qwiic-twist-rgb-rotary-encoder-breakout.html), two 100mm [Qwiic Cables](https://www.sparkfun.com/products/14427), a 500mm [Qwiic Cable](https://www.sparkfun.com/flexible-qwiic-to-stemma-cable-500mm.html) , and a [USB Micro-B Cable](https://www.sparkfun.com/products/10215).

Using the Qwiic system, assembling the hardware is simple and straightforward. Start by connecting the SparkFun RedBoard Qwiic to the SparkFun Qwiic OLED (1.3in., 128x64) using one of the 100mm Qwiic cables. Next, connect the SparkFun Qwiic Twist to the OLED using the second 100mm Qwiic cable. Finally, plug one end of the 500mm Qwiic cable into the remaining port on the Qwiic Twist, and connect the other end to the SparkFun Ultrasonic Distance Sensor. Remember to insert all Qwiic cables in the correct orientation. To power up the system, connect the RedBoard to your computer using the USB Micro-B cable. With these connections in place, you\'re all set to start your project!

[![SparkFun Distance Sensor Hooked up to RedBoard](https://cdn.sparkfun.com/r/600-600/assets/learn_tutorials/3/6/7/2/QCC-Distance-Sensor-8.jpg)](https://cdn.sparkfun.com/assets/learn_tutorials/3/6/7/2/QCC-Distance-Sensor-8.jpg)

*SparkFun Distance Sensor Hooked up to RedBoard*

 

You can copy and paste the code below into a shiny new Arduino sketch:

    #include <Wire.h>
    #include <SparkFun_Qwiic_OLED.h>
    #include "SparkFun_Qwiic_Twist_Arduino_Library.h"
    #include "SparkFun_Qwiic_Ultrasonic_Arduino_Library.h"

    // Create instances
    QwiicMicroOLED myOLED;
    TWIST twist;
    QwiicUltrasonic myUltrasonic;

    // Variables for distance settings
    float minDistance = 50;  // Initial min distance in mm
    float maxDistance = 250; // Initial max distance in mm
    bool settingMin = true; // True = setting min, False = setting max
    bool inRange = false;   // Whether current distance is within range

    // Device address for ultrasonic sensor
    uint8_t deviceAddress = kQwiicUltrasonicDefaultAddress; // 0x2F

    void setup() 

        // Initialize the Twist encoder
        if (twist.begin() == false) 

        // Initialize the Ultrasonic sensor
        while(myUltrasonic.begin(deviceAddress) == false) 

        // Reset twist count and LED
        twist.setCount(50); // Start at 50mm
        twist.setColor(0, 0, 0);  // LED off initially
    }

    float getDistance() 

    void loop() 

        // Update min or max distance based on twist
        int count = twist.getCount();
        if (settingMin)  else 

        // Check if current distance is within range
        inRange = (currentDistance >= minDistance && currentDistance <= maxDistance);

        // Update LED based on whether distance is in range
        if (inRange)  else 

        // Clear the display
        myOLED.erase();

        // Display current mode and settings
        String modeStr = settingMin ? "Set Min" : "Set Max";
       myOLED.text(0, 0, modeStr, 1);

        // Display distance
        String distStr = String(int(currentDistance)) + " mm";
        int x0 = (myOLED.getWidth() - myOLED.getStringWidth(distStr)) / 2;
        myOLED.text(x0, 16, distStr, 1);

        // Display min and max
        String rangeStr = String(int(minDistance)) + "-" + String(int(maxDistance)) + "mm";
        x0 = (myOLED.getWidth() - myOLED.getStringWidth(rangeStr)) / 2;
        myOLED.text(x0, 32, rangeStr, 1);

        // Update the display
        myOLED.display();

        delay(100);
    }

## How To Change Distance Parameters 

Customizing your parking distance is easy with the SparkFun Qwiic Twist. Here\'s how to adjust the minimum and maximum distances for the green LED indicator:

1.  **Initial Setup:**
    - The default minimum distance is set to 50mm.
    - The default maximum distance is set to 250mm.
2.  **Adjusting Parameters:**
    - Use the Qwiic Twist to change either the minimum or maximum distance.
    - Rotate the Twist clockwise to increase the distance, or counterclockwise to decrease it.
3.  **Switching Between Min and Max:**
    - Click the Twist once to toggle between adjusting the minimum and maximum distances.
    - The OLED display will indicate which parameter you\'re currently modifying.
4.  **Green LED Behavior:**
    - The green LED will illuminate when your vehicle is within the set range.
    - Once you go past the minimum distance, the LED will turn off, signaling you to stop.
5.  **Fine-Tuning:**
    - Experiment with different min/max values to find your ideal parking position.
    - Remember, the minimum distance is your stopping point to avoid contact with the wall.

By adjusting these parameters, you can create a custom \"sweet spot\" for parking your vehicle, ensuring you park at the perfect distance every time. The intuitive twist-and-click interface makes it easy to modify your settings as needed.