# Source: https://www.roc-lang.org/abilities#inspect-ability

<!DOCTYPE html><html  lang="en" class="no-js"><head><meta  charset="utf-8"><title>Abilities | Roc</title><meta  name="description" content="Learn about abilities in the Roc programming language."><meta  name="viewport" content="width=device-width"><link  rel="icon" href="/favicon.svg"><link  rel="prefetch" href="/repl/roc_repl_wasm.js"><link  rel="stylesheet" href="/site.css"><link  rel="mask-icon" href="/favicon.svg" color="#7d59dd"><script>document.documentElement.className = document.documentElement.className.replace('no-js', '');</script></head><body  class="article-layout"><header  id="top-bar"><nav  aria-label="primary"><a  id="nav-home-link" href="/" title="The Roc Programming Language Homepage"><svg  viewBox="0 -6 51 58" xmlns="http://www.w3.org/2000/svg" aria-labelledby="logo-link" role="img" class="roc-logo"><title  id="logo-link">Return to Roc Home</title><polygon  role="presentation" points="0,0 23.8834,3.21052 37.2438,19.0101 45.9665,16.6324 50.5,22 45,22 44.0315,26.3689 26.4673,39.3424 27.4527,45.2132 17.655,53 23.6751,22.7086"></polygon></svg><span  class="home-link-text">Roc</span></a><div  id="top-bar-links"><a  href="/tutorial">Tutorial</a><a  href="/install">Install</a><a  href="/examples">Examples</a><a  href="/community">Community</a><a  href="/docs">Docs</a><a  href="/donate">Donate</a></div></nav></header><main><h1>Abilities</h1>
<p>An Ability defines a set of functions that can be implemented by different types.</p>
<p>Abilities are used to constrain the types of function arguments to only those which implement the required functions.</p>
<p>The function <code>to_json</code> below is an example which uses the <code>Encoding</code> Ability.</p>
<pre><samp><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">json</span><span class="kw"> :</span><span class="lowerident"> a</span><span class="kw"> -&gt;</span><span class="upperident"> List</span><span class="upperident"> U8</span><span class="lowerident"> where</span><span class="lowerident"> a</span><span class="lowerident"> implements</span><span class="upperident"> Encoding</span><span class="lowerident">
to</span><span class="lowerident">_</span><span class="lowerident">json</span><span class="kw"> =</span><span class="delimeter"> |</span><span class="lowerident">val</span><span class="delimeter">|</span><span class="upperident">
    Encode</span><span class="delimeter">.</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">bytes</span><span class="delimeter">(</span><span class="lowerident">val</span><span class="delimeter">,</span><span class="upperident"> Json</span><span class="delimeter">.</span><span class="lowerident">utf8</span><span class="delimeter">)</span></samp></pre>
<p>By specifying the type variable <code>a</code> implements the <code>Encoding</code> Ability, this function can make use of <code>Encode.to_bytes</code> and <code>Json.utf8</code> to serialise <code>val</code>, without knowing its specific type.</p>
<p>All types which implement the <code>Encoding</code> Ability can therefore use the <code>Encode.to_bytes</code> (and also <code>Encode.append</code>) functions to conveniently serialise values to bytes.</p>
<ul>
<li><a href="#builtins">Builtins</a>
<ul>
<li><a href="#eq-ability"><code>Eq</code> Ability</a></li>
<li><a href="#hash-ability"><code>Hash</code> Ability</a></li>
<li><a href="#sort-ability"><code>Sort</code> Ability</a></li>
<li><a href="#encoding-ability"><code>Encoding</code> Ability</a></li>
<li><a href="#decoding-ability"><code>Decoding</code> Ability</a></li>
<li><a href="#inspect-ability"><code>Inspect</code> Ability</a></li>
</ul>
</li>
<li><a href="#opaque-types">Opaque Types</a>
<ul>
<li><a href="#derived-implementations">Derived Implementations</a></li>
<li><a href="#custom-implementations">Custom Implementations </a></li>
</ul>
</li>
<li><a href="#defining-a-new-ability">Advanced Topic: Defining a new Ability</a></li>
</ul>
<h2 id="builtins"><a href="#builtins">Builtins</a></h2>
<p>Roc's Builtin types such as numbers, records, and tags, are automatically derived for the builtin Abilities. This means that you can use these Abilities without needing to provide a custom implementation.</p>
<h3 id="eq-ability"><a href="#eq-ability"><code>Eq</code> Ability</a></h3>
<p>The <code>Eq</code> Ability defines the <code>is_eq</code> function, which can be used to compare two values for structural equality. The infix operator <code>==</code> can be used as shorthand for <code>is_eq</code>.</p>
<p><code>Eq</code> is not derived for <code>F32</code> or <code>F64</code> as these types do not support structural equality. If you need to compare floating point numbers, you must provide your own function for comparison.</p>
<p><strong>Example</strong> showing the use of <code>is_eq</code> and <code>==</code> to compare two values.</p>
<pre><samp><span class="upperident">Colors</span><span class="kw"> :</span><span class="delimeter"> [</span><span class="upperident">Red</span><span class="delimeter">,</span><span class="upperident"> Green</span><span class="delimeter">,</span><span class="upperident"> Blue</span><span class="delimeter">]</span><span class="lowerident">

red</span><span class="kw"> =</span><span class="upperident"> Red</span><span class="lowerident">
blue</span><span class="kw"> =</span><span class="upperident"> Blue</span><span class="kw">

expect</span><span class="kw"> is</span><span class="lowerident">_</span><span class="lowerident">eq</span><span class="lowerident"> red</span><span class="upperident"> Red</span><span class="comment"> # true</span><span class="kw">
expect</span><span class="lowerident"> red</span><span class="op"> ==</span><span class="lowerident"> blue</span><span class="comment"> # false</span></samp></pre>
<p><strong>Definition</strong> of the <code>Eq</code> Ability.</p>
<pre><samp><span class="comment"># Bool.roc</span><span class="upperident">
Eq</span><span class="lowerident"> implements</span><span class="kw">
    is</span><span class="lowerident">_</span><span class="lowerident">eq</span><span class="kw"> :</span><span class="lowerident"> a</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="kw"> -&gt;</span><span class="upperident"> Bool</span><span class="lowerident"> where</span><span class="lowerident"> a</span><span class="lowerident"> implements</span><span class="upperident"> Eq</span></samp></pre>
<p><strong>Structural equality</strong> is defined as follows:</p>
<ol>
<li>Tags are equal if their name and also contents are equal.</li>
<li>Records are equal if their fields are equal.</li>
<li>The collections <code>Str</code>, <code>List</code>, <code>Dict</code>, and <code>Set</code> are equal iff they are the same length and their elements are equal.</li>
<li><code>Num</code> values are equal if their numbers are equal. However, if both inputs are <em>NaN</em> then <code>is_eq</code> returns <code>Bool.false</code>. Refer to <code>Num.isNaN</code> for more detail.</li>
<li>Functions cannot be compared for structural equality, therefore Roc cannot derive <code>is_eq</code> for types that contain functions.</li>
</ol>
<h3 id="hash-ability"><a href="#hash-ability"><code>Hash</code> Ability</a></h3>
<p>The <code>Hash</code> Ability defines the <code>hash</code> function, which can be used to hash a value. The <code>hash</code> function takes a <code>Hasher</code> as an argument, which is used to compute the hash.</p>
<pre><samp><span class="comment"># Hash.roc</span><span class="upperident">
Hash</span><span class="lowerident"> implements</span><span class="lowerident">
    hash</span><span class="kw"> :</span><span class="lowerident"> hasher</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="kw"> -&gt;</span><span class="lowerident"> hasher</span><span class="lowerident"> where</span><span class="lowerident"> a</span><span class="lowerident"> implements</span><span class="upperident"> Hash</span><span class="delimeter">,</span><span class="lowerident"> hasher</span><span class="lowerident"> implements</span><span class="upperident"> Hasher</span></samp></pre>
<h3 id="sort-ability"><a href="#sort-ability"><code>Sort</code> Ability</a></h3>
<p><strong>Implementation Status</strong> - Design Proposal, implementation has not yet started. See <a href="https://roc.zulipchat.com/#narrow/stream/304641-ideas/topic/ordering.2Fsorting.20ability/near/395539545">zulip discussion thread</a> for more information. If you would like to help implement this, please let us know.</p>
<p>The <code>Sort</code> Ability defines the <code>compare</code> function, which can be used to compare two values for ordering.</p>
<p><code>Sort</code> is not derived for <code>Str</code> as working with utf-8 strings which is a variable length encoding scheme is complex and is achieved through a dedicated library such as <a href="https://github.com/roc-lang/unicode">roc-lang/unicode</a>.</p>
<p><strong>Proposed Definition</strong> of the <code>Sort</code> Ability.</p>
<pre><samp><span class="comment"># Sort.roc</span><span class="upperident">
Sort</span><span class="lowerident"> implements</span><span class="lowerident">
    compare</span><span class="kw"> :</span><span class="lowerident"> a</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="kw"> -&gt;</span><span class="delimeter"> [</span><span class="upperident">LessThan</span><span class="delimeter">,</span><span class="upperident"> Equals</span><span class="delimeter">,</span><span class="upperident"> GreaterThan</span><span class="delimeter">]</span><span class="lowerident"> where</span><span class="lowerident"> a</span><span class="lowerident"> implements</span><span class="upperident"> Sort</span></samp></pre>
<h3 id="encoding-ability"><a href="#encoding-ability"><code>Encoding</code> Ability</a></h3>
<p>The <code>Encoding</code> Ability defines <code>to_encoder</code> which can be used with an Encoder to serialise value from Roc to bytes using the <code>Encoding.to_bytes</code> and <code>Encoding.append</code> functions.</p>
<p>Functions are not serialisable, therefore Roc does not derive <code>Encoding</code> for types that contain functions.</p>
<p>Encoding for <code>Dict</code> values <strong>has not been implemented</strong>, see <a href="https://github.com/roc-lang/roc/issues/5294">#5294</a> for more details. If you would like to help implement this, please let us know.</p>
<p><strong>Example</strong> showing the use of <code>Encoding.to_bytes</code> to serialise a Roc <code>List (Str, U32)</code> to a <a href="https://www.json.org/json-en.html">JSON</a> encoded string.</p>
<pre><samp><span class="lowerident">bytes</span><span class="kw"> :</span><span class="upperident"> List</span><span class="upperident"> U8</span><span class="lowerident">
bytes</span><span class="kw"> =</span><span class="literal"> "[[\"Apples\",10],[\"Bananas\",12],[\"Oranges\",5]]"</span><span class="kw"> |&gt;</span><span class="upperident"> Str</span><span class="delimeter">.</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">utf8</span><span class="lowerident">

fruit</span><span class="lowerident">_</span><span class="lowerident">basket</span><span class="kw"> :</span><span class="upperident"> List</span><span class="delimeter"> (</span><span class="upperident">Str</span><span class="delimeter">,</span><span class="upperident"> U32</span><span class="delimeter">)</span><span class="lowerident">
fruit</span><span class="lowerident">_</span><span class="lowerident">basket</span><span class="kw"> =</span><span class="delimeter"> [</span><span class="delimeter">
    (</span><span class="literal">"Apples"</span><span class="delimeter">,</span><span class="literal"> 10</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter">
    (</span><span class="literal">"Bananas"</span><span class="delimeter">,</span><span class="literal"> 12</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter">
    (</span><span class="literal">"Oranges"</span><span class="delimeter">,</span><span class="literal"> 5</span><span class="delimeter">)</span><span class="delimeter">
]</span><span class="kw">

expect</span><span class="upperident"> Encode</span><span class="delimeter">.</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">bytes</span><span class="delimeter">(</span><span class="lowerident">fruit</span><span class="lowerident">_</span><span class="lowerident">basket</span><span class="delimeter">,</span><span class="upperident"> Json</span><span class="delimeter">.</span><span class="lowerident">utf8</span><span class="delimeter">)</span><span class="op"> ==</span><span class="lowerident"> bytes</span><span class="comment"> # true</span></samp></pre>
<p><strong>Definition</strong> of the <code>Encoding</code> Ability.</p>
<pre><samp><span class="comment"># Encode.roc</span><span class="upperident">
Encoding</span><span class="lowerident"> implements</span><span class="lowerident">
    to</span><span class="lowerident">_</span><span class="lowerident">encoder</span><span class="kw"> :</span><span class="lowerident"> val</span><span class="kw"> -&gt;</span><span class="upperident"> Encoder</span><span class="lowerident"> fmt</span><span class="lowerident"> where</span><span class="lowerident"> val</span><span class="lowerident"> implements</span><span class="upperident"> Encoding</span><span class="delimeter">,</span><span class="lowerident"> fmt</span><span class="lowerident"> implements</span><span class="upperident"> EncoderFormatting</span></samp></pre>
<h3 id="decoding-ability"><a href="#decoding-ability"><code>Decoding</code> Ability</a></h3>
<p>The <code>Decoding</code> Ability defines <code>decoder</code> which can be used with a Decoder to de-serialise from bytes to Roc values using the <code>Decoding.from_bytes_partial</code> and <code>Decoding.from_bytes</code> functions.</p>
<p>Decoding for <code>Dict</code> values <strong>has not been implemented</strong>, see <a href="https://github.com/roc-lang/roc/issues/5294">#5294</a> for more details. If you would like to help implement this, please let us know.</p>
<p><strong>Example</strong> showing the use of <code>Decoding.from_bytes</code> to decode a Roc <code>List (U32, Str)</code> from a <a href="https://www.json.org/json-en.html">JSON</a> encoded string.</p>
<pre><samp><span class="lowerident">bytes</span><span class="kw"> :</span><span class="upperident"> List</span><span class="upperident"> U8</span><span class="lowerident">
bytes</span><span class="kw"> =</span><span class="literal">
    """
    [
        [ 10, \"Green Bottles\" ],
        [ 12, \"Buckle My Shoe\" ],
        [ 5, \"Little Ducks\" ]
    ]
    """</span><span class="kw">
    |&gt;</span><span class="upperident"> Str</span><span class="delimeter">.</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">utf8</span><span class="lowerident">

result</span><span class="kw"> :</span><span class="upperident"> Result</span><span class="delimeter"> (</span><span class="upperident">List</span><span class="delimeter"> (</span><span class="upperident">U32</span><span class="delimeter">,</span><span class="upperident"> Str</span><span class="delimeter">)</span><span class="delimeter">)</span><span class="lowerident"> _</span><span class="lowerident">
result</span><span class="kw"> =</span><span class="upperident"> Decode</span><span class="delimeter">.</span><span class="lowerident">from</span><span class="lowerident">_</span><span class="lowerident">bytes</span><span class="delimeter">(</span><span class="lowerident">bytes</span><span class="delimeter">,</span><span class="upperident"> Json</span><span class="delimeter">.</span><span class="lowerident">utf8</span><span class="delimeter">)</span><span class="kw">

expect</span><span class="lowerident"> result</span><span class="op"> ==</span><span class="upperident"> Ok</span><span class="delimeter"> [</span><span class="delimeter">(</span><span class="literal">10</span><span class="delimeter">,</span><span class="literal"> "Green Bottles"</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter"> (</span><span class="literal">12</span><span class="delimeter">,</span><span class="literal"> "Buckle My Shoe"</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter"> (</span><span class="literal">5</span><span class="delimeter">,</span><span class="literal"> "Little Ducks"</span><span class="delimeter">)</span><span class="delimeter">]</span><span class="comment"> # true</span></samp></pre>
<p><strong>Definition</strong> of the <code>Decoding</code> Ability.</p>
<pre><samp><span class="comment"># Decode.roc</span><span class="upperident">
Decoding</span><span class="lowerident"> implements</span><span class="lowerident">
    decoder</span><span class="kw"> :</span><span class="upperident"> Decoder</span><span class="lowerident"> val</span><span class="lowerident"> fmt</span><span class="lowerident"> where</span><span class="lowerident"> val</span><span class="lowerident"> implements</span><span class="upperident"> Decoding</span><span class="delimeter">,</span><span class="lowerident"> fmt</span><span class="lowerident"> implements</span><span class="upperident"> DecoderFormatting</span></samp></pre>
<h3 id="inspect-ability"><a href="#inspect-ability"><code>Inspect</code> Ability</a></h3>
<p>The <code>Inspect</code> Ability lets you turn values into strings (or other things, but most commonly strings) that inform Roc programmers about the contents of the value.</p>
<p>Every Roc value has the <code>Inspect</code> ability automatically, although some of them (such as opaque types which do not list <code>Inspect</code> as one of their abilities) use a default <code>Inspect</code> implementation which doesn't expose any information about the value. Any opaque type can replace this default <code>Inspect</code> implementation with a custom one which exposes as much information as desired about that type's values.</p>
<p><strong>Definition</strong> of the <code>Inspect</code> Ability.</p>
<pre><samp><span class="upperident">Inspect</span><span class="lowerident"> implements</span><span class="lowerident">
    to</span><span class="lowerident">_</span><span class="lowerident">inspector</span><span class="kw"> :</span><span class="lowerident"> val</span><span class="kw"> -&gt;</span><span class="upperident"> Inspector</span><span class="lowerident"> f</span><span class="lowerident">
        where</span><span class="lowerident">
            val</span><span class="lowerident"> implements</span><span class="upperident"> Inspect</span><span class="delimeter">,</span><span class="lowerident">
            f</span><span class="lowerident"> implements</span><span class="upperident"> InspectFormatter</span></samp></pre>
<p>The <code>to_inspector</code> function takes a value and returns an <code>Inspector</code> which describes how to abstractly represent that value's contents in a way that doesn't tie it to a particular representation (such as a string). Then a separate &quot;formatter&quot; can translate a given <code>Inspector</code> to a specific format (such as a string in the case of <a href="https://www.roc-lang.org/builtins/Inspect#to_str"><code>Inspect.to_str</code></a>, but also possibly a structured log format, or an interactive GUI element).</p>
<p>Example formatter:</p>
<ul>
<li>A <a href="https://github.com/roc-lang/roc/blob/16db390d5f95516c95c9676797f85b5b2a75cda9/crates/compiler/builtins/roc/Inspect.roc#L106">DbgFormatter</a> which creates a string representation of Roc values, for e.g. debug printing to the console.</li>
</ul>
<h2 id="opaque-types"><a href="#opaque-types">Opaque Types</a></h2>
<p>Opaque Types are used to hide implementation details of a type. Modules export functions to define a <em>public</em> API for working with a type.</p>
<p>By default abilities are not derived for Opaque Types. However, <a href="#derived-implementations">Derived</a> and <a href="#custom-implementations">Custom</a> implementations are two ways to work with abilities for your Opaque Types.</p>
<h3 id="derived-implementations"><a href="#derived-implementations">Derived Implementations</a></h3>
<p>Abilities can be automatically derived for Opaque Types where the type is an alias for a builtin, or it is composed of other types which also implement that ability.</p>
<p>For example you can automatically derive the <code>Eq</code> and <code>Hash</code> abilities using <code>implements [ Eq, Hash ]</code>.</p>
<p><strong>Example</strong> showing how to automatically derive the <code>Eq</code> and <code>Hash</code> abilities for an Opaque Type.</p>
<pre><samp><span class="upperident">StatsDB</span><span class="kw"> :=</span><span class="upperident"> Dict</span><span class="upperident"> Str</span><span class="delimeter"> {</span><span class="lowerident"> score</span><span class="kw"> :</span><span class="upperident"> Dec</span><span class="delimeter">,</span><span class="lowerident"> average</span><span class="kw"> :</span><span class="upperident"> Dec</span><span class="delimeter"> }</span><span class="lowerident"> implements</span><span class="delimeter"> [</span><span class="upperident"> Eq</span><span class="delimeter">,</span><span class="upperident"> Hash</span><span class="delimeter"> ]</span><span class="lowerident">

add</span><span class="kw"> :</span><span class="upperident"> StatsDB</span><span class="delimeter">,</span><span class="upperident"> Str</span><span class="delimeter">,</span><span class="delimeter"> {</span><span class="lowerident"> score</span><span class="kw"> :</span><span class="upperident"> Dec</span><span class="delimeter">,</span><span class="lowerident"> average</span><span class="kw"> :</span><span class="upperident"> Dec</span><span class="delimeter"> }</span><span class="kw"> -&gt;</span><span class="upperident"> StatsDB</span><span class="lowerident">
add</span><span class="kw"> =</span><span class="delimeter"> |</span><span class="upperident">@</span><span class="upperident">StatsDB</span><span class="lowerident"> db</span><span class="delimeter">,</span><span class="lowerident"> name</span><span class="delimeter">,</span><span class="lowerident"> stats</span><span class="delimeter">|</span><span class="lowerident">
    db</span><span class="kw"> |&gt;</span><span class="upperident"> Dict</span><span class="delimeter">.</span><span class="lowerident">insert</span><span class="lowerident"> name</span><span class="lowerident"> stats</span><span class="kw"> |&gt;</span><span class="upperident"> @</span><span class="upperident">StatsDB</span><span class="kw">

expect</span><span class="lowerident">
    db1</span><span class="kw"> =</span><span class="upperident"> Dict</span><span class="delimeter">.</span><span class="lowerident">empty</span><span class="delimeter"> {</span><span class="delimeter">}</span><span class="kw"> |&gt;</span><span class="upperident"> @</span><span class="upperident">StatsDB</span><span class="kw"> |&gt;</span><span class="lowerident"> add</span><span class="literal"> "John"</span><span class="delimeter"> {</span><span class="lowerident"> score</span><span class="kw">:</span><span class="literal"> 10</span><span class="delimeter">,</span><span class="lowerident"> average</span><span class="kw">:</span><span class="literal"> 10</span><span class="delimeter"> }</span><span class="lowerident">
    db2</span><span class="kw"> =</span><span class="upperident"> Dict</span><span class="delimeter">.</span><span class="lowerident">empty</span><span class="delimeter"> {</span><span class="delimeter">}</span><span class="kw"> |&gt;</span><span class="upperident"> @</span><span class="upperident">StatsDB</span><span class="kw"> |&gt;</span><span class="lowerident"> add</span><span class="literal"> "John"</span><span class="delimeter"> {</span><span class="lowerident"> score</span><span class="kw">:</span><span class="literal"> 10</span><span class="delimeter">,</span><span class="lowerident"> average</span><span class="kw">:</span><span class="literal"> 10</span><span class="delimeter"> }</span><span class="lowerident">

    db1</span><span class="op"> ==</span><span class="lowerident"> db2</span><span class="comment"> # true</span></samp></pre>
<h3 id="custom-implementations"><a href="#custom-implementations">Custom Implementations</a></h3>
<p>You can provide a custom implementation for an ability. This may be useful if a type is composed of other types which do not implement an ability, or if you would like to override the default behaviour.</p>
<p><strong>Example</strong> showing how to provide a custom implementation for the <code>Eq</code> ability.</p>
<pre><samp><span class="upperident">Color</span><span class="kw"> :=</span><span class="delimeter"> [</span><span class="upperident">
        RgbaU8</span><span class="upperident"> U8</span><span class="upperident"> U8</span><span class="upperident"> U8</span><span class="upperident"> U8</span><span class="delimeter">,</span><span class="upperident">
        RgbaF32</span><span class="upperident"> F32</span><span class="upperident"> F32</span><span class="upperident"> F32</span><span class="upperident"> F32</span><span class="delimeter">,</span><span class="delimeter">
    ]</span><span class="lowerident">
    implements</span><span class="delimeter"> [</span><span class="upperident">
        Eq</span><span class="delimeter"> {</span><span class="kw"> is</span><span class="lowerident">_</span><span class="lowerident">eq</span><span class="kw">:</span><span class="lowerident"> color</span><span class="lowerident">_</span><span class="lowerident">equality</span><span class="delimeter"> }</span><span class="delimeter">,</span><span class="delimeter">
    ]</span><span class="comment">

# Note that Eq is not available for an F32, hence we provide a custom implementation here.</span><span class="lowerident">
color</span><span class="lowerident">_</span><span class="lowerident">equality</span><span class="kw"> :</span><span class="upperident"> Color</span><span class="delimeter">,</span><span class="upperident"> Color</span><span class="kw"> -&gt;</span><span class="upperident"> Bool</span><span class="lowerident">
color</span><span class="lowerident">_</span><span class="lowerident">equality</span><span class="kw"> =</span><span class="delimeter"> |</span><span class="lowerident">a</span><span class="delimeter">,</span><span class="lowerident"> b</span><span class="delimeter">|</span><span class="lowerident"> color</span><span class="lowerident">_</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="delimeter">(</span><span class="lowerident">a</span><span class="delimeter">)</span><span class="op"> ==</span><span class="lowerident"> color</span><span class="lowerident">_</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="delimeter">(</span><span class="lowerident">b</span><span class="delimeter">)</span><span class="lowerident">

color</span><span class="lowerident">_</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="kw"> :</span><span class="upperident"> Color</span><span class="kw"> -&gt;</span><span class="delimeter"> (</span><span class="upperident">U8</span><span class="delimeter">,</span><span class="upperident"> U8</span><span class="delimeter">,</span><span class="upperident"> U8</span><span class="delimeter">,</span><span class="upperident"> U8</span><span class="delimeter">)</span><span class="lowerident">
color</span><span class="lowerident">_</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="kw"> =</span><span class="delimeter"> |</span><span class="upperident">@</span><span class="upperident">Color</span><span class="lowerident"> c</span><span class="delimeter">|</span><span class="kw">
    when</span><span class="lowerident"> c</span><span class="kw"> is</span><span class="upperident">
        RgbaU8</span><span class="delimeter">(</span><span class="lowerident">r</span><span class="delimeter">,</span><span class="lowerident"> g</span><span class="delimeter">,</span><span class="lowerident"> b</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="delimeter">)</span><span class="kw"> -&gt;</span><span class="delimeter"> (</span><span class="lowerident">r</span><span class="delimeter">,</span><span class="lowerident"> g</span><span class="delimeter">,</span><span class="lowerident"> b</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="delimeter">)</span><span class="upperident">
        RgbaF32</span><span class="delimeter">(</span><span class="lowerident">r</span><span class="delimeter">,</span><span class="lowerident"> g</span><span class="delimeter">,</span><span class="lowerident"> b</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="delimeter">)</span><span class="kw"> -&gt;</span><span class="delimeter"> (</span><span class="lowerident">f32</span><span class="lowerident">_</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="delimeter">(</span><span class="lowerident">r</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="lowerident"> f32</span><span class="lowerident">_</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="delimeter">(</span><span class="lowerident">g</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="lowerident"> f32</span><span class="lowerident">_</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="delimeter">(</span><span class="lowerident">b</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="lowerident"> f32</span><span class="lowerident">_</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="delimeter">(</span><span class="lowerident">a</span><span class="delimeter">)</span><span class="delimeter">)</span><span class="lowerident">

f32</span><span class="lowerident">_</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="kw"> :</span><span class="upperident"> F32</span><span class="kw"> -&gt;</span><span class="upperident"> U8</span><span class="lowerident">
f32</span><span class="lowerident">_</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="kw"> =</span><span class="delimeter"> |</span><span class="lowerident">f</span><span class="delimeter">|</span><span class="upperident">
    Num</span><span class="delimeter">.</span><span class="lowerident">floor</span><span class="delimeter"> (</span><span class="lowerident">f</span><span class="op"> *</span><span class="literal"> 255.0</span><span class="delimeter">)</span><span class="lowerident">

from</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="kw"> :</span><span class="upperident"> U8</span><span class="delimeter">,</span><span class="upperident"> U8</span><span class="delimeter">,</span><span class="upperident"> U8</span><span class="delimeter">,</span><span class="upperident"> U8</span><span class="kw"> -&gt;</span><span class="upperident"> Color</span><span class="lowerident">
from</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="kw"> =</span><span class="delimeter"> |</span><span class="lowerident">r</span><span class="delimeter">,</span><span class="lowerident"> g</span><span class="delimeter">,</span><span class="lowerident"> b</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="delimeter">|</span><span class="upperident"> @</span><span class="upperident">Color</span><span class="delimeter"> (</span><span class="upperident">RgbaU8</span><span class="delimeter">(</span><span class="lowerident">r</span><span class="delimeter">,</span><span class="lowerident"> g</span><span class="delimeter">,</span><span class="lowerident"> b</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="delimeter">)</span><span class="delimeter">)</span><span class="lowerident">

from</span><span class="lowerident">_</span><span class="lowerident">i16</span><span class="kw"> :</span><span class="upperident"> I16</span><span class="delimeter">,</span><span class="upperident"> I16</span><span class="delimeter">,</span><span class="upperident"> I16</span><span class="delimeter">,</span><span class="upperident"> I16</span><span class="kw"> -&gt;</span><span class="upperident"> Result</span><span class="upperident"> Color</span><span class="delimeter"> [</span><span class="upperident">OutOfRange</span><span class="delimeter">]</span><span class="lowerident">
from</span><span class="lowerident">_</span><span class="lowerident">i16</span><span class="kw"> =</span><span class="delimeter"> |</span><span class="lowerident">r</span><span class="delimeter">,</span><span class="lowerident"> g</span><span class="delimeter">,</span><span class="lowerident"> b</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="delimeter">|</span><span class="kw">
    if</span><span class="lowerident"> r</span><span class="op"> &lt;</span><span class="literal"> 0</span><span class="op"> ||</span><span class="lowerident"> r</span><span class="op"> &gt;</span><span class="literal"> 255</span><span class="op"> ||</span><span class="lowerident"> g</span><span class="op"> &lt;</span><span class="literal"> 0</span><span class="op"> ||</span><span class="lowerident"> g</span><span class="op"> &gt;</span><span class="literal"> 255</span><span class="op"> ||</span><span class="lowerident"> b</span><span class="op"> &lt;</span><span class="literal"> 0</span><span class="op"> ||</span><span class="lowerident"> b</span><span class="op"> &gt;</span><span class="literal"> 255</span><span class="op"> ||</span><span class="lowerident"> a</span><span class="op"> &lt;</span><span class="literal"> 0</span><span class="op"> ||</span><span class="lowerident"> a</span><span class="op"> &gt;</span><span class="literal"> 255</span><span class="kw"> then</span><span class="upperident">
        Err</span><span class="delimeter">(</span><span class="upperident">OutOfRange</span><span class="delimeter">)</span><span class="kw">
    else</span><span class="upperident">
        Ok</span><span class="delimeter">(</span><span class="upperident">@</span><span class="upperident">Color</span><span class="delimeter">(</span><span class="upperident">RgbaU8</span><span class="delimeter">(</span><span class="upperident">Num</span><span class="delimeter">.</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="delimeter">(</span><span class="lowerident">r</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="upperident"> Num</span><span class="delimeter">.</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="delimeter">(</span><span class="lowerident">g</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="upperident"> Num</span><span class="delimeter">.</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="delimeter">(</span><span class="lowerident">b</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="upperident"> Num</span><span class="delimeter">.</span><span class="lowerident">to</span><span class="lowerident">_</span><span class="lowerident">u8</span><span class="delimeter">(</span><span class="lowerident">a</span><span class="delimeter">)</span><span class="delimeter">)</span><span class="delimeter">)</span><span class="delimeter">)</span><span class="lowerident">

from</span><span class="lowerident">_</span><span class="lowerident">f32</span><span class="kw"> :</span><span class="upperident"> F32</span><span class="delimeter">,</span><span class="upperident"> F32</span><span class="delimeter">,</span><span class="upperident"> F32</span><span class="delimeter">,</span><span class="upperident"> F32</span><span class="kw"> -&gt;</span><span class="upperident"> Result</span><span class="upperident"> Color</span><span class="delimeter"> [</span><span class="upperident">OutOfRange</span><span class="delimeter">]</span><span class="lowerident">
from</span><span class="lowerident">_</span><span class="lowerident">f32</span><span class="kw"> =</span><span class="delimeter"> |</span><span class="lowerident">r</span><span class="delimeter">,</span><span class="lowerident"> g</span><span class="delimeter">,</span><span class="lowerident"> b</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="delimeter">|</span><span class="kw">
    if</span><span class="lowerident"> r</span><span class="op"> &lt;</span><span class="literal"> 0.0</span><span class="op"> ||</span><span class="lowerident"> r</span><span class="op"> &gt;</span><span class="literal"> 1.0</span><span class="op"> ||</span><span class="lowerident"> g</span><span class="op"> &lt;</span><span class="literal"> 0.0</span><span class="op"> ||</span><span class="lowerident"> g</span><span class="op"> &gt;</span><span class="literal"> 1.0</span><span class="op"> ||</span><span class="lowerident"> b</span><span class="op"> &lt;</span><span class="literal"> 0.0</span><span class="op"> ||</span><span class="lowerident"> b</span><span class="op"> &gt;</span><span class="literal"> 1.0</span><span class="op"> ||</span><span class="lowerident"> a</span><span class="op"> &lt;</span><span class="literal"> 0.0</span><span class="op"> ||</span><span class="lowerident"> a</span><span class="op"> &gt;</span><span class="literal"> 1.0</span><span class="kw"> then</span><span class="upperident">
        Err</span><span class="delimeter">(</span><span class="upperident">OutOfRange</span><span class="delimeter">)</span><span class="kw">
    else</span><span class="upperident">
        Ok</span><span class="delimeter">(</span><span class="upperident">@</span><span class="upperident">Color</span><span class="delimeter">(</span><span class="upperident">RgbaF32</span><span class="delimeter">(</span><span class="lowerident">r</span><span class="delimeter">,</span><span class="lowerident"> g</span><span class="delimeter">,</span><span class="lowerident"> b</span><span class="delimeter">,</span><span class="lowerident"> a</span><span class="delimeter">)</span><span class="delimeter">)</span><span class="delimeter">)</span></samp></pre>
<h2 id="defining-a-new-ability"><a href="#defining-a-new-ability">Advanced Topic: Defining a new Ability</a></h2>
<p>It is possible to define a new Ability in addition to those provided in builtins. This should be avoided if possible and only used in rare circumstances by package authors.</p>
<p><strong>Example</strong> showing how to define a new Ability.</p>
<pre><samp><span class="upperident">CustomInspect</span><span class="lowerident"> implements</span><span class="lowerident">
    inspect</span><span class="lowerident">_</span><span class="lowerident">me</span><span class="kw"> :</span><span class="lowerident"> val</span><span class="kw"> -&gt;</span><span class="upperident"> Str</span><span class="lowerident"> where</span><span class="lowerident"> val</span><span class="lowerident"> implements</span><span class="upperident"> CustomInspect</span><span class="lowerident">

inspect</span><span class="kw"> :</span><span class="lowerident"> val</span><span class="kw"> -&gt;</span><span class="upperident"> Str</span><span class="lowerident"> where</span><span class="lowerident"> val</span><span class="lowerident"> implements</span><span class="upperident"> CustomInspect</span><span class="lowerident">
inspect</span><span class="kw"> =</span><span class="delimeter"> |</span><span class="lowerident">val</span><span class="delimeter">|</span><span class="lowerident"> inspect</span><span class="lowerident">_</span><span class="lowerident">me</span><span class="lowerident"> val</span><span class="upperident">

Color</span><span class="kw"> :=</span><span class="delimeter"> [</span><span class="upperident">Red</span><span class="delimeter">,</span><span class="upperident"> Green</span><span class="delimeter">,</span><span class="upperident"> Blue</span><span class="delimeter">]</span><span class="lowerident">
    implements</span><span class="delimeter"> [</span><span class="upperident">
        Eq</span><span class="delimeter">,</span><span class="upperident">
        CustomInspect</span><span class="delimeter"> {</span><span class="lowerident">
            inspect</span><span class="lowerident">_</span><span class="lowerident">me</span><span class="kw">:</span><span class="lowerident"> inspect</span><span class="lowerident">_</span><span class="lowerident">color</span><span class="delimeter">,</span><span class="delimeter">
        }</span><span class="delimeter">,</span><span class="delimeter">
    ]</span><span class="lowerident">

inspect</span><span class="lowerident">_</span><span class="lowerident">color</span><span class="kw"> :</span><span class="upperident"> Color</span><span class="kw"> -&gt;</span><span class="upperident"> Str</span><span class="lowerident">
inspect</span><span class="lowerident">_</span><span class="lowerident">color</span><span class="kw"> =</span><span class="delimeter"> |</span><span class="upperident">@</span><span class="upperident">Color</span><span class="lowerident"> color</span><span class="delimeter">|</span><span class="kw">
    when</span><span class="lowerident"> color</span><span class="kw"> is</span><span class="upperident">
        Red</span><span class="kw"> -&gt;</span><span class="literal"> "Red"</span><span class="upperident">
        Green</span><span class="kw"> -&gt;</span><span class="literal"> "Green"</span><span class="upperident">
        Blue</span><span class="kw"> -&gt;</span><span class="literal"> "Blue"</span><span class="kw">

expect</span><span class="delimeter">
    [</span><span class="upperident">@</span><span class="upperident">Color</span><span class="upperident"> Red</span><span class="delimeter">,</span><span class="upperident"> @</span><span class="upperident">Color</span><span class="upperident"> Green</span><span class="delimeter">,</span><span class="upperident"> @</span><span class="upperident">Color</span><span class="upperident"> Blue</span><span class="delimeter">]</span><span class="kw">
    |&gt;</span><span class="upperident"> List</span><span class="delimeter">.</span><span class="lowerident">map</span><span class="delimeter">(</span><span class="lowerident">inspect</span><span class="delimeter">)</span><span class="kw">
    |&gt;</span><span class="upperident"> Str</span><span class="delimeter">.</span><span class="lowerident">join</span><span class="lowerident">_</span><span class="lowerident">with</span><span class="delimeter">(</span><span class="literal">","</span><span class="delimeter">)</span><span class="kw">
    |&gt;</span><span class="upperident"> Bool</span><span class="delimeter">.</span><span class="kw">is</span><span class="lowerident">_</span><span class="lowerident">eq</span><span class="delimeter">(</span><span class="literal">"Red,Green,Blue"</span><span class="delimeter">)</span></samp></pre></main><footer><div  id="footer"><div  id="gh-link"><a  id="gh-centered-link" href="https://github.com/roc-lang/roc"><svg  viewBox="0 0 98 96" height="25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" role="img" id="gh-logo"><path  d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"></path></svg><span  id="gh-link-text">roc-lang/roc</span></a></div></div></footer></body></html>