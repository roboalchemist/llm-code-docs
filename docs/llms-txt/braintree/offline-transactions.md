# Source: https://developer.paypal.com/braintree/in-person/guides/offline-transactions/

<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Braintree In-Person Docs</title><meta name="description" content="Our mission is to empower developers with the tools, 
  resources, and simple-to-use SDKs and APIs to build on 
  one platform, so they can serve merchants from around the world."/><meta name="keywords" content=""/><link rel="canonical" href="https://developer.paypal.com/braintree/in-person/guides/offline-transactions/"/><meta property="og:type" content="website"/><meta property="og:url" content="https://developer.paypal.com/braintree/in-person/guides/offline-transactions/"/><meta property="og:title" content="Braintree In-Person Docs"/><meta property="og:description" content="Our mission is to empower developers with the tools, 
  resources, and simple-to-use SDKs and APIs to build on 
  one platform, so they can serve merchants from around the world."/><meta property="og:image" content="https://www.paypalobjects.com/devdoc/img/seo/ddnw_ogfallback.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:url" content="https://developer.paypal.com/braintree/in-person/guides/offline-transactions/"/><meta name="twitter:title" content="Braintree In-Person Docs"/><meta name="twitter:description" content="Our mission is to empower developers with the tools, 
  resources, and simple-to-use SDKs and APIs to build on 
  one platform, so they can serve merchants from around the world."/><meta name="twitter:site" content="@paypaldev"/><meta name="twitter:creator" content="@paypaldev"/><meta name="twitter:image" content="https://www.paypalobjects.com/devdoc/img/seo/ddnw_twitterfallback.png"/><meta name="twitter:image:alt" content="Black and White PayPal Logo"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/variables-VGGZY4JK.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/footer-NG55V3IZ.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/header-RODVFCUO.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/sideBar-P2XH7TE5.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/app-AVOPA6BH.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/codeblock-DADUWXNB.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/prism-NEYM7EL4.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/components-D2NYPEGL.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/index-2Z52PXGI.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/paypal-ui/web/fonts-and-normalize/1-1-0/fonts-and-normalize.min.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/paypal-ui/web/icon-font/0-0-1/icon-font.min.css"/><link rel="icon" href="https://www.paypalobjects.com/btdevdoc/braintree/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/articlesAndDocs-R4V4BBLG.css"/></head><body><header class="header"><div class="nav--global__wrapper" id="nav-global-wrapper"><a class="logo logo--articles" aria-label="Braintree a PayPal Service" data-track-event-properties="project=journey&amp;docs,context=navbar,component=link,action=click,descriptor=braintree logo,container=header,origin=support articles,intent=view support articles landing page,href=https://articles.braintreepayments.com" pa-marked="1" href="/braintree/in-person/"><span class="logo--fallback">Braintree a PayPal Service</span><span class="nav-logo"><img src="https://www.paypalobjects.com/paypal-ui/logos/svg/braintree-pp-color.svg" alt="PayPal Braintree logo" style="width:200px;height:40px"/></span></a><nav class="nav--global"><span class="mobile__nav-logo mobile__nav-item mobile__nav-left"><img src="https://www.paypalobjects.com/webstatic/icon/pp258.png" alt="PayPal Braintree Mobile logo" style="width:40px;height:40px;fill:#fff"/></span><span class="mobile__nav--global-active-category mobile__nav-item mobile__nav-center"><a class="mobile__nav-active-section-container"><span class="mobile__nav-active-section">API &amp; In-Person</span><span class="mobile__nav-dropdown-chevron"><style data-emotion="css 1bk0n6-svg-size_md">.css-1bk0n6-svg-size_md{speak:none;display:inline-block;aspect-ratio:1;width:2rem;height:2rem;}.css-1bk0n6-svg-size_md img,.css-1bk0n6-svg-size_md svg{width:100%;height:100%;display:block;}</style><span class="css-1bk0n6-svg-size_md" data-ppui-info="icons_8.24.1__7.46.3" width="40px" height="40px" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 18" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M4.291 6.293a1 1 0 0 1 1.415 0l3.293 3.293 3.293-3.293a1 1 0 1 1 1.414 1.414L9.713 11.7a1.01 1.01 0 0 1-1.428 0L4.29 7.707a1 1 0 0 1 0-1.414z" clip-rule="evenodd" data-ppui="true"></path></svg></span></span></a><div class="mobile__nav-active-tier">Offline Transactions</div></span><ul class="nav--global-sites mobile__nav-item mobile__nav-right"><span class="nav--global-sites__items nav--global-sites__items-hidden"><li class="nav--global-sites__item nav--global-sites__link__container nav--global-sites__link__container-hidden"><a class="nav--global-sites__link test_nav_link_0" data-track-event-properties="project=journey&amp;amp;docs,context=navbar,component=link,action=click,container=header,descriptor=SDK Docs,intent=view SDK Docs landing page,href=/braintree/in-person/" pa-marked="1" href="/braintree/docs/">SDK Docs</a></li><li class="nav--global-sites__item nav--global-sites__link__container nav--global-sites__link__container-hidden"><a class="nav--global-sites__link test_nav_link_1 nav--global-sites__link--active" data-track-event-properties="project=journey&amp;amp;docs,context=navbar,component=link,action=click,container=header,descriptor=API &amp; In-Person Docs,intent=view API &amp; In-Person Docs landing page,href=/braintree/in-person/" pa-marked="1" href="/braintree/graphql/">API &amp; In-Person Docs</a></li><li class="nav--global-sites__item nav--global-sites__link__container nav--global-sites__link__container-hidden"><a class="nav--global-sites__link test_nav_link_2" data-track-event-properties="project=journey&amp;amp;docs,context=navbar,component=link,action=click,container=header,descriptor=Support Articles,intent=view Support Articles landing page,href=/braintree/in-person/" pa-marked="1" href="/braintree/articles/">Support Articles</a></li></span><li class="nav--global-sites__item"><button id="searchOpenTrigger" class="search__trigger nav--link" aria-label="Hit enter to search" data-track-event-properties="project=docs&amp;journey,context=search,component=button,action=click,intent=open search,descriptor=Start typing to search,origin=sites search&amp;" pa-marked="1"><svg class="search__trigger-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Open search icon</title><path d="M6.99994 13.988C8.33314 13.9878 9.63816 13.6042 10.7595 12.883L17.2456 19.3688L19.368 17.2466L12.885 10.7639C13.7224 9.45534 14.1003 7.90523 13.959 6.35811C13.8178 4.811 13.1654 3.35494 12.1049 2.21967C11.0444 1.08439 9.63613 0.334526 8.1022 0.0883654C6.56828 -0.157795 4.99605 0.113766 3.63358 0.860206C2.2711 1.60665 1.19592 2.78547 0.577676 4.21071C-0.0405686 5.63594 -0.16669 7.22645 0.219211 8.73131C0.605111 10.2362 1.48107 11.5697 2.70888 12.5216C3.93669 13.4734 5.44647 13.9893 7.00002 13.988H6.99994ZM6.99994 1.98801C7.98884 1.98801 8.95554 2.28125 9.77779 2.83066C10.6 3.38007 11.2409 4.16096 11.6193 5.07459C11.9978 5.98822 12.0968 6.99355 11.9039 7.96346C11.7109 8.93336 11.2347 9.82428 10.5355 10.5235C9.83621 11.2228 8.9453 11.699 7.97539 11.8919C7.00549 12.0849 6.00015 11.9858 5.08652 11.6074C4.17289 11.229 3.392 10.5881 2.84259 9.76586C2.29318 8.94361 1.99994 7.97691 1.99994 6.98801C2.0015 5.6624 2.52878 4.39154 3.46613 3.4542C4.40347 2.51685 5.67433 1.98957 6.99994 1.98801Z" fill="#dedede"></path></svg><span class="search__trigger-text">Search</span></button></li><button data-testid="sidebar-button" class="sidebar-menu-button"><style data-emotion="css 1bk0n6-svg-size_md">.css-1bk0n6-svg-size_md{speak:none;display:inline-block;aspect-ratio:1;width:2rem;height:2rem;}.css-1bk0n6-svg-size_md img,.css-1bk0n6-svg-size_md svg{width:100%;height:100%;display:block;}</style><span class="css-1bk0n6-svg-size_md" data-ppui-info="icons_8.24.1__7.46.3" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path d="M5 5a1 1 0 0 0 0 2h14a1 1 0 1 0 0-2H5zm-1 7a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1zm0 6a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1z" data-ppui="true"></path></svg></span></button></ul><div class="header--aside"><span class="nav--global-sites__item"><a class="nav--global-sites__link" pa-marked="1" href="/braintree/help">Get Help</a></span><span class="nav--global-sites__item" id="contact-sales-nav"><a href="https://www.braintreepayments.com/contact/sales" class="nav--global-sites__link" pa-marked="1">Contact Sales</a></span><div class="login-buttons"><span class="nav--global-sites__item" id="create-account_button"><a class="nav--global-sites__link" pa-marked="1" target="_blank" rel="noreferrer" href="https://www.braintreepayments.com/sandbox" aria-label="Sign up for a sandbox account">Create Account</a></span><span class="nav--global-sites__item"><a class="nav--global-sites__link" href="/braintree/api/auth/connect" aria-label="Log into sandbox" rel="noreferrer" pa-marked="1">Login</a></span></div><div class="header__dropdown ab-control-panel-dropdown-a"><button class="dropdown__title button button--small hamburger-small" style="margin-bottom:0" aria-label="Access production control panel" data-track-event-properties="project=journey&amp;docs,context=navbar,component=dropdown,action=click,container=header,descriptor=more icon,intent=choose a control panel link" pa-marked="1"><svg class="dropdown__icon--closed" width="4" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill="#fff"></path></svg></button><div class="dropdown__content"><div class="dropdown__section"><h3 class="dropdown__section-title">Production Control Panel</h3><ul class="dropdown__list"><li class="dropdown__item"><a class="link-list-link dropdown__link" href="https://www.braintreegateway.com/login" target="_blank" aria-label="Log into your production account" data-track-event-properties="project=journey&amp;docs,context=navbar,component=dropdown item,action=click,descriptor=log in,intent=view production login,href=https://www.braintreegateway.com/login" pa-marked="1" rel="noreferrer">Login</a></li></ul><h3 class="dropdown__section-title">Become a Merchant</h3><ul class="dropdown__list"><li class="dropdown__item"><a class="link-list-link dropdown__link" href="https://www.braintreepayments.com/contact/sales" aria-label="Contact sales on the website" target="_blank" data-track-event-properties="project=journey&amp;docs,context=navbar,component=dropdown item,action=click,descriptor=contact sales,intent=view the sales contact page,href=https://www.braintreepayments.com/contact/sales" pa-marked="1" rel="noreferrer">Contact Sales</a></li></ul></div></div></div></div></nav></div><nav class="nav--local"><ul class="nav__list" id="main-nav-links"><div class="hoverDropdown__wrapper navLinkWithHover"><div class="hoverDropdown__target"><li class="nav__item"><a class="nav--link test_sub_nav_link_0" data-track-event-properties="project=journey&amp;docs,context=navbar,component=link,action=click,container=header,descriptor=about,intent=view support articles landing page,href=/braintree/articles/" pa-marked="1" href="/braintree/graphql/">Online</a></li></div></div><div class="hoverDropdown__wrapper navLinkWithHover"><div class="hoverDropdown__target"><li class="nav__item"><a class="nav--link test_sub_nav_link_1 is-active" data-track-event-properties="project=journey&amp;docs,context=navbar,component=link,action=click,container=header,descriptor=about,intent=view support articles landing page,href=/braintree/articles/" pa-marked="1" href="/braintree/in-person/">In-Person</a></li></div></div></ul></nav></header><div class="flex-body"><div class="flex-sidebar"><div><aside class="sidebar" data-track-event-context="left-hand nav"><div class="sidebar__inner"><div class="menu-group"><span class="menu-group__title" data-title="">Integration Guides</span><ul class="menu"><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/api-authentication/"><button class="menu__link" pa-marked="1">API Authentication</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/setup-reader/"><button class="menu__link" pa-marked="1">Setup Reader</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"><svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.81183 6.65363C4.12865 6.33681 4.64232 6.33681 4.95913 6.65363L10.0643 11.7588L15.1696 6.65363C15.4864 6.33681 16 6.33681 16.3169 6.65363C16.6337 6.97045 16.6337 7.48411 16.3169 7.80093L10.6437 13.4741C10.3237 13.7941 9.80493 13.794 9.48496 13.4741L3.81183 7.80093C3.49501 7.48411 3.49501 6.97045 3.81183 6.65363Z" fill="#001435"></path></svg></div><a href="/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/"><button class="menu__link" pa-marked="1">Initiate a Sale or Refund</button></a></div><ul class="menu-list__hidden"><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/"><button class="menu__link" pa-marked="1">Initiate a Card Present Authorization</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/making-a-transaction/level-2-and-level-3-data-processing/"><button class="menu__link" pa-marked="1">Level 2 and Level 3 Data Processing</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/making-a-transaction/passing-lodging-data/"><button class="menu__link" pa-marked="1">Passing Lodging Data</button></a></div></li></ul></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/vaulting-and-customers/"><button class="menu__link" pa-marked="1">Vaulting and Customers</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/paypal-and-venmo-qrc/"><button class="menu__link" pa-marked="1">PayPal and Venmo QRC</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/display-information/"><button class="menu__link" pa-marked="1">Display Information</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/custom-prompts/"><button class="menu__link" pa-marked="1">Custom Prompts</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/card-data-collection/"><button class="menu__link" pa-marked="1">Card Data Collection</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/graphql-error-handling/"><button class="menu__link" pa-marked="1">GraphQL Error Handling</button></a></div></li><li class="menu__item is-open auto-open"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/offline-transactions/"><button class="menu__link is-active" pa-marked="1">Offline Transactions</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/additional-api-calls/"><button class="menu__link" pa-marked="1">Additional API Calls</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/receipt-printing-api/"><button class="menu__link" pa-marked="1">Receipt Printing API</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/reporting-and-reconciliation/"><button class="menu__link" pa-marked="1">Reporting and Reconciliation</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/testing-your-integration/"><button class="menu__link" pa-marked="1">Testing Your Integration</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/ready-for-launch/"><button class="menu__link" pa-marked="1">Ready for Launch?</button></a></div></li></ul></div></div></aside></div></div><div id="contentContainer" class="flex-content"><main id="main-section" class="documentation-content__wrapper"><article class="main-content js-outlet docs--constrained"><div class="subtitle-container"><div class="breadcrumb breadcrumbInner"><div class="breadcrumbItem"><a class="breadcrumbLink">Integration Guides</a><span style="padding:0 4px">/</span></div><div class="breadcrumbItem"><a href="/braintree/in-person/guides/offline-transactions/" class="activeBreadcrumbLink">Offline Transactions</a></div></div><div class="markdownopts-container"><div class="markdownopts-face-container"><button class="markdownopts-face-button"><svg fill="#000000" width="16" height="16" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg" style="width:16px;height:16px;margin-right:8px"><title>OpenAI icon</title><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"></path></svg>Ask ChatGPT</button><button class="markdownopts-chevron-button" data-testid="chevron-button"><style data-emotion="css 1bk0n6-svg-size_md">.css-1bk0n6-svg-size_md{speak:none;display:inline-block;aspect-ratio:1;width:2rem;height:2rem;}.css-1bk0n6-svg-size_md img,.css-1bk0n6-svg-size_md svg{width:100%;height:100%;display:block;}</style><span class="css-1bk0n6-svg-size_md" data-ppui-info="icons_8.24.1__7.46.3" style="width:16px;height:16px" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M4.292 8.293a1 1 0 0 1 1.414 0L12 14.586l6.293-6.293a1 1 0 0 1 1.414 1.414L12.713 16.7a1.01 1.01 0 0 1-1.428 0L4.292 9.707a1 1 0 0 1 0-1.414z" clip-rule="evenodd" data-ppui="true"></path></svg></span></button></div></div></div><div class="main-article-content"><div class="ecmRichText" style="margin-bottom:0px"><main><header><h1><span>Offline Transactions</span></h1><p class="markdown-p"><span>Enable payment acceptance even when your internet is offline.</span></p></header><div><h2 id="introduction" class="test_h2 markdown-h2"><span>Introduction</span><a class="icon icon--link hash-link" href="#introduction" aria-label="Introduction"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
            Offline transaction processing, also known as store-and-forward or SAF,
            allows payment acceptance even when readers are offline and unable to
            connect to the internet. Transactions are stored on the card reader. Once
            the reader is able to connect to the internet again, the stored
            transactions are sent to Braintree for payment processing.
        </span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            It is recommended to use Store & Forward starting in firmware
                            version 5.0.0 which has critical improvements to this
                            functionality.
                        </span></span></div></div></p></div></div></div><h3 id="merchant-liability" class="test_h3 markdown-h3"><span>Merchant Liability</span><a class="icon icon--link hash-link" href="#merchant-liability" aria-label="Merchant Liability"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            For transactions that occur while in offline mode via SAF the liability
            for the transaction falls on the merchant. For example, if once the stored
            offline transaction is forwarded to Braintree for processing and then
            comes back as declined or refused by the issuer then the merchant will not
            be funded for the transaction. For this reason, we advise merchants to
            always think about how to best mitigate this risk.
        </span></p><h3 id="offline-floor-limits" class="test_h3 markdown-h3"><span>Offline Floor Limits</span><a class="icon icon--link hash-link" href="#offline-floor-limits" aria-label="Offline Floor Limits"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            Typically for offline transactions a merchant will want to determine what
            is the maximum transaction amount they would like to allow for an offline
            transaction, this is called a "floor limit". From a Braintree perspective,
            we will allow for any amount to be sent to the reader in an offline
            session, and for this reason, it is up to the POS system (or API caller
            application) to create parameters around floor limits and only send the
            transaction request to the reader if the transaction amount is in line
            with the set parameters on the POS. Usually, these parameters will vary by
            merchant and should be configurable to some degree. You may also
            optionally create other risk mitigating parameters for example "maximum
            number of transactions to be allowed in a given offline session", or
            "maximum amount to be allowed in a given offline session", etc...
        </span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            When determining what your offline floor limits should be it is
                            advised to consider average transaction value as well as risk
                            tolerance for a potentially declined or refused transaction.
                        </span></span></div></div></p></div></div></div><h3 id="initiating-an-offline-session" class="test_h3 markdown-h3"><span>Initiating an Offline Session</span><a class="icon icon--link hash-link" href="#initiating-an-offline-session" aria-label="Initiating an Offline Session"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            As you will discover once you review the technical documentation below
            relating to
            </span><a href="/braintree/in-person/guides/offline-transactions/#initiating-an-offline-transaction"><span>initiating an offline transaction</span></a><span>, you will notice that to initiate the transaction, you must direct your
            requests to an endpoint on the reader itself as opposed to the cloud
            Braintree API endpoint. For this reason, the POS (or API caller
            application) must have a toggle of some sort to tell the POS to "go into
            offline mode" which would trigger the endpoint switching and put the POS
            in a state where it should adhere to offline floor limit parameters.
        </span></p><h2 id="getting-the-reader-set-up" class="test_h2 markdown-h2"><span>Getting the Reader set up</span><a class="icon icon--link hash-link" href="#getting-the-reader-set-up" aria-label="Getting the Reader set up"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>In order to transact offline, there are a few prerequisites</span></p><ol class="list list--num"><li value="1"><div data-value="1"></div><div><p class="markdown-p"><span>The reader and POS must be on the same local area network</span></p></div></li><li value="2"><div data-value="2"></div><div><p class="markdown-p"><span>
                        The reader and POS must have a
                        </span><a href="/braintree/in-person/guides/setup-reader/#configuring-static-ip"><span>static IP address</span></a></p></div></li></ol><p class="markdown-p"><span>
            For the POS to securely initiate a transaction on the reader, they must
            establish a mutually authenticated connection, which will be established
            via mutual TLS. In order to create this mutually authenticated connection,
            SSL certificates will need to be generated for both the POS and reader.
        </span></p><h3 id="id-1-certificate-generation-overview" class="test_h3 markdown-h3"><span>1) Certificate Generation Overview</span><a class="icon icon--link hash-link" href="#id-1-certificate-generation-overview" aria-label="1) Certificate Generation Overview"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            Certificate generation can be done via
            </span><code><span>openssl</span></code><span>. This guide will work with
            </span><code><span>openssl@1.1.1</span></code><span>. Variants other than this, like LibreSSL, etc.
            </span><em><span>may</span></em><span> work with this guide but are not guaranteed.
        </span></p><p class="markdown-p"><span>
            This guide will walk through generating a self-signed root Certificate
            Authority, and use that root certificate to create signed server (reader)
            and client (POS) certificates.
        </span></p><h3 id="id-2-root-certificate-authority" class="test_h3 markdown-h3"><span>2) Root Certificate Authority</span><a class="icon icon--link hash-link" href="#id-2-root-certificate-authority" aria-label="2) Root Certificate Authority"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>First, we'll need to generate a private key.</span></p><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">$ openssl genrsa -out ca.key 4096</code></pre></div></div></div><p class="markdown-p"><span>Next, we'll use this key to generate the root certificate.</span></p><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">$ openssl req \
          -new -x509 -days 365 \
          -key ca.key -out ca.crt \
          -nodes -subj &quot;/CN=dev-root-ca&quot;</code></pre></div></div></div><h3 id="id-3-reader-and-pos-certificates" class="test_h3 markdown-h3"><span>3) Reader and POS Certificates</span><a class="icon icon--link hash-link" href="#id-3-reader-and-pos-certificates" aria-label="3) Reader and POS Certificates"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            Now, we can use our root certificate to create the POS and reader
            certificates. You'll need the reader and POS IP addresses for this next
            part.
        </span></p><p class="markdown-p"><span>
            First we will need to create an extensions file that looks like this named
            </span><code><span>v3-extensions.ext</span></code></p><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">[reader]
          keyUsage = critical, digitalSignature, keyEncipherment
          extendedKeyUsage = serverAuth
          subjectAltName=IP:$READER_IP_ADDRESS
          authorityKeyIdentifier=keyid,issuer
          
          [pos]
          keyUsage = critical, digitalSignature, keyEncipherment
          extendedKeyUsage = clientAuth
          subjectAltName=IP:$POS_IP_ADDRESS
          authorityKeyIdentifier=keyid,issuer</code></pre></div></div></div><p class="markdown-p"><span>
            Make sure to substitute the
            </span><code><span>READER_IP_ADDRESS </span></code><span>and
            </span><code><span>POS_IP_ADDRESS</span></code><span>
            in the above file with your respective values.
        </span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            If you would like to use a shared cert across all of your devices,
                            then you may use a generic domain instead of an IP address for the
                            reader and POS certs, for example:
                            </span><code><strong><span>DNS:$domain_name</span></strong></code><span>instead of
                            </span><code><strong><span>IP:$READER_IP_ADDRESS</span></strong></code><span>
                            and
                            </span><code><strong><span>IP:$POS_IP_ADDRESS</span></strong></code></span></div></div></p></div></div></div><p class="markdown-p"><span>
            Next, we will generate the reader's certificate, again substitute the
            reader IP address.
        </span></p><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">$ openssl genrsa -out reader.key 4096

          $ openssl req \
              -new -key reader.key \
              -out reader.csr \
              -nodes -subj &quot;/CN=$READER_IP_ADDRESS&quot;
          
          $ openssl x509 \
              -req -days 365 \
              -in reader.csr \
              -CA ca.crt -CAkey ca.key \
              -set_serial 1 \
              -out reader.crt \
              -extfile v3-extensions.ext -extensions reader</code></pre></div></div></div><p class="markdown-p"><span>Finally, we will generate the POS certificates</span></p><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">$ openssl genrsa -out pos.key 4096

          $ openssl req \
              -new -key pos.key \
              -out pos.csr \
              -nodes -subj &quot;/CN=$POS_IP_ADDRESS&quot;
          
          $ openssl x509 \
              -req -days 365 \
              -in pos.csr \
              -CA ca.crt -CAkey ca.key \
              -set_serial 2 \
              -out pos.crt \
              -extfile v3-extensions.ext -extensions pos</code></pre></div></div></div><p class="markdown-p"><span>After this step you should have the following files generated:</span></p><ul class="list list--disc"><li><div><p class="markdown-p"><code><span>ca.crt</span></code></p></div></li><li><div><p class="markdown-p"><code><span>ca.key</span></code></p></div></li><li><div><p class="markdown-p"><code><span>reader.crt</span></code></p></div></li><li><div><p class="markdown-p"><code><span>reader.csr</span></code></p></div></li><li><div><p class="markdown-p"><code><span>reader.key</span></code></p></div></li><li><div><p class="markdown-p"><code><span>pos.crt</span></code></p></div></li><li><div><p class="markdown-p"><code><span>pos.csr</span></code></p></div></li><li><div><p class="markdown-p"><code><span>pos.key</span></code></p></div></li></ul><h3 id="id-4-verifying-certificates" class="test_h3 markdown-h3"><span>4) Verifying Certificates</span><a class="icon icon--link hash-link" href="#id-4-verifying-certificates" aria-label="4) Verifying Certificates"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            Now that we have our certificates generated, there are a few ways we can
            ensure these will work as expected. One way is to use the
            </span><code><span>openssl</span></code><code><span>s_client</span></code><span>
            and
            </span><code><span>s_server</span></code><span>
            tools. These will let us test the mutual TLS handshake that occurs between
            the POS and Reader, and determine if there are any problems.
        </span></p><p class="markdown-p"><span>First, we'll start the "server", or reader:</span></p><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">$ openssl s_server \
          -accept 8080 \
          -cert reader.crt \
          -key reader.key \
          -CAfile ca.crt</code></pre></div></div></div><p class="markdown-p"><span>
            This starts a server on port 8080, with the reader certificates. Now,
            let's test our connection like so:
        </span></p><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">$ openssl s_client \
          -connect localhost:8080 \
          -cert pos.crt \
          -key pos.key \
          -CAfile ca.crt</code></pre></div></div></div><p class="markdown-p"><span>
            If running the above results in no error outputs, then the certificates
            are working as expected.
        </span></p><h3 id="id-5-getting-certificates-onto-readers" class="test_h3 markdown-h3"><span>5) Getting Certificates onto Readers</span><a class="icon icon--link hash-link" href="#id-5-getting-certificates-onto-readers" aria-label="5) Getting Certificates onto Readers"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            In order to use these certificates, the Readers will need to download
            these certificates from Braintree servers and use them on start-up. In
            order to accomplish this, the root CA and reader certificate as well as
            reader private key will need to be sent to Braintree support so that the
            files can be provisioned for the readers.
        </span></p><p class="markdown-p"><span>
            In order to do this securely, the certificates will need to be packaged
            into a PKCS12 container that is password protected like so:
        </span></p><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">$ openssl pkcs12 -export -out 111-222-333.pfx -inkey reader.key -in reader.crt -certfile ca.crt</code></pre></div></div></div><p class="markdown-p"><span>
            Where you see
            </span><code><span><span>111-222-333</span></span></code><span>
            in the above example is the serial number of the card reader getting the
            certificate installed.
        </span></p><h2 id="initiating-an-offline-transaction" class="test_h2 markdown-h2"><span>Initiating an Offline Transaction</span><a class="icon icon--link hash-link" href="#initiating-an-offline-transaction" aria-label="Initiating an Offline Transaction"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
            The default port for the reader to accept store and forward transaction
            requests is
            </span><code><span>3030</span></code><span>. If your reader IP address is then
            </span><code><span>192.168.0.155</span></code><span>, the URL for API requests would be like so:
        </span></p><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">https://192.168.0.155:3030/graphql</code></pre></div></div></div><p class="markdown-p"><span>
            When making the API call to this URL, the certificate generated for the
            POS will need to be sent along with the request so that the reader can
            verify the POS.
        </span></p><p class="markdown-p"><span>
            Like online transactions, to provide idempotency on the request charge
            mutation, you must also include the HTTP header
            </span><code><span>Idempotency-Key </span></code><span>with a unique value. UUIDv4 is recommended.
            For example, if using
            </span><code><span>curl</span></code><span>
            to make the request, you would include
        </span></p><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">--header &#x27;Idempotency-Key: 94c9ea8b-31b0-488e-a231-57e32f0bfd70&#x27;</code></pre></div></div></div><p class="markdown-p"><span>A sample charge GraphQL charge request would look like this:</span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            Note that there is an additional variable to include in your
                            request called:
                            </span><code><span>"deferredAuthorization": true</span></code></span></div></div></p></div></div></div><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Mutation</li><li class="styles_tab_list_item">GraphQL Variables</li><li class="styles_tab_list_item">Sample API Response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">mutation RequestChargeFromInStoreReader($input: RequestChargeFromInStoreReaderInput!) {
              requestChargeFromInStoreReader(input: $input) {
                  clientMutationId
                  id
                  status
              }
          }</code></pre></div></div><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            The above example is for a Charge request, you may also perform a
                            </span><a href="/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/"><span>card-present authorization</span></a><span>
                            as an offline transaction
                        </span></span></div></div></p></div></div></div><p class="markdown-p"><span>
            Below is an example of an offline unreferenced refund request. Context ID
            polling logic should be the same as for a request charge.
        </span></p><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Mutation</li><li class="styles_tab_list_item">GraphQL Variables</li><li class="styles_tab_list_item">Sample API Response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">mutation RequestRefundFromInStoreReader($input: RequestRefundFromInStoreReaderInput!) {
              requestRefundFromInStoreReader(input: $input) {
                  clientMutationId
                  id
                  status
              }
          }</code></pre></div></div><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            It is important to note that we support the passing of
                            </span><code><span><span>merchantAccountId</span></span></code><span> as well as</span><code><span><span>customFields</span></span></code><span>
                                and a shopper statement
                                </span><code><span><span>descriptor</span></span></code><span>
                                in your store and forward request. However, there is no validation
                                at the reader level against what is passed. This means that the
                                validation occurs once the stored transactions are forwarded to
                                Braintree and if bad values are passed then the transaction will
                                fail once forwarded and the merchant will not be funded for the
                                transaction.
                            
                        </span></span></div></div><code></code></p><code></code></div><code></code></div><code></code></div><code></code><h2 id="checking-the-status-of-a-charge-or-refund" class="test_h2 markdown-h2"><span>Checking the Status of a Charge or Refund</span><a class="icon icon--link hash-link" href="#checking-the-status-of-a-charge-or-refund" aria-label="Checking the Status of a Charge or Refund"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
                Similar to the
                </span><a href="/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status"><span>online guide</span></a><span>, the reader can be continuously polled with a query for updates on the
                transaction's completion status. The difference with an offline
                transaction is that when you poll the context ID using the reader IP
                address as an endpoint, you will only get the transaction completion
                status according to whether the reader has successfully collected card
                details to store while offline. This DOES NOT represent the final status
                of the transaction.
            </span></p><p class="markdown-p"><span>
                To get the final transaction status once stored card data is forwarded,
                you will need to use the context ID to poll against using the Braintree
                cloud API endpoint, but there are a few
                </span><a href="/braintree/in-person/guides/offline-transactions/#offline-transaction-rules"><span>rules</span></a><span>
                to keep in mind when building this logic.
            </span></p><h3 id="checking-a-charge-status-example" class="test_h3 markdown-h3"><span>Checking a Charge Status Example:</span><a class="icon icon--link hash-link" href="#checking-a-charge-status-example" aria-label="Checking a Charge Status Example:"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                                As of
                                </span><a href="/braintree/in-person/reference/app-version-release-notes/#version530"><span>firmware version 5.3.0</span></a><span>, we support retrieving
                                </span><code><span>bin,brandCode,applicationIdentifier</span></code><span>
                                API fields for an offline transaction node query.
                            </span></span></div></div></p></div></div></div><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Query</li><li class="styles_tab_list_item">Sample API Response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">query {
              node(id: {{context_id}}) {
              ... on RequestChargeInStoreContext {
                      id
                      status
                      transaction {
                          createdAt
                          status
                          amount {
                              value
                              currencyCode
                          }
                          paymentMethodSnapshot {
                              ...on CreditCardDetails {
                                  origin {
                                     details {
                                     ... on EmvCardOriginDetails {
                                           applicationIdentifier
                                       }
                                     }
                                   }
                                  last4
                                  expirationMonth
                                  expirationYear
                                  cardholderName
                                  bin
                                  brandCode
                              }
                          }
                      }
                  }
              }
          }</code></pre></div></div><h3 id="checking-a-refund-status-example" class="test_h3 markdown-h3"><span>Checking a Refund Status Example:</span><a class="icon icon--link hash-link" href="#checking-a-refund-status-example" aria-label="Checking a Refund Status Example:"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Query</li><li class="styles_tab_list_item">Sample API response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">query ID($transactionId: ID!) {
              node(id: $transactionId) {
                  ... on RequestRefundInStoreContext {
                      id
                      status
                      refund {
                          createdAt
                          status
                          amount {
                              value
                              currencyCode
                          }
                          orderId
                          paymentMethodSnapshot {
                              ...on CreditCardDetails {
                                  origin {
                                     details {
                                     ... on EmvCardOriginDetails {
                                           applicationIdentifier
                                       }
                                     }
                                   }
                                  last4
                                  expirationMonth
                                  expirationYear
                                  cardholderName
                                  bin
                                  brandCode
                              }
                          }
                          merchantAccountId
                      }
                  }
                  ... on RequestRefundInStoreContext {
                      __typename
                      id
                      status
                      refund {
                          amount {
                              value
                          }
                          createdAt
                          orderId
                          status
                          merchantAccountId
                      }    
                  }
              }
          }</code></pre></div></div><h2 id="cancelling-a-charge" class="test_h2 markdown-h2"><span>Cancelling a Charge</span><a class="icon icon--link hash-link" href="#cancelling-a-charge" aria-label="Cancelling a Charge"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
                If you need to stop a transaction from being paid while the reader is
                activated and requesting payment, you can
                </span><a href="/braintree/graphql/reference/#Mutation--requestCancelFromInStoreReader"><span>cancel</span></a><span>
                the
                </span><code><span>InStoreContext</span></code><span>. Cancelling an
                </span><code><span>InStoreContext</span></code><span>
                places the reader back into
                </span><strong><span>idle mode </span></strong><span>and returns you to the PayPal-branded
                screensaver.
            </span></p><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Mutation</li><li class="styles_tab_list_item">GraphQL Variables</li><li class="styles_tab_list_item">Sample API Response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">mutation RequestCancelFromInStoreReader($input: RequestCancelFromInStoreReaderInput!) {
              requestCancelFromInStoreReader(input: $input) {
                  clientMutationId
                  id
                  status
              }
          }</code></pre></div></div><h2 id="offline-transaction-rules" class="test_h2 markdown-h2"><span>Offline Transaction Rules</span><a class="icon icon--link hash-link" href="#offline-transaction-rules" aria-label="Offline Transaction Rules"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
                This section outlines the logical rules to keep in mind as you build your
                offline processing flow.
            </span></p><ul class="list list--disc"><li><div><p class="markdown-p"><span>
                            The reader can store offline transactions in its memory for
                            </span><strong><span>up to 5 days</span></strong><span>, after which the stored transactions
                            will be erased. This has to do with card scheme rules for token
                            management.
                        </span></p></div></li><li><div><p class="markdown-p"><span>
                            The reader will attempt to reconnect to the network every few
                            seconds when its in an offline state, and once reconnected it will
                            automatically upload all stored transactions to the Braintree
                            Platform.
                        </span></p></div></li><li><div><p class="markdown-p"><span>
                            Once a stored offline transaction is successfully uploaded to the
                            Braintree Platform, the context ID of that transaction will be
                            </span><strong><span>available for query for 24 hours</span></strong><span>, after which it
                            will be erased. See
                            </span><a href="/braintree/in-person/guides/offline-transactions/#offline-transaction-reconciliation"><span>offline transaction reconciliation</span></a><span>.
                        </span></p></div></li><li><div><p class="markdown-p"><span>
                            A single reader can store up to approximately 1,000 transactions in
                            a given offline session without uploading to the Braintree Platform.
                        </span></p></div></li><li><div><p class="markdown-p"><span>
                            All
                            </span><strong><span>API inputs must be correct</span></strong><span> for offline
                            transactions, otherwise the context will stay in a "PROCESSING"
                            status until the context expires after 7 days.
                        </span></p></div></li></ul><h2 id="offline-transaction-reconciliation" class="test_h2 markdown-h2"><span>Offline Transaction Reconciliation</span><a class="icon icon--link hash-link" href="#offline-transaction-reconciliation" aria-label="Offline Transaction Reconciliation"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
                It is important to reconcile your offline transactions every day to ensure
                that the final transaction status (once forwarded) is known by the POS.
                This helps to ensure that your POS remains in sync with the actual
                transaction status given by the card issuer. To do this you will need to
                use the context ID from the offline transaction and poll against it using
                the Braintree Cloud API endpoint. This should be done for every offline
                transaction
                </span><em><strong><span>at least once per day</span></strong></em><span>
                since the
                </span><em><strong><span>context ID will expire 24 hours</span></strong></em><span>
                after the stored transaction data is uploaded to the Braintree Platform.
                When you get the API response from your context ID polling make sure to
                store the transaction ID and the transaction status in your POS database.
            </span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                                Braintree Sandbox Cloud API Endpoint:
                                </span><a href="https://payments.sandbox.braintree-api.com/graphql"><span>https://payments.sandbox.braintree-api.com/graphql</span></a></span></div></div></p></div></div></div><p class="markdown-p"><span>
                It is also important to note that if you use a unique
                </span><code><span>orderId</span></code><span>
                reference, you can also query the Braintree platform using the
                </span><code><span>orderId</span></code><span>
                to get the transaction results and other transaction details. The
                </span><code><span>orderId</span></code><span>
                does not expire.
            </span></p><p class="markdown-p"><span>
                You may want to build your own retry logic to handle an offline
                transaction being declined once forwarded. To do this, you can request to
                </span><a href="/braintree/in-person/guides/vaulting-and-customers/#vaulting-a-card-with-a-transaction"><span>vault a payment method</span></a><span>
                during your offline charge request. This will allow you to retrieve the
                </span><a href="/braintree/graphql/reference/#Object--PaymentMethod"><code><span>paymentMethodId</span></code></a><span>
                token after the transaction is forwarded. You may perform a subsequent
                card-not-present
                </span><a href="/braintree/graphql/reference/#Mutation--authorizePaymentMethod"><span>authorization</span></a><span>
                or
                </span><a href="/braintree/graphql/reference/#Mutation--chargePaymentMethod"><span>charge</span></a><span>
                against this token to recover funds for the offline transaction originally
                declined.
            </span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                                The ability to vault a payment method with a charge during an
                                offline transaction was added in
                                </span><a href="/braintree/in-person/reference/app-version-release-notes/#version510"><span>firmware version 5.1.0</span></a><span>.
                            </span></span></div></div></p></div></div></div><h2 id="which-api-calls-are-supported-offline" class="test_h2 markdown-h2"><span>Which API calls are supported Offline?</span><a class="icon icon--link hash-link" href="#which-api-calls-are-supported-offline" aria-label="Which API calls are supported Offline?"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
                While we are continuously adding functionality to our offline processing
                offering, there are a limited number of reader interactions that are
                supported in an offline state. See below for the full list:
            </span></p><ul class="list list--disc"><li><div><p class="markdown-p"><a href="/braintree/in-person/guides/offline-transactions/#initiating-an-offline-transaction"><span>Initiate a charge</span></a></p></div></li><li><div><p class="markdown-p"><a href="/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/"><span>Initiate an authorization</span></a></p></div></li><li><div><p class="markdown-p"><span>Initiate a refund</span></p></div></li><li><div><p class="markdown-p"><a href="/braintree/in-person/guides/display-information/#request-text-display"><span>Request text display</span></a></p></div></li><li><div><p class="markdown-p"><a href="/braintree/in-person/guides/display-information/#request-line-item-display"><span>Request line item display</span></a></p></div></li><li><div><p class="markdown-p"><a href="/braintree/in-person/guides/receipt-printing-api/"><span>Receipt Printing API</span></a></p></div></li></ul><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                                Note that for these flows to work offline, your requests must be
                                sent to the API endpoint on the reader (IP address : port
                                /graphql) as shown
                                </span><a href="/braintree/in-person/guides/offline-transactions/#initiating-an-offline-transaction"><span>here</span></a></span></div></div></p></div></div></div></div><code></code><div class="nextPreviousButtonWrapper"><div class="nextLink-bt"><a class="nextLink-link" href="/braintree/in-person/guides/graphql-error-handling/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0,0,24,24" width="24" fill="none" height="24"><path d="M9.707,18.7033C10.0975,18.3128,10.0975,17.6796,9.707,17.2891L5.414,12.9961H21C21.5523,12.9961,22,12.5484,22,11.9961C22,11.4438,21.5523,10.9961,21,10.9961H5.414L9.707,6.7032C10.0975,6.31268,10.0975,5.67951,9.707,5.28899C9.31647,4.89846,8.68333,4.89846,8.2928,5.28899L2.2998,11.282C2.29375,11.288,2.28777,11.2941,2.28179,11.3003C2.10735,11.4803,2,11.7257,2,11.9961C2,12.2654,2.10637,12.5097,2.27947,12.6895C2.28441,12.6948,2.2895,12.7,2.29457,12.7052L2.29713,12.7077L2.2998,12.7103L8.29273,18.7033C8.68326,19.0938,9.31641,19.0938,9.707,18.7033Z" fill="#0070E0"></path></svg><span><span>GraphQL Error Handling</span></span></a></div><div class="nextLink-bt"><a class="nextLink-link" href="/braintree/in-person/guides/additional-api-calls/"><span><span>Additional API Calls</span></span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0,0,24,24" width="24" fill="none" height="24"><path d="M14.2931,18.7033C13.9026,18.3128,13.9026,17.6796,14.2931,17.2891L18.5861,12.9961H3C2.44772,12.9961,2,12.5484,2,11.9961C2,11.4438,2.44772,10.9961,3,10.9961H18.5861L14.2931,6.7032C13.9026,6.31268,13.9026,5.67951,14.2931,5.28899C14.6837,4.89846,15.3168,4.89846,15.7073,5.28899L21.7003,11.282C21.7064,11.288,21.7123,11.2941,21.7182,11.3003C21.8926,11.4803,22,11.7257,22,11.9961C22,12.2654,21.8936,12.5097,21.7205,12.6895C21.7156,12.6948,21.7105,12.7,21.7054,12.7052L21.7029,12.7077L21.7003,12.7103L15.7074,18.7033C15.3168,19.0938,14.6837,19.0938,14.2931,18.7033Z" fill="#0070E0"></path></svg></a></div></div></main></div><nav class="right-nav-container"><h4 class="right-nav-title">On this page</h4><ul class="right-nav-list"></ul></nav></div></article></main><div><footer class="footer wrap nocontent " data-track-event-context="footer"><div class="footer-section footer-section--light"><div class="footer-section-inner"><div class="footer-cta-section"><div class="footer-section-inner--right-padding footer-cta-icon"><svg width="25" height="29" viewBox="0 0 25 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 15.5C13.5908 15.4983 15.1159 14.8656 16.2408 13.7408C17.3656 12.6159 17.9983 11.0908 18 9.5H15C15 10.2956 14.6839 11.0587 14.1213 11.6213C13.5587 12.1839 12.7956 12.5 12 12.5C11.2044 12.5 10.4413 12.1839 9.87868 11.6213C9.31607 11.0587 9 10.2956 9 9.5H6C6.0017 11.0908 6.63438 12.6159 7.75923 13.7408C8.88408 14.8656 10.4092 15.4983 12 15.5V15.5Z" fill="#202020"></path><path d="M6.25 28.625H10.9375L17.1875 22.375H25V0.5H0V22.375H6.25V28.625ZM3.125 19.25V3.625H21.875V19.25H15.8931L14.9778 20.1653L9.64308 25.5H9.375V19.25H3.125Z" fill="#202020"></path></svg></div><div class="footer-section-inner--right-padding"><h5>Get help from a human</h5><p>Submit a request for help with your PayPal Braintree sandbox or production account.</p><a class="button button--secondary" data-track-event-properties="project=journey&amp;docs,context=footer,component=button,action=click,descriptor=get help,intent=view help contact form,origin=support articles,href=https://developer.paypal.com/braintree/help" pa-marked="1" href="/braintree/help">Get Help</a></div></div></div></div><div class="footer-section_wrapper"></div></footer></div></div></div><script nonce="Hhkt2cggZxUKPNTfrBuQ9uYmBREmv1smTdADz4fuOreVNWcf">
            window.process = globalThis.process = {
              env: {
                NODE_ENV: "development" // or "production", depending on your environment
              }
            };
          </script>
      </script><script src="https://www.paypalobjects.com/pa/js/min/pa.js"></script><div data-testid="cookie_banner"><link rel="stylesheet" type="text/css" href="https://www.paypalobjects.com/ncp-ui-web/consumer-home/8.2.3-legacy-v2/consent.min.css"/><style nonce="Hhkt2cggZxUKPNTfrBuQ9uYmBREmv1smTdADz4fuOreVNWcf">@keyframes slideInFromBottom { 0% { transform: translateY(100%); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } } .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 15.125em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 15.125em; } .CookieBanner_rtl { direction: rtl; } .CookieBanner_container { box-sizing: border-box; animation: 1s ease-in 0s 1 slideInFromBottom; width: 100%; z-index: 1051; padding: 0 1rem; display: flex; justify-content: center; position: fixed; bottom: 1rem; left:0; } .CookieBanner_container * { box-sizing: border-box; } .CookieBanner_container_wrapper { max-width: 80rem; width: 100%; display: flex; padding: 1rem; border-radius: 1rem; background-color: #f0f2f9; box-shadow: 0px 0px 17px 0px rgba(0, 0, 0, 0.01), 0px 0px 15px 0px rgba(0, 0, 0, 0.01), 0px 0px 13px 0px rgba(0, 0, 0, 0.02), 0px -10px 10px 0px rgba(0, 0, 0, 0.03), 0px 0px 5px 0px rgba(0, 0, 0, 0.04); } .CookieBanner_content_wrapper { display: flex; flex-direction: column; } #manageCookiesLink { color: #0070e0; font-weight: 500; text-decoration: underline; font-family: PayPalOpen-Medium, "Helvetica Neue", Arial, sans-serif; } .CookieContent_wrapper { margin-block-end: 1rem; margin-inline: 0.5rem; } .CookieBanner_text { margin: 0; } .CookieBanner_buttonGroup { display: flex; } button.acceptButton { margin-inline-end: 0.25rem; } button.declineButton { margin-inline-start: 0.25rem; }  .close_icon { color: #686a6d; } @media only screen and (min-width: 752px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 10.25em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 10.25em; } .CookieBanner_container_wrapper { align-items: center; padding-block: 1.5rem; } .CookieBanner_content_wrapper { flex-direction: row; align-items: center; } .CookieContent_wrapper { margin-block-end: 0; margin-inline: 0.75rem; flex: 3; } .CookieBanner_buttonGroup { padding-inline: 1.5rem; } button.acceptButton { margin-inline-end: 0.5rem; } button.declineButton { margin-inline-start: 0.5rem; } } @media only screen and (min-width: 1024px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 7.75em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 7.75em; } } @media only screen and (min-width: 1152px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 7em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 7em; } }</style><div class="cdn-consent-css"><div class="ppui-theme theme_ppui_theme_tokens__1ozbsv90"><div id="ccpaCookieBanner" class="CookieBanner_container"><div class="CookieBanner_container_wrapper"><span class="styles_icon_svg__1dkwumb7 styles_icon_size_md__1dkwumb4" data-ppui-info=""><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em"><path d="M18.822 5.052A9.682 9.682 0 0 0 12 2.25h-.1A9.75 9.75 0 0 0 2.25 12c0 4.031 2.492 7.412 6.502 8.828A3 3 0 0 0 12.75 18a1.5 1.5 0 0 1 1.5-1.5h4.332a2.982 2.982 0 0 0 2.925-2.332c.168-.739.25-1.494.243-2.25a9.685 9.685 0 0 0-2.928-6.866zm1.219 8.785A1.49 1.49 0 0 1 18.582 15H14.25a3 3 0 0 0-3 3 1.5 1.5 0 0 1-1.998 1.413C5.858 18.216 3.75 15.375 3.75 12a8.25 8.25 0 0 1 8.165-8.25h.084a8.283 8.283 0 0 1 8.25 8.18 8.334 8.334 0 0 1-.204 1.908h-.004zm-6.916-6.712a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zM9 9.375a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zm0 5.25a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zm8.25-5.25a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0z"></path></svg></span><div class="CookieBanner_content_wrapper"><div id="ccpaCookieContent_wrapper" class="CookieContent_wrapper"><h4 class="styles_text-title_medium__awycp4g CookieBanner_text" data-ppui-info="title-text" id="cookieTitle">If you accept cookies, well use them to improve and customize your experience and enable our partners to show you personalized PayPal ads when you visit other sites. <a id="manageCookiesLink" href="https://www.paypal.com/myaccount/privacy/cookiePrefs?locale=en_US">Manage cookies and learn more</a></h4></div><div class="CookieBanner_buttonGroup"><button class="styles_button_base__6ka6j61 styles_button_size_lg__6ka6j62 styles_button_overlay__6ka6j69 styles_button_full_width__6ka6j6l acceptButton" data-ppui-info="" id="acceptAllButton" tab-index="0">Accept</button><button class="styles_button_base__6ka6j61 styles_button_size_lg__6ka6j62 styles_button_overlay__6ka6j69 styles_button_full_width__6ka6j6l declineButton" data-ppui-info="" id="bannerDeclineButton" tab-index="0">Decline</button></div></div><button data-ppui-info="" class="styles_icon-button_base__134l21c8 styles_icon-button_size_lg__134l21c7 styles_icon-button_size__134l21c4 styles_icon-button_tertiary__134l21cd close_icon" type="button" id="bannerCloseButton"><span class="styles_icon_svg__1dkwumb7 styles_icon_size_sm__1dkwumb3 styles_icon-button_icon__134l21cf" data-ppui-info="" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em"><path d="M19.28 18.22a.751.751 0 0 1-1.06 1.06L12 13.06l-6.22 6.22a.75.75 0 0 1-1.06-1.06L10.94 12 4.72 5.78a.75.75 0 1 1 1.06-1.06L12 10.94l6.22-6.22a.75.75 0 1 1 1.06 1.06L13.06 12l6.22 6.22z"></path></svg></span><span class="styles_screenreader__1p05eo10">Close</span></button></div></div></div></div><script nonce="Hhkt2cggZxUKPNTfrBuQ9uYmBREmv1smTdADz4fuOreVNWcf">(function () { var bannerFptiData = {}; function getFptiReqData () { let fptiReqData = window && window.fpti && window.PAYPAL && window.PAYPAL.analytics && window.PAYPAL.analytics.instance && window.PAYPAL.analytics.instance.options && window.PAYPAL.analytics.instance.options.request && window.PAYPAL.analytics.instance.options.request.data; if (fptiReqData) {  bannerFptiData = { api_name: 'cookieBanner', page:  'main:privacy:policy:ccpa', pgrp:  'main:privacy:policy', displaypage: window.fpti.pgrp, ppage: 'privacy_banner', bannertype: 'cookiebanner', ccpg: 'US', flag: 'ccpa', bannerversion: 'v14', bannersource: 'ConsentNodeServ', bannervariant: '', xe: '110041,109128,105410,105409,111623,111624,109059,111560,111622,110042,104407', xt: '148501,143659,123956,123954,158942,158944,143369,161854,158940,148504,119038', eligibility_reason: 'true', is_native: 'false', cookie_disabled: cookieDisabled(), reason_to_hide: reasonToHideBanner(), comp: 'consentnodeserv', space_key: 'SKSVPL', erpg: '' }; if(true){ bannerFptiData = {   ...bannerFptiData, userstate : 'NOT FOUND', usercountry : 'US', stateaccuracy : '0', countryaccuracy : '99', loggedin : 'false' } } } return fptiReqData; } function getFptiPage () { return getFptiReqData() && getFptiReqData().page; } function setSessionStorage(key) { try { sessionStorage.setItem(key, true); } catch (e) { console.log('error on setting sessioStorage', e); } } function isBannerClosed () { let is_banner_closed = false; try{ if(sessionStorage.getItem("isBannerClosed") || sessionStorage.getItem("isUserAccepted") || sessionStorage.getItem("isInvisibleBanner")){ is_banner_closed = true; } } catch (e){ is_banner_closed = false; } return is_banner_closed || (false && true && (navigator && !navigator.cookieEnabled)); } function reasonToHideBanner(){ let reason = ''; try { if (false && true && (navigator && !navigator.cookieEnabled)){ reason = 'cookies are disabled'; } else if(sessionStorage.getItem("isUserAccepted")){ reason = 'User accepted or declined'; } else if(sessionStorage.getItem("isBannerClosed")){ reason = 'Banner Closed'; } else if(sessionStorage.getItem("isInvisibleBanner")){ reason = 'Invisible banner loaded'; } } catch (error) { reason=''; } return reason; } function cookieFilteringRequest(eventSource) { const queryParamters = { eventSource, isQueryEncoded: true, page: '', component: '', eventSourceUrl: '', expireCookies: true }; if (window) { queryParamters.page = window.fpti && window.fpti.page || window.location && window.location.href; queryParamters.component = window.fpti && window.fpti.comp; const eventSourceUrl = window.location && window.location.href; queryParamters.eventSourceUrl = eventSourceUrl && eventSourceUrl.split("?")[0]; } const xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP'); let queryString = ''; Object.keys(queryParamters).forEach((key, index) => queryString += (index > 0 ? '&' : '') + key + "=" + btoa(queryParamters[key])); const endPoint = "https://www.paypal.com/myaccount/privacy/cookieprefs/cookies?" + queryString; xhr.open('GET', endPoint); xhr.withCredentials = true; xhr.onreadystatechange = function () { if (xhr.readyState > 3 && xhr.status === 200) { try { if (xhr?.response && xhr.response != "OK") { const invalidCookies = JSON.parse(xhr?.response)?.invalidCookies; if (invalidCookies.length > 0) { const hostName = document.location.hostname; let subDomains = [hostName]; const parts = hostName.split('.'); parts.forEach((e, i) => {  if(e !== "www"){ subDomains.push("." + parts.slice(i).join('.')); } }); subDomains.pop(); invalidCookies.forEach(cookie => { document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=.paypal.com'; document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;'; subDomains.forEach(domain => { document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=' + domain; }) }) } } } catch (error) { } } }; xhr.setRequestHeader('Accept', 'application/json'); xhr.setRequestHeader('Content-Type', 'application/json'); xhr.send(); }; function cookieFiltering(eventSource="cookieBanner"){ if(!true || false){ return; } cookieFilteringRequest(eventSource); } function postAjax(isFptiDataAvailable , cookieObj ) { if(!isFptiDataAvailable && getFptiReqData()){  isFptiDataAvailable = true; } if(isFptiDataAvailable){ acceptDeclineFptiEvents(cookieObj); } var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP"); var endPoint = cookieObj.endPointPrefix + cookieObj.endPointSuffix; xhr.open('GET',endPoint); xhr.withCredentials = true; xhr.onreadystatechange = function() { if (xhr.readyState > 3 && xhr.status == 200) { cookieFiltering(cookieObj.eventSource); } }; xhr.setRequestHeader('Accept', 'application/json','Content-Type', 'application/json'); xhr.send(null); return xhr; }; function fptiRecordClick(bannerData){ window.PAYPAL.analytics.Analytics.prototype.recordClick({ data: {...bannerData, product:"cookieBanner"}}); }; function acceptDeclineFptiEvents(cookieObj){ var trackingPageName = '' || getFptiPage() || document.title; var cookiesText = cookieObj.cookiesText; var cookiePrefs = cookieObj.cookiePrefs; var eventName = cookieObj.eventName; var acEventName = cookieObj.acEventName; var bannerData = { e: 'cl', link: cookiesText, pglk: trackingPageName + '|' + cookiesText, pgln: trackingPageName + '|' + cookiesText, c_prefs: cookiePrefs, opsel: cookiePrefs + ',US', csource: 'cookie', event_name: eventName }; for(var key in bannerFptiData){ bannerData[key] = bannerFptiData[key]; }; fptiRecordClick(bannerData); var winFptiData = JSON.parse(JSON.stringify((window && window.fpti) || {})); var updatedFptiData = { cookiebannerhidden: 'true', c_prefs: cookiePrefs, event_name: acEventName }; for(var key in bannerFptiData){ updatedFptiData[key] = bannerFptiData[key]; }; for(var key in updatedFptiData){ winFptiData[key] = updatedFptiData[key]; }; fptiLogActivity(winFptiData); }; function cookieObjSetup (type) { const cookieObjValue = { "accept" : { endPointSuffix : '&type=explicit_banner&country=US&policy=ccpa&version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=true&performance=true&functional=true', eventSource : 'acceptCookieBanner', cookiesText : 'acceptcookies', cookiePrefs : 'T=1,P=1,F=1,type=explicit_banner', eventName : 'cookie_banner_accept_clicked', acEventName : 'cookie_banner_accepted' }, "decline" : { endPointSuffix : '&type=explicit_banner&country=US&policy=ccpa&version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=false&performance=false&functional=false', eventSource : 'declineCookieBanner', cookiesText : 'declinecookies', cookiePrefs : 'T=0,P=0,F=0,type=explicit_banner', eventName : 'cookie_banner_decline_clicked', acEventName : 'cookie_banner_declined' }, "close" : { endPointSuffix : '&type=explicit_close&country=US&policy=ccpa&version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=true&performance=true&functional=true', eventSource : 'closeCookieBanner', cookiesText : 'closecookies', cookiePrefs : 'T=1,P=1,F=1,type=explicit_close', eventName : 'cookie_banner_close_clicked', acEventName : 'cookie_banner_closed' } }; return cookieObjValue[type]; } function bindGdprEvents () { var acceptAllButton = document.getElementById('acceptAllButton'); var bannerDeclineButton = document.getElementById('bannerDeclineButton'); var bannerCloseButton = document.getElementById('bannerCloseButton'); var usBannerCloseButton = document.getElementById('usBannerCloseButton'); var manageCookiesLink = document.getElementById('manageCookiesLink'); var cookieStatement = document.getElementById('cookieStatement'); var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); var cookieBannerAcceptAll = document.getElementsByClassName("ccpaCookieBanner-acceptedAll"); var trackingPageName = '' || getFptiPage() || document.title; if (manageCookiesLink) { manageCookiesLink.onclick = function() { var manageCookiesData = { e: 'cl', link: 'managecookies', pglk: trackingPageName + '|managecookies', pgln: trackingPageName + '|managecookies', event_name: 'cookie_banner_manage_cookies_clicked' }; for(var key in bannerFptiData){ manageCookiesData[key] = bannerFptiData[key]; }; fptiRecordClick(manageCookiesData); }; } if (cookieStatement) { cookieStatement.onclick = function() { var cookieStatementData = { e: 'cl', link: 'cookieStmtLink', pglk: trackingPageName + '|cookieStmtLink', pgln: trackingPageName + '|cookieStmtLink', event_name: 'cookie_banner_cookie_statement_clicked' }; for(var key in bannerFptiData){ cookieStatementData[key] = bannerFptiData[key]; }; fptiRecordClick(cookieStatementData); }; } if(bannerCloseButton && cookieBanner && cookieLanguage){ bannerCloseButton.onclick = function() { hideBanner(); setSessionStorage('isBannerClosed'); var closebannerFptiData = { e: 'cl', link: 'closeBanner', pglk: trackingPageName + '|closeBanner', pgln: trackingPageName + '|closeBanner', event_name: 'cookie_banner_close_clicked' }; for(var key in bannerFptiData){ closebannerFptiData[key] = bannerFptiData[key]; }; fptiRecordClick(closebannerFptiData); }; } if (acceptAllButton && cookieBanner && cookieLanguage) { acceptAllButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('accept')); }; } if (bannerDeclineButton && cookieBanner && cookieLanguage) { bannerDeclineButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('decline')); }; } if (usBannerCloseButton && cookieBanner && cookieLanguage) { usBannerCloseButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('close')); }; } window.hideGdprBanner = function () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); if (cookieBannerUi && cookieBannerUi.className.indexOf('ccpaHideCookieBannerMobile') === -1) { cookieBannerUi.className += " ccpaHideCookieBannerMobile"; } }; window.showGdprBanner = function () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); if (cookieBannerUi) { cookieBannerUi.className = cookieBannerUi.className.replace("ccpaHideCookieBannerMobile",""); } }; document.body.addEventListener("focus", function (event) { if (event.target.type === 'text' || event.target.type === 'number' || event.target.type === 'password' || event.target.type === 'email' || event.target.type === 'select-one') { window.hideGdprBanner(); } }, true); } function adjustPaddingTop(){ var cookieBannerAcceptAll = document.getElementsByClassName("ccpaCookieBanner-acceptedAll"); if(cookieBannerAcceptAll.length > 0){ var cookieBanner = document.getElementById('ccpaCookieBanner'); var bannerHeight = cookieBanner ? cookieBanner.clientHeight : 0; if(cookieBannerAcceptAll && cookieBannerAcceptAll[0] && bannerHeight){ cookieBannerAcceptAll[0].style.paddingTop = bannerHeight/16 +'em'; } } }; var isPaddingBottomAdded = false, bannerPaddingBottom = ""; function adjustPaddingBottom(addListener){ if (undefined || !false) { return; } function adjustPaddingBottomEvent() { var cookieBannerAcceptAll = document.getElementsByClassName("ccpaCookieBanner-acceptedAll"); if(cookieBannerAcceptAll.length > 0){ var bodyPaddingBottom = cookieBannerAcceptAll[0].style.paddingBottom; var cookieBanner = document.getElementById('ccpaCookieBanner'); if(cookieBannerAcceptAll && cookieBannerAcceptAll[0] && cookieBanner.style.display != 'none') { if (bodyPaddingBottom === "" || (isPaddingBottomAdded && bannerPaddingBottom === bodyPaddingBottom)) { var cookieBannerContainer = document.getElementsByClassName('ccpaCookieBanner_container'); var bannerBottomHeight = cookieBannerContainer.length > 0 ? parseInt(window.getComputedStyle(cookieBannerContainer[0]).bottom.replace("px", "")) : 0; var bannerHeight = cookieBanner ? cookieBanner.clientHeight : 0; bannerPaddingBottom = ((bannerHeight + bannerBottomHeight) / 16) + 'em'; cookieBannerAcceptAll[0].style.paddingBottom = bannerPaddingBottom; isPaddingBottomAdded = true; } else if (isPaddingBottomAdded && bannerPaddingBottom !== bodyPaddingBottom) { isPaddingBottomAdded = false; } } } } if (addListener) { adjustPaddingBottomEvent(); window.addEventListener('resize', adjustPaddingBottomEvent);  } else { var cookieBannerAcceptAll = document.getElementsByClassName("ccpaCookieBanner-acceptedAll"); if(cookieBannerAcceptAll && cookieBannerAcceptAll[0]){ window.removeEventListener('resize', adjustPaddingBottomEvent); adjustPaddingBottomEvent(); if (isPaddingBottomAdded && cookieBannerAcceptAll[0].style.paddingBottom === bannerPaddingBottom) { cookieBannerAcceptAll[0].style.removeProperty('padding-bottom'); } } } }; window.bindGdprEvents = bindGdprEvents; function cookieDisabled() { if (navigator.cookieEnabled === false) return "true"; else if (navigator.cookieEnabled === true) return "false"; else return "undefined"; }; function fptiLogActivity(winFptiData){ window.PAYPAL.analytics.Analytics.prototype.logActivity({...winFptiData, product:"cookieBanner"}); }; function gdprSetup () { var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); var manageLink = document.getElementById('manageCookiesLink'); var acceptAllLink = document.getElementById('acceptAllButton'); var trackingPageName = '' || getFptiPage() || document.title; if(!isBannerClosed()){ document.body.className = document.body.className += " ccpaCookieBanner-acceptedAll"; if(undefined){ adjustPaddingTop(); window.addEventListener('resize', adjustPaddingTop);   document.body.className = document.body.className += " top-cookie-banner-enabled";    } } var pageName = trackingPageName || getFptiPage() || document.title; var winFptiData = JSON.parse(JSON.stringify((window && window.fpti) || {})); if(false){ bannerFptiData.isNativeBannerHidden = true; } for(var key in bannerFptiData){ winFptiData[key] = bannerFptiData[key]; }; winFptiData['event_name'] = 'cookie_banner_shown'; fptiLogActivity(winFptiData); if (manageLink) { manageLink.setAttribute('pagename', (pageName + '|managecookies')); } if (acceptAllLink) { acceptAllLink.setAttribute('pagename', (pageName + '|acceptcookies')); } bindGdprEvents(); }; function hideBanner() { var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); if(cookieLanguage && cookieBanner){ cookieLanguage.style.display = 'none'; cookieBanner.style.display = 'none'; }else { return false; } window.removeEventListener('resize', adjustPaddingTop); var cookieBannerAcceptAll = document.getElementsByClassName("ccpaCookieBanner-acceptedAll"); if(cookieBannerAcceptAll && cookieBannerAcceptAll[0]){ cookieBannerAcceptAll[0].style.removeProperty('padding-top'); } document.body.className = document.body.className.replace("ccpaCookieBanner-acceptedAll",""); document.body.className = document.body.className.replace("top-cookie-banner-enabled",""); return true; } function isPageReady () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); return !!(cookieBannerUi && getFptiReqData()); } function enableFocusEvent(addListener){ if(!false || undefined){ return; } var cookieBanner = document.getElementById('ccpaCookieBanner'); function focusIn(e) { if(cookieBanner && cookieBanner.style.display != 'none'){ var activeElement = document.activeElement; if(((activeElement.getBoundingClientRect().bottom) > (cookieBanner.getBoundingClientRect().top)) && !activeElement.parentElement.nodeName.includes("UL")){ activeElement.scrollIntoView({block: 'center'}); } }else{ document.removeEventListener("focusin", focusIn); } } if(addListener){ document.addEventListener("focusin",focusIn); } } function enableEvents(enable){ adjustPaddingBottom(enable); enableFocusEvent(enable); } var maxRetries = 34, bannerhidden=false; function triggerBanner() { if (isPageReady()) { cookieFiltering('pageLoad'); if(true){setTimeout(function(){ cookieFiltering('afterPageLoad')}, 3000);} if (isBannerClosed()) { hideBanner(); } if(false){ setSessionStorage('isInvisibleBanner'); } gdprSetup(); } else { if (isBannerClosed() && !bannerhidden ) { bannerhidden=hideBanner(); } if (maxRetries-- > 0) { setTimeout(triggerBanner, 150); } else { cookieFiltering('pageLoad'); if(true){setTimeout(function(){ cookieFiltering('afterPageLoad')}, 3000);} if (isBannerClosed()) { hideBanner(); } if(!isBannerClosed() && document.getElementById('ccpaCookieBanner') && !document.body.className.includes("ccpaCookieBanner-acceptedAll")){ document.body.className = document.body.className += " ccpaCookieBanner-acceptedAll"; if(undefined){ adjustPaddingTop(); window.addEventListener('resize', adjustPaddingTop);   document.body.className = document.body.className += " top-cookie-banner-enabled"; } } var acceptAllButton = document.getElementById('acceptAllButton'); var bannerDeclineButton = document.getElementById('bannerDeclineButton'); var bannerCloseButton = document.getElementById('bannerCloseButton'); var usBannerCloseButton = document.getElementById('usBannerCloseButton'); var cookieBanner = document.getElementById('ccpaCookieBanner'); if ( acceptAllButton ) { acceptAllButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('accept')); }; } if ( bannerDeclineButton ) { bannerDeclineButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('decline')); }; } if ( usBannerCloseButton ) { usBannerCloseButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('close')); }; } if ( bannerCloseButton ) { bannerCloseButton.onclick = function() { hideBanner(); setSessionStorage('isBannerClosed'); } } if(false){ setSessionStorage('isInvisibleBanner'); } } } } triggerBanner(); })();</script></div><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/entry.client-I74HTVVJ.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-DWXUS3OJ.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-L5PH23AQ.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-J6FIGYWP.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-J6PGNH2U.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-B6RWMYIW.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-JWVH3LXD.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-6U42WDX3.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-YVSNDZ53.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-J2GE73YK.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-5BT6OS7I.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-23AVEWBC.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-RNL33CPM.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-KHGBJ4DZ.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-MV6WZZTV.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-MGQUUIAL.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-4XUXT72V.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-7GGXQ4CC.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-ARCSJZ66.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-HUHQJMXM.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-V5GCSBYI.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-RTF7FTLH.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-Y6FV67CR.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-SDOOWKWW.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-ZAEIBDVB.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-H5OFEOJY.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-AJAXRUVI.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-XQKKFWZR.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-MZ7A5LCT.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-M3EUWJZ6.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-AGQ7GS2C.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-V4QDYNUE.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-G6HOB2YT.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-TIBAJGV5.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/root-HIAAUWNH.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-RXSCWH3H.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-IFX6OXXY.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-QPO3S2DS.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-WCFLXRHO.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-TL4Q62UH.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/routes/in-person-BCFKGM3O.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-SQDYALD2.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-UQGSNUDM.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/routes/in-person/$-EGOLLNAC.js"/><script nonce="Hhkt2cggZxUKPNTfrBuQ9uYmBREmv1smTdADz4fuOreVNWcf">window.__remixContext = {"url":"/braintree/in-person/guides/offline-transactions/","state":{"loaderData":{"root":{"isLoggedIn":false,"_csrf":"S563UbSDfH35gSGoxCuFv5MOWIYMGCB2zFdmo=","searchConfig":{"appId":"^@KGPPiC^4KSTT85","aKey":"GROm[oD;FA\\0OoH=Q\\2XhWaFQf2[hHqRRShLBK`FhH\u003c","BTDOCS_INDEX":"BTDOCS_BTDOCSNODEWEB"},"analytics":{"appName":"btdocsnodeweb","stock":"UA-37159521-1","exp":"UA-37159521-8"},"nonce":"Hhkt2cggZxUKPNTfrBuQ9uYmBREmv1smTdADz4fuOreVNWcf","cookieBannerInfo":{"css":"\u003clink rel=\"stylesheet\" type=\"text/css\" href=\"https://www.paypalobjects.com/ncp-ui-web/consumer-home/8.2.3-legacy-v2/consent.min.css\"/\u003e\u003cstyle nonce=\"Hhkt2cggZxUKPNTfrBuQ9uYmBREmv1smTdADz4fuOreVNWcf\"\u003e@keyframes slideInFromBottom { 0% { transform: translateY(100%); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } } .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 15.125em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 15.125em; } .CookieBanner_rtl { direction: rtl; } .CookieBanner_container { box-sizing: border-box; animation: 1s ease-in 0s 1 slideInFromBottom; width: 100%; z-index: 1051; padding: 0 1rem; display: flex; justify-content: center; position: fixed; bottom: 1rem; left:0; } .CookieBanner_container * { box-sizing: border-box; } .CookieBanner_container_wrapper { max-width: 80rem; width: 100%; display: flex; padding: 1rem; border-radius: 1rem; background-color: #f0f2f9; box-shadow: 0px 0px 17px 0px rgba(0, 0, 0, 0.01), 0px 0px 15px 0px rgba(0, 0, 0, 0.01), 0px 0px 13px 0px rgba(0, 0, 0, 0.02), 0px -10px 10px 0px rgba(0, 0, 0, 0.03), 0px 0px 5px 0px rgba(0, 0, 0, 0.04); } .CookieBanner_content_wrapper { display: flex; flex-direction: column; } #manageCookiesLink { color: #0070e0; font-weight: 500; text-decoration: underline; font-family: PayPalOpen-Medium, \"Helvetica Neue\", Arial, sans-serif; } .CookieContent_wrapper { margin-block-end: 1rem; margin-inline: 0.5rem; } .CookieBanner_text { margin: 0; } .CookieBanner_buttonGroup { display: flex; } button.acceptButton { margin-inline-end: 0.25rem; } button.declineButton { margin-inline-start: 0.25rem; }  .close_icon { color: #686a6d; } @media only screen and (min-width: 752px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 10.25em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 10.25em; } .CookieBanner_container_wrapper { align-items: center; padding-block: 1.5rem; } .CookieBanner_content_wrapper { flex-direction: row; align-items: center; } .CookieContent_wrapper { margin-block-end: 0; margin-inline: 0.75rem; flex: 3; } .CookieBanner_buttonGroup { padding-inline: 1.5rem; } button.acceptButton { margin-inline-end: 0.5rem; } button.declineButton { margin-inline-start: 0.5rem; } } @media only screen and (min-width: 1024px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 7.75em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 7.75em; } } @media only screen and (min-width: 1152px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 7em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 7em; } }\u003c/style\u003e","html":"\u003cdiv class=\"cdn-consent-css\"\u003e\u003cdiv class=\"ppui-theme theme_ppui_theme_tokens__1ozbsv90\"\u003e\u003cdiv id=\"ccpaCookieBanner\" class=\"CookieBanner_container\"\u003e\u003cdiv class=\"CookieBanner_container_wrapper\"\u003e\u003cspan class=\"styles_icon_svg__1dkwumb7 styles_icon_size_md__1dkwumb4\" data-ppui-info=\"\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"1em\" height=\"1em\"\u003e\u003cpath d=\"M18.822 5.052A9.682 9.682 0 0 0 12 2.25h-.1A9.75 9.75 0 0 0 2.25 12c0 4.031 2.492 7.412 6.502 8.828A3 3 0 0 0 12.75 18a1.5 1.5 0 0 1 1.5-1.5h4.332a2.982 2.982 0 0 0 2.925-2.332c.168-.739.25-1.494.243-2.25a9.685 9.685 0 0 0-2.928-6.866zm1.219 8.785A1.49 1.49 0 0 1 18.582 15H14.25a3 3 0 0 0-3 3 1.5 1.5 0 0 1-1.998 1.413C5.858 18.216 3.75 15.375 3.75 12a8.25 8.25 0 0 1 8.165-8.25h.084a8.283 8.283 0 0 1 8.25 8.18 8.334 8.334 0 0 1-.204 1.908h-.004zm-6.916-6.712a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zM9 9.375a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zm0 5.25a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zm8.25-5.25a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e\u003cdiv class=\"CookieBanner_content_wrapper\"\u003e\u003cdiv id=\"ccpaCookieContent_wrapper\" class=\"CookieContent_wrapper\"\u003e\u003ch4 class=\"styles_text-title_medium__awycp4g CookieBanner_text\" data-ppui-info=\"title-text\" id=\"cookieTitle\"\u003eIf you accept cookies, well use them to improve and customize your experience and enable our partners to show you personalized PayPal ads when you visit other sites. \u003ca id=\"manageCookiesLink\" href=\"https://www.paypal.com/myaccount/privacy/cookiePrefs?locale=en_US\"\u003eManage cookies and learn more\u003c/a\u003e\u003c/h4\u003e\u003c/div\u003e\u003cdiv class=\"CookieBanner_buttonGroup\"\u003e\u003cbutton class=\"styles_button_base__6ka6j61 styles_button_size_lg__6ka6j62 styles_button_overlay__6ka6j69 styles_button_full_width__6ka6j6l acceptButton\" data-ppui-info=\"\" id=\"acceptAllButton\" tab-index=\"0\"\u003eAccept\u003c/button\u003e\u003cbutton class=\"styles_button_base__6ka6j61 styles_button_size_lg__6ka6j62 styles_button_overlay__6ka6j69 styles_button_full_width__6ka6j6l declineButton\" data-ppui-info=\"\" id=\"bannerDeclineButton\" tab-index=\"0\"\u003eDecline\u003c/button\u003e\u003c/div\u003e\u003c/div\u003e\u003cbutton data-ppui-info=\"\" class=\"styles_icon-button_base__134l21c8 styles_icon-button_size_lg__134l21c7 styles_icon-button_size__134l21c4 styles_icon-button_tertiary__134l21cd close_icon\" type=\"button\" id=\"bannerCloseButton\"\u003e\u003cspan class=\"styles_icon_svg__1dkwumb7 styles_icon_size_sm__1dkwumb3 styles_icon-button_icon__134l21cf\" data-ppui-info=\"\" aria-hidden=\"true\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"1em\" height=\"1em\"\u003e\u003cpath d=\"M19.28 18.22a.751.751 0 0 1-1.06 1.06L12 13.06l-6.22 6.22a.75.75 0 0 1-1.06-1.06L10.94 12 4.72 5.78a.75.75 0 1 1 1.06-1.06L12 10.94l6.22-6.22a.75.75 0 1 1 1.06 1.06L13.06 12l6.22 6.22z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e\u003cspan class=\"styles_screenreader__1p05eo10\"\u003eClose\u003c/span\u003e\u003c/button\u003e\u003c/div\u003e\u003c/div\u003e\u003c/div\u003e\u003c/div\u003e","js":"\u003cscript nonce=\"Hhkt2cggZxUKPNTfrBuQ9uYmBREmv1smTdADz4fuOreVNWcf\"\u003e(function () { var bannerFptiData = {}; function getFptiReqData () { let fptiReqData = window \u0026\u0026 window.fpti \u0026\u0026 window.PAYPAL \u0026\u0026 window.PAYPAL.analytics \u0026\u0026 window.PAYPAL.analytics.instance \u0026\u0026 window.PAYPAL.analytics.instance.options \u0026\u0026 window.PAYPAL.analytics.instance.options.request \u0026\u0026 window.PAYPAL.analytics.instance.options.request.data; if (fptiReqData) {  bannerFptiData = { api_name: 'cookieBanner', page:  'main:privacy:policy:ccpa', pgrp:  'main:privacy:policy', displaypage: window.fpti.pgrp, ppage: 'privacy_banner', bannertype: 'cookiebanner', ccpg: 'US', flag: 'ccpa', bannerversion: 'v14', bannersource: 'ConsentNodeServ', bannervariant: '', xe: '110041,109128,105410,105409,111623,111624,109059,111560,111622,110042,104407', xt: '148501,143659,123956,123954,158942,158944,143369,161854,158940,148504,119038', eligibility_reason: 'true', is_native: 'false', cookie_disabled: cookieDisabled(), reason_to_hide: reasonToHideBanner(), comp: 'consentnodeserv', space_key: 'SKSVPL', erpg: '' }; if(true){ bannerFptiData = {   ...bannerFptiData, userstate : 'NOT FOUND', usercountry : 'US', stateaccuracy : '0', countryaccuracy : '99', loggedin : 'false' } } } return fptiReqData; } function getFptiPage () { return getFptiReqData() \u0026\u0026 getFptiReqData().page; } function setSessionStorage(key) { try { sessionStorage.setItem(key, true); } catch (e) { console.log('error on setting sessioStorage', e); } } function isBannerClosed () { let is_banner_closed = false; try{ if(sessionStorage.getItem(\"isBannerClosed\") || sessionStorage.getItem(\"isUserAccepted\") || sessionStorage.getItem(\"isInvisibleBanner\")){ is_banner_closed = true; } } catch (e){ is_banner_closed = false; } return is_banner_closed || (false \u0026\u0026 true \u0026\u0026 (navigator \u0026\u0026 !navigator.cookieEnabled)); } function reasonToHideBanner(){ let reason = ''; try { if (false \u0026\u0026 true \u0026\u0026 (navigator \u0026\u0026 !navigator.cookieEnabled)){ reason = 'cookies are disabled'; } else if(sessionStorage.getItem(\"isUserAccepted\")){ reason = 'User accepted or declined'; } else if(sessionStorage.getItem(\"isBannerClosed\")){ reason = 'Banner Closed'; } else if(sessionStorage.getItem(\"isInvisibleBanner\")){ reason = 'Invisible banner loaded'; } } catch (error) { reason=''; } return reason; } function cookieFilteringRequest(eventSource) { const queryParamters = { eventSource, isQueryEncoded: true, page: '', component: '', eventSourceUrl: '', expireCookies: true }; if (window) { queryParamters.page = window.fpti \u0026\u0026 window.fpti.page || window.location \u0026\u0026 window.location.href; queryParamters.component = window.fpti \u0026\u0026 window.fpti.comp; const eventSourceUrl = window.location \u0026\u0026 window.location.href; queryParamters.eventSourceUrl = eventSourceUrl \u0026\u0026 eventSourceUrl.split(\"?\")[0]; } const xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP'); let queryString = ''; Object.keys(queryParamters).forEach((key, index) =\u003e queryString += (index \u003e 0 ? '\u0026' : '') + key + \"=\" + btoa(queryParamters[key])); const endPoint = \"https://www.paypal.com/myaccount/privacy/cookieprefs/cookies?\" + queryString; xhr.open('GET', endPoint); xhr.withCredentials = true; xhr.onreadystatechange = function () { if (xhr.readyState \u003e 3 \u0026\u0026 xhr.status === 200) { try { if (xhr?.response \u0026\u0026 xhr.response != \"OK\") { const invalidCookies = JSON.parse(xhr?.response)?.invalidCookies; if (invalidCookies.length \u003e 0) { const hostName = document.location.hostname; let subDomains = [hostName]; const parts = hostName.split('.'); parts.forEach((e, i) =\u003e {  if(e !== \"www\"){ subDomains.push(\".\" + parts.slice(i).join('.')); } }); subDomains.pop(); invalidCookies.forEach(cookie =\u003e { document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=.paypal.com'; document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;'; subDomains.forEach(domain =\u003e { document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=' + domain; }) }) } } } catch (error) { } } }; xhr.setRequestHeader('Accept', 'application/json'); xhr.setRequestHeader('Content-Type', 'application/json'); xhr.send(); }; function cookieFiltering(eventSource=\"cookieBanner\"){ if(!true || false){ return; } cookieFilteringRequest(eventSource); } function postAjax(isFptiDataAvailable , cookieObj ) { if(!isFptiDataAvailable \u0026\u0026 getFptiReqData()){  isFptiDataAvailable = true; } if(isFptiDataAvailable){ acceptDeclineFptiEvents(cookieObj); } var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"); var endPoint = cookieObj.endPointPrefix + cookieObj.endPointSuffix; xhr.open('GET',endPoint); xhr.withCredentials = true; xhr.onreadystatechange = function() { if (xhr.readyState \u003e 3 \u0026\u0026 xhr.status == 200) { cookieFiltering(cookieObj.eventSource); } }; xhr.setRequestHeader('Accept', 'application/json','Content-Type', 'application/json'); xhr.send(null); return xhr; }; function fptiRecordClick(bannerData){ window.PAYPAL.analytics.Analytics.prototype.recordClick({ data: {...bannerData, product:\"cookieBanner\"}}); }; function acceptDeclineFptiEvents(cookieObj){ var trackingPageName = '' || getFptiPage() || document.title; var cookiesText = cookieObj.cookiesText; var cookiePrefs = cookieObj.cookiePrefs; var eventName = cookieObj.eventName; var acEventName = cookieObj.acEventName; var bannerData = { e: 'cl', link: cookiesText, pglk: trackingPageName + '|' + cookiesText, pgln: trackingPageName + '|' + cookiesText, c_prefs: cookiePrefs, opsel: cookiePrefs + ',US', csource: 'cookie', event_name: eventName }; for(var key in bannerFptiData){ bannerData[key] = bannerFptiData[key]; }; fptiRecordClick(bannerData); var winFptiData = JSON.parse(JSON.stringify((window \u0026\u0026 window.fpti) || {})); var updatedFptiData = { cookiebannerhidden: 'true', c_prefs: cookiePrefs, event_name: acEventName }; for(var key in bannerFptiData){ updatedFptiData[key] = bannerFptiData[key]; }; for(var key in updatedFptiData){ winFptiData[key] = updatedFptiData[key]; }; fptiLogActivity(winFptiData); }; function cookieObjSetup (type) { const cookieObjValue = { \"accept\" : { endPointSuffix : '\u0026type=explicit_banner\u0026country=US\u0026policy=ccpa\u0026version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=true\u0026performance=true\u0026functional=true', eventSource : 'acceptCookieBanner', cookiesText : 'acceptcookies', cookiePrefs : 'T=1,P=1,F=1,type=explicit_banner', eventName : 'cookie_banner_accept_clicked', acEventName : 'cookie_banner_accepted' }, \"decline\" : { endPointSuffix : '\u0026type=explicit_banner\u0026country=US\u0026policy=ccpa\u0026version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=false\u0026performance=false\u0026functional=false', eventSource : 'declineCookieBanner', cookiesText : 'declinecookies', cookiePrefs : 'T=0,P=0,F=0,type=explicit_banner', eventName : 'cookie_banner_decline_clicked', acEventName : 'cookie_banner_declined' }, \"close\" : { endPointSuffix : '\u0026type=explicit_close\u0026country=US\u0026policy=ccpa\u0026version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=true\u0026performance=true\u0026functional=true', eventSource : 'closeCookieBanner', cookiesText : 'closecookies', cookiePrefs : 'T=1,P=1,F=1,type=explicit_close', eventName : 'cookie_banner_close_clicked', acEventName : 'cookie_banner_closed' } }; return cookieObjValue[type]; } function bindGdprEvents () { var acceptAllButton = document.getElementById('acceptAllButton'); var bannerDeclineButton = document.getElementById('bannerDeclineButton'); var bannerCloseButton = document.getElementById('bannerCloseButton'); var usBannerCloseButton = document.getElementById('usBannerCloseButton'); var manageCookiesLink = document.getElementById('manageCookiesLink'); var cookieStatement = document.getElementById('cookieStatement'); var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); var cookieBannerAcceptAll = document.getElementsByClassName(\"ccpaCookieBanner-acceptedAll\"); var trackingPageName = '' || getFptiPage() || document.title; if (manageCookiesLink) { manageCookiesLink.onclick = function() { var manageCookiesData = { e: 'cl', link: 'managecookies', pglk: trackingPageName + '|managecookies', pgln: trackingPageName + '|managecookies', event_name: 'cookie_banner_manage_cookies_clicked' }; for(var key in bannerFptiData){ manageCookiesData[key] = bannerFptiData[key]; }; fptiRecordClick(manageCookiesData); }; } if (cookieStatement) { cookieStatement.onclick = function() { var cookieStatementData = { e: 'cl', link: 'cookieStmtLink', pglk: trackingPageName + '|cookieStmtLink', pgln: trackingPageName + '|cookieStmtLink', event_name: 'cookie_banner_cookie_statement_clicked' }; for(var key in bannerFptiData){ cookieStatementData[key] = bannerFptiData[key]; }; fptiRecordClick(cookieStatementData); }; } if(bannerCloseButton \u0026\u0026 cookieBanner \u0026\u0026 cookieLanguage){ bannerCloseButton.onclick = function() { hideBanner(); setSessionStorage('isBannerClosed'); var closebannerFptiData = { e: 'cl', link: 'closeBanner', pglk: trackingPageName + '|closeBanner', pgln: trackingPageName + '|closeBanner', event_name: 'cookie_banner_close_clicked' }; for(var key in bannerFptiData){ closebannerFptiData[key] = bannerFptiData[key]; }; fptiRecordClick(closebannerFptiData); }; } if (acceptAllButton \u0026\u0026 cookieBanner \u0026\u0026 cookieLanguage) { acceptAllButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('accept')); }; } if (bannerDeclineButton \u0026\u0026 cookieBanner \u0026\u0026 cookieLanguage) { bannerDeclineButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('decline')); }; } if (usBannerCloseButton \u0026\u0026 cookieBanner \u0026\u0026 cookieLanguage) { usBannerCloseButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('close')); }; } window.hideGdprBanner = function () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); if (cookieBannerUi \u0026\u0026 cookieBannerUi.className.indexOf('ccpaHideCookieBannerMobile') === -1) { cookieBannerUi.className += \" ccpaHideCookieBannerMobile\"; } }; window.showGdprBanner = function () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); if (cookieBannerUi) { cookieBannerUi.className = cookieBannerUi.className.replace(\"ccpaHideCookieBannerMobile\",\"\"); } }; document.body.addEventListener(\"focus\", function (event) { if (event.target.type === 'text' || event.target.type === 'number' || event.target.type === 'password' || event.target.type === 'email' || event.target.type === 'select-one') { window.hideGdprBanner(); } }, true); } function adjustPaddingTop(){ var cookieBannerAcceptAll = document.getElementsByClassName(\"ccpaCookieBanner-acceptedAll\"); if(cookieBannerAcceptAll.length \u003e 0){ var cookieBanner = document.getElementById('ccpaCookieBanner'); var bannerHeight = cookieBanner ? cookieBanner.clientHeight : 0; if(cookieBannerAcceptAll \u0026\u0026 cookieBannerAcceptAll[0] \u0026\u0026 bannerHeight){ cookieBannerAcceptAll[0].style.paddingTop = bannerHeight/16 +'em'; } } }; var isPaddingBottomAdded = false, bannerPaddingBottom = \"\"; function adjustPaddingBottom(addListener){ if (undefined || !false) { return; } function adjustPaddingBottomEvent() { var cookieBannerAcceptAll = document.getElementsByClassName(\"ccpaCookieBanner-acceptedAll\"); if(cookieBannerAcceptAll.length \u003e 0){ var bodyPaddingBottom = cookieBannerAcceptAll[0].style.paddingBottom; var cookieBanner = document.getElementById('ccpaCookieBanner'); if(cookieBannerAcceptAll \u0026\u0026 cookieBannerAcceptAll[0] \u0026\u0026 cookieBanner.style.display != 'none') { if (bodyPaddingBottom === \"\" || (isPaddingBottomAdded \u0026\u0026 bannerPaddingBottom === bodyPaddingBottom)) { var cookieBannerContainer = document.getElementsByClassName('ccpaCookieBanner_container'); var bannerBottomHeight = cookieBannerContainer.length \u003e 0 ? parseInt(window.getComputedStyle(cookieBannerContainer[0]).bottom.replace(\"px\", \"\")) : 0; var bannerHeight = cookieBanner ? cookieBanner.clientHeight : 0; bannerPaddingBottom = ((bannerHeight + bannerBottomHeight) / 16) + 'em'; cookieBannerAcceptAll[0].style.paddingBottom = bannerPaddingBottom; isPaddingBottomAdded = true; } else if (isPaddingBottomAdded \u0026\u0026 bannerPaddingBottom !== bodyPaddingBottom) { isPaddingBottomAdded = false; } } } } if (addListener) { adjustPaddingBottomEvent(); window.addEventListener('resize', adjustPaddingBottomEvent);  } else { var cookieBannerAcceptAll = document.getElementsByClassName(\"ccpaCookieBanner-acceptedAll\"); if(cookieBannerAcceptAll \u0026\u0026 cookieBannerAcceptAll[0]){ window.removeEventListener('resize', adjustPaddingBottomEvent); adjustPaddingBottomEvent(); if (isPaddingBottomAdded \u0026\u0026 cookieBannerAcceptAll[0].style.paddingBottom === bannerPaddingBottom) { cookieBannerAcceptAll[0].style.removeProperty('padding-bottom'); } } } }; window.bindGdprEvents = bindGdprEvents; function cookieDisabled() { if (navigator.cookieEnabled === false) return \"true\"; else if (navigator.cookieEnabled === true) return \"false\"; else return \"undefined\"; }; function fptiLogActivity(winFptiData){ window.PAYPAL.analytics.Analytics.prototype.logActivity({...winFptiData, product:\"cookieBanner\"}); }; function gdprSetup () { var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); var manageLink = document.getElementById('manageCookiesLink'); var acceptAllLink = document.getElementById('acceptAllButton'); var trackingPageName = '' || getFptiPage() || document.title; if(!isBannerClosed()){ document.body.className = document.body.className += \" ccpaCookieBanner-acceptedAll\"; if(undefined){ adjustPaddingTop(); window.addEventListener('resize', adjustPaddingTop);   document.body.className = document.body.className += \" top-cookie-banner-enabled\";    } } var pageName = trackingPageName || getFptiPage() || document.title; var winFptiData = JSON.parse(JSON.stringify((window \u0026\u0026 window.fpti) || {})); if(false){ bannerFptiData.isNativeBannerHidden = true; } for(var key in bannerFptiData){ winFptiData[key] = bannerFptiData[key]; }; winFptiData['event_name'] = 'cookie_banner_shown'; fptiLogActivity(winFptiData); if (manageLink) { manageLink.setAttribute('pagename', (pageName + '|managecookies')); } if (acceptAllLink) { acceptAllLink.setAttribute('pagename', (pageName + '|acceptcookies')); } bindGdprEvents(); }; function hideBanner() { var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); if(cookieLanguage \u0026\u0026 cookieBanner){ cookieLanguage.style.display = 'none'; cookieBanner.style.display = 'none'; }else { return false; } window.removeEventListener('resize', adjustPaddingTop); var cookieBannerAcceptAll = document.getElementsByClassName(\"ccpaCookieBanner-acceptedAll\"); if(cookieBannerAcceptAll \u0026\u0026 cookieBannerAcceptAll[0]){ cookieBannerAcceptAll[0].style.removeProperty('padding-top'); } document.body.className = document.body.className.replace(\"ccpaCookieBanner-acceptedAll\",\"\"); document.body.className = document.body.className.replace(\"top-cookie-banner-enabled\",\"\"); return true; } function isPageReady () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); return !!(cookieBannerUi \u0026\u0026 getFptiReqData()); } function enableFocusEvent(addListener){ if(!false || undefined){ return; } var cookieBanner = document.getElementById('ccpaCookieBanner'); function focusIn(e) { if(cookieBanner \u0026\u0026 cookieBanner.style.display != 'none'){ var activeElement = document.activeElement; if(((activeElement.getBoundingClientRect().bottom) \u003e (cookieBanner.getBoundingClientRect().top)) \u0026\u0026 !activeElement.parentElement.nodeName.includes(\"UL\")){ activeElement.scrollIntoView({block: 'center'}); } }else{ document.removeEventListener(\"focusin\", focusIn); } } if(addListener){ document.addEventListener(\"focusin\",focusIn); } } function enableEvents(enable){ adjustPaddingBottom(enable); enableFocusEvent(enable); } var maxRetries = 34, bannerhidden=false; function triggerBanner() { if (isPageReady()) { cookieFiltering('pageLoad'); if(true){setTimeout(function(){ cookieFiltering('afterPageLoad')}, 3000);} if (isBannerClosed()) { hideBanner(); } if(false){ setSessionStorage('isInvisibleBanner'); } gdprSetup(); } else { if (isBannerClosed() \u0026\u0026 !bannerhidden ) { bannerhidden=hideBanner(); } if (maxRetries-- \u003e 0) { setTimeout(triggerBanner, 150); } else { cookieFiltering('pageLoad'); if(true){setTimeout(function(){ cookieFiltering('afterPageLoad')}, 3000);} if (isBannerClosed()) { hideBanner(); } if(!isBannerClosed() \u0026\u0026 document.getElementById('ccpaCookieBanner') \u0026\u0026 !document.body.className.includes(\"ccpaCookieBanner-acceptedAll\")){ document.body.className = document.body.className += \" ccpaCookieBanner-acceptedAll\"; if(undefined){ adjustPaddingTop(); window.addEventListener('resize', adjustPaddingTop);   document.body.className = document.body.className += \" top-cookie-banner-enabled\"; } } var acceptAllButton = document.getElementById('acceptAllButton'); var bannerDeclineButton = document.getElementById('bannerDeclineButton'); var bannerCloseButton = document.getElementById('bannerCloseButton'); var usBannerCloseButton = document.getElementById('usBannerCloseButton'); var cookieBanner = document.getElementById('ccpaCookieBanner'); if ( acceptAllButton ) { acceptAllButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('accept')); }; } if ( bannerDeclineButton ) { bannerDeclineButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('decline')); }; } if ( usBannerCloseButton ) { usBannerCloseButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('close')); }; } if ( bannerCloseButton ) { bannerCloseButton.onclick = function() { hideBanner(); setSessionStorage('isBannerClosed'); } } if(false){ setSessionStorage('isInvisibleBanner'); } } } } triggerBanner(); })();\u003c/script\u003e","cookies":{"cookie_prefs":{"value":"T=0,P=0,F=0,type=initial","options":{"maxAge":31536000000,"SameSite":"None","Secure":true,"domain":".paypal.com"}}}},"fptiTracking":{"name":"pta","jsURL":"https://www.paypalobjects.com","serverURL":"https://t.paypal.com/ts","dataString":"pgrp=btdocs%3Ain-person_guides_offline-transactions_\u0026page=btdocsnodeweb%2F.dust\u0026pgst=1767205394879\u0026calc=b80d925973792\u0026nsid=XCA83AzVAhdTnG0gXecj1KYxegJq37-2\u0026rsta=en_US\u0026pgtf=Nodejs\u0026env=live\u0026s=ci\u0026ccpg=US\u0026csci=b4b48054a19c4ba8a0ca81b18dca59c3\u0026comp=btdocsnodeweb\u0026tsrce=btdocsnodeweb\u0026cu=0"},"experiments":{"feedback":true,"onboarding":true,"signupramp":false,"uiramp":true,"webllsOn":false,"runInPostmanFeatureSwitch":true,"integrationBuilder":true,"migration":true,"askAIOptionsExp":true,"enableInternalUIFeatures":false},"env":"prod","nodeEnv":{"_env":"LIVE","isDev":false,"isNotDev":true,"isTest":false,"isNotTest":true,"isStage":false,"isQA":false,"isNotStage":true,"isNotQA":true,"isSandbox":false,"isNotSandbox":true,"isProd":true,"isLive":true,"isNotProd":false,"isNotLive":false}},"routes/braintree/in-person/$":{"id":"5vj5I4wCCZzh42yWAHBL5o","document_id":"FFT32","entry_template_id":"freeForm","entry_template_name":"Braintree In Person Doc","resource_type":"ENTRY","create_time":"2024-11-20T19:03:53.719Z","update_time":"2025-01-03T19:42:38.395Z","language":["en-US"],"revision":5,"published_counter":2,"published_version":4,"content":{"internalTitle":"Offline Transactions /in-person/guides/offline-transactions","slug":"/in-person/guides/offline-transactions/","title":"Offline Transactions","subtitle":"Enable payment acceptance even when your internet is offline.","content":{"node":"root","child":[{"node":"element","tag":"main","child":[{"node":"text","text":"\n    "},{"node":"element","tag":"header","child":[{"node":"text","text":"\n        "},{"node":"element","tag":"h1","child":[{"node":"text","text":"Offline Transactions"}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"Enable payment acceptance even when your internet is offline."}]},{"node":"text","text":"\n    "}]},{"node":"text","text":"\n    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n        "},{"node":"element","tag":"h2","attr":{"id":"introduction"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Introduction"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Offline transaction processing, also known as store-and-forward or SAF,\n            allows payment acceptance even when readers are offline and unable to\n            connect to the internet. Transactions are stored on the card reader. Once\n            the reader is able to connect to the internet again, the stored\n            transactions are sent to Braintree for payment processing.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            It is recommended to use Store \u0026 Forward starting in firmware\n                            version 5.0.0 which has critical improvements to this\n                            functionality.\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h3","attr":{"id":"merchant-liability"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Merchant Liability"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            For transactions that occur while in offline mode via SAF the liability\n            for the transaction falls on the merchant. For example, if once the stored\n            offline transaction is forwarded to Braintree for processing and then\n            comes back as declined or refused by the issuer then the merchant will not\n            be funded for the transaction. For this reason, we advise merchants to\n            always think about how to best mitigate this risk.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h3","attr":{"id":"offline-floor-limits"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Offline Floor Limits"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Typically for offline transactions a merchant will want to determine what\n            is the maximum transaction amount they would like to allow for an offline\n            transaction, this is called a \"floor limit\". From a Braintree perspective,\n            we will allow for any amount to be sent to the reader in an offline\n            session, and for this reason, it is up to the POS system (or API caller\n            application) to create parameters around floor limits and only send the\n            transaction request to the reader if the transaction amount is in line\n            with the set parameters on the POS. Usually, these parameters will vary by\n            merchant and should be configurable to some degree. You may also\n            optionally create other risk mitigating parameters for example \"maximum\n            number of transactions to be allowed in a given offline session\", or\n            \"maximum amount to be allowed in a given offline session\", etc...\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            When determining what your offline floor limits should be it is\n                            advised to consider average transaction value as well as risk\n                            tolerance for a potentially declined or refused transaction.\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h3","attr":{"id":"initiating-an-offline-session"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Initiating an Offline Session"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            As you will discover once you review the technical documentation below\n            relating to\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/offline-transactions/#initiating-an-offline-transaction"},"child":[{"node":"text","text":"initiating an offline transaction"}]},{"node":"text","text":", you will notice that to initiate the transaction, you must direct your\n            requests to an endpoint on the reader itself as opposed to the cloud\n            Braintree API endpoint. For this reason, the POS (or API caller\n            application) must have a toggle of some sort to tell the POS to \"go into\n            offline mode\" which would trigger the endpoint switching and put the POS\n            in a state where it should adhere to offline floor limit parameters.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h2","attr":{"id":"getting-the-reader-set-up"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Getting the Reader set up"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"In order to transact offline, there are a few prerequisites"}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"ol","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"li","attr":{"value":"1"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"data-value":"1"}},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The reader and POS must be on the same local area network"}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"li","attr":{"value":"2"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"data-value":"2"}},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        The reader and POS must have a\n                        "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/setup-reader/#configuring-static-ip"},"child":[{"node":"text","text":"static IP address"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            For the POS to securely initiate a transaction on the reader, they must\n            establish a mutually authenticated connection, which will be established\n            via mutual TLS. In order to create this mutually authenticated connection,\n            SSL certificates will need to be generated for both the POS and reader.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h3","attr":{"id":"id-1-certificate-generation-overview"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"1) Certificate Generation Overview"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Certificate generation can be done via\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"openssl"}]},{"node":"text","text":". This guide will work with\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"openssl@1.1.1"}]},{"node":"text","text":". Variants other than this, like LibreSSL, etc.\n            "},{"node":"element","tag":"em","child":[{"node":"text","text":"may"}]},{"node":"text","text":" work with this guide but are not guaranteed.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            This guide will walk through generating a self-signed root Certificate\n            Authority, and use that root certificate to create signed server (reader)\n            and client (POS) certificates.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h3","attr":{"id":"id-2-root-certificate-authority"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"2) Root Certificate Authority"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"First, we'll need to generate a private key."}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"$ openssl genrsa -out ca.key 4096"}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"Next, we'll use this key to generate the root certificate."}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"$ openssl req \\\n          -new -x509 -days 365 \\\n          -key ca.key -out ca.crt \\\n          -nodes -subj \"/CN=dev-root-ca\""}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h3","attr":{"id":"id-3-reader-and-pos-certificates"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"3) Reader and POS Certificates"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Now, we can use our root certificate to create the POS and reader\n            certificates. You'll need the reader and POS IP addresses for this next\n            part.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            First we will need to create an extensions file that looks like this named\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"v3-extensions.ext"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"[reader]\n          keyUsage = critical, digitalSignature, keyEncipherment\n          extendedKeyUsage = serverAuth\n          subjectAltName=IP:$READER_IP_ADDRESS\n          authorityKeyIdentifier=keyid,issuer\n          \n          [pos]\n          keyUsage = critical, digitalSignature, keyEncipherment\n          extendedKeyUsage = clientAuth\n          subjectAltName=IP:$POS_IP_ADDRESS\n          authorityKeyIdentifier=keyid,issuer"}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Make sure to substitute the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"READER_IP_ADDRESS "}]},{"node":"text","text":"and\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"POS_IP_ADDRESS"}]},{"node":"text","text":"\n            in the above file with your respective values.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            If you would like to use a shared cert across all of your devices,\n                            then you may use a generic domain instead of an IP address for the\n                            reader and POS certs, for example:\n                            "},{"node":"element","tag":"code","child":[{"node":"element","tag":"strong","child":[{"node":"text","text":"DNS:$domain_name"}]}]},{"node":"text","text":"instead of\n                            "},{"node":"element","tag":"code","child":[{"node":"element","tag":"strong","child":[{"node":"text","text":"IP:$READER_IP_ADDRESS"}]}]},{"node":"text","text":"\n                            and\n                            "},{"node":"element","tag":"code","child":[{"node":"element","tag":"strong","child":[{"node":"text","text":"IP:$POS_IP_ADDRESS"}]}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Next, we will generate the reader's certificate, again substitute the\n            reader IP address.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"$ openssl genrsa -out reader.key 4096\n\n          $ openssl req \\\n              -new -key reader.key \\\n              -out reader.csr \\\n              -nodes -subj \"/CN=$READER_IP_ADDRESS\"\n          \n          $ openssl x509 \\\n              -req -days 365 \\\n              -in reader.csr \\\n              -CA ca.crt -CAkey ca.key \\\n              -set_serial 1 \\\n              -out reader.crt \\\n              -extfile v3-extensions.ext -extensions reader"}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"Finally, we will generate the POS certificates"}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"$ openssl genrsa -out pos.key 4096\n\n          $ openssl req \\\n              -new -key pos.key \\\n              -out pos.csr \\\n              -nodes -subj \"/CN=$POS_IP_ADDRESS\"\n          \n          $ openssl x509 \\\n              -req -days 365 \\\n              -in pos.csr \\\n              -CA ca.crt -CAkey ca.key \\\n              -set_serial 2 \\\n              -out pos.crt \\\n              -extfile v3-extensions.ext -extensions pos"}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"After this step you should have the following files generated:"}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"ul","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"ca.crt"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"ca.key"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"reader.crt"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"reader.csr"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"reader.key"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"pos.crt"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"pos.csr"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"pos.key"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h3","attr":{"id":"id-4-verifying-certificates"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"4) Verifying Certificates"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Now that we have our certificates generated, there are a few ways we can\n            ensure these will work as expected. One way is to use the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"openssl"}]},{"node":"text","text":"\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"s_client"}]},{"node":"text","text":"\n            and\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"s_server"}]},{"node":"text","text":"\n            tools. These will let us test the mutual TLS handshake that occurs between\n            the POS and Reader, and determine if there are any problems.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"First, we'll start the \"server\", or reader:"}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"$ openssl s_server \\\n          -accept 8080 \\\n          -cert reader.crt \\\n          -key reader.key \\\n          -CAfile ca.crt"}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            This starts a server on port 8080, with the reader certificates. Now,\n            let's test our connection like so:\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"$ openssl s_client \\\n          -connect localhost:8080 \\\n          -cert pos.crt \\\n          -key pos.key \\\n          -CAfile ca.crt"}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            If running the above results in no error outputs, then the certificates\n            are working as expected.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h3","attr":{"id":"id-5-getting-certificates-onto-readers"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"5) Getting Certificates onto Readers"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            In order to use these certificates, the Readers will need to download\n            these certificates from Braintree servers and use them on start-up. In\n            order to accomplish this, the root CA and reader certificate as well as\n            reader private key will need to be sent to Braintree support so that the\n            files can be provisioned for the readers.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            In order to do this securely, the certificates will need to be packaged\n            into a PKCS12 container that is password protected like so:\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"$ openssl pkcs12 -export -out 111-222-333.pfx -inkey reader.key -in reader.crt -certfile ca.crt"}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Where you see\n            "},{"node":"element","tag":"code","child":[{"node":"element","tag":"span","child":[{"node":"text","text":"111-222-333"}]}]},{"node":"text","text":"\n            in the above example is the serial number of the card reader getting the\n            certificate installed.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h2","attr":{"id":"initiating-an-offline-transaction"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Initiating an Offline Transaction"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            The default port for the reader to accept store and forward transaction\n            requests is\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"3030"}]},{"node":"text","text":". If your reader IP address is then\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"192.168.0.155"}]},{"node":"text","text":", the URL for API requests would be like so:\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"https://192.168.0.155:3030/graphql"}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            When making the API call to this URL, the certificate generated for the\n            POS will need to be sent along with the request so that the reader can\n            verify the POS.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Like online transactions, to provide idempotency on the request charge\n            mutation, you must also include the HTTP header\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"Idempotency-Key "}]},{"node":"text","text":"with a unique value. UUIDv4 is recommended.\n            For example, if using\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"curl"}]},{"node":"text","text":"\n            to make the request, you would include\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"--header 'Idempotency-Key: 94c9ea8b-31b0-488e-a231-57e32f0bfd70' \n      "}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"A sample charge GraphQL charge request would look like this:"}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            Note that there is an additional variable to include in your\n                            request called:\n                            "},{"node":"element","tag":"code","child":[{"node":"text","text":"\"deferredAuthorization\": true"}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-mutation","id":"tab-graphql-mutation"},"child":[{"node":"text","text":"\n                    GraphQL Mutation"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-variables","id":"tab-graphql-variables"},"child":[{"node":"text","text":"\n                    GraphQL Variables"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"sample-api-response","id":"tab-sample-api-response"},"child":[{"node":"text","text":"\n                    Sample API Response\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-mutation","id":"graphql-mutation"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"mutation RequestChargeFromInStoreReader($input: RequestChargeFromInStoreReaderInput!) {\n              requestChargeFromInStoreReader(input: $input) {\n                  clientMutationId\n                  id\n                  status\n              }\n          }"}]}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-variables","id":"graphql-variables"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n              \"input\": {\n                  \"clientMutationId\": \"mutation_id\",\n                  \"readerId\": \"$YOUR_READER_ID\",\n                  \"transaction\": {\n                      \"amount\": \"39.85\",            \n                            \"orderId\": \"ExampleOrderNumber-1221\",\n                            \"deferredAuthorization\": true\n                  }\n              }\n          }"}]}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response","id":"sample-api-response"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n              \"data\": {\n                  \"requestChargeFromInStoreReader\": {\n                      \"clientMutationId\": \"mutation_id\",\n                      \"id\": \"aW5zdG9yZWNvbnRleHRfI2I5NjNmZmVlYThhMDQ0ZDFiMmI2MGRmNzI1ZTJiNzQwI1ZFUklGT05FLTgwMy00MDYtODI1\",\n                      \"status\": \"PENDING\"\n                  }\n              }\n          }"}]}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            The above example is for a Charge request, you may also perform a\n                            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/"},"child":[{"node":"text","text":"card-present authorization"}]},{"node":"text","text":"\n                            as an offline transaction\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Below is an example of an offline unreferenced refund request. Context ID\n            polling logic should be the same as for a request charge.\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-mutation-1","id":"tab-graphql-mutation-1"},"child":[{"node":"text","text":"\n                    GraphQL Mutation"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-variables-1","id":"tab-graphql-variables-1"},"child":[{"node":"text","text":"\n                    GraphQL Variables"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"sample-api-response-1","id":"tab-sample-api-response-1"},"child":[{"node":"text","text":"\n                    Sample API Response\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-mutation-1","id":"graphql-mutation-1"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"mutation RequestRefundFromInStoreReader($input: RequestRefundFromInStoreReaderInput!) {\n              requestRefundFromInStoreReader(input: $input) {\n                  clientMutationId\n                  id\n                  status\n              }\n          }"}]}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-variables-1","id":"graphql-variables-1"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n              \"input\": {\n                  \"clientMutationId\": \"your mutation ID\",\n                  \"readerId\": \"your reader ID\",\n                  \"refund\": {\n                      \"amount\": \"20.00\",\n                      \"deferredAuthorization\": true,\n                      \"orderId\": \"Your Order Id\"\n                  }\n              }\n          }"}]}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response-1","id":"sample-api-response-1"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n              \"data\": {\n                  \"requestChargeFromInStoreReader\": {\n                      \"clientMutationId\": \"mutation_id\",\n                      \"id\": \"aW5zdG9yZWNvbnRleHRfI2I5NjNmZmVlYThhMDQ0ZDFiMmI2MGRmNzI1ZTJiNzQwI1ZFUklGT05FLTgwMy00MDYtODI1\",\n                      \"status\": \"PENDING\"\n                  }\n              }\n          }"}]}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            It is important to note that we support the passing of\n                            "},{"node":"element","tag":"code","child":[{"node":"element","tag":"span","child":[{"node":"text","text":"merchantAccountId"}]}]},{"node":"text","text":" as well as"},{"node":"element","tag":"code","child":[{"node":"element","tag":"span","child":[{"node":"text","text":"customFields"}]}]},{"node":"text","text":"\n                                and a shopper statement\n                                "},{"node":"element","tag":"code","child":[{"node":"element","tag":"span","child":[{"node":"text","text":"descriptor"}]}]},{"node":"text","text":"\n                                in your store and forward request. However, there is no validation\n                                at the reader level against what is passed. This means that the\n                                validation occurs once the stored transactions are forwarded to\n                                Braintree and if bad values are passed then the transaction will\n                                fail once forwarded and the merchant will not be funded for the\n                                transaction.\n                            \n                        "}]},{"node":"element","tag":"code","child":[{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"element","tag":"code","child":[{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"element","tag":"code","child":[{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"element","tag":"code","child":[{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"element","tag":"code","child":[{"node":"text","text":"\n\n            "}]},{"node":"element","tag":"h2","attr":{"id":"checking-the-status-of-a-charge-or-refund"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"Checking the Status of a Charge or Refund"}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                Similar to the\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status"},"child":[{"node":"text","text":"online guide"}]},{"node":"text","text":", the reader can be continuously polled with a query for updates on the\n                transaction's completion status. The difference with an offline\n                transaction is that when you poll the context ID using the reader IP\n                address as an endpoint, you will only get the transaction completion\n                status according to whether the reader has successfully collected card\n                details to store while offline. This DOES NOT represent the final status\n                of the transaction.\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                To get the final transaction status once stored card data is forwarded,\n                you will need to use the context ID to poll against using the Braintree\n                cloud API endpoint, but there are a few\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/offline-transactions/#offline-transaction-rules"},"child":[{"node":"text","text":"rules"}]},{"node":"text","text":"\n                to keep in mind when building this logic.\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"h3","attr":{"id":"checking-a-charge-status-example"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"Checking a Charge Status Example:"}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                                As of\n                                "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/reference/app-version-release-notes/#version530"},"child":[{"node":"text","text":"firmware version 5.3.0"}]},{"node":"text","text":", we support retrieving\n                                "},{"node":"element","tag":"code","child":[{"node":"text","text":"bin,brandCode,applicationIdentifier"}]},{"node":"text","text":"\n                                API fields for an offline transaction node query.\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-query","id":"tab-graphql-query"},"child":[{"node":"text","text":"\n                        GraphQL Query"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"sample-api-response-2","id":"tab-sample-api-response-2"},"child":[{"node":"text","text":"\n                        Sample API Response\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-query","id":"graphql-query"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"query {\n              node(id: {{context_id}}) {\n              ... on RequestChargeInStoreContext {\n                      id\n                      status\n                      transaction {\n                          createdAt\n                          status\n                          amount {\n                              value\n                              currencyCode\n                          }\n                          paymentMethodSnapshot {\n                              ...on CreditCardDetails {\n                                  origin {\n                                     details {\n                                     ... on EmvCardOriginDetails {\n                                           applicationIdentifier\n                                       }\n                                     }\n                                   }\n                                  last4\n                                  expirationMonth\n                                  expirationYear\n                                  cardholderName\n                                  bin\n                                  brandCode\n                              }\n                          }\n                      }\n                  }\n              }\n          }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response-2","id":"sample-api-response-2"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n              \"data\": {\n                  \"node\": {\n                      \"id\": \"aW5zdG9yZWNvbnRleHRfIzE2MjYzNTE5Njk5ODEjVkVSSUZPTkUtODAzLTQyOC0wMzQ\",\n                      \"status\": \"PROCESSING\",\n                      \"transaction\": {\n                          \"createdAt\": \"2021-07-15T12:22:02.000000Z\",\n                          \"status\": \"AUTHORIZED\",\n                          \"amount\": {\n                              \"value\": \"10.00\",\n                              \"currencyCode\": \"USD\"\n                          },\n                          \"paymentMethodSnapshot\": {\n                              \"last4\": \"8885\",\n                              \"expirationMonth\": \"12\",\n                              \"expirationYear\": \"2025\",\n                              \"cardholderName\": \"BRAINTREE TEST\",\n                              \"bin\": \"421212\",\n                              \"brandCode\": \"VISA\"\n                          }\n                      }\n                  }\n              }\n          }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"h3","attr":{"id":"checking-a-refund-status-example"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"Checking a Refund Status Example:"}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"graphql-query-1","id":"tab-graphql-query-1"},"child":[{"node":"text","text":"\n                        GraphQL Query"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"sample-api-response-3","id":"tab-sample-api-response-3"},"child":[{"node":"text","text":"\n                        Sample API response\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-query-1","id":"graphql-query-1"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"query ID($transactionId: ID!) {\n              node(id: $transactionId) {\n                  ... on RequestRefundInStoreContext {\n                      id\n                      status\n                      refund {\n                          createdAt\n                          status\n                          amount {\n                              value\n                              currencyCode\n                          }\n                          orderId\n                          paymentMethodSnapshot {\n                              ...on CreditCardDetails {\n                                  origin {\n                                     details {\n                                     ... on EmvCardOriginDetails {\n                                           applicationIdentifier\n                                       }\n                                     }\n                                   }\n                                  last4\n                                  expirationMonth\n                                  expirationYear\n                                  cardholderName\n                                  bin\n                                  brandCode\n                              }\n                          }\n                          merchantAccountId\n                      }\n                  }\n                  ... on RequestRefundInStoreContext {\n                      __typename\n                      id\n                      status\n                      refund {\n                          amount {\n                              value\n                          }\n                          createdAt\n                          orderId\n                          status\n                          merchantAccountId\n                      }    \n                  }\n              }\n          }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response-3","id":"sample-api-response-3"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n              \"data\": {\n                  \"node\": {\n                      \"id\": \"aW5zdG9yZWNvbn3NzA4NzU2NDMjVkVSSUZPTkUtODA1LTAxNy00NTQ\",\n                      \"status\": \"COMPLETE\",\n                      \"refund\": {\n                          \"createdAt\": \"2022-07-25T17:41:17.05786544+00:00\",\n                          \"status\": \"AUTHORIZED\",\n                          \"amount\": {\n                              \"value\": \"20.00\",\n                              \"currencyCode\": \"USD\"\n                          },\n                          \"orderId\": \"Your Order Id\",\n                          \"paymentMethodSnapshot\": {\n                              \"last4\": \"8885\",\n                              \"expirationMonth\": \"12\",\n                              \"expirationYear\": \"2025\",\n                              \"cardholderName\": \"BRAINTREE/TEST\"\n                          },\n                          \"merchantAccountId\": null,\n                          \"descriptor\": {\n                              \"name\": \"test person\",\n                              \"phone\": null,\n                              \"url\": null\n                          },\n                          \"customFields\": [\n                              {\n                                  \"name\": \"PayPal\",\n                                  \"value\": \"Test\"\n                              }\n                          ]\n                      },\n                      \"__typename\": \"RequestRefundInStoreContext\"\n                  }\n              }\n          }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"h2","attr":{"id":"cancelling-a-charge"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"Cancelling a Charge"}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                If you need to stop a transaction from being paid while the reader is\n                activated and requesting payment, you can\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Mutation--requestCancelFromInStoreReader"},"child":[{"node":"text","text":"cancel"}]},{"node":"text","text":"\n                the\n                "},{"node":"element","tag":"code","child":[{"node":"text","text":"InStoreContext"}]},{"node":"text","text":". Cancelling an\n                "},{"node":"element","tag":"code","child":[{"node":"text","text":"InStoreContext"}]},{"node":"text","text":"\n                places the reader back into\n                "},{"node":"element","tag":"strong","child":[{"node":"text","text":"idle mode "}]},{"node":"text","text":"and returns you to the PayPal-branded\n                screensaver.\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-mutation-2","id":"tab-graphql-mutation-2"},"child":[{"node":"text","text":"\n                        GraphQL Mutation"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-variables-2","id":"tab-graphql-variables-2"},"child":[{"node":"text","text":"\n                        GraphQL Variables"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"sample-api-response-4","id":"tab-sample-api-response-4"},"child":[{"node":"text","text":"\n                        Sample API Response\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-mutation-2","id":"graphql-mutation-2"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"mutation RequestCancelFromInStoreReader($input: RequestCancelFromInStoreReaderInput!) {\n              requestCancelFromInStoreReader(input: $input) {\n                  clientMutationId\n                  id\n                  status\n              }\n          }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-variables-2","id":"graphql-variables-2"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n              \"input\": {\n                  \"inStoreContextId\": \"context-id\"\n              }\n          }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response-4","id":"sample-api-response-4"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n              \"data\": {\n                  \"requestCancelFromInStoreReader\": {\n                      \"clientMutationId\": null,\n                      \"inStoreContext\": {\n                          \"id\": \"aW5zdG9yZWNvbnRleHRfI2M4M2MzYTM5NDVhMDRlNTI4MmQ3NDcxZDIxNDY5MzFlI1ZFUklGT05FLTgwMy0zOTEtMjM2I3VzLXdlc3QtMg\",\n                          \"status\": \"CANCELLED\",\n                      }\n                  }\n              }\n          }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"h2","attr":{"id":"offline-transaction-rules"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"Offline Transaction Rules"}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                This section outlines the logical rules to keep in mind as you build your\n                offline processing flow.\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"ul","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            The reader can store offline transactions in its memory for\n                            "},{"node":"element","tag":"strong","child":[{"node":"text","text":"up to 5 days"}]},{"node":"text","text":", after which the stored transactions\n                            will be erased. This has to do with card scheme rules for token\n                            management.\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            The reader will attempt to reconnect to the network every few\n                            seconds when its in an offline state, and once reconnected it will\n                            automatically upload all stored transactions to the Braintree\n                            Platform.\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            Once a stored offline transaction is successfully uploaded to the\n                            Braintree Platform, the context ID of that transaction will be\n                            "},{"node":"element","tag":"strong","child":[{"node":"text","text":"available for query for 24 hours"}]},{"node":"text","text":", after which it\n                            will be erased. See\n                            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/offline-transactions/#offline-transaction-reconciliation"},"child":[{"node":"text","text":"offline transaction reconciliation"}]},{"node":"text","text":".\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            A single reader can store up to approximately 1,000 transactions in\n                            a given offline session without uploading to the Braintree Platform.\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            All\n                            "},{"node":"element","tag":"strong","child":[{"node":"text","text":"API inputs must be correct"}]},{"node":"text","text":" for offline\n                            transactions, otherwise the context will stay in a \"PROCESSING\"\n                            status until the context expires after 7 days.\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"h2","attr":{"id":"offline-transaction-reconciliation"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"Offline Transaction Reconciliation"}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                It is important to reconcile your offline transactions every day to ensure\n                that the final transaction status (once forwarded) is known by the POS.\n                This helps to ensure that your POS remains in sync with the actual\n                transaction status given by the card issuer. To do this you will need to\n                use the context ID from the offline transaction and poll against it using\n                the Braintree Cloud API endpoint. This should be done for every offline\n                transaction\n                "},{"node":"element","tag":"em","child":[{"node":"element","tag":"strong","child":[{"node":"text","text":"at least once per day"}]}]},{"node":"text","text":"\n                since the\n                "},{"node":"element","tag":"em","child":[{"node":"element","tag":"strong","child":[{"node":"text","text":"context ID will expire 24 hours"}]}]},{"node":"text","text":"\n                after the stored transaction data is uploaded to the Braintree Platform.\n                When you get the API response from your context ID polling make sure to\n                store the transaction ID and the transaction status in your POS database.\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                                Braintree Sandbox Cloud API Endpoint:\n                                "},{"node":"element","tag":"a","attr":{"href":"https://payments.sandbox.braintree-api.com/graphql"},"child":[{"node":"text","text":"https://payments.sandbox.braintree-api.com/graphql"}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                It is also important to note that if you use a unique\n                "},{"node":"element","tag":"code","child":[{"node":"text","text":"orderId"}]},{"node":"text","text":"\n                reference, you can also query the Braintree platform using the\n                "},{"node":"element","tag":"code","child":[{"node":"text","text":"orderId"}]},{"node":"text","text":"\n                to get the transaction results and other transaction details. The\n                "},{"node":"element","tag":"code","child":[{"node":"text","text":"orderId"}]},{"node":"text","text":"\n                does not expire.\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                You may want to build your own retry logic to handle an offline\n                transaction being declined once forwarded. To do this, you can request to\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/vaulting-and-customers/#vaulting-a-card-with-a-transaction"},"child":[{"node":"text","text":"vault a payment method"}]},{"node":"text","text":"\n                during your offline charge request. This will allow you to retrieve the\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Object--PaymentMethod"},"child":[{"node":"element","tag":"code","child":[{"node":"text","text":"paymentMethodId"}]}]},{"node":"text","text":"\n                token after the transaction is forwarded. You may perform a subsequent\n                card-not-present\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Mutation--authorizePaymentMethod"},"child":[{"node":"text","text":"authorization"}]},{"node":"text","text":"\n                or\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Mutation--chargePaymentMethod"},"child":[{"node":"text","text":"charge"}]},{"node":"text","text":"\n                against this token to recover funds for the offline transaction originally\n                declined.\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                                The ability to vault a payment method with a charge during an\n                                offline transaction was added in\n                                "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/reference/app-version-release-notes/#version510"},"child":[{"node":"text","text":"firmware version 5.1.0"}]},{"node":"text","text":".\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"h2","attr":{"id":"which-api-calls-are-supported-offline"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"Which API calls are supported Offline?"}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                While we are continuously adding functionality to our offline processing\n                offering, there are a limited number of reader interactions that are\n                supported in an offline state. See below for the full list:\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"ul","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/offline-transactions/#initiating-an-offline-transaction"},"child":[{"node":"text","text":"Initiate a charge"}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/"},"child":[{"node":"text","text":"Initiate an authorization"}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"Initiate a refund"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/display-information/#request-text-display"},"child":[{"node":"text","text":"Request text display"}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/display-information/#request-line-item-display"},"child":[{"node":"text","text":"Request line item display"}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n\n                "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/receipt-printing-api/"},"child":[{"node":"text","text":"Receipt Printing API"}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                                Note that for these flows to work offline, your requests must be\n                                sent to the API endpoint on the reader (IP address : port\n                                /graphql) as shown\n                                "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/offline-transactions/#initiating-an-offline-transaction"},"child":[{"node":"text","text":"here"}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        \n    "}]},{"node":"element","tag":"code","child":[{"node":"text","text":"\n        "}]},{"node":"element","tag":"div","attr":{"class":"nextPreviousButtonWrapper"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","attr":{"class":"nextLink-bt"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/graphql-error-handling/","class":"nextLink-link"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"svg","attr":{"xmlns":"http://www.w3.org/2000/svg","viewBox":["0","0","24","24"],"width":"24","fill":"none","height":"24"},"child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"path","attr":{"d":["M9.707","18.7033C10.0975","18.3128","10.0975","17.6796","9.707","17.2891L5.414","12.9961H21C21.5523","12.9961","22","12.5484","22","11.9961C22","11.4438","21.5523","10.9961","21","10.9961H5.414L9.707","6.7032C10.0975","6.31268","10.0975","5.67951","9.707","5.28899C9.31647","4.89846","8.68333","4.89846","8.2928","5.28899L2.2998","11.282C2.29375","11.288","2.28777","11.2941","2.28179","11.3003C2.10735","11.4803","2","11.7257","2","11.9961C2","12.2654","2.10637","12.5097","2.27947","12.6895C2.28441","12.6948","2.2895","12.7","2.29457","12.7052L2.29713","12.7077L2.2998","12.7103L8.29273","18.7033C8.68326","19.0938","9.31641","19.0938","9.707","18.7033Z"],"fill":"#0070E0"}},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"span","child":[{"node":"text","text":"GraphQL Error Handling"}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","attr":{"class":"nextLink-bt"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/additional-api-calls/","class":"nextLink-link"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"span","child":[{"node":"text","text":"Additional API Calls"}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"svg","attr":{"xmlns":"http://www.w3.org/2000/svg","viewBox":["0","0","24","24"],"width":"24","fill":"none","height":"24"},"child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"path","attr":{"d":["M14.2931","18.7033C13.9026","18.3128","13.9026","17.6796","14.2931","17.2891L18.5861","12.9961H3C2.44772","12.9961","2","12.5484","2","11.9961C2","11.4438","2.44772","10.9961","3","10.9961H18.5861L14.2931","6.7032C13.9026","6.31268","13.9026","5.67951","14.2931","5.28899C14.6837","4.89846","15.3168","4.89846","15.7073","5.28899L21.7003","11.282C21.7064","11.288","21.7123","11.2941","21.7182","11.3003C21.8926","11.4803","22","11.7257","22","11.9961C22","12.2654","21.8936","12.5097","21.7205","12.6895C21.7156","12.6948","21.7105","12.7","21.7054","12.7052L21.7029","12.7077L21.7003","12.7103L15.7074","18.7033C15.3168","19.0938","14.6837","19.0938","14.2931","18.7033Z"],"fill":"#0070E0"}},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n    \n"}]}]}},"links":[{"rel":"self","method":"GET","href":"https://api.paypal.com/v2/content/environments/a9f00b36-5a19-4403-8b49-ceaa35dd9d1f/entries/5vj5I4wCCZzh42yWAHBL5o"}],"ecm":{"envAllowsPreview":true},"markdown":"---\ntitle: Offline Transactions\nslug: /in-person/guides/offline-transactions/\ncreateTime: '2024-11-20T19:03:53.719Z'\nupdateTime: '2025-01-03T19:42:38.395Z'\n---\n\n\n\n# Offline Transactions\n\nEnable payment acceptance even when your internet is offline.\n\n\n## Introduction\n\nOffline transaction processing, also known as store-and-forward or SAF, allows payment acceptance even when readers are offline and unable to connect to the internet. Transactions are stored on the card reader. Once the reader is able to connect to the internet again, the stored transactions are sent to Braintree for payment processing.\n\n**NOTE**\nIt is recommended to use Store \u0026 Forward starting in firmware version 5.0.0 which has critical improvements to this functionality.\n\n\n### Merchant Liability\n\nFor transactions that occur while in offline mode via SAF the liability for the transaction falls on the merchant. For example, if once the stored offline transaction is forwarded to Braintree for processing and then comes back as declined or refused by the issuer then the merchant will not be funded for the transaction. For this reason, we advise merchants to always think about how to best mitigate this risk.\n\n\n### Offline Floor Limits\n\nTypically for offline transactions a merchant will want to determine what is the maximum transaction amount they would like to allow for an offline transaction, this is called a \"floor limit\". From a Braintree perspective, we will allow for any amount to be sent to the reader in an offline session, and for this reason, it is up to the POS system (or API caller application) to create parameters around floor limits and only send the transaction request to the reader if the transaction amount is in line with the set parameters on the POS. Usually, these parameters will vary by merchant and should be configurable to some degree. You may also optionally create other risk mitigating parameters for example \"maximum number of transactions to be allowed in a given offline session\", or \"maximum amount to be allowed in a given offline session\", etc...\n\n**NOTE**\nWhen determining what your offline floor limits should be it is advised to consider average transaction value as well as risk tolerance for a potentially declined or refused transaction.\n\n\n### Initiating an Offline Session\n\nAs you will discover once you review the technical documentation below relating to [initiating an offline transaction](/braintree/in-person/guides/offline-transactions/#initiating-an-offline-transaction), you will notice that to initiate the transaction, you must direct your requests to an endpoint on the reader itself as opposed to the cloud Braintree API endpoint. For this reason, the POS (or API caller application) must have a toggle of some sort to tell the POS to \"go into offline mode\" which would trigger the endpoint switching and put the POS in a state where it should adhere to offline floor limit parameters.\n\n\n## Getting the Reader set up\n\nIn order to transact offline, there are a few prerequisites\n\n\n- The reader and POS must be on the same local area network\n\n\n- The reader and POS must have a [static IP address](/braintree/in-person/guides/setup-reader/#configuring-static-ip)\n\n\n\nFor the POS to securely initiate a transaction on the reader, they must establish a mutually authenticated connection, which will be established via mutual TLS. In order to create this mutually authenticated connection, SSL certificates will need to be generated for both the POS and reader.\n\n\n### 1) Certificate Generation Overview\n\nCertificate generation can be done via openssl. This guide will work with openssl@1.1.1. Variants other than this, like LibreSSL, etc. may work with this guide but are not guaranteed.\n\nThis guide will walk through generating a self-signed root Certificate Authority, and use that root certificate to create signed server (reader) and client (POS) certificates.\n\n\n### 2) Root Certificate Authority\n\nFirst, we'll need to generate a private key.\n\n$ openssl genrsa -out ca.key 4096Next, we'll use this key to generate the root certificate.\n\n$ openssl req \\ -new -x509 -days 365 \\ -key ca.key -out ca.crt \\ -nodes -subj \"/CN=dev-root-ca\"\n### 3) Reader and POS Certificates\n\nNow, we can use our root certificate to create the POS and reader certificates. You'll need the reader and POS IP addresses for this next part.\n\nFirst we will need to create an extensions file that looks like this named v3-extensions.ext\n\n[reader] keyUsage = critical, digitalSignature, keyEncipherment extendedKeyUsage = serverAuth subjectAltName=IP:$READER_IP_ADDRESS authorityKeyIdentifier=keyid,issuer [pos] keyUsage = critical, digitalSignature, keyEncipherment extendedKeyUsage = clientAuth subjectAltName=IP:$POS_IP_ADDRESS authorityKeyIdentifier=keyid,issuerMake sure to substitute the READER_IP_ADDRESS and POS_IP_ADDRESS in the above file with your respective values.\n\n**NOTE**\nIf you would like to use a shared cert across all of your devices, then you may use a generic domain instead of an IP address for the reader and POS certs, for example: **DNS:$domain_name** instead of **IP:$READER_IP_ADDRESS** and **IP:$POS_IP_ADDRESS**\n\nNext, we will generate the reader's certificate, again substitute the reader IP address.\n\n$ openssl genrsa -out reader.key 4096 $ openssl req \\ -new -key reader.key \\ -out reader.csr \\ -nodes -subj \"/CN=$READER_IP_ADDRESS\" $ openssl x509 \\ -req -days 365 \\ -in reader.csr \\ -CA ca.crt -CAkey ca.key \\ -set_serial 1 \\ -out reader.crt \\ -extfile v3-extensions.ext -extensions readerFinally, we will generate the POS certificates\n\n$ openssl genrsa -out pos.key 4096 $ openssl req \\ -new -key pos.key \\ -out pos.csr \\ -nodes -subj \"/CN=$POS_IP_ADDRESS\" $ openssl x509 \\ -req -days 365 \\ -in pos.csr \\ -CA ca.crt -CAkey ca.key \\ -set_serial 2 \\ -out pos.crt \\ -extfile v3-extensions.ext -extensions posAfter this step you should have the following files generated:\n\n\n- ca.crt\n\n\n- ca.key\n\n\n- reader.crt\n\n\n- reader.csr\n\n\n- reader.key\n\n\n- pos.crt\n\n\n- pos.csr\n\n\n- pos.key\n\n\n\n\n### 4) Verifying Certificates\n\nNow that we have our certificates generated, there are a few ways we can ensure these will work as expected. One way is to use the openssl  s_client and s_server tools. These will let us test the mutual TLS handshake that occurs between the POS and Reader, and determine if there are any problems.\n\nFirst, we'll start the \"server\", or reader:\n\n$ openssl s_server \\ -accept 8080 \\ -cert reader.crt \\ -key reader.key \\ -CAfile ca.crtThis starts a server on port 8080, with the reader certificates. Now, let's test our connection like so:\n\n$ openssl s_client \\ -connect localhost:8080 \\ -cert pos.crt \\ -key pos.key \\ -CAfile ca.crtIf running the above results in no error outputs, then the certificates are working as expected.\n\n\n### 5) Getting Certificates onto Readers\n\nIn order to use these certificates, the Readers will need to download these certificates from Braintree servers and use them on start-up. In order to accomplish this, the root CA and reader certificate as well as reader private key will need to be sent to Braintree support so that the files can be provisioned for the readers.\n\nIn order to do this securely, the certificates will need to be packaged into a PKCS12 container that is password protected like so:\n\n$ openssl pkcs12 -export -out 111-222-333.pfx -inkey reader.key -in reader.crt -certfile ca.crtWhere you see 111-222-333 in the above example is the serial number of the card reader getting the certificate installed.\n\n\n## Initiating an Offline Transaction\n\nThe default port for the reader to accept store and forward transaction requests is 3030. If your reader IP address is then 192.168.0.155, the URL for API requests would be like so:\n\nhttps://192.168.0.155:3030/graphqlWhen making the API call to this URL, the certificate generated for the POS will need to be sent along with the request so that the reader can verify the POS.\n\nLike online transactions, to provide idempotency on the request charge mutation, you must also include the HTTP header Idempotency-Key with a unique value. UUIDv4 is recommended. For example, if using curl to make the request, you would include\n\n--header 'Idempotency-Key: 94c9ea8b-31b0-488e-a231-57e32f0bfd70'A sample charge GraphQL charge request would look like this:\n\n**NOTE**\nNote that there is an additional variable to include in your request called: \"deferredAuthorization\": true\n\nGraphQL MutationGraphQL VariablesSample API Responsemutation RequestChargeFromInStoreReader($input: RequestChargeFromInStoreReaderInput!) { requestChargeFromInStoreReader(input: $input) { clientMutationId id status } }{ \"input\": { \"clientMutationId\": \"mutation_id\", \"readerId\": \"$YOUR_READER_ID\", \"transaction\": { \"amount\": \"39.85\", \"orderId\": \"ExampleOrderNumber-1221\", \"deferredAuthorization\": true } } }{ \"data\": { \"requestChargeFromInStoreReader\": { \"clientMutationId\": \"mutation_id\", \"id\": \"aW5zdG9yZWNvbnRleHRfI2I5NjNmZmVlYThhMDQ0ZDFiMmI2MGRmNzI1ZTJiNzQwI1ZFUklGT05FLTgwMy00MDYtODI1\", \"status\": \"PENDING\" } } }**NOTE**\nThe above example is for a Charge request, you may also perform a [card-present authorization](/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/) as an offline transaction\n\nBelow is an example of an offline unreferenced refund request. Context ID polling logic should be the same as for a request charge.\n\nGraphQL MutationGraphQL VariablesSample API Responsemutation RequestRefundFromInStoreReader($input: RequestRefundFromInStoreReaderInput!) { requestRefundFromInStoreReader(input: $input) { clientMutationId id status } }{ \"input\": { \"clientMutationId\": \"your mutation ID\", \"readerId\": \"your reader ID\", \"refund\": { \"amount\": \"20.00\", \"deferredAuthorization\": true, \"orderId\": \"Your Order Id\" } } }{ \"data\": { \"requestChargeFromInStoreReader\": { \"clientMutationId\": \"mutation_id\", \"id\": \"aW5zdG9yZWNvbnRleHRfI2I5NjNmZmVlYThhMDQ0ZDFiMmI2MGRmNzI1ZTJiNzQwI1ZFUklGT05FLTgwMy00MDYtODI1\", \"status\": \"PENDING\" } } }**NOTE**\nIt is important to note that we support the passing of merchantAccountId as well as customFields and a shopper statement descriptor in your store and forward request. However, there is no validation at the reader level against what is passed. This means that the validation occurs once the stored transactions are forwarded to Braintree and if bad values are passed then the transaction will fail once forwarded and the merchant will not be funded for the transaction.\n\n\n## Checking the Status of a Charge or Refund\n\nSimilar to the [online guide](/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status), the reader can be continuously polled with a query for updates on the transaction's completion status. The difference with an offline transaction is that when you poll the context ID using the reader IP address as an endpoint, you will only get the transaction completion status according to whether the reader has successfully collected card details to store while offline. This DOES NOT represent the final status of the transaction.\n\nTo get the final transaction status once stored card data is forwarded, you will need to use the context ID to poll against using the Braintree cloud API endpoint, but there are a few [rules](/braintree/in-person/guides/offline-transactions/#offline-transaction-rules) to keep in mind when building this logic.\n\n\n### Checking a Charge Status Example:\n\n**NOTE**\nAs of [firmware version 5.3.0](/braintree/in-person/reference/app-version-release-notes/#version530), we support retrieving bin,brandCode,applicationIdentifier API fields for an offline transaction node query.\n\nGraphQL QuerySample API Responsequery { node(id: {{context_id}}) { ... on RequestChargeInStoreContext { id status transaction { createdAt status amount { value currencyCode } paymentMethodSnapshot { ...on CreditCardDetails { origin { details { ... on EmvCardOriginDetails { applicationIdentifier } } } last4 expirationMonth expirationYear cardholderName bin brandCode } } } } } }{ \"data\": { \"node\": { \"id\": \"aW5zdG9yZWNvbnRleHRfIzE2MjYzNTE5Njk5ODEjVkVSSUZPTkUtODAzLTQyOC0wMzQ\", \"status\": \"PROCESSING\", \"transaction\": { \"createdAt\": \"2021-07-15T12:22:02.000000Z\", \"status\": \"AUTHORIZED\", \"amount\": { \"value\": \"10.00\", \"currencyCode\": \"USD\" }, \"paymentMethodSnapshot\": { \"last4\": \"8885\", \"expirationMonth\": \"12\", \"expirationYear\": \"2025\", \"cardholderName\": \"BRAINTREE TEST\", \"bin\": \"421212\", \"brandCode\": \"VISA\" } } } } }\n### Checking a Refund Status Example:\n\nGraphQL QuerySample API responsequery ID($transactionId: ID!) { node(id: $transactionId) { ... on RequestRefundInStoreContext { id status refund { createdAt status amount { value currencyCode } orderId paymentMethodSnapshot { ...on CreditCardDetails { origin { details { ... on EmvCardOriginDetails { applicationIdentifier } } } last4 expirationMonth expirationYear cardholderName bin brandCode } } merchantAccountId } } ... on RequestRefundInStoreContext { __typename id status refund { amount { value } createdAt orderId status merchantAccountId } } } }{ \"data\": { \"node\": { \"id\": \"aW5zdG9yZWNvbn3NzA4NzU2NDMjVkVSSUZPTkUtODA1LTAxNy00NTQ\", \"status\": \"COMPLETE\", \"refund\": { \"createdAt\": \"2022-07-25T17:41:17.05786544+00:00\", \"status\": \"AUTHORIZED\", \"amount\": { \"value\": \"20.00\", \"currencyCode\": \"USD\" }, \"orderId\": \"Your Order Id\", \"paymentMethodSnapshot\": { \"last4\": \"8885\", \"expirationMonth\": \"12\", \"expirationYear\": \"2025\", \"cardholderName\": \"BRAINTREE/TEST\" }, \"merchantAccountId\": null, \"descriptor\": { \"name\": \"test person\", \"phone\": null, \"url\": null }, \"customFields\": [ { \"name\": \"PayPal\", \"value\": \"Test\" } ] }, \"__typename\": \"RequestRefundInStoreContext\" } } }\n## Cancelling a Charge\n\nIf you need to stop a transaction from being paid while the reader is activated and requesting payment, you can [cancel](/braintree/graphql/reference/#Mutation--requestCancelFromInStoreReader) the InStoreContext. Cancelling an InStoreContext places the reader back into **idle mode** and returns you to the PayPal-branded screensaver.\n\nGraphQL MutationGraphQL VariablesSample API Responsemutation RequestCancelFromInStoreReader($input: RequestCancelFromInStoreReaderInput!) { requestCancelFromInStoreReader(input: $input) { clientMutationId id status } }{ \"input\": { \"inStoreContextId\": \"context-id\" } }{ \"data\": { \"requestCancelFromInStoreReader\": { \"clientMutationId\": null, \"inStoreContext\": { \"id\": \"aW5zdG9yZWNvbnRleHRfI2M4M2MzYTM5NDVhMDRlNTI4MmQ3NDcxZDIxNDY5MzFlI1ZFUklGT05FLTgwMy0zOTEtMjM2I3VzLXdlc3QtMg\", \"status\": \"CANCELLED\", } } } }\n## Offline Transaction Rules\n\nThis section outlines the logical rules to keep in mind as you build your offline processing flow.\n\n\n- The reader can store offline transactions in its memory for **up to 5 days**, after which the stored transactions will be erased. This has to do with card scheme rules for token management.\n\n\n- The reader will attempt to reconnect to the network every few seconds when its in an offline state, and once reconnected it will automatically upload all stored transactions to the Braintree Platform.\n\n\n- Once a stored offline transaction is successfully uploaded to the Braintree Platform, the context ID of that transaction will be **available for query for 24 hours**, after which it will be erased. See [offline transaction reconciliation](/braintree/in-person/guides/offline-transactions/#offline-transaction-reconciliation).\n\n\n- A single reader can store up to approximately 1,000 transactions in a given offline session without uploading to the Braintree Platform.\n\n\n- All **API inputs must be correct** for offline transactions, otherwise the context will stay in a \"PROCESSING\" status until the context expires after 7 days.\n\n\n\n\n## Offline Transaction Reconciliation\n\nIt is important to reconcile your offline transactions every day to ensure that the final transaction status (once forwarded) is known by the POS. This helps to ensure that your POS remains in sync with the actual transaction status given by the card issuer. To do this you will need to use the context ID from the offline transaction and poll against it using the Braintree Cloud API endpoint. This should be done for every offline transaction **at least once per day** since the **context ID will expire 24 hours** after the stored transaction data is uploaded to the Braintree Platform. When you get the API response from your context ID polling make sure to store the transaction ID and the transaction status in your POS database.\n\n**NOTE**\nBraintree Sandbox Cloud API Endpoint: [https://payments.sandbox.braintree-api.com/graphql](https://payments.sandbox.braintree-api.com/graphql)\n\nIt is also important to note that if you use a unique orderId reference, you can also query the Braintree platform using the orderId to get the transaction results and other transaction details. The orderId does not expire.\n\nYou may want to build your own retry logic to handle an offline transaction being declined once forwarded. To do this, you can request to [vault a payment method](/braintree/in-person/guides/vaulting-and-customers/#vaulting-a-card-with-a-transaction) during your offline charge request. This will allow you to retrieve the [paymentMethodId](/braintree/graphql/reference/#Object--PaymentMethod) token after the transaction is forwarded. You may perform a subsequent card-not-present [authorization](/braintree/graphql/reference/#Mutation--authorizePaymentMethod) or [charge](/braintree/graphql/reference/#Mutation--chargePaymentMethod) against this token to recover funds for the offline transaction originally declined.\n\n**NOTE**\nThe ability to vault a payment method with a charge during an offline transaction was added in [firmware version 5.1.0](/braintree/in-person/reference/app-version-release-notes/#version510).\n\n\n## Which API calls are supported Offline?\n\nWhile we are continuously adding functionality to our offline processing offering, there are a limited number of reader interactions that are supported in an offline state. See below for the full list:\n\n\n- [Initiate a charge](/braintree/in-person/guides/offline-transactions/#initiating-an-offline-transaction)\n\n\n- [Initiate an authorization](/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/)\n\n\n- Initiate a refund\n\n\n- [Request text display](/braintree/in-person/guides/display-information/#request-text-display)\n\n\n- [Request line item display](/braintree/in-person/guides/display-information/#request-line-item-display)\n\n\n- [Receipt Printing API](/braintree/in-person/guides/receipt-printing-api/)\n\n\n\n**NOTE**\nNote that for these flows to work offline, your requests must be sent to the API endpoint on the reader (IP address : port /graphql) as shown [here](/braintree/in-person/guides/offline-transactions/#initiating-an-offline-transaction)\n\n[GraphQL Error Handling](/braintree/in-person/guides/graphql-error-handling/)[Additional API Calls](/braintree/in-person/guides/additional-api-calls/)"},"routes/braintree/in-person":null},"actionData":null,"errors":null},"future":{"v2_dev":true,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":false,"v2_headers":false,"v2_meta":true,"v2_normalizeFormMethod":false,"v2_routeConvention":false}};</script><script nonce="Hhkt2cggZxUKPNTfrBuQ9uYmBREmv1smTdADz4fuOreVNWcf" type="module" async="">import "https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/manifest-D829D641.js";
import * as route0 from "https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/root-HIAAUWNH.js";
import * as route1 from "https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/routes/in-person-BCFKGM3O.js";
import * as route2 from "https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/routes/in-person/$-EGOLLNAC.js";
window.__remixRouteModules = {"root":route0,"routes/braintree/in-person":route1,"routes/braintree/in-person/$":route2};

import("https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/entry.client-I74HTVVJ.js");</script></body></html>