# Source: https://developer.paypal.com/braintree/in-person/guides/making-a-transaction/

<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Braintree In-Person Docs</title><meta name="description" content="Our mission is to empower developers with the tools, 
  resources, and simple-to-use SDKs and APIs to build on 
  one platform, so they can serve merchants from around the world."/><meta name="keywords" content=""/><link rel="canonical" href="https://developer.paypal.com/braintree/in-person/guides/making-a-transaction/"/><meta property="og:type" content="website"/><meta property="og:url" content="https://developer.paypal.com/braintree/in-person/guides/making-a-transaction/"/><meta property="og:title" content="Braintree In-Person Docs"/><meta property="og:description" content="Our mission is to empower developers with the tools, 
  resources, and simple-to-use SDKs and APIs to build on 
  one platform, so they can serve merchants from around the world."/><meta property="og:image" content="https://www.paypalobjects.com/devdoc/img/seo/ddnw_ogfallback.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:url" content="https://developer.paypal.com/braintree/in-person/guides/making-a-transaction/"/><meta name="twitter:title" content="Braintree In-Person Docs"/><meta name="twitter:description" content="Our mission is to empower developers with the tools, 
  resources, and simple-to-use SDKs and APIs to build on 
  one platform, so they can serve merchants from around the world."/><meta name="twitter:site" content="@paypaldev"/><meta name="twitter:creator" content="@paypaldev"/><meta name="twitter:image" content="https://www.paypalobjects.com/devdoc/img/seo/ddnw_twitterfallback.png"/><meta name="twitter:image:alt" content="Black and White PayPal Logo"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/variables-VGGZY4JK.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/footer-NG55V3IZ.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/header-RODVFCUO.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/sideBar-P2XH7TE5.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/app-AVOPA6BH.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/codeblock-DADUWXNB.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/prism-NEYM7EL4.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/components-D2NYPEGL.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/index-2Z52PXGI.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/paypal-ui/web/fonts-and-normalize/1-1-0/fonts-and-normalize.min.css"/><link rel="stylesheet" href="https://www.paypalobjects.com/paypal-ui/web/icon-font/0-0-1/icon-font.min.css"/><link rel="icon" href="https://www.paypalobjects.com/btdevdoc/braintree/img/favicon.png" type="image/png"/><link rel="stylesheet" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/articlesAndDocs-R4V4BBLG.css"/></head><body><header class="header"><div class="nav--global__wrapper" id="nav-global-wrapper"><a class="logo logo--articles" aria-label="Braintree a PayPal Service" data-track-event-properties="project=journey&amp;docs,context=navbar,component=link,action=click,descriptor=braintree logo,container=header,origin=support articles,intent=view support articles landing page,href=https://articles.braintreepayments.com" pa-marked="1" href="/braintree/in-person/"><span class="logo--fallback">Braintree a PayPal Service</span><span class="nav-logo"><img src="https://www.paypalobjects.com/paypal-ui/logos/svg/braintree-pp-color.svg" alt="PayPal Braintree logo" style="width:200px;height:40px"/></span></a><nav class="nav--global"><span class="mobile__nav-logo mobile__nav-item mobile__nav-left"><img src="https://www.paypalobjects.com/webstatic/icon/pp258.png" alt="PayPal Braintree Mobile logo" style="width:40px;height:40px;fill:#fff"/></span><span class="mobile__nav--global-active-category mobile__nav-item mobile__nav-center"><a class="mobile__nav-active-section-container"><span class="mobile__nav-active-section">API &amp; In-Person</span><span class="mobile__nav-dropdown-chevron"><style data-emotion="css 1bk0n6-svg-size_md">.css-1bk0n6-svg-size_md{speak:none;display:inline-block;aspect-ratio:1;width:2rem;height:2rem;}.css-1bk0n6-svg-size_md img,.css-1bk0n6-svg-size_md svg{width:100%;height:100%;display:block;}</style><span class="css-1bk0n6-svg-size_md" data-ppui-info="icons_8.24.1__7.46.3" width="40px" height="40px" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 18" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M4.291 6.293a1 1 0 0 1 1.415 0l3.293 3.293 3.293-3.293a1 1 0 1 1 1.414 1.414L9.713 11.7a1.01 1.01 0 0 1-1.428 0L4.29 7.707a1 1 0 0 1 0-1.414z" clip-rule="evenodd" data-ppui="true"></path></svg></span></span></a><div class="mobile__nav-active-tier">Initiate a Sale or Refund</div></span><ul class="nav--global-sites mobile__nav-item mobile__nav-right"><span class="nav--global-sites__items nav--global-sites__items-hidden"><li class="nav--global-sites__item nav--global-sites__link__container nav--global-sites__link__container-hidden"><a class="nav--global-sites__link test_nav_link_0" data-track-event-properties="project=journey&amp;amp;docs,context=navbar,component=link,action=click,container=header,descriptor=SDK Docs,intent=view SDK Docs landing page,href=/braintree/in-person/" pa-marked="1" href="/braintree/docs/">SDK Docs</a></li><li class="nav--global-sites__item nav--global-sites__link__container nav--global-sites__link__container-hidden"><a class="nav--global-sites__link test_nav_link_1 nav--global-sites__link--active" data-track-event-properties="project=journey&amp;amp;docs,context=navbar,component=link,action=click,container=header,descriptor=API &amp; In-Person Docs,intent=view API &amp; In-Person Docs landing page,href=/braintree/in-person/" pa-marked="1" href="/braintree/graphql/">API &amp; In-Person Docs</a></li><li class="nav--global-sites__item nav--global-sites__link__container nav--global-sites__link__container-hidden"><a class="nav--global-sites__link test_nav_link_2" data-track-event-properties="project=journey&amp;amp;docs,context=navbar,component=link,action=click,container=header,descriptor=Support Articles,intent=view Support Articles landing page,href=/braintree/in-person/" pa-marked="1" href="/braintree/articles/">Support Articles</a></li></span><li class="nav--global-sites__item"><button id="searchOpenTrigger" class="search__trigger nav--link" aria-label="Hit enter to search" data-track-event-properties="project=docs&amp;journey,context=search,component=button,action=click,intent=open search,descriptor=Start typing to search,origin=sites search&amp;" pa-marked="1"><svg class="search__trigger-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Open search icon</title><path d="M6.99994 13.988C8.33314 13.9878 9.63816 13.6042 10.7595 12.883L17.2456 19.3688L19.368 17.2466L12.885 10.7639C13.7224 9.45534 14.1003 7.90523 13.959 6.35811C13.8178 4.811 13.1654 3.35494 12.1049 2.21967C11.0444 1.08439 9.63613 0.334526 8.1022 0.0883654C6.56828 -0.157795 4.99605 0.113766 3.63358 0.860206C2.2711 1.60665 1.19592 2.78547 0.577676 4.21071C-0.0405686 5.63594 -0.16669 7.22645 0.219211 8.73131C0.605111 10.2362 1.48107 11.5697 2.70888 12.5216C3.93669 13.4734 5.44647 13.9893 7.00002 13.988H6.99994ZM6.99994 1.98801C7.98884 1.98801 8.95554 2.28125 9.77779 2.83066C10.6 3.38007 11.2409 4.16096 11.6193 5.07459C11.9978 5.98822 12.0968 6.99355 11.9039 7.96346C11.7109 8.93336 11.2347 9.82428 10.5355 10.5235C9.83621 11.2228 8.9453 11.699 7.97539 11.8919C7.00549 12.0849 6.00015 11.9858 5.08652 11.6074C4.17289 11.229 3.392 10.5881 2.84259 9.76586C2.29318 8.94361 1.99994 7.97691 1.99994 6.98801C2.0015 5.6624 2.52878 4.39154 3.46613 3.4542C4.40347 2.51685 5.67433 1.98957 6.99994 1.98801Z" fill="#dedede"></path></svg><span class="search__trigger-text">Search</span></button></li><button data-testid="sidebar-button" class="sidebar-menu-button"><style data-emotion="css 1bk0n6-svg-size_md">.css-1bk0n6-svg-size_md{speak:none;display:inline-block;aspect-ratio:1;width:2rem;height:2rem;}.css-1bk0n6-svg-size_md img,.css-1bk0n6-svg-size_md svg{width:100%;height:100%;display:block;}</style><span class="css-1bk0n6-svg-size_md" data-ppui-info="icons_8.24.1__7.46.3" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path d="M5 5a1 1 0 0 0 0 2h14a1 1 0 1 0 0-2H5zm-1 7a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1zm0 6a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1z" data-ppui="true"></path></svg></span></button></ul><div class="header--aside"><span class="nav--global-sites__item"><a class="nav--global-sites__link" pa-marked="1" href="/braintree/help">Get Help</a></span><span class="nav--global-sites__item" id="contact-sales-nav"><a href="https://www.braintreepayments.com/contact/sales" class="nav--global-sites__link" pa-marked="1">Contact Sales</a></span><div class="login-buttons"><span class="nav--global-sites__item" id="create-account_button"><a class="nav--global-sites__link" pa-marked="1" target="_blank" rel="noreferrer" href="https://www.braintreepayments.com/sandbox" aria-label="Sign up for a sandbox account">Create Account</a></span><span class="nav--global-sites__item"><a class="nav--global-sites__link" href="/braintree/api/auth/connect" aria-label="Log into sandbox" rel="noreferrer" pa-marked="1">Login</a></span></div><div class="header__dropdown ab-control-panel-dropdown-a"><button class="dropdown__title button button--small hamburger-small" style="margin-bottom:0" aria-label="Access production control panel" data-track-event-properties="project=journey&amp;docs,context=navbar,component=dropdown,action=click,container=header,descriptor=more icon,intent=choose a control panel link" pa-marked="1"><svg class="dropdown__icon--closed" width="4" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill="#fff"></path></svg></button><div class="dropdown__content"><div class="dropdown__section"><h3 class="dropdown__section-title">Production Control Panel</h3><ul class="dropdown__list"><li class="dropdown__item"><a class="link-list-link dropdown__link" href="https://www.braintreegateway.com/login" target="_blank" aria-label="Log into your production account" data-track-event-properties="project=journey&amp;docs,context=navbar,component=dropdown item,action=click,descriptor=log in,intent=view production login,href=https://www.braintreegateway.com/login" pa-marked="1" rel="noreferrer">Login</a></li></ul><h3 class="dropdown__section-title">Become a Merchant</h3><ul class="dropdown__list"><li class="dropdown__item"><a class="link-list-link dropdown__link" href="https://www.braintreepayments.com/contact/sales" aria-label="Contact sales on the website" target="_blank" data-track-event-properties="project=journey&amp;docs,context=navbar,component=dropdown item,action=click,descriptor=contact sales,intent=view the sales contact page,href=https://www.braintreepayments.com/contact/sales" pa-marked="1" rel="noreferrer">Contact Sales</a></li></ul></div></div></div></div></nav></div><nav class="nav--local"><ul class="nav__list" id="main-nav-links"><div class="hoverDropdown__wrapper navLinkWithHover"><div class="hoverDropdown__target"><li class="nav__item"><a class="nav--link test_sub_nav_link_0" data-track-event-properties="project=journey&amp;docs,context=navbar,component=link,action=click,container=header,descriptor=about,intent=view support articles landing page,href=/braintree/articles/" pa-marked="1" href="/braintree/graphql/">Online</a></li></div></div><div class="hoverDropdown__wrapper navLinkWithHover"><div class="hoverDropdown__target"><li class="nav__item"><a class="nav--link test_sub_nav_link_1 is-active" data-track-event-properties="project=journey&amp;docs,context=navbar,component=link,action=click,container=header,descriptor=about,intent=view support articles landing page,href=/braintree/articles/" pa-marked="1" href="/braintree/in-person/">In-Person</a></li></div></div></ul></nav></header><div class="flex-body"><div class="flex-sidebar"><div><aside class="sidebar" data-track-event-context="left-hand nav"><div class="sidebar__inner"><div class="menu-group"><span class="menu-group__title" data-title="">Integration Guides</span><ul class="menu"><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/api-authentication/"><button class="menu__link" pa-marked="1">API Authentication</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/setup-reader/"><button class="menu__link" pa-marked="1">Setup Reader</button></a></div></li><li class="menu__item is-open auto-open"><div class="menu-item__title"><div class="menu-item__dropdown"><svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.81183 6.65363C4.12865 6.33681 4.64232 6.33681 4.95913 6.65363L10.0643 11.7588L15.1696 6.65363C15.4864 6.33681 16 6.33681 16.3169 6.65363C16.6337 6.97045 16.6337 7.48411 16.3169 7.80093L10.6437 13.4741C10.3237 13.7941 9.80493 13.794 9.48496 13.4741L3.81183 7.80093C3.49501 7.48411 3.49501 6.97045 3.81183 6.65363Z" fill="#001435"></path></svg></div><a href="/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/"><button class="menu__link is-active" pa-marked="1">Initiate a Sale or Refund</button></a></div><ul class="menu-list__hidden"><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/"><button class="menu__link" pa-marked="1">Initiate a Card Present Authorization</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/making-a-transaction/level-2-and-level-3-data-processing/"><button class="menu__link" pa-marked="1">Level 2 and Level 3 Data Processing</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/making-a-transaction/passing-lodging-data/"><button class="menu__link" pa-marked="1">Passing Lodging Data</button></a></div></li></ul></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/vaulting-and-customers/"><button class="menu__link" pa-marked="1">Vaulting and Customers</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/paypal-and-venmo-qrc/"><button class="menu__link" pa-marked="1">PayPal and Venmo QRC</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/display-information/"><button class="menu__link" pa-marked="1">Display Information</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/custom-prompts/"><button class="menu__link" pa-marked="1">Custom Prompts</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/card-data-collection/"><button class="menu__link" pa-marked="1">Card Data Collection</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/graphql-error-handling/"><button class="menu__link" pa-marked="1">GraphQL Error Handling</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/offline-transactions/"><button class="menu__link" pa-marked="1">Offline Transactions</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/additional-api-calls/"><button class="menu__link" pa-marked="1">Additional API Calls</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/receipt-printing-api/"><button class="menu__link" pa-marked="1">Receipt Printing API</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/reporting-and-reconciliation/"><button class="menu__link" pa-marked="1">Reporting and Reconciliation</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/testing-your-integration/"><button class="menu__link" pa-marked="1">Testing Your Integration</button></a></div></li><li class="menu__item"><div class="menu-item__title"><div class="menu-item__dropdown"></div><a href="/braintree/in-person/guides/ready-for-launch/"><button class="menu__link" pa-marked="1">Ready for Launch?</button></a></div></li></ul></div></div></aside></div></div><div id="contentContainer" class="flex-content"><main id="main-section" class="documentation-content__wrapper"><article class="main-content js-outlet docs--constrained"><div class="subtitle-container"><div class="breadcrumb breadcrumbInner"><div class="breadcrumbItem"><a class="breadcrumbLink">Integration Guides</a><span style="padding:0 4px">/</span></div><div class="breadcrumbItem"><a href="/braintree/in-person/guides/making-a-transaction/" class="activeBreadcrumbLink">Initiate a Sale or Refund</a></div></div><div class="markdownopts-container"><div class="markdownopts-face-container"><button class="markdownopts-face-button"><svg fill="#000000" width="16" height="16" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg" style="width:16px;height:16px;margin-right:8px"><title>OpenAI icon</title><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"></path></svg>Ask ChatGPT</button><button class="markdownopts-chevron-button" data-testid="chevron-button"><style data-emotion="css 1bk0n6-svg-size_md">.css-1bk0n6-svg-size_md{speak:none;display:inline-block;aspect-ratio:1;width:2rem;height:2rem;}.css-1bk0n6-svg-size_md img,.css-1bk0n6-svg-size_md svg{width:100%;height:100%;display:block;}</style><span class="css-1bk0n6-svg-size_md" data-ppui-info="icons_8.24.1__7.46.3" style="width:16px;height:16px" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M4.292 8.293a1 1 0 0 1 1.414 0L12 14.586l6.293-6.293a1 1 0 0 1 1.414 1.414L12.713 16.7a1.01 1.01 0 0 1-1.428 0L4.292 9.707a1 1 0 0 1 0-1.414z" clip-rule="evenodd" data-ppui="true"></path></svg></span></button></div></div></div><div class="main-article-content"><div class="ecmRichText" style="margin-bottom:0px"><main><header><h1><span>Initiate a Sale or Refund</span></h1><p class="markdown-p"><span>This article covers both sale and refund transactions</span></p></header><div><h2 id="initializing-the-reader-for-charging" class="test_h2 markdown-h2"><span>Initializing the Reader for Charging</span><a class="icon icon--link hash-link" href="#initializing-the-reader-for-charging" aria-label="Initializing the Reader for Charging"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
            When you're ready to charge a customer, you should create an In-Store
            Context by
            </span><a href="/braintree/graphql/reference/#Mutation--requestChargeFromInStoreReader"><span>requesting a charge from a card reader</span></a><span>. In this step, your application will specify, at minimum, the
            </span><code><span>readerId</span></code><span>
            ,
            </span><code><span>merchantAccountId</span></code><span>and
            </span><code><span>transaction.amount</span></code><span>
            details to initialize the reader for payment acceptance. Note that the
            </span><code><span>merchantAccountId</span></code><span>is not validated against in the Sandbox
            environment; however, this is a required value in the production
            environment for all interactions with the card reader.
        </span></p><p class="markdown-p"><span>
            Charging is similar to authorizing, except that if the authorization is
            successful, Braintree will automatically capture the transaction. This is
            also known as
            </span><a href="/braintree/docs/reference/request/transaction/sale/"><span>creating a Sale Transaction</span></a><span>.
        </span></p><p class="markdown-p"><span>
            To provide idempotency on the request charge mutation, you must also
            include the HTTP header
            </span><code><span>Idempotency-Key </span></code><span>with a unique value. UUIDv4 is recommended.
            For example, if using
            </span><code><span>curl</span></code><span>
            to make the request, you would include
        </span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            Using
                            </span><code><span>Idempotency-Key </span></code><span>is an important way of preventing
                            duplicate charges to your customer in the event of an API
                            communication failure. For example, if you request a charge from
                            the reader, the customer completes the charge on the reader, but
                            for some reason, the POS does not get back the transaction result
                            before timing out. In this scenario, the POS could recover the
                            original transaction using the same
                            </span><code><span>Idempotency-Key </span></code><span>without accidentally creating a
                            duplicate charge.
                        </span></span></div></div></p></div></div></div><div><div class="styles_tab_container"><ol class="styles_tab_list styles_tab_list_no_label"><div><li class="styles_tab_list_item styles_tab_list_active"></li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre class="language-bash"><code class="language-bash">--header &#x27;Idempotency-Key: 94c9ea8b-31b0-488e-a231-57e32f0bfd70&#x27;</code></pre></div></div></div><div><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Mutation</li><li class="styles_tab_list_item">GraphQL Variables</li><li class="styles_tab_list_item">Sample API Response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">mutation RequestChargeFromInStoreReader($input: RequestChargeFromInStoreReaderInput!) {
                requestChargeFromInStoreReader(input: $input) {
                    clientMutationId
                    id
                    status
                    reader {
                        id
                        name                
                        status
                    }
                }
            }</code></pre></div></div></div><div><div><img src="https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20Sale:Tap%20to%20pay.jpeg"/></div></div><h2 id="checking-the-reader-charge-status" class="test_h2 markdown-h2"><span>Checking the Reader Charge Status</span><a class="icon icon--link hash-link" href="#checking-the-reader-charge-status" aria-label="Checking the Reader Charge Status"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
            After the reader is initialized for payment, your application must wait
            for the customer to interact with it (i.e. insert a test card) and for the
            payment attempt to be processed. Your application should use
            </span><a href="/braintree/graphql/reference/#Query--node"><span>the node query</span></a><span>
            to poll on a 2-second interval between responses for the current status of
            the payment using the
            </span><code><span>RequestChargeInStoreContext.id</span></code><span>
            received at charge initialization and monitor the
            </span><code><span>RequestChargeInStoreContext.status</span></code><span>field as the transaction
            goes through the lifecycle.
        </span></p><div><div><img src="https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20Sale:Checking%20the%20reader%20charge%20status.png"/></div></div><p class="markdown-p"><span>
            When the
            </span><code><span>RequestChargeInStoreContext.status</span></code><span>
            changes to "COMPLETE", you will also receive a transaction object
            </span><code><span>RequestChargeInStoreContext.transaction</span></code><span>in the response. Save
            the completed
            </span><code><span>RequestChargeInStoreContext.transaction.id</span></code><span>
            in your database for referencing the transaction in subsequent operations.
        </span></p><p class="markdown-p"><span>
            All successful test transactions should have a transaction amount value
            below $2,000 for testing. For more info on using amounts to simulate
            various transaction outcomes, look at
            </span><a href="/braintree/in-person/guides/testing-your-integration/"><span>Testing Your Integration</span></a><span>.
        </span></p><p class="markdown-p"><br/><a href="/braintree/in-person/guides/testing-your-integration/"><strong><span>Testing the Unhappy Paths in Sandbox</span></strong></a><strong><span>:</span></strong></p><p class="markdown-p"><strong><br/></strong></p><div><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Query</li><li class="styles_tab_list_item">PENDING Response</li><li class="styles_tab_list_item">COMPLETE Response</li><li class="styles_tab_list_item">FAILED Response : Decline</li><li class="styles_tab_list_item">FAILED Response : Network Error</li><li class="styles_tab_list_item">FAILED Response: Gateway Reject</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">{
                node(id: &quot;{{last_braintree_instore_context}}&quot;) {
                 ... on RequestChargeInStoreContext {
                  id
                  status
                  statusReason
                  reader {
                   id
                   name
                   status
                  }
                  transaction {
                   id
                   orderId
                   status
                   statusHistory {
                    ... on PaymentStatusEvent {
                     status
                     timestamp
                     terminal
                     ... on AuthorizedEvent {
                      processorResponse {
                       authorizationId
                       emvData
                       message
                       legacyCode
                       retrievalReferenceNumber
                      }
                     }
                     ... on GatewayRejectedEvent {
                      gatewayRejectionReason
                     }
                     ... on FailedEvent {
                      processorResponse {
                       retrievalReferenceNumber
                       emvData
                       message
                       legacyCode
                      }
                      networkResponse {
                       message
                       code
                      }
                     }
                     ... on ProcessorDeclinedEvent {
                      processorResponse {
                       legacyCode
                       message
                       authorizationId
                       additionalInformation
                       retrievalReferenceNumber
                       emvData
                      }
                      declineType
                      networkResponse {
                       code
                       message
                      }
                     }
                    }
                   }
                   merchantAddress {
                    company
                    streetAddress
                    addressLine1
                    extendedAddress
                    addressLine2
                    locality
                    adminArea2
                    region
                    adminArea1
                    postalCode
                    countryCode
                    phoneNumber
                   }
                   amount {
                    value
                    currencyIsoCode
                   }
                   merchantAccountId
                   merchantName
                   createdAt
                   channel
                   customFields {
                    name
                    value
                   }
                   paymentMethodSnapshot {
                    ... on CreditCardDetails {
                     origin {
                      details {
                       ... on EmvCardOriginDetails {
                        applicationPreferredName
                        applicationIdentifier
                        terminalId
                        inputMode
                        pinVerified
                       }
                      }
                     }
                     brandCode
                     last4
                     bin
                     expirationMonth
                     expirationYear
                     cardholderName
                     binData {
                      issuingBank
                      countryOfIssuance
                      prepaid
                      healthcare
                      debit
                      commercial
                     }
                    }
                   }
                  }
                 }
                }
               }</code></pre></div></div></div><h3 id="charge-flow-example-sequence-diagram" class="test_h3 markdown-h3"><span>Charge Flow Example Sequence Diagram</span><a class="icon icon--link hash-link" href="#charge-flow-example-sequence-diagram" aria-label="Charge Flow Example Sequence Diagram"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            The following high-level sequence diagram depicts an example charge flow;
            however, this flow can vary depending on whether you are vaulting, and
            polling logic may also vary by application. This is just an example flow.
        </span></p><div><div><img src="https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Charge%20Flow%20Sequence%20Diagram%20.webp"/></div></div><h2 id="recommended-timeout-logic" class="test_h2 markdown-h2"><span>Recommended Timeout Logic</span><a class="icon icon--link hash-link" href="#recommended-timeout-logic" aria-label="Recommended Timeout Logic"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
            Knowing that every application will have different flows and architectural
            constraints the following recommended timeout logic is just a suggestion
            based on best practices, but every integration may be different.
        </span></p><p class="markdown-p"><span>
            Generally, the card reader has a built-in timeout logic of 180 seconds for
            a “maximum checkout time,” that is, from the moment you
            </span><a href="/braintree/in-person/guides/making-a-transaction/#initializing-the-reader-for-charging"><span>request a charge</span></a><span>
            from the card reader, it will hang for 180 seconds if no payment
            instrument is presented. However, it is recommended for the POS
            application to have its own timeout logic to make sure the POS stays in
            sync with the card reader and provides a seamless experience to the
            customer.
        </span></p><h4 id="recommended-sequence-for-initializing-card-reader-and-polling-for-transaction-result" class="test_h4 markdown-h4"><span>Recommended sequence for initializing card reader and polling for
                transaction result:</span><a class="icon icon--link hash-link" href="#recommended-sequence-for-initializing-card-reader-and-polling-for-transaction-result" aria-label="Recommended sequence for initializing card reader and polling for
                transaction result:"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h4><div><style data-emotion="css 19859z6-text_body-legacy_table-text_body_strong-align_start-w100">.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100{color:#202020;font-family:PayPalOpen-Regular,"Helvetica Neue",Arial,sans-serif;font-size:0.875rem;line-height:1.125rem;font-weight:400;border-spacing:0;border-collapse:separate;text-align:start;width:100%;}@media screen and (max-width: 752px){.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100{font-size:min(0.875rem, 28px);line-height:min(1.125rem, 36px);}}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr{background-color:#f4f4f7;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td,.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th{border-bottom:0.0625rem solid #545d68;border-top:0.0625rem solid transparent;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td{padding:0.75rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td:last-of-type{padding-right:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th{padding:0.75rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr{background-color:#1e2023;white-space:nowrap;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th{position:relative;color:#202020;font-family:PayPalOpen-Bold,"Helvetica Neue",Arial,sans-serif;font-size:0.875rem;line-height:1.125rem;font-weight:700;border-bottom:0.0625rem solid #545d68;padding:0.75rem;}@media screen and (max-width: 752px){.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th{font-size:min(0.875rem, 28px);line-height:min(1.125rem, 36px);}}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th:last-of-type{padding-right:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 th{text-align:start;}</style><table data-ppui-info="table_3.22.1__7.46.3" class="ppvx_table ppvx_table-responsive-sm ecmTable in-personTable css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100"><tbody><tr><td><div><div><p class="markdown-p"><strong><span>Step 1</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Generate unique
                                        </span><code><span>Idempotency key</span></code><span>
                                        (UUID) to be added in your request header
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Step 2</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Use an HTTP timeout window of 10 seconds if you do not get
                                        back a response
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Step 3</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Send the request again using the same
                                        </span><code><span>Idempotency key</span></code><span>, this allows you to recover the
                                        request session and avoid sending a duplicate request
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Step 4</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Once you get an
                                        </span><code><span>InstoreContext.Id</span></code><span>
                                        start polling against it to retrieve the transaction.Id and
                                        final transaction status
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Step 5</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Use an HTTP timeout window of 3 seconds if you do not get a
                                        response while polling against the
                                        </span><code><span>InStoreContext.Id</span></code></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Step 6</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Send the
                                        </span><a href="/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status"><span>polling request</span></a><span>
                                        every 2-3 seconds until you get the final
                                        transaction.status,
                                        </span><code><span>transaction.Id</span></code></p></div></div></td></tr></tbody></table></div><h2 id="cancelling-a-charge" class="test_h2 markdown-h2"><span>Cancelling a Charge</span><a class="icon icon--link hash-link" href="#cancelling-a-charge" aria-label="Cancelling a Charge"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
            If you need to stop a transaction from being paid while the reader is
            activated and requesting payment, you can
            </span><a href="/braintree/graphql/reference/#Mutation--requestCancelFromInStoreReader"><span>cancel</span></a><span>
            the
            </span><code><span>InStoreContext</span></code><span>. Cancelling an
            </span><code><span>InStoreContext</span></code><span>
            places the reader back into
            </span><strong><span>idle mode </span></strong><span>and returns you to the PayPal-branded
            screensaver. It is important to note that canceling a charge is only
            possible when a payment instrument has not yet been presented to the card
            reader. After the card reader has been presented with payment, the only
            way to stop that would be with a reversal or refund of payment.
        </span></p><div><div class="custom-block notification"><div class="custom-block-heading">Note</div><div class="custom-block-body"><span>
                Note that if you request to cancel the
                </span><code><span>InStoreContext</span></code><span> and the API returns a context status
                of "COMPLETE" that would indicate that the charge has already been
                processed. In this scenario, you should
                </span><a href="/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status"><span>check the reader charge status</span></a><span>
                again to get the
                </span><code><span>transactionId </span></code><span>and perform a reversal or
                </span><a href="/braintree/in-person/guides/making-a-transaction/"><span>refund </span></a><span>to cancel the charge.
                </span><br/><br/><br/><br/><em><strong><span>*** As of August 2022, we have introduced a new API error code 96716, which occurs when you attempt to cancel a context ID that is already in a "PROCESSING" or "COMPLETE" state</span></strong></em></div></div></div><div><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Mutation</li><li class="styles_tab_list_item">GraphQL Variables</li><li class="styles_tab_list_item">Sample API Response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">mutation RequestCancelFromInStoreReader(
                $input: RequestCancelFromInStoreReaderInput!
            ) {
                requestCancelFromInStoreReader(input: $input) {
                    id
                    status
                    reader {
                        id
                        name
                        status
                        location {
                            id
                            name
                        }
                    }
                }
            }</code></pre></div></div></div><h2 id="partial-authorizations" class="test_h2 markdown-h2"><span>Partial Authorizations</span><a class="icon icon--link hash-link" href="#partial-authorizations" aria-label="Partial Authorizations"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            The Partial Auth feature has undergone a rebuild as of October
                            2023. The information below represents the new behavior and
                            integration path.
                        </span></span></div></div></p></div></div></div><p class="markdown-p"><span>
            Partial Authorizations refer to transactions where a card with limited
            available funds is used to complete a purchase, and the available funds
            are less than the amount to be collected. This can occur with a debit card
            or a prepaid gift card. For example, if a merchant wants to charge $100,
            and the customer presents a card with only $50 available. With a partial
            authorization, the available $50 would be authorized or charged, while the
            POS system would need to recognize that there is a remaining balance to
            tender of $50. The POS should generally handle this like a split tender
            once it is determined that a partial authorization has occurred.
        </span></p><p class="markdown-p"><span>
            The way for the POS to know that a partial authorization has occurred
            would be to parse out the
            </span><a href="/braintree/graphql/reference/#Object--RequestChargeInStoreContext"><code><span>statusReason</span></code></a><span>
            from the context ID node query, which would show as
            </span><code><span>PARTIALLY_AUTHORIZED</span></code><span>. The
            </span><a href="/braintree/graphql/reference/#Enum--InStoreContextStatus"><span>context status</span></a><span>
            will be returned as
            </span><code><span>COMPLETE</span></code><span>.
        </span></p><p class="markdown-p"><span>
            In the Sandbox environment, you may test partial authorizations by using
            the
            </span><code><span>"amount":"1004"</span></code><span>
            in your request.
        </span></p><h3 id="partial-authorization-enablement" class="test_h3 markdown-h3"><span>Partial Authorization Enablement</span><a class="icon icon--link hash-link" href="#partial-authorization-enablement" aria-label="Partial Authorization Enablement"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            There are 2 ways to enable partial authorization on your account. You may
            have your PayPal Solutions Engineer or Integration Engineer enable this
            feature on your account. Alternatively, you may pass an API flag to
            determine whether you want to allow partial authorizations on the
            particular transaction using the
            </span><a href="/braintree/graphql/reference/#Input--InStoreAuthorizationInput"><code><span>acceptPartialAuthorization</span></code></a><span>
            object. This API flag is a boolean ("true/false") variable that will
            override the Braintree account-level configuration. We recommend using
            this API flag if you would like to allow for partial authorization on some
            transactions and not others, or if you want more control of the enablement
            of this feature.
        </span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            The Partial Authorization feature does need to be enabled on the
                            Braintree gateway account if you are not passing the
                            </span><code><span>acceptPartialAuthorization</span></code><span>
                            API flag. Please consult with your Solutions Engineer or
                            Integration Engineer to enable it.
                        </span></span></div></div></p></div></div></div><h2 id="refunding-your-customer" class="test_h2 markdown-h2"><span>Refunding Your Customer</span><a class="icon icon--link hash-link" href="#refunding-your-customer" aria-label="Refunding Your Customer"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
            There are 3 ways of refunding your customer once a charge has been
            completed.
        </span></p><h3 id="id-1-performing-a-referenced-refund" class="test_h3 markdown-h3"><span>1) Performing a Referenced Refund:</span><a class="icon icon--link hash-link" href="#id-1-performing-a-referenced-refund" aria-label="1) Performing a Referenced Refund:"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            To perform a referenced refund, you must have the
            </span><code><span>transactionId</span></code><span>
            from the authorization that you are attempting to refund against. This
            results in a refund that is linked to the original authorization.
            Typically, this is the preferred refund method as it allows for easy
            accounting. It is important to note that referenced refunds can either be
            in full or of a partial amount of the original authorization; however, the
            </span><em><span>refund amount can not exceed the full authorized amount</span></em><span>.
        </span></p><div><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Mutation</li><li class="styles_tab_list_item">GraphQL Variables</li><li class="styles_tab_list_item">Sample API Response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">mutation refundTransaction($input: RefundTransactionInput!) {
                refundTransaction(input: $input) {
                  refund {
                    id
                    amount {
                      value
                    }
                    orderId
                    status
                    refundedTransaction {
                      id
                      amount {
                        value
                      }
                      orderId
                      status
                    }
                  }
                }
              }</code></pre></div></div></div><h4 id="referenced-refund-example-sequence-diagram" class="test_h4 markdown-h4"><span>Referenced Refund Example Sequence Diagram:</span><a class="icon icon--link hash-link" href="#referenced-refund-example-sequence-diagram" aria-label="Referenced Refund Example Sequence Diagram:"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h4><div><div><img src="https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Referenced%20Refund%20Sequence%20Diagram.png" alt=""/></div></div><h3 id="id-2-using-the-reversal-api-call" class="test_h3 markdown-h3"><span>2) Using the Reversal API call</span><a class="icon icon--link hash-link" href="#id-2-using-the-reversal-api-call" aria-label="2) Using the Reversal API call"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            Sometimes, the POS might not know whether the original authorization has
            already been settled or not. In this scenario, it might be best to use a
            reversal call, which lets Braintree determine whether the transaction can
            be Voided or Refunded depending on the settlement status. For more details
            on how this works,
            </span><a href="/braintree/graphql/guides/transactions/#reversing-or-refunding-a-transaction"><span>follow this link</span></a><span>
            and see the example below:
        </span></p><div><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Mutation</li><li class="styles_tab_list_item">GraphQL Variables</li><li class="styles_tab_list_item">Sample API Response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">mutation reverseTransaction($input: ReverseTransactionInput!) {
                reverseTransaction(input: $input) {
                  reversal {
                      __typename
                    ... on Transaction {
                      id
                      legacyId
                      orderId
                      status
                      statusHistory {
                        status
                        terminal
                      }
                    }
                    ... on Refund {
                      id
                      legacyId
                      orderId
                      status
                      amount {
                        value
                      }
                      refundedTransaction {
                        id
                        amount {
                          value
                        }
                        orderId
                        status
                      }
                    }
                  }
                }
              }</code></pre></div></div></div><h4 id="reversal-api-call-example-sequence-diagram" class="test_h4 markdown-h4"><span>Reversal API Call Example Sequence Diagram:</span><a class="icon icon--link hash-link" href="#reversal-api-call-example-sequence-diagram" aria-label="Reversal API Call Example Sequence Diagram:"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h4><div><div><img src="https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Reversal%20API%20Calll%20Sequence%20Diagram.png" alt=""/></div></div><h3 id="id-3-performing-an-unreferenced-refund-or-blind-credit" class="test_h3 markdown-h3"><span>3) Performing an Unreferenced Refund or "Blind Credit":</span><a class="icon icon--link hash-link" href="#id-3-performing-an-unreferenced-refund-or-blind-credit" aria-label="3) Performing an Unreferenced Refund or &quot;Blind Credit&quot;:"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            To perform an unreferenced refund, your customer must be present at the
            time of refund, and a payment instrument must be presented to the card
            reader. The resulting refund will not be linked to the original
            authorization, so this is typically not the preferred way of refunding due
            to accounting reasons. Here are some of the common use cases below:
        </span></p><ul class="list list--disc"><li><div><p class="markdown-p"><span>
                        Refunds to customers without a receipt (when original order cannot
                        be found)
                    </span></p></div></li><li><div><p class="markdown-p"><span>
                        Refunds to customers whose original authorization occurred while on
                        your previous payment solution
                    </span></p></div></li><li><div></div><div><p class="markdown-p"><span>Refunds to an alternate payment instrument or tender type</span></p></div></li></ul><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            Note that this feature requires approval to be enabled in the
                            production environment and needs to be requested to be enabled by
                            your Solutions Engineer or Integration Engineer in the sandbox
                            environment
                        </span></span></div></div></p></div></div></div><div><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Mutation</li><li class="styles_tab_list_item">GraphQL Variables</li><li class="styles_tab_list_item">Sample API response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">mutation RequestRefundFromInStoreReader($input: RequestRefundFromInStoreReaderInput!) {
                requestRefundFromInStoreReader(input: $input) {
                    clientMutationId
                    inStoreContext {
                        id
                        status
                        reader {
                            id
                            name                
                            status
                        }
                    }
                }
            }</code></pre></div></div></div><p class="markdown-p"><span>
            Once the refund is complete, you'll need to check the status of the
            context ID, similar to how this is done for a charge request. A status of
            "COMPLETE" indicates a successful refund.
        </span></p><div><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Mutation</li><li class="styles_tab_list_item">GraphQL Variables</li><li class="styles_tab_list_item">Sample API Response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">query ID($inStoreContextId: ID!) {
                node(id: $inStoreContextId) {
                    ... on InStoreContext {
                        id
                        status
                        reader {
                            id
                            name
                            status
                        }
                        transaction {
                            id
                                    }
                                    refund {
                                        id
                                        orderId
                                        legacyId
                                        status
                                        paymentMethodSnapshot {
                                            __typename
                                            ... on CreditCardDetails {
                                                brandCode
                                                bin
                                                last4
                                                expirationMonth
                                                expirationYear
                                                }
                                            }
                                        }
                                    }
                                }
                            }</code></pre></div></div></div><h4 id="unreferenced-refund-example-sequence-diagram" class="test_h4 markdown-h4"><span>Unreferenced Refund Example Sequence Diagram:</span><a class="icon icon--link hash-link" href="#unreferenced-refund-example-sequence-diagram" aria-label="Unreferenced Refund Example Sequence Diagram:"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h4><div><div><img src="https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Unreferenced%20Refund%20Sequence%20Diagram.png" alt=""/></div></div><h3 id="id-4-reversing-a-refund" class="test_h3 markdown-h3"><span>4) Reversing a Refund</span><a class="icon icon--link hash-link" href="#id-4-reversing-a-refund" aria-label="4) Reversing a Refund"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            If a refund was performed and you need to reverse that refund within the
            acceptable reversal window, you can use the
            </span><a href="/braintree/graphql/reference/#Mutation--reverseRefund"><span>reverseRefund</span></a><span>
            mutation. Keep in mind that you would need to have saved the
            </span><code><span>refundId</span></code><span>
            from the API response of the original refund attempt. See below example of
            a refund reversal. You will notice that the
            </span><code><span>refundId</span></code><span>
            is a required variable input to perform the reversal.
        </span></p><div><div class="styles_tab_container"><ol class="styles_tab_list"><div><li class="styles_tab_list_item styles_tab_list_active">GraphQL Mutation</li><li class="styles_tab_list_item">GraphQL Variables</li><li class="styles_tab_list_item">Sample API Response</li></div></ol><div class="codeblock-spacing"><button class="copy-button" aria-label="Copy"><span class="copy-status">Copy</span><svg class="snippet__copy-icon" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><pre><code class="javascript">mutation reverseRefund($input: ReverseRefundInput!) {
                reverseRefund(input: $input) {
                  refund {
                    ... on Refund {
                      id
                      status
                      statusHistory {
                        status
                        terminal
                      }
                    }
                    ... on Refund {
                      id
                      amount {
                        value
                      }
                      orderId
                      status
                      refundedTransaction {
                        id
                        amount {
                          value
                        }
                        orderId
                        status
                      }
                    }
                  }
                }
              }</code></pre></div></div></div><h4 id="refund-reversal-example-sequence-diagram" class="test_h4 markdown-h4"><span>Refund Reversal Example Sequence Diagram:</span><a class="icon icon--link hash-link" href="#refund-reversal-example-sequence-diagram" aria-label="Refund Reversal Example Sequence Diagram:"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h4><div><div><img src="https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Refund%20Reversal%20Sequence%20Diagram.png" alt=""/></div></div><h3 id="id-5-using-auth-adjustments-for-partial-reversals" class="test_h3 markdown-h3"><span>5) Using Auth Adjustments for partial reversals</span><a class="icon icon--link hash-link" href="#id-5-using-auth-adjustments-for-partial-reversals" aria-label="5) Using Auth Adjustments for partial reversals"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            There may be some use cases where you want to perform a partial reversal
            rather than fully reverse a payment. The example scenario is if a customer
            wants to return a single item that was part of a larger purchase, and the
            transaction may be in an authorized state (which would make a partial
            refund not possible). In this scenario, you may use the
            </span><a href="/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/#example-update-transaction-amount-request"><code><span>updateTransaction</span></code></a><span>
            API mutation to adjust the auth amount to the total purchase amount minus
            the partial reversal amount.
        </span></p><h2 id="receipt-data-handling" class="test_h2 markdown-h2"><span>Receipt Data Handling</span><a class="icon icon--link hash-link" href="#receipt-data-handling" aria-label="Receipt Data Handling"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
            To maintain EMV compliance you may need to add additional data elements to
            be displayed on the receipt you offer your customers. The table below
            highlights the data elements that are mandatory for EMV compliance and
            other data elements that are optional. Be sure to include the mandatory
            data elements listed in the "GraphQL API Field" column when you
            </span><a href="/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status"><span>check the reader charge status </span></a><span>so that you can parse them from the API response.
        </span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            EMV-compliant receipts are not enforced by PayPal/Braintree. We
                            make all necessary data for compliance available through our API
                            and highly suggest following EMV compliance rules. For more
                            information about EMV-compliant receipts, see the
                            </span><a href="https://www.emvco.com/resources/"><span>EMVco website</span></a><span>.
                        </span></span></div></div></p></div></div></div><div><picture><div><img src="https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Receipt%20Data%20Handling.webp" alt=""/></div><figcaption><span>
                    This is just an example of an EMV compliant omni-cart receipt.
                    Merchants should format their receipts in a way that make sense for
                    their business while incorporating the below EMV elements listed in
                    the table.
                </span></figcaption></picture></div><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            Please take a look at our EMV-compliant</span><a href="/braintree/in-person/reference/emv-receipt-reference/"><span>
                                receipt reference page</span></a><span>, including an explanation with an EMV-compliant data element as
                            an overlay.
                        </span></span></div></div></p></div></div></div><div><style data-emotion="css 19859z6-text_body-legacy_table-text_body_strong-align_start-w100">.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100{color:#202020;font-family:PayPalOpen-Regular,"Helvetica Neue",Arial,sans-serif;font-size:0.875rem;line-height:1.125rem;font-weight:400;border-spacing:0;border-collapse:separate;text-align:start;width:100%;}@media screen and (max-width: 752px){.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100{font-size:min(0.875rem, 28px);line-height:min(1.125rem, 36px);}}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr{background-color:#f4f4f7;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td,.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th{border-bottom:0.0625rem solid #545d68;border-top:0.0625rem solid transparent;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td{padding:0.75rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td:last-of-type{padding-right:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th{padding:0.75rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr{background-color:#1e2023;white-space:nowrap;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th{position:relative;color:#202020;font-family:PayPalOpen-Bold,"Helvetica Neue",Arial,sans-serif;font-size:0.875rem;line-height:1.125rem;font-weight:700;border-bottom:0.0625rem solid #545d68;padding:0.75rem;}@media screen and (max-width: 752px){.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th{font-size:min(0.875rem, 28px);line-height:min(1.125rem, 36px);}}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th:last-of-type{padding-right:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 th{text-align:start;}</style><table data-ppui-info="table_3.22.1__7.46.3" class="ppvx_table ppvx_table-responsive-sm ecmTable in-personTable css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100"><tbody><tr><td><div><div><p class="markdown-p"><strong><span>Data Element</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><strong><span>Description</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><strong><span>Mandatory vs. Optional</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><strong><span>GraphQL API Field</span></strong></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Merchant Name</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The name of the merchant.</span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.merchantName</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Merchant Address Details</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The address details of the merchant.</span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.merchantAddress</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Transaction Date and Time</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The date and time of the transaction.</span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.createdAt</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Merchant ID (MID)</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The unique reference of the merchant.</span></p></div></div></td><td><div><div><p class="markdown-p"><span>O</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.merchantId</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Terminal ID (TID)</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The unique reference of the terminal.</span></p></div></div></td><td><div><div><p class="markdown-p"><span>O</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Transaction.paymentMethodSnapshot .origin.details.terminalId
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Transaction Number</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The unique reference number of the transaction.</span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.legacyId</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Invoice Number</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The unique reference number of the receipt.</span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.legacyId</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Card Type</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The name of the card issuer.</span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.paymentMethodSnapshot.
                                        creditCard.brand</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Account Number</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        The account number printed on the card. All digits except
                                        for last 4 must be truncated.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.paymentMethodSnapshot.
                                        creditCard.last4</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Application Preferred Name</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        The name of the application used to process the transaction
                                        (e.g. MasterCard).
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Transaction.paymentMethodSnapshot
                                        .origin.details.applicationPreferredName
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Application Identifier</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        The unique reference number of the EMV application used for
                                        the transaction.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Transaction.paymentMethodSnapshot
                                        .origin.details.applicationIdentifier
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Approval Code</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        The authorization code received from the processor for the
                                        transaction.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Transaction.statusHistory[…].
                                        processorResponse.authorizationId
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Authorization Mode</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The authorizing entity (e.g. Issuer).</span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Transaction.paymentMethodSnapshot
                                        .origin.details.authorizationMode
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Transaction Kind</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The type of the transaction (e.g. Sale/Refund).</span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.kind</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Card Entry Method</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        The method used to read the detail of the card (e.g. Chip).
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Transaction.paymentMethodSnapshot
                                        .origin.details.inputMode
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Purchase Details</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        A brief description of the purchased goods or services along
                                        with their prices.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Transaction.lineItems* * - If not provided in the
                                        authorize/charge request, then these details must be
                                        provided by the merchant.
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Transaction Amount</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>The grand total amount for the transaction.</span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.amount.value</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Currency</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        If specified, the currency that the transaction was
                                        processed in. If no currency is identified on the receipt,
                                        the transaction is deemed to have taken place in the
                                        currency that is legal tender at the point of sale.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>O</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.amount.currencyCode</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>PIN Verify Statement</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        The cardholder’s PIN verification status specific to the
                                        processed transaction (e.g. Verified).
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Transaction.paymentMethodSnapshot
                                        .origin.details.pinVerified
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Return and Refund Policies</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        The terms and conditions for return and refund set forth by
                                        the merchant.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Merchant or POS generated message that indicates return
                                        policy
                                    </span></p></div></div></td></tr></tbody></table></div><p class="markdown-p"><em><span>The following are data elements that are mandatory for transactions
                that were declined:</span></em></p><div><style data-emotion="css 19859z6-text_body-legacy_table-text_body_strong-align_start-w100">.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100{color:#202020;font-family:PayPalOpen-Regular,"Helvetica Neue",Arial,sans-serif;font-size:0.875rem;line-height:1.125rem;font-weight:400;border-spacing:0;border-collapse:separate;text-align:start;width:100%;}@media screen and (max-width: 752px){.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100{font-size:min(0.875rem, 28px);line-height:min(1.125rem, 36px);}}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr{background-color:#f4f4f7;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td,.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th{border-bottom:0.0625rem solid #545d68;border-top:0.0625rem solid transparent;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td{padding:0.75rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td:last-of-type{padding-right:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th{padding:0.75rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr{background-color:#1e2023;white-space:nowrap;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th{position:relative;color:#202020;font-family:PayPalOpen-Bold,"Helvetica Neue",Arial,sans-serif;font-size:0.875rem;line-height:1.125rem;font-weight:700;border-bottom:0.0625rem solid #545d68;padding:0.75rem;}@media screen and (max-width: 752px){.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th{font-size:min(0.875rem, 28px);line-height:min(1.125rem, 36px);}}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th:last-of-type{padding-right:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 th{text-align:start;}</style><table data-ppui-info="table_3.22.1__7.46.3" class="ppvx_table ppvx_table-responsive-sm ecmTable in-personTable css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100"><tbody><tr><td><div><div><p class="markdown-p"><strong><span>Decline Code</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        The system generated decline code for the declined
                                        transaction.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Transaction.statusHistory[…]
                                        .processorResponse.legacyCode
                                    </span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Decline Message</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        The merchant generated message for the respective decline
                                        code.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Merchant or POS generated message that reflects the decline
                                        code
                                    </span></p></div></div></td></tr></tbody></table></div><p class="markdown-p"><em><span>The following are data elements that are mandatory for transactions
                that were EMV chip declined:</span></em></p><p class="markdown-p"></p><div><style data-emotion="css 19859z6-text_body-legacy_table-text_body_strong-align_start-w100">.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100{color:#202020;font-family:PayPalOpen-Regular,"Helvetica Neue",Arial,sans-serif;font-size:0.875rem;line-height:1.125rem;font-weight:400;border-spacing:0;border-collapse:separate;text-align:start;width:100%;}@media screen and (max-width: 752px){.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100{font-size:min(0.875rem, 28px);line-height:min(1.125rem, 36px);}}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr{background-color:#f4f4f7;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td,.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th{border-bottom:0.0625rem solid #545d68;border-top:0.0625rem solid transparent;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td{padding:0.75rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >td:last-of-type{padding-right:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th{padding:0.75rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >tbody >tr >th:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr{background-color:#1e2023;white-space:nowrap;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th{position:relative;color:#202020;font-family:PayPalOpen-Bold,"Helvetica Neue",Arial,sans-serif;font-size:0.875rem;line-height:1.125rem;font-weight:700;border-bottom:0.0625rem solid #545d68;padding:0.75rem;}@media screen and (max-width: 752px){.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th{font-size:min(0.875rem, 28px);line-height:min(1.125rem, 36px);}}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th:last-of-type{padding-right:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 >thead>tr >th:first-of-type{padding-left:1rem;}.css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100 th{text-align:start;}</style><table data-ppui-info="table_3.22.1__7.46.3" class="ppvx_table ppvx_table-responsive-sm ecmTable in-personTable css-19859z6-text_body-legacy_table-text_body_strong-align_start-w100"><tbody><tr><td><div><div><p class="markdown-p"><strong><span>Terminal Verification Results</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        A series of bits set by the terminal upon reading EMV card
                                        data, where each bit represents information about the
                                        transaction. This value is contained in the response EMV
                                        data under tag 95.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.statusHistory[…]
                                        .processorResponse.emvData</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Issuer Authentication Data</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        Issuer provided data received in response to an online
                                        authorization request to be delivered to the EMV chip card.
                                        This value is contained in the response EMV data under tag
                                        91.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.statusHistory[…]
                                        .processorResponse.emvData</span></p></div></div></td></tr><tr><td><div><div><p class="markdown-p"><strong><span>Authorization Response Code</span></strong></p></div></div></td><td><div><div><p class="markdown-p"><span>
                                        The 4-character code generated by the Issuer in response to
                                        an online authorization request that represents the
                                        authorization status of the transaction. This value is
                                        contained in the response EMV data under tag 8A.
                                    </span></p></div></div></td><td><div><div><p class="markdown-p"><span>M</span></p></div></div></td><td><div><div><p class="markdown-p"><span>Transaction.statusHistory[…]
                                        .processorResponse.emvData</span></p></div></div></td></tr></tbody></table></div><h2 id="manual-key-entry-transactions" class="test_h2 markdown-h2"><span>Manual Key Entry Transactions</span><a class="icon icon--link hash-link" href="#manual-key-entry-transactions" aria-label="Manual Key Entry Transactions"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><p class="markdown-p"><span>
            There are some use cases in which you may want to support the processing
            of a transaction without using the card reader by entering in the card
            details into another application UI. This could be for over-the-phone
            orders (MOTO) or as a manual key entry (MKE) fallback for when the card is
            not readable by the card reader, in which case you may want to enter the
            card details into the POS UI. To facilitate this while keeping your tech
            stack outside of PCI scope, we have a couple of solutions that can work
            for you.
        </span></p><div><div><img src="https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale_Manual%20Key%20Entry%20Transactions.png" alt=""/></div></div><h3 id="id-1-braintree-hosted-fields" class="test_h3 markdown-h3"><span>1) Braintree Hosted Fields</span><a class="icon icon--link hash-link" href="#id-1-braintree-hosted-fields" aria-label="1) Braintree Hosted Fields"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            The Braintree Hosted Fields enables you to render Braintree encrypted
            input fields in your application user interface. This allows for the
            manual key entry of card details directly into Braintree encrypted input
            fields. See how the
            </span><a href="/braintree/docs/guides/hosted-fields/overview/"><span>Braintree Hosted Fields</span></a><span>
            solution works.
        </span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            The Braintree Hosted Fields solution gives you more control over
                            the checkout flow and the flexibility to blend the encrypted
                            fields into your POS UI
                        </span></span></div></div></p></div></div></div><h3 id="id-2-braintree-drop-in-ui" class="test_h3 markdown-h3"><span>2) Braintree Drop-in UI</span><a class="icon icon--link hash-link" href="#id-2-braintree-drop-in-ui" aria-label="2) Braintree Drop-in UI"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h3><p class="markdown-p"><span>
            The Braintree drop-in UI allows you to render Braintree encrypted forms in
            your application user interface. This would allow for the manual key entry
            of the card details directly into the Braintree Encrypted fields. The
            drop-in UI is a simple integration leveraging pre-built dynamic Braintree
            containers. See how the
            </span><a href="/braintree/docs/guides/drop-in/overview/javascript/v3/"><span>Braintree Drop-in UI</span></a><span>
            solution works.
        </span></p><div><div><div><p class="markdown-p"><div role="alert" class="ContextualAlert-module_pp-alert__1QhIq ContextualAlert-module_pp-alert--note__gRM6J"><div class="ContextualAlert-module_pp-alert__header__T2Wkg"><style data-emotion="css 4757ty-svg-size_xs">.css-4757ty-svg-size_xs{speak:none;display:inline-block;aspect-ratio:1;width:1.125rem;height:1.125rem;}.css-4757ty-svg-size_xs img,.css-4757ty-svg-size_xs svg{width:100%;height:100%;display:block;}</style><span class="ContextualAlert-module_pp-alert__icon__puACD css-4757ty-svg-size_xs" data-ppui-info="icons_8.21.2" role="img" aria-label="note" data-ppui="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em" data-ppui="true"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9.662 5h1.32c.18 0 .276-.096.276-.276v-5.925c0-.18-.096-.276-.276-.276h-1.32c-.18 0-.276.096-.276.276v5.925c0 .18.096.276.276.276zM12 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" clip-rule="evenodd" data-ppui="true"></path></svg></span><span class="ContextualAlert-module_pp-alert__title__FOcbD">Note</span><span class="ContextualAlert-module_pp-alert__content__2-Ddi"><span>
                            The drop in UI allows for a simpler integration but reduced
                            control over the look and feel of the UI and checkout flow
                            experience
                        </span></span></div></div></p></div></div></div><h2 id="important-tips-for-building-out-your-charge-refund-flows" class="test_h2 markdown-h2"><span>Important Tips for building out your charge/refund flows</span><a class="icon icon--link hash-link" href="#important-tips-for-building-out-your-charge-refund-flows" aria-label="Important Tips for building out your charge/refund flows"><img src="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_assets/anchor-PKYVW2VT.svg" alt="AnchorIcon"/></a></h2><ol class="list list--num"><li value="1"><div data-value="1"></div><div><p class="markdown-p"><span>
                        Always make sure you are passing your Braintree
                        </span><a href="/braintree/articles/control-panel/important-gateway-credentials/#merchant-account-id"><span>Merchant Account ID</span></a><span>
                        (MAID) in your charge and refund requests. This should be added as
                        an API variable, for example:
                        </span><span><img src="https://www.paypalobjects.com/devdoc/btdocs-gitbook/InitiateAsalesMakingAtransaction.jpg" alt=""/></span></p></div></li><li value="2"><div data-value="2"></div><div><p class="markdown-p"><span>
                        Use
                        </span><a href="/braintree/in-person/guides/making-a-transaction/#initializing-the-reader-for-charging"><span>Idempotency Keys</span></a><span>
                        to prevent duplicate charges to your customers
                    </span></p></div></li><li value="3"><div data-value="3"></div><div><p class="markdown-p"><span>
                        Align your application with our
                        </span><a href="/braintree/in-person/guides/making-a-transaction/#recommended-timeout-logic"><span>recommended timeout logic</span></a></p></div></li><li value="4"><div data-value="4"></div><div><p class="markdown-p"><span>
                        Make sure you are parsing key
                        </span><a href="/braintree/in-person/guides/making-a-transaction/#receipt-data-handling"><span>EMV receipt data</span></a><span>
                        from your API response to populate on your customer receipts for EMV
                        compliance
                    </span></p></div></li><li value="5"><div data-value="5"></div><div><p class="markdown-p"><span>
                        Utilize the
                        </span><a href="/braintree/in-person/guides/reporting-and-reconciliation/#using-the-order-id-field-to-reconcile-with-braintree-settlement-reports"><span>orderId API field</span></a><span>
                        to pass important data for reporting and reconciliation
                    </span></p></div></li></ol></div><div class="nextPreviousButtonWrapper"><div class="nextLink-bt"><a class="nextLink-link" href="/braintree/in-person/guides/setup-reader/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0,0,24,24" width="24" fill="none" height="24"><path d="M9.707,18.7033C10.0975,18.3128,10.0975,17.6796,9.707,17.2891L5.414,12.9961H21C21.5523,12.9961,22,12.5484,22,11.9961C22,11.4438,21.5523,10.9961,21,10.9961H5.414L9.707,6.7032C10.0975,6.31268,10.0975,5.67951,9.707,5.28899C9.31647,4.89846,8.68333,4.89846,8.2928,5.28899L2.2998,11.282C2.29375,11.288,2.28777,11.2941,2.28179,11.3003C2.10735,11.4803,2,11.7257,2,11.9961C2,12.2654,2.10637,12.5097,2.27947,12.6895C2.28441,12.6948,2.2895,12.7,2.29457,12.7052L2.29713,12.7077L2.2998,12.7103L8.29273,18.7033C8.68326,19.0938,9.31641,19.0938,9.707,18.7033Z" fill="#0070E0"></path></svg><span><span><span>Setup Reader</span></span></span></a></div><div class="nextLink-bt"><a class="nextLink-link" href="/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/"><span><span><span>Initiate a Card Present Authorization</span></span></span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0,0,24,24" width="24" fill="none" height="24"><path d="M14.2931,18.7033C13.9026,18.3128,13.9026,17.6796,14.2931,17.2891L18.5861,12.9961H3C2.44772,12.9961,2,12.5484,2,11.9961C2,11.4438,2.44772,10.9961,3,10.9961H18.5861L14.2931,6.7032C13.9026,6.31268,13.9026,5.67951,14.2931,5.28899C14.6837,4.89846,15.3168,4.89846,15.7073,5.28899L21.7003,11.282C21.7064,11.288,21.7123,11.2941,21.7182,11.3003C21.8926,11.4803,22,11.7257,22,11.9961C22,12.2654,21.8936,12.5097,21.7205,12.6895C21.7156,12.6948,21.7105,12.7,21.7054,12.7052L21.7029,12.7077L21.7003,12.7103L15.7074,18.7033C15.3168,19.0938,14.6837,19.0938,14.2931,18.7033Z" fill="#0070E0"></path></svg></a></div></div></main></div><nav class="right-nav-container"><h4 class="right-nav-title">On this page</h4><ul class="right-nav-list"></ul></nav></div></article></main><div><footer class="footer wrap nocontent " data-track-event-context="footer"><div class="footer-section footer-section--light"><div class="footer-section-inner"><div class="footer-cta-section"><div class="footer-section-inner--right-padding footer-cta-icon"><svg width="25" height="29" viewBox="0 0 25 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 15.5C13.5908 15.4983 15.1159 14.8656 16.2408 13.7408C17.3656 12.6159 17.9983 11.0908 18 9.5H15C15 10.2956 14.6839 11.0587 14.1213 11.6213C13.5587 12.1839 12.7956 12.5 12 12.5C11.2044 12.5 10.4413 12.1839 9.87868 11.6213C9.31607 11.0587 9 10.2956 9 9.5H6C6.0017 11.0908 6.63438 12.6159 7.75923 13.7408C8.88408 14.8656 10.4092 15.4983 12 15.5V15.5Z" fill="#202020"></path><path d="M6.25 28.625H10.9375L17.1875 22.375H25V0.5H0V22.375H6.25V28.625ZM3.125 19.25V3.625H21.875V19.25H15.8931L14.9778 20.1653L9.64308 25.5H9.375V19.25H3.125Z" fill="#202020"></path></svg></div><div class="footer-section-inner--right-padding"><h5>Get help from a human</h5><p>Submit a request for help with your PayPal Braintree sandbox or production account.</p><a class="button button--secondary" data-track-event-properties="project=journey&amp;docs,context=footer,component=button,action=click,descriptor=get help,intent=view help contact form,origin=support articles,href=https://developer.paypal.com/braintree/help" pa-marked="1" href="/braintree/help">Get Help</a></div></div></div></div><div class="footer-section_wrapper"></div></footer></div></div></div><script nonce="l4mqFgQ/bLkXkk9MqkilsYGT/gDRRmEsKlPxnWrBMzVdIpqZ">
            window.process = globalThis.process = {
              env: {
                NODE_ENV: "development" // or "production", depending on your environment
              }
            };
          </script>
      </script><script src="https://www.paypalobjects.com/pa/js/min/pa.js"></script><div data-testid="cookie_banner"><link rel="stylesheet" type="text/css" href="https://www.paypalobjects.com/ncp-ui-web/consumer-home/8.2.3-legacy-v2/consent.min.css"/><style nonce="l4mqFgQ/bLkXkk9MqkilsYGT/gDRRmEsKlPxnWrBMzVdIpqZ">@keyframes slideInFromBottom { 0% { transform: translateY(100%); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } } .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 15.125em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 15.125em; } .CookieBanner_rtl { direction: rtl; } .CookieBanner_container { box-sizing: border-box; animation: 1s ease-in 0s 1 slideInFromBottom; width: 100%; z-index: 1051; padding: 0 1rem; display: flex; justify-content: center; position: fixed; bottom: 1rem; left:0; } .CookieBanner_container * { box-sizing: border-box; } .CookieBanner_container_wrapper { max-width: 80rem; width: 100%; display: flex; padding: 1rem; border-radius: 1rem; background-color: #f0f2f9; box-shadow: 0px 0px 17px 0px rgba(0, 0, 0, 0.01), 0px 0px 15px 0px rgba(0, 0, 0, 0.01), 0px 0px 13px 0px rgba(0, 0, 0, 0.02), 0px -10px 10px 0px rgba(0, 0, 0, 0.03), 0px 0px 5px 0px rgba(0, 0, 0, 0.04); } .CookieBanner_content_wrapper { display: flex; flex-direction: column; } #manageCookiesLink { color: #0070e0; font-weight: 500; text-decoration: underline; font-family: PayPalOpen-Medium, "Helvetica Neue", Arial, sans-serif; } .CookieContent_wrapper { margin-block-end: 1rem; margin-inline: 0.5rem; } .CookieBanner_text { margin: 0; } .CookieBanner_buttonGroup { display: flex; } button.acceptButton { margin-inline-end: 0.25rem; } button.declineButton { margin-inline-start: 0.25rem; }  .close_icon { color: #686a6d; } @media only screen and (min-width: 752px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 10.25em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 10.25em; } .CookieBanner_container_wrapper { align-items: center; padding-block: 1.5rem; } .CookieBanner_content_wrapper { flex-direction: row; align-items: center; } .CookieContent_wrapper { margin-block-end: 0; margin-inline: 0.75rem; flex: 3; } .CookieBanner_buttonGroup { padding-inline: 1.5rem; } button.acceptButton { margin-inline-end: 0.5rem; } button.declineButton { margin-inline-start: 0.5rem; } } @media only screen and (min-width: 1024px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 7.75em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 7.75em; } } @media only screen and (min-width: 1152px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 7em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 7em; } }</style><div class="cdn-consent-css"><div class="ppui-theme theme_ppui_theme_tokens__1ozbsv90"><div id="ccpaCookieBanner" class="CookieBanner_container"><div class="CookieBanner_container_wrapper"><span class="styles_icon_svg__1dkwumb7 styles_icon_size_md__1dkwumb4" data-ppui-info=""><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em"><path d="M18.822 5.052A9.682 9.682 0 0 0 12 2.25h-.1A9.75 9.75 0 0 0 2.25 12c0 4.031 2.492 7.412 6.502 8.828A3 3 0 0 0 12.75 18a1.5 1.5 0 0 1 1.5-1.5h4.332a2.982 2.982 0 0 0 2.925-2.332c.168-.739.25-1.494.243-2.25a9.685 9.685 0 0 0-2.928-6.866zm1.219 8.785A1.49 1.49 0 0 1 18.582 15H14.25a3 3 0 0 0-3 3 1.5 1.5 0 0 1-1.998 1.413C5.858 18.216 3.75 15.375 3.75 12a8.25 8.25 0 0 1 8.165-8.25h.084a8.283 8.283 0 0 1 8.25 8.18 8.334 8.334 0 0 1-.204 1.908h-.004zm-6.916-6.712a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zM9 9.375a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zm0 5.25a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zm8.25-5.25a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0z"></path></svg></span><div class="CookieBanner_content_wrapper"><div id="ccpaCookieContent_wrapper" class="CookieContent_wrapper"><h4 class="styles_text-title_medium__awycp4g CookieBanner_text" data-ppui-info="title-text" id="cookieTitle">If you accept cookies, we’ll use them to improve and customize your experience and enable our partners to show you personalized PayPal ads when you visit other sites. <a id="manageCookiesLink" href="https://www.paypal.com/myaccount/privacy/cookiePrefs?locale=en_US">Manage cookies and learn more</a></h4></div><div class="CookieBanner_buttonGroup"><button class="styles_button_base__6ka6j61 styles_button_size_lg__6ka6j62 styles_button_overlay__6ka6j69 styles_button_full_width__6ka6j6l acceptButton" data-ppui-info="" id="acceptAllButton" tab-index="0">Accept</button><button class="styles_button_base__6ka6j61 styles_button_size_lg__6ka6j62 styles_button_overlay__6ka6j69 styles_button_full_width__6ka6j6l declineButton" data-ppui-info="" id="bannerDeclineButton" tab-index="0">Decline</button></div></div><button data-ppui-info="" class="styles_icon-button_base__134l21c8 styles_icon-button_size_lg__134l21c7 styles_icon-button_size__134l21c4 styles_icon-button_tertiary__134l21cd close_icon" type="button" id="bannerCloseButton"><span class="styles_icon_svg__1dkwumb7 styles_icon_size_sm__1dkwumb3 styles_icon-button_icon__134l21cf" data-ppui-info="" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="1em" height="1em"><path d="M19.28 18.22a.751.751 0 0 1-1.06 1.06L12 13.06l-6.22 6.22a.75.75 0 0 1-1.06-1.06L10.94 12 4.72 5.78a.75.75 0 1 1 1.06-1.06L12 10.94l6.22-6.22a.75.75 0 1 1 1.06 1.06L13.06 12l6.22 6.22z"></path></svg></span><span class="styles_screenreader__1p05eo10">Close</span></button></div></div></div></div><script nonce="l4mqFgQ/bLkXkk9MqkilsYGT/gDRRmEsKlPxnWrBMzVdIpqZ">(function () { var bannerFptiData = {}; function getFptiReqData () { let fptiReqData = window && window.fpti && window.PAYPAL && window.PAYPAL.analytics && window.PAYPAL.analytics.instance && window.PAYPAL.analytics.instance.options && window.PAYPAL.analytics.instance.options.request && window.PAYPAL.analytics.instance.options.request.data; if (fptiReqData) {  bannerFptiData = { api_name: 'cookieBanner', page:  'main:privacy:policy:ccpa', pgrp:  'main:privacy:policy', displaypage: window.fpti.pgrp, ppage: 'privacy_banner', bannertype: 'cookiebanner', ccpg: 'US', flag: 'ccpa', bannerversion: 'v14', bannersource: 'ConsentNodeServ', bannervariant: '', xe: '110041,109128,105410,105409,111623,111624,109059,111560,111622,110042,104407', xt: '148501,143659,123956,123954,158942,158944,143369,161854,158940,148504,119038', eligibility_reason: 'true', is_native: 'false', cookie_disabled: cookieDisabled(), reason_to_hide: reasonToHideBanner(), comp: 'consentnodeserv', space_key: 'SKSVPL', erpg: '' }; if(true){ bannerFptiData = {   ...bannerFptiData, userstate : 'NOT FOUND', usercountry : 'US', stateaccuracy : '0', countryaccuracy : '99', loggedin : 'false' } } } return fptiReqData; } function getFptiPage () { return getFptiReqData() && getFptiReqData().page; } function setSessionStorage(key) { try { sessionStorage.setItem(key, true); } catch (e) { console.log('error on setting sessioStorage', e); } } function isBannerClosed () { let is_banner_closed = false; try{ if(sessionStorage.getItem("isBannerClosed") || sessionStorage.getItem("isUserAccepted") || sessionStorage.getItem("isInvisibleBanner")){ is_banner_closed = true; } } catch (e){ is_banner_closed = false; } return is_banner_closed || (false && true && (navigator && !navigator.cookieEnabled)); } function reasonToHideBanner(){ let reason = ''; try { if (false && true && (navigator && !navigator.cookieEnabled)){ reason = 'cookies are disabled'; } else if(sessionStorage.getItem("isUserAccepted")){ reason = 'User accepted or declined'; } else if(sessionStorage.getItem("isBannerClosed")){ reason = 'Banner Closed'; } else if(sessionStorage.getItem("isInvisibleBanner")){ reason = 'Invisible banner loaded'; } } catch (error) { reason=''; } return reason; } function cookieFilteringRequest(eventSource) { const queryParamters = { eventSource, isQueryEncoded: true, page: '', component: '', eventSourceUrl: '', expireCookies: true }; if (window) { queryParamters.page = window.fpti && window.fpti.page || window.location && window.location.href; queryParamters.component = window.fpti && window.fpti.comp; const eventSourceUrl = window.location && window.location.href; queryParamters.eventSourceUrl = eventSourceUrl && eventSourceUrl.split("?")[0]; } const xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP'); let queryString = ''; Object.keys(queryParamters).forEach((key, index) => queryString += (index > 0 ? '&' : '') + key + "=" + btoa(queryParamters[key])); const endPoint = "https://www.paypal.com/myaccount/privacy/cookieprefs/cookies?" + queryString; xhr.open('GET', endPoint); xhr.withCredentials = true; xhr.onreadystatechange = function () { if (xhr.readyState > 3 && xhr.status === 200) { try { if (xhr?.response && xhr.response != "OK") { const invalidCookies = JSON.parse(xhr?.response)?.invalidCookies; if (invalidCookies.length > 0) { const hostName = document.location.hostname; let subDomains = [hostName]; const parts = hostName.split('.'); parts.forEach((e, i) => {  if(e !== "www"){ subDomains.push("." + parts.slice(i).join('.')); } }); subDomains.pop(); invalidCookies.forEach(cookie => { document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=.paypal.com'; document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;'; subDomains.forEach(domain => { document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=' + domain; }) }) } } } catch (error) { } } }; xhr.setRequestHeader('Accept', 'application/json'); xhr.setRequestHeader('Content-Type', 'application/json'); xhr.send(); }; function cookieFiltering(eventSource="cookieBanner"){ if(!true || false){ return; } cookieFilteringRequest(eventSource); } function postAjax(isFptiDataAvailable , cookieObj ) { if(!isFptiDataAvailable && getFptiReqData()){  isFptiDataAvailable = true; } if(isFptiDataAvailable){ acceptDeclineFptiEvents(cookieObj); } var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP"); var endPoint = cookieObj.endPointPrefix + cookieObj.endPointSuffix; xhr.open('GET',endPoint); xhr.withCredentials = true; xhr.onreadystatechange = function() { if (xhr.readyState > 3 && xhr.status == 200) { cookieFiltering(cookieObj.eventSource); } }; xhr.setRequestHeader('Accept', 'application/json','Content-Type', 'application/json'); xhr.send(null); return xhr; }; function fptiRecordClick(bannerData){ window.PAYPAL.analytics.Analytics.prototype.recordClick({ data: {...bannerData, product:"cookieBanner"}}); }; function acceptDeclineFptiEvents(cookieObj){ var trackingPageName = '' || getFptiPage() || document.title; var cookiesText = cookieObj.cookiesText; var cookiePrefs = cookieObj.cookiePrefs; var eventName = cookieObj.eventName; var acEventName = cookieObj.acEventName; var bannerData = { e: 'cl', link: cookiesText, pglk: trackingPageName + '|' + cookiesText, pgln: trackingPageName + '|' + cookiesText, c_prefs: cookiePrefs, opsel: cookiePrefs + ',US', csource: 'cookie', event_name: eventName }; for(var key in bannerFptiData){ bannerData[key] = bannerFptiData[key]; }; fptiRecordClick(bannerData); var winFptiData = JSON.parse(JSON.stringify((window && window.fpti) || {})); var updatedFptiData = { cookiebannerhidden: 'true', c_prefs: cookiePrefs, event_name: acEventName }; for(var key in bannerFptiData){ updatedFptiData[key] = bannerFptiData[key]; }; for(var key in updatedFptiData){ winFptiData[key] = updatedFptiData[key]; }; fptiLogActivity(winFptiData); }; function cookieObjSetup (type) { const cookieObjValue = { "accept" : { endPointSuffix : '&type=explicit_banner&country=US&policy=ccpa&version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=true&performance=true&functional=true', eventSource : 'acceptCookieBanner', cookiesText : 'acceptcookies', cookiePrefs : 'T=1,P=1,F=1,type=explicit_banner', eventName : 'cookie_banner_accept_clicked', acEventName : 'cookie_banner_accepted' }, "decline" : { endPointSuffix : '&type=explicit_banner&country=US&policy=ccpa&version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=false&performance=false&functional=false', eventSource : 'declineCookieBanner', cookiesText : 'declinecookies', cookiePrefs : 'T=0,P=0,F=0,type=explicit_banner', eventName : 'cookie_banner_decline_clicked', acEventName : 'cookie_banner_declined' }, "close" : { endPointSuffix : '&type=explicit_close&country=US&policy=ccpa&version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=true&performance=true&functional=true', eventSource : 'closeCookieBanner', cookiesText : 'closecookies', cookiePrefs : 'T=1,P=1,F=1,type=explicit_close', eventName : 'cookie_banner_close_clicked', acEventName : 'cookie_banner_closed' } }; return cookieObjValue[type]; } function bindGdprEvents () { var acceptAllButton = document.getElementById('acceptAllButton'); var bannerDeclineButton = document.getElementById('bannerDeclineButton'); var bannerCloseButton = document.getElementById('bannerCloseButton'); var usBannerCloseButton = document.getElementById('usBannerCloseButton'); var manageCookiesLink = document.getElementById('manageCookiesLink'); var cookieStatement = document.getElementById('cookieStatement'); var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); var cookieBannerAcceptAll = document.getElementsByClassName("ccpaCookieBanner-acceptedAll"); var trackingPageName = '' || getFptiPage() || document.title; if (manageCookiesLink) { manageCookiesLink.onclick = function() { var manageCookiesData = { e: 'cl', link: 'managecookies', pglk: trackingPageName + '|managecookies', pgln: trackingPageName + '|managecookies', event_name: 'cookie_banner_manage_cookies_clicked' }; for(var key in bannerFptiData){ manageCookiesData[key] = bannerFptiData[key]; }; fptiRecordClick(manageCookiesData); }; } if (cookieStatement) { cookieStatement.onclick = function() { var cookieStatementData = { e: 'cl', link: 'cookieStmtLink', pglk: trackingPageName + '|cookieStmtLink', pgln: trackingPageName + '|cookieStmtLink', event_name: 'cookie_banner_cookie_statement_clicked' }; for(var key in bannerFptiData){ cookieStatementData[key] = bannerFptiData[key]; }; fptiRecordClick(cookieStatementData); }; } if(bannerCloseButton && cookieBanner && cookieLanguage){ bannerCloseButton.onclick = function() { hideBanner(); setSessionStorage('isBannerClosed'); var closebannerFptiData = { e: 'cl', link: 'closeBanner', pglk: trackingPageName + '|closeBanner', pgln: trackingPageName + '|closeBanner', event_name: 'cookie_banner_close_clicked' }; for(var key in bannerFptiData){ closebannerFptiData[key] = bannerFptiData[key]; }; fptiRecordClick(closebannerFptiData); }; } if (acceptAllButton && cookieBanner && cookieLanguage) { acceptAllButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('accept')); }; } if (bannerDeclineButton && cookieBanner && cookieLanguage) { bannerDeclineButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('decline')); }; } if (usBannerCloseButton && cookieBanner && cookieLanguage) { usBannerCloseButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('close')); }; } window.hideGdprBanner = function () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); if (cookieBannerUi && cookieBannerUi.className.indexOf('ccpaHideCookieBannerMobile') === -1) { cookieBannerUi.className += " ccpaHideCookieBannerMobile"; } }; window.showGdprBanner = function () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); if (cookieBannerUi) { cookieBannerUi.className = cookieBannerUi.className.replace("ccpaHideCookieBannerMobile",""); } }; document.body.addEventListener("focus", function (event) { if (event.target.type === 'text' || event.target.type === 'number' || event.target.type === 'password' || event.target.type === 'email' || event.target.type === 'select-one') { window.hideGdprBanner(); } }, true); } function adjustPaddingTop(){ var cookieBannerAcceptAll = document.getElementsByClassName("ccpaCookieBanner-acceptedAll"); if(cookieBannerAcceptAll.length > 0){ var cookieBanner = document.getElementById('ccpaCookieBanner'); var bannerHeight = cookieBanner ? cookieBanner.clientHeight : 0; if(cookieBannerAcceptAll && cookieBannerAcceptAll[0] && bannerHeight){ cookieBannerAcceptAll[0].style.paddingTop = bannerHeight/16 +'em'; } } }; var isPaddingBottomAdded = false, bannerPaddingBottom = ""; function adjustPaddingBottom(addListener){ if (undefined || !false) { return; } function adjustPaddingBottomEvent() { var cookieBannerAcceptAll = document.getElementsByClassName("ccpaCookieBanner-acceptedAll"); if(cookieBannerAcceptAll.length > 0){ var bodyPaddingBottom = cookieBannerAcceptAll[0].style.paddingBottom; var cookieBanner = document.getElementById('ccpaCookieBanner'); if(cookieBannerAcceptAll && cookieBannerAcceptAll[0] && cookieBanner.style.display != 'none') { if (bodyPaddingBottom === "" || (isPaddingBottomAdded && bannerPaddingBottom === bodyPaddingBottom)) { var cookieBannerContainer = document.getElementsByClassName('ccpaCookieBanner_container'); var bannerBottomHeight = cookieBannerContainer.length > 0 ? parseInt(window.getComputedStyle(cookieBannerContainer[0]).bottom.replace("px", "")) : 0; var bannerHeight = cookieBanner ? cookieBanner.clientHeight : 0; bannerPaddingBottom = ((bannerHeight + bannerBottomHeight) / 16) + 'em'; cookieBannerAcceptAll[0].style.paddingBottom = bannerPaddingBottom; isPaddingBottomAdded = true; } else if (isPaddingBottomAdded && bannerPaddingBottom !== bodyPaddingBottom) { isPaddingBottomAdded = false; } } } } if (addListener) { adjustPaddingBottomEvent(); window.addEventListener('resize', adjustPaddingBottomEvent);  } else { var cookieBannerAcceptAll = document.getElementsByClassName("ccpaCookieBanner-acceptedAll"); if(cookieBannerAcceptAll && cookieBannerAcceptAll[0]){ window.removeEventListener('resize', adjustPaddingBottomEvent); adjustPaddingBottomEvent(); if (isPaddingBottomAdded && cookieBannerAcceptAll[0].style.paddingBottom === bannerPaddingBottom) { cookieBannerAcceptAll[0].style.removeProperty('padding-bottom'); } } } }; window.bindGdprEvents = bindGdprEvents; function cookieDisabled() { if (navigator.cookieEnabled === false) return "true"; else if (navigator.cookieEnabled === true) return "false"; else return "undefined"; }; function fptiLogActivity(winFptiData){ window.PAYPAL.analytics.Analytics.prototype.logActivity({...winFptiData, product:"cookieBanner"}); }; function gdprSetup () { var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); var manageLink = document.getElementById('manageCookiesLink'); var acceptAllLink = document.getElementById('acceptAllButton'); var trackingPageName = '' || getFptiPage() || document.title; if(!isBannerClosed()){ document.body.className = document.body.className += " ccpaCookieBanner-acceptedAll"; if(undefined){ adjustPaddingTop(); window.addEventListener('resize', adjustPaddingTop);   document.body.className = document.body.className += " top-cookie-banner-enabled";    } } var pageName = trackingPageName || getFptiPage() || document.title; var winFptiData = JSON.parse(JSON.stringify((window && window.fpti) || {})); if(false){ bannerFptiData.isNativeBannerHidden = true; } for(var key in bannerFptiData){ winFptiData[key] = bannerFptiData[key]; }; winFptiData['event_name'] = 'cookie_banner_shown'; fptiLogActivity(winFptiData); if (manageLink) { manageLink.setAttribute('pagename', (pageName + '|managecookies')); } if (acceptAllLink) { acceptAllLink.setAttribute('pagename', (pageName + '|acceptcookies')); } bindGdprEvents(); }; function hideBanner() { var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); if(cookieLanguage && cookieBanner){ cookieLanguage.style.display = 'none'; cookieBanner.style.display = 'none'; }else { return false; } window.removeEventListener('resize', adjustPaddingTop); var cookieBannerAcceptAll = document.getElementsByClassName("ccpaCookieBanner-acceptedAll"); if(cookieBannerAcceptAll && cookieBannerAcceptAll[0]){ cookieBannerAcceptAll[0].style.removeProperty('padding-top'); } document.body.className = document.body.className.replace("ccpaCookieBanner-acceptedAll",""); document.body.className = document.body.className.replace("top-cookie-banner-enabled",""); return true; } function isPageReady () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); return !!(cookieBannerUi && getFptiReqData()); } function enableFocusEvent(addListener){ if(!false || undefined){ return; } var cookieBanner = document.getElementById('ccpaCookieBanner'); function focusIn(e) { if(cookieBanner && cookieBanner.style.display != 'none'){ var activeElement = document.activeElement; if(((activeElement.getBoundingClientRect().bottom) > (cookieBanner.getBoundingClientRect().top)) && !activeElement.parentElement.nodeName.includes("UL")){ activeElement.scrollIntoView({block: 'center'}); } }else{ document.removeEventListener("focusin", focusIn); } } if(addListener){ document.addEventListener("focusin",focusIn); } } function enableEvents(enable){ adjustPaddingBottom(enable); enableFocusEvent(enable); } var maxRetries = 34, bannerhidden=false; function triggerBanner() { if (isPageReady()) { cookieFiltering('pageLoad'); if(true){setTimeout(function(){ cookieFiltering('afterPageLoad')}, 3000);} if (isBannerClosed()) { hideBanner(); } if(false){ setSessionStorage('isInvisibleBanner'); } gdprSetup(); } else { if (isBannerClosed() && !bannerhidden ) { bannerhidden=hideBanner(); } if (maxRetries-- > 0) { setTimeout(triggerBanner, 150); } else { cookieFiltering('pageLoad'); if(true){setTimeout(function(){ cookieFiltering('afterPageLoad')}, 3000);} if (isBannerClosed()) { hideBanner(); } if(!isBannerClosed() && document.getElementById('ccpaCookieBanner') && !document.body.className.includes("ccpaCookieBanner-acceptedAll")){ document.body.className = document.body.className += " ccpaCookieBanner-acceptedAll"; if(undefined){ adjustPaddingTop(); window.addEventListener('resize', adjustPaddingTop);   document.body.className = document.body.className += " top-cookie-banner-enabled"; } } var acceptAllButton = document.getElementById('acceptAllButton'); var bannerDeclineButton = document.getElementById('bannerDeclineButton'); var bannerCloseButton = document.getElementById('bannerCloseButton'); var usBannerCloseButton = document.getElementById('usBannerCloseButton'); var cookieBanner = document.getElementById('ccpaCookieBanner'); if ( acceptAllButton ) { acceptAllButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('accept')); }; } if ( bannerDeclineButton ) { bannerDeclineButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('decline')); }; } if ( usBannerCloseButton ) { usBannerCloseButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('close')); }; } if ( bannerCloseButton ) { bannerCloseButton.onclick = function() { hideBanner(); setSessionStorage('isBannerClosed'); } } if(false){ setSessionStorage('isInvisibleBanner'); } } } } triggerBanner(); })();</script></div><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/entry.client-I74HTVVJ.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-DWXUS3OJ.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-L5PH23AQ.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-J6FIGYWP.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-J6PGNH2U.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-B6RWMYIW.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-JWVH3LXD.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-6U42WDX3.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-YVSNDZ53.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-J2GE73YK.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-5BT6OS7I.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-23AVEWBC.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-RNL33CPM.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-KHGBJ4DZ.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-MV6WZZTV.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-MGQUUIAL.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-4XUXT72V.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-7GGXQ4CC.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-ARCSJZ66.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-HUHQJMXM.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-V5GCSBYI.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-RTF7FTLH.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-Y6FV67CR.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-SDOOWKWW.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-ZAEIBDVB.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-H5OFEOJY.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-AJAXRUVI.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-XQKKFWZR.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-MZ7A5LCT.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-M3EUWJZ6.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-AGQ7GS2C.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-V4QDYNUE.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-G6HOB2YT.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-TIBAJGV5.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/root-HIAAUWNH.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-RXSCWH3H.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-IFX6OXXY.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-QPO3S2DS.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-WCFLXRHO.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-TL4Q62UH.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/routes/in-person-BCFKGM3O.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-SQDYALD2.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/_shared/chunk-UQGSNUDM.js"/><link rel="modulepreload" href="https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/routes/in-person/$-EGOLLNAC.js"/><script nonce="l4mqFgQ/bLkXkk9MqkilsYGT/gDRRmEsKlPxnWrBMzVdIpqZ">window.__remixContext = {"url":"/braintree/in-person/guides/making-a-transaction/","state":{"loaderData":{"root":{"isLoggedIn":false,"_csrf":"l3WOvvdVWr0mmyAxEQUa4k0BckXxJn6yAnj8Q=","searchConfig":{"appId":"^@KGPPiC^4KSTT85","aKey":"GROm[oD;FA\\0OoH=Q\\2XhWaFQf2[hHqRRShLBK`FhH\u003c","BTDOCS_INDEX":"BTDOCS_BTDOCSNODEWEB"},"analytics":{"appName":"btdocsnodeweb","stock":"UA-37159521-1","exp":"UA-37159521-8"},"nonce":"l4mqFgQ/bLkXkk9MqkilsYGT/gDRRmEsKlPxnWrBMzVdIpqZ","cookieBannerInfo":{"css":"\u003clink rel=\"stylesheet\" type=\"text/css\" href=\"https://www.paypalobjects.com/ncp-ui-web/consumer-home/8.2.3-legacy-v2/consent.min.css\"/\u003e\u003cstyle nonce=\"l4mqFgQ/bLkXkk9MqkilsYGT/gDRRmEsKlPxnWrBMzVdIpqZ\"\u003e@keyframes slideInFromBottom { 0% { transform: translateY(100%); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } } .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 15.125em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 15.125em; } .CookieBanner_rtl { direction: rtl; } .CookieBanner_container { box-sizing: border-box; animation: 1s ease-in 0s 1 slideInFromBottom; width: 100%; z-index: 1051; padding: 0 1rem; display: flex; justify-content: center; position: fixed; bottom: 1rem; left:0; } .CookieBanner_container * { box-sizing: border-box; } .CookieBanner_container_wrapper { max-width: 80rem; width: 100%; display: flex; padding: 1rem; border-radius: 1rem; background-color: #f0f2f9; box-shadow: 0px 0px 17px 0px rgba(0, 0, 0, 0.01), 0px 0px 15px 0px rgba(0, 0, 0, 0.01), 0px 0px 13px 0px rgba(0, 0, 0, 0.02), 0px -10px 10px 0px rgba(0, 0, 0, 0.03), 0px 0px 5px 0px rgba(0, 0, 0, 0.04); } .CookieBanner_content_wrapper { display: flex; flex-direction: column; } #manageCookiesLink { color: #0070e0; font-weight: 500; text-decoration: underline; font-family: PayPalOpen-Medium, \"Helvetica Neue\", Arial, sans-serif; } .CookieContent_wrapper { margin-block-end: 1rem; margin-inline: 0.5rem; } .CookieBanner_text { margin: 0; } .CookieBanner_buttonGroup { display: flex; } button.acceptButton { margin-inline-end: 0.25rem; } button.declineButton { margin-inline-start: 0.25rem; }  .close_icon { color: #686a6d; } @media only screen and (min-width: 752px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 10.25em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 10.25em; } .CookieBanner_container_wrapper { align-items: center; padding-block: 1.5rem; } .CookieBanner_content_wrapper { flex-direction: row; align-items: center; } .CookieContent_wrapper { margin-block-end: 0; margin-inline: 0.75rem; flex: 3; } .CookieBanner_buttonGroup { padding-inline: 1.5rem; } button.acceptButton { margin-inline-end: 0.5rem; } button.declineButton { margin-inline-start: 0.5rem; } } @media only screen and (min-width: 1024px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 7.75em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 7.75em; } } @media only screen and (min-width: 1152px) { .ccpaCookieBanner-acceptedAll { height: auto; padding-bottom: 7em; } .gdprCookieBanner-acceptedAll { height: auto; padding-bottom: 7em; } }\u003c/style\u003e","html":"\u003cdiv class=\"cdn-consent-css\"\u003e\u003cdiv class=\"ppui-theme theme_ppui_theme_tokens__1ozbsv90\"\u003e\u003cdiv id=\"ccpaCookieBanner\" class=\"CookieBanner_container\"\u003e\u003cdiv class=\"CookieBanner_container_wrapper\"\u003e\u003cspan class=\"styles_icon_svg__1dkwumb7 styles_icon_size_md__1dkwumb4\" data-ppui-info=\"\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"1em\" height=\"1em\"\u003e\u003cpath d=\"M18.822 5.052A9.682 9.682 0 0 0 12 2.25h-.1A9.75 9.75 0 0 0 2.25 12c0 4.031 2.492 7.412 6.502 8.828A3 3 0 0 0 12.75 18a1.5 1.5 0 0 1 1.5-1.5h4.332a2.982 2.982 0 0 0 2.925-2.332c.168-.739.25-1.494.243-2.25a9.685 9.685 0 0 0-2.928-6.866zm1.219 8.785A1.49 1.49 0 0 1 18.582 15H14.25a3 3 0 0 0-3 3 1.5 1.5 0 0 1-1.998 1.413C5.858 18.216 3.75 15.375 3.75 12a8.25 8.25 0 0 1 8.165-8.25h.084a8.283 8.283 0 0 1 8.25 8.18 8.334 8.334 0 0 1-.204 1.908h-.004zm-6.916-6.712a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zM9 9.375a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zm0 5.25a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zm8.25-5.25a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e\u003cdiv class=\"CookieBanner_content_wrapper\"\u003e\u003cdiv id=\"ccpaCookieContent_wrapper\" class=\"CookieContent_wrapper\"\u003e\u003ch4 class=\"styles_text-title_medium__awycp4g CookieBanner_text\" data-ppui-info=\"title-text\" id=\"cookieTitle\"\u003eIf you accept cookies, we’ll use them to improve and customize your experience and enable our partners to show you personalized PayPal ads when you visit other sites. \u003ca id=\"manageCookiesLink\" href=\"https://www.paypal.com/myaccount/privacy/cookiePrefs?locale=en_US\"\u003eManage cookies and learn more\u003c/a\u003e\u003c/h4\u003e\u003c/div\u003e\u003cdiv class=\"CookieBanner_buttonGroup\"\u003e\u003cbutton class=\"styles_button_base__6ka6j61 styles_button_size_lg__6ka6j62 styles_button_overlay__6ka6j69 styles_button_full_width__6ka6j6l acceptButton\" data-ppui-info=\"\" id=\"acceptAllButton\" tab-index=\"0\"\u003eAccept\u003c/button\u003e\u003cbutton class=\"styles_button_base__6ka6j61 styles_button_size_lg__6ka6j62 styles_button_overlay__6ka6j69 styles_button_full_width__6ka6j6l declineButton\" data-ppui-info=\"\" id=\"bannerDeclineButton\" tab-index=\"0\"\u003eDecline\u003c/button\u003e\u003c/div\u003e\u003c/div\u003e\u003cbutton data-ppui-info=\"\" class=\"styles_icon-button_base__134l21c8 styles_icon-button_size_lg__134l21c7 styles_icon-button_size__134l21c4 styles_icon-button_tertiary__134l21cd close_icon\" type=\"button\" id=\"bannerCloseButton\"\u003e\u003cspan class=\"styles_icon_svg__1dkwumb7 styles_icon_size_sm__1dkwumb3 styles_icon-button_icon__134l21cf\" data-ppui-info=\"\" aria-hidden=\"true\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"1em\" height=\"1em\"\u003e\u003cpath d=\"M19.28 18.22a.751.751 0 0 1-1.06 1.06L12 13.06l-6.22 6.22a.75.75 0 0 1-1.06-1.06L10.94 12 4.72 5.78a.75.75 0 1 1 1.06-1.06L12 10.94l6.22-6.22a.75.75 0 1 1 1.06 1.06L13.06 12l6.22 6.22z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e\u003cspan class=\"styles_screenreader__1p05eo10\"\u003eClose\u003c/span\u003e\u003c/button\u003e\u003c/div\u003e\u003c/div\u003e\u003c/div\u003e\u003c/div\u003e","js":"\u003cscript nonce=\"l4mqFgQ/bLkXkk9MqkilsYGT/gDRRmEsKlPxnWrBMzVdIpqZ\"\u003e(function () { var bannerFptiData = {}; function getFptiReqData () { let fptiReqData = window \u0026\u0026 window.fpti \u0026\u0026 window.PAYPAL \u0026\u0026 window.PAYPAL.analytics \u0026\u0026 window.PAYPAL.analytics.instance \u0026\u0026 window.PAYPAL.analytics.instance.options \u0026\u0026 window.PAYPAL.analytics.instance.options.request \u0026\u0026 window.PAYPAL.analytics.instance.options.request.data; if (fptiReqData) {  bannerFptiData = { api_name: 'cookieBanner', page:  'main:privacy:policy:ccpa', pgrp:  'main:privacy:policy', displaypage: window.fpti.pgrp, ppage: 'privacy_banner', bannertype: 'cookiebanner', ccpg: 'US', flag: 'ccpa', bannerversion: 'v14', bannersource: 'ConsentNodeServ', bannervariant: '', xe: '110041,109128,105410,105409,111623,111624,109059,111560,111622,110042,104407', xt: '148501,143659,123956,123954,158942,158944,143369,161854,158940,148504,119038', eligibility_reason: 'true', is_native: 'false', cookie_disabled: cookieDisabled(), reason_to_hide: reasonToHideBanner(), comp: 'consentnodeserv', space_key: 'SKSVPL', erpg: '' }; if(true){ bannerFptiData = {   ...bannerFptiData, userstate : 'NOT FOUND', usercountry : 'US', stateaccuracy : '0', countryaccuracy : '99', loggedin : 'false' } } } return fptiReqData; } function getFptiPage () { return getFptiReqData() \u0026\u0026 getFptiReqData().page; } function setSessionStorage(key) { try { sessionStorage.setItem(key, true); } catch (e) { console.log('error on setting sessioStorage', e); } } function isBannerClosed () { let is_banner_closed = false; try{ if(sessionStorage.getItem(\"isBannerClosed\") || sessionStorage.getItem(\"isUserAccepted\") || sessionStorage.getItem(\"isInvisibleBanner\")){ is_banner_closed = true; } } catch (e){ is_banner_closed = false; } return is_banner_closed || (false \u0026\u0026 true \u0026\u0026 (navigator \u0026\u0026 !navigator.cookieEnabled)); } function reasonToHideBanner(){ let reason = ''; try { if (false \u0026\u0026 true \u0026\u0026 (navigator \u0026\u0026 !navigator.cookieEnabled)){ reason = 'cookies are disabled'; } else if(sessionStorage.getItem(\"isUserAccepted\")){ reason = 'User accepted or declined'; } else if(sessionStorage.getItem(\"isBannerClosed\")){ reason = 'Banner Closed'; } else if(sessionStorage.getItem(\"isInvisibleBanner\")){ reason = 'Invisible banner loaded'; } } catch (error) { reason=''; } return reason; } function cookieFilteringRequest(eventSource) { const queryParamters = { eventSource, isQueryEncoded: true, page: '', component: '', eventSourceUrl: '', expireCookies: true }; if (window) { queryParamters.page = window.fpti \u0026\u0026 window.fpti.page || window.location \u0026\u0026 window.location.href; queryParamters.component = window.fpti \u0026\u0026 window.fpti.comp; const eventSourceUrl = window.location \u0026\u0026 window.location.href; queryParamters.eventSourceUrl = eventSourceUrl \u0026\u0026 eventSourceUrl.split(\"?\")[0]; } const xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP'); let queryString = ''; Object.keys(queryParamters).forEach((key, index) =\u003e queryString += (index \u003e 0 ? '\u0026' : '') + key + \"=\" + btoa(queryParamters[key])); const endPoint = \"https://www.paypal.com/myaccount/privacy/cookieprefs/cookies?\" + queryString; xhr.open('GET', endPoint); xhr.withCredentials = true; xhr.onreadystatechange = function () { if (xhr.readyState \u003e 3 \u0026\u0026 xhr.status === 200) { try { if (xhr?.response \u0026\u0026 xhr.response != \"OK\") { const invalidCookies = JSON.parse(xhr?.response)?.invalidCookies; if (invalidCookies.length \u003e 0) { const hostName = document.location.hostname; let subDomains = [hostName]; const parts = hostName.split('.'); parts.forEach((e, i) =\u003e {  if(e !== \"www\"){ subDomains.push(\".\" + parts.slice(i).join('.')); } }); subDomains.pop(); invalidCookies.forEach(cookie =\u003e { document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=.paypal.com'; document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;'; subDomains.forEach(domain =\u003e { document.cookie = cookie + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=' + domain; }) }) } } } catch (error) { } } }; xhr.setRequestHeader('Accept', 'application/json'); xhr.setRequestHeader('Content-Type', 'application/json'); xhr.send(); }; function cookieFiltering(eventSource=\"cookieBanner\"){ if(!true || false){ return; } cookieFilteringRequest(eventSource); } function postAjax(isFptiDataAvailable , cookieObj ) { if(!isFptiDataAvailable \u0026\u0026 getFptiReqData()){  isFptiDataAvailable = true; } if(isFptiDataAvailable){ acceptDeclineFptiEvents(cookieObj); } var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"); var endPoint = cookieObj.endPointPrefix + cookieObj.endPointSuffix; xhr.open('GET',endPoint); xhr.withCredentials = true; xhr.onreadystatechange = function() { if (xhr.readyState \u003e 3 \u0026\u0026 xhr.status == 200) { cookieFiltering(cookieObj.eventSource); } }; xhr.setRequestHeader('Accept', 'application/json','Content-Type', 'application/json'); xhr.send(null); return xhr; }; function fptiRecordClick(bannerData){ window.PAYPAL.analytics.Analytics.prototype.recordClick({ data: {...bannerData, product:\"cookieBanner\"}}); }; function acceptDeclineFptiEvents(cookieObj){ var trackingPageName = '' || getFptiPage() || document.title; var cookiesText = cookieObj.cookiesText; var cookiePrefs = cookieObj.cookiePrefs; var eventName = cookieObj.eventName; var acEventName = cookieObj.acEventName; var bannerData = { e: 'cl', link: cookiesText, pglk: trackingPageName + '|' + cookiesText, pgln: trackingPageName + '|' + cookiesText, c_prefs: cookiePrefs, opsel: cookiePrefs + ',US', csource: 'cookie', event_name: eventName }; for(var key in bannerFptiData){ bannerData[key] = bannerFptiData[key]; }; fptiRecordClick(bannerData); var winFptiData = JSON.parse(JSON.stringify((window \u0026\u0026 window.fpti) || {})); var updatedFptiData = { cookiebannerhidden: 'true', c_prefs: cookiePrefs, event_name: acEventName }; for(var key in bannerFptiData){ updatedFptiData[key] = bannerFptiData[key]; }; for(var key in updatedFptiData){ winFptiData[key] = updatedFptiData[key]; }; fptiLogActivity(winFptiData); }; function cookieObjSetup (type) { const cookieObjValue = { \"accept\" : { endPointSuffix : '\u0026type=explicit_banner\u0026country=US\u0026policy=ccpa\u0026version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=true\u0026performance=true\u0026functional=true', eventSource : 'acceptCookieBanner', cookiesText : 'acceptcookies', cookiePrefs : 'T=1,P=1,F=1,type=explicit_banner', eventName : 'cookie_banner_accept_clicked', acEventName : 'cookie_banner_accepted' }, \"decline\" : { endPointSuffix : '\u0026type=explicit_banner\u0026country=US\u0026policy=ccpa\u0026version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=false\u0026performance=false\u0026functional=false', eventSource : 'declineCookieBanner', cookiesText : 'declinecookies', cookiePrefs : 'T=0,P=0,F=0,type=explicit_banner', eventName : 'cookie_banner_decline_clicked', acEventName : 'cookie_banner_declined' }, \"close\" : { endPointSuffix : '\u0026type=explicit_close\u0026country=US\u0026policy=ccpa\u0026version=v14', endPointPrefix : 'https://www.paypal.com/myaccount/privacy/cookiePrefs/accept?marketing=true\u0026performance=true\u0026functional=true', eventSource : 'closeCookieBanner', cookiesText : 'closecookies', cookiePrefs : 'T=1,P=1,F=1,type=explicit_close', eventName : 'cookie_banner_close_clicked', acEventName : 'cookie_banner_closed' } }; return cookieObjValue[type]; } function bindGdprEvents () { var acceptAllButton = document.getElementById('acceptAllButton'); var bannerDeclineButton = document.getElementById('bannerDeclineButton'); var bannerCloseButton = document.getElementById('bannerCloseButton'); var usBannerCloseButton = document.getElementById('usBannerCloseButton'); var manageCookiesLink = document.getElementById('manageCookiesLink'); var cookieStatement = document.getElementById('cookieStatement'); var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); var cookieBannerAcceptAll = document.getElementsByClassName(\"ccpaCookieBanner-acceptedAll\"); var trackingPageName = '' || getFptiPage() || document.title; if (manageCookiesLink) { manageCookiesLink.onclick = function() { var manageCookiesData = { e: 'cl', link: 'managecookies', pglk: trackingPageName + '|managecookies', pgln: trackingPageName + '|managecookies', event_name: 'cookie_banner_manage_cookies_clicked' }; for(var key in bannerFptiData){ manageCookiesData[key] = bannerFptiData[key]; }; fptiRecordClick(manageCookiesData); }; } if (cookieStatement) { cookieStatement.onclick = function() { var cookieStatementData = { e: 'cl', link: 'cookieStmtLink', pglk: trackingPageName + '|cookieStmtLink', pgln: trackingPageName + '|cookieStmtLink', event_name: 'cookie_banner_cookie_statement_clicked' }; for(var key in bannerFptiData){ cookieStatementData[key] = bannerFptiData[key]; }; fptiRecordClick(cookieStatementData); }; } if(bannerCloseButton \u0026\u0026 cookieBanner \u0026\u0026 cookieLanguage){ bannerCloseButton.onclick = function() { hideBanner(); setSessionStorage('isBannerClosed'); var closebannerFptiData = { e: 'cl', link: 'closeBanner', pglk: trackingPageName + '|closeBanner', pgln: trackingPageName + '|closeBanner', event_name: 'cookie_banner_close_clicked' }; for(var key in bannerFptiData){ closebannerFptiData[key] = bannerFptiData[key]; }; fptiRecordClick(closebannerFptiData); }; } if (acceptAllButton \u0026\u0026 cookieBanner \u0026\u0026 cookieLanguage) { acceptAllButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('accept')); }; } if (bannerDeclineButton \u0026\u0026 cookieBanner \u0026\u0026 cookieLanguage) { bannerDeclineButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('decline')); }; } if (usBannerCloseButton \u0026\u0026 cookieBanner \u0026\u0026 cookieLanguage) { usBannerCloseButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(true , cookieObjSetup('close')); }; } window.hideGdprBanner = function () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); if (cookieBannerUi \u0026\u0026 cookieBannerUi.className.indexOf('ccpaHideCookieBannerMobile') === -1) { cookieBannerUi.className += \" ccpaHideCookieBannerMobile\"; } }; window.showGdprBanner = function () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); if (cookieBannerUi) { cookieBannerUi.className = cookieBannerUi.className.replace(\"ccpaHideCookieBannerMobile\",\"\"); } }; document.body.addEventListener(\"focus\", function (event) { if (event.target.type === 'text' || event.target.type === 'number' || event.target.type === 'password' || event.target.type === 'email' || event.target.type === 'select-one') { window.hideGdprBanner(); } }, true); } function adjustPaddingTop(){ var cookieBannerAcceptAll = document.getElementsByClassName(\"ccpaCookieBanner-acceptedAll\"); if(cookieBannerAcceptAll.length \u003e 0){ var cookieBanner = document.getElementById('ccpaCookieBanner'); var bannerHeight = cookieBanner ? cookieBanner.clientHeight : 0; if(cookieBannerAcceptAll \u0026\u0026 cookieBannerAcceptAll[0] \u0026\u0026 bannerHeight){ cookieBannerAcceptAll[0].style.paddingTop = bannerHeight/16 +'em'; } } }; var isPaddingBottomAdded = false, bannerPaddingBottom = \"\"; function adjustPaddingBottom(addListener){ if (undefined || !false) { return; } function adjustPaddingBottomEvent() { var cookieBannerAcceptAll = document.getElementsByClassName(\"ccpaCookieBanner-acceptedAll\"); if(cookieBannerAcceptAll.length \u003e 0){ var bodyPaddingBottom = cookieBannerAcceptAll[0].style.paddingBottom; var cookieBanner = document.getElementById('ccpaCookieBanner'); if(cookieBannerAcceptAll \u0026\u0026 cookieBannerAcceptAll[0] \u0026\u0026 cookieBanner.style.display != 'none') { if (bodyPaddingBottom === \"\" || (isPaddingBottomAdded \u0026\u0026 bannerPaddingBottom === bodyPaddingBottom)) { var cookieBannerContainer = document.getElementsByClassName('ccpaCookieBanner_container'); var bannerBottomHeight = cookieBannerContainer.length \u003e 0 ? parseInt(window.getComputedStyle(cookieBannerContainer[0]).bottom.replace(\"px\", \"\")) : 0; var bannerHeight = cookieBanner ? cookieBanner.clientHeight : 0; bannerPaddingBottom = ((bannerHeight + bannerBottomHeight) / 16) + 'em'; cookieBannerAcceptAll[0].style.paddingBottom = bannerPaddingBottom; isPaddingBottomAdded = true; } else if (isPaddingBottomAdded \u0026\u0026 bannerPaddingBottom !== bodyPaddingBottom) { isPaddingBottomAdded = false; } } } } if (addListener) { adjustPaddingBottomEvent(); window.addEventListener('resize', adjustPaddingBottomEvent);  } else { var cookieBannerAcceptAll = document.getElementsByClassName(\"ccpaCookieBanner-acceptedAll\"); if(cookieBannerAcceptAll \u0026\u0026 cookieBannerAcceptAll[0]){ window.removeEventListener('resize', adjustPaddingBottomEvent); adjustPaddingBottomEvent(); if (isPaddingBottomAdded \u0026\u0026 cookieBannerAcceptAll[0].style.paddingBottom === bannerPaddingBottom) { cookieBannerAcceptAll[0].style.removeProperty('padding-bottom'); } } } }; window.bindGdprEvents = bindGdprEvents; function cookieDisabled() { if (navigator.cookieEnabled === false) return \"true\"; else if (navigator.cookieEnabled === true) return \"false\"; else return \"undefined\"; }; function fptiLogActivity(winFptiData){ window.PAYPAL.analytics.Analytics.prototype.logActivity({...winFptiData, product:\"cookieBanner\"}); }; function gdprSetup () { var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); var manageLink = document.getElementById('manageCookiesLink'); var acceptAllLink = document.getElementById('acceptAllButton'); var trackingPageName = '' || getFptiPage() || document.title; if(!isBannerClosed()){ document.body.className = document.body.className += \" ccpaCookieBanner-acceptedAll\"; if(undefined){ adjustPaddingTop(); window.addEventListener('resize', adjustPaddingTop);   document.body.className = document.body.className += \" top-cookie-banner-enabled\";    } } var pageName = trackingPageName || getFptiPage() || document.title; var winFptiData = JSON.parse(JSON.stringify((window \u0026\u0026 window.fpti) || {})); if(false){ bannerFptiData.isNativeBannerHidden = true; } for(var key in bannerFptiData){ winFptiData[key] = bannerFptiData[key]; }; winFptiData['event_name'] = 'cookie_banner_shown'; fptiLogActivity(winFptiData); if (manageLink) { manageLink.setAttribute('pagename', (pageName + '|managecookies')); } if (acceptAllLink) { acceptAllLink.setAttribute('pagename', (pageName + '|acceptcookies')); } bindGdprEvents(); }; function hideBanner() { var cookieLanguage = document.getElementById('ccpaCookieContent_wrapper'); var cookieBanner = document.getElementById('ccpaCookieBanner'); if(cookieLanguage \u0026\u0026 cookieBanner){ cookieLanguage.style.display = 'none'; cookieBanner.style.display = 'none'; }else { return false; } window.removeEventListener('resize', adjustPaddingTop); var cookieBannerAcceptAll = document.getElementsByClassName(\"ccpaCookieBanner-acceptedAll\"); if(cookieBannerAcceptAll \u0026\u0026 cookieBannerAcceptAll[0]){ cookieBannerAcceptAll[0].style.removeProperty('padding-top'); } document.body.className = document.body.className.replace(\"ccpaCookieBanner-acceptedAll\",\"\"); document.body.className = document.body.className.replace(\"top-cookie-banner-enabled\",\"\"); return true; } function isPageReady () { var cookieBannerUi = document.getElementById('ccpaCookieBanner'); return !!(cookieBannerUi \u0026\u0026 getFptiReqData()); } function enableFocusEvent(addListener){ if(!false || undefined){ return; } var cookieBanner = document.getElementById('ccpaCookieBanner'); function focusIn(e) { if(cookieBanner \u0026\u0026 cookieBanner.style.display != 'none'){ var activeElement = document.activeElement; if(((activeElement.getBoundingClientRect().bottom) \u003e (cookieBanner.getBoundingClientRect().top)) \u0026\u0026 !activeElement.parentElement.nodeName.includes(\"UL\")){ activeElement.scrollIntoView({block: 'center'}); } }else{ document.removeEventListener(\"focusin\", focusIn); } } if(addListener){ document.addEventListener(\"focusin\",focusIn); } } function enableEvents(enable){ adjustPaddingBottom(enable); enableFocusEvent(enable); } var maxRetries = 34, bannerhidden=false; function triggerBanner() { if (isPageReady()) { cookieFiltering('pageLoad'); if(true){setTimeout(function(){ cookieFiltering('afterPageLoad')}, 3000);} if (isBannerClosed()) { hideBanner(); } if(false){ setSessionStorage('isInvisibleBanner'); } gdprSetup(); } else { if (isBannerClosed() \u0026\u0026 !bannerhidden ) { bannerhidden=hideBanner(); } if (maxRetries-- \u003e 0) { setTimeout(triggerBanner, 150); } else { cookieFiltering('pageLoad'); if(true){setTimeout(function(){ cookieFiltering('afterPageLoad')}, 3000);} if (isBannerClosed()) { hideBanner(); } if(!isBannerClosed() \u0026\u0026 document.getElementById('ccpaCookieBanner') \u0026\u0026 !document.body.className.includes(\"ccpaCookieBanner-acceptedAll\")){ document.body.className = document.body.className += \" ccpaCookieBanner-acceptedAll\"; if(undefined){ adjustPaddingTop(); window.addEventListener('resize', adjustPaddingTop);   document.body.className = document.body.className += \" top-cookie-banner-enabled\"; } } var acceptAllButton = document.getElementById('acceptAllButton'); var bannerDeclineButton = document.getElementById('bannerDeclineButton'); var bannerCloseButton = document.getElementById('bannerCloseButton'); var usBannerCloseButton = document.getElementById('usBannerCloseButton'); var cookieBanner = document.getElementById('ccpaCookieBanner'); if ( acceptAllButton ) { acceptAllButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('accept')); }; } if ( bannerDeclineButton ) { bannerDeclineButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('decline')); }; } if ( usBannerCloseButton ) { usBannerCloseButton.onclick = function() { hideBanner(); if (false) { setSessionStorage('isUserAccepted'); } postAjax(false,cookieObjSetup('close')); }; } if ( bannerCloseButton ) { bannerCloseButton.onclick = function() { hideBanner(); setSessionStorage('isBannerClosed'); } } if(false){ setSessionStorage('isInvisibleBanner'); } } } } triggerBanner(); })();\u003c/script\u003e","cookies":{"cookie_prefs":{"value":"T=0,P=0,F=0,type=initial","options":{"maxAge":31536000000,"SameSite":"None","Secure":true,"domain":".paypal.com"}}}},"fptiTracking":{"name":"pta","jsURL":"https://www.paypalobjects.com","serverURL":"https://t.paypal.com/ts","dataString":"pgrp=btdocs%3Ain-person_guides_making-a-transaction_\u0026page=btdocsnodeweb%2F.dust\u0026pgst=1767205388658\u0026calc=7e91dda8e3c41\u0026nsid=pHL5GmGNGU9oM7vOxlSToXqPHDL--gjG\u0026rsta=en_US\u0026pgtf=Nodejs\u0026env=live\u0026s=ci\u0026ccpg=US\u0026csci=84f514b0e47d4443a01e0a70a5364658\u0026comp=btdocsnodeweb\u0026tsrce=btdocsnodeweb\u0026cu=0"},"experiments":{"feedback":true,"onboarding":true,"signupramp":false,"uiramp":true,"webllsOn":false,"runInPostmanFeatureSwitch":true,"integrationBuilder":true,"migration":true,"askAIOptionsExp":true,"enableInternalUIFeatures":false},"env":"prod","nodeEnv":{"_env":"LIVE","isDev":false,"isNotDev":true,"isTest":false,"isNotTest":true,"isStage":false,"isQA":false,"isNotStage":true,"isNotQA":true,"isSandbox":false,"isNotSandbox":true,"isProd":true,"isLive":true,"isNotProd":false,"isNotLive":false}},"routes/braintree/in-person/$":{"id":"27kbaYX4bFs9xReyvEEOER","document_id":"FFT41","entry_template_id":"freeForm","entry_template_name":"Braintree In Person Doc","resource_type":"ENTRY","create_time":"2024-11-20T19:04:37.405Z","update_time":"2025-01-21T10:25:09.143Z","language":["en-US"],"revision":19,"published_counter":7,"published_version":18,"content":{"internalTitle":"Initiate a Sale or Refund /in-person/guides/making-a-transaction/","slug":"/in-person/guides/making-a-transaction/","title":"Initiate a Sale or Refund","subtitle":"This article covers both sale and refund transactions","content":{"node":"root","child":[{"node":"element","tag":"main","child":[{"node":"text","text":"\n    "},{"node":"element","tag":"header","child":[{"node":"text","text":"\n        "},{"node":"element","tag":"h1","child":[{"node":"text","text":"Initiate a Sale or Refund"}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"This article covers both sale and refund transactions"}]},{"node":"text","text":"\n    "}]},{"node":"text","text":"\n    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n        "},{"node":"element","tag":"h2","attr":{"id":"initializing-the-reader-for-charging"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Initializing the Reader for Charging"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            When you're ready to charge a customer, you should create an In-Store\n            Context by\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Mutation--requestChargeFromInStoreReader"},"child":[{"node":"text","text":"requesting a charge from a card reader"}]},{"node":"text","text":". In this step, your application will specify, at minimum, the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"readerId"}]},{"node":"text","text":"\n            ,\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"merchantAccountId"}]},{"node":"text","text":"and\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"transaction.amount"}]},{"node":"text","text":"\n            details to initialize the reader for payment acceptance. Note that the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"merchantAccountId"}]},{"node":"text","text":"is not validated against in the Sandbox\n            environment; however, this is a required value in the production\n            environment for all interactions with the card reader.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Charging is similar to authorizing, except that if the authorization is\n            successful, Braintree will automatically capture the transaction. This is\n            also known as\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/docs/reference/request/transaction/sale/"},"child":[{"node":"text","text":"creating a Sale Transaction"}]},{"node":"text","text":".\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            To provide idempotency on the request charge mutation, you must also\n            include the HTTP header\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"Idempotency-Key "}]},{"node":"text","text":"with a unique value. UUIDv4 is recommended.\n            For example, if using\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"curl"}]},{"node":"text","text":"\n            to make the request, you would include\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            Using\n                            "},{"node":"element","tag":"code","child":[{"node":"text","text":"Idempotency-Key "}]},{"node":"text","text":"is an important way of preventing\n                            duplicate charges to your customer in the event of an API\n                            communication failure. For example, if you request a charge from\n                            the reader, the customer completes the charge on the reader, but\n                            for some reason, the POS does not get back the transaction result\n                            before timing out. In this scenario, the POS could recover the\n                            original transaction using the same\n                            "},{"node":"element","tag":"code","child":[{"node":"text","text":"Idempotency-Key "}]},{"node":"text","text":"without accidentally creating a\n                            duplicate charge.\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"--header 'Idempotency-Key: 94c9ea8b-31b0-488e-a231-57e32f0bfd70' \n        "}]}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-mutation","id":"tab-graphql-mutation"},"child":[{"node":"text","text":"\n                        GraphQL Mutation"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-variables","id":"tab-graphql-variables"},"child":[{"node":"text","text":"\n                        GraphQL Variables"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"sample-api-response","id":"tab-sample-api-response"},"child":[{"node":"text","text":"\n                        Sample API Response\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-mutation","id":"graphql-mutation"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"mutation RequestChargeFromInStoreReader($input: RequestChargeFromInStoreReaderInput!) {\n                requestChargeFromInStoreReader(input: $input) {\n                    clientMutationId\n                    id\n                    status\n                    reader {\n                        id\n                        name                \n                        status\n                    }\n                }\n            }"}]}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-variables","id":"graphql-variables"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"input\": {\n                  \"readerId\": \"your reader ID here\",\n                  \"transaction\": {\n                    \"amount\": \"39.85\",            \n                          \"orderId\": \"ExampleOrderNumber-1221\",\n                          \"merchantAccountId\": \"ExampleLocation_2005\"  \n                  }\n                }\n              }"}]}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response","id":"sample-api-response"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"requestChargeFromInStoreReader\": {\n                        \"clientMutationId\": \"abc123sdfsdf\",\n                        \"id\": \"aW5zdG9yZWNvbnRleHRfIzRjNjQzNGMwNmM5MDQ3OWNhNjFiYWMwYWE5MDFlM2M3I1ZFUklGT05FLTgwMy00MTQtNjkzI3VzLWVhc3QtMQ\",\n                        \"status\": \"PENDING\",\n                        \"reader\": {\n                            \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\",\n                            \"name\": \"POS Terminal #5\",\n                            \"status\": \"ONLINE\"\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"d86bfaf0-2e25-4ff5-984c-9d4bd8b574ee\"\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"img","attr":{"src":"https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20Sale:Tap%20to%20pay.jpeg"}},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h2","attr":{"id":"checking-the-reader-charge-status"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Checking the Reader Charge Status"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            After the reader is initialized for payment, your application must wait\n            for the customer to interact with it (i.e. insert a test card) and for the\n            payment attempt to be processed. Your application should use\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Query--node"},"child":[{"node":"text","text":"the node query"}]},{"node":"text","text":"\n            to poll on a 2-second interval between responses for the current status of\n            the payment using the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"RequestChargeInStoreContext.id"}]},{"node":"text","text":"\n            received at charge initialization and monitor the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"RequestChargeInStoreContext.status"}]},{"node":"text","text":"field as the transaction\n            goes through the lifecycle.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"img","attr":{"src":"https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20Sale:Checking%20the%20reader%20charge%20status.png"}},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            When the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"RequestChargeInStoreContext.status"}]},{"node":"text","text":"\n            changes to \"COMPLETE\", you will also receive a transaction object\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"RequestChargeInStoreContext.transaction"}]},{"node":"text","text":"in the response. Save\n            the completed\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"RequestChargeInStoreContext.transaction.id"}]},{"node":"text","text":"\n            in your database for referencing the transaction in subsequent operations.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            All successful test transactions should have a transaction amount value\n            below $2,000 for testing. For more info on using amounts to simulate\n            various transaction outcomes, look at\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/testing-your-integration/"},"child":[{"node":"text","text":"Testing Your Integration"}]},{"node":"text","text":".\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"element","tag":"br"},{"node":"text","text":"\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/testing-your-integration/"},"child":[{"node":"element","tag":"strong","child":[{"node":"text","text":"Testing the Unhappy Paths in Sandbox"}]}]},{"node":"element","tag":"strong","child":[{"node":"text","text":":"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"element","tag":"strong","child":[{"node":"element","tag":"br"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"graphql-query","id":"tab-graphql-query"},"child":[{"node":"text","text":"\n                        GraphQL Query"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"pending-response","id":"tab-pending-response"},"child":[{"node":"text","text":"\n                        PENDING Response"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"complete-response","id":"tab-complete-response"},"child":[{"node":"text","text":"\n                        COMPLETE Response"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"failed-response-decline","id":"tab-failed-response-decline"},"child":[{"node":"text","text":"\n                        FAILED Response : Decline"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"failed-response-network-error","id":"tab-failed-response-network-error"},"child":[{"node":"text","text":"\n                        FAILED Response : Network Error"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"failed-response-gateway-reject","id":"tab-failed-response-gateway-reject"},"child":[{"node":"text","text":"\n                        FAILED Response: Gateway Reject\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-query","id":"graphql-query"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                node(id: \"{{last_braintree_instore_context}}\") {\n                 ... on RequestChargeInStoreContext {\n                  id\n                  status\n                  statusReason\n                  reader {\n                   id\n                   name\n                   status\n                  }\n                  transaction {\n                   id\n                   orderId\n                   status\n                   statusHistory {\n                    ... on PaymentStatusEvent {\n                     status\n                     timestamp\n                     terminal\n                     ... on AuthorizedEvent {\n                      processorResponse {\n                       authorizationId\n                       emvData\n                       message\n                       legacyCode\n                       retrievalReferenceNumber\n                      }\n                     }\n                     ... on GatewayRejectedEvent {\n                      gatewayRejectionReason\n                     }\n                     ... on FailedEvent {\n                      processorResponse {\n                       retrievalReferenceNumber\n                       emvData\n                       message\n                       legacyCode\n                      }\n                      networkResponse {\n                       message\n                       code\n                      }\n                     }\n                     ... on ProcessorDeclinedEvent {\n                      processorResponse {\n                       legacyCode\n                       message\n                       authorizationId\n                       additionalInformation\n                       retrievalReferenceNumber\n                       emvData\n                      }\n                      declineType\n                      networkResponse {\n                       code\n                       message\n                      }\n                     }\n                    }\n                   }\n                   merchantAddress {\n                    company\n                    streetAddress\n                    addressLine1\n                    extendedAddress\n                    addressLine2\n                    locality\n                    adminArea2\n                    region\n                    adminArea1\n                    postalCode\n                    countryCode\n                    phoneNumber\n                   }\n                   amount {\n                    value\n                    currencyIsoCode\n                   }\n                   merchantAccountId\n                   merchantName\n                   createdAt\n                   channel\n                   customFields {\n                    name\n                    value\n                   }\n                   paymentMethodSnapshot {\n                    ... on CreditCardDetails {\n                     origin {\n                      details {\n                       ... on EmvCardOriginDetails {\n                        applicationPreferredName\n                        applicationIdentifier\n                        terminalId\n                        inputMode\n                        pinVerified\n                       }\n                      }\n                     }\n                     brandCode\n                     last4\n                     bin\n                     expirationMonth\n                     expirationYear\n                     cardholderName\n                     binData {\n                      issuingBank\n                      countryOfIssuance\n                      prepaid\n                      healthcare\n                      debit\n                      commercial\n                     }\n                    }\n                   }\n                  }\n                 }\n                }\n               }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-pending-response","id":"pending-response"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"node\": {\n                        \"id\": \"aW5zdG9yZWNvbnRleHRfIzY3MzhkNmIzOGFjNzRiOGVhYzZkMTY4NTc4MjNlOTVlI1ZFUklGT05FLTgwMy00MTQtNjkzI3VzLWVhc3QtMQ\",\n                        \"status\": \"PENDING\",\n                        \"reader\": {\n                            \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\",\n                            \"name\": \"POS Terminal #5\",\n                            \"status\": \"ONLINE\"\n                        },\n                        \"transaction\": null\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"8214a538-c1b5-44f6-ae2c-a14a180d9678\"\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-complete-response","id":"complete-response"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"node\": {\n                        \"id\": \"aW5zdG9yZWNvbnRleHRfIzAzNjcyNTVjNDc3NzRhNjc4YWRlMThiY2Y0NWZmZTU5I1ZFUklGT05FLTgwNC03NzUtMDg1I3VzLWVhc3QtMQ\",\n                        \"status\": \"COMPLETE\",\n                        \"reader\": {\n                            \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\",\n                            \"name\": \"POS Terminal #5\",\n                            \"status\": \"ONLINE\"\n                        },\n                        \"transaction\": {\n                            \"id\": \"dHJhbnNhY3Rpb25fOWh5cmtiZmg\",\n                            \"orderId\": \"ExampleOrderNumber-12\",\n                            \"status\": \"SUBMITTED_FOR_SETTLEMENT\",\n                            \"statusHistory\": [\n                                {\n                                    \"status\": \"SUBMITTED_FOR_SETTLEMENT\",\n                                    \"timestamp\": \"2021-12-14T20:08:57.000000Z\",\n                                    \"terminal\": false\n                                },\n                                {\n                                    \"status\": \"AUTHORIZED\",\n                                    \"timestamp\": \"2021-12-14T20:08:57.000000Z\",\n                                    \"terminal\": false,\n                                    \"processorResponse\": {\n                                        \"authorizationId\": \"8P3FVW\",\n                                        \"emvData\": \"9F240512345678908A023030\",\n                                        \"message\": \"Approved\",\n                                        \"legacyCode\": \"1000\",\n                                        \"retrievalReferenceNumber\": \"1234567\"\n                                    }\n                                }\n                            ],\n                            \"merchantAddress\": {\n                                \"company\": null,\n                                \"streetAddress\": null,\n                                \"addressLine1\": null,\n                                \"extendedAddress\": null,\n                                \"addressLine2\": null,\n                                \"locality\": \"Braintree\",\n                                \"adminArea2\": \"Braintree\",\n                                \"region\": \"MA\",\n                                \"adminArea1\": \"MA\",\n                                \"postalCode\": \"02184\",\n                                \"countryCode\": null,\n                                \"phoneNumber\": \"5555555555\"\n                            },\n                            \"amount\": {\n                                \"value\": \"1999.00\",\n                                \"currencyIsoCode\": \"USD\"\n                            },\n                            \"merchantAccountId\": \"paypal\",\n                            \"merchantName\": \"DESCRIPTORNAME\",\n                            \"createdAt\": \"2021-12-14T20:08:56.000000Z\",\n                            \"channel\": null,\n                            \"customFields\": null,\n                            \"paymentMethodSnapshot\": {\n                                \"origin\": {\n                                    \"details\": {\n                                        \"applicationPreferredName\": \"Braintree Credit\",\n                                        \"applicationIdentifier\": \"A000000003101001\",\n                                        \"terminalId\": \"975af200\",\n                                        \"inputMode\": \"CONTACTLESS\",\n                                        \"pinVerified\": false\n                                    }\n                                },\n                                \"brandCode\": \"VISA\",\n                                \"last4\": \"8885\",\n                                \"bin\": \"421212\",\n                                \"expirationMonth\": \"12\",\n                                \"expirationYear\": \"2025\",\n                                \"cardholderName\": \"BRAINTREE TEST\",\n                                \"binData\": {\n                                    \"issuingBank\": null,\n                                    \"countryOfIssuance\": null,\n                                    \"prepaid\": \"UNKNOWN\",\n                                    \"healthcare\": \"UNKNOWN\",\n                                    \"debit\": \"UNKNOWN\",\n                                    \"commercial\": \"UNKNOWN\"\n                                }\n                            }\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"220078d6-bae4-4902-a614-e3c28addf13d\"\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-failed-response-decline","id":"failed-response-decline"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"node\": {\n                        \"id\": \"aW5zdG9yZWNvbnRleHRfI2Y1ZTJmOGZkMzI1OTQ2MzY5OGVmNTQ1N2Q0YmZlZjY0I1ZFUklGT05FLTgwNC03NzUtMDg1I3VzLWVhc3QtMQ\",\n                        \"status\": \"FAILED\",\n                        \"reader\": {\n                            \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\",\n                            \"name\": \"POS Terminal #5\",\n                            \"status\": \"ONLINE\"\n                        },\n                        \"transaction\": {\n                            \"id\": \"dHJhbnNhY3Rpb25fZjMzZ3piM3g\",\n                            \"orderId\": \"ExampleOrderNumber-12\",\n                            \"status\": \"PROCESSOR_DECLINED\",\n                            \"statusHistory\": [\n                                {\n                                    \"status\": \"PROCESSOR_DECLINED\",\n                                    \"timestamp\": \"2021-12-14T20:11:35.000000Z\",\n                                    \"terminal\": true,\n                                    \"processorResponse\": {\n                                        \"legacyCode\": \"2999\",\n                                        \"message\": \"Processor Declined\",\n                                        \"authorizationId\": null,\n                                        \"additionalInformation\": \"2999 : \",\n                                        \"retrievalReferenceNumber\": \"1234567\",\n                                        \"emvData\": \"9F240512345678908A023035\"\n                                    },\n                                    \"declineType\": null,\n                                    \"networkResponse\": {\n                                        \"code\": \"XX\",\n                                        \"message\": \"sample network response text\"\n                                    }\n                                }\n                            ],\n                            \"merchantAddress\": {\n                                \"company\": null,\n                                \"streetAddress\": null,\n                                \"addressLine1\": null,\n                                \"extendedAddress\": null,\n                                \"addressLine2\": null,\n                                \"locality\": \"Braintree\",\n                                \"adminArea2\": \"Braintree\",\n                                \"region\": \"MA\",\n                                \"adminArea1\": \"MA\",\n                                \"postalCode\": \"02184\",\n                                \"countryCode\": null,\n                                \"phoneNumber\": \"5555555555\"\n                            },\n                            \"amount\": {\n                                \"value\": \"2999.00\",\n                                \"currencyIsoCode\": \"USD\"\n                            },\n                            \"merchantAccountId\": \"paypal\",\n                            \"merchantName\": \"DESCRIPTORNAME\",\n                            \"createdAt\": \"2021-12-14T20:11:35.000000Z\",\n                            \"channel\": null,\n                            \"customFields\": null,\n                            \"paymentMethodSnapshot\": {\n                                \"origin\": {\n                                    \"details\": {\n                                        \"applicationPreferredName\": \"Braintree Credit\",\n                                        \"applicationIdentifier\": \"A000000003101001\",\n                                        \"terminalId\": \"975af200\",\n                                        \"inputMode\": \"CONTACTLESS\",\n                                        \"pinVerified\": false\n                                    }\n                                },\n                                \"brandCode\": \"VISA\",\n                                \"last4\": \"8885\",\n                                \"bin\": \"421212\",\n                                \"expirationMonth\": \"12\",\n                                \"expirationYear\": \"2025\",\n                                \"cardholderName\": \"BRAINTREE TEST\",\n                                \"binData\": {\n                                    \"issuingBank\": null,\n                                    \"countryOfIssuance\": null,\n                                    \"prepaid\": \"UNKNOWN\",\n                                    \"healthcare\": \"UNKNOWN\",\n                                    \"debit\": \"UNKNOWN\",\n                                    \"commercial\": \"UNKNOWN\"\n                                }\n                            }\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"402b24bd-ee8e-445f-886e-c34080e43540\"\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-failed-response-network-error","id":"failed-response-network-error"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"node\": {\n                        \"id\": \"aW5zdG9yZWNvbnRleHRfI2QwY2RiMDg0NDUzODRlZTNhMjZkZjRhZDliY2YwMjRjI1ZFUklGT05FLTgwNC03NzUtMDg1I3VzLWVhc3QtMQ\",\n                        \"status\": \"FAILED\",\n                        \"reader\": {\n                            \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\",\n                            \"name\": \"POS Terminal #5\",\n                            \"status\": \"ONLINE\"\n                        },\n                        \"transaction\": {\n                            \"id\": \"dHJhbnNhY3Rpb25fcHQ3emRyYjg\",\n                            \"orderId\": \"ExampleOrderNumber-12\",\n                            \"status\": \"FAILED\",\n                            \"statusHistory\": [\n                                {\n                                    \"status\": \"FAILED\",\n                                    \"timestamp\": \"2021-12-14T20:13:40.000000Z\",\n                                    \"terminal\": true,\n                                    \"processorResponse\": {\n                                        \"retrievalReferenceNumber\": \"1234567\",\n                                        \"emvData\": null,\n                                        \"message\": \"Processor Network Unavailable - Try Again\",\n                                        \"legacyCode\": \"3000\"\n                                    },\n                                    \"networkResponse\": {\n                                        \"message\": \"sample network response text\",\n                                        \"code\": \"XX\"\n                                    }\n                                }\n                            ],\n                            \"merchantAddress\": {\n                                \"company\": null,\n                                \"streetAddress\": null,\n                                \"addressLine1\": null,\n                                \"extendedAddress\": null,\n                                \"addressLine2\": null,\n                                \"locality\": \"Braintree\",\n                                \"adminArea2\": \"Braintree\",\n                                \"region\": \"MA\",\n                                \"adminArea1\": \"MA\",\n                                \"postalCode\": \"02184\",\n                                \"countryCode\": null,\n                                \"phoneNumber\": \"5555555555\"\n                            },\n                            \"amount\": {\n                                \"value\": \"3000.99\",\n                                \"currencyIsoCode\": \"USD\"\n                            },\n                            \"merchantAccountId\": \"paypal\",\n                            \"merchantName\": \"DESCRIPTORNAME\",\n                            \"createdAt\": \"2021-12-14T20:13:40.000000Z\",\n                            \"channel\": null,\n                            \"customFields\": null,\n                            \"paymentMethodSnapshot\": {\n                                \"origin\": {\n                                    \"details\": {\n                                        \"applicationPreferredName\": \"Braintree Credit\",\n                                        \"applicationIdentifier\": \"A000000003101001\",\n                                        \"terminalId\": \"975af200\",\n                                        \"inputMode\": \"CONTACTLESS\",\n                                        \"pinVerified\": false\n                                    }\n                                },\n                                \"brandCode\": \"VISA\",\n                                \"last4\": \"8885\",\n                                \"bin\": \"421212\",\n                                \"expirationMonth\": \"12\",\n                                \"expirationYear\": \"2025\",\n                                \"cardholderName\": \"BRAINTREE TEST\",\n                                \"binData\": {\n                                    \"issuingBank\": null,\n                                    \"countryOfIssuance\": null,\n                                    \"prepaid\": \"UNKNOWN\",\n                                    \"healthcare\": \"UNKNOWN\",\n                                    \"debit\": \"UNKNOWN\",\n                                    \"commercial\": \"UNKNOWN\"\n                                }\n                            }\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"c4425b05-7fb8-40cd-9e5f-5cc05278f2fa\"\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-failed-response-gateway-reject","id":"failed-response-gateway-reject"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"node\": {\n                        \"id\": \"aW5zdG9yZWNvbnRleHRfIzMwNzVlNDhlZmRhMDRkZjc4OTY0NjA4MWY2Y2I1YWVlI1ZFUklGT05FLTgwNC03NzUtMDg1I3VzLWVhc3QtMQ\",\n                        \"status\": \"FAILED\",\n                        \"reader\": {\n                            \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\",\n                            \"name\": \"POS Terminal #5\",\n                            \"status\": \"ONLINE\"\n                        },\n                        \"transaction\": {\n                            \"id\": \"dHJhbnNhY3Rpb25fNGZxc3Yyc24\",\n                            \"orderId\": \"ExampleOrderNumber-12\",\n                            \"status\": \"GATEWAY_REJECTED\",\n                            \"statusHistory\": [\n                                {\n                                    \"status\": \"GATEWAY_REJECTED\",\n                                    \"timestamp\": \"2021-12-14T20:15:08.000000Z\",\n                                    \"terminal\": true,\n                                    \"gatewayRejectionReason\": \"APPLICATION_INCOMPLETE\"\n                                }\n                            ],\n                            \"merchantAddress\": {\n                                \"company\": null,\n                                \"streetAddress\": null,\n                                \"addressLine1\": null,\n                                \"extendedAddress\": null,\n                                \"addressLine2\": null,\n                                \"locality\": \"Braintree\",\n                                \"adminArea2\": \"Braintree\",\n                                \"region\": \"MA\",\n                                \"adminArea1\": \"MA\",\n                                \"postalCode\": \"02184\",\n                                \"countryCode\": null,\n                                \"phoneNumber\": \"5555555555\"\n                            },\n                            \"amount\": {\n                                \"value\": \"5001.00\",\n                                \"currencyIsoCode\": \"USD\"\n                            },\n                            \"merchantAccountId\": \"paypal\",\n                            \"merchantName\": \"DESCRIPTORNAME\",\n                            \"createdAt\": \"2021-12-14T20:15:07.000000Z\",\n                            \"channel\": null,\n                            \"customFields\": null,\n                            \"paymentMethodSnapshot\": {\n                                \"origin\": {\n                                    \"details\": {\n                                        \"applicationPreferredName\": \"Braintree Credit\",\n                                        \"applicationIdentifier\": \"A000000003101001\",\n                                        \"terminalId\": \"975af200\",\n                                        \"inputMode\": \"CONTACTLESS\",\n                                        \"pinVerified\": false\n                                    }\n                                },\n                                \"brandCode\": \"VISA\",\n                                \"last4\": \"8885\",\n                                \"bin\": \"421212\",\n                                \"expirationMonth\": \"12\",\n                                \"expirationYear\": \"2025\",\n                                \"cardholderName\": \"BRAINTREE TEST\",\n                                \"binData\": {\n                                    \"issuingBank\": null,\n                                    \"countryOfIssuance\": null,\n                                    \"prepaid\": \"UNKNOWN\",\n                                    \"healthcare\": \"UNKNOWN\",\n                                    \"debit\": \"UNKNOWN\",\n                                    \"commercial\": \"UNKNOWN\"\n                                }\n                            }\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"30e1f4b9-84ae-4290-8fbf-f992edcd4d52\"\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n\n        "},{"node":"element","tag":"h3","attr":{"id":"charge-flow-example-sequence-diagram"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Charge Flow Example Sequence Diagram"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            The following high-level sequence diagram depicts an example charge flow;\n            however, this flow can vary depending on whether you are vaulting, and\n            polling logic may also vary by application. This is just an example flow.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"img","attr":{"src":"https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Charge%20Flow%20Sequence%20Diagram%20.webp"}},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h2","attr":{"id":"recommended-timeout-logic"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Recommended Timeout Logic"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Knowing that every application will have different flows and architectural\n            constraints the following recommended timeout logic is just a suggestion\n            based on best practices, but every integration may be different.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Generally, the card reader has a built-in timeout logic of 180 seconds for\n            a “maximum checkout time,” that is, from the moment you\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/#initializing-the-reader-for-charging"},"child":[{"node":"text","text":"request a charge"}]},{"node":"text","text":"\n            from the card reader, it will hang for 180 seconds if no payment\n            instrument is presented. However, it is recommended for the POS\n            application to have its own timeout logic to make sure the POS stays in\n            sync with the card reader and provides a seamless experience to the\n            customer.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h4","attr":{"id":"recommended-sequence-for-initializing-card-reader-and-polling-for-transaction-result"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                Recommended sequence for initializing card reader and polling for\n                transaction result:\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"table","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"tbody","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Step 1"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Generate unique\n                                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"Idempotency key"}]},{"node":"text","text":"\n                                        (UUID) to be added in your request header\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Step 2"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Use an HTTP timeout window of 10 seconds if you do not get\n                                        back a response\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Step 3"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Send the request again using the same\n                                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"Idempotency key"}]},{"node":"text","text":", this allows you to recover the\n                                        request session and avoid sending a duplicate request\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Step 4"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Once you get an\n                                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"InstoreContext.Id"}]},{"node":"text","text":"\n                                        start polling against it to retrieve the transaction.Id and\n                                        final transaction status\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Step 5"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Use an HTTP timeout window of 3 seconds if you do not get a\n                                        response while polling against the\n                                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"InStoreContext.Id"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Step 6"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Send the\n                                        "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status"},"child":[{"node":"text","text":"polling request"}]},{"node":"text","text":"\n                                        every 2-3 seconds until you get the final\n                                        transaction.status,\n                                        "},{"node":"element","tag":"code","child":[{"node":"text","text":"transaction.Id"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h2","attr":{"id":"cancelling-a-charge"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Cancelling a Charge"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            If you need to stop a transaction from being paid while the reader is\n            activated and requesting payment, you can\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Mutation--requestCancelFromInStoreReader"},"child":[{"node":"text","text":"cancel"}]},{"node":"text","text":"\n            the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"InStoreContext"}]},{"node":"text","text":". Cancelling an\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"InStoreContext"}]},{"node":"text","text":"\n            places the reader back into\n            "},{"node":"element","tag":"strong","child":[{"node":"text","text":"idle mode "}]},{"node":"text","text":"and returns you to the PayPal-branded\n            screensaver. It is important to note that canceling a charge is only\n            possible when a payment instrument has not yet been presented to the card\n            reader. After the card reader has been presented with payment, the only\n            way to stop that would be with a reversal or refund of payment.\n        "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"notification","child":[{"node":"text","text":"\n                Note that if you request to cancel the\n                "},{"node":"element","tag":"code","child":[{"node":"text","text":"InStoreContext"}]},{"node":"text","text":" and the API returns a context status\n                of \"COMPLETE\" that would indicate that the charge has already been\n                processed. In this scenario, you should\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status"},"child":[{"node":"text","text":"check the reader charge status"}]},{"node":"text","text":"\n                again to get the\n                "},{"node":"element","tag":"code","child":[{"node":"text","text":"transactionId "}]},{"node":"text","text":"and perform a reversal or\n                "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/"},"child":[{"node":"text","text":"refund "}]},{"node":"text","text":"to cancel the charge.\n                "},{"node":"element","tag":"br"},{"node":"text","text":"\n                "},{"node":"element","tag":"br"},{"node":"text","text":"\n                "},{"node":"element","tag":"em","child":[{"node":"element","tag":"strong","child":[{"node":"text","text":"*** As of August 2022, we have introduced a new API error code 96716, which occurs when you attempt to cancel a context ID that is already in a \"PROCESSING\" or \"COMPLETE\" state"}]}]},{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-mutation-1","id":"tab-graphql-mutation-1"},"child":[{"node":"text","text":"\n                        GraphQL Mutation"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-variables-1","id":"tab-graphql-variables-1"},"child":[{"node":"text","text":"\n                        GraphQL Variables"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"sample-api-response-1","id":"tab-sample-api-response-1"},"child":[{"node":"text","text":"\n                        Sample API Response\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-mutation-1","id":"graphql-mutation-1"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"mutation RequestCancelFromInStoreReader(\n                $input: RequestCancelFromInStoreReaderInput!\n            ) {\n                requestCancelFromInStoreReader(input: $input) {\n                    id\n                    status\n                    reader {\n                        id\n                        name\n                        status\n                        location {\n                            id\n                            name\n                        }\n                    }\n                }\n            }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-variables-1","id":"graphql-variables-1"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"input\": {\n                  \"inStoreContextId\": \"context-id\"\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response-1","id":"sample-api-response-1"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"requestCancelFromInStoreReader\": {\n                        \"id\": \"aW5zdG9yZWNvbnRleHRfI2JmMWFkNzE1MDViMTQwZWU5NWY1MjMzNjU5NDUyMzgwI1ZFUklGT05FLTgwNC03NzUtMDg1I3VzLWVhc3QtMQ\",\n                        \"status\": \"CANCELLED\",\n                        \"reader\": {\n                            \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\",\n                            \"name\": \"POS Terminal #5\",\n                            \"status\": \"ONLINE\",\n                            \"location\": {\n                                \"id\": \"aW5zdG9yZWxvY2F0aW9uXyMxMDY5ZTk2MGZhODg0M2JmOTMyZDMzYTE3NDlhNjZkMA\",\n                                \"name\": \"Test Location\"\n                            }\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"561448c8-40d9-4ba0-b734-a93d067873b3\"\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h2","attr":{"id":"partial-authorizations"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Partial Authorizations"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            The Partial Auth feature has undergone a rebuild as of October\n                            2023. The information below represents the new behavior and\n                            integration path.\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Partial Authorizations refer to transactions where a card with limited\n            available funds is used to complete a purchase, and the available funds\n            are less than the amount to be collected. This can occur with a debit card\n            or a prepaid gift card. For example, if a merchant wants to charge $100,\n            and the customer presents a card with only $50 available. With a partial\n            authorization, the available $50 would be authorized or charged, while the\n            POS system would need to recognize that there is a remaining balance to\n            tender of $50. The POS should generally handle this like a split tender\n            once it is determined that a partial authorization has occurred.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            The way for the POS to know that a partial authorization has occurred\n            would be to parse out the\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Object--RequestChargeInStoreContext"},"child":[{"node":"element","tag":"code","child":[{"node":"text","text":"statusReason"}]}]},{"node":"text","text":"\n            from the context ID node query, which would show as\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"PARTIALLY_AUTHORIZED"}]},{"node":"text","text":". The\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Enum--InStoreContextStatus"},"child":[{"node":"text","text":"context status"}]},{"node":"text","text":"\n            will be returned as\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"COMPLETE"}]},{"node":"text","text":".\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            In the Sandbox environment, you may test partial authorizations by using\n            the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"\"amount\":\"1004\""}]},{"node":"text","text":"\n            in your request.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h3","attr":{"id":"partial-authorization-enablement"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Partial Authorization Enablement"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            There are 2 ways to enable partial authorization on your account. You may\n            have your PayPal Solutions Engineer or Integration Engineer enable this\n            feature on your account. Alternatively, you may pass an API flag to\n            determine whether you want to allow partial authorizations on the\n            particular transaction using the\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Input--InStoreAuthorizationInput"},"child":[{"node":"element","tag":"code","child":[{"node":"text","text":"acceptPartialAuthorization"}]}]},{"node":"text","text":"\n            object. This API flag is a boolean (\"true/false\") variable that will\n            override the Braintree account-level configuration. We recommend using\n            this API flag if you would like to allow for partial authorization on some\n            transactions and not others, or if you want more control of the enablement\n            of this feature.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            The Partial Authorization feature does need to be enabled on the\n                            Braintree gateway account if you are not passing the\n                            "},{"node":"element","tag":"code","child":[{"node":"text","text":"acceptPartialAuthorization"}]},{"node":"text","text":"\n                            API flag. Please consult with your Solutions Engineer or\n                            Integration Engineer to enable it.\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h2","attr":{"id":"refunding-your-customer"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Refunding Your Customer"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            There are 3 ways of refunding your customer once a charge has been\n            completed.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h3","attr":{"id":"id-1-performing-a-referenced-refund"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"1) Performing a Referenced Refund:"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            To perform a referenced refund, you must have the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"transactionId"}]},{"node":"text","text":"\n            from the authorization that you are attempting to refund against. This\n            results in a refund that is linked to the original authorization.\n            Typically, this is the preferred refund method as it allows for easy\n            accounting. It is important to note that referenced refunds can either be\n            in full or of a partial amount of the original authorization; however, the\n            "},{"node":"element","tag":"em","child":[{"node":"text","text":"refund amount can not exceed the full authorized amount"}]},{"node":"text","text":".\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-mutation-2","id":"tab-graphql-mutation-2"},"child":[{"node":"text","text":"\n                        GraphQL Mutation"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-variables-2","id":"tab-graphql-variables-2"},"child":[{"node":"text","text":"\n                        GraphQL Variables"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"sample-api-response-2","id":"tab-sample-api-response-2"},"child":[{"node":"text","text":"\n                        Sample API Response\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-mutation-2","id":"graphql-mutation-2"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"mutation refundTransaction($input: RefundTransactionInput!) {\n                refundTransaction(input: $input) {\n                  refund {\n                    id\n                    amount {\n                      value\n                    }\n                    orderId\n                    status\n                    refundedTransaction {\n                      id\n                      amount {\n                        value\n                      }\n                      orderId\n                      status\n                    }\n                  }\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-variables-2","id":"graphql-variables-2"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"input\": {\n                  \"transactionId\": \"dHJhbnN5fa20\",\n                  \"refund\": {\n                    \"amount\": \"9.00\",\n                    \"orderId\": \"12345Test\",\n                    \"merchantAccountId\": \"your merchant account ID\"\n                  }\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response-2","id":"sample-api-response-2"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"refundTransaction\": {\n                        \"refund\": {\n                            \"id\": \"cmVmd4bjU2Zh\",\n                            \"amount\": {\n                                \"value\": \"9.00\"\n                            },\n                            \"orderId\": \"12345Test\",\n                            \"status\": \"SUBMITTED_FOR_SETTLEMENT\",\n                            \"refundedTransaction\": {\n                                \"id\": \"dHJhbnN5fa20\",\n                                \"amount\": {\n                                    \"value\": \"256.00\"\n                                },\n                                \"orderId\": \"ExampleOrderNumber-19221\",\n                                \"status\": \"SUBMITTED_FOR_SETTLEMENT\"\n                            }\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"7b08c-f890-4255-8e54-dfa62386\"\n                }\n            }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h4","attr":{"id":"referenced-refund-example-sequence-diagram"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Referenced Refund Example Sequence Diagram:"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"img","attr":{"src":"https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Referenced%20Refund%20Sequence%20Diagram.png","alt":""}},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h3","attr":{"id":"id-2-using-the-reversal-api-call"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"2) Using the Reversal API call"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Sometimes, the POS might not know whether the original authorization has\n            already been settled or not. In this scenario, it might be best to use a\n            reversal call, which lets Braintree determine whether the transaction can\n            be Voided or Refunded depending on the settlement status. For more details\n            on how this works,\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/guides/transactions/#reversing-or-refunding-a-transaction"},"child":[{"node":"text","text":"follow this link"}]},{"node":"text","text":"\n            and see the example below:\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-mutation-3","id":"tab-graphql-mutation-3"},"child":[{"node":"text","text":"\n                        GraphQL Mutation"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-variables-3","id":"tab-graphql-variables-3"},"child":[{"node":"text","text":"\n                        GraphQL Variables"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"sample-api-response-3","id":"tab-sample-api-response-3"},"child":[{"node":"text","text":"\n                        Sample API Response\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-mutation-3","id":"graphql-mutation-3"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"mutation reverseTransaction($input: ReverseTransactionInput!) {\n                reverseTransaction(input: $input) {\n                  reversal {\n                      __typename\n                    ... on Transaction {\n                      id\n                      legacyId\n                      orderId\n                      status\n                      statusHistory {\n                        status\n                        terminal\n                      }\n                    }\n                    ... on Refund {\n                      id\n                      legacyId\n                      orderId\n                      status\n                      amount {\n                        value\n                      }\n                      refundedTransaction {\n                        id\n                        amount {\n                          value\n                        }\n                        orderId\n                        status\n                      }\n                    }\n                  }\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-variables-3","id":"graphql-variables-3"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"input\": {\n                  \"transactionId\": \"yufkjhvkffif\"\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response-3","id":"sample-api-response-3"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"reverseTransaction\": {\n                        \"reversal\": {\n                            \"__typename\": \"Refund\",\n                            \"id\": \"cmVdNoM3MDI1\",\n                            \"legacyId\": \"ch3t25\",\n                            \"orderId\": \"Your Order Id\",\n                            \"status\": \"SUBMITTED_FOR_SETTLEMENT\",\n                            \"amount\": {\n                                \"value\": \"499.00\"\n                            },\n                            \"refundedTransaction\": {\n                                \"id\": \"dHJnpb25fYF0ejk\",\n                                \"amount\": {\n                                    \"value\": \"499.00\"\n                                },\n                                \"orderId\": \"Your Order Id\",\n                                \"status\": \"SETTLED\"\n                            }\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"3f459-7a28-4bf5-9e82-21766d\"\n                }\n            }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h4","attr":{"id":"reversal-api-call-example-sequence-diagram"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Reversal API Call Example Sequence Diagram:"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"img","attr":{"src":"https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Reversal%20API%20Calll%20Sequence%20Diagram.png","alt":""}},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h3","attr":{"id":"id-3-performing-an-unreferenced-refund-or-blind-credit"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"3) Performing an Unreferenced Refund or \"Blind Credit\":"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            To perform an unreferenced refund, your customer must be present at the\n            time of refund, and a payment instrument must be presented to the card\n            reader. The resulting refund will not be linked to the original\n            authorization, so this is typically not the preferred way of refunding due\n            to accounting reasons. Here are some of the common use cases below:\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"ul","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        Refunds to customers without a receipt (when original order cannot\n                        be found)\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        Refunds to customers whose original authorization occurred while on\n                        your previous payment solution\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"li","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div"},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Refunds to an alternate payment instrument or tender type"}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            Note that this feature requires approval to be enabled in the\n                            production environment and needs to be requested to be enabled by\n                            your Solutions Engineer or Integration Engineer in the sandbox\n                            environment\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-mutation-4","id":"tab-graphql-mutation-4"},"child":[{"node":"text","text":"\n                        GraphQL Mutation"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"graphql-variables-4","id":"tab-graphql-variables-4"},"child":[{"node":"text","text":"\n                        GraphQL Variables"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"sample-api-response-4","id":"tab-sample-api-response-4"},"child":[{"node":"text","text":"\n                        Sample API response\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-mutation-4","id":"graphql-mutation-4"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"mutation RequestRefundFromInStoreReader($input: RequestRefundFromInStoreReaderInput!) {\n                requestRefundFromInStoreReader(input: $input) {\n                    clientMutationId\n                    inStoreContext {\n                        id\n                        status\n                        reader {\n                            id\n                            name                \n                            status\n                        }\n                    }\n                }\n            }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-variables-4","id":"graphql-variables-4"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"input\": {\n                    \"readerId\": \"your reader ID here\",\n                    \"refund\": {\n                        \"amount\": \"5.00\",        \n                        \"orderId\": \"ExampleOrderNumber-1221\",\n                        \"merchantAccountId\": \"your merchant account ID here\"\n                    }\n                }\n            }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response-4","id":"sample-api-response-4"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"requestRefundFromInStoreReader\": {\n                        \"clientMutationId\": null,\n                        \"inStoreContext\": {\n                            \"id\": \"aW5zdG9yZWNvbnRleH3984hgMGVhYTQ4MjJhYTI1ZTY0YjBmOTY4I1ZFUklGT05FLTgwNS0wMTctNDU0I3VzLXdlc3QtMg\",\n                            \"status\": \"PENDING\",\n                            \"reader\": {\n                                \"id\": \"aW5zdG9yZXJlYWRlcl8jYWo1OWhjbiNWRVJDUtMDE3LTQ1NA\",\n                                \"name\": \"Your P400\",\n                                \"status\": \"ONLINE\"\n                            }\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"cc3887-2083-4555-b943-67e9d80\"\n                }\n            }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            Once the refund is complete, you'll need to check the status of the\n            context ID, similar to how this is done for a charge request. A status of\n            \"COMPLETE\" indicates a successful refund.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-mutation-5","id":"tab-graphql-mutation-5"},"child":[{"node":"text","text":"\n                        GraphQL Mutation"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-variables-5","id":"tab-graphql-variables-5"},"child":[{"node":"text","text":"\n                        GraphQL Variables"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"sample-api-response-5","id":"tab-sample-api-response-5"},"child":[{"node":"text","text":"\n                        Sample API Response\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-mutation-5","id":"graphql-mutation-5"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"query ID($inStoreContextId: ID!) {\n                node(id: $inStoreContextId) {\n                    ... on InStoreContext {\n                        id\n                        status\n                        reader {\n                            id\n                            name\n                            status\n                        }\n                        transaction {\n                            id\n                                    }\n                                    refund {\n                                        id\n                                        orderId\n                                        legacyId\n                                        status\n                                        paymentMethodSnapshot {\n                                            __typename\n                                            ... on CreditCardDetails {\n                                                brandCode\n                                                bin\n                                                last4\n                                                expirationMonth\n                                                expirationYear\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-variables-5","id":"graphql-variables-5"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"inStoreContextId\": \"aW5zHRfIzIxZmE4YjBjMGLTgwNS0wMTctNDU0I3VzLXdlc3QtMg\"\n            }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response-5","id":"sample-api-response-5"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"node\": {\n                        \"id\": \"aW5zdG9yBjMGVhYTQ4MjJhY05FLTgwNS0wMTctNDU0I3VzLXdlc3QtMg\",\n                        \"status\": \"COMPLETE\",\n                        \"reader\": {\n                            \"id\": \"aW5zdG9yZXJlYWRlcl8jbiNWRVJJRk9ORS04MMDE3LTQ1NA\",\n                            \"name\": \"Your P400\",\n                            \"status\": \"ONLINE\"\n                        },\n                        \"transaction\": {\n                            \"id\": \"cmVI5cXM3My\"\n                        },\n                        \"refund\": {\n                            \"id\": \"cmVmdW3MTNy\",\n                            \"orderId\": \"ExampleOrderNumber-1221\",\n                            \"legacyId\": \"234b13r\",\n                            \"status\": \"SUBMITTED_FOR_SETTLEMENT\",\n                            \"paymentMethodSnapshot\": {\n                                \"__typename\": \"CreditCardDetails\",\n                                \"brandCode\": \"VISA\",\n                                \"bin\": \"421212\",\n                                \"last4\": \"8885\",\n                                \"expirationMonth\": \"12\",\n                                \"expirationYear\": \"2025\"\n                            }\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"5fa640-ccf0-4493-955b-6faab7\"\n                }\n            }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h4","attr":{"id":"unreferenced-refund-example-sequence-diagram"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Unreferenced Refund Example Sequence Diagram:"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"img","attr":{"src":"https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Unreferenced%20Refund%20Sequence%20Diagram.png","alt":""}},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h3","attr":{"id":"id-4-reversing-a-refund"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"4) Reversing a Refund"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            If a refund was performed and you need to reverse that refund within the\n            acceptable reversal window, you can use the\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/graphql/reference/#Mutation--reverseRefund"},"child":[{"node":"text","text":"reverseRefund"}]},{"node":"text","text":"\n            mutation. Keep in mind that you would need to have saved the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"refundId"}]},{"node":"text","text":"\n            from the API response of the original refund attempt. See below example of\n            a refund reversal. You will notice that the\n            "},{"node":"element","tag":"code","child":[{"node":"text","text":"refundId"}]},{"node":"text","text":"\n            is a required variable input to perform the reversal.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"tabs","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tablist"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-mutation-6","id":"tab-graphql-mutation-6"},"child":[{"node":"text","text":"\n                        GraphQL Mutation"}]},{"node":"element","tag":"button","attr":{"aria-selected":"false","role":"tab","aria-controls":"graphql-variables-6","id":"tab-graphql-variables-6"},"child":[{"node":"text","text":"\n                        GraphQL Variables"}]},{"node":"element","tag":"button","attr":{"aria-selected":"true","role":"tab","aria-controls":"sample-api-response-6","id":"tab-sample-api-response-6"},"child":[{"node":"text","text":"\n                        Sample API Response\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-mutation-6","id":"graphql-mutation-6"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"mutation reverseRefund($input: ReverseRefundInput!) {\n                reverseRefund(input: $input) {\n                  refund {\n                    ... on Refund {\n                      id\n                      status\n                      statusHistory {\n                        status\n                        terminal\n                      }\n                    }\n                    ... on Refund {\n                      id\n                      amount {\n                        value\n                      }\n                      orderId\n                      status\n                      refundedTransaction {\n                        id\n                        amount {\n                          value\n                        }\n                        orderId\n                        status\n                      }\n                    }\n                  }\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-graphql-variables-6","id":"graphql-variables-6"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"input\": {\n                  \"refundId\": \"your refund ID\"\n                }\n              }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"role":"tabpanel","aria-labelledby":"tab-sample-api-response-6","id":"sample-api-response-6"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"pre","child":[{"node":"element","tag":"code","child":[{"node":"text","text":"{\n                \"data\": {\n                    \"reverseRefund\": {\n                        \"refund\": {\n                            \"id\": \"your refund ID\",\n                            \"status\": \"VOIDED\",\n                            \"statusHistory\": [\n                                {\n                                    \"status\": \"VOIDED\",\n                                    \"terminal\": true\n                                },\n                                {\n                                    \"status\": \"SUBMITTED_FOR_SETTLEMENT\",\n                                    \"terminal\": false\n                                },\n                                {\n                                    \"status\": \"AUTHORIZED\",\n                                    \"terminal\": false\n                                }\n                            ],\n                            \"amount\": {\n                                \"value\": \"9.00\"\n                            },\n                            \"orderId\": \"12345Test\",\n                            \"refundedTransaction\": {\n                                \"id\": \"your transaction ID\",\n                                \"amount\": {\n                                    \"value\": \"55.23\"\n                                },\n                                \"orderId\": \"12345Test\",\n                                \"status\": \"SUBMITTED_FOR_SETTLEMENT\"\n                            }\n                        }\n                    }\n                },\n                \"extensions\": {\n                    \"requestId\": \"215c5-1e8a-40c2-a125-afa18b73\"\n                }\n            }"}]}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h4","attr":{"id":"refund-reversal-example-sequence-diagram"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Refund Reversal Example Sequence Diagram:"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"img","attr":{"src":"https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Refund%20Reversal%20Sequence%20Diagram.png","alt":""}},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h3","attr":{"id":"id-5-using-auth-adjustments-for-partial-reversals"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"5) Using Auth Adjustments for partial reversals"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            There may be some use cases where you want to perform a partial reversal\n            rather than fully reverse a payment. The example scenario is if a customer\n            wants to return a single item that was part of a larger purchase, and the\n            transaction may be in an authorized state (which would make a partial\n            refund not possible). In this scenario, you may use the\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/#example-update-transaction-amount-request"},"child":[{"node":"element","tag":"code","child":[{"node":"text","text":"updateTransaction"}]}]},{"node":"text","text":"\n            API mutation to adjust the auth amount to the total purchase amount minus\n            the partial reversal amount.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h2","attr":{"id":"receipt-data-handling"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Receipt Data Handling"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            To maintain EMV compliance you may need to add additional data elements to\n            be displayed on the receipt you offer your customers. The table below\n            highlights the data elements that are mandatory for EMV compliance and\n            other data elements that are optional. Be sure to include the mandatory\n            data elements listed in the \"GraphQL API Field\" column when you\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status"},"child":[{"node":"text","text":"check the reader charge status "}]},{"node":"text","text":"so that you can parse them from the API response.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            EMV-compliant receipts are not enforced by PayPal/Braintree. We\n                            make all necessary data for compliance available through our API\n                            and highly suggest following EMV compliance rules. For more\n                            information about EMV-compliant receipts, see the\n                            "},{"node":"element","tag":"a","attr":{"href":"https://www.emvco.com/resources/"},"child":[{"node":"text","text":"EMVco website"}]},{"node":"text","text":".\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"picture","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"img","attr":{"src":"https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Receipt%20Data%20Handling.webp","alt":""}},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n                "},{"node":"element","tag":"figcaption","child":[{"node":"text","text":"\n                    This is just an example of an EMV compliant omni-cart receipt.\n                    Merchants should format their receipts in a way that make sense for\n                    their business while incorporating the below EMV elements listed in\n                    the table.\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            Please take a look at our EMV-compliant"},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/reference/emv-receipt-reference/"},"child":[{"node":"text","text":"\n                                receipt reference page"}]},{"node":"text","text":", including an explanation with an EMV-compliant data element as\n                            an overlay.\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"table","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"tbody","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Data Element"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Description"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Mandatory vs. Optional"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"GraphQL API Field"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Merchant Name"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The name of the merchant."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.merchantName"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Merchant Address Details"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The address details of the merchant."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.merchantAddress"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Transaction Date and Time"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The date and time of the transaction."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.createdAt"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Merchant ID (MID)"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The unique reference of the merchant."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"O"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.merchantId"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Terminal ID (TID)"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The unique reference of the terminal."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"O"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Transaction.paymentMethodSnapshot .origin.details.terminalId\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Transaction Number"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The unique reference number of the transaction."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.legacyId"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Invoice Number"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The unique reference number of the receipt."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.legacyId"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Card Type"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The name of the card issuer."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.paymentMethodSnapshot.\n                                        creditCard.brand"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Account Number"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        The account number printed on the card. All digits except\n                                        for last 4 must be truncated.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.paymentMethodSnapshot.\n                                        creditCard.last4"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Application Preferred Name"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        The name of the application used to process the transaction\n                                        (e.g. MasterCard).\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Transaction.paymentMethodSnapshot\n                                        .origin.details.applicationPreferredName\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Application Identifier"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        The unique reference number of the EMV application used for\n                                        the transaction.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Transaction.paymentMethodSnapshot\n                                        .origin.details.applicationIdentifier\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Approval Code"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        The authorization code received from the processor for the\n                                        transaction.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Transaction.statusHistory[…].\n                                        processorResponse.authorizationId\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Authorization Mode"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The authorizing entity (e.g. Issuer)."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Transaction.paymentMethodSnapshot\n                                        .origin.details.authorizationMode\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Transaction Kind"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The type of the transaction (e.g. Sale/Refund)."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.kind"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Card Entry Method"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        The method used to read the detail of the card (e.g. Chip).\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Transaction.paymentMethodSnapshot\n                                        .origin.details.inputMode\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Purchase Details"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        A brief description of the purchased goods or services along\n                                        with their prices.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Transaction.lineItems* * - If not provided in the\n                                        authorize/charge request, then these details must be\n                                        provided by the merchant.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Transaction Amount"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"The grand total amount for the transaction."}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.amount.value"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Currency"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        If specified, the currency that the transaction was\n                                        processed in. If no currency is identified on the receipt,\n                                        the transaction is deemed to have taken place in the\n                                        currency that is legal tender at the point of sale.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"O"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.amount.currencyCode"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"PIN Verify Statement"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        The cardholder’s PIN verification status specific to the\n                                        processed transaction (e.g. Verified).\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Transaction.paymentMethodSnapshot\n                                        .origin.details.pinVerified\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Return and Refund Policies"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        The terms and conditions for return and refund set forth by\n                                        the merchant.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Merchant or POS generated message that indicates return\n                                        policy\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"em","child":[{"node":"text","text":"The following are data elements that are mandatory for transactions\n                that were declined:"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"table","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"tbody","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Decline Code"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        The system generated decline code for the declined\n                                        transaction.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Transaction.statusHistory[…]\n                                        .processorResponse.legacyCode\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Decline Message"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        The merchant generated message for the respective decline\n                                        code.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Merchant or POS generated message that reflects the decline\n                                        code\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"em","child":[{"node":"text","text":"The following are data elements that are mandatory for transactions\n                that were EMV chip declined:"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p"},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"table","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"tbody","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Terminal Verification Results"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        A series of bits set by the terminal upon reading EMV card\n                                        data, where each bit represents information about the\n                                        transaction. This value is contained in the response EMV\n                                        data under tag 95.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.statusHistory[…]\n                                        .processorResponse.emvData"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Issuer Authentication Data"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        Issuer provided data received in response to an online\n                                        authorization request to be delivered to the EMV chip card.\n                                        This value is contained in the response EMV data under tag\n                                        91.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.statusHistory[…]\n                                        .processorResponse.emvData"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                    "},{"node":"element","tag":"tr","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        "},{"node":"element","tag":"strong","child":[{"node":"text","text":"Authorization Response Code"}]},{"node":"text","text":"\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                                        The 4-character code generated by the Issuer in response to\n                                        an online authorization request that represents the\n                                        authorization status of the transaction. This value is\n                                        contained in the response EMV data under tag 8A.\n                                    "}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"M"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                        "},{"node":"element","tag":"td","child":[{"node":"text","text":"\n                            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"Transaction.statusHistory[…]\n                                        .processorResponse.emvData"}]},{"node":"text","text":"\n                                "}]},{"node":"text","text":"\n                            "}]},{"node":"text","text":"\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h2","attr":{"id":"manual-key-entry-transactions"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Manual Key Entry Transactions"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            There are some use cases in which you may want to support the processing\n            of a transaction without using the card reader by entering in the card\n            details into another application UI. This could be for over-the-phone\n            orders (MOTO) or as a manual key entry (MKE) fallback for when the card is\n            not readable by the card reader, in which case you may want to enter the\n            card details into the POS UI. To facilitate this while keeping your tech\n            stack outside of PCI scope, we have a couple of solutions that can work\n            for you.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"img","attr":{"src":"https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale_Manual%20Key%20Entry%20Transactions.png","alt":""}},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h3","attr":{"id":"id-1-braintree-hosted-fields"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"1) Braintree Hosted Fields"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            The Braintree Hosted Fields enables you to render Braintree encrypted\n            input fields in your application user interface. This allows for the\n            manual key entry of card details directly into Braintree encrypted input\n            fields. See how the\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/docs/guides/hosted-fields/overview/"},"child":[{"node":"text","text":"Braintree Hosted Fields"}]},{"node":"text","text":"\n            solution works.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            The Braintree Hosted Fields solution gives you more control over\n                            the checkout flow and the flexibility to blend the encrypted\n                            fields into your POS UI\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h3","attr":{"id":"id-2-braintree-drop-in-ui"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"2) Braintree Drop-in UI"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n            The Braintree drop-in UI allows you to render Braintree encrypted forms in\n            your application user interface. This would allow for the manual key entry\n            of the card details directly into the Braintree Encrypted fields. The\n            drop-in UI is a simple integration leveraging pre-built dynamic Braintree\n            containers. See how the\n            "},{"node":"element","tag":"a","attr":{"href":"/braintree/docs/guides/drop-in/overview/javascript/v3/"},"child":[{"node":"text","text":"Braintree Drop-in UI"}]},{"node":"text","text":"\n            solution works.\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        "},{"node":"element","tag":"message","attr":{"type":"note"},"child":[{"node":"text","text":"\n                            The drop in UI allows for a simpler integration but reduced\n                            control over the look and feel of the UI and checkout flow\n                            experience\n                        "}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"h2","attr":{"id":"important-tips-for-building-out-your-charge-refund-flows"},"child":[{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"div","child":[{"node":"text","text":"Important Tips for building out your charge/refund flows"}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n        "},{"node":"element","tag":"ol","child":[{"node":"text","text":"\n            "},{"node":"element","tag":"li","attr":{"value":"1"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"data-value":"1"}},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        Always make sure you are passing your Braintree\n                        "},{"node":"element","tag":"a","attr":{"href":"/braintree/articles/control-panel/important-gateway-credentials/#merchant-account-id"},"child":[{"node":"text","text":"Merchant Account ID"}]},{"node":"text","text":"\n                        (MAID) in your charge and refund requests. This should be added as\n                        an API variable, for example:\n                        "},{"node":"element","tag":"span","child":[{"node":"element","tag":"img","attr":{"src":"https://www.paypalobjects.com/devdoc/btdocs-gitbook/InitiateAsalesMakingAtransaction.jpg","alt":""}}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"li","attr":{"value":"2"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"data-value":"2"}},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        Use\n                        "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/#initializing-the-reader-for-charging"},"child":[{"node":"text","text":"Idempotency Keys"}]},{"node":"text","text":"\n                        to prevent duplicate charges to your customers\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"li","attr":{"value":"3"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"data-value":"3"}},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        Align your application with our\n                        "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/#recommended-timeout-logic"},"child":[{"node":"text","text":"recommended timeout logic"}]},{"node":"text","text":"\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"li","attr":{"value":"4"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"data-value":"4"}},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        Make sure you are parsing key\n                        "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/#receipt-data-handling"},"child":[{"node":"text","text":"EMV receipt data"}]},{"node":"text","text":"\n                        from your API response to populate on your customer receipts for EMV\n                        compliance\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n            "},{"node":"element","tag":"li","attr":{"value":"5"},"child":[{"node":"text","text":"\n                "},{"node":"element","tag":"div","attr":{"data-value":"5"}},{"node":"text","text":"\n                "},{"node":"element","tag":"div","child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"p","child":[{"node":"text","text":"\n                        Utilize the\n                        "},{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/reporting-and-reconciliation/#using-the-order-id-field-to-reconcile-with-braintree-settlement-reports"},"child":[{"node":"text","text":"orderId API field"}]},{"node":"text","text":"\n                        to pass important data for reporting and reconciliation\n                    "}]},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]},{"node":"text","text":"\n        "}]},{"node":"text","text":"\n    "}]},{"node":"text","text":"\n    "},{"node":"element","tag":"div","attr":{"class":"nextPreviousButtonWrapper"},"child":[{"node":"text","text":"\n        "},{"node":"element","tag":"div","attr":{"class":"nextLink-bt"},"child":[{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/setup-reader/","class":"nextLink-link"},"child":[{"node":"element","tag":"svg","attr":{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0,0,24,24","width":"24","fill":"none","height":"24"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"path","attr":{"d":"M9.707,18.7033C10.0975,18.3128,10.0975,17.6796,9.707,17.2891L5.414,12.9961H21C21.5523,12.9961,22,12.5484,22,11.9961C22,11.4438,21.5523,10.9961,21,10.9961H5.414L9.707,6.7032C10.0975,6.31268,10.0975,5.67951,9.707,5.28899C9.31647,4.89846,8.68333,4.89846,8.2928,5.28899L2.2998,11.282C2.29375,11.288,2.28777,11.2941,2.28179,11.3003C2.10735,11.4803,2,11.7257,2,11.9961C2,12.2654,2.10637,12.5097,2.27947,12.6895C2.28441,12.6948,2.2895,12.7,2.29457,12.7052L2.29713,12.7077L2.2998,12.7103L8.29273,18.7033C8.68326,19.0938,9.31641,19.0938,9.707,18.7033Z","fill":"#0070E0"}},{"node":"text","text":"\n                "}]},{"node":"element","tag":"span","child":[{"node":"element","tag":"span","child":[{"node":"text","text":"Setup Reader"}]}]},{"node":"text","text":"\n            "}]}]},{"node":"text","text":"\n        "},{"node":"element","tag":"div","attr":{"class":"nextLink-bt"},"child":[{"node":"element","tag":"a","attr":{"href":"/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/","class":"nextLink-link"},"child":[{"node":"element","tag":"span","child":[{"node":"element","tag":"span","child":[{"node":"text","text":"Initiate a Card Present Authorization"}]}]},{"node":"element","tag":"svg","attr":{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0,0,24,24","width":"24","fill":"none","height":"24"},"child":[{"node":"text","text":"\n                    "},{"node":"element","tag":"path","attr":{"d":"M14.2931,18.7033C13.9026,18.3128,13.9026,17.6796,14.2931,17.2891L18.5861,12.9961H3C2.44772,12.9961,2,12.5484,2,11.9961C2,11.4438,2.44772,10.9961,3,10.9961H18.5861L14.2931,6.7032C13.9026,6.31268,13.9026,5.67951,14.2931,5.28899C14.6837,4.89846,15.3168,4.89846,15.7073,5.28899L21.7003,11.282C21.7064,11.288,21.7123,11.2941,21.7182,11.3003C21.8926,11.4803,22,11.7257,22,11.9961C22,12.2654,21.8936,12.5097,21.7205,12.6895C21.7156,12.6948,21.7105,12.7,21.7054,12.7052L21.7029,12.7077L21.7003,12.7103L15.7074,18.7033C15.3168,19.0938,14.6837,19.0938,14.2931,18.7033Z","fill":"#0070E0"}},{"node":"text","text":"\n                "}]},{"node":"text","text":"\n            "}]}]},{"node":"text","text":"\n    "}]},{"node":"text","text":"\n"}]}]}},"links":[{"rel":"self","method":"GET","href":"https://api.paypal.com/v2/content/environments/a9f00b36-5a19-4403-8b49-ceaa35dd9d1f/entries/27kbaYX4bFs9xReyvEEOER"}],"ecm":{"envAllowsPreview":true},"markdown":"---\ntitle: Initiate a Sale or Refund\nslug: /in-person/guides/making-a-transaction/\ncreateTime: '2024-11-20T19:04:37.405Z'\nupdateTime: '2025-01-21T10:25:09.143Z'\n---\n\n\n\n# Initiate a Sale or Refund\n\nThis article covers both sale and refund transactions\n\n\n## Initializing the Reader for Charging\n\nWhen you're ready to charge a customer, you should create an In-Store Context by [requesting a charge from a card reader](/braintree/graphql/reference/#Mutation--requestChargeFromInStoreReader). In this step, your application will specify, at minimum, the readerId, merchantAccountId and transaction.amount details to initialize the reader for payment acceptance. Note that the merchantAccountId is not validated against in the Sandbox environment; however, this is a required value in the production environment for all interactions with the card reader.\n\nCharging is similar to authorizing, except that if the authorization is successful, Braintree will automatically capture the transaction. This is also known as [creating a Sale Transaction](/braintree/docs/reference/request/transaction/sale/).\n\nTo provide idempotency on the request charge mutation, you must also include the HTTP header Idempotency-Key with a unique value. UUIDv4 is recommended. For example, if using curl to make the request, you would include\n\n**NOTE**\nUsing Idempotency-Key is an important way of preventing duplicate charges to your customer in the event of an API communication failure. For example, if you request a charge from the reader, the customer completes the charge on the reader, but for some reason, the POS does not get back the transaction result before timing out. In this scenario, the POS could recover the original transaction using the same Idempotency-Key without accidentally creating a duplicate charge.\n\n--header 'Idempotency-Key: 94c9ea8b-31b0-488e-a231-57e32f0bfd70'GraphQL MutationGraphQL VariablesSample API Responsemutation RequestChargeFromInStoreReader($input: RequestChargeFromInStoreReaderInput!) { requestChargeFromInStoreReader(input: $input) { clientMutationId id status reader { id name status } } }{ \"input\": { \"readerId\": \"your reader ID here\", \"transaction\": { \"amount\": \"39.85\", \"orderId\": \"ExampleOrderNumber-1221\", \"merchantAccountId\": \"ExampleLocation_2005\" } } }{ \"data\": { \"requestChargeFromInStoreReader\": { \"clientMutationId\": \"abc123sdfsdf\", \"id\": \"aW5zdG9yZWNvbnRleHRfIzRjNjQzNGMwNmM5MDQ3OWNhNjFiYWMwYWE5MDFlM2M3I1ZFUklGT05FLTgwMy00MTQtNjkzI3VzLWVhc3QtMQ\", \"status\": \"PENDING\", \"reader\": { \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\", \"name\": \"POS Terminal #5\", \"status\": \"ONLINE\" } } }, \"extensions\": { \"requestId\": \"d86bfaf0-2e25-4ff5-984c-9d4bd8b574ee\" } }![](https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20Sale:Tap%20to%20pay.jpeg)\n## Checking the Reader Charge Status\n\nAfter the reader is initialized for payment, your application must wait for the customer to interact with it (i.e. insert a test card) and for the payment attempt to be processed. Your application should use [the node query](/braintree/graphql/reference/#Query--node) to poll on a 2-second interval between responses for the current status of the payment using the RequestChargeInStoreContext.id received at charge initialization and monitor the RequestChargeInStoreContext.status field as the transaction goes through the lifecycle.\n\n![](https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20Sale:Checking%20the%20reader%20charge%20status.png)When the RequestChargeInStoreContext.status changes to \"COMPLETE\", you will also receive a transaction object RequestChargeInStoreContext.transaction in the response. Save the completed RequestChargeInStoreContext.transaction.id in your database for referencing the transaction in subsequent operations.\n\nAll successful test transactions should have a transaction amount value below $2,000 for testing. For more info on using amounts to simulate various transaction outcomes, look at [Testing Your Integration](/braintree/in-person/guides/testing-your-integration/).\n\n[**Testing the Unhappy Paths in Sandbox**](/braintree/in-person/guides/testing-your-integration/) **:**\n\n** **\n\nGraphQL QueryPENDING ResponseCOMPLETE ResponseFAILED Response : DeclineFAILED Response : Network ErrorFAILED Response: Gateway Reject{ node(id: \"{{last_braintree_instore_context}}\") { ... on RequestChargeInStoreContext { id status statusReason reader { id name status } transaction { id orderId status statusHistory { ... on PaymentStatusEvent { status timestamp terminal ... on AuthorizedEvent { processorResponse { authorizationId emvData message legacyCode retrievalReferenceNumber } } ... on GatewayRejectedEvent { gatewayRejectionReason } ... on FailedEvent { processorResponse { retrievalReferenceNumber emvData message legacyCode } networkResponse { message code } } ... on ProcessorDeclinedEvent { processorResponse { legacyCode message authorizationId additionalInformation retrievalReferenceNumber emvData } declineType networkResponse { code message } } } } merchantAddress { company streetAddress addressLine1 extendedAddress addressLine2 locality adminArea2 region adminArea1 postalCode countryCode phoneNumber } amount { value currencyIsoCode } merchantAccountId merchantName createdAt channel customFields { name value } paymentMethodSnapshot { ... on CreditCardDetails { origin { details { ... on EmvCardOriginDetails { applicationPreferredName applicationIdentifier terminalId inputMode pinVerified } } } brandCode last4 bin expirationMonth expirationYear cardholderName binData { issuingBank countryOfIssuance prepaid healthcare debit commercial } } } } } } }{ \"data\": { \"node\": { \"id\": \"aW5zdG9yZWNvbnRleHRfIzY3MzhkNmIzOGFjNzRiOGVhYzZkMTY4NTc4MjNlOTVlI1ZFUklGT05FLTgwMy00MTQtNjkzI3VzLWVhc3QtMQ\", \"status\": \"PENDING\", \"reader\": { \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\", \"name\": \"POS Terminal #5\", \"status\": \"ONLINE\" }, \"transaction\": null } }, \"extensions\": { \"requestId\": \"8214a538-c1b5-44f6-ae2c-a14a180d9678\" } }{ \"data\": { \"node\": { \"id\": \"aW5zdG9yZWNvbnRleHRfIzAzNjcyNTVjNDc3NzRhNjc4YWRlMThiY2Y0NWZmZTU5I1ZFUklGT05FLTgwNC03NzUtMDg1I3VzLWVhc3QtMQ\", \"status\": \"COMPLETE\", \"reader\": { \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\", \"name\": \"POS Terminal #5\", \"status\": \"ONLINE\" }, \"transaction\": { \"id\": \"dHJhbnNhY3Rpb25fOWh5cmtiZmg\", \"orderId\": \"ExampleOrderNumber-12\", \"status\": \"SUBMITTED_FOR_SETTLEMENT\", \"statusHistory\": [ { \"status\": \"SUBMITTED_FOR_SETTLEMENT\", \"timestamp\": \"2021-12-14T20:08:57.000000Z\", \"terminal\": false }, { \"status\": \"AUTHORIZED\", \"timestamp\": \"2021-12-14T20:08:57.000000Z\", \"terminal\": false, \"processorResponse\": { \"authorizationId\": \"8P3FVW\", \"emvData\": \"9F240512345678908A023030\", \"message\": \"Approved\", \"legacyCode\": \"1000\", \"retrievalReferenceNumber\": \"1234567\" } } ], \"merchantAddress\": { \"company\": null, \"streetAddress\": null, \"addressLine1\": null, \"extendedAddress\": null, \"addressLine2\": null, \"locality\": \"Braintree\", \"adminArea2\": \"Braintree\", \"region\": \"MA\", \"adminArea1\": \"MA\", \"postalCode\": \"02184\", \"countryCode\": null, \"phoneNumber\": \"5555555555\" }, \"amount\": { \"value\": \"1999.00\", \"currencyIsoCode\": \"USD\" }, \"merchantAccountId\": \"paypal\", \"merchantName\": \"DESCRIPTORNAME\", \"createdAt\": \"2021-12-14T20:08:56.000000Z\", \"channel\": null, \"customFields\": null, \"paymentMethodSnapshot\": { \"origin\": { \"details\": { \"applicationPreferredName\": \"Braintree Credit\", \"applicationIdentifier\": \"A000000003101001\", \"terminalId\": \"975af200\", \"inputMode\": \"CONTACTLESS\", \"pinVerified\": false } }, \"brandCode\": \"VISA\", \"last4\": \"8885\", \"bin\": \"421212\", \"expirationMonth\": \"12\", \"expirationYear\": \"2025\", \"cardholderName\": \"BRAINTREE TEST\", \"binData\": { \"issuingBank\": null, \"countryOfIssuance\": null, \"prepaid\": \"UNKNOWN\", \"healthcare\": \"UNKNOWN\", \"debit\": \"UNKNOWN\", \"commercial\": \"UNKNOWN\" } } } } }, \"extensions\": { \"requestId\": \"220078d6-bae4-4902-a614-e3c28addf13d\" } }{ \"data\": { \"node\": { \"id\": \"aW5zdG9yZWNvbnRleHRfI2Y1ZTJmOGZkMzI1OTQ2MzY5OGVmNTQ1N2Q0YmZlZjY0I1ZFUklGT05FLTgwNC03NzUtMDg1I3VzLWVhc3QtMQ\", \"status\": \"FAILED\", \"reader\": { \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\", \"name\": \"POS Terminal #5\", \"status\": \"ONLINE\" }, \"transaction\": { \"id\": \"dHJhbnNhY3Rpb25fZjMzZ3piM3g\", \"orderId\": \"ExampleOrderNumber-12\", \"status\": \"PROCESSOR_DECLINED\", \"statusHistory\": [ { \"status\": \"PROCESSOR_DECLINED\", \"timestamp\": \"2021-12-14T20:11:35.000000Z\", \"terminal\": true, \"processorResponse\": { \"legacyCode\": \"2999\", \"message\": \"Processor Declined\", \"authorizationId\": null, \"additionalInformation\": \"2999 : \", \"retrievalReferenceNumber\": \"1234567\", \"emvData\": \"9F240512345678908A023035\" }, \"declineType\": null, \"networkResponse\": { \"code\": \"XX\", \"message\": \"sample network response text\" } } ], \"merchantAddress\": { \"company\": null, \"streetAddress\": null, \"addressLine1\": null, \"extendedAddress\": null, \"addressLine2\": null, \"locality\": \"Braintree\", \"adminArea2\": \"Braintree\", \"region\": \"MA\", \"adminArea1\": \"MA\", \"postalCode\": \"02184\", \"countryCode\": null, \"phoneNumber\": \"5555555555\" }, \"amount\": { \"value\": \"2999.00\", \"currencyIsoCode\": \"USD\" }, \"merchantAccountId\": \"paypal\", \"merchantName\": \"DESCRIPTORNAME\", \"createdAt\": \"2021-12-14T20:11:35.000000Z\", \"channel\": null, \"customFields\": null, \"paymentMethodSnapshot\": { \"origin\": { \"details\": { \"applicationPreferredName\": \"Braintree Credit\", \"applicationIdentifier\": \"A000000003101001\", \"terminalId\": \"975af200\", \"inputMode\": \"CONTACTLESS\", \"pinVerified\": false } }, \"brandCode\": \"VISA\", \"last4\": \"8885\", \"bin\": \"421212\", \"expirationMonth\": \"12\", \"expirationYear\": \"2025\", \"cardholderName\": \"BRAINTREE TEST\", \"binData\": { \"issuingBank\": null, \"countryOfIssuance\": null, \"prepaid\": \"UNKNOWN\", \"healthcare\": \"UNKNOWN\", \"debit\": \"UNKNOWN\", \"commercial\": \"UNKNOWN\" } } } } }, \"extensions\": { \"requestId\": \"402b24bd-ee8e-445f-886e-c34080e43540\" } }{ \"data\": { \"node\": { \"id\": \"aW5zdG9yZWNvbnRleHRfI2QwY2RiMDg0NDUzODRlZTNhMjZkZjRhZDliY2YwMjRjI1ZFUklGT05FLTgwNC03NzUtMDg1I3VzLWVhc3QtMQ\", \"status\": \"FAILED\", \"reader\": { \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\", \"name\": \"POS Terminal #5\", \"status\": \"ONLINE\" }, \"transaction\": { \"id\": \"dHJhbnNhY3Rpb25fcHQ3emRyYjg\", \"orderId\": \"ExampleOrderNumber-12\", \"status\": \"FAILED\", \"statusHistory\": [ { \"status\": \"FAILED\", \"timestamp\": \"2021-12-14T20:13:40.000000Z\", \"terminal\": true, \"processorResponse\": { \"retrievalReferenceNumber\": \"1234567\", \"emvData\": null, \"message\": \"Processor Network Unavailable - Try Again\", \"legacyCode\": \"3000\" }, \"networkResponse\": { \"message\": \"sample network response text\", \"code\": \"XX\" } } ], \"merchantAddress\": { \"company\": null, \"streetAddress\": null, \"addressLine1\": null, \"extendedAddress\": null, \"addressLine2\": null, \"locality\": \"Braintree\", \"adminArea2\": \"Braintree\", \"region\": \"MA\", \"adminArea1\": \"MA\", \"postalCode\": \"02184\", \"countryCode\": null, \"phoneNumber\": \"5555555555\" }, \"amount\": { \"value\": \"3000.99\", \"currencyIsoCode\": \"USD\" }, \"merchantAccountId\": \"paypal\", \"merchantName\": \"DESCRIPTORNAME\", \"createdAt\": \"2021-12-14T20:13:40.000000Z\", \"channel\": null, \"customFields\": null, \"paymentMethodSnapshot\": { \"origin\": { \"details\": { \"applicationPreferredName\": \"Braintree Credit\", \"applicationIdentifier\": \"A000000003101001\", \"terminalId\": \"975af200\", \"inputMode\": \"CONTACTLESS\", \"pinVerified\": false } }, \"brandCode\": \"VISA\", \"last4\": \"8885\", \"bin\": \"421212\", \"expirationMonth\": \"12\", \"expirationYear\": \"2025\", \"cardholderName\": \"BRAINTREE TEST\", \"binData\": { \"issuingBank\": null, \"countryOfIssuance\": null, \"prepaid\": \"UNKNOWN\", \"healthcare\": \"UNKNOWN\", \"debit\": \"UNKNOWN\", \"commercial\": \"UNKNOWN\" } } } } }, \"extensions\": { \"requestId\": \"c4425b05-7fb8-40cd-9e5f-5cc05278f2fa\" } }{ \"data\": { \"node\": { \"id\": \"aW5zdG9yZWNvbnRleHRfIzMwNzVlNDhlZmRhMDRkZjc4OTY0NjA4MWY2Y2I1YWVlI1ZFUklGT05FLTgwNC03NzUtMDg1I3VzLWVhc3QtMQ\", \"status\": \"FAILED\", \"reader\": { \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\", \"name\": \"POS Terminal #5\", \"status\": \"ONLINE\" }, \"transaction\": { \"id\": \"dHJhbnNhY3Rpb25fNGZxc3Yyc24\", \"orderId\": \"ExampleOrderNumber-12\", \"status\": \"GATEWAY_REJECTED\", \"statusHistory\": [ { \"status\": \"GATEWAY_REJECTED\", \"timestamp\": \"2021-12-14T20:15:08.000000Z\", \"terminal\": true, \"gatewayRejectionReason\": \"APPLICATION_INCOMPLETE\" } ], \"merchantAddress\": { \"company\": null, \"streetAddress\": null, \"addressLine1\": null, \"extendedAddress\": null, \"addressLine2\": null, \"locality\": \"Braintree\", \"adminArea2\": \"Braintree\", \"region\": \"MA\", \"adminArea1\": \"MA\", \"postalCode\": \"02184\", \"countryCode\": null, \"phoneNumber\": \"5555555555\" }, \"amount\": { \"value\": \"5001.00\", \"currencyIsoCode\": \"USD\" }, \"merchantAccountId\": \"paypal\", \"merchantName\": \"DESCRIPTORNAME\", \"createdAt\": \"2021-12-14T20:15:07.000000Z\", \"channel\": null, \"customFields\": null, \"paymentMethodSnapshot\": { \"origin\": { \"details\": { \"applicationPreferredName\": \"Braintree Credit\", \"applicationIdentifier\": \"A000000003101001\", \"terminalId\": \"975af200\", \"inputMode\": \"CONTACTLESS\", \"pinVerified\": false } }, \"brandCode\": \"VISA\", \"last4\": \"8885\", \"bin\": \"421212\", \"expirationMonth\": \"12\", \"expirationYear\": \"2025\", \"cardholderName\": \"BRAINTREE TEST\", \"binData\": { \"issuingBank\": null, \"countryOfIssuance\": null, \"prepaid\": \"UNKNOWN\", \"healthcare\": \"UNKNOWN\", \"debit\": \"UNKNOWN\", \"commercial\": \"UNKNOWN\" } } } } }, \"extensions\": { \"requestId\": \"30e1f4b9-84ae-4290-8fbf-f992edcd4d52\" } }\n### Charge Flow Example Sequence Diagram\n\nThe following high-level sequence diagram depicts an example charge flow; however, this flow can vary depending on whether you are vaulting, and polling logic may also vary by application. This is just an example flow.\n\n![](https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Charge%20Flow%20Sequence%20Diagram%20.webp)\n## Recommended Timeout Logic\n\nKnowing that every application will have different flows and architectural constraints the following recommended timeout logic is just a suggestion based on best practices, but every integration may be different.\n\nGenerally, the card reader has a built-in timeout logic of 180 seconds for a “maximum checkout time,” that is, from the moment you [request a charge](/braintree/in-person/guides/making-a-transaction/#initializing-the-reader-for-charging) from the card reader, it will hang for 180 seconds if no payment instrument is presented. However, it is recommended for the POS application to have its own timeout logic to make sure the POS stays in sync with the card reader and provides a seamless experience to the customer.\n\n\n#### Recommended sequence for initializing card reader and polling for transaction result:\n\n| **Step 1** | Generate unique Idempotency key (UUID) to be added in your request header |\n| **Step 2** | Use an HTTP timeout window of 10 seconds if you do not get back a response |\n| **Step 3** | Send the request again using the same Idempotency key, this allows you to recover the request session and avoid sending a duplicate request |\n| **Step 4** | Once you get an InstoreContext.Id start polling against it to retrieve the transaction.Id and final transaction status |\n| **Step 5** | Use an HTTP timeout window of 3 seconds if you do not get a response while polling against the InStoreContext.Id |\n| **Step 6** | Send the [polling request](/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status) every 2-3 seconds until you get the final transaction.status, transaction.Id |\n\n\n## Cancelling a Charge\n\nIf you need to stop a transaction from being paid while the reader is activated and requesting payment, you can [cancel](/braintree/graphql/reference/#Mutation--requestCancelFromInStoreReader) the InStoreContext. Cancelling an InStoreContext places the reader back into **idle mode** and returns you to the PayPal-branded screensaver. It is important to note that canceling a charge is only possible when a payment instrument has not yet been presented to the card reader. After the card reader has been presented with payment, the only way to stop that would be with a reversal or refund of payment.\n\nNote that if you request to cancel theInStoreContextand the API returns a context status of \"COMPLETE\" that would indicate that the charge has already been processed. In this scenario, you should[check the reader charge status](/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status)again to get thetransactionIdand perform a reversal or[refund](/braintree/in-person/guides/making-a-transaction/)to cancel the charge.  ***** As of August 2022, we have introduced a new API error code 96716, which occurs when you attempt to cancel a context ID that is already in a \"PROCESSING\" or \"COMPLETE\" state**GraphQL MutationGraphQL VariablesSample API Responsemutation RequestCancelFromInStoreReader( $input: RequestCancelFromInStoreReaderInput! ) { requestCancelFromInStoreReader(input: $input) { id status reader { id name status location { id name } } } }{ \"input\": { \"inStoreContextId\": \"context-id\" } }{ \"data\": { \"requestCancelFromInStoreReader\": { \"id\": \"aW5zdG9yZWNvbnRleHRfI2JmMWFkNzE1MDViMTQwZWU5NWY1MjMzNjU5NDUyMzgwI1ZFUklGT05FLTgwNC03NzUtMDg1I3VzLWVhc3QtMQ\", \"status\": \"CANCELLED\", \"reader\": { \"id\": \"aW5zdG9yZXJlYWRlcl8jZmFrZV9tZXJjaGFudCNWRVJJRk9ORS01NTUtNTU1LTU1NQ\", \"name\": \"POS Terminal #5\", \"status\": \"ONLINE\", \"location\": { \"id\": \"aW5zdG9yZWxvY2F0aW9uXyMxMDY5ZTk2MGZhODg0M2JmOTMyZDMzYTE3NDlhNjZkMA\", \"name\": \"Test Location\" } } } }, \"extensions\": { \"requestId\": \"561448c8-40d9-4ba0-b734-a93d067873b3\" } }\n## Partial Authorizations\n\n**NOTE**\nThe Partial Auth feature has undergone a rebuild as of October 2023. The information below represents the new behavior and integration path.\n\nPartial Authorizations refer to transactions where a card with limited available funds is used to complete a purchase, and the available funds are less than the amount to be collected. This can occur with a debit card or a prepaid gift card. For example, if a merchant wants to charge $100, and the customer presents a card with only $50 available. With a partial authorization, the available $50 would be authorized or charged, while the POS system would need to recognize that there is a remaining balance to tender of $50. The POS should generally handle this like a split tender once it is determined that a partial authorization has occurred.\n\nThe way for the POS to know that a partial authorization has occurred would be to parse out the [statusReason](/braintree/graphql/reference/#Object--RequestChargeInStoreContext) from the context ID node query, which would show as PARTIALLY_AUTHORIZED. The [context status](/braintree/graphql/reference/#Enum--InStoreContextStatus) will be returned as COMPLETE.\n\nIn the Sandbox environment, you may test partial authorizations by using the \"amount\":\"1004\" in your request.\n\n\n### Partial Authorization Enablement\n\nThere are 2 ways to enable partial authorization on your account. You may have your PayPal Solutions Engineer or Integration Engineer enable this feature on your account. Alternatively, you may pass an API flag to determine whether you want to allow partial authorizations on the particular transaction using the [acceptPartialAuthorization](/braintree/graphql/reference/#Input--InStoreAuthorizationInput) object. This API flag is a boolean (\"true/false\") variable that will override the Braintree account-level configuration. We recommend using this API flag if you would like to allow for partial authorization on some transactions and not others, or if you want more control of the enablement of this feature.\n\n**NOTE**\nThe Partial Authorization feature does need to be enabled on the Braintree gateway account if you are not passing the acceptPartialAuthorization API flag. Please consult with your Solutions Engineer or Integration Engineer to enable it.\n\n\n## Refunding Your Customer\n\nThere are 3 ways of refunding your customer once a charge has been completed.\n\n\n### 1) Performing a Referenced Refund:\n\nTo perform a referenced refund, you must have the transactionId from the authorization that you are attempting to refund against. This results in a refund that is linked to the original authorization. Typically, this is the preferred refund method as it allows for easy accounting. It is important to note that referenced refunds can either be in full or of a partial amount of the original authorization; however, the refund amount can not exceed the full authorized amount.\n\nGraphQL MutationGraphQL VariablesSample API Responsemutation refundTransaction($input: RefundTransactionInput!) { refundTransaction(input: $input) { refund { id amount { value } orderId status refundedTransaction { id amount { value } orderId status } } } }{ \"input\": { \"transactionId\": \"dHJhbnN5fa20\", \"refund\": { \"amount\": \"9.00\", \"orderId\": \"12345Test\", \"merchantAccountId\": \"your merchant account ID\" } } }{ \"data\": { \"refundTransaction\": { \"refund\": { \"id\": \"cmVmd4bjU2Zh\", \"amount\": { \"value\": \"9.00\" }, \"orderId\": \"12345Test\", \"status\": \"SUBMITTED_FOR_SETTLEMENT\", \"refundedTransaction\": { \"id\": \"dHJhbnN5fa20\", \"amount\": { \"value\": \"256.00\" }, \"orderId\": \"ExampleOrderNumber-19221\", \"status\": \"SUBMITTED_FOR_SETTLEMENT\" } } } }, \"extensions\": { \"requestId\": \"7b08c-f890-4255-8e54-dfa62386\" } }\n#### Referenced Refund Example Sequence Diagram:\n\n![](https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Referenced%20Refund%20Sequence%20Diagram.png)\n### 2) Using the Reversal API call\n\nSometimes, the POS might not know whether the original authorization has already been settled or not. In this scenario, it might be best to use a reversal call, which lets Braintree determine whether the transaction can be Voided or Refunded depending on the settlement status. For more details on how this works, [follow this link](/braintree/graphql/guides/transactions/#reversing-or-refunding-a-transaction) and see the example below:\n\nGraphQL MutationGraphQL VariablesSample API Responsemutation reverseTransaction($input: ReverseTransactionInput!) { reverseTransaction(input: $input) { reversal { __typename ... on Transaction { id legacyId orderId status statusHistory { status terminal } } ... on Refund { id legacyId orderId status amount { value } refundedTransaction { id amount { value } orderId status } } } } }{ \"input\": { \"transactionId\": \"yufkjhvkffif\" } }{ \"data\": { \"reverseTransaction\": { \"reversal\": { \"__typename\": \"Refund\", \"id\": \"cmVdNoM3MDI1\", \"legacyId\": \"ch3t25\", \"orderId\": \"Your Order Id\", \"status\": \"SUBMITTED_FOR_SETTLEMENT\", \"amount\": { \"value\": \"499.00\" }, \"refundedTransaction\": { \"id\": \"dHJnpb25fYF0ejk\", \"amount\": { \"value\": \"499.00\" }, \"orderId\": \"Your Order Id\", \"status\": \"SETTLED\" } } } }, \"extensions\": { \"requestId\": \"3f459-7a28-4bf5-9e82-21766d\" } }\n#### Reversal API Call Example Sequence Diagram:\n\n![](https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Reversal%20API%20Calll%20Sequence%20Diagram.png)\n### 3) Performing an Unreferenced Refund or \"Blind Credit\":\n\nTo perform an unreferenced refund, your customer must be present at the time of refund, and a payment instrument must be presented to the card reader. The resulting refund will not be linked to the original authorization, so this is typically not the preferred way of refunding due to accounting reasons. Here are some of the common use cases below:\n\n\n- Refunds to customers without a receipt (when original order cannot be found)\n\n\n- Refunds to customers whose original authorization occurred while on your previous payment solution\n\n\n- Refunds to an alternate payment instrument or tender type\n\n\n\n**NOTE**\nNote that this feature requires approval to be enabled in the production environment and needs to be requested to be enabled by your Solutions Engineer or Integration Engineer in the sandbox environment\n\nGraphQL MutationGraphQL VariablesSample API responsemutation RequestRefundFromInStoreReader($input: RequestRefundFromInStoreReaderInput!) { requestRefundFromInStoreReader(input: $input) { clientMutationId inStoreContext { id status reader { id name status } } } }{ \"input\": { \"readerId\": \"your reader ID here\", \"refund\": { \"amount\": \"5.00\", \"orderId\": \"ExampleOrderNumber-1221\", \"merchantAccountId\": \"your merchant account ID here\" } } }{ \"data\": { \"requestRefundFromInStoreReader\": { \"clientMutationId\": null, \"inStoreContext\": { \"id\": \"aW5zdG9yZWNvbnRleH3984hgMGVhYTQ4MjJhYTI1ZTY0YjBmOTY4I1ZFUklGT05FLTgwNS0wMTctNDU0I3VzLXdlc3QtMg\", \"status\": \"PENDING\", \"reader\": { \"id\": \"aW5zdG9yZXJlYWRlcl8jYWo1OWhjbiNWRVJDUtMDE3LTQ1NA\", \"name\": \"Your P400\", \"status\": \"ONLINE\" } } } }, \"extensions\": { \"requestId\": \"cc3887-2083-4555-b943-67e9d80\" } }Once the refund is complete, you'll need to check the status of the context ID, similar to how this is done for a charge request. A status of \"COMPLETE\" indicates a successful refund.\n\nGraphQL MutationGraphQL VariablesSample API Responsequery ID($inStoreContextId: ID!) { node(id: $inStoreContextId) { ... on InStoreContext { id status reader { id name status } transaction { id } refund { id orderId legacyId status paymentMethodSnapshot { __typename ... on CreditCardDetails { brandCode bin last4 expirationMonth expirationYear } } } } } }{ \"inStoreContextId\": \"aW5zHRfIzIxZmE4YjBjMGLTgwNS0wMTctNDU0I3VzLXdlc3QtMg\" }{ \"data\": { \"node\": { \"id\": \"aW5zdG9yBjMGVhYTQ4MjJhY05FLTgwNS0wMTctNDU0I3VzLXdlc3QtMg\", \"status\": \"COMPLETE\", \"reader\": { \"id\": \"aW5zdG9yZXJlYWRlcl8jbiNWRVJJRk9ORS04MMDE3LTQ1NA\", \"name\": \"Your P400\", \"status\": \"ONLINE\" }, \"transaction\": { \"id\": \"cmVI5cXM3My\" }, \"refund\": { \"id\": \"cmVmdW3MTNy\", \"orderId\": \"ExampleOrderNumber-1221\", \"legacyId\": \"234b13r\", \"status\": \"SUBMITTED_FOR_SETTLEMENT\", \"paymentMethodSnapshot\": { \"__typename\": \"CreditCardDetails\", \"brandCode\": \"VISA\", \"bin\": \"421212\", \"last4\": \"8885\", \"expirationMonth\": \"12\", \"expirationYear\": \"2025\" } } } }, \"extensions\": { \"requestId\": \"5fa640-ccf0-4493-955b-6faab7\" } }\n#### Unreferenced Refund Example Sequence Diagram:\n\n![](https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Unreferenced%20Refund%20Sequence%20Diagram.png)\n### 4) Reversing a Refund\n\nIf a refund was performed and you need to reverse that refund within the acceptable reversal window, you can use the [reverseRefund](/braintree/graphql/reference/#Mutation--reverseRefund) mutation. Keep in mind that you would need to have saved the refundId from the API response of the original refund attempt. See below example of a refund reversal. You will notice that the refundId is a required variable input to perform the reversal.\n\nGraphQL MutationGraphQL VariablesSample API Responsemutation reverseRefund($input: ReverseRefundInput!) { reverseRefund(input: $input) { refund { ... on Refund { id status statusHistory { status terminal } } ... on Refund { id amount { value } orderId status refundedTransaction { id amount { value } orderId status } } } } }{ \"input\": { \"refundId\": \"your refund ID\" } }{ \"data\": { \"reverseRefund\": { \"refund\": { \"id\": \"your refund ID\", \"status\": \"VOIDED\", \"statusHistory\": [ { \"status\": \"VOIDED\", \"terminal\": true }, { \"status\": \"SUBMITTED_FOR_SETTLEMENT\", \"terminal\": false }, { \"status\": \"AUTHORIZED\", \"terminal\": false } ], \"amount\": { \"value\": \"9.00\" }, \"orderId\": \"12345Test\", \"refundedTransaction\": { \"id\": \"your transaction ID\", \"amount\": { \"value\": \"55.23\" }, \"orderId\": \"12345Test\", \"status\": \"SUBMITTED_FOR_SETTLEMENT\" } } } }, \"extensions\": { \"requestId\": \"215c5-1e8a-40c2-a125-afa18b73\" } }\n#### Refund Reversal Example Sequence Diagram:\n\n![](https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Refund%20Reversal%20Sequence%20Diagram.png)\n### 5) Using Auth Adjustments for partial reversals\n\nThere may be some use cases where you want to perform a partial reversal rather than fully reverse a payment. The example scenario is if a customer wants to return a single item that was part of a larger purchase, and the transaction may be in an authorized state (which would make a partial refund not possible). In this scenario, you may use the [updateTransaction](/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/#example-update-transaction-amount-request) API mutation to adjust the auth amount to the total purchase amount minus the partial reversal amount.\n\n\n## Receipt Data Handling\n\nTo maintain EMV compliance you may need to add additional data elements to be displayed on the receipt you offer your customers. The table below highlights the data elements that are mandatory for EMV compliance and other data elements that are optional. Be sure to include the mandatory data elements listed in the \"GraphQL API Field\" column when you [check the reader charge status](/braintree/in-person/guides/making-a-transaction/#checking-the-reader-charge-status) so that you can parse them from the API response.\n\n**NOTE**\nEMV-compliant receipts are not enforced by PayPal/Braintree. We make all necessary data for compliance available through our API and highly suggest following EMV compliance rules. For more information about EMV-compliant receipts, see the [EMVco website](https://www.emvco.com/resources/).\n\n![](https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale:Receipt%20Data%20Handling.webp)This is just an example of an EMV compliant omni-cart receipt. Merchants should format their receipts in a way that make sense for their business while incorporating the below EMV elements listed in the table.**NOTE**\nPlease take a look at our EMV-compliant [receipt reference page](/braintree/in-person/reference/emv-receipt-reference/), including an explanation with an EMV-compliant data element as an overlay.\n\n| **Data Element** | **Description** | **Mandatory vs. Optional** | **GraphQL API Field** |\n| **Merchant Name** | The name of the merchant. | M | Transaction.merchantName |\n| **Merchant Address Details** | The address details of the merchant. | M | Transaction.merchantAddress |\n| **Transaction Date and Time** | The date and time of the transaction. | M | Transaction.createdAt |\n| **Merchant ID (MID)** | The unique reference of the merchant. | O | Transaction.merchantId |\n| **Terminal ID (TID)** | The unique reference of the terminal. | O | Transaction.paymentMethodSnapshot.origin.details.terminalId |\n| **Transaction Number** | The unique reference number of the transaction. | M | Transaction.legacyId |\n| **Invoice Number** | The unique reference number of the receipt. | M | Transaction.legacyId |\n| **Card Type** | The name of the card issuer. | M | Transaction.paymentMethodSnapshot. creditCard.brand |\n| **Account Number** | The account number printed on the card. All digits except for last 4 must be truncated. | M | Transaction.paymentMethodSnapshot. creditCard.last4 |\n| **Application Preferred Name** | The name of the application used to process the transaction (e.g. MasterCard). | M | Transaction.paymentMethodSnapshot.origin.details.applicationPreferredName |\n| **Application Identifier** | The unique reference number of the EMV application used for the transaction. | M | Transaction.paymentMethodSnapshot.origin.details.applicationIdentifier |\n| **Approval Code** | The authorization code received from the processor for the transaction. | M | Transaction.statusHistory[…]. processorResponse.authorizationId |\n| **Authorization Mode** | The authorizing entity (e.g. Issuer). | M | Transaction.paymentMethodSnapshot.origin.details.authorizationMode |\n| **Transaction Kind** | The type of the transaction (e.g. Sale/Refund). | M | Transaction.kind |\n| **Card Entry Method** | The method used to read the detail of the card (e.g. Chip). | M | Transaction.paymentMethodSnapshot.origin.details.inputMode |\n| **Purchase Details** | A brief description of the purchased goods or services along with their prices. | M | Transaction.lineItems* * - If not provided in the authorize/charge request, then these details must be provided by the merchant. |\n| **Transaction Amount** | The grand total amount for the transaction. | M | Transaction.amount.value |\n| **Currency** | If specified, the currency that the transaction was processed in. If no currency is identified on the receipt, the transaction is deemed to have taken place in the currency that is legal tender at the point of sale. | O | Transaction.amount.currencyCode |\n| **PIN Verify Statement** | The cardholder’s PIN verification status specific to the processed transaction (e.g. Verified). | M | Transaction.paymentMethodSnapshot.origin.details.pinVerified |\n| **Return and Refund Policies** | The terms and conditions for return and refund set forth by the merchant. | M | Merchant or POS generated message that indicates return policy |\n\nThe following are data elements that are mandatory for transactions that were declined:\n\n| **Decline Code** | The system generated decline code for the declined transaction. | M | Transaction.statusHistory[…].processorResponse.legacyCode |\n| **Decline Message** | The merchant generated message for the respective decline code. | M | Merchant or POS generated message that reflects the decline code |\n\nThe following are data elements that are mandatory for transactions that were EMV chip declined:\n\n\n\n| **Terminal Verification Results** | A series of bits set by the terminal upon reading EMV card data, where each bit represents information about the transaction. This value is contained in the response EMV data under tag 95. | M | Transaction.statusHistory[…].processorResponse.emvData |\n| **Issuer Authentication Data** | Issuer provided data received in response to an online authorization request to be delivered to the EMV chip card. This value is contained in the response EMV data under tag 91. | M | Transaction.statusHistory[…].processorResponse.emvData |\n| **Authorization Response Code** | The 4-character code generated by the Issuer in response to an online authorization request that represents the authorization status of the transaction. This value is contained in the response EMV data under tag 8A. | M | Transaction.statusHistory[…].processorResponse.emvData |\n\n\n## Manual Key Entry Transactions\n\nThere are some use cases in which you may want to support the processing of a transaction without using the card reader by entering in the card details into another application UI. This could be for over-the-phone orders (MOTO) or as a manual key entry (MKE) fallback for when the card is not readable by the card reader, in which case you may want to enter the card details into the POS UI. To facilitate this while keeping your tech stack outside of PCI scope, we have a couple of solutions that can work for you.\n\n![](https://www.paypalobjects.com/devdoc/btdocs-gitbook/Initiate%20a%20sale_Manual%20Key%20Entry%20Transactions.png)\n### 1) Braintree Hosted Fields\n\nThe Braintree Hosted Fields enables you to render Braintree encrypted input fields in your application user interface. This allows for the manual key entry of card details directly into Braintree encrypted input fields. See how the [Braintree Hosted Fields](/braintree/docs/guides/hosted-fields/overview/) solution works.\n\n**NOTE**\nThe Braintree Hosted Fields solution gives you more control over the checkout flow and the flexibility to blend the encrypted fields into your POS UI\n\n\n### 2) Braintree Drop-in UI\n\nThe Braintree drop-in UI allows you to render Braintree encrypted forms in your application user interface. This would allow for the manual key entry of the card details directly into the Braintree Encrypted fields. The drop-in UI is a simple integration leveraging pre-built dynamic Braintree containers. See how the [Braintree Drop-in UI](/braintree/docs/guides/drop-in/overview/javascript/v3/) solution works.\n\n**NOTE**\nThe drop in UI allows for a simpler integration but reduced control over the look and feel of the UI and checkout flow experience\n\n\n## Important Tips for building out your charge/refund flows\n\n\n- Always make sure you are passing your Braintree [Merchant Account ID](/braintree/articles/control-panel/important-gateway-credentials/#merchant-account-id) (MAID) in your charge and refund requests. This should be added as an API variable, for example:![](https://www.paypalobjects.com/devdoc/btdocs-gitbook/InitiateAsalesMakingAtransaction.jpg)\n\n\n- Use [Idempotency Keys](/braintree/in-person/guides/making-a-transaction/#initializing-the-reader-for-charging) to prevent duplicate charges to your customers\n\n\n- Align your application with our [recommended timeout logic](/braintree/in-person/guides/making-a-transaction/#recommended-timeout-logic)\n\n\n- Make sure you are parsing key [EMV receipt data](/braintree/in-person/guides/making-a-transaction/#receipt-data-handling) from your API response to populate on your customer receipts for EMV compliance\n\n\n- Utilize the [orderId API field](/braintree/in-person/guides/reporting-and-reconciliation/#using-the-order-id-field-to-reconcile-with-braintree-settlement-reports) to pass important data for reporting and reconciliation\n\n\n\n[Setup Reader](/braintree/in-person/guides/setup-reader/)[Initiate a Card Present Authorization](/braintree/in-person/guides/making-a-transaction/initiate-a-card-present-authorization/)"},"routes/braintree/in-person":null},"actionData":null,"errors":null},"future":{"v2_dev":true,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":false,"v2_headers":false,"v2_meta":true,"v2_normalizeFormMethod":false,"v2_routeConvention":false}};</script><script nonce="l4mqFgQ/bLkXkk9MqkilsYGT/gDRRmEsKlPxnWrBMzVdIpqZ" type="module" async="">import "https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/manifest-D829D641.js";
import * as route0 from "https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/root-HIAAUWNH.js";
import * as route1 from "https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/routes/in-person-BCFKGM3O.js";
import * as route2 from "https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/routes/in-person/$-EGOLLNAC.js";
window.__remixRouteModules = {"root":route0,"routes/braintree/in-person":route1,"routes/braintree/in-person/$":route2};

import("https://www.paypalobjects.com/btdevdoc/bundles/4.3.24/entry.client-I74HTVVJ.js");</script></body></html>