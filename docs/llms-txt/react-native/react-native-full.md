# React Native Documentation

Source: https://reactnative.dev/llms-full.txt

---

# React Native ¬∑ Learn once, write anywhere

> A framework for building native apps for Android, iOS, and more using React

- [React Native ¬∑ Learn once, write anywhere](/index.md)

## docs


### getting-started

This helpful guide lays out the prerequisites for learning React Native, using these docs, and setting up your environment.

- [Introduction](/docs/getting-started.md): This helpful guide lays out the prerequisites for learning React Native, using these docs, and setting up your environment.

### environment-setup

React Native allows developers who know React to create native apps. At the same time, native developers can use React Native to gain parity between native platforms by writing common features once.

- [Get Started with React Native](/docs/environment-setup.md): React Native allows developers who know React to create native apps. At the same time, native developers can use React Native to gain parity between native platforms by writing common features once.

### set-up-your-environment

In this guide, you'll learn how to set up your environment, so that you can run your project with Android Studio and Xcode. This will allow you to develop with Android emulators and iOS simulators, build your app locally, and more.

- [Set Up Your Environment](/docs/set-up-your-environment.md): In this guide, you'll learn how to set up your environment, so that you can run your project with Android Studio and Xcode. This will allow you to develop with Android emulators and iOS simulators, build your app locally, and more.

### integration-with-existing-apps

React Native is great when you are starting a new mobile app from scratch. However, it also works well for adding a single view or user flow to existing native applications. With a few steps, you can add new React Native based features, screens, views, etc.

- [Integration with Existing Apps](/docs/integration-with-existing-apps.md): React Native is great when you are starting a new mobile app from scratch. However, it also works well for adding a single view or user flow to existing native applications. With a few steps, you can add new React Native based features, screens, views, etc.

### integration-with-android-fragment

The guide for Integration with Existing Apps details how to integrate a full-screen React Native app into an existing Android app as an Activity.

- [Integration with an Android Fragment](/docs/integration-with-android-fragment.md): The guide for Integration with Existing Apps details how to integrate a full-screen React Native app into an existing Android app as an Activity.

### intro-react-native-components

React Native lets you compose app interfaces using Native Components. Conveniently, it comes with a set of these components for you to get started with right now‚Äîthe Core Components!

- [Core Components and Native Components](/docs/intro-react-native-components.md): React Native lets you compose app interfaces using Native Components. Conveniently, it comes with a set of these components for you to get started with right now‚Äîthe Core Components!

### intro-react

To understand React Native fully, you need a solid foundation in React. This short introduction to React can help you get started or get refreshed.

- [React Fundamentals](/docs/intro-react.md): To understand React Native fully, you need a solid foundation in React. This short introduction to React can help you get started or get refreshed.

### handling-text-input

TextInput is a Core Component that allows the user to enter text. It has an onChangeText prop that takes a function to be called every time the text changed, and an onSubmitEditing prop that takes a function to be called when the text is submitted.

- [Handling Text Input](/docs/handling-text-input.md): TextInput is a Core Component that allows the user to enter text. It has an onChangeText prop that takes a function to be called every time the text changed, and an onSubmitEditing prop that takes a function to be called when the text is submitted.

### using-a-scrollview

The ScrollView is a generic scrolling container that can contain multiple components and views. The scrollable items can be heterogeneous, and you can scroll both vertically and horizontally (by setting the horizontal property).

- [Using a ScrollView](/docs/using-a-scrollview.md): The ScrollView is a generic scrolling container that can contain multiple components and views. The scrollable items can be heterogeneous, and you can scroll both vertically and horizontally (by setting the horizontal property).

### using-a-listview

React Native provides a suite of components for presenting lists of data. Generally, you'll want to use either FlatList or SectionList.

- [Using List Views](/docs/using-a-listview.md): React Native provides a suite of components for presenting lists of data. Generally, you'll want to use either FlatList or SectionList.

### troubleshooting

These are some common issues you may run into while setting up React Native. If you encounter something that is not listed here, try searching for the issue in GitHub.

- [Troubleshooting](/docs/troubleshooting.md): These are some common issues you may run into while setting up React Native. If you encounter something that is not listed here, try searching for the issue in GitHub.

### platform-specific-code

When building a cross-platform app, you'll want to re-use as much code as possible. Scenarios may arise where it makes sense for the code to be different, for example you may want to implement separate visual components for Android and iOS.

- [Platform-Specific Code](/docs/platform-specific-code.md): When building a cross-platform app, you'll want to re-use as much code as possible. Scenarios may arise where it makes sense for the code to be different, for example you may want to implement separate visual components for Android and iOS.

### building-for-tv

TV devices support has been implemented with the intention of making existing React Native applications work on Apple TV and Android TV, with few or no changes needed in the JavaScript code for the applications.

- [Building For TV Devices](/docs/building-for-tv.md): TV devices support has been implemented with the intention of making existing React Native applications work on Apple TV and Android TV, with few or no changes needed in the JavaScript code for the applications.

### out-of-tree-platforms

React Native is not only for Android and iOS devices - our partners and the community maintain projects that bring React Native to other platforms, such as:

- [Out-of-Tree Platforms](/docs/out-of-tree-platforms.md): React Native is not only for Android and iOS devices - our partners and the community maintain projects that bring React Native to other platforms, such as:

### more-resources

There‚Äôs always more to learn: developer workflows, shipping to app stores, internationalization, security and more.

- [More Resources](/docs/more-resources.md): There‚Äôs always more to learn: developer workflows, shipping to app stores, internationalization, security and more.

### accessibility

Create mobile apps accessible to assistive technology with React Native's suite of APIs designed to work with Android and iOS.

- [Accessibility](/docs/accessibility.md): Create mobile apps accessible to assistive technology with React Native's suite of APIs designed to work with Android and iOS.

### accessibilityinfo

Sometimes it's useful to know whether or not the device has a screen reader that is currently active. The AccessibilityInfo API is designed for this purpose. You can use it to query the current state of the screen reader as well as to register to be notified when the state of the screen reader changes.

- [AccessibilityInfo](/docs/accessibilityinfo.md): Sometimes it's useful to know whether or not the device has a screen reader that is currently active. The AccessibilityInfo API is designed for this purpose. You can use it to query the current state of the screen reader as well as to register to be notified when the state of the screen reader changes.

### actionsheetios

Displays native to iOS Action Sheet component.

- [ActionSheetIOS](/docs/actionsheetios.md): Displays native to iOS Action Sheet component.

### activityindicator

Displays a circular loading indicator.

- [ActivityIndicator](/docs/activityindicator.md): Displays a circular loading indicator.

### alert

Launches an alert dialog with the specified title and message.

- [Alert](/docs/alert.md): Launches an alert dialog with the specified title and message.

### alertios

Use Alert instead.

- [‚ùå AlertIOS](/docs/alertios.md): Use Alert instead.

### animated

The Animated library is designed to make animations fluid, powerful, and painless to build and maintain. Animated focuses on declarative relationships between inputs and outputs, configurable transforms in between, and start/stop methods to control time-based animation execution.

- [Animated](/docs/animated.md): The Animated library is designed to make animations fluid, powerful, and painless to build and maintain. Animated focuses on declarative relationships between inputs and outputs, configurable transforms in between, and start/stop methods to control time-based animation execution.

### animatedvalue

Standard value for driving animations. One Animated.Value can drive multiple properties in a synchronized fashion, but can only be driven by one mechanism at a time. Using a new mechanism (e.g. starting a new animation, or calling setValue) will stop any previous ones.

- [Animated.Value](/docs/animatedvalue.md): Standard value for driving animations. One Animated.Value can drive multiple properties in a synchronized fashion, but can only be driven by one mechanism at a time. Using a new mechanism (e.g. starting a new animation, or calling setValue) will stop any previous ones.

### animatedvaluexy

2D Value for driving 2D animations, such as pan gestures. Almost identical API to normal Animated.Value, but multiplexed. Contains two regular Animated.Values under the hood.

- [Animated.ValueXY](/docs/animatedvaluexy.md): 2D Value for driving 2D animations, such as pan gestures. Almost identical API to normal Animated.Value, but multiplexed. Contains two regular Animated.Values under the hood.

### animations

Animations are very important to create a great user experience. Stationary objects must overcome inertia as they start moving. Objects in motion have momentum and rarely come to a stop immediately. Animations allow you to convey physically believable motion in your interface.

- [Animations](/docs/animations.md): Animations are very important to create a great user experience. Stationary objects must overcome inertia as they start moving. Objects in motion have momentum and rarely come to a stop immediately. Animations allow you to convey physically believable motion in your interface.

### app-extensions

App extensions let you provide custom functionality and content outside of your main app. There are different types of app extensions on iOS, and they are all covered in the App Extension Programming Guide. In this guide, we'll briefly cover how you may take advantage of app extensions on iOS.

- [App Extensions](/docs/app-extensions.md): App extensions let you provide custom functionality and content outside of your main app. There are different types of app extensions on iOS, and they are all covered in the App Extension Programming Guide. In this guide, we'll briefly cover how you may take advantage of app extensions on iOS.

### appearance

The Appearance module exposes information about the user's appearance preferences, such as their preferred color scheme (light or dark).

- [Appearance](/docs/appearance.md): The Appearance module exposes information about the user's appearance preferences, such as their preferred color scheme (light or dark).

### appendix

I. Terminology

- [Appendix](/docs/appendix.md): I. Terminology

### appregistry

Project with Native Code Required

- [AppRegistry](/docs/appregistry.md): Project with Native Code Required

### appstate

AppState can tell you if the app is in the foreground or background, and notify you when the state changes.

- [AppState](/docs/appstate.md): AppState can tell you if the app is in the foreground or background, and notify you when the state changes.

### asyncstorage

Use one of the community packages instead.

- [‚ùå AsyncStorage](/docs/asyncstorage.md): Use one of the community packages instead.

### backhandler

The Backhandler API detects hardware button presses for back navigation, lets you register event listeners for the system's back action, and lets you control how your application responds. It is Android-only.

- [BackHandler](/docs/backhandler.md): The Backhandler API detects hardware button presses for back navigation, lets you register event listeners for the system's back action, and lets you control how your application responds. It is Android-only.

### boxshadowvalue

The BoxShadowValue object is taken by the boxShadow style prop. It is comprised of 2-4 lengths, an optional color, and an optional inset boolean. These values collectively define the box shadow's color, position, size, and blurriness.

- [BoxShadowValue Object Type](/docs/boxshadowvalue.md): The BoxShadowValue object is taken by the boxShadow style prop. It is comprised of 2-4 lengths, an optional color, and an optional inset boolean. These values collectively define the box shadow's color, position, size, and blurriness.

### build-speed

Building your React Native app could be expensive and take several minutes of developers time.

- [Speeding up your Build phase](/docs/build-speed.md): Building your React Native app could be expensive and take several minutes of developers time.

### button

A basic button component that should render nicely on any platform. Supports a minimal level of customization.

- [Button](/docs/button.md): A basic button component that should render nicely on any platform. Supports a minimal level of customization.

### checkbox

Use one of the community packages instead.

- [‚ùå CheckBox](/docs/checkbox.md): Use one of the community packages instead.

### clipboard

Use one of the community packages instead.

- [‚ùå Clipboard](/docs/clipboard.md): Use one of the community packages instead.

### colors

Components in React Native are styled using JavaScript. Color properties usually match how CSS works on the web. General guides on the color usage on each platform could be found below:

- [Color Reference](/docs/colors.md): Components in React Native are styled using JavaScript. Color properties usually match how CSS works on the web. General guides on the color usage on each platform could be found below:

### communication-android

In Integrating with Existing Apps guide and Native UI Components guide we learn how to embed React Native in a native component and vice versa. When we mix native and React Native components, we'll eventually find a need to communicate between these two worlds. Some ways to achieve that have been already mentioned in other guides. This article summarizes available techniques.

- [Communication between native and React Native](/docs/communication-android.md): In Integrating with Existing Apps guide and Native UI Components guide we learn how to embed React Native in a native component and vice versa. When we mix native and React Native components, we'll eventually find a need to communicate between these two worlds. Some ways to achieve that have been already mentioned in other guides. This article summarizes available techniques.

### communication-ios

In Integrating with Existing Apps guide and Native UI Components guide we learn how to embed React Native in a native component and vice versa. When we mix native and React Native components, we'll eventually find a need to communicate between these two worlds. Some ways to achieve that have been already mentioned in other guides. This article summarizes available techniques.

- [Communication between native and React Native](/docs/communication-ios.md): In Integrating with Existing Apps guide and Native UI Components guide we learn how to embed React Native in a native component and vice versa. When we mix native and React Native components, we'll eventually find a need to communicate between these two worlds. Some ways to achieve that have been already mentioned in other guides. This article summarizes available techniques.

### components-and-apis

React Native provides a number of built-in Core Components ready for you to use in your app. You can find them all in the left sidebar (or menu above, if you are on a narrow screen). If you're not sure where to get started, take a look at the following categories:

- [Core Components and APIs](/docs/components-and-apis.md): React Native provides a number of built-in Core Components ready for you to use in your app. You can find them all in the left sidebar (or menu above, if you are on a narrow screen). If you're not sure where to get started, take a look at the following categories:

### datepickerandroid

Use one of the community packages instead.

- [‚ùå DatePickerAndroid](/docs/datepickerandroid.md): Use one of the community packages instead.

### datepickerios

Use one of the community packages instead.

- [‚ùå DatePickerIOS](/docs/datepickerios.md): Use one of the community packages instead.

### debugging

Debugging features, such as the Dev Menu, LogBox, and React Native DevTools are disabled in release (production) builds.

- [Debugging Basics](/docs/debugging.md): Debugging features, such as the Dev Menu, LogBox, and React Native DevTools are disabled in release (production) builds.

### debugging-native-code

Projects with Native Code Only

- [Debugging Native Code](/docs/debugging-native-code.md): Projects with Native Code Only

### debugging-release-builds

Symbolicating a stack trace

- [Debugging Release Builds](/docs/debugging-release-builds.md): Symbolicating a stack trace

### devsettings

The DevSettings module exposes methods for customizing settings for developers in development.

- [DevSettings](/docs/devsettings.md): The DevSettings module exposes methods for customizing settings for developers in development.

### dimensions

useWindowDimensions is the preferred API for React components. Unlike Dimensions, it updates as the window's dimensions update. This works nicely with the React paradigm.

- [Dimensions](/docs/dimensions.md): useWindowDimensions is the preferred API for React components. Unlike Dimensions, it updates as the window's dimensions update. This works nicely with the React paradigm.

### document-nodes

Document nodes represent a complete native view tree. Apps using native navigation would provide a separate document node for each screen. Apps not using native navigation would generally provide a single document for the whole app (similar to single-page apps on Web).

- [Document nodes](/docs/document-nodes.md): Document nodes represent a complete native view tree. Apps using native navigation would provide a separate document node for each screen. Apps not using native navigation would generally provide a single document for the whole app (similar to single-page apps on Web).

### drawerlayoutandroid

React component that wraps the platform DrawerLayout (Android only). The Drawer (typically used for navigation) is rendered with renderNavigationView and direct children are the main view (where your content goes). The navigation view is initially not visible on the screen, but can be pulled in from the side of the window specified by the drawerPosition prop and its width can be set by the drawerWidth prop.

- [DrawerLayoutAndroid](/docs/drawerlayoutandroid.md): React component that wraps the platform DrawerLayout (Android only). The Drawer (typically used for navigation) is rendered with renderNavigationView and direct children are the main view (where your content goes). The navigation view is initially not visible on the screen, but can be pulled in from the side of the window specified by the drawerPosition prop and its width can be set by the drawerWidth prop.

### dropshadowvalue

The DropShadowValue object is taken by the filter style prop for the dropShadow function. It is comprised of 2 or 3 lengths and an optional color. These values collectively define the drop shadow's color, position, and blurriness.

- [DropShadowValue Object Type](/docs/dropshadowvalue.md): The DropShadowValue object is taken by the filter style prop for the dropShadow function. It is comprised of 2 or 3 lengths and an optional color. These values collectively define the drop shadow's color, position, and blurriness.

### dynamiccolorios

The DynamicColorIOS function is a platform color type specific to iOS.

- [DynamicColorIOS](/docs/dynamiccolorios.md): The DynamicColorIOS function is a platform color type specific to iOS.

### easing

The Easing module implements common easing functions. This module is used by Animated.timing() to convey physically believable motion in animations.

- [Easing](/docs/easing.md): The Easing module implements common easing functions. This module is used by Animated.timing() to convey physically believable motion in animations.

### element-nodes

Element nodes represent native components in the native view tree (similar to Element nodes on Web).

- [Element nodes](/docs/element-nodes.md): Element nodes represent native components in the native view tree (similar to Element nodes on Web).

### fabric-native-components-android

Now it's time to write some Android platform code to be able to render the web view. The steps you need to follow are:

- [Fabric Native Modules: Android](/docs/fabric-native-components-android.md): Now it's time to write some Android platform code to be able to render the web view. The steps you need to follow are:

### fabric-native-components-introduction

If you want to build new React Native Components that wrap around a Host Component like a unique kind of CheckBox on Android, or a UIButton on iOS, you should use a Fabric Native Component.

- [Native Components](/docs/fabric-native-components-introduction.md): If you want to build new React Native Components that wrap around a Host Component like a unique kind of CheckBox on Android, or a UIButton on iOS, you should use a Fabric Native Component.

### fabric-native-components-ios

Now it's time to write some iOS platform code to be able to render the web view. The steps you need to follow are:

- [Fabric Native Components: iOS](/docs/fabric-native-components-ios.md): Now it's time to write some iOS platform code to be able to render the web view. The steps you need to follow are:

### fast-refresh

Fast Refresh is a React Native feature that allows you to get near-instant feedback for changes in your React components. Fast Refresh is enabled by default, and you can toggle "Enable Fast Refresh" in the React Native Dev Menu. With Fast Refresh enabled, most edits should be visible within a second or two.

- [Fast Refresh](/docs/fast-refresh.md): Fast Refresh is a React Native feature that allows you to get near-instant feedback for changes in your React components. Fast Refresh is enabled by default, and you can toggle "Enable Fast Refresh" in the React Native Dev Menu. With Fast Refresh enabled, most edits should be visible within a second or two.

### flatlist

A performant interface for rendering basic, flat lists, supporting the most handy features:

- [FlatList](/docs/flatlist.md): A performant interface for rendering basic, flat lists, supporting the most handy features:

### flexbox

A component can specify the layout of its children using the Flexbox algorithm. Flexbox is designed to provide a consistent layout on different screen sizes.

- [Layout with Flexbox](/docs/flexbox.md): A component can specify the layout of its children using the Flexbox algorithm. Flexbox is designed to provide a consistent layout on different screen sizes.

### gesture-responder-system

The gesture responder system manages the lifecycle of gestures in your app. A touch can go through several phases as the app determines what the user's intention is. For example, the app needs to determine if the touch is scrolling, sliding on a widget, or tapping. This can even change during the duration of a touch. There can also be multiple simultaneous touches.

- [Gesture Responder System](/docs/gesture-responder-system.md): The gesture responder system manages the lifecycle of gestures in your app. A touch can go through several phases as the app determines what the user's intention is. For example, the app needs to determine if the touch is scrolling, sliding on a widget, or tapping. This can even change during the duration of a touch. There can also be multiple simultaneous touches.

### getting-started-without-a-framework

If you have constraints that are not served well by a Framework, or you prefer to write your own Framework, you can create a React Native app without using a Framework.

- [Get Started Without a Framework](/docs/getting-started-without-a-framework.md): If you have constraints that are not served well by a Framework, or you prefer to write your own Framework, you can create a React Native app without using a Framework.

### global-__DEV__

You can use the DEV pseudo-global variable in the codebase to guard development-only blocks of code.

- [‚ú® __DEV__](/docs/global-__DEV__.md): You can use the DEV pseudo-global variable in the codebase to guard development-only blocks of code.

### global-AbortController

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [AbortController](/docs/global-AbortController.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-AbortSignal

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [AbortSignal](/docs/global-AbortSignal.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-alert

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [alert](/docs/global-alert.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-Blob

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [Blob](/docs/global-Blob.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-cancelAnimationFrame

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [cancelAnimationFrame](/docs/global-cancelAnimationFrame.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-cancelIdleCallback

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [cancelIdleCallback](/docs/global-cancelIdleCallback.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-clearInterval

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [clearInterval](/docs/global-clearInterval.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-clearTimeout

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [clearTimeout](/docs/global-clearTimeout.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-console

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [console](/docs/global-console.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-EventCounts

The global EventCounts class, as defined in Web specifications.

- [EventCounts](/docs/global-EventCounts.md): The global EventCounts class, as defined in Web specifications.

### global-fetch

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [fetch](/docs/global-fetch.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-File

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [File](/docs/global-File.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-FileReader

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [FileReader](/docs/global-FileReader.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-FormData

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [FormData](/docs/global-FormData.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-global

global is a legacy alias for globalThis, as defined in Node.js.

- [global](/docs/global-global.md): global is a legacy alias for globalThis, as defined in Node.js.

### global-Headers

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [Headers](/docs/global-Headers.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-intersectionobserver

The global IntersectionObserver interface, as defined in Web specifications. It provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element or with a top-level document's viewport.

- [IntersectionObserver üß™](/docs/global-intersectionobserver.md): The global IntersectionObserver interface, as defined in Web specifications. It provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element or with a top-level document's viewport.

### global-intersectionobserverentry

The IntersectionObserverEntry interface, as defined in Web specifications. It describes the intersection between the target element and its root container at a specific moment of transition.

- [IntersectionObserverEntry üß™](/docs/global-intersectionobserverentry.md): The IntersectionObserverEntry interface, as defined in Web specifications. It describes the intersection between the target element and its root container at a specific moment of transition.

### global-navigator

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [navigator](/docs/global-navigator.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-performance

The global performance object, as defined in Web specifications.

- [performance](/docs/global-performance.md): The global performance object, as defined in Web specifications.

### global-PerformanceEntry

The global PerformanceEntry class, as defined in Web specifications.

- [PerformanceEntry](/docs/global-PerformanceEntry.md): The global PerformanceEntry class, as defined in Web specifications.

### global-PerformanceEventTiming

The global PerformanceEventTiming class, as defined in Web specifications.

- [PerformanceEventTiming](/docs/global-PerformanceEventTiming.md): The global PerformanceEventTiming class, as defined in Web specifications.

### global-PerformanceLongTaskTiming

The global PerformanceLongTaskTiming class, as defined in Web specifications.

- [PerformanceLongTaskTiming](/docs/global-PerformanceLongTaskTiming.md): The global PerformanceLongTaskTiming class, as defined in Web specifications.

### global-PerformanceMark

The global PerformanceMark class, as defined in Web specifications.

- [PerformanceMark](/docs/global-PerformanceMark.md): The global PerformanceMark class, as defined in Web specifications.

### global-PerformanceMeasure

The global PerformanceMeasure class, as defined in Web specifications.

- [PerformanceMeasure](/docs/global-PerformanceMeasure.md): The global PerformanceMeasure class, as defined in Web specifications.

### global-PerformanceObserver

The global PerformanceObserver class, as defined in Web specifications.

- [PerformanceObserver](/docs/global-PerformanceObserver.md): The global PerformanceObserver class, as defined in Web specifications.

### global-PerformanceObserverEntryList

The global PerformanceObserverEntryList class, as defined in Web specifications.

- [PerformanceObserverEntryList](/docs/global-PerformanceObserverEntryList.md): The global PerformanceObserverEntryList class, as defined in Web specifications.

### global-PerformanceResourceTiming

The global PerformanceResourceTiming class, as defined in Web specifications.

- [PerformanceResourceTiming](/docs/global-PerformanceResourceTiming.md): The global PerformanceResourceTiming class, as defined in Web specifications.

### global-process

üöß This page is work in progress.

- [process](/docs/global-process.md): üöß This page is work in progress.

### global-queueMicrotask

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [queueMicrotask](/docs/global-queueMicrotask.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-Request

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [Request](/docs/global-Request.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-requestAnimationFrame

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [requestAnimationFrame](/docs/global-requestAnimationFrame.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-requestIdleCallback

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [requestIdleCallback](/docs/global-requestIdleCallback.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-Response

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [Response](/docs/global-Response.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-self

self is an alias for globalThis, as defined in Web specifications.

- [self](/docs/global-self.md): self is an alias for globalThis, as defined in Web specifications.

### global-setInterval

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [setInterval](/docs/global-setInterval.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-setTimeout

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [setTimeout](/docs/global-setTimeout.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-URL

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [URL](/docs/global-URL.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-URLSearchParams

üöß This page is work in progress, so please refer to the MDN documentation for more information.\

- [URLSearchParams](/docs/global-URLSearchParams.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.\

### global-WebSocket

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [WebSocket](/docs/global-WebSocket.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### global-window

window is an alias for globalThis, as defined in Web specifications.

- [window](/docs/global-window.md): window is an alias for globalThis, as defined in Web specifications.

### global-XMLHttpRequest

üöß This page is work in progress, so please refer to the MDN documentation for more information.

- [XMLHttpRequest](/docs/global-XMLHttpRequest.md): üöß This page is work in progress, so please refer to the MDN documentation for more information.

### handling-touches

Users interact with mobile apps mainly through touch. They can use a combination of gestures, such as tapping on a button, scrolling a list, or zooming on a map. React Native provides components to handle all sorts of common gestures, as well as a comprehensive gesture responder system to allow for more advanced gesture recognition, but the one component you will most likely be interested in is the basic Button.

- [Handling Touches](/docs/handling-touches.md): Users interact with mobile apps mainly through touch. They can use a combination of gestures, such as tapping on a button, scrolling a list, or zooming on a map. React Native provides components to handle all sorts of common gestures, as well as a comprehensive gesture responder system to allow for more advanced gesture recognition, but the one component you will most likely be interested in is the basic Button.

### headless-js-android

Headless JS is a way to run tasks in JavaScript while your app is in the background. It can be used, for example, to sync fresh data, handle push notifications, or play music.

- [Headless JS](/docs/headless-js-android.md): Headless JS is a way to run tasks in JavaScript while your app is in the background. It can be used, for example, to sync fresh data, handle push notifications, or play music.

### height-and-width

A component's height and width determine its size on the screen.

- [Height and Width](/docs/height-and-width.md): A component's height and width determine its size on the screen.

### hermes

Hermes is an open-source JavaScript engine optimized for React Native. For many apps, using Hermes will result in improved start-up time, decreased memory usage, and smaller app size when compared to JavaScriptCore.

- [Using Hermes](/docs/hermes.md): Hermes is an open-source JavaScript engine optimized for React Native. For many apps, using Hermes will result in improved start-up time, decreased memory usage, and smaller app size when compared to JavaScriptCore.

### i18nmanager

The I18nManager module provides utilities for managing Right-to-Left (RTL) layout support for languages like Arabic, Hebrew, and others. It provides methods to control RTL behavior and check the current layout direction.

- [I18nManager](/docs/i18nmanager.md): The I18nManager module provides utilities for managing Right-to-Left (RTL) layout support for languages like Arabic, Hebrew, and others. It provides methods to control RTL behavior and check the current layout direction.

### image

A React component for displaying different types of images, including network images, static resources, temporary local images, and images from local disk, such as the camera roll.

- [Image](/docs/image.md): A React component for displaying different types of images, including network images, static resources, temporary local images, and images from local disk, such as the camera roll.

### image-style-props

Examples

- [Image Style Props](/docs/image-style-props.md): Examples

### imagebackground

A common feature request from developers familiar with the web is background-image. To handle this use case, you can use the ` component, which has the same props as `, and add whatever children to it you would like to layer on top of it.

- [ImageBackground](/docs/imagebackground.md): A common feature request from developers familiar with the web is background-image. To handle this use case, you can use the ` component, which has the same props as `, and add whatever children to it you would like to layer on top of it.

### imagepickerios

Use one of the community packages instead.

- [‚ùå ImagePickerIOS](/docs/imagepickerios.md): Use one of the community packages instead.

### images

Static Image Resources

- [Images](/docs/images.md): Static Image Resources

### improvingux

Configure text inputs

- [Improving User Experience](/docs/improvingux.md): Configure text inputs

### inputaccessoryview

A component which enables customization of the keyboard input accessory view on iOS. The input accessory view is displayed above the keyboard whenever a TextInput has focus. This component can be used to create custom toolbars.

- [InputAccessoryView](/docs/inputaccessoryview.md): A component which enables customization of the keyboard input accessory view on iOS. The input accessory view is displayed above the keyboard whenever a TextInput has focus. This component can be used to create custom toolbars.

### interactionmanager

Avoid long-running work and use requestIdleCallback instead.

- [üóëÔ∏è InteractionManager](/docs/interactionmanager.md): Avoid long-running work and use requestIdleCallback instead.

### javascript-environment

JavaScript Runtime

- [JavaScript Environment](/docs/javascript-environment.md): JavaScript Runtime

### keyboard

Keyboard module to control keyboard events.

- [Keyboard](/docs/keyboard.md): Keyboard module to control keyboard events.

### keyboardavoidingview

This component will automatically adjust its height, position, or bottom padding based on the keyboard height to remain visible while the virtual keyboard is displayed.

- [KeyboardAvoidingView](/docs/keyboardavoidingview.md): This component will automatically adjust its height, position, or bottom padding based on the keyboard height to remain visible while the virtual keyboard is displayed.

### layout-props

More detailed examples about those properties can be found on the Layout with Flexbox page.

- [Layout Props](/docs/layout-props.md): More detailed examples about those properties can be found on the Layout with Flexbox page.

### layoutanimation

Automatically animates views to their new positions when the next layout happens.

- [LayoutAnimation](/docs/layoutanimation.md): Automatically animates views to their new positions when the next layout happens.

### layoutevent

LayoutEvent object is returned in the callback as a result of component layout change, for example onLayout in View component.

- [LayoutEvent Object Type](/docs/layoutevent.md): LayoutEvent object is returned in the callback as a result of component layout change, for example onLayout in View component.

### legacy


#### direct-manipulation

It is sometimes necessary to make changes directly to a component without using state/props to trigger a re-render of the entire subtree. When using React in the browser for example, you sometimes need to directly modify a DOM node, and the same is true for views in mobile apps. setNativeProps is the React Native equivalent to setting properties directly on a DOM node.

- [Direct Manipulation](/docs/legacy/direct-manipulation.md): It is sometimes necessary to make changes directly to a component without using state/props to trigger a re-render of the entire subtree. When using React in the browser for example, you sometimes need to directly modify a DOM node, and the same is true for views in mobile apps. setNativeProps is the React Native equivalent to setting properties directly on a DOM node.

#### local-library-setup

A local library is a library containing views or modules that's local to your app and not published to a registry. This is different from the traditional setup for view and modules in the sense that a local library is decoupled from your app's native code.

- [Local libraries setup](/docs/legacy/local-library-setup.md): A local library is a library containing views or modules that's local to your app and not published to a registry. This is different from the traditional setup for view and modules in the sense that a local library is decoupled from your app's native code.

#### native-components-android

There are tons of native UI widgets out there ready to be used in the latest apps - some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like ScrollView and TextInput, but not all of them, and certainly not ones you might have written yourself for a previous app. Fortunately, we can wrap up these existing components for seamless integration with your React Native application.

- [Android Native UI Components](/docs/legacy/native-components-android.md): There are tons of native UI widgets out there ready to be used in the latest apps - some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like ScrollView and TextInput, but not all of them, and certainly not ones you might have written yourself for a previous app. Fortunately, we can wrap up these existing components for seamless integration with your React Native application.

#### native-components-ios

There are tons of native UI widgets out there ready to be used in the latest apps - some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like ScrollView and TextInput, but not all of them, and certainly not ones you might have written yourself for a previous app. Fortunately, we can wrap up these existing components for seamless integration with your React Native application.

- [iOS Native UI Components](/docs/legacy/native-components-ios.md): There are tons of native UI widgets out there ready to be used in the latest apps - some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like ScrollView and TextInput, but not all of them, and certainly not ones you might have written yourself for a previous app. Fortunately, we can wrap up these existing components for seamless integration with your React Native application.

#### native-modules-android

Welcome to Native Modules for Android. Please start by reading the Native Modules Intro for an intro to what native modules are.

- [Android Native Modules](/docs/legacy/native-modules-android.md): Welcome to Native Modules for Android. Please start by reading the Native Modules Intro for an intro to what native modules are.

#### native-modules-intro

Sometimes a React Native app needs to access a native platform API that is not available by default in JavaScript, for example the native APIs to access Apple or Google Pay. Maybe you want to reuse some existing Objective-C, Swift, Java or C++ libraries without having to reimplement it in JavaScript, or write some high performance, multi-threaded code for things like image processing.

- [Native Modules Intro](/docs/legacy/native-modules-intro.md): Sometimes a React Native app needs to access a native platform API that is not available by default in JavaScript, for example the native APIs to access Apple or Google Pay. Maybe you want to reuse some existing Objective-C, Swift, Java or C++ libraries without having to reimplement it in JavaScript, or write some high performance, multi-threaded code for things like image processing.

#### native-modules-ios

Welcome to Native Modules for iOS. Please start by reading the Native Modules Intro for an intro to what native modules are.

- [iOS Native Modules](/docs/legacy/native-modules-ios.md): Welcome to Native Modules for iOS. Please start by reading the Native Modules Intro for an intro to what native modules are.

#### native-modules-setup

Native modules are usually distributed as npm packages, except that on top of the usual JavaScript they will include some native code per platform. To understand more about npm packages you may find this guide useful.

- [Native Modules NPM Package Setup](/docs/legacy/native-modules-setup.md): Native modules are usually distributed as npm packages, except that on top of the usual JavaScript they will include some native code per platform. To understand more about npm packages you may find this guide useful.

### libraries

This guide introduces React Native developers to finding, installing, and using third-party libraries in their apps.

- [Using Libraries](/docs/libraries.md): This guide introduces React Native developers to finding, installing, and using third-party libraries in their apps.

### linking

Linking gives you a general interface to interact with both incoming and outgoing app links.

- [Linking](/docs/linking.md): Linking gives you a general interface to interact with both incoming and outgoing app links.

### linking-libraries-ios

Not every app uses all the native capabilities, and including the code to support all those features would impact the binary size... But we still want to support adding these features whenever you need them.

- [Linking Libraries](/docs/linking-libraries-ios.md): Not every app uses all the native capabilities, and including the code to support all those features would impact the binary size... But we still want to support adding these features whenever you need them.

### metro

React Native uses Metro to build your JavaScript code and assets.

- [Metro](/docs/metro.md): React Native uses Metro to build your JavaScript code and assets.

### modal

The Modal component is a basic way to present content above an enclosing view.

- [Modal](/docs/modal.md): The Modal component is a basic way to present content above an enclosing view.

### native-platform

Your application may need access to platform features that aren‚Äôt directly available from react-native or one of the hundreds of third-party libraries maintained by the community. Maybe you want to reuse some existing Objective-C, Swift, Java, Kotlin or C++ code from the JavaScript runtime. Whatever your reason, React Native exposes a powerful set of API to connect your native code to your JavaScript application code.

- [Native Platform](/docs/native-platform.md): Your application may need access to platform features that aren‚Äôt directly available from react-native or one of the hundreds of third-party libraries maintained by the community. Maybe you want to reuse some existing Objective-C, Swift, Java, Kotlin or C++ code from the JavaScript runtime. Whatever your reason, React Native exposes a powerful set of API to connect your native code to your JavaScript application code.

### navigation

Mobile apps are rarely made up of a single screen. Managing the presentation of, and transition between, multiple screens is typically handled by what is known as a navigator.

- [Navigating Between Screens](/docs/navigation.md): Mobile apps are rarely made up of a single screen. Managing the presentation of, and transition between, multiple screens is typically handled by what is known as a navigator.

### network

Many mobile apps need to load resources from a remote URL. You may want to make a POST request to a REST API, or you may need to fetch a chunk of static content from another server.

- [Networking](/docs/network.md): Many mobile apps need to load resources from a remote URL. You may want to make a POST request to a REST API, or you may need to fetch a chunk of static content from another server.

### nodes

React Native apps render a native view tree that represents the UI, similar to how React DOM does on Web (the DOM tree). React Native provides imperative access to this tree via refs, which are returned by all native components (including those rendered by built-in components like View).

- [Nodes from refs](/docs/nodes.md): React Native apps render a native view tree that represents the UI, similar to how React DOM does on Web (the DOM tree). React Native provides imperative access to this tree via refs, which are returned by all native components (including those rendered by built-in components like View).

### optimizing-flatlist-configuration

Terms

- [Optimizing FlatList Configuration](/docs/optimizing-flatlist-configuration.md): Terms

### optimizing-javascript-loading

Parsing and running JavaScript code requires memory and time. Because of this, as your app grows, it's often useful to delay loading code until it's needed for the first time. React Native comes with some standard optimizations that are on by default, and there are techniques you can adopt in your own code to help React load your app more efficiently. There are also some advanced automatic optimizations (with their own tradeoffs) that are suitable for very large apps.

- [Optimizing JavaScript loading](/docs/optimizing-javascript-loading.md): Parsing and running JavaScript code requires memory and time. Because of this, as your app grows, it's often useful to delay loading code until it's needed for the first time. React Native comes with some standard optimizations that are on by default, and there are techniques you can adopt in your own code to help React load your app more efficiently. There are also some advanced automatic optimizations (with their own tradeoffs) that are suitable for very large apps.

### other-debugging-methods

This page covers how to use legacy JavaScript debugging methods. If you are getting started with a new React Native or Expo app, we recommend using React Native DevTools.

- [Other Debugging Methods](/docs/other-debugging-methods.md): This page covers how to use legacy JavaScript debugging methods. If you are getting started with a new React Native or Expo app, we recommend using React Native DevTools.

### panresponder

PanResponder reconciles several touches into a single gesture. It makes single-touch gestures resilient to extra touches, and can be used to recognize basic multi-touch gestures.

- [PanResponder](/docs/panresponder.md): PanResponder reconciles several touches into a single gesture. It makes single-touch gestures resilient to extra touches, and can be used to recognize basic multi-touch gestures.

### performance

A compelling reason to use React Native instead of WebView-based tools is to achieve at least 60 frames per second and provide a native look and feel to your apps. Whenever feasible, we aim for React Native to handle optimizations automatically, allowing you to focus on your app without worrying about performance. However, there are certain areas where we haven't quite reached that level yet, and others where React Native (similar to writing native code directly) cannot determine the best optimization approach for you. In such cases, manual intervention becomes necessary. We strive to deliver buttery-smooth UI performance by default, but there may be instances where that isn't possible.

- [Performance Overview](/docs/performance.md): A compelling reason to use React Native instead of WebView-based tools is to achieve at least 60 frames per second and provide a native look and feel to your apps. Whenever feasible, we aim for React Native to handle optimizations automatically, allowing you to focus on your app without worrying about performance. However, there are certain areas where we haven't quite reached that level yet, and others where React Native (similar to writing native code directly) cannot determine the best optimization approach for you. In such cases, manual intervention becomes necessary. We strive to deliver buttery-smooth UI performance by default, but there may be instances where that isn't possible.

### permissionsandroid

Project with Native Code Required

- [PermissionsAndroid](/docs/permissionsandroid.md): Project with Native Code Required

### pixelratio

PixelRatio gives you access to the device's pixel density and font scale.

- [PixelRatio](/docs/pixelratio.md): PixelRatio gives you access to the device's pixel density and font scale.

### platform

Example

- [Platform](/docs/platform.md): Example

### platformcolor

You can use the PlatformColor function to access native colors on the target platform by supplying the native color‚Äôs corresponding string value. You pass a string to the PlatformColor function and, provided it exists on that platform, it will return the corresponding native color, which you can apply in any part of your application.

- [PlatformColor](/docs/platformcolor.md): You can use the PlatformColor function to access native colors on the target platform by supplying the native color‚Äôs corresponding string value. You pass a string to the PlatformColor function and, provided it exists on that platform, it will return the corresponding native color, which you can apply in any part of your application.

### pressable

Pressable is a Core Component wrapper that can detect various stages of press interactions on any of its defined children.

- [Pressable](/docs/pressable.md): Pressable is a Core Component wrapper that can detect various stages of press interactions on any of its defined children.

### pressevent

PressEvent object is returned in the callback as a result of user press interaction, for example onPress in Button component.

- [PressEvent Object Type](/docs/pressevent.md): PressEvent object is returned in the callback as a result of user press interaction, for example onPress in Button component.

### profiling

Profiling is the process of analyzing an app's performance, resource usage, and behavior to identify potential bottlenecks or inefficiencies. It's worth making use of profiling tools to ensure your app works smoothly across different devices and conditions.

- [Profiling](/docs/profiling.md): Profiling is the process of analyzing an app's performance, resource usage, and behavior to identify potential bottlenecks or inefficiencies. It's worth making use of profiling tools to ensure your app works smoothly across different devices and conditions.

### progressbarandroid

Use one of the community packages instead.

- [üóëÔ∏è ProgressBarAndroid](/docs/progressbarandroid.md): Use one of the community packages instead.

### props

Most components can be customized when they are created, with different parameters. These created parameters are called props, short for properties.

- [Props](/docs/props.md): Most components can be customized when they are created, with different parameters. These created parameters are called props, short for properties.

### publishing-to-app-store

The publishing process is the same as any other native iOS app, with some additional considerations to take into account.

- [Publishing to Apple App Store](/docs/publishing-to-app-store.md): The publishing process is the same as any other native iOS app, with some additional considerations to take into account.

### pushnotificationios

Use one of the community packages instead.

- [üóëÔ∏è PushNotificationIOS](/docs/pushnotificationios.md): Use one of the community packages instead.

### react-native-devtools

React Native DevTools is our modern debugging experience for React Native. Purpose-built from the ground up, it aims to be fundamentally more integrated, correct, and reliable than previous debugging methods.

- [React Native DevTools](/docs/react-native-devtools.md): React Native DevTools is our modern debugging experience for React Native. Purpose-built from the ground up, it aims to be fundamentally more integrated, correct, and reliable than previous debugging methods.

### react-native-gradle-plugin

This guide describes how to configure the React Native Gradle Plugin (often referred as RNGP), when building your React Native application for Android.

- [React Native Gradle Plugin](/docs/react-native-gradle-plugin.md): This guide describes how to configure the React Native Gradle Plugin (often referred as RNGP), when building your React Native application for Android.

### react-node

A React Node is one of the following types:

- [React Node Object Type](/docs/react-node.md): A React Node is one of the following types:

### rect

Rect accepts numeric pixel values to describe how far to extend a rectangular area. These values are added to the original area's size to expand it.

- [Rect Object Type](/docs/rect.md): Rect accepts numeric pixel values to describe how far to extend a rectangular area. These values are added to the original area's size to expand it.

### refreshcontrol

This component is used inside a ScrollView or ListView to add pull to refresh functionality. When the ScrollView is at scrollY: 0, swiping down triggers an onRefresh event.

- [RefreshControl](/docs/refreshcontrol.md): This component is used inside a ScrollView or ListView to add pull to refresh functionality. When the ScrollView is at scrollY: 0, swiping down triggers an onRefresh event.

### releases

New React Native releases are shipped every two months, usually resulting in six (6) new minors per year.

- [Releases Overview](/docs/releases.md): New React Native releases are shipped every two months, usually resulting in six (6) new minors per year.

#### release-levels

React Native provides the community with the ability to adopt individual new features as soon as their design and implementation are nearly complete, even before they are included in a stable release. This approach is known as release levels.

- [Release Levels](/docs/releases/release-levels.md): React Native provides the community with the ability to adopt individual new features as soon as their design and implementation are nearly complete, even before they are included in a stable release. This approach is known as release levels.

#### versioning-policy

This page describes the versioning policy we follow for the react-native package.

- [Versioning Policy](/docs/releases/versioning-policy.md): This page describes the versioning policy we follow for the react-native package.

### roottag

RootTag is an opaque identifier assigned to the native root view of your React Native surface ‚Äî i.e. the ReactRootView or RCTRootView instance for Android or iOS respectively. In short, it is a surface identifier.

- [RootTag](/docs/roottag.md): RootTag is an opaque identifier assigned to the native root view of your React Native surface ‚Äî i.e. the ReactRootView or RCTRootView instance for Android or iOS respectively. In short, it is a surface identifier.

### running-on-device

It's always a good idea to test your app on an actual device before releasing it to your users. This document will guide you through the necessary steps to run your React Native app on a device and to get it ready for production.

- [Running On Device](/docs/running-on-device.md): It's always a good idea to test your app on an actual device before releasing it to your users. This document will guide you through the necessary steps to run your React Native app on a device and to get it ready for production.

### running-on-simulator-ios

Starting the simulator

- [Running On Simulator](/docs/running-on-simulator-ios.md): Starting the simulator

### safeareaview

Use react-native-safe-area-context instead.

- [üóëÔ∏è SafeAreaView](/docs/safeareaview.md): Use react-native-safe-area-context instead.

### scrollview

Component that wraps platform ScrollView while providing integration with touch locking "responder" system.

- [ScrollView](/docs/scrollview.md): Component that wraps platform ScrollView while providing integration with touch locking "responder" system.

### sectionlist

A performant interface for rendering sectioned lists, supporting the most handy features:

- [SectionList](/docs/sectionlist.md): A performant interface for rendering sectioned lists, supporting the most handy features:

### security

Security is often overlooked when building apps. It is true that it is impossible to build software that is completely impenetrable‚Äîwe‚Äôve yet to invent a completely impenetrable lock (bank vaults do, after all, still get broken into). However, the probability of falling victim to a malicious attack or being exposed for a security vulnerability is inversely proportional to the effort you‚Äôre willing to put in to protecting your application against any such eventuality. Although an ordinary padlock is pickable, it is still much harder to get past than a cabinet hook!

- [Security](/docs/security.md): Security is often overlooked when building apps. It is true that it is impossible to build software that is completely impenetrable‚Äîwe‚Äôve yet to invent a completely impenetrable lock (bank vaults do, after all, still get broken into). However, the probability of falling victim to a malicious attack or being exposed for a security vulnerability is inversely proportional to the effort you‚Äôre willing to put in to protecting your application against any such eventuality. Although an ordinary padlock is pickable, it is still much harder to get past than a cabinet hook!

### segmentedcontrolios

Use one of the community packages instead.

- [‚ùå SegmentedControlIOS](/docs/segmentedcontrolios.md): Use one of the community packages instead.

### settings

Settings serves as a wrapper for NSUserDefaults, a persistent key-value store available only on iOS.

- [Settings](/docs/settings.md): Settings serves as a wrapper for NSUserDefaults, a persistent key-value store available only on iOS.

### shadow-props

---

- [Shadow Props](/docs/shadow-props.md): ---

### share

Example

- [Share](/docs/share.md): Example

### signed-apk-android

Android requires that all apps be digitally signed with a certificate before they can be installed. In order to distribute your Android application via Google Play store it needs to be signed with a release key that then needs to be used for all future updates. Since 2017 it is possible for Google Play to manage signing releases automatically thanks to App Signing by Google Play functionality. However, before your application binary is uploaded to Google Play it needs to be signed with an upload key. The Signing Your Applications page on Android Developers documentation describes the topic in detail. This guide covers the process in brief, as well as lists the steps required to package the JavaScript bundle.

- [Publishing to Google Play Store](/docs/signed-apk-android.md): Android requires that all apps be digitally signed with a certificate before they can be installed. In order to distribute your Android application via Google Play store it needs to be signed with a release key that then needs to be used for all future updates. Since 2017 it is possible for Google Play to manage signing releases automatically thanks to App Signing by Google Play functionality. However, before your application binary is uploaded to Google Play it needs to be signed with an upload key. The Signing Your Applications page on Android Developers documentation describes the topic in detail. This guide covers the process in brief, as well as lists the steps required to package the JavaScript bundle.

### state

There are two types of data that control a component: props and state. props are set by the parent and they are fixed throughout the lifetime of a component. For data that is going to change, we have to use state.

- [State](/docs/state.md): There are two types of data that control a component: props and state. props are set by the parent and they are fixed throughout the lifetime of a component. For data that is going to change, we have to use state.

### statusbar

Component to control the app's status bar. The status bar is the zone, typically at the top of the screen, that displays the current time, Wi-Fi and cellular network information, battery level and/or other status icons.

- [StatusBar](/docs/statusbar.md): Component to control the app's status bar. The status bar is the zone, typically at the top of the screen, that displays the current time, Wi-Fi and cellular network information, battery level and/or other status icons.

### statusbarios

Use StatusBar for mutating the status bar.

- [‚ùå StatusBarIOS](/docs/statusbarios.md): Use StatusBar for mutating the status bar.

### strict-typescript-api

The Strict TypeScript API is a preview of our future, stable JavaScript API for React Native.

- [Strict TypeScript API (opt in)](/docs/strict-typescript-api.md): The Strict TypeScript API is a preview of our future, stable JavaScript API for React Native.

### style

With React Native, you style your application using JavaScript. All of the core components accept a prop named style. The style names and values usually match how CSS works on the web, except names are written using camel casing, e.g. backgroundColor rather than background-color.

- [Style](/docs/style.md): With React Native, you style your application using JavaScript. All of the core components accept a prop named style. The style names and values usually match how CSS works on the web, except names are written using camel casing, e.g. backgroundColor rather than background-color.

### stylesheet

A StyleSheet is an abstraction similar to CSS StyleSheets.

- [StyleSheet](/docs/stylesheet.md): A StyleSheet is an abstraction similar to CSS StyleSheets.

### switch

Renders a boolean input.

- [Switch](/docs/switch.md): Renders a boolean input.

### systrace

Systrace is a standard Android marker-based profiling tool (and is installed when you install the Android platform-tools package). Profiled code blocks are surrounded by start/end markers which are then visualized in a colorful chart format. Both the Android SDK and React Native framework provide standard markers that you can visualize.

- [Systrace](/docs/systrace.md): Systrace is a standard Android marker-based profiling tool (and is installed when you install the Android platform-tools package). Profiled code blocks are surrounded by start/end markers which are then visualized in a colorful chart format. Both the Android SDK and React Native framework provide standard markers that you can visualize.

### targetevent

TargetEvent object is returned in the callback as a result of focus change, for example onFocus or onBlur in the TextInput component.

- [TargetEvent Object Type](/docs/targetevent.md): TargetEvent object is returned in the callback as a result of focus change, for example onFocus or onBlur in the TextInput component.

### testing-overview

This guide introduces React Native developers to the key concepts behind testing, how to write good tests, and what kinds of tests you can incorporate into your workflow.

- [Testing](/docs/testing-overview.md): This guide introduces React Native developers to the key concepts behind testing, how to write good tests, and what kinds of tests you can incorporate into your workflow.

### text

A React component for displaying text.

- [Text](/docs/text.md): A React component for displaying text.

### text-nodes

Text nodes represent raw text content on the tree (similar to Text nodes on Web). They are not directly accessible via refs, but can be accessed using methods like childNodes on element refs.

- [Text nodes](/docs/text-nodes.md): Text nodes represent raw text content on the tree (similar to Text nodes on Web). They are not directly accessible via refs, but can be accessed using methods like childNodes on element refs.

### text-style-props

Example

- [Text Style Props](/docs/text-style-props.md): Example

### textinput

A foundational component for inputting text into the app via a keyboard. Props provide configurability for several features, such as auto-correction, auto-capitalization, placeholder text, and different keyboard types, such as a numeric keypad.

- [TextInput](/docs/textinput.md): A foundational component for inputting text into the app via a keyboard. Props provide configurability for several features, such as auto-correction, auto-capitalization, placeholder text, and different keyboard types, such as a numeric keypad.

### the-new-architecture


#### advanced-topics-components

This document contains a set of advanced topics to implement more complex functionalities of Native Components. It is recommended to first read the Codegen section and the guides on Native Components.

- [Advanced Topics on Native Modules Development](/docs/the-new-architecture/advanced-topics-components.md): This document contains a set of advanced topics to implement more complex functionalities of Native Components. It is recommended to first read the Codegen section and the guides on Native Components.

#### advanced-topics-modules

This document contains a set of advanced topics to implement more complex functionalities of Native Modules. It is recommended to first read the Codegen section and the guides on Native Modules.

- [Advanced Topics on Native Modules Development](/docs/the-new-architecture/advanced-topics-modules.md): This document contains a set of advanced topics to implement more complex functionalities of Native Modules. It is recommended to first read the Codegen section and the guides on Native Modules.

#### codegen-cli

Calling Gradle or manually calling a script might be hard to remember and it requires a lot of ceremony.

- [The Codegen CLI](/docs/the-new-architecture/codegen-cli.md): Calling Gradle or manually calling a script might be hard to remember and it requires a lot of ceremony.

#### create-module-library

React Native has a rich ecosystem of libraries to solve common problems. We collect React Native libraries in the reactnative.directory website, and this is a great resource to bookmark for every React Native developer.

- [Create a Library for Your Module](/docs/the-new-architecture/create-module-library.md): React Native has a rich ecosystem of libraries to solve common problems. We collect React Native libraries in the reactnative.directory website, and this is a great resource to bookmark for every React Native developer.

#### custom-cxx-types

This guide assumes that you are familiar with the Pure C++ Turbo Native Modules guide. This will build on top of that guide.

- [Advanced: Custom C++ Types](/docs/the-new-architecture/custom-cxx-types.md): This guide assumes that you are familiar with the Pure C++ Turbo Native Modules guide. This will build on top of that guide.

#### direct-manipulation-new-architecture

It is sometimes necessary to make changes directly to a component without using state/props to trigger a re-render of the entire subtree. When using React in the browser for example, you sometimes need to directly modify a DOM node, and the same is true for views in mobile apps. setNativeProps is the React Native equivalent to setting properties directly on a DOM node.

- [Direct Manipulation](/docs/the-new-architecture/direct-manipulation-new-architecture.md): It is sometimes necessary to make changes directly to a component without using state/props to trigger a re-render of the entire subtree. When using React in the browser for example, you sometimes need to directly modify a DOM node, and the same is true for views in mobile apps. setNativeProps is the React Native equivalent to setting properties directly on a DOM node.

#### fabric-component-native-commands

In the base guide to write a new Native Component, you have explored how to create a new component, how to pass properties from the JS side to the native side, and how to emit events from native side to JS.

- [Invoking native functions on your native component](/docs/the-new-architecture/fabric-component-native-commands.md): In the base guide to write a new Native Component, you have explored how to create a new component, how to pass properties from the JS side to the native side, and how to emit events from native side to JS.

#### layout-measurements

Sometimes, you need to measure the current layout to apply some changes to the overall layout or to make decisions and call some specific logic.

- [Measuring the Layout](/docs/the-new-architecture/layout-measurements.md): Sometimes, you need to measure the current layout to apply some changes to the overall layout or to make decisions and call some specific logic.

#### native-modules-custom-events

In some circustamces, you may want to have a Native Module that listen to some events in the platform layer and then emit them to the JavaScript layer, to let you application react to such native events. In other cases, you might have long running operations that can emits events so that the UI can be updated when those happen.

- [Emitting Events in Native Modules](/docs/the-new-architecture/native-modules-custom-events.md): In some circustamces, you may want to have a Native Module that listen to some events in the platform layer and then emit them to the JavaScript layer, to let you application react to such native events. In other cases, you might have long running operations that can emits events so that the UI can be updated when those happen.

#### native-modules-lifecycle

In React Native, Native Modules are singleton. The Native Module infrastructure lazily creates a Native Module the first time it is accessed and it keeps it around whenever the app requires it. This is a performance optimization that allows us to avoid the overhead of creating Native Modules eagerly, at app start, and it ensure faster startup times.

- [Native Modules Lifecycle](/docs/the-new-architecture/native-modules-lifecycle.md): In React Native, Native Modules are singleton. The Native Module infrastructure lazily creates a Native Module the first time it is accessed and it keeps it around whenever the app requires it. This is a performance optimization that allows us to avoid the overhead of creating Native Modules eagerly, at app start, and it ensure faster startup times.

#### pure-cxx-modules

Writing a module in C++ is the best way to share platform-agnostic code between Android and iOS. With pure C++ modules, you can write your logic only once and reuse it right away from all the platforms, without the need of writing platform-specific code.

- [Cross-Platform Native Modules (C++)](/docs/the-new-architecture/pure-cxx-modules.md): Writing a module in C++ is the best way to share platform-agnostic code between Android and iOS. With pure C++ modules, you can write your logic only once and reuse it right away from all the platforms, without the need of writing platform-specific code.

#### turbo-modules-with-swift

Swift is the official and default language for developing native application on iOS.

- [iOS - Using Swift in Your Native Modules](/docs/the-new-architecture/turbo-modules-with-swift.md): Swift is the official and default language for developing native application on iOS.

#### using-codegen

This guide teaches how to:

- [Using Codegen](/docs/the-new-architecture/using-codegen.md): This guide teaches how to:

#### what-is-codegen

Codegen is a tool to avoid writing a lot of repetitive code. Using Codegen is not mandatory: you can write all the generated code manually. However, Codegen generates scaffolding code that could save you a lot of time.

- [What is Codegen?](/docs/the-new-architecture/what-is-codegen.md): Codegen is a tool to avoid writing a lot of repetitive code. Using Codegen is not mandatory: you can write all the generated code manually. However, Codegen generates scaffolding code that could save you a lot of time.

### timepickerandroid

Use one of the community packages instead.

- [‚ùå TimePickerAndroid](/docs/timepickerandroid.md): Use one of the community packages instead.

### timers

Timers are an important part of an application and React Native implements the browser timers.

- [Timers](/docs/timers.md): Timers are an important part of an application and React Native implements the browser timers.

### toastandroid

React Native's ToastAndroid API exposes the Android platform's ToastAndroid module as a JS module. It provides the method show(message, duration) which takes the following parameters:

- [ToastAndroid](/docs/toastandroid.md): React Native's ToastAndroid API exposes the Android platform's ToastAndroid module as a JS module. It provides the method show(message, duration) which takes the following parameters:

### touchablehighlight

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the Pressable API.

- [TouchableHighlight](/docs/touchablehighlight.md): If you're looking for a more extensive and future-proof way to handle touch-based input, check out the Pressable API.

### touchablenativefeedback

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the Pressable API.

- [TouchableNativeFeedback](/docs/touchablenativefeedback.md): If you're looking for a more extensive and future-proof way to handle touch-based input, check out the Pressable API.

### touchableopacity

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the Pressable API.

- [TouchableOpacity](/docs/touchableopacity.md): If you're looking for a more extensive and future-proof way to handle touch-based input, check out the Pressable API.

### touchablewithoutfeedback

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the Pressable API.

- [TouchableWithoutFeedback](/docs/touchablewithoutfeedback.md): If you're looking for a more extensive and future-proof way to handle touch-based input, check out the Pressable API.

### transforms

Transforms are style properties that will help you modify the appearance and position of your components using 2D or 3D transformations. However, once you apply transforms, the layouts remain the same around the transformed component hence it might overlap with the nearby components. You can apply margin to the transformed component, the nearby components or padding to the container to prevent such overlaps.

- [Transforms](/docs/transforms.md): Transforms are style properties that will help you modify the appearance and position of your components using 2D or 3D transformations. However, once you apply transforms, the layouts remain the same around the transformed component hence it might overlap with the nearby components. You can apply margin to the transformed component, the nearby components or padding to the container to prevent such overlaps.

### turbo-native-modules-android

Now it's time to write some Android platform code to make sure localStorage survives after the application is closed.

- [Turbo Native Modules: Android](/docs/turbo-native-modules-android.md): Now it's time to write some Android platform code to make sure localStorage survives after the application is closed.

### turbo-native-modules-introduction

Your React Native application code may need to interact with native platform APIs that aren't provided by React Native or an existing library. You can write the integration code yourself using a Turbo Native Module. This guide will show you how to write one.

- [Native Modules](/docs/turbo-native-modules-introduction.md): Your React Native application code may need to interact with native platform APIs that aren't provided by React Native or an existing library. You can write the integration code yourself using a Turbo Native Module. This guide will show you how to write one.

### turbo-native-modules-ios

Now it's time to write some iOS platform code to make sure localStorage survives after the application is closed.

- [Turbo Native Modules: iOS](/docs/turbo-native-modules-ios.md): Now it's time to write some iOS platform code to make sure localStorage survives after the application is closed.

### tutorial

React Native is like React, but it uses native components instead of web components as building blocks. So to understand the basic structure of a React Native app, you need to understand some of the basic React concepts, like JSX, components, state, and props. If you already know React, you still need to learn some React Native specific stuff, like the native components. This tutorial is aimed at all audiences, whether you have React experience or not.

- [Learn the Basics](/docs/tutorial.md): React Native is like React, but it uses native components instead of web components as building blocks. So to understand the basic structure of a React Native app, you need to understand some of the basic React concepts, like JSX, components, state, and props. If you already know React, you still need to learn some React Native specific stuff, like the native components. This tutorial is aimed at all audiences, whether you have React experience or not.

### typescript

TypeScript is a language which extends JavaScript by adding type definitions. New React Native projects target TypeScript by default, but also support JavaScript and Flow.

- [Using TypeScript](/docs/typescript.md): TypeScript is a language which extends JavaScript by adding type definitions. New React Native projects target TypeScript by default, but also support JavaScript and Flow.

### upgrading

Upgrading to new versions of React Native will give you access to more APIs, views, developer tools and other goodies. Upgrading requires a small amount of effort, but we try to make it straightforward for you.

- [Upgrading to new versions](/docs/upgrading.md): Upgrading to new versions of React Native will give you access to more APIs, views, developer tools and other goodies. Upgrading requires a small amount of effort, but we try to make it straightforward for you.

### usecolorscheme

The useColorScheme React hook provides and subscribes to color scheme updates from the Appearance module. The return value indicates the current user preferred color scheme. The value may be updated later, either through direct user action (e.g. theme selection in device settings) or on a schedule (e.g. light and dark themes that follow the day/night cycle).

- [useColorScheme](/docs/usecolorscheme.md): The useColorScheme React hook provides and subscribes to color scheme updates from the Appearance module. The return value indicates the current user preferred color scheme. The value may be updated later, either through direct user action (e.g. theme selection in device settings) or on a schedule (e.g. light and dark themes that follow the day/night cycle).

### usewindowdimensions

useWindowDimensions automatically updates all of its values when screen size or font scale changes. You can get your application window's width and height like so:

- [useWindowDimensions](/docs/usewindowdimensions.md): useWindowDimensions automatically updates all of its values when screen size or font scale changes. You can get your application window's width and height like so:

### vibration

Vibrates the device.

- [Vibration](/docs/vibration.md): Vibrates the device.

### view

The most fundamental component for building a UI, View is a container that supports layout with flexbox, style, some touch handling, and accessibility controls. View maps directly to the native view equivalent on whatever platform React Native is running on, whether that is a UIView, `, android.view`, etc.

- [View](/docs/view.md): The most fundamental component for building a UI, View is a container that supports layout with flexbox, style, some touch handling, and accessibility controls. View maps directly to the native view equivalent on whatever platform React Native is running on, whether that is a UIView, `, android.view`, etc.

### view-style-props

Example

- [View Style Props](/docs/view-style-props.md): Example

### viewtoken

ViewToken object is returned as one of the properties in the onViewableItemsChanged callback (for example, in the FlatList component). It is exported by ViewabilityHelper.js.

- [ViewToken Object Type](/docs/viewtoken.md): ViewToken object is returned as one of the properties in the onViewableItemsChanged callback (for example, in the FlatList component). It is exported by ViewabilityHelper.js.

### virtualizedlist

Base implementation for the more convenient ` and  components, which are also better documented. In general, this should only really be used if you need more flexibility than FlatList` provides, e.g. for use with immutable data instead of plain arrays.

- [VirtualizedList](/docs/virtualizedlist.md): Base implementation for the more convenient ` and  components, which are also better documented. In general, this should only really be used if you need more flexibility than FlatList` provides, e.g. for use with immutable data instead of plain arrays.

### virtualview

VirtualView is a core component that behaves similar to View.

- [VirtualView üß™](/docs/virtualview.md): VirtualView is a core component that behaves similar to View.

## architecture


### bundled-hermes

This page gives an overview of how Hermes and React Native are built.

- [Bundled Hermes](/architecture/bundled-hermes.md): This page gives an overview of how Hermes and React Native are built.

### fabric-renderer

Fabric is React Native's new rendering system, a conceptual evolution of the legacy render system. The core principles are to unify more render logic in C++, improve interoperability with host platforms, and to unlock new capabilities for React Native. Development began in 2018 and in 2021, React Native in the Facebook app is backed by the new renderer.

- [Fabric](/architecture/fabric-renderer.md): Fabric is React Native's new rendering system, a conceptual evolution of the legacy render system. The core principles are to unify more render logic in C++, improve interoperability with host platforms, and to unlock new capabilities for React Native. Development began in 2018 and in 2021, React Native in the Facebook app is backed by the new renderer.

### glossary

Dev Menu

- [Glossary](/architecture/glossary.md): Dev Menu

### landing-page

Since 2018, the React Native team has been redesigning the core internals of React Native to enable developers to create higher-quality experiences. As of 2024, this version of React Native has been proven at scale and powers production apps by Meta.

- [About the New Architecture](/architecture/landing-page.md): Since 2018, the React Native team has been redesigning the core internals of React Native to enable developers to create higher-quality experiences. As of 2024, this version of React Native has been proven at scale and powers production apps by Meta.

### overview

Welcome to the Architecture Overview! If you're getting started with React Native, please refer to Guides section. Continue reading to learn how internals of React Native work!

- [Architecture Overview](/architecture/overview.md): Welcome to the Architecture Overview! If you're getting started with React Native, please refer to Guides section. Continue reading to learn how internals of React Native work!

### render-pipeline

The React Native renderer goes through a sequence of work to render React logic to a host platform. This sequence of work is called the render pipeline and occurs for initial renders and updates to the UI state. This document goes over the render pipeline and how it differs in those scenarios.

- [Render, Commit, and Mount](/architecture/render-pipeline.md): The React Native renderer goes through a sequence of work to render React logic to a host platform. This sequence of work is called the render pipeline and occurs for initial renders and updates to the UI state. This document goes over the render pipeline and how it differs in those scenarios.

### threading-model

The React Native renderer distributes the work of the render pipeline across multiple threads.

- [Threading Model](/architecture/threading-model.md): The React Native renderer distributes the work of the render pipeline across multiple threads.

### view-flattening

View Flattening is an optimization by the React Native renderer to avoid deep layout trees.

- [View Flattening](/architecture/view-flattening.md): View Flattening is an optimization by the React Native renderer to avoid deep layout trees.

### xplat-implementation

The React Native renderer utilizes a core render implementation to be shared across platforms

- [Cross Platform Implementation](/architecture/xplat-implementation.md): The React Native renderer utilizes a core render implementation to be shared across platforms

## community


### communities

The React Native Community

- [Communities](/community/communities.md): The React Native Community

### overview

The React Native Community

- [Overview](/community/overview.md): The React Native Community

### staying-updated

The React Native Community

- [Staying up to date](/community/staying-updated.md): The React Native Community

### support

Where to get help

- [Where to get help](/community/support.md): Where to get help

## showcase

Thousands of apps are using React Native, check out these apps!

- [Who is using React Native?](/showcase.md): Thousands of apps are using React Native, check out these apps!

## contributing


### bots-reference

pull-bot

- [Bots Reference](/contributing/bots-reference.md): pull-bot

### changelogs-in-pull-requests

The changelog entry in your pull request serves as a sort of "tl;dr do they affect Android? are these breaking changes? is something new being added?

- [Changelogs in Pull Requests](/contributing/changelogs-in-pull-requests.md): The changelog entry in your pull request serves as a sort of "tl;dr do they affect Android? are these breaking changes? is something new being added?

### contribution-license-agreement

You must sign a Contribution License Agreement (CLA) before your pull request can be merged. This a one-time requirement for Meta projects in GitHub. You can read more about Contributor License Agreements (CLA) on Wikipedia.

- [Contribution License Agreement](/contributing/contribution-license-agreement.md): You must sign a Contribution License Agreement (CLA) before your pull request can be merged. This a one-time requirement for Meta projects in GitHub. You can read more about Contributor License Agreements (CLA) on Wikipedia.

### how-to-build-from-source

You will need to build React Native from source if you want to work on a new feature/bug fix, try out the latest features which are not released yet, or maintain your own fork with patches that cannot be merged to the core.

- [How to Build from Source](/contributing/how-to-build-from-source.md): You will need to build React Native from source if you want to work on a new feature/bug fix, try out the latest features which are not released yet, or maintain your own fork with patches that cannot be merged to the core.

### how-to-contribute-code

Thank you for your interest in contributing to React Native! From commenting on and triaging issues, to reviewing and sending PRs, all contributions are welcome. In this document, we'll cover the steps to contributing code to React Native.

- [How to Contribute Code](/contributing/how-to-contribute-code.md): Thank you for your interest in contributing to React Native! From commenting on and triaging issues, to reviewing and sending PRs, all contributions are welcome. In this document, we'll cover the steps to contributing code to React Native.

### how-to-open-a-pull-request

These instructions provide the step-by-step process to set up your machine to make contributions to the core React Native repository, and create your first pull request.

- [How to Open a Pull Request](/contributing/how-to-open-a-pull-request.md): These instructions provide the step-by-step process to set up your machine to make contributions to the core React Native repository, and create your first pull request.

### how-to-report-a-bug

Reporting a bug for React Native is one of the best way to start contributing to the project. We use GitHub issues as the main channel for handling new bug reports.

- [How to Report a Bug](/contributing/how-to-report-a-bug.md): Reporting a bug for React Native is one of the best way to start contributing to the project. We use GitHub issues as the main channel for handling new bug reports.

### how-to-run-and-write-tests

Running Tests

- [How to Run and Write Tests](/contributing/how-to-run-and-write-tests.md): Running Tests

### labeling-github-issues

Most of our labels have a prefix that provides a hint of their purpose.

- [Labeling GitHub Issues](/contributing/labeling-github-issues.md): Most of our labels have a prefix that provides a hint of their purpose.

### managing-pull-requests

Reviewing a pull request can take a considerable amount of time. In some cases, the review might require more time to perform than it took someone to write and submit their changes! It's therefore necessary to do some preliminary work to ensure each pull request is in a good state to be reviewed.

- [Managing Pull Requests](/contributing/managing-pull-requests.md): Reviewing a pull request can take a considerable amount of time. In some cases, the review might require more time to perform than it took someone to write and submit their changes! It's therefore necessary to do some preliminary work to ensure each pull request is in a good state to be reviewed.

### overview

How to contribute to React Native

- [Contributing Overview](/contributing/overview.md): How to contribute to React Native

### triaging-github-issues

Start out by looking at issues that need triage, as identified by the "Needs: Triage" label.

- [Triaging GitHub Issues](/contributing/triaging-github-issues.md): Start out by looking at issues that need triage, as identified by the "Needs: Triage" label.

## versions

- [React Native versions](/versions.md)

## blog

Blog

- [Blog ¬∑ React Native](/blog.md): Blog

### 2023


#### 01

- [First-class Support for TypeScript](/blog/2023/01/03/typescript-first.md): With the release of 0.71, React Native is investing in the TypeScript experience with the following changes:
- [React Native 0.71: TypeScript by Default, Flexbox Gap, and more...](/blog/2023/01/12/version-071.md): Today we‚Äôre releasing React Native version 0.71! This is a feature-packed release including:
- [React Native 0.71-RC0 Android outage postmortem](/blog/2023/01/27/71rc1-android-outage-postmortem.md): Now that 0.71 is available, we want to share some key information about the incident that broke Android builds for all React Native versions while releasing the first 0.71 release candidate for React Native & Expo Android builds on November 4th, 2022.

#### 06

- [React Native 0.72 - Symlink Support, Better Errors, and more](/blog/2023/06/21/0.72-metro-package-exports-symlinks.md): Today we‚Äôre releasing 0.72!
- [Package Exports Support in React Native](/blog/2023/06/21/package-exports-support.md): With the release of React Native 0.72, Metro ‚Äî our JavaScript build tool ‚Äî now includes beta support for the package.json "exports" field. When enabled, it adds the following functionality:

#### 12

- [React Native 0.73 - Debugging Improvements, Stable Symlink Support, and more](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md): Today we're releasing React Native 0.73! This release adds improvements to debugging with Hermes, stable symlink support, Android 14 support, and new experimental features. We are also deprecating legacy debugging features, and are releasing the next pillar of the New Architecture: Bridgeless Mode!

### 2024


#### 04

- [React Native 0.74 - Yoga 3.0, Bridgeless New Architecture, and more](/blog/2024/04/22/release-0.74.md): Today we're releasing React Native 0.74! This release adds Yoga 3.0, Bridgeless by default under the New Architecture, batched onLayout updates (New Architecture), and Yarn 3 as the default package manager for new projects.

#### 06

- [Use a framework to build React Native apps](/blog/2024/06/25/use-a-framework-to-build-react-native-apps.md): At React Conf, we updated our guidance on the best tool to get started building React Native apps: a React Native framework - a toolbox with all the necessary APIs to let you build production-ready apps.

#### 08

- [React Native 0.75 - Support for Percentage Values in Layout, New Architecture Stabilization, Template & init Updates, and more](/blog/2024/08/12/release-0.75.md): Today we are excited to release React Native 0.75!

#### 10

- [React Native 0.76 - New Architecture by default, React Native DevTools, and more](/blog/2024/10/23/release-0.76-new-architecture.md): Today we are excited to release React Native 0.76!
- [New Architecture is here](/blog/2024/10/23/the-new-architecture-is-here.md): React Native 0.76 with the New Architecture by default is now available on npm!

### 2025


#### 01

- [React Native 0.77 - New Styling Features, Android‚Äôs 16KB page support, Swift Template](/blog/2025/01/21/version-0.77.md): Today we are excited to release React Native 0.77!

#### 02

- [React Native Core Contributor Summit 2024 Recap](/blog/2025/02/03/react-native-core-contributor-summit-2024.md): Every year, the core contributors in the React Native Community get together with the React Native team to collaboratively shape the direction of this project.
- [React Native 0.78 - React 19 and more](/blog/2025/02/19/react-native-0.78.md): Today we are excited to release React Native 0.78!

#### 04

- [React Native 0.79 - Faster tooling and much more](/blog/2025/04/08/react-native-0.79.md): Today we are excited to release React Native 0.79!

#### 06

- [Moving Towards a Stable JavaScript API (New Changes in 0.80)](/blog/2025/06/12/moving-towards-a-stable-javascript-api.md): In React Native 0.80, we're introducing two significant changes to React Native's JavaScript API ‚Äî the deprecation of deep imports, and our new Strict TypeScript API. These are part of an ongoing effort to accurately define our API and offer dependable type safety to users and frameworks.
- [React Native 0.80 - React 19.1, JS API Changes, Freezing Legacy Arch and much more](/blog/2025/06/12/react-native-0.80.md): Today we are excited to release React Native 0.80!

#### 08

- [React Native 0.81 - Android 16 support, faster iOS builds, and more](/blog/2025/08/12/react-native-0.81.md): Today we are excited to release React Native 0.81!

#### 10

- [React Native 0.82 - A New Era](/blog/2025/10/08/react-native-0.82.md): Today we're excited to release React Native 0.82: the first React Native that runs entirely on the New Architecture.

#### 12

- [React Native 0.83 - React 19.2, New DevTools features, no breaking changes](/blog/2025/12/10/react-native-0.83.md): Today we are excited to release React Native 0.83!


---

# Full Documentation Content

## [React Native 0.83 - React 19.2, New DevTools features, no breaking changes](/blog/2025/12/10/react-native-0.83.md)

December 10, 2025 ¬∑

<!-- -->

12 min read

![Alex Hunt](https://github.com/huntie.png)

Alex Hunt

Software Engineer @ Meta

[](https://x.com/huntie "X")[](https://github.com/huntie "GitHub")

![Riccardo Cipolleschi](https://github.com/cipolleschi.png)

Riccardo Cipolleschi

Software Engineer @ Meta

[](https://x.com/CipolleschiR "X")[](https://github.com/cipolleschi "GitHub")

![Gabriel Donadel Dall'Agnol](https://github.com/gabrieldonadel.png)

Gabriel Donadel Dall'Agnol

Software Engineer @ Expo

[](https://x.com/donadeldev "X")[](https://github.com/gabrieldonadel "GitHub")

![Alan Hughes](https://github.com/alanjhughes.png)

Alan Hughes

Software Engineer @ Expo

[](https://github.com/alanjhughes "GitHub")

Today we are excited to release React Native 0.83!

This release includes React 19.2, significant new features for React Native DevTools, and support for the Web Performance and Intersection Observer APIs (Canary). This is also the first React Native release with no user facing breaking changes.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [React 19.2](/blog/2025/12/10/react-native-0.83.md#react-192)
* [New DevTools features](/blog/2025/12/10/react-native-0.83.md#new-devtools-features)
* [Intersection Observers (Canary)](/blog/2025/12/10/react-native-0.83.md#intersection-observers-canary)
* [Web Performance APIs as stable](/blog/2025/12/10/react-native-0.83.md#web-performance-apis-as-stable)

**Tags:**

* [announcement](/blog/tags/announcement)
* [release](/blog/tags/release)

[**Read more**](/blog/2025/12/10/react-native-0.83.md)


---

# First-class Support for TypeScript

January 3, 2023 ¬∑

<!-- -->

6 min read

![Luna Wei](https://github.com/lunaleaps.png)

Luna Wei

Software Engineer @ Meta

[](https://x.com/lunaleaps "X")[](https://github.com/lunaleaps "GitHub")

![Nick Gerleman](https://github.com/NickGerleman.png)

Nick Gerleman

Software Engineer @ Meta

[](https://github.com/NickGerleman "GitHub")

With the release of 0.71, React Native is investing in the TypeScript experience with the following changes:

* [New app template is TypeScript by default](/blog/2023/01/03/typescript-first.md#new-app-template-is-typescript-by-default)
* [TypeScript declarations shipped with React Native](/blog/2023/01/03/typescript-first.md#declarations-shipped-with-react-native)
* [React Native documentation is TypeScript First](/blog/2023/01/03/typescript-first.md#documentation-is-typescript-first)

In this post we‚Äôll cover what these changes mean for you as a TypeScript or Flow user.

## New App Template is TypeScript By Default[‚Äã](#new-app-template-is-typescript-by-default "Direct link to New App Template is TypeScript By Default")

Starting with 0.71, when you create a new React Native app via the React Native CLI you'll get a TypeScript app by default!

```
npx react-native init My71App --version 0.71.0
```

![Screenshot of an iPhone simulator running a new app generated by React Native CLI. Alongside the simulator is a screenshot of Visual Studio Code editor opened to \&quot;App.tsx\&quot; to illustrate it is running a TypeScript file.](/assets/images/typescript-first-new-app-bde99d698e8a3a0733e8b0b455392f74.png)

The starting point of a newly generated app will be `App.tsx` instead of `App.js` ‚Äì fully TypeScript typed. The new project is already set up with a `tsconfig.json` so out of the box your IDE will help you write typed code right away!

## Declarations Shipped with React Native[‚Äã](#declarations-shipped-with-react-native "Direct link to Declarations Shipped with React Native")

0.71 is the first release with built-in TypeScript (TS) declarations.

Prior, TypeScript declarations for React Native were provided by [`@types/react-native`](https://www.npmjs.com/package/@types/react-native) hosted in the [DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped) repository. The decision to co-locate TypeScript types with React Native source was for improved correctness and maintenance.

`@types/react-native` only provides types for stable releases. This means if you ever wanted to develop with a pre-release version of React Native in TypeScript, you‚Äôd have to use types from an older release which may be inaccurate. Releasing `@types/react-native` is also error-prone. The releases lag React Native releases, and the process involves manually inspecting for type changes made to React Native‚Äôs public API and updating the TS declaration to match.

With TS types co-located with React Native source, there is more visibility and ownership of TS types. Our team is actively working on tools to maintain alignment between Flow and TS.

This change also removes a dependency for React Native users to manage. When upgrading to 0.71 or above, you can remove `@types/react-native` as a dependency. [Refer to the new app template on how to set up TypeScript support.](https://github.com/facebook/react-native/blob/main/template/tsconfig.json)

We plan to deprecate `@types/react-native` for versions 0.73 and onward. Concretely this means:

* `@types/react-native` tracking React Native versions 0.71 and 0.72 will be released. They will be identical to the types in React Native on the relevant release branches.
* For React Native 0.73 and onward, TS types will only be available from React Native.

### How to Migrate[‚Äã](#how-to-migrate "Direct link to How to Migrate")

Please migrate to the new co-located types at your earliest convenience. Here are more details on migrating based on your needs.

#### App Maintainer[‚Äã](#app-maintainer "Direct link to App Maintainer")

Once you upgrade to React Native >= 0.71, you can remove the `@types/react-native` from your `devDependency`.

note

If you have warnings because a library you use references `@types/react-native` as a `peerDependency`, file an issue or open a PR for that library to use [optional peerDependencies](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#peerdependenciesmeta) and ignore the warning for now.

#### Library Maintainer[‚Äã](#library-maintainer "Direct link to Library Maintainer")

Libraries that target versions of React Native below 0.71 may use a `peerDependency` of `@types/react-native` to typecheck against the apps version of typings. This dependency should be marked as optional in [`peerDependenciesMeta`](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#peerdependenciesmeta) so that the typings are not required for users without TypeScript or for 0.71 users where typings are built-in.

#### Maintainer of TypeScript declarations that depend on `@types/react-native`[‚Äã](#maintainer-of-typescript-declarations-that-depend-on-typesreact-native "Direct link to maintainer-of-typescript-declarations-that-depend-on-typesreact-native")

Check out the [breaking changes introduced with 0.71](https://github.com/facebook/react-native/blob/main/CHANGELOG.md) to see if you‚Äôre ready to migrate.

### What if I use Flow?[‚Äã](#what-if-i-use-flow "Direct link to What if I use Flow?")

Flow users can continue to typecheck applications targeting 0.71+ but configuration logic for it is no longer included out-of-the box in the template.

Flow users have previously upgraded React Native‚Äôs Flow types by merging in the `.flowconfig` from the new app template and manually updating `flow-bin`. The new app template no longer has a `.flowconfig`, but [one is still present in the React Native repository](https://github.com/facebook/react-native/blob/main/.flowconfig) that can be used as a basis for your app.

If you need to start a new React Native app in Flow, you can reference the [new app template from 0.70](https://github.com/facebook/react-native/tree/0.70-stable/template).

### What if I find a bug in the TypeScript declaration?[‚Äã](#what-if-i-find-a-bug-in-the-typescript-declaration "Direct link to What if I find a bug in the TypeScript declaration?")

Regardless of whether you‚Äôre using built-in TS types or `@types/react-native`, if you find a bug please submit a PR to both [React Native](https://github.com/facebook/react-native) and [DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped) repositories. If you don‚Äôt know how to fix it, please file a GitHub issue in the React Native repository and mention [@lunaleaps](https://github.com/lunaleaps) on the issue.

## Documentation is TypeScript First[‚Äã](#documentation-is-typescript-first "Direct link to Documentation is TypeScript First")

To ensure a consistent TypeScript experience, we have made several updates to the React Native documentation to reflect TypeScript as the new default language.

Code examples now allow inline TypeScript and over 170 interactive code examples have been updated to pass linting, formatting, and type-checking in the new template. Most examples are valid as both TypeScript and JavaScript. Where they are incompatible, you can view the example in either language.

If you spot a mistake or you have an improvement, remember that the website is also open source and we would love to see your PRs!

## Thank you to the React Native TypeScript community\![‚Äã](#thank-you-to-the-react-native-typescript-community "Direct link to Thank you to the React Native TypeScript community!")

In closing, we want to recognize all the work done over the years by the community to ensure that TypeScript is usable by React Native developers.

We want to thank all the [contributors](https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react-native/index.d.ts#L3) that have been maintaining `@types/react-native` since [2015](https://github.com/DefinitelyTyped/DefinitelyTyped/commit/efce0c25ec532a4651859f10eda49e97a5716a42)! We see the effort and care you all have put into making sure React Native users have the best experience.

Thank you to [@acoates](https://github.com/acoates), [@eps1lon](https://github.com/eps1lon), [@kelset](https://github.com/kelset), [@tido64](https://github.com/tido64), [@Titozzz](https://github.com/Titozzz), and [@ZihanChen-MSFT](https://github.com/ZihanChen-MSFT) for your help consulting, questioning, communicating and reviewing changes to move the TypeScript types to React Native.

Similarly, we want to thank the [maintainers of `react-native-template-typescript`](https://github.com/react-native-community/react-native-template-typescript/graphs/contributors) for supporting the TypeScript experience for new app development in React Native since day one.

We look forward to collaborating more directly in the React Native repository and continue improving the React Native developer experience!

**Tags:**

* [typescript](/blog/tags/typescript)
* [engineering](/blog/tags/engineering)


---

# React Native 0.71: TypeScript by Default, Flexbox Gap, and more...

January 12, 2023 ¬∑

<!-- -->

13 min read

![Matt Carroll](https://github.com/mattcarrollcode.png)

Matt Carroll

Developer Advocate @ Meta

[](https://github.com/mattcarrollcode "GitHub")

![Nick Gerleman](https://github.com/NickGerleman.png)

Nick Gerleman

Software Engineer @ Meta

[](https://github.com/NickGerleman "GitHub")

![Nicola Corti](https://github.com/cortinico.png)

Nicola Corti

Software Engineer @ Meta

[](https://x.com/cortinico "X")[](https://github.com/cortinico "GitHub")[](https://bsky.app/profile/cortini.co "Bluesky")

![Lorenzo Sciandra](https://github.com/kelset.png)

Lorenzo Sciandra

Senior Software Engineer @ Microsoft

[](https://x.com/kelset "X")[](https://github.com/kelset "GitHub")

Today we‚Äôre releasing React Native version 0.71! This is a feature-packed release including:

* [TypeScript by default](/blog/2023/01/12/version-071.md#typescript-by-default)
* [Simplifying layouts with Flexbox Gap](/blog/2023/01/12/version-071.md#simplifying-layouts-with-flexbox-gap)
* [Web-inspired props for accessibility, styles, and events](/blog/2023/01/12/version-071.md#web-inspired-props-for-accessibility-styles-and-events)
* [Restoring PropTypes](/blog/2023/01/12/version-071.md#restoring-proptypes)
* [Developer Experience Improvements](/blog/2023/01/12/version-071.md#developer-experience-improvements)
* [New Architecture Updates](/blog/2023/01/12/version-071.md#new-architecture)

In this post we‚Äôll cover some of the highlights of 0.71.

info

For a full list of changes, check out [CHANGELOG.md](https://github.com/facebook/react-native/blob/main/CHANGELOG.md#v071).

## TypeScript by default[‚Äã](#typescript-by-default "Direct link to TypeScript by default")

In this release, we‚Äôre investing in the TypeScript experience of React Native.

Starting with 0.71, when you create a new React Native app via the React Native CLI you'll get a TypeScript app by default. The new project is already set up with a `tsconfig.json` so out of the box your IDE will help you write typed code right away.

We‚Äôre also offering built-in, more accurate TypeScript declarations directly from the `react-native` package. This means you won‚Äôt need `@types/react-native` any longer, and the types will be updated in lockstep with React Native releases.

Finally, our documentation has been updated to feature TypeScript for all examples.

note

After upgrading to React Native 0.71, we recommend removing `@types/react-native` from your package.json `devDependencies`.

For more details on this change, including migration steps and how this affects Flow users, check out our previous post [First-class Support for TypeScript](https://reactnative.dev/blog/2023/01/03/typescript-first).

## Simplifying layouts with Flexbox gap[‚Äã](#simplifying-layouts-with-flexbox-gap "Direct link to Simplifying layouts with Flexbox gap")

With React Native you can flexibly layout components on different screen sizes using Flexbox. Browsers have supported the Flexbox properties [gap](https://developer.mozilla.org/en-US/docs/Web/CSS/gap), [rowGap](https://developer.mozilla.org/en-US/docs/Web/CSS/row-gap), and [columnGap](https://developer.mozilla.org/en-US/docs/Web/CSS/column-gap), which allow you to specify the amount of space between all items in a Flexbox.

These properties have been long requested in React Native, and 0.71 adds initial support for gaps defined using pixel values. In future versions, we will add support for more values, such as percentages.

To see why this is useful, imagine trying to build a responsive layout with variably sized cards, 10px apart from each other, hugging the edges of the parent container. Trying to accomplish this layout with child margins can be tricky.

The following shows a layout where we start by giving each child `margin: 10` style:

![Two diagrams. On the left it shows a skeleton of an app with three boxes that have margin around them cause the boxes to have margin around all sides. On the right, the same diagram is shown highlighted to demonstrate the margin on all sides.](/assets/images/FlexboxGapBefore-df4400a35538a4cc6118d5eaf6ffeb1c.png)

Margins are applied uniformly to the edges of all children and don‚Äôt collapse under Flexbox, giving us spacing at the exterior of the cards, and double the space on the interior compared to what we wanted. We can get around this by applying non-uniform margins, using negative margins on the parent, halving our intended spacing, etc, but it can be made much easier.

With flex gap, this layout can be achieved by setting `gap: 10` on the container for a 10 pixel gap between the interior of the cards:

![Two diagrams. On the left it shows a skeleton of an app with three boxes that have margin only on the inner sides and not the outer sides of the boxes due to the Flexbox gap property. On the right, the same diagram is shown highlighted to demonstrate the margin only on the inner sides.](/assets/images/FlexboxGapAfter-be4a3ee8b621e11a32f9096e72ac2a65.png)

For more information on Flexbox gaps, see [this blogpost from CSS Tricks](https://css-tricks.com/minding-the-gap/#aa-flexbox-gaps).

## Web-inspired props for accessibility, styles, and events[‚Äã](#web-inspired-props-for-accessibility-styles-and-events "Direct link to Web-inspired props for accessibility, styles, and events")

This release includes a number of new props inspired by web standards to align React Native‚Äôs APIs across many platforms. These new props are purely additive so there are no expected migrations or change of behavior for equivalent accessibility, behavior, or style props.

For any new prop alias introduced, if there is an existing prop with a different name and both are specified, the new alias prop value will take precedence. For example, this release adds a `src` prop alias for `source` on the Image component to align with the `src` prop on web. If both `src` and `source` are provided, the new `src` prop will be used.

note

For more background on aligning React Native to web standards, check out this [proposal](https://github.com/necolas/discussions-and-proposals/blob/reduce-fragmentation/proposals/0000-reduce-fragmentation.md) and [related discussion](https://github.com/react-native-community/discussions-and-proposals/pull/496).

#### Accessibility[‚Äã](#accessibility "Direct link to Accessibility")

We introduced ARIA props as alias to existing React Native accessibility props.

These props now exist on all core components of React Native:`aria-label`, `aria-labelledby`,`aria-modal`, `id`, `aria-busy`, `aria-checked`, `aria-disabled`, `aria-expanded`, `aria-selected`, `aria-valuemax`, `aria-valuemin`, `aria-valuenow`, and `aria-valuetext`.

We also introduced equivalent web behavior for: `aria-hidden`, `aria-live`, `role`, and `tabIndex`.

See this [issue](https://github.com/facebook/react-native/issues/34424) for more details.

#### Component-Specific Behavior[‚Äã](#component-specific-behavior "Direct link to Component-Specific Behavior")

There were also props introduced to align prop names with equivalent DOM prop names for core components.

* **Image**: `alt`, `tintColor`, `crossOrigin`, `height`, `referrerPolicy`, `src`, `srcSet`, and `width`.
* **TextInput**: `autoComplete`, `enterKeyHint`, `inputMode`, `readOnly`, and `rows`.

See this [issue](https://github.com/facebook/react-native/issues/34424) for more details.

#### Styles[‚Äã](#styles "Direct link to Styles")

To align with certain CSS styles, there have been feature extensions for the following styles:

* [`aspectRatio`](https://reactnative.dev/docs/layout-props#aspectratio) now supports string values
* [`fontVariant`](https://reactnative.dev/docs/text-style-props#fontvariant) now supports space-separated string values
* [`fontWeight`](https://reactnative.dev/docs/text-style-props#fontWeight) now supports number values
* [`transform`](https://developer.mozilla.org/en-US/docs/Web/CSS/transform) now supports string values

The following aliases have been added to shadow existing React Native styles:

* [`objectFit`](https://reactnative.dev/docs/image#objectfit)
* [`pointerEvents`](https://reactnative.dev/docs/view-style-props#pointerevents)
* [`userSelect`](https://developer.mozilla.org/en-US/docs/Web/CSS/user-select)
* [`verticalAlign`](https://reactnative.dev/docs/text-style-props#verticalalign-android)

See this [issue](https://github.com/facebook/react-native/issues/34425) for more details.

#### Events[‚Äã](#events "Direct link to Events")

Finally, we also added an opt-in implementation of [PointerEvents](https://w3c.github.io/pointerevents)

Once enabled, the following handlers on `View` will support hover:

* `onPointerOver`, `onPointerOut`
* `onPointerEnter`, `onPointerLeave`

These events are also implemented in `Pressability` for new opt-in support for hover.

To enable these features, set the following flags to true:

```
import ReactNativeFeatureFlags from 'react-native/Libraries/ReactNative/ReactNativeFeatureFlags';

// enable the JS-side of the w3c PointerEvent implementation
ReactNativeFeatureFlags.shouldEmitW3CPointerEvents = () => true;

// enable hover events in Pressibility to be backed by the PointerEvent implementation.
// shouldEmitW3CPointerEvents should also be true
ReactNativeFeatureFlags.shouldPressibilityUseW3CPointerEventsForHover =
  () => true;
```

note

You‚Äôll also need to enable React feature flags on your [Android](https://reactnative.dev/blog/2022/12/13/pointer-events-in-react-native#android-specific) and [iOS](https://reactnative.dev/blog/2022/12/13/pointer-events-in-react-native#ios-specific) native setup.

Check out our dedicated [PointerEvents post](https://reactnative.dev/blog/2022/12/13/pointer-events-in-react-native) to learn more.

## Restoring PropTypes[‚Äã](#restoring-proptypes "Direct link to Restoring PropTypes")

React Native‚Äôs prop types, such as `ViewPropTypes` and `Text.propTypes`, were deprecated in 0.66 and accessing them would output deprecation warnings. When they were removed in 0.68, many developers began experiencing errors when upgrading to the latest version of React Native.

After some investigation, we realized that a couple issues prevented the community from taking action on the deprecation warnings. First, the deprecation warning was not always actionable which caused people to ignore them ([issue one](https://github.com/facebook/react-native/pull/34650), [issue two](https://github.com/react-native-community/cli/pull/1699)). Second, the deprecation warnings were being [incorrectly filtered](https://github.com/facebook/react-native/commit/fa2842d) by `LogBox.ignoreLogs`. Both of these have now been fixed, but we want to give people more time to upgrade the deprecated call sites.

So in this release we are adding back React Native‚Äôs propTypes so that it is easier for people to upgrade and migrate their code to avoid using them. The `deprecated-react-native-prop-types` package has also been updated for all of the props in 0.71. In the future, we plan to proceed with the deprecation and remove prop types once again. We expect that when we revisit the removal, the community will experience significantly fewer issues.

caution

As part of this change, we are also removing the console filtering from `LogBox.ignoreLog`. This means logs that you have previously filtered with `Logbox.ignoreLog` will start appearing again in the console when you upgrade.

This is expected, because it allows logs such as deprecation warnings to be found and fixed.

## Developer Experience Improvements[‚Äã](#developer-experience-improvements "Direct link to Developer Experience Improvements")

### React DevTools[‚Äã](#react-devtools "Direct link to React DevTools")

In this release, we've brought two popular React DevTools features on web to React Native.

"Click to inspect" is the option in the top left corner of React Dev Tools that allows you to click on an item in the app to inspect it in Dev Tools, similar to the Chrome element inspector.

Component highlighting will highlight the element you select in DevTools in the app so you can see which React components line up with which on-screen elements.

Here are both features in action:

![Video of the behavior described above in action. On the left is a React Native app running in an iPhone simulator. On the right is the React DevTools. In both workflows, clicking on an item in the DevTools highlights the corresponding components in the app.](/assets/images/ElementInspecting-88d15de53d0f0256fbb90d949567f703.gif)

### Hermes[‚Äã](#hermes "Direct link to Hermes")

In React Native 0.70, we made [Hermes the default engine for React Native](https://reactnative.dev/blog/2022/07/08/hermes-as-the-default).

In React Native 0.71, we‚Äôre upgrading Hermes with a few notable improvements:

* **Improve source maps**: By loading source maps over the network with Metro we‚Äôve restored the ability to use source maps in recent versions of Chrome Dev Tools outside of Flipper.
* **Improve `JSON.parse` performance**: This version includes a performance optimization that improves the performance of `JSON.parse` up to 30%.
* **Add support for `.at()`**: Hermes now [supports](https://github.com/facebook/hermes/issues/823)`.at()` for `String`, `TypedArray`, and `Array`.

For a full list of changes see [the Road to 71 issue](https://github.com/reactwg/react-native-releases/discussions/41#discussioncomment-4089256).

### New Architecture[‚Äã](#new-architecture "Direct link to New Architecture")

This release brings many improvements to the experimental New Architecture experience based on user feedback and reports we collected so far.

* **Reduced build times**: The new distribution model uses Maven Central, which allows us to greatly reduce the build time on Android, resolves many build problems on Windows, and provides a more seamless experience with the New Architecture. [Read more here](https://github.com/reactwg/react-native-new-architecture/discussions/105).
* **Write less C++ code**: You can now enable the New Architecture without having to add any C++ code in your app and the CLI app template has been cleaned of all the C++ code and the CMake files. [Read more here](https://github.com/reactwg/react-native-new-architecture/discussions/101).
* **Better encapsulation of iOS app setup**: On iOS, we followed a similar approach to Android and encapsulated most of the logic to set up the New Architecture in the `RCTAppDelegate` class, which will simplify upgrades in the future with fewer manual breaking changes.
* **Better dependency management on iOS**: For library maintainers, we've added a new `install_module_dependencies` function to call inside your package `podspec` which will install all the required dependencies for the New Architecture.
* **Bug fixes and better IDE support**: we fixed several bugs and issues (like [better IDE support for Android](https://github.com/reactwg/react-native-new-architecture/discussions/102)) that were reported by our users in the [New Architecture Working Group](https://github.com/reactwg/react-native-new-architecture/discussions).

As a reminder, the New Architecture is still an experimental API experience as we iterate on changes to make adoption easier. Please try out the new simplified steps in the [New Architecture documentation](https://reactnative.dev/docs/new-architecture-intro) and post any feedback you have to the [New Architecture Working Group](https://github.com/reactwg/react-native-new-architecture/discussions).

### Other Notable Fixes[‚Äã](#other-notable-fixes "Direct link to Other Notable Fixes")

* **Better stack frame collapsing**: We've [updated the list of internal frames](https://github.com/react-native-community/cli/pull/1699) for React Native so LogBox will show your code more often rather than internal React Native frames, helping you to debug issues faster.
* **Build time improvements:** We migrated assets to Maven Central for prefabs to improve build times (both iOS and Android) for Hermes in both the current and new architectures.
* **Android template improvements**: The Android template was heavily cleaned and now fully relies on the React Native Gradle Plugin. You can find the configuration instructions directly inside the template or in the [new dedicated page on the website](https://reactnative.dev/docs/react-native-gradle-plugin).

## Breaking changes[‚Äã](#breaking-changes "Direct link to Breaking changes")

* **Changes to Console Logging:** `LogBox.ignoreLog` no longer filters console logs. This means you will start seeing logs in the console that you have silenced in LogBox. See [this comment](https://github.com/facebook/react-native/pull/34476#issuecomment-1240667794) for more details.
* **Removed AsyncStorage and MaskedViewIOS**: These components have been deprecated since version [0.59](https://github.com/facebook/react-native/blob/main/CHANGELOG.md#deprecated-8), so it‚Äôs time we remove them entirely. For alternatives, please check [React Native Directory](https://reactnative.directory/) for community packages that cover those use cases.
* **JSCRuntime moved to react-jsc:** react-jsi is now split into react-jsc and react-jsi. If you use JSCRuntime, you will need to add react-jsc as a dependency ([facebook/react-native@6b129d8](https://github.com/facebook/react-native/commit/6b129d81ed8cab301775d2a04971e255df9290de)).

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

This release is possible thanks to the work of 70+ contributors adding over 1000 commits.

We especially want to thank those who contributed to these major React Native projects:

* **Flexbox Gap Support**: [@intergalacticspacehighway](https://github.com/intergalacticspacehighway) and [@jacobp100](https://github.com/jacobp100).
* **Web-inspired props**: [@gabrieldonadel](https://github.com/gabrieldonadel) [@dakshbhardwaj](https://github.com/dakshbhardwaj) [@dhruvtailor7](https://github.com/dhruvtailor7) [@ankit-tailor](https://github.com/ankit-tailor) [@madhav23bansal](https://github.com/madhav23bansal).
* **Codegen Improvements**: [@AntoineDoubovetzky](https://github.com/AntoineDoubovetzky), [@MaeIg](https://github.com/MaeIg), [@Marcoo09](https://github.com/Marcoo09), [@Naturalclar](https://github.com/Naturalclar), [@Pranav-yadav](https://github.com/Pranav-yadav), [@ZihanChen-MSFT](https://github.com/ZihanChen-MSFT), [@dakshbhardwaj](https://github.com/dakshbhardwaj), [@dhruvtailor7](https://github.com/dhruvtailor7), [@gabrieldonadel](https://github.com/gabrieldonadel), [@harshsiri110](https://github.com/harshsiri110), [@ken0nek](https://github.com/ken0nek), [@kylemacabasco](https://github.com/kylemacabasco), [@matiassalles99](https://github.com/matiassalles99), [@mdaj06](https://github.com/mdaj06), [@mohitcharkha](https://github.com/mohitcharkha), [@tarunrajput](https://github.com/tarunrajput), [@vinayharwani13](https://github.com/vinayharwani13), [@youedd](https://github.com/youedd), [@byCedric](https://github.com/byCedric).

Finally, thanks to [@cortinico](https://github.com/cortinico), [@kelset](https://github.com/kelset), [@dmytrorykun](https://github.com/dmytrorykun), [@cipolleschi](https://github.com/cipolleschi), and [@titozzz](https://github.com/titozzz) for cutting this release!

## Try out 0.71.0 now\![‚Äã](#try-out-0710-now "Direct link to Try out 0.71.0 now!")

For React Native CLI users, see the [upgrade documentation](https://reactnative.dev/docs/upgrading) for how to update your existing project, or create a new project with `npx react-native init MyProject`.

React Native version 0.71 will be supported in Expo SDK version 48.

info

0.71 is now the latest stable version of React Native and 0.68.x versions are now unsupported. For more information see [React Native‚Äôs support policy](https://github.com/reactwg/react-native-releases#releases-support-policy).

**Tags:**

* [announcement](/blog/tags/announcement)
* [release](/blog/tags/release)


---

# React Native 0.71-RC0 Android outage postmortem

January 27, 2023 ¬∑

<!-- -->

8 min read

![Nicola Corti](https://github.com/cortinico.png)

Nicola Corti

Software Engineer @ Meta

[](https://x.com/cortinico "X")[](https://github.com/cortinico "GitHub")[](https://bsky.app/profile/cortini.co "Bluesky")

![Lorenzo Sciandra](https://github.com/kelset.png)

Lorenzo Sciandra

Senior Software Engineer @ Microsoft

[](https://x.com/kelset "X")[](https://github.com/kelset "GitHub")

Now that 0.71 is [available](/blog/2023/01/12/version-071.md), we want to share some key information about the incident that broke Android builds for all React Native versions while releasing the first 0.71 release candidate for React Native & Expo Android builds on November 4th, 2022.

The contributors who helped tackle the incident recently attended a post-mortem meeting to discuss in detail what happened, what we all learned from it, and what actions we are going to take to avoid similar outages in the future.

## What happened[‚Äã](#what-happened "Direct link to What happened")

On November 4th 2022, we published the version `0.71.0-rc0` of React Native, the first release candidate for 0.71, on several public repositories.

A major change made in this release candidate helped to improve build times by publishing artifacts to Maven Central, instead of building them from source. More details on how this was done are available in [RFC#508](https://github.com/react-native-community/discussions-and-proposals/pull/508) and [related discussions](https://github.com/reactwg/react-native-new-architecture/discussions/105).

Unfortunately, because of the way we scaffolded new projects from the template, this caused build failures for any Android user on older versions because they would start downloading new artifacts for `0.71.0-rc0` instead of the version they were using in their project (like `0.68.0`).

## Why this happened[‚Äã](#why-this-happened "Direct link to Why this happened")

The React Native template provides a `build.gradle` file to build Android apps. This file contains a dependency on the React Native Android library as follows: `implementation("com.facebook.react:react-native:+")`.

Importantly, the `+` part of this dependency (a [Gradle Dynamic version](https://docs.gradle.org/current/userguide/dynamic_versions.html)) tells Gradle to pick the highest available version of React Native. Using Gradle Dynamic versions is considered an antipattern as it exposes users to less-reproducible builds.

We were aware of the issues dynamic versions could cause, so in `0.71` we cleaned up the new app template and removed all the `+` dependencies. However, users on older versions of React Native were still using a `+` version.

This caused builds with React Native versions before `0.71.0-rc.0` to query all the repositories for the highest available versions of the React Native. Because the newly pushed 0.71.0-rc.0 on Maven Central became the highest version available, builds with React Native versions before 0.71.0-rc.0 started using artifacts from 0.71.0-rc.0. The React Native version mismatch between the local build (e.g `0.68.0`) and artifacts from Maven Central (`0.71.0-rc.0`) caused these builds to fail.

Further technical details on this event area are also available [on this GitHub issue](https://github.com/facebook/react-native/issues/35210).

## How we mitigated & resolved[‚Äã](#how-we-mitigated--resolved "Direct link to How we mitigated & resolved")

As soon as we identified the issue on November 4th, the community found and shared a manual workaround to fix the issue which would pin React Native to a specific, correcting the mistake.

Then, over the weekend of November 5th and 6th, the release crew shipped patch releases for all previous React Native versions down to 0.63 which automatically applied the patch, so that users could update to a fixed version of React Native.

At the same time, we [reached out to Sonatype](https://issues.sonatype.org/browse/OSSRH-86006) to ask for the removal of the offending artifacts.

The issue was fully resolved on November 8th when the artifacts were fully removed from Maven Central.

## Timeline of events[‚Äã](#timeline-of-events "Direct link to Timeline of events")

*This section contains a brief timeline of the events. All times are GMT/UTC +0*

* Nov 4th - 5:06 PM: [0.71-RC0 is released](https://github.com/facebook/react-native/releases/tag/v0.71.0-rc.0).
* Nov 4th - 6:20 PM: [First report of build issue is opened](https://github.com/facebook/react-native/issues/35204).
* Nov 4th - 7:45 PM: [Issue is identified by community](https://github.com/facebook/react-native/issues/35204#issuecomment-1304090948).
* Nov 4th - 9:39 PM: [Workarounds are communicated, Expo ](https://github.com/facebook/react-native/issues/35204#issuecomment-1304281740)deploys fix to all their users.
* Nov 5th - 03:04 AM: [New issue is open to communicate status and workarounds](https://github.com/facebook/react-native/issues/35210).
* Nov 6th - 04:11 PM: [Ticket to SonaType](https://issues.sonatype.org/browse/OSSRH-86006?focusedCommentId=1216303\&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-1216303) asking for removal of the artifacts is open.
* Nov 6th - 04:40 PM: [First tweet](https://twitter.com/reactnative/status/1589296764678705155) from @reactnative with ack + link to issue.
* Nov 6th - 07:05 PM: Decision to patch React Native versions back to 0.63.
* Nov 7th - 12:47 AM: Last patched release is released: [0.63.5](https://github.com/facebook/react-native/releases/tag/v0.63.5).
* Nov 8th - 08:04 PM: Artifacts on Maven Central are [fully removed](https://issues.sonatype.org/browse/OSSRH-86006?focusedCommentId=1216303\&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-1216303).
* Nov 10th - 11:51 AM: Issue about the [incident is closed](https://github.com/facebook/react-native/issues/35210#issuecomment-1310170361).

## Lessons Learned[‚Äã](#lessons-learned "Direct link to Lessons Learned")

While in many ways the conditions to trigger this incident has existed since React Native 0.12.0, we want to ensure that the foundations on which we develop and release React Native moving forward are stronger. Here are some of the lessons learned and the actionables on how we‚Äôll adapt our processes and infrastructure to respond faster and stronger in the future.

### Incident response strategy[‚Äã](#incident-response-strategy "Direct link to Incident response strategy")

This incident highlighted gaps in our incident response strategy for open-source issues related to React Native.

The community quickly found a workaround in less than 2 hours. Due to our lack of visibility on the scope of the impact of this issue, as well as the complexity required to fix it for old versions, we relied on impacted people discovering the workaround on the GitHub issue.

It took us 48 hours to recognize the larger scope of this issue and that we couldn‚Äôt rely on everyone finding the GitHub issue. We needed to prioritize more complex active mitigations to automatically fix people‚Äôs projects.

We will be revisiting our processes for when to rely on developer-applied-workarounds vs fixes that we can deploy automatically. We will also take a look at our options for getting a better live pulse on the health of our ecosystem.

### Release Support Policy[‚Äã](#release-support-policy "Direct link to Release Support Policy")

As visualized in the [rn-versions tool](https://rn-versions.github.io/), to cover more than 90% of the developer base of React Native at the time of the incident, we had to release patches all the way down to version 0.63.

We believe this is caused by the React Native upgrade experience which has historically been full of frictions. We are currently looking into ways to improve the upgrade experience to make it smoother and faster to mitigate this fragmentation of the ecosystem.

Releasing a newer version of React Native should never have an impact on users on older versions, and we want to apologize for the disruption we caused to your workflow.

Similarly, we want to also stress the importance of being up to date with the latest version of your dependencies and React Native to benefit from the improvements and the safeguards we introduced. This incident happened during a time in which an official [release support policy](https://github.com/reactwg/react-native-releases#releases-support-policy) was getting defined and wasn‚Äôt broadcasted or enforced yet.

In the future, we will communicate our support policy over our communication channels and we will consider [deprecating older versions of React Native on npm](https://docs.npmjs.com/deprecating-and-undeprecating-packages-or-package-versions).

### Improved testing and best practices for 3rd party libraries[‚Äã](#improved-testing-and-best-practices-for-3rd-party-libraries "Direct link to Improved testing and best practices for 3rd party libraries")

This incident highlighted the importance of having better release testing and better guidance to 3rd party libraries.

On the testing side, releasing versions down to `0.63.x` proved to be challenging due to the lack of automation and testing we now have in place for stable releases. We recognize the importance of our release and testing infrastructure and we‚Äôre going to invest further in it in the future.

Specifically, we are now encouraging and supporting 3rd party library testing as part of the [release of react native](https://github.com/reactwg/react-native-releases/discussions/41). We‚Äôre also adding some new channels and roles in the [Core Contributors Discord Server](https://github.com/facebook/react-native/blob/main/ECOSYSTEM.md#core-contributors).

On top of this, we started a closer collaboration with Callstack, the maintainers of [create-react-native-library](https://github.com/callstack/react-native-builder-bob/tree/main/packages/create-react-native-library), to improve the library template and make sure it follows all the necessary best practices to integrate with React Native projects. The newer version of `create-react-native-library` is now fully compatible with 0.71 projects while still offering backward compatibility.

## Conclusions[‚Äã](#conclusions "Direct link to Conclusions")

We want to apologize for the disruption this caused to the workflows of developers all around the world. As highlighted above, we have already started taking action to strengthen our foundation - and more work is due.

We hope that sharing these insights will help you all better understand this incident, and that you can leverage our learnings to apply better practices in your own tools and projects.

In closing, we want once again to thank Sonatype for helping us remove the artifacts, our community, and the release crew that worked tirelessly to address this as soon as possible.

**Tags:**

* [engineering](/blog/tags/engineering)


---

# React Native 0.72 - Symlink Support, Better Errors, and more

June 21, 2023 ¬∑

<!-- -->

8 min read

![Lorenzo Sciandra](https://github.com/kelset.png)

Lorenzo Sciandra

Senior Software Engineer @ Microsoft

[](https://x.com/kelset "X")[](https://github.com/kelset "GitHub")

![Marek Fo≈ôt](https://github.com/fortmarek.png)

Marek Fo≈ôt

Software Engineer @ Shopify

[](https://x.com/marekfort "X")[](https://github.com/fortmarek "GitHub")

![Riccardo Cipolleschi](https://github.com/cipolleschi.png)

Riccardo Cipolleschi

Software Engineer @ Meta

[](https://x.com/CipolleschiR "X")[](https://github.com/cipolleschi "GitHub")

![Luna Wei](https://github.com/lunaleaps.png)

Luna Wei

Software Engineer @ Meta

[](https://x.com/lunaleaps "X")[](https://github.com/lunaleaps "GitHub")

Today we‚Äôre releasing 0.72!

This release adds highly requested features for Metro, better error handling, and other developer experience improvements. So much of this work was prioritized from your feedback on the [2022 community survey](https://github.com/react-native-community/discussions-and-proposals/discussions/528) -- thank you to all those that participated!

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [New Metro Features](/blog/2023/06/21/0.72-metro-package-exports-symlinks.md#new-metro-features)
* [Developer Experience Improvements](/blog/2023/06/21/0.72-metro-package-exports-symlinks.md#developer-experience-improvements)
* [Moving New Architecture Updates](/blog/2023/06/21/0.72-metro-package-exports-symlinks.md#moving-new-architecture-updates)

### Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

* [Deprecated Component Removals](/blog/2023/06/21/0.72-metro-package-exports-symlinks.md#deprecated-component-removals)
* [Package Renames](/blog/2023/06/21/0.72-metro-package-exports-symlinks.md#package-renames)

## Highlights[‚Äã](#highlights-1 "Direct link to Highlights")

### New Metro Features[‚Äã](#new-metro-features "Direct link to New Metro Features")

#### Symlink Support (Beta)[‚Äã](#symlink-support-beta "Direct link to Symlink Support (Beta)")

Symlink support continues to be one of the top-requested features in Metro and, in React Native 0.72, we are happy to announce beta support for it.

Symlink support enables React Native to work transparently with monorepo setups and pnpm, removing the need for workarounds. See [Enabling Beta Features](/blog/2023/06/21/0.72-metro-package-exports-symlinks.md#enabling-beta-features) to use in your app.

It is currently in beta to collect feedback on developer experience given varying workflows, see more details [here](https://twitter.com/robjhogan/status/1672293540632641554). We plan to default enable symlinks in 0.73.

#### Package Exports Support (Beta)[‚Äã](#package-exports-support-beta "Direct link to Package Exports Support (Beta)")

[Package Exports](https://nodejs.org/api/packages.html#exports) is the modern alternative to the package.json `"main"` field and provides new capabilities for npm packages to define their public API and target React Native.

By enabling Package Exports support in your Metro config, your app will be compatible with the wider JavaScript ecosystem, including via the new ["react-native" community condition](https://nodejs.org/docs/latest-v19.x/api/packages.html#community-conditions-definitions). See [Enabling Beta Features](/blog/2023/06/21/0.72-metro-package-exports-symlinks.md#enabling-beta-features) to use in your app.

tip

See [Package Exports Support in React Native](/blog/2023/06/21/package-exports-support.md) to learn more about this feature and our plans for stable rollout.

#### Enabling Beta Features[‚Äã](#enabling-beta-features "Direct link to Enabling Beta Features")

To enable these features in your project, update your app‚Äôs `metro.config.js` file and set either the `resolver.unstable_enableSymlinks` or `resolver.unstable_enablePackageExports` options.

```
const config = {
  // ...
  resolver: {
    unstable_enableSymlinks: true,
    unstable_enablePackageExports: true,
  },
};
```

#### New `metro.config.js` Setup[‚Äã](#new-metroconfigjs-setup "Direct link to new-metroconfigjs-setup")

In React Native 0.72, we‚Äôve changed the config loading setup for Metro in React Native CLI. Please update your project‚Äôs `metro.config.js` file to match the [template‚Äôs version](https://github.com/facebook/react-native/blob/76a42c292de838a0dd537935db792eaa81410b9b/packages/react-native/template/metro.config.js).

info

Please update your config file to the following [format](https://github.com/facebook/react-native/blob/76a42c292de838a0dd537935db792eaa81410b9b/packages/react-native/template/metro.config.js). You can also follow the [upgrade-helper](https://react-native-community.github.io/upgrade-helper/?from=0.71.8\&to=0.72.0).

These format changes to `metro.config.js` will become required in 0.73. For 0.72, we will log a warning if not updated.

This moves control over extending the base React Native Metro config into your project, and we‚Äôve cleaned up the leftover defaults. In addition, this means that standalone Metro CLI commands, such as `metro get-dependencies`, will now work.

### Developer Experience Improvements[‚Äã](#developer-experience-improvements "Direct link to Developer Experience Improvements")

#### No more redboxes with invalid style properties[‚Äã](#no-more-redboxes-with-invalid-style-properties "Direct link to No more redboxes with invalid style properties")

Prior to this release, providing an invalid style property in StyleSheet would result in a redbox. This is a high signal error that disrupts the developer workflow for a relatively low-risk error.

In 0.72, we‚Äôve relaxed this expectation to fail silently, like providing an invalid CSS property in the browser, and have updated types such that some errors may be caught in build-time vs. run-time.

#### Better error readability for Hermes[‚Äã](#better-error-readability-for-hermes "Direct link to Better error readability for Hermes")

Hermes has added a better error message when invoking an undefined callable.

```
    var x = undefined; x();
    // Before: undefined is not a function
    // After: x is not a function (it is undefined)
```

In addition, LogBox stack traces now filter out internal Hermes bytecode frames that are not relevant to app users.

#### Improved error output of the React Native CLI[‚Äã](#improved-error-output-of-the-react-native-cli "Direct link to Improved error output of the React Native CLI")

0.72 ships with React Native CLI v11 which includes improvements to reduce duplication, clarify wording, reduce verbose stack traces, and add deep links to relevant docs in the following commands `init`, `run-android`, and `run-ios`.

You can find other improvements in the [React Native CLI changelogs](https://github.com/react-native-community/cli/releases).

#### Faster Compilation and JSON Parsing in Hermes[‚Äã](#faster-compilation-and-json-parsing-in-hermes "Direct link to Faster Compilation and JSON Parsing in Hermes")

Hermes has improved the compilation time of large object literals. For example, in one reported issue, [#852](https://github.com/facebook/hermes/issues/852), a user had an entire dataset written out as a large object literal. By improving the de-duplication algorithm Hermes uses, compilation sped up by 97% ([221c](https://github.com/facebook/hermes/commit/221ce21a209e2e32a3eaaa2d9e28ca81842fad20)). These improvements will benefit build times for apps that bundle many objects.

Multiple optimizations ([de9c](https://github.com/facebook/hermes/commit/de9cff2aa41fc1f297b568848143347823d73659), [6e2d](https://github.com/facebook/hermes/commit/6e2dd652c8d90c5d59737a81f66a259efffdcd00)) to JSON parsing have also landed, benefiting apps using libraries like redux-persist that rely heavily on JSON manipulation.

#### More ECMAScript Support in Hermes[‚Äã](#more-ecmascript-support-in-hermes "Direct link to More ECMAScript Support in Hermes")

Support for the following specifications in Hermes has landed in React Native 0.72:

* `prototype.at` support for [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/at), [TypedArray](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/at) and [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/at). See [#823](https://github.com/facebook/hermes/issues/823) ([ebe2](https://github.com/facebook/hermes/commit/ebe2915ac386a6b73dec39c2af4ac7063e68cd99)).
* Implement [well-formed JSON.stringify](https://github.com/tc39/proposal-well-formed-stringify) ([d41d](https://github.com/facebook/hermes/commit/d41decf244aa814b1e58827a9de982f3b71667de)) to prevent ill-formed Unicode strings
* Implement [AggregateError](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError) ([9b25](https://github.com/facebook/hermes/commit/9b25a2530eb515f6c4fbd397ae290b6c97c049b2)) that represents several errors wrapped in a single error. Useful for multiple errors like from [`Promise.any()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/any) when all promises passed to it reject.

For users on JSC, these features are already available.

### Moving New Architecture Updates[‚Äã](#moving-new-architecture-updates "Direct link to Moving New Architecture Updates")

The New Architecture is currently experimental. To keep updates focused to their target audience, we are moving New Architecture updates in 0.72, and future releases, to the dedicated [working group](https://github.com/reactwg/react-native-new-architecture/discussions). This change will also allow for more frequent updates, such as work that ships in our nightlies.

You can read the 0.72 updates for the New Architecture [here](https://github.com/reactwg/react-native-new-architecture/discussions/136). Subscribe to the working group GitHub notifications to stay informed on our progress on the New Architecture.

## Breaking Changes[‚Äã](#breaking-changes-1 "Direct link to Breaking Changes")

### Deprecated Component Removals[‚Äã](#deprecated-component-removals "Direct link to Deprecated Component Removals")

The following packages have been removed from React Native in 0.72. Please migrate to the recommended community package:

* [Slider](https://reactnative.dev/docs/0.72/slider) is superseded by [@react-native-community/slider](https://github.com/callstack/react-native-slider/tree/main/package)
* [DatePickerIOS](https://reactnative.dev/docs/0.72/datepickerios) is superseded by [@react-native-community/datetimepicker](https://github.com/react-native-datetimepicker/datetimepicker)
* [ProgressViewIOS](https://reactnative.dev/docs/0.72/progressviewios) is superseded by [@react-native-community/progress-view](https://github.com/react-native-progress-view/progress-view)

### Package Renames[‚Äã](#package-renames "Direct link to Package Renames")

All packages published from the [`react-native`](https://github.com/facebook/react-native) core repository now live under `react-native/packages`, and are published under the [@react-native npm scope](https://www.npmjs.com/search?q=%40react-native) to ensure clear ownership.

There are no changes to the [react-native](https://www.npmjs.com/package/react-native) package.

| Old Package Name                        | New Package Name                 |
| --------------------------------------- | -------------------------------- |
| `@react-native-community/eslint-config` | `@react-native/eslint-config`    |
| `@react-native-community/eslint-plugin` | `@react-native/eslint-plugin`    |
| `@react-native/polyfills`               | `@react-native/js-polyfills`     |
| `@react-native/normalize-color`         | `@react-native/normalize-colors` |
| `@react-native/assets`                  | `@react-native/assets-registry`  |
| `react-native-codegen`                  | `@react-native/codegen`          |
| `react-native-gradle-plugin`            | `@react-native/gradle-plugin`    |

This change will not affect you if you have no direct dependency on a renamed package. Otherwise, when upgrading to React Native 0.72, update any renamed dependency to its \~0.72 version.

You can read the motivation that led to these changes [in the dedicated RFC](https://github.com/react-native-community/discussions-and-proposals/pull/480).

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

A lot of this release came from the direct feedback from the community. From reports on [noisy redboxes](https://twitter.com/baconbrix/status/1623039650775371792), [bugs with Package Exports](https://github.com/facebook/metro/issues/965), [benchmarks for the New Architecture](https://github.com/reactwg/react-native-new-architecture/discussions/85) ‚Äî all of it is valuable to hear and we appreciate the time it takes to share feedback.

0.72 contains over [1100 commits](https://github.com/facebook/react-native/compare/v0.71.8...v0.72.0) from 66 contributors. Thank you for all your hard work!

## Upgrade to 0.72[‚Äã](#upgrade-to-072 "Direct link to Upgrade to 0.72")

Check out the list of needed changes in the [upgrade-helper](https://react-native-community.github.io/upgrade-helper/), or read the [upgrade documentation](/docs/upgrading.md) for how to update your existing project, or create a new project with `npx react-native@latest init MyProject`.

If you use Expo, React Native version 0.72 will be supported in the Expo SDK 49 release.

info

0.72 is now the latest stable version of React Native and 0.69.x version moves now to unsupported. For more information see [React Native‚Äôs support policy](https://github.com/reactwg/react-native-releases#releases-support-policy).

**Tags:**

* [announcement](/blog/tags/announcement)
* [release](/blog/tags/release)


---

# Package Exports Support in React Native

June 21, 2023 ¬∑

<!-- -->

10 min read

![Alex Hunt](https://github.com/huntie.png)

Alex Hunt

Software Engineer @ Meta

[](https://x.com/huntie "X")[](https://github.com/huntie "GitHub")

With the release of [React Native 0.72](/blog/2023/06/21/0.72-metro-package-exports-symlinks.md), Metro ‚Äî our JavaScript build tool ‚Äî now includes beta support for the `package.json` [`"exports"`](https://nodejs.org/docs/latest-v18.x/api/packages.html#exports) field. When [enabled](/blog/2023/06/21/package-exports-support.md#enabling-package-exports-beta), it adds the following functionality:

* [React Native projects will work with more npm packages out-of-the-box](/blog/2023/06/21/package-exports-support.md#for-app-developers)
* [New capabilities for packages to define their API and target React Native](/blog/2023/06/21/package-exports-support.md#for-package-maintainers-preview)
* [Some breaking changes to package resolution (in edge cases)](/blog/2023/06/21/package-exports-support.md#breaking-changes)

In this post we'll cover how Package Exports works, and what these changes mean for you as a React Native app developer or package maintainer.

## What is Package Exports?[‚Äã](#what-is-package-exports "Direct link to What is Package Exports?")

Introduced in Node.js 12.7.0, Package Exports is the modern approach for npm packages to specify **entry points** ‚Äî the mapping of package subpaths which can be externally imported and which file(s) they should resolve to.

Supporting `"exports"` improves how React Native projects will work with the wider JavaScript ecosystem ([used in \~16.6k packages today](https://github.com/search?q=path%3A%2A%2A%2Fpackage.json+%22%5C%22access%5C%22%3A+%5C%22public%5C%22%22+%22%5C%22exports%5C%22%22+NOT+path%3A%2A%2A%2Fnode_modules+NOT+is%3Afork+NOT+is%3Aarchived\&type=code)), and gives package authors a standardised feature set for multiplatform packages to target React Native.

[`"exports"`](https://nodejs.org/docs/latest-v19.x/api/packages.html#exports) can be used alongside, or instead of, [`"main"`](https://nodejs.org/docs/latest-v19.x/api/packages.html#main) in a `package.json` file.

```
{
  "name": "@storybook/addon-actions",
  "main": "./dist/index.js",
  ...
  "exports": {
    ".": {
      "node": "./dist/index.js",
      "import": "./dist/index.mjs",
      "default": "./dist/index.js"
    },
    "./preview": {
      "import": "./dist/preview.mjs",
      "default": "./dist/preview.js"
    },
    ...
    "./package.json": "./package.json"
  }
}
```

Here's some app code consuming the above package by importing different subpaths of `@storybook/addon-actions`.

```
import {action} from '@storybook/addon-actions';
// -> '@storybook/addon-actions/dist/index.js'

import {action} from '@storybook/addon-actions/preview';
// -> '@storybook/addon-actions/dist/preview.js'

import helpers from '@storybook/addon-actions/src/preset/addArgsHelpers';
// Inaccessible - not listed in "exports"!
```

The headlining features of Package Exports are:

* **Package encapsulation**: Only subpaths defined in `"exports"` can be imported from outside the package ‚Äî giving packages control over their public API.
* **Subpath aliases**: Packages can define custom subpaths which map to a different file location (including via [subpath patterns](https://nodejs.org/docs/latest-v19.x/api/packages.html#subpath-patterns)) ‚Äî allowing relocation of files while preserving the public API.
* **Conditional exports**: A subpath may resolve to a different underlying file depending on environment. For example, to target `"node"`, `"browser"`, or `"react-native"` runtimes ‚Äî replacing the [`"browser"` field spec](https://github.com/defunctzombie/package-browser-field-spec).

note

The full capabilities for `"exports"` are detailed in the [Node.js Package Entry Points spec](https://nodejs.org/docs/latest-v19.x/api/packages.html#package-entry-points).

Since these features overlap with existing React Native concepts (such as [platform-specific extensions](/docs/platform-specific-code.md)), and since `"exports"` had been live in the npm ecosystem for some time, we reached out to the React Native community to make sure our implementation would meet developers' needs ([PR](https://github.com/react-native-community/discussions-and-proposals/pull/534), [final RFC](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0534-metro-package-exports-support.md)).

## For app developers[‚Äã](#for-app-developers "Direct link to For app developers")

Package Exports can be enabled today, in beta.

* Imports against packages that depend on Package Exports features (such as [**Firebase**](https://www.npmjs.com/package/firebase) and [**Storybook**](https://www.npmjs.com/search?q=%40storybook)) should now work as designed.
* React Native for Web projects using Metro will now be able to use the `"browser"` conditional export, removing the need for workarounds.

Enabling Package Exports brings a few [edge-case breaking changes](#breaking-changes) that may affect specific projects, and which you can [test today](#validating-changes-in-your-project).

**In a future React Native release, Package Exports will be enabled by default**. In a chicken-and-egg situation, React Native apps were previously a holdout for some packages to migrate to `"exports"` ‚Äî or used our `"react-native"` root field escape hatch. Supporting these features in Metro will allow the ecosystem to move forward.

### Enabling Package Exports (beta)[‚Äã](#enabling-package-exports-beta "Direct link to Enabling Package Exports (beta)")

Package Exports can be enabled in your app's [**metro.config.js**](https://github.com/facebook/react-native/blob/0.72-stable/packages/react-native/template/metro.config.js) file via the [`resolver.unstable_enablePackageExports`](https://metrobundler.dev/docs/configuration/#unstable_enablepackageexports-experimental) option.

```
const config = {
  // ...
  resolver: {
    unstable_enablePackageExports: true,
  },
};
```

Metro exposes two further resolver options which configure how conditional exports behave:

* [`unstable_conditionNames`](https://metrobundler.dev/docs/configuration/#unstable_conditionnames-experimental) ‚Äî The set of [condition names](https://nodejs.org/docs/latest-v19.x/api/packages.html#community-conditions-definitions) to assert when resolving conditional exports. By default, we match `['require', 'import', 'react-native']`.
* [`unstable_conditionsByPlatform`](https://metrobundler.dev/docs/configuration/#unstable_conditionsbyplatform-experimental) ‚Äî The additional condition names to assert when resolving for a given platform target. By default, this matches `'browser'` when the platform is `'web'`.

tip

**Remember to use the React Native [Jest preset](https://github.com/facebook/react-native/blob/main/template/jest.config.js#L2)!** Jest includes support for Package Exports by default. In tests, you can override which `customExportConditions` are resolved using the [`testEnvironmentOptions`](https://jestjs.io/docs/configuration#testenvironmentoptions-object) option.

**If you are using TypeScript**, resolution behaviour can be matched by setting [`moduleResolution: 'bundler'`](https://www.typescriptlang.org/tsconfig#moduleResolution) and [`resolvePackageJsonImports: false`](https://www.typescriptlang.org/tsconfig#resolvePackageJsonExports) within your project's `tsconfig.json`.

#### Validating changes in your project[‚Äã](#validating-changes-in-your-project "Direct link to Validating changes in your project")

For existing projects, we recommend that early adopters follow these steps to see if resolution changes occur after enabling `unstable_enablePackageExports`. This is a one-time process. It's likely that there will be no changes at all, but we'd like developers to opt in with certainty.

üí° Validating changes in your project

note

If you are not using Yarn, substitute `yarn` for `npx` (or the relevant tool used in your project).

1. Get all resolved dependencies (before changes):

   ```
   # Replace index.js with your entry file if needed, such as App.js
   yarn metro get-dependencies index.js --platform android --output before.txt
   ```

   * **Expo CLI**: Run `npx expo customize metro.config.js` if your project doesn't have a `metro.config.js` file yet.
   * For full coverage, substitute `--platform android` for the other platforms in use by your app (e.g. `ios`, `web`).

2. Enable `resolver.unstable_enablePackageExports` in `metro.config.js`.

3. Get all resolved dependencies (after changes):

   ```
   yarn metro get-dependencies index.js --platform android --output after.txt
   ```

4. Compare!

   ```
   diff before.txt after.txt
   ```

### Breaking changes[‚Äã](#breaking-changes "Direct link to Breaking changes")

We decided on an implementation of Package Exports in Metro that is spec-compliant (necessitating some breaking changes), but backwards compatible otherwise (helping apps with existing imports to migrate gradually).

The key breaking change is that when `"exports"` is provided by a package, it will be consulted first (before any other `package.json` fields) ‚Äî and a matched subpath target will be used directly.

* Metro will not expand [`sourceExts`](https://metrobundler.dev/docs/configuration/#sourceexts) against the import specifier.
* Metro will not resolve [platform-specific extensions](/docs/platform-specific-code.md) against the target file.

For more details, please see all [**breaking changes**](https://metrobundler.dev/docs/package-exports#summary-of-breaking-changes) in the Metro docs.

### Package encapsulation is lenient[‚Äã](#package-encapsulation-is-lenient "Direct link to Package encapsulation is lenient")

When Metro encounters a subpath that isn't listed in `"exports"`, **it will fall back to legacy resolution**. This is a compatibility feature intended to reduce user friction for previously allowable imports in existing React Native projects.

Instead of throwing an error, Metro will log a warning.

```
warn: You have imported the module "foo/private/fn.js" which is not listed in
the "exports" of "foo". Consider updating your call site or asking the package
maintainer(s) to expose this API.
```

note

We plan to implement a strict mode for package encapsulation in future, to align with Node's default behaviour. Therefore, **we recommend that all developers address these warnings** if raised by users.

## For package maintainers (preview)[‚Äã](#for-package-maintainers-preview "Direct link to For package maintainers (preview)")

info

Per our [rollout plan](#the-future-stable-exports-enabled-by-default), Package Exports will be enabled for most projects in the next React Native release (0.73) later this year.

**We have no plans to remove support for the `"main"` field and other current package resolution features any time soon.**

Package Exports provides the ability to restrict access to your package's internals, and more predictable capabilities for libraries to target React Native and React Native for Web.

### If you are using `"exports"` today[‚Äã](#if-you-are-using-exports-today "Direct link to if-you-are-using-exports-today")

If your package uses `"exports"` alongside the current `"react-native"` root field, please bear in mind the [breaking changes](#breaking-changes) for users above. For users enabling this feature in Metro, `"exports"` will now be considered first during module resolution.

In practice, we anticipate the main change for users will be the enforcement (via warnings) of any inaccessible subpaths in their apps, from respecting `"exports"` package encapsulation.

### Migrating to `"exports"`[‚Äã](#migrating-to-exports "Direct link to migrating-to-exports")

**Adding an `"exports"` field to your package is entirely optional**. Existing package resolution features will behave identically for packages which don't use `"exports"` ‚Äî and we have no plans to remove this behaviour.

We believe that the new features of `"exports"` provide a compelling feature set for React Native package maintainers.

* **Tighten your package API**: This is a great time to review the module API of your package, which can now be formally defined via exported subpath aliases. This prevents users from accessing internal APIs, reducing surface area for bugs.
* **Conditional exports**: If your package targets React Native for Web (i.e. `"react-native"` and `"browser"`), we now give packages control of the resolution order of these conditions (see next heading).

If you decide to introduce `"exports"`, **we recommend making this as a breaking change**. We've prepared a [**migration guide**](https://metrobundler.dev/docs/package-exports#migration-guide-for-package-maintainers) in the Metro docs which includes how to replace features such as platform-specific extensions.

note

**Please do not rely on the lenient behaviours of Metro's implementation.** While Metro is backwards-compatible, packages should follow how `"exports"` is documented in the spec and strictly implemented by other tools.

### The new `"react-native"` condition[‚Äã](#the-new-react-native-condition "Direct link to the-new-react-native-condition")

We've introduced `"react-native"` as a community condition (for use with conditional exports). This represents React Native, the framework, sitting alongside other recognised runtimes such as `"node"` and `"deno"` ([RFC](https://github.com/nodejs/node/pull/45367)).

info

[Community Conditions Definitions ‚Äî **`"react-native"`**](https://nodejs.org/docs/latest-v19.x/api/packages.html#community-conditions-definitions)

*Will be matched by the React Native framework (all platforms). To target React Native for Web, "browser" should be specified before this condition.*

This replaces the previous `"react-native"` root field. The priority order for how this was previously resolved was determined by projects, [which created ambiguity when using React Native for Web](https://github.com/expo/router/issues/37#issuecomment-1275925758). Under `"exports"`, *packages concretely define the resolution order for conditional entry points* ‚Äî removing this ambiguity.

```
  "exports": {
    "browser": "./dist/index-browser.js",
    "react-native": "./dist/index-react-native.js",
    "default": "./dist/index.js"
  }
```

note

We chose not to introduce `"android"` and `"ios"` conditions, due to the prevalence of other existing platform selection methods, and the complexity of how this behaviour might work across frameworks. Please use the [`Platform.select()`](/docs/platform.md#select) API instead.

## The future: Stable `"exports"`, enabled by default[‚Äã](#the-future-stable-exports-enabled-by-default "Direct link to the-future-stable-exports-enabled-by-default")

In the next React Native release, we are aiming to remove the `unstable_` prefix for this feature (having addressed planned performance work and any bugs) and will enable Package Exports resolution by default.

With `"exports"` enabled for everyone, we can begin taking the React Native community forward ‚Äî for example, React Native's core packages could be updated to better separate public and internal modules.

![Rollout plan for Package Exports support](/assets/images/package-exports-rollout-4d6544def64335059e0d23df72bfa98a.png)

## Thanks[‚Äã](#thanks "Direct link to Thanks")

Thanks to members of the React Native community that gave feedback on the RFC: [@SimenB](https://github.com/SimenB), [@tido64](https://github.com/tido64), [@byCedric](https://github.com/byCedric), [@thymikee](https://github.com/thymikee).

Huge thanks to [@motiz88](https://github.com/motiz88) and [@robhogan](https://github.com/robhogan) at Meta for supporting the development of this feature.

**Tags:**

* [announcement](/blog/tags/announcement)
* [metro](/blog/tags/metro)


---

# React Native 0.73 - Debugging Improvements, Stable Symlink Support, and more

December 6, 2023 ¬∑

<!-- -->

13 min read

![Marek Fo≈ôt](https://github.com/fortmarek.png)

Marek Fo≈ôt

Software Engineer @ Shopify

[](https://x.com/marekfort "X")[](https://github.com/fortmarek "GitHub")

![Thibault Malbranche](https://github.com/titozzz.png)

Thibault Malbranche

Lead Mobile Engineer @ Brigad

[](https://x.com/titozzz "X")[](https://github.com/titozzz "GitHub")

![Hur Ali](https://github.com/hurali97.png)

Hur Ali

Software Engineer @ Callstack

[](https://x.com/hurali97 "X")[](https://github.com/hurali97 "GitHub")

![Luna Wei](https://github.com/lunaleaps.png)

Luna Wei

Software Engineer @ Meta

[](https://x.com/lunaleaps "X")[](https://github.com/lunaleaps "GitHub")

![Alex Hunt](https://github.com/huntie.png)

Alex Hunt

Software Engineer @ Meta

[](https://x.com/huntie "X")[](https://github.com/huntie "GitHub")

Today we're releasing React Native 0.73! This release adds improvements to debugging with Hermes, stable symlink support, Android 14 support, and new experimental features. We are also deprecating legacy debugging features, and are releasing the next pillar of the New Architecture: Bridgeless Mode!

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [Debugging Improvements](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#debugging-improvements)
* [Stable Symlink Support in Metro](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#stable-symlink-support-in-metro)
* [Kotlin Template on Android](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#kotlin-template-on-android)
* [Android 14 Support](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#android-14-support)
* [New Architecture Updates](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#new-architecture-updates)
* [Deprecated Debugging Features](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#deprecated-debugging-features)

### Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

* [Babel Package Renames](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#babel-package-renames)
* [Other Breaking Changes](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#other-breaking-changes)
* [React Native CLI Changes](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#react-native-cli-changes)
* [Deprecated @types/react-native](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#deprecated-typesreact-native)

## Highlights[‚Äã](#highlights-1 "Direct link to Highlights")

### Debugging Improvements[‚Äã](#debugging-improvements "Direct link to Debugging Improvements")

The React Native and Hermes teams are committed to improving the debugging experience in React Native. In 0.73, we're happy to share some initial progress out of this ongoing investment.

#### Console Log History in Hermes[‚Äã](#console-log-history-in-hermes "Direct link to Console Log History in Hermes")

`console.log()` is an ever popular way for developers to quickly debug their JavaScript code. In previous releases, console logs in React Native apps would not be recorded until a debugger was connected. This made it hard to observe logs that occur early during app load.

In React Native 0.73 we've addressed this issue. Hermes now captures all `console.log()` calls in the background, which will be sent to the Console tab when a debugger is first connected ‚Äî matching the debugging experience in web browsers. This new behaviour works across Flipper, Chrome DevTools connected to Hermes, and the experimental New Debugger.

#### Updated Debugging Docs[‚Äã](#updated-debugging-docs "Direct link to Updated Debugging Docs")

We've refreshed the [Debugging](/docs/debugging.md) section of our docs, which now includes up-to-date information on how to connect all supported debuggers, more info on React DevTools, and refreshed visuals.

![Overview of the Debugging docs as of 0.73](/assets/images/0.73-debugging-docs-b1aed77a7676fb519118e13ce67677f7.jpg)

#### Experimental New Debugger[‚Äã](#experimental-new-debugger "Direct link to Experimental New Debugger")

The React Native team is working on a new JavaScript debugger experience, intended to replace Flipper, with a Technical Preview available as of React Native 0.73. The new debugger opens immediately, and features a stripped-back Chrome DevTools UI customized for debugging React Native with Hermes.

note

The new debugger is **experimental** and has some [known issues](https://github.com/react-native-community/discussions-and-proposals/discussions/733) we are actively working to solve in a future release of React Native. If you are trying it out, please use the [same discussion thread](https://github.com/react-native-community/discussions-and-proposals/discussions/733) to report feedback.

![The new debugger frontend opened to the \&quot;Welcome\&quot; pane](/assets/images/debugging-debugger-welcome-f17b086109690d6ae376ca5096cc55f4.jpg)

Learn more about enabling this experience [in the docs](/docs/next/debugging?js-debugger=new-debugger#opening-the-debugger).

### Stable Symlink Support in Metro[‚Äã](#stable-symlink-support-in-metro "Direct link to Stable Symlink Support in Metro")

Support for resolving symlinks in Metro is now **enabled by default**. Symlink support enables React Native to work with monorepo setups when containing directories are configured with [`watchFolders`](https://metrobundler.dev/docs/configuration/#watchfolders).

Symlinks are deeply represented in Metro's internals, meaning they work with features such as [Fast Refresh](/docs/fast-refresh.md), and incur little performance overhead during bundling. Symlinks are supported on all desktop platforms, with and without Watchman.

info

#### Monorepo workarounds[‚Äã](#monorepo-workarounds "Direct link to Monorepo workarounds")

We are aware there are still edge cases when using React Native in a monorepo layout. We have planned work to address some of these, which didn't quite make it into 0.73 ‚Äî¬†but which we aim to ship as soon as possible.

**For React Native template projects (`npx react-native init`)**, you will need to configure any [`watchFolders`](https://metrobundler.dev/docs/configuration/#watchfolders) outside of the project root in order for Metro to discover them ([more info](https://metrobundler.dev/docs/configuration/#unstable_enablesymlinks-experimental)). You may also need to update file paths if your `react-native` dependency is installed to a folder at a different level.

**For Expo apps**, support for Yarn (Classic) workspaces is configured out of the box. See also the [Work with monorepos](https://docs.expo.dev/guides/monorepos/) guide in the Expo docs.

### Kotlin Template on Android[‚Äã](#kotlin-template-on-android "Direct link to Kotlin Template on Android")

We're excited to announce that, starting from 0.73, Kotlin is now the **recommended language** for Android apps built with React Native. This follows the direction that the Android ecosystem has been moving in for several years and allows you to write your app using a modern language.

We've updated React Native's template on Android to use Kotlin instead of Java. The new `MainActivity.kt` and `MainApplication.kt` files are 36% smaller in size.

The [Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) has also been updated to make it easier to migrate your `.java` files to `.kt` files. If you've previously modified the Java files in your project and you need support migrating them to Kotlin, you can use the `Code > Convert Java file to Kotlin File` utility of Android Studio (also accessible with the shortcut `Cmd ‚åò` + `Shift ‚áß` + `Option ‚å•` + `K`).

### Android 14 Support[‚Äã](#android-14-support "Direct link to Android 14 Support")

We've updated React Native to fully support Android 14. Starting from 0.73, React Native developers can now target the latest Android SDK version, [API Level 34](https://developer.android.com/guide/topics/manifest/uses-sdk-element?hl=en#ApiLevels) (*Upside Down Cake*).

#### Java 17 and Android Gradle Plugin upgrade[‚Äã](#java-17-and-android-gradle-plugin-upgrade "Direct link to Java 17 and Android Gradle Plugin upgrade")

In order to support Android 14, we've updated the version of Android Gradle Plugin (AGP) used to build Android apps from `7.4.x` to `8.1.x`.

This major version bump of AGP comes with a series of breaking changes that are available in the release notes from Google ([8.0.0](https://developer.android.com/build/releases/past-releases/agp-8-0-0-release-notes) and [8.1.0](https://developer.android.com/build/releases/past-releases/agp-8-1-0-release-notes)).

Most importantly, **Java 17** is now a requirement to build Android apps. You can update your Java version to 17 by running:

```
brew install --cask zulu@17
```

and by updating your `JAVA_HOME` as documented in the [Getting Started guide](https://reactnative.dev/docs/environment-setup).

If you're a library developer, your libraries should work with React Native 0.73 without changes. Earlier this year, [we published a note](https://github.com/react-native-community/discussions-and-proposals/issues/671) with a clarification on what the AGP bump means for you as a library author.

#### Grant partial access to photos and videos[‚Äã](#grant-partial-access-to-photos-and-videos "Direct link to Grant partial access to photos and videos")

[Selected Photos Access](https://developer.android.com/about/versions/14/changes/partial-photo-video-access) allows Android 14 users to grant apps access to specific items in their media library, rather than access to all media. In 0.73, React Native apps now support this capability, by using the `READ_MEDIA_VISUAL_USER_SELECTED` permission in the [`PermissionsAndroid`](/docs/permissionsandroid.md) API.

![Selected Photos Access in Android 14](/assets/images/0.73-android-media-picker-e5f99ca2d5d41618686d78e49343621c.jpg)

#### Min SDK bump[‚Äã](#min-sdk-bump "Direct link to Min SDK bump")

React Native 0.73 will be the final version which supports Android 5.0 (API Level 21). The next version of React Native will have a minimum SDK version of 23 (Android 6.0). Read more about the upcoming changes to min SDK bump [here](https://github.com/react-native-community/discussions-and-proposals/discussions/740).

### New Architecture Updates[‚Äã](#new-architecture-updates "Direct link to New Architecture Updates")

We continue the rollout of React Native's New Architecture, to make it available to everyone in the Open Source community.

Since React Native 0.68, both the New Renderer (Fabric) and the New Native Module System (TurboModules) were available to users to experiment and evaluate. We want to thank the community for the feedback we've received so far.

Today we're releasing another piece of the New Architecture: [**Bridgeless Mode**](https://github.com/reactwg/react-native-new-architecture/discussions/154). Up until now, when you enable the New Architecture in your app, the Bridge would still be available to support backward compatibility with older components and modules. However, our vision is to fully sunset the bridge. Starting from React Native 0.73, you can enable Bridgeless Mode which will disable the creation of the bridge entirely.

Together with Bridgeless Mode, we're shipping a Native Module Interop Layer, that will allow you to reuse your old modules when in Bridgeless Mode. The [Renderer Interop Layer](https://github.com/reactwg/react-native-new-architecture/discussions/135) introduced in React Native 0.72 has also been adapted to work with Bridgeless Mode.

As with the rest of the New Architecture, Bridgeless Mode is initially experimental. We invite interested users to enable it and report any problems and incompatibilities you face in the [New Architecture working group](https://github.com/reactwg/react-native-new-architecture/discussions).

### Deprecated Debugging Features[‚Äã](#deprecated-debugging-features "Direct link to Deprecated Debugging Features")

#### Flipper ‚Üî React Native integration[‚Äã](#flipper--react-native-integration "Direct link to Flipper ‚Üî React Native integration")

We are gradually moving away from Flipper as the default tool for debugging React Native apps. In 0.73, this begins by deprecating the native Flipper integration included with React Native (bootstrap code which wires up Flipper's core plugins). We will be removing this integration and dependency in the next release ‚Äî¬†meaning parts of Flipper such as the Network plugin will cease to work.

**Unchanged**: Flipper as a standalone product for native app debugging will continue to exist. Even after its removal from new React Native projects in the future, developers will be able to [manually add Flipper to their app](https://fbflipper.com/docs/getting-started/android-native/) if they wish.

For more information on why we are moving away from Flipper, [view the RFC](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0641-decoupling-flipper-from-react-native-core.md).

#### Remote JavaScript Debugging[‚Äã](#remote-javascript-debugging "Direct link to Remote JavaScript Debugging")

Remote JavaScript Debugging is a legacy debugging mode that connects an external web browser (Chrome) to your app and runs your JavaScript code inside a web page, i.e. `http://localhost:8081/debugger-ui`. This model could lead to inconsistent app behaviour while debugging, and is incompatible with native modules under the New Architecture.

In 0.73, [Remote JavaScript Debugging is deprecated](https://github.com/react-native-community/discussions-and-proposals/discussions/734) and has been removed from the Dev Menu. Enabling the remote debugger must now be done manually via the `NativeDevSettings` API. Doing this is covered in the [Other Debugging Methods docs](/docs/next/other-debugging-methods#remote-js-debugging).

info

Remote JavaScript Debugging was previously the default debugging experience for apps using JavaScriptCore (JSC). We recommend [Safari Developer Tools (direct JSC debugging)](/docs/next/other-debugging-methods#safari-developer-tools-direct-jsc-debugging) instead, for iOS apps.

We recommend using [Hermes](/docs/hermes.md) for a consistent debugging experience on all platforms.

## Breaking Changes[‚Äã](#breaking-changes-1 "Direct link to Breaking Changes")

### Babel Package Renames[‚Äã](#babel-package-renames "Direct link to Babel Package Renames")

We've relocated two Babel-related packages out of Metro and into React Native's repository and versioning scheme, enabling us to simplify maintenance and upgrades. The new versions of these packages support New Architecture features in 0.73, meaning these dependencies must be updated.

Please follow the [Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) when upgrading, to ensure you have updated these dependencies. Some packages have been renamed:

| Old Package Name                       | New Package Name                        |
| -------------------------------------- | --------------------------------------- |
| `metro-react-native-babel-preset`      | `@react-native/babel-preset`            |
| `metro-react-native-babel-transformer` | `@react-native/metro-babel-transformer` |

info

`@react-native/babel-preset` now includes `@react-native/babel-plugin-codegen`, this no longer needs to be specified separately in your Babel config file.

### Other Breaking Changes[‚Äã](#other-breaking-changes "Direct link to Other Breaking Changes")

These are some of the key breaking changes in 0.73. Please consult the [full changelog](https://github.com/facebook/react-native/blob/main/CHANGELOG.md) for the complete list of breaking changes.

* Raise minimum Node.js requirement to 18.x ([#37709](https://github.com/facebook/react-native/pull/37709)) (see also [Node.js 16 EOL](https://nodejs.org/en/blog/announcements/nodejs16-eol)).
* The template now uses TypeScript 5.0 ([#36862](https://github.com/facebook/react-native/pull/36862)).
  <!-- -->
  * React Native types continue working on TypeScript 4.8.
* **Android**: Java 17 is now a requirement to build Android apps ([see above](#java-17-and-android-gradle-plugin-upgrade)).
* **Android**: Major bump of Fresco to 3.0 ([#38275](https://github.com/facebook/react-native/pull/38275)).
* **iOS**: Raise minimum iOS version to 13.4 ([#36795](https://github.com/facebook/react-native/pull/36795)).
* **iOS**: Metro will no longer be automatically started when running builds via Xcode ([#38242](https://github.com/facebook/react-native/pull/38242)).

For library authors:

* **Android**: Bump to AGP 8.1.1 ([discussion](https://github.com/react-native-community/discussions-and-proposals/issues/671))

### React Native CLI Changes[‚Äã](#react-native-cli-changes "Direct link to React Native CLI Changes")

#### Highlighted breaking changes[‚Äã](#highlighted-breaking-changes "Direct link to Highlighted breaking changes")

* Change default task prefix in `build-android` command. From now on, when you run `build-android`, the `bundle` task will be run instead of `assemble` ([#1913](https://github.com/react-native-community/cli/pull/1913)).
* Remove fallback flow for Metro config defaults ([#1972](https://github.com/react-native-community/cli/pull/1972)).
  <!-- -->
  * The [updated `metro.config.js` format](/blog/2023/06/21/0.72-metro-package-exports-symlinks.md#new-metroconfigjs-setup) from 0.72 is now required in 0.73, as we have removed the fallback copy of these defaults from CLI.
* Remove `--configuration` option from `run-ios` (replaced with `--mode`) ([#2028](https://github.com/react-native-community/cli/pull/2028)).
* Remove `--variant` option from `build-android` command (replaced with `--mode`) ([#2026](https://github.com/react-native-community/cli/pull/2026)).

[See full changelog for v12.0.0](https://github.com/react-native-community/cli/releases/tag/v12.0.0).

### Deprecated `@types/react-native`[‚Äã](#deprecated-typesreact-native "Direct link to deprecated-typesreact-native")

As mentioned in [First-class Support for TypeScript](/blog/2023/01/03/typescript-first.md#declarations-shipped-with-react-native), we have shipped TypeScript types with `react-native` since 0.71 and we are now deprecating `@types/react-native` for 0.73.

We will not ship any future patches for existing versions. The guidance is to migrate away from `@types/react-native`. See instructions on [how to migrate](/blog/2023/01/03/typescript-first.md#how-to-migrate).

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.73 contains over [2259 commits](https://github.com/facebook/react-native/compare/v0.72.7...v0.73.0) from 68 contributors. Thanks for all your hard work!

## Upgrade to 0.73[‚Äã](#upgrade-to-073 "Direct link to Upgrade to 0.73")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the [Upgrading docs](/docs/upgrading.md). You can also create a new project with `npx react-native@latest init MyProject`.

If you use Expo, React Native 0.73 will be supported in the Expo SDK 50 release.

info

0.73 is now the latest stable version of React Native and **0.70.x now moves to unsupported**. For more information see [React Native‚Äôs support policy](https://github.com/reactwg/react-native-releases#releases-support-policy).

**Tags:**

* [announcement](/blog/tags/announcement)
* [release](/blog/tags/release)
* [debugging](/blog/tags/debugging)


---

# React Native 0.74 - Yoga 3.0, Bridgeless New Architecture, and more

April 22, 2024 ¬∑

<!-- -->

15 min read

![Hur Ali](https://github.com/hurali97.png)

Hur Ali

Software Engineer @ Callstack

[](https://x.com/hurali97 "X")[](https://github.com/hurali97 "GitHub")

![Alan Hughes](https://github.com/alanjhughes.png)

Alan Hughes

Software Engineer @ Expo

[](https://github.com/alanjhughes "GitHub")

![Alfonso Curbelo](https://github.com/alfonsocj.png)

Alfonso Curbelo

Software Engineer @ Coinbase

[](https://github.com/alfonsocj "GitHub")

![Alex Hunt](https://github.com/huntie.png)

Alex Hunt

Software Engineer @ Meta

[](https://x.com/huntie "X")[](https://github.com/huntie "GitHub")

![Nicola Corti](https://github.com/cortinico.png)

Nicola Corti

Software Engineer @ Meta

[](https://x.com/cortinico "X")[](https://github.com/cortinico "GitHub")[](https://bsky.app/profile/cortini.co "Bluesky")

Today we're releasing React Native 0.74! This release adds Yoga 3.0, Bridgeless by default under the New Architecture, batched `onLayout` updates (New Architecture), and Yarn 3 as the default package manager for new projects.

We are also removing deprecated APIs, with the removal of `PropTypes` and breaking changes to `PushNotificationIOS`. On Android, SDK 23 (Android 6.0) is now the minimum supported version.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [Yoga 3.0](/blog/2024/04/22/release-0.74.md#yoga-30)
* [New Architecture: Bridgeless by Default](/blog/2024/04/22/release-0.74.md#new-architecture-bridgeless-by-default)
* [New Architecture: Batched `onLayout` Updates](/blog/2024/04/22/release-0.74.md#new-architecture-batched-onlayout-updates)
* [Yarn 3 for New Projects](/blog/2024/04/22/release-0.74.md#yarn-3-for-new-projects)

### Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

* [Android Minimum SDK Bump (Android 6.0)](/blog/2024/04/22/release-0.74.md#android-minimum-sdk-bump-android-60)
* [API Changes to PushNotificationIOS (Deprecated)](/blog/2024/04/22/release-0.74.md#api-changes-to-pushnotificationios-deprecated)
* [Removal of Deprecated `PropTypes`](/blog/2024/04/22/release-0.74.md#removal-of-deprecated-proptypes)
* [Removal of Flipper React Native Plugin](/blog/2024/04/22/release-0.74.md#removal-of-flipper-react-native-plugin)
* [Other Breaking Changes](/blog/2024/04/22/release-0.74.md#other-breaking-changes)

## Highlights[‚Äã](#highlights-1 "Direct link to Highlights")

### Yoga 3.0[‚Äã](#yoga-30 "Direct link to Yoga 3.0")

#### New Layout Behaviors[‚Äã](#new-layout-behaviors "Direct link to New Layout Behaviors")

React Native 0.74 includes [Yoga 3.0](https://yogalayout.dev/blog/announcing-yoga-3.0), the newest version of our layout engine. Yoga 3.0 improves layout by making styling more predictable, and supports rendering components written for the web.

React Native continues to intentionally preserve some incorrect layout behaviors, where fixing them was found to effect a significant number of real-world components. Layout conformance will be able to be configured more granularly in future versions of React Native.

warning

React Native [previously flipped](https://yogalayout.dev/blog/announcing-yoga-3.0#correct-handling-of-logical-edges-in-row-reverse-containers) `left`/`right` (and `start`/`end`) edges when dealing with `margin`, `padding`, or `border`, set on a `row-reverse` container. Now, behavior of these properties lines up with web. Code which previously relied on edges being inverted may need to be updated to continue rendering correctly.

| Style                                                                                                                                                                                                                                                                                                                                                                                                         | Before                                                                                                                                                                                                                     | After                                                                                                                                                                                                             |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ```
<View
  style={{
    flexDirection: 'row',
    backgroundColor: 'red',
    margin: 10,
    width: 200,
    height: 100,
  }}>
  <View
    style={{
      flexDirection: 'row-reverse',
      backgroundColor: 'blue',
      flex: 1,
      marginLeft: 50,
    }}>
    <View
      style={{
        backgroundColor: 'green',
        height: '50%',
        flex: 1,
        marginLeft: 50,
      }}
    />
  </View>
</View>
``` | ![Previous layout](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkAgMAAAC+6JeYAAAACVBMVEX/AAAAgAIAAP/8wXIfAAAANklEQVR42u3LoQ0AIAwAsJ2I4T8MhiuxM8v0ktY3XnJ3YUWmKIqiKIqiTCy9oyiKoiiKoowuHxexOPfpM7ojAAAAAElFTkSuQmCC) | ![New layout](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkAgMAAAC+6JeYAAAACVBMVEX/AAAAgAIAAP/8wXIfAAAAMklEQVR42u3LoQ0AMAgAsOn9x5NcicUQNEnr+7qfTUwURVEURVGU+2WnKIqiKIqinCsFTv3+UKPaRfkAAAAASUVORK5CYII=) |

#### Support for `align-content: 'space-evenly'`[‚Äã](#support-for-align-content-space-evenly "Direct link to support-for-align-content-space-evenly")

Yoga 3.0 brings support for [`alignContent: 'space-evenly'`](https://developer.mozilla.org/en-US/docs/Web/CSS/align-content#space-evenly). `space-evenly` distributes the lines in a multi-line flex container using evenly spaced gaps, placed between line and container edges.

![Visual reference for alignContent behaviors](/blog/assets/0.74-align-content.png)

Source: [World Wide Web Consortium](https://www.w3.org/TR/css-align-3/#distribution-values)

#### Support for `position: 'static'`[‚Äã](#support-for-position-static "Direct link to support-for-position-static")

info

`position: 'static'` is supported only in the New Architecture.

Elements marked as [`position: 'static'`](https://developer.mozilla.org/en-US/docs/Web/CSS/position#static) may not be offset, and are not considered when determining the [containing block](https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block) of an absolutely positioned element. This allows positioning an element relative to an ancestor which is not its direct parent.

|                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ```
<View
  style={{
    backgroundColor: 'blue',
    width: 200,
    height: 200,
    flexDirection: 'row-reverse',
  }}>
  <View
    style={{
      backgroundColor: 'red',
      width: 100,
      height: 100,
      position: 'static',
    }}>
    <View
      style={{
        backgroundColor: 'green',
        width: 25,
        height: '25%',
        left: 25,
        top: 25,
        position: 'absolute',
      }}
    />
  </View>
</View>
``` | ![Static Example](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGOCAMAAACOvaUVAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAABkKADAAQAAAABAAABjgAAAAA32yssAAAACXBIWXMAAAsTAAALEwEAmpwYAAACymlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4yODg8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI4NjwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoqdD14AAACTFBMVEUAAP8Afz//ACgAgSoAiQAAfEIAfEH/ACAAiAAAe0L3ADLZAIAAgCb2ADIAhwDWAIQAgCH/ABcAfyUAhgDVAIMAgBsAfyAAgBoAfx8AhQD/ABAAgBkAfx4AgBgAfScAgBcAfSYAgBb/AAwAfxr/AAsAhAAAfCkAgBQAgBMAfCf+AAsAgBIAfCbOAIgAfxYAfCUAgBAAgwAAfxQAgA4AfxMAgA0AfxIAgAwAfxEAgAsAfxAAggAAgAr/AAAAgAkAbWn+AAAAgQAAgAUAanUAgAMAgAIAa24AaH0AgAEAZoYAgAD7AAAAZoUAbGYAam8Aam4AZYcAam0AZYYAZYUAZ3oAaW8AdDMAb0oAczUAczQAczMAZ28AcjUAdxoAcDcAWKkAVq4AdQ0AVLEAU7IAU7EAWosAVJ6sAImrAIerAIYAUaMAT6iuAHQAT6MATqgAS7AATKoATKgARcKMAKwAPMNnANdlANlhANkAMtJYAOAAMsJXAN8AMsEAMsBXANwAMr4AMcIAMcEAKekAMMEAKOoAL8MAJ+sAJuwAJusAJesAJOwAI+wAJ9QAIutEAOcAH/AAHu48AOgAHPAAHeUAFfMlAPokAPsjAPoAEfYADP4YAPgWAP0VAP0ACv4SAP8TAPwRAP8ACfsQAP8ACfkACP4QAP0ACfgACPwACPsAB/4ABv8ABf8ABf4ABf0IAP8ABP8HAP4AA/8GAP4AA/4AA/0EAP8AAv8AAv4AAv0CAP8AAf8CAP4AAf4BAP8AAP4AAP0AAPgAAPcAAPMAAPJvRcS8AAAD2klEQVR42u3dT2scZQDH8d8zM7ubuI0WE6uCClLx6sFXoEjFV+Hb8nVYECxGTx5EPHoQxINQFaSlrUk2+2dmPLRCwcuMMLIJn88hgTyHwO/LPLu3CQAAAAAAAAAAAAAAAAAAAABcTyWjfbVLnzFK85Ghh2oy2vmmzyhlaecpg8wXu5H/obHzdFfWvaYupc8Ipe/6Dyw90RPyxZ3Pfm7XTdoMVff1wRu5u7hj7CmCbHP5eN33bdtkoO7w4rV1LmpbTxHk68fZ/Prkx9s5y2APH366ytmRrSf6UC/Ln179vZ7vMkh1cP+976vK0NMFSTdfrl5+YViQrpr/Oa9LMfR0QfrdYU5emWWo2WYnyJRBkrZq2lmXIdrMOiOPUeW/OMtQvlyNDjKp2sf5SAYTBEEEQRBBEEQQBBEEQRBEEAQRBEEEQRBBEARBBEEQQRBEEAQRBEEQRBAEEQRBBEEQQRAEQQRBEEEQRBAEEQRBEEQQBBEEQQRBEEEQBEEEQRBBEEQQBBEEQRBEEAQRBEEEQRBBEARBBEEQQRBEEAQRBEEQRBAEuf5BasNNpclYZZEsK4/W3gRJ384ebG6sM0C1axbbNGaeMki/Ot/99eSgyyBVs0tr5kmDbN787u2ziww0P/qh3W6y29p6kiBVDm+fN7c2WWWYZdsvjo+ynNl6iiAfJifvrt4pZddkkG1pZ/MXb+b4E1tPdGWdLLbreUqfJCl59rtP8q+/lPSlz2ZxYx49uJpKRru77kpG6Kul5wMAAAAAAAAAAAAAAAAAAACA/13JNXF6uU2Vq6/JNdE9ukjxgO2L01NX1j758uPP/zh7tHVl7YvzPFjdX29LEWQ/nOXyt3tvfZOkTvvPj7ZOm6eeHdQZfdDWzx3U7XMHyYiD9unpgIPrEWSXrvvl5vtxZe2NUpp8+9LxhSB7oUqfWWav32q9HWGfbFqvq9grnfeHIIggCCIIgiCIIAgiCIIIgiCCIAiCCIIggiCIIAgiCIIgiCAIIgiCCIIggiAIggiCIIIgiCAIIgiCIIggCCIIggiCIIIgCIIIgiCCIIggCCIIgiCIIAgiCIIIgiCCIAiCCIIggiCIIAgiCIIIgiAIIgiCCIIggiCIIAiCIIIgiCAIIgiCCIIgCCIIggiCIIIgiCAIgiCCIIggCCIIggiCIAgiCIIIgiCCIIggCIIggiCIIAgiCIIIgiAIIgiCCIIggiCIIAiCIIIgiCAIIgiCCIIgCCIIggiCIIIgiCAIIgiCIIggCCIIggiCIIIgCIIIgiCCIIggCCIIgiCIIAgiCIIIgiCCIAiCCIIgV9nfQaK7IvVKYtEAAAAASUVORK5CYII=) |

Notice how the green `<View>` declares `left` and `top` and it is positioned relative to the blue `<View>`, not its parent.

React Native continues to default to `position: 'relative'` when no `position` is set.

### New Architecture: Bridgeless by Default[‚Äã](#new-architecture-bridgeless-by-default "Direct link to New Architecture: Bridgeless by Default")

In this release, we are making Bridgeless Mode the default when the New Architecture is enabled. You can learn more about our switch to Bridgeless as the default in [this post](https://github.com/reactwg/react-native-new-architecture/discussions/174). To make the transition smoother we enhanced the interop layers to cover Bridgeless and worked with several libraries to make sure they will work in Bridgeless from day one.

Bridgeless is not the only interop layer we worked on: we improved the New Renderer Interop layers too. The most exciting bit is that it is now enabled by default: you don't need to specify the components that have to go through it! You can read more about them [here](https://github.com/reactwg/react-native-new-architecture/discussions/175).

Finally, if you want to learn more about the New Architecture, you can find documentation in the [react-native-new-architecture](https://github.com/reactwg/react-native-new-architecture/tree/main/docs) repo. When the New Architecture becomes the default, this information will be incorporated into [reactnative.dev](https://reactnative.dev).

### New Architecture: Batched `onLayout` updates[‚Äã](#new-architecture-batched-onlayout-updates "Direct link to new-architecture-batched-onlayout-updates")

State updates in `onLayout` callbacks are now batched. Previously, each state update in the `onLayout` event would result in a new render commit.

```
function MyComponent(props) {
  const [state1, setState1] = useState(false);
  const [state2, setState2] = useState(false);

  return (
    <View>
      <View
        onLayout={() => {
          setState1(true);
       }}>
      <View
         onLayout={() => {
          // When this event is executed, state1's new value is no longer observable here.
          setState2(true);
        }}>
      </View>
    </View>
  );
}
```

In 0.74, `setState1` and `setState2` updates are batched together. This change is [expected behavior in React](https://react.dev/learn/queueing-a-series-of-state-updates#react-batches-state-updates) and allows for less re-renders.

danger

This change **may break code** that has relied on un-batched state updates. You'll need to refactor this code to use [updater functions](https://react.dev/learn/queueing-a-series-of-state-updates#updating-the-same-state-multiple-times-before-the-next-render) or equivalent.

### Yarn 3 for New Projects[‚Äã](#yarn-3-for-new-projects "Direct link to Yarn 3 for New Projects")

[Yarn 3](https://yarnpkg.com/blog/release/3.0) is now the default JavaScript package manager for new projects initialized with React Native Community CLI.

Yarn 3.x will be used with `nodeLinker: node-modules`, a mode providing compatibility with React Native libraries. This replaces Yarn Classic (1.x, deprecated) as the previous default. To upgrade Yarn version inside your existing app you can follow this [guide](https://yarnpkg.com/migration/guide).

```
$ yarn --help
‚îÅ‚îÅ‚îÅ Yarn Package Manager - 3.6.4 ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

  $ yarn <command>
```

The Community CLI also supports initializing projects with other package managers via the `--pm` flag ([read more](https://github.com/react-native-community/cli/blob/main/docs/init.md)).

## Breaking Changes[‚Äã](#breaking-changes-1 "Direct link to Breaking Changes")

### Android Minimum SDK Bump (Android 6.0)[‚Äã](#android-minimum-sdk-bump-android-60 "Direct link to Android Minimum SDK Bump (Android 6.0)")

React Native 0.74 has a minimum Android SDK version requirement of 23 (Android 6.0). Previously, this was Android 5.0 (API 21). See our context for this change [here](https://github.com/react-native-community/discussions-and-proposals/discussions/740).

#### Bonus: Android app size reduction[‚Äã](#bonus-android-app-size-reduction "Direct link to Bonus: Android app size reduction")

The minimum SDK bump, together with several improvements at our native build, allowed us to greatly reduce the app size on user devices.

For example a newly created app with React Native 0.74 occupies \~13% less space on user device, resulting in \~4MB saved on device.

![Side-by-side comparison of a new React Native app in the Android system storage view](/assets/images/0.74-android-app-size-0dc90c5494d274e5c4691287866bf518.jpg)

### Removal of Deprecated `PropTypes`[‚Äã](#removal-of-deprecated-proptypes "Direct link to removal-of-deprecated-proptypes")

Before 0.74, React Native continued to ship with `PropTypes`, an API that has been deprecated since React 15.5 in 2017! We are now removing all built-in `PropTypes` from React Native, reducing app size (26.4kB in a minified bundle) and memory overhead.

The following `PropTypes` properties are removed: `Image.propTypes`, `Text.propTypes`, `TextInput.propTypes`, `ColorPropType`, `EdgeInsetsPropType`, `PointPropType`, `ViewPropTypes` (see [commit](https://github.com/facebook/react-native/commit/228cb80af9ded20107f3c7a30ffe00e24471bfeb)).

If your app or library relies on `PropTypes`, we highly recommend migrating to a type system like TypeScript.

### API Changes to PushNotificationIOS (Deprecated)[‚Äã](#api-changes-to-pushnotificationios-deprecated "Direct link to API Changes to PushNotificationIOS (Deprecated)")

In React Native 0.74, we are making steps to remove the deprecated [PushNotificationIOS](https://reactnative.dev/docs/pushnotificationios) library. The changes in this release are focused on removing references to older iOS APIs. PushNotificationIOS has been migrated onto Apple‚Äôs [User Notifications](https://developer.apple.com/documentation/usernotifications?language=objc) framework and exposes new APIs for scheduling and handling notifications.

In the next release (0.75), we are planning to **remove this library**, relocating it out of React Native core and into the community package, [@react-native-community/push-notification-ios](https://github.com/react-native-push-notification/ios). If you are still relying on PushNotificationIOS, you‚Äôll need to migrate over before the next release.

#### API Changes[‚Äã](#api-changes "Direct link to API Changes")

The `didRegisterUserNotificationSettings:` callback on `RCTPushNotificationManager` was a no-op and has been deleted.

The following callbacks on `RCTPushNotificationManager` have been deprecated and will be removed in 0.75:

```
+ (void)didReceiveLocalNotification:(UILocalNotification *)notification;
+ (void)didReceiveRemoteNotification:(NSDictionary *)notification;
```

In order to retrieve the notification which launched the app using `getInitialNotification()`, you‚Äôll now need to explicitly set the `initialNotification` on `RCTPushNotificationManager`:

```
[RCTPushNotificationManager setInitialNotification:response.notification];
```

On the JS side, properties on `Notification` have changed. `alertAction` and `repeatInterval` are now deprecated and will be removed in 0.75:

```
type Notification = {
  ...
  // NEW: Seconds from now to display the notification.
  fireIntervalSeconds?: ?number,

  // CHANGED: Used only for scheduling notifications. Will be null when
  // retrieving notifications using `getScheduledLocalNotifications` or
  // `getDeliveredNotifications`.
  soundName?: ?string,

  // DEPRECATED: This was used for iOS's legacy UILocalNotification.
  alertAction?: ?string,

  // DEPRECATED: Use `fireDate` or `fireIntervalSeconds` instead.
  repeatInterval?: ?string,
};
```

Finally, the `handler` parameter on `PushNotificationIOS.removeEventListener` is unused and has been removed.

**üí° How to Migrate**

#### iOS[‚Äã](#ios "Direct link to iOS")

Your `AppDelegate` will need to implement `UNUserNotificationCenterDelegate`. This should be done on app startup in `application:willFinishLaunchingWithOptions:` or `application:didFinishLaunchingWithOptions:` (see [Apple Docs](https://developer.apple.com/documentation/usernotifications/unusernotificationcenterdelegate?language=objc) for more details).

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  ...
  UNUserNotificationCenter *center = [UNUserNotificationCenter currentNotificationCenter];
  center.delegate = self;

  return YES;
}
```

Implement `userNotificationCenter:willPresentNotification:withCompletionHandler:`, which is called when a notification arrives and the app is in the *foreground*. Use the `completionHandler` to determine if the notification will be shown to the user and notify `RCTPushNotificationManager` accordingly:

```
- (void)userNotificationCenter:(UNUserNotificationCenter *)center
       willPresentNotification:(UNNotification *)notification
         withCompletionHandler:(void (^)(UNNotificationPresentationOptions options))completionHandler
{
  // This will trigger 'notification' and 'localNotification' events on PushNotificationIOS
  [RCTPushNotificationManager didReceiveNotification:notification];
  // Decide if and how the notification will be shown to the user
  completionHandler(UNNotificationPresentationOptionNone);
}
```

To handle when a notification is tapped, implement `userNotificationCenter:didReceiveNotificationResponse:withCompletionHandler:`. Note that if you set foreground notifications to be shown in `userNotificationCenter:willPresentNotification:withCompletionHandler:`, you should only notify `RCTPushNotificationManager` in one of these callbacks.

If the tapped notification resulted in app launch, call `setInitialNotification:`. If the notification was not previously handled by `userNotificationCenter:willPresentNotification:withCompletionHandler:`, call `didReceiveNotification:` as well:

```
- (void)  userNotificationCenter:(UNUserNotificationCenter *)center
  didReceiveNotificationResponse:(UNNotificationResponse *)response
           withCompletionHandler:(void (^)(void))completionHandler
{
  // This condition passes if the notification was tapped to launch the app
  if ([response.actionIdentifier isEqualToString:UNNotificationDefaultActionIdentifier]) {
  // Allow the notification to be retrieved on the JS side using getInitialNotification()
    [RCTPushNotificationManager setInitialNotification:response.notification];
  }
 // This will trigger 'notification' and 'localNotification' events on PushNotificationIOS
  [RCTPushNotificationManager didReceiveNotification:response.notification];
  completionHandler();
}
```

Finally, delete the following methods and adapt the logic into the callbacks above which will be called instead:

1. `application:didReceiveLocalNotification:` \[deprecated]
2. `application:didReceiveRemoteNotification:` \[deprecated]
3. `application:didReceiveRemoteNotification:fetchCompletionHandler:` \[not deprecated, but is superseded by the `UNUserNotificationCenterDelegate` methods]

Delete any usages of `application:didRegisterUserNotificationSettings:` and `RCTPushNotificationManager`‚Äôs corresponding `didRegisterUserNotificationSettings:` as well.

**Example:** See the RNTester `AppDelegate.mm`.

#### JS[‚Äã](#js "Direct link to JS")

1. Remove any references to `alertAction`.
2. Remove the `handler` argument on any calls to `removeEventListener`.
3. Replace any usages of `repeatInterval` by firing multiple notifications using `fireDate` or `fireIntervalSeconds` instead.
4. Note that `soundName` will be null when it is accessed on a `Notification` returned from `getScheduledLocalNotifications()` and `getDeliveredNotifications()`.

### Removal of Flipper React Native Plugin[‚Äã](#removal-of-flipper-react-native-plugin "Direct link to Removal of Flipper React Native Plugin")

Use of [Flipper](https://fbflipper.com/) for inspecting React Native layouts, network requests, and [other React Native plugin features](https://fbflipper.com/docs/features/react-native/), is now unsupported. In 0.74, we have removed the native Flipper libraries and setup code from new React Native projects. This means fewer dependencies and quicker local setup (see [original RFC](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0641-decoupling-flipper-from-react-native-core.md)).

The diff for removing Flipper in your app can be seen in the [Upgrade Helper](https://react-native-community.github.io/upgrade-helper/). If you want to preserve Flipper in an existing app, ignore the relevant diff lines.

**üí° To re-integrate Flipper**

Flipper can still be used as a standalone tool for debugging an Android or iOS app, and can be manually integrated by following the Flipper docs ([Android guide](https://fbflipper.com/docs/getting-started/android-native/), [iOS guide](https://fbflipper.com/docs/getting-started/ios-native/)).

We recommend that teams invest in switching to native debugging tooling in Android Studio and Xcode.

tip

#### Replacing Flipper[‚Äã](#replacing-flipper "Direct link to Replacing Flipper")

There are a number of dedicated debugging tools which replace Flipper features. For more information, we recommend reading the excellent [*Why you don't need Flipper in your React Native app*](https://shift.infinite.red/why-you-dont-need-flipper-in-your-react-native-app-and-how-to-get-by-without-it-3af461955109) article by Jamon Holmgren.

#### JavaScript debugging[‚Äã](#javascript-debugging "Direct link to JavaScript debugging")

Using the [Hermes Debugger](https://reactnative.dev/docs/debugging?js-debugger=hermes#opening-the-debugger) remains our recommended debugging option for 0.74. You can also try the [Experimental New Debugger](https://reactnative.dev/docs/debugging?js-debugger=new-debugger#opening-the-debugger), which is also the default in Expo. This continues to be an early preview ‚Äî¬†known issues and updates can be followed [here](https://github.com/react-native-community/discussions-and-proposals/discussions/733).

### Other Breaking Changes[‚Äã](#other-breaking-changes "Direct link to Other Breaking Changes")

**General**

* Make `start`/`end` in styles always refer to writing direction ([#42251](https://github.com/facebook/react-native/pull/42251)).

**Android**

* Remove of `JSIModule*` from `FabricUIManagerProvider` ([#42059](https://github.com/facebook/react-native/pull/42059)).
  <!-- -->
  * This API was unused in open source ‚Äî use [TurboModules](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) instead.
* Deprecate `UIManagerModule.showPopupMenu` and `UIManagerModule.dismissPopupMenu` ([#42441](https://github.com/facebook/react-native/pull/42441))
  <!-- -->
  * This API has been moved to the [`@react-native/popup-menu-android`](https://www.npmjs.com/package/@react-native/popup-menu-android) npm package and will be removed in 0.75.

**iOS**

* Delete `configFilename` and `configKey` arguments from iOS codegen CLI ([#41533](https://github.com/facebook/react-native/pull/41533)).

* Change how [`bundleURL`](https://github.com/facebook/react-native/blob/0.74-stable/packages/react-native/template/ios/HelloWorld/AppDelegate.mm#L22-L29) is handled ([#43994](https://github.com/facebook/react-native/pull/43994)).

  <!-- -->

  * Before, `bundleURL` was set when React Native was started in an instance variable and it was not possible to update it.
  * Now, [`bundleUrl` is a function](https://github.com/facebook/react-native/blob/0.74-stable/packages/react-native/template/ios/HelloWorld/AppDelegate.mm#L22-L29) which is re-evaluated when needed, enabling the use of a different URL across refreshes.
  * This change will affect your app only if you were changing the `bundleURL` variable after the app is started. In this case, move the logic that updates the variable to the [`bundleURL` function](https://github.com/facebook/react-native/blob/0.74-stable/packages/react-native/template/ios/HelloWorld/AppDelegate.mm#L22-L29) in `AppDelegate`.

Please see the [full changelog](https://github.com/facebook/react-native/blob/main/CHANGELOG.md) for a complete list of breaking changes.

## Known Issues[‚Äã](#known-issues "Direct link to Known Issues")

**iOS**

* Edge case when using multiple windows: When the main window is inactive and the system tries to present a dialog, the dialog is not presented in the right position on the screen. A fix is incoming in [#44167](https://github.com/facebook/react-native/pull/44167) and will ship in 0.74.1.

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.74 contains over [1673 commits](https://github.com/facebook/react-native/compare/v0.73.6...v0.74.0) from 57 contributors. Thanks for all your hard work!

Thanks to all the additional authors that worked on documenting features in this release post:

* [Nick Gerleman](https://github.com/NickGerleman) for *Yoga 3.0*
* [Joe Vilches](https://github.com/joevilches) for *Yoga 3.0*
* [Riccardo Cipolleschi](https://twitter.com/CipolleschiR) for *New Architecture: Bridgeless by Default*
* [Samuel Susla](https://twitter.com/SamuelSusla) for *New Architecture: Batched `onLayout` updates*
* [Tim Yung](https://twitter.com/yungsters) for *Removal of Deprecated `PropTypes`*
* [Ingrid Wang](https://github.com/ingridwang) for *API Changes to PushNotificationIOS (Deprecated)*

## Upgrade to 0.74[‚Äã](#upgrade-to-074 "Direct link to Upgrade to 0.74")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the [Upgrading docs](/docs/upgrading.md).

To create a new project:

```
npx react-native@latest init MyProject
```

If you use Expo, React Native 0.74 will be supported in Expo SDK 51.

info

0.74 is now the latest stable version of React Native and **0.71.x moves to unsupported**. For more information see [React Native's support policy](https://github.com/reactwg/react-native-releases#releases-support-policy). We aim to publish a final end-of-life update of 0.71 at the beginning of May.

**Tags:**

* [announcement](/blog/tags/announcement)
* [release](/blog/tags/release)
* [yoga](/blog/tags/yoga)


---

# Use a framework to build React Native apps

June 25, 2024 ¬∑

<!-- -->

5 min read

![Nicola Corti](https://github.com/cortinico.png)

Nicola Corti

Software Engineer @ Meta

[](https://x.com/cortinico "X")[](https://github.com/cortinico "GitHub")[](https://bsky.app/profile/cortini.co "Bluesky")

At [React Conf](https://www.youtube.com/live/0ckOUBiuxVY?si=pU4qP4eB5iWfY0IG\&t=2320), we updated our guidance on the best tool to get started building React Native apps: a **React Native framework** - a toolbox with all the necessary APIs to let you build production-ready apps.

Using React Native frameworks, such as Expo, is now the **recommended** approach to create new apps.

In this blogpost we want to walk you through what they are in detail and what they mean for you as a React Native developer starting a new project.

## What is a React Native framework?[‚Äã](#what-is-a-react-native-framework "Direct link to What is a React Native framework?")

If you‚Äôve been building production apps, you probably know that there is a set of common problems you will need to solve sooner or later.

When building any application on either web or native, you probably want your users to navigate through different screens, fetch data, and store the state of your user. But for native apps there is even more to deal with: you need tools to upgrade your native code between React Native versions, manage compatible versions of all of your dependencies, and deal with native build tools.

It takes a village to bring an app from idea to production without the right tools.

We want you to focus on writing beautiful applications and features for your users, and not solving those common problems over and over.

That‚Äôs why we believe that the best way for you to experience React Native is through a framework that offers a toolbox with all the necessary tools you need to build production-ready applications.

We‚Äôve found that **you‚Äôre either using a framework or you‚Äôre building your own framework**.

There is nothing wrong with building your own framework, by crafting your own solutions for routing, navigation, deploying, and so on. Major corporations like Meta and Microsoft build their own frameworks internally to integrate deeply into their brownfield apps. But we believe that most people will be better off by using an existing framework.

If you‚Äôve been using React on web, you‚Äôre probably familiar with a similar concept of [production-grade React frameworks](https://react.dev/learn/start-a-new-react-project#production-grade-react-frameworks).

As of today, the only recommended community framework for React Native is [Expo](https://docs.expo.dev/). Folks at Expo have been investing in the React Native ecosystem since the early days of React Native and as of today, we believe the developer experience offered by Expo is best in class.

note

Expo, the framework, is and will remain free and open source, while Expo Application Services (EAS) is an optional paid service.

If you haven‚Äôt used Expo recently, make sure you don‚Äôt miss [this talk from Kadi @ Expo](https://www.youtube.com/live/0ckOUBiuxVY?si=N-WSfmAJSMfd6wDL\&t=3888) where she‚Äôs showcasing what you can do with Expo in 2024.

We‚Äôve also updated the [Getting Started page](https://reactnative.dev/docs/environment-setup) on the website to reflect this recommendation.

## How will frameworks affect you?[‚Äã](#how-will-frameworks-affect-you "Direct link to How will frameworks affect you?")

If you‚Äôre already using a recommended framework such as Expo, you‚Äôre already good to go!

If you'd like to migrate your existing app to Expo, you can find instructions on [the official Expo website](https://docs.expo.dev/bare/overview/). Expo offers many benefits, such as an easier way to [upgrade your React Native version](https://docs.expo.dev/workflow/upgrading-expo-sdk-walkthrough/), a better developer experience, and much more.

However, if you can't or don't want to migrate to Expo, that's fine too. Using React Native without an official framework will continue to be supported. The tools you‚Äôve been using such as React Native Community CLI, Template and [Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) will keep on working as usual.

The `react-native init` command has moved out of core and is now accessible via:

```
npx @react-native-community/cli@latest init
```

and on GitHub at [react-native-community/cli](https://github.com/react-native-community/cli).

If you‚Äôre a React Native library developer, we collected a list of recommendations on which APIs to use. [Read more in the RFC](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0759-react-native-frameworks.md#what-do-we-recommend-to-react-native-library-developers).

## Further reading[‚Äã](#further-reading "Direct link to Further reading")

If you‚Äôre interested in learning more about the reasoning behind this decision, we invite you to read the [RFC0759: React Native Frameworks](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0759-react-native-frameworks.md#what-do-we-recommend-to-react-native-library-developers). This RFC is a result of a multi-month effort involving countless discussions and brainstorming among different partners and players of the React Native ecosystem.

While Expo today is the only recommended framework, the RFC also contains [guidelines](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0759-react-native-frameworks.md#becoming-a-react-native-framework) on how to become a recommended framework, as we hope to see more competition and innovation in this space.

Moreover, you should check out the talk [useFrameworks()](https://www.youtube.com/watch?v=lifGTznLBcw) at App.js 2024 where we presented this RFC and the necessary changes in a short format.

We believe that by clarifying the respective responsibilities of React Native Core and the Frameworks, we can foster a healthier ecosystem and drive growth & innovation for React Native.

**Tags:**

* [announcement](/blog/tags/announcement)


---

# React Native 0.75 - Support for Percentage Values in Layout, New Architecture Stabilization, Template & init Updates, and more

August 14, 2024 ¬∑

<!-- -->

16 min read

![Gabriel Donadel Dall'Agnol](https://github.com/gabrieldonadel.png)

Gabriel Donadel Dall'Agnol

Software Engineer @ Expo

[](https://x.com/donadeldev "X")[](https://github.com/gabrieldonadel "GitHub")

![Siddharth Kulkarni](https://github.com/siddharthkul.png)

Siddharth Kulkarni

Software Engineer @ Coinbase

[](https://github.com/siddharthkul "GitHub")

![Thibault Malbranche](https://github.com/titozzz.png)

Thibault Malbranche

Lead Mobile Engineer @ Brigad

[](https://x.com/titozzz "X")[](https://github.com/titozzz "GitHub")

![Blake Friedman](https://github.com/blakef.png)

Blake Friedman

Software Engineer @ Meta

[](https://github.com/blakef "GitHub")

![Riccardo Cipolleschi](https://github.com/cipolleschi.png)

Riccardo Cipolleschi

Software Engineer @ Meta

[](https://x.com/CipolleschiR "X")[](https://github.com/cipolleschi "GitHub")

![Nicola Corti](https://github.com/cortinico.png)

Nicola Corti

Software Engineer @ Meta

[](https://x.com/cortinico "X")[](https://github.com/cortinico "GitHub")[](https://bsky.app/profile/cortini.co "Bluesky")

Today we are excited to release React Native 0.75!

This release ships several features, such as Yoga 3.1 with support for `%` values, several stabilization fixes for the New Architecture, and the introduction of the recommendation for users to use a React Native Framework.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [Yoga 3.1 and Layout Improvements](/blog/2024/08/12/release-0.75.md#yoga-31-and-layout-improvements)
* [New Architecture Stabilization](/blog/2024/08/12/release-0.75.md#new-architecture-stabilization)
* [Using Frameworks](/blog/2024/08/12/release-0.75.md#using-frameworks)

### Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

* [Touchables in TypeScript can‚Äôt be used as types in Generic expressions anymore](/blog/2024/08/12/release-0.75.md#touchables-in-typescript-cant-be-used-as-types-in-generic-expressions-anymore)
* [Last version supporting minSdk 23 and minIOSVersion 13.4](/blog/2024/08/12/release-0.75.md#last-version-supporting-minsdk-23-and-miniosversion-134)
* [Android: JSIModule has been deleted](/blog/2024/08/12/release-0.75.md#android-jsimodule-has-been-deleted)
* [Android: PopUp Menu removed from core](/blog/2024/08/12/release-0.75.md#android-popup-menu-moved-to-separate-package)
* [iOS: Finalized Push Notifications deprecation work](/blog/2024/08/12/release-0.75.md#ios-finalized-pushnotificationios-deprecation-work)
* [Community CLI: Removal of ram-bundle and profile-hermes commands](/blog/2024/08/12/release-0.75.md#community-cli-removal-of-ram-bundle-and-profile-hermes-commands)

## Highlights[‚Äã](#highlights-1 "Direct link to Highlights")

### Yoga 3.1 and Layout Improvements[‚Äã](#yoga-31-and-layout-improvements "Direct link to Yoga 3.1 and Layout Improvements")

Since we last shipped Yoga [version 3.0](https://reactnative.dev/blog/2024/04/22/release-0.74#yoga-30) in React Native 0.74, we kept on pushing many improvements and new layout capabilities for your applications. React Native 0.75 ships with Yoga 3.1 and you can learn more about what‚Äôs new in the official Yoga‚Äôs [release blog post](https://www.yogalayout.dev/blog/announcing-yoga-3.1).

One notable and highly requested feature is the support for `%` values in various places, such as `gaps` and `translation`

info

These features are available only for the New Architecture. If you are keen to use them, please consider migrating to it.

#### Percentage Values in Gaps[‚Äã](#percentage-values-in-gaps "Direct link to Percentage Values in Gaps")

With 0.75, the `gap`, `columnGap` and `rowGap` props described [here](https://reactnative.dev/docs/flexbox#row-gap-column-gap-and-gap) now support a string with a `%` value.

For example:

```
function App(): React.JSX.Element {
  return (
    <SafeAreaView
      style={{
        marginTop: 20,
        alignItems: 'center',
        flex: 1,
        rowGap: '20%',
      }}>
      <View
        style={{flex: 1, flexDirection: 'row', columnGap: '10%'}}>
        <View
          style={{
            backgroundColor: 'purple',
            width: 100,
            height: 100,
          }}
        />
        <View
          style={{
            backgroundColor: 'blue',
            width: 100,
            height: 100,
          }}
        />
        <View
          style={{
            backgroundColor: 'green',
            width: 100,
            height: 100,
          }}
        />
      </View>
      <View
        style={{flex: 1, flexDirection: 'row', columnGap: '10%'}}>
        <View
          style={{
            backgroundColor: 'lime',
            width: 100,
            height: 100,
          }}
        />
        <View
          style={{
            backgroundColor: 'yellow',
            width: 100,
            height: 100,
          }}
        />
        <View
          style={{
            backgroundColor: 'orange',
            width: 100,
            height: 100,
          }}
        />
      </View>
      <View
        style={{flex: 1, flexDirection: 'row', columnGap: '10%'}}>
        <View
          style={{
            backgroundColor: 'red',
            width: 100,
            height: 100,
          }}
        />
        <View
          style={{
            backgroundColor: 'violet',
            width: 100,
            height: 100,
          }}
        />
        <View
          style={{
            backgroundColor: 'magenta',
            width: 100,
            height: 100,
          }}
        />
      </View>
    </SafeAreaView>
  );
}
```

Will be rendered as follows:

| Android                                                                                | iOS                                                                            |
| -------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ |
| ![Android Gaps](/assets/images/0.75-android-gaps-666a10baba3b26cae0c48bb2a696a43a.png) | ![iOS Gaps](/assets/images/0.75-ios-gaps-e2e421fdbebed0fa1c724113892ff1ed.png) |

#### Percentage values in Translation[‚Äã](#percentage-values-in-translation "Direct link to Percentage values in Translation")

The [`transform` prop](https://reactnative.dev/docs/transforms) can also now accept `%` as values for the `translate` transformations.

For example, the following component would move the red square‚Äôs X coordinate by 100% of its width and the Y coordinate by 100% of its height:

```
function Translated() {
  return (
    <SafeAreaView
      style={{
        marginTop: 20,
        flex: 1,
        rowGap: '20%',
      }}>
      <View
        style={{
          backgroundColor: 'red',
          width: 100,
          height: 100,
          transform: [{translateY: '100%'}, {translateX: '100%'}],
        }}
      />
    </SafeAreaView>
  );
}
```

Will be rendered as follows:

| Android                                                                                               | iOS                                                                                          |
| ----------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- |
| ![Android Translation](/assets/images/0.75-android-translations-88fc4632bc683645cf686b9855356ed1.png) | ![iOS Translation](/assets/images/0.75-ios-translation-a38ecabf731f3b27ea02ba45f16f8d93.png) |

### New Architecture Stabilization[‚Äã](#new-architecture-stabilization "Direct link to New Architecture Stabilization")

Since our announcement of the [New Architecture being in Beta](https://github.com/reactwg/react-native-new-architecture/discussions/189) at React Conf, we shipped several bug fixes and improvements to its stability.

Our goal is for the New Architecture to be considered stable in the near future. Therefore, in the last few months we focused on bridging the gaps between the Old and the New Architecture. Some examples of bugs and missing features we fixed are:

* Fix `adjustsFontSizeToFit` on Android ([#44075](https://github.com/facebook/react-native/pull/44075))
* Fix `textAlign` not working with inline views on Android ([#44146](https://github.com/facebook/react-native/pull/44146))
* Fix text baseline being moved up on iOS ([#44932](https://github.com/facebook/react-native/pull/44932))

Together with the folks at Expo, we also worked on adding information about New Architecture support in the [React Native Directory](https://reactnative.directory/), so it will be immediately clear for you if a library already supports the New Architecture or not:

![React Native Directory](/assets/images/0.75-rn-directory-a5b9d610243d3824942bfff41c0a5656.png)

We also invite you to take part in the [New Architecture survey](https://t.co/ucAA58hnFu). This survey is key for us to collect precious feedback on the next steps for the New Architecture rollout.

We also want to share a post we published in the New Architecture Working Group about [Supporting UIManager in the New Architecture](https://github.com/reactwg/react-native-new-architecture/discussions/201). This post offers an API overview of the `UIManager` API on Android and how it can help the migration of more advanced apps & libraries.

This release contains also a new API which is now the blessed way to access the `jsi::Runtime`.

#### Accessing `jsi::Runtime` in TurboModules[‚Äã](#accessing-jsiruntime-in-turbomodules "Direct link to accessing-jsiruntime-in-turbomodules")

In the past, there has never been a recommended way from native modules to access the `jsi::Runtime`, and consumers would work around the framework to do so in risky ways. In 0.74, we introduced experimental APIs providing safe access to the `jsi::Runtime`, and we‚Äôre happy to announce their stability for 0.75.

Examples on how to access the jsi::Runtime

On iOS, you can make your Turbo Native Module conform to the protocol `RCTTurboModuleWithJSIBindings`. You can now implement `installJSIBindingsWithRuntime`, which will give you thread-safe access to the runtime.

```
@interface RCTSampleTurbo Module () <RCTTurboModuleWithJSIBindings>
@end

#pragma mark - RCTTurboModuleWithJSIBindings
- (void)installJSIBindingsWithRuntime:(jsi::Runtime &)runtime {
  runtime.global().setProperty(
    runtime,
    "myGlobalFunction",
    jsi:: Function::createFromHost Function(...));
}
```

On Android, you can make your Turbo Native Module conform to the interface `TurboModuleWithBindings`. You can now implement the JNI method `getBindingsInstaller`, which will give you thread-safe access to the runtime in C++.

```
public class SampleTurboModule extends NativeSampleTurboModuleSpec implements TurboModuleWithJSIBindings

@Override
public native BindingsInstallerHolder getBindingsInstaller();
```

```
// C++
jni::local_ref<BindingsInstallerHolder::javaobject> SampleTurboModuleJSIBindings::getBindingsInstaller(jni::alias_ref<jni::object> jobj) {
  return BindingsInstallerHolder::newObjectCxxArgs(
    [](jsi::Runtime& runtime) {
      runtime.global().setProperty(
        runtime,
        ‚ÄúmyGlobalFunction‚Äù,
        jsi::Function::createFromHostFunction(...));
    }
  );
}
```

If you‚Äôre on the UI thread and you need to access the runtime, we introduced a new API: `CallInvoker`. It consists of a single method, `invokeAsync`, that will jump onto the JS thread to safely execute some work using the JS runtime. These APIs are forward compatible.

On iOS, we‚Äôve provided the protocol `RCTCallInvokerModule`. After conforming to this protocol, our infrastructure will decorate the module with access to the `CallInvoker`.

```
@interface RCTSampleTurboModule() <RCTCallInvokerModule>

[self.callInvoker callInvoker].invokeAsync([&](jsi::Runtime& runtime) {
  // do stuff on JS thread
}
```

On Android, the `CallInvoker` is accessible through the `ReactContext` in a JNI wrapper called `CallInvokerHolder`, where you can then call `invokeAsync` after crossing the JNI boundary.

```
// Java
public abstract CallInvokerHolder getJSCallInvokerHolder();
```

```
// C++
jsCallInvokerHolder->cthis()->getCallInvoker()->invokeAsync([&](jsi::Runtime& rt) {
  // do stuff on JS thread
});
```

### Using Frameworks[‚Äã](#using-frameworks "Direct link to Using Frameworks")

As we shared at React Conf earlier this year, the recommended way to build a React Native app is now through a framework, such as Expo.

You can read more about this guidance on our previous blog-post: "[Use a framework to build React Native apps](https://reactnative.dev/blog/2024/06/25/use-a-framework-to-build-react-native-apps)".

We want to set up new React Native users for success. We believe that using a framework makes you as productive as possible, and offers you the best developer experience when building new apps.

To reflect those recommendations, this version includes the following changes:

* We moved the `/template` folder from the `react-native` package to a separate repository: [`react-native-community/template`](https://github.com/react-native-community/template).
* We‚Äôre sunsetting the `react-native init` command as of December 31st 2024.

If you‚Äôre already using a framework such as Expo, those changes won‚Äôt impact you at all. You‚Äôll be able to use React Native 0.75 together with Expo SDK 51 (you can find instructions on how to do it in [this dedicated Expo post](https://expo.dev/changelog/2024/08-14-react-native-0.75)).

If you‚Äôre not using a framework or you‚Äôre building your own framework, let‚Äôs see how those changes will impact you.

#### Moving the template to react-native-community/template[‚Äã](#moving-the-template-to-react-native-communitytemplate "Direct link to Moving the template to react-native-community/template")

Historically, `react-native` used to ship a `/template` folder inside the NPM package which was used by the Community CLI to create new projects. This made updating the template quite slow as we needed a new React Native release for every template change.

With our latest recommendation to use a framework, we feel that shipping an opinionated template inside our core NPM package was not aligned with [our vision](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0759-react-native-frameworks.md).

Therefore, we decided to move the template to the [`@react-native-community/template`](https://www.npmjs.com/package/@react-native-community/template) package.

This will make it easier for the community to maintain and evolve the template, without having to rely on a React Native release for every change. Moreover, this brings the template closer to the Community CLI and will make it easier for everyone to inspect and depend on the template as a separate package.

This change should be completely transparent to users who create new projects using the Community CLI. From now on, new issues related to the template should be reported on the [template issue tracker](https://github.com/react-native-community/template/issues?q=sort%3Aupdated-desc+is%3Aissue+is%3Aopen). All the various tools that depend on the template, such as the upgrade-helper, have also been updated accordingly and will continue working as usual.

#### Sunsetting react-native init[‚Äã](#sunsetting-react-native-init "Direct link to Sunsetting react-native init")

Similarly to the template, the `react-native init` command was also adapted to align with the new recommendation.

Historically, `react-native init` was the default command to create new React Native projects. However, in 2024, we feel this command does not provide the same onboarding experience that a framework would offer you. That is why we are not recommending it anymore, instead you should use a framework like Expo.

You can still use `react-native init` to create new projects using the Community CLI & template today, but you will see the following warning:

![Init Deprecation](/assets/images/0.75-deprecation-55d183c728154671a92452650a08275e.png)

Starting from December 31st 2024, the `init` command won‚Äôt create a project anymore. You will have to either:

* Use a framework such as Expo, with its own dedicate command to create a new project, such as `npx create-expo-app`
* Invoke the Community CLI directly with `npx @react-native-community/cli init`

Please note that `react-native config` and all the other commands than `init` will continue working as usual.

info

In order to offer a smoother migration experience, the `react-native@0.75.0` package is still depending on `@react-native-community/cli` but we‚Äôre planning on removing this dependency in the near future.

#### Auto-linking performance improvements[‚Äã](#auto-linking-performance-improvements "Direct link to Auto-linking performance improvements")

During this work in updating the `init` command, we also spent time rewriting the auto-linking logic to be more performant. This results in faster build speed for both Android and iOS.

With React Native 0.75, if you are using Expo, the auto-linking step could now run \~6.5x faster on Android and \~1.5x faster on iOS. You can read more about these improvements [here](https://github.com/react-native-community/discussions-and-proposals/discussions/814).

### Breaking changes[‚Äã](#breaking-changes-1 "Direct link to Breaking changes")

While this upcoming section seems lengthy, we expect that the breaking changes here will mostly impact a small group of users that are using React Native in more advanced ways.

We want to present them here for the sake of completeness and for reference.

#### Touchables in TypeScript can‚Äôt be used as types in Generic expressions anymore[‚Äã](#touchables-in-typescript-cant-be-used-as-types-in-generic-expressions-anymore "Direct link to Touchables in TypeScript can‚Äôt be used as types in Generic expressions anymore")

`TouchablesOpacity` and `TouchableHighlights` components have been converted to functional components. This means that they cannot be used as `value & type` anymore. So, for example, the following is not valid anymore:

```
import {TouchableHighlight} from 'react-native';
const ref = useRef<TouchableHighlight>();
//                ^^^ TS2749: TouchableHighlight refers to a value, but is being used as a type here.
//                            Did you mean typeof TouchableHighlight?
```

Instead, you should use the built-in React type `React.ElementRef` or, alternatively, the `View` type:

```
import {TouchableHighlight} from 'react-native';
const ref1 =
  useRef<React.ElementRef<typeof TouchableHighlight>>();
// or
const ref2 = useRef<View>();
```

#### Last version supporting minSdk 23 and minIOSVersion 13.4[‚Äã](#last-version-supporting-minsdk-23-and-miniosversion-134 "Direct link to Last version supporting minSdk 23 and minIOSVersion 13.4")

These are not breaking changes in 0.75 *per se*, but we want to share that React Native 0.75 will be the last version of React Native to support minSdk 23 (Android 6.0) and minIOSVersion 13.4.

Starting from React Native 0.76, the minSdk version will be 24 (Android 7.0) and the minIOSVersion will be 15.1.

You can read more about it in our official announcement [for Android](https://github.com/react-native-community/discussions-and-proposals/discussions/802) and [for iOS](https://github.com/react-native-community/discussions-and-proposals/discussions/812).

#### Android: JSIModule has been deleted[‚Äã](#android-jsimodule-has-been-deleted "Direct link to Android: JSIModule has been deleted")

The `com.facebook.react.bridge.JSIModule` ([source](https://github.com/facebook/react-native/blob/0.73-stable/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/bridge/JSIModule.java)) was an API that we temporarily introduced to allow a Native Module to access JSI directly on Android. The accessors for this API [were deprecated in 0.74](https://reactnative.dev/blog/2024/04/22/release-0.74#other-breaking-changes), and we verified that there was no meaningful usage of this API in Open Source so we‚Äôre removing it in 0.75. You can use [Turbo Native Modules](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) instead as an alternative.

#### Android: PopUp Menu moved to separate package[‚Äã](#android-popup-menu-moved-to-separate-package "Direct link to Android: PopUp Menu moved to separate package")

In 0.74, [we moved the Android‚Äôs `PopUpMenu` to a separate package](https://reactnative.dev/blog/2024/04/22/release-0.74#other-breaking-changes) under the `@react-native` scope. In 0.75, we are removing the remaining methods that were still in core:

* `UIManagerModule.showPopupMenu()`
* `UIManagerModule.dismissPopupMenu()`

As an alternative, please use the please use the `<PopupMenuAndroid />` component, which lives in the [`@react-native/popup-menu-android`](https://www.npmjs.com/search?q=%40react-native%2Fpopup-menu-android) package.

#### iOS: Finalized PushNotificationIOS deprecation work[‚Äã](#ios-finalized-pushnotificationios-deprecation-work "Direct link to iOS: Finalized PushNotificationIOS deprecation work")

In 0.74, we [deprecated](https://reactnative.dev/blog/2024/04/22/release-0.74#api-changes-to-pushnotificationios-deprecated) some APIs from the `PushNotificationIOS` module.

In 0.75, we‚Äôve deleted these APIs to migrate off legacy representations of notifications metadata.

The APIs that have been deleted are:

```
  + (void)didReceiveLocalNotification:(UILocalNotification *)notification;
  + (void)didReceiveRemoteNotification:(NSDictionary *)notification;
```

Instead, use `didReceiveNotification:(UNNotification *)notification`.

#### Community CLI: Removal of ram-bundle and profile-hermes commands[‚Äã](#community-cli-removal-of-ram-bundle-and-profile-hermes-commands "Direct link to Community CLI: Removal of ram-bundle and profile-hermes commands")

We would like to announce two significant removals coming from the Community CLI: the commands `ram-bundle` and `profile-hermes`.

The `ram-bundle` command was introduced in React Native 0.59 to let you run your bundles by loading them directly in memory. This functionality is now superseded by Hermes, our default JS engine. You should not use the `ram-bundle` command.

The `profile-hermes` command was a tool to help you profile the CPU performance of your JavaScript code. This used the old `.cpuprofile` format, which is no longer supported in recent versions of Chrome. Including this capability as a standalone command is also something we are moving away from as we work on raising the quality bar of our debugging tools. CPU profiling can now be accessed from the "Profiler" panel in the [Experimental New Debugger](https://reactnative.dev/docs/0.74/debugging?js-debugger=new-debugger#opening-the-debugger) (Note: this is not accessible if connecting to Hermes from Chrome).

## Other Breaking changes[‚Äã](#other-breaking-changes "Direct link to Other Breaking changes")

### General[‚Äã](#general "Direct link to General")

* **Codegen**

  * Changed slightly the name of pure C++ TurboModules generated classes and structs. We dropped the `Cxx` token from their names
  * Float enums are not supported anymore due to possible precision errors
  * Throw an error when passing `null` in JS to a non nullable argument in Native

* **Linting**
  * ESLint config no longer run prettier when linting

* **C++**

  * `ScrollViewShadowNode` now requires a new `bool includeTransform` parameter in the constructor
  * Removed `executeAsynchronously` and `executeSynchronously_CAN_DEADLOCK` from RuntimeExecutor
  * Renamed `JsErrorHandlingFunc` to `OnJsError` in `JsErrorHandler.h`
  * Renamed `handleJsError` to `OnJsError` in `handleFatalError.h`
  * Removed unused `import` from `ReactPrimitives.h`
  * `LongLivedObjectCollection` and `LongLivedObject` get methods now accepts a Runtime parameter
  * Renamed the `utils/jsi.h` file to `jsi-utils.h`

* **TextInput**
  * Removed deprecated `onTextInput` callback

* **Pressability**
  * Removed `onLongPressShouldCancelPress_DEPRECATED`, `onResponderTerminationRequest_DEPRECATED`, and `onStartShouldSetResponder_DEPRECATED` method

#### Android[‚Äã](#android "Direct link to Android")

* **ReactViewBackgroundDrawable**
  * Deprecated in favor of `CSSBackgroundDrawable`. This also remove some APIs from `ReactViewBackgroundDrawable` and from `ColorUtil`

* **ReactContext**

  * `ReactContext` and `ReactApplicationContext` are now abstract. Use `BridgeReactContext` and `BridgelessReactContext` instead
  * Delete `ReactContext.initializeWithInstance()`. Please use `BridgeReactInstance` instead
  * Remove `BridgelessReactContext.getJavaScriptContextHolder()` from. Please use `BridgelessCatalystInstance` instead
  * Remove `ReactContext.getRuntimeExecutor()`. Please use `BridgelessCatalystInstance`

* **Layout**

  * Support percentage flex gap values. This changes the parameters of some methods like `setGap`, `setRowGap` and `setColumnGap` from float to dynamic
  * Requires `supportsRTL` in Android Manifest

* **Runtime**

  * Removed `ReactJsExceptionHandler` from ReactHostImpl
  * Make the app responsible to return the core turbomodules when not using the default template

* **DevSupport**
  * Changed the `DevSupportManagerFactory.create()` to accept a new `PausedInDebuggerOverlayManager` parameter

* **Measurement**
  * Deleted `UIManagerModule.measureLayoutRelativeToParent()`

#### iOS[‚Äã](#ios "Direct link to iOS")

* **Runtime**

  * Remove `[RCTHost getSurfacePresenter]` and `[RCTHost getModuleRegistry]`
  * Remove `EventPriority` class and always use the default `EventPriority::AsynchronousBatched`. If build fails, please remove any use of `EventPriority`

* **Image**
  * Remove unused `RCTImageLoadingPerfInstrumentationEnabled`

* **Error Handling**
  * Remove `RCTRedBox` access through `RCTBridge`

* **CocoaPods**

  * Renamed `BUILD_FROM_SOURCE` to `RCT_BUILD_HERMES_FROM_SOURCE`
  * Renamed `React-Codegen` to `ReactCodegen` for better compatibility with `use_frameworks` and Swift

* **TextInput**
  * Remove deprecated `onTextInput` callback

### Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.75 contains over **1491 commits** from **165 contributors**. Thanks for all your hard work!

Thanks to all the additional authors that worked on documenting features in this release post:

* [Nick Gerleman](https://github.com/NickGerleman) and [Joe Vilches](https://github.com/joevilches) for *Yoga 3.1 and Layout Improvements*
* [Arushi Kesarwani](https://github.com/arushikesarwani94) for Supporting UIManager in the New Architecture
* [Phillip Pan](https://github.com/philIip) for Accessing jsi::Runtime in TurboModules
* [Alan Lee](https://github.com/alanleedev) and [Soe Lynn](https://github.com/realsoelynn) for Last version supporting minSdk 23 and minIOSVersion 13.4
* [Kudo Chien](https://github.com/kudo) for Auto-linking performance improvements
* [Alex Hunt](https://github.com/huntie) for Removal of `ram-bundle` and `profile-hermes` commands

### Upgrade to 0.75[‚Äã](#upgrade-to-075 "Direct link to Upgrade to 0.75")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the Upgrading docs.

To create a new project:

```
npx @react-native-community/cli@latest init MyProject --version latest
```

If you use Expo, React Native 0.75 will be supported in Expo SDK 51 (instructions on how to updated React Native inside your Expo project to 0.75.0 are available [in this dedicated post](https://expo.dev/changelog/2024/08-14-react-native-0.75)).

info

0.75 is now the latest stable version of React Native and 0.72.x moves to unsupported. For more information see [React Native's support policy](https://github.com/reactwg/react-native-releases/blob/main/docs/support.md). We aim to publish a final end-of-life update of 0.72 in the near future.

**Tags:**

* [engineering](/blog/tags/engineering)


---

# React Native 0.76 - New Architecture by default, React Native DevTools, and more

October 23, 2024 ¬∑

<!-- -->

12 min read

![Blake Friedman](https://github.com/blakef.png)

Blake Friedman

Software Engineer @ Meta

[](https://github.com/blakef "GitHub")

![Riccardo Cipolleschi](https://github.com/cipolleschi.png)

Riccardo Cipolleschi

Software Engineer @ Meta

[](https://x.com/CipolleschiR "X")[](https://github.com/cipolleschi "GitHub")

![Frank Calise](https://github.com/frankcalise.png)

Frank Calise

Software Engineer @ Infinite Red

[](https://x.com/frankcalise "X")[](https://github.com/frankcalise "GitHub")

![Gabriel Donadel Dall'Agnol](https://github.com/gabrieldonadel.png)

Gabriel Donadel Dall'Agnol

Software Engineer @ Expo

[](https://x.com/donadeldev "X")[](https://github.com/gabrieldonadel "GitHub")

Today we are excited to release React Native 0.76!

This is a major milestone for React Native, as we‚Äôre enabling the New Architecture by default, and we‚Äôre introducing React Native DevTools. This has been the culmination of 6 years of hard work from our team, together with the support of our incredible community of developers.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [React Native New Architecture by default](/blog/2024/10/23/release-0.76-new-architecture.md#react-native-new-architecture-by-default)
* [React Native DevTools](/blog/2024/10/23/release-0.76-new-architecture.md#react-native-devtools)
* [Faster Metro resolution](#faster-metro-resolution)
* [Box Shadow and Filter style props](/blog/2024/10/23/release-0.76-new-architecture.md#box-shadow-and-filter-style-props)

### Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

* [Removed the dependency on the react-native-community/cli](/blog/2024/10/23/release-0.76-new-architecture.md#removed-the-dependency-on-the-react-native-communitycli)
* [Android Apps are \~3.8Mb smaller thanks to Native Library merging](/blog/2024/10/23/release-0.76-new-architecture.md#android-apps-are-38mb-smaller-thanks-to-native-library-merging)
* [Updates to Minimum iOS and Android SDK requirements](/blog/2024/10/23/release-0.76-new-architecture.md#updates-to-minimum-ios-and-android-sdk-requirements)

## Highlights[‚Äã](#highlights-1 "Direct link to Highlights")

### React Native New Architecture by default[‚Äã](#react-native-new-architecture-by-default "Direct link to React Native New Architecture by default")

Starting from React Native 0.76, the New Architecture is enabled by default in your projects. The New Architecture is a rewrite of the internals of React Native to enable app developers to develop high quality native applications using React.

Today, we‚Äôre excited to declare the New Architecture ready for production use.

This change is a milestone in the evolution of React Native, and we invite you to read the dedicated blogpost to understand what's included in the New Architecture and how it will shape the future of React Native: [The New Architecture is Here](/blog/2024/10/23/the-new-architecture-is-here.md).

### React Native DevTools[‚Äã](#react-native-devtools "Direct link to React Native DevTools")

![React Native DevTools front-end](/assets/images/0.76-react-native-devtools-0b22a36dd405d34834004e51a3fcce23.jpg)

We're releasing the first stable version of React Native DevTools, our new default debugging experience.

We want the tooling you use to debug React across all platforms to be reliable, familiar, simple, and cohesive. React Native DevTools delivers on these principles ‚Äî¬†browser-aligned developer tools that are deeply integrated with React Native. Key features include:

* **Familiar, web-aligned tooling** ‚Äî A fully featured debugger based on Chrome DevTools with reliable breakpoints, watch values, step-through debugging, stack inspection, and a rich JavaScript console. These core features now work reliably and across reloads.
* **Improved and integrated React DevTools** ‚Äî The built-in React Components Inspector and Profiler work seamlessly, with faster and more reliable component highlighting.
* **Improved UX** ‚Äî See a new *Paused in Debugger* overlay, making it clear when your app is paused on a breakpoint. Warnings in LogBox are now displayed as a summary, and hidden when DevTools is attached.
* **Fixed reconnection behaviour** ‚Äî¬†JavaScript breakpoints now work reliably across reloads and when DevTools is disconnected and reattached. DevTools can even reconnect to the same app after a native rebuild.
* **Instant launch** ‚Äî React Native DevTools is ready by default with zero config. Open it from the in-app Dev Menu or via `j` to debug in the CLI server, which now supports multiple emulators and devices.

React Native DevTools is fundamentally different from our previous debugging options, including being different from the Experimental Debugger experience first shipped in 0.73. It switches to a new backend debugging stack that we‚Äôve rebuilt over the last year. This means that compatibility with previous tooling [has changed](https://github.com/react-native-community/discussions-and-proposals/discussions/819#:~:text=announcement%20talk%20%F0%9F%8E%AC.-,Compatibility,-React%20Native%20DevTools), and you should also expect a much more reliable experience end-to-end. We intend to build upon this new stack to allow us to reliably implement more features in future, such as the Performance and Network panels.

#### Phasing out logs in Metro[‚Äã](#phasing-out-logs-in-metro "Direct link to Phasing out logs in Metro")

In our next release, we're removing forwarded logs in Metro to align with modern browser tooling, and remove old debugging integrations. Instead, use React Native DevTools' fully featured Console panel for logging. See more under our [FAQs](https://github.com/react-native-community/discussions-and-proposals/discussions/819#:~:text=point%20is%20deprecated.-,FAQs,-React%20Native%20DevTools).

**Links**

* [Updated debugging docs](/docs/debugging.md)
* [Announcement talk at React Universe Conf](https://www.youtube.com/watch?v=OwivVpg6Luc)
* [Feedback thread and FAQs](https://github.com/react-native-community/discussions-and-proposals/discussions/819)

### Faster Metro resolution[‚Äã](#faster-metro-resolution "Direct link to Faster Metro resolution")

We've shipped several performance improvements to Metro's resolver, the component responsible for finding a module from an import path, making it around [15x faster](https://x.com/MetroBundler/status/1831709057670861260). This improves the overall performance of Metro, particularly for warm builds, which we've seen at around 4x faster.

### Box Shadow and Filter style props[‚Äã](#box-shadow-and-filter-style-props "Direct link to Box Shadow and Filter style props")

We‚Äôve added two New Architecture only style props in 0.76 - `boxShadow` and `filter`. Both of these props exist on the web, and the team stick to the specs when possible so that these props are predictable, familiar, and ultimately easier to adopt (see the limitations and spec deviations sections for the exceptions). As a result, you can look up the web documentation to fully understand how these work, but there are a few important differences which are noted below.

#### `boxShadow`[‚Äã](#boxshadow "Direct link to boxshadow")

`boxShadow` adds a shadow to an element, with the ability to control the position, color, size, and blurriness of the shadow. Check out the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow) for a full overview of each of these arguments, along with a fiddle to try them out for yourself. Below are a few examples of the shadows you can make.

![New boxShadow style prop](/assets/images/0.76-boxshadow-example-bcdd9211ba98197988fe526954b8b102.png)

`boxShadow` can take either a string, which mimics the CSS syntax, or JS objects which can embed variables. For example the string `‚Äò5 5 5 0 rgba(255, 0, 0, 0.5)‚Äô` and the object `{offsetX: 5, offsetY: 5, blurRadius: 5, spreadDistance: 0, color: ‚Äòrgba(255, 0, 0, 0.5)‚Äô}` would yield the same box shadow.

The [previous shadow functionality](https://reactnative.dev/docs/shadow-props) had some shortcomings addressed now addressed by `boxShadow`:

* Does not work on Android
* Cannot be [inset](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow#inset)
* Does not have [spread](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow#length)
* Does not work on `View`s if there is no background color
* Is a separate prop, so it cannot share the same web syntax

#### Limitations & Spec Deviations[‚Äã](#limitations--spec-deviations "Direct link to Limitations & Spec Deviations")

* The default shadow color is black, not the parent‚Äôs color
* Android normal shadows are supported on **Android 9+**
* Android inset shadows are supported on **Android 10+**

#### `filter`[‚Äã](#filter "Direct link to filter")

`filter` adds certain graphical filters to an element. There are a mix of color filters that let you modify things like brightness, saturation, and hue as well as non-color filters that let you add blurs and shadows. Check out the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/filter) for a full overview of each individual filter function, along with a fiddle to try them out for yourself. Below is a hot dog image with various filters applied to it.

![Filters demonstration](/blog/assets/0.76-filter-example.png)

From left to right: no filter, `saturate` filter, `blur` filter, `invert` filter

Like `boxShadow`, `filter` can take either a string, which mimics the CSS syntax, or an array of JS objects which can embed variables. For example the string `‚Äòsaturate(0.5) grayscale(0.25)‚Äô` and the array `[{saturate: 0.5}, {grayscale: 0.25}]` would yield the same filter. `filter` has a `dropShadow` value which varies slightly from `boxShadow`. The biggest difference is that `dropShadow` is an alpha mask - so the shadow will only be cast by a pixel if it has a nonzero alpha component. `boxShadow`, on the other hand, will cast around the border box of the element, even if nothing is inside of it. Additionally, dropShadow does not have a spread distance parameter and cannot be inset (shadow cast inside of the element).

#### Limitations and Spec Deviations[‚Äã](#limitations-and-spec-deviations "Direct link to Limitations and Spec Deviations")

* iOS `filter` only supports brightness and opacity
* iOS `filter` will not apply to shadows, outlines, or any other graphical elements outside the bounds of the element
* Android `blur` and `drop-shadow` are only supported on **Android 12+**
* `filter` implies `overflow: hidden`, so children of an element with a `filter` will be clipped if they are positioned outside of the parents bounds.

## Breaking Changes[‚Äã](#breaking-changes-1 "Direct link to Breaking Changes")

### Removed the dependency on the @react-native-community/cli[‚Äã](#removed-the-dependency-on-the-react-native-communitycli "Direct link to Removed the dependency on the @react-native-community/cli")

As previously shared in 0.75, our vision is for React Native to be [framework agnostic](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0759-react-native-frameworks.md). Therefore, we completed the work to remove @react-native-community/cli as a direct dependency of React Native.

Decoupling React Native from the CLI allows us to move faster through releasing these projects independently and to better separate the responsibilities of both projects.

If you are relying on the CLI in your daily workflow, make sure to explicitly [add the dependency](https://react-native-community.github.io/upgrade-helper/?from=0.75.4\&to=0.76.0#RnDiffApp-package.json) on the CLI in your `package.json`:

```
//‚Ä¶
  ‚ÄúdevDependencies‚Äù: {
   // ‚Ä¶
+  ‚Äú@react-native-community/cli‚Äù: ‚Äú15.0.0‚Äù,
+  "@react-native-community/cli-platform-android": ‚Äú15.0.0‚Äù,
+  "@react-native-community/cli-platform-ios": ‚Äú15.0.0‚Äù,
  },
```

### Android Apps are \~3.8Mb smaller thanks to Native Library merging[‚Äã](#android-apps-are-38mb-smaller-thanks-to-native-library-merging "Direct link to Android Apps are ~3.8Mb smaller thanks to Native Library merging")

React Native 0.76 will ship with a reduced number of native libraries, as we merged a lot of our native code into a single library called `libreactnative.so`.

This change comes with reduction in app size, and improvement in app startup performance on Android. From our benchmarks, we found out that App size will be reduced by \~3.8MB (20% of the total) and median App startup time will be reduced by \~15ms (\~8%) ([source](https://github.com/react-native-community/discussions-and-proposals/discussions/816)).

On the other hand, this is a breaking change for both app and library developers.

App developers will have to update their Application‚Äôs `onCreate` as follows:

```
+import com.facebook.react.soloader.OpenSourceMergedSoMapping
import com.facebook.soloader.SoLoader

class MainApplication : Application(), ReactApplication {

  override fun onCreate() {
    super.onCreate()
+   SoLoader.init(this, OpenSourceMergedSoMapping)
-   SoLoader.init(this, false)
  }
}
```

This change is necessary in order to properly load libreactnative.so and is [included in the upgrade-helper](https://react-native-community.github.io/upgrade-helper/).

Library authors won‚Äôt be affected by this change, unless you have custom C++ code.

For a technical deep dive into this change, and suggestions for library authors, you can read more about it [in the dedicated post](https://github.com/react-native-community/discussions-and-proposals/discussions/816).

### Updates to Minimum iOS and Android SDK requirements[‚Äã](#updates-to-minimum-ios-and-android-sdk-requirements "Direct link to Updates to Minimum iOS and Android SDK requirements")

We have updated our minimum platform and SDK versions:

* iOS - from 13.4 to [15.1](https://support.apple.com/en-gb/108051#151)
* Android - from SDK 23 to [SDK 24](https://developer.android.com/tools/releases/platforms#7.0) (Android 7)

This change was announced earlier in the year when 0.75 [was released](/blog/2024/08/12/release-0.75.md#last-version-supporting-minsdk-23-and-miniosversion-134). For more background, please see the dedicated posts for [Android](https://github.com/react-native-community/discussions-and-proposals/discussions/802) and [iOS](https://github.com/react-native-community/discussions-and-proposals/discussions/812).

### Other Breaking Changes[‚Äã](#other-breaking-changes "Direct link to Other Breaking Changes")

* **Animation**
  * Stop sending state updates to React in looping animation. This was causing unnecessary re-rendering with looping animations.
* **devtools:**
  * Remove Inspector Panel perf + network tabs under New Arch. ([RFC](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0777-remove-legacy-element-inspector-features.md))
* **text engine**
  * Always use AttributedStringBox instead of AttributedString in TextLayoutManager

#### Android[‚Äã](#android "Direct link to Android")

* **rendering:**
  * View backgrounds are no longer directly `ReactViewBackgroundDrawable` or `CSSBackgroundDrawable`

#### iOS[‚Äã](#ios "Direct link to iOS")

* **turbomodule**
  * Removed the `RCT_EXPORT_CXX_MODULE_EXPERIMENTAL` Macro for autolinking pure Cxx module.

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.76 contains over [1070 commits](https://github.com/facebook/react-native/compare/v0.75.4...v0.76.0) from 156 contributors. Thanks for all of your hard work!

Thanks to all the additional authors that worked on documenting features in this release post:

* [Joe Vilches](https://github.com/joevilches) and [Nick Gerleman](https://github.com/NickGerleman) box-shadow and filter style props.
* [Alex Hunt](https://github.com/huntie) React Native DevTools.
* [Nicola Corti](https://github.com/cortinico) Android shipping as a single library.

## Upgrade to 0.76[‚Äã](#upgrade-to-076 "Direct link to Upgrade to 0.76")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the Upgrading docs.

If you use Expo, React Native 0.76 will be supported in Expo SDK 52.

If you need to create a new project using the CLI, you can run this command:

```
npx @react-native-community/cli@latest init MyProject --version latest
```

info

0.76 is now the latest stable version of React Native and 0.73.x moves to unsupported. For more information see [React Native's support policy](https://github.com/reactwg/react-native-releases/blob/main/docs/support.md). We aim to publish a final end-of-life update of 0.73 in the near future.

**Tags:**

* [announcement](/blog/tags/announcement)
* [release](/blog/tags/release)


---

# New Architecture is here

October 23, 2024 ¬∑

<!-- -->

24 min read

![The React Team](https://github.com/react-native-bot.png)

The React Team

@reactjs / @reactnative

[](https://x.com/reactnative "X")

React Native 0.76 with the New Architecture by default is now available on npm!

In the [0.76 release blog post](/blog/2024/10/23/release-0.76-new-architecture.md), we shared a list of significant changes included in this version. In this post, we provide an overview of the New Architecture and how it shapes the future of React Native.

The New Architecture adds full support for modern React features, including [Suspense](https://react.dev/blog/2022/03/29/react-v18#new-suspense-features), [Transitions](https://react.dev/blog/2022/03/29/react-v18#new-feature-transitions), [automatic batching](https://react.dev/blog/2022/03/29/react-v18#new-feature-automatic-batching), and [`useLayoutEffect`](https://react.dev/reference/react/useLayoutEffect). The New Architecture also includes new [Native Module](/docs/next/turbo-native-modules-introduction) and [Native Component](/docs/next/fabric-native-components-introduction) systems that let you write type-safe code with direct access to native interfaces without a bridge.

This release is the result of a ground-up rewrite of React Native we‚Äôve been working on since 2018, and we‚Äôve taken extra care to make the New Architecture a gradual migration for most apps. In 2021, we created [the New Architecture Working Group](https://github.com/reactwg/react-native-new-architecture/) to collaborate with the community on ensuring a smooth upgrade experience for the entire React ecosystem.

Most apps will be able to adopt React Native 0.76 with the same level of effort as any other release. The most popular React Native libraries already support the New Architecture. The New Architecture also includes an automatic interoperability layer to enable backward compatibility with libraries targeting the old architecture.

Over the past several years of development, our team has publicly shared our vision for the New Architecture. If you missed any of these talks, check them out here:

* [React Native EU 2019 - The New React Native](https://www.youtube.com/watch?v=52El0EUI6D0)
* [React Conf 2021 - React 18 Keynote](https://www.youtube.com/watch?v=FZ0cG47msEk)
* [App.js 2022 - Bringing the New React Native Architecture to the OSS Community](https://www.youtube.com/watch?v=Q6TkkzRJfUo)
* [React Conf 2024 - Day 2 Keynote](https://www.youtube.com/watch?v=Q5SMmKb7qVI)

## What is the New Architecture[‚Äã](#what-is-the-new-architecture "Direct link to What is the New Architecture")

The New Architecture is a complete rewrite of the major systems that underpin React Native, including how components are rendered, how JavaScript abstractions communicates with native abstractions, and how work is scheduled across different threads. Although most users should not have to think about how these systems work, these changes bring improvements and new capabilities.

In the old architecture, React Native communicated with the native platform using an asynchronous bridge. To render a component or call a native function, React Native needed to serialize and enqueue native functions calls with the bridge, which would be processed asynchronously. The benefit of this architecture is that the main thread was never blocked for rendering updates or handling native module function calls, since all work was done on a background thread.

However, users expect immediate feedback to interactions to feel like a native app. This means some updates need to render synchronously in response to user input, potentially interrupting any in-progress render. Since the old architecture was only asynchronous, we needed to rewrite it to allow for both asynchronous and synchronous updates.

Additionally, in the old architecture, serializing function calls over the bridge quickly became a bottleneck, especially for frequent updates or large objects. This made it hard for apps to achieve 60+ FPS reliably. There were also synchronization issues: when the JavaScript and native layer got out of sync, it was impossible to reconcile them synchronously, resulting bugs like lists showing frames of empty space and visual UI jumps due to intermediate states rendering.

Finally, since the old architecture kept a single copy of the UI using the native hierarchy, and mutated that copy in place, layout could only be computed on a single thread. This made it impossible to process urgent updates like user inputs, and layout could not be read synchronously, such as reading in a layout effect to update the position of a tooltip.

All of these problems meant that it was not possible to properly support React‚Äôs concurrent features. To solve these problems, the New Architecture includes four main parts:

* The New Native Module System
* The New Renderer
* The Event Loop
* Removing the Bridge

The New Module system allows the React Native Renderer to have synchronous access to the native layer, which allows it to handle events, schedule updates, and read layout both asynchronously and synchronously. The new Native Modules are also lazily loaded by default, giving apps a significant performance gain.

The New Renderer can handle multiple in progress trees across multiple threads, which allows React to process multiple concurrent update priorities, either on the main thread or a background thread. It also supports reading layout from multiple threads synchronously or asynchronously, to support more responsive UIs without jank.

The new Event Loop can process tasks on the JavaScript thread in a well-defined order. This allows React to interrupt rendering to process events so urgent user events can take priority over lower priority UI transitions. The Event Loop also aligns with web specifications, so we can support for browser features like microtasks, `MutationObserver`, and `IntersectionObserver`.

Finally, removing the bridge allows for faster startup and direct communication between JavaScript and the native runtime, so that the cost of switching work is minimized. This also allows for better error reporting, debugging, and reducing crashes from undefined behavior.

The New Architecture is now ready to be used in production. It is already used at scale at Meta in the Facebook app and in other products. We successfully used React Native and the New Architecture in the Facebook and Instagram app we developed for our [Quest devices](https://engineering.fb.com/2024/10/02/android/react-at-meta-connect-2024/).

Our partners have already been using the New Architecture in production for months now: have a look at these success stories by [Expensify](https://blog.swmansion.com/sunrising-new-architecture-in-the-new-expensify-app-729d237a02f5) and [Kraken](https://blog.kraken.com/product/engineering/how-kraken-fixed-performance-issues-via-incremental-adoption-of-the-react-native-new-architecture), and give [Bluesky](https://github.com/bluesky-social/social-app/releases/tag/1.92.0-na-rc.2) a shot with their new release.

### New Native Modules[‚Äã](#new-native-modules "Direct link to New Native Modules")

The new Native Module System is a major rewrite of how JavaScript and the native platform communicate. It‚Äôs written entirely in C++, which unlocks many new capabilities:

* Synchronous access to and from the native runtime
* Type safety between JavaScript and native code
* Code sharing across platforms
* Lazy module loading by default

In the new Native Module system, JavaScript and the native layer can now synchronously communicate with each other through the JavaScript Interface (JSI), without the need to use an asynchronous bridge. This means your custom Native Modules can now synchronously call a function, return a value, and pass that value back to another Native Module function.

In the old architecture, in order to handle a response from native function calls, you needed to provide a callback, and the value returned needed to be serializable:

```
// ‚ùå Sync callback from Native Module
nativeModule.getValue(value => {
  // ‚ùå value cannot reference a native object
  nativeModule.doSomething(value);
});
```

In the New Architecture, you can make synchronous calls to native functions:

```
// ‚úÖ Sync response from Native Module
const value = nativeModule.getValue();

// ‚úÖ value can be a reference to a native object
nativeModule.doSomething(value);
```

With the New Architecture, you can finally leverage the full power of a C++ native implementation while still accessing it from JavaScript/TypeScript APIs. The New Module System supports [modules written in C++](/docs/next/the-new-architecture/pure-cxx-modules) so you can write your module once, and it works across all platforms, including Android, iOS, Windows, and macOS. Implementing modules in C++ allows for more fine-grained memory management and performance optimizations.

Additionally, with [Codegen](/docs/next/the-new-architecture/what-is-codegen), your modules can define a strongly typed contract between the JavaScript layer and the native layer. From our experience, cross-boundary type errors are one of the most common sources of crashes in cross-platform apps. Codegen lets you overcome those problems while also generating boilerplate code for you.

Finally, modules are now lazily loaded: they are loaded in memory only when they‚Äôre effectively needed rather than at startup. This reduces the app startup time and keeps it low as the application grows in complexity.

Popular libraries such as [react-native-mmkv](https://github.com/mrousavy/react-native-mmkv) have already seen benefits from migrating to the new Native Modules:

> ‚ÄúThe new Native Modules greatly simplified setup, autolinking, and initialization for `react-native-mmkv`. Thanks to the New Architecture, `react-native-mmkv` is now a pure C++ Native Module, which allows it to work on any platform. The new Codegen allows MMKV to be fully type-safe, which fixed a long-standing `NullPointerReference` issue by enforcing null-safety, and being able to call Native Module functions synchronously allowed us to replace custom JSI access with the new Native Module API.‚Äù
>
> [Marc Rousavy](https://twitter.com/mrousavy), creator of `react-native-mmkv`

### New Renderer[‚Äã](#new-renderer "Direct link to New Renderer")

We've also completely rewritten the Native Renderer, adding several benefits:

* Updates can be rendered on different threads at different priorities.
* Layout can be read synchronously and across different threads.
* The renderer is written in C++ and shared across all platforms.

The updated Native Renderer now stores the view hierarchy in an immutable tree structure. This means that the UI is stored in a way that cannot be changed directly, allowing for thread-safe processing of updates. This allows it to handle multiple in-progress trees, each representing a different version of the user interface. As a result, updates can be rendered in the background without blocking the UI (such as during transitions) or on the main thread (in response to user input).

By supporting multiple threads, React can interrupt a low-priority update to render an urgent one, such as those generated by user inputs, and then resume the low-priority update as needed. The new renderer can also read layout information synchronously and across different threads. This enables background computation for low-priority updates and synchronous reads when needed, such as repositioning a tooltip.

Finally, rewriting the renderer in C++ allows it to be shared across all platforms. This ensures that the same code runs on iOS, Android, Windows, macOS, and any other React Native-supported platform, providing consistent rendering capabilities without needing re-implementation for each platform.

This is a significant step towards our [Many Platform Vision](/blog/2021/08/26/many-platform-vision). For example, View Flattening was an Android-only optimisation to avoid deep layout trees. The new renderer, with shared C++ core, [brings this feature to iOS](https://github.com/reactwg/react-native-new-architecture/discussions/110). This optimisation is automatic and does not require setup, it comes for free with the shared renderer.

With these changes, React Native now fully supports Concurrent React features like Suspense and Transitions, making it easier to build complex user interfaces that respond quickly to user input without jank, delays, or visual jumps. In the future, we will leverage these new capabilities to bring more improvements to built-in components such as FlatList and TextInput.

Popular libraries like [Reanimated](https://docs.swmansion.com/react-native-reanimated/) are already taking advantage of the New Renderer:

> ‚ÄúReanimated 4, currently in development, introduces a new animation engine that works directly with the New Renderer, allowing it to handle animations and manage layout across different threads. The New Renderer‚Äôs design is what truly enables these features to be built without relying on numerous workarounds. Moreover, because it‚Äôs implemented in C++ and shared across platforms, large portions of Reanimated can be written once, reducing platform-specific issues, minimizing the codebase, and streamlining adoption for out-of-tree platforms.‚Äù
>
> [Krzysztof Magiera](https://x.com/kzzzf), creator of [Reanimated](https://docs.swmansion.com/react-native-reanimated/)

### The Event Loop[‚Äã](#the-event-loop "Direct link to The Event Loop")

The New Architecture allowed us to implement a well-defined event loop processing model, as described in this [RFC](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0744-well-defined-event-loop.md). This RFC follows the specifications described in the [HTML Standard](https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model), and it describes how React Native should perform tasks on the JavaScript thread.

Implementing a well-defined event loop closes gaps between React DOM and React Native: the behavior of a React Native application is now closer to the behavior of a React DOM application, making it easier to learn once, and write anywhere.

The event loop brings many benefits to React Native:

* The ability to interrupt rendering to process events and tasks
* Closer alignment with web specifications
* Foundation for more browser features

With the Event Loop, React is able to predictably order updates and events. This allows React to interrupt a low priority update with an urgent user event, and the New Renderer allows us to render those updates independently.

The Event Loops also aligns the behavior of events and task like timers with web specifications, which means React Native works more like what users are familiar with in the Web, and allows for better code sharing between React DOM and React Native.

It also allows for the implementation of more compliant browser features like microtasks, `MutationObserver`, and `IntersectionObserver`. These features are not ready to use in React Native yet, but we are working on bringing them to you in the future.

Finally, the Event Loop and the New Renderer changes to support reading layout synchronously allow React Native to add proper support for `useLayoutEffect` to read layout information synchronously and update the UI in the same frame. This allows you to position elements correctly before they are displayed to the user.

See [`useLayoutEffect`](/blog/2024/10/23/the-new-architecture-is-here.md#uselayouteffect) for more details.

### Removing the Bridge[‚Äã](#removing-the-bridge "Direct link to Removing the Bridge")

In the New Architecture, we've also fully removed React Native's dependency on the bridge, replacing it with direct, efficient communication between JavaScript and native code using JSI:

![](/assets/images/0.76-bridge-diagram-4e31abb22d5626336e548fa646c8cfc4.png)

Removing the bridge improves startup time by avoiding bridge initialization. For example, in the old architecture, in order to provide global methods to JavaScript, we would need to initialize a module in JavaScript on startup, causing a small delay in app startup time:

```
// ‚ùå Slow initialization
import {NativeTimingModule} from 'NativeTimingModule';
global.setTimeout = timer => {
  NativeTimingModule.setTimeout(timer);
};

// App.js
setTimeout(() => {}, 100);
```

In the New Architecture, we can directly bind methods from C++:

```
// ‚úÖ Initialize directly in C++
runtime.global().setProperty(runtime, "setTimeout", createTimer);
```

```
// App.js
setTimeout(() => {}, 100);
```

The rewrite also improves error reporting, particularly for JavaScript crashes at startup, and reduces crashes from undefined behavior. If crashes occur, the new [React Native DevTools](/docs/next/react-native-devtools) simplify debugging and support the New Architecture.

The bridge remains for backward compatibility to support gradual migration to the New Architecture. In the future, we will remove the bridge code completely.

### Gradual Migration[‚Äã](#gradual-migration "Direct link to Gradual Migration")

We expect most apps can upgrade to 0.76 with the same effort as any other release.

When you upgrade to 0.76, the New Architecture and React 18 are enabled by default. However, to use concurrent features and gain the full benefits of the New Architecture, your app and libraries will need to be gradually migrated to fully support the New Architecture.

When you first upgrade, your app will run on the New Architecture with an automatic interoperability layer with the old architecture. For most apps, this will work without any changes, but there are [known limitations](https://github.com/reactwg/react-native-new-architecture/discussions/237) with the interop layer, as it does not support accessing custom Shadow Nodes or concurrent features.

To use concurrent features, apps will also need to be updated to support [Concurrent React](https://react.dev/blog/2022/03/29/react-v18#what-is-concurrent-react) by following the [Rules of React](https://react.dev/reference/rules). To migrate your JavaScript code to React 18 and its semantics, follow the [React 18 Upgrade guide](https://react.dev/blog/2022/03/08/react-18-upgrade-guide).

The overall strategy is to get your application running on the New Architecture without breaking existing code. You can then gradually migrate your app at your own pace. For new surfaces that have migrated all modules to the New Architecture, you can start using concurrent features immediately. For existing surfaces, you may need to address some issues and migrate modules before adding concurrent features.

We've collaborated with the most popular React Native libraries to ensure support for the New Architecture. More than 850 libraries are already compatible, including all libraries with over 200K weekly downloads (\~10% of downloaded libraries). You can check library compatibility with the New Architecture on the [reactnative.directory](https://reactnative.directory) website:

![](/assets/images/0.76-directory-301eb7410932204b4c5149cdd20f604c.png)

For more details on upgrading, see [How to Upgrade](/blog/2024/10/23/the-new-architecture-is-here.md#how-to-upgrade) below.

## New Features[‚Äã](#new-features "Direct link to New Features")

The New Architecture includes full support for React 18, concurrent features, and `useLayoutEffect` in React Native. For a full list of React 18 features, please see the [React 18 blog post](https://react.dev/blog/2021/12/17/react-conf-2021-recap#react-18-and-concurrent-features).

### Transitions[‚Äã](#transitions "Direct link to Transitions")

Transitions are a new concept in React 18 to distinguish between urgent and non-urgent updates.

* **Urgent updates** reflect direct interaction, like typing and pressing.
* **Transition updates** transition the UI from one view to another.

Urgent updates need immediate response to match our intuitions about how physical objects behave. However, transitions are different because the user doesn‚Äôt expect to see every intermediate value on screen. In the New Architecture, React Native is able to support rendering urgent updates and transition updates separately.

Typically, for the best user experience, a single user input should result in both an urgent update and a non-urgent one. Similar to ReactDOM, events like `press` or `change` are handled as urgent and rendered immediately. You can use the `startTransition` API inside an input event to inform React which updates are ‚Äútransitions‚Äù and can be deferred to the background:

```
import {startTransition} from 'react';

// Urgent: Show the slider value
setCount(input);

// Mark any state updates inside as transitions
startTransition(() => {
  // Transition: Show the results
  setNumberOfTiles(input);
});
```

Separating urgent events from transitions allows for a more responsive user interface, and a more intuitive user experience.

Here's a comparison of the old architecture without transitions and the new architecture with transitions. Imagine that each tile isn't a trivial view with a background color, but a rich component containing images and other components that are expensive to render. **After** using `useTransition` you avoid thrashing your app with updates and falling behind.

![A video demonstrating an app rendering many views (tiles) according to a slider input. The views are rendered in batches as the slider is quickly adjusted from 0 to 1000.](/img/new-architecture/without-transitions.gif)

**Before:** rendering tiles without marking it as a transition.

![A video demonstrating an app rendering many views (tiles) according to a slider input. The views are rendered in batches as the slider is quickly adjusted from 0 to 1000. There are less batch renders in comparison to the next video.](/img/new-architecture/with-transitions.gif)

**After:** rendering tiles *with transitions* to interrupt in-progress renders of stale state.

For more information, see [Support for Concurrent Renderer and Features](/architecture/landing-page.md#support-for-concurrent-renderer-and-features).

### Automatic Batching[‚Äã](#automatic-batching "Direct link to Automatic Batching")

When upgrading to the New Architecture, you will benefit from automatic batching from React 18.

Automatic batching allows React to batch together more state updates when rendering to avoid the rendering of intermediate states. This allows React Native to be faster and less susceptible to lags, without any additional code from the developer.

![A video demonstrating an app rendering many views according to a slider input. The slider value is adjusted from 0 to 1000 and the UI slowly catches up to rendering 1000 views.](/img/new-architecture/legacy-renderer.gif)

**Before:** rendering frequent state updates with legacy renderer.

![A video demonstrating an app rendering many views according to a slider input. The slider value is adjusted from 0 to 1000 and the UI resolves to 1000 views faster than the previous example, without as many intermediate states.](/img/new-architecture/react18-renderer.gif)

**After:** rendering frequent state updates with *automatic batching*.

In the old architecture, more intermediate states are rendered, and the UI keeps updating even when the slider stops moving. The New Architecture, renders fewer intermediate states and completes the rendering much sooner thanks to automatically batching the updates.

For more information, see [Support for Concurrent Renderer and Features](/architecture/landing-page.md#support-for-concurrent-renderer-and-features).

### useLayoutEffect[‚Äã](#uselayouteffect "Direct link to useLayoutEffect")

Building on the Event Loop and the ability to read layout synchronously, in the New Architecture we added proper support for `useLayoutEffect` in React Native.

In the old architecture, you needed to use the asynchronous `onLayout` event to read layout information of a view (which was also asynchronous). As a result there would be at least one frame where the layout was incorrect until the layout was read and updated, causing issues like tooltips placed in the wrong position:

```
// ‚ùå async onLayout after commit
const onLayout = React.useCallback(event => {
  // ‚ùå async callback to read layout
  ref.current?.measureInWindow((x, y, width, height) => {
    setPosition({x, y, width, height});
  });
}, []);

// ...
<ViewWithTooltip
  onLayout={onLayout}
  ref={ref}
  position={position}
/>;
```

The New Architecture fixes this by allowing synchronous access to layout information in `useLayoutEffect`:

```
// ‚úÖ sync layout effect during commit
useLayoutEffect(() => {
  // ‚úÖ sync call to read layout
  const rect = ref.current?.getBoundingClientRect();
  setPosition(rect);
}, []);

// ...
<ViewWithTooltip ref={ref} position={position} />;
```

This change allows you to read layout information synchronously and update the UI in the same frame, allowing you to position elements correctly before they are displayed to the user:

![A view that is moving to the corners of the viewport and center with a tooltip rendered either above or below it. The tooltip is rendered after a short delay after the view moves](/img/new-architecture/async-on-layout.gif)

In the old architecture, layout was read asynchronously in `onLayout`, causing the position of the tooltip to be delayed.

![A view that is moving to the corners of the viewport and center with a tooltip rendered either above or below it. The view and tooltip move in unison.](/img/new-architecture/sync-use-layout-effect.gif)

In the New Architecture, layout can be read in `useLayoutEffect` synchronously, updating the tooltip position before displaying.

For more information, see the docs for [Synchronous Layout and Effects](/docs/0.75/the-new-architecture/landing-page#synchronous-layout-and-effects).

### Full Support for Suspense[‚Äã](#full-support-for-suspense "Direct link to Full Support for Suspense")

Suspense lets you declaratively specify the loading state for a part of the component tree if it‚Äôs not yet ready to be displayed:

```
<Suspense fallback={<Spinner />}>
  <Comments />
</Suspense>
```

We introduced a limited version of Suspense several years ago, and React 18 added full support. Until now, React Native was not able to support concurrent rendering for Suspense.

The New Architecture includes full support for Suspense introduced in React 18. This means that you can now use Suspense in React Native to handle loading states for your components, and the suspended content will render in the background while the loading state is displayed, giving higher priority to user input on visible content.

For more, see the [RFC for Suspense in React 18](https://github.com/reactjs/rfcs/blob/main/text/0213-suspense-in-react-18.md).

## How to Upgrade[‚Äã](#how-to-upgrade "Direct link to How to Upgrade")

To upgrade to 0.76, follow the steps in the [release post](/blog/2024/10/23/release-0.76-new-architecture.md#upgrade-to-076). Since this release also upgrades to React 18, you will also need to follow the [React 18 Upgrade guide](https://react.dev/blog/2022/03/08/react-18-upgrade-guide).

These steps should be enough for most apps to upgrade to the New Architecture thanks to the interop layer with the old architecture. However, to take full advantage of the New Architecture and to start using concurrent features, you will need to migrate your custom Native Modules and Native Components to support the new Native Module and Native Component APIs.

Without migrating your custom Native Modules, you will not get the benefits of shared C++, synchronous method calls, or type-safety from codegen. Without migrating your Native Components, you will not be able to use concurrent features. We recommend migrating all Native Components and Native Modules to the New Architecture as soon as possible.

note

In a future release, we will remove the interop layer and modules will need to support the New Architecture.

### Apps[‚Äã](#apps "Direct link to Apps")

If you are an app developer, to fully support the New Architecture, you will need to upgrade your libraries, custom Native Components, and custom Native Modules to fully support the New Architecture.

We've collaborated with the most popular React Native libraries to ensure support for the New Architecture. You can check library compatibility with the New Architecture on the [reactnative.directory](https://reactnative.directory) website.

If any of the libraries your app depends on are not compatible yet, you can:

* Open an issue with the library and ask the author to migrate to the New Architecture.
* If the library is not maintained, consider alternative libraries with the same features.
* [Opt-out from the New Architecture](/blog/2024/10/23/the-new-architecture-is-here.md#opt-out) while those libraries are migrated.

If your app has custom Native Modules or custom Native Components, we expect them to work fine, thanks to our [interop layer](https://github.com/reactwg/react-native-new-architecture/discussions/135). However, we recommend upgrading them to the new Native Module and Native Component APIs to fully support the New Architecture and adopt concurrent features.

Please follow these guides to migrate your modules and components to the New Architecture:

* [Native Modules](/docs/next/turbo-native-modules-introduction)
* [Native Components](/docs/next/fabric-native-components-introduction)

### Libraries[‚Äã](#libraries "Direct link to Libraries")

If you are a library maintainer, please first test that your library works with the interop layer. If it does not, please open an issue on the [New Architecture Working Group](https://github.com/reactwg/react-native-new-architecture/).

To fully support the New Architecture, we recommend migrating your library to the new Native Module and Native Component APIs as soon as possible. This will allow users of your library to take full advantage of the New Architecture and support concurrent features.

You can follow these guides to migrate your modules and components to the New Architecture:

* [Native Modules](/docs/next/turbo-native-modules-introduction)
* [Native Components](/docs/next/fabric-native-components-introduction)

### Opt-out[‚Äã](#opt-out "Direct link to Opt-out")

If, for any reason, the New Architecture is not behaving properly in your application, there is always the option to opt-out from it until you are ready to turn it on again.

To opt-out from the New Architecture:

* On Android, modify the `android/gradle.properties` file and turn off the `newArchEnabled` flag:

```
-newArchEnabled=true
+newArchEnabled=false
```

* On iOS, you can reinstall the dependencies by running the command:

```
RCT_NEW_ARCH_ENABLED=0 bundle exec pod install
```

## Thanks[‚Äã](#thanks "Direct link to Thanks")

Delivering the New Architecture to the OSS community has been a huge effort that took us several years of research and development. We want to take a moment to thank all the current and past members of the React team who helped us achieve this result.

We are also extremely grateful to all the partners who collaborated with us to make this happen. Specifically, we would like to call out:

* [Expo](https://expo.dev/), for adopting the New Architecture early on, and for supporting the work on migrating the most popular libraries.
* [Software Mansion](https://swmansion.com/), for maintaining crucial libraries in the ecosystem, for migrating them to the New Architecture early and for all the help in investigating and fixing various issues.
* [Callstack](https://www.callstack.com/), for maintaining crucial libraries in the ecosystem, for migrating them to the New Architecture early and for the support with the work on the Community CLI.
* [Microsoft](https://opensource.microsoft.com/), for adding the New Architecture implementation for `react-native-windows` and `react-native-macos` as well as in several other developer tools.
* [Expensify](https://www.expensify.com/), [Kraken](https://www.kraken.com/), [Bluesky](https://bsky.app/) and [Brigad](https://www.brigad.co/) for pioneering the adoption of the New Architecture and reporting various issues so that we could fix them for everyone else.
* All the independent library maintainers and developers who contributed to the New Architecture by testing it, fixing some of the issues, and opening questions on unclear matters so that we could clear them.

**Tags:**

* [announcement](/blog/tags/announcement)


---

# React Native 0.77 - New Styling Features, Android‚Äôs 16KB page support, Swift Template

January 21, 2025 ¬∑

<!-- -->

16 min read

![Vojtech Novak](https://avatars.githubusercontent.com/u/1566403?v=4)

Vojtech Novak

Software Engineer @ Expo

[](https://x.com/vonovak "X")[](https://github.com/vonovak "GitHub")

![Mazen Chami](https://avatars.githubusercontent.com/u/9324607?v=4)

Mazen Chami

Software Engineer @ InfiniteRed

[](https://x.com/mazenchami "X")[](https://github.com/mazenchami "GitHub")

![Blake Friedman](https://github.com/blakef.png)

Blake Friedman

Software Engineer @ Meta

[](https://github.com/blakef "GitHub")

![Rob Hogan](https://avatars.githubusercontent.com/u/2590098?v=4)

Rob Hogan

Software Engineer @ Meta

[](https://x.com/robjhogan "X")[](https://github.com/robhogan "GitHub")

Today we are excited to release React Native 0.77!

This release ships several features: new styling capabilities such as support for `display: contents`, `boxSizing`, `mixBlendMode`, and `outline`-related properties to provide a more powerful layout options; Android 16KB page support to be compatible with the newer Android devices. We are also modernizing the community template by migrating it to Swift, while continuing to support and maintain compatibility with Objective-C for developers who prefer it.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [New CSS Features for better layouts, sizing and blending](#new-css-features-for-better-layouts-sizing-and-blending)
* [Android version 15 support & 16KB page support](#android-version-15-support--16kb-page-support)
* [Community CLI and Template Updates](#community-cli-and-template-updates)

### Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

* [Removal of `console.log()` streaming in Metro](#removal-of-consolelog-streaming-in-metro)

## Highlights[‚Äã](#highlights-1 "Direct link to Highlights")

### New CSS Features for better layouts, sizing and blending[‚Äã](#new-css-features-for-better-layouts-sizing-and-blending "Direct link to New CSS Features for better layouts, sizing and blending")

React Native 0.77 furthers our goal of aligning React Native with the web. We've added support for new CSS properties to give you more control over your app's layout, sizing, and blending. These changes can help simplify complex layouts, add texture, and make your app more accessible.

info

All these new features are available only for the [New Architecture](/blog/2024/10/23/the-new-architecture-is-here.md#how-to-upgrade).

#### Simpler layouts with `display: contents`[‚Äã](#simpler-layouts-with-display-contents "Direct link to simpler-layouts-with-display-contents")

The [`display: contents`](https://developer.mozilla.org/en-US/docs/Web/CSS/display#display_contents) prop allows an element to disappear from the layout structure while its children are still rendered as if they were direct children of the parent element. It can be useful for styling purposes where you want to apply styles to child elements without affecting the layout, when building wrapper components which must handle events, or if you need to interact with the ShadowTree.

Technically speaking, `display: contents` renders an element without generating a layout box, but it preserves the layout boxes of the element‚Äôs children. The element with `display: contents` is effectively flattened out of the view hierarchy.

Let‚Äôs have a look at this example where we want to display an alert when a widget is pressed. We have a red `Widget` inside of a container view:

Container.jsx

```
function Container() {
  return (
    <View style={styles.container}>
      <Widget />
    </View>
  );
}
```

![display contents - setup](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAi4AAAIsCAIAAABa4LWDAAAAA3NCSVQICAjb4U/gAAAAknpUWHRSYXcgcHJvZmlsZSB0eXBlIEFQUDEAAHjaVYw7CsMwEER7nWKPMPvRrPY4wcjBEJLg+xcp5BR+zcBjeO053/M8Nvmen/14zSYiIlLRoqLsAWBgYYArFAYgL8W1rJEIAHr5iRsdLDo1nfpvAbU6sT4ONzfHYBkSUFs+tnsrtHt4VNTVdnoaOztnOgf3jPYDroos+BNFvGwAABIUSURBVHja7NoxDsFgGMfhxkZXLtGBI4hJnEDiIhKzYBCHwgE02kR90UN0sRq7G/oNfZ787/Ab3jdpmq+ZmVnEDRIAiEqKAJAiAKQIAKQIACkCACkCQIoAQIoAkCIAkCIApAgApAgAKQIAKQJAigBAigCQIgCQIgCkCACkCAApAgApAkCKAECKAJAiAJAiAKQIAKQIACkCACkCQIoAQIoAkCIAkCIApAgApAgAKQIAKQJAigBAigCQIgCQIgCkCACkCAApAgApAkCK/lJVrzx/mJlZrNX1p9cpKoricNjvdlszM4u1y+Ucwru/KSrL5+12NTOziLvfryEEt6JkOp2t1xszM+tyWZa5FbWWy9XxeDIzsy43ny+kqJWm6Xg8MTOzLjccjqQIAM/cACBFAEgRAEgRAFIEAFIEgBQBgBQBIEUAIEUASBEASBEAUgQAUgSAFAGAFAEgRQAgRQBIEQBIEQBSBABSBIAUAYAUASBFACBFAEgRAEgRAFIEAFIEgBQBgBQBIEUAIEUASBEASBEAUgQAUgSAFAGAFAEgRQAgRQBIEQBIEQBSBABSBIAUAYAUASBFACBFAEgRAEgRAFIEAFIEgBQBgBQBIEUAIEUASBEAUgQAUgSAFAGAFAEgRQAgRQBIEQBIEQBSBABSBIAUAYAUASBFACBFAEgRAEgRAFIEAFIEgBQBgBQBIEUAIEUASBEASBEAUgQAUgSAFAGAFAEgRQAgRQBIEQBIEQBSBABSBIAUAYAUASBFACBFAEgRAEgRAFIEAFIEgBQBgBQBIEUAIEUASBEASBEAUgQAUgSAFAGAFAEgRQAgRQBIEQBIEQBSBABSBIAUAYAUASBFACBFAEgRAEgRAFIEgBTxY6/ObQAAYSAIZqZxkAOemmnAISKa0bVwWgCkCAApAgApAkCKAECKAJAiAJAiAKQIAKQIACkCACkCQIoAQIoAkCIAkCIApAgApAgAKQIAKQJAigBAigCQIgCQIgCkCACkCAApAgApAkCKAECKAJAiAJAiAKQIAKQIACkCACkCQIoAQIoAkCIAkCIApAgApAgAKQIAKQJAigBAigCQIgCQIgCkCACkCAApAgApAkCKAECKAJAiAJAiAKQIAKQIACkCACninchhVu9MB0GK+KFlNysXezkIUgSAFAGAFAEgRQAgRQBIEQBIEQBSBABSBIAUAYAUASBFACBFAEgRAEgRAFIEwGWv7lWkPMAwDF9nkSrHNqVn4Dl8gSTEIglJmZQiIoo2I2IjWNqJNrrMqqD77e7Miu7O7FgOwsi6yPoD99U/zQsvd0pRkqQUJUlKUZIkpShJUoqSJClFSZJSlCRJKUqSlKIkSUpRkqQUJUlSipIkpShJklKUJClFSZKUouTzLNllxitWNla8YsYuq85kY80RM2bMWZ9nuGDGjAXrTplSlO/Kkn1GFpw6w4qRkTkrX+o1l5hwmX0be1xmwiXeuCjv2WfkiLVPmjNyyKnt1rxlZOTYxVpynwkTbnJ8nuFtJky4y4mNE0ZGFpz2DylF+Sae8zsD1zlwhj0GBv7jwJc65h5THrC0ccIDptzjxEV5wj8MXGVpuyV/MvA3r213xA0G/uKpi7XmJVOmPOf0PMMdpkx58fHwGb8ycJPD/iGlKN/EDlcYuMWhM+wzMPA/cz+2A64y8BvvbDfjFwau8Mh2B/zLwDX2/Hh2+IOBOyz6h5Si5Gv6mZ/AY3Zt95C3YP6BfTtmbTIAAjD8JEZdHMSKJlCoOigubg6FxiGD6KCDCB0ytaODipMu7kKxUPsD4pZZx6pTq6aUaqmKVOtmQNoSNKaQkljnfGQItLSE3vMbDl7u4Hivi23W+ADOkNN/UmRAmlSMRYgUhbCXTjPEEZos6e4VLdCgQl3SP1apgUFO6T9pMiAVKQqRohD22FEucQJUdLHOO1pkaFPlh6Q2n8AAFzim/6Q5FFtRiBSFsF8uMgBmdLFMDYyCdT5LarMABjlPKg50IVIUwr7b4huT3GKYa9znJQ22d/shqcQ4Ba5Q5BkrbNG7cxwHy/yUVKEOimT5xTwtHTaZA1mGJDX5yhRF8hQYp0SVli6WeMJTXvOXGe6Q5wabetLiO9OMMsx1HjFLM7aiECkKB8QG0xR4wAs+8oYpbnKbRdrs3B+eM8IYJd4yT5m75JlgQ6+ynOUwWNShwSx1TnKZqzRZparDF2qkyZHTYY0JCtyjzAJzlBhjhBK/Ja3wkMeUmeQ/+3YXWmUdB3D8c/ac1WqtNnJBbRlooWZqNMyEpWLaalnRLnpjtaC7wCAi0FovQlE3xVKXa/TmhEYhUYuIXkFaoBNFdL5OfAE9vgx1vuLO2dm88uLAw/Hgbob8P/zun7vny4////8iq+jmD4Zc2TnW0sBifqSHf/iEepZwSLwEUfitBCFFwbVhgI95k34m8xSv8iyzuIk/eYOdRussrbzGAaqZTyNNPMpETvIOzfQrSMRDlIH1cvSRYpgGyqlF3HHRZlDBNEoBcIplNHOCu3mMJhqZRxX7eYsvOC1Gmr9ZBaZSQw0R+aX5i/fZRjkPUM/zzGc8nXSErSgIKQqubVm+o4XreYTlrGElq+ngZYbZRDvnRveVX2ghzWQ+opOv+JJOPmU2RXxDO4MKMp1S8C9DANhKP6gjYgYVHGQ7WQB0g3HcB4Ah2mnlOmr5jO9p42t+4EMmMUAbXWSQK0OKOy7najVtlMhnhAN8zh7G8Qrf8hMd/EorjzOYZysKN+iCkKJgjOilhWV5Z4V4u1nOMBN4mwWUgoh7aGYKF1jH9tE9xuzgBCU000glQDlP8x63kWEN2xRkEjeDHRwFuMgm+qlkJgmqmMlJdnIG4Dz/gXImAmAXK0E1S1jELQCVNPEuZRxmLQfFGM9SXmcOU5lBJJ8s6+gmYiGLmU4xuJGHWco88RJhKwpCioKxlqIP8s4K8bo4TJJFzCIhx+28BI6w0dX7n11kWcgzFCHXXBoYIUWXgtzKNCIy9AKk6GOQuVSCMh5khH2kAPo4RpI7qQLAzxwnyRPMISFHgidZQJYt9CBXMTXUUaJQGX4jSzX13CVHEROYLV6CopCiIKQoGCMquJf7884UMdL8ToZi6kiKUQtO0Uva1ciwgWPgOW4Qo5gXwHl6GHBlEbUkybIZYC+X2LmbF6vKOA7gn/syc69zZxrnxVR0MWph45hOWEKYUZZGBUWL/oaIiILWRi1aRZuKghYRtIikclMLoUXaixK+wFA6muOo5VsyDs7YvN57T6u7OHDOcOeOwow8H367A4dzHn6cL+ecH88/4AnyoIV+igxyAeA4KLGNIsAUB5ilmRcpSFDiBXCZASbE5Ommlfrd4mewLuUVKk9RsmwYWwhCFAWLx2N8xv456xMJRrhKRIVjfJFUR1DbBXxCI25ylRnwkFRbyVNllOvqso0cZQ5RpcIAw5R4hBzIs55N/M0ppsCvoBS/nutcIyJLnyS1QznK/MsY4jLm5xqjoItVUoR/RUGIomDxK7GWnjlrjQRjlME0b/NqUu0FmGFKIyaZAlghVRurwQzj6rKZIlWGucwIg9xiB2vIAKyknzKnGa1NrKGFXtSMUwZZOiXL0E4XmGDKQt0kAkVKUoQPdMHtlg9LECweZSKQoUmqJlDQoApVgGakWwYiKurSytPsY4IzdDAEtTnvmk4eIFMbrrvBDbKsY23SaqBJqiyF2H0tyCxAjqwUYWwhCG9FwV2sQBaU+J3BOetjVmhEkWaAm1KVuQLylNRrF5jgJEOcosAWWlBTpI8eBjjPH1TIs4ssakrkQMS4VFOMgGUULFQbwAzT5qeJLlbSFp4sQYiiYOlaThFERKyZs7rIaUQr7eTAWakuMA5a6FCv7WCSEwxyjX7uJy+mh14mOcUAVXI8LKaTVjJUOS9ZlYtMkKGdkoXqpgjGGDU/q3iDj3ieYujmIERRsER10EuOMj8RuSNa6aMdHCCS7EdQ4D5WqNdGVjHNMU6Cfu5F3Go2kOVPjlKhhT4xHdTmIBwkkqDML+AeNtBmobrZAi4xJEFEJFkHe3iZrTSHbg5CFAVLVI6XaGKWfZxDyg7WA1Q1bidrwdecluASn4PlPEdevVp4iirD/EaRPjoQ184mOjnCcapsZSXiaqvhWy5KcJZvwEa2k7NQTTwLznGIMcSNciZ0ahCiKLi77eFRqhzlfYbFVPiBN3mHwxq3mWdo5QJ7GRJzhQ84QY6dPGl+HgfjXGQ9vRRShrB7OMcIEbvJJp1qD1WO8yGXxZznXf6ind08iNsURRsY5zsOMImaG3zJ95LNcpaDXKIaWjkIURQsXd28Rw//8RWv82ltK5r9vMZbHOYKJY0r8Qo7yPqffft5saoO4DD8OBaUqUQZSj+gRrKwEBENFwm18H+IUBNSCyEXRiVFNNQiiCCpVYiarSRcFAMlkUhgCBK0qkRDchNuQpnUKcymZZR30ehMOPQ+fJb38oVzz+WFezlG2cy7fMFhdvMse7nEEl7kdpOzCkwwwYPca7DF3MVlJsBqA8zndZZynr1sYw+HOcR7rOcTbmQN65lnCsxiKU9zM8d5hZf5iM/YzWZ2csZgJ3ierbzNT93KKUWZ0R5hH8sZ43NeZR1PspV9nGI1b/GQa3IfO1nLb3zJCBvZwA4+5RzL2M0KkzbMEjDEYu402EKWcguYw3KDPcweVnKWUV5iA0/xGl/xO2t5k/tNmbmsYxM3cJJdbGMTOxjlNjYyxz9NcJqDfMcRfu4+Ts8VZUabzaOM8iH7OAGARWzhGRYx5JoM8QAH2M/7fM1ZgCVsYDMLruqUm1jDCe5hBXMMNpuVLOQUj3GrwYZYxcd8cMXVWMEWnmA+s0yZWdzNCMt4h+NcAHPZwnN8y0EuXvGuxTzOIVazqPs4kzI2Nn79bNeuPQsW3IGRkTfGxsbbTNkE07SL/MBRjvA9v07PKZc4zTGOcpJxJq7LXeQkRznGj1ye/hMvcJwjfMO5f/H685z5+8f0x7z5fUFm0LZvfwHDw8P79x/4L88tRW1qUtTaXytFpWiS6we6JEn/FSVJSlGSJKUoSVKKkiQpRUmSUpQkSSlKkpSiJElKUZKkFCVJUoqSJKUoSZJSlCQpRUmSlKIkSSlKkqQUJUlKUZIkpShJUoqSJClFSZJSlCRJKUqSlKIkSUpRkqQUJUlSipIkpShJklKUJClFSZKUoiRJKUqSpBQlSUpR/vd+GRvvIiS5akNdgiRJKUqSP9mrAwEAAAAAIP/XRpjQiqpqRVWtqKpWVNWKqmpFVa2oqlZU1YqqakVVraiqVlTViqpqRVWtqKpWVNWKqmpFVa2oqlZU1YqqakVVraiqVlTViqpqRVWtqKpWVNWKqmpFVa2oqlZU1YqqakVVraiqVlTViqpqRVWtqKpWVNWKqmpFVa2oqlZU1YqqakVVraiqVlTViqpqRVWtqKpWVNWKqmpFVa2oqlZU1YqqakVVraiqVlTViqpqRVWtqKoVVdWKqlpRVa2oqhVV1YqqWlFVraiqFVXViqpaUVWtqKoVVdWKqlpRVa2oqhVV1YqqWlFVraiqFVXViqpaUVWtqKoVVdWKqlpRVa2oqhVV1YqqWlFVraiqFVXViqpaUVWtqKoVVdWKqlpRVa2oqhVV1YqqWlFVraiqFVXViqpaUVWtqKoVVdWKqlpRVa2oqhVV1YqqWlFVraiqFVXViqpaUVWtqKoVVdWKqlpRVa2oqhVVtaKqWlFVK6qqFVW1oqpaUVUrqqoVVbWiqlpRVSuqqhVVtaKqWlFVK6qqFVW1oqpaUVUrqqoVVbWiqlpRVSuqqhVVtaKqWlFVK6qqFVW1oqpaUVUrqqoVVbWiqlpRVSuqqhVVtaKqWlFVK6qqFVW1oqpaUVUrqqoVVbWiqlpRVSuqqhVVtaKqWlFVK6pK+3VswiAUhWHUIjsHOyEjCGktUgQnECtxBC10D0FsRRttbZ6K5+fMcD+uSZGZmUmRmZmZFJmZmRSZmZndJEVt2+T5H4CQ+r6Tom1lWcTxG4CQ6rqKztgruuTGdZ5WM7NHbBimS0nTb5J8ADhLlv0CX/4lRQCwJ0UASBEASBEAUgQAUgSAFAGAFAEgRQAgRQBIEQBIEQBSBABSBIAUAYAUASBFACBFAEgRAEgRAFIEAFIEgBQBgBQBIEUAIEUASBEASBEAUgQAUgSAFAGAFAEgRQBw0AxE4nKw8dxXowAAAABJRU5ErkJggg==)

Now, let's build a new `Alerting` wrapper component, with the goal of alerting the user when a component beneath it is pressed, using [experimental pointer events](/blog/2022/12/13/pointer-events-in-react-native). For clarity, the background of this component is made blue. That might look something like the component below:

Container.jsx

```
function Alerting({children}) {
  return (
    <View
      style={{backgroundColor: 'blue'}}
      onPointerDown={() => alert('Hello World!')}>
      {children}
    </View>
}

function Container() {
  return (
    <View style={styles.container}>
      <Alerting>
        <Widget />
      </Alerting>
    </View>
  );
}
```

This doesn‚Äôt do quite what we want it to. `Alerting` adds a new layout box, with its own bounds, separate from the child `Widget`. Depending on the styling of the element it is wrapping, this may result in significant visual and functional changes. In this example, the blue background responds to taps with an alert when we want for only the red "Hello World" box to alert when tapped.

![before display contents](/assets/images/0.77-display-contents-2-593d0e47100de84ddad130e44df8e29b.gif)

If we try this again, while setting `display: contents` on the `View` wrapper of `Alerting`, we only see alerts when the user presses within the original bounds of the `Widget`. This is because `Alerting` no longer adds its own box, but can still observe the pointer events bubbled from `Widget`.

Container.jsx

```
function Alerting({children}) {
  return (
    <View
      style={{display: 'contents'}}
      onPointerDown={() => alert('Hello World!')}>
      {children}
    </View>
  );
}

// ... function Container ...
```

![after display contents](/assets/images/0.77-display-contents-3-84116bf7857e21e84bca5890a2d9e00c.gif)

#### Box sizing[‚Äã](#box-sizing "Direct link to Box sizing")

The `boxSizing` prop defines how the element's various sizing props (`width`, `height`, `minWidth`, `minHeight`, etc.) are computed. If `boxSizing` is `border-box`, these sizes apply to the border box of the element. If it is `content-box` they apply to the content box of the element. The default value is `border-box`, this is different from the default value on the web. The [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing) is a good source of information if you wish to learn more about how this prop works.

warning

`border-box` has been the default forever at this point, and has been the only `boxSizing` value up until we added `content-box`. Changing the default would have been a breaking change that would suddenly break several layouts. We decided to keep `border-box` as default value to ensure backward compatibility.

To understand the difference between `border-box` and `content-box`, have a look at these example, where both `View`s have `padding: 20` and `borderWidth: 10`. When using `border-box`, we consider border and padding for the sizing; when using `content-box`, we consider only the content for the sizing.

![after display contents](/assets/images/0.77-border-box-cfc6104410ab403e0f7b4809fb2087fe.png)

#### CSS mixBlendMode[‚Äã](#css-mixblendmode "Direct link to CSS mixBlendMode")

The `mixBlendMode` prop lets you control how an element blends its colors with the other elements in its **stacking context**. Check out the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode) for a full overview of each blending function.

To help have more granular control about what is blending together, we also added the `isolation` property. Setting `isolation: isolate` on a `View` will force it to form a **stacking context**. So, you can set this on some ancestor `View` to ensure that some descendent `View` with `mixBlendMode` does not blend beyond the **isolated** `View`.

##### mixBlendMode Values[‚Äã](#mixblendmode-values "Direct link to mixBlendMode Values")

* `normal`: The element is drawn on top of its background without blending.
* `multiply`: The source color is multiplied by the destination color and replaces the destination.
* `screen`: Multiplies the complements of the backdrop and source color values, then complements the result.
* `overlay`: Multiplies or screens the colors, depending on the backdrop color value.
* `darken`: Selects the darker of the backdrop and source colors.
* `lighten`: Selects the lighter of the backdrop and source colors.
* `color-dodge`: Brightens the backdrop color to reflect the source color. Painting with black produces no changes.
* `color-burn`: Darkens the backdrop color to reflect the source color. Painting with white produces no change.
* `hard-light`: Multiplies or screens the colors, depending on the source color value. The effect is similar to shining a harsh spotlight on the backdrop.
* `soft-light`: Darkens or lightens the colors, depending on the source color value. The effect is similar to shining a diffused spotlight on the backdrop.
* `difference`: Subtracts the darker of the two constituent colors from the lighter color.
* `exclusion`: Produces an effect similar to that of the Difference mode but lower in contrast.
* `hue`: Creates a color with the hue of the source color and the saturation and luminosity of the backdrop color.
* `saturation`: Creates a color with the saturation of the source color and the hue and luminosity of the backdrop color.
* `color`: Creates a color with the hue and saturation of the source color and the luminosity of the backdrop color. This preserves the gray levels of the backdrop and is useful for coloring monochrome images or tinting color images.
* `luminosity`: Creates a color with the luminosity of the source color and the hue and saturation of the backdrop color. This produces an inverse effect to that of the Color mode.

![blend mode](/assets/images/0.77-blend-mode-434273fec000ab313596eb9c0b4c856b.png)

#### Outline props[‚Äã](#outline-props "Direct link to Outline props")

We‚Äôve also introduced `outlineWidth`, `outlineStyle`, `outlineSpread` and `outlineColor`. These outline props work very similar to the respective `border` props, but it is rendered around the **border box** as opposed to around the **padding box**. These props allow to highlight elements by drawing their outline without affecting their layout.

Check out the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/outline) for more details.

![outline props](/assets/images/0.77-outline-props-4f2aec2904024a80275f98a9f2bb7b92.png)

### Android version 15 support & 16KB page support[‚Äã](#android-version-15-support--16kb-page-support "Direct link to Android version 15 support & 16KB page support")

#### Forced edge-to-edge on Android 15[‚Äã](#forced-edge-to-edge-on-android-15 "Direct link to Forced edge-to-edge on Android 15")

We‚Äôve already done some work to support Android 15 on the prior release. One of the noticeable changes in Android 15 is forced edge-to-edge display when you build apps with `targetSdk` 35.

If you have not looked into this yet, please refer to our prior [recommendation](https://github.com/react-native-community/discussions-and-proposals/discussions/827) on how this should be handled as ignoring this can potentially break your UI in the app.

note

If you are using the [`react-native-safe-area-context`](https://www.npmjs.com/package/react-native-safe-area-context) in your app, the library is already handling the forced edge-to-edge for you.

#### 16 KB page size support for Android[‚Äã](#16-kb-page-size-support-for-android "Direct link to 16 KB page size support for Android")

Android 15 introduces support for 16KB memory page size enabling [performance improvements](https://developer.android.com/guide/practices/page-sizes#benefits) for apps and more, but making previous 4KB-based apps potentially incompatible on future devices; it's currently an opt-in feature for developers to test on select devices to prepare for 16 KB page size being the OS default.

With the 0.77 release, React Native is ready to fully support 16 KB page size and developers will be able to test and ship apps for 16 KB devices using it.

Please refer to [the official Android Developers site](https://developer.android.com/guide/practices/page-sizes) for further information on 16 KB support.

### Community CLI and Template Updates[‚Äã](#community-cli-and-template-updates "Direct link to Community CLI and Template Updates")

#### Community CLI: react-native init deprecation[‚Äã](#community-cli-react-native-init-deprecation "Direct link to Community CLI: react-native init deprecation")

This version fully completes the deprecation of the `react-native init` command that was [introduced in React Native 0.75](/blog/2024/08/12/release-0.75.md#sunsetting-react-native-init).

As a reminder, you won‚Äôt be able to use the `react-native init` command anymore, but you‚Äôll have to either:

* [Use a framework](/blog/2024/06/25/use-a-framework-to-build-react-native-apps.md) such as Expo, with its own dedicated command to create a new project: `npx create-expo-app`
* Invoke the Community CLI directly with `npx @react-native-community/cli init`

#### Community CLI: Removal of "run on iOS/Android" key handlers from Metro[‚Äã](#community-cli-removal-of-run-on-iosandroid-key-handlers-from-metro "Direct link to Community CLI: Removal of \"run on iOS/Android\" key handlers from Metro")

In this version, we removed the ‚Äòa‚Äô and ‚Äòi‚Äô keyboard shortcuts from Metro. Those shortcuts were used to invoke the `run-android` & `run-ios` community CLI commands. Those keyboard shortcuts provided worse developer experience and were rarely used. Moreover, we believe that frameworks are better suited to orchestrate the terminal outputs.

You can read more about this change [in this dedicated post](https://github.com/react-native-community/discussions-and-proposals/discussions/821).

#### Community Template: Swift as programming language for iOS apps[‚Äã](#community-template-swift-as-programming-language-for-ios-apps "Direct link to Community Template: Swift as programming language for iOS apps")

info

Projects using Expo should not be affected by this change.

This change let us slim down the community template by replacing three files (`main.m`, `AppDelegate.h` and `AppDelegate.mm`) with a single, new [`AppDelegate.swift`](https://github.com/react-native-community/template/blob/main/template/ios/HelloWorld/AppDelegate.swift).

This is technically a breaking change: you‚Äôll see the change from Objective-C to Swift in the upgrade helper like this:

![Swift Upgrade Helper](/assets/images/0.77-swift-upgrade-helper-abe4ca2c5be24c5d4f7612250042b077.png)

You don‚Äôt have to migrate to Swift: the Objective-C++ variant of the iOS community template is still supported (note that you still need to integrate the [`RCTAppDependencyProvider`](#rctappdependencyprovider)). New projects will be generated by using Swift as the iOS app language, although you can always migrate back to Objective-C if you need to.

##### Limitations[‚Äã](#limitations "Direct link to Limitations")

If your app has some local modules that are written in C++, you would not be able to register them in Swift as shown in [this guide](/docs/next/the-new-architecture/pure-cxx-modules#3-registering-the-cxx-turbo-native-module-in-your-app).

If your app falls in this category, please skip the migration of the AppDelegate to Swift, and keep using Objective-C++ for your app.

React Native core is mostly developed using C++ to encourage code sharing between iOS and Android and other platforms. The interoperability between Swift and C++ is not mature nor stable, yet. We are looking into ways to fill this gap and let you migrate to Swift too.

##### RCTAppDependencyProvider[‚Äã](#rctappdependencyprovider "Direct link to RCTAppDependencyProvider")

React Native 0.77 slightly changes how the app loads third party dependencies. This is a new line in the community template that, if missed, can cause some runtime issues. Make sure to add it to your app.

The equivalent Objective-C lines are the following:

AppDelegate.mm

```
#import "AppDelegate.h"

#import <React/RCTBundleURLProvider.h>
#import <ReactAppDependencyProvider/RCTAppDependencyProvider.h>


@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  self.moduleName = @"<Your app Name>";
  self.dependencyProvider = [RCTAppDependencyProvider new];
  // You can add your custom initial props in the dictionary below.
  // They will be passed down to the ViewController used by React Native.
  self.initialProps = @{};

  return [super application:application didFinishLaunchingWithOptions:launchOptions];
}

// remaining of the AppDelegate
```

## Breaking Changes[‚Äã](#breaking-changes-1 "Direct link to Breaking Changes")

### Removal of `console.log()` streaming in Metro[‚Äã](#removal-of-consolelog-streaming-in-metro "Direct link to removal-of-consolelog-streaming-in-metro")

We want every aspect of React Native debugging to behave reliably and to match the functionality of modern browser tooling. To meet this quality bar, log forwarding via Metro, originally deprecated in 0.76, is removed in 0.77.

This integration relied on a custom approach to communicate with the debugging target on device. With this change, we are moving exclusively to the Chrome DevTools Protocol (CDP).

* To view JS logs, please use [React Native DevTools](/docs/react-native-devtools.md) and its fully featured Console panel ‚Äî supporting log filtering, rich object inspection, Live Expressions, and more.
* You can also connect VS Code as a CDP debugger, via third party extensions such as [Expo Tools](https://github.com/expo/vscode-expo) and [Radon IDE](https://ide.swmansion.com/).
  <!-- -->
  * Please note that these integrations are not directly supported by the React team. However, we are working on first party VS Code support in 2025.
* Expo continues to offer log streaming in Expo CLI.

For more info, see [*Why are JavaScript logs leaving Metro?*](https://github.com/react-native-community/discussions-and-proposals/discussions/819#:~:text=Why%20are%20JavaScript%20logs%20leaving%20Metro%3F)

### Other Breaking Changes[‚Äã](#other-breaking-changes "Direct link to Other Breaking Changes")

#### General[‚Äã](#general "Direct link to General")

* Animation
  <!-- -->
  * Native looping animation do not send a React state update every time the loop ends.

* Layout

  <!-- -->

  * `position` of sticky headers on `ScrollView` will now be taken into account.
  * Absolute positioning is now behaving in a more compliant way

* JS Modules:
  <!-- -->
  * Remove `ReactFabricInternals` module
    <!-- -->
    * This is not going to be accessible anymore

* Native Modules
  <!-- -->
  * `NativeModules` object can now be used to load turbomodules in JS .
    <!-- -->
    * This improves compatibility between Native Modules and Turbo Native Modules

* Packages
  <!-- -->
  * dev-middleware: Frameworks should specify `serverBaseUrl` relative to the middleware host

* API Changes:

  <!-- -->

  * Removed type for `useConcurrentRoot` from `AppRegistry`, as it was already ignored
  * Removed `refs` property from `NativeMethods` TypeScript definition.

* UX Changes:
  <!-- -->
  * Remove "run on iOS" and "run on Android" from the dev server key commands

#### Android[‚Äã](#android "Direct link to Android")

* Kotlin
  <!-- -->
  * This is the first version of React Native that builds against Kotlin 2.0.21. You can read more about the changes coming with Kotlin 2.0 on the [language release notes](https://kotlinlang.org/docs/whatsnew2020.html).

* API Changes:

  <!-- -->

  * Nullability:

    <!-- -->

    * Non-primitive getters in `ReadableArray` are now correctly typed as optional
    * Make `ReactHost.createSurface()` method non nullable

  * Renamed:
    <!-- -->
    * `DevSupportManagerBase.getCurrentContext()` to `DevSupportManagerBase.getCurrentReactContext()`

Additionally, several APIs have been removed or restricted in visibility, so they can‚Äôt be accessed anymore. Those APIs were internal and not needed to React Native developers directly. You can find the full list below:

List of Removed Android APIs:

The following packages are now internal and can‚Äôt be accessed anymore:

* `com.facebook.react.views.progressbar`
* `com.facebook.react.views.safeareaview`
* `com.facebook.react.modules.accessibilityinfo`
* `com.facebook.react.modules.appstate`
* `com.facebook.react.modules.clipboard`
* `com.facebook.react.modules.devmodule`
* `com.facebook.react.modules.reactdevtoolssettings`
* `com.facebook.react.views.unimplementedview`

The following classes are now either internal or have been removed, so can‚Äôt be accessed anymore:

* `BackHandler.removeEventListener`
* `BaseViewManagerInterface`
* `BindingImpl`
* `CompositeReactPackage`
* `DebugOverlayTags`
* Method `create()` from `DefaultDevSupportManagerFactory`
* `DevToolsReactPerfLogger`
* `FabricComponents`
* `ImageStoreManager`
* `InteropModuleRegistry`
* `NativeModulePerfLogger`
* `NoopPrinter`
* `NotThreadSafeViewHierarchyUpdateDebugListener`
* `OkHttpCallUtil`
* `PrinterHolder`
* `Printer`
* `ReactDebugOverlayTags`
* `ReactNativeFlipper`
* `ReactViewBackgroundManager`
* `ReactViewGroup.getBackgroundColor()`
* `ReactVirtualTextShadowNode`
* `ReactVirtualTextViewManager`
* `SimpleSettableFuture`
* `SwipeRefreshLayoutManager`
* `TaskCompletionSource`
* Parameter `jsBundleLoader` from DefaultReactHost.getDefaultReactHost()

#### iOS[‚Äã](#ios "Direct link to iOS")

* API Changes

  <!-- -->

  * Removed

    <!-- -->

    * `RCTConstants.RCTGetMemoryPressureUnloadLevel`
    * `partialBatchDidFlush`
    * `RCTRuntimeExecutor`
    * `UseNativeViewConfigsInBridgelessMode`
      * Replaced by a proper feature flag
    * `UseTurboModuleInteropForAllTurboModules`
      * Interop layer is always on for TMs

  * Changed
    <!-- -->
    * Replace uses of `CGColorRef` with `UIColor`

* `RCTAppDelegate` now requires to use the `RCTDependencyProvider` to load third party dependencies

* CocoaPods sets C++ version for all the 3rd party dependencies to avoid compilation issues.

**React 19?**

React 19 was released the 6th of December 2024. At the time, we already cut the branch for React Native 0.77 and we already released three RCs for React Native 0.77. It was too late in the release of React Native 0.77 to introduce React 19 in this release.

React 19 will be shipped in React Native 0.78, and we already cut the branch for this version. You can try it by creating a new app with the command:

```
npx @react-native-community/cli init YourReact19App --version 0.78.0-rc.0
```

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.77 contains over **1061** commits from **161** contributors. Thanks for all your hard work!

Thanks to all the additional authors that worked on documenting features in this release post:

* [Jakub Piasecki](https://github.com/j-piasecki) for contributing to the `display: contents` feature
* [Nick Gerleman](https://github.com/NickGerleman), [Joe Vilches](https://github.com/joevilches) and [Jorge Cabiedes Acosta](https://github.com/jorge-cab) for releasing the new styling features
* [Alan Lee](https://github.com/alanleedev) for the Android 16Kb page support content
* [Riccardo Cipolleschi](https://github.com/cipolleschi) and [Oskar Kwa≈õniewski](https://github.com/okwasniewski) for supporting the migration of the template to Swift
* [Nicola Corti](https://github.com/cortinico) for the `react-native init` deprecation cycle content
* [Alex Hunt](https://github.com/huntie) for the content on the removal of `console.log` from metro

### Upgrade to 0.77[‚Äã](#upgrade-to-077 "Direct link to Upgrade to 0.77")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the Upgrading docs.

To create a new project:

```
npx @react-native-community/cli@latest init MyProject --version latest
```

If you use Expo, React Native 0.77 will be supported in Expo SDK 52 (instructions on how to update React Native inside your Expo project to 0.77.0 will be available in a separate Expo blog post in the near future).

info

0.77 is now the latest stable version of React Native and 0.74.x moves to unsupported. For more information see [React Native's support policy](https://github.com/reactwg/react-native-releases/blob/main/docs/support.md#releases-support-policy). We aim to publish a final end-of-life update of 0.74 in the near future.

**Tags:**

* [engineering](/blog/tags/engineering)


---

# React Native Core Contributor Summit 2024 Recap

February 3, 2025 ¬∑

<!-- -->

10 min read

![Micha≈Ç Pierzcha≈Ça](https://github.com/thymikee.png)

Micha≈Ç Pierzcha≈Ça

Head of Technology @ Callstack

[](https://x.com/thymikee "X")[](https://github.com/thymikee "GitHub")

![Szymon Rybczak](https://github.com/szymonrybczak.png)

Szymon Rybczak

Software Engineer @ Callstack

[](https://x.com/szymonrybczak "X")[](https://github.com/szymonrybczak "GitHub")

![Mo Javad](https://github.com/mojavad.png)

Mo Javad

Head of Mobile (UK) @ Theodo

[](https://x.com/mo__javad "X")[](https://github.com/mojavad "GitHub")

![Steven Moyes](https://github.com/stmoy.png)

Steven Moyes

Senior Product Manager @ Microsoft

[](https://x.com/moyessa "X")[](https://github.com/stmoy "GitHub")

Every year, the core contributors in the React Native Community get together with the React Native team to collaboratively shape the direction of this project.

Last year was no different‚Äîwith small exception. We usually meet a day before [React Universe Conf](https://www.reactuniverseconf.com) (formerly React Native EU) at [Callstack](https://www.callstack.com/open-source) HQ in Wroc≈Çaw. In 2024, learning from past experiences, we hosted the Summit for two consecutive days, so that we can have more unstructured time together.

![all-participants](/assets/images/react-native-core-contributor-summit-2024-1-fd96c5042217025035a569cf7ceea4e5.jpeg)

This annual tradition has become a valuable opportunity for contributors to share insights and voice their concerns, and for the core team to share their plans and gather feedback from key contributors to the React Native ecosystem‚Äîincluding partner companies, individual library authors and friends.

We divided the Summit into two tracks covering following topics:

* [Releases](#releases)
* [What's next after the New Architecture?](#whats-next-after-the-new-architecture)
* [Web APIs spec for Native Modules](#web-apis-for-native-modules)
* [LeanCore 2.0](#leancore-20)
* [Nitro Modules - Unblocking View Components by exposing props as jsi::Values](#nitro-modules---unblocking-view-components-by-exposing-props-as-jsivalues)
* [Out Of Tree Platforms & CocoaPods](#out-of-tree-platforms--cocoapods)
* [React Native on Desktop](#react-native-on-desktop)

In this blog post, we‚Äôd like to give you a sneak peek of the results of this gathering.

## Releases[‚Äã](#releases "Direct link to Releases")

We had an extensive discussion about the release process for React Native. Core Team appreciates the value of having contributors from outside Meta involved in releases and emphasizes the importance of having nightly releases, which are particularly beneficial for Out-of-Tree platforms like React Native visionOS, library maintainers (Reanimated) and frameworks (Expo). We discussed the frequency of releases, with some folks asking for more frequent releases to ship fixes faster, while others expressed concerns about the impact on 3rd party libraries and upgrading efforts.

We also brainstormed ways to reduce unintentional breaking changes and improve communication about compatibility between React Native and 3rd party dependencies.

This session showed how complex it is to manage releases for React Native, and how delicate this topic is, given all the different parts of the ecosystem that need to be considered.

## What's next after the New Architecture?[‚Äã](#whats-next-after-the-new-architecture "Direct link to What's next after the New Architecture?")

Now that the New Architecture has shipped as stable, we discussed what we should focus on next. What could be the next big thing? The topics revolved around:

* **Web compatibility** ‚Äì concluded in the discussion around direction of the React Strict DOM project, which should be treated as a temporary polyfill, while the Xplat team implements proper cross-platform functionality into the core of React Native.
* **Stabilizing the core API** ‚Äì turned out we need more consensus on what this means for app developers, library authors, Out-of-Tree platforms. E.g. it may be necessary to extract platform-native logic for iOS and Android from the shared C++ codebase. Part of which was covered by the LeanCore 2.0 discussion.
* **Old architecture support** ‚Äì as expected, the team confirmed that new React 19 features based on concurrent rendering, won‚Äôt work in old architecture. New features are primarily targeted for the new architecture. Due to blockers in React 19 release schedule it‚Äôs still not clear where to draw the line between functionality supported by both new and old architecture.
* **3rd party libraries for React Native** ‚Äì today we library authors can use TurboModules, ExpoModules, recently NitroModules to achieve the same goal of bridging native platform functionality. We need better documentation on how to make it well.
* **Brownfield docs** ‚Äì at the time of the summit, the official documentation for integrating React Native into native apps was quite dated. Since then the team has followed through with up-to-date and simpler docs for Android and iOS.
* **Tree-shaking for Metro web** ‚Äì core Metro team is open to merge the work from the Expo team in this area.

## Web APIs for Native Modules[‚Äã](#web-apis-for-native-modules "Direct link to Web APIs for Native Modules")

This session was dedicated to Microsoft's RFC revolving around the idea of bringing a subset of Web APIs to React Native. It aims to enhance React Native‚Äôs scalability and attract more web developers by leveraging familiar APIs. Opening access to a wealth of existing open-source web libraries that don't have explicit React Native support.

![web-apis](/assets/images/react-native-core-contributor-summit-2024-2-139b7ce3d6c35e06c8dc1c9dd1ecaada.jpeg)

Standardizing on Web API specifications is not only beneficial but also essential for React Native growth, and aligns well with our Many Platforms vision and react-strict-dom project. The web offers a unified interface through its specifications, which React Native community modules currently lack. Microsoft has identified around 200 essential Web APIs that could be implemented first for platforms they support: iOS, Android, Windows and macOS.

We encourage library developers to align their APIs with web specifications whenever possible, as this standardization will improve code portability and developer experience across platforms.

While the proposal seems beneficial for the future of React Native, we're still brainstorming the next steps forward. One concern we noticed is governance of the APIs, and whether they‚Äôd need to live in a separate repository from the platform implementations. Another around diverging from the official specification in case a specific platform allows for behaviors not specified by the W3C. We would need to figure out how to avoid bundling unnecessary modules, e.g. with a Babel plugin. Not to mention the scope of such initiative is quite large.

The session conclusion reinforced two key points: First, there is strong alignment across the React Native community on adopting web-compatible specifications where possible. Second, we need to establish a clear technical strategy for how these Web API implementations can be maintained separately for different platforms. Microsoft together with Callstack could work on refining the original RFC and produce a proof of concept implementation for a smaller number of APIs as a community initiative. This incremental approach will help us validate the design and developer experience before expanding the scope.

## LeanCore 2.0[‚Äã](#leancore-20 "Direct link to LeanCore 2.0")

In 2019, the React Native team started the Lean Core initiative. The goal was to tackle the surface area of React Native‚Äôs core and reduce APIs and components that were outdated and legacy. Since then, the React Native components and API surfaces have been long overdue another round of clean up.

Today, there are many components that are not actively being maintained with better community alternatives. Additionally, there are components that have duplicates that should eventually be consolidated for maintainability.

On the API side, a lot of the JS layer APIs are tied to native iOS & Android implementations, rather than being truly platform agnostic. For example, with Pressable, we have props like `android_disableSound` and `android_ripple`. Ideally, React Native components should have the smallest possible API surface that is not tied to any specific platform.

As Out-of-Tree platforms are growing and being adopted more by the ecosystem, there needs to be a path to reduce the component and API surface of React Native core, reducing the load on the React Native core team, and also making it significantly easier for Out-of-Tree platform & library maintainers to stay up-to-date.

As an added bonus, this would make it easier for beginner app developers to pick up React Native, as there are less duplicated components and "gotchas" for them to learn. Where there is a better community alternative, developers can be signposted and encouraged to use the community alternatives available.

During the session, we discussed:

* The high level motivations of Lean Core and the benefits to the parties involved (developers, library maintainers, Meta)

* An aggregated view of what components are being used in some real-world production React Native apps

* The criteria of what is a candidate to be removed from core

* A clear action plan for executing Lean Core 2.0 with:

  <!-- -->

  * The high-level process for deprecation
  * Handling cases where Meta is using components internally that have better community alternatives,

As a next step, a group of the core contributors will look at collecting more telemetry and data, assessing community alternatives, and putting together an RFC detailing the proposed changes.

## Nitro Modules - Unblocking View Components by exposing props as jsi::Values[‚Äã](#nitro-modules---unblocking-view-components-by-exposing-props-as-jsivalues "Direct link to Nitro Modules - Unblocking View Components by exposing props as jsi::Values")

Recently, Marc Rousavy introduced Nitro Modules as an alternative approach to creating Native Modules. Nitro Modules utilize experimental C++ Swift Interop and incorporate a bunch of enhancements that can lead to improved performance in certain scenarios. However, during this session, we discussed the various trade-offs involved between Nitro Modules and existing TurboModules.

While Nitro Modules offer some performance benefits, they also have limitations and considerations that need to be addressed. For example, the use of experimental interop features might introduce complexity or compatibility issues that are not present in TurboModules. Our discussion focused on these trade-offs and the potential for upstreaming some of Nitro Modules' improvements into React Native Core, which could allow developers to benefit from more performant modules for everyone.

## Out-of-Tree Platforms & CocoaPods[‚Äã](#out-of-tree-platforms--cocoapods "Direct link to Out-of-Tree Platforms & CocoaPods")

Out-of-Tree Platforms presents the full power of React Native, where we can share one JS codebase between different platforms running on our mobile devices, desktops or even on VR/XR devices. Creating such a platform currently isn‚Äôt the easiest process, actually there are no guidelines on how things should be created, developed and maintained. Also React Native Core in a way is tied to Android and iOS platforms. In the future we could aim for a scenario where all the platforms are treated equally and integrate with a C++/JS core through the same APIs.

![oot-platforms](/assets/images/react-native-core-contributor-summit-2024-3-bc9dcff91273a72b85b10b8ec6e9d5a3.jpeg)

During this session maintainers of different platforms discussed what are the problems, what they struggle with and what should be the solution to unify the process of creating and maintaining new Out-of-Tree platforms.

Another aspect of this session was to discuss CocoaPods and future plans related to managing native dependencies. Recently the CocoaPods team announced that they‚Äôve moved to maintenance mode and new major improvements or features won‚Äôt be shipped. There are various alternatives that could be used and during this session we discussed their pros and cons, and what migration would look like.

## React Native on Desktop[‚Äã](#react-native-on-desktop "Direct link to React Native on Desktop")

Steven and Saad from Microsoft, maintainers of react-native-windows and react-native-macos, hosted a session to listen and gather feedback from contributors related to Desktop platforms. Topics discussed included exploring how to increase adoption of React Native for Desktop (such as having a dedicated workflow in Visual Studio, or exposing desktop as part of Nx), as well as how to support Expo, which is a continual pain point for more adoption.

There‚Äôs a big discrepancy in availability of community modules between macOS and Windows, largely due to the fact that iOS code is mostly compatible with macOS, while RNW needs bespoke implementations. While working on the New Architecture for React Native for Windows, the team sees potential in C++ modules allowing for even more code sharing across platforms which will hopefully ease the burden of targeting desktop platforms. It‚Äôs worth noting that on the community side Software Mansion is working on adding desktop support for their most popular modules, such as React Native Screens, Gesture Handler and Reanimated.

***

We‚Äôre still impressed by how spending several hours together for a couple of days resulted in so much knowledge-sharing and cross-pollination of ideas. During this summit, we planted the seeds for initiatives that will help us improve and re-shape the React Native ecosystem.

If you‚Äôre interested in joining the development of React Native, make sure you join our open initiatives and read the [contribution guide](https://reactnative.dev/contributing/overview) we have on our website. We hope to meet you in person as well in the future!

**Tags:**

* [engineering](/blog/tags/engineering)


---

# React Native 0.78 - React 19 and more

February 19, 2025 ¬∑

<!-- -->

11 min read

![Vojtech Novak](https://avatars.githubusercontent.com/u/1566403?v=4)

Vojtech Novak

Software Engineer @ Expo

[](https://x.com/vonovak "X")[](https://github.com/vonovak "GitHub")

![Shubham Gupta](https://github.com/shubhamguptadream11.png)

Shubham Gupta

Software Engineer @ Dream11

[](https://x.com/sg43245 "X")[](https://github.com/shubhamguptadream11 "GitHub")

![Fabrizio Cucci](https://avatars.githubusercontent.com/u/8156463?v=4)

Fabrizio Cucci

Software Engineer @ Meta

[](https://x.com/fabriziocucci "X")[](https://github.com/fabriziocucci "GitHub")

![Riccardo Cipolleschi](https://github.com/cipolleschi.png)

Riccardo Cipolleschi

Software Engineer @ Meta

[](https://x.com/CipolleschiR "X")[](https://github.com/cipolleschi "GitHub")

Today we are excited to release React Native 0.78!

This release ships React 19 in React Native and some other relevant features like native support for Android Vector drawables and better brownfield integration for iOS.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [React 19](/blog/2025/02/19/react-native-0.78.md#react-19)
* [Towards smaller and faster releases](/blog/2025/02/19/react-native-0.78.md#towards-smaller-and-faster-releases)
* [Opt-in for JavaScript logs in Metro](/blog/2025/02/19/react-native-0.78.md#opt-in-for-javascript-logs-in-metro)
* [Added support for Android XML drawables](/blog/2025/02/19/react-native-0.78.md#added-support-for-android-xml-drawables)
* [ReactNativeFactory on iOS](/blog/2025/02/19/react-native-0.78.md#reactnativefactory-on-ios)

## Highlights[‚Äã](#highlights-1 "Direct link to Highlights")

### React 19[‚Äã](#react-19 "Direct link to React 19")

React 19 is now available on React Native!

React 19 requires updating your app, as we introduced some changes from React 18. For example, we removed some APIs such as `propTypes`, and you need to adjust your app to make it compatible with the new version of React.

Follow our step-by-step [instructions to upgrade](https://react.dev/blog/2024/04/25/react-19-upgrade-guide) your app to React 19.

After the migration, you‚Äôll be able to leverage all the new features of React, including (non exhaustively):

* **[Actions](https://react.dev/blog/2024/12/05/react-19#actions):** these are functions that use async transitions. Async transitions automatically manage submitting data for you: they handle pending states, optimistic updates, error handling and more.
* **[useActionState](https://react.dev/reference/react/useActionState):** a utility hook built on top of Actions. It takes a function and returns a wrapped Action to call. When the action is called, it will return the last result of the Action and its `pending` state.
* **[useOptimistic](https://react.dev/reference/react/useOptimistic):** a new hook that simplifies showing the final state of an update optimistically while the async request is underway. If the request errors, React will switch back to the previous value automatically.
* **[`use`](https://react.dev/reference/react/use):** this is a new API that allows access to resources during render. You can now read a promise or a context with `use` and React will Suspend until they resolve.
* **[`ref` as `props`](https://react.dev/blog/2024/12/05/react-19#ref-as-a-prop):** you can now pass `ref` as a `prop` like you do with any other prop. Function components will no longer need `forwardRef` and you can migrate your components now.
* And many others

For a complete list of the new available features, have a look at the [React 19 release blog post](https://react.dev/blog/2024/12/05/react-19).

#### React Compiler[‚Äã](#react-compiler "Direct link to React Compiler")

React Compiler is a build-time tool designed to optimize React applications by automatically applying memoization. While developers can manually use APIs like `useMemo`, `useCallback`, and `React.memo` to prevent unnecessary recomputation of unchanged parts of an app, they could also forget or misuse these optimizations. React Compiler addresses this by leveraging its understanding of JavaScript and of the [Rules of React](https://react.dev/reference/rules) to automatically memoize values or groups of values within components and hooks.

With this release, we simplified the process to enable the React Compiler in your React Native apps. [In previous versions](https://react.dev/learn/react-compiler#using-react-compiler-with-react-17-or-18), you had to install two packages: the compiler and its runtime. After those packages were installed, you had to configure a Babel plugin to enable React Compiler through Metro.

Now, you only need to install the compiler itself and to configure the Babel plugin. To learn how to enable it, you can follow our step-by-step [guide](https://react.dev/learn/react-compiler#usage-with-babel).

To verify that the compiler is running, you can open the React Native DevTools: you should see that the components that are memoized have the `Memo ‚ú®` tag attached to them in the Component Inspector.

If you want to learn more about React Compiler, these are useful resources:

* [React Compiler](https://react.dev/learn/react-compiler) docs
* [React Compiler Deep Dive](https://www.youtube.com/watch?v=uA_PVyZP7AI)

### Towards smaller and faster releases[‚Äã](#towards-smaller-and-faster-releases "Direct link to Towards smaller and faster releases")

We‚Äôre updating our release process to ship stable React Native releases more frequently in 2025.

It will be easier for you to update the React Native version because we‚Äôll be reducing the number of breaking changes we ship. Faster releases also means that all the bugfixes we ship internally are reaching you earlier, and you can benefit from the latest features we develop inside React Native.

We believe this new model will benefit every developer in the React Native ecosystem, as fewer breaking changes means a more stable framework that everyone can rely on.

### Opt-in for JavaScript logs in Metro[‚Äã](#opt-in-for-javascript-logs-in-metro "Direct link to Opt-in for JavaScript logs in Metro")

We've added an opt-in to restore JavaScript log streaming via the Metro dev server, [previously removed in 0.77](/blog/2025/01/21/version-0.77.md#removal-of-consolelog-streaming-in-metro) for Community CLI users. This is in response to user feedback, as well as reviewing where we are with our replacement offerings today.

To opt in, use the new `--client-logs` flag. This can also be aliased via an npm script for convenience.

```
npx @react-native-community/cli start --client-logs
```

Log streaming in Metro will still be going away in future and remains off by default. However, we intend to give developers a longer migration period to adapt to this change.

This update will also be made available in the incoming 0.77.1 minor release.

### Added support for Android XML drawables[‚Äã](#added-support-for-android-xml-drawables "Direct link to Added support for Android XML drawables")

In React Native 0.78, we‚Äôre shipping a new way to load icons, illustrations, and other graphic elements on Android as [XML resources](https://developer.android.com/guide/topics/resources/drawable-resource). This means you can use [vector drawables](https://developer.android.com/develop/ui/views/graphics/vector-drawable-resources) for displaying vector images at any scale without losing quality, or [shape drawables](https://developer.android.com/guide/topics/resources/drawable-resource#Shape) for drawing more basic embellishments. This is all supported by the same `Image` component that you know and love. To use this feature today, you can import XML resources like any other [static resource](/docs/next/images#static-image-resources) by referencing them in the `source` prop. Furthermore, using XML resources rather than bitmaps will also help you reduce your application size and will result in better rendering across screens with different DPI.

```
// via require
<Image
  source={require('./img/my_icon.xml')}
  style={{width: 40, height: 40}}
/>;

// or via import
import MyIcon from './img/my_icon.xml';
<Image source={MyIcon} style={{width: 40, height: 40}} />;
```

#### Performance & Quality[‚Äã](#performance--quality "Direct link to Performance & Quality")

[Like all other image types](/docs/next/images#off-thread-decoding), Android‚Äôs XML resources are loaded and inflated off the main thread so you don‚Äôt drop any frames. This means the resource is not guaranteed to display instantly but also does not prevent user input while the resource is loading. Off-thread decoding is especially important when you need to render many icons at the same time. Internal apps realized some significant performance improvements when using Android‚Äôs vector drawables.

Utilizing resource types like vector drawables are the perfect way to display images without loss of quality, and can result in smaller APK files since you don't need to include an image type for every screen density. Furthermore, vector drawables are copied from memory once they‚Äôre loaded so if you render the same icon more than once they will all display at the same time.

#### Trade-offs[‚Äã](#trade-offs "Direct link to Trade-offs")

It‚Äôs important to note that drawable XML resources are not perfect, and there are constraints to using them:

* They must be referenced at build time of your Android application. These resources are passed into a build step with the [Android Asset Packaging Tool](https://developer.android.com/tools/aapt2) (AAPT) to convert raw XML into binary XML. Android does not support loading raw XML files, [this is a known limitation](https://issuetracker.google.com/issues/62435069).
* They cannot be loaded over the network by Metro. If you change the directory or name of an XML resource, you will need to rebuild your Android application each time.
* They have no dimensions. By default, they will display with a 0x0 size and you need to provide a width and height for them to show up.
* They are not fully customizable at runtime; you can only control dimensions or the overall tint color but you can‚Äôt customize individual element attributes *inside* the resource like stroke widths, border radius, or colors. These types of customizations require different variants of your XML resource.

info

Android‚Äôs vector drawables are not a 1:1 replacement for libraries like `react-native-svg`. They are designed specifically for Android and do not work for iOS. If you want to have the same SVGs across all platforms, you'll have to continue using `react-native-svg`. Vector drawables merely offer performance benefits at the expense of customization.

### ReactNativeFactory on iOS[‚Äã](#reactnativefactory-on-ios "Direct link to ReactNativeFactory on iOS")

With React Native 0.78 we improved the integration of React Native on iOS.

This version introduces a new class called `RCTReactNativeFactory` that allows you to create instances of React Native without the need of an AppDelegate. This should allow you to create a new version of React Native in a ViewController, for example. This simplifies dramatically the integration with Brownfield apps.

Imagine that you want to show a React Native view in a View Controller of your app. Starting from React Native 0.78, what you need to do, after installing all the dependencies as shown in [this guide](/docs/next/integration-with-existing-apps?language=apple#1-set-up-directory-structure), is to add this code:

```

+import React
+import React_RCTAppDelegate

public class ViewController {

+  var reactNativeFactory: RCTReactNativeFactory?
+  var reactNativeDelegate: ReactNativeDelegate?

  public func viewdidLoad() {
    super.viewDidLoad()
    // ‚Ä¶
+ reactNativeDelegate = ReactNativeDelegate()
+ reactNativeFactory = RCTReactNativeFactory(delegate: reactNativeDelegate!)
+ view = reactNativeFactory.rootViewFactory.view(withModuleName: "<your module name>")
  }

}

+class ReactNativeDelegate: RCTDefaultReactNativeFactoryDelegate {

+  override func sourceURL(for bridge: RCTBridge) -> URL? {
+    self.bundleURL()
+  }
+
+  override func bundleURL() -> URL? {
+    #if DEBUG
+    RCTBundleURLProvider.sharedSettings().jsBundleURL(forBundleRoot: "index")
+    #else
+    Bundle.main.url(forResource: "main", withExtension: "jsbundle")
+    #endif
+  }
+}
```

React Native will be loaded in the View Controller as soon as you navigate to it.

This code creates an `RCTReactNativeFactory`, assigns a delegate to it, and asks it to create a `rootView` for a React Native‚Äôs view.

The delegate is defined below, and it overrides the `sourceURL` and the `bundleURL` properties to tell React Native where it can find the JS bundle to load in the view.

## Other Breaking Changes[‚Äã](#other-breaking-changes "Direct link to Other Breaking Changes")

### General[‚Äã](#general "Direct link to General")

* React Native DevTools
  <!-- -->
  * Removed FuseboxClient CDP domain
* Codegen
  <!-- -->
  * Separate component array types and command array types

### Android[‚Äã](#android "Direct link to Android")

* Nullability changes: migrating `RootView` to Kotlin resulted in changes of parameter types from nullable to non nullable.

* The following classes have been moved from public to internal, or removed, and can‚Äôt be accessed anymore:

  <!-- -->

  * `com.facebook.react.bridge.GuardedResultAsyncTask`
  * `com.facebook.react.uimanager.ComponentNameResolver`
  * `com.facebook.react.uimanager.FabricViewStateManager`
  * `com.facebook.react.views.text.frescosupport.FrescoBasedReactTextInlineImageViewManager`

### iOS[‚Äã](#ios "Direct link to iOS")

* Change Image load event size info from logical size to pixel (This only affects the Old Architecture)

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.78 contains over 509 commits from 87 contributors. Thanks for all your hard work!

Thanks to all the additional authors that worked on documenting features in this release post:

* [Dream11](https://github.com/ds-horizon) team for the thorough testing of React 19 features in React Native
* [Nicola Corti](https://github.com/cortinico) for the work on Faster Releases
* [Alex Hunt](https://github.com/huntie) for the work on the Metro logs opt-in
* [Peter Abbondanzo](https://github.com/Abbondanzo) for the work on Android XML Drawable Support
* [Oskar Kwa≈õniewski](https://github.com/okwasniewski) for the work on the ReactNativeFactory

## Upgrade to 0.78[‚Äã](#upgrade-to-078 "Direct link to Upgrade to 0.78")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the Upgrading docs.

To create a new project:

```
npx @react-native-community/cli@latest init MyProject --version latest
```

If you use Expo, [React Native 0.78 will be supported in a canary release of the Expo SDK](https://expo.dev/changelog/react-native-78).

info

0.78 is now the latest stable version of React Native and 0.75.x moves to unsupported. For more information see [React Native's support policy](https://github.com/reactwg/react-native-releases/blob/main/docs/support.md). We aim to publish a final end-of-life update of 0.75 in the near future.

**Tags:**

* [engineering](/blog/tags/engineering)


---

# React Native 0.79 - Faster tooling and much more

April 8, 2025 ¬∑

<!-- -->

11 min read

![Alan Hughes](https://github.com/alanjhughes.png)

Alan Hughes

Software Engineer @ Expo

[](https://github.com/alanjhughes "GitHub")

![Shubham Gupta](https://github.com/shubhamguptadream11.png)

Shubham Gupta

Software Engineer @ Dream11

[](https://x.com/sg43245 "X")[](https://github.com/shubhamguptadream11 "GitHub")

![Fabrizio Cucci](https://avatars.githubusercontent.com/u/8156463?v=4)

Fabrizio Cucci

Software Engineer @ Meta

[](https://x.com/fabriziocucci "X")[](https://github.com/fabriziocucci "GitHub")

![Nicola Corti](https://github.com/cortinico.png)

Nicola Corti

Software Engineer @ Meta

[](https://x.com/cortinico "X")[](https://github.com/cortinico "GitHub")[](https://bsky.app/profile/cortini.co "Bluesky")

Today we are excited to release React Native 0.79!

This release ships with performance improvements on various fronts, as well as several bugfixes. First, Metro is now faster to start thanks to deferred hashing, and has stable support for package exports. Startup time in Android will also be improved thanks to changes in the JS bundle compressions and much more.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [New Metro Features](/blog/2025/04/08/react-native-0.79.md#metro-faster-startup-and-package-exports-support)
* [JSC moving to a Community Package](/blog/2025/04/08/react-native-0.79.md#jsc-moving-to-community-package)
* [iOS: Swift-Compatible Native Modules registration](/blog/2025/04/08/react-native-0.79.md#ios-swift-compatible-native-modules-registration)
* [Android: Faster App Startup](/blog/2025/04/08/react-native-0.79.md#android-faster-app-startup)
* [Removal of Remote JS Debugging](/blog/2025/04/08/react-native-0.79.md#removal-of-remote-js-debugging)

## Highlights[‚Äã](#highlights-1 "Direct link to Highlights")

### Metro: Faster startup and package exports support[‚Äã](#metro-faster-startup-and-package-exports-support "Direct link to Metro: Faster startup and package exports support")

This release ships with [Metro 0.82](https://github.com/facebook/metro/releases/tag/v0.82.0).This version uses deferred hashing to improve the speed of first `yarn start` typically by over 3x (more in larger projects and monorepos) making your development experience and CI builds faster on a daily basis.

![metro startup comparison](/assets/images/0.79-metro-startup-comparison-6dd153aeb4b43cb5dec1390b67bc4673.gif)

Also in Metro 0.82, we‚Äôre promoting `package.json` `"exports"` and `"imports"` field resolution to stable. `"exports"` resolution was [introduced in React Native 0.72](/blog/2023/06/21/package-exports-support.md), and `"imports"` support was added in a community contribution - both will now be enabled by default for all the projects on React Native 0.79.

This improves compatibility with modern npm dependencies, and opens up new, standards-compliant ways to organise your projects.

Breaking change

While we've been testing `package.json` `"exports"` in the community for a while, this switchover can be a breaking change for certain packages and project setups.

In particular, we're aware of user reported incompatibilities for some popular packages including Firebase and AWS Amplify, and are working to get these fixed at source.

If you're encountering issues:

* Please update to the Metro [0.81.5 hotfix](https://github.com/facebook/metro/releases/tag/v0.81.5), or set [`resolver.unstable_enablePackageExports = false`](https://metrobundler.dev/docs/configuration/#unstable_enablepackageexports-experimental) to opt out.
* See [expo/expo#36551](https://github.com/expo/expo/discussions/36551) for affected packages and future updates.

### JSC moving to Community Package[‚Äã](#jsc-moving-to-community-package "Direct link to JSC moving to Community Package")

As part of our effort to reduce the API surface of React Native, we're in the process of moving the JavaScriptCore (JSC) engine to a community-maintained package: `@react-native-community/javascriptcore`

This change will not affect users that are using Hermes.

Starting with React Native 0.79, you can use a community supported version of JSC by following the [installation instructions in the readme](https://github.com/react-native-community/javascriptcore#installation). The JSC version provided by React Native core will still be available in 0.79, but we‚Äôre planning to remove it [in the near future](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0836-lean-core-jsc.md).

Moving JSC to a community maintained package will allow us to update the JSC version more frequently and offer you the latest features. The community maintained JSC will follow a separate release schedule from React Native.

### iOS: Swift-Compatible Native Modules registration[‚Äã](#ios-swift-compatible-native-modules-registration "Direct link to iOS: Swift-Compatible Native Modules registration")

In this release, we are revamping the way in which you can register your Native Module into the React Native runtime. The new approach follows the same approach of components, described in the [official documentation](/docs/next/the-new-architecture/using-codegen#configuring-codegen).

Starting from this version of React Native, you can register your modules by modifying the `package.json` file. We introduced a new `modulesProvider` field in the `ios` property:

```
"codegenConfig": {
     "ios": {
+       "modulesProvider": {
+         "JS Name for the module": "ObjC Module provider for the pure C++ TM or a class conforming to RCTTurboModule"
+     }
    }
}
```

Codegen will take care to create all the relevant code starting from your `package.json` file.

If you do use a pure C++ Native Module you will have to follow this recommended configuration:

Configure pure C++Native Modules in your app

For pure C++ Native Modules, you need to add a new ObjectiveC++ class to glue together the C++ Native Module with the rest of the App:

CppNativeModuleProvider.h

```
#import <Foundation/Foundation.h>
#import <ReactCommon/RCTTurboModule.h>

NS_ASSUME_NONNULL_BEGIN

@interface <YourNativeModule>Provider : NSObject <RCTModuleProvider>

@end
```

CppNativeModuleProvider.mm

```
NS_ASSUME_NONNULL_END

#import "<YourNativeModule>Provider.h"
#import <ReactCommon/CallInvoker.h>
#import <ReactCommon/TurboModule.h>
#import "<YourNativeModule>.h"

@implementation NativeSampleModuleProvider

- (std::shared_ptr<facebook::react::TurboModule>)getTurboModule:
    (const facebook::react::ObjCTurboModule::InitParams &)params
{
  return std::make_shared<facebook::react::NativeSampleModule>(params.jsInvoker);
}
```

With this new approach, we unified the registration of Native Modules for both app developers and library maintainers. Libraries can specify the same properties in their `package.json` and Codegen will take care of the rest.

This approach solves the limitation we introduced in 0.77 that prevented the registration of a pure C++ Native Module with a Swift `AppDelegate`. As you can see, none of these changes modifies the `AppDelegate` and the generated code will work for `AppDelegate` implemented with both Swift and Objective-C.

### Android: Faster App Startup[‚Äã](#android-faster-app-startup "Direct link to Android: Faster App Startup")

We‚Äôre also shipping a change to improve your Android startup time by a significant amount.

Starting with this version, we won‚Äôt be compressing the JavaScript bundle anymore inside the APK. Previously, the Android system needed to uncompress the JavaScript bundle before your app could start. This was causing a significant slowdown during the app startup.

Starting from this release, we will be shipping the JavaScript Bundle uncompressed by default, so your Android apps will be generally faster to start.

The [Margelo](https://margelo.com) team tested this feature on the Discord app and got a significant performance boost: Discord‚Äôs time-to-interactive (TTI) was reduced by 400ms, which was a 12% speedup with a one-line change (tested on a Samsung A14).

On the other hand, storing the bundle uncompressed, will result in a higher space consumption for your application on the user device. If this is a concern to you, you can toggle this behavior using the `enableBundleCompression` property in your `app/build.gradle` file.

app/build.gradle

```
react {
  // ...
  // If you want to compress the JS bundle (slower startup, less
  // space consumption)
  enableBundleCompression = true
  // If don't you want to compress the JS bundle (faster startup,
  // higher space consumption)
  enableBundleCompression = false

  // Default is `false`
}
```

Please note that the APK size will increase in this release, but your users won‚Äôt be paying the extra cost in APK download size, as the APKs are compressed when downloaded from the network.

## Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

### Removal of Remote JS Debugging[‚Äã](#removal-of-remote-js-debugging "Direct link to Removal of Remote JS Debugging")

As part of our ongoing efforts to improve debugging, we're removing Remote JS Debugging via Chrome. This legacy debugging method was deprecated, [and moved to a runtime opt-in, in React Native 0.73](/blog/2023/12/06/0.73-debugging-improvements-stable-symlinks.md#remote-javascript-debugging). Please use [React Native DevTools](/docs/react-native-devtools.md) for modern and reliable debugging.

This also means that React Native is no longer compatible with the [react-native-debugger](https://github.com/jhen0409/react-native-debugger) community project. For developers that want to use third party debugging extensions, such as Redux DevTools, we recommend [Expo DevTools Plugins](https://github.com/expo/dev-plugins), or integrating the standalone versions of these tools.

Read more in [this dedicated post](https://github.com/react-native-community/discussions-and-proposals/discussions/872).

### Internal modules updated to `export` syntax[‚Äã](#internal-modules-updated-to-export-syntax "Direct link to internal-modules-updated-to-export-syntax")

As part of modernizing our JavaScript codebase, we've updated a number of implementation modules within `react-native` to consistently use `export` syntax instead of `module.exports`.

We've updated around **46 APIs** in total, which can be found in the [changelog](https://github.com/facebook/react-native/blob/main/CHANGELOG.md#v0790).

This change has a subtle impact on existing imports:

**Case 1:¬†Default export**

```
  // CHANGED - require() syntax
- const ImageBackground = require('react-native/Libraries/Image/ImageBackground');
+ const ImageBackground = require('react-native/Libraries/Image/ImageBackground').default;

// Unchanged - import syntax
import ImageBackground from 'react-native/Libraries/Image/ImageBackground';

// RECOMMENDED - root import
import {ImageBackground} from 'react-native';
```

**Case 2: Secondary exports**

There are very few cases of this pattern, again unaffected when using the root `'react-native'` import.

```
  // Unchanged - require() syntax
  const BlobRegistry = require('react-native/Libraries/Blob/BlobRegistry');

  // Unchanged - require() syntax with destructuring
  const {register, unregister} = require('react-native/Libraries/Blob/BlobRegistry');

  // CHANGED - import syntax as single object
- import BlobRegistry from 'react-native/Libraries/Blob/BlobRegistry';
+ import * as BlobRegistry from 'react-native/Libraries/Blob/BlobRegistry';


  // Unchanged - import syntax with destructuring
  import {register, unregister} from 'react-native/Libraries/Blob/BlobRegistry';

  // RECOMMENDED - root import
  import {BlobRegistry} from 'react-native';
```

We expect the impact of this change to be extremely limited, particularly for projects written in TypeScript and using `import` syntax. Please check for any type errors to update your code.

tip

**The root `react-native` import is strongly recommended**

As a general takeaway, we strongly recommend importing from the root `'react-native'` path, to avoid extraneous breaking changes in the future. In our next release, we will be deprecating deep imports, as part of better defining React Native's public JavaScript API ([see the RFC](https://github.com/react-native-community/discussions-and-proposals/pull/894)).

### Other Breaking Changes[‚Äã](#other-breaking-changes "Direct link to Other Breaking Changes")

This list contains a series of other breaking changes we suspect could have a minor impact to your product code and are worth noting.

* **Invalid unitless lengths in box shadows and filters**:
  <!-- -->
  * In order to make React Native more compliant with the CSS/Web specs, we now don‚Äôt support anymore unitless lengths in `box-shadow` and `filter`. This means that if you were using a `box-shadow` of `1 1 black` we won‚Äôt be rendering. You should instead specify units such as `1px 1px black`
* **Remove incorrect hwb() syntax support from normalize-color:**
  * In order to make React Native more compliant with the CSS/Web specs, we now restrict some invalid syntax for `hwb()`. Historically React Native used to support comma separated values (e.g. `hwb(0, 0%, 100%)`) which we now don‚Äôt support anymore (you should migrate to `hwb(0 0% 100%)`). You can read more about this change [here](https://github.com/facebook/react-native/commit/676359efd9e478d69ad430cff213acc87b273580).
* **Libraries/Core/ExceptionsManager exports update**
  * As part of our effort to modernize the React Native JS API, we updated `ExceptionsManager` to now export a default `ExceptionsManager` object, and `SyntheticError` as a secondary export.

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.79 contains over 944 commits from 100 contributors. Thanks for all your hard work!

We want to send a thank you to those community members that shipped significant contributions in this release:

* [Marc Rousavy](https://github.com/mrousavy) for developing and documenting the ‚ÄúAndroid: Faster App Startup‚Äù feature
* [Kudo Chien](https://github.com/Kudo) and [Oskar Kwa≈õniewski](https://github.com/okwasniewski)for working on the `@react-native-community/javascriptcore` package and writing the ‚ÄúJSC moving to Community Package‚Äù section
* [James Lawson](https://github.com/facebook/metro/pull/1302) for adding support for import subpath resolution [in Metro](https://github.com/facebook/metro/pull/1302).

Moreover, we also want to thank the additional authors that worked on documenting features in this release post:

* [Rob Hogan](https://github.com/robhogan) for the ‚ÄúNew Metro Features‚Äù section
* [Alex Hunt](https://github.com/huntie) for the ‚ÄúRemoval of Remote JS Debugging‚Äù and ‚ÄúInternal modules updated to export syntax‚Äù sections
* [Riccardo Cipolleschi](https://github.com/cipolleschi) for the work on iOS Native Module registration

## Upgrade to 0.79[‚Äã](#upgrade-to-079 "Direct link to Upgrade to 0.79")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the Upgrading docs.

To create a new project:

```
npx @react-native-community/cli@latest init MyProject --version latest
```

If you use Expo, React Native 0.79 will be supported in the upcoming Expo SDK 53 as the default version of React Native.

info

0.79 is now the latest stable version of React Native and 0.76.x moves to unsupported. For more information see [React Native's support policy](https://github.com/reactwg/react-native-releases/blob/main/docs/support.md). We aim to publish a final end-of-life update of 0.76 in the near future.

**Tags:**

* [engineering](/blog/tags/engineering)


---

# Moving Towards a Stable JavaScript API (New Changes in 0.80)

June 12, 2025 ¬∑

<!-- -->

10 min read

![Alex Hunt](https://github.com/huntie.png)

Alex Hunt

Software Engineer @ Meta

[](https://x.com/huntie "X")[](https://github.com/huntie "GitHub")

![Iwo Plaza](https://github.com/iwoplaza.png)

Iwo Plaza

Software Engineer @ Software Mansion

[](https://x.com/iwoplaza "X")[](https://github.com/iwoplaza "GitHub")

![Jakub Piasecki](https://github.com/j-piasecki.png)

Jakub Piasecki

Software Engineer @ Software Mansion

[](https://x.com/breskin67 "X")[](https://github.com/j-piasecki "GitHub")

![Dawid Ma≈Çecki](https://github.com/coado.png)

Dawid Ma≈Çecki

Software Engineer @ Software Mansion

[](https://github.com/coado "GitHub")

In React Native 0.80, we're introducing two significant changes to React Native's JavaScript API ‚Äî the deprecation of deep imports, and our new Strict TypeScript API. These are part of an ongoing effort to accurately define our API and offer dependable type safety to users and frameworks.

**Quick takeaways:**

* **Deep imports deprecation**: From 0.80, we're introducing deprecation warnings for deep imports from the `react-native` package.
* **Opt-in Strict TypeScript API**: We are moving to from-source TypeScript types and a new public API baseline under TypeScript. These enable stronger and more futureproof type accuracy, and will be a one-time breaking change. [Opt in](/blog/2025/06/12/moving-towards-a-stable-javascript-api.md#strict-typescript-api) via `compilerOptions` in your project's `tsconfig.json`.
* We'll work with the community over time to ensure that these changes work for everyone, before enabling the Strict TypeScript API by default in a future React Native release.

## What's changing and why[‚Äã](#whats-changing-and-why "Direct link to What's changing and why")

We are moving to improve and stabilise React Native's public JavaScript API ‚Äî i.e. what you get when you import `'react-native'`.

Historically, we've approximated this. React Native is authored in [Flow](https://flow.org/), but the community has long since moved to TypeScript in open source, which is how the public API is consumed and validated for compatibility. Our types have been (lovingly) [community-contributed](https://www.npmjs.com/package/@types/react-native), and since merged and aligned in our codebase. However, these have relied on manual maintenance and no automated tooling, introducing correctness gaps.

Additionally, our public JS API has been poorly defined in terms of module boundaries ‚Äî e.g. internal `'react-native/Libraries/'` deep imports were reachable by app code, but could frequently change as we updated these internals.

In 0.80, we're addressing these issues by deprecating deep imports, and introducing a user opt-in to a new, generated API baseline in TypeScript. We're calling this our **Strict TypeScript API**. Ultimately, this is the groundwork to offer a stable React Native API in the future.

## Deprecating deep imports from `react-native`[‚Äã](#deprecating-deep-imports-from-react-native "Direct link to deprecating-deep-imports-from-react-native")

The main change we're making to our API today is deprecating the use of deep imports ([RFC](https://github.com/react-native-community/discussions-and-proposals/pull/894)), with warnings in ESLint and the JS console. Deep imports of values and types should be updated to `react-native`'s root import.

```
// Before - import from subpath
import {Alert} from 'react-native/Libraries/Alert/Alert';

// After - import from `react-native`
import {Alert} from 'react-native';
```

This change reduces the total surface area of our JavaScript API into a fixed set of exports which we can control and make stable in a future release. We're targeting a removal of these import paths in 0.82.

API feedback

Some APIs are not exported at root, and will become unavailable without deep imports. We have an **[open feedback thread](https://github.com/react-native-community/discussions-and-proposals/discussions/893)** and will be working with the community to finalize the exports in our public API. Please share your feedback!

**Opting out**

Please bear in mind that we aim to remove deep imports from React Native's API in a future release, and these should instead be updated to the root import.

**Opting out of warnings**

#### ESLint[‚Äã](#eslint "Direct link to ESLint")

Disable the `no-deep-imports` rule using `overrides`.

.eslintrc.js

```
  overrides: [
    {
      files: ['*.js', '*.jsx', '*.ts', '*.tsx'],
      rules: {
        '@react-native/no-deep-imports': 0,
      },
    },
  ]
```

#### Console warnings[‚Äã](#console-warnings "Direct link to Console warnings")

Pass the `disableDeepImportWarnings` option to `@react-native/babel-preset`.

babel.config.js

```
module.exports = {
  presets: [
    ['module:@react-native/babel-preset', {disableDeepImportWarnings: true}]
  ],
};
```

Restart your app with `--reset-cache` to clear the Metro cache.

```
npx @react-native-community/cli start --reset-cache
```

**Opting out of warnings (Expo)**

#### ESLint[‚Äã](#eslint-1 "Direct link to ESLint")

Disable the `no-deep-imports` rule using `overrides`.

.eslintrc.js

```
overrides: [
  {
    files: ['*.js', '*.jsx', '*.ts', '*.tsx'],
    rules: {
      '@react-native/no-deep-imports': 0,
    },
  },
];
```

#### Console warnings[‚Äã](#console-warnings-1 "Direct link to Console warnings")

Pass the `disableDeepImportWarnings` option to `babel-preset-expo`.

babel.config.js

```
module.exports = function (api) {
  api.cache(true);
  return {
    presets: [['babel-preset-expo', {disableDeepImportWarnings: true}]],
  };
};
```

Restart your app with `--clear` to clear the Metro cache.

```
npx expo start --clear
```

## Strict TypeScript API (opt-in)[‚Äã](#strict-typescript-api-opt-in "Direct link to Strict TypeScript API (opt-in)")

The Strict TypeScript API is a new set of TypeScript types in the `react-native` package, which can be opted into via your `tsconfig.json`. We're shipping these alongside our existing TS types, meaning you can choose to migrate when ready.

The new types are:

1. **Generated directly from our source code** ‚Äî improving coverage and correctness, so you can expect stronger compatibility guarantees.
2. **Restricted to `react-native`'s index file** ‚Äî more tightly defining our public API, and meaning we won't break the API when making internal file changes.

When the community is ready, the Strict TypeScript API will become our default API in future ‚Äî synchronized with deep imports removal. This means it's a **good idea** to begin opting in, as you'll be ready for React Native's future stable JS API.

tsconfig.json

```
{
  "extends": "@react-native/typescript-config",
  "compilerOptions": {
    ...
    "customConditions": ["react-native-strict-api"]
  }
}
```

Under the hood

This will instruct TypeScript to resolve `react-native` types from our new [`types_generated/`](https://www.npmjs.com/package/react-native?activeTab=code) dir, instead of the previous [`types/`](https://www.npmjs.com/package/react-native?activeTab=code) dir (manually maintained). No restart of TypeScript or your editor is required.

### Breaking: Deep imports are disallowed[‚Äã](#breaking-deep-imports-are-disallowed "Direct link to Breaking: Deep imports are disallowed")

As above, types under the Strict TypeScript API are now only resolvable from the main `'react-native'` import path, enforcing [package encapsulation](/blog/2023/06/21/package-exports-support.md), per our above deprecation.

```
// Before - import from subpath
import {Alert} from 'react-native/Libraries/Alert/Alert';

// After - MUST import from `react-native`
import {Alert} from 'react-native';
```

Key win

We've scoped our public API to the exports of React Native's `index.js` file, which we carefully maintain. This means that file changes elsewhere in our codebase will no longer be breaking changes.

### Breaking: Some type names / shapes have changed[‚Äã](#breaking-some-type-names--shapes-have-changed "Direct link to Breaking: Some type names / shapes have changed")

Types are now generated from source, rather than manually maintained. In doing this:

* We've aligned differences that had built up from the community contributed types ‚Äî and also increased the type coverage of our source code.
* We've intentionally updated some type names and type shapes, where there was scope to simplify or reduce ambiguity.

Key win

Because types are now generated from React Native's source code, you can be confident that the typechecker is **always accurate** for a given version of `react-native`.

#### Example: Stricter exported symbols[‚Äã](#example-stricter-exported-symbols "Direct link to Example: Stricter exported symbols")

The `Linking` API is now a single `interface`, rather than two exports. This follows for a number of other APIs ([see docs](/docs/strict-typescript-api.md)).

```
// Before
import {Linking, LinkingStatic} from 'react-native';

function foo(linking: LinkingStatic) {}
foo(Linking);

// After
import {Linking} from 'react-native';

function foo(linking: Linking) {}
foo(Linking);
```

#### Example: Fixed / more complete types[‚Äã](#example-fixed--more-complete-types "Direct link to Example: Fixed / more complete types")

Previous manual type definitions left the opportunity for type gaps. Under generated Flow ‚Üí TypeScript, these are no longer present (and at source, benefit from Flow's additional type validation for multi-platform code).

```
import {Dimensions} from 'react-native';

// Before - Type error
// After - number | undefined
const {densityDpi} = Dimensions.get();
```

### Other breaking changes[‚Äã](#other-breaking-changes "Direct link to Other breaking changes")

Please refer to our [dedicated guide](/docs/strict-typescript-api.md) in the docs which details all breaking types changes and how to update your code.

## Rollout[‚Äã](#rollout "Direct link to Rollout")

We appreciate that any breaking change to React Native will take time for developers to update to in their apps.

#### Now ‚Äî Opt-in launch (0.80)[‚Äã](#now--opt-in-launch-080 "Direct link to Now ‚Äî Opt-in launch (0.80)")

The `"react-native-strict-api"` opt-in is stable in the 0.80 release.

* This is a one-time migration. We aim for apps and libraries to opt in at their own pace over the next couple of releases.
* Under either mode, nothing will change for your app at runtime ‚Äî this affects TypeScript analysis only.
* **And**, we will take feedback on missing APIs, via our [dedicated feedback thread](https://github.com/react-native-community/discussions-and-proposals/discussions/893).

Recommended

The Strict TypeScript API will become our default API in the future.

If you have time, it's worth testing the opt-in now in your `tsconfig.json`, to futureproof your app or library. This will immediately evaluate if there are any type errors introduced in your app under the Strict API. **There may be none(!)** ‚Äî in which case, you're good to go.

#### Future ‚Äî Strict TypeScript API by default[‚Äã](#future--strict-typescript-api-by-default "Direct link to Future ‚Äî Strict TypeScript API by default")

In the future, we will require all codebases to use our Strict API, and will remove the legacy types.

The timeline for this will be based on community feedback. For at least the next two React Native releases, the Strict API will remain an opt-in.

## FAQs[‚Äã](#faqs "Direct link to FAQs")

**I'm using subpath imports today. What should I do?**

Please migrate to the root `'react-native'` import path.

* Subpath imports (e.g. `'react-native/Libraries/Alert/Alert'`) are becoming private APIs. Without preventing access to implementation files inside React Native, we can‚Äôt offer a stable JavaScript API.
* We want our deprecation warnings to motivate community feedback, which can be raised via our [centralized discussion thread](https://github.com/react-native-community/discussions-and-proposals/discussions/893), if you believe we are not exposing code paths that are crucial for your app. Where justified, we may promote APIs to the index export.

**I'm a library maintainer. How does this change impact me?**

Both apps and libraries can opt in at their own pace, since `tsconfig.json` will only affect the immediate codebase.

* Typically, `node_modules` is excluded from validation by the TypeScript server in a React Native project. Therefore, your package's exported type definitions are the source of truth.

**üí° We want feedback!** As with changed subpath imports, if you encounter any integration issues with the Strict API, please let us know [on GitHub](https://github.com/react-native-community/discussions-and-proposals/discussions/893).

**Does this guarantee a final API for React Native yet?**

Sadly, not yet. In 0.80, we've made a tooling investment so that React Native's existing JS API baseline can be accurately consumed via TypeScript ‚Äî enabling future stable changes. We're formalizing the existing API you know and love.

In the future, we will take action to finalise the APIs we currently offer in core ‚Äî across each language surface. API changes will be communicated via RFCs/announcements, and typically a deprecation cycle.

**Why isn't React Native written in TypeScript?**

React Native is core infrastructure at Meta. We test every merged change across our Family of Apps, before they hit general open source availability.

At this scale and sensitivity, correctness matters. The bottom line is that Flow offers us greater performance and greater strictness than TypeScript, including specific [multi-platform support for React Native](https://flow.org/en/docs/react/multiplatform/).

## Thanks[‚Äã](#thanks "Direct link to Thanks")

These changes were made possible by [Iwo Plaza](https://x.com/iwoplaza), [Jakub Piasecki](https://x.com/breskin67), [Dawid Ma≈Çecki](https://github.com/coado), [Alex Hunt](https://x.com/huntie), and [Riccardo Cipolleschi](https://x.com/CipolleschiR).

Thanks also to [Pieter Vanderwerff](https://github.com/pieterv), [Rub√©n Norte](https://github.com/rubennorte), and [Rob Hogan](https://x.com/robjhogan) for their additional help and input.

Learn more

**Watch the talk!**&#x57;e shared a deep dive into our motivations and the work behind the Strict TypeScript API at **App.js 2025**.

**[View on YouTube](https://www.youtube.com/live/UTaJlqhTk2g?si=SDRmj80kss7hXuGG\&t=6520)**

![App.js 2025 Talk](/blog/assets/0.80-js-stable-api-appjs.jpg)

**Tags:**

* [announcement](/blog/tags/announcement)


---

# React Native 0.80 - React 19.1, JS API Changes, Freezing Legacy Arch and much more

June 12, 2025 ¬∑

<!-- -->

12 min read

![Jorge Cohen](https://github.com/hezi.png)

Jorge Cohen

Engineering Manager @ Meta

[](https://x.com/jorgewritescode "X")[](https://github.com/hezi "GitHub")

![Fabrizio Cucci](https://avatars.githubusercontent.com/u/8156463?v=4)

Fabrizio Cucci

Software Engineer @ Meta

[](https://x.com/fabriziocucci "X")[](https://github.com/fabriziocucci "GitHub")

![Gabriel Donadel Dall'Agnol](https://github.com/gabrieldonadel.png)

Gabriel Donadel Dall'Agnol

Software Engineer @ Expo

[](https://x.com/donadeldev "X")[](https://github.com/gabrieldonadel "GitHub")

![Christian Falch](https://github.com/chrfalch.png)

Christian Falch

Software Engineer @ Expo

[](https://x.com/chrfalch "X")[](https://github.com/chrfalch "GitHub")

Today we are excited to release React Native 0.80!

This release brings the version of React we ship inside React Native to the latest stable available: 19.1.0.

We‚Äôre also shipping a series of stability improvements to our JS API: deep imports will now fire a warning and we‚Äôre offering a new opt-in Strict TypeScript API which offers types that are more accurate and safer to use.

Moreover, the Legacy Architecture of React Native is now officially frozen, and you‚Äôll start seeing warnings for APIs that will stop working once we fully sunset the Legacy Architecture.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [JavaScript deep imports deprecation](/blog/2025/06/12/react-native-0.80.md#javascript-deep-imports-deprecation)
* [Legacy Architecture Freezing & Warnings](/blog/2025/06/12/react-native-0.80.md#legacy-architecture-freezing--warnings)
* [React 19.1.0](/blog/2025/06/12/react-native-0.80.md#react-1910)
* [Experimental - React Native iOS dependencies are now prebuilt](/blog/2025/06/12/react-native-0.80.md#experimental---react-native-ios-dependencies-are-now-prebuilt)

## Highlights[‚Äã](#highlights-1 "Direct link to Highlights")

### JavaScript deep imports deprecation[‚Äã](#javascript-deep-imports-deprecation "Direct link to JavaScript deep imports deprecation")

In this release, we are making moves to improve and stabilize React Native's public JavaScript API. The first step towards this is better scoping of which of our APIs are importable by apps and frameworks. In line with this, we are formally deprecating deep imports from React Native ([see RFC](https://github.com/react-native-community/discussions-and-proposals/pull/894)), and are introducing warnings via ESLint and the JS console.

These warnings are scoped to imports from within your project's source code, and can be [opted out from](/docs/strict-typescript-api.md). However, please bear in mind that we aim to remove deep imports from React Native's API in a future release, and these should instead be updated to the root import.

```
// Before - import from subpath
import {Alert} from 'react-native/Libraries/Alert/Alert';

// After - import from `react-native`
import {Alert} from 'react-native';
```

Some APIs are not exported at root, and will become unavailable without deep imports. This is intentional, in order to reduce the overall surface area of React Native's API. We have an open [feedback thread](https://github.com/react-native-community/discussions-and-proposals/discussions/893) for user issues, and will be working with the community to finalize which APIs we export over (at least) the next two React Native releases. Please share your feedback!

Learn more about this change in our dedicated post: [Moving Towards a Stable JavaScript API](/blog/2025/06/12/moving-towards-a-stable-javascript-api.md).

#### Opt-in Strict TypeScript API[‚Äã](#opt-in-strict-typescript-api "Direct link to Opt-in Strict TypeScript API")

With the above redefinition of the exports in our public API, we're also shipping a new set of TypeScript types for the `react-native` package in 0.80, which we're calling the Strict TypeScript API.

Opting into the Strict TypeScript API is a preview of our future, stable JavaScript API for React Native. These new types are:

1. **Generated directly from our source code** ‚Äî improving coverage and correctness, so you can expect stronger compatibility guarantees.
2. **Restricted to React Native's index file** ‚Äî more tightly defining our public API, and meaning we won't break the API when making internal file changes.

We're shipping these alongside our existing types, meaning you can choose to migrate when ready. Also, if you're using standard React Native APIs, a lot of apps should validate with **no changes**. We strongly encourage early adopters and newly created apps to opt in via your `tsconfig.json` file.

When the community is ready, the Strict TypeScript API will become our default API in future ‚Äî¬†synchronized with deep imports removal.

Learn more about this change in our dedicated post: [Moving Towards a Stable JavaScript API](/blog/2025/06/12/moving-towards-a-stable-javascript-api.md).

### Legacy Architecture Freezing & Warnings[‚Äã](#legacy-architecture-freezing--warnings "Direct link to Legacy Architecture Freezing & Warnings")

The New Architecture of React Native is the default choice [since version 0.76](/blog/2024/10/23/the-new-architecture-is-here.md) and we‚Äôve been reading [success stories](https://blog.kraken.com/product/engineering/how-kraken-fixed-performance-issues-via-incremental-adoption-of-the-react-native-new-architecture) of projects and tools that greatly benefit from it.

[We recently shared](https://github.com/reactwg/react-native-new-architecture/discussions/290) that we now consider the Legacy Architecture as frozen. We won‚Äôt be developing new bugfixes or features in the Legacy Architecture anymore and we will stop testing the Legacy Architecture while working on a release.

In order to smooth the migration, we are still allowing users to opt-out of the New Architecture if you‚Äôre experiencing bugs or regressions.

However shipping two architectures with React Native is a huge challenge, which impacts runtime performance, app size and maintenance of our codebase.

That‚Äôs why we‚Äôll eventually have to sunset the Legacy Architecture at some point in the future.

In 0.80, we‚Äôve added a series of warnings that will pop-up in React Native DevTools to warn you if you‚Äôre using APIs that won‚Äôt work in the New Architecture.

We recommend you to not ignore those warnings and to consider migrating your apps & libraries to the New Architecture to be ready for the future.

![legacy architecture warnings](/assets/images/0.80-legacy-arch-warnings-53105425d61d9e426f21af3e239df0f5.png)

You can learn more about those changes in the talk "Life After Legacy: The New Architecture Future" [we recently presented at App.js](https://www.youtube.com/live/K2JTTKpptGs?si=tRkT535f0GzguVGt\&t=9011).

### React 19.1.0[‚Äã](#react-1910 "Direct link to React 19.1.0")

This release of React Native ships with the latest React stable: 19.1.0

You can read about all the new features and bugfixes introduced in React 19.1.0 in the [release description](https://github.com/facebook/react/releases/tag/v19.1.0).

warning

One notable feature of React 19.1.0 is the implementation and improvements of owner stacks. This is a development only feature that should help you identify which component is responsible for a specific error.

However, we are aware that owner stacks are not working as expected in React Native if you use the `@babel/plugin-transform-function-name` Babel plugin, which is enabled by default in the React Native Babel Preset. We will be shipping a fix for this in a future release of React Native.

### Experimental - React Native iOS dependencies are now prebuilt[‚Äã](#experimental---react-native-ios-dependencies-are-now-prebuilt "Direct link to Experimental - React Native iOS dependencies are now prebuilt")

If you‚Äôre building a React Native iOS app, you probably noticed that the first native build will take some time: a couple of minutes or even longer on older machines. That‚Äôs because we need to compile the whole React Native iOS code plus all of its dependencies.

Over the last weeks we‚Äôve been experimenting with prebuilding some of the React Native core for iOS, similarly to what happens on Android, to reduce the build time when you‚Äôre first running a React Native app.

React Native 0.80 is the first release that can ship part of React Native for iOS as a prebuild to help reduce build times.

During the release process of React Native, we are producing an XCFramework called `ReactNativeDependencies.xcframework` that is a prebuilt version of only the 3rd party dependencies React Native depends on.

We experimented and benchmarked how much time this initial prebuild for iOS is saving and, in our benchmarks, run on an M4 machine, iOS builds are roughly 12% faster with the prebuild rather than by building from source.

From our experience, we also observed that several bug reports from users are caused by build issues related with React Native‚Äôs 3rd party dependencies (example [#39568](https://github.com/facebook/react-native/issues/39568)). Prebuilding the 3rd party dependencies allows us to build them for you, so that you won‚Äôt face these build issues anymore.

Note that we are not pre-building the whole React Native: we are only pre-building the libraries Meta does not directly control, such as Folly and GLog.

In a future release, we will also ship the rest of React Native core as a prebuild.

#### How to use them[‚Äã](#how-to-use-them "Direct link to How to use them")

This feature is still experimental, so it is not turned on by default.

If you want to use them, you can install your pods by adding the `RCT_USE_RN_DEP` env variable:

```
RCT_USE_RN_DEP=1 bundle exec pod install
```

Alternatively, if you want to enable it for all the developers working on that, you can modify your Podfile like this:

```
if linkage != nil
  Pod::UI.puts "Configuring Pod with #{linkage}ally linked Frameworks".green
  use_frameworks! :linkage => linkage.to_sym
end

+ENV['RCT_USE_RN_DEP'] = '1'

target 'HelloWorld' do
  config = use_native_modules!
```

Please, report any issue that the prebuilds might cause to you and to your app in [this discussion](https://github.com/react-native-community/discussions-and-proposals/discussions/912). We are committed to looking into them and making sure that tier usage is transparent to your app.

## Other Changes[‚Äã](#other-changes "Direct link to Other Changes")

### Android - Smaller APK size thanks to IPO[‚Äã](#android---smaller-apk-size-thanks-to-ipo "Direct link to Android - Smaller APK size thanks to IPO")

This release ships with significant size reduction for all the Android apps built with React Native. Starting in 0.80, we enabled [Interprocedural Optimization](https://en.wikipedia.org/wiki/Interprocedural_optimization) for both React Native and Hermes builds.

This resulted in a saving of \~1Mb for all the Android apps.

![android apk size comparison](/assets/images/0.80-android-apk-size-81b179f0dbf9546c8b0c9d443ba535ea.png)

You will get this size win by updating your React Native version to 0.80 and there are no further changes required to your project.

### New App Screen redesign[‚Äã](#new-app-screen-redesign "Direct link to New App Screen redesign")

If you‚Äôre not using Expo but you‚Äôre using the Community CLI & Template, in this version we've moved the New App Screen into its [own package](https://www.npmjs.com/package/@react-native/new-app-screen) and given it a fresh coat of paint. This reduces initial code boilerplate when you create a new app with the Community Template, and also provides a better experience when viewed on larger screens.

![New App Screen redesign](/assets/images/0.80-new-community-template-landing-19d75fcc472b11d97b4715e7c7339ef5.jpg)

### Notice about JSC community support[‚Äã](#notice-about-jsc-community-support "Direct link to Notice about JSC community support")

React Native 0.80 is the last version of React Native to offer first party JSC support. The support for JSC will be offered via the community maintained package `@react-native-community/javascriptcore`.

In case you missed the announcement, you can [read more about it here](/blog/2025/04/08/react-native-0.79.md#jsc-moving-to-community-package)

## Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

### Added `"exports"` field on main package[‚Äã](#added-exports-field-on-main-package "Direct link to added-exports-field-on-main-package")

As part of our JS Stable API changes, we've introduced an [`"exports"` field](https://nodejs.org/api/packages.html#package-entry-points) on the `package.json` manifest of `react-native`.

In 0.80, this mapping continues to expose **all JavaScript subpaths** by default, and therefore should not be a major breaking change. At the same time, this may subtly affect how modules within the `react-native` package are resolved:

* Under Metro, [platform-specific extensions](https://metrobundler.dev/docs/package-exports#replacing-platform-specific-extensions) will not be automatically expanded against `"exports"` matches. We've provided a number of shim modules to accommodate this ([#50426](https://github.com/facebook/react-native/pull/50426)).
* Under Jest, the ability to mock deep imports may be altered, which may require updating tests.

### Other Breaking Changes[‚Äã](#other-breaking-changes "Direct link to Other Breaking Changes")

This list contains a series of other breaking changes we suspect could have a minor impact to your product code and are worth noting:

### JS[‚Äã](#js "Direct link to JS")

* We bumped `eslint-plugin-react-hooks` from v4.6.0 to v5.2.0 (see full [changelog here](https://github.com/facebook/react/blob/main/packages/eslint-plugin-react-hooks/CHANGELOG.md)). The `react-hooks` lint rules may produce new error signals which you will have to fix or suppress

### Android[‚Äã](#android "Direct link to Android")

* This release bumps the Kotlin version shipped with React Native to version 2.1.20. Kotlin 2.1 introduces new language features in preview that you can start using in your modules/components. You can read more about it in [the official release notes](https://kotlinlang.org/docs/whatsnew21.html).

* We deleted the `StandardCharsets` class. It has been deprecated since 0.73. You should use the `java.nio.charset.StandardCharsets` class instead.

* We made several classes internal. Those classes are not part of the public API and should not be accessed. We already notified or submitted patches to the affected libraries:

  <!-- -->

  * `com.facebook.react.fabric.StateWrapperImpl`
  * `com.facebook.react.modules.core.ChoreographerCompat`
  * `com.facebook.react.modules.common.ModuleDataCleaner`

* We migrated several classes from Java to Kotlin. If you‚Äôre using those classes, the nullability and types of some parameter changed so you might need to adjust your code:

  <!-- -->

  * All the classes inside `com.facebook.react.devsupport`
  * `com.facebook.react.bridge.ColorPropConverter`
  * `com.facebook.react.views.textinput.ReactEditText`
  * `com.facebook.react.views.textinput.ReactTextInputManager`

### iOS[‚Äã](#ios "Direct link to iOS")

* We deleted the `RCTFloorPixelValue` field from RCTUtils.h - The `RCTFloorPixelValue` method was not used in React Native and we removed it altogether.

Further smaller breaking changes are listed [in the CHANGELOG for 0.80](https://github.com/facebook/react-native/blob/main/CHANGELOG.md#v0800).

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.80 contains over 1167 commits from 127 contributors. Thanks for all your hard work!

We want to send a special thank you to those community members that shipped significant contributions in this release:

* [Christian Falch](https://github.com/chrfalch) for the work on the iOS prebuilds for React Native Dependencies
* [Iwo Plaza](https://x.com/iwoplaza), [Jakub Piasecki](https://x.com/breskin67), and [Dawid Ma≈Çecki](https://github.com/coado) for their work on the Strict TypeScript API.

Moreover, we also want to thank the additional authors that worked on documenting features in this release post:

* [Riccardo Cipolleschi](https://github.com/cipolleschi) for authoring the part related to iOS prebuilds for React Native Dependencies.
* [Alex Hunt](https://x.com/huntie) for Deep imports deprecation, Opt-in Strict TypeScript API, New App Screen redesign.
* [Nicola Corti](https://x.com/cortinico) for the Legacy Architecture Freezing & Warnings.

## Upgrade to 0.80[‚Äã](#upgrade-to-080 "Direct link to Upgrade to 0.80")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the Upgrading docs.

To create a new project:

If you use Expo, React Native 0.80 will be supported in a canary release of the Expo SDK. Instructions on how to use React Native 0.80 in Expo are also available [in a dedicated blogpost](https://expo.dev/changelog/react-native-80).

info

0.80 is now the latest stable version of React Native and 0.77.x moves to unsupported. For more information see React Native's support policy. We aim to publish a final end-of-life update of 0.77 in the near future.

**Tags:**

* [engineering](/blog/tags/engineering)


---

# React Native 0.81 - Android 16 support, faster iOS builds, and more

August 12, 2025 ¬∑

<!-- -->

10 min read

![Moti Zilberman](https://github.com/motiz88.png)

Moti Zilberman

Software Engineer @ Meta

[](https://github.com/motiz88 "GitHub")[](https://www.threads.net/@motizilberman "Threads")[](https://bsky.app/profile/moti.zlbr.mn "Bluesky")

![Vitali Zaidman](https://github.com/vzaidman.png)

Vitali Zaidman

Software Engineer @ Meta

[](https://x.com/vzaidman "X")[](https://github.com/vzaidman "GitHub")[](https://www.threads.net/@vzaidman "Threads")

![Gabriel Donadel Dall'Agnol](https://github.com/gabrieldonadel.png)

Gabriel Donadel Dall'Agnol

Software Engineer @ Expo

[](https://x.com/donadeldev "X")[](https://github.com/gabrieldonadel "GitHub")

![Christian Falch](https://github.com/chrfalch.png)

Christian Falch

Software Engineer @ Expo

[](https://x.com/chrfalch "X")[](https://github.com/chrfalch "GitHub")

Today we are excited to release React Native 0.81!

This ships with support for Android 16 (API level 36) and includes a variety of other stability improvements and bugfixes, as well as experimental support for faster iOS builds using precompilation.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [Android 16 support](/blog/2025/08/12/react-native-0.81.md#android-16-support)
* [SafeAreaView deprecation](/blog/2025/08/12/react-native-0.81.md#safeareaview-deprecation)
* [Community-maintained JavaScriptCore support](/blog/2025/08/12/react-native-0.81.md#community-maintained-javascriptcore-support)
* [Experimental Precompiled iOS builds](/blog/2025/08/12/react-native-0.81.md#experimental-precompiled-ios-builds)

## Highlights[‚Äã](#highlights-1 "Direct link to Highlights")

### Android 16 support[‚Äã](#android-16-support "Direct link to Android 16 support")

Android apps built with React Native 0.81 will now default to targeting **Android 16** (API level 36).

As previously announced by Google, Android 16 requires that [apps are displayed edge-to-edge](https://developer.android.com/develop/ui/views/layout/edge-to-edge) with no support for [opting out](https://developer.android.com/about/versions/16/behavior-changes-16).

To support this, we are deprecating the `<SafeAreaView>` component [as previously announced](https://github.com/react-native-community/discussions-and-proposals/discussions/827) in favor of alternatives. [See below](#safeareaview-deprecation) which will provide better edge-to-edge support.

We are also adding a new gradle property `edgeToEdgeEnabled` to let you choose if you wish to enable edge-to-edge on all supported Android versions below 16.

[Predictive back gesture](https://developer.android.com/guide/navigation/custom-back/predictive-back-gesture) is now enabled by default for apps targeting Android 16. The [BackHandler](https://reactnative.dev/docs/backhandler) API should continue to work as before for most use cases. However, if your app relies on custom native code for back handling (such as overriding the `onBackPressed()` method), you may need to manually migrate your code or [temporarily opt-out](https://developer.android.com/guide/navigation/custom-back/predictive-back-gesture#opt-out). Please test your app‚Äôs back navigation thoroughly after upgrading.

Google now expects apps to support [adaptive layouts](https://developer.android.com/develop/ui/compose/layouts/adaptive) on large screen devices, regardless of orientation or size restrictions. While you can opt-out for now, it‚Äôs recommended to test and update your app for responsive UI on large screens before Android 17.

Starting November 1, 2025, all Google Play app submissions must meet the 16 KB page size requirement for native binaries. This applies to new apps and updates targeting Android 15+ devices. **React Native is already 16KB page size compliant**. Ensure all your native code and third-party libraries are compliant as well.

For more details on Android 16 changes and migration steps, refer to this [post in the discussions-and-proposals](https://github.com/react-native-community/discussions-and-proposals/discussions/921) repository.

### SafeAreaView deprecation[‚Äã](#safeareaview-deprecation "Direct link to SafeAreaView deprecation")

The built-in `<SafeAreaView>` component was originally designed to provide **limited, iOS-only support** for keeping content in the ‚Äúsafe areas‚Äù of the screen (away from camera notches, rounded corners, etc). It is not compatible with edge-to-edge rendering on Android, and does not permit customization beyond padding. As a result, many apps have opted for more portable and flexible solutions, such as `react-native-safe-area-context`.

In React Native 0.81, the legacy `<SafeAreaView>` component is deprecated, and you will see warnings in React Native DevTools if your app uses it.

It will be removed in a future version of React Native. We recommend that you migrate to `react-native-safe-area-context` or a similar library to ensure your app looks its best across all platforms.

### Community-maintained JavaScriptCore support[‚Äã](#community-maintained-javascriptcore-support "Direct link to Community-maintained JavaScriptCore support")

[As we announced last year](https://reactnative.dev/blog/2025/04/08/react-native-0.79#jsc-moving-to-community-package), support for the JavaScriptCore (JSC) engine has moved to a [community-maintained package](https://github.com/react-native-community/javascriptcore) that is released separately from React Native itself. In React Native 0.81, we're removing the built-in version of JavaScriptCore. All apps that require JavaScriptCore should now use the community package in order to upgrade to 0.81. [Read the installation instructions](https://github.com/react-native-community/javascriptcore#installation) for the details.

This change does not affect apps that are using Hermes.

### Experimental Precompiled iOS builds[‚Äã](#experimental-precompiled-ios-builds "Direct link to Experimental Precompiled iOS builds")

React Native 0.81 introduces precompiled iOS builds, cutting compile times by up to 10x in projects where React Native is the primary dependency. This is the result of a collaboration between Expo and Meta, and expands on [work we previously shipped in React Native 0.80](https://reactnative.dev/blog/2025/06/12/react-native-0.80#experimental---react-native-ios-dependencies-are-now-prebuilt).

This feature is still experimental, but we are hoping to enable it for all apps in a future release. If you‚Äôd like to try precompiled builds in your own app, you can enable them by specifying the following environment variables when you run `pod install`:

```
RCT_USE_RN_DEP=1 RCT_USE_PREBUILT_RNCORE=1 bundle exec pod install
```

Please provide feedback in [this GitHub discussion](https://github.com/react-native-community/discussions-and-proposals/discussions/923).

There are two limitations we are already aware of, and are working to resolve:

* In precompiled builds, you cannot debug and step into React Native's internals. You can still debug your *own* native code while using a precompiled version of React Native.
* Prebuilds are not supported in Xcode 26 Beta, because the IDE builds all targets with [Swift explicit modules](https://developer.apple.com/documentation/xcode-release-notes/xcode-26-release-notes#Resolved-Issues-in-Xcode-26-Beta:~:text=Starting%20from%20Xcode%2026%2C%20Swift%20explicit%20modules%20will%20be%20the%20default%20mode%20for%20building%20all%20Swift%20targets) enabled. To use precompiled builds with Xcode 26, set the `SWIFT_ENABLE_EXPLICIT_MODULES` flag to `NO` in your Xcode project. We will address this in an upcoming patch release.

You can read more about this feature in Expo‚Äôs full blog post, [Precompiled React Native for iOS: Faster builds are coming in 0.81](https://expo.dev/blog/precompiled-react-native-for-ios).

## Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

### Minimum Node.js bumped to 20[‚Äã](#minimum-nodejs-bumped-to-20 "Direct link to Minimum Node.js bumped to 20")

React Native now requires [Node.js](https://nodejs.org/) version 20.19.4 (the latest [Maintenance LTS](https://nodejs.org/en/about/previous-releases) version at the time of writing) or higher. You may need to upgrade Node.js in your development or CI environment when you upgrade to React Native 0.81.

### Minimum Xcode bumped to 16.1[‚Äã](#minimum-xcode-bumped-to-161 "Direct link to Minimum Xcode bumped to 16.1")

React Native now requires [Xcode 16.1](https://developer.apple.com/documentation/xcode-release-notes/xcode-16_1-release-notes) or higher to build iOS projects. You may need to upgrade Xcode in your development or CI environment when you upgrade to React Native 0.81.

### Metro: Better support for advanced configuration in Community CLI projects[‚Äã](#metro-better-support-for-advanced-configuration-in-community-cli-projects "Direct link to Metro: Better support for advanced configuration in Community CLI projects")

Metro now respects the `resolveRequest` and `getModulesRunBeforeMainModule` options if specified in the `metro.config.js` file of a React Native Community CLI project. Previously, setting them would have no effect. If you have custom values for these options in your `metro.config.js` file, you may need to delete them in order to restore the previous behavior.

### Improved reporting of uncaught JavaScript errors[‚Äã](#improved-reporting-of-uncaught-javascript-errors "Direct link to Improved reporting of uncaught JavaScript errors")

React Native DevTools now shows the original message and stack trace of uncaught JavaScript errors, as well as the error‚Äôs [cause](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/cause) if any, and an [Owner Stack](https://react.dev/reference/react/captureOwnerStack#owner-stack-vs-component-stack) for errors thrown by components. This makes errors easier to debug and fix.

![Example error including a cause and Owner Stack](/assets/images/0.81-improved-uncaught-error-fa95330ee5a41739cc7604a21e03be8b.png)

If you are logging JavaScript errors to your backend or to a third-party error reporting service, this may affect the logs you see after upgrading to React Native 0.81 (for example: you might see more thrown errors that used to be reported via `console.error`), and you may need to update some backend logic accordingly.

### `RN_SERIALIZABLE_STATE` and C++ flags.[‚Äã](#rn_serializable_state-and-c-flags "Direct link to rn_serializable_state-and-c-flags")

In this version of React Native, we introduced a new macro called `RN_SERIALIZABLE_STATE` to support serializable state for the Components on New Architecture.

If you‚Äôre a library author and you have a **custom** `CMakeLists.txt` file, you will need to specify this macro in your CMakeLists.txt file or your C++ code could fail to compile.

To support this, we introduce a new CMake function called `target_compile_reactnative_options` which will take care of setting up this macro and all the necessary C++ flags for you. You can invoke it as such in your CMakeLists file:

```
target_compile_reactnative_options(myLibraryName PRIVATE)
```

You can see an example of [how react-native-screens has set up this macro](https://github.com/software-mansion/react-native-screens/pull/3114/commits/b4d283c8fc65e36ec60726fd7513735ccc7e1fe9).

This change will affect only more advanced and complex libraries. If your library is using codegen and you don‚Äôt have a custom CMake file, you won‚Äôt be affected by this change.

### Other Breaking Changes[‚Äã](#other-breaking-changes "Direct link to Other Breaking Changes")

This list contains a series of other breaking changes we suspect could have a minor impact to your product code and are worth noting:

#### Android[‚Äã](#android "Direct link to Android")

* We made several classes internal. Those classes are not part of the public API and should not be accessed. We already notified or submitted patches to the affected libraries:

  <!-- -->

  * `com.facebook.react.fabric.mounting.MountingManager`
  * `com.facebook.react.views.text.TextLayoutManager`

* We moved the `textAlignVertical` [native prop](https://github.com/facebook/react-native/blob/841866c35401ae05fa9c6a2a3e9b42714bbd291e/packages/react-native/ReactCommon/react/renderer/attributedstring/ParagraphAttributes.h#L83) from `TextAttribute.h` to `ParagraphAttribute.h`

  * The prop `textAlignVertical` only affects the top most text view (paragraph view). Yet, it exists in text attribute props nonetheless. To better reflect this platform limitation it was moved to paragraph props.
  * This change is **not** affecting the JS API of the `<Text>` component.
  * You will be affected by this change only if you implement a Fabric component that interacts with the C++ Text API.
  * If you‚Äôre affected by this change, you can replace `TextAttributes.h` with `ParagraphAttribute.h` in your code

Read the full list of breaking changes [in the CHANGELOG for 0.81](https://github.com/facebook/react-native/blob/main/CHANGELOG.md#v0810).

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.81 contains over 1110 commits from 110 contributors. Thanks for all your hard work!

We want to send a special thank you to those community members that shipped significant contributions in this release:

* [Christian Falch](https://github.com/chrfalch) for the amazing work on precompiled iOS builds.
* [Mathieu Acthernoene](https://github.com/zoontek) for crucial contributions to Android edge-to-edge support
* [Enrique L√≥pez-Ma√±as](https://github.com/kikoso) and for helping test Android 16 integration and the SafeAreaView deprecation.

## Upgrade to 0.81[‚Äã](#upgrade-to-081 "Direct link to Upgrade to 0.81")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the Upgrading docs.

To create a new project:

```
npx @react-native-community/cli@latest init MyProject --version latest
```

If you use Expo, React Native 0.81 will be supported in the upcoming Expo SDK 54 as the default version of React Native.

info

0.81 is now the latest stable version of React Native and 0.78.x moves to unsupported. For more information see [React Native's support policy](https://github.com/reactwg/react-native-releases/blob/main/docs/support.md).

**Tags:**

* [engineering](/blog/tags/engineering)


---

# React Native 0.82 - A New Era

October 8, 2025 ¬∑

<!-- -->

13 min read

![Vitali Zaidman](https://github.com/vzaidman.png)

Vitali Zaidman

Software Engineer @ Meta

[](https://x.com/vzaidman "X")[](https://github.com/vzaidman "GitHub")[](https://www.threads.net/@vzaidman "Threads")

![Nicola Corti](https://github.com/cortinico.png)

Nicola Corti

Software Engineer @ Meta

[](https://x.com/cortinico "X")[](https://github.com/cortinico "GitHub")[](https://bsky.app/profile/cortini.co "Bluesky")

![Gabriel Donadel Dall'Agnol](https://github.com/gabrieldonadel.png)

Gabriel Donadel Dall'Agnol

Software Engineer @ Expo

[](https://x.com/donadeldev "X")[](https://github.com/gabrieldonadel "GitHub")

![Alan Hughes](https://github.com/alanjhughes.png)

Alan Hughes

Software Engineer @ Expo

[](https://github.com/alanjhughes "GitHub")

Today we're excited to release React Native 0.82: the first React Native that runs entirely on the New Architecture.

This is a milestone release for React Native and we believe it's the start of a new era. In future versions we will be removing the remaining code from the Legacy Architecture to reduce install size and streamline the codebase.

In addition, 0.82 also ships with an experimental opt-in to a newer version of Hermes called Hermes V1. We‚Äôre also enabling several React features by updating the React version to 19.1.1, and shipping support for DOM Node APIs.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [New Architecture Only](/blog/2025/10/08/react-native-0.82.md#new-architecture-only)
* [Experimental Hermes V1](/blog/2025/10/08/react-native-0.82.md#experimental-hermes-v1)
* [React 19.1.1](/blog/2025/10/08/react-native-0.82.md#react-1911)
* [DOM Node APIs](/blog/2025/10/08/react-native-0.82.md#dom-node-apis)

## New Architecture Only[‚Äã](#new-architecture-only "Direct link to New Architecture Only")

In React Native 0.76 we announced that [The New Architecture](/blog/2024/10/23/the-new-architecture-is-here.md) became the default architecture of React Native.

Since then, the New Architecture has been tested and refined and we're confident in making it the **only** architecture for this and future versions of React Native.

This means that if you try to set `newArchEnabled=false` on Android, or if you try to install CocoaPods with `RCT_NEW_ARCH_ENABLED=0` on iOS, these will be ignored and your app will still run using the New Architecture.

### How to migrate[‚Äã](#how-to-migrate "Direct link to How to migrate")

If you haven‚Äôt migrated your project to the New Architecture, we recommend first migrating your project to React Native 0.81 or Expo SDK 54. These are the last versions that allow you to use the Legacy Architecture. They contain warnings and performance improvements specifically to help migrating to the New Architecture.<br />Then enable the New Architecture in 0.81 and verify that your application is working fine.<br />Once you're using the New Architecture in 0.81, you can update safely to React Native 0.82 which prevents enabling the Legacy Architecture.

If an incompatible 3rd party dependency is blocking you from migrating to the New Architecture, we recommend you reach out to the library maintainers directly.

If a bug in React Native core is blocking you from migrating, we recommend you reach out to us [through our issue tracker](https://github.com/facebook/react-native/issues/new/choose).

### Interop Layers & 3P library compatibility[‚Äã](#interop-layers--3p-library-compatibility "Direct link to Interop Layers & 3P library compatibility")

We will keep the interop layers in the codebase for the foreseeable future. All the classes and functions that are required by the interop layers won‚Äôt be removed anytime soon. We will share further updates in the future regarding the removal of Interop Layers.

We‚Äôve also verified that the 3P libraries that offer backward compatibility with both architectures will keep on working with 0.82 where New Architecture is the only architecture.

### Removal of Legacy Architecture classes[‚Äã](#removal-of-legacy-architecture-classes "Direct link to Removal of Legacy Architecture classes")

To ensure backward compatibility and reduce breaking changes, we are not removing any APIs of the Legacy Architecture from the core of React Native in this version. Removing the Legacy Architecture will allow us to save significant size on the overall bundle size, therefore the removal is scheduled to start from the next version of React Native.

You can find more information in [RFC0929: Removal of the Legacy Architecture of React Native](https://github.com/react-native-community/discussions-and-proposals/pull/929).

## Experimental Hermes V1[‚Äã](#experimental-hermes-v1 "Direct link to Experimental Hermes V1")

React Native 0.82 adds support for opting into Hermes V1.

Hermes V1 is the next evolution of Hermes. We've been experimenting with it internally in our apps, and it is now time for the community to try it as well. It comes with improvements in the compiler and in the VM that boost Hermes performance.

From initial tests and benchmarks, Hermes V1 outperforms current Hermes in various scenarios. We have seen improvements in bundle loading and TTI. The improvements strongly depend on the details of your apps.

On the [Expensify app](https://github.com/Expensify/App), a real world and complex application, we have seen the following improvements:

| Metric           | Android (low end device) | iOS         |
| ---------------- | ------------------------ | ----------- |
| Bundle Load Time | 3.2% faster              | 9% faster   |
| Total TTI        | 7.6% faster              | 2.5% faster |
| Content TTI      | 7.2% faster              | 7.5% faster |

For Total TTI, we measured the time it takes from bundle loading to when the first screen in the app is rendered and it is interactive.

For Content TTI, we measured the time it takes for a component to be interactive, starting from the first rendering of the component itself.

Hermes V1 does not yet contain JS-to-native compilation (previously known as ‚ÄúStatic Hermes‚Äù) or the JIT compilation that was [presented during React Native EU 2023](https://www.youtube.com/watch?v=q-xKYA0EO-c). We are still testing these features, and will share more as we make progress.

### How to enable Hermes V1[‚Äã](#how-to-enable-hermes-v1 "Direct link to How to enable Hermes V1")

info

While Hermes V1 is in the experimental phase, you‚Äôll need to build React Native from source to try it out. Once Hermes V1 ships as default in a future React Native version, this restriction will be lifted.

To try Hermes V1 in your own project, use the following steps:

1. Force your package manager to resolve the experimental version of Hermes V1 compiler package by modifying the corresponding section of your `package.json` file (note that the current versioning convention is only for the experimental phase of Hermes V1):

* yarn
* npm

```
"resolutions": {
    "hermes-compiler": "250829098.0.1"
}
```

```
"overrides": {
    "hermes-compiler": "250829098.0.1"
}
```

2. Enable Hermes V1 for Android by adding `hermesV1Enabled=true` inside the `android/gradle.properties`:

android/gradle.properties

```
hermesV1Enabled=true
```

Also, configure React Native [to build from source](https://reactnative.dev/contributing/how-to-build-from-source#android) by editing `android/settings.gradle`:

android/settings.gradle

```
  includeBuild('../node_modules/react-native') {
      dependencySubstitution {
          substitute(module("com.facebook.react:react-android")).using(project(":packages:react-native:ReactAndroid"))
          substitute(module("com.facebook.react:react-native")).using(project(":packages:react-native:ReactAndroid"))
          substitute(project(":packages:react-native:ReactAndroid:hermes-engine")).using(module("com.facebook.hermes:hermes-android:250829098.0.1"))
      }
  }
```

3. Enable Hermes V1 for iOS by installing pods with `RCT_HERMES_V1_ENABLED=1` environment variable.

```
RCT_HERMES_V1_ENABLED=1 bundle exec pod install
```

Keep in mind that Hermes V1 is not compatible with the precompiled React Native builds, so make sure you don‚Äôt use the `RCT_USE_PREBUILT_RNCORE` flag when installing pods.

4. To confirm if your app is running Hermes V1, execute the following code within your app or DevTools console. This code will return the Hermes version, which should match the version specified in step 1 (`250829098.0.1`):

```
// expecting "250829098.0.1" in Hermes V1
HermesInternal.getRuntimeProperties()['OSS Release Version'];
```

## React 19.1.1[‚Äã](#react-1911 "Direct link to React 19.1.1")

This release of React Native ships with the latest React stable: [React 19.1.1](https://github.com/facebook/react/releases/tag/v19.1.1).

This release of React contains full support for owner stacks for React Native. Back in React Native 0.80, when we shipped support for 19.1.0, we [mentioned](/blog/2025/06/12/react-native-0.80.md#react-1910) that owner stacks were not fully supported if you were using the [`@babel/plugin-transform-function-name`](https://babeljs.io/docs/babel-plugin-transform-function-name) Babel plugin. This release lifts this restriction and enables owner stacks for all React Native users.

| BEFORE                                                                                                                     | AFTER                                                                                                                  |
| -------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| ![Example error thrown without Owner Stacks](/assets/images/0.82-owners-stack-before-bf24fa9bc9dd697b9200eb010ff02695.png) | ![Example error thrown with Owner Stacks](/assets/images/0.82-owners-stack-after-ed600840df30d9908efafb13dd595829.png) |

React 19.1.1 also improves the reliability of [`useDeferredValue`](https://react.dev/reference/react/useDeferredValue) and [`startTransition`](https://react.dev/reference/react/startTransition) in a Suspense boundary for React Native. These are essential React features, designed to boost app responsiveness. Previously both were wrongly showing the fallback component when used together with a Suspense boundary on React Native. With React 19.1.1, they now consistently perform as expected on React Native, aligning their behavior with Web.

## DOM Node APIs[‚Äã](#dom-node-apis "Direct link to DOM Node APIs")

Starting from React Native 0.82, native components will provide DOM-like nodes via refs.

Before, native components provided React Native-specific objects with just a handful of methods like `measure` and `setNativeProps`. After this release, they will provide [nodes implementing a subset of the DOM API](https://reactnative.dev/docs/element-nodes) to traverse the UI tree, measure layout, and more as on Web. For example:

```
function MyComponent(props) {
  const ref = useRef();

  useEffect(() => {
    const element = ref.current;

    // New methods
    element.parentNode;
    element.parentElement;
    element.childNodes;
    element.children;
    const bounds = element.getBoundingClientRect();
    const doc = element.ownerDocument;
    const maybeElement = doc.getElementById('some-view');

    // Legacy methods are still available
    element.measure((x, y, width, height, pageX, pageY) => {
      /* ... */
    });
  }, []);

  return <View ref={ref} />;
}
```

Additionally, this will expose access to leaf [text nodes](https://reactnative.dev/docs/text-nodes) (created by the `Text` component) and [document nodes](https://reactnative.dev/docs/document-nodes) representing React Native root nodes.

This is a backwards compatible change, as the new nodes will continue implementing the legacy methods (like `measure`).

For more information, please check our [documentation](https://reactnative.dev/docs/nodes).

## Other changes[‚Äã](#other-changes "Direct link to Other changes")

### Web Performance APIs (Canary)[‚Äã](#web-performance-apis-canary "Direct link to Web Performance APIs (Canary)")

React Native now implements a subset of the performance APIs available on Web:

* [High Resolution Time](https://www.w3.org/TR/hr-time-3/): defines `performance.now()` and `performance.timeOrigin`.
* [Performance Timeline](https://w3c.github.io/performance-timeline/): defines `PerformanceObserver` and methods to access performance entries in the performance object (`getEntries()`, `getEntriesByType()`, `getEntriesByName()`).
* [User Timing](https://w3c.github.io/user-timing/): defines `performance.mark` and `performance.measure`.
* [Event Timing API](https://w3c.github.io/event-timing/): defines `event` entry types reported to `PerformanceObserver`.
* [Long Tasks API](https://w3c.github.io/longtasks/): defines `longtask` entry types reported to `PerformanceObserver`.

They allow tracking different aspects of performance in your app at runtime (for telemetry) and they will be visible in the performance panel in React Native DevTools (available in a future version of React Native).

They are currently **available only in the [canary release level](https://reactnative.dev/docs/releases/release-levels)**, and will be released as stable in a future version of React Native.

### Optimized Debug Build Type for Android[‚Äã](#optimized-debug-build-type-for-android "Direct link to Optimized Debug Build Type for Android")

Starting with React Native 0.82, you will be able to use the `debugOptimized` build type to speed up your development experience.

Historically, Android creates two default build variants:

* `debug`, used by default when developing and that allows you to connect to the various debugger tools such as React Native DevTools, Metro, the Android JVM and C++ debugger
* `release`, used when shipping your application to production. This is fully optimized, with obfuscation and optimization that will make debugging harder.

As most React Native developers won‚Äôt need to use the C++ debugger when developing, we introduced the `debugOptimized` build type.

With `debugOptimized` your animations and re-rendering will be faster, because you‚Äôre running a React Native build with several C++ optimizations enabled. At the same time you will still be able to use React Native Dev Tools to debug your JavaScript code.

When using `debugOptimized`, you won‚Äôt be able to use the C++ native debuggers, but you will still be able to use it if you use the debug build type.

To run the `debugOptimized` variant for your app you can invoke:

* Community CLI
* Expo

```
npx react-native run-android --mode debugOptimized
```

```
npx expo run:android --variant debugOptimized
```

info

The `debugOptimized` build type has also been backported to React Native 0.81 and Expo SDK 54.

You can see the `debugOptimized` in action in these samples where we‚Äôre rendering several animations on screens.

The build running `debug` is running at \~20FPS while the `debugOptimized` one is running at \~60FPS:

| `debug`                                                                                             | `debugOptimized`                                                                                                       |
| --------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| ![Example build running with debug](/assets/images/0.82-debug-b85b9cfcbd8b7c2f86f8bea40be8edd1.gif) | ![Example build running with debugOptimized](/assets/images/0.82-debug-optimized-42824de1774ee3794888eb24203f56e2.gif) |

## Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

### Uncaught promise rejections will now raise `console.error`[‚Äã](#uncaught-promise-rejections-will-now-raise-consoleerror "Direct link to uncaught-promise-rejections-will-now-raise-consoleerror")

Following the [improvement of reporting uncaught JavaScript errors](/blog/2025/08/12/react-native-0.81.md#improved-reporting-of-uncaught-javascript-errors) in the previous version, we will now be reporting uncaught promises through that mechanism as well:

![Example of a promise rejection reported to console](/assets/images/0.82-uncaught-promise-rejection-report-9b6e4e11cc1db946a1ebd377a54a21cc.png)

Due to a bug, these were completely swallowed and ignored previously, so please expect some pre-existing errors to surface after upgrading to React Native 0.81. For that reason, previously pre-existing errors might also surface in JavaScript errors reported to your backend, and create a surge in new reports.

### Other Breaking Changes[‚Äã](#other-breaking-changes "Direct link to Other Breaking Changes")

#### General[‚Äã](#general "Direct link to General")

* Move `ReactNativeFeatureFlags` to `src/private`
  * In general you should not depend on `ReactNativeFeatureFlags` at all as that is a private API.
* Type of `Appearance.setColorScheme()` has been updated to no longer accept a nullable value
  <!-- -->
  * Use 'unspecified' instead of null/undefined in the edge case that the color scheme needs to be reset.

#### iOS[‚Äã](#ios "Direct link to iOS")

* Migrated `RCTDisplayLink` away from legacy api `RCTModuleData` as we plan to remove it in the future.

#### Android[‚Äã](#android "Direct link to Android")

* Class `com.facebook.react.bridge.JSONArguments` is removed as was accidentally `public`
* Deprecate `MessageQueueThreadPerfStats`
  * We deprecated this API and replaced it with stub. You should not rely on stats from this API anymore as the provided stats were not reliable
* Bump Gradle from 8.x to 9.0.0
  <!-- -->
  * List of all the changes in the next major stable version of Gradle 9.0.0 is available [here](https://gradle.org/whats-new/gradle-9/) but we expect no impact at all to users

#### C++[‚Äã](#c "Direct link to C++")

* Delete backward compatibility headers for `CallbackWrapper.h` / `LongLivedObject.h`

  * The correct include for those headers is `#include <react/bridging/LongLivedObject.h>` and `#include <react/bridging/CallbackWrapper.h>`.
  * You should not use the old includes under `#import <ReactCommon/‚Ä¶.h>`

Read the full list of breaking changes in the [CHANGELOG for 0.82](https://github.com/facebook/react-native/blob/main/CHANGELOG.md#v0820).

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.82 contains over 868 commits from 93 contributors. Thanks for all your hard work!

We want to send a special thank you to those community members that shipped significant contributions in this release:

* [Dawid Ma≈Çecki](https://github.com/coado) and [Jakub Piasecki](https://github.com/j-piasecki) for the help in rolling out Hermes V1.
* [Krystof Woldrich](https://github.com/krystofwoldrich) for the support with fixing the swallowing of uncaught promise rejections.
* [Riccardo Cipolleschi](https://github.com/cipolleschi) for the support with writing the React 19.1.1 and Hermes V1 paragraph above.
* [Rub√©n Norte](https://github.com/rubennorte) for the support with writing the DOM API and Performance API paragraphs.
* [Tomasz Zawadzki](https://github.com/tomekzaw/) for the support with the `debugOptimized` benchmarking.

## Upgrade to 0.82[‚Äã](#upgrade-to-082 "Direct link to Upgrade to 0.82")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the [upgrading to new versions docs](/docs/upgrading.md).

To create a new project:

```
npx @react-native-community/cli@latest init MyProject --version latest
```

If you use Expo, React Native 0.82 will be available as part of the expo\@canary releases.

The next SDK, SDK 55, will be shipped with the next stable release of React Native: 0.83.

info

0.82 is now the latest stable version of React Native and 0.79.x moves to unsupported. For more information see [React Native's support policy](https://github.com/reactwg/react-native-releases/blob/main/docs/support.md).

**Tags:**

* [engineering](/blog/tags/engineering)


---

# React Native 0.83 - React 19.2, New DevTools features, no breaking changes

December 10, 2025 ¬∑

<!-- -->

12 min read

![Alex Hunt](https://github.com/huntie.png)

Alex Hunt

Software Engineer @ Meta

[](https://x.com/huntie "X")[](https://github.com/huntie "GitHub")

![Riccardo Cipolleschi](https://github.com/cipolleschi.png)

Riccardo Cipolleschi

Software Engineer @ Meta

[](https://x.com/CipolleschiR "X")[](https://github.com/cipolleschi "GitHub")

![Gabriel Donadel Dall'Agnol](https://github.com/gabrieldonadel.png)

Gabriel Donadel Dall'Agnol

Software Engineer @ Expo

[](https://x.com/donadeldev "X")[](https://github.com/gabrieldonadel "GitHub")

![Alan Hughes](https://github.com/alanjhughes.png)

Alan Hughes

Software Engineer @ Expo

[](https://github.com/alanjhughes "GitHub")

Today we are excited to release React Native 0.83!

This release includes React 19.2, significant new features for React Native DevTools, and support for the Web Performance and Intersection Observer APIs (Canary). This is also the first React Native release with no user facing breaking changes.

### Highlights[‚Äã](#highlights "Direct link to Highlights")

* [React 19.2](/blog/2025/12/10/react-native-0.83.md#react-192)
* [New DevTools features](/blog/2025/12/10/react-native-0.83.md#new-devtools-features)
* [Intersection Observers (Canary)](/blog/2025/12/10/react-native-0.83.md#intersection-observers-canary)
* [Web Performance APIs as stable](/blog/2025/12/10/react-native-0.83.md#web-performance-apis-as-stable)

## React 19.2[‚Äã](#react-192 "Direct link to React 19.2")

This release includes React 19.2, bringing the new `<Activity>` and `useEffectEvent` APIs to React Native.

Important: [CVE-2025-55182](https://react.dev/blog/2025/12/03/critical-security-vulnerability-in-react-server-components)

At time of release, `react-native@0.83.0` depends on `react@19.2.0`, and you might also have seen the recent [Critical Security Vulnerability in React Server Components](https://react.dev/blog/2025/12/03/critical-security-vulnerability-in-react-server-components).

We want to stress that **React Native is NOT directly affected by this vulnerability**, as it does not depend on the impacted packages:

* `react-server-dom-webpack`
* `react-server-dom-parcel`
* `react-server-dom-turbopack`

**However**, if you are using React Native as part of a **monorepo** where these packages may be present, please check and upgrade them immediately.

We will update all React dependencies to `19.2.1` in our next patch release.

### `<Activity>`[‚Äã](#activity "Direct link to activity")

`<Activity>` lets you break your app into "activities" that can be controlled and prioritized. You can use Activity as an alternative to conditionally rendering parts of your app, and it currently supports 2 modes: `'visible'` and `'hidden'`.

* `hidden`: hides the children, unmounts effects, and defers all updates until React has nothing left to work on.
* `visible`: shows the children, mounts effects, and allows updates to be processed normally.

One interesting feature of trees hidden using `<Activity mode='hidden'>` is that they preserve their state. So, when they become visible again, they, for example, keep the search status and the selection from a previous user interaction.

| React 19.1.1                                                                         | React 19.2.1                                                                      |
| ------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------- |
| ![](/assets/images/0.83-react-19.2-no-activity-61b910cc3d32753f1432f8d365963dab.gif) | ![](/assets/images/0.83-react-19.2-activity-c374acc50fc57945dd0ef92ab6d119fe.gif) |

You can read more about `<Activity>` in the [React docs](https://react.dev/reference/react/Activity).

### `useEffectEvent`[‚Äã](#useeffectevent "Direct link to useeffectevent")

One common pattern with `useEffect` is to notify the app code about some kind of "event" from an external system. The problem with this approach is that a change to any value used inside such an event will cause the surrounding Effect to re-run.

To solve this, most users disable the lint rule and exclude the dependency. But that can lead to bugs since the linter can no longer help you keep the dependencies up to date if you need to update the Effect later.

With `useEffectEvent`, you can split the "event" part of this logic out of the Effect that emits it.

You can read more about `useEffectEvent` in the [React docs](https://react.dev/reference/react/useEffectEvent).

## New DevTools features[‚Äã](#new-devtools-features "Direct link to New DevTools features")

In 0.83 we're excited to deliver some long awaited features and quality of life improvements to React Native DevTools.

### Network and Performance panels[‚Äã](#network-and-performance-panels "Direct link to Network and Performance panels")

Network inspection and performance tracing are two powerful new capabilities in React Native DevTools, available today.

![Network panel list in React Native DevTools](/assets/images/debugging-rndt-network-462cd5e39a5525592501627bb0087747.jpg)

**Network inspection**, now available for all React Native apps, allows you to view and understand the network requests made by your app. Logged requests provide detailed metadata such as timings and headers sent/received, as well as response previews. And ‚Äî for the first time ‚Äî you can use the Initiator tab to see where in your code a network request originated.

**üí° Network event coverage, Expo support**

**Which network events are captured?**

Today, we record all network calls through `fetch()`, `XMLHttpRequest`, and `<Image>` ‚Äî with support for custom networking libraries, such as Expo Fetch, coming later.

**Expo Network differences**

Because of this, apps using Expo will continue to see the "Expo Network" panel ‚Äî a separate implementation by the Expo framework which will log these additional request sources but has slightly reduced features.

* Coverage for Expo-specific network events.
* No request initiator support.
* No Performance panel integration.

We're working with Expo to integrate Expo Fetch and third party networking libraries with our new Network inspection pipeline in future releases.

![A performance trace in React Native DevTools](/assets/images/debugging-rndt-performance-084166527768b90dbb936b240707bdcb.jpg)

**Performance tracing** allows you to record a performance session within your app to understand how your JavaScript code is running and what operations took the most time. In React Native, we show JavaScript execution, React Performance tracks, Network events, and custom [User Timings](https://developer.mozilla.org/en-US/docs/Web/API/Performance_API/User_timing), rendered in a single performance timeline.

Together with support for the Web Performance APIs in 0.83, this is a powerful feature set providing fine-grained visibility into what might be making your React Native apps slow. We encourage everyone to try out the Performance panel and make it a part of your daily workflow.

Learn more about our newest [React Native DevTools features](/docs/react-native-devtools.md) and [React Performance tracks](https://react.dev/reference/dev-tools/react-performance-tracks).

### New desktop app[‚Äã](#new-desktop-app "Direct link to New desktop app")

Previously, React Native DevTools launched in a browser window and required Chrome or Edge to be installed. Today, we're introducing a vastly improved desktop experience with our new bundled desktop app. It features:

* **The same zero-install setup as before**, now with **no web browser requirement**.
* **Faster launch** via a lightweight and notarized desktop binary. In rare cases where this cannot be downloaded (such as a corporate firewall), we fall back to the previous browser launch flow.
* **Better windowing**, with improved multitasking on macOS, auto-raise on breakpoint, auto-raise when reconnecting to the same app, and saved window arrangements on relaunch.
* **Improved reliability** by running DevTools separately from your personal browser profile. In particular, this resolves bug reports we have received about certain preinstalled Chrome extensions causing React Native DevTools to break.

![React Native DevTools icon in the macOS Dock](/assets/images/0.83-rndt-desktop-app-99c6ef69aebde93fc5775942e660518c.jpg)

## Intersection Observers (Canary)[‚Äã](#intersection-observers-canary "Direct link to Intersection Observers (Canary)")

As part of our effort to bring web APIs to React Native, we have added support for [`IntersectionObserver`](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API) in the [canary release](https://reactnative.dev/docs/next/releases/release-levels#how-to-initialize-react-native-using-canary--experimental) for 0.83.

`IntersectionObserver` allows you to asynchronously observe layout intersections between a target element and its ancestor. Please see our [API](https://reactnative.dev/docs/next/global-intersectionobserver) and [implementation docs](https://github.com/facebook/react-native/blob/main/packages/react-native/src/private/webapis/intersectionobserver/__docs__/README.md) for more details. We've also included [examples](https://github.com/facebook/react-native/tree/main/packages/rn-tester/js/examples/IntersectionObserver) in RNTester.

[](/blog/assets/0.83-intersection-observer.mp4)

## Other changes[‚Äã](#other-changes "Direct link to Other changes")

### Web Performance APIs as stable[‚Äã](#web-performance-apis-as-stable "Direct link to Web Performance APIs as stable")

As introduced in 0.82, React Native now implements a subset of the [Performance APIs](https://developer.mozilla.org/en-US/docs/Web/API/Performance_API) available on Web ‚Äî¬†now rolled out as stable:

* [High Resolution Time](https://www.w3.org/TR/hr-time-3/): defines `performance.now()` and `performance.timeOrigin`.
* [Performance Timeline](https://w3c.github.io/performance-timeline/): defines `PerformanceObserver` and methods to access performance entries in the performance object (`getEntries()`, `getEntriesByType()`, `getEntriesByName()`).
* [User Timing](https://w3c.github.io/user-timing/): defines `performance.mark` and `performance.measure`.
* [Event Timing API](https://w3c.github.io/event-timing/): defines `event` entry types reported to `PerformanceObserver`.
* [Long Tasks API](https://w3c.github.io/longtasks/): defines `longtask` entry types reported to `PerformanceObserver`.

These APIs allow tracking different aspects of performance in your app, visible in the Performance panel in React Native DevTools, as well as at runtime via `PerformanceObserver`.

`PerformanceObserver` also works in production builds, opening new opportunities for capturing real world performance metrics in your apps.

### Experimental - Hermes V1[‚Äã](#experimental---hermes-v1 "Direct link to Experimental - Hermes V1")

![Hermes logo](/assets/images/0.83-hermes-v1-15f50ba6bcc70a8b99e4c3e13bd17ac8.jpg)

Hermes V1 is the next evolution of Hermes, with improvements in the compiler and the VM that significantly boost JavaScript performance.

In React Native 0.82, we released Hermes V1 as an experimental opt-in. And in 0.83, Hermes V1 includes further performance improvements.

**üí° Enabling Hermes V1**

**Note**: While Hermes V1 is in the experimental phase, you‚Äôll need to build React Native from source to try it out.

To try Hermes V1 in your own project, use the following steps:

1. Force your package manager to resolve the experimental version of Hermes V1 compiler package by modifying the corresponding section of your package.json file (note that the current versioning convention is only for the experimental phase of Hermes V1):

* yarn
* npm

package.json

```
"resolutions": { "hermes-compiler": "250829098.0.4" }
```

package.json

```
"overrides": { "hermes-compiler": "250829098.0.4" }
```

2. Enable Hermes V1 for Android by adding hermesV1Enabled=true inside `android/gradle.properties`:

   android/gradle.properties

   ```
   hermesV1Enabled=true
   ```

   Also, configure React Native to build from source by editing android/settings.gradle:

   android/settings.gradle

   ```
     includeBuild('../node_modules/react-native') {
         dependencySubstitution {
             substitute(module("com.facebook.react:react-android")).using(project(":packages:react-native:ReactAndroid"))
             substitute(module("com.facebook.react:react-native")).using(project(":packages:react-native:ReactAndroid"))
             substitute(project(":packages:react-native:ReactAndroid:hermes-engine")).using(module("com.facebook.hermes:hermes-android:250829098.0.1"))
         }
     }
   ```

3. Enable Hermes V1 for iOS by installing pods with `RCT_HERMES_V1_ENABLED=1` environment variable.

   ```
   RCT_HERMES_V1_ENABLED=1 bundle exec pod install
   ```

   Keep in mind that Hermes V1 is not compatible with the precompiled React Native builds, so make sure you don‚Äôt use the `RCT_USE_PREBUILT_RNCORE` flag when installing pods.

4. To confirm if your app is running Hermes V1, execute the following code within your app or the DevTools console. This code will return the Hermes version, which should match the version specified in step 1 (250829098.0.1):

   ```
   // expecting "250829098.0.1" in Hermes V1
   HermesInternal.getRuntimeProperties()['OSS Release Version'];
   ```

### Experimental - Compile out the Legacy Architecture on iOS[‚Äã](#experimental---compile-out-the-legacy-architecture-on-ios "Direct link to Experimental - Compile out the Legacy Architecture on iOS")

In this release, we are adding a new flag for iOS that allows you to compile out the Legacy Architecture from the codebase. If your app is already on the New Architecture, you can try to remove the legacy architecture code by installing your pods with:

```
RCT_REMOVE_LEGACY_ARCH=1 bundle exec pod install
```

This should reduce both the build time and the size of your app. The improvements depend on how many third party libraries you are using: in our tests, using a new app without dependencies, the build time was reduced from 73.0 seconds to 58.2 seconds, and the app size went from 51.2 Mb to 48.2 Mb.

info

`RCT_REMOVE_LEGACY_ARCH` is not compatible with React Native precompiled binaries. If you are using precompiled binaries, you'll need to reinstall the pods and build the app from source.

### Experimental - Debug your precompiled binaries on iOS[‚Äã](#experimental---debug-your-precompiled-binaries-on-ios "Direct link to Experimental - Debug your precompiled binaries on iOS")

In this release, we've implemented the ability to debug the React Native code that is shipped with a precompiled binary. This is primarily helpful to library maintainers or if you are developing a native module or a native component.

To debug the binary code shipped with the React Native precompiled binary, follow these steps:

```
# From the ios folder of your project
bundle exec pod cache clean --all
bundle exec pod deintegrate
RCT_USE_RN_DEP=1 RCT_USE_PREBUILT_RNCORE=1
RCT_SYMBOLICATE_PREBUILT_FRAMEWORKS=1 bundle exec pod install
open <your-project>.xcworkspace
```

The magic is done by the `RCT_SYMBOLICATE_PREBUILT_FRAMEWORKS` flag, which instructs CocoaPods to download the React Native dSYM files and expand them in the proper folder.

At this point, you can put a breakpoint in your app, for example in `AppDelegate.swift`, and build and run the app from Xcode.

When the application pauses, open the Xcode console and run the LLDB command:

```
# If you are running the app in the simulator
add-dsym <path-to-your-app>/ios/Pods/React-Core-prebuilt/React.xcframework/ios-arm64_x86_64-simulator/React.framework/dSYMs/React.framework.dSYM

# If you are running the app on a physical device
add-dsym <path-to-your-app>/ios/Pods/React-Core-prebuilt/React.xcframework/ios-arm64/React.framework/dSYMs/React.framework.dSYM
```

Now you can step into the React Native code.

## Breaking Changes[‚Äã](#breaking-changes "Direct link to Breaking Changes")

We're working hard to make React Native releases more predictable and easier to upgrade. React Native 0.83 is the first release with **no user facing breaking changes**.

If you are on React Native 0.82, you should be able to upgrade your app to React Native 0.83 without any changes to your app code.

To learn more about what we consider a breaking change, have a look at [this article](/docs/releases/versioning-policy.md#what-is-a-breaking-change).

## Deprecations[‚Äã](#deprecations "Direct link to Deprecations")

This release ships two deprecations that are Android specific:

* **Networking**: The `sendRequestInternal` method is being phased out and it is now deprecated.
* **Animation**: `startOperationBatch` and `finishOperationBatch` are now deprecated.

## Acknowledgements[‚Äã](#acknowledgements "Direct link to Acknowledgements")

React Native 0.83 contains over 594 commits from 56 contributors. Thanks for all your hard work!

We want to send a special thank you to those community members that shipped significant contributions in this release:

* [Ruslan Lesiutin](https://github.com/hoxyq), [Moti Zilberman](https://github.com/motiz88), and [Alex Hunt](https://x.com/huntie) for the React Native DevTools Performance and Network features.
* [Moti Zilberman](https://github.com/motiz88) for the React Native DevTools desktop app.
* [Luna Wei](https://github.com/lunaleaps) for Intersection Observers.
* [Rub√©n Norte](https://github.com/rubennorte) for the Web Performance APIs.
* [Dawid Ma≈Çecki](https://github.com/coado) and [Jakub Piasecki](https://github.com/j-piasecki) for the rollout of Hermes V1.
* [Ramanpreet Nara](https://github.com/rsnara) for the `RCT_REMOVE_LEGACY_ARCH` flag.
* [Christian Falch](https://github.com/chrfalch) for precompiled iOS binary debugging.

## Upgrade to 0.83[‚Äã](#upgrade-to-083 "Direct link to Upgrade to 0.83")

Please use the [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to view code changes between React Native versions for existing projects, in addition to the [Upgrading docs](/docs/upgrading.md).

To create a new project:

```
npx @react-native-community/cli@latest init MyProject --version latest
```

If you use Expo, React Native 0.83 will be available in SDK 55, which will be released in January 2026.

### Supported versions[‚Äã](#supported-versions "Direct link to Supported versions")

0.83 is now the latest stable version of React Native and 0.80.x moves to unsupported. For more information see [React Native's support policy](https://github.com/reactwg/react-native-releases/blob/main/docs/support.md).

**Tags:**

* [announcement](/blog/tags/announcement)
* [release](/blog/tags/release)


---

[Skip to main content](#__docusaurus_skipToContent_fallback)

[![React Native](/img/header_logo.svg)![React Native](/img/header_logo.svg)](/index.md)

[**React Native**](/index.md)

[Development](#)

* [Guides](/docs/getting-started.md)
* [Components](/docs/components-and-apis.md)
* [APIs](/docs/accessibilityinfo.md)
* [Architecture](/architecture/overview.md)

[Contributing](/contributing/overview.md)[Community](/community/overview.md)[Showcase](/showcase.md)[Blog](/blog.md)[](https://github.com/facebook/react-native)

Search

# Who is using React Native?

Thousands of apps are using React Native, from established Fortune 500 companies to hot new startups. If you are curious to see what can be accomplished with React Native, check out these apps!

## ![Meta logo](/img/showcase/meta_positive_primary.svg)![Meta logo](/img/showcase/meta_negative_primary.svg)

React Native is shaping mobile, web, and desktop experiences within Meta‚Äôs product ecosystem, from Facebook Marketplace, Messenger Desktop, Ads Manager to the Meta Quest app and many more.

![Facebook](/img/showcase/facebook.webp)![Facebook](/img/showcase/facebook.webp)

### Facebook

[iOS](https://apps.apple.com/app/facebook/id284882215) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.facebook.katana) ‚Ä¢ [Meta¬†Quest](https://www.meta.com/experiences/facebook/7495711360547796/)

![Instagram](/img/showcase/instagram.png)![Instagram](/img/showcase/instagram.png)

### Instagram

[Meta¬†Quest](https://www.meta.com/experiences/instagram/6894135610696226/)

![Facebook Ads Manager](/img/showcase/adsmanager.png)![Facebook Ads Manager](/img/showcase/adsmanager.png)

### Facebook Ads Manager

[iOS](https://apps.apple.com/us/app/facebook-ads-manager/id964397083) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.facebook.adsmanager)

![Meta Horizon](/img/showcase/metahorizon.webp)![Meta Horizon](/img/showcase/metahorizon.webp)

### Meta Horizon

[iOS](https://apps.apple.com/us/app/oculus/id1366478176) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.oculus.twilight\&hl=en_US)

![Messenger Desktop](/img/showcase/messengerdesktop.png)![Messenger Desktop](/img/showcase/messengerdesktop.png)

### Messenger Desktop

[Desktop](https://www.messenger.com/desktop)

## ![Microsoft logo](/img/showcase/microsoft-logo-gray.png)![Microsoft logo](/img/showcase/microsoft-logo-white.png)

Microsoft leverages the power of React Native to deliver excellent customer experiences in some of its most well known apps.<br />Microsoft doesn't stop at mobile platforms either -- Microsoft leverages React Native to target desktop too! Find out more in the<!-- --> [dedicated showcase](https://microsoft.github.io/react-native-windows/resources-showcase) <!-- -->for React Native Windows and macOS.

![Microsoft Office](/img/showcase/officemobile.png)![Microsoft Office](/img/showcase/officemobile.png)

### Microsoft Office

[iOS](https://apps.apple.com/gb/app/microsoft-office/id541164041) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.microsoft.office.officehubrow)

![Microsoft Outlook](/img/showcase/outlookmobile.png)![Microsoft Outlook](/img/showcase/outlookmobile.png)

### Microsoft Outlook

[iOS](https://apps.apple.com/us/app/microsoft-outlook/id951937596) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.microsoft.office.outlook)

![Microsoft Teams](/img/showcase/teamsmobile.png)![Microsoft Teams](/img/showcase/teamsmobile.png)

### Microsoft Teams

[iOS](https://apps.apple.com/gb/app/microsoft-teams/id1113153706) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.microsoft.teams)

![Xbox Game Pass](/img/showcase/xboxgamepass.png)![Xbox Game Pass](/img/showcase/xboxgamepass.png)

### Xbox Game Pass

[iOS](https://apps.apple.com/gb/app/xbox-game-pass/id1374542474) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.gamepass)

## ![Amazon logo](/img/showcase/amazon_logo_lightbg.png)![Amazon logo](/img/showcase/amazon_logo_darkbg.png)

Amazon has used React Native to rapidly deliver new customer-facing features in some of its most popular mobile applications as early as 2016. Amazon also uses React Native to support customer-favorite devices such as the Kindle E-readers.

![Amazon Shopping](/img/showcase/amazon-shopping.png)![Amazon Shopping](/img/showcase/amazon-shopping.png)

### Amazon Shopping

[iOS](https://apps.apple.com/us/app/amazon-shopping/id297606951) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.amazon.mShop.android.shopping)

![Amazon Alexa](/img/showcase/amazon-alexa.webp)![Amazon Alexa](/img/showcase/amazon-alexa.webp)

### Amazon Alexa

[iOS](https://apps.apple.com/us/app/amazon-alexa/id944011620) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.amazon.dee.app\&hl=en_US\&gl=US)

![Amazon Photos](/img/showcase/amazon-photos.webp)![Amazon Photos](/img/showcase/amazon-photos.webp)

### Amazon Photos

[iOS](https://apps.apple.com/us/app/amazon-photos-photo-video/id621574163) ‚Ä¢ [Android](<https://play.google.com/store/apps/details?id=com.amazon.clouddrive.photos\&hl=en_US\&gl=US >)

![Amazon Kindle](/img/showcase/amazon-kindle.png)![Amazon Kindle](/img/showcase/amazon-kindle.png)

### Amazon Kindle

[Learn more](https://www.amazon.com/b/?node=6669702011 "Purpose-built for reading, Kindle e-readers let you take your stories wherever you go")

<!-- -->

[ ](https://www.amazon.com/b/?node=6669702011 "Purpose-built for reading, Kindle e-readers let you take your stories wherever you go")

## ![Shopify logo](/img/showcase/shopify_logo_whitebg.svg)![Shopify logo](/img/showcase/shopify_logo_darkbg.svg)

All mobile apps at Shopify are built using React Native. You can read more about React Native development at Shopify on our<!-- --> [blog](https://shopify.engineering/topics/mobile).

![Shopify](/img/showcase/shopify.png)![Shopify](/img/showcase/shopify.png)

### Shopify

[iOS](https://apps.apple.com/us/app/shopify-your-ecommerce-store/id371294472) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.shopify.mobile\&hl=en_US\&gl=US)

![Shop: All your favorite brands](/img/showcase/shop.webp)![Shop: All your favorite brands](/img/showcase/shop.webp)

### Shop: All your favorite brands

[iOS](https://apps.apple.com/ca/app/shop-package-order-tracker/id1223471316) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.shopify.arrive\&hl=en_US\&gl=US)

![Shopify Inbox](/img/showcase/shopify-inbox.webp)![Shopify Inbox](/img/showcase/shopify-inbox.webp)

### Shopify Inbox

[iOS](https://apps.apple.com/us/app/shopify-inbox/id1301681854) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.shopify.ping\&gl=US)

![Shopify Point of Sale](/img/showcase/pos.webp)![Shopify Point of Sale](/img/showcase/pos.webp)

### Shopify Point of Sale

[iOS](https://apps.apple.com/us/app/shopify-point-of-sale-pos/id686830644) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.shopify.pos\&gl=US)

## ![Wix logo](/img/showcase/wix_logo_lightbg.svg)![Wix logo](/img/showcase/wix_logo_darkbg.svg)

With one of the largest React Native code bases in the world, Wix has a long history with the development community and maintains a variety of open source projects. Wix is an early adopter of React Native and uses it for its entire suite of applications.

![Spaces: Follow Businesses](/img/showcase/spaces.webp)![Spaces: Follow Businesses](/img/showcase/spaces.webp)

### Spaces: Follow Businesses

[iOS](https://itunes.apple.com/us/app/wix-com/id1099748482) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.wix.android)

![Dine by Wix](/img/showcase/dine.webp)![Dine by Wix](/img/showcase/dine.webp)

### Dine by Wix

[iOS](https://apps.apple.com/us/app/dine-by-wix/id1561524113) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.wix.restaurants)

![Fit by Wix](/img/showcase/fit.webp)![Fit by Wix](/img/showcase/fit.webp)

### Fit by Wix

[iOS](https://apps.apple.com/us/developer/wix-com-inc/id407141669) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.wix.fitness)

![Wix Owner - Website Builder](/img/showcase/owner.webp)![Wix Owner - Website Builder](/img/showcase/owner.webp)

### Wix Owner - Website Builder

[iOS](https://apps.apple.com/us/app/wix-owner-website-builder/id1545924344) ‚Ä¢ [Android](https://play.google.com/store/apps/details?id=com.wix.admin)

## Users Showcase

[Apply to the Showcase by filling out this form](https://forms.gle/BdNf3v5hemV9D5c86)

For a curated list of open source React Native apps, check out<!-- --> [this list](https://github.com/ReactNativeNews/React-Native-Apps) <!-- -->maintained by [Infinite Red](https://infinite.red).

Develop

* [Guides](/docs/getting-started.md)
* [Components](/docs/components-and-apis.md)
* [APIs](/docs/accessibilityinfo.md)
* [Architecture](/architecture/overview.md)

Participate

* [Showcase](/showcase.md)
* [Contributing](/contributing/overview.md)
* [Community](/community/overview.md)
* [Directory](https://reactnative.directory/)
* [Stack Overflow](https://stackoverflow.com/questions/tagged/react-native)

Find us

* [Blog](/blog.md)
* [X](https://x.com/reactnative)
* [Bluesky](https://bsky.app/profile/reactnative.dev)
* [GitHub](https://github.com/facebook/react-native)

Explore More

* [ReactJS](https://react.dev/)
* [Privacy Policy](https://opensource.fb.com/legal/privacy/)
* [Terms of Service](https://opensource.fb.com/legal/terms/)

[![Meta Open Source Logo](/img/oss_logo.svg)![Meta Open Source Logo](/img/oss_logo.svg)](https://opensource.fb.com/)

Copyright ¬© 2025 Meta Platforms, Inc.


---

[Skip to main content](#__docusaurus_skipToContent_fallback)

[![React Native](/img/header_logo.svg)![React Native](/img/header_logo.svg)](/index.md)

[**React Native**](/index.md)

[Development](#)

* [Guides](/docs/getting-started.md)
* [Components](/docs/components-and-apis.md)
* [APIs](/docs/accessibilityinfo.md)
* [Architecture](/architecture/overview.md)

[Contributing](/contributing/overview.md)[Community](/community/overview.md)[Showcase](/showcase.md)[Blog](/blog.md)[](https://github.com/facebook/react-native)

Search

# React Native versions

Open source React Native releases follow a release train that is coordinated on GitHub through the<!-- --> [`react-native-releases`](https://github.com/reactwg/react-native-releases/discussions) <!-- -->repository. New releases are created off the `main` branch of<!-- --> [`facebook/react-native`](https://github.com/facebook/react-native). They will follow a Release Candidate process to allow contributors like yourself to<!-- --> [verify the changes](/docs/upgrading.md) and to identify any issues by<!-- --> [writing clear, actionable bug reports](https://github.com/facebook/react-native/issues). Eventually, the release candidate will be promoted to stable.

Below is the schedule and current status of recent and upcoming React Native releases:

| Version  | Branch-cut Date | Release Date | Support      | Blogpost                                         |
| -------- | --------------- | ------------ | ------------ | ------------------------------------------------ |
| `0.89.x` | 2026-11-03      | 2026-12-07   | Future       |                                                  |
| `0.88.x` | 2026-09-07      | 2026-10-12   | Future       |                                                  |
| `0.87.x` | 2026-07-06      | 2026-08-10   | Future       |                                                  |
| `0.86.x` | 2026-05-04      | 2026-06-08   | Future       |                                                  |
| `0.85.x` | 2026-03-02      | 2026-04-06   | Future       |                                                  |
| `0.84.x` | 2026-01-05      | 2026-02-09   | Future       |                                                  |
| `0.83.x` | 2025-11-03      | 2025-12-10   | Active       | [Details](/blog/2025/12/10/react-native-0.83.md) |
| `0.82.x` | 2025-09-01      | 2025-10-06   | Active       | [Details](/blog/2025/10/08/react-native-0.82.md) |
| `0.81.x` | 2025-07-10      | 2025-08-12   | End of Cycle | [Details](/blog/2025/08/12/react-native-0.81.md) |
| `0.80.x` | 2025-05-07      | 2025-06-12   | Unsupported  | [Details](/blog/2025/06/12/react-native-0.80.md) |
| `0.79.x` | 2025-03-04      | 2025-04-08   | Unsupported  | [Details](/blog/2025/04/08/react-native-0.79.md) |
| `0.78.x` | 2025-01-15      | 2025-02-19   | Unsupported  | [Details](/blog/2025/02/19/react-native-0.78.md) |
| `0.77.x` | 2024-11-26      | 2025-01-21   | Unsupported  | [Details](/blog/2025/01/21/version-0.77.md)      |

You can read more details about release schedule and the meaning of statuses on the [Releases Overview](/releases.md) page.

## Next version (Unreleased)

| main | [Documentation](/docs/next/getting-started) | [Commits since 0.83](https://github.com/facebook/react-native/compare/0.83-stable...main) |
| ---- | ------------------------------------------- | ----------------------------------------------------------------------------------------- |

note

To see what changes are coming and provide better feedback to React Native contributors, use the latest release candidate when possible. Changes introduced in a release candidate will have been shipped to production Facebook apps for over two weeks by the time the release candidate is cut.

## Latest version

The most recent stable version will be used automatically whenever a new project is created using the `npx react-native init` command.

| 0.83 | [Documentation](/docs/getting-started.md) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.83.0) |
| ---- | ----------------------------------------- | -------------------------------------------------------------------------- |

## Previous versions

| 0.82 | [Documentation](/docs/0.82/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.82.0) |
| ---- | ------------------------------------------- | -------------------------------------------------------------------------- |
| 0.81 | [Documentation](/docs/0.81/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.81.0) |
| 0.80 | [Documentation](/docs/0.80/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.80.0) |
| 0.79 | [Documentation](/docs/0.79/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.79.0) |
| 0.78 | [Documentation](/docs/0.78/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.78.0) |
| 0.77 | [Documentation](/docs/0.77/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.77.0) |

### Archived versions

The documentation for unmaintained versions can be found on website archive snapshots, hosted as separate sites.

| 0.76 | [Documentation](https://reactnative-archive-august-2025.netlify.app/docs/0.76/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.76.0) |
| ---- | ---------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| 0.75 | [Documentation](https://reactnative-archive-august-2025.netlify.app/docs/0.75/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.75.0) |
| 0.74 | [Documentation](https://reactnative-archive-august-2025.netlify.app/docs/0.74/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.74.0) |
| 0.73 | [Documentation](https://reactnative-archive-august-2025.netlify.app/docs/0.73/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.73.0) |
| 0.72 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.72/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.72.0) |
| 0.71 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.71/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.71.0) |
| 0.70 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.70/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.70.0) |
| 0.69 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.69/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.69.0) |
| 0.68 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.68/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.68.0) |
| 0.67 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.67/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.67.0) |
| 0.66 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.66/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.66.0) |
| 0.65 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.65/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.65.0) |
| 0.64 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.64/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.64.0) |
| 0.63 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.63/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.63.0) |
| 0.62 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.62/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.62.0) |
| 0.61 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.61/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.61.0) |
| 0.60 | [Documentation](https://reactnative-archive-august-2023.netlify.app/docs/0.60/getting-started) | [Changelog](https://github.com/facebook/react-native/releases/tag/v0.60.0) |

The documentation for versions below `0.60` can be found on the separate website called<!-- --> [React Native Archive](https://archive.reactnative.dev/versions).

Develop

* [Guides](/docs/getting-started.md)
* [Components](/docs/components-and-apis.md)
* [APIs](/docs/accessibilityinfo.md)
* [Architecture](/architecture/overview.md)

Participate

* [Showcase](/showcase.md)
* [Contributing](/contributing/overview.md)
* [Community](/community/overview.md)
* [Directory](https://reactnative.directory/)
* [Stack Overflow](https://stackoverflow.com/questions/tagged/react-native)

Find us

* [Blog](/blog.md)
* [X](https://x.com/reactnative)
* [Bluesky](https://bsky.app/profile/reactnative.dev)
* [GitHub](https://github.com/facebook/react-native)

Explore More

* [ReactJS](https://react.dev/)
* [Privacy Policy](https://opensource.fb.com/legal/privacy/)
* [Terms of Service](https://opensource.fb.com/legal/terms/)

[![Meta Open Source Logo](/img/oss_logo.svg)![Meta Open Source Logo](/img/oss_logo.svg)](https://opensource.fb.com/)

Copyright ¬© 2025 Meta Platforms, Inc.


---

# Bundled Hermes

This page gives an overview of **how** Hermes and React Native **are built**.

If you're looking into instructions on how to use Hermes in your app, you can find instructions on this other page: [using Hermes](/docs/hermes.md)

caution

Please note that this page serves as a technical deep dive and is targeted for users which are building extensions on top of Hermes or React Native. General users of React Native should not need to know in-depth information on how React Native and Hermes interact.

## What is 'Bundled Hermes'[‚Äã](#what-is-bundled-hermes "Direct link to What is 'Bundled Hermes'")

Starting with React Native 0.69.0, every version of React Native will be **built alongside** to a Hermes version. We call this distribution model **Bundled Hermes**.

From 0.69 on, you will always have a JS engine that has been built and tested alongside each React Native version that you can use.

## Why we moved to 'Bundled Hermes'[‚Äã](#why-we-moved-to-bundled-hermes "Direct link to Why we moved to 'Bundled Hermes'")

Historically, React Native and Hermes followed two **distinct release processes** with distinct versioning. Having distinct releases with distinct numbers created confusion in the OSS ecosystem, where it was not clear if a specific version of Hermes was compatible with a specific version of React Native (i.e. you needed to know that Hermes 0.11.0 was compatible only with React Native 0.68.0, etc.)

Both Hermes and React Native, share the JSI code ([Hermes here](https://github.com/facebook/hermes/tree/main/API/jsi/jsi) and [React Native here](https://github.com/facebook/react-native/tree/main/packages/react-native/ReactCommon/jsi/jsi)). If the two JSI copies of JSI get out of sync, a build of Hermes won't be compatible with a build of React Native. You can read more about this [ABI incompatibility problem here](https://github.com/react-native-community/discussions-and-proposals/issues/257).

To overcome this problem, we've extended the React Native release process to download and build Hermes and made sure only one copy of JSI is used when building Hermes.

Thanks to this, we can release a version of Hermes whenever we release a version of React Native, and be sure that the Hermes engine we built is **fully compatible** with the React Native version we're releasing. We're shipping this version of Hermes alongside the React Native version we're doing, hence the name *Bundled Hermes*.

## How this will impact app developers[‚Äã](#how-this-will-impact-app-developers "Direct link to How this will impact app developers")

As mentioned in the introduction, if you're an app developer, this change **should not affect** you directly.

The following paragraphs describe which changes we did under the hood and explains some of the rationales, for the sake of transparency.

### iOS Users[‚Äã](#ios-users "Direct link to iOS Users")

On iOS, we've moved the `hermes-engine` you're using.

Prior to React Native 0.69, users would download a pod (here you can find the [podspec](https://github.com/CocoaPods/Specs/blob/master/Specs/5/d/0/hermes-engine/0.11.0/hermes-engine.podspec.json)).

On React Native 0.69, users would instead use a podspec that is defined inside the `sdks/hermes-engine/hermes-engine.podspec` file in the `react-native` NPM package. That podspec relies on a pre-built tarball of Hermes that we upload to Maven and to the React Native GitHub Release, as part of the React Native release process (i.e. [see the assets of this release](https://github.com/facebook/react-native/releases/tag/v0.70.4)).

### Android Users[‚Äã](#android-users "Direct link to Android Users")

On Android, we're going to update the [`android/app/build.gradle`](https://github.com/facebook/react-native/blob/main/template/android/app/build.gradle) file in the default template the following way:

diff

```
dependencies {
    // ...

    if (enableHermes) {
+       implementation("com.facebook.react:hermes-engine:+") {
+           exclude group:'com.facebook.fbjni'
+       }
-       def hermesPath = "../../node_modules/hermes-engine/android/";
-       debugImplementation files(hermesPath + "hermes-debug.aar")
-       releaseImplementation files(hermesPath + "hermes-release.aar")
    } else {
        implementation jscFlavor
    }
}
```

Prior to React Native 0.69, users will be consuming `hermes-debug.aar` and `hermes-release.aar` from the `hermes-engine` NPM package.

On React Native 0.69, users will be consuming the Android multi-variant artifacts available inside the `android/com/facebook/react/hermes-engine/` folder in the `react-native` NPM package. Please also note that we're going to [remove the dependency](https://github.com/facebook/react-native/blob/c418bf4c8fe8bf97273e3a64211eaa38d836e0a0/package.json#L105) on `hermes-engine` entirely in one of the future version of React Native.

#### Android Users on New Architecture[‚Äã](#android-users-on-new-architecture "Direct link to Android Users on New Architecture")

Due to the nature of our native code build setup (i.e. how we use the NDK), users on the New Architecture will be **building Hermes from source**.

This aligns the build mechanism of React Native and Hermes for users on the New Architecture (they will build both framework from source). This means that such Android users might experience a performance hit at build time on their first build.

You can find instructions to optimize your build time and reduce the impact on your build on this page: [Speeding up your Build phase](/docs/next/build-speed).

#### Android Users on New Architecture building on Windows[‚Äã](#android-users-on-new-architecture-building-on-windows "Direct link to Android Users on New Architecture building on Windows")

Users building React Native App, with the New Architecture, on Windows machines need to follow those extra steps to let the build work correctly:

* Make sure the [environment is configured properly](https://reactnative.dev/docs/environment-setup), with Android SDK & node.

* Install [cmake](https://community.chocolatey.org/packages/cmake) with Chocolatey

* Install either:

  <!-- -->

  * [Build Tools for Visual Studio 2022](https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2022).
  * [Visual Studio 22 Community Edition](https://visualstudio.microsoft.com/vs/community/) - Picking only the C++ desktop development is sufficient.

* Make sure the [Visual Studio Command Prompt](https://docs.microsoft.com/en-us/visualstudio/ide/reference/command-prompt-powershell?view=vs-2022) is configured correctly. This is required as the proper C++ compiler environment variable is configured in those command prompt.

* Run the app with `npx react-native run-android` inside a Visual Studio Command Prompt.

### Can users still use another engine?[‚Äã](#can-users-still-use-another-engine "Direct link to Can users still use another engine?")

Yes, users are free to enable/disable Hermes (with the `enableHermes` variable on Android, `hermes_enabled` on iOS). The 'Bundled Hermes' change will impact only **how Hermes is built and bundled** for you.

Starting with React Native 0.70, the default for `enableHermes`/`hermes_enabled` is `true`.

## How this will impact contributor and extension developers[‚Äã](#how-this-will-impact-contributor-and-extension-developers "Direct link to How this will impact contributor and extension developers")

If you're a React Native contributor or you're building an extension on top of React Native or Hermes, please read further as we explain how Bundled Hermes works.

### How is Bundled Hermes working under the hood?[‚Äã](#how-is-bundled-hermes-working-under-the-hood "Direct link to How is Bundled Hermes working under the hood?")

This mechanism relies on **downloading a tarball** with the Hermes source code from the `facebook/hermes` repository inside the `facebook/react-native` repository. We have a similar mechanism in place for other native dependencies (Folly, Glog, etc.) and we aligned Hermes to follow the same setup.

When building React Native from `main`, we will be fetching a tarball of `main` of facebook/hermes and building it as part of the build process of React Native.

When building React Native from a release branch (say `0.69-stable`), we will instead use a **tag** on the Hermes repo to **synchronize the code** between the two repos. The specific tag name used will then be stored inside the `sdks/.hermesversion` file inside React Native in the release branch (e.g. [this is the file](https://github.com/facebook/react-native/blob/0.69-stable/sdks/.hermesversion) on the 0.69 release branch).

In a sense, you can think of this approach similarly to a **git submodule**.

If you're building on top of Hermes, you can rely on those tags to understand which version of Hermes was used when building React Native, as the version of React Native is specified in the tag name (e.g. `hermes-2022-05-20-RNv0.69.0-ee8941b8874132b8f83e4486b63ed5c19fc3f111`).

#### Android implementation details[‚Äã](#android-implementation-details "Direct link to Android implementation details")

To implement this on Android, we've added a new build inside the `/ReactAndroid/hermes-engine` of React Native that will take care of building Hermes and packaging for consumption ([See here for more context](https://github.com/facebook/react-native/pull/33396)).

You can now trigger a build of Hermes engine by invoking:

bash

```
// Build a debug version of Hermes
./gradlew :ReactAndroid:hermes-engine:assembleDebug
// Build a release version of Hermes
./gradlew :ReactAndroid:hermes-engine:assembleRelease
```

from the React Native `main` branch.

You won't need to install extra tools (such as `cmake`, `ninja` or `python3`) in your machine as we configured the build to use the NDK versions of those tools.

On the Gradle consumer side, we also shipped a small improvement on the consumer side: we moved from `releaseImplementation` & `debugImplementation` to `implementation`. This is possible because the newer `hermes-engine` Android artifact is **variant aware** and will properly match a debug build of the engine with a debug build of your app. You don't need any custom configuration here (even if you use `staging` or other build types/flavors).

However, this made this line necessary in the template:

```
exclude group:'com.facebook.fbjni'
```

This is needed as React Native is consuming `fbjni` using the non-prefab approach (i.e. unzipping the `.aar` and extracting `.so` files). Hermes-engine, and other libraries, are using prefab instead to consume fbjni. We're looking into [addressing this issue](https://github.com/facebook/react-native/pull/33397) in the future so the Hermes import will be a oneliner.

#### iOS implementation details[‚Äã](#ios-implementation-details "Direct link to iOS implementation details")

The iOS implementation relies on a series of scripts that lives in the following locations:

* [`/scripts/hermes`](https://github.com/facebook/react-native/tree/main/scripts/hermes). Those scripts contain logic to download the Hermes tarball, unzip it, and configure the iOS build. They're invoked at `pod install` time if you have the `hermes_enabled` field set to `true`.
* [`/sdks/hermes-engine`](https://github.com/facebook/react-native/tree/main/sdks/hermes-engine). Those scripts contain the build logic that is effectively building Hermes. They were copied and adapted from the `facebook/hermes` repo to properly work within React Native. Specifically, the scripts inside the `utils` folder are responsible of building Hermes for all the Mac platforms.

Hermes is built as part of the `build_hermes_macos` Job on CircleCI. The job will produce as artifact a tarball which will be downloaded by the `hermes-engine` podspec when using a published React Native release ([here is an example of the artifacts created for React Native 0.69 in `build_hermes_macos`](https://app.circleci.com/pipelines/github/facebook/react-native/13679/workflows/5172f8e4-6b02-4ccb-ab97-7cb954911fae/jobs/258701/artifacts)).

##### Prebuilt Hermes[‚Äã](#prebuilt-hermes "Direct link to Prebuilt Hermes")

If there are no prebuilt artifacts for the React Native version that is being used (i.e. you may be working with React Native from the `main` branch), then Hermes will need to be built from source. First, the Hermes compiler, `hermesc`, will be built for macOS during `pod install`, then Hermes itself will be built as part of the Xcode build pipeline using the `build-hermes-xcode.sh` script.

##### Building Hermes from source[‚Äã](#building-hermes-from-source "Direct link to Building Hermes from source")

Hermes is always built from source when using React Native from the `main` branch. If you are using a stable React Native version, you can force Hermes to be built from source by setting the `CI` envvar to `true` when using CocoaPods: `CI=true pod install`.

##### Debug symbols[‚Äã](#debug-symbols "Direct link to Debug symbols")

The prebuilt artifacts for Hermes do not contain debug symbols (dSYMs) by default. We're planning on distributing these debug symbols for each release in the future. Until then, if you need the debug symbols for Hermes, you will need to build Hermes from source. A `hermes.framework.dSYM` will be created in the build directory alongside each of the Hermes frameworks.

### I'm afraid this change is impacting me[‚Äã](#im-afraid-this-change-is-impacting-me "Direct link to I'm afraid this change is impacting me")

We'd like to stress that this is essentially an organizational change on *where* Hermes is built and *how* the code is synchronized between the two repositories. The change should be fully transparent to our users.

Historically, we used to cut a release of Hermes for a specific version of React Native (e.g. [`v0.11.0 for RN0.68.x`](https://github.com/facebook/hermes/releases/tag/v0.11.0)).

With 'Bundled Hermes', you can instead rely on a tag that will represent the version used when a specific version of React Native was cut.


---

# Fabric

Fabric is React Native's new rendering system, a conceptual evolution of the legacy render system. The core principles are to unify more render logic in C++, improve interoperability with [host platforms](/architecture/glossary.md#host-platform), and to unlock new capabilities for React Native. Development began in 2018 and in 2021, React Native in the Facebook app is backed by the new renderer.

This documentation provides an overview of the [new renderer](/architecture/glossary.md#fabric-render) and its concepts. It avoids platform specifics and doesn‚Äôt contain any code snippets or pointers. This documentation covers key concepts, motivation, benefits, and an overview of the render pipeline in different scenarios.

## Motivations and Benefits of the new renderer[‚Äã](#motivations-and-benefits-of-the-new-renderer "Direct link to Motivations and Benefits of the new renderer")

The render architecture was created to unlock better user experiences that weren‚Äôt possible with the legacy architecture. Some examples include:

* With improved interoperability between [host views](/architecture/glossary.md#host-view-tree-and-host-view) and React views, the renderer is able to measure and render React surfaces synchronously. In the legacy architecture, React Native layout was asynchronous which led to a layout ‚Äújump‚Äù issue when embedding a React Native rendered view in a *host view*.
* With support of multi-priority and synchronous events, the renderer can prioritize certain user interactions to ensure they are handled in a timely manner.
* [Integration with React Suspense](https://reactjs.org/blog/2019/11/06/building-great-user-experiences-with-concurrent-mode-and-suspense.html) which allows for more intuitive design of data fetching in React apps.
* Enable React [Concurrent Features](https://github.com/reactwg/react-18/discussions/4) on React Native.
* Easier to implement server side rendering for React Native.

The new architecture also provides benefits in code quality, performance, and extensibility:

* **Type safety:** code generation to ensure type safety across the JS and [host platforms](/architecture/glossary.md#host-platform). The code generation uses JavaScript component declarations as source of truth to generate C++ structs to hold the props. Mismatch between JavaScript and host component props triggers a build error.
* **Shared C++ core**: the renderer is implemented in C++ and the core is shared among platforms. This increases consistency and makes it easier to adopt React Native on new platforms.
* **Better Host Platform Interoperability**: Synchronous and thread-safe layout calculation improves user experiences when embedding host components into React Native, which means easier integration with host platform frameworks that require synchronous APIs.
* **Improved Performance**: With the new cross-platform implementation of the renderer system, every platform benefits from performance improvements that may have been motivated by limitations of one platform. For example, view flattening was originally a performance solution for Android and is now provided by default on both Android and iOS.
* **Consistency**: The new render system is cross-platform, it is easier to keep consistency among different platforms.
* **Faster Startup**: Host components are lazily initialized by default.
* **Less serialization of data between JS and host platform**: React used to transfer data between JavaScript and *host platform* as serialized JSON. The new renderer improves the transfer of data by accessing JavaScript values directly using [JavaScript Interfaces (JSI)](/architecture/glossary.md#javascript-interfaces-jsi).


---

# Glossary

## Dev Menu[‚Äã](#dev-menu "Direct link to Dev Menu")

The in-app developer menu (available in development builds) that offers access to various development and debugging actions. [Learn more about the Dev Menu in the docs](/docs/debugging.md).

## Fabric Renderer[‚Äã](#fabric-renderer "Direct link to Fabric Renderer")

React Native executes the same React framework code as React for the web. However, React Native renders to general platform views (host views) instead of DOM nodes (which can be considered web‚Äôs host views). Rendering to host views is made possible by the Fabric Renderer. Fabric lets React talk to each platform and manage its host view instances. The Fabric Renderer exists in JavaScript and targets interfaces made available by C++ code. [Read more about React renderers in this blog post.](https://overreacted.io/react-as-a-ui-runtime/#renderers)

## Host platform[‚Äã](#host-platform "Direct link to Host platform")

The platform embedding React Native (e.g., Android, iOS, macOS, Windows).

## Host View Tree (and Host View)[‚Äã](#host-view-tree-and-host-view "Direct link to Host View Tree (and Host View)")

Tree representation of views in the host platform (e.g. Android, iOS). On Android, the host views are instances of `android.view.ViewGroup`, `android.widget.TextView`, etc. which are the building blocks of the host view tree. The size and location of each host view are based on `LayoutMetrics` calculated with Yoga, and the style and content of each host view are based on information from the React Shadow Tree.

## JavaScript Interfaces (JSI)[‚Äã](#javascript-interfaces-jsi "Direct link to JavaScript Interfaces (JSI)")

A lightweight API to embed a JavaScript engine in a C++ application. Fabric uses it to communicate between Fabric‚Äôs C++ core and React.

## Java Native Interface (JNI)[‚Äã](#java-native-interface-jni "Direct link to Java Native Interface (JNI)")

An [API to write Java native methods](https://docs.oracle.com/javase/8/docs/technotes/guides/jni/) used to communicate between Fabric‚Äôs C++ core and Android, written in Java.

## React Component[‚Äã](#react-component "Direct link to React Component")

A JavaScript function or class that instructs how to create a React Element. [Read more about React components, elements in this blog post.](https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html)

## React Composite Components[‚Äã](#react-composite-components "Direct link to React Composite Components")

React Components with `render` implementations that reduce to other React Composite Components or React Host Components.

## React Host Components or Host Components[‚Äã](#react-host-components-or-host-components "Direct link to React Host Components or Host Components")

React Components whose view implementation is provided by a host view (e.g., `<View>, <Text>` ). On the Web, ReactDOM's Host components would be components like `<p>` and `<div>`.

## React Element Tree (and React Element)[‚Äã](#react-element-tree-and-react-element "Direct link to React Element Tree (and React Element)")

A *React Element Tree* is created by React in JavaScript and consists of React Elements. A *React Element* is a plain JavaScript object that describes what should appear on the screen. It includes props, styles, and children. React Elements only exist in JavaScript and can represent instantiations of either React Composite Components or React Host Components. [Read more about React components and elements in this blog post.](https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html)

## React Native Framework[‚Äã](#react-native-framework "Direct link to React Native Framework")

React Native allows developers to use the [React programming paradigm](https://react.dev/learn/thinking-in-react) to ship applications to native targets. The React Native team is focused on creating **core APIs** and **functionalities** that fit the most general use case when developing native apps.

Shipping native apps to production usually requires a set of tools and libraries that are not provided by default as part of React Native, but are still crucial to ship an app to production. Examples of such tools are: support for publishing applications to a dedicated store or support for routing and navigation mechanisms.

When those tools and libraries are collected to form a cohesive framework built on top of React Native, we define it as a **React Native Framework**.

An example of Open Source React Native Framework is [Expo](https://expo.dev/).

## React Shadow Tree (and React Shadow Node)[‚Äã](#react-shadow-tree-and-react-shadow-node "Direct link to React Shadow Tree (and React Shadow Node)")

A *React Shadow Tree* is created by the Fabric Renderer and consists of React Shadow Nodes. A React Shadow Node is an object that represents a React Host Component to be mounted, and contains props that originate from JavaScript. They also contain layout information (x, y, width, height). In Fabric, React Shadow Node objects exist in C++. Before Fabric, these existed in the mobile runtime heap (e.g. Android JVM).

## Yoga Tree (and Yoga Node)[‚Äã](#yoga-tree-and-yoga-node "Direct link to Yoga Tree (and Yoga Node)")

The *Yoga Tree* is used by [Yoga](https://www.yogalayout.dev/) to calculate layout information for a React Shadow Tree. Each React Shadow Node typically creates a *Yoga Node* because React Native employs Yoga to calculate layout. However, this is not a hard requirement. Fabric can also create React Shadow Nodes that do not use Yoga; the implementation of each React Shadow Node determines how to calculate layout.


---

# About the New Architecture

Since 2018, the React Native team has been redesigning the core internals of React Native to enable developers to create higher-quality experiences. As of 2024, this version of React Native has been proven at scale and powers production apps by Meta.

The term *New Architecture* refers to both the new framework architecture and the work to bring it to open source.

The New Architecture has been available for experimental opt-in as of [React Native 0.68](/blog/2022/03/30/version-068#opting-in-to-the-new-architecture) with continued improvements in every subsequent release. The team is now working to make this the default experience for the React Native open source ecosystem.

## Why a New Architecture?[‚Äã](#why-a-new-architecture "Direct link to Why a New Architecture?")

After many years of building with React Native, the team identified a set of limitations that prevented developers from crafting certain experiences with a high polish. These limitations were fundamental to the existing design of the framework, so the New Architecture started as an investment in the future of React Native.

The New Architecture unlocks capabilities and improvements that were impossible in the legacy architecture.

### Synchronous Layout and Effects[‚Äã](#synchronous-layout-and-effects "Direct link to Synchronous Layout and Effects")

Building adaptive UI experiences often requires measuring the size and position of your views and adjusting layout.

Today, you would use the [`onLayout`](/docs/view.md#onlayout) event to get the layout information of a view and make any adjustments. However, state updates within the `onLayout` callback may apply after painting the previous render. This means that users may see intermediate states or visual jumps between rendering the initial layout and responding to layout measurements.

With the New Architecture, we can avoid this issue entirely with synchronous access to layout information and properly scheduled updates such that no intermediate state is visible to users.

Example: Rendering a Tooltip

Measuring and placing a tooltip above a view allows us to showcase what synchronous rendering unlocks. The tooltip needs to know the position of its target view to determine where it should render.

In the current architecture, we use `onLayout` to get the measurements of the view and then update the positioning of the tooltip based on where the view is.

jsx

```
function ViewWithTooltip() {
  // ...

  // We get the layout information and pass to ToolTip to position itself
  const onLayout = React.useCallback(event => {
    targetRef.current?.measureInWindow((x, y, width, height) => {
      // This state update is not guaranteed to run in the same commit
      // This results in a visual "jump" as the ToolTip repositions itself
      setTargetRect({x, y, width, height});
    });
  }, []);

  return (
    <>
      <View ref={targetRef} onLayout={onLayout}>
        <Text>Some content that renders a tooltip above</Text>
      </View>
      <Tooltip targetRect={targetRect} />
    </>
  );
}
```

With the New Architecture, we can use [`useLayoutEffect`](https://react.dev/reference/react/useLayoutEffect) to synchronously measure and apply layout updates in a single commit, avoiding the visual "jump".

jsx

```
function ViewWithTooltip() {
  // ...

  useLayoutEffect(() => {
    // The measurement and state update for `targetRect` happens in a single commit
    // allowing ToolTip to position itself without intermediate paints
    targetRef.current?.measureInWindow((x, y, width, height) => {
      setTargetRect({x, y, width, height});
    });
  }, [setTargetRect]);

  return (
    <>
      <View ref={targetRef}>
        <Text>Some content that renders a tooltip above</Text>
      </View>
      <Tooltip targetRect={targetRect} />
    </>
  );
}
```

![A view that is moving to the corners of the viewport and center with a tooltip rendered either above or below it. The tooltip is rendered after a short delay after the view moves](/img/new-architecture/async-on-layout.gif)

Asynchronous measurement and render of the ToolTip. [See code](https://gist.github.com/lunaleaps/eabd653d9864082ac1d3772dac217ab9).

![A view that is moving to the corners of the viewport and center with a tooltip rendered either above or below it. The view and tooltip move in unison.](/img/new-architecture/sync-use-layout-effect.gif)

Synchronous measurement and render of the ToolTip. [See code](https://gist.github.com/lunaleaps/148756563999c83220887757f2e549a3).

### Support for Concurrent Renderer and Features[‚Äã](#support-for-concurrent-renderer-and-features "Direct link to Support for Concurrent Renderer and Features")

The New Architecture supports concurrent rendering and features that have shipped in [React 18](https://react.dev/blog/2022/03/29/react-v18) and beyond. You can now use features like Suspense for data-fetching, Transitions, and other new React APIs in your React Native code, further conforming codebases and concepts between web and native React development.

The concurrent renderer also brings out-of-the-box improvements like automatic batching, which reduces re-renders in React.

Example: Automatic Batching

With the New Architecture, you'll get automatic batching with the React 18 renderer.

In this example, a slider specifies how many tiles to render. Dragging the slider from 0 to 1000 will fire off a quick succession of state updates and re-renders.

In comparing the renderers for the [same code](https://gist.github.com/lunaleaps/79bb6f263404b12ba57db78e5f6f28b2), you can visually notice the renderer provides a smoother UI, with less intermediate UI updates. State updates from native event handlers, like this native Slider component, are now batched.

![A video demonstrating an app rendering many views according to a slider input. The slider value is adjusted from 0 to 1000 and the UI slowly catches up to rendering 1000 views.](/img/new-architecture/legacy-renderer.gif)

Rendering frequent state updates with legacy renderer.

![A video demonstrating an app rendering many views according to a slider input. The slider value is adjusted from 0 to 1000 and the UI resolves to 1000 views faster than the previous example, without as many intermediate states.](/img/new-architecture/react18-renderer.gif)

Rendering frequent state updates with React 18 renderer.

New concurrent features, like [Transitions](https://react.dev/reference/react/useTransition), give you the power to express the priority of UI updates. Marking an update as lower priority tells React it can "interrupt" rendering the update to handle higher priority updates to ensure a responsive user experience where it matters.

Example: Using `startTransition`

We can build on the previous example to showcase how transitions can interrupt in-progress rendering to handle a newer state update.

We wrap the tile number state update with `startTransition` to indicate that rendering the tiles can be interrupted. `startTransition` also provides a `isPending` flag to tell us when the transition is complete.

jsx

```
function TileSlider({value, onValueChange}) {
  const [isPending, startTransition] = useTransition();

  return (
    <>
      <View>
        <Text>
          Render {value} Tiles
        </Text>
        <ActivityIndicator animating={isPending} />
      </View>
      <Slider
        value={1}
        minimumValue={1}
        maximumValue={1000}
        step={1}
        onValueChange={newValue => {
          startTransition(() => {
            onValueChange(newValue);
          });
        }}
      />
    </>
  );
}

function ManyTiles() {
  const [value, setValue] = useState(1);
  const tiles = generateTileViews(value);
  return (
      <TileSlider onValueChange={setValue} value={value} />
      <View>
        {tiles}
      </View>
  )
}
```

You'll notice that with the frequent updates in a transition, React renders fewer intermediate states because it bails out of rendering the state as soon as it becomes stale. In comparison, without transitions, more intermediate states are rendered. Both examples still use automatic batching. Still, transitions give even more power to developers to batch in-progress renders.

![A video demonstrating an app rendering many views (tiles) according to a slider input. The views are rendered in batches as the slider is quickly adjusted from 0 to 1000. There are less batch renders in comparison to the next video.](/img/new-architecture/with-transitions.gif)

Rendering tiles with transitions to interrupt in-progress renders of stale state. [See code](https://gist.github.com/lunaleaps/eac391bf3fe4c85953cefeb74031bab0/revisions).

![A video demonstrating an app rendering many views (tiles) according to a slider input. The views are rendered in batches as the slider is quickly adjusted from 0 to 1000.](/img/new-architecture/without-transitions.gif)

Rendering tiles without marking it as a transition. [See code](https://gist.github.com/lunaleaps/eac391bf3fe4c85953cefeb74031bab0/revisions).

### Fast JavaScript/Native Interfacing[‚Äã](#fast-javascriptnative-interfacing "Direct link to Fast JavaScript/Native Interfacing")

The New Architecture removes the [asynchronous bridge](https://reactnative.dev/blog/2018/06/14/state-of-react-native-2018#architecture) between JavaScript and native and replaces it with JavaScript Interface (JSI). JSI is an interface that allows JavaScript to hold a reference to a C++ object and vice-versa. With a memory reference, you can directly invoke methods without serialization costs.

JSI enables [VisionCamera](https://github.com/mrousavy/react-native-vision-camera), a popular camera library for React Native, to process frames in real time. Typical frame buffers are \~30 MB, which amounts to roughly 2 GB of data per second, depending on the frame rate. In comparison with the serialization costs of the bridge, JSI handles that amount of interfacing data with ease. JSI can expose other complex instance-based types such as databases, images, audio samples, etc.

JSI adoption in the New Architecture removes this class of serialization work from all native-JavaScript interop. This includes initializing and re-rendering native core components like `View` and `Text`. You can read more about our [investigation in rendering performance](https://github.com/reactwg/react-native-new-architecture/discussions/123) in the New Architecture and the improved benchmarks we measured.

## What can I expect from enabling the New Architecture?[‚Äã](#what-can-i-expect-from-enabling-the-new-architecture "Direct link to What can I expect from enabling the New Architecture?")

While the New Architecture enables these features and improvements, enabling the New Architecture for your app or library may not immediately improve the performance or user experience.

For example, your code may need refactoring to leverage new capabilities like synchronous layout effects or concurrent features. Although JSI will minimize the overhead between JavaScript and native memory, data serialization may not have been a bottleneck for your app's performance.

Enabling the New Architecture in your app or library is opting into the future of React Native.

The team is actively researching and developing new capabilities the New Architecture unlocks. For example, web alignment is an active area of exploration at Meta that will ship to the React Native open source ecosystem.

* [Updates to the event loop model](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0744-well-defined-event-loop.md)
* [Node and layout APIs](https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0607-dom-traversal-and-layout-apis.md)
* [Styling and layout conformance](https://github.com/facebook/yoga/releases/tag/v2.0.0)

You can follow along and contribute in our dedicated [discussions & proposals](https://github.com/react-native-community/discussions-and-proposals/discussions/651) repository.

## Should I use the New Architecture today?[‚Äã](#should-i-use-the-new-architecture-today "Direct link to Should I use the New Architecture today?")

With 0.76, The New Architecture is enabled by default in all the React Native projects.

If you find anything that is not working well, please open an issue using [this template](https://github.com/facebook/react-native/issues/new?assignees=\&labels=Needs%3A+Triage+%3Amag%3A%2CType%3A+New+Architecture\&projects=\&template=new_architecture_bug_report.yml).

If, for any reasons, you can't use the New Architecture, you can still opt-out from it:

### Android[‚Äã](#android "Direct link to Android")

1. Open the `android/gradle.properties` file
2. Toggle the `newArchEnabled` flag from `true` to `false`

gradle.properties

```
# Use this property to enable support to the new architecture.
# This will allow you to use TurboModules and the Fabric render in
# your application. You should enable this flag either if you want
# to write custom TurboModules/Fabric components OR use libraries that
# are providing them.
-newArchEnabled=true
+newArchEnabled=false
```

### iOS[‚Äã](#ios "Direct link to iOS")

1. Open the `ios/Podfile` file
2. Add `ENV['RCT_NEW_ARCH_ENABLED'] = '0'` in the main scope of the Podfile ([reference Podfile](https://github.com/react-native-community/template/blob/0.76-stable/template/ios/Podfile) in the template)

diff

```
+ ENV['RCT_NEW_ARCH_ENABLED'] = '0'
# Resolve react_native_pods.rb with node to allow for hoisting
require Pod::Executable.execute_command('node', ['-p',
  'require.resolve(
```

3. Install your CocoaPods dependencies with the command:

shell

```
bundle exec pod install
```


---

# Architecture Overview

info

Welcome to the Architecture Overview! If you're getting started with React Native, please refer to [Guides](/docs/getting-started.md) section. Continue reading to learn how internals of React Native work!

This section is a work in progress and more material will be added in the future. Please make sure to come back later to check for new information.

Architecture Overview is intended to share conceptual overview of how React Native's internals work. The intended audience includes library authors and core contributors. If you are an app developer, it is not a requirement to be familiar with this material to be effective with React Native. You can still benefit from the overview as it will give you insights into how React Native works under the hood. Feel free to share your feedback on the [discussion inside the working group](https://github.com/reactwg/react-native-new-architecture/discussions/9) for this section.

## Table of Contents[‚Äã](#table-of-contents "Direct link to Table of Contents")

* [About the New Architecture](/architecture/landing-page.md)

* Rendering

  <!-- -->

  * [Fabric](/architecture/fabric-renderer.md)
  * [Render, Commit, and Mount](/architecture/render-pipeline.md)
  * [Cross Platform Implementation](/architecture/xplat-implementation.md)
  * [View Flattening](/architecture/view-flattening.md)
  * [Threading Model](/architecture/threading-model.md)

* Build Tools
  <!-- -->
  * [Bundled Hermes](/architecture/bundled-hermes.md)

* [Glossary](/architecture/glossary.md)


---

# Render, Commit, and Mount

caution

This document refers to the [New Architecture](/architecture/fabric-renderer.md), that is in active roll-out.

The React Native renderer goes through a sequence of work to render React logic to a [host platform](/architecture/glossary.md#host-platform). This sequence of work is called the render pipeline and occurs for initial renders and updates to the UI state. This document goes over the render pipeline and how it differs in those scenarios.

The render pipeline can be broken into three general phases:

1. **Render:** React executes product logic which creates a [React Element Trees](/architecture/glossary.md#react-element-tree-and-react-element) in JavaScript. From this tree, the renderer creates a [React Shadow Tree](/architecture/glossary.md#react-shadow-tree-and-react-shadow-node) in C++.
2. **Commit**: After a React Shadow Tree is fully created, the renderer triggers a commit. This **promotes** both the React Element Tree and the newly created React Shadow Tree as the ‚Äúnext tree‚Äù to be mounted. This also schedules calculation of its layout information.
3. **Mount:** The React Shadow Tree, now with the results of layout calculation, is transformed into a [Host View Tree](/architecture/glossary.md#host-view-tree-and-host-view).

> The phases of the render pipeline may occur on different threads. Refer to the [Threading Model](/architecture/threading-model.md) doc for more detail.

![React Native renderer Data flow](/assets/images/data-flow-8b512b145ae31931b804c0725c93fd73.jpg)

***

## Initial Render[‚Äã](#initial-render "Direct link to Initial Render")

Imagine you want to render the following:

jsx

```
function MyComponent() {
  return (
    <View>
      <Text>Hello, World</Text>
    </View>
  );
}

// <MyComponent />
```

In the example above, `<MyComponent />` is a [React Element](/architecture/glossary.md#react-element-tree-and-react-element). React recursively reduces this *React Element* to a terminal [React Host Component](/architecture/glossary.md#react-host-components-or-host-components) by invoking it (or its `render` method if implemented with a JavaScript class) until every *React Element* cannot be reduced any further. Now you have a *React Element Tree* of [React Host Components](/architecture/glossary.md#react-host-components-or-host-components).

### Phase 1. Render[‚Äã](#phase-1-render "Direct link to Phase 1. Render")

![Phase one: render](/assets/images/phase-one-render-c1dd58e98630d0fb6495a77f9e2efc78.png)

During this process of element reduction, as each *React Element* is invoked, the renderer also synchronously creates a [React Shadow Node](/architecture/glossary.md#react-shadow-tree-and-react-shadow-node). This happens only for *React Host Components*, not for [React Composite Components](/architecture/glossary.md#react-composite-components). In the example above, the `<View>` leads to the creation of a `ViewShadowNode` object, and the `<Text>` leads to the creation of a `TextShadowNode` object. Notably, there is never a *React Shadow Node* that directly represents `<MyComponent>`.

Whenever React creates a parent-child relationship between two *React Element Nodes*, the renderer creates the same relationship between the corresponding *React Shadow Nodes*. This is how the *React Shadow Tree* is assembled.

**Additional Details**

* The operations (creation of *React Shadow Node*, creation of parent-child relationship between two *React Shadow Nodes*) are synchronous and thread-safe operations that are executed from React (JavaScript) into the renderer (C++), usually on the JavaScript thread.
* The *React Element Tree* (and its constituent *React Element Nodes*) do not exist indefinitely. It is a temporal representation materialized by ‚Äúfibers‚Äù in React. Each ‚Äúfiber‚Äù that represents a host component stores a C++ pointer to the *React Shadow Node*, made possible by JSI. [Learn more about ‚Äúfibers‚Äù in this document.](https://github.com/acdlite/react-fiber-architecture#what-is-a-fiber)
* The *React Shadow Tree* is immutable. In order to update any *React Shadow Node*, the renderer creates a new *React Shadow Tree*. However, the renderer provides cloning operations to make state updates more performant (see [React State Updates](/architecture/render-pipeline.md#react-state-updates) for more details).

In the example above, the result of the render phase looks like this:

![Step one](/assets/images/render-pipeline-1-bab6696c3cb8dcb7710c60bd763cddd7.png)

After the *React Shadow Tree* is complete, the renderer triggers a commit of the *React Element Tree*.

### Phase 2. Commit[‚Äã](#phase-2-commit "Direct link to Phase 2. Commit")

![Phase two: commit](/assets/images/phase-two-commit-baae5d6a7fe7fbd08259c2dadb35a6c0.png)

The commit phase consists of two operations: *Layout Calculation* and *Tree Promotion*.

* **Layout Calculation:** This operation calculates the position and size of each *React Shadow Node*. In React Native, this involves invoking Yoga to calculate the layout of each *React Shadow Node*. The actual calculation requires each *React Shadow Node*‚Äôs styles which originate from a *React Element* in JavaScript. It also requires the layout constraints of the root of the *React Shadow Tree*, which determines the amount of available space that the resulting nodes can occupy.

![Step two](/assets/images/render-pipeline-2-ff26e809ebdfcc9a5a93258e88f4470f.png)

* **Tree Promotion (New Tree ‚Üí Next Tree):** This operation promotes the new *React Shadow Tree* as the ‚Äúnext tree‚Äù to be mounted. This promotion indicates that the new *React Shadow Tree* has all the information to be mounted and represents the latest state of the *React Element Tree*. The ‚Äúnext tree‚Äù mounts on the next ‚Äútick‚Äù of the UI Thread.

**Additional Details**

* These operations are asynchronously executed on a background thread.
* Majority of layout calculation executes entirely within C++. However, the layout calculation of some components depend on the *host platform* (e.g. `Text`, `TextInput`, etc.). Size and position of text is specific to each *host platform* and needs to be calculated on the *host platform* layer. For this purpose, Yoga invokes a function defined in the *host platform* to calculate the component‚Äôs layout.

### Phase 3. Mount[‚Äã](#phase-3-mount "Direct link to Phase 3. Mount")

![Phase three: mount](/assets/images/phase-three-mount-f3d37731c0c8a5890e7ec985ca43ba16.png)

The mount phase transforms the *React Shadow Tree* (which now contains data from layout calculation) into a *Host* *View Tree* with rendered pixels on the screen. As a reminder, the *React Element Tree* looks like this:

jsx

```
<View>
  <Text>Hello, World</Text>
</View>
```

At a high level, React Native renderer creates a corresponding [Host View](/architecture/glossary.md#host-view-tree-and-host-view) for each *React Shadow Node* and mounts it on screen. In the example above, the renderer creates an instance of `android.view.ViewGroup` for the `<View>` and `android.widget.TextView` for `<Text>` and populates it with ‚ÄúHello World‚Äù. Similarly for iOS a `UIView` is created and text is populated with a call to `NSLayoutManager`. Each host view is then configured to use props from its React Shadow Node, and its size and position is configured using the calculated layout information.

![Step two](/assets/images/render-pipeline-3-db2c1aa465ae7d76346b879966938b3d.png)

In more detail, the mounting phase consists of these three steps:

* **Tree Diffing:** This step computes the diff between the ‚Äúpreviously rendered tree‚Äù and the ‚Äúnext tree‚Äù entirely in C++. The result is a list of atomic mutation operations to be performed on host views (e.g. `createView`, `updateView`, `removeView`, `deleteView`, etc). This step is also where the React Shadow Tree is flattened to avoid creating unnecessary host views. See [View Flattening](/architecture/view-flattening.md) for details about this algorithm.
* **Tree Promotion (Next Tree ‚Üí Rendered Tree)**: This step atomically promotes the ‚Äúnext tree‚Äù to ‚Äúpreviously rendered tree‚Äù so that the next mount phase computes a diff against the proper tree.
* **View Mounting**: This step applies the atomic mutation operations onto corresponding host views. This step executes in the *host platform* on UI thread.

**Additional Details**

* The operations are synchronously executed on UI thread. If the commit phase executes on background thread, the mounting phase is scheduled for the next ‚Äútick‚Äù of UI thread. On the other hand, if the commit phase executes on UI thread, mounting phase executes synchronously on the same thread.
* Scheduling, implementation, and execution of the mounting phase heavily depends on the *host platform*. For example, the renderer architecture of the mounting layer currently differs between Android and iOS.
* During the initial render, the ‚Äúpreviously rendered tree‚Äù is empty. As such, the tree diffing step will result in a list of mutation operations that consists only of creating views, setting props, and adding views to each other. Tree diffing becomes more important for performance when processing [React State Updates](#react-state-updates).
* In current production tests, a *React Shadow Tree* typically consists of about 600-1000 *React Shadow Nodes* (before view flattening), the trees get reduced to \~200 nodes after view flattening. On iPad or desktop apps, this quantity may increase 10-fold.

***

## React State Updates[‚Äã](#react-state-updates "Direct link to React State Updates")

Let‚Äôs explore each phase of the render pipeline when the state of a *React Element Tree* is updated. Let‚Äôs say, you‚Äôve rendered the following component in an initial render:

jsx

```
function MyComponent() {
  return (
    <View>
      <View
        style={{backgroundColor: 'red', height: 20, width: 20}}
      />
      <View
        style={{backgroundColor: 'blue', height: 20, width: 20}}
      />
    </View>
  );
}
```

Applying what was described in the [Initial Render](#initial-render) section, you would expect the following trees to be created:

![Render pipeline 4](/assets/images/render-pipeline-4-41f74af95d01306894e985dcf01ef8dc.png)

Notice that **Node 3** maps to a host view with a **red background**, and **Node 4** maps to a host view with a **blue background**. Assume that as the result of a state update in JavaScript product logic, the background of the first nested `<View>` changes from `'red'` to `'yellow'`. This is what the new *React Element Tree* might look:

jsx

```
<View>
  <View
    style={{backgroundColor: 'yellow', height: 20, width: 20}}
  />
  <View
    style={{backgroundColor: 'blue', height: 20, width: 20}}
  />
</View>
```

**How is this update processed by React Native?**

When a state update occurs, the renderer needs to conceptually update the *React Element Tree* in order to update the host views that are already mounted. But in order to preserve thread safety, both the *React Element Tree* as well as the *React Shadow Tree* must be immutable. This means that instead of mutating the current *React Element Tree* and *React Shadow Tree*, React must create a new copy of each tree which incorporates the new props, styles, and children.

Let‚Äôs explore each phase of the render pipeline during a state update.

### Phase 1. Render[‚Äã](#phase-1-render-1 "Direct link to Phase 1. Render")

![Phase one: render](/assets/images/phase-one-render-c1dd58e98630d0fb6495a77f9e2efc78.png)

When React creates a new *React Element Tree* that incorporates the new state, it must clone every *React Element* and *React Shadow Node* that is impacted by the change. After cloning, the new *React Shadow Tree* is committed.

React Native renderer leverages structural sharing to minimize the overhead of immutability. When a *React Element* is cloned to include the new state, every *React Element* that is on the path up to the root is cloned. **React will only clone a React Element if it requires an update to its props, style, or children.** Any *React Elements* that are unchanged by the state update are shared by the old and new trees.

In the above example, React creates the new tree using these operations:

1. CloneNode(**Node 3**, `{backgroundColor: 'yellow'}`) ‚Üí **Node 3'**
2. CloneNode(**Node 2**) ‚Üí **Node 2'**
3. AppendChild(**Node 2'**, **Node 3'**)
4. AppendChild(**Node 2'**, **Node 4**)
5. CloneNode(**Node 1**) ‚Üí **Node 1'**
6. AppendChild(**Node 1'**, **Node 2'**)

After these operations, **Node 1'** represents the root of the new *React Element Tree*. Let's assign **T** to the ‚Äúpreviously rendered tree‚Äù and **T'** to the ‚Äúnew tree‚Äù:

![Render pipeline 5](/assets/images/render-pipeline-5-ca2287677b59a63ec7e0622db040ccb8.png)

Notice how **T** and **T'** both share **Node 4**. Structural sharing improves performance and reduces memory usage.

### Phase 2. Commit[‚Äã](#phase-2-commit-1 "Direct link to Phase 2. Commit")

![Phase two: commit](/assets/images/phase-two-commit-baae5d6a7fe7fbd08259c2dadb35a6c0.png)

After React creates the new *React Element Tree* and *React Shadow Tree*, it must commit them.

* **Layout Calculation:** Similar to Layout Calculation during [Initial Render](#initial-render). One important difference is that layout calculation may cause shared *React Shadow Nodes* to be cloned. This can happen because if the parent of a shared *React Shadow Node* incurs a layout change, the layout of the shared *React Shadow Node* may also change.
* **Tree Promotion (New Tree ‚Üí Next Tree):** Similar to Tree Promotion during [Initial Render](#initial-render).

### Phase 3. Mount[‚Äã](#phase-3-mount-1 "Direct link to Phase 3. Mount")

![Phase three: mount](/assets/images/phase-three-mount-f3d37731c0c8a5890e7ec985ca43ba16.png)

* **Tree Promotion (Next Tree ‚Üí Rendered Tree)**: This step atomically promotes the ‚Äúnext tree‚Äù to ‚Äúpreviously rendered tree‚Äù so that the next mount phase computes a diff against the proper tree.

* **Tree Diffing:** This step computes the diff between the ‚Äúpreviously rendered tree‚Äù (**T**) and the ‚Äúnext tree‚Äù (**T'**). The result is a list of atomic mutation operations to be performed on *host views*.

  <!-- -->

  * In the above example, the operations consist of: `UpdateView(**Node 3**, {backgroundColor: 'yellow'})`
  * The diff can be calculated for any currently mounted tree with any new tree. The renderer can skip some intermediate versions of the tree.

* **View Mounting**: This step applies the atomic mutation operations onto corresponding *host views*. In the above example, only the `backgroundColor` of **View 3** will be updated (to yellow).

![Render pipeline 6](/assets/images/render-pipeline-6-aa0ebdd46e5031ad4bb5454b147c53a2.png)

***

## React Native Renderer State Updates[‚Äã](#react-native-renderer-state-updates "Direct link to React Native Renderer State Updates")

For most information in the *Shadow Tree*, React is the single owner and single source of truth. All data originates from React and there is a single-direction flow of data.

However, there is one exception and important mechanism: components in C++ can contain state that is not directly exposed to JavaScript, and JavaScript is not the source of truth. C++ and *Host Platform* control this *C++ State*. Generally, this is only relevant if you are developing a complicated *Host Component* that needs *C++ State*. The vast majority of *Host Components* do not need this functionality.

For example, `ScrollView` uses this mechanism to let the renderer know what the current offset is. The update is triggered from the *host platform*, specifically from the host view that represents the `ScrollView` component. The information about offset is used in an API like [measure](https://reactnative.dev/docs/direct-manipulation#measurecallback). Since this update stems from the host platform, and does not affect the React Element Tree, this state data is held by *C++ State*.

Conceptually, *C++ State* updates are similar to the [React State Updates](/architecture/render-pipeline.md#react-state-updates) described above. With two important differences:

1. They skip the ‚Äúrender phase‚Äù since React is not involved.
2. The updates can originate and happen on any thread, including the main thread.

### Phase 2. Commit[‚Äã](#phase-2-commit-2 "Direct link to Phase 2. Commit")

![Phase two: commit](/assets/images/phase-two-commit-baae5d6a7fe7fbd08259c2dadb35a6c0.png)

When performing a *C++ State* update, a block of code requests an update of a `ShadowNode` (**N**) to set *C++ State* to value **S**. React Native renderer will repeatedly attempt to get the latest committed version of **N**, clone it with a new state **S**, and commit **N‚Äô** to the tree. If React, or another *C++ State* update, has performed another commit during this time, the *C++ State* commit will fail and the renderer will retry the *C++ State* update many times until a commit succeeds. This prevents source-of-truth collisions and races.

### Phase 3. Mount[‚Äã](#phase-3-mount-2 "Direct link to Phase 3. Mount")

![Phase three: mount](/assets/images/phase-three-mount-f3d37731c0c8a5890e7ec985ca43ba16.png)

The *Mount Phase* is practically identical to the [Mount Phase of React State Updates](#react-state-updates). The renderer still needs to recompute layout, perform a tree diff, etc. See the sections above for details.


---

# Threading Model

caution

This document refers to the [New Architecture](/architecture/fabric-renderer.md), that is in active roll-out.

#### The React Native renderer distributes the work of the [render pipeline](/architecture/render-pipeline.md) across multiple threads.[‚Äã](#the-react-native-renderer-distributes-the-work-of-the-render-pipeline-across-multiple-threads "Direct link to the-react-native-renderer-distributes-the-work-of-the-render-pipeline-across-multiple-threads")

Here we define the threading model and provide some examples to illustrate thread usage of the render pipeline.

React Native renderer is designed to be thread safe. At a high level thread safety is guaranteed by using immutable data structures in the internals of the framework (enforced by C++ ‚Äúconst correctness‚Äù feature). This means that every update in React creates or clones new objects in the renderer instead of updating data structures. This allows the framework to expose thread safe and synchronous APIs to React.

The renderer uses two different threads:

* **UI thread** (often called main): The only thread that can manipulate host views.
* **JavaScript thread**: This is where React‚Äôs render phase, as well as layout, are executed.

Let‚Äôs review the supported scenarios of execution for each phase:

![Threading model symbols](/docs/assets/Architecture/threading-model/symbols.png)

## Render Scenarios[‚Äã](#render-scenarios "Direct link to Render Scenarios")

### Render in a JS Thread[‚Äã](#render-in-a-js-thread "Direct link to Render in a JS Thread")

This is the most common scenario where most of the render pipeline happens on JavaScript thread.

![Threading model use case one](/docs/assets/Architecture/threading-model/case-1.jpg)

***

### Render in the UI Thread[‚Äã](#render-in-the-ui-thread "Direct link to Render in the UI Thread")

When there is a high priority event on the UI Thread, the renderer is able to execute all the render pipeline synchronously on the UI thread.

![Threading model use case two](/docs/assets/Architecture/threading-model/case-2.jpg)

***

### Default or continuous event interruption[‚Äã](#default-or-continuous-event-interruption "Direct link to Default or continuous event interruption")

This scenario shows the interruption of the render phase by a low priority event in the UI thread. React and the React Native renderer are able to interrupt the render phase and merge its state with a low priority event that is executed on the UI thread. In this case the render process continues executing in the JS thread.

![Threading model use case three](/docs/assets/Architecture/threading-model/case-3.jpg)

***

### Discrete event interruption[‚Äã](#discrete-event-interruption "Direct link to Discrete event interruption")

The render phase is interruptible. This scenario shows the interruption of the render phase by a high priority event in the UI thread. React and the renderer are able to interrupt the render phase and merge its state with a high priority event that was executed on the UI thread. The render phase executes synchronously on the UI thread.

![Threading model use case four](/docs/assets/Architecture/threading-model/case-4.jpg)

***

### C++ State update[‚Äã](#c-state-update "Direct link to C++ State update")

Update originating on UI thread and skips rendering phase. See [React Native Renderer State Updates](/architecture/render-pipeline.md#react-native-renderer-state-updates) for more details.

![Threading model use case six](/docs/assets/Architecture/threading-model/case-6.jpg)


---

# View Flattening

caution

This document refers to the [New Architecture](/architecture/fabric-renderer.md), that is in active roll-out.

#### View Flattening is an optimization by the React Native renderer to avoid deep layout trees.[‚Äã](#view-flattening-is-an-optimization-by-the-react-native-renderer-to-avoid-deep-layout-trees "Direct link to View Flattening is an optimization by the React Native renderer to avoid deep layout trees.")

The React API is designed to be declarative and reusable through composition. This provides a great model for intuitive development. However, in implementation, these qualities of the API lead to the creation of deep [React Element Trees](/architecture/glossary.md#react-element-tree-and-react-element), where a large majority of React Element Nodes only affect the layout of a View and don‚Äôt render anything on the screen. We call these types of nodes **‚ÄúLayout-Only‚Äù** Nodes.

Conceptually, each of the Nodes of the React Element Tree have a 1:1 relationship with a view on the screen, therefore rendering a deep React Element Tree that is composed by a large amount of ‚ÄúLayout-Only‚Äù Node leads to poor performance during rendering.

Here is a common use case that is affected by the cost of "Layout Only" views.

Imagine you want to render an image and a title that is handled by the `TitleComponent`, and you include this component as a child of the `ContainerComponent` that has some margin styles. After decomposing the components, the React code would look like this:

jsx

```
function MyComponent() {
  return (
    <View>                          // ReactAppComponent
      <View style={{margin: 10}} /> // ContainerComponent
        <View style={{margin: 10}}> // TitleComponent
          <Image {...} />
          <Text {...}>This is a title</Text>
        </View>
      </View>
    </View>
  );
}
```

As part of the render process, React Native will produce the following trees:

![Diagram one](/assets/images/diagram-one-8858888f0cd852d1e57f4806b95a4058.png)

Note that the Views (2) and (3) are ‚ÄúLayout Only‚Äù views, because they are rendered on the screen but they only render a `margin` of `10 px` on top of their children.

To improve the performance of these types of React Element Trees, the renderer implements a View Flattening mechanism that merges or flattens these types of Nodes, reducing the depth of the [host view](/architecture/glossary.md#host-view-tree-and-host-view) hierarchy that is rendered on the screen. This algorithm takes into consideration props like: `margin`, `padding`, `backgroundColor`, `opacity`, etc.

The View Flattening algorithm is integrated by design as part of the diffing stage of the renderer, which means that we don‚Äôt use extra CPU cycles to optimize the React Element Tree flattening these types of views. As the rest of the core, the View flattening algorithm is implemented in C++ and its benefits are shared by default on all supported platforms.

In the case of the previous example, the Views (2) and (3) would be flattened as part of the ‚Äúdiffing algorithm‚Äù and as a result their styles will be merged into the View (1):

![Diagram two](/assets/images/diagram-two-0622380bcf8982f7574bed57bbf3b850.png)

It is important to note that this optimization allows the renderer to avoid the creation and render of two host views. From the user‚Äôs perspective there are no visible changes on the screen.


---

# Cross Platform Implementation

caution

This document refers to the [New Architecture](/architecture/fabric-renderer.md), that is in active roll-out.

#### The React Native renderer utilizes a core render implementation to be shared across platforms[‚Äã](#the-react-native-renderer-utilizes-a-core-render-implementation-to-be-shared-across-platforms "Direct link to The React Native renderer utilizes a core render implementation to be shared across platforms")

In the previous render system of React Native, the **[React Shadow Tree](/architecture/glossary.md#react-shadow-tree-and-react-shadow-node)**, layout logic, and **[View Flattening](/architecture/view-flattening.md)** algorithm were implemented once for each platform. The current renderer was designed to be a cross-platform solution by sharing a core C++ implementation.

The React Native team intends to incorporate an animation system into the render system and also extend the React Native render system to new platforms such as Windows, and operating systems in game consoles, televisions, and more.

Leveraging C++ for the core render system introduces several advantages. A single implementation reduces the cost of development and maintenance. It improves the performance of creating React Shadow Trees and layout calculation because the overhead of integrating [Yoga](/architecture/glossary.md#yoga-tree-and-yoga-node) with the renderer is minimized on Android (i.e. no more [JNI](/architecture/glossary.md#java-native-interface-jni) for Yoga). Finally, the memory footprint of each React Shadow Node is smaller in C++ than it would be if allocated from Kotlin or Swift.

The team is also leveraging C++ features that enforce immutability to ensure there are no issues related to concurrent access to shared but not protected resources.

It is important to recognize that the renderer use case for Android still incurs the cost of [JNI](/architecture/glossary.md#java-native-interface-jni) for two primary use cases:

* Layout calculation of complex views (e.g. `Text`, `TextInput`, etc.) requires sending props over JNI.
* The mount phase requires sending mutation operations over JNI.

The team is exploring replacing `ReadableMap` with a new mechanism to serialize data using `ByteBuffer` to reduce overhead of JNI. Our goal is to reduce overhead of JNI by 35‚Äì50%.

The renderer provides two sides of its C++ APIs:

* **(i)** to communicate with React
* **(ii)** to communicate with the host platform

For **(i)**, React communicates with the renderer to **render** a React Tree and to ‚Äúlisten‚Äù for **events** (e.g. `onLayout`, `onKeyPress`, touch, etc).

For **(ii)**, the React Native renderer communicates with the host platform to mount host views on the screen (create, insert, update or delete of host views) and it listens for **events** that are generated by the user on the host platform.

![Cross-platform implementation diagram](/assets/images/xplat-implementation-diagram-657788d51165cd2647b2399555accf99.png)


---

# Communities

The React Native ecosystem is far and wide, and people can be part of it in many forms; here you will find but a partial list of different ways one developer can be part of it. If you know of other, or want to help expand this page, [submit a PR](https://github.com/facebook/react-native-website/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-desc)!

### Local communities[‚Äã](#local-communities "Direct link to Local communities")

There are a lot of React Native gatherings that happen around the world. Often there is React Native content in React meetups as well, use tools like [Meetup](https://www.meetup.com/topics/react-native/) and [Eventbrite](https://www.eventbrite.co.uk/d/online/react-native/?page=1) to find out recent events in your area - or start one!

### Company-based communities[‚Äã](#company-based-communities "Direct link to Company-based communities")

Some companies actively involved in the React Native have also their own communication channels focused towards the projects they maintain:

* [Callstack.io's](https://www.callstack.com/) [Discord server](https://discordapp.com/invite/zwR2Cdh)
* [Invertase.io's (e.g. React Native Firebase)](https://invertase.io/) [Discord server](https://discord.gg/C9aK28N)
* [Infinite Red's](https://infinite.red/) [Slack Group](https://community.infinite.red/)
* [Expo's](https://expo.dev/) [Discord server](https://chat.expo.dev/)

### Independent communities[‚Äã](#independent-communities "Direct link to Independent communities")

Organic communities of React Native developers, not sponsored by a business with a commercial interest.

* [The Reactiflux community](https://reactiflux.com) on [Discord](https://discord.gg/reactiflux)

### Content sharing[‚Äã](#content-sharing "Direct link to Content sharing")

React Native tagged content can be found on many platforms, such as:

* [DevTo community](https://dev.to/t/reactnative)
* [Medium](https://medium.com/tag/react-native)
* [Hashnode](https://hashnode.com/n/react-native)
* [Hacker News](https://hn.algolia.com/?q=react-native)
* [r/reactnative/](https://www.reddit.com/r/reactnative/)

These are places where you can share React Native projects, articles and tutorials as well as start discussions and ask for feedback on React Native related topics. (but remember to give some love to the [main documentation](https://github.com/facebook/react-native-website) too!)


---

# Overview

React Native is a widely used technology, empowered by a massive community of [hundreds of thousands of developers](https://github.com/facebook/react-native/stargazers) and downloaded [over 2 million times](https://www.npmjs.com/package/react-native) every week.

In this section you will find listed ways you can also be part of the React Native-related communities, depending on your wants and needs:

* [Staying up to date](/community/staying-updated.md)
* [Participating in the community](/community/communities.md)
* [Needing and providing help](/community/support.md)

We expect all folks participating in React Native' communities to adhere to the guidelines within our [Code of Conduct](https://github.com/facebook/react-native/blob/main/CODE_OF_CONDUCT.md).


---

# Staying up to date

### News[‚Äã](#news "Direct link to News")

Twitter is one of the main communication channels used by the team to communicate updates, news and request for participation: follow the [React Native account](https://twitter.com/reactnative) to stay up to date - the [ReactJS account](https://twitter.com/reactjs) covers both React and React Native.

For long form news and announcements, keep an eye on the [blog](/blog.md) to find out what is happening in the world of React Native.

### Discussions and efforts[‚Äã](#discussions-and-efforts "Direct link to Discussions and efforts")

React Native is a dynamic framework and there is always room for improvement. As an open source framework, large-scale coordination and discussion should remain publicly accessible. Here are some dedicated discussion groups you can participate in:

Expect important conversations to always be public; depending on the topic, you can find them in one of these places:

* [Framework discussions, proposals and RFCs](https://github.com/react-native-community/discussions-and-proposals/discussions)
* [Release status and issues](https://github.com/reactwg/react-native-releases/discussions)
* [New Architecture adoption and feedback](https://github.com/reactwg/react-native-new-architecture/discussions)
* [Improvements to the Developer Experience](https://github.com/react-native-community/developer-experience-wg)

### Packages & Integrations[‚Äã](#packages--integrations "Direct link to Packages & Integrations")

In the [React Native Directory](https://reactnative.directory/) you will be able to see many libraries that are compatible with React Native. It is a community-driven effort to help developers browse and evaluate packages, plugins, state management libraries, and more.

### Conferences[‚Äã](#conferences "Direct link to Conferences")

Over the years, many conferences organized by companies and partners have been organized around the world - it would be impossible to track them all here; moreover, often there is React Native content in React events as well.

Listed here are but a few of the main React Native related conferences, with links to past editions' recordings:

#### [ReactConf](https://conf.react.dev/), organized by Meta[‚Äã](#reactconf-organized-by-meta "Direct link to reactconf-organized-by-meta")

* [React Conf 2025](https://www.youtube.com/watch?v=p9OcztRyDl0?t=2291)
* [React Conf 2024](https://www.youtube.com/watch?v=T8TZQ6k4SLE\&list=PLNG_1j3cPCaaY3NEriypd7FKyWqbBNuAB)
* [React Conf 2021](https://www.youtube.com/watch?v=FZ0cG47msEk\&list=PLNG_1j3cPCaZZ7etkzWA7JfdmKWT0pMsa)
* [React Conf 2019](https://www.youtube.com/playlist?list=PLPxbbTqCLbGHPxZpw4xj_Wwg8-fdNxJRh)
* [React Conf 2018](https://www.youtube.com/watch?v=WXYPpY_mElQ)
* [React Conf 2017](https://www.youtube.com/playlist?list=PLb0IAmt7-GS3fZ46IGFirdqKTIxlws7e0)
* [React Conf 2016](https://www.youtube.com/playlist?list=PLb0IAmt7-GS0M8Q95RIc2lOM6nc77q1IY)
* [React Conf 2015](https://www.youtube.com/watch?list=PLb0IAmt7-GS1cbw4qonlQztYV1TAW0sCr\&v=KVZ-P-ZI6W4)

#### [ChainReact](https://cr.infinite.red/), organized by [InfiniteRed](https://infinite.red/)[‚Äã](#chainreact-organized-by-infinitered "Direct link to chainreact-organized-by-infinitered")

* [ChainReact 2024](https://www.youtube.com/playlist?list=PLFHvL21g9bk0XOO9XK6d6S9w1jBU6Dz_U)
* [ChainReact 2023](https://www.youtube.com/playlist?list=PLFHvL21g9bk30F2UaJfn6TqJn15MAoBOc)
* [ChainReact 2019](https://www.youtube.com/playlist?list=PLFHvL21g9bk2bTWTCP1BueiiIz8q258z9)
* [ChainReact 2018](https://www.youtube.com/playlist?list=PLFHvL21g9bk1skdjnKVGXREDmP_HVDj-u)
* [ChainReact 2017](https://www.youtube.com/playlist?list=PLFHvL21g9bk3RxJ1Ut5nR_uTZFVOxu522)

#### [AppJS](https://appjs.co/), organized by [Software Mansion](https://swmansion.com/)[‚Äã](#appjs-organized-by-software-mansion "Direct link to appjs-organized-by-software-mansion")

* [AppJS 2025](https://www.youtube.com/playlist?list=PLSk21zn8fFZBD3Kxg8Rw_n4LPIuA6TGHd)
* [AppJS 2024](https://www.youtube.com/playlist?list=PLSk21zn8fFZDMGB9UCnqz4WqLbnOgLnp5)
* [AppJS 2023](https://www.youtube.com/playlist?list=PLSk21zn8fFZCfYEMpSqQOHMgyNKc8B7_s)
* [AppJS 2022](https://www.youtube.com/playlist?list=PLSk21zn8fFZC3UIvyRjDb4Uog3244BwM6)
* [AppJS 2019](https://www.youtube.com/playlist?list=PLSk21zn8fFZBKEJxmkdSzzmMJrxkfyjph)

#### [React Universe Conf](https://www.reactuniverseconf.com/), organized by [Callstack](https://www.callstack.com/)[‚Äã](#react-universe-conf-organized-by-callstack "Direct link to react-universe-conf-organized-by-callstack")

* [React Universe Conf 2025](https://www.youtube.com/playlist?list=PLZ3MwD-soTTGHD999pxTX1r_6JORpOr0C)
* [React Universe Conf 2024](https://www.youtube.com/playlist?list=PLZ3MwD-soTTGAEY8kZD3tgXGTwojn5qYh)

#### [React Native Europe](https://www.react-native.eu/), organized by [Callstack](https://www.callstack.com/)[‚Äã](#react-native-europe-organized-by-callstack "Direct link to react-native-europe-organized-by-callstack")

* [React Native Europe 2023](https://www.youtube.com/playlist?list=PLZ3MwD-soTTEvs1qbdUtm52vlgUlKPDOX)
* [React Native Europe 2022](https://www.youtube.com/playlist?list=PLZ3MwD-soTTE-qcA0MrcvZBdmkHJSIjJX)
* [React Native Europe 2021](https://www.youtube.com/playlist?list=PLZ3MwD-soTTG-8Ix3lQ8zHvk94juXpYjl)
* [React Native Europe 2020](https://www.youtube.com/playlist?list=PLZ3MwD-soTTEGG42-BvoqD0qK0vKV2ygm)
* [React Native Europe 2019](https://www.youtube.com/playlist?list=PLZ3MwD-soTTHy9_88QPLF8DEJkvoB5Tl-)
* [React Native Europe 2018](https://www.youtube.com/playlist?list=PLZ3MwD-soTTEOWXU2I8Y8C3AfqvJdn3M_)
* [React Native Europe 2017](https://www.youtube.com/playlist?list=PLZ3MwD-soTTF76yq91JdPrFshTm_ZNNsf)


---

# Where to get help

If you need help with your React Native app, the right place to go depends on the type of help that you need.

### Repository[‚Äã](#repository "Direct link to Repository")

The core of **React Native** is worked on full-time by Meta's React Native team. But there are far more people in the community who make key contributions and fix things. If the issue you are facing is code related, you should check the open issues in the [main repository](https://github.com/facebook/react-native/issues).

If you cannot find an existing issue, please refer to [How to report a bug](/contributing/how-to-report-a-bug.md).

### Upgrade support[‚Äã](#upgrade-support "Direct link to Upgrade support")

Many times, when upgrading your apps and libraries from a version of React Native to a newer one, you might need some help; the community has rallied together to create a couple of important resources:

* [upgrade-helper](https://react-native-community.github.io/upgrade-helper/) is a tool that will show the full set of changes happening between any two versions to help you see what changes you need to do in your code.
* [upgrade support](https://github.com/react-native-community/upgrade-support) is a community-driven repository to request and give help when upgrading your app.

### Stack Overflow[‚Äã](#stack-overflow "Direct link to Stack Overflow")

Many members of the community use Stack Overflow to ask questions. Read through the [existing questions](https://stackoverflow.com/questions/tagged/react-native?sort=frequent) tagged with **react-native** or [ask your own](https://stackoverflow.com/questions/ask?tags=react-native)!

### Reactiflux Chat[‚Äã](#reactiflux-chat "Direct link to Reactiflux Chat")

If you need an answer right away, check out the [Reactiflux Discord](https://discord.gg/JuTwWB8rsy) community. There are usually a number of React Native experts there who can help out or point you to somewhere you might want to look.


---

# Bots Reference

## pull-bot[‚Äã](#pull-bot "Direct link to pull-bot")

This pull request linter bot performs basic sanity checks whenever a pull request is created. It might leave a comment on a pull request if it is unable to find a test plan or a changelog in the description, or if it notices that the pull request was not opened against the `main` branch. This bot uses [Danger](https://danger.systems), and its configuration can be found in the [`dangerfile.js`](https://github.com/facebook/react-native/blob/main/packages/react-native-bots/dangerfile.js).

## analysis-bot[‚Äã](#analysis-bot "Direct link to analysis-bot")

The code analysis bot collects feedback from tools such as Prettier, eslint, and Flow whenever a commit is added to a pull request. If any of these tools finds issues with the code, the bot will add these as inline review comments on the pull request. Its configuration can be found in the [`analyze_code.sh`](https://github.com/facebook/react-native/blob/main/scripts/circleci/analyze_code.sh) file in core repository.

## label-actions[‚Äã](#label-actions "Direct link to label-actions")

A bot that acts on an issue or pull request based on a label. Configured in [`.github/workflows/on-issue-labeled.yml`](https://github.com/facebook/react-native/blob/main/.github/workflows/on-issue-labeled.yml).

## github-actions[‚Äã](#github-actions "Direct link to github-actions")

A bot that performs actions defined in a GitHub workflow. Workflows are configured in [`.github/workflows`](https://github.com/facebook/react-native/tree/main/.github/workflows).

## facebook-github-bot[‚Äã](#facebook-github-bot "Direct link to facebook-github-bot")

The Facebook GitHub Bot is used across several open source projects at Meta. In the case of React Native, you will most likely encounter it when it pushes a merge commit to `main` after a pull request is successfully imported to Facebook's internal source control. It will also let authors know if they are missing a Contributor License Agreement.

## react-native-bot[‚Äã](#react-native-bot "Direct link to react-native-bot")

The React Native bot is a tool that helps us automate several processes described in this wiki. Configured in [`hramos/react-native-bot`](https://github.com/hramos/react-native-bot).


---

# Changelogs in Pull Requests

The changelog entry in your pull request serves as a sort of "tl;dr:" for your changes: do they affect Android? are these breaking changes? is something new being added?

Providing a changelog using a standardized format helps release coordinators write release notes. Please include a changelog as part of your pull request description. Your pull request description will be used as the commit message should the pull request get merged.

### Format[‚Äã](#format "Direct link to Format")

A changelog entry has the following format

```
## Changelog:

[Category] [Type] - Message
```

The "Category" field may be one of:

* **Android**, for changes that affect Android.
* **iOS**, for changes that affect iOS.
* **General**, for changes that do not fit any of the other categories.
* **Internal**, for changes that would not be relevant to developers consuming the release notes.

The "Type" field may be one of:

* **Breaking**, for breaking changes.
* **Added**, for new features.
* **Changed**, for changes in existing functionality.
* **Deprecated**, for soon-to-be removed features.
* **Removed**, for now removed features.
* **Fixed**, for any bug fixes.
* **Security**, in case of vulnerabilities.

Finally, the "Message" field may answer "what and why" on a feature level. Use this to briefly tell React Native users about notable changes.

For more detail, see [How do I make a good changelog?](https://keepachangelog.com/en/1.0.0/#how) and [Why keep a changelog?](https://keepachangelog.com/en/1.0.0/#why)

### Examples[‚Äã](#examples "Direct link to Examples")

* `[General] [Added] - Add snapToOffsets prop to ScrollView component`
* `[General] [Fixed] - Fix various issues in snapToInterval on ScrollView component`
* `[iOS] [Fixed] - Fix crash in RCTImagePicker`

### FAQ[‚Äã](#faq "Direct link to FAQ")

#### What if my pull request contains changes to both Android and JavaScript?[‚Äã](#what-if-my-pull-request-contains-changes-to-both-android-and-javascript "Direct link to What if my pull request contains changes to both Android and JavaScript?")

Use the Android category.

#### What if my pull request contains changes to both Android and iOS?[‚Äã](#what-if-my-pull-request-contains-changes-to-both-android-and-ios "Direct link to What if my pull request contains changes to both Android and iOS?")

Use the General category if the change is made in a single pull request.

#### What if my pull request contains changes to Android, iOS, and JavaScript?[‚Äã](#what-if-my-pull-request-contains-changes-to-android-ios-and-javascript "Direct link to What if my pull request contains changes to Android, iOS, and JavaScript?")

Use the General category if the change is made in a single pull request.

#### What if...?[‚Äã](#what-if "Direct link to What if...?")

Any changelog entry is better than none. If you are unsure if you have picked the right category, use the "message" field to succinctly describe your change.

These entries are used by the [`@rnx-kit/rn-changelog-generator`](https://github.com/microsoft/rnx-kit/tree/main/incubator/rn-changelog-generator) script to build a rough draft, which is then edited by a release coordinator.

Your notes will be used to add your change to the correct location in the final release notes.


---

# Contribution License Agreement

You must sign a Contribution License Agreement (CLA) before your pull request can be merged. This a one-time requirement for Meta projects in GitHub. You can read more about [Contributor License Agreements (CLA)](https://en.wikipedia.org/wiki/Contributor_License_Agreement) on Wikipedia.

However, you don't have to do this up-front. We welcome you to follow, fork, and submit a pull request.

When your pull request is created, it is classified by the Facebook GitHub bot. If you have not signed a CLA, the bot will provide instructions for [signing a CLA](https://code.facebook.com/cla) before your pull request can be considered eligible for merging. Once you have done so, the current and all future pull requests will be labelled as "CLA Signed".

Signing the CLA might sound scary, but it's actually very simple and can be done in less than a minute.


---

# How to Build from Source

You will need to build React Native from source if you want to work on a new feature/bug fix, try out the latest features which are not released yet, or maintain your own fork with patches that cannot be merged to the core.

## Android[‚Äã](#android "Direct link to Android")

### Prerequisites[‚Äã](#prerequisites "Direct link to Prerequisites")

To build from source, you need to have the Android SDK installed. If you followed the [Setting up the development environment](/docs/environment-setup.md) guide, you should already be set up.

There is no need to install other tools like specific version of NDK or CMake as the Android SDK will **automatically download** whatever is needed for the build from source.

### Point your project to a nightly[‚Äã](#point-your-project-to-a-nightly "Direct link to Point your project to a nightly")

To use the latest fixes and features of React Native, you can update your project to use a nightly version of React Native with:

```
yarn add react-native@nightly
```

This will update your project to use a nightly version of React Native that gets released every night with the latest changes.

### Update your project to build from source[‚Äã](#update-your-project-to-build-from-source "Direct link to Update your project to build from source")

Both with stable releases and nightlies, you will be consuming **precompiled** artifacts. If instead you want to switch to building from source, so you can test your changes to the framework directly, you will have to edit the `android/settings.gradle` file as follows:

diff

```
  // ...
  include ':app'
  includeBuild('../node_modules/@react-native/gradle-plugin')

+ includeBuild('../node_modules/react-native') {
+     dependencySubstitution {
+         substitute(module("com.facebook.react:react-android")).using(project(":packages:react-native:ReactAndroid"))
+         substitute(module("com.facebook.react:react-native")).using(project(":packages:react-native:ReactAndroid"))
+         substitute(module("com.facebook.react:hermes-android")).using(project(":packages:react-native:ReactAndroid:hermes-engine"))
+         substitute(module("com.facebook.react:hermes-engine")).using(project(":packages:react-native:ReactAndroid:hermes-engine"))
+     }
+ }
```

### Additional notes[‚Äã](#additional-notes "Direct link to Additional notes")

Building from source can take a long time, especially for the first build, as it needs to download \~200 MB of artifacts and compile the native code.

Every time you update the `react-native` version from your repo, the build directory may get deleted, and all the files are re-downloaded. To avoid this, you might want to change your build directory path by editing the `~/.gradle/init.gradle` file:

groovy

```
gradle.projectsLoaded {
    rootProject.allprojects {
        buildDir = "/path/to/build/directory/${rootProject.name}/${project.name}"
    }
}
```

## Rationale[‚Äã](#rationale "Direct link to Rationale")

The recommended approach to working with React Native is to always update to the latest version. The support we provide for older versions is [described in our support policy](https://github.com/reactwg/react-native-releases/#releases-support-policy).

The build from source approach should be used to end-to-end test a fix before submitting a pull request to React Native, and we're not encouraging its usages in the long run. Especially forking React Native or switching your setup to always use a build from source, will result in projects that are harder to update and generally a worse developer experience.


---

# How to Contribute Code

Thank you for your interest in contributing to React Native! From commenting on and triaging issues, to reviewing and sending PRs, [all contributions are welcome](/contributing/overview.md). In this document, we'll cover the steps to contributing code to React Native.

If you are eager to start contributing code right away, we have a list of [`Good first issues`](https://github.com/facebook/react-native/labels/good%20first%20issue) that contain bugs which have a relatively limited scope. Issues labeled [`Help wanted`](https://github.com/facebook/react-native/issues?utf8=%E2%9C%93\&q=is%3Aissue+is%3Aopen+label%3A%22help+wanted+%3Aoctocat%3A%22+sort%3Aupdated-desc+) are good issues to submit a PR for.

## Prerequisites[‚Äã](#prerequisites "Direct link to Prerequisites")

info

Please refer to the [Environment Setup](/docs/environment-setup.md) guide to setup required tools and the development environment based on the platform us use and platform which you want to develop for.

## Development Workflow[‚Äã](#development-workflow "Direct link to Development Workflow")

After cloning React Native, open the directory and run `yarn` to install its dependencies.

Now you are set up to run several commands:

* `yarn start` starts the Metro packager server.

* `yarn lint` checks the code style.

* `yarn format` automatically formats your code.

* `yarn test` runs the Jest-based JavaScript test suite.

  <!-- -->

  * `yarn test --watch` runs an interactive JavaScript test watcher.
  * `yarn test <pattern>` runs JavaScript tests with matching filenames.

* `yarn flow` runs the [Flow](https://flowtype.org/) typechecks.

  <!-- -->

  * `yarn flow-check-android` does a full Flow check over `*.android.js` files.
  * `yarn flow-check-ios` does a full Flow check over `*.ios.js` files.

* `yarn test-typescript` runs the [TypeScript](https://www.typescriptlang.org/) typechecks.

* `yarn test-ios` runs the iOS test suite (macOS required).

* `yarn build` builds all configured packages ‚Äî in general, this command only needs to be run by CI ahead of publishing.
  <!-- -->
  * Packages which require a build are configured in [scripts/build/config.js](https://github.com/facebook/react-native/blob/main/scripts/build/config.js).

* `yarn build-types` generates TypeScript types for the public API and updates the snapshot.

## Testing your Changes[‚Äã](#testing-your-changes "Direct link to Testing your Changes")

Tests help us prevent regressions from being introduced to the codebase. We recommend running `yarn test` or the platform-specific scripts above to make sure you don't introduce any regressions as you work on your change.

The GitHub repository is [continuously tested](/contributing/how-to-run-and-write-tests.md#continuous-testing) using CircleCI, the results of which are available through the Checks functionality on [commits](https://github.com/facebook/react-native/commits/main) and pull requests.

You can learn more about running and writing tests on the [How to Run and Write Tests](/contributing/how-to-run-and-write-tests.md) page.

## Coding Style[‚Äã](#coding-style "Direct link to Coding Style")

We use Prettier to format our JavaScript code. This saves you time and energy as you can let Prettier fix up any formatting issues automatically through its editor integrations, or by manually running `yarn run prettier`. We also use a linter to catch styling issues that may exist in your code. You can check the status of your code styling by running `yarn run lint`.

However, there are still some styles that the linter cannot pick up, notably in Java or Objective-C code.

### Objective-C[‚Äã](#objective-c "Direct link to Objective-C")

* Space after `@property` declarations
* Brackets on *every* `if`, on the *same* line
* `- method`, `@interface`, and `@implementation` brackets on the following line
* *Try* to keep it around 80 characters line length (sometimes it's not possible...)
* `*` operator goes with the variable name (e.g. `NSObject *variableName;`)

### Java[‚Äã](#java "Direct link to Java")

* If a method call spans multiple lines closing bracket is on the same line as the last argument.
* If a method header doesn't fit on one line each argument goes on a separate line.
* 100 character line length

## Sending a Pull Request[‚Äã](#sending-a-pull-request "Direct link to Sending a Pull Request")

Code-level contributions to React Native generally come in the form of [a pull request](https://help.github.com/en/articles/about-pull-requests). The process of proposing a change to React Native can be summarized as follows:

1. Fork the React Native repository and create your branch from `main`.
2. If you've added code that should be tested, add tests.
3. If you've changed APIs, update the documentation.
4. Ensure the test suite passes, either locally or on CI once you opened a pull request.
5. Make sure your code lints (for example via `yarn lint --fix`).
6. Verify if your code modifies the JS public API with `yarn build-types --validate`. If so, regenerate the snapshot using `yarn build-types`.
7. Push the changes to your fork.
8. Create a pull request to the React Native repository.
9. Review and address comments on your pull request.
10. A bot may comment with suggestions. Generally we ask you to resolve these first before a maintainer will review your code.
11. If you haven't already, submit the [Contributor License Agreement ("CLA")](#contributor-license-agreement).

If all goes well, your pull request will be merged. If it is not merged, maintainers will do their best to explain their reasoning.

If this is your first time sending a pull request, we have created a [step-by-step guide to help you get started](/contributing/how-to-open-a-pull-request.md). For more detailed information on how pull requests are handled, see the [Managing Pull Requests page](/contributing/managing-pull-requests.md).

### Contributor License Agreement[‚Äã](#contributor-license-agreement "Direct link to Contributor License Agreement")

In order to accept your pull request, we need you to submit a [Contributor License Agreement (CLA)](/contributing/contribution-license-agreement.md). You only need to do this once to work on any of Meta's open source projects. It only takes a minute, so you can do it while you wait for your dependencies to install.

## License[‚Äã](#license "Direct link to License")

By contributing to React Native, you agree that your contributions will be licensed under the [LICENSE](https://github.com/facebook/react-native/blob/main/LICENSE) file in the root directory of the React Native repository.


---

# How to Open a Pull Request

These instructions provide the step-by-step process to set up your machine to make contributions to the core React Native repository, and create your first pull request.

## Prologue: Getting Ready[‚Äã](#prologue-getting-ready "Direct link to Prologue: Getting Ready")

You will need a few tools and dependencies in order to build and develop for React Native. These are covered as part of the [Environment Setup](/docs/environment-setup.md) guide under the "Building Projects with Native Code" section.

In order to accept your pull request, we need you to submit a [Contributor License Agreement (CLA)](/contributing/contribution-license-agreement.md). You only need to do this once to work on any of Meta's open source projects. It only takes a minute, so you can do it while you wait for your dependencies to install.

## Chapter I: Welcome to Open Source[‚Äã](#chapter-i-welcome-to-open-source "Direct link to Chapter I: Welcome to Open Source")

### 1. Install `git`[‚Äã](#1-install-git "Direct link to 1-install-git")

The React Native source code is hosted on GitHub. You can interact with the git version control through the `git` command line program. We recommend you follow [GitHub's instructions](https://help.github.com/articles/set-up-git/) to set up git on your machine.

### 2. Get the source code[‚Äã](#2-get-the-source-code "Direct link to 2. Get the source code")

While you can browse the source code for React Native on [GitHub](https://github.com/facebook/react-native), we recommend you set up a fork on your local machine.

1. Go to <https://github.com/facebook/react-native>.
2. Click on "Fork" button on the upper right.
3. When asked, select your username as the host for this fork.

You will now have a fork of React Native on GitHub at <https://github.com/your_username/react-native>. Next, you will grab a copy of the source code for your local machine. Open a shell and type the following commands:

bash

```
git clone https://github.com/facebook/react-native.git
cd react-native
git remote add fork https://github.com/your_username/react-native.git
```

note

If the above seems new to you, do not be scared. You can access a shell through the Terminal application on macOS and Linux, or PowerShell on Windows.

A new `react-native` directory will be created with the contents of the core React Native repository. This directory is actually a clone of the React Native git repository. It is set up with two remotes:

* `origin` for the upstream <https://github.com/facebook/react-native> repository
* `fork` for the fork of React Native on your own GitHub account.

### 3. Create a branch[‚Äã](#3-create-a-branch "Direct link to 3. Create a branch")

We recommend creating a new branch in your fork to keep track of your changes:

bash

```
git checkout -b my_feature_branch --track origin/main
```

## Chapter II: Implementing your Changes[‚Äã](#chapter-ii-implementing-your-changes "Direct link to Chapter II: Implementing your Changes")

### 1. Install dependencies[‚Äã](#1-install-dependencies "Direct link to 1. Install dependencies")

React Native is a JavaScript monorepo managed by [Yarn Workspaces (Yarn Classic)](https://classic.yarnpkg.com/lang/en/docs/workspaces/).

Run a project-level install:

sh

```
yarn
```

You will also need to build the `react-native-codegen` package once:

sh

```
yarn --cwd packages/react-native-codegen build
```

### 2. Make changes to the code[‚Äã](#2-make-changes-to-the-code "Direct link to 2. Make changes to the code")

You can now open the project using your code editor of choice. [Visual Studio Code](https://code.visualstudio.com/) is popular with JavaScript developers, and recommended if you are making general changes to React Native.

IDE project configurations:

* **VS Code**: Open the `react-native.code-workspace` file. This should open with extension recommendations, and configure the Flow Language Service and other editor settings correctly.
* **Android Studio**: Open the repo root folder (containing the `.idea` config directory).
* **Xcode**: Open `packages/rn-tester/RNTesterPods.xcworkspace`.

### 3. Run your changes[‚Äã](#3-run-your-changes "Direct link to 3. Run your changes")

The package rn-tester can be used to run and validate your changes. You can learn more in [RNTester readme](https://github.com/facebook/react-native/blob/main/packages/rn-tester/README.md).

### 4. Test your changes[‚Äã](#4-test-your-changes "Direct link to 4. Test your changes")

Make sure your changes are correct and do not introduce any test failures. You can learn more in [Running and Writing Tests](/contributing/how-to-run-and-write-tests.md).

### 5. Lint your code[‚Äã](#5-lint-your-code "Direct link to 5. Lint your code")

We understand it can take a while to ramp up and get a sense of the style followed for each of the languages in use in the core React Native repository. Developers should not need to worry about minor nits, so whenever possible, we use tools that automate the process of rewriting your code to follow conventions.

For example, we use [Prettier](https://prettier.io/) to format our JavaScript code. This saves you time and energy as you can let Prettier fix up any formatting issues automatically through its editor integrations, or by manually running `yarn run prettier`.

We also use a linter to catch styling issues that may exist in your code. You can check the status of your code styling by running `yarn run lint`.

To learn more about coding conventions, refer to the [Coding Style guide](/contributing/how-to-contribute-code.md#coding-style).

### 6. View your changes[‚Äã](#6-view-your-changes "Direct link to 6. View your changes")

Many popular editors integrate with source control in some way. You can also use `git status` and `git diff` on the command line to keep track of what has changed.

## Chapter III: Proposing your Changes[‚Äã](#chapter-iii-proposing-your-changes "Direct link to Chapter III: Proposing your Changes")

### 1. Commit your changes[‚Äã](#1-commit-your-changes "Direct link to 1. Commit your changes")

Make sure to add your changes to version control using `git`:

bash

```
git add <filename>
git commit -m <message>
```

You can use a short descriptive sentence as your commit message.

note

Worried about writing good git commit messages? Do not fret. Later, when your pull request is merged, all your commits will be squashed into a single commit. It is your pull request description which will be used to populate the message for this squashed commit.

This guide covers enough information to help you along with your first contribution. GitHub has several resources to help you get started with git:

* [Using Git](https://help.github.com/en/categories/using-git)
* [The GitHub Flow](https://guides.github.com/introduction/flow/)

### 2. Push your changes to GitHub[‚Äã](#2-push-your-changes-to-github "Direct link to 2. Push your changes to GitHub")

Once your changes have been commited to version control, you can push them to GitHub.

bash

```
git push fork <my_feature_branch>
```

If all goes well, you will see a message encouraging you to open a pull request:

```
remote:
remote: Create a pull request for 'your_feature_branch' on GitHub by visiting:
remote:      https://github.com/your_username/react-native/pull/new/your_feature_branch
remote:
```

Visit the provided URL to proceed to the next step.

### 3. Create your pull request[‚Äã](#3-create-your-pull-request "Direct link to 3. Create your pull request")

You are almost there! The next step is to fill out the pull request. Use a descriptive title that is not too long. Then, make sure to fill out all of the fields provided by the default pull request template:

* **Summary:** Use this field to provide your motivation for sending this pull request. What are you fixing?
* **[Changelog](/contributing/changelogs-in-pull-requests.md):** Help release maintainers write release notes by providing a short description of what will be changed should the pull request get merged.
* **Test Plan:** Let reviewers know how you tested your changes. Did you consider any edge cases? Which steps did you follow to make sure your changes have the desired effect? See [What is a Test Plan?](https://medium.com/@martinkonicek/what-is-a-test-plan-8bfc840ec171) to learn more.

### 4. Review and address feedback[‚Äã](#4-review-and-address-feedback "Direct link to 4. Review and address feedback")

Keep an eye on any comments and review feedback left on your pull request on GitHub. Maintainers will do their best to provide constructive, actionable feedback to help get your changes ready to be merged into the core React Native repository.


---

# How to Report a Bug

Reporting a bug for React Native is one of the best way to start contributing to the project. We use [GitHub issues](https://github.com/facebook/react-native/issues) as the main channel for handling new bug reports.

Before opening a new bug, please [search if the bug already exists](https://github.com/facebook/react-native/issues?q=sort%3Aupdated-desc%20is%3Aissue) in our issue tracker. Most of the time, that's the fastest way to find a response as someone else already experienced the same problem.

If you can't find your bug in the issue tracker, you can open a new one. Once you create a new issue, make sure you:

* Add a description of the problem.
* Follow the instructions on the [issue template](https://github.com/facebook/react-native/issues/new?template=bug_report.yml).
* Add the React Native version you're using.
* Add the output of the `npx @react-native-community/cli info` command.
* Add screenshots and videos of the problem if applicable.

All the bug reports should also include a **reproducer**: the code necessary for us to understand what is going on and help us with the debugging.

warning

Due to high number of issues we receive, reproducers are **mandatory**. Issues without reproducer cannot be investigated and will most likely be closed.

## Providing a Reproducers[‚Äã](#providing-a-reproducers "Direct link to Providing a Reproducers")

The goal of a reproducer is to provide a way to *reproduce* your bug. Without a reproducer, we won't be able to understand the bug, and we also won't be able to fix it.

The reproducer should be **minimal**: having as little dependencies as possible (ideally none other than `react-native`) as this will help us better isolate the bug. When someone on GitHub is asking for a reproducer, they're **not** asking for all of your source code.

You need instead to create a **minimal** project that reproduces the same crash/bug/issue you're reporting.

This process is crucial, as often issues are actually solved by creating a reproducer. By creating a reproducer, it will be easier to understand if the issue is related to your specific setup or if it's actually a bug inside React Native.

Due to the amount of traffic we have on React Native, we can accept only one of those as a valid reproducer:

1. For majority of bugs: send us a Pull Request with the [RNTesterPlayground.js](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/Playground/RNTesterPlayground.js) edited to reproduce your bug.
2. If your bug is UI related: a [Snack](https://snack.expo.dev).
3. If your bug is build/upgrade related: a project using our [Reproducer Template](https://github.com/react-native-community/reproducer-react-native/generate).

### RNTesterPlayground.js[‚Äã](#rntesterplaygroundjs "Direct link to RNTesterPlayground.js")

The best way for you to provide a reproducer is to open a Pull Request against React Native that edits the [`RNTesterPlayground.js`](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/Playground/RNTesterPlayground.js) file.

tip

This reproducer will run your code against `main` of `react-native` and is the **fastest** way we have to investigate and fix your bugs.

The `RNTesterPlayground.js` file is located inside the RN-Tester application, our reference App. You can read more about it how it works and how to build it inside its [dedicated README file](https://github.com/facebook/react-native/blob/main/packages/rn-tester/README.md).

An example of such type of reproducer is here: [Reproduce modal layout issues #50704](https://github.com/facebook/react-native/pull/50704/).

Once you edit the `RNTesterPlayground.js`, you'll be able to see your code running inside the **Playground** Tab of RNTester:

![Step one](/assets/images/RNTesterPlayground-1dd9406bf9a8fe4fad7c0da4e12cb1c7.png)

### Expo Snack[‚Äã](#expo-snack "Direct link to Expo Snack")

For most UI related bugs, you reproduce them using an [Expo Snack](https://snack.expo.dev/).

With Expo Snack, you can run React Native code in your browser, and see it rendering right away.

Once you are able to reproduce your issue in an Expo Snack, click the **Save** button to get a shareble link to attach to your issue report

### Reproducer Template[‚Äã](#reproducer-template "Direct link to Reproducer Template")

For most build-related bugs instead, you should reproduce them using the [community reproducer template](https://github.com/react-native-community/reproducer-react-native).

This template creates a small project that runs with the React Native Community CLI and that can be used to showcase build issues.

The template also comes with its own CI already set up with GitHub Actions, as this will help spotting any build issues you might be having.

To use this template:

1. Click the [Use this template](https://github.com/new?template_name=reproducer-react-native\&template_owner=react-native-community) button on GitHub to create a new project starting from the template.
2. Clone your newly created repository locally.
3. Apply the modifications to reproduce your issue.
4. Attach your repository link to the new bug report you're creating.


---

# How to Run and Write Tests

## Running Tests[‚Äã](#running-tests "Direct link to Running Tests")

This section is about testing your changes to React Native as a contributor. If you haven't yet, go through the steps to set up your development environment for [building projects with native code](/docs/environment-setup.md).

### JavaScript Tests[‚Äã](#javascript-tests "Direct link to JavaScript Tests")

The simplest way to run the JavaScript test suite is by using the following command at the root of your React Native checkout:

bash

```
yarn test
```

This will run tests using [Jest](https://jestjs.io).

You should also make sure your code passes [Flow](https://flowtype.org/) and lint tests:

bash

```
yarn flow
yarn lint
```

### iOS Tests[‚Äã](#ios-tests "Direct link to iOS Tests")

Follow the [README.md](https://github.com/facebook/react-native/blob/main/packages/rn-tester/README.md) instructions in the `packages/rn-tester` directory.

Then, go back to the root of your React Native checkout and run `yarn`. This will set up your JavaScript dependencies.

At this point, you can run iOS tests by invoking the following script from the root of your React Native checkout:

bash

```
./scripts/objc-test.sh test
```

You can also use Xcode to run iOS tests. Open `RNTester/RNTesterPods.xcworkspace` and run tests locally by pressing `Command + U` or selecting `Product` then `Test` from the menubar.

Xcode also allows running individual tests through its Test Navigator. You can also use `Command + 6` shortcut.

note

`objc-test.sh` ensures your test environment is set up to run all tests. It also disables tests that are known to be flaky or broken. Keep this in mind when running tests using Xcode. If you see an unexpected failure, see if it's disabled in `objc-test.sh` first.

#### iOS Podfile/Ruby tests[‚Äã](#ios-podfileruby-tests "Direct link to iOS Podfile/Ruby tests")

If you are making modifications to `Podfile` configurations then there are Ruby tests that can verify these.

To run the ruby tests:

bash

```
cd scripts
sh run_ruby_tests.sh
```

### Android Tests[‚Äã](#android-tests "Direct link to Android Tests")

The Android Unit tests do not run in an emulator, but they run on the JVM on your local machine.

To run the Android Unit tests, invoke the following script from the root of your React Native checkout:

bash

```
./gradlew test
```

## Writing Tests[‚Äã](#writing-tests "Direct link to Writing Tests")

Whenever you are fixing a bug or adding new functionality to React Native, it is a good idea to add a test that covers it. Depending on the change you're making, there are different types of tests that may be appropriate.

### JavaScript Tests[‚Äã](#javascript-tests-1 "Direct link to JavaScript Tests")

The JavaScript tests can be found inside `__test__` directories, colocated next to the files that are being tested. See [`TouchableHighlight-test.js`](https://github.com/facebook/react-native/blob/main/Libraries/Components/Touchable/__tests__/TouchableHighlight-test.js) for a basic example. You can also follow Jest's [Testing React Native Apps](https://jestjs.io/docs/en/tutorial-react-native) tutorial to learn more.

### iOS Integration Tests[‚Äã](#ios-integration-tests "Direct link to iOS Integration Tests")

React Native provides facilities to make it easier to test integrated components that require both native and JS components to communicate across the bridge.

The two main components are `RCTTestRunner` and `RCTTestModule`. `RCTTestRunner` sets up the React Native environment and provides facilities to run the tests as `XCTestCase`s in Xcode (`runTest:module` is the simplest method). `RCTTestModule` is exported to JavaScript as `NativeModules.TestModule`.

The tests themselves are written in JS, and must call `TestModule.markTestCompleted()` when they are done, otherwise the test will timeout and fail.

Test failures are primarily indicated by throwing a JS exception. It is also possible to test error conditions with `runTest:module:initialProps:expectErrorRegex:` or `runTest:module:initialProps:expectErrorBlock:` which will expect an error to be thrown and verify the error matches the provided criteria.

See the following for example usage and integration points:

* [`IntegrationTestHarnessTest.js`](https://github.com/facebook/react-native/blob/main/IntegrationTests/IntegrationTestHarnessTest.js)
* [`RNTesterIntegrationTests.m`](https://github.com/facebook/react-native/blob/main/RNTester/RNTesterIntegrationTests/RNTesterIntegrationTests.m)
* [`IntegrationTestsApp.js`](https://github.com/facebook/react-native/blob/main/IntegrationTests/IntegrationTestsApp.js)

### iOS Snapshot Tests[‚Äã](#ios-snapshot-tests "Direct link to iOS Snapshot Tests")

A common type of integration test is the snapshot test. These tests render a component, and verify snapshots of the screen against reference images using `TestModule.verifySnapshot()`, using the [`FBSnapshotTestCase`](https://github.com/facebook/ios-snapshot-test-case) library behind the scenes. Reference images are recorded by setting `recordMode = YES` on the `RCTTestRunner`, then running the tests.

Snapshots will differ slightly between 32 and 64 bit, and various OS versions, so it's recommended that you enforce tests are run with the [correct configuration](https://github.com/facebook/react-native/blob/main/scripts/.tests.env).

It's also highly recommended that all network data be mocked out, along with other potentially troublesome dependencies. See [`SimpleSnapshotTest`](https://github.com/facebook/react-native/blob/main/IntegrationTests/SimpleSnapshotTest.js) for a basic example.

If you make a change that affects a snapshot test in a pull request, such as adding a new example case to one of the examples that is snapshotted, you'll need to re-record the snapshot reference image.

To do this, change `recordMode` flag to `_runner.recordMode = YES;` in [RNTester/RNTesterSnapshotTests.m](https://github.com/facebook/react-native/blob/136666e2e7d2bb8d3d51d599fc1384a2f68c43d3/RNTester/RNTesterIntegrationTests/RNTesterSnapshotTests.m#L29), re-run the failing tests, then flip record back to `NO` and submit/update your pull request and wait to see if the CircleCI build passes.

### Android Unit Tests[‚Äã](#android-unit-tests "Direct link to Android Unit Tests")

It's a good idea to add an Android unit test whenever you are working on code that can be tested by Java/Kotlin code alone. The Android unit tests are located in `packages/react-native/ReactAndroid/src/test/`.

We recommend browsing through these to get an idea of what a good unit test might look like.

## Continuous Testing[‚Äã](#continuous-testing "Direct link to Continuous Testing")

We use [CircleCI](https://github.com/facebook/react-native/blob/main/.circleci/config.yml) to automatically run our open source tests. CircleCI will run these tests whenever a commit is added to a pull request, as a way to help maintainers understand whether a code change introduces a regression. The tests also run on commits to the `main` and `*-stable` branches in order to keep track of the health of these branches.

There's another set of tests that run within Meta's internal test infrastructure. Some of these tests are integration tests defined by internal consumers of React Native (e.g. unit tests for a React Native surface in the Facebook app).

These tests run on every commit to the copy of React Native hosted on Facebook's source control. They also run when a pull request is imported to Facebook's source control.

If one of these tests fail, you'll need someone at Meta to take a look. Since pull requests can only be imported by Meta employees, whoever imported the pull request should be able to facilitate any details.

note

**Running CI tests locally:** Most open source collaborators rely on CircleCI to see the results of these tests. If you'd rather verify your changes locally using the same configuration as CircleCI, CircleCI provides a [command line interface](https://circleci.com/docs/local-cli) with the ability to run jobs locally.

### F.A.Q.[‚Äã](#faq "Direct link to F.A.Q.")

#### How do I upgrade the Xcode version used in CI tests?[‚Äã](#how-do-i-upgrade-the-xcode-version-used-in-ci-tests "Direct link to How do I upgrade the Xcode version used in CI tests?")

When upgrading to a new version of Xcode, first make sure it is [supported by CircleCI](https://circleci.com/docs/testing-ios#supported-xcode-versions).

You will also need to update the test environment config to make sure tests run on an iOS Simulator that comes installed in the CircleCI machine.

This can also be found in [CircleCI's Xcode version reference](https://circleci.com/docs/2.0/testing-ios/#supported-xcode-versions) by clicking the desired version and looking under Runtimes.

You can then edit these two files:

* `.circleci/config.yml`

  Edit the `xcode:` line under `macos:` (search for `_XCODE_VERSION`).

* `scripts/.tests.env`

  Edit the `IOS_TARGET_OS` envvar to match the desired iOS Runtime.

If you intend to merge this change on GitHub, please make sure to notify a Meta employee as they'll need to update the value of `_XCODE_VERSION` used in the internal Sandcastle RN OSS iOS test in `react_native_oss.py` when they import your pull request.


---

# Labeling GitHub Issues

Most of [our labels](https://github.com/facebook/react-native/issues/labels) have a prefix that provides a hint of their purpose.

You'll notice right away there's two label prefixes that dominate the list, [API:](https://github.com/facebook/react-native/labels?utf8=%E2%9C%93\&q=API%3A), and [Component:](https://github.com/facebook/react-native/labels?utf8=%E2%9C%93\&q=Component%3A).

These generally denote issues and pull requests related to an API or Component in the core React Native library. It helps us understand, at a glance, which components are in dire need of documentation or support.

These labels are added automatically by one of our [bots](/contributing/bots-reference.md), but feel free to adjust them if the bot mis-attributes an issue.

* The `p:` class of labels denote a company with whom with maintain some sort of [relationship](https://github.com/facebook/react-native/blob/main/ECOSYSTEM.md). These include Microsoft and Expo, for example. These are also added automatically by our tooling, based on the issue author.
* The `DX:` class of labels denote areas that deal with the developer experience. Use these for issues that negatively impact people who use React Native.
* The `Tool:` class of labels denote tooling. CocoaPods, Buck...
* The `Resolution:` labels help us communicate the status of an issue. Does it need more information? What needs to be done before it can move forward?
* The `Type:` labels are added by a bot, based on the changelog field in a pull request. They may also refer to types of issues that are not bug reports.
* The `Platform:` labels help us identify which development platform or target OS is affected by the issue.

When unsure of the meaning of a particular label, go to <https://github.com/facebook/react-native/labels> and look at the description field. We'll do our best to properly document these.

### Label Actions[‚Äã](#label-actions "Direct link to Label Actions")

Applying one of the following labels may result in a bot interaction. The goal of these is to ease aid in issue triage by providing a canned response when deemed necessary.

* Labels that instruct the bot to leave a comment with next steps:

  * `Needs: Issue Template`
  * `Needs: Environment Info`
  * `Needs: Verify on Latest Version`
  * `Needs: Repro`

* Labels that instruct the bot to close the issue after leaving an explanatory comment:

  * `Resolution: For Stack Overflow`
  * `Type: Question`
  * `Type: Docs`

* Labels that flat out close an issue with no comment:

  * `Type: Invalid`


---

# Managing Pull Requests

Reviewing a pull request can take a considerable amount of time. In some cases, the review might require more time to perform than it took someone to write and submit their changes! It's therefore necessary to do some preliminary work to ensure each pull request is in a good state to be reviewed.

A pull request should consist of three main sections:

* A summary. This helps us understand the motivation behind the changes.
* A changelog. This helps us write the release notes. It also serves as a brief summary of your changes.
* A test plan. This might be the most important part of your pull request. A test plan should be a reproducible step-by-step guide so that a reviewer can verify your change is working as intended. It's also a good idea to attach screenshots or videos for user visible changes.

Any pull request may require a deeper understanding of some area of React Native that you may not be familiar with. Even if you don't feel like you are the right person to review a pull request, you may still help by adding labels or asking the author for more information.

## Reviewing PRs[‚Äã](#reviewing-prs "Direct link to Reviewing PRs")

Pull Requests need to be reviewed and approved using GitHub's review feature before they can be merged. While anyone has the ability to review and approve a pull request, we typically only consider a pull request ready to be merged when the approval comes from one of the [contributors](https://github.com/facebook/react-native/blob/main/ECOSYSTEM.md).

So you've found a pull request that you feel confident reviewing. Please make use of the GitHub Review feature, and clearly and politely communicate any suggested changes.

Consider starting with pull requests that have been flagged as lacking a changelog or test plan.

* [PRs that appear to lack a changelog](https://github.com/facebook/react-native/pulls?utf8=%E2%9C%93\&q=is%3Apr+is%3Aopen+label%3A%22Missing+Changelog%22+) - take a look and see if you can add the changelog yourself by editing the PR. After doing so, remove the "Missing Changelog" label.
* [PRs that are missing a test plan](https://github.com/facebook/react-native/pulls?q=is%3Apr+label%3A%22Missing+Test+Plan%22+is%3Aclosed) - open the pull request and look for a test plan. If the test plan looks sufficient, remove the "Missing Test Plan"" label. If there is no test plan, or it looks incomplete, add a comment politely asking the author to consider adding a test plan.

A pull request must pass all the tests before it can be merged. They run on every commit on `main` and pull request. A quick way to help us get pull requests ready for review is to [search for pull requests that are failing the pre-commit tests](https://github.com/facebook/react-native/pulls?utf8=%E2%9C%93\&q=is%3Apr+is%3Aopen+label%3A%22CLA+Signed%22+status%3Afailure+) and determine if they need to be revised. The failing test is usually listed near the bottom of the thread, under "Some checks were not successful."

* Take a quick glance at the [latest tests runs on main](https://circleci.com/gh/facebook/react-native/tree/main). Is `main` green? If so,

  <!-- -->

  * Does it look like the failure may be related to the changes in this pull request? Ask the author to investigate.
  * Even if `main` is currently green, consider the possibility that the commits in the pull requests may be based off a commit from a point in time when `main` was broken. If you believe this may be the case, ask the author to rebase their changes on top of `main` in order to pull in any fixes that may have landed after they started working on the pull request.

* If `main` appears to be broken, look for any [issues labeled as "CI Test Failure"](https://github.com/facebook/react-native/issues?utf8=%E2%9C%93\&q=is%3Aissue+is%3Aopen+label%3A%22%E2%9D%8CCI+Test+Failure%22+).

  <!-- -->

  * If you find an issue that seems related to the failure on `main`, go back to the pull request and thank the author for proposing these changes, and let them know that the test failure may be unrelated to their particular change (do not forget to link back to the CI Test Failure issue, as this will help the author know when they can try running tests again).
  * If you cannot find an existing CI Test Failure issue that describes the problem you've observed on `main`, please submit a new issue and use the "CI Test Failure" label to let others know that `main` is broken (see [this issue](https://github.com/facebook/react-native/issues/23108) for an example).

## How we prioritize PRs[‚Äã](#how-we-prioritize-prs "Direct link to How we prioritize PRs")

Members of the React Native team at Meta aim to review pull requests quickly and most PRs will get a response within a week.

## How does a PR get merged?[‚Äã](#how-does-a-pr-get-merged "Direct link to How does a PR get merged?")

The React Native GitHub repository is actually a mirror of a subdirectory from one of Meta's monorepos. Pull requests are therefore not merged in the traditional sense. Instead, they need to be imported into Meta's internal code review system as a ["diff"](https://www.phacility.com/phabricator/differential/).

Once imported, the changes will go through a suite of tests. Some of these tests are land-blocking, meaning they need to succeed before the contents of the diff can be merged. Meta always runs React Native from `main` and some changes may require a Facebook employee to attach internal changes to your pull request before it can be merged. For example, if you rename a module name, all Facebook internal callsites have to be updated in the same change in order to merge it. If the diff lands successfully, the changes will eventually get synced back to GitHub by [ShipIt](https://github.com/facebook/fbshipit) as a single commit.

Meta employees are using a custom browser extension for GitHub that can import a pull request in one of two ways: the pull request can be "landed to fbsource", meaning it will be imported and the resulting diff will be approved automatically, and barring any failures, the changes will eventually sync back to `main`. A pull request may also be "imported to Phabricator", meaning the changes will be copied to an internal diff that will require further review and approval before it can land.

![](/img/importing-pull-requests.png)

Screenshot of the custom browser extension. The button "Import to fbsource" is used to import a Pull Request internally.

## Bots[‚Äã](#bots "Direct link to Bots")

As you review and work on pull requests, you might encounter comments left by a handful of GitHub bot accounts. These bots have been set up to aid in the pull request review process. See the [Bots Reference](/contributing/bots-reference.md) to learn more.

## Pull Request Labels[‚Äã](#pull-request-labels "Direct link to Pull Request Labels")

* `Merged`: Applied to a closed PR to indicate that its changes have been incorporated into the core repository. This label is necessary because pull requests are not merged directly on GitHub. Instead, a patch with the PR's changes is imported and queued up for code review. Once approved, the result of applying those changes on top of Meta's internal monorepository gets synced out to GitHub as a new commit. GitHub does not attribute that commit back to the original PR, hence the need for a label that communicates the PR's true status.
* `Blocked on FB`: The PR has been imported, but the changes have not yet been applied.


---

# Contributing Overview

Thank you for your interest in contributing to React Native! From commenting on and triaging issues, to reviewing and sending Pull Requests, all contributions are welcome. We aim to build a vibrant and inclusive [ecosystem of partners, core contributors, and community](https://github.com/facebook/react-native/blob/main/ECOSYSTEM.md) that goes beyond the main React Native GitHub repository.

The [Open Source Guides](https://opensource.guide/) website has a collection of resources for individuals, communities, and companies who want to learn how to run and contribute to an open source project.

Contributors and people new to open source alike will find the following guides especially useful:

* [How to Contribute to Open Source](https://opensource.guide/how-to-contribute/)
* [Building Welcoming Communities](https://opensource.guide/building-community/)

### Code of Conduct[‚Äã](#code-of-conduct "Direct link to Code of Conduct")

As a reminder, all contributors are expected to adhere to the [Code of Conduct](https://github.com/facebook/react-native/blob/HEAD/CODE_OF_CONDUCT.md).

## Versioning Policy[‚Äã](#versioning-policy "Direct link to Versioning Policy")

In order to fully understand the versioning of React Native, we recommend you to check out the [Versioning Policy](/docs/releases/versioning-policy.md) page. In that page we describe which versions of React Native are supported, how often they're released and which one you should use based on your circumstances.

## Ways to Contribute[‚Äã](#ways-to-contribute "Direct link to Ways to Contribute")

If you are eager to start contributing code right away, we have a list of [good first issues](https://github.com/facebook/react-native/labels/good%20first%20issue) that contain bugs which have a relatively limited scope. As you gain more experience and demonstrate a commitment to evolving React Native, you may be granted issue management permissions in the repository.

There are other ways you can contribute without writing a single line of code. Here are a few things you can do to help out:

1. **Replying and handling open issues.**

   We get a lot of issues every day, and some of them may lack necessary information. You can help out by guiding people through the process of filling out the issue template, asking for clarifying information, or pointing them to existing issues that match their description of the problem. We cover more about this process on the [Triaging GitHub Issues](/contributing/triaging-github-issues.md) page.

2. **Reviewing pull requests for the docs.**

   Reviewing [documentation updates](https://github.com/facebook/react-native-website/pulls) can be as simple as checking for spelling and grammar. If you encounter situations that can be explained better in the docs, click **Edit** at the top of most docs pages to get started with your own contribution.

3. **Help people write test plans.**

   Some pull requests sent to the main repository may lack a proper test plan. These help reviewers understand how the change was tested, and can speed up the time it takes for a contribution to be accepted.

Each of these tasks is highly impactful, and maintainers will greatly appreciate your help.

### Our Development Process[‚Äã](#our-development-process "Direct link to Our Development Process")

We use GitHub issues and pull requests to keep track of bug reports and contributions from the community. All changes from engineers at Meta will sync to [GitHub](https://github.com/facebook/react-native) through a bridge with Meta's internal source control. Changes from the community are handled through GitHub pull requests.

Once a change made on GitHub is approved, it will first be imported into Facebook's internal source control and tested against Facebook's codebase. Once merged at Facebook, the change will eventually sync back to GitHub as a single commit once it has passed Facebook's internal tests.

You can learn more about the contribution process in the following documents:

* [Triaging GitHub Issues](/contributing/triaging-github-issues.md)
* [Managing Pull Requests](/contributing/managing-pull-requests.md)

We also have a thriving community of contributors who would be happy to help you get set up. You can reach out to the React Native team through [@ReactNative](https://twitter.com/reactnative).

### Repositories[‚Äã](#repositories "Direct link to Repositories")

The main repository contains the React Native framework itself, and it is here where we keep track of bug reports and manage pull requests.

There are a few other repositories you might want to familiarize yourself with:

* **React Native website** which contains the source code for the website, including the documentation, located [in this repository](https://github.com/facebook/react-native-website).
* **Releases** conversations are happening [in this discussion repo](https://github.com/reactwg/react-native-releases/discussions).
* **Changelog** for the releases can be found [here](https://github.com/facebook/react-native/blob/main/CHANGELOG.md).
* **Discussions** about React Native take place in the [Discussions and Proposals](https://github.com/react-native-community/discussions-and-proposals) repository.
* **Discussions** about the new architecture of React Native take place in the [React Native New Architecture Working Group](https://github.com/reactwg/react-native-new-architecture) repository.
* **High-quality plugins** for React Native can be found throughout the [React Native Directory](https://reactnative.directory) website.

Browsing through these repositories should provide some insight into how the React Native open source project is managed.

## GitHub Issues[‚Äã](#github-issues "Direct link to GitHub Issues")

We use GitHub issues to track bugs exclusively. We have documented our issue handling processes in the [Triaging Issues Page](/contributing/triaging-github-issues.md).

### Security Bugs[‚Äã](#security-bugs "Direct link to Security Bugs")

Meta has a [bounty program](https://www.facebook.com/whitehat/) for the safe disclosure of security bugs. In those cases, please go through the process outlined on that page and do not file a public issue.

## Helping with Documentation[‚Äã](#helping-with-documentation "Direct link to Helping with Documentation")

The React Native documentation is hosted as part of the React Native website repository. The website is built using [Docusaurus](https://docusaurus.io/). If there's anything you'd like to change in the docs, you can get started by clicking on the "Edit" button located on the upper right of most pages in the website.

If you are adding new functionality or introducing a change in behavior, we will ask you to update the documentation to reflect your changes.

### Contributing to the Blog[‚Äã](#contributing-to-the-blog "Direct link to Contributing to the Blog")

The React Native blog is generated [from the Markdown sources for the blog](https://github.com/facebook/react-native-website/tree/HEAD/website/blog).

Please open an issue in the React Native website repository or tag us on [@ReactNative on Twitter](https://twitter.com/reactnative) and get the go-ahead from a maintainer before writing an article intended for the React Native blog. In most cases, you might want to share your article on your own blog or writing medium instead. It's worth asking, though, in case we find your article is a good fit for the blog.

We recommend referring to the `react-native-website` repository [Readme file](https://github.com/facebook/react-native-website#-contributing) to learn more about contributing to the website in general.

## Contributing Code[‚Äã](#contributing-code "Direct link to Contributing Code")

Code-level contributions to React Native generally come in the form of [pull requests](https://help.github.com/en/articles/about-pull-requests). These are done by forking the repo and making changes locally.

### Step-by-step Guide[‚Äã](#step-by-step-guide "Direct link to Step-by-step Guide")

Whenever you are ready to contribute code, check out our [step-by-step guide to sending your first pull request](/contributing/how-to-open-a-pull-request.md), or read the [How to Contribute Code](/contributing/how-to-contribute-code.md) page for more details.

### Tests[‚Äã](#tests "Direct link to Tests")

Tests help us prevent regressions from being introduced to the codebase. The GitHub repository is continuously tested using CircleCI, the results of which are available through the Checks functionality on [commits](https://github.com/facebook/react-native/commits/HEAD) and pull requests.

You can learn more about running and writing tests on the [How to Run and Write Tests](/contributing/how-to-run-and-write-tests.md) page.

## Community Contributions[‚Äã](#community-contributions "Direct link to Community Contributions")

Contributions to React Native are not limited to GitHub. You can help others by sharing your experience using React Native, whether that is through blog posts, presenting talks at conferences, or simply sharing your thoughts on Twitter and tagging [@ReactNative](https://twitter.com/reactnative).


---

# Triaging GitHub Issues

Start out by looking at issues that need triage, as identified by the ["Needs: Triage" label](https://github.com/facebook/react-native/issues?q=is%3Aissue+is%3Aopen+label%3A%22Needs%3A+Triage+%3Amag%3A%22).

* Is this a request for code-level help with an individual app? Would this be a better fit for Stack Overflow? If so, apply the "Resolution: For Stack Overflow" label.
* Does this issue make appropriate use of the template? If not, apply the "Needs: Template" label.
* Does this issue mention the React Native version that was used? If not, apply the "Needs: Environment Info" label.
* Does this issue include a Snack, a code example, OR a list of steps to reproduce the issue? If not, apply the "Needs: Repro" label.

note

We sometimes get issues that are quite not appropriate for the GitHub issue tracker. Add the "Type: Invalid" label, and a bot will close the issue automatically.

Once you get to this point, you can transition to parsing the content of the issue itself. Does this issue include a **clear description** of the problem?

If not, *politely* ask the issue author to update their issue with the necessary information, and apply a "Needs: Author Feedback" label.

We aim to always be friendly and helpful and expect the same from every member of our community.

## Improving an Issue[‚Äã](#improving-an-issue "Direct link to Improving an Issue")

If the issue contains all the necessary information, take a moment to consider if the issue can still be improved in some way. Is the formatting alright? You may lightly edit the issue to improve readability as needed.

If the issue contains an unformatted block of code, surround it with three back ticks (\`\`\`) to convert it into a markdown code block.

Are there any labels you can add to help categorize it better? If the issue only affects Android apps, you may add a "Platform: Android" label. Perhaps the issue only manifests itself when developing on Windows, in which case you might add the "Platform: Windows" label.

We have a long list of [labels](https://github.com/facebook/react-native/issues/labels), please take a look and see if anything might apply!

## Handling Duplicates[‚Äã](#handling-duplicates "Direct link to Handling Duplicates")

As you work through these issues, you will start to get a better understanding of the type of problems that get reported. You may even start noticing the same issue gets reported.

In these cases, you can close the issue and add a comment that says "Duplicate of #issue". By following this convention, GitHub will automatically mark the issue as a duplicate.

## Assessing Impact[‚Äã](#assessing-impact "Direct link to Assessing Impact")

Next up, we need to determine how severe the issue is.

### Is this a potential **release blocker**?[‚Äã](#is-this-a-potential-release-blocker "Direct link to is-this-a-potential-release-blocker")

These issues should be addressed within the next week or two, as they may prevent release coordinators from cutting a clean release candidate.

Issues that might be labeled as such could be regressions that break one of our pre-commit tests. Avoid flagging an issue as a release blocker if it has been around for some time (if the issue is already present in one or more releases, it cannot be a RC blocker by definition).

### Does this cause the app to **crash**?[‚Äã](#does-this-cause-the-app-to-crash "Direct link to does-this-cause-the-app-to-crash")

These are issues that cause a React Native to crash unexpectedly. These may lead to a poor user experience if not caught early.

### Is this a **bug**?[‚Äã](#is-this-a-bug "Direct link to is-this-a-bug")

Describes something that is not working as expected. It'd be nice to get it fixed at some point, but it's not serious enough to block the release train. Even if the issue causes a crash, if there's a reasonable workaround available, it can be classified as a regular bug.

### Is this a **good first issue**?[‚Äã](#is-this-a-good-first-issue "Direct link to is-this-a-good-first-issue")

These are issues that do not require a deep understanding and familiarity with the repo. GitHub will surface these issues to folks interested in becoming contributors. Keep in mind that issues labeled this way may not end up getting fixed right away.


---

# Accessibility

Both Android and iOS provide APIs for integrating apps with assistive technologies like the bundled screen readers VoiceOver (iOS) and TalkBack (Android). React Native has complementary APIs that let your app accommodate all users.

info

Android and iOS differ slightly in their approaches, and thus the React Native implementations may vary by platform.

## Accessibility properties[‚Äã](#accessibility-properties "Direct link to Accessibility properties")

### `accessible`[‚Äã](#accessible "Direct link to accessible")

When `true`, indicates that the view is discoverable by assistive technologies such as screen readers and hardware keyboards. Note that this does not necessarily mean that the view will be focused by VoiceOver or TalkBack. There are a number of reasons for this, such as VoiceOver disallowing nested accessibility elements, or TalkBack opting to focus some parent element instead.

By default, all touchable elements are accessible.

On Android, `accessible` will be translated into native [`focusable`](https://developer.android.com/reference/android/view/View#setFocusable\(boolean\)). On iOS, it translates into native [`isAccessibilityElement`](https://developer.apple.com/documentation/uikit/uiaccessibilityelement/isaccessibilityelement?language=objc).

tsx

```
<View>
  <View accessible={true} />
  <View />
</View>
```

In the above example, accessibility focus is only available on the first child view with the `accessible` property, and not for the parent or sibling without `accessible`.

### `accessibilityLabel`[‚Äã](#accessibilitylabel "Direct link to accessibilitylabel")

When a view is marked as accessible, it is a good practice to set an `accessibilityLabel` on the view, so that people who use VoiceOver or TalkBack know what element they have selected. A screen reader will verbalize this string when the associated element is selected.

To use, set the `accessibilityLabel` property to a custom string on your View, Text, or Touchable:

tsx

```
<TouchableOpacity
  accessible={true}
  accessibilityLabel="Tap me!"
  onPress={onPress}>
  <View style={styles.button}>
    <Text style={styles.buttonText}>Press me!</Text>
  </View>
</TouchableOpacity>
```

In the above example, the `accessibilityLabel` on the TouchableOpacity element would default to "Press me!". The label is constructed by concatenating all Text node children separated by spaces.

### `accessibilityLabelledBy`Android[‚Äã](#accessibilitylabelledby-android "Direct link to accessibilitylabelledby-android")

A reference to another element [nativeID](/docs/view.md#nativeid) used to build complex forms. The value of `accessibilityLabelledBy` should match the `nativeID` of the related element:

tsx

```
<View>
  <Text nativeID="formLabel">Label for Input Field</Text>
  <TextInput
    accessibilityLabel="input"
    accessibilityLabelledBy="formLabel"
  />
</View>
```

In the above example, the screen reader announces `Input, Edit Box for Label for Input Field` when focusing on the TextInput.

### `accessibilityHint`[‚Äã](#accessibilityhint "Direct link to accessibilityhint")

An accessibility hint can be used to provide additional context to the user on the result of the action when it is not clear from the accessibility label alone.

Provide the `accessibilityHint` property a custom string on your View, Text, or Touchable:

tsx

```
<TouchableOpacity
  accessible={true}
  accessibilityLabel="Go back"
  accessibilityHint="Navigates to the previous screen"
  onPress={onPress}>
  <View style={styles.button}>
    <Text style={styles.buttonText}>Back</Text>
  </View>
</TouchableOpacity>
```

iOS

In the above example, VoiceOver will read the hint after the label, if the user has hints enabled in the device's VoiceOver settings. Read more about guidelines for `accessibilityHint` in the [iOS Developer Docs](https://developer.apple.com/documentation/objectivec/nsobject/1615093-accessibilityhint)

Android

In the above example, TalkBack will read the hint after the label. At this time, hints cannot be turned off on Android.

### `accessibilityLanguage`iOS[‚Äã](#accessibilitylanguage-ios "Direct link to accessibilitylanguage-ios")

By using the `accessibilityLanguage` property, the screen reader will understand which language to use while reading the element's **label**, **value**, and **hint**. The provided string value must follow the [BCP 47 specification](https://www.rfc-editor.org/info/bcp47).

tsx

```
<View
  accessible={true}
  accessibilityLabel="Pizza"
  accessibilityLanguage="it-IT">
  <Text>üçï</Text>
</View>
```

### `accessibilityIgnoresInvertColors`iOS[‚Äã](#accessibilityignoresinvertcolors-ios "Direct link to accessibilityignoresinvertcolors-ios")

Inverting screen colors is an accessibility feature available in iOS and iPadOS for people with color blindness, low vision, or vision impairment. If there's a view you don't want to invert when this setting is on, possibly a photo, set this property to `true`.

### `accessibilityLiveRegion`Android[‚Äã](#accessibilityliveregion-android "Direct link to accessibilityliveregion-android")

When components dynamically change, we want TalkBack to alert the end user. This is made possible by the `accessibilityLiveRegion` property. It can be set to `none`, `polite`, and `assertive`:

* **none** Accessibility services should not announce changes to this view.
* **polite** Accessibility services should announce changes to this view.
* **assertive** Accessibility services should interrupt ongoing speech to immediately announce changes to this view.

tsx

```
<TouchableWithoutFeedback onPress={addOne}>
  <View style={styles.embedded}>
    <Text>Click me</Text>
  </View>
</TouchableWithoutFeedback>
<Text accessibilityLiveRegion="polite">
  Clicked {count} times
</Text>
```

In the above example method `addOne` changes the state variable `count`. When the TouchableWithoutFeedback is triggered, TalkBack reads the text in the Text view because of its `accessibilityLiveRegion="polite"` property.

### `accessibilityRole`[‚Äã](#accessibilityrole "Direct link to accessibilityrole")

`accessibilityRole` communicates the purpose of a component to the user of assistive technology.

`accessibilityRole` can be one of the following:

* **adjustable** Used when an element can be "adjusted" (e.g. a slider).
* **alert** Used when an element contains important text to be presented to the user.
* **button** Used when the element should be treated as a button.
* **checkbox** Used when an element represents a checkbox that can be checked, unchecked, or have a mixed checked state.
* **combobox** Used when an element represents a combo box, which allows the user to select among several choices.
* **header** Used when an element acts as a header for a content section (e.g. the title of a navigation bar).
* **image** Used when the element should be treated as an image. Can be combined with a button or link.
* **imagebutton** Used when the element should be treated as a button and is also an image.
* **keyboardkey** Used when the element acts as a keyboard key.
* **link** Used when the element should be treated as a link.
* **menu** Used when the component is a menu of choices.
* **menubar** Used when a component is a container of multiple menus.
* **menuitem** Used to represent an item within a menu.
* **none** Used when the element has no role.
* **progressbar** Used to represent a component that indicates the progress of a task.
* **radio** Used to represent a radio button.
* **radiogroup** Used to represent a group of radio buttons.
* **scrollbar** Used to represent a scroll bar.
* **search** Used when a text field element should also be treated as a search field.
* **spinbutton** Used to represent a button that opens a list of choices.
* **summary** Used when an element can be used to provide a quick summary of current conditions in the app when the app first launches.
* **switch** Used to represent a switch that can be turned on and off.
* **tab** Used to represent a tab.
* **tablist** Used to represent a list of tabs.
* **text** Used when the element should be treated as static text that cannot change.
* **timer** Used to represent a timer.
* **togglebutton** Used to represent a toggle button. Should be used with accessibilityState checked to indicate if the button is toggled on or off.
* **toolbar** Used to represent a toolbar (a container of action buttons or components).
* **grid** Used with ScrollView, VirtualizedList, FlatList, or SectionList to represent a grid. Adds the in/out of grid announcements to Android's GridView.

### `accessibilityShowsLargeContentViewer`iOS[‚Äã](#accessibilityshowslargecontentviewer-ios "Direct link to accessibilityshowslargecontentviewer-ios")

A boolean value that determines whether the large content viewer is shown when the user performs a long press on the element.

Available in iOS 13.0 and later.

### `accessibilityLargeContentTitle`iOS[‚Äã](#accessibilitylargecontenttitle-ios "Direct link to accessibilitylargecontenttitle-ios")

A string that will be used as the title of the large content viewer when it is shown.

Requires `accessibilityShowsLargeContentViewer` to be set to `true`.

tsx

```
<View
  accessibilityShowsLargeContentViewer={true}
  accessibilityLargeContentTitle="Home Tab">
  <Text>Home</Text>
</View>
```

### `accessibilityState`[‚Äã](#accessibilitystate "Direct link to accessibilitystate")

Describes the current state of a component to the assistive technology user.

`accessibilityState` is an object. It contains the following fields:

| Name     | Description                                                                                                                           | Type               | Required |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------- | ------------------ | -------- |
| disabled | Indicates whether the element is disabled or not.                                                                                     | boolean            | No       |
| selected | Indicates whether a selectable element is currently selected or not.                                                                  | boolean            | No       |
| checked  | Indicates the state of a checkable element. This field can either take a boolean or the "mixed" string to represent mixed checkboxes. | boolean or 'mixed' | No       |
| busy     | Indicates whether an element is currently busy or not.                                                                                | boolean            | No       |
| expanded | Indicates whether an expandable element is currently expanded or collapsed.                                                           | boolean            | No       |

To use, set the `accessibilityState` to an object with a specific definition.

### `accessibilityValue`[‚Äã](#accessibilityvalue "Direct link to accessibilityvalue")

Represents the current value of a component. It can be a textual description of a component's value, or for range-based components, such as sliders and progress bars, it contains range information (minimum, current, and maximum).

`accessibilityValue` is an object. It contains the following fields:

| Name | Description                                                                                    | Type    | Required                  |
| ---- | ---------------------------------------------------------------------------------------------- | ------- | ------------------------- |
| min  | The minimum value of this component's range.                                                   | integer | Required if `now` is set. |
| max  | The maximum value of this component's range.                                                   | integer | Required if `now` is set. |
| now  | The current value of this component's range.                                                   | integer | No                        |
| text | A textual description of this component's value. Will override `min`, `now`, and `max` if set. | string  | No                        |

### `accessibilityViewIsModal`iOS[‚Äã](#accessibilityviewismodal-ios "Direct link to accessibilityviewismodal-ios")

A boolean value that indicates whether VoiceOver should ignore the elements within views that are siblings of the receiver.

For example, in a window that contains sibling views `A` and `B`, setting `accessibilityViewIsModal` to `true` on view `B` causes VoiceOver to ignore the elements in view `A`. On the other hand, if view `B` contains a child view `C` and you set `accessibilityViewIsModal` to `true` on view `C`, VoiceOver does not ignore the elements in view `A`.

### `accessibilityElementsHidden`iOS[‚Äã](#accessibilityelementshidden-ios "Direct link to accessibilityelementshidden-ios")

A boolean value indicating whether the given accessibility element, and any accessibility elements it contains, are hidden.

For example, in a window that contains sibling views `A` and `B`, setting `accessibilityElementsHidden` to `true` on view `B` causes VoiceOver to ignore the `B` view and any elements it contains. This is similar to the Android property `importantForAccessibility="no-hide-descendants"`.

### `aria-valuemax`[‚Äã](#aria-valuemax "Direct link to aria-valuemax")

Represents the maximum value for range-based components, such as sliders and progress bars.

### `aria-valuemin`[‚Äã](#aria-valuemin "Direct link to aria-valuemin")

Represents the minimum value for range-based components, such as sliders and progress bars.

### `aria-valuenow`[‚Äã](#aria-valuenow "Direct link to aria-valuenow")

Represents the current value for range-based components, such as sliders and progress bars.

### `aria-valuetext`[‚Äã](#aria-valuetext "Direct link to aria-valuetext")

Represents the textual description of the component.

### `aria-busy`[‚Äã](#aria-busy "Direct link to aria-busy")

Indicates an element is being modified and that assistive technologies may want to wait until the changes are complete before informing the user about the update.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

### `aria-checked`[‚Äã](#aria-checked "Direct link to aria-checked")

Indicates the state of a checkable element. This field can either take a boolean or the "mixed" string to represent mixed checkboxes.

| Type             | Default |
| ---------------- | ------- |
| boolean, 'mixed' | false   |

### `aria-disabled`[‚Äã](#aria-disabled "Direct link to aria-disabled")

Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

### `aria-expanded`[‚Äã](#aria-expanded "Direct link to aria-expanded")

Indicates whether an expandable element is currently expanded or collapsed.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

### `aria-hidden`[‚Äã](#aria-hidden "Direct link to aria-hidden")

Indicates whether the element is hidden from assistive technologies.

For example, in a window that contains sibling views `A` and `B`, setting `aria-hidden` to `true` on view `B` causes VoiceOver to ignore the `B` element and its children.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

### `aria-label`[‚Äã](#aria-label "Direct link to aria-label")

Defines a string value that can be used to name an element.

| Type   |
| ------ |
| string |

### `aria-labelledby`Android[‚Äã](#aria-labelledby-android "Direct link to aria-labelledby-android")

Identifies the element that labels the element it is applied to. The value of `aria-labelledby` should match the [`nativeID`](/docs/view.md#nativeid) of the related element:

tsx

```
<View>
  <Text nativeID="formLabel">Label for Input Field</Text>
  <TextInput aria-label="input" aria-labelledby="formLabel" />
</View>
```

| Type   |
| ------ |
| string |

### `aria-live`Android[‚Äã](#aria-live-android "Direct link to aria-live-android")

Indicates that an element will be updated and describes the types of updates the user agents, assistive technologies, and user can expect from the live region.

* **off** Accessibility services should not announce changes to this view.
* **polite** Accessibility services should announce changes to this view.
* **assertive** Accessibility services should interrupt ongoing speech to immediately announce changes to this view.

| Type                                     | Default |
| ---------------------------------------- | ------- |
| enum(`'assertive'`, `'off'`, `'polite'`) | `'off'` |

***

### `aria-modal`iOS[‚Äã](#aria-modal-ios "Direct link to aria-modal-ios")

Boolean value indicating whether VoiceOver should ignore the elements within views that are siblings of the receiver.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

### `aria-selected`[‚Äã](#aria-selected "Direct link to aria-selected")

Indicates whether a selectable element is currently selected or not.

| Type    |
| ------- |
| boolean |

### `experimental_accessibilityOrder`[‚Äã](#experimental_accessibilityorder "Direct link to experimental_accessibilityorder")

Experimental üß™

**This API is experimental.** Experimental APIs may contain bugs and are likely to change in a future version of React Native. Don't use them in production.

note

For the sake of brevity, layout is excluded in the following examples even though it dictates the default focus order. Assume the document order matches the layout order.

`experimental_accessibilityOrder` lets you define the order in which assistive technologies focus descendant components. It is an array of [`nativeIDs`](/docs/view.md#nativeid) that are set on the components whose order you are controlling. For example:

```
<View experimental_accessibilityOrder={['B', 'C', 'A']}>
  <View accessible={true} nativeID="A"/>
  <View accessible={true} nativeID="B"/>
  <View accessible={true} nativeID="C"/>
</View>
```

Assistive technologies will focus the `View` with `nativeID` of `B`, then `C`, then `A`.

`experimental_accessibilityOrder` will not ‚Äúturn on‚Äù accessibility for the components it references, that still needs to be done. So if we remove `accessible={true}` on `C` above like so

```
<View experimental_accessibilityOrder={['B', 'C', 'A']}>
  <View accessible={true} nativeID="A"/>
  <View accessible={true} nativeID="B"/>
  <View nativeID="C"/>
</View>
```

then the new order will be `B` then `A`, even though `C` is still in `experimental_accessibilityOrder`.

`experimental_accessibilityOrder` will ‚Äúturn off‚Äù accessibility of components it doesn‚Äôt reference, however.

```
<View experimental_accessibilityOrder={['B', 'C', 'A']}>
  <View accessible={true} nativeID="A"/>
  <View accessible={true} nativeID="B"/>
  <View accessible={true} nativeID="C"/>
  <View accessible={true} nativeID="D"/>
</View>
```

The order of the above example would be `B`, `C`, `A`. `D` will never get focused. In this sense `experimental_accessibilityOrder` is *exhaustive*.

There are still valid reasons to include an non-accessible component in `experimental_accessibilityOrder`. Consider

```
<View experimental_accessibilityOrder={['B', 'C', 'A']}>
  <View accessible={true} nativeID="A"/>
  <View accessible={true} nativeID="B"/>
  <View nativeID="C">
    <View accessible={true} nativeID="D"/>
    <View accessible={true} nativeID="E"/>
    <View accessible={true} nativeID="F"/>
  </View>
</View>
```

The focus order will be `B`, `D`, `E`, `F`, `A`. Even though `D`, `E`, and `F` are not directly referenced in `experimental_accessibilityOrder`, `C` is directly referenced. In this instance `C` in an *accessibility container* - it contains accessible elements, but is not accessible itself. If an accessibility container is referenced in `experimental_accessibilityOrder` then the default order of the elements it contains is applied. In this sense `experimental_accessibilityOrder` is *nestable*.

`experimental_accessibilityOrder` can also reference another component with `experimental_accessibilityOrder`

```
<View experimental_accessibilityOrder={['B', 'C', 'A']}>
  <View accessible={true} nativeID="A"/>
  <View accessible={true} nativeID="B"/>
  <View nativeID="C" experimental_accessibilityOrder={['F', 'E', 'D']}>
    <View accessible={true} nativeID="D"/>
    <View accessible={true} nativeID="E"/>
    <View accessible={true} nativeID="F"/>
  </View>
</View>
```

The focus order will be `B`, `F`, `E`, `D`, `A`.

A component cannot be both an accessibility container and an accessibility element (`accessible={true}`). So if we have

```
<View experimental_accessibilityOrder={['B', 'C', 'A']}>
  <View accessible={true} nativeID="A"/>
  <View accessible={true} nativeID="B"/>
  <View accessible={true} nativeID="C" experimental_accessibilityOrder={['F', 'E', 'D']}>
    <View accessible={true} nativeID="D"/>
    <View accessible={true} nativeID="E"/>
    <View accessible={true} nativeID="F"/>
  </View>
</View>
```

The focus order would be `B`, `C`, `A`. `D`, `E`, and `F` are no longer in a container, so the exhaustive nature of `experimental_accessibilityOrder` means they will be excluded.

### `importantForAccessibility`Android[‚Äã](#importantforaccessibility-android "Direct link to importantforaccessibility-android")

In the case of two overlapping UI components with the same parent, default accessibility focus can have unpredictable behavior. The `importantForAccessibility` property will resolve this by controlling if a view fires accessibility events and if it is reported to accessibility services. It can be set to `auto`, `yes`, `no` and `no-hide-descendants` (the last value will force accessibility services to ignore the component and all of its children).

tsx

```
<View style={styles.container}>
  <View
    style={[styles.layout, {backgroundColor: 'green'}]}
    importantForAccessibility="yes">
    <Text>First layout</Text>
  </View>
  <View
    style={[styles.layout, {backgroundColor: 'yellow'}]}
    importantForAccessibility="no-hide-descendants">
    <Text>Second layout</Text>
  </View>
</View>
```

In the above example, the `yellow` layout and its descendants are completely invisible to TalkBack and all other accessibility services. So we can use overlapping views with the same parent without confusing TalkBack.

### `onAccessibilityEscape`iOS[‚Äã](#onaccessibilityescape-ios "Direct link to onaccessibilityescape-ios")

Assign this property to a custom function which will be called when someone performs the "escape" gesture, which is a two finger Z shaped gesture. An escape function should move back hierarchically in the user interface. This can mean moving up or back in a navigation hierarchy or dismissing a modal user interface. If the selected element does not have an `onAccessibilityEscape` function, the system will attempt to traverse up the view hierarchy until it finds a view that does or bonk to indicate it was unable to find one.

### `onAccessibilityTap`iOS[‚Äã](#onaccessibilitytap-ios "Direct link to onaccessibilitytap-ios")

Use this property to assign a custom function to be called when someone activates an accessible element by double tapping on it while it's selected.

### `onMagicTap`iOS[‚Äã](#onmagictap-ios "Direct link to onmagictap-ios")

Assign this property to a custom function which will be called when someone performs the "magic tap" gesture, which is a double-tap with two fingers. A magic tap function should perform the most relevant action a user could take on a component. In the Phone app on iPhone, a magic tap answers a phone call or ends the current one. If the selected element does not have an `onMagicTap` function, the system will traverse up the view hierarchy until it finds a view that does.

### `role`[‚Äã](#role "Direct link to role")

`role` communicates the purpose of a component and has precedence over the [`accessibilityRole`](/docs/accessibility.md#accessibilityrole) prop.

`role` can be one of the following:

* **alert** Used when an element contains important text to be presented to the user.
* **button** Used when the element should be treated as a button.
* **checkbox** Used when an element represents a checkbox that can be checked, unchecked, or have a mixed checked state.
* **combobox** Used when an element represents a combo box, which allows the user to select among several choices.
* **grid** Used with ScrollView, VirtualizedList, FlatList, or SectionList to represent a grid. Adds the in/out of grid announcements to the android GridView.
* **heading** Used when an element acts as a header for a content section (e.g. the title of a navigation bar).
* **img** Used when the element should be treated as an image. Can be combined with a button or link, for example.
* **link** Used when the element should be treated as a link.
* **list** Used to identify a list of items.
* **listitem** Used to itentify an item in a list.
* **menu** Used when the component is a menu of choices.
* **menubar** Used when a component is a container of multiple menus.
* **menuitem** Used to represent an item within a menu.
* **none** Used when the element has no role.
* **presentation** Used when the element has no role.
* **progressbar** Used to represent a component that indicates the progress of a task.
* **radio** Used to represent a radio button.
* **radiogroup** Used to represent a group of radio buttons.
* **scrollbar** Used to represent a scroll bar.
* **searchbox** Used when the text field element should also be treated as a search field.
* **slider** Used when an element can be "adjusted" (e.g. a slider).
* **spinbutton** Used to represent a button that opens a list of choices.
* **summary** Used when an element can be used to provide a quick summary of current conditions in the app when the app first launches.
* **switch** Used to represent a switch that can be turned on and off.
* **tab** Used to represent a tab.
* **tablist** Used to represent a list of tabs.
* **timer** Used to represent a timer.
* **toolbar** Used to represent a toolbar (a container of action buttons or components).

## Accessibility Actions[‚Äã](#accessibility-actions "Direct link to Accessibility Actions")

Accessibility actions allow assistive technology to programmatically invoke the action(s) of a component. To support accessibility actions, a component must do two things:

* Define the list of actions it supports via the `accessibilityActions` property.
* Implement an `onAccessibilityAction` function to handle action requests.

The `accessibilityActions` property should contain a list of action objects. Each action object should contain the following fields:

| Name  | Type   | Required |
| ----- | ------ | -------- |
| name  | string | Yes      |
| label | string | No       |

Actions either represent standard actions, such as clicking a button or adjusting a slider, or custom actions specific to a given component such as deleting an email message. The `name` field is required for both standard and custom actions, but `label` is optional for standard actions.

When adding support for standard actions, `name` must be one of the following:

* `'magicTap'` - iOS only - While VoiceOver focus is on or inside the component, the user double tapped with two fingers.
* `'escape'` - iOS only - While VoiceOver focus is on or inside the component, the user performed a two-finger scrub gesture (left, right, left).
* `'activate'` - Activate the component. This should perform the same action with, or without, assistive technology. Engaged when a screen reader user double taps the component.
* `'increment'` - Increment an adjustable component. On iOS, VoiceOver generates this action when the component has a role of `'adjustable'` and the user places focus on it and swipes upward. On Android, TalkBack generates this action when the user places accessibility focus on the component and presses the volume-up button.
* `'decrement'` - Decrement an adjustable component. On iOS, VoiceOver generates this action when the component has a role of `'adjustable'` and the user places focus on it and swipes downward. On Android, TalkBack generates this action when the user places accessibility focus on the component and presses the volume-down button.
* `'longpress'` - Android only - This action is generated when the user places accessibility focus on the component, then double-taps and holds one finger on the screen. This should perform the same action with, or without, assistive technology.
* `'expand'` - Android only - This action "expands" the component so that TalkBack will announce an "expanded" hint.
* `'collapse'` - Android only - This action "collapses" the component so that TalkBack will announce a "collapsed" hint.

The `label` field is optional for standard actions and is often unused by assistive technologies. For custom actions, it is a localized string containing a description of the action to be presented to the user.

To handle action requests, a component must implement an `onAccessibilityAction` function. The only argument to this function is an event containing the name of the action to perform. The below example from RNTester shows how to create a component that defines and handles several custom actions.

tsx

```
<View
  accessible={true}
  accessibilityActions={[
    {name: 'cut', label: 'cut'},
    {name: 'copy', label: 'copy'},
    {name: 'paste', label: 'paste'},
  ]}
  onAccessibilityAction={event => {
    switch (event.nativeEvent.actionName) {
      case 'cut':
        Alert.alert('Alert', 'cut action success');
        break;
      case 'copy':
        Alert.alert('Alert', 'copy action success');
        break;
      case 'paste':
        Alert.alert('Alert', 'paste action success');
        break;
    }
  }}
/>
```

## Checking if a Screen Reader is Enabled[‚Äã](#checking-if-a-screen-reader-is-enabled "Direct link to Checking if a Screen Reader is Enabled")

The `AccessibilityInfo` API allows you to determine whether or not a screen reader is currently active. See the [AccessibilityInfo documentation](/docs/accessibilityinfo.md) for details.

## Sending Accessibility EventsAndroid[‚Äã](#sending-accessibility-events-android "Direct link to sending-accessibility-events-android")

Sometimes it is useful to trigger an accessibility event on a UI component (i.e. when a custom view appears on a screen or set accessibility focus to a view). Native UIManager module exposes a method ‚ÄòsendAccessibilityEvent‚Äô for this purpose. It takes two arguments: a view tag and a type of event. The supported event types are `typeWindowStateChanged`, `typeViewFocused`, and `typeViewClicked`.

tsx

```
import {Platform, UIManager, findNodeHandle} from 'react-native';

if (Platform.OS === 'android') {
  UIManager.sendAccessibilityEvent(
    findNodeHandle(this),
    UIManager.AccessibilityEventTypes.typeViewFocused,
  );
}
```

## Testing TalkBack SupportAndroid[‚Äã](#testing-talkback-support-android "Direct link to testing-talkback-support-android")

To enable TalkBack, go to the Settings app on your Android device or emulator. Tap Accessibility, then TalkBack. Toggle the "Use service" switch to enable or disable it.

Android emulators don't have TalkBack installed by default. You can install TalkBack on your emulator via the Google Play Store. Make sure to choose an emulator with the Google Play store installed. These are available in Android Studio.

You can use the volume key shortcut to toggle TalkBack. To turn on the volume key shortcut, go to the Settings app, then Accessibility. At the top, turn on the volume key shortcut.

To use the volume key shortcut, press both volume keys for 3 seconds to start an accessibility tool.

Additionally, if you prefer, you can toggle TalkBack via the command line with:

shell

```
# disable
adb shell settings put secure enabled_accessibility_services com.android.talkback/com.google.android.marvin.talkback.TalkBackService

# enable
adb shell settings put secure enabled_accessibility_services com.google.android.marvin.talkback/com.google.android.marvin.talkback.TalkBackService
```

## Testing VoiceOver SupportiOS[‚Äã](#testing-voiceover-support-ios "Direct link to testing-voiceover-support-ios")

To enable VoiceOver on your iOS or iPadOS device, go to the Settings app, tap General, then Accessibility. There you will find many tools available for people to enable their devices to be more usable, including VoiceOver. To enable VoiceOver, tap on VoiceOver under "Vision" and toggle the switch that appears at the top.

At the very bottom of the Accessibility settings, there is an "Accessibility Shortcut". You can use this to toggle VoiceOver by triple-clicking the Home button.

VoiceOver isn't available via the simulator, but you can use Accessibility Inspector from Xcode to use the macOS VoiceOver through an application. Note it's always best to test with a device as macOS's VoiceOver may result in varied experiences.

## Additional Resources[‚Äã](#additional-resources "Direct link to Additional Resources")

* [Making React Native Apps Accessible](https://engineering.fb.com/ios/making-react-native-apps-accessible/)


---

# AccessibilityInfo

Sometimes it's useful to know whether or not the device has a screen reader that is currently active. The `AccessibilityInfo` API is designed for this purpose. You can use it to query the current state of the screen reader as well as to register to be notified when the state of the screen reader changes.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `addEventListener()`[‚Äã](#addeventlistener "Direct link to addeventlistener")

tsx

```
static addEventListener(
  eventName: AccessibilityChangeEventName | AccessibilityAnnouncementEventName,
  handler: (
    event: AccessibilityChangeEvent | AccessibilityAnnouncementFinishedEvent,
  ) => void,
): EmitterSubscription;
```

Add an event handler. Supported events:

| Event name                                 | Description                                                                                                                                                                                                                                                                             |
| ------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `accessibilityServiceChanged`<br />Android | Fires when some services such as TalkBack, other Android assistive technologies, and third-party accessibility services are enabled. The argument to the event handler is a boolean. The boolean is `true` when a some accessibility services is enabled and `false` otherwise.         |
| `announcementFinished`<br />iOS            | Fires when the screen reader has finished making an announcement. The argument to the event handler is a dictionary with these keys:- `announcement`: The string announced by the screen reader.<br />- `success`: A boolean indicating whether the announcement was successfully made. |
| `boldTextChanged`<br />iOS                 | Fires when the state of the bold text toggle changes. The argument to the event handler is a boolean. The boolean is `true` when bold text is enabled and `false` otherwise.                                                                                                            |
| `grayscaleChanged`<br />iOS                | Fires when the state of the gray scale toggle changes. The argument to the event handler is a boolean. The boolean is `true` when a gray scale is enabled and `false` otherwise.                                                                                                        |
| `invertColorsChanged`<br />iOS             | Fires when the state of the invert colors toggle changes. The argument to the event handler is a boolean. The boolean is `true` when invert colors is enabled and `false` otherwise.                                                                                                    |
| `reduceMotionChanged`                      | Fires when the state of the reduce motion toggle changes. The argument to the event handler is a boolean. The boolean is `true` when a reduce motion is enabled (or when "Transition Animation Scale" in "Developer options" is "Animation off") and `false` otherwise.                 |
| `reduceTransparencyChanged`<br />iOS       | Fires when the state of the reduce transparency toggle changes. The argument to the event handler is a boolean. The boolean is `true` when reduce transparency is enabled and `false` otherwise.                                                                                        |
| `screenReaderChanged`                      | Fires when the state of the screen reader changes. The argument to the event handler is a boolean. The boolean is `true` when a screen reader is enabled and `false` otherwise.                                                                                                         |

***

### `announceForAccessibility()`[‚Äã](#announceforaccessibility "Direct link to announceforaccessibility")

tsx

```
static announceForAccessibility(announcement: string);
```

Post a string to be announced by the screen reader.

***

### `announceForAccessibilityWithOptions()`[‚Äã](#announceforaccessibilitywithoptions "Direct link to announceforaccessibilitywithoptions")

tsx

```
static announceForAccessibilityWithOptions(
  announcement: string,
  options: {queue?: boolean},
);
```

Post a string to be announced by the screen reader with modification options. By default announcements will interrupt any existing speech, but on iOS they can be queued behind existing speech by setting `queue` to `true` in the options object.

**Parameters:**

| Name                 | Type   | Description                                                |
| -------------------- | ------ | ---------------------------------------------------------- |
| announcementRequired | string | The string to be announced                                 |
| optionsRequired      | object | `queue` - queue the announcement behind existing speechiOS |

***

### `getRecommendedTimeoutMillis()`Android[‚Äã](#getrecommendedtimeoutmillis-android "Direct link to getrecommendedtimeoutmillis-android")

tsx

```
static getRecommendedTimeoutMillis(originalTimeout: number): Promise<number>;
```

Gets the timeout in millisecond that the user needs. This value is set in "Time to take action (Accessibility timeout)" of "Accessibility" settings.

**Parameters:**

| Name                    | Type   | Description                                                                           |
| ----------------------- | ------ | ------------------------------------------------------------------------------------- |
| originalTimeoutRequired | number | The timeout to return if "Accessibility timeout" is not set. Specify in milliseconds. |

***

### `isAccessibilityServiceEnabled()`Android[‚Äã](#isaccessibilityserviceenabled-android "Direct link to isaccessibilityserviceenabled-android")

tsx

```
static isAccessibilityServiceEnabled(): Promise<boolean>;
```

Check whether any accessibility service is enabled. This includes TalkBack but also any third-party accessibility app that may be installed. To only check whether TalkBack is enabled, use [isScreenReaderEnabled](#isscreenreaderenabled). Returns a promise which resolves to a boolean. The result is `true` when some accessibility services is enabled and `false` otherwise.

note

Please use [`isScreenReaderEnabled`](#isscreenreaderenabled) if you only want to check the status of TalkBack.

***

### `isBoldTextEnabled()`iOS[‚Äã](#isboldtextenabled-ios "Direct link to isboldtextenabled-ios")

tsx

```
static isBoldTextEnabled(): Promise<boolean>:
```

Query whether a bold text is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when bold text is enabled and `false` otherwise.

***

### `isGrayscaleEnabled()`iOS[‚Äã](#isgrayscaleenabled-ios "Direct link to isgrayscaleenabled-ios")

tsx

```
static isGrayscaleEnabled(): Promise<boolean>;
```

Query whether grayscale is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when grayscale is enabled and `false` otherwise.

***

### `isInvertColorsEnabled()`iOS[‚Äã](#isinvertcolorsenabled-ios "Direct link to isinvertcolorsenabled-ios")

tsx

```
static isInvertColorsEnabled(): Promise<boolean>;
```

Query whether invert colors is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when invert colors is enabled and `false` otherwise.

***

### `isReduceMotionEnabled()`[‚Äã](#isreducemotionenabled "Direct link to isreducemotionenabled")

tsx

```
static isReduceMotionEnabled(): Promise<boolean>;
```

Query whether reduce motion is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when reduce motion is enabled and `false` otherwise.

***

### `isReduceTransparencyEnabled()`iOS[‚Äã](#isreducetransparencyenabled-ios "Direct link to isreducetransparencyenabled-ios")

tsx

```
static isReduceTransparencyEnabled(): Promise<boolean>;
```

Query whether reduce transparency is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when a reduce transparency is enabled and `false` otherwise.

***

### `isScreenReaderEnabled()`[‚Äã](#isscreenreaderenabled "Direct link to isscreenreaderenabled")

tsx

```
static isScreenReaderEnabled(): Promise<boolean>;
```

Query whether a screen reader is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when a screen reader is enabled and `false` otherwise.

***

### `prefersCrossFadeTransitions()`iOS[‚Äã](#preferscrossfadetransitions-ios "Direct link to preferscrossfadetransitions-ios")

tsx

```
static prefersCrossFadeTransitions(): Promise<boolean>;
```

Query whether reduce motion and prefer cross-fade transitions settings are currently enabled. Returns a promise which resolves to a boolean. The result is `true` when prefer cross-fade transitions is enabled and `false` otherwise.

***

### `setAccessibilityFocus()`[‚Äã](#setaccessibilityfocus "Direct link to setaccessibilityfocus")

Deprecated

Prefer using `sendAccessibilityEvent` with eventType `focus` instead.

tsx

```
static setAccessibilityFocus(reactTag: number);
```

Set accessibility focus to a React component.

On Android, this calls `UIManager.sendAccessibilityEvent` method with passed `reactTag` and `UIManager.AccessibilityEventTypes.typeViewFocused` arguments.

note

Make sure that any `View` you want to receive the accessibility focus has `accessible={true}`.

***

### `sendAccessibilityEvent()`[‚Äã](#sendaccessibilityevent "Direct link to sendaccessibilityevent")

tsx

```
static sendAccessibilityEvent(host: HostInstance, eventType: AccessibilityEventTypes);
```

Imperatively trigger an accessibility event on a React component, like changing the focused element for a screen reader.

note

Make sure that any `View` you want to receive the accessibility focus has `accessible={true}`.

| Name              | Type                    | Description                                                                                                            |
| ----------------- | ----------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| hostRequired      | HostInstance            | The component ref to send the event to.                                                                                |
| eventTypeRequired | AccessibilityEventTypes | One of `'click'` (Android only), `'focus'`, `'viewHoverEnter'` (Android only), or `'windowStateChange'` (Android only) |


---

# ActionSheetIOS

Displays native to iOS [Action Sheet](https://developer.apple.com/design/human-interface-guidelines/action-sheets) component.

## Example[‚Äã](#example "Direct link to Example")

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `showActionSheetWithOptions()`[‚Äã](#showactionsheetwithoptions "Direct link to showactionsheetwithoptions")

tsx

```
static showActionSheetWithOptions: (
  options: ActionSheetIOSOptions,
  callback: (buttonIndex: number) => void,
);
```

Display an iOS action sheet. The `options` object must contain one or more of:

* `options` (array of strings) - a list of button titles (required)
* `cancelButtonIndex` (int) - index of cancel button in `options`
* `cancelButtonTintColor` (string) - the [color](/docs/colors.md) used for the change the text color of the cancel button
* `destructiveButtonIndex` (int or array of ints) - indices of destructive buttons in `options`
* `title` (string) - a title to show above the action sheet
* `message` (string) - a message to show below the title
* `anchor` (number) - the node to which the action sheet should be anchored (used for iPad)
* `tintColor` (string) - the [color](/docs/colors.md) used for non-destructive button titles
* `disabledButtonIndices` (array of numbers) - a list of button indices which should be disabled
* `userInterfaceStyle` (string) - the interface style used for the action sheet, can be set to `light` or `dark`, otherwise the default system style will be used

The 'callback' function takes one parameter, the zero-based index of the selected item.

Minimal example:

tsx

```
ActionSheetIOS.showActionSheetWithOptions(
  {
    options: ['Cancel', 'Remove'],
    destructiveButtonIndex: 1,
    cancelButtonIndex: 0,
  },
  buttonIndex => {
    if (buttonIndex === 1) {
      /* destructive action */
    }
  },
);
```

***

### `dismissActionSheet()`[‚Äã](#dismissactionsheet "Direct link to dismissactionsheet")

tsx

```
static dismissActionSheet();
```

Dismisses the most upper iOS action sheet presented, if no action sheet is present a warning is displayed.

***

### `showShareActionSheetWithOptions()`[‚Äã](#showshareactionsheetwithoptions "Direct link to showshareactionsheetwithoptions")

tsx

```
static showShareActionSheetWithOptions: (
  options: ShareActionSheetIOSOptions,
  failureCallback: (error: Error) => void,
  successCallback: (success: boolean, method: string) => void,
);
```

Display the iOS share sheet. The `options` object should contain one or both of `message` and `url` and can additionally have a `subject` or `excludedActivityTypes`:

* `url` (string) - a URL to share
* `message` (string) - a message to share
* `subject` (string) - a subject for the message
* `excludedActivityTypes` (array) - the activities to exclude from the ActionSheet

note

If `url` points to a local file, or is a base64-encoded uri, the file it points to will be loaded and shared directly. In this way, you can share images, videos, PDF files, etc. If `url` points to a remote file or address it must conform to URL format as described in [RFC 2396](https://www.ietf.org/rfc/rfc2396.txt). For example, a web URL without a proper protocol (HTTP/HTTPS) will not be shared.

The 'failureCallback' function takes one parameter, an error object. The only property defined on this object is an optional `stack` property of type `string`.

The 'successCallback' function takes two parameters:

* a boolean value signifying success or failure
* a string that, in the case of success, indicates the method of sharing


---

# ActivityIndicator

Displays a circular loading indicator.

## Example[‚Äã](#example "Direct link to Example")

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [View Props](/docs/view.md#props)[‚Äã](#view-props "Direct link to view-props")

Inherits [View Props](/docs/view.md#props).

***

### `animating`[‚Äã](#animating "Direct link to animating")

Whether to show the indicator (`true`) or hide it (`false`).

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `color`[‚Äã](#color "Direct link to color")

The foreground color of the spinner.

| Type                     | Default                                                      |
| ------------------------ | ------------------------------------------------------------ |
| [color](/docs/colors.md) | `null` (system accent default color)Android***`'#999999'`iOS |

***

### `hidesWhenStopped`iOS[‚Äã](#hideswhenstopped-ios "Direct link to hideswhenstopped-ios")

Whether the indicator should hide when not animating.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `ref`[‚Äã](#ref "Direct link to ref")

A ref setter that will be assigned an [element node](/docs/element-nodes.md) when mounted.

***

### `size`[‚Äã](#size "Direct link to size")

Size of the indicator.

| Type                                       | Default   |
| ------------------------------------------ | --------- |
| enum(`'small'`, `'large'`)***numberAndroid | `'small'` |


---

# Alert

Launches an alert dialog with the specified title and message.

Optionally provide a list of buttons. Tapping any button will fire the respective onPress callback and dismiss the alert. By default, the only button will be an 'OK' button.

This is an API that works both on Android and iOS and can show static alerts. Alert that prompts the user to enter some information is available on iOS only.

## Example[‚Äã](#example "Direct link to Example")

## iOS[‚Äã](#ios "Direct link to iOS")

On iOS you can specify any number of buttons. Each button can optionally specify a style or be emphasized, available options are represented by the [AlertButtonStyle](#alertbuttonstyle-ios) enum and the `isPreferred` field on [AlertButton](/docs/alert.md#alertbutton).

## Android[‚Äã](#android "Direct link to Android")

On Android at most three buttons can be specified. Android has a concept of a neutral, negative and a positive button:

* If you specify one button, it will be the 'positive' one (such as 'OK')
* Two buttons mean 'negative', 'positive' (such as 'Cancel', 'OK')
* Three buttons mean 'neutral', 'negative', 'positive' (such as 'Later', 'Cancel', 'OK')

Alerts on Android can be dismissed by tapping outside of the alert box. It is disabled by default and can be enabled by providing an optional [AlertOptions](/docs/alert.md#alertoptions) parameter with the cancelable property set to `true` i.e.<br />`{cancelable: true}`.

The cancel event can be handled by providing an `onDismiss` callback property inside the `options` parameter.

### ExampleAndroid[‚Äã](#example-android "Direct link to example-android")

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `alert()`[‚Äã](#alert "Direct link to alert")

tsx

```
static alert (
  title: string,
  message?: string,
  buttons?: AlertButton[],
  options?: AlertOptions,
);
```

**Parameters:**

| Name          | Type                                         | Description                                                             |
| ------------- | -------------------------------------------- | ----------------------------------------------------------------------- |
| titleRequired | string                                       | The dialog's title. Passing `null` or empty string will hide the title. |
| message       | string                                       | An optional message that appears below the dialog's title.              |
| buttons       | [AlertButton](/docs/alert.md#alertbutton)\[] | An optional array containing buttons configuration.                     |
| options       | [AlertOptions](/docs/alert.md#alertoptions)  | An optional Alert configuration.                                        |

***

### `prompt()`iOS[‚Äã](#prompt-ios "Direct link to prompt-ios")

tsx

```
static prompt: (
  title: string,
  message?: string,
  callbackOrButtons?: ((text: string) => void) | AlertButton[],
  type?: AlertType,
  defaultValue?: string,
  keyboardType?: string,
);
```

Create and display a prompt to enter some text in form of Alert.

**Parameters:**

| Name              | Type                                                    | Description                                                                                                                                                                                          |
| ----------------- | ------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| titleRequired     | string                                                  | The dialog's title.                                                                                                                                                                                  |
| message           | string                                                  | An optional message that appears above the text input.                                                                                                                                               |
| callbackOrButtons | function***[AlertButton](/docs/alert.md#alertButton)\[] | If passed a function, it will be called with the prompt's value<br />`(text: string) => void`, when the user taps 'OK'.***If passed an array, buttons will be configured based on the array content. |
| type              | [AlertType](/docs/alert.md#alerttype-ios)               | This configures the text input.                                                                                                                                                                      |
| defaultValue      | string                                                  | The default text in text input.                                                                                                                                                                      |
| keyboardType      | string                                                  | The keyboard type of first text field (if exists). One of TextInput [keyboardTypes](/docs/textinput.md#keyboardtype).                                                                                |
| options           | [AlertOptions](/docs/alert.md#alertoptions)             | An optional Alert configuration.                                                                                                                                                                     |

***

## Type Definitions[‚Äã](#type-definitions "Direct link to Type Definitions")

### AlertButtonStyleiOS[‚Äã](#alertbuttonstyle-ios "Direct link to alertbuttonstyle-ios")

An iOS Alert button style.

| Type |
| ---- |
| enum |

**Constants:**

| Value           | Description               |
| --------------- | ------------------------- |
| `'default'`     | Default button style.     |
| `'cancel'`      | Cancel button style.      |
| `'destructive'` | Destructive button style. |

***

### AlertTypeiOS[‚Äã](#alerttype-ios "Direct link to alerttype-ios")

An iOS Alert type.

| Type |
| ---- |
| enum |

**Constants:**

| Value              | Description                  |
| ------------------ | ---------------------------- |
| `'default'`        | Default alert with no inputs |
| `'plain-text'`     | Plain text input alert       |
| `'secure-text'`    | Secure text input alert      |
| `'login-password'` | Login and password alert     |

***

### AlertButton[‚Äã](#alertbutton "Direct link to AlertButton")

An object describing the configuration of a button in the alert.

| Type             |
| ---------------- |
| array of objects |

**Objects properties:**

| Name           | Type                                                    | Description                                                                    |
| -------------- | ------------------------------------------------------- | ------------------------------------------------------------------------------ |
| text           | string                                                  | Button label.                                                                  |
| onPress        | function                                                | Callback function when button is pressed.                                      |
| styleiOS       | [AlertButtonStyle](/docs/alert.md#alertbuttonstyle-ios) | Button style, on Android this property will be ignored.                        |
| isPreferrediOS | boolean                                                 | Whether button should be emphasized, on Android this property will be ignored. |

***

### AlertOptions[‚Äã](#alertoptions "Direct link to AlertOptions")

| Type   |
| ------ |
| object |

**Properties:**

| Name                  | Type     | Description                                                                                                               |
| --------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------- |
| cancelableAndroid     | boolean  | Defines if alert can be dismissed by tapping outside of the alert box.                                                    |
| userInterfaceStyleiOS | string   | The interface style used for the alert, can be set to `light` or `dark`, otherwise the default system style will be used. |
| onDismissAndroid      | function | Callback function fired when alert has been dismissed.                                                                    |


---

# ‚ùå AlertIOS

Removed from React Native

Use [`Alert`](/docs/alert.md) instead.


---

# Animated

The `Animated` library is designed to make animations fluid, powerful, and painless to build and maintain. `Animated` focuses on declarative relationships between inputs and outputs, configurable transforms in between, and `start`/`stop` methods to control time-based animation execution.

The core workflow for creating an animation is to create an `Animated.Value`, hook it up to one or more style attributes of an animated component, and then drive updates via animations using `Animated.timing()`.

note

Don't modify the animated value directly. You can use the [`useRef` Hook](https://react.dev/reference/react/useRef) to return a mutable ref object. This ref object's `current` property is initialized as the given argument and persists throughout the component lifecycle.

## Example[‚Äã](#example "Direct link to Example")

The following example contains a `View` which will fade in and fade out based on the animated value `fadeAnim`

Refer to the [Animations](/docs/animations.md#animated-api) guide to see additional examples of `Animated` in action.

## Overview[‚Äã](#overview "Direct link to Overview")

There are two value types you can use with `Animated`:

* [`Animated.Value()`](/docs/animated.md#value) for single values
* [`Animated.ValueXY()`](/docs/animated.md#valuexy) for vectors

`Animated.Value` can bind to style properties or other props, and can be interpolated as well. A single `Animated.Value` can drive any number of properties.

### Configuring animations[‚Äã](#configuring-animations "Direct link to Configuring animations")

`Animated` provides three types of animation types. Each animation type provides a particular animation curve that controls how your values animate from their initial value to the final value:

* [`Animated.decay()`](/docs/animated.md#decay) starts with an initial velocity and gradually slows to a stop.
* [`Animated.spring()`](/docs/animated.md#spring) provides a basic spring physics model.
* [`Animated.timing()`](/docs/animated.md#timing) animates a value over time using [easing functions](/docs/easing.md).

In most cases, you will be using `timing()`. By default, it uses a symmetric easeInOut curve that conveys the gradual acceleration of an object to full speed and concludes by gradually decelerating to a stop.

### Working with animations[‚Äã](#working-with-animations "Direct link to Working with animations")

Animations are started by calling `start()` on your animation. `start()` takes a completion callback that will be called when the animation is done. If the animation finished running normally, the completion callback will be invoked with `{finished: true}`. If the animation is done because `stop()` was called on it before it could finish (e.g. because it was interrupted by a gesture or another animation), then it will receive `{finished: false}`.

tsx

```
Animated.timing({}).start(({finished}) => {
  /* completion callback */
});
```

### Using the native driver[‚Äã](#using-the-native-driver "Direct link to Using the native driver")

By using the native driver, we send everything about the animation to native before starting the animation, allowing native code to perform the animation on the UI thread without having to go through the bridge on every frame. Once the animation has started, the JS thread can be blocked without affecting the animation.

You can use the native driver by specifying `useNativeDriver: true` in your animation configuration. See the [Animations](/docs/animations.md#using-the-native-driver) guide to learn more.

### Animatable components[‚Äã](#animatable-components "Direct link to Animatable components")

Only animatable components can be animated. These unique components do the magic of binding the animated values to the properties, and do targeted native updates to avoid the cost of the React render and reconciliation process on every frame. They also handle cleanup on unmount so they are safe by default.

* [`createAnimatedComponent()`](/docs/animated.md#createanimatedcomponent) can be used to make a component animatable.

`Animated` exports the following animatable components using the above wrapper:

* `Animated.Image`
* `Animated.ScrollView`
* `Animated.Text`
* `Animated.View`
* `Animated.FlatList`
* `Animated.SectionList`

### Composing animations[‚Äã](#composing-animations "Direct link to Composing animations")

Animations can also be combined in complex ways using composition functions:

* [`Animated.delay()`](/docs/animated.md#delay) starts an animation after a given delay.
* [`Animated.parallel()`](/docs/animated.md#parallel) starts a number of animations at the same time.
* [`Animated.sequence()`](/docs/animated.md#sequence) starts the animations in order, waiting for each to complete before starting the next.
* [`Animated.stagger()`](/docs/animated.md#stagger) starts animations in order and in parallel, but with successive delays.

Animations can also be chained together by setting the `toValue` of one animation to be another `Animated.Value`. See [Tracking dynamic values](/docs/animations.md#tracking-dynamic-values) in the Animations guide.

By default, if one animation is stopped or interrupted, then all other animations in the group are also stopped.

### Combining animated values[‚Äã](#combining-animated-values "Direct link to Combining animated values")

You can combine two animated values via addition, subtraction, multiplication, division, or modulo to make a new animated value:

* [`Animated.add()`](/docs/animated.md#add)
* [`Animated.subtract()`](/docs/animated.md#subtract)
* [`Animated.divide()`](/docs/animated.md#divide)
* [`Animated.modulo()`](/docs/animated.md#modulo)
* [`Animated.multiply()`](/docs/animated.md#multiply)

### Interpolation[‚Äã](#interpolation "Direct link to Interpolation")

The `interpolate()` function allows input ranges to map to different output ranges. By default, it will extrapolate the curve beyond the ranges given, but you can also have it clamp the output value. It uses linear interpolation by default but also supports easing functions.

* [`interpolate()`](/docs/animatedvalue.md#interpolate)

Read more about interpolation in the [Animation](/docs/animations.md#interpolation) guide.

### Handling gestures and other events[‚Äã](#handling-gestures-and-other-events "Direct link to Handling gestures and other events")

Gestures, like panning or scrolling, and other events can map directly to animated values using `Animated.event()`. This is done with a structured map syntax so that values can be extracted from complex event objects. The first level is an array to allow mapping across multiple args, and that array contains nested objects.

* [`Animated.event()`](/docs/animated.md#event)

For example, when working with horizontal scrolling gestures, you would do the following in order to map `event.nativeEvent.contentOffset.x` to `scrollX` (an `Animated.Value`):

tsx

```
 onScroll={Animated.event(
   // scrollX = e.nativeEvent.contentOffset.x
   [{nativeEvent: {
        contentOffset: {
          x: scrollX
        }
      }
    }]
 )}
```

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

When the given value is a ValueXY instead of a Value, each config option may be a vector of the form `{x: ..., y: ...}` instead of a scalar.

### `decay()`[‚Äã](#decay "Direct link to decay")

tsx

```
static decay(value, config): CompositeAnimation;
```

Animates a value from an initial velocity to zero based on a decay coefficient.

Config is an object that may have the following options:

* `velocity`: Initial velocity. Required.
* `deceleration`: Rate of decay. Default 0.997.
* `isInteraction`: Whether or not this animation creates an "interaction handle" on the `InteractionManager`. Default true.
* `useNativeDriver`: Uses the native driver when true. Required.

***

### `timing()`[‚Äã](#timing "Direct link to timing")

tsx

```
static timing(value, config): CompositeAnimation;
```

Animates a value along a timed easing curve. The [`Easing`](/docs/easing.md) module has tons of predefined curves, or you can use your own function.

Config is an object that may have the following options:

* `duration`: Length of animation (milliseconds). Default 500.
* `easing`: Easing function to define curve. Default is `Easing.inOut(Easing.ease)`.
* `delay`: Start the animation after delay (milliseconds). Default 0.
* `isInteraction`: Whether or not this animation creates an "interaction handle" on the `InteractionManager`. Default true.
* `useNativeDriver`: Uses the native driver when true. Required.

***

### `spring()`[‚Äã](#spring "Direct link to spring")

tsx

```
static spring(value, config): CompositeAnimation;
```

Animates a value according to an analytical spring model based on [damped harmonic oscillation](https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator). Tracks velocity state to create fluid motions as the `toValue` updates, and can be chained together.

Config is an object that may have the following options.

Note that you can only define one of bounciness/speed, tension/friction, or stiffness/damping/mass, but not more than one:

The friction/tension or bounciness/speed options match the spring model in [`Facebook Pop`](https://github.com/facebook/pop), [Rebound](https://github.com/facebookarchive/rebound), and [Origami](https://origami.design/).

* `friction`: Controls "bounciness"/overshoot. Default 7.
* `tension`: Controls speed. Default 40.
* `speed`: Controls speed of the animation. Default 12.
* `bounciness`: Controls bounciness. Default 8.

Specifying stiffness/damping/mass as parameters makes `Animated.spring` use an analytical spring model based on the motion equations of a [damped harmonic oscillator](https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator). This behavior is slightly more precise and faithful to the physics behind spring dynamics, and closely mimics the implementation in iOS's CASpringAnimation.

* `stiffness`: The spring stiffness coefficient. Default 100.
* `damping`: Defines how the spring‚Äôs motion should be damped due to the forces of friction. Default 10.
* `mass`: The mass of the object attached to the end of the spring. Default 1.

Other configuration options are as follows:

* `velocity`: The initial velocity of the object attached to the spring. Default 0 (object is at rest).
* `overshootClamping`: Boolean indicating whether the spring should be clamped and not bounce. Default false.
* `restDisplacementThreshold`: The threshold of displacement from rest below which the spring should be considered at rest. Default 0.001.
* `restSpeedThreshold`: The speed at which the spring should be considered at rest in pixels per second. Default 0.001.
* `delay`: Start the animation after delay (milliseconds). Default 0.
* `isInteraction`: Whether or not this animation creates an "interaction handle" on the `InteractionManager`. Default true.
* `useNativeDriver`: Uses the native driver when true. Required.

***

### `add()`[‚Äã](#add "Direct link to add")

tsx

```
static add(a: Animated, b: Animated): AnimatedAddition;
```

Creates a new Animated value composed from two Animated values added together.

***

### `subtract()`[‚Äã](#subtract "Direct link to subtract")

tsx

```
static subtract(a: Animated, b: Animated): AnimatedSubtraction;
```

Creates a new Animated value composed by subtracting the second Animated value from the first Animated value.

***

### `divide()`[‚Äã](#divide "Direct link to divide")

tsx

```
static divide(a: Animated, b: Animated): AnimatedDivision;
```

Creates a new Animated value composed by dividing the first Animated value by the second Animated value.

***

### `multiply()`[‚Äã](#multiply "Direct link to multiply")

tsx

```
static multiply(a: Animated, b: Animated): AnimatedMultiplication;
```

Creates a new Animated value composed from two Animated values multiplied together.

***

### `modulo()`[‚Äã](#modulo "Direct link to modulo")

tsx

```
static modulo(a: Animated, modulus: number): AnimatedModulo;
```

Creates a new Animated value that is the (non-negative) modulo of the provided Animated value

***

### `diffClamp()`[‚Äã](#diffclamp "Direct link to diffclamp")

tsx

```
static diffClamp(a: Animated, min: number, max: number): AnimatedDiffClamp;
```

Create a new Animated value that is limited between 2 values. It uses the difference between the last value so even if the value is far from the bounds it will start changing when the value starts getting closer again. (`value = clamp(value + diff, min, max)`).

This is useful with scroll events, for example, to show the navbar when scrolling up and to hide it when scrolling down.

***

### `delay()`[‚Äã](#delay "Direct link to delay")

tsx

```
static delay(time: number): CompositeAnimation;
```

Starts an animation after the given delay.

***

### `sequence()`[‚Äã](#sequence "Direct link to sequence")

tsx

```
static sequence(animations: CompositeAnimation[]): CompositeAnimation;
```

Starts an array of animations in order, waiting for each to complete before starting the next. If the current running animation is stopped, no following animations will be started.

***

### `parallel()`[‚Äã](#parallel "Direct link to parallel")

tsx

```
static parallel(
  animations: CompositeAnimation[],
  config?: ParallelConfig
): CompositeAnimation;
```

Starts an array of animations all at the same time. By default, if one of the animations is stopped, they will all be stopped. You can override this with the `stopTogether` flag.

***

### `stagger()`[‚Äã](#stagger "Direct link to stagger")

tsx

```
static stagger(
  time: number,
  animations: CompositeAnimation[]
): CompositeAnimation;
```

Array of animations may run in parallel (overlap), but are started in sequence with successive delays. Nice for doing trailing effects.

***

### `loop()`[‚Äã](#loop "Direct link to loop")

tsx

```
static loop(
  animation: CompositeAnimation[],
  config?: LoopAnimationConfig
): CompositeAnimation;
```

Loops a given animation continuously, so that each time it reaches the end, it resets and begins again from the start. Will loop without blocking the JS thread if the child animation is set to `useNativeDriver: true`. In addition, loops can prevent `VirtualizedList`-based components from rendering more rows while the animation is running. You can pass `isInteraction: false` in the child animation config to fix this.

Config is an object that may have the following options:

* `iterations`: Number of times the animation should loop. Default `-1` (infinite).

***

### `event()`[‚Äã](#event "Direct link to event")

tsx

```
static event(
  argMapping: Mapping[],
  config?: EventConfig
): (...args: any[]) => void;
```

Takes an array of mappings and extracts values from each arg accordingly, then calls `setValue` on the mapped outputs. e.g.

tsx

```
onScroll={Animated.event(
  [{nativeEvent: {contentOffset: {x: this._scrollX}}}],
  {listener: (event: ScrollEvent) => console.log(event)}, // Optional async listener
)}
 ...
onPanResponderMove: Animated.event(
  [
    null, // raw event arg ignored
    {dx: this._panX},
  ], // gestureState arg
  {
    listener: (
      event: GestureResponderEvent,
      gestureState: PanResponderGestureState
    ) => console.log(event, gestureState),
  } // Optional async listener
);
```

Config is an object that may have the following options:

* `listener`: Optional async listener.
* `useNativeDriver`: Uses the native driver when true. Required.

***

### `forkEvent()`[‚Äã](#forkevent "Direct link to forkevent")

jsx

```
static forkEvent(event: AnimatedEvent, listener: Function): AnimatedEvent;
```

Advanced imperative API for snooping on animated events that are passed in through props. It permits to add a new javascript listener to an existing `AnimatedEvent`. If `animatedEvent` is a javascript listener, it will merge the 2 listeners into a single one, and if `animatedEvent` is null/undefined, it will assign the javascript listener directly. Use values directly where possible.

***

### `unforkEvent()`[‚Äã](#unforkevent "Direct link to unforkevent")

jsx

```
static unforkEvent(event: AnimatedEvent, listener: Function);
```

***

### `start()`[‚Äã](#start "Direct link to start")

tsx

```
static start(callback?: (result: {finished: boolean}) => void);
```

Animations are started by calling start() on your animation. start() takes a completion callback that will be called when the animation is done or when the animation is done because stop() was called on it before it could finish.

**Parameters:**

| Name     | Type                                    | Required | Description                                                                                                                                                     |
| -------- | --------------------------------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| callback | `(result: {finished: boolean}) => void` | No       | Function that will be called after the animation finished running normally or when the animation is done because stop() was called on it before it could finish |

Start example with callback:

tsx

```
Animated.timing({}).start(({finished}) => {
  /* completion callback */
});
```

***

### `stop()`[‚Äã](#stop "Direct link to stop")

tsx

```
static stop();
```

Stops any running animation.

***

### `reset()`[‚Äã](#reset "Direct link to reset")

tsx

```
static reset();
```

Stops any running animation and resets the value to its original.

## Properties[‚Äã](#properties "Direct link to Properties")

### `Value`[‚Äã](#value "Direct link to value")

Standard value class for driving animations. Typically initialized with `useAnimatedValue(0);` or `new Animated.Value(0);` in class components.

You can read more about `Animated.Value` API on the separate [page](/docs/animatedvalue.md).

***

### `ValueXY`[‚Äã](#valuexy "Direct link to valuexy")

2D value class for driving 2D animations, such as pan gestures.

You can read more about `Animated.ValueXY` API on the separate [page](/docs/animatedvaluexy.md).

***

### `Interpolation`[‚Äã](#interpolation-1 "Direct link to interpolation-1")

Exported to use the Interpolation type in flow.

***

### `Node`[‚Äã](#node "Direct link to node")

Exported for ease of type checking. All animated values derive from this class.

***

### `createAnimatedComponent`[‚Äã](#createanimatedcomponent "Direct link to createanimatedcomponent")

Make any React component Animatable. Used to create `Animated.View`, etc.

***

### `attachNativeEvent`[‚Äã](#attachnativeevent "Direct link to attachnativeevent")

Imperative API to attach an animated value to an event on a view. Prefer using `Animated.event` with `useNativeDriver: true` if possible.


---

# Animated.Value

Standard value for driving animations. One `Animated.Value` can drive multiple properties in a synchronized fashion, but can only be driven by one mechanism at a time. Using a new mechanism (e.g. starting a new animation, or calling `setValue`) will stop any previous ones.

Typically initialized with `useAnimatedValue(0);` or `new Animated.Value(0);` in class components.

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `setValue()`[‚Äã](#setvalue "Direct link to setvalue")

tsx

```
setValue(value: number);
```

Directly set the value. This will stop any animations running on the value and update all the bound properties.

**Parameters:**

| Name  | Type   | Required | Description |
| ----- | ------ | -------- | ----------- |
| value | number | Yes      | Value       |

***

### `setOffset()`[‚Äã](#setoffset "Direct link to setoffset")

tsx

```
setOffset(offset: number);
```

Sets an offset that is applied on top of whatever value is set, whether via `setValue`, an animation, or `Animated.event`. Useful for compensating things like the start of a pan gesture.

**Parameters:**

| Name   | Type   | Required | Description  |
| ------ | ------ | -------- | ------------ |
| offset | number | Yes      | Offset value |

***

### `flattenOffset()`[‚Äã](#flattenoffset "Direct link to flattenoffset")

tsx

```
flattenOffset();
```

Merges the offset value into the base value and resets the offset to zero. The final output of the value is unchanged.

***

### `extractOffset()`[‚Äã](#extractoffset "Direct link to extractoffset")

tsx

```
extractOffset();
```

Sets the offset value to the base value, and resets the base value to zero. The final output of the value is unchanged.

***

### `addListener()`[‚Äã](#addlistener "Direct link to addlistener")

tsx

```
addListener(callback: (state: {value: number}) => void): string;
```

Adds an asynchronous listener to the value so you can observe updates from animations. This is useful because there is no way to synchronously read the value because it might be driven natively.

Returns a string that serves as an identifier for the listener.

**Parameters:**

| Name     | Type     | Required | Description                                                                                 |
| -------- | -------- | -------- | ------------------------------------------------------------------------------------------- |
| callback | function | Yes      | The callback function which will receive an object with a `value` key set to the new value. |

***

### `removeListener()`[‚Äã](#removelistener "Direct link to removelistener")

tsx

```
removeListener(id: string);
```

Unregister a listener. The `id` param shall match the identifier previously returned by `addListener()`.

**Parameters:**

| Name | Type   | Required | Description                        |
| ---- | ------ | -------- | ---------------------------------- |
| id   | string | Yes      | Id for the listener being removed. |

***

### `removeAllListeners()`[‚Äã](#removealllisteners "Direct link to removealllisteners")

tsx

```
removeAllListeners();
```

Remove all registered listeners.

***

### `stopAnimation()`[‚Äã](#stopanimation "Direct link to stopanimation")

tsx

```
stopAnimation(callback?: (value: number) => void);
```

Stops any running animation or tracking. `callback` is invoked with the final value after stopping the animation, which is useful for updating state to match the animation position with layout.

**Parameters:**

| Name     | Type     | Required | Description                                   |
| -------- | -------- | -------- | --------------------------------------------- |
| callback | function | No       | A function that will receive the final value. |

***

### `resetAnimation()`[‚Äã](#resetanimation "Direct link to resetanimation")

tsx

```
resetAnimation(callback?: (value: number) => void);
```

Stops any animation and resets the value to its original.

**Parameters:**

| Name     | Type     | Required | Description                                      |
| -------- | -------- | -------- | ------------------------------------------------ |
| callback | function | No       | A function that will receive the original value. |

***

### `interpolate()`[‚Äã](#interpolate "Direct link to interpolate")

tsx

```
interpolate(config: InterpolationConfigType);
```

Interpolates the value before updating the property, e.g. mapping 0-1 to 0-10.

See `AnimatedInterpolation.js`

**Parameters:**

| Name   | Type   | Required | Description |
| ------ | ------ | -------- | ----------- |
| config | object | Yes      | See below.  |

The `config` object is composed of the following keys:

* `inputRange`: an array of numbers
* `outputRange`: an array of numbers or strings
* `easing` (optional): a function that returns a number, given an input number
* `extrapolate` (optional): a string such as 'extend', 'identity', or 'clamp'
* `extrapolateLeft` (optional): a string such as 'extend', 'identity', or 'clamp'
* `extrapolateRight` (optional): a string such as 'extend', 'identity', or 'clamp'

***

### `animate()`[‚Äã](#animate "Direct link to animate")

tsx

```
animate(animation, callback);
```

Typically only used internally, but could be used by a custom Animation class.

**Parameters:**

| Name      | Type      | Required | Description         |
| --------- | --------- | -------- | ------------------- |
| animation | Animation | Yes      | See `Animation.js`. |
| callback  | function  | Yes      | Callback function.  |


---

# Animated.ValueXY

2D Value for driving 2D animations, such as pan gestures. Almost identical API to normal [`Animated.Value`](/docs/animatedvalue.md), but multiplexed. Contains two regular `Animated.Value`s under the hood.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `setValue()`[‚Äã](#setvalue "Direct link to setvalue")

tsx

```
setValue(value: {x: number; y: number});
```

Directly set the value. This will stop any animations running on the value and update all the bound properties.

**Parameters:**

| Name  | Type                     | Required | Description |
| ----- | ------------------------ | -------- | ----------- |
| value | `{x: number; y: number}` | Yes      | Value       |

***

### `setOffset()`[‚Äã](#setoffset "Direct link to setoffset")

tsx

```
setOffset(offset: {x: number; y: number});
```

Sets an offset that is applied on top of whatever value is set, whether via `setValue`, an animation, or `Animated.event`. Useful for compensating things like the start of a pan gesture.

**Parameters:**

| Name   | Type                     | Required | Description  |
| ------ | ------------------------ | -------- | ------------ |
| offset | `{x: number; y: number}` | Yes      | Offset value |

***

### `flattenOffset()`[‚Äã](#flattenoffset "Direct link to flattenoffset")

tsx

```
flattenOffset();
```

Merges the offset value into the base value and resets the offset to zero. The final output of the value is unchanged.

***

### `extractOffset()`[‚Äã](#extractoffset "Direct link to extractoffset")

tsx

```
extractOffset();
```

Sets the offset value to the base value, and resets the base value to zero. The final output of the value is unchanged.

***

### `addListener()`[‚Äã](#addlistener "Direct link to addlistener")

tsx

```
addListener(callback: (value: {x: number; y: number}) => void);
```

Adds an asynchronous listener to the value so you can observe updates from animations. This is useful because there is no way to synchronously read the value because it might be driven natively.

Returns a string that serves as an identifier for the listener.

**Parameters:**

| Name     | Type     | Required | Description                                                                                 |
| -------- | -------- | -------- | ------------------------------------------------------------------------------------------- |
| callback | function | Yes      | The callback function which will receive an object with a `value` key set to the new value. |

***

### `removeListener()`[‚Äã](#removelistener "Direct link to removelistener")

tsx

```
removeListener(id: string);
```

Unregister a listener. The `id` param shall match the identifier previously returned by `addListener()`.

**Parameters:**

| Name | Type   | Required | Description                        |
| ---- | ------ | -------- | ---------------------------------- |
| id   | string | Yes      | Id for the listener being removed. |

***

### `removeAllListeners()`[‚Äã](#removealllisteners "Direct link to removealllisteners")

tsx

```
removeAllListeners();
```

Remove all registered listeners.

***

### `stopAnimation()`[‚Äã](#stopanimation "Direct link to stopanimation")

tsx

```
stopAnimation(callback?: (value: {x: number; y: number}) => void);
```

Stops any running animation or tracking. `callback` is invoked with the final value after stopping the animation, which is useful for updating state to match the animation position with layout.

**Parameters:**

| Name     | Type     | Required | Description                                   |
| -------- | -------- | -------- | --------------------------------------------- |
| callback | function | No       | A function that will receive the final value. |

***

### `resetAnimation()`[‚Äã](#resetanimation "Direct link to resetanimation")

tsx

```
resetAnimation(callback?: (value: {x: number; y: number}) => void);
```

Stops any animation and resets the value to its original.

**Parameters:**

| Name     | Type     | Required | Description                                      |
| -------- | -------- | -------- | ------------------------------------------------ |
| callback | function | No       | A function that will receive the original value. |

***

### `getLayout()`[‚Äã](#getlayout "Direct link to getlayout")

tsx

```
getLayout(): {left: Animated.Value, top: Animated.Value};
```

Converts `{x, y}` into `{left, top}` for use in style, e.g.

tsx

```
style={this.state.anim.getLayout()}
```

***

### `getTranslateTransform()`[‚Äã](#gettranslatetransform "Direct link to gettranslatetransform")

tsx

```
getTranslateTransform(): [
  {translateX: Animated.Value},
  {translateY: Animated.Value},
];
```

Converts `{x, y}` into a useable translation transform, e.g.

tsx

```
style={{
  transform: this.state.anim.getTranslateTransform()
}}
```


---

# Animations

Animations are very important to create a great user experience. Stationary objects must overcome inertia as they start moving. Objects in motion have momentum and rarely come to a stop immediately. Animations allow you to convey physically believable motion in your interface.

React Native provides two complementary animation systems: [`Animated`](/docs/animations.md#animated-api) for granular and interactive control of specific values, and [`LayoutAnimation`](/docs/animations.md#layoutanimation-api) for animated global layout transactions.

## `Animated` API[‚Äã](#animated-api "Direct link to animated-api")

The [`Animated`](/docs/animated.md) API is designed to concisely express a wide variety of interesting animation and interaction patterns in a very performant way. `Animated` focuses on declarative relationships between inputs and outputs, with configurable transforms in between, and `start`/`stop` methods to control time-based animation execution.

`Animated` exports six animatable component types: `View`, `Text`, `Image`, `ScrollView`, `FlatList` and `SectionList`, but you can also create your own using `Animated.createAnimatedComponent()`.

For example, a container view that fades in when it is mounted may look like this:

* TypeScript
* JavaScript

Let's break down what's happening here. In the `FadeInView` render method, a new `Animated.Value` called `fadeAnim` is initialized with `useRef`. The opacity property on the `View` is mapped to this animated value. Behind the scenes, the numeric value is extracted and used to set opacity.

When the component mounts, the opacity is set to 0. Then, an easing animation is started on the `fadeAnim` animated value, which will update all of its dependent mappings (in this case, only the opacity) on each frame as the value animates to the final value of 1.

This is done in an optimized way that is faster than calling `setState` and re-rendering. Because the entire configuration is declarative, we will be able to implement further optimizations that serialize the configuration and runs the animation on a high-priority thread.

### Configuring animations[‚Äã](#configuring-animations "Direct link to Configuring animations")

Animations are heavily configurable. Custom and predefined easing functions, delays, durations, decay factors, spring constants, and more can all be tweaked depending on the type of animation.

`Animated` provides several animation types, the most commonly used one being [`Animated.timing()`](/docs/animated.md#timing). It supports animating a value over time using one of various predefined easing functions, or you can use your own. Easing functions are typically used in animation to convey gradual acceleration and deceleration of objects.

By default, `timing` will use an easeInOut curve that conveys gradual acceleration to full speed and concludes by gradually decelerating to a stop. You can specify a different easing function by passing an `easing` parameter. Custom `duration` or even a `delay` before the animation starts is also supported.

For example, if we want to create a 2-second long animation of an object that slightly backs up before moving to its final position:

tsx

```
Animated.timing(this.state.xPosition, {
  toValue: 100,
  easing: Easing.back(),
  duration: 2000,
  useNativeDriver: true,
}).start();
```

Take a look at the [Configuring animations](/docs/animated.md#configuring-animations) section of the `Animated` API reference to learn more about all the config parameters supported by the built-in animations.

### Composing animations[‚Äã](#composing-animations "Direct link to Composing animations")

Animations can be combined and played in sequence or in parallel. Sequential animations can play immediately after the previous animation has finished, or they can start after a specified delay. The `Animated` API provides several methods, such as `sequence()` and `delay()`, each of which take an array of animations to execute and automatically calls `start()`/`stop()` as needed.

For example, the following animation coasts to a stop, then it springs back while twirling in parallel:

tsx

```
Animated.sequence([
  // decay, then spring to start and twirl
  Animated.decay(position, {
    // coast to a stop
    velocity: {x: gestureState.vx, y: gestureState.vy}, // velocity from gesture release
    deceleration: 0.997,
    useNativeDriver: true,
  }),
  Animated.parallel([
    // after decay, in parallel:
    Animated.spring(position, {
      toValue: {x: 0, y: 0}, // return to start
      useNativeDriver: true,
    }),
    Animated.timing(twirl, {
      // and twirl
      toValue: 360,
      useNativeDriver: true,
    }),
  ]),
]).start(); // start the sequence group
```

If one animation is stopped or interrupted, then all other animations in the group are also stopped. `Animated.parallel` has a `stopTogether` option that can be set to `false` to disable this.

You can find a full list of composition methods in the [Composing animations](/docs/animated.md#composing-animations) section of the `Animated` API reference.

### Combining animated values[‚Äã](#combining-animated-values "Direct link to Combining animated values")

You can [combine two animated values](/docs/animated.md#combining-animated-values) via addition, multiplication, division, or modulo to make a new animated value.

There are some cases where an animated value needs to invert another animated value for calculation. An example is inverting a scale (2x --> 0.5x):

tsx

```
const a = new Animated.Value(1);
const b = Animated.divide(1, a);

Animated.spring(a, {
  toValue: 2,
  useNativeDriver: true,
}).start();
```

### Interpolation[‚Äã](#interpolation "Direct link to Interpolation")

Each property can be run through an interpolation first. An interpolation maps input ranges to output ranges, typically using a linear interpolation but also supports easing functions. By default, it will extrapolate the curve beyond the ranges given, but you can also have it clamp the output value.

A basic mapping to convert a 0-1 range to a 0-100 range would be:

tsx

```
value.interpolate({
  inputRange: [0, 1],
  outputRange: [0, 100],
});
```

For example, you may want to think about your `Animated.Value` as going from 0 to 1, but animate the position from 150px to 0px and the opacity from 0 to 1. This can be done by modifying `style` from the example above like so:

tsx

```
  style={{
    opacity: this.state.fadeAnim, // Binds directly
    transform: [{
      translateY: this.state.fadeAnim.interpolate({
        inputRange: [0, 1],
        outputRange: [150, 0]  // 0 : 150, 0.5 : 75, 1 : 0
      }),
    }],
  }}
```

[`interpolate()`](/docs/animated.md#interpolate) supports multiple range segments as well, which is handy for defining dead zones and other handy tricks. For example, to get a negation relationship at -300 that goes to 0 at -100, then back up to 1 at 0, and then back down to zero at 100 followed by a dead-zone that remains at 0 for everything beyond that, you could do:

tsx

```
value.interpolate({
  inputRange: [-300, -100, 0, 100, 101],
  outputRange: [300, 0, 1, 0, 0],
});
```

Which would map like so:

```
Input | Output
------|-------
  -400|    450
  -300|    300
  -200|    150
  -100|      0
   -50|    0.5
     0|      1
    50|    0.5
   100|      0
   101|      0
   200|      0
```

`interpolate()` also supports mapping to strings, allowing you to animate colors as well as values with units. For example, if you wanted to animate a rotation you could do:

tsx

```
value.interpolate({
  inputRange: [0, 360],
  outputRange: ['0deg', '360deg'],
});
```

`interpolate()` also supports arbitrary easing functions, many of which are already implemented in the [`Easing`](/docs/easing.md) module. `interpolate()` also has configurable behavior for extrapolating the `outputRange`. You can set the extrapolation by setting the `extrapolate`, `extrapolateLeft`, or `extrapolateRight` options. The default value is `extend` but you can use `clamp` to prevent the output value from exceeding `outputRange`.

### Tracking dynamic values[‚Äã](#tracking-dynamic-values "Direct link to Tracking dynamic values")

Animated values can also track other values by setting the `toValue` of an animation to another animated value instead of a plain number. For example, a "Chat Heads" animation like the one used by Messenger on Android could be implemented with a `spring()` pinned on another animated value, or with `timing()` and a `duration` of 0 for rigid tracking. They can also be composed with interpolations:

tsx

```
Animated.spring(follower, {toValue: leader}).start();
Animated.timing(opacity, {
  toValue: pan.x.interpolate({
    inputRange: [0, 300],
    outputRange: [1, 0],
  }),
  useNativeDriver: true,
}).start();
```

The `leader` and `follower` animated values would be implemented using `Animated.ValueXY()`. `ValueXY` is a handy way to deal with 2D interactions, such as panning or dragging. It is a basic wrapper that contains two `Animated.Value` instances and some helper functions that call through to them, making `ValueXY` a drop-in replacement for `Value` in many cases. It allows us to track both x and y values in the example above.

### Tracking gestures[‚Äã](#tracking-gestures "Direct link to Tracking gestures")

Gestures, like panning or scrolling, and other events can map directly to animated values using [`Animated.event`](/docs/animated.md#event). This is done with a structured map syntax so that values can be extracted from complex event objects. The first level is an array to allow mapping across multiple args, and that array contains nested objects.

For example, when working with horizontal scrolling gestures, you would do the following in order to map `event.nativeEvent.contentOffset.x` to `scrollX` (an `Animated.Value`):

tsx

```
 onScroll={Animated.event(
   // scrollX = e.nativeEvent.contentOffset.x
   [{nativeEvent: {
        contentOffset: {
          x: scrollX
        }
      }
    }]
 )}
```

The following example implements a horizontal scrolling carousel where the scroll position indicators are animated using the `Animated.event` used in the `ScrollView`

#### ScrollView with Animated Event Example[‚Äã](#scrollview-with-animated-event-example "Direct link to ScrollView with Animated Event Example")

When using `PanResponder`, you could use the following code to extract the x and y positions from `gestureState.dx` and `gestureState.dy`. We use a `null` in the first position of the array, as we are only interested in the second argument passed to the `PanResponder` handler, which is the `gestureState`.

tsx

```
onPanResponderMove={Animated.event(
  [null, // ignore the native event
  // extract dx and dy from gestureState
  // like 'pan.x = gestureState.dx, pan.y = gestureState.dy'
  {dx: pan.x, dy: pan.y}
])}
```

#### PanResponder with Animated Event Example[‚Äã](#panresponder-with-animated-event-example "Direct link to PanResponder with Animated Event Example")

### Responding to the current animation value[‚Äã](#responding-to-the-current-animation-value "Direct link to Responding to the current animation value")

You may notice that there is no clear way to read the current value while animating. This is because the value may only be known in the native runtime due to optimizations. If you need to run JavaScript in response to the current value, there are two approaches:

* `spring.stopAnimation(callback)` will stop the animation and invoke `callback` with the final value. This is useful when making gesture transitions.
* `spring.addListener(callback)` will invoke `callback` asynchronously while the animation is running, providing a recent value. This is useful for triggering state changes, for example snapping a bobble to a new option as the user drags it closer, because these larger state changes are less sensitive to a few frames of lag compared to continuous gestures like panning which need to run at 60 fps.

`Animated` is designed to be fully serializable so that animations can be run in a high performance way, independent of the normal JavaScript event loop. This does influence the API, so keep that in mind when it seems a little trickier to do something compared to a fully synchronous system. Check out `Animated.Value.addListener` as a way to work around some of these limitations, but use it sparingly since it might have performance implications in the future.

### Using the native driver[‚Äã](#using-the-native-driver "Direct link to Using the native driver")

The `Animated` API is designed to be serializable. By using the [native driver](/blog/2017/02/14/using-native-driver-for-animated), we send everything about the animation to native before starting the animation, allowing native code to perform the animation on the UI thread without having to go through the bridge on every frame. Once the animation has started, the JS thread can be blocked without affecting the animation.

Using the native driver for normal animations can be accomplished by setting `useNativeDriver: true` in animation config when starting it. Animations without a `useNativeDriver` property will default to false for legacy reasons, but emit a warning (and typechecking error in TypeScript).

tsx

```
Animated.timing(this.state.animatedValue, {
  toValue: 1,
  duration: 500,
  useNativeDriver: true, // <-- Set this to true
}).start();
```

Animated values are only compatible with one driver so if you use native driver when starting an animation on a value, make sure every animation on that value also uses the native driver.

The native driver also works with `Animated.event`. This is especially useful for animations that follow the scroll position as without the native driver, the animation will always run a frame behind the gesture due to the async nature of React Native.

tsx

```
<Animated.ScrollView // <-- Use the Animated ScrollView wrapper
  onScroll={Animated.event(
    [
      {
        nativeEvent: {
          contentOffset: {y: this.state.animatedValue},
        },
      },
    ],
    {useNativeDriver: true}, // <-- Set this to true
  )}>
  {content}
</Animated.ScrollView>
```

You can see the native driver in action by running the [RNTester app](https://github.com/facebook/react-native/blob/main/packages/rn-tester/), then loading the Native Animated Example. You can also take a look at the [source code](https://github.com/facebook/react-native/blob/master/packages/rn-tester/js/examples/NativeAnimation/NativeAnimationsExample.js) to learn how these examples were produced.

#### Caveats[‚Äã](#caveats "Direct link to Caveats")

Not everything you can do with `Animated` is currently supported by the native driver. The main limitation is that you can only animate non-layout properties: things like `transform` and `opacity` will work, but Flexbox and position properties will not. When using `Animated.event`, it will only work with direct events and not bubbling events. This means it does not work with `PanResponder` but does work with things like `ScrollView#onScroll`.

When an animation is running, it can prevent `VirtualizedList` components from rendering more rows. If you need to run a long or looping animation while the user is scrolling through a list, you can use `isInteraction: false` in your animation's config to prevent this issue.

### Bear in mind[‚Äã](#bear-in-mind "Direct link to Bear in mind")

While using transform styles such as `rotateY`, `rotateX`, and others ensure the transform style `perspective` is in place. At this time some animations may not render on Android without it. Example below.

tsx

```
<Animated.View
  style={{
    transform: [
      {scale: this.state.scale},
      {rotateY: this.state.rotateY},
      {perspective: 1000}, // without this line this Animation will not render on Android while working fine on iOS
    ],
  }}
/>
```

### Additional examples[‚Äã](#additional-examples "Direct link to Additional examples")

The RNTester app has various examples of `Animated` in use:

* [AnimatedGratuitousApp](https://github.com/facebook/react-native/tree/main/packages/rn-tester/js/examples/AnimatedGratuitousApp)
* [NativeAnimationsExample](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/NativeAnimation/NativeAnimationsExample.js)

## `LayoutAnimation` API[‚Äã](#layoutanimation-api "Direct link to layoutanimation-api")

`LayoutAnimation` allows you to globally configure `create` and `update` animations that will be used for all views in the next render/layout cycle. This is useful for doing Flexbox layout updates without bothering to measure or calculate specific properties in order to animate them directly, and is especially useful when layout changes may affect ancestors, for example a "see more" expansion that also increases the size of the parent and pushes down the row below which would otherwise require explicit coordination between the components in order to animate them all in sync.

Note that although `LayoutAnimation` is very powerful and can be quite useful, it provides much less control than `Animated` and other animation libraries, so you may need to use another approach if you can't get `LayoutAnimation` to do what you want.

Note that in order to get this to work on **Android** you need to set the following flags via `UIManager`:

tsx

```
UIManager.setLayoutAnimationEnabledExperimental(true);
```

This example uses a preset value, you can customize the animations as you need, see [LayoutAnimation.js](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/LayoutAnimation/LayoutAnimation.js) for more information.

## Additional notes[‚Äã](#additional-notes "Direct link to Additional notes")

### `requestAnimationFrame`[‚Äã](#requestanimationframe "Direct link to requestanimationframe")

`requestAnimationFrame` is a polyfill from the browser that you might be familiar with. It accepts a function as its only argument and calls that function before the next repaint. It is an essential building block for animations that underlies all of the JavaScript-based animation APIs. In general, you shouldn't need to call this yourself - the animation APIs will manage frame updates for you.

### `setNativeProps`[‚Äã](#setnativeprops "Direct link to setnativeprops")

As mentioned [in the Direct Manipulation section](/docs/legacy/direct-manipulation.md), `setNativeProps` allows us to modify properties of native-backed components (components that are actually backed by native views, unlike composite components) directly, without having to `setState` and re-render the component hierarchy.

We could use this in the Rebound example to update the scale - this might be helpful if the component that we are updating is deeply nested and hasn't been optimized with `shouldComponentUpdate`.

If you find your animations with dropping frames (performing below 60 frames per second), look into using `setNativeProps` or `shouldComponentUpdate` to optimize them. Or you could run the animations on the UI thread rather than the JavaScript thread [with the useNativeDriver option](/blog/2017/02/14/using-native-driver-for-animated). You may also want to defer any computationally intensive work until after animations are complete, using the [InteractionManager](/docs/interactionmanager.md). You can monitor the frame rate by using the In-App Dev Menu "FPS Monitor" tool.


---

# App Extensions

App extensions let you provide custom functionality and content outside of your main app. There are different types of app extensions on iOS, and they are all covered in the [App Extension Programming Guide](https://developer.apple.com/library/content/documentation/General/Conceptual/ExtensibilityPG/index.html#//apple_ref/doc/uid/TP40014214-CH20-SW1). In this guide, we'll briefly cover how you may take advantage of app extensions on iOS.

## Memory use in extensions[‚Äã](#memory-use-in-extensions "Direct link to Memory use in extensions")

As these extensions are loaded outside of the regular app sandbox, it's highly likely that several of these app extensions will be loaded simultaneously. As you might expect, these extensions have small memory usage limits. Keep these in mind when developing your app extensions. It's always highly recommended to test your application on an actual device, and more so when developing app extensions: too frequently, developers find that their extension works fine in the iOS Simulator, only to get user reports that their extension is not loading on actual devices.

### Today widget[‚Äã](#today-widget "Direct link to Today widget")

The memory limit of a Today widget is 16 MB. As it happens, Today widget implementations using React Native may work unreliably because the memory usage tends to be too high. You can tell if your Today widget is exceeding the memory limit if it yields the message 'Unable to Load':

![](/assets/images/TodayWidgetUnableToLoad-b931f8be6eeb72c037338b9ab9766477.jpg)

Always make sure to test your app extensions in a real device, but be aware that this may not be sufficient, especially when dealing with Today widgets. Debug-configured builds are more likely to exceed the memory limits, while release-configured builds don't fail right away. We highly recommend that you use [Xcode's Instruments](https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/index.html) to analyze your real world memory usage, as it's very likely that your release-configured build is very close to the 16 MB limit. In situations like these, you can quickly go over the 16 MB limit by performing common operations, such as fetching data from an API.

To experiment with the limits of React Native Today widget implementations, try extending the example project in [react-native-today-widget](https://github.com/matejkriz/react-native-today-widget/).

### Other app extensions[‚Äã](#other-app-extensions "Direct link to Other app extensions")

Other types of app extensions have greater memory limits than the Today widget. For instance, Custom Keyboard extensions are limited to 48 MB, and Share extensions are limited to 120 MB. Implementing such app extensions with React Native is more viable. One proof of concept example is [react-native-ios-share-extension](https://github.com/andrewsardone/react-native-ios-share-extension).


---

# Appearance

tsx

```
import {Appearance} from 'react-native';
```

The `Appearance` module exposes information about the user's appearance preferences, such as their preferred color scheme (light or dark).

#### Developer notes[‚Äã](#developer-notes "Direct link to Developer notes")

* Android
* iOS
* Web

info

The `Appearance` API is inspired by the [Media Queries draft](https://drafts.csswg.org/mediaqueries-5/) from the W3C. The color scheme preference is modeled after the [`prefers-color-scheme` CSS media feature](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme).

info

The color scheme preference will map to the user's Light or [Dark theme](https://developer.android.com/guide/topics/ui/look-and-feel/darktheme) preference on Android 10 (API level 29) devices and higher.

info

The color scheme preference will map to the user's Light or [Dark Mode](https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/dark-mode/) preference on iOS 13 devices and higher.

note

When taking a screenshot, by default, the color scheme may flicker between light and dark mode. It happens because the iOS takes snapshots on both color schemes and updating the user interface with color scheme is asynchronous.

## Example[‚Äã](#example "Direct link to Example")

You can use the `Appearance` module to determine if the user prefers a dark color scheme:

tsx

```
const colorScheme = Appearance.getColorScheme();
if (colorScheme === 'dark') {
  // Use dark color scheme
}
```

Although the color scheme is available immediately, this may change (e.g. scheduled color scheme change at sunrise or sunset). Any rendering logic or styles that depend on the user preferred color scheme should try to call this function on every render, rather than caching the value. For example, you may use the [`useColorScheme`](/docs/usecolorscheme.md) React hook as it provides and subscribes to color scheme updates, or you may use inline styles rather than setting a value in a `StyleSheet`.

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `getColorScheme()`[‚Äã](#getcolorscheme "Direct link to getcolorscheme")

tsx

```
static getColorScheme(): 'light' | 'dark' | null;
```

Indicates the current user preferred color scheme. The value may be updated later, either through direct user action (e.g. theme selection in device settings or application-level selected user interface style via `setColorScheme`) or on a schedule (e.g. light and dark themes that follow the day/night cycle).

Supported color schemes:

* `'light'`: The user prefers a light color theme.
* `'dark'`: The user prefers a dark color theme.
* `null`: The user has not indicated a preferred color theme.

See also: `useColorScheme` hook.

note

`getColorScheme()` will always return `light` when debugging with Chrome.

***

### `setColorScheme()`[‚Äã](#setcolorscheme "Direct link to setcolorscheme")

tsx

```
static setColorScheme('light' | 'dark' | null): void;
```

Force the application to always adopt a light or dark interface style. The default value is `null` which causes the application to inherit the system's interface style. If you assign a different value, the new style applies to the application and all native elements within the application (Alerts, Pickers etc).

Supported color schemes:

* `light`: Apply light user interface style.
* `dark`: Apply dark user interface style.
* null: Follow the system's interface style.

note

The change will not affect the system's selected interface style or any style set in other applications.

***

### `addChangeListener()`[‚Äã](#addchangelistener "Direct link to addchangelistener")

tsx

```
static addChangeListener(
  listener: (preferences: {colorScheme: 'light' | 'dark' | null}) => void,
): NativeEventSubscription;
```

Add an event handler that is fired when appearance preferences change.


---

# Appendix

## I. Terminology[‚Äã](#i-terminology "Direct link to I. Terminology")

* **Spec** - TypeScript or Flow code that describes the API for a Turbo Native Module or Fabric Native component. Used by **Codegen** to generate boilerplate code.

* **Native Modules** - Native libraries that have no User Interface (UI) for the user. Examples would be persistent storage, notifications, network events. These are accessible to your JavaScript application code as functions and objects.

* **Native Component** - Native platform views that are available to your application JavaScript code through React Components.

* **Legacy Native Components** - Components which are running on the old React Native architecture.

* **Legacy Native Modules** - Modules which are running on the old React Native architecture.

## II. Codegen Typings[‚Äã](#ii-codegen-typings "Direct link to II. Codegen Typings")

You may use the following table as a reference for which types are supported and what they map to in each platform:

| Flow                                          | TypeScript                           | Flow Nullable Support      | TypeScript Nullable Support     | Android (Java)                       | iOS (ObjC)                                                     |
| --------------------------------------------- | ------------------------------------ | -------------------------- | ------------------------------- | ------------------------------------ | -------------------------------------------------------------- |
| `string`                                      | `string`                             | `?string`                  | `string \| null`                | `string`                             | `NSString`                                                     |
| `boolean`                                     | `boolean`                            | `?boolean`                 | `boolean \| null`               | `Boolean`                            | `NSNumber`                                                     |
| Object Literal<br />`{\| foo: string, ...\|}` | `{ foo: string, ...} as const`       | `?{\| foo: string, ...\|}` | `?{ foo: string, ...} as const` | -                                    | -                                                              |
| Object \[[1](#notes)]                         | Object \[[1](#notes)]                | `?Object`                  | `Object \| null`                | `ReadableMap`                        | `@` (untyped dictionary)                                       |
| `Array<T>`                                    | `Array<T>`                           | `?Array<T>`                | `Array<T> \| null`              | `ReadableArray`                      | `NSArray` (or `RCTConvertVecToArray` when used inside objects) |
| `Function`                                    | `Function`                           | `?Function`                | `Function \| null`              | -                                    | -                                                              |
| `Promise<T>`                                  | `Promise<T>`                         | `?Promise<T>`              | `Promise<T> \| null`            | `com.facebook.react.bridge.Promise`  | `RCTPromiseResolve` and `RCTPromiseRejectBlock`                |
| Type Unions<br />`'SUCCESS'\|'FAIL'`          | Type Unions<br />`'SUCCESS'\|'FAIL'` | Only as callbacks          |                                 | -                                    | -                                                              |
| Callbacks<br />`() =>`                        | Callbacks<br />`() =>`               | Yes                        |                                 | `com.facebook.react.bridge.Callback` | `RCTResponseSenderBlock`                                       |
| `number`                                      | `number`                             | No                         |                                 | `double`                             | `NSNumber`                                                     |

### Notes:[‚Äã](#notes "Direct link to Notes:")

**\[1]** We strongly recommend using Object literals instead of Objects.

info

You may also find it useful to refer to the JavaScript specifications for the core modules in React Native. These are located inside the `Libraries/` directory in the React Native repository.


---

# AppRegistry

### Project with Native Code Required

If you are using the managed Expo workflow there is only ever one entry component registered with `AppRegistry` and it is handled automatically (or through [registerRootComponent](https://docs.expo.dev/versions/latest/sdk/register-root-component/)). You do not need to use this API.

`AppRegistry` is the JS entry point to running all React Native apps. App root components should register themselves with `AppRegistry.registerComponent`, then the native system can load the bundle for the app and then actually run the app when it's ready by invoking `AppRegistry.runApplication`.

tsx

```
import {Text, AppRegistry} from 'react-native';

const App = () => (
  <View>
    <Text>App1</Text>
  </View>
);

AppRegistry.registerComponent('Appname', () => App);
```

To "stop" an application when a view should be destroyed, call `AppRegistry.unmountApplicationComponentAtRootTag` with the tag that was passed into `runApplication`. These should always be used as a pair.

`AppRegistry` should be required early in the `require` sequence to make sure the JS execution environment is setup before other modules are required.

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `getAppKeys()`[‚Äã](#getappkeys "Direct link to getappkeys")

tsx

```
static getAppKeys(): string[];
```

Returns an array of strings.

***

### `getRegistry()`[‚Äã](#getregistry "Direct link to getregistry")

tsx

```
static getRegistry(): {sections: string[]; runnables: Runnable[]};
```

Returns a [Registry](/docs/appregistry.md#registry) object.

***

### `getRunnable()`[‚Äã](#getrunnable "Direct link to getrunnable")

tsx

```
static getRunnable(appKey: string): : Runnable | undefined;
```

Returns a [Runnable](/docs/appregistry.md#runnable) object.

**Parameters:**

| Name           | Type   |
| -------------- | ------ |
| appKeyRequired | string |

***

### `getSectionKeys()`[‚Äã](#getsectionkeys "Direct link to getsectionkeys")

tsx

```
static getSectionKeys(): string[];
```

Returns an array of strings.

***

### `getSections()`[‚Äã](#getsections "Direct link to getsections")

tsx

```
static getSections(): Record<string, Runnable>;
```

Returns a [Runnables](/docs/appregistry.md#runnables) object.

***

### `registerCancellableHeadlessTask()`[‚Äã](#registercancellableheadlesstask "Direct link to registercancellableheadlesstask")

tsx

```
static registerCancellableHeadlessTask(
  taskKey: string,
  taskProvider: TaskProvider,
  taskCancelProvider: TaskCancelProvider,
);
```

Register a headless task which can be cancelled. A headless task is a bit of code that runs without a UI.

**Parameters:**

| Name                             | Type                                                          | Description                                                                                                                                                                                                                         |
| -------------------------------- | ------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| taskKey<br />Required            | string                                                        | The native id for this task instance that was used when startHeadlessTask was called.                                                                                                                                               |
| taskProvider<br />Required       | [TaskProvider](/docs/appregistry.md#taskprovider)             | A promise returning function that takes some data passed from the native side as the only argument. When the promise is resolved or rejected the native side is notified of this event and it may decide to destroy the JS context. |
| taskCancelProvider<br />Required | [TaskCancelProvider](/docs/appregistry.md#taskcancelprovider) | a void returning function that takes no arguments; when a cancellation is requested, the function being executed by taskProvider should wrap up and return ASAP.                                                                    |

***

### `registerComponent()`[‚Äã](#registercomponent "Direct link to registercomponent")

tsx

```
static registerComponent(
  appKey: string,
  getComponentFunc: ComponentProvider,
  section?: boolean,
): string;
```

**Parameters:**

| Name                      | Type              |
| ------------------------- | ----------------- |
| appKeyRequired            | string            |
| componentProviderRequired | ComponentProvider |
| section                   | boolean           |

***

### `registerConfig()`[‚Äã](#registerconfig "Direct link to registerconfig")

tsx

```
static registerConfig(config: AppConfig[]);
```

**Parameters:**

| Name           | Type                                           |
| -------------- | ---------------------------------------------- |
| configRequired | [AppConfig](/docs/appregistry.md#appconfig)\[] |

***

### `registerHeadlessTask()`[‚Äã](#registerheadlesstask "Direct link to registerheadlesstask")

tsx

```
static registerHeadlessTask(
  taskKey: string,
  taskProvider: TaskProvider,
);
```

Register a headless task. A headless task is a bit of code that runs without a UI.

This is a way to run tasks in JavaScript while your app is in the background. It can be used, for example, to sync fresh data, handle push notifications, or play music.

**Parameters:**

| Name                 | Type                                              | Description                                                                                                                                                                                                                         |
| -------------------- | ------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| taskKeyRequired      | string                                            | The native id for this task instance that was used when startHeadlessTask was called.                                                                                                                                               |
| taskProviderRequired | [TaskProvider](/docs/appregistry.md#taskprovider) | A promise returning function that takes some data passed from the native side as the only argument. When the promise is resolved or rejected the native side is notified of this event and it may decide to destroy the JS context. |

***

### `registerRunnable()`[‚Äã](#registerrunnable "Direct link to registerrunnable")

tsx

```
static registerRunnable(appKey: string, func: Runnable): string;
```

**Parameters:**

| Name           | Type     |
| -------------- | -------- |
| appKeyRequired | string   |
| runRequired    | function |

***

### `registerSection()`[‚Äã](#registersection "Direct link to registersection")

tsx

```
static registerSection(
  appKey: string,
  component: ComponentProvider,
);
```

**Parameters:**

| Name              | Type              |
| ----------------- | ----------------- |
| appKeyRequired    | string            |
| componentRequired | ComponentProvider |

***

### `runApplication()`[‚Äã](#runapplication "Direct link to runapplication")

tsx

```
static runApplication(appKey: string, appParameters: any): void;
```

Loads the JavaScript bundle and runs the app.

**Parameters:**

| Name                  | Type   |
| --------------------- | ------ |
| appKeyRequired        | string |
| appParametersRequired | any    |

***

### `setComponentProviderInstrumentationHook()`[‚Äã](#setcomponentproviderinstrumentationhook "Direct link to setcomponentproviderinstrumentationhook")

tsx

```
static setComponentProviderInstrumentationHook(
  hook: ComponentProviderInstrumentationHook,
);
```

**Parameters:**

| Name         | Type     |
| ------------ | -------- |
| hookRequired | function |

A valid `hook` function accepts the following as arguments:

| Name                            | Type               |
| ------------------------------- | ------------------ |
| componentRequired               | ComponentProvider  |
| scopedPerformanceLoggerRequired | IPerformanceLogger |

The function must also return a React Component.

***

### `setWrapperComponentProvider()`[‚Äã](#setwrappercomponentprovider "Direct link to setwrappercomponentprovider")

tsx

```
static setWrapperComponentProvider(
  provider: WrapperComponentProvider,
);
```

**Parameters:**

| Name             | Type              |
| ---------------- | ----------------- |
| providerRequired | ComponentProvider |

***

### `startHeadlessTask()`[‚Äã](#startheadlesstask "Direct link to startheadlesstask")

tsx

```
static startHeadlessTask(
  taskId: number,
  taskKey: string,
  data: any,
);
```

Only called from native code. Starts a headless task.

**Parameters:**

| Name            | Type   | Description                                                          |
| --------------- | ------ | -------------------------------------------------------------------- |
| taskIdRequired  | number | The native id for this task instance to keep track of its execution. |
| taskKeyRequired | string | The key for the task to start.                                       |
| dataRequired    | any    | The data to pass to the task.                                        |

***

### `unmountApplicationComponentAtRootTag()`[‚Äã](#unmountapplicationcomponentatroottag "Direct link to unmountapplicationcomponentatroottag")

tsx

```
static unmountApplicationComponentAtRootTag(rootTag: number);
```

Stops an application when a view should be destroyed.

**Parameters:**

| Name            | Type   |
| --------------- | ------ |
| rootTagRequired | number |

## Type Definitions[‚Äã](#type-definitions "Direct link to Type Definitions")

### AppConfig[‚Äã](#appconfig "Direct link to AppConfig")

Application configuration for the `registerConfig` method.

| Type   |
| ------ |
| object |

**Properties:**

| Name           | Type              |
| -------------- | ----------------- |
| appKeyRequired | string            |
| component      | ComponentProvider |
| run            | function          |
| section        | boolean           |

note

Every config is expected to set either `component` or `run` function.

### Registry[‚Äã](#registry "Direct link to Registry")

| Type   |
| ------ |
| object |

**Properties:**

| Name      | Type                                                |
| --------- | --------------------------------------------------- |
| runnables | array of [Runnables](/docs/appregistry.md#runnable) |
| sections  | array of strings                                    |

### Runnable[‚Äã](#runnable "Direct link to Runnable")

| Type   |
| ------ |
| object |

**Properties:**

| Name      | Type              |
| --------- | ----------------- |
| component | ComponentProvider |
| run       | function          |

### Runnables[‚Äã](#runnables "Direct link to Runnables")

An object with key of `appKey` and value of type of [`Runnable`](/docs/appregistry.md#runnable).

| Type   |
| ------ |
| object |

### Task[‚Äã](#task "Direct link to Task")

A `Task` is a function that accepts any data as argument and returns a Promise that resolves to `undefined`.

| Type     |
| -------- |
| function |

### TaskCanceller[‚Äã](#taskcanceller "Direct link to TaskCanceller")

A `TaskCanceller` is a function that accepts no argument and returns void.

| Type     |
| -------- |
| function |

### TaskCancelProvider[‚Äã](#taskcancelprovider "Direct link to TaskCancelProvider")

A valid `TaskCancelProvider` is a function that returns a [`TaskCanceller`](/docs/appregistry.md#taskcanceller).

| Type     |
| -------- |
| function |

### TaskProvider[‚Äã](#taskprovider "Direct link to TaskProvider")

A valid `TaskProvider` is a function that returns a [`Task`](/docs/appregistry.md#task).

| Type     |
| -------- |
| function |


---

# AppState

`AppState` can tell you if the app is in the foreground or background, and notify you when the state changes.

AppState is frequently used to determine the intent and proper behavior when handling push notifications.

### App States[‚Äã](#app-states "Direct link to App States")

* `active` - The app is running in the foreground

* `background` - The app is running in the background. The user is either:

  <!-- -->

  * in another app
  * on the home screen
  * \[Android] on another `Activity` (even if it was launched by your app)

* \[iOS] `inactive` - This is a state that occurs when transitioning between foreground & background, and during periods of inactivity such as entering the multitasking view, opening the Notification Center or in the event of an incoming call.

For more information, see [Apple's documentation](https://developer.apple.com/documentation/uikit/app_and_scenes/managing_your_app_s_life_cycle)

## Basic Usage[‚Äã](#basic-usage "Direct link to Basic Usage")

To see the current state, you can check `AppState.currentState`, which will be kept up-to-date. However, `currentState` will be null at launch while `AppState` retrieves it over the bridge.

This example will only ever appear to say "Current state is: active" because the app is only visible to the user when in the `active` state, and the null state will happen only momentarily. If you want to experiment with the code we recommend to use your own device instead of embedded preview.

***

# Reference

## Events[‚Äã](#events "Direct link to Events")

### `change`[‚Äã](#change "Direct link to change")

This event is received when the app state has changed. The listener is called with one of [the current app state values](/docs/appstate.md#app-states).

### `memoryWarning`[‚Äã](#memorywarning "Direct link to memorywarning")

This event is used in the need of throwing memory warning or releasing it.

### `focus`Android[‚Äã](#focus-android "Direct link to focus-android")

Received when the app gains focus (the user is interacting with the app).

### `blur`Android[‚Äã](#blur-android "Direct link to blur-android")

Received when the user is not actively interacting with the app. Useful in situations when the user pulls down the [notification drawer](https://developer.android.com/guide/topics/ui/notifiers/notifications#bar-and-drawer). `AppState` won't change but the `blur` event will get fired.

## Methods[‚Äã](#methods "Direct link to Methods")

### `addEventListener()`[‚Äã](#addeventlistener "Direct link to addeventlistener")

tsx

```
static addEventListener(
  type: AppStateEvent,
  listener: (state: AppStateStatus) => void,
): NativeEventSubscription;
```

Sets up a function that will be called whenever the specified event type on AppState occurs. Valid values for `eventType` are [listed above](#events). Returns the `EventSubscription`.

## Properties[‚Äã](#properties "Direct link to Properties")

### `currentState`[‚Äã](#currentstate "Direct link to currentstate")

tsx

```
static currentState: AppStateStatus;
```


---

# ‚ùå AsyncStorage

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=storage) instead.


---

# BackHandler

The Backhandler API detects hardware button presses for back navigation, lets you register event listeners for the system's back action, and lets you control how your application responds. It is Android-only.

The event subscriptions are called in reverse order (i.e. the last registered subscription is called first).

* **If one subscription returns true,** then subscriptions registered earlier will not be called.
* **If no subscription returns true or none are registered,** it programmatically invokes the default back button functionality to exit the app.

Warning for modal users

If your app shows an opened `Modal`, `BackHandler` will not publish any events ([see `Modal` docs](/docs/modal.md#onrequestclose)).

## Pattern[‚Äã](#pattern "Direct link to Pattern")

tsx

```
const subscription = BackHandler.addEventListener(
  'hardwareBackPress',
  function () {
    /**
     * this.onMainScreen and this.goBack are just examples,
     * you need to use your own implementation here.
     *
     * Typically you would use the navigator here to go to the last state.
     */

    if (!this.onMainScreen()) {
      this.goBack();
      /**
       * When true is returned the event will not be bubbled up
       * & no other back action will execute
       */
      return true;
    }
    /**
     * Returning false will let the event to bubble up & let other event listeners
     * or the system's default back action to be executed.
     */
    return false;
  },
);

// Unsubscribe the listener on unmount
subscription.remove();
```

## Example[‚Äã](#example "Direct link to Example")

The following example implements a scenario where you confirm if the user wants to exit the app:

`BackHandler.addEventListener` creates an event listener & returns a `NativeEventSubscription` object which should be cleared using `NativeEventSubscription.remove` method.

## Usage with React Navigation[‚Äã](#usage-with-react-navigation "Direct link to Usage with React Navigation")

If you are using React Navigation to navigate across different screens, you can follow their guide on [Custom Android back button behaviour](https://reactnavigation.org/docs/custom-android-back-button-handling/)

## Backhandler hook[‚Äã](#backhandler-hook "Direct link to Backhandler hook")

[React Native Hooks](https://github.com/react-native-community/hooks#usebackhandler) has a nice `useBackHandler` hook which will simplify the process of setting up event listeners.

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `addEventListener()`[‚Äã](#addeventlistener "Direct link to addeventlistener")

tsx

```
static addEventListener(
  eventName: BackPressEventName,
  handler: () => boolean | null | undefined,
): NativeEventSubscription;
```

***

### `exitApp()`[‚Äã](#exitapp "Direct link to exitapp")

tsx

```
static exitApp();
```


---

# BoxShadowValue Object Type

The `BoxShadowValue` object is taken by the [`boxShadow`](/docs/view-style-props.md#boxshadow) style prop. It is comprised of 2-4 lengths, an optional color, and an optional `inset` boolean. These values collectively define the box shadow's color, position, size, and blurriness.

## Example[‚Äã](#example "Direct link to Example")

js

```
{
  offsetX: 10,
  offsetY: -3,
  blurRadius: '15px',
  spreadDistance: '10px',
  color: 'red',
  inset: true,
}
```

## Keys and values[‚Äã](#keys-and-values "Direct link to Keys and values")

### `offsetX`[‚Äã](#offsetx "Direct link to offsetx")

The offset on the x-axis. This can be positive or negative. A positive value indicates right and negative indicates left.

| Type             | Optional |
| ---------------- | -------- |
| number \| string | No       |

### `offsetY`[‚Äã](#offsety "Direct link to offsety")

The offset on the y-axis. This can be positive or negative. A positive value indicates up and negative indicates down.

| Type             | Optional |
| ---------------- | -------- |
| number \| string | No       |

### `blurRadius`[‚Äã](#blurradius "Direct link to blurradius")

Represents the radius used in the [Gaussian blur](https://en.wikipedia.org/wiki/Gaussian_blur) algorithm. The larger the value the blurrier the shadow is. Only non-negative values are valid. The default is 0.

| Type             | Optional |
| ---------------- | -------- |
| number \| string | Yes      |

### `spreadDistance`[‚Äã](#spreaddistance "Direct link to spreaddistance")

How much larger or smaller the shadow grows or shrinks. A positive value will grow the shadow, a negative value will shrink the shadow.

| Type             | Optional |
| ---------------- | -------- |
| number \| string | Yes      |

### `color`[‚Äã](#color "Direct link to color")

The color of the shadow. The default is `black`.

| Type                     | Optional |
| ------------------------ | -------- |
| [color](/docs/colors.md) | Yes      |

### `inset`[‚Äã](#inset "Direct link to inset")

Whether the shadow is inset or not. Inset shadows will appear around the inside of the element's border box as opposed to the outside.

| Type    | Optional |
| ------- | -------- |
| boolean | Yes      |

## Used by[‚Äã](#used-by "Direct link to Used by")

* [`boxShadow`](/docs/view-style-props.md#boxshadow)


---

# Speeding up your Build phase

Building your React Native app could be **expensive** and take several minutes of developers time. This can be problematic as your project grows and generally in bigger organizations with multiple React Native developers.

To mitigate this performance hit, this page shares some suggestions on how to **improve your build time**.

info

Please note that those suggestions are advanced feature that requires some amount of understanding of how the native build tools work.

## Build only one ABI during development (Android-only)[‚Äã](#build-only-one-abi-during-development-android-only "Direct link to Build only one ABI during development (Android-only)")

When building your android app locally, by default you build all the 4 [Application Binary Interfaces (ABIs)](https://developer.android.com/ndk/guides/abis) : `armeabi-v7a`, `arm64-v8a`, `x86` & `x86_64`.

However, you probably don't need to build all of them if you're building locally and testing your emulator or on a physical device.

This should reduce your **native build time** by a \~75% factor.

If you're using the React Native CLI, you can add the `--active-arch-only` flag to the `run-android` command. This flag will make sure the correct ABI is picked up from either the running emulator or the plugged in phone. To confirm that this approach is working fine, you'll see a message like `info Detected architectures arm64-v8a` on console.

```
$ yarn react-native run-android --active-arch-only

[ ... ]
info Running jetifier to migrate libraries to AndroidX. You can disable it using "--no-jetifier" flag.
Jetifier found 1037 file(s) to forward-jetify. Using 32 workers...
info JS server already running.
info Detected architectures arm64-v8a
info Installing the app...
```

This mechanism relies on the `reactNativeArchitectures` Gradle property.

Therefore, if you're building directly with Gradle from the command line and without the CLI, you can specify the ABI you want to build as follows:

```
$ ./gradlew :app:assembleDebug -PreactNativeArchitectures=x86,x86_64
```

This can be useful if you wish to build your Android App on a CI and use a matrix to parallelize the build of the different architectures.

If you wish, you can also override this value locally, using the `gradle.properties` file you have in the [top-level folder](https://github.com/facebook/react-native/blob/19cf70266eb8ca151aa0cc46ac4c09cb987b2ceb/template/android/gradle.properties#L30-L33) of your project:

```
# Use this property to specify which architecture you want to build.
# You can also override it from the CLI using
# ./gradlew <task> -PreactNativeArchitectures=x86_64
reactNativeArchitectures=armeabi-v7a,arm64-v8a,x86,x86_64
```

Once you build a **release version** of your app, don't forget to remove those flags as you want to build an apk/app bundle that works for all the ABIs and not only for the one you're using in your daily development workflow.

## Enable Configuration Caching (Android-only)[‚Äã](#enable-configuration-caching-android-only "Direct link to Enable Configuration Caching (Android-only)")

Since React Native 0.79, you can also enable Gradle Configuration Caching.

When you‚Äôre running an Android build with `yarn android`, you will be executing a Gradle build that is composed by two steps ([source](https://docs.gradle.org/current/userguide/build_lifecycle.html)):

* Configuration phase, when all the `.gradle` files are evaluated.
* Execution phase, when the tasks are actually executed so the Java/Kotlin code is compiled and so on.

You will now be able to enable Configuration Caching, which will allow you to skip the Configuration phase on subsequent builds.

This is beneficial when making frequent changes to the native code as it improves build times.

For example here you can see how rebuilding faster it is to rebuild RN-Tester after a change in the native code:

![gradle config caching](/assets/images/gradle-config-caching-dd203827a57e8eb16b2b26c02a0725d8.gif)

You can enable Gradle Configuration Caching by adding the following line in your `android/gradle.properties` file:

```
org.gradle.configuration-cache=true
```

Please refer to the [official Gradle documentation](https://docs.gradle.org/current/userguide/configuration_cache.html) for more resources on Configuration Caching.

## Using a Maven Mirror (Android-only)[‚Äã](#using-a-maven-mirror-android-only "Direct link to Using a Maven Mirror (Android-only)")

When building Android apps, your Gradle builds will need to download the necessary dependencies from Maven Central and other repositories from the internet.

If your organization is running a Maven repository mirror, you should consider using it as it will speed up your build, by downloading the artifacts from the mirror rather than from the internet.

You can configure a mirror by specifying the `exclusiveEnterpriseRepository` property in your `android/gradle.properties` file:

diff

```
# Use this property to enable or disable the Hermes JS engine.
# If set to false, you will be using JSC instead.
hermesEnabled=true

# Use this property to configure a Maven enterprise repository
# that will be used exclusively to fetch all of your dependencies.
+exclusiveEnterpriseRepository=https://my.internal.proxy.net/
```

By setting this property, your build will fetch dependencies **exclusively** from your specified repository and not from others.

## Use a compiler cache[‚Äã](#use-a-compiler-cache "Direct link to Use a compiler cache")

If you're running frequent native builds (either C++ or Objective-C), you might benefit from using a **compiler cache**.

Specifically you can use two type of caches: local compiler caches and distributed compiler caches.

### Local caches[‚Äã](#local-caches "Direct link to Local caches")

info

The following instructions will work for **both Android & iOS**. If you're building only Android apps, you should be good to go. If you're building also iOS apps, please follow the instructions in the [Xcode Specific Setup](#xcode-specific-setup) section below.

We suggest to use [**ccache**](https://ccache.dev/) to cache the compilation of your native builds. Ccache works by wrapping the C++ compilers, storing the compilation results, and skipping the compilation if an intermediate compilation result was originally stored.

Ccache is available in the package manager for most operating systems. On macOS, we can install ccache with `brew install ccache`. Or you can follow the [official installation instructions](https://github.com/ccache/ccache/blob/master/doc/INSTALL.md) to install from source.

You can then do two clean builds (e.g. on Android you can first run `yarn react-native run-android`, delete the `android/app/build` folder and run the first command once more). You will notice that the second build was way faster than the first one (it should take seconds rather than minutes). While building, you can verify that `ccache` works correctly and check the cache hits/miss rate `ccache -s`

```
$ ccache -s
Summary:
  Hits:             196 /  3068 (6.39 %)
    Direct:           0 /  3068 (0.00 %)
    Preprocessed:   196 /  3068 (6.39 %)
  Misses:          2872
    Direct:        3068
    Preprocessed:  2872
  Uncacheable:        1
Primary storage:
  Hits:             196 /  6136 (3.19 %)
  Misses:          5940
  Cache size (GB): 0.60 / 20.00 (3.00 %)
```

Note that `ccache` aggregates the stats over all builds. You can use `ccache --zero-stats` to reset them before a build to verify the cache-hit ratio.

Should you need to wipe your cache, you can do so with `ccache --clear`

#### Xcode Specific Setup[‚Äã](#xcode-specific-setup "Direct link to Xcode Specific Setup")

To make sure `ccache` works correctly with iOS and Xcode, you need to enable React Native support for ccache in `ios/Podfile`.

Open `ios/Podfile` in your editor and uncomment the `ccache_enabled` line.

ruby

```
  post_install do |installer|
    # https://github.com/facebook/react-native/blob/main/packages/react-native/scripts/react_native_pods.rb#L197-L202
    react_native_post_install(
      installer,
      config[:reactNativePath],
      :mac_catalyst_enabled => false,
      # TODO: Uncomment the line below
      :ccache_enabled => true
    )
  end
```

#### Using this approach on a CI[‚Äã](#using-this-approach-on-a-ci "Direct link to Using this approach on a CI")

Ccache uses the `/Users/$USER/Library/Caches/ccache` folder on macOS to store the cache. Therefore you could save & restore the corresponding folder also on CI to speedup your builds.

However, there are a couple of things to be aware:

1. On CI, we recommend to do a full clean build, to avoid poisoned cache problems. If you follow the approach mentioned in the previous paragraph, you should be able to parallelize the native build on 4 different ABIs and you will most likely not need `ccache` on CI.

2. `ccache` relies on timestamps to compute a cache hit. This doesn't work well on CI as files are re-downloaded at every CI run. To overcome this, you'll need to use the `compiler_check content` option which relies instead on [hashing the content of the file](https://ccache.dev/manual/4.3.html).

### Distributed caches[‚Äã](#distributed-caches "Direct link to Distributed caches")

Similar to local caches, you might want to consider using a distributed cache for your native builds. This could be specifically useful in bigger organizations that are doing frequent native builds.

We recommend to use [sccache](https://github.com/mozilla/sccache) to achieve this. We defer to the sccache [distributed compilation quickstart](https://github.com/mozilla/sccache/blob/main/docs/DistributedQuickstart.md) for instructions on how to setup and use this tool.


---

# Building For TV Devices

TV devices support has been implemented with the intention of making existing React Native applications work on Apple TV and Android TV, with few or no changes needed in the JavaScript code for the applications.

Deprecated

TV support has moved to the [React Native for TV](https://github.com/react-native-tvos/react-native-tvos#readme) repository. Please see the **README** there for information on projects for Apple TV or Android TV.


---

# Button

A basic button component that should render nicely on any platform. Supports a minimal level of customization.

If this button doesn't look right for your app, you can build your own button using [Pressable](/docs/pressable.md). For inspiration, look at the [source code for the Button component](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Components/Button.js).

tsx

```
<Button
  onPress={onPressLearnMore}
  title="Learn More"
  color="#841584"
  accessibilityLabel="Learn more about this purple button"
/>
```

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### Require&#x64;**`onPress`**[‚Äã](#requiredonpress "Direct link to requiredonpress")

Handler to be called when the user taps the button.

| Type                          |
| ----------------------------- |
| `({nativeEvent: PressEvent})` |

***

### Require&#x64;**`title`**[‚Äã](#requiredtitle "Direct link to requiredtitle")

Text to display inside the button. On Android the given title will be converted to the uppercased form.

| Type   |
| ------ |
| string |

***

### `accessibilityLabel`[‚Äã](#accessibilitylabel "Direct link to accessibilitylabel")

Text to display for blindness accessibility features.

| Type   |
| ------ |
| string |

***

### `accessibilityLanguage`iOS[‚Äã](#accessibilitylanguage-ios "Direct link to accessibilitylanguage-ios")

A value indicating which language should be used by the screen reader when the user interacts with the element. It should follow the [BCP 47 specification](https://www.rfc-editor.org/info/bcp47).

See the [iOS `accessibilityLanguage` doc](https://developer.apple.com/documentation/objectivec/nsobject/1615192-accessibilitylanguage) for more information.

| Type   |
| ------ |
| string |

***

### `accessibilityActions`[‚Äã](#accessibilityactions "Direct link to accessibilityactions")

Accessibility actions allow an assistive technology to programmatically invoke the actions of a component. The `accessibilityActions` property should contain a list of action objects. Each action object should contain the field name and label.

See the [Accessibility guide](/docs/accessibility.md#accessibility-actions) for more information.

| Type  | Required |
| ----- | -------- |
| array | No       |

***

### `onAccessibilityAction`[‚Äã](#onaccessibilityaction "Direct link to onaccessibilityaction")

Invoked when the user performs the accessibility actions. The only argument to this function is an event containing the name of the action to perform.

See the [Accessibility guide](/docs/accessibility.md#accessibility-actions) for more information.

| Type     | Required |
| -------- | -------- |
| function | No       |

***

### `color`[‚Äã](#color "Direct link to color")

Color of the text (iOS), or background color of the button (Android).

<!-- -->

| Type                     | Default                             |
| ------------------------ | ----------------------------------- |
| [color](/docs/colors.md) | `'#2196F3'`Android***`'#007AFF'`iOS |

***

### `disabled`[‚Äã](#disabled "Direct link to disabled")

If `true`, disable all interactions for this component.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `hasTVPreferredFocus`TV[‚Äã](#hastvpreferredfocus-tv "Direct link to hastvpreferredfocus-tv")

TV preferred focus.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `nextFocusDown`AndroidTV[‚Äã](#nextfocusdown-androidtv "Direct link to nextfocusdown-androidtv")

Designates the next view to receive focus when the user navigates down. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusDown).

| Type   |
| ------ |
| number |

***

### `nextFocusForward`AndroidTV[‚Äã](#nextfocusforward-androidtv "Direct link to nextfocusforward-androidtv")

Designates the next view to receive focus when the user navigates forward. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusForward).

| Type   |
| ------ |
| number |

***

### `nextFocusLeft`AndroidTV[‚Äã](#nextfocusleft-androidtv "Direct link to nextfocusleft-androidtv")

Designates the next view to receive focus when the user navigates left. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusLeft).

| Type   |
| ------ |
| number |

***

### `nextFocusRight`AndroidTV[‚Äã](#nextfocusright-androidtv "Direct link to nextfocusright-androidtv")

Designates the next view to receive focus when the user navigates right. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusRight).

| Type   |
| ------ |
| number |

***

### `nextFocusUp`AndroidTV[‚Äã](#nextfocusup-androidtv "Direct link to nextfocusup-androidtv")

Designates the next view to receive focus when the user navigates up. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusUp).

| Type   |
| ------ |
| number |

***

### `testID`[‚Äã](#testid "Direct link to testid")

Used to locate this view in end-to-end tests.

| Type   |
| ------ |
| string |

***

### `touchSoundDisabled`Android[‚Äã](#touchsounddisabled-android "Direct link to touchsounddisabled-android")

If `true`, doesn't play system sound on touch.

| Type    | Default |
| ------- | ------- |
| boolean | `false` |


---

# ‚ùå CheckBox

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=checkbox) instead.


---

# ‚ùå Clipboard

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=clipboard) instead.


---

# Color Reference

Components in React Native are [styled using JavaScript](/docs/style.md). Color properties usually match how [CSS works on the web](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). General guides on the color usage on each platform could be found below:

* [Android](https://material.io/design/color/color-usage.html)
* [iOS](https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/color/)

## Color APIs[‚Äã](#color-apis "Direct link to Color APIs")

React Native has several color APIs designed to allow you to take full advantage of your platform's design and user preferences.

* [PlatformColor](/docs/platformcolor.md) lets you reference the platform's color system.
* [DynamicColorIOS](/docs/dynamiccolorios.md) is iOS specific and allows you to specify which colors should be used in light or Dark Mode.

## Color representations[‚Äã](#color-representations "Direct link to Color representations")

### Red Green Blue (RGB)[‚Äã](#red-green-blue-rgb "Direct link to Red Green Blue (RGB)")

React Native supports `rgb()` and `rgba()` in both hexadecimal and functional notation:

* `'#f0f'` (#rgb)
* `'#ff00ff'` (#rrggbb)
* `'#f0ff'` (#rgba)
* `'#ff00ff00'` (#rrggbbaa)
* `'rgb(255, 0, 255)'`
* `'rgb(255 0 255)'`
* `'rgba(255, 0, 255, 1.0)'`
* `'rgba(255 0 255 / 1.0)'`

### Hue Saturation Lightness (HSL)[‚Äã](#hue-saturation-lightness-hsl "Direct link to Hue Saturation Lightness (HSL)")

React Native supports `hsl()` and `hsla()` in functional notation:

* `'hsl(360, 100%, 100%)'`
* `'hsl(360 100% 100%)'`
* `'hsla(360, 100%, 100%, 1.0)'`
* `'hsla(360 100% 100% / 1.0)'`

### Hue Whiteness Blackness (HWB)[‚Äã](#hue-whiteness-blackness-hwb "Direct link to Hue Whiteness Blackness (HWB)")

React Native supports `hwb()` in functional notation:

* `'hwb(0, 0%, 100%)'`
* `'hwb(360, 100%, 100%)'`
* `'hwb(0 0% 0%)'`
* `'hwb(70 50% 0%)'`

### Color ints[‚Äã](#color-ints "Direct link to Color ints")

React Native supports also colors as an `int` values (in RGB color mode):

* `0xff00ff00` (0xrrggbbaa)

caution

This might appear similar to the Android [Color](https://developer.android.com/reference/android/graphics/Color) ints representation but on Android values are stored in SRGB color mode (0xaarrggbb).

### Named colors[‚Äã](#named-colors "Direct link to Named colors")

In React Native you can also use color name strings as values.

info

React Native only supports lowercase color names. Uppercase color names are not supported.

#### `transparent`[‚Äã](#transparent "Direct link to transparent")

This is a shortcut for `rgba(0,0,0,0)`, same like in [CSS3](https://www.w3.org/TR/css-color-3/#transparent).

#### Color keywords[‚Äã](#color-keywords "Direct link to Color keywords")

Named colors implementation follows the [CSS3/SVG specification](https://www.w3.org/TR/css-color-3/#svg-color):

* aliceblue (`#f0f8ff`)
* antiquewhite (`#faebd7`)
* aqua (`#00ffff`)
* aquamarine (`#7fffd4`)
* azure (`#f0ffff`)
* beige (`#f5f5dc`)
* bisque (`#ffe4c4`)
* black (`#000000`)
* blanchedalmond (`#ffebcd`)
* blue (`#0000ff`)
* blueviolet (`#8a2be2`)
* brown (`#a52a2a`)
* burlywood (`#deb887`)
* cadetblue (`#5f9ea0`)
* chartreuse (`#7fff00`)
* chocolate (`#d2691e`)
* coral (`#ff7f50`)
* cornflowerblue (`#6495ed`)
* cornsilk (`#fff8dc`)
* crimson (`#dc143c`)
* cyan (`#00ffff`)
* darkblue (`#00008b`)
* darkcyan (`#008b8b`)
* darkgoldenrod (`#b8860b`)
* darkgray (`#a9a9a9`)
* darkgreen (`#006400`)
* darkgrey (`#a9a9a9`)
* darkkhaki (`#bdb76b`)
* darkmagenta (`#8b008b`)
* darkolivegreen (`#556b2f`)
* darkorange (`#ff8c00`)
* darkorchid (`#9932cc`)
* darkred (`#8b0000`)
* darksalmon (`#e9967a`)
* darkseagreen (`#8fbc8f`)
* darkslateblue (`#483d8b`)
* darkslategrey (`#2f4f4f`)
* darkturquoise (`#00ced1`)
* darkviolet (`#9400d3`)
* deeppink (`#ff1493`)
* deepskyblue (`#00bfff`)
* dimgray (`#696969`)
* dimgrey (`#696969`)
* dodgerblue (`#1e90ff`)
* firebrick (`#b22222`)
* floralwhite (`#fffaf0`)
* forestgreen (`#228b22`)
* fuchsia (`#ff00ff`)
* gainsboro (`#dcdcdc`)
* ghostwhite (`#f8f8ff`)
* gold (`#ffd700`)
* goldenrod (`#daa520`)
* gray (`#808080`)
* green (`#008000`)
* greenyellow (`#adff2f`)
* grey (`#808080`)
* honeydew (`#f0fff0`)
* hotpink (`#ff69b4`)
* indianred (`#cd5c5c`)
* indigo (`#4b0082`)
* ivory (`#fffff0`)
* khaki (`#f0e68c`)
* lavender (`#e6e6fa`)
* lavenderblush (`#fff0f5`)
* lawngreen (`#7cfc00`)
* lemonchiffon (`#fffacd`)
* lightblue (`#add8e6`)
* lightcoral (`#f08080`)
* lightcyan (`#e0ffff`)
* lightgoldenrodyellow (`#fafad2`)
* lightgray (`#d3d3d3`)
* lightgreen (`#90ee90`)
* lightgrey (`#d3d3d3`)
* lightpink (`#ffb6c1`)
* lightsalmon (`#ffa07a`)
* lightseagreen (`#20b2aa`)
* lightskyblue (`#87cefa`)
* lightslategrey (`#778899`)
* lightsteelblue (`#b0c4de`)
* lightyellow (`#ffffe0`)
* lime (`#00ff00`)
* limegreen (`#32cd32`)
* linen (`#faf0e6`)
* magenta (`#ff00ff`)
* maroon (`#800000`)
* mediumaquamarine (`#66cdaa`)
* mediumblue (`#0000cd`)
* mediumorchid (`#ba55d3`)
* mediumpurple (`#9370db`)
* mediumseagreen (`#3cb371`)
* mediumslateblue (`#7b68ee`)
* mediumspringgreen (`#00fa9a`)
* mediumturquoise (`#48d1cc`)
* mediumvioletred (`#c71585`)
* midnightblue (`#191970`)
* mintcream (`#f5fffa`)
* mistyrose (`#ffe4e1`)
* moccasin (`#ffe4b5`)
* navajowhite (`#ffdead`)
* navy (`#000080`)
* oldlace (`#fdf5e6`)
* olive (`#808000`)
* olivedrab (`#6b8e23`)
* orange (`#ffa500`)
* orangered (`#ff4500`)
* orchid (`#da70d6`)
* palegoldenrod (`#eee8aa`)
* palegreen (`#98fb98`)
* paleturquoise (`#afeeee`)
* palevioletred (`#db7093`)
* papayawhip (`#ffefd5`)
* peachpuff (`#ffdab9`)
* peru (`#cd853f`)
* pink (`#ffc0cb`)
* plum (`#dda0dd`)
* powderblue (`#b0e0e6`)
* purple (`#800080`)
* rebeccapurple (`#663399`)
* red (`#ff0000`)
* rosybrown (`#bc8f8f`)
* royalblue (`#4169e1`)
* saddlebrown (`#8b4513`)
* salmon (`#fa8072`)
* sandybrown (`#f4a460`)
* seagreen (`#2e8b57`)
* seashell (`#fff5ee`)
* sienna (`#a0522d`)
* silver (`#c0c0c0`)
* skyblue (`#87ceeb`)
* slateblue (`#6a5acd`)
* slategray (`#708090`)
* snow (`#fffafa`)
* springgreen (`#00ff7f`)
* steelblue (`#4682b4`)
* tan (`#d2b48c`)
* teal (`#008080`)
* thistle (`#d8bfd8`)
* tomato (`#ff6347`)
* turquoise (`#40e0d0`)
* violet (`#ee82ee`)
* wheat (`#f5deb3`)
* white (`#ffffff`)
* whitesmoke (`#f5f5f5`)
* yellow (`#ffff00`)
* yellowgreen (`#9acd32`)


---

# Communication between native and React Native

In [Integrating with Existing Apps guide](/docs/integration-with-existing-apps.md) and [Native UI Components guide](/docs/legacy/native-components-android.md) we learn how to embed React Native in a native component and vice versa. When we mix native and React Native components, we'll eventually find a need to communicate between these two worlds. Some ways to achieve that have been already mentioned in other guides. This article summarizes available techniques.

## Introduction[‚Äã](#introduction "Direct link to Introduction")

React Native is inspired by React, so the basic idea of the information flow is similar. The flow in React is one-directional. We maintain a hierarchy of components, in which each component depends only on its parent and its own internal state. We do this with properties: data is passed from a parent to its children in a top-down manner. If an ancestor component relies on the state of its descendant, one should pass down a callback to be used by the descendant to update the ancestor.

The same concept applies to React Native. As long as we are building our application purely within the framework, we can drive our app with properties and callbacks. But, when we mix React Native and native components, we need some specific, cross-language mechanisms that would allow us to pass information between them.

## Properties[‚Äã](#properties "Direct link to Properties")

Properties are the most straightforward way of cross-component communication. So we need a way to pass properties both from native to React Native, and from React Native to native.

### Passing properties from native to React Native[‚Äã](#passing-properties-from-native-to-react-native "Direct link to Passing properties from native to React Native")

You can pass properties down to the React Native app by providing a custom implementation of `ReactActivityDelegate` in your main activity. This implementation should override `getLaunchOptions` to return a `Bundle` with the desired properties.

* Java
* Kotlin

java

```
public class MainActivity extends ReactActivity {
  @Override
  protected ReactActivityDelegate createReactActivityDelegate() {
    return new ReactActivityDelegate(this, getMainComponentName()) {
      @Override
      protected Bundle getLaunchOptions() {
        Bundle initialProperties = new Bundle();
        ArrayList<String> imageList = new ArrayList<String>(Arrays.asList(
                "https://dummyimage.com/600x400/ffffff/000000.png",
                "https://dummyimage.com/600x400/000000/ffffff.png"
        ));
        initialProperties.putStringArrayList("images", imageList);
        return initialProperties;
      }
    };
  }
}
```

kotlin

```
class MainActivity : ReactActivity() {
    override fun createReactActivityDelegate(): ReactActivityDelegate {
        return object : ReactActivityDelegate(this, mainComponentName) {
            override fun getLaunchOptions(): Bundle {
                val imageList = arrayListOf("https://dummyimage.com/600x400/ffffff/000000.png", "https://dummyimage.com/600x400/000000/ffffff.png")
                val initialProperties = Bundle().apply { putStringArrayList("images", imageList) }
                return initialProperties
            }
        }
    }
}
```

tsx

```
import React from 'react';
import {View, Image} from 'react-native';

export default class ImageBrowserApp extends React.Component {
  renderImage(imgURI) {
    return <Image source={{uri: imgURI}} />;
  }
  render() {
    return <View>{this.props.images.map(this.renderImage)}</View>;
  }
}
```

`ReactRootView` provides a read-write property `appProperties`. After `appProperties` is set, the React Native app is re-rendered with new properties. The update is only performed when the new updated properties differ from the previous ones.

* Java
* Kotlin

java

```
Bundle updatedProps = mReactRootView.getAppProperties();
ArrayList<String> imageList = new ArrayList<String>(Arrays.asList(
        "https://dummyimage.com/600x400/ff0000/000000.png",
        "https://dummyimage.com/600x400/ffffff/ff0000.png"
));
updatedProps.putStringArrayList("images", imageList);

mReactRootView.setAppProperties(updatedProps);
```

kotlin

```
var updatedProps: Bundle = reactRootView.getAppProperties()
var imageList = arrayListOf("https://dummyimage.com/600x400/ff0000/000000.png", "https://dummyimage.com/600x400/ffffff/ff0000.png")
```

It is fine to update properties anytime. However, updates have to be performed on the main thread. You use the getter on any thread.

There is no way to update only a few properties at a time. We suggest that you build it into your own wrapper instead.

info

Currently, JS function `componentWillUpdateProps` of the top level RN component will not be called after a prop update. However, you can access the new props in `componentDidMount` function.

### Passing properties from React Native to native[‚Äã](#passing-properties-from-react-native-to-native "Direct link to Passing properties from React Native to native")

The problem exposing properties of native components is covered in detail in [this article](/docs/legacy/native-components-android.md#3-expose-view-property-setters-using-reactprop-or-reactpropgroup-annotation). In short, properties that are to be reflected in JavaScript needs to be exposed as setter method annotated with `@ReactProp`, then use them in React Native as if the component was an ordinary React Native component.

### Limits of properties[‚Äã](#limits-of-properties "Direct link to Limits of properties")

The main drawback of cross-language properties is that they do not support callbacks, which would allow us to handle bottom-up data bindings. Imagine you have a small RN view that you want to be removed from the native parent view as a result of a JS action. There is no way to do that with props, as the information would need to go bottom-up.

Although we have a flavor of cross-language callbacks ([described here](/docs/legacy/native-modules-android.md#callbacks)), these callbacks are not always the thing we need. The main problem is that they are not intended to be passed as properties. Rather, this mechanism allows us to trigger a native action from JS, and handle the result of that action in JS.

## Other ways of cross-language interaction (events and native modules)[‚Äã](#other-ways-of-cross-language-interaction-events-and-native-modules "Direct link to Other ways of cross-language interaction (events and native modules)")

As stated in the previous chapter, using properties comes with some limitations. Sometimes properties are not enough to drive the logic of our app and we need a solution that gives more flexibility. This chapter covers other communication techniques available in React Native. They can be used for internal communication (between JS and native layers in RN) as well as for external communication (between RN and the 'pure native' part of your app).

React Native enables you to perform cross-language function calls. You can execute custom native code from JS and vice versa. Unfortunately, depending on the side we are working on, we achieve the same goal in different ways. For native - we use events mechanism to schedule an execution of a handler function in JS, while for React Native we directly call methods exported by native modules.

### Calling React Native functions from native (events)[‚Äã](#calling-react-native-functions-from-native-events "Direct link to Calling React Native functions from native (events)")

Events are described in detail in [this article](/docs/legacy/native-components-android.md#events). Note that using events gives us no guarantees about execution time, as the event is handled on a separate thread.

Events are powerful, because they allow us to change React Native components without needing a reference to them. However, there are some pitfalls that you can fall into while using them:

* As events can be sent from anywhere, they can introduce spaghetti-style dependencies into your project.
* Events share namespace, which means that you may encounter some name collisions. Collisions will not be detected statically, which makes them hard to debug.
* If you use several instances of the same React Native component and you want to distinguish them from the perspective of your event, you'll likely need to introduce identifiers and pass them along with events (you can use the native view's `reactTag` as an identifier).

### Calling native functions from React Native (native modules)[‚Äã](#calling-native-functions-from-react-native-native-modules "Direct link to Calling native functions from React Native (native modules)")

Native modules are Java/Kotlin classes that are available in JS. Typically one instance of each module is created per JS bridge. They can export arbitrary functions and constants to React Native. They have been covered in detail in [this article](/docs/legacy/native-modules-android.md).

warning

All native modules share the same namespace. Watch out for name collisions when creating new ones.


---

# Communication between native and React Native

In [Integrating with Existing Apps guide](/docs/integration-with-existing-apps.md) and [Native UI Components guide](/docs/legacy/native-components-ios.md) we learn how to embed React Native in a native component and vice versa. When we mix native and React Native components, we'll eventually find a need to communicate between these two worlds. Some ways to achieve that have been already mentioned in other guides. This article summarizes available techniques.

## Introduction[‚Äã](#introduction "Direct link to Introduction")

React Native is inspired by React, so the basic idea of the information flow is similar. The flow in React is one-directional. We maintain a hierarchy of components, in which each component depends only on its parent and its own internal state. We do this with properties: data is passed from a parent to its children in a top-down manner. If an ancestor component relies on the state of its descendant, one should pass down a callback to be used by the descendant to update the ancestor.

The same concept applies to React Native. As long as we are building our application purely within the framework, we can drive our app with properties and callbacks. But, when we mix React Native and native components, we need some specific, cross-language mechanisms that would allow us to pass information between them.

## Properties[‚Äã](#properties "Direct link to Properties")

Properties are the most straightforward way of cross-component communication. So we need a way to pass properties both from native to React Native, and from React Native to native.

### Passing properties from native to React Native[‚Äã](#passing-properties-from-native-to-react-native "Direct link to Passing properties from native to React Native")

In order to embed a React Native view in a native component, we use `RCTRootView`. `RCTRootView` is a `UIView` that holds a React Native app. It also provides an interface between native side and the hosted app.

`RCTRootView` has an initializer that allows you to pass arbitrary properties down to the React Native app. The `initialProperties` parameter has to be an instance of `NSDictionary`. The dictionary is internally converted into a JSON object that the top-level JS component can reference.

objectivec

```
NSArray *imageList = @[@"https://dummyimage.com/600x400/ffffff/000000.png",
                       @"https://dummyimage.com/600x400/000000/ffffff.png"];

NSDictionary *props = @{@"images" : imageList};

RCTRootView *rootView = [[RCTRootView alloc] initWithBridge:bridge
                                                 moduleName:@"ImageBrowserApp"
                                          initialProperties:props];
```

tsx

```
import React from 'react';
import {View, Image} from 'react-native';

export default class ImageBrowserApp extends React.Component {
  renderImage(imgURI) {
    return <Image source={{uri: imgURI}} />;
  }
  render() {
    return <View>{this.props.images.map(this.renderImage)}</View>;
  }
}
```

`RCTRootView` also provides a read-write property `appProperties`. After `appProperties` is set, the React Native app is re-rendered with new properties. The update is only performed when the new updated properties differ from the previous ones.

objectivec

```
NSArray *imageList = @[@"https://dummyimage.com/600x400/ff0000/000000.png",
                       @"https://dummyimage.com/600x400/ffffff/ff0000.png"];

rootView.appProperties = @{@"images" : imageList};
```

It is fine to update properties anytime. However, updates have to be performed on the main thread. You use the getter on any thread.

note

Currently, there is a known issue where setting appProperties during the bridge startup, the change can be lost. See <https://github.com/facebook/react-native/issues/20115> for more information.

There is no way to update only a few properties at a time. We suggest that you build it into your own wrapper instead.

### Passing properties from React Native to native[‚Äã](#passing-properties-from-react-native-to-native "Direct link to Passing properties from React Native to native")

The problem exposing properties of native components is covered in detail in [this article](/docs/legacy/native-components-ios.md#properties). In short, export properties with `RCT_CUSTOM_VIEW_PROPERTY` macro in your custom native component, then use them in React Native as if the component was an ordinary React Native component.

### Limits of properties[‚Äã](#limits-of-properties "Direct link to Limits of properties")

The main drawback of cross-language properties is that they do not support callbacks, which would allow us to handle bottom-up data bindings. Imagine you have a small RN view that you want to be removed from the native parent view as a result of a JS action. There is no way to do that with props, as the information would need to go bottom-up.

Although we have a flavor of cross-language callbacks ([described here](/docs/legacy/native-modules-ios.md#callbacks)), these callbacks are not always the thing we need. The main problem is that they are not intended to be passed as properties. Rather, this mechanism allows us to trigger a native action from JS, and handle the result of that action in JS.

## Other ways of cross-language interaction (events and native modules)[‚Äã](#other-ways-of-cross-language-interaction-events-and-native-modules "Direct link to Other ways of cross-language interaction (events and native modules)")

As stated in the previous chapter, using properties comes with some limitations. Sometimes properties are not enough to drive the logic of our app and we need a solution that gives more flexibility. This chapter covers other communication techniques available in React Native. They can be used for internal communication (between JS and native layers in RN) as well as for external communication (between RN and the 'pure native' part of your app).

React Native enables you to perform cross-language function calls. You can execute custom native code from JS and vice versa. Unfortunately, depending on the side we are working on, we achieve the same goal in different ways. For native - we use events mechanism to schedule an execution of a handler function in JS, while for React Native we directly call methods exported by native modules.

### Calling React Native functions from native (events)[‚Äã](#calling-react-native-functions-from-native-events "Direct link to Calling React Native functions from native (events)")

Events are described in detail in [this article](/docs/legacy/native-components-ios.md#events). Note that using events gives us no guarantees about execution time, as the event is handled on a separate thread.

Events are powerful, because they allow us to change React Native components without needing a reference to them. However, there are some pitfalls that you can fall into while using them:

* As events can be sent from anywhere, they can introduce spaghetti-style dependencies into your project.
* Events share namespace, which means that you may encounter some name collisions. Collisions will not be detected statically, which makes them hard to debug.
* If you use several instances of the same React Native component and you want to distinguish them from the perspective of your event, you'll likely need to introduce identifiers and pass them along with events (you can use the native view's `reactTag` as an identifier).

The common pattern we use when embedding native in React Native is to make the native component's RCTViewManager a delegate for the views, sending events back to JavaScript via the bridge. This keeps related event calls in one place.

### Calling native functions from React Native (native modules)[‚Äã](#calling-native-functions-from-react-native-native-modules "Direct link to Calling native functions from React Native (native modules)")

Native modules are Objective-C classes that are available in JS. Typically one instance of each module is created per JS bridge. They can export arbitrary functions and constants to React Native. They have been covered in detail in [this article](/docs/legacy/native-modules-ios.md#content).

The fact that native modules are singletons limits the mechanism in the context of embedding. Let's say we have a React Native component embedded in a native view and we want to update the native, parent view. Using the native module mechanism, we would export a function that not only takes expected arguments, but also an identifier of the parent native view. The identifier would be used to retrieve a reference to the parent view to update. That said, we would need to keep a mapping from identifiers to native views in the module.

Although this solution is complex, it is used in `RCTUIManager`, which is an internal React Native class that manages all React Native views.

Native modules can also be used to expose existing native libraries to JS. The [Geolocation library](https://github.com/michalchudziak/react-native-geolocation) is a living example of the idea.

caution

All native modules share the same namespace. Watch out for name collisions when creating new ones.

## Layout computation flow[‚Äã](#layout-computation-flow "Direct link to Layout computation flow")

When integrating native and React Native, we also need a way to consolidate two different layout systems. This section covers common layout problems and provides a brief description of mechanisms to address them.

### Layout of a native component embedded in React Native[‚Äã](#layout-of-a-native-component-embedded-in-react-native "Direct link to Layout of a native component embedded in React Native")

This case is covered in [this article](/docs/legacy/native-components-ios.md#styles). To summarize, since all our native react views are subclasses of `UIView`, most style and size attributes will work like you would expect out of the box.

### Layout of a React Native component embedded in native[‚Äã](#layout-of-a-react-native-component-embedded-in-native "Direct link to Layout of a React Native component embedded in native")

#### React Native content with fixed size[‚Äã](#react-native-content-with-fixed-size "Direct link to React Native content with fixed size")

The general scenario is when we have a React Native app with a fixed size, which is known to the native side. In particular, a full-screen React Native view falls into this case. If we want a smaller root view, we can explicitly set RCTRootView's frame.

For instance, to make an RN app 200 (logical) pixels high, and the hosting view's width wide, we could do:

SomeViewController.m

```
- (void)viewDidLoad
{
  [...]
  RCTRootView *rootView = [[RCTRootView alloc] initWithBridge:bridge
                                                   moduleName:appName
                                            initialProperties:props];
  rootView.frame = CGRectMake(0, 0, self.view.width, 200);
  [self.view addSubview:rootView];
}
```

When we have a fixed size root view, we need to respect its bounds on the JS side. In other words, we need to ensure that the React Native content can be contained within the fixed-size root view. The easiest way to ensure this is to use Flexbox layout. If you use absolute positioning, and React components are visible outside the root view's bounds, you'll get overlap with native views, causing some features to behave unexpectedly. For instance, 'TouchableHighlight' will not highlight your touches outside the root view's bounds.

It's totally fine to update root view's size dynamically by re-setting its frame property. React Native will take care of the content's layout.

#### React Native content with flexible size[‚Äã](#react-native-content-with-flexible-size "Direct link to React Native content with flexible size")

In some cases we'd like to render content of initially unknown size. Let's say the size will be defined dynamically in JS. We have two solutions to this problem.

1. You can wrap your React Native view in a `ScrollView` component. This guarantees that your content will always be available and it won't overlap with native views.
2. React Native allows you to determine, in JS, the size of the RN app and provide it to the owner of the hosting `RCTRootView`. The owner is then responsible for re-laying out the subviews and keeping the UI consistent. We achieve this with `RCTRootView`'s flexibility modes.

`RCTRootView` supports 4 different size flexibility modes:

RCTRootView\.h

```
typedef NS_ENUM(NSInteger, RCTRootViewSizeFlexibility) {
  RCTRootViewSizeFlexibilityNone = 0,
  RCTRootViewSizeFlexibilityWidth,
  RCTRootViewSizeFlexibilityHeight,
  RCTRootViewSizeFlexibilityWidthAndHeight,
};
```

`RCTRootViewSizeFlexibilityNone` is the default value, which makes a root view's size fixed (but it still can be updated with `setFrame:`). The other three modes allow us to track React Native content's size updates. For instance, setting mode to `RCTRootViewSizeFlexibilityHeight` will cause React Native to measure the content's height and pass that information back to `RCTRootView`'s delegate. An arbitrary action can be performed within the delegate, including setting the root view's frame, so the content fits. The delegate is called only when the size of the content has changed.

caution

Making a dimension flexible in both JS and native leads to undefined behavior. For example - don't make a top-level React component's width flexible (with `flexbox`) while you're using `RCTRootViewSizeFlexibilityWidth` on the hosting `RCTRootView`.

Let's look at an example.

FlexibleSizeExampleView\.m

```
- (instancetype)initWithFrame:(CGRect)frame
{
  [...]

  _rootView = [[RCTRootView alloc] initWithBridge:bridge
  moduleName:@"FlexibilityExampleApp"
  initialProperties:@{}];

  _rootView.delegate = self;
  _rootView.sizeFlexibility = RCTRootViewSizeFlexibilityHeight;
  _rootView.frame = CGRectMake(0, 0, self.frame.size.width, 0);
}

#pragma mark - RCTRootViewDelegate
- (void)rootViewDidChangeIntrinsicSize:(RCTRootView *)rootView
{
  CGRect newFrame = rootView.frame;
  newFrame.size = rootView.intrinsicContentSize;

  rootView.frame = newFrame;
}
```

In the example we have a `FlexibleSizeExampleView` view that holds a root view. We create the root view, initialize it and set the delegate. The delegate will handle size updates. Then, we set the root view's size flexibility to `RCTRootViewSizeFlexibilityHeight`, which means that `rootViewDidChangeIntrinsicSize:` method will be called every time the React Native content changes its height. Finally, we set the root view's width and position. Note that we set there height as well, but it has no effect as we made the height RN-dependent.

You can checkout full source code of the example [here](https://github.com/facebook/react-native/blob/main/packages/rn-tester/RNTester/NativeExampleViews/FlexibleSizeExampleView.mm).

It's fine to change root view's size flexibility mode dynamically. Changing flexibility mode of a root view will schedule a layout recalculation and the delegate `rootViewDidChangeIntrinsicSize:` method will be called once the content size is known.

note

React Native layout calculation is performed on a separate thread, while native UI view updates are done on the main thread. This may cause temporary UI inconsistencies between native and React Native. This is a known problem and our team is working on synchronizing UI updates coming from different sources.

note

React Native does not perform any layout calculations until the root view becomes a subview of some other views. If you want to hide React Native view until its dimensions are known, add the root view as a subview and make it initially hidden (use `UIView`'s `hidden` property). Then change its visibility in the delegate method.


---

# Core Components and APIs

React Native provides a number of built-in [Core Components](/docs/intro-react-native-components.md) ready for you to use in your app. You can find them all in the left sidebar (or menu above, if you are on a narrow screen). If you're not sure where to get started, take a look at the following categories:

* [Basic Components](/docs/components-and-apis.md#basic-components)
* [User Interface](/docs/components-and-apis.md#user-interface)
* [List Views](/docs/components-and-apis.md#list-views)
* [Android-specific](/docs/components-and-apis.md#android-components-and-apis)
* [iOS-specific](/docs/components-and-apis.md#ios-components-and-apis)
* [Others](/docs/components-and-apis.md#others)

You're not limited to the components and APIs bundled with React Native. React Native has a community of thousands of developers. If you're looking for a library that does something specific, please refer to [this guide about finding libraries](/docs/libraries.md#finding-libraries).

## Basic Components[‚Äã](#basic-components "Direct link to Basic Components")

Most apps will end up using one or more of these basic components.

### [View](./view)

[The most fundamental component for building a UI.](./view)

### [Text](./text)

[A component for displaying text.](./text)

### [Image](./image)

[A component for displaying images.](./image)

### [TextInput](./textinput)

[A component for inputting text into the app via a keyboard.](./textinput)

### [Pressable](./pressable)

[A wrapper component that can detect various stages of press interactions on any of its children.](./pressable)

### [ScrollView](./scrollview)

[Provides a scrolling container that can host multiple components and views.](./scrollview)

### [StyleSheet](./stylesheet)

[Provides an abstraction layer similar to CSS stylesheets.](./stylesheet)

## User Interface[‚Äã](#user-interface "Direct link to User Interface")

These common user interface controls will render on any platform.

### [Button](./button)

[A basic button component for handling touches that should render nicely on any platform.](./button)

### [Switch](./switch)

[Renders a boolean input.](./switch)

## List Views[‚Äã](#list-views "Direct link to List Views")

Unlike the more generic [`ScrollView`](/docs/scrollview.md), the following list view components only render elements that are currently showing on the screen. This makes them a performant choice for displaying long lists of data.

### [FlatList](./flatlist)

[A component for rendering performant scrollable lists.](./flatlist)

### [SectionList](./sectionlist)

[Like `FlatList`, but for sectioned lists.](./sectionlist)

## Android Components and APIs[‚Äã](#android-components-and-apis "Direct link to Android Components and APIs")

Many of the following components provide wrappers for commonly used Android classes.

### [BackHandler](./backhandler)

[Detect hardware button presses for back navigation.](./backhandler)

### [DrawerLayoutAndroid](./drawerlayoutandroid)

[Renders a `DrawerLayout` on Android.](./drawerlayoutandroid)

### [PermissionsAndroid](./permissionsandroid)

[Provides access to the permissions model introduced in Android M.](./permissionsandroid)

### [ToastAndroid](./toastandroid)

[Create an Android Toast alert.](./toastandroid)

## iOS Components and APIs[‚Äã](#ios-components-and-apis "Direct link to iOS Components and APIs")

Many of the following components provide wrappers for commonly used UIKit classes.

### [ActionSheetIOS](./actionsheetios)

[API to display an iOS action sheet or share sheet.](./actionsheetios)

## Others[‚Äã](#others "Direct link to Others")

These components may be useful for certain applications. For an exhaustive list of components and APIs, check out the sidebar to the left (or menu above, if you are on a narrow screen).

### [ActivityIndicator](./activityindicator)

[Displays a circular loading indicator.](./activityindicator)

### [Alert](./alert)

[Launches an alert dialog with the specified title and message.](./alert)

### [Animated](./animated)

[A library for creating fluid, powerful animations that are easy to build and maintain.](./animated)

### [Dimensions](./dimensions)

[Provides an interface for getting device dimensions.](./dimensions)

### [KeyboardAvoidingView](./keyboardavoidingview)

[Provides a view that moves out of the way of the virtual keyboard automatically.](./keyboardavoidingview)

### [Linking](./linking)

[Provides a general interface to interact with both incoming and outgoing app links.](./linking)

### [Modal](./modal)

[Provides a simple way to present content above an enclosing view.](./modal)

### [PixelRatio](./pixelratio)

[Provides access to the device pixel density.](./pixelratio)

### [RefreshControl](./refreshcontrol)

[This component is used inside a `ScrollView` to add pull to refresh functionality.](./refreshcontrol)

### [StatusBar](./statusbar)

[Component to control the app status bar.](./statusbar)


---

# ‚ùå DatePickerAndroid

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=datepicker) instead.


---

# ‚ùå DatePickerIOS

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=datepicker) instead.


---

# Debugging Basics

note

Debugging features, such as the Dev Menu, LogBox, and React Native DevTools are disabled in release (production) builds.

## Opening the Dev Menu[‚Äã](#opening-the-dev-menu "Direct link to Opening the Dev Menu")

React Native provides an in-app developer menu providing access to debugging features. You can access the Dev Menu by shaking your device or via keyboard shortcuts:

* iOS Simulator: `Ctrl` + `Cmd ‚åò` + `Z` (or Device > Shake)
* Android emulators: `Cmd ‚åò` + `M` (macOS) or `Ctrl` + `M` (Windows and Linux)

Alternative (Android): `adb shell input keyevent 82`.

![The React Native Dev Menu](/assets/images/debugging-dev-menu-083-70616da2986550a977feb0158f218bdd.jpg)

## Opening DevTools[‚Äã](#opening-devtools "Direct link to Opening DevTools")

[React Native DevTools](/docs/react-native-devtools.md) is our built-in debugger for React Native. It allows you to inspect and understand how your JavaScript code is running, similar to a web browser.

To open DevTools, either:

* Select "Open DevTools" in the Dev Menu.
* Press `j` from the CLI.

![React Native DevTools opened to the \&quot;Welcome\&quot; pane](/assets/images/debugging-rndt-welcome-083-9f56f0124de2d2607022330b0ce41d85.jpg)

On first launch, DevTools will open to a welcome panel, along with an open console drawer where you can view logs and interact with the JavaScript runtime. From the top of the window, you can navigate to other panels, including the integrated React Components Inspector and Profiler.

Learn more in our [React Native DevTools guide](/docs/react-native-devtools.md).

## LogBox[‚Äã](#logbox "Direct link to LogBox")

LogBox is an in-app tool that displays when warnings or errors are logged by your app.

![A LogBox warning and an expanded LogBox syntax error](/assets/images/debugging-logbox-076-0191f48c03cc7b550d749c4f100fab47.jpg)

### Fatal Errors[‚Äã](#fatal-errors "Direct link to Fatal Errors")

When an unrecoverable error occurs, such as a JavaScript syntax error, LogBox will open with the location of the error. In this state, LogBox is not dismissable since your code cannot be executed. LogBox will automatically dismiss once the syntax error is fixed ‚Äî either via Fast Refresh or after a manual reload.

### Console Errors and Warnings[‚Äã](#console-errors-and-warnings "Direct link to Console Errors and Warnings")

Console errors and warnings are displayed as on-screen notifications with a red or yellow badge.

* **Errors** will display with a notification count. Tap the notification to see an expanded view and to paginate through other logs.
* **Warnings** will display a notification banner without details, prompting you to open React Native DevTools.

When React Native DevTools is open, all errors except fatal errors will be hidden to LogBox. We recommend using the Console panel within React Native DevTools as a source of truth, due to various LogBox options which can hide or adjust the level of certain logs.

**üí° Ignoring logs**

LogBox can be configured via the `LogBox` API.

js

```
import {LogBox} from 'react-native';
```

#### Ignore all logs[‚Äã](#ignore-all-logs "Direct link to Ignore all logs")

LogBox notifications can be disabled using `LogBox.ignoreAllLogs()`. This can be useful in situations such as giving product demos.

js

```
LogBox.ignoreAllLogs();
```

#### Ignore specific logs[‚Äã](#ignore-specific-logs "Direct link to Ignore specific logs")

Notifications can be disabled on a per-log basis via `LogBox.ignoreLogs()`. This can be useful for noisy warnings or those that cannot be fixed, e.g. in a third-party dependency.

js

```
LogBox.ignoreLogs([
  // Exact message
  'Warning: componentWillReceiveProps has been renamed',

  // Substring or regex match
  /GraphQL error: .*/,
]);
```

note

LogBox will treat certain errors from React as warnings, which will mean they don't display as an in-app error notification. Advanced users can change this behaviour by customising LogBox's warning filter using [`LogBoxData.setWarningFilter()`](https://github.com/facebook/react-native/blob/d334f4d77eea538dff87fdcf2ebc090246cfdbb0/packages/react-native/Libraries/LogBox/Data/LogBoxData.js#L338).

## Performance Monitor[‚Äã](#performance-monitor "Direct link to Performance Monitor")

On Android and iOS, an in-app performance overlay can be toggled during development by selecting **"Perf Monitor"** in the Dev Menu. Learn more about this feature [here](/docs/performance.md).

![The Performance Monitor overlay on iOS and Android](/assets/images/debugging-performance-monitor-3e0023c343ba59b5f62e563a4aa2741a.jpg)

info

The Performance Monitor runs in-app and is a guide. We recommend investigating the native tooling under Android Studio and Xcode for accurate performance measurements.


---

# Debugging Native Code

### Projects with Native Code Only

The following section only applies to projects with native code exposed. If you are using the managed Expo workflow, see the guide on [prebuild](https://docs.expo.dev/workflow/prebuild/) to use this API.

## Accessing Logs[‚Äã](#accessing-logs "Direct link to Accessing Logs")

You can display the native logs for an iOS or Android app by using the following commands in a terminal while the app is running:

shell

```
# For Android:
npx react-native log-android
# Or, for iOS:
npx react-native log-ios
```

You may also access these through Debug > Open System Log‚Ä¶ in the iOS Simulator or by running `adb logcat "*:S" ReactNative:V ReactNativeJS:V` in a terminal while an Android app is running on a device or emulator.

**üí° Custom Native Logs**

If you are writing a Native Module and want to add custom logs to your module for debugging purposes, you can use the following method:

#### Android (Java/Kotlin)[‚Äã](#android-javakotlin "Direct link to Android (Java/Kotlin)")

In your native module, use the `Log` class to add logs that can be viewed in Logcat:

java

```
import android.util.Log;

private void log(String message) {
    Log.d("YourModuleName", message);
}
```

To view these logs in Logcat, use this command, replacing `YourModuleName` with your custom tag:

shell

```
adb logcat "*:S" ReactNative:V ReactNativeJS:V YourModuleName:D
```

#### iOS (Objective-C/Swift)[‚Äã](#ios-objective-cswift "Direct link to iOS (Objective-C/Swift)")

In your native module, use `NSLog` for custom logs:

objective-c

```
NSLog(@"YourModuleName: %@", message);
```

Or, in Swift:

swift

```
print("YourModuleName: \(message)")
```

These logs will appear in the Xcode console when running the app.

## Debugging in a Native IDE[‚Äã](#debugging-in-a-native-ide "Direct link to Debugging in a Native IDE")

When working with native code, such as when writing native modules, you can launch the app from Android Studio or Xcode and take advantage of the native debugging features (setting up breakpoints, etc.) as you would in case of building a standard native app.

Another option is to run your application using the React Native CLI and attach the native debugger of the native IDE (Android Studio or Xcode) to the process.

### Android Studio[‚Äã](#android-studio "Direct link to Android Studio")

On Android Studio you can do this by going on the "Run" option on the menu bar, clicking on "Attach to Process..." and selecting the running React Native app.

### Xcode[‚Äã](#xcode "Direct link to Xcode")

On Xcode click on "Debug" on the top menu bar, select the "Attach to process" option, and select the application in the list of "Likely Targets".


---

# Debugging Release Builds

## Symbolicating a stack trace[‚Äã](#symbolicating-a-stack-trace "Direct link to Symbolicating a stack trace")

If a React Native app throws an unhandled exception in a release build, the output may be obfuscated and hard to read.

shell

```
07-15 10:58:25.820 18979 18998 E AndroidRuntime: FATAL EXCEPTION: mqt_native_modules
07-15 10:58:25.820 18979 18998 E AndroidRuntime: Process: com.awesomeproject, PID: 18979 07-15 10:58:25.820 18979 18998 E AndroidRuntime: com.facebook.react.common.JavascriptException: Failed, js engine: hermes, stack:
07-15 10:58:25.820 18979 18998 E AndroidRuntime: p@1:132161
07-15 10:58:25.820 18979 18998 E AndroidRuntime: p@1:132084
07-15 10:58:25.820 18979 18998 E AndroidRuntime: f@1:131854
07-15 10:58:25.820 18979 18998 E AndroidRuntime: anonymous@1:131119
```

In the above stack trace, entries like `p@1:132161` are minified function names and bytecode offsets. To debug these calls, we want to translate these into file, line, and function name, e.g. `AwesomeProject/App.js:54:initializeMap`. This is known as **symbolication.**

You can symbolicate minified function names and bytecode like the above by passing the stack trace and a generated source map to [`metro-symbolicate`](http://npmjs.com/package/metro-symbolicate).

### Enabling source maps[‚Äã](#enabling-source-maps "Direct link to Enabling source maps")

Source maps are required to symbolicate stack traces. Make sure that source maps are enabled within the build config for the target platform.

* Android
* iOS

info

On Android, source maps are **enabled** by default.

To enable source map generation, ensure the following `hermesFlags` are present in `android/app/build.gradle`.

groovy

```
react {
    hermesFlags = ["-O", "-output-source-map"]
}
```

If done correctly you should see the output location of the source map during Metro build output.

text

```
Writing bundle output to:, android/app/build/generated/assets/react/release/index.android.bundle
Writing sourcemap output to:, android/app/build/intermediates/sourcemaps/react/release/index.android.bundle.packager.map
```

info

On iOS, source maps are **disabled** by default. Use the following instructions to enable them.

To enable source map generation:

* Open Xcode and edit the build phase "Bundle React Native code and images".
* Above the other exports, add a `SOURCEMAP_FILE` entry with the desired output path.

diff

```
+ export SOURCEMAP_FILE="$(pwd)/../main.jsbundle.map"
  WITH_ENVIRONMENT="../node_modules/react-native/scripts/xcode/with-environment.sh"
```

If done correctly you should see the output location of the source map during Metro build output.

text

```
Writing bundle output to:, Build/Intermediates.noindex/ArchiveIntermediates/application/BuildProductsPath/Release-iphoneos/main.jsbundle
Writing sourcemap output to:, Build/Intermediates.noindex/ArchiveIntermediates/application/BuildProductsPath/Release-iphoneos/main.jsbundle.map
```

### Using `metro-symbolicate`[‚Äã](#using-metro-symbolicate "Direct link to using-metro-symbolicate")

With source maps being generated, we can now translate our stack traces.

shell

```
# Print usage instructions
npx metro-symbolicate

# From a file containing the stack trace
npx metro-symbolicate android/app/build/generated/sourcemaps/react/release/index.android.bundle.map < stacktrace.txt

# From adb logcat (Android)
adb logcat -d | npx metro-symbolicate android/app/build/generated/sourcemaps/react/release/index.android.bundle.map
```

### Notes on source maps[‚Äã](#notes-on-source-maps "Direct link to Notes on source maps")

* Multiple source maps may be generated by the build process. Make sure to use the one in the location shown in the examples.
* Make sure that the source map you use corresponds to the exact commit of the crashing app. Small changes in source code can cause large differences in offsets.
* If `metro-symbolicate` exits immediately with success, make sure the input comes from a pipe or redirection and not from a terminal.


---

# DevSettings

The `DevSettings` module exposes methods for customizing settings for developers in development.

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `addMenuItem()`[‚Äã](#addmenuitem "Direct link to addmenuitem")

tsx

```
static addMenuItem(title: string, handler: () => any);
```

Add a custom menu item to the Dev Menu.

**Parameters:**

| Name            | Type     |
| --------------- | -------- |
| titleRequired   | string   |
| handlerRequired | function |

**Example:**

tsx

```
DevSettings.addMenuItem('Show Secret Dev Screen', () => {
  Alert.alert('Showing secret dev screen!');
});
```

***

### `reload()`[‚Äã](#reload "Direct link to reload")

tsx

```
static reload(reason?: string): void;
```

Reload the application. Can be invoked directly or on user interaction.

**Example:**

tsx

```
<Button title="Reload" onPress={() => DevSettings.reload()} />
```


---

# Dimensions

info

[`useWindowDimensions`](/docs/usewindowdimensions.md) is the preferred API for React components. Unlike `Dimensions`, it updates as the window's dimensions update. This works nicely with the React paradigm.

tsx

```
import {Dimensions} from 'react-native';
```

You can get the application window's width and height using the following code:

tsx

```
const windowWidth = Dimensions.get('window').width;
const windowHeight = Dimensions.get('window').height;
```

note

Although dimensions are available immediately, they may change (e.g due to device rotation, foldable devices etc) so any rendering logic or styles that depend on these constants should try to call this function on every render, rather than caching the value (for example, using inline styles rather than setting a value in a `StyleSheet`).

If you are targeting foldable devices or devices which can change the screen size or app window size, you can use the event listener available in the Dimensions module as shown in the below example.

## Example[‚Äã](#example "Direct link to Example")

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `addEventListener()`[‚Äã](#addeventlistener "Direct link to addeventlistener")

tsx

```
static addEventListener(
  type: 'change',
  handler: ({
    window,
    screen,
  }: DimensionsValue) => void,
): EmitterSubscription;
```

Add an event handler. Supported events:

* `change`: Fires when a property within the `Dimensions` object changes. The argument to the event handler is a [`DimensionsValue`](#dimensionsvalue) type object.

***

### `get()`[‚Äã](#get "Direct link to get")

tsx

```
static get(dim: 'window' | 'screen'): ScaledSize;
```

Initial dimensions are set before `runApplication` is called so they should be available before any other require's are run, but may be updated later.

Example: `const {height, width} = Dimensions.get('window');`

**Parameters:**

| Name        | Type   | Description                                                                       |
| ----------- | ------ | --------------------------------------------------------------------------------- |
| dimRequired | string | Name of dimension as defined when calling `set`. Returns value for the dimension. |

note

For Android the `window` dimension will be reduced by the size of status bar (if not translucent) and bottom navigation bar.

## Type Definitions[‚Äã](#type-definitions "Direct link to Type Definitions")

### DimensionsValue[‚Äã](#dimensionsvalue "Direct link to DimensionsValue")

**Properties:**

| Name   | Type                                         | Description                             |
| ------ | -------------------------------------------- | --------------------------------------- |
| window | [ScaledSize](/docs/dimensions.md#scaledsize) | Size of the visible Application window. |
| screen | [ScaledSize](/docs/dimensions.md#scaledsize) | Size of the device's screen.            |

### ScaledSize[‚Äã](#scaledsize "Direct link to ScaledSize")

| Type   |
| ------ |
| object |

**Properties:**

| Name      | Type   |
| --------- | ------ |
| width     | number |
| height    | number |
| scale     | number |
| fontScale | number |


---

# Document nodes

Document nodes represent a complete native view tree. Apps using native navigation would provide a separate document node for each screen. Apps not using native navigation would generally provide a single document for the whole app (similar to single-page apps on Web).

***

## Reference[‚Äã](#reference "Direct link to Reference")

### Web-compatible API[‚Äã](#web-compatible-api "Direct link to Web-compatible API")

From [`Document`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement):

* Properties

  <!-- -->

  * [`childElementCount`](https://developer.mozilla.org/en-US/docs/Web/API/Document/childElementCount)
  * [`children`](https://developer.mozilla.org/en-US/docs/Web/API/Document/children)
  * [`documentElement`](https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement)
  * [`firstElementChild`](https://developer.mozilla.org/en-US/docs/Web/API/Document/firstElementChild)
  * [`lastElementChild`](https://developer.mozilla.org/en-US/docs/Web/API/Document/lastElementChild)

* Methods
  <!-- -->
  * [`getElementById()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById)

From [`Node`](https://developer.mozilla.org/en-US/docs/Web/API/Node):

* Properties

  <!-- -->

  * [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes)
  * [`firstChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/firstChild)
  * [`isConnected`](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected)
  * [`lastChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/lastChild)
  * [`nextSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling)
  * [`nodeName`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeName)
  * [`nodeType`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType)
  * [`nodeValue`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeValue)
  * [`ownerDocument`](https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument)
  * [`parentElement`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentElement)
  * [`parentNode`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentNode)
  * [`previousSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling)
  * [`textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent)

* Methods

  <!-- -->

  * [`compareDocumentPosition()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition)
  * [`contains()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/contains)
  * [`getRootNode()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/getRootNode)
  * [`hasChildNodes()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/hasChildNodes)


---

# DrawerLayoutAndroid

React component that wraps the platform `DrawerLayout` (Android only). The Drawer (typically used for navigation) is rendered with `renderNavigationView` and direct children are the main view (where your content goes). The navigation view is initially not visible on the screen, but can be pulled in from the side of the window specified by the `drawerPosition` prop and its width can be set by the `drawerWidth` prop.

## Example[‚Äã](#example "Direct link to Example")

* TypeScript
* JavaScript

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [View Props](/docs/view.md#props)[‚Äã](#view-props "Direct link to view-props")

Inherits [View Props](/docs/view.md#props).

***

### `drawerBackgroundColor`[‚Äã](#drawerbackgroundcolor "Direct link to drawerbackgroundcolor")

Specifies the background color of the drawer. The default value is `white`. If you want to set the opacity of the drawer, use rgba. Example:

tsx

```
return (
  <DrawerLayoutAndroid drawerBackgroundColor="rgba(0,0,0,0.5)" />
);
```

| Type                     | Required |
| ------------------------ | -------- |
| [color](/docs/colors.md) | No       |

***

### `drawerLockMode`[‚Äã](#drawerlockmode "Direct link to drawerlockmode")

Specifies the lock mode of the drawer. The drawer can be locked in 3 states:

* unlocked (default), meaning that the drawer will respond (open/close) to touch gestures.
* locked-closed, meaning that the drawer will stay closed and not respond to gestures.
* locked-open, meaning that the drawer will stay opened and not respond to gestures. The drawer may still be opened and closed programmatically (`openDrawer`/`closeDrawer`).

| Type                                             | Required |
| ------------------------------------------------ | -------- |
| enum('unlocked', 'locked-closed', 'locked-open') | No       |

***

### `drawerPosition`[‚Äã](#drawerposition "Direct link to drawerposition")

Specifies the side of the screen from which the drawer will slide in. By default it is set to `left`.

| Type                  | Required |
| --------------------- | -------- |
| enum('left', 'right') | No       |

***

### `drawerWidth`[‚Äã](#drawerwidth "Direct link to drawerwidth")

Specifies the width of the drawer, more precisely the width of the view that be pulled in from the edge of the window.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `keyboardDismissMode`[‚Äã](#keyboarddismissmode "Direct link to keyboarddismissmode")

Determines whether the keyboard gets dismissed in response to a drag.

* 'none' (the default), drags do not dismiss the keyboard.
* 'on-drag', the keyboard is dismissed when a drag begins.

| Type                    | Required |
| ----------------------- | -------- |
| enum('none', 'on-drag') | No       |

***

### `onDrawerClose`[‚Äã](#ondrawerclose "Direct link to ondrawerclose")

Function called whenever the navigation view has been closed.

| Type     | Required |
| -------- | -------- |
| function | No       |

***

### `onDrawerOpen`[‚Äã](#ondraweropen "Direct link to ondraweropen")

Function called whenever the navigation view has been opened.

| Type     | Required |
| -------- | -------- |
| function | No       |

***

### `onDrawerSlide`[‚Äã](#ondrawerslide "Direct link to ondrawerslide")

Function called whenever there is an interaction with the navigation view.

| Type     | Required |
| -------- | -------- |
| function | No       |

***

### `onDrawerStateChanged`[‚Äã](#ondrawerstatechanged "Direct link to ondrawerstatechanged")

Function called when the drawer state has changed. The drawer can be in 3 states:

* idle, meaning there is no interaction with the navigation view happening at the time
* dragging, meaning there is currently an interaction with the navigation view
* settling, meaning that there was an interaction with the navigation view, and the navigation view is now finishing its closing or opening animation

| Type     | Required |
| -------- | -------- |
| function | No       |

***

### `renderNavigationView`[‚Äã](#rendernavigationview "Direct link to rendernavigationview")

The navigation view that will be rendered to the side of the screen and can be pulled in.

| Type     | Required |
| -------- | -------- |
| function | Yes      |

***

### `statusBarBackgroundColor`[‚Äã](#statusbarbackgroundcolor "Direct link to statusbarbackgroundcolor")

Make the drawer take the entire screen and draw the background of the status bar to allow it to open over the status bar. It will only have an effect on API 21+.

| Type                     | Required |
| ------------------------ | -------- |
| [color](/docs/colors.md) | No       |

## Methods[‚Äã](#methods "Direct link to Methods")

### `closeDrawer()`[‚Äã](#closedrawer "Direct link to closedrawer")

tsx

```
closeDrawer();
```

Closes the drawer.

***

### `openDrawer()`[‚Äã](#opendrawer "Direct link to opendrawer")

tsx

```
openDrawer();
```

Opens the drawer.


---

# DropShadowValue Object Type

The `DropShadowValue` object is taken by the [`filter`](/docs/view-style-props.md#filter) style prop for the `dropShadow` function. It is comprised of 2 or 3 lengths and an optional color. These values collectively define the drop shadow's color, position, and blurriness.

## Example[‚Äã](#example "Direct link to Example")

js

```
{
  offsetX: 10,
  offsetY: -3,
  standardDeviation: '15px',
  color: 'blue',
}
```

## Keys and values[‚Äã](#keys-and-values "Direct link to Keys and values")

### `offsetX`[‚Äã](#offsetx "Direct link to offsetx")

The offset on the x-axis. This can be positive or negative. A positive value indicates right and negative indicates left.

| Type             | Optional |
| ---------------- | -------- |
| number \| string | No       |

### `offsetY`[‚Äã](#offsety "Direct link to offsety")

The offset on the y-axis. This can be positive or negative. A positive value indicates up and negative indicates down.

| Type             | Optional |
| ---------------- | -------- |
| number \| string | No       |

### `standardDeviation`[‚Äã](#standarddeviation "Direct link to standarddeviation")

Represents the standard deviation used in the [Gaussian blur](https://en.wikipedia.org/wiki/Gaussian_blur) algorithm. The larger the value the blurrier the shadow is. Only non-negative values are valid. The default is 0.

| Type             | Optional |
| ---------------- | -------- |
| number \| string | Yes      |

### `color`[‚Äã](#color "Direct link to color")

The color of the shadow. The default is `black`.

| Type                     | Optional |
| ------------------------ | -------- |
| [color](/docs/colors.md) | Yes      |

## Used by[‚Äã](#used-by "Direct link to Used by")

* [`filter`](/docs/view-style-props.md#filter)


---

# DynamicColorIOS

The `DynamicColorIOS` function is a platform color type specific to iOS.

tsx

```
DynamicColorIOS({
  light: color,
  dark: color,
  highContrastLight: color, // (optional) will fallback to "light" if not provided
  highContrastDark: color, // (optional) will fallback to "dark" if not provided
});
```

`DynamicColorIOS` takes a single argument as an object with two mandatory keys: `dark` and `light`, and two optional keys `highContrastLight` and `highContrastDark`. These correspond to the colors you want to use for "light mode" and "dark mode" on iOS, and when high contrast accessibility mode is enabled, high contrast version of them.

At runtime, the system will choose which of the colors to display depending on the current system appearance and accessibility settings. Dynamic colors are useful for branding colors or other app specific colors that still respond automatically to system setting changes.

#### Developer notes[‚Äã](#developer-notes "Direct link to Developer notes")

* iOS
* Web

info

If you‚Äôre familiar with `@media (prefers-color-scheme: dark)` in CSS, this is similar! Only instead of defining all the colors in a media query, you define which color to use under what circumstances right there where you're using it. Neat!

info

The `DynamicColorIOS` function is similar to the iOS native methods [`UIColor colorWithDynamicProvider:`](https://developer.apple.com/documentation/uikit/uicolor/3238040-colorwithdynamicprovider).

## Example[‚Äã](#example "Direct link to Example")

tsx

```
import {DynamicColorIOS} from 'react-native';

const customDynamicTextColor = DynamicColorIOS({
  dark: 'lightskyblue',
  light: 'midnightblue',
});

const customContrastDynamicTextColor = DynamicColorIOS({
  dark: 'darkgray',
  light: 'lightgray',
  highContrastDark: 'black',
  highContrastLight: 'white',
});
```


---

# Easing

The `Easing` module implements common easing functions. This module is used by [`Animated.timing()`](/docs/animated.md#timing) to convey physically believable motion in animations.

You can find a visualization of some common easing functions at <https://easings.net/>

### Predefined animations[‚Äã](#predefined-animations "Direct link to Predefined animations")

The `Easing` module provides several predefined animations through the following methods:

* [`back`](/docs/easing.md#back) provides a basic animation where the object goes slightly back before moving forward
* [`bounce`](/docs/easing.md#bounce) provides a bouncing animation
* [`ease`](/docs/easing.md#ease) provides a basic inertial animation
* [`elastic`](/docs/easing.md#elastic) provides a basic spring interaction

### Standard functions[‚Äã](#standard-functions "Direct link to Standard functions")

Three standard easing functions are provided:

* [`linear`](/docs/easing.md#linear)
* [`quad`](/docs/easing.md#quad)
* [`cubic`](/docs/easing.md#cubic)

The [`poly`](/docs/easing.md#poly) function can be used to implement quartic, quintic, and other higher power functions.

### Additional functions[‚Äã](#additional-functions "Direct link to Additional functions")

Additional mathematical functions are provided by the following methods:

* [`bezier`](/docs/easing.md#bezier) provides a cubic bezier curve
* [`circle`](/docs/easing.md#circle) provides a circular function
* [`sin`](/docs/easing.md#sin) provides a sinusoidal function
* [`exp`](/docs/easing.md#exp) provides an exponential function

The following helpers are used to modify other easing functions.

* [`in`](/docs/easing.md#in) runs an easing function forwards
* [`inOut`](/docs/easing.md#inout) makes any easing function symmetrical
* [`out`](/docs/easing.md#out) runs an easing function backwards

## Example[‚Äã](#example "Direct link to Example")

* TypeScript
* JavaScript

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `step0()`[‚Äã](#step0 "Direct link to step0")

tsx

```
static step0(n: number);
```

A stepping function, returns 1 for any positive value of `n`.

***

### `step1()`[‚Äã](#step1 "Direct link to step1")

tsx

```
static step1(n: number);
```

A stepping function, returns 1 if `n` is greater than or equal to 1.

***

### `linear()`[‚Äã](#linear "Direct link to linear")

tsx

```
static linear(t: number);
```

A linear function, `f(t) = t`. Position correlates to elapsed time one to one.

<https://cubic-bezier.com/#0,0,1,1>

***

### `ease()`[‚Äã](#ease "Direct link to ease")

tsx

```
static ease(t: number);
```

A basic inertial interaction, similar to an object slowly accelerating to speed.

<https://cubic-bezier.com/#.42,0,1,1>

***

### `quad()`[‚Äã](#quad "Direct link to quad")

tsx

```
static quad(t: number);
```

A quadratic function, `f(t) = t * t`. Position equals the square of elapsed time.

<https://easings.net/#easeInQuad>

***

### `cubic()`[‚Äã](#cubic "Direct link to cubic")

tsx

```
static cubic(t: number);
```

A cubic function, `f(t) = t * t * t`. Position equals the cube of elapsed time.

<https://easings.net/#easeInCubic>

***

### `poly()`[‚Äã](#poly "Direct link to poly")

tsx

```
static poly(n: number);
```

A power function. Position is equal to the Nth power of elapsed time.

n = 4: <https://easings.net/#easeInQuart> n = 5: <https://easings.net/#easeInQuint>

***

### `sin()`[‚Äã](#sin "Direct link to sin")

tsx

```
static sin(t: number);
```

A sinusoidal function.

<https://easings.net/#easeInSine>

***

### `circle()`[‚Äã](#circle "Direct link to circle")

tsx

```
static circle(t: number);
```

A circular function.

<https://easings.net/#easeInCirc>

***

### `exp()`[‚Äã](#exp "Direct link to exp")

tsx

```
static exp(t: number);
```

An exponential function.

<https://easings.net/#easeInExpo>

***

### `elastic()`[‚Äã](#elastic "Direct link to elastic")

tsx

```
static elastic(bounciness: number);
```

A basic elastic interaction, similar to a spring oscillating back and forth.

Default bounciness is 1, which overshoots a little bit once. 0 bounciness doesn't overshoot at all, and bounciness of N > 1 will overshoot about N times.

<https://easings.net/#easeInElastic>

***

### `back()`[‚Äã](#back "Direct link to back")

tsx

```
static back(s)
```

Use with `Animated.parallel()` to create a basic effect where the object animates back slightly as the animation starts.

***

### `bounce()`[‚Äã](#bounce "Direct link to bounce")

tsx

```
static bounce(t: number);
```

Provides a basic bouncing effect.

<https://easings.net/#easeInBounce>

***

### `bezier()`[‚Äã](#bezier "Direct link to bezier")

tsx

```
static bezier(x1: number, y1: number, x2: number, y2: number);
```

Provides a cubic bezier curve, equivalent to CSS Transitions' `transition-timing-function`.

A useful tool to visualize cubic bezier curves can be found at <https://cubic-bezier.com/>

***

### `in()`[‚Äã](#in "Direct link to in")

tsx

```
static in(easing: number);
```

Runs an easing function forwards.

***

### `out()`[‚Äã](#out "Direct link to out")

tsx

```
static out(easing: number);
```

Runs an easing function backwards.

***

### `inOut()`[‚Äã](#inout "Direct link to inout")

tsx

```
static inOut(easing: number);
```

Makes any easing function symmetrical. The easing function will run forwards for half of the duration, then backwards for the rest of the duration.


---

# Element nodes

Element nodes represent native components in the native view tree (similar to [Element](https://developer.mozilla.org/en-US/docs/Web/API/Element) nodes on Web).

They are provided by all native components, and by many built-in components, via refs:

info

Note that some built-in components are only a container for other components (including native components). For example, `ScrollView` internally renders a native scroll view and a native view, which are accessible through the ref it provides using methods like `getNativeScrollRef()` and `getInnerViewRef()`.

***

## Reference[‚Äã](#reference "Direct link to Reference")

### Web-compatible API[‚Äã](#web-compatible-api "Direct link to Web-compatible API")

From [`HTMLElement`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement):

* Properties

  <!-- -->

  * [`offsetHeight`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetHeight)
  * [`offsetLeft`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetLeft)
  * [`offsetParent`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent)
  * [`offsetTop`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop)
  * [`offsetWidth`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetWidth)

* Methods

  <!-- -->

  * [`blur()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/blur).
  * [`focus()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus).
    <!-- -->
    * ‚ö†Ô∏è The `options` parameter is not supported.

From [`Element`](https://developer.mozilla.org/en-US/docs/Web/API/Element):

* Properties

  <!-- -->

  * [`childElementCount`](https://developer.mozilla.org/en-US/docs/Web/API/Element/childElementCount)
  * [`children`](https://developer.mozilla.org/en-US/docs/Web/API/Element/children)
  * [`clientHeight`](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight)
  * [`clientLeft`](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientLeft)
  * [`clientTop`](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientTop)
  * [`clientWidth`](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth)
  * [`firstElementChild`](https://developer.mozilla.org/en-US/docs/Web/API/Element/firstElementChild)
  * [`id`](https://developer.mozilla.org/en-US/docs/Web/API/Element/id)
    * ‚ÑπÔ∏è Returns the value of the `id` or `nativeID` props.
  * [`lastElementChild`](https://developer.mozilla.org/en-US/docs/Web/API/Element/lastElementChild)
  * [`nextElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Element/nextElementSibling)
  * [`nodeName`](https://developer.mozilla.org/en-US/docs/Web/API/Element/nodeName)
  * [`nodeType`](https://developer.mozilla.org/en-US/docs/Web/API/Element/nodeType)
  * [`nodeValue`](https://developer.mozilla.org/en-US/docs/Web/API/Element/nodeValue)
  * [`previousElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Element/previousElementSibling)
  * [`scrollHeight`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight)
  * [`scrollLeft`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeft)
    * ‚ö†Ô∏è For built-in components, only `ScrollView` instances can return a value other than zero.
  * [`scrollTop`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTop)
    * ‚ö†Ô∏è For built-in components, only `ScrollView` instances can return a value other than zero.
  * [`scrollWidth`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollWidth)
  * [`tagName`](https://developer.mozilla.org/en-US/docs/Web/API/Element/tagName)
    * ‚ÑπÔ∏è Returns a normalized native component name prefixed with `RN:`, like `RN:View`.
  * [`textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Element/textContent)

* Methods

  <!-- -->

  * [`getBoundingClientRect()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect)
  * [`hasPointerCapture()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/hasPointerCapture)
  * [`setPointerCapture()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/setPointerCapture)
  * [`releasePointerCapture()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/releasePointerCapture)

From [`Node`](https://developer.mozilla.org/en-US/docs/Web/API/Node):

* Properties

  <!-- -->

  * [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes)
  * [`firstChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/firstChild)
  * [`isConnected`](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected)
  * [`lastChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/lastChild)
  * [`nextSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling)
  * [`nodeName`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeName)
  * [`nodeType`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType)
  * [`nodeValue`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeValue)
  * [`ownerDocument`](https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument)
    * ‚ÑπÔ∏è Will return the [document instance](/docs/next/document-instances) where this component was rendered.
  * [`parentElement`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentElement)
  * [`parentNode`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentNode)
  * [`previousSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling)
  * [`textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent)

* Methods

  <!-- -->

  * [`compareDocumentPosition()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition)
  * [`contains()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/contains)
  * [`getRootNode()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/getRootNode)
    * ‚ÑπÔ∏è Will return a reference to itself if the component is not mounted.
  * [`hasChildNodes()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/hasChildNodes)

### Legacy API[‚Äã](#legacy-api "Direct link to Legacy API")

* [`measure()`](/docs/next/legacy/direct-manipulation#measurecallback)
* [`measureInWindow()`](/docs/next/legacy/direct-manipulation#measureinwindowcallback)
* [`measureLayout()`](/docs/next/legacy/direct-manipulation#measurelayoutrelativetonativecomponentref-onsuccess-onfail)
* [`setNativeProps()`](/docs/next/legacy/direct-manipulation#setnativeprops-with-touchableopacity)


---

# Get Started with React Native

**React Native allows developers who know React to create native apps.** At the same time, native developers can use React Native to gain parity between native platforms by writing common features once.

We believe that the best way to experience React Native is through a **Framework**, a toolbox with all the necessary APIs to let you build production ready apps.

You can also use React Native without a Framework, however we‚Äôve found that most developers benefit from using a React Native Framework like [Expo](https://expo.dev). Expo provides features like file-based routing, high-quality universal libraries, and the ability to write plugins that modify native code without having to manage native files.

Can I use React Native without a Framework?

Yes. You can use React Native without a Framework. **However, if you‚Äôre building a new app with React Native, we recommend using a Framework.**

In short, you‚Äôll be able to spend time writing your app instead of writing an entire Framework yourself in addition to your app.

The React Native community has spent years refining approaches to navigation, accessing native APIs, dealing with native dependencies, and more. Most apps need these core features. A React Native Framework provides them from the start of your app.

Without a Framework, you‚Äôll either have to write your own solutions to implement core features, or you‚Äôll have to piece together a collection of pre-existing libraries to create a skeleton of a Framework. This takes real work, both when starting your app, then later when maintaining it.

If your app has unusual constraints that are not served well by a Framework, or you prefer to solve these problems yourself, you can make a React Native app without a Framework using Android Studio, Xcode. If you‚Äôre interested in this path, learn how to [set up your environment](/docs/set-up-your-environment.md) and how to [get started without a framework](/docs/getting-started-without-a-framework.md).

## Start a new React Native project with Expo[‚Äã](#start-a-new-react-native-project-with-expo "Direct link to Start a new React Native project with Expo")

**Platform support**

Android

iOS

TV

Web

Expo is a production-grade React Native Framework. Expo provides developer tooling that makes developing apps easier, such as file-based routing, a standard library of native modules, and much more.

Expo's Framework is free and open source, with an active community on [GitHub](https://github.com/expo) and [Discord](https://chat.expo.dev). The Expo team works in close collaboration with the React Native team at Meta to bring the latest React Native features to the Expo SDK.

The team at Expo also provides Expo Application Services (EAS), an optional set of services that complements Expo, the Framework, in each step of the development process.

To create a new Expo project, run the following in your terminal:

shell

```
npx create-expo-app@latest
```

Once you‚Äôve created your app, check out the rest of Expo‚Äôs getting started guide to start developing your app.

[Continue with Expo](https://docs.expo.dev/get-started/set-up-your-environment)


---

# Fabric Native Modules: Android

Now it's time to write some Android platform code to be able to render the web view. The steps you need to follow are:

* Running Codegen
* Write the code for the `ReactWebView`
* Write the code for the `ReactWebViewManager`
* Write the code for the `ReactWebViewPackage`
* Register the `ReactWebViewPackage` in the application

### 1. Run Codegen through Gradle[‚Äã](#1-run-codegen-through-gradle "Direct link to 1. Run Codegen through Gradle")

Run this once to generate boilerplate that your IDE of choice can use.

Demo/

```
cd android
./gradlew generateCodegenArtifactsFromSchema
```

Codegen will generate the `ViewManager` interface you need to implement and the `ViewManager` delegate for the web view.

### 2. Write the `ReactWebView`[‚Äã](#2-write-the-reactwebview "Direct link to 2-write-the-reactwebview")

The `ReactWebView` is the component that wraps the Android native view that React Native will render when using our custom Component.

Create a `ReactWebView.java` or a `ReactWebView.kt` file in the `android/src/main/java/com/webview` folder with this code:

* Java
* Kotlin

Demo/android/src/main/java/com/webview/ReactWebView\.java

```
package com.webview;

import android.content.Context;
import android.util.AttributeSet;
import android.webkit.WebView;
import android.webkit.WebViewClient;

import com.facebook.react.bridge.Arguments;
import com.facebook.react.bridge.WritableMap;
import com.facebook.react.bridge.ReactContext;
import com.facebook.react.uimanager.UIManagerHelper;
import com.facebook.react.uimanager.events.Event;

public class ReactWebView extends WebView {
  public ReactWebView(Context context) {
    super(context);
    configureComponent();
  }

  public ReactWebView(Context context, AttributeSet attrs) {
    super(context, attrs);
    configureComponent();
  }

  public ReactWebView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
    configureComponent();
  }

  private void configureComponent() {
    this.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    this.setWebViewClient(new WebViewClient() {
      @Override
      public void onPageFinished(WebView view, String url) {
        emitOnScriptLoaded(OnScriptLoadedEventResult.success);
      }
    });
  }

  public void emitOnScriptLoaded(OnScriptLoadedEventResult result) {
    ReactContext reactContext = (ReactContext) context;
    int surfaceId = UIManagerHelper.getSurfaceId(reactContext);
    EventDispatcher eventDispatcher = UIManagerHelper.getEventDispatcherForReactTag(reactContext, getId());
    WritableMap payload = Arguments.createMap();
    payload.putString("result", result.name());

    OnScriptLoadedEvent event = new OnScriptLoadedEvent(surfaceId, getId(), payload);
    if (eventDispatcher != null) {
      eventDispatcher.dispatchEvent(event);
    }
  }

  public enum OnScriptLoadedEventResult {
    success,
    error
  }

  private class OnScriptLoadedEvent extends Event<OnScriptLoadedEvent> {
    private final WritableMap payload;

    OnScriptLoadedEvent(int surfaceId, int viewId, WritableMap payload) {
      super(surfaceId, viewId);
      this.payload = payload;
    }

    @Override
    public String getEventName() {
      return "onScriptLoaded";
    }

    @Override
    public WritableMap getEventData() {
      return payload;
    }
  }
}
```

Demo/android/src/main/java/com/webview/ReactWebView\.kt

```
package com.webview

import android.content.Context
import android.util.AttributeSet
import android.webkit.WebView
import android.webkit.WebViewClient
import com.facebook.react.bridge.Arguments
import com.facebook.react.bridge.WritableMap
import com.facebook.react.bridge.ReactContext
import com.facebook.react.uimanager.UIManagerHelper
import com.facebook.react.uimanager.events.Event

class ReactWebView: WebView {
  constructor(context: Context) : super(context) {
    configureComponent()
  }

  constructor(context: Context, attrs: AttributeSet?) : super(context, attrs) {
    configureComponent()
  }

  constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {
    configureComponent()
  }

  private fun configureComponent() {
    this.layoutParams = LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)
    this.webViewClient = object : WebViewClient() {
      override fun onPageFinished(view: WebView, url: String) {
        emitOnScriptLoaded(OnScriptLoadedEventResult.success)
      }
    }
  }

  fun emitOnScriptLoaded(result: OnScriptLoadedEventResult) {
    val reactContext = context as ReactContext
    val surfaceId = UIManagerHelper.getSurfaceId(reactContext)
    val eventDispatcher = UIManagerHelper.getEventDispatcherForReactTag(reactContext, id)
    val payload =
        Arguments.createMap().apply {
          putString("result", result.name)
        }
    val event = OnScriptLoadedEvent(surfaceId, id, payload)

    eventDispatcher?.dispatchEvent(event)
  }

  enum class OnScriptLoadedEventResult {
    success,
    error;
  }

  inner class OnScriptLoadedEvent(
      surfaceId: Int,
      viewId: Int,
      private val payload: WritableMap
  ) : Event<OnScriptLoadedEvent>(surfaceId, viewId) {
    override fun getEventName() = "onScriptLoaded"

    override fun getEventData() = payload
  }
}
```

The `ReactWebView` extends the Android `WebView` so you can reuse all the properties already defined by the platform with ease.

The class defines the three Android constructors but defers their actual implementation to the private `configureComponent` function. This function takes care of initializing all the components specific properties: in this case you are setting the layout of the `WebView` and you are defining the `WebClient` that you use to customize the behavior of the `WebView`. In this code, the `ReactWebView` emits an event when the page finishes loading, by implementing the `WebClient`'s `onPageFinished` method.

The code then defines a helper function to actually emit an event. To emit an event, you have to:

* grab a reference to the `ReactContext`;
* retrieve the `surfaceId` of the view that you are presenting;
* grab a reference to the `eventDispatcher` associated with the view;
* build the payload for the event using a `WritableMap` object;
* create the event object that you need to send to JavaScript;
* call the `eventDispatcher.dispatchEvent` to send the event.

The last part of the file contains the definition of the data types you need to send the event:

* The `OnScriptLoadedEventResult`, with the possible outcomes of the `OnScriptLoaded` event.
* The actual `OnScriptLoadedEvent` that needs to extend the React Native's `Event` class.

### 3. Write the `WebViewManager`[‚Äã](#3-write-the-webviewmanager "Direct link to 3-write-the-webviewmanager")

The `WebViewManager` is the class that connects the React Native runtime with the native view.

When React receives the instruction from the app to render a specific component, React uses the registered view manager to create the view and to pass all the required properties.

This is the code of the `ReactWebViewManager`.

* Java
* Kotlin

Demo/android/src/main/java/com/webview/ReactWebViewManager.java

```
package com.webview;

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.annotations.ReactModule;
import com.facebook.react.uimanager.SimpleViewManager;
import com.facebook.react.uimanager.ThemedReactContext;
import com.facebook.react.uimanager.ViewManagerDelegate;
import com.facebook.react.uimanager.annotations.ReactProp;
import com.facebook.react.viewmanagers.CustomWebViewManagerInterface;
import com.facebook.react.viewmanagers.CustomWebViewManagerDelegate;

import java.util.HashMap;
import java.util.Map;

@ReactModule(name = ReactWebViewManager.REACT_CLASS)
class ReactWebViewManager extends SimpleViewManager<ReactWebView> implements CustomWebViewManagerInterface<ReactWebView> {
  private final CustomWebViewManagerDelegate<ReactWebView, ReactWebViewManager> delegate =
          new CustomWebViewManagerDelegate<>(this);

  @Override
  public ViewManagerDelegate<ReactWebView> getDelegate() {
    return delegate;
  }

  @Override
  public String getName() {
    return REACT_CLASS;
  }

  @Override
  public ReactWebView createViewInstance(ThemedReactContext context) {
    return new ReactWebView(context);
  }

  @ReactProp(name = "sourceUrl")
  @Override
  public void setSourceURL(ReactWebView view, String sourceURL) {
    if (sourceURL == null) {
      view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error);
      return;
    }
    view.loadUrl(sourceURL, new HashMap<>());
  }

  public static final String REACT_CLASS = "CustomWebView";

  @Override
  public Map<String, Object> getExportedCustomBubblingEventTypeConstants() {
    Map<String, Object> map = new HashMap<>();
    Map<String, Object> bubblingMap = new HashMap<>();
    bubblingMap.put("phasedRegistrationNames", new HashMap<String, String>() {{
      put("bubbled", "onScriptLoaded");
      put("captured", "onScriptLoadedCapture");
    }});
    map.put("onScriptLoaded", bubblingMap);
    return map;
  }
}
```

Demo/android/src/main/java/com/webview/ReactWebViewManager.kt

```
package com.webview

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.annotations.ReactModule;
import com.facebook.react.uimanager.SimpleViewManager;
import com.facebook.react.uimanager.ThemedReactContext;
import com.facebook.react.uimanager.ViewManagerDelegate;
import com.facebook.react.uimanager.annotations.ReactProp;
import com.facebook.react.viewmanagers.CustomWebViewManagerInterface;
import com.facebook.react.viewmanagers.CustomWebViewManagerDelegate;

@ReactModule(name = ReactWebViewManager.REACT_CLASS)
class ReactWebViewManager(context: ReactApplicationContext) : SimpleViewManager<ReactWebView>(), CustomWebViewManagerInterface<ReactWebView> {
  private val delegate: CustomWebViewManagerDelegate<ReactWebView, ReactWebViewManager> =
    CustomWebViewManagerDelegate(this)

  override fun getDelegate(): ViewManagerDelegate<ReactWebView> = delegate

  override fun getName(): String = REACT_CLASS

  override fun createViewInstance(context: ThemedReactContext): ReactWebView = ReactWebView(context)

  @ReactProp(name = "sourceUrl")
  override fun setSourceURL(view: ReactWebView, sourceURL: String?) {
    if (sourceURL == null) {
      view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error)
      return;
    }
    view.loadUrl(sourceURL, emptyMap())
  }

  companion object {
    const val REACT_CLASS = "CustomWebView"
  }

  override fun getExportedCustomBubblingEventTypeConstants(): Map<String, Any> =
      mapOf(
          "onScriptLoaded" to
              mapOf(
                  "phasedRegistrationNames" to
                      mapOf(
                          "bubbled" to "onScriptLoaded",
                          "captured" to "onScriptLoadedCapture"
                      )))
}
```

The `ReactWebViewManager` extends the `SimpleViewManager` class from React and implements the `CustomWebViewManagerInterface`, generated by Codegen.

It holds a reference of the `CustomWebViewManagerDelegate`, another element generated by Codegen.

It then overrides the `getName` function, which must return the same name used in the spec's `codegenNativeComponent` function call.

The `createViewInstance` function is responsible to instantiate a new `ReactWebView`.

Then, the ViewManager needs to define how all the React's components props will update the native view. In the example, you need to decide how to handle the `sourceURL` property that React will set on the `WebView`.

Finally, if the component can emit an event, you need to map the event name by overriding the `getExportedCustomBubblingEventTypeConstants` for bubbling events, or the `getExportedCustomDirectEventTypeConstants` for direct events.

### 4. Write the `ReactWebViewPackage`[‚Äã](#4-write-the-reactwebviewpackage "Direct link to 4-write-the-reactwebviewpackage")

As you do with Native Modules, Native Components also need to implement the `ReactPackage` class. This is an object that you can use to register the component in the React Native runtime.

This is the code for the `ReactWebViewPackage`:

* Java
* Kotlin

Demo/android/src/main/java/com/webview/ReactWebViewPackage.java

```
package com.webview;

import com.facebook.react.BaseReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.model.ReactModuleInfo;
import com.facebook.react.module.model.ReactModuleInfoProvider;
import com.facebook.react.uimanager.ViewManager;

import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class ReactWebViewPackage extends BaseReactPackage {
  @Override
  public List<ViewManager<?, ?>> createViewManagers(ReactApplicationContext reactContext) {
    return Collections.singletonList(new ReactWebViewManager(reactContext));
  }

  @Override
  public NativeModule getModule(String s, ReactApplicationContext reactApplicationContext) {
    if (ReactWebViewManager.REACT_CLASS.equals(s)) {
      return new ReactWebViewManager(reactApplicationContext);
    }
    return null;
  }

  @Override
  public ReactModuleInfoProvider getReactModuleInfoProvider() {
    return new ReactModuleInfoProvider() {
      @Override
      public Map<String, ReactModuleInfo> getReactModuleInfos() {
        Map<String, ReactModuleInfo> map = new HashMap<>();
        map.put(ReactWebViewManager.REACT_CLASS, new ReactModuleInfo(
                ReactWebViewManager.REACT_CLASS, // name
                ReactWebViewManager.REACT_CLASS, // className
                false,                           // canOverrideExistingModule
                false,                           // needsEagerInit
                false,                           // isCxxModule
                true                             // isTurboModule
        ));
        return map;
      }
    };
  }
}
```

Demo/android/src/main/java/com/webview/ReactWebViewPackage.kt

```
package com.webview

import com.facebook.react.BaseReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.module.model.ReactModuleInfo
import com.facebook.react.module.model.ReactModuleInfoProvider
import com.facebook.react.uimanager.ViewManager

class ReactWebViewPackage : BaseReactPackage() {
  override fun createViewManagers(reactContext: ReactApplicationContext): List<ViewManager<*, *>> {
    return listOf(ReactWebViewManager(reactContext))
  }

  override fun getModule(s: String, reactApplicationContext: ReactApplicationContext): NativeModule? {
    when (s) {
      ReactWebViewManager.REACT_CLASS -> ReactWebViewManager(reactApplicationContext)
    }
    return null
  }

  override fun getReactModuleInfoProvider(): ReactModuleInfoProvider = ReactModuleInfoProvider {
    mapOf(ReactWebViewManager.REACT_CLASS to ReactModuleInfo(
      name = ReactWebViewManager.REACT_CLASS,
      className = ReactWebViewManager.REACT_CLASS,
      canOverrideExistingModule = false,
      needsEagerInit = false,
      isCxxModule = false,
      isTurboModule = true,
    )
    )
  }
}
```

The `ReactWebViewPackage` extends the `BaseReactPackage` and implements all the methods required to properly register our component.

* the `createViewManagers` method is the factory method that creates the `ViewManager` that manage the custom views.
* the `getModule` method returns the proper ViewManager depending on the View that React Native needs to render.
* the `getReactModuleInfoProvider` provides all the information required when registering the module in the runtime,

### 5. Register the `ReactWebViewPackage` in the application[‚Äã](#5-register-the-reactwebviewpackage-in-the-application "Direct link to 5-register-the-reactwebviewpackage-in-the-application")

Finally, you need to register the `ReactWebViewPackage` in the application. We do that by modifying the `MainApplication` file by adding the `ReactWebViewPackage` to the list of packages returned by the `getPackages` function.

Demo/app/src/main/java/com/demo/MainApplication.kt

```
package com.demo

import android.app.Application
import com.facebook.react.PackageList
import com.facebook.react.ReactApplication
import com.facebook.react.ReactHost
import com.facebook.react.ReactNativeHost
import com.facebook.react.ReactPackage
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.load
import com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost
import com.facebook.react.defaults.DefaultReactNativeHost
import com.facebook.react.soloader.OpenSourceMergedSoMapping
import com.facebook.soloader.SoLoader
import com.webview.ReactWebViewPackage

class MainApplication : Application(), ReactApplication {

  override val reactNativeHost: ReactNativeHost =
      object : DefaultReactNativeHost(this) {
        override fun getPackages(): List<ReactPackage> =
            PackageList(this).packages.apply {
              add(ReactWebViewPackage())
            }

        override fun getJSMainModuleName(): String = "index"

        override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG

        override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED
        override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED
      }

  override val reactHost: ReactHost
    get() = getDefaultReactHost(applicationContext, reactNativeHost)

  override fun onCreate() {
    super.onCreate()
    SoLoader.init(this, OpenSourceMergedSoMapping)
    if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
      load()
    }
  }
}
```


---

# Native Components

If you want to build *new* React Native Components that wrap around a [Host Component](https://reactnative.dev/architecture/glossary#host-view-tree-and-host-view) like a unique kind of [CheckBox](https://developer.android.com/reference/androidx/appcompat/widget/AppCompatCheckBox) on Android, or a [UIButton](https://developer.apple.com/documentation/uikit/uibutton?language=objc) on iOS, you should use a Fabric Native Component.

This guide will show you how to build Fabric Native Components, by implementing a web view component. The steps to doing this are:

1. Define a JavaScript specification using Flow or TypeScript.
2. Configure the dependencies management system to generate code from the provided spec and to be auto-linked.
3. Implement the Native code.
4. Use the Component in an App.

You're going to need a plain template generated application to use the component:

bash

```
npx @react-native-community/cli@latest init Demo --install-pods false
```

## Creating a WebView Component[‚Äã](#creating-a-webview-component "Direct link to Creating a WebView Component")

This guide will show you how to create a Web View component. We will be creating the component by using the Android's [`WebView`](https://developer.android.com/reference/android/webkit/WebView) component, and the iOS [`WKWebView`](https://developer.apple.com/documentation/webkit/wkwebview?language=objc) component.

Let's start by creating the folders structure to hold our component's code:

bash

```
mkdir -p Demo/{specs,android/app/src/main/java/com/webview}
```

This gives you the following layout where you'll working:

```
Demo
‚îú‚îÄ‚îÄ android/app/src/main/java/com/webview
‚îî‚îÄ‚îÄ ios
‚îî‚îÄ‚îÄ specs
```

* The `android/app/src/main/java/com/webview` folder is the folder that will contain our Android code.
* The `ios` folder is the folder that will contain our iOS code.
* The `specs` folder is the folder that will contain the Codegen's specification file.

## 1. Define Specification for Codegen[‚Äã](#1-define-specification-for-codegen "Direct link to 1. Define Specification for Codegen")

Your specification must be defined in either [TypeScript](https://www.typescriptlang.org/) or [Flow](https://flow.org/) (see [Codegen](/docs/the-new-architecture/what-is-codegen.md) documentation for more details). This is used by Codegen to generate the C++, Objective-C++ and Java to connect your platform code to the JavaScript runtime that React runs in.

The specification file must be named `<MODULE_NAME>NativeComponent.{ts|js}` to work with Codegen. The suffix `NativeComponent` is not only a convention, it is actually used by Codegen to detect a spec file.

Use this specification for our WebView Component:

* TypeScript
* Flow

Demo/specs/WebViewNativeComponent.ts

```
import type {
  CodegenTypes,
  HostComponent,
  ViewProps,
} from 'react-native';
import {codegenNativeComponent} from 'react-native';

type WebViewScriptLoadedEvent = {
  result: 'success' | 'error';
};

export interface NativeProps extends ViewProps {
  sourceURL?: string;
  onScriptLoaded?: CodegenTypes.BubblingEventHandler<WebViewScriptLoadedEvent> | null;
}

export default codegenNativeComponent<NativeProps>(
  'CustomWebView',
) as HostComponent<NativeProps>;
```

Demo/RCTWebView/js/RCTWebViewNativeComponent.js

```
// @flow strict-local

import type {CodegenTypes, HostComponent, ViewProps} from 'react-native';
import {codegenNativeComponent} from 'react-native';

type WebViewScriptLoadedEvent = $ReadOnly<{|
  result: "success" | "error",
|}>;

type NativeProps = $ReadOnly<{|
  ...ViewProps,
  sourceURL?: string;
  onScriptLoaded?: CodegenTypes.BubblingEventHandler<WebViewScriptLoadedEvent>?;
|}>;

export default (codegenNativeComponent<NativeProps>(
  'CustomWebView',
): HostComponent<NativeProps>);
```

This specification is composed of three main parts, excluding the imports:

* The `WebViewScriptLoadedEvent` is a supporting data type for the data the event needs to pass from native to JavaScript.
* The `NativeProps` is a definition of the props that we can set on the component.
* The `codegenNativeComponent` statement allows us to codegenerate the code for the custom component and that defines a name for the component used to match the native implementations.

As with Native Modules, you can have multiple specification files in the `specs/` directory. For more information about the types you can use, and the platform types these map to, see the [appendix](/docs/appendix.md#codegen-typings).

## 2. Configure Codegen to run[‚Äã](#2-configure-codegen-to-run "Direct link to 2. Configure Codegen to run")

The specification is used by the React Native's Codegen tools to generate platform specific interfaces and boilerplate for us. To do this, Codegen needs to know where to find our specification and what to do with it. Update your `package.json` to include:

json

```
    "start": "react-native start",
    "test": "jest"
  },
  "codegenConfig": {
    "name": "AppSpec",
    "type": "components",
    "jsSrcsDir": "specs",
    "android": {
      "javaPackageName": "com.webview"
    },
    "ios": {
      "componentProvider": {
        "CustomWebView": "RCTWebView"
      }
    }
  },
  "dependencies": {
```

With everything wired up for Codegen, we need to prepare our native code to hook into our generated code.

Note that for iOS, we are declaratively mapping the name of the JS component that is exported by the spec (`CustomWebView`) with the iOS class that will implement the component natively.

## 2. Building your Native Code[‚Äã](#2-building-your-native-code "Direct link to 2. Building your Native Code")

Now it's time to write the native platform code so that when React requires to render a view, the platform can create the right native view and can render it on screen.

You should work through both the Android and iOS platforms.

note

This guide shows you how to create a Native Component that only works with the New Architecture. If you need to support both the New Architecture and the Legacy Architecture, please refer to our [backwards compatibility guide](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/backwards-compat.md).

* Android
* iOS

Now it's time to write some Android platform code to be able to render the web view. The steps you need to follow are:

* Running Codegen
* Write the code for the `ReactWebView`
* Write the code for the `ReactWebViewManager`
* Write the code for the `ReactWebViewPackage`
* Register the `ReactWebViewPackage` in the application

### 1. Run Codegen through Gradle[‚Äã](#1-run-codegen-through-gradle "Direct link to 1. Run Codegen through Gradle")

Run this once to generate boilerplate that your IDE of choice can use.

Demo/

```
cd android
./gradlew generateCodegenArtifactsFromSchema
```

Codegen will generate the `ViewManager` interface you need to implement and the `ViewManager` delegate for the web view.

### 2. Write the `ReactWebView`[‚Äã](#2-write-the-reactwebview "Direct link to 2-write-the-reactwebview")

The `ReactWebView` is the component that wraps the Android native view that React Native will render when using our custom Component.

Create a `ReactWebView.java` or a `ReactWebView.kt` file in the `android/src/main/java/com/webview` folder with this code:

* Java
* Kotlin

Demo/android/src/main/java/com/webview/ReactWebView\.java

```
package com.webview;

import android.content.Context;
import android.util.AttributeSet;
import android.webkit.WebView;
import android.webkit.WebViewClient;

import com.facebook.react.bridge.Arguments;
import com.facebook.react.bridge.WritableMap;
import com.facebook.react.bridge.ReactContext;
import com.facebook.react.uimanager.UIManagerHelper;
import com.facebook.react.uimanager.events.Event;

public class ReactWebView extends WebView {
  public ReactWebView(Context context) {
    super(context);
    configureComponent();
  }

  public ReactWebView(Context context, AttributeSet attrs) {
    super(context, attrs);
    configureComponent();
  }

  public ReactWebView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
    configureComponent();
  }

  private void configureComponent() {
    this.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    this.setWebViewClient(new WebViewClient() {
      @Override
      public void onPageFinished(WebView view, String url) {
        emitOnScriptLoaded(OnScriptLoadedEventResult.success);
      }
    });
  }

  public void emitOnScriptLoaded(OnScriptLoadedEventResult result) {
    ReactContext reactContext = (ReactContext) context;
    int surfaceId = UIManagerHelper.getSurfaceId(reactContext);
    EventDispatcher eventDispatcher = UIManagerHelper.getEventDispatcherForReactTag(reactContext, getId());
    WritableMap payload = Arguments.createMap();
    payload.putString("result", result.name());

    OnScriptLoadedEvent event = new OnScriptLoadedEvent(surfaceId, getId(), payload);
    if (eventDispatcher != null) {
      eventDispatcher.dispatchEvent(event);
    }
  }

  public enum OnScriptLoadedEventResult {
    success,
    error
  }

  private class OnScriptLoadedEvent extends Event<OnScriptLoadedEvent> {
    private final WritableMap payload;

    OnScriptLoadedEvent(int surfaceId, int viewId, WritableMap payload) {
      super(surfaceId, viewId);
      this.payload = payload;
    }

    @Override
    public String getEventName() {
      return "onScriptLoaded";
    }

    @Override
    public WritableMap getEventData() {
      return payload;
    }
  }
}
```

Demo/android/src/main/java/com/webview/ReactWebView\.kt

```
package com.webview

import android.content.Context
import android.util.AttributeSet
import android.webkit.WebView
import android.webkit.WebViewClient
import com.facebook.react.bridge.Arguments
import com.facebook.react.bridge.WritableMap
import com.facebook.react.bridge.ReactContext
import com.facebook.react.uimanager.UIManagerHelper
import com.facebook.react.uimanager.events.Event

class ReactWebView: WebView {
  constructor(context: Context) : super(context) {
    configureComponent()
  }

  constructor(context: Context, attrs: AttributeSet?) : super(context, attrs) {
    configureComponent()
  }

  constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {
    configureComponent()
  }

  private fun configureComponent() {
    this.layoutParams = LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)
    this.webViewClient = object : WebViewClient() {
      override fun onPageFinished(view: WebView, url: String) {
        emitOnScriptLoaded(OnScriptLoadedEventResult.success)
      }
    }
  }

  fun emitOnScriptLoaded(result: OnScriptLoadedEventResult) {
    val reactContext = context as ReactContext
    val surfaceId = UIManagerHelper.getSurfaceId(reactContext)
    val eventDispatcher = UIManagerHelper.getEventDispatcherForReactTag(reactContext, id)
    val payload =
        Arguments.createMap().apply {
          putString("result", result.name)
        }
    val event = OnScriptLoadedEvent(surfaceId, id, payload)

    eventDispatcher?.dispatchEvent(event)
  }

  enum class OnScriptLoadedEventResult {
    success,
    error;
  }

  inner class OnScriptLoadedEvent(
      surfaceId: Int,
      viewId: Int,
      private val payload: WritableMap
  ) : Event<OnScriptLoadedEvent>(surfaceId, viewId) {
    override fun getEventName() = "onScriptLoaded"

    override fun getEventData() = payload
  }
}
```

The `ReactWebView` extends the Android `WebView` so you can reuse all the properties already defined by the platform with ease.

The class defines the three Android constructors but defers their actual implementation to the private `configureComponent` function. This function takes care of initializing all the components specific properties: in this case you are setting the layout of the `WebView` and you are defining the `WebClient` that you use to customize the behavior of the `WebView`. In this code, the `ReactWebView` emits an event when the page finishes loading, by implementing the `WebClient`'s `onPageFinished` method.

The code then defines a helper function to actually emit an event. To emit an event, you have to:

* grab a reference to the `ReactContext`;
* retrieve the `surfaceId` of the view that you are presenting;
* grab a reference to the `eventDispatcher` associated with the view;
* build the payload for the event using a `WritableMap` object;
* create the event object that you need to send to JavaScript;
* call the `eventDispatcher.dispatchEvent` to send the event.

The last part of the file contains the definition of the data types you need to send the event:

* The `OnScriptLoadedEventResult`, with the possible outcomes of the `OnScriptLoaded` event.
* The actual `OnScriptLoadedEvent` that needs to extend the React Native's `Event` class.

### 3. Write the `WebViewManager`[‚Äã](#3-write-the-webviewmanager "Direct link to 3-write-the-webviewmanager")

The `WebViewManager` is the class that connects the React Native runtime with the native view.

When React receives the instruction from the app to render a specific component, React uses the registered view manager to create the view and to pass all the required properties.

This is the code of the `ReactWebViewManager`.

* Java
* Kotlin

Demo/android/src/main/java/com/webview/ReactWebViewManager.java

```
package com.webview;

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.annotations.ReactModule;
import com.facebook.react.uimanager.SimpleViewManager;
import com.facebook.react.uimanager.ThemedReactContext;
import com.facebook.react.uimanager.ViewManagerDelegate;
import com.facebook.react.uimanager.annotations.ReactProp;
import com.facebook.react.viewmanagers.CustomWebViewManagerInterface;
import com.facebook.react.viewmanagers.CustomWebViewManagerDelegate;

import java.util.HashMap;
import java.util.Map;

@ReactModule(name = ReactWebViewManager.REACT_CLASS)
class ReactWebViewManager extends SimpleViewManager<ReactWebView> implements CustomWebViewManagerInterface<ReactWebView> {
  private final CustomWebViewManagerDelegate<ReactWebView, ReactWebViewManager> delegate =
          new CustomWebViewManagerDelegate<>(this);

  @Override
  public ViewManagerDelegate<ReactWebView> getDelegate() {
    return delegate;
  }

  @Override
  public String getName() {
    return REACT_CLASS;
  }

  @Override
  public ReactWebView createViewInstance(ThemedReactContext context) {
    return new ReactWebView(context);
  }

  @ReactProp(name = "sourceUrl")
  @Override
  public void setSourceURL(ReactWebView view, String sourceURL) {
    if (sourceURL == null) {
      view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error);
      return;
    }
    view.loadUrl(sourceURL, new HashMap<>());
  }

  public static final String REACT_CLASS = "CustomWebView";

  @Override
  public Map<String, Object> getExportedCustomBubblingEventTypeConstants() {
    Map<String, Object> map = new HashMap<>();
    Map<String, Object> bubblingMap = new HashMap<>();
    bubblingMap.put("phasedRegistrationNames", new HashMap<String, String>() {{
      put("bubbled", "onScriptLoaded");
      put("captured", "onScriptLoadedCapture");
    }});
    map.put("onScriptLoaded", bubblingMap);
    return map;
  }
}
```

Demo/android/src/main/java/com/webview/ReactWebViewManager.kt

```
package com.webview

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.annotations.ReactModule;
import com.facebook.react.uimanager.SimpleViewManager;
import com.facebook.react.uimanager.ThemedReactContext;
import com.facebook.react.uimanager.ViewManagerDelegate;
import com.facebook.react.uimanager.annotations.ReactProp;
import com.facebook.react.viewmanagers.CustomWebViewManagerInterface;
import com.facebook.react.viewmanagers.CustomWebViewManagerDelegate;

@ReactModule(name = ReactWebViewManager.REACT_CLASS)
class ReactWebViewManager(context: ReactApplicationContext) : SimpleViewManager<ReactWebView>(), CustomWebViewManagerInterface<ReactWebView> {
  private val delegate: CustomWebViewManagerDelegate<ReactWebView, ReactWebViewManager> =
    CustomWebViewManagerDelegate(this)

  override fun getDelegate(): ViewManagerDelegate<ReactWebView> = delegate

  override fun getName(): String = REACT_CLASS

  override fun createViewInstance(context: ThemedReactContext): ReactWebView = ReactWebView(context)

  @ReactProp(name = "sourceUrl")
  override fun setSourceURL(view: ReactWebView, sourceURL: String?) {
    if (sourceURL == null) {
      view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error)
      return;
    }
    view.loadUrl(sourceURL, emptyMap())
  }

  companion object {
    const val REACT_CLASS = "CustomWebView"
  }

  override fun getExportedCustomBubblingEventTypeConstants(): Map<String, Any> =
      mapOf(
          "onScriptLoaded" to
              mapOf(
                  "phasedRegistrationNames" to
                      mapOf(
                          "bubbled" to "onScriptLoaded",
                          "captured" to "onScriptLoadedCapture"
                      )))
}
```

The `ReactWebViewManager` extends the `SimpleViewManager` class from React and implements the `CustomWebViewManagerInterface`, generated by Codegen.

It holds a reference of the `CustomWebViewManagerDelegate`, another element generated by Codegen.

It then overrides the `getName` function, which must return the same name used in the spec's `codegenNativeComponent` function call.

The `createViewInstance` function is responsible to instantiate a new `ReactWebView`.

Then, the ViewManager needs to define how all the React's components props will update the native view. In the example, you need to decide how to handle the `sourceURL` property that React will set on the `WebView`.

Finally, if the component can emit an event, you need to map the event name by overriding the `getExportedCustomBubblingEventTypeConstants` for bubbling events, or the `getExportedCustomDirectEventTypeConstants` for direct events.

### 4. Write the `ReactWebViewPackage`[‚Äã](#4-write-the-reactwebviewpackage "Direct link to 4-write-the-reactwebviewpackage")

As you do with Native Modules, Native Components also need to implement the `ReactPackage` class. This is an object that you can use to register the component in the React Native runtime.

This is the code for the `ReactWebViewPackage`:

* Java
* Kotlin

Demo/android/src/main/java/com/webview/ReactWebViewPackage.java

```
package com.webview;

import com.facebook.react.BaseReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.model.ReactModuleInfo;
import com.facebook.react.module.model.ReactModuleInfoProvider;
import com.facebook.react.uimanager.ViewManager;

import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class ReactWebViewPackage extends BaseReactPackage {
  @Override
  public List<ViewManager<?, ?>> createViewManagers(ReactApplicationContext reactContext) {
    return Collections.singletonList(new ReactWebViewManager(reactContext));
  }

  @Override
  public NativeModule getModule(String s, ReactApplicationContext reactApplicationContext) {
    if (ReactWebViewManager.REACT_CLASS.equals(s)) {
      return new ReactWebViewManager(reactApplicationContext);
    }
    return null;
  }

  @Override
  public ReactModuleInfoProvider getReactModuleInfoProvider() {
    return new ReactModuleInfoProvider() {
      @Override
      public Map<String, ReactModuleInfo> getReactModuleInfos() {
        Map<String, ReactModuleInfo> map = new HashMap<>();
        map.put(ReactWebViewManager.REACT_CLASS, new ReactModuleInfo(
                ReactWebViewManager.REACT_CLASS, // name
                ReactWebViewManager.REACT_CLASS, // className
                false,                           // canOverrideExistingModule
                false,                           // needsEagerInit
                false,                           // isCxxModule
                true                             // isTurboModule
        ));
        return map;
      }
    };
  }
}
```

Demo/android/src/main/java/com/webview/ReactWebViewPackage.kt

```
package com.webview

import com.facebook.react.BaseReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.module.model.ReactModuleInfo
import com.facebook.react.module.model.ReactModuleInfoProvider
import com.facebook.react.uimanager.ViewManager

class ReactWebViewPackage : BaseReactPackage() {
  override fun createViewManagers(reactContext: ReactApplicationContext): List<ViewManager<*, *>> {
    return listOf(ReactWebViewManager(reactContext))
  }

  override fun getModule(s: String, reactApplicationContext: ReactApplicationContext): NativeModule? {
    when (s) {
      ReactWebViewManager.REACT_CLASS -> ReactWebViewManager(reactApplicationContext)
    }
    return null
  }

  override fun getReactModuleInfoProvider(): ReactModuleInfoProvider = ReactModuleInfoProvider {
    mapOf(ReactWebViewManager.REACT_CLASS to ReactModuleInfo(
      name = ReactWebViewManager.REACT_CLASS,
      className = ReactWebViewManager.REACT_CLASS,
      canOverrideExistingModule = false,
      needsEagerInit = false,
      isCxxModule = false,
      isTurboModule = true,
    )
    )
  }
}
```

The `ReactWebViewPackage` extends the `BaseReactPackage` and implements all the methods required to properly register our component.

* the `createViewManagers` method is the factory method that creates the `ViewManager` that manage the custom views.
* the `getModule` method returns the proper ViewManager depending on the View that React Native needs to render.
* the `getReactModuleInfoProvider` provides all the information required when registering the module in the runtime,

### 5. Register the `ReactWebViewPackage` in the application[‚Äã](#5-register-the-reactwebviewpackage-in-the-application "Direct link to 5-register-the-reactwebviewpackage-in-the-application")

Finally, you need to register the `ReactWebViewPackage` in the application. We do that by modifying the `MainApplication` file by adding the `ReactWebViewPackage` to the list of packages returned by the `getPackages` function.

Demo/app/src/main/java/com/demo/MainApplication.kt

```
package com.demo

import android.app.Application
import com.facebook.react.PackageList
import com.facebook.react.ReactApplication
import com.facebook.react.ReactHost
import com.facebook.react.ReactNativeHost
import com.facebook.react.ReactPackage
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.load
import com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost
import com.facebook.react.defaults.DefaultReactNativeHost
import com.facebook.react.soloader.OpenSourceMergedSoMapping
import com.facebook.soloader.SoLoader
import com.webview.ReactWebViewPackage

class MainApplication : Application(), ReactApplication {

  override val reactNativeHost: ReactNativeHost =
      object : DefaultReactNativeHost(this) {
        override fun getPackages(): List<ReactPackage> =
            PackageList(this).packages.apply {
              add(ReactWebViewPackage())
            }

        override fun getJSMainModuleName(): String = "index"

        override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG

        override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED
        override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED
      }

  override val reactHost: ReactHost
    get() = getDefaultReactHost(applicationContext, reactNativeHost)

  override fun onCreate() {
    super.onCreate()
    SoLoader.init(this, OpenSourceMergedSoMapping)
    if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
      load()
    }
  }
}
```

Now it's time to write some iOS platform code to be able to render the web view. The steps you need to follow are:

* Run Codegen.
* Write the code for the `RCTWebView`
* Register the `RCTWebView` in the application

### 1. Run Codegen[‚Äã](#1-run-codegen "Direct link to 1. Run Codegen")

You can [manually run](/docs/the-new-architecture/codegen-cli.md) the Codegen, however it's simpler to use the application you're going to demo the component in to do this for you.

bash

```
cd ios
bundle install
bundle exec pod install
```

Importantly you will see logging output from Codegen, which we're going to use in Xcode to build our WebView native component.

warning

You should be careful about committing generated code to your repository. Generated code is specific to each version of React Native. Use npm [peerDependencies](https://nodejs.org/en/blog/npm/peer-dependencies) to restrict compatibility with version of React Native.

### 3. Write the `RCTWebView`[‚Äã](#3-write-the-rctwebview "Direct link to 3-write-the-rctwebview")

We need to prepare your iOS project using Xcode by completing these **5 steps**:

1. Open the CocoaPods generated Xcode Workspace:

bash

```
cd ios
open Demo.xcworkspace
```

![Open Xcode Workspace](/docs/assets/fabric-native-components/1.webp)

2. Right click on app and select `New Group`, call the new group `WebView`.

![Right click on app and select New Group](/docs/assets/fabric-native-components/2.webp)

3. In the `WebView` group, create `New`‚Üí`File from Template`.

![Create a new file using the Cocoa Touch Class template](/docs/assets/fabric-native-components/3.webp)

4. Use the `Objective-C File` template, and name it `RCTWebView`.

![Create an Objective-C RCTWebView class](/docs/assets/fabric-native-components/4.webp)

5. Repeat step 4 and create a header file named `RCTWebView.h`.

6. Rename `RCTWebView.m` ‚Üí `RCTWebView.mm` making it an Objective-C++ file.

Demo/ios

```
Podfile
...
Demo
‚îú‚îÄ‚îÄ AppDelegate.swift
...
‚îú‚îÄ‚îÄ RCTWebView.h
‚îî‚îÄ‚îÄ RCTWebView.mm
```

After creating the header file and the implementation file, you can start implementing them.

This is the code for the `RCTWebView.h` file, which declares the component interface.

Demo/RCTWebView/RCTWebView\.h

```
#import <React/RCTViewComponentView.h>
#import <UIKit/UIKit.h>

NS_ASSUME_NONNULL_BEGIN

@interface RCTWebView : RCTViewComponentView

// You would declare native methods you'd want to access from the view here

@end

NS_ASSUME_NONNULL_END
```

This class defines an `RCTWebView` which extends the `RCTViewComponentView` class. This is the base class for all the native components and it is provided by React Native.

The code for the implementation file (`RCTWebView.mm`) is the following:

Demo/RCTWebView/RCTWebView\.mm

```
#import "RCTWebView.h"

#import <react/renderer/components/AppSpec/ComponentDescriptors.h>
#import <react/renderer/components/AppSpec/EventEmitters.h>
#import <react/renderer/components/AppSpec/Props.h>
#import <react/renderer/components/AppSpec/RCTComponentViewHelpers.h>
#import <WebKit/WebKit.h>

using namespace facebook::react;

@interface RCTWebView () <RCTCustomWebViewViewProtocol, WKNavigationDelegate>
@end

@implementation RCTWebView {
  NSURL * _sourceURL;
  WKWebView * _webView;
}

-(instancetype)init
{
  if(self = [super init]) {
    _webView = [WKWebView new];
    _webView.navigationDelegate = self;
    [self addSubview:_webView];
  }
  return self;
}

- (void)updateProps:(Props::Shared const &)props oldProps:(Props::Shared const &)oldProps
{
  const auto &oldViewProps = *std::static_pointer_cast<CustomWebViewProps const>(_props);
  const auto &newViewProps = *std::static_pointer_cast<CustomWebViewProps const>(props);

  // Handle your props here
  if (oldViewProps.sourceURL != newViewProps.sourceURL) {
    NSString *urlString = [NSString stringWithCString:newViewProps.sourceURL.c_str() encoding:NSUTF8StringEncoding];
    _sourceURL = [NSURL URLWithString:urlString];
    if ([self urlIsValid:newViewProps.sourceURL]) {
      [_webView loadRequest:[NSURLRequest requestWithURL:_sourceURL]];
    }
  }

  [super updateProps:props oldProps:oldProps];
}

-(void)layoutSubviews
{
  [super layoutSubviews];
  _webView.frame = self.bounds;

}

#pragma mark - WKNavigationDelegate

-(void)webView:(WKWebView *)webView didFinishNavigation:(WKNavigation *)navigation
{
  CustomWebViewEventEmitter::OnScriptLoaded result = CustomWebViewEventEmitter::OnScriptLoaded{CustomWebViewEventEmitter::OnScriptLoadedResult::Success};
  self.eventEmitter.onScriptLoaded(result);
}

- (BOOL)urlIsValid:(std::string)propString
{
  if (propString.length() > 0 && !_sourceURL) {
    CustomWebViewEventEmitter::OnScriptLoaded result = CustomWebViewEventEmitter::OnScriptLoaded{CustomWebViewEventEmitter::OnScriptLoadedResult::Error};

    self.eventEmitter.onScriptLoaded(result);
    return NO;
  }
  return YES;
}

// Event emitter convenience method
- (const CustomWebViewEventEmitter &)eventEmitter
{
  return static_cast<const CustomWebViewEventEmitter &>(*_eventEmitter);
}

+ (ComponentDescriptorProvider)componentDescriptorProvider
{
  return concreteComponentDescriptorProvider<CustomWebViewComponentDescriptor>();
}

@end
```

This code is written in Objective-C++ and contains various details:

* the `@interface` implements two protocols:

  <!-- -->

  * `RCTCustomWebViewViewProtocol`, generated by Codegen;
  * `WKNavigationDelegate`, provided by the WebKit framework to handle the web view navigation events;

* the `init` method that instantiates the `WKWebView`, adds it to the subviews and that sets the `navigationDelegate`;

* the `updateProps` method that is called by React Native when the component's props change;

* the `layoutSubviews` method that describes how the custom view needs to be laid out;

* the `webView:didFinishNavigation:` method that lets you handle what to do when the `WKWebView` finishes loading the page;

* the `urlIsValid:(std::string)propString` method that checks whether the URL received as prop is valid;

* the `eventEmitter` method which is a utility to retrieve a strongly typed `eventEmitter` instance

* the `componentDescriptorProvider` which returns the `ComponentDescriptor` generated by Codegen;

#### Add WebKit framework[‚Äã](#add-webkit-framework "Direct link to Add WebKit framework")

note

This step is only required because we are creating a Web view. Web components on iOS needs to be linked against the WebKit framework provided by Apple. If your component doesn't need to access web-specific features, you can skip this step.

A web view requires access to some features that Apple provides through one of the frameworks shipped with Xcode and the devices: WebKit. You can see it in the native code by the `#import <WebKit/WebKit.h>` line added in the `RCTWebView.mm`.

To link the WebKit framework in your app, follow these steps:

1. In Xcode, Click on your project
2. Select the app target
3. Select the General tab
4. Scroll down until you find the *"Frameworks, Libraries, and Embedded Contents"* section, and press the `+` button

![Add webkit framework to your app 1](/docs/assets/AddWebKitFramework1.png)

5. In the search bar, filter for WebKit
6. Select the WebKit framework
7. Click on Add.

![Add webkit framework to your app 2](/docs/assets/AddWebKitFramework2.png)

## 3. Use your Native Component[‚Äã](#3-use-your-native-component "Direct link to 3. Use your Native Component")

Finally, you can use the new component in your app. Update your generated `App.tsx` to:

Demo/App.tsx

```
import React from 'react';
import {Alert, StyleSheet, View} from 'react-native';
import WebView from './specs/WebViewNativeComponent';

function App(): React.JSX.Element {
  return (
    <View style={styles.container}>
      <WebView
        sourceURL="https://react.dev/"
        style={styles.webview}
        onScriptLoaded={() => {
          Alert.alert('Page Loaded');
        }}
      />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    alignContent: 'center',
  },
  webview: {
    width: '100%',
    height: '100%',
  },
});

export default App;
```

This code creates an app that uses the new `WebView` component we created to load the `react.dev` website.

The app also shows an alert when the web page is loaded.

## 4. Run your App using the WebView Component[‚Äã](#4-run-your-app-using-the-webview-component "Direct link to 4. Run your App using the WebView Component")

* Android
* iOS

bash

```
yarn run android
```

bash

```
yarn run ios
```

| Android                                | iOS                                |
| -------------------------------------- | ---------------------------------- |
| ![](/docs/assets/webview-android.webp) | ![](/docs/assets/webview-ios.webp) |


---

# Fabric Native Components: iOS

Now it's time to write some iOS platform code to be able to render the web view. The steps you need to follow are:

* Run Codegen.
* Write the code for the `RCTWebView`
* Register the `RCTWebView` in the application

### 1. Run Codegen[‚Äã](#1-run-codegen "Direct link to 1. Run Codegen")

You can [manually run](/docs/the-new-architecture/codegen-cli.md) the Codegen, however it's simpler to use the application you're going to demo the component in to do this for you.

bash

```
cd ios
bundle install
bundle exec pod install
```

Importantly you will see logging output from Codegen, which we're going to use in Xcode to build our WebView native component.

warning

You should be careful about committing generated code to your repository. Generated code is specific to each version of React Native. Use npm [peerDependencies](https://nodejs.org/en/blog/npm/peer-dependencies) to restrict compatibility with version of React Native.

### 3. Write the `RCTWebView`[‚Äã](#3-write-the-rctwebview "Direct link to 3-write-the-rctwebview")

We need to prepare your iOS project using Xcode by completing these **5 steps**:

1. Open the CocoaPods generated Xcode Workspace:

bash

```
cd ios
open Demo.xcworkspace
```

![Open Xcode Workspace](/docs/assets/fabric-native-components/1.webp)

2. Right click on app and select `New Group`, call the new group `WebView`.

![Right click on app and select New Group](/docs/assets/fabric-native-components/2.webp)

3. In the `WebView` group, create `New`‚Üí`File from Template`.

![Create a new file using the Cocoa Touch Class template](/docs/assets/fabric-native-components/3.webp)

4. Use the `Objective-C File` template, and name it `RCTWebView`.

![Create an Objective-C RCTWebView class](/docs/assets/fabric-native-components/4.webp)

5. Repeat step 4 and create a header file named `RCTWebView.h`.

6. Rename `RCTWebView.m` ‚Üí `RCTWebView.mm` making it an Objective-C++ file.

Demo/ios

```
Podfile
...
Demo
‚îú‚îÄ‚îÄ AppDelegate.swift
...
‚îú‚îÄ‚îÄ RCTWebView.h
‚îî‚îÄ‚îÄ RCTWebView.mm
```

After creating the header file and the implementation file, you can start implementing them.

This is the code for the `RCTWebView.h` file, which declares the component interface.

Demo/RCTWebView/RCTWebView\.h

```
#import <React/RCTViewComponentView.h>
#import <UIKit/UIKit.h>

NS_ASSUME_NONNULL_BEGIN

@interface RCTWebView : RCTViewComponentView

// You would declare native methods you'd want to access from the view here

@end

NS_ASSUME_NONNULL_END
```

This class defines an `RCTWebView` which extends the `RCTViewComponentView` class. This is the base class for all the native components and it is provided by React Native.

The code for the implementation file (`RCTWebView.mm`) is the following:

Demo/RCTWebView/RCTWebView\.mm

```
#import "RCTWebView.h"

#import <react/renderer/components/AppSpec/ComponentDescriptors.h>
#import <react/renderer/components/AppSpec/EventEmitters.h>
#import <react/renderer/components/AppSpec/Props.h>
#import <react/renderer/components/AppSpec/RCTComponentViewHelpers.h>
#import <WebKit/WebKit.h>

using namespace facebook::react;

@interface RCTWebView () <RCTCustomWebViewViewProtocol, WKNavigationDelegate>
@end

@implementation RCTWebView {
  NSURL * _sourceURL;
  WKWebView * _webView;
}

-(instancetype)init
{
  if(self = [super init]) {
    _webView = [WKWebView new];
    _webView.navigationDelegate = self;
    [self addSubview:_webView];
  }
  return self;
}

- (void)updateProps:(Props::Shared const &)props oldProps:(Props::Shared const &)oldProps
{
  const auto &oldViewProps = *std::static_pointer_cast<CustomWebViewProps const>(_props);
  const auto &newViewProps = *std::static_pointer_cast<CustomWebViewProps const>(props);

  // Handle your props here
  if (oldViewProps.sourceURL != newViewProps.sourceURL) {
    NSString *urlString = [NSString stringWithCString:newViewProps.sourceURL.c_str() encoding:NSUTF8StringEncoding];
    _sourceURL = [NSURL URLWithString:urlString];
    if ([self urlIsValid:newViewProps.sourceURL]) {
      [_webView loadRequest:[NSURLRequest requestWithURL:_sourceURL]];
    }
  }

  [super updateProps:props oldProps:oldProps];
}

-(void)layoutSubviews
{
  [super layoutSubviews];
  _webView.frame = self.bounds;

}

#pragma mark - WKNavigationDelegate

-(void)webView:(WKWebView *)webView didFinishNavigation:(WKNavigation *)navigation
{
  CustomWebViewEventEmitter::OnScriptLoaded result = CustomWebViewEventEmitter::OnScriptLoaded{CustomWebViewEventEmitter::OnScriptLoadedResult::Success};
  self.eventEmitter.onScriptLoaded(result);
}

- (BOOL)urlIsValid:(std::string)propString
{
  if (propString.length() > 0 && !_sourceURL) {
    CustomWebViewEventEmitter::OnScriptLoaded result = CustomWebViewEventEmitter::OnScriptLoaded{CustomWebViewEventEmitter::OnScriptLoadedResult::Error};

    self.eventEmitter.onScriptLoaded(result);
    return NO;
  }
  return YES;
}

// Event emitter convenience method
- (const CustomWebViewEventEmitter &)eventEmitter
{
  return static_cast<const CustomWebViewEventEmitter &>(*_eventEmitter);
}

+ (ComponentDescriptorProvider)componentDescriptorProvider
{
  return concreteComponentDescriptorProvider<CustomWebViewComponentDescriptor>();
}

@end
```

This code is written in Objective-C++ and contains various details:

* the `@interface` implements two protocols:

  <!-- -->

  * `RCTCustomWebViewViewProtocol`, generated by Codegen;
  * `WKNavigationDelegate`, provided by the WebKit framework to handle the web view navigation events;

* the `init` method that instantiates the `WKWebView`, adds it to the subviews and that sets the `navigationDelegate`;

* the `updateProps` method that is called by React Native when the component's props change;

* the `layoutSubviews` method that describes how the custom view needs to be laid out;

* the `webView:didFinishNavigation:` method that lets you handle what to do when the `WKWebView` finishes loading the page;

* the `urlIsValid:(std::string)propString` method that checks whether the URL received as prop is valid;

* the `eventEmitter` method which is a utility to retrieve a strongly typed `eventEmitter` instance

* the `componentDescriptorProvider` which returns the `ComponentDescriptor` generated by Codegen;

#### Add WebKit framework[‚Äã](#add-webkit-framework "Direct link to Add WebKit framework")

note

This step is only required because we are creating a Web view. Web components on iOS needs to be linked against the WebKit framework provided by Apple. If your component doesn't need to access web-specific features, you can skip this step.

A web view requires access to some features that Apple provides through one of the frameworks shipped with Xcode and the devices: WebKit. You can see it in the native code by the `#import <WebKit/WebKit.h>` line added in the `RCTWebView.mm`.

To link the WebKit framework in your app, follow these steps:

1. In Xcode, Click on your project
2. Select the app target
3. Select the General tab
4. Scroll down until you find the *"Frameworks, Libraries, and Embedded Contents"* section, and press the `+` button

![Add webkit framework to your app 1](/docs/assets/AddWebKitFramework1.png)

5. In the search bar, filter for WebKit
6. Select the WebKit framework
7. Click on Add.

![Add webkit framework to your app 2](/docs/assets/AddWebKitFramework2.png)


---

# Fast Refresh

Fast Refresh is a React Native feature that allows you to get near-instant feedback for changes in your React components. Fast Refresh is enabled by default, and you can toggle "Enable Fast Refresh" in the [React Native Dev Menu](/docs/debugging.md#accessing-the-in-app-developer-menu). With Fast Refresh enabled, most edits should be visible within a second or two.

## How It Works[‚Äã](#how-it-works "Direct link to How It Works")

* If you edit a module that **only exports React component(s)**, Fast Refresh will update the code only for that module, and re-render your component. You can edit anything in that file, including styles, rendering logic, event handlers, or effects.
* If you edit a module with exports that *aren't* React components, Fast Refresh will re-run both that module, and the other modules importing it. So if both `Button.js` and `Modal.js` import `Theme.js`, editing `Theme.js` will update both components.
* Finally, if you **edit a file** that's **imported by modules outside of the React tree**, Fast Refresh **will fall back to doing a full reload**. You might have a file which renders a React component but also exports a value that is imported by a **non-React component**. For example, maybe your component also exports a constant, and a non-React utility module imports it. In that case, consider migrating the constant to a separate file and importing it into both files. This will re-enable Fast Refresh to work. Other cases can usually be solved in a similar way.

## Error Resilience[‚Äã](#error-resilience "Direct link to Error Resilience")

If you make a **syntax error** during a Fast Refresh session, you can fix it and save the file again. The redbox will disappear. Modules with syntax errors are prevented from running, so you won't need to reload the app.

If you make a **runtime error during the module initialization** (for example, typing `Style.create` instead of `StyleSheet.create`), the Fast Refresh session will continue once you fix the error. The redbox will disappear, and the module will be updated.

If you make a mistake that leads to a **runtime error inside your component**, the Fast Refresh session will *also* continue after you fix the error. In that case, React will remount your application using the updated code.

If you have [error boundaries](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary) in your app (which is a good idea for graceful failures in production), they will retry rendering on the next edit after a redbox. In that sense, having an error boundary can prevent you from always getting kicked out to the root app screen. However, keep in mind that error boundaries shouldn't be *too* granular. They are used by React in production, and should always be designed intentionally.

## Limitations[‚Äã](#limitations "Direct link to Limitations")

Fast Refresh tries to preserve local React state in the component you're editing, but only if it's safe to do so. Here's a few reasons why you might see local state being reset on every edit to a file:

* Local state is not preserved for class components (only function components and Hooks preserve state).
* The module you're editing might have *other* exports in addition to a React component.
* Sometimes, a module would export the result of calling higher-order component like `createNavigationContainer(MyScreen)`. If the returned component is a class, state will be reset.

In the longer term, as more of your codebase moves to function components and Hooks, you can expect state to be preserved in more cases.

## Tips[‚Äã](#tips "Direct link to Tips")

* Fast Refresh preserves React local state in function components (and Hooks) by default.
* Sometimes you might want to *force* the state to be reset, and a component to be remounted. For example, this can be handy if you're tweaking an animation that only happens on mount. To do this, you can add `// @refresh reset` anywhere in the file you're editing. This directive is local to the file, and instructs Fast Refresh to remount components defined in that file on every edit.

## Fast Refresh and Hooks[‚Äã](#fast-refresh-and-hooks "Direct link to Fast Refresh and Hooks")

When possible, Fast Refresh attempts to preserve the state of your component between edits. In particular, `useState` and `useRef` preserve their previous values as long as you don't change their arguments or the order of the Hook calls.

Hooks with dependencies‚Äîsuch as `useEffect`, `useMemo`, and `useCallback`‚Äîwill *always* update during Fast Refresh. Their list of dependencies will be ignored while Fast Refresh is happening.

For example, when you edit `useMemo(() => x * 2, [x])` to `useMemo(() => x * 10, [x])`, it will re-run even though `x` (the dependency) has not changed. If React didn't do that, your edit wouldn't reflect on the screen!

Sometimes, this can lead to unexpected results. For example, even a `useEffect` with an empty array of dependencies would still re-run once during Fast Refresh. However, writing code resilient to an occasional re-running of `useEffect` is a good practice even without Fast Refresh. This makes it easier for you to later introduce new dependencies to it.


---

# FlatList

A performant interface for rendering basic, flat lists, supporting the most handy features:

* Fully cross-platform.
* Optional horizontal mode.
* Configurable viewability callbacks.
* Header support.
* Footer support.
* Separator support.
* Pull to Refresh.
* Scroll loading.
* ScrollToIndex support.
* Multiple column support.

If you need section support, use [`<SectionList>`](/docs/sectionlist.md).

## Example[‚Äã](#example "Direct link to Example")

* TypeScript
* JavaScript

To render multiple columns, use the [`numColumns`](/docs/flatlist.md#numcolumns) prop. Using this approach instead of a `flexWrap` layout can prevent conflicts with the item height logic.

More complex, selectable example below.

* By passing `extraData={selectedId}` to `FlatList` we make sure `FlatList` itself will re-render when the state changes. Without setting this prop, `FlatList` would not know it needs to re-render any items because it is a `PureComponent` and the prop comparison will not show any changes.
* `keyExtractor` tells the list to use the `id`s for the react keys instead of the default `key` property.

- TypeScript
- JavaScript

This is a convenience wrapper around [`<VirtualizedList>`](/docs/virtualizedlist.md), and thus inherits its props (as well as those of [`<ScrollView>`](/docs/scrollview.md)) that aren't explicitly listed here, along with the following caveats:

* Internal state is not preserved when content scrolls out of the render window. Make sure all your data is captured in the item data or external stores like Flux, Redux, or Relay.
* This is a `PureComponent` which means that it will not re-render if `props` remain shallow-equal. Make sure that everything your `renderItem` function depends on is passed as a prop (e.g. `extraData`) that is not `===` after updates, otherwise your UI may not update on changes. This includes the `data` prop and parent component state.
* In order to constrain memory and enable smooth scrolling, content is rendered asynchronously offscreen. This means it's possible to scroll faster than the fill rate and momentarily see blank content. This is a tradeoff that can be adjusted to suit the needs of each application, and we are working on improving it behind the scenes.
* By default, the list looks for a `key` prop on each item and uses that for the React key. Alternatively, you can provide a custom `keyExtractor` prop.

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [VirtualizedList Props](/docs/virtualizedlist.md#props)[‚Äã](#virtualizedlist-props "Direct link to virtualizedlist-props")

Inherits [VirtualizedList Props](/docs/virtualizedlist.md#props).

***

### Require&#x64;**`renderItem`**[‚Äã](#required-renderitem "Direct link to required-renderitem")

tsx

```
renderItem({
  item: ItemT,
  index: number,
  separators: {
    highlight: () => void;
    unhighlight: () => void;
    updateProps: (select: 'leading' | 'trailing', newProps: any) => void;
  }
}): JSX.Element;
```

Takes an item from `data` and renders it into the list.

Provides additional metadata like `index` if you need it, as well as a more generic `separators.updateProps` function which let you set whatever props you want to change the rendering of either the leading separator or trailing separator in case the more common `highlight` and `unhighlight` (which set the `highlighted: boolean` prop) are insufficient for your use case.

| Type     |
| -------- |
| function |

* `item` (Object): The item from `data` being rendered.

* `index` (number): The index corresponding to this item in the `data` array.

* `separators` (Object)

  <!-- -->

  * `highlight` (Function)

  * `unhighlight` (Function)

  * `updateProps` (Function)

    <!-- -->

    * `select` (enum('leading', 'trailing'))
    * `newProps` (Object)

Example usage:

tsx

```
<FlatList
  ItemSeparatorComponent={
    Platform.OS !== 'android' &&
    (({highlighted}) => (
      <View
        style={[style.separator, highlighted && {marginLeft: 0}]}
      />
    ))
  }
  data={[{title: 'Title Text', key: 'item1'}]}
  renderItem={({item, index, separators}) => (
    <TouchableHighlight
      key={item.key}
      onPress={() => this._onPress(item)}
      onShowUnderlay={separators.highlight}
      onHideUnderlay={separators.unhighlight}>
      <View style={{backgroundColor: 'white'}}>
        <Text>{item.title}</Text>
      </View>
    </TouchableHighlight>
  )}
/>
```

***

### Require&#x64;**`data`**[‚Äã](#required-data "Direct link to required-data")

An array (or array-like list) of items to render. Other data types can be used by targeting [`VirtualizedList`](/docs/virtualizedlist.md) directly.

| Type      |
| --------- |
| ArrayLike |

***

### `ItemSeparatorComponent`[‚Äã](#itemseparatorcomponent "Direct link to itemseparatorcomponent")

Rendered in between each item, but not at the top or bottom. By default, `highlighted` and `leadingItem` props are provided. `renderItem` provides `separators.highlight`/`unhighlight` which will update the `highlighted` prop, but you can also add custom props with `separators.updateProps`. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type                         |
| ---------------------------- |
| component, function, element |

***

### `ListEmptyComponent`[‚Äã](#listemptycomponent "Direct link to listemptycomponent")

Rendered when the list is empty. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type               |
| ------------------ |
| component, element |

***

### `ListFooterComponent`[‚Äã](#listfootercomponent "Direct link to listfootercomponent")

Rendered at the bottom of all the items. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type               |
| ------------------ |
| component, element |

***

### `ListFooterComponentStyle`[‚Äã](#listfootercomponentstyle "Direct link to listfootercomponentstyle")

Styling for internal View for `ListFooterComponent`.

| Type                                    |
| --------------------------------------- |
| [View Style](/docs/view-style-props.md) |

***

### `ListHeaderComponent`[‚Äã](#listheadercomponent "Direct link to listheadercomponent")

Rendered at the top of all the items. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type               |
| ------------------ |
| component, element |

***

### `ListHeaderComponentStyle`[‚Äã](#listheadercomponentstyle "Direct link to listheadercomponentstyle")

Styling for internal View for `ListHeaderComponent`.

| Type                                    |
| --------------------------------------- |
| [View Style](/docs/view-style-props.md) |

***

### `columnWrapperStyle`[‚Äã](#columnwrapperstyle "Direct link to columnwrapperstyle")

Optional custom style for multi-item rows generated when `numColumns > 1`.

| Type                                    |
| --------------------------------------- |
| [View Style](/docs/view-style-props.md) |

***

### `extraData`[‚Äã](#extradata "Direct link to extradata")

A marker property for telling the list to re-render (since it implements `PureComponent`). If any of your `renderItem`, Header, Footer, etc. functions depend on anything outside of the `data` prop, stick it here and treat it immutably.

| Type |
| ---- |
| any  |

***

### `getItemLayout`[‚Äã](#getitemlayout "Direct link to getitemlayout")

tsx

```
(data, index) => {length: number, offset: number, index: number}
```

`getItemLayout` is an optional optimization that allows skipping the measurement of dynamic content if you know the size (height or width) of items ahead of time. `getItemLayout` is efficient if you have fixed size items, for example:

tsx

```
  getItemLayout={(data, index) => (
    {length: ITEM_HEIGHT, offset: ITEM_HEIGHT * index, index}
  )}
```

Adding `getItemLayout` can be a great performance boost for lists of several hundred items. Remember to include separator length (height or width) in your offset calculation if you specify `ItemSeparatorComponent`.

| Type     |
| -------- |
| function |

***

### `horizontal`[‚Äã](#horizontal "Direct link to horizontal")

If `true`, renders items next to each other horizontally instead of stacked vertically.

| Type    |
| ------- |
| boolean |

***

### `initialNumToRender`[‚Äã](#initialnumtorender "Direct link to initialnumtorender")

How many items to render in the initial batch. This should be enough to fill the screen but not much more. Note these items will never be unmounted as part of the windowed rendering in order to improve perceived performance of scroll-to-top actions.

| Type   | Default |
| ------ | ------- |
| number | `10`    |

***

### `initialScrollIndex`[‚Äã](#initialscrollindex "Direct link to initialscrollindex")

Instead of starting at the top with the first item, start at `initialScrollIndex`. This disables the "scroll to top" optimization that keeps the first `initialNumToRender` items always rendered and immediately renders the items starting at this initial index. Requires `getItemLayout` to be implemented.

| Type   |
| ------ |
| number |

***

### `inverted`[‚Äã](#inverted "Direct link to inverted")

Reverses the direction of scroll. Uses scale transforms of `-1`.

| Type    |
| ------- |
| boolean |

***

### `keyExtractor`[‚Äã](#keyextractor "Direct link to keyextractor")

tsx

```
(item: ItemT, index: number) => string;
```

Used to extract a unique key for a given item at the specified index. Key is used for caching and as the react key to track item re-ordering. The default extractor checks `item.key`, then `item.id`, and then falls back to using the index, like React does.

| Type     |
| -------- |
| function |

***

### `numColumns`[‚Äã](#numcolumns "Direct link to numcolumns")

Multiple columns can only be rendered with `horizontal={false}` and will zig-zag like a `flexWrap` layout. Items should all be the same height - masonry layouts are not supported.

| Type   |
| ------ |
| number |

***

### `onRefresh`[‚Äã](#onrefresh "Direct link to onrefresh")

tsx

```
() => void;
```

If provided, a standard RefreshControl will be added for "Pull to Refresh" functionality. Make sure to also set the `refreshing` prop correctly.

| Type     |
| -------- |
| function |

***

### `onViewableItemsChanged`[‚Äã](#onviewableitemschanged "Direct link to onviewableitemschanged")

Called when the viewability of rows changes, as defined by the `viewabilityConfig` prop.

| Type                                                                     |
| ------------------------------------------------------------------------ |
| `(callback: {changed: ViewToken[], viewableItems: ViewToken[]} => void;` |

***

### `progressViewOffset`[‚Äã](#progressviewoffset "Direct link to progressviewoffset")

Set this when offset is needed for the loading indicator to show correctly.

| Type   |
| ------ |
| number |

***

### `refreshing`[‚Äã](#refreshing "Direct link to refreshing")

Set this true while waiting for new data from a refresh.

| Type    |
| ------- |
| boolean |

***

### `removeClippedSubviews`[‚Äã](#removeclippedsubviews "Direct link to removeclippedsubviews")

warning

Using this property may lead to bugs (missing content) in some circumstances - use at your own risk.

When `true`, offscreen child views are removed from their native backing superview when offscreen. This may improve scroll performance for large lists. On Android the default value is `true`.

| Type    |
| ------- |
| boolean |

***

### `viewabilityConfig`[‚Äã](#viewabilityconfig "Direct link to viewabilityconfig")

See [`ViewabilityHelper.js`](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Lists/ViewabilityHelper.js) for flow type and further documentation.

| Type              |
| ----------------- |
| ViewabilityConfig |

`viewabilityConfig` takes a type `ViewabilityConfig` an object with following properties

| Property                         | Type    |
| -------------------------------- | ------- |
| minimumViewTime                  | number  |
| viewAreaCoveragePercentThreshold | number  |
| itemVisiblePercentThreshold      | number  |
| waitForInteraction               | boolean |

At least one of the `viewAreaCoveragePercentThreshold` or `itemVisiblePercentThreshold` is required. This needs to be done in the `constructor` to avoid following error ([ref](https://github.com/facebook/react-native/issues/17408)):

```
  Error: Changing viewabilityConfig on the fly is not supported
```

tsx

```
constructor (props) {
  super(props)

  this.viewabilityConfig = {
      waitForInteraction: true,
      viewAreaCoveragePercentThreshold: 95
  }
}
```

tsx

```
<FlatList
    viewabilityConfig={this.viewabilityConfig}
  ...
```

#### minimumViewTime[‚Äã](#minimumviewtime "Direct link to minimumViewTime")

Minimum amount of time (in milliseconds) that an item must be physically viewable before the viewability callback will be fired. A high number means that scrolling through content without stopping will not mark the content as viewable.

#### viewAreaCoveragePercentThreshold[‚Äã](#viewareacoveragepercentthreshold "Direct link to viewAreaCoveragePercentThreshold")

Percent of viewport that must be covered for a partially occluded item to count as "viewable", 0-100. Fully visible items are always considered viewable. A value of 0 means that a single pixel in the viewport makes the item viewable, and a value of 100 means that an item must be either entirely visible or cover the entire viewport to count as viewable.

#### itemVisiblePercentThreshold[‚Äã](#itemvisiblepercentthreshold "Direct link to itemVisiblePercentThreshold")

Similar to `viewAreaCoveragePercentThreshold`, but considers the percent of the item that is visible, rather than the fraction of the viewable area it covers.

#### waitForInteraction[‚Äã](#waitforinteraction "Direct link to waitForInteraction")

Nothing is considered viewable until the user scrolls or `recordInteraction` is called after render.

***

### `viewabilityConfigCallbackPairs`[‚Äã](#viewabilityconfigcallbackpairs "Direct link to viewabilityconfigcallbackpairs")

List of `ViewabilityConfig`/`onViewableItemsChanged` pairs. A specific `onViewableItemsChanged` will be called when its corresponding `ViewabilityConfig`'s conditions are met. See `ViewabilityHelper.js` for flow type and further documentation.

| Type                                   |
| -------------------------------------- |
| array of ViewabilityConfigCallbackPair |

## Methods[‚Äã](#methods "Direct link to Methods")

### `flashScrollIndicators()`[‚Äã](#flashscrollindicators "Direct link to flashscrollindicators")

tsx

```
flashScrollIndicators();
```

Displays the scroll indicators momentarily.

***

### `getNativeScrollRef()`[‚Äã](#getnativescrollref "Direct link to getnativescrollref")

tsx

```
getNativeScrollRef(): React.ElementRef<typeof ScrollViewComponent>;
```

Provides a reference to the underlying scroll component

***

### `getScrollResponder()`[‚Äã](#getscrollresponder "Direct link to getscrollresponder")

tsx

```
getScrollResponder(): ScrollResponderMixin;
```

Provides a handle to the underlying scroll responder.

***

### `getScrollableNode()`[‚Äã](#getscrollablenode "Direct link to getscrollablenode")

tsx

```
getScrollableNode(): any;
```

Provides a handle to the underlying scroll node.

### `scrollToEnd()`[‚Äã](#scrolltoend "Direct link to scrolltoend")

tsx

```
scrollToEnd(params?: {animated?: boolean});
```

Scrolls to the end of the content. May be janky without `getItemLayout` prop.

**Parameters:**

| Name   | Type   |
| ------ | ------ |
| params | object |

Valid `params` keys are:

* 'animated' (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.

***

### `scrollToIndex()`[‚Äã](#scrolltoindex "Direct link to scrolltoindex")

tsx

```
scrollToIndex: (params: {
  index: number;
  animated?: boolean;
  viewOffset?: number;
  viewPosition?: number;
});
```

Scrolls to the item at the specified index such that it is positioned in the viewable area such that `viewPosition` 0 places it at the top, 1 at the bottom, and 0.5 centered in the middle.

note

Cannot scroll to locations outside the render window without specifying the `getItemLayout` prop.

**Parameters:**

| Name           | Type   |
| -------------- | ------ |
| paramsRequired | object |

Valid `params` keys are:

* 'animated' (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.
* 'index' (number) - The index to scroll to. Required.
* 'viewOffset' (number) - A fixed number of pixels to offset the final target position.
* 'viewPosition' (number) - A value of `0` places the item specified by index at the top, `1` at the bottom, and `0.5` centered in the middle.

***

### `scrollToItem()`[‚Äã](#scrolltoitem "Direct link to scrolltoitem")

tsx

```
scrollToItem(params: {
  animated?: ?boolean,
  item: Item,
  viewPosition?: number,
});
```

Requires linear scan through data - use `scrollToIndex` instead if possible.

note

Cannot scroll to locations outside the render window without specifying the `getItemLayout` prop.

**Parameters:**

| Name           | Type   |
| -------------- | ------ |
| paramsRequired | object |

Valid `params` keys are:

* 'animated' (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.
* 'item' (object) - The item to scroll to. Required.
* 'viewPosition' (number)

***

### `scrollToOffset()`[‚Äã](#scrolltooffset "Direct link to scrolltooffset")

tsx

```
scrollToOffset(params: {
  offset: number;
  animated?: boolean;
});
```

Scroll to a specific content pixel offset in the list.

**Parameters:**

| Name           | Type   |
| -------------- | ------ |
| paramsRequired | object |

Valid `params` keys are:

* 'offset' (number) - The offset to scroll to. In case of `horizontal` being true, the offset is the x-value, in any other case the offset is the y-value. Required.
* 'animated' (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.


---

# Layout with Flexbox

A component can specify the layout of its children using the Flexbox algorithm. Flexbox is designed to provide a consistent layout on different screen sizes.

You will normally use a combination of `flexDirection`, `alignItems`, and `justifyContent` to achieve the right layout.

caution

Flexbox works the same way in React Native as it does in CSS on the web, with a few exceptions. The defaults are different, with `flexDirection` defaulting to `column` instead of `row`, `alignContent` defaulting to `flex-start` instead of `stretch`, `flexShrink` defaulting to `0` instead of `1`, the `flex` parameter only supporting a single number.

## Flex[‚Äã](#flex "Direct link to Flex")

[`flex`](/docs/layout-props.md#flex) will define how your items are going to **‚Äúfill‚Äù** over the available space along your main axis. Space will be divided according to each element's flex property.

In the following example, the red, orange, and green views are all children in the container view that has `flex: 1` set. The red view uses `flex: 1` , the orange view uses `flex: 2`, and the green view uses `flex: 3` . **1+2+3 = 6**, which means that the red view will get `1/6` of the space, the orange `2/6` of the space, and the green `3/6` of the space.

## Flex Direction[‚Äã](#flex-direction "Direct link to Flex Direction")

[`flexDirection`](/docs/layout-props.md#flexdirection) controls the direction in which the children of a node are laid out. This is also referred to as the main axis. The cross axis is the axis perpendicular to the main axis, or the axis which the wrapping lines are laid out in.

* `column` (**default value**) Align children from top to bottom. If wrapping is enabled, then the next line will start to the right of the first item on the top of the container.

* `row` Align children from left to right. If wrapping is enabled, then the next line will start under the first item on the left of the container.

* `column-reverse` Align children from bottom to top. If wrapping is enabled, then the next line will start to the right of the first item on the bottom of the container.

* `row-reverse` Align children from right to left. If wrapping is enabled, then the next line will start under the first item on the right of the container.

You can learn more [here](https://www.yogalayout.dev/docs/styling/flex-direction).

* TypeScript
* JavaScript

## Layout Direction[‚Äã](#layout-direction "Direct link to Layout Direction")

Layout [`direction`](/docs/layout-props.md#direction) specifies the direction in which children and text in a hierarchy should be laid out. Layout direction also affects what edge `start` and `end` refer to. By default, React Native lays out with LTR layout direction. In this mode `start` refers to left and `end` refers to right.

* `LTR` (**default value**) Text and children are laid out from left to right. Margin and padding applied to the start of an element are applied on the left side.

* `RTL` Text and children are laid out from right to left. Margin and padding applied to the start of an element are applied on the right side.

- TypeScript
- JavaScript

## Justify Content[‚Äã](#justify-content "Direct link to Justify Content")

[`justifyContent`](/docs/layout-props.md#justifycontent) describes how to align children within the main axis of their container. For example, you can use this property to center a child horizontally within a container with `flexDirection` set to `row` or vertically within a container with `flexDirection` set to `column`.

* `flex-start`(**default value**) Align children of a container to the start of the container's main axis.

* `flex-end` Align children of a container to the end of the container's main axis.

* `center` Align children of a container in the center of the container's main axis.

* `space-between` Evenly space off children across the container's main axis, distributing the remaining space between the children.

* `space-around` Evenly space off children across the container's main axis, distributing the remaining space around the children. Compared to `space-between`, using `space-around` will result in space being distributed to the beginning of the first child and end of the last child.

* `space-evenly` Evenly distribute children within the alignment container along the main axis. The spacing between each pair of adjacent items, the main-start edge and the first item, and the main-end edge and the last item, are all exactly the same.

You can learn more [here](https://www.yogalayout.dev/docs/styling/justify-content).

* TypeScript
* JavaScript

## Align Items[‚Äã](#align-items "Direct link to Align Items")

[`alignItems`](/docs/layout-props.md#alignitems) describes how to align children along the cross axis of their container. It is very similar to `justifyContent` but instead of applying to the main axis, `alignItems` applies to the cross axis.

* `stretch` (**default value**) Stretch children of a container to match the `height` of the container's cross axis.

* `flex-start` Align children of a container to the start of the container's cross axis.

* `flex-end` Align children of a container to the end of the container's cross axis.

* `center` Align children of a container in the center of the container's cross axis.

* `baseline` Align children of a container along a common baseline. Individual children can be set to be the reference baseline for their parents.

info

For `stretch` to have an effect, children must not have a fixed dimension along the secondary axis. In the following example, setting `alignItems: stretch` does nothing until the `width: 50` is removed from the children.

You can learn more [here](https://www.yogalayout.dev/docs/styling/align-items-self).

* TypeScript
* JavaScript

## Align Self[‚Äã](#align-self "Direct link to Align Self")

[`alignSelf`](/docs/layout-props.md#alignself) has the same options and effect as `alignItems` but instead of affecting the children within a container, you can apply this property to a single child to change its alignment within its parent. `alignSelf` overrides any option set by the parent with `alignItems`.

* TypeScript
* JavaScript

## Align Content[‚Äã](#align-content "Direct link to Align Content")

[alignContent](/docs/layout-props.md#aligncontent) defines the distribution of lines along the cross-axis. This only has effect when items are wrapped to multiple lines using `flexWrap`.

* `flex-start` (**default value**) Align wrapped lines to the start of the container's cross axis.

* `flex-end` Align wrapped lines to the end of the container's cross axis.

* `stretch` (*default value when using Yoga on the web*) Stretch wrapped lines to match the height of the container's cross axis.

* `center` Align wrapped lines in the center of the container's cross axis.

* `space-between` Evenly space wrapped lines across the container's cross axis, distributing the remaining space between the lines.

* `space-around` Evenly space wrapped lines across the container's cross axis, distributing the remaining space around the lines. Each end of the container has a half-sized space compared to the space between items.

* `space-evenly` Evenly space wrapped lines across the container's cross axis, distributing the remaining space around the lines. Each space is the same size.

You can learn more [here](https://www.yogalayout.dev/docs/styling/align-content).

* TypeScript
* JavaScript

## Flex Wrap[‚Äã](#flex-wrap "Direct link to Flex Wrap")

The [`flexWrap`](/docs/layout-props.md#flexwrap) property is set on containers and it controls what happens when children overflow the size of the container along the main axis. By default, children are forced into a single line (which can shrink elements). If wrapping is allowed, items are wrapped into multiple lines along the main axis if needed.

When wrapping lines, `alignContent` can be used to specify how the lines are placed in the container. Learn more [here](https://www.yogalayout.dev/docs/styling/flex-wrap).

* TypeScript
* JavaScript

## Flex Basis, Grow, and Shrink[‚Äã](#flex-basis-grow-and-shrink "Direct link to Flex Basis, Grow, and Shrink")

* [`flexBasis`](/docs/layout-props.md#flexbasis) is an axis-independent way of providing the default size of an item along the main axis. Setting the `flexBasis` of a child is similar to setting the `width` of that child if its parent is a container with `flexDirection: row` or setting the `height` of a child if its parent is a container with `flexDirection: column`. The `flexBasis` of an item is the default size of that item, the size of the item before any `flexGrow` and `flexShrink` calculations are performed.

* [`flexGrow`](/docs/layout-props.md#flexgrow) describes how much space within a container should be distributed among its children along the main axis. After laying out its children, a container will distribute any remaining space according to the flex grow values specified by its children.

  `flexGrow` accepts any floating point value >= 0, with 0 being the default value. A container will distribute any remaining space among its children weighted by the children‚Äôs `flexGrow` values.

* [`flexShrink`](/docs/layout-props.md#flexshrink) describes how to shrink children along the main axis in the case in which the total size of the children overflows the size of the container on the main axis. `flexShrink` is very similar to `flexGrow` and can be thought of in the same way if any overflowing size is considered to be negative remaining space. These two properties also work well together by allowing children to grow and shrink as needed.

  `flexShrink` accepts any floating point value >= 0, with 0 being the default value (on the web, the default is 1). A container will shrink its children weighted by the children‚Äôs `flexShrink` values.

You can learn more [here](https://www.yogalayout.dev/docs/styling/flex-basis-grow-shrink).

* TypeScript
* JavaScript

## Row Gap, Column Gap and Gap[‚Äã](#row-gap-column-gap-and-gap "Direct link to Row Gap, Column Gap and Gap")

* [`rowGap`](/docs/layout-props.md#rowgap) sets the size of the gap (gutter) between an element's rows.

* [`columnGap`](/docs/layout-props.md#columngap) sets the size of the gap (gutter) between an element's columns.

* [`gap`](/docs/layout-props.md#gap) sets the size of the gap (gutter) between rows and columns. It is a shorthand for `rowGap` and `columnGap`.

You can use `flexWrap` and `alignContent` along with `gap` to add consistent spacing between items.

* TypeScript
* JavaScript

## Width and Height[‚Äã](#width-and-height "Direct link to Width and Height")

The `width` property specifies the width of an element's content area. Similarly, the `height` property specifies the height of an element's content area.

Both `width` and `height` can take the following values:

* `auto` (**default value**) React Native calculates the width/height for the element based on its content, whether that is other children, text, or an image.

* `pixels` Defines the width/height in absolute pixels. Depending on other styles set on the component, this may or may not be the final dimension of the node.

* `percentage` Defines the width or height in percentage of its parent's width or height, respectively.

- TypeScript
- JavaScript

## Position[‚Äã](#position "Direct link to Position")

The `position` type of an element defines how it is positioned relative to either itself, its parent, or its [containing block](/docs/flexbox.md#the-containing-block).

* `relative` (**default value**) By default, an element is positioned relatively. This means an element is positioned according to the normal flow of the layout, and then offset relative to that position based on the values of `top`, `right`, `bottom`, and `left`. The offset does not affect the position of any sibling or parent elements.

* `absolute` When positioned absolutely, an element doesn't take part in the normal layout flow. It is instead laid out independent of its siblings. The position is determined based on the `top`, `right`, `bottom`, and `left` values. These values will position the element relative to its containing block.

* `static` When positioned statically, an element is positioned according to the normal flow of layout, and will ignore the `top`, `right`, `bottom`, and `left` values. This `position` will also cause the element to not form a containing block for absolute descendants, unless some other superceding style prop is present (e.g. `transform`). This allows `absolute` elements to be positioned to something that is not their parent. Note that **`static` is only available on the New Architecture**.

- TypeScript
- JavaScript

## The Containing Block[‚Äã](#the-containing-block "Direct link to The Containing Block")

The containing block of an element is an ancestor element which controls its position and size. The way containing blocks work in React Native is very similar to [how they work on the web](https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block), with some simplifications due to the lack of some web features.

The `top`, `right`, `bottom`, and `left` values of an absolutely positioned element will be relative to its containing block.

Percentage lengths (e.g.: `width: '50%'` or `padding: '10%'`) applied to absolutely positioned elements will be calculated relatively to the size of its containing block. For example, if the containing block is 100 points wide, then `width: 50%` on an absolutely positioned element will cause it to be 50 points wide.

The following list will help you determine the containing block of any given element:

* If that element has a `position` type of `relative` or `static`, then its containing block is its parent.

* If that element has a `position` type of `absolute`, then its containing block is the nearest ancestor in which one of the following is true:

  <!-- -->

  * It has a `position` type other than `static`
  * It has a `transform`

## Going Deeper[‚Äã](#going-deeper "Direct link to Going Deeper")

Check out the interactive [yoga playground](https://www.yogalayout.dev/playground) that you can use to get a better understanding of flexbox.

We've covered the basics, but there are many other styles you may need for layouts. The full list of props that control layout is documented [here](/docs/layout-props.md).

Additionally, you can see some examples from [Wix Engineers](https://medium.com/wix-engineering/the-full-react-native-layout-cheat-sheet-a4147802405c).


---

# Gesture Responder System

The gesture responder system manages the lifecycle of gestures in your app. A touch can go through several phases as the app determines what the user's intention is. For example, the app needs to determine if the touch is scrolling, sliding on a widget, or tapping. This can even change during the duration of a touch. There can also be multiple simultaneous touches.

The touch responder system is needed to allow components to negotiate these touch interactions without any additional knowledge about their parent or child components.

### Best Practices[‚Äã](#best-practices "Direct link to Best Practices")

To make your app feel great, every action should have the following attributes:

* Feedback/highlighting- show the user what is handling their touch, and what will happen when they release the gesture
* Cancel-ability- when making an action, the user should be able to abort it mid-touch by dragging their finger away

These features make users more comfortable while using an app, because it allows people to experiment and interact without fear of making mistakes.

### TouchableHighlight and Touchable\*[‚Äã](#touchablehighlight-and-touchable "Direct link to TouchableHighlight and Touchable*")

The responder system can be complicated to use. So we have provided an abstract `Touchable` implementation for things that should be "tappable". This uses the responder system and allows you to configure tap interactions declaratively. Use `TouchableHighlight` anywhere where you would use a button or link on web.

## Responder Lifecycle[‚Äã](#responder-lifecycle "Direct link to Responder Lifecycle")

A view can become the touch responder by implementing the correct negotiation methods. There are two methods to ask the view if it wants to become responder:

* `View.props.onStartShouldSetResponder: evt => true,` - Does this view want to become responder on the start of a touch?
* `View.props.onMoveShouldSetResponder: evt => true,` - Called for every touch move on the View when it is not the responder: does this view want to "claim" touch responsiveness?

If the View returns true and attempts to become the responder, one of the following will happen:

* `View.props.onResponderGrant: evt => {}` - The View is now responding for touch events. This is the time to highlight and show the user what is happening
* `View.props.onResponderReject: evt => {}` - Something else is the responder right now and will not release it

If the view is responding, the following handlers can be called:

* `View.props.onResponderMove: evt => {}` - The user is moving their finger
* `View.props.onResponderRelease: evt => {}` - Fired at the end of the touch, ie "touchUp"
* `View.props.onResponderTerminationRequest: evt => true` - Something else wants to become responder. Should this view release the responder? Returning true allows release
* `View.props.onResponderTerminate: evt => {}` - The responder has been taken from the View. Might be taken by other views after a call to `onResponderTerminationRequest`, or might be taken by the OS without asking (happens with control center/ notification center on iOS)

`evt` is a synthetic touch event with the following form:

* `nativeEvent`

  * `changedTouches` - Array of all touch events that have changed since the last event
  * `identifier` - The ID of the touch
  * `locationX` - The X position of the touch, relative to the element
  * `locationY` - The Y position of the touch, relative to the element
  * `pageX` - The X position of the touch, relative to the root element
  * `pageY` - The Y position of the touch, relative to the root element
  * `target` - The node id of the element receiving the touch event
  * `timestamp` - A time identifier for the touch, useful for velocity calculation
  * `touches` - Array of all current touches on the screen

### Capture ShouldSet Handlers[‚Äã](#capture-shouldset-handlers "Direct link to Capture ShouldSet Handlers")

`onStartShouldSetResponder` and `onMoveShouldSetResponder` are called with a bubbling pattern, where the deepest node is called first. That means that the deepest component will become responder when multiple Views return true for `*ShouldSetResponder` handlers. This is desirable in most cases, because it makes sure all controls and buttons are usable.

However, sometimes a parent will want to make sure that it becomes responder. This can be handled by using the capture phase. Before the responder system bubbles up from the deepest component, it will do a capture phase, firing `on*ShouldSetResponderCapture`. So if a parent View wants to prevent the child from becoming responder on a touch start, it should have a `onStartShouldSetResponderCapture` handler which returns true.

* `View.props.onStartShouldSetResponderCapture: evt => true,`
* `View.props.onMoveShouldSetResponderCapture: evt => true,`

### PanResponder[‚Äã](#panresponder "Direct link to PanResponder")

For higher-level gesture interpretation, check out [PanResponder](/docs/panresponder.md).


---

# Introduction

Welcome to the very start of your React Native journey! If you're looking for getting started instructions, they've moved to [their own section](environment-setup). Continue reading for an introduction to the documentation, Native Components, React, and more!

![ ](/docs/assets/p_android-ios-devices.svg)

Many different kinds of people use React Native: from advanced iOS developers to React beginners, to people getting started programming for the first time in their career. These docs were written for all learners, no matter their experience level or background.

## How to use these docs[‚Äã](#how-to-use-these-docs "Direct link to How to use these docs")

You can start here and read through these docs linearly like a book; or you can read the specific sections you need. Already familiar with React? You can skip [that section](/docs/intro-react.md)‚Äîor read it for a light refresher.

## Prerequisites[‚Äã](#prerequisites "Direct link to Prerequisites")

To work with React Native, you will need to have an understanding of JavaScript fundamentals. If you‚Äôre new to JavaScript or need a refresher, you can [dive in](https://developer.mozilla.org/en-US/docs/Web/JavaScript) or [brush up](https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript) at Mozilla Developer Network.

info

While we do our best to assume no prior knowledge of React, Android, or iOS development, these are valuable topics of study for the aspiring React Native developer. Where sensible, we have linked to resources and articles that go more in depth.

## Interactive examples[‚Äã](#interactive-examples "Direct link to Interactive examples")

This introduction lets you get started immediately in your browser with interactive examples like this one:

The above is a Snack Player. It‚Äôs a handy tool created by Expo to embed and run React Native projects and share how they render in platforms like Android and iOS. The code is live and editable, so you can play directly with it in your browser. Go ahead and try changing the "Try editing me!" text above to "Hello, world!"

tip

Optionally, if you want to set up a local development environment, [you can follow our guide to setting up your environment on your local machine](/docs/set-up-your-environment.md) and paste the code examples into your project. (If you are a web developer, you may already have a local environment set up for mobile browser testing!)

## Developer Notes[‚Äã](#developer-notes "Direct link to Developer Notes")

People from many different development backgrounds are learning React Native. You may have experience with a range of technologies, from web to Android to iOS and more. We try to write for developers from all backgrounds. Sometimes we provide explanations specific to one platform or another like so:

* Android
* iOS
* Web

info

Android developers may be familiar with this concept.

info

iOS developers may be familiar with this concept.

info

Web developers may be familiar with this concept.

## Formatting[‚Äã](#formatting "Direct link to Formatting")

Menu paths are written in bold and use carets to navigate submenus. Example: **Android Studio > Preferences**

***

Now that you know how this guide works, it's time to get to know the foundation of React Native: [Native Components](/docs/intro-react-native-components.md).


---

# Get Started Without a Framework

**Platform support**

Android

iOS

macOS

TV

watchOS

Web

Windows

visionOS

If you have constraints that are not served well by a [Framework](/architecture/glossary.md#react-native-framework), or you prefer to write your own Framework, you can create a React Native app without using a Framework.

To do so, you'll first need to [set up your environment](/docs/set-up-your-environment.md). Once you're set up, continue with the steps below to create an application and start developing.

### Step 1: Creating a new application[‚Äã](#step-1-creating-a-new-application "Direct link to Step 1: Creating a new application")

warning

If you previously installed a global `react-native-cli` package, please remove it as it may cause unexpected issues:

shell

```
npm uninstall -g react-native-cli @react-native-community/cli
```

You can use [React Native Community CLI](https://github.com/react-native-community/cli) to generate a new project. Let's create a new React Native project called "AwesomeProject":

shell

```
npx @react-native-community/cli@latest init AwesomeProject
```

This is not necessary if you are integrating React Native into an existing application, or if you've installed [Expo](https://docs.expo.dev/bare/installing-expo-modules/) in your project, or if you're adding Android support to an existing React Native project (see [Integration with Existing Apps](/docs/integration-with-existing-apps.md)). You can also use a third-party CLI to set up your React Native app, such as [Ignite CLI](https://github.com/infinitered/ignite).

info

If you are having trouble with iOS, try to reinstall the dependencies by running:

1. `cd ios` to navigate to the `ios` folder.
2. `bundle install` to install [Bundler](https://bundler.io/)
3. `bundle exec pod install` to install the iOS dependencies managed by CocoaPods.

#### \[Optional] Using a specific version or template[‚Äã](#optional-using-a-specific-version-or-template "Direct link to \[Optional] Using a specific version or template")

If you want to start a new project with a specific React Native version, you can use the `--version` argument:

shell

```
npx @react-native-community/cli@X.XX.X init AwesomeProject --version X.XX.X
```

You can also start a project with a custom React Native template with the `--template` argument, read more [here](https://github.com/react-native-community/cli/blob/main/docs/init.md#initializing-project-with-custom-template).

### Step 2: Start Metro[‚Äã](#step-2-start-metro "Direct link to Step 2: Start Metro")

[**Metro**](https://metrobundler.dev/) is the JavaScript build tool for React Native. To start the Metro development server, run the following from your project folder:

* npm
* Yarn

shell

```
npm start
```

shell

```
yarn start
```

note

If you're familiar with web development, Metro is similar to bundlers such as Vite and webpack, but is designed end-to-end for React Native. For instance, Metro uses [Babel](https://babel.dev/) to transform syntax such as JSX into executable JavaScript.

### Step 3: Start your application[‚Äã](#step-3-start-your-application "Direct link to Step 3: Start your application")

Let Metro Bundler run in its own terminal. Open a new terminal inside your React Native project folder. Run the following:

* npm
* Yarn

shell

```
npm run android
```

shell

```
yarn android
```

If everything is set up correctly, you should see your new app running in your Android emulator shortly.

This is one way to run your app - you can also run it directly from within Android Studio.

tip

If you can't get this to work, see the [Troubleshooting](/docs/troubleshooting.md) page.

### Step 4: Modifying your app[‚Äã](#step-4-modifying-your-app "Direct link to Step 4: Modifying your app")

Now that you have successfully run the app, let's modify it.

* Open `App.tsx` in your text editor of choice and edit some lines.
* Press the `R` key twice or select `Reload` from the Dev Menu (`Ctrl` + `M`) to see your changes!

### That's it\![‚Äã](#thats-it "Direct link to That's it!")

Congratulations! You've successfully run and modified your first barebone React Native app.

![](/docs/assets/GettingStartedCongratulations.png)

### Now what?[‚Äã](#now-what "Direct link to Now what?")

* If you want to add this new React Native code to an existing application, check out the [Integration guide](/docs/integration-with-existing-apps.md).
* If you're curious to learn more about React Native, check out the [Introduction to React Native](/docs/getting-started.md).


---

# ‚ú® \_\_DEV\_\_

You can use the `__DEV__` pseudo-global variable in the codebase to guard development-only blocks of code.

It is inlined during compilation and gets completely stripped out with the `if` blocks it guards in the minified build.


---

# AbortController

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/AbortController) for more information.

The global `AbortController` class, as defined in Web specifications.


---

# AbortSignal

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal) for more information.

The global `AbortSignal` class, as defined in Web specifications.


---

# alert

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/alert) for more information.

The global `alert` function, as defined in Web specifications.


---

# Blob

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Blob) for more information.

The global `Blob` class, as defined in Web specifications.


---

# cancelAnimationFrame

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/cancelAnimationFrame) for more information.

The global `cancelAnimationFrame` function, as defined in Web specifications.


---

# cancelIdleCallback

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/cancelIdleCallback) for more information.

The global `cancelIdleCallback` function, as defined in Web specifications.


---

# clearInterval

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/clearInterval) for more information.

The global `clearInterval` function, as defined in Web specifications.


---

# clearTimeout

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/clearTimeout) for more information.

The global `clearTimeout` function, as defined in Web specifications.


---

# console

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/console) for more information.

The global `console` object, as defined in Web specifications.

***

## Methods[‚Äã](#methods "Direct link to Methods")

### `timeStamp()`[‚Äã](#timestamp "Direct link to timestamp")

tsx

```
console.timeStamp(
  label: string,
  start?: string | number,
  end?: string | number,
  trackName?: string,
  trackGroup?: string,
  color?: DevToolsColor
): void;
```

The `console.timeStamp` API allows you to add custom timing entries in the Performance panel timeline.

**Parameters:**

| Name       | Type               | Required | Description                                                                                                                                                                                                                                                                                 |
| ---------- | ------------------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| label      | `string`           | Yes      | The label for the timing entry.                                                                                                                                                                                                                                                             |
| start      | `string \| number` | No       | - If string, the name of a previously recorded timestamp with `console.timeStamp`.<br />- If number, the [DOMHighResTimeStamp](https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp). For example, from `performance.now()`.<br />- If undefined, the current time is used. |
| end        | `string \| number` | No       | - If string, the name of a previously recorded timestamp with `console.timeStamp`.<br />- If number, the [DOMHighResTimeStamp](https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp). For example, from `performance.now()`.<br />- If undefined, the current time is used. |
| trackName  | `string`           | No       | The name of the custom track.                                                                                                                                                                                                                                                               |
| trackGroup | `string`           | No       | The name of the track group.                                                                                                                                                                                                                                                                |
| color      | `DevToolsColor`    | No       | The color of the entry.                                                                                                                                                                                                                                                                     |

tsx

```
type DevToolsColor =
  | 'primary'
  | 'primary-light'
  | 'primary-dark'
  | 'secondary'
  | 'secondary-light'
  | 'secondary-dark'
  | 'tertiary'
  | 'tertiary-light'
  | 'tertiary-dark'
  | 'warning'
  | 'error';
```


---

# EventCounts

The global [`EventCounts`](https://developer.mozilla.org/en-US/docs/Web/API/EventCounts) class, as defined in Web specifications.


---

# fetch

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/fetch) for more information.

The global `fetch` function, as defined in Web specifications.


---

# File

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/File) for more information.

The global `File` class, as defined in Web specifications.


---

# FileReader

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/FileReader) for more information.

The global `FileReader` class, as defined in Web specifications.


---

# FormData

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/FormData) for more information.

The global `FormData` class, as defined in Web specifications.


---

# global

[`global`](https://nodejs.org/api/globals.html#global) is a legacy alias for [`globalThis`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis), as defined in Node.js.

The use of `globalThis` is recommended over `global`.


---

# Headers

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Headers) for more information.

The global `Headers` class, as defined in Web specifications.


---

# IntersectionObserver üß™

Canary üß™

**This API is currently only available in React Native‚Äôs Canary and Experimental channels.**

If you want to try it out, please [enable the Canary Channel](/docs/releases/release-levels.md) in your app.

The global [`IntersectionObserver`](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver) interface, as defined in Web specifications. It provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element or with a top-level document's viewport.

***

# Reference

## Constructor[‚Äã](#constructor "Direct link to Constructor")

### `IntersectionObserver()`[‚Äã](#intersectionobserver "Direct link to intersectionobserver")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/IntersectionObserver).

Creates a new `IntersectionObserver` object which will execute a specified callback function when it detects that a target element's visibility has crossed one or more `threshold` or `rnRootThreshold` values.

ts

```
new IntersectionObserver(callback, options?)
```

#### Parameters[‚Äã](#parameters "Direct link to Parameters")

**`callback`**

A function which is called when the percentage of the target element is visible crosses a threshold. The callback receives two parameters:

* `entries`: An array of [`IntersectionObserverEntry`](/docs/global-intersectionobserverentry.md) objects, each representing one threshold which was crossed, either becoming more or less visible than the percentage specified by that threshold.
* `observer`: The `IntersectionObserver` instance which invoked the callback.

**`options`** (optional)

An optional object with the following properties:

| Name                 | Type                                      | Description                                                                                                                                                                                                       |
| -------------------- | ----------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `root`               | [Element](/docs/element-nodes.md) \| null | An element that is an ancestor of the target, whose bounding rectangle will be considered the viewport. Defaults to the root viewport if not specified or if `null`.                                              |
| `rootMargin`         | string                                    | A string which specifies a set of offsets to add to the root's bounding box when calculating intersections. Defaults to `"0px 0px 0px 0px"`.                                                                      |
| `threshold`          | number \| number\[]                       | Either a single number or an array of numbers between 0.0 and 1.0, specifying a ratio of intersection area to total bounding box area for the observed target. Defaults to `[0]` if `rnRootThreshold` is not set. |
| `rnRootThreshold` ‚ö†Ô∏è | number \| number\[]                       | **React Native specific.** Either a single number or an array of numbers between 0.0 and 1.0, specifying a ratio of intersection area to the total root area.                                                     |

## Instance properties[‚Äã](#instance-properties "Direct link to Instance properties")

### `root`[‚Äã](#root "Direct link to root")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/root).

The element or document whose bounds are used as the bounding box when testing for intersection.

### `rootMargin`[‚Äã](#rootmargin "Direct link to rootmargin")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/rootMargin).

An offset rectangle applied to the root's bounding box when calculating intersections.

### `rnRootThresholds` ‚ö†Ô∏è[‚Äã](#rnrootthresholds-Ô∏è "Direct link to rnrootthresholds-Ô∏è")

Non-standard

This is a React Native specific extension.

A list of root thresholds, sorted in increasing numeric order, where each threshold is a ratio of intersection area to bounding box area of the specified root view, which defaults to the viewport.

Notifications for a target are generated when any of the thresholds specified in `rnRootThresholds` or `thresholds` are crossed for that target.

ts

```
get rnRootThresholds(): ReadonlyArray<number> | null;
```

### `thresholds`[‚Äã](#thresholds "Direct link to thresholds")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/thresholds).

A list of thresholds, sorted in increasing numeric order, where each threshold is a ratio of intersection area to bounding box area of an observed target.

Notifications for a target are generated when any of the thresholds specified in `rnRootThresholds` or `thresholds` are crossed for that target.

## Instance methods[‚Äã](#instance-methods "Direct link to Instance methods")

### `disconnect()`[‚Äã](#disconnect "Direct link to disconnect")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/disconnect).

Stops the `IntersectionObserver` object from observing any target.

### `observe()`[‚Äã](#observe "Direct link to observe")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/observe).

Tells the `IntersectionObserver` to begin observing a target element.

### `takeRecords()`[‚Äã](#takerecords "Direct link to takerecords")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/takeRecords).

Returns an array of `IntersectionObserverEntry` objects for all observed targets.

### `unobserve()`[‚Äã](#unobserve "Direct link to unobserve")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/unobserve).

Tells the `IntersectionObserver` to stop observing a particular target element.


---

# IntersectionObserverEntry üß™

Canary üß™

**This API is currently only available in React Native‚Äôs Canary and Experimental channels.**

If you want to try it out, please [enable the Canary Channel](/docs/releases/release-levels.md) in your app.

The [`IntersectionObserverEntry`](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry) interface, as defined in Web specifications. It describes the intersection between the target element and its root container at a specific moment of transition.

Instances of `IntersectionObserverEntry` are delivered to an [`IntersectionObserver`](/docs/global-intersectionobserver.md) callback in its `entries` parameter.

***

# Reference

## Instance properties[‚Äã](#instance-properties "Direct link to Instance properties")

### `boundingClientRect`[‚Äã](#boundingclientrect "Direct link to boundingclientrect")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/boundingClientRect).

Returns the bounds rectangle of the target element as a `DOMRectReadOnly`.

### `intersectionRatio`[‚Äã](#intersectionratio "Direct link to intersectionratio")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/intersectionRatio).

Returns the ratio of the `intersectionRect` to the `boundingClientRect`.

### `intersectionRect`[‚Äã](#intersectionrect "Direct link to intersectionrect")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/intersectionRect).

Returns a `DOMRectReadOnly` representing the target's visible area.

### `isIntersecting`[‚Äã](#isintersecting "Direct link to isintersecting")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/isIntersecting).

A Boolean value which is `true` if the target element intersects with the intersection observer's root. If this is `true`, then the `IntersectionObserverEntry` describes a transition into a state of intersection; if it's `false`, then you know the transition is from intersecting to not-intersecting.

### `rnRootIntersectionRatio` ‚ö†Ô∏è[‚Äã](#rnrootintersectionratio-Ô∏è "Direct link to rnrootintersectionratio-Ô∏è")

Non-standard

This is a React Native specific extension.

Returns the ratio of the `intersectionRect` to the `rootBounds`.

ts

```
get rnRootIntersectionRatio(): number;
```

This is analogous to `intersectionRatio`, but computed relative to the root's bounding box instead of the target's bounding box. This corresponds to the `rnRootThreshold` option and allows you to determine what percentage of the root area is covered by the target element.

### `rootBounds`[‚Äã](#rootbounds "Direct link to rootbounds")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/rootBounds).

Returns a `DOMRectReadOnly` for the intersection observer's root.

### `target`[‚Äã](#target "Direct link to target")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/target).

The `Element` whose intersection with the root changed.

### `time`[‚Äã](#time "Direct link to time")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/time).

A `DOMHighResTimeStamp` indicating the time at which the intersection was recorded, relative to the `IntersectionObserver`'s time origin.


---

# navigator

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/navigator) for more information.

The global `navigator` object, as defined in Web specifications.


---

# performance

The global [`performance`](https://developer.mozilla.org/en-US/docs/Web/API/Window/performance) object, as defined in Web specifications.

***

# Reference

## Instance properties[‚Äã](#instance-properties "Direct link to Instance properties")

### `eventCounts`[‚Äã](#eventcounts "Direct link to eventcounts")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/eventCounts).

### `memory`[‚Äã](#memory "Direct link to memory")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/memory).

### `rnStartupTiming` ‚ö†Ô∏è[‚Äã](#rnstartuptiming-Ô∏è "Direct link to rnstartuptiming-Ô∏è")

Non-standard

This is a React Native specific extension.

Provides information about the startup time of the application.

ts

```
get rnStartupTiming(): ReactNativeStartupTiming;
```

The `ReactNativeStartupTiming` interface provides the following fields:

| Name                                     | Type           | Description                                               |
| ---------------------------------------- | -------------- | --------------------------------------------------------- |
| `startTime`                              | number \| void | When the React Native runtime initialization was started. |
| `executeJavaScriptBundleEntryPointStart` | number \| void | When the execution of the application bundle was started. |
| `endTime`                                | number \| void | When the React Native runtime was fully initialized.      |

### `timeOrigin`[‚Äã](#timeorigin "Direct link to timeorigin")

Partial support

Provides the number of milliseconds from the UNIX epoch until system boot, instead of the number of milliseconds from the UNIX epoch until app startup.

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/timeOrigin).

## Instance methods[‚Äã](#instance-methods "Direct link to Instance methods")

### `clearMarks()`[‚Äã](#clearmarks "Direct link to clearmarks")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/clearMarks).

### `clearMeasures()`[‚Äã](#clearmeasures "Direct link to clearmeasures")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/clearMeasures).

### `getEntries()`[‚Äã](#getentries "Direct link to getentries")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/getEntries).

### `getEntriesByName()`[‚Äã](#getentriesbyname "Direct link to getentriesbyname")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/getEntriesByName).

### `getEntriesByType()`[‚Äã](#getentriesbytype "Direct link to getentriesbytype")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/getEntriesByType).

### `mark()`[‚Äã](#mark "Direct link to mark")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/mark).

### `measure()`[‚Äã](#measure "Direct link to measure")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure).

### `now()`[‚Äã](#now "Direct link to now")

Partial support

Provides the number of milliseconds from system boot, instead of the number of milliseconds from app startup.

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance/now).


---

# PerformanceEntry

The global [`PerformanceEntry`](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceEntry) class, as defined in Web specifications.


---

# PerformanceEventTiming

The global [`PerformanceEventTiming`](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceEventTiming) class, as defined in Web specifications.

Partial support

The `cancelable` and `target` properties are not supported yet.


---

# PerformanceLongTaskTiming

The global [`PerformanceLongTaskTiming`](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceLongTaskTiming) class, as defined in Web specifications.

Partial support

The value for the `attribution` property is always an empty array.


---

# PerformanceMark

The global [`PerformanceMark`](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceMark) class, as defined in Web specifications.


---

# PerformanceMeasure

The global [`PerformanceMeasure`](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceMeasure) class, as defined in Web specifications.


---

# PerformanceObserver

The global [`PerformanceObserver`](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver) class, as defined in Web specifications.

## Example[‚Äã](#example "Direct link to Example")

ts

```
const observer = new PerformanceObserver(
  (list, observer, options) => {
    for (const entry of list.getEntries()) {
      console.log(
        'Received entry with type',
        entry.entryType,
        'and name',
        entry.name,
        'that started at',
        entry.startTime,
        'and took',
        entry.duration,
        'ms',
      );
    }
  },
);

observer.observe({entryTypes: ['mark', 'measure']});
```

***

# Reference

## Constructor[‚Äã](#constructor "Direct link to Constructor")

### `PerformanceObserver()`[‚Äã](#performanceobserver "Direct link to performanceobserver")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver/PerformanceObserver).

## Static properties[‚Äã](#static-properties "Direct link to Static properties")

### `supportedEntryTypes`[‚Äã](#supportedentrytypes "Direct link to supportedentrytypes")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver/supportedEntryTypes).

Returns `['mark', 'measure', 'event', 'longtask']`.

## Instance methods[‚Äã](#instance-methods "Direct link to Instance methods")

### `observe()`[‚Äã](#observe "Direct link to observe")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver/observe).

### `disconnect()`[‚Äã](#disconnect "Direct link to disconnect")

See [documentation in MDN](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver/disconnect).


---

# PerformanceObserverEntryList

The global [`PerformanceObserverEntryList`](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserverEntryList) class, as defined in Web specifications.


---

# PerformanceResourceTiming

The global [`PerformanceResourceTiming`](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming) class, as defined in Web specifications.

Partial support

React Native implements the following `PerformanceResourceTiming` properties only:

* `fetchStart`
* `requestStart`
* `connectStart`
* `connectEnd`
* `responseStart`
* `responseEnd`
* `responseStatus`
* `contentType`
* `encodedBodySize`
* `decodedBodySize`


---

# process

warning

üöß This page is work in progress.

The global `process` object, as defined in Node.js.


---

# queueMicrotask

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/queueMicrotask) for more information.

The global `queueMicrotask` function, as defined in Web specifications.


---

# Request

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Request) for more information.

The global `Request` class, as defined in Web specifications.


---

# requestAnimationFrame

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/requestAnimationFrame) for more information.

The global `requestAnimationFrame` function, as defined in Web specifications.


---

# requestIdleCallback

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback) for more information.

The global `requestIdleCallback` function, as defined in Web specifications.


---

# Response

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Response) for more information.

The global `Response` class, as defined in Web specifications.


---

# self

[`self`](https://developer.mozilla.org/en-US/docs/Web/API/Window/self) is an alias for [`globalThis`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis), as defined in Web specifications.

The use of `globalThis` is recommended over `self`.


---

# setInterval

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/setInterval) for more information.

The global `setInterval` function, as defined in Web specifications.


---

# setTimeout

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/setTimeout) for more information.

The global `setTimeout` function, as defined in Web specifications.


---

# URL

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/URL) for more information.

The global `URL` class, as defined in Web specifications.


---

# URLSearchParams

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams) for more information.\\

The global `URLSearchParams` class, as defined in Web specifications.


---

# WebSocket

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket) for more information.

The global `WebSocket` class, as defined in Web specifications.


---

# window

[`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) is an alias for [`globalThis`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis), as defined in Web specifications.

The use of `globalThis` is recommended over `window`.


---

# XMLHttpRequest

warning

üöß This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) for more information.

The global `XMLHttpRequest` class, as defined in Web specifications.


---

# Handling Text Input

[`TextInput`](/docs/textinput.md#content) is a [Core Component](/docs/intro-react-native-components.md) that allows the user to enter text. It has an `onChangeText` prop that takes a function to be called every time the text changed, and an `onSubmitEditing` prop that takes a function to be called when the text is submitted.

For example, let's say that as the user types, you're translating their words into a different language. In this new language, every single word is written the same way: üçï. So the sentence "Hello there Bob" would be translated as "üçï üçï üçï".

In this example, we store `text` in the state, because it changes over time.

There are a lot more things you might want to do with a text input. For example, you could validate the text inside while the user types. For more detailed examples, see the [React docs on controlled components](https://react.dev/reference/react-dom/components/input#controlling-an-input-with-a-state-variable), or the [reference docs for TextInput](/docs/textinput.md).

A `TextInput` is one of many ways for the user to interact with your app. For examples of other ways to handle input, see the documentation on [how to handle touches](/docs/handling-touches.md).

Now, let's take a look at [ScrollView](/docs/using-a-scrollview.md), another Core Component.


---

# Handling Touches

Users interact with mobile apps mainly through touch. They can use a combination of gestures, such as tapping on a button, scrolling a list, or zooming on a map. React Native provides components to handle all sorts of common gestures, as well as a comprehensive [gesture responder system](/docs/gesture-responder-system.md) to allow for more advanced gesture recognition, but the one component you will most likely be interested in is the basic Button.

## Displaying a basic button[‚Äã](#displaying-a-basic-button "Direct link to Displaying a basic button")

[Button](/docs/button.md) provides a basic button component that is rendered nicely on all platforms. The minimal example to display a button looks like this:

tsx

```
<Button
  onPress={() => {
    console.log('You tapped the button!');
  }}
  title="Press Me"
/>
```

This will render a blue label on iOS, and a blue rounded rectangle with light text on Android. Pressing the button will call the "onPress" function, which in this case displays an alert popup. If you like, you can specify a "color" prop to change the color of your button.

![](/assets/images/Button-b053d1b4ecdc78a87ce72711549ba2ca.png)

Go ahead and play around with the `Button` component using the example below. You can select which platform your app is previewed in by clicking on the toggle in the bottom right and then clicking on "Tap to Play" to preview the app.

## Touchables[‚Äã](#touchables "Direct link to Touchables")

If the basic button doesn't look right for your app, you can build your own button using any of the "Touchable" components provided by React Native. These components provide the capability to capture tapping gestures and can display feedback when a gesture is recognized. However, these components do not provide any default styling, so you will need to do a bit of work to get them looking nice in your app.

Which "Touchable" component you use will depend on what kind of feedback you want to provide:

* Generally, you can use [**TouchableHighlight**](/docs/touchablehighlight.md) anywhere you would use a button or link on web. The view's background will be darkened when the user presses down on the button.

* You may consider using [**TouchableNativeFeedback**](/docs/touchablenativefeedback.md) on Android to display ink surface reaction ripples that respond to the user's touch.

* [**TouchableOpacity**](/docs/touchableopacity.md) can be used to provide feedback by reducing the opacity of the button, allowing the background to be seen through while the user is pressing down.

* If you need to handle a tap gesture but you don't want any feedback to be displayed, use [**TouchableWithoutFeedback**](/docs/touchablewithoutfeedback.md).

In some cases, you may want to detect when a user presses and holds a view for a set amount of time. These long presses can be handled by passing a function to the `onLongPress` props of any of the "Touchable" components.

Let's see all of these in action:

## Scrolling and swiping[‚Äã](#scrolling-and-swiping "Direct link to Scrolling and swiping")

Gestures commonly used on devices with touchable screens include swipes and pans. These allow the user to scroll through a list of items, or swipe through pages of content. For these, check out the [ScrollView](/docs/scrollview.md) Core Component.

## Known issues[‚Äã](#known-issues "Direct link to Known issues")

* [react-native#29308](https://github.com/facebook/react-native/issues/29308#issuecomment-792864162): The touch area never extends past the parent view bounds and on Android negative margin is not supported.


---

# Headless JS

Headless JS is a way to run tasks in JavaScript while your app is in the background. It can be used, for example, to sync fresh data, handle push notifications, or play music.

## The JS API[‚Äã](#the-js-api "Direct link to The JS API")

A task is an async function that you register on `AppRegistry`, similar to registering React applications:

tsx

```
import {AppRegistry} from 'react-native';
AppRegistry.registerHeadlessTask('SomeTaskName', () =>
  require('SomeTaskName'),
);
```

Then, in `SomeTaskName.js`:

tsx

```
module.exports = async taskData => {
  // do stuff
};
```

You can do anything in your task such as network requests, timers and so on, as long as it doesn't touch UI. Once your task completes (i.e. the promise is resolved), React Native will go into "paused" mode (unless there are other tasks running, or there is a foreground app).

## The Platform API[‚Äã](#the-platform-api "Direct link to The Platform API")

Yes, this does still require some native code, but it's pretty thin. You need to extend `HeadlessJsTaskService` and override `getTaskConfig`, e.g.:

* Java
* Kotlin

java

```
package com.your_application_name;

import android.content.Intent;
import android.os.Bundle;
import com.facebook.react.HeadlessJsTaskService;
import com.facebook.react.bridge.Arguments;
import com.facebook.react.jstasks.HeadlessJsTaskConfig;
import javax.annotation.Nullable;

public class MyTaskService extends HeadlessJsTaskService {

  @Override
  protected @Nullable HeadlessJsTaskConfig getTaskConfig(Intent intent) {
    Bundle extras = intent.getExtras();
    if (extras != null) {
      return new HeadlessJsTaskConfig(
          "SomeTaskName",
          Arguments.fromBundle(extras),
          5000, // timeout in milliseconds for the task
          false // optional: defines whether or not the task is allowed in foreground. Default is false
        );
    }
    return null;
  }
}
```

kotlin

```
package com.your_application_name;

import android.content.Intent
import com.facebook.react.HeadlessJsTaskService
import com.facebook.react.bridge.Arguments
import com.facebook.react.jstasks.HeadlessJsTaskConfig

class MyTaskService : HeadlessJsTaskService() {
    override fun getTaskConfig(intent: Intent?): HeadlessJsTaskConfig? {
        return intent.extras?.let {
            HeadlessJsTaskConfig(
                "SomeTaskName",
                Arguments.fromBundle(it),
                5000, // timeout for the task
                false // optional: defines whether or not the task is allowed in foreground.
                // Default is false
            )
        }
    }
}
```

Then add the service to your `AndroidManifest.xml` file inside the `application` tag:

xml

```
<service android:name="com.example.MyTaskService" />
```

Now, whenever you [start your service](https://developer.android.com/reference/android/content/Context.html#startService\(android.content.Intent\)), e.g. as a periodic task or in response to some system event / broadcast, JS will spin up, run your task, then spin down.

Example:

* Java
* Kotlin

java

```
Intent service = new Intent(getApplicationContext(), MyTaskService.class);
Bundle bundle = new Bundle();

bundle.putString("foo", "bar");
service.putExtras(bundle);

getApplicationContext().startForegroundService(service);
```

kotlin

```
val service = Intent(applicationContext, MyTaskService::class.java)
val bundle = Bundle()

bundle.putString("foo", "bar")

service.putExtras(bundle)

applicationContext.startForegroundService(service)
```

## Retries[‚Äã](#retries "Direct link to Retries")

By default, the headless JS task will not perform any retries. In order to do so, you need to create a `HeadlessJsRetryPolicy` and throw a specific `Error`.

`LinearCountingRetryPolicy` is an implementation of `HeadlessJsRetryPolicy` that allows you to specify a maximum number of retries with a fixed delay between each attempt. If that does not suit your needs then you can implement your own `HeadlessJsRetryPolicy`. These policies can be passed as an extra argument to the `HeadlessJsTaskConfig` constructor, e.g.

* Java
* Kotlin

java

```
HeadlessJsRetryPolicy retryPolicy = new LinearCountingRetryPolicy(
  3, // Max number of retry attempts
  1000 // Delay between each retry attempt
);

return new HeadlessJsTaskConfig(
  'SomeTaskName',
  Arguments.fromBundle(extras),
  5000,
  false,
  retryPolicy
);
```

kotlin

```
val retryPolicy: HeadlessJsTaskRetryPolicy =
    LinearCountingRetryPolicy(
        3, // Max number of retry attempts
        1000 // Delay between each retry attempt
    )

return HeadlessJsTaskConfig("SomeTaskName", Arguments.fromBundle(extras), 5000, false, retryPolicy)
```

A retry attempt will only be made when a specific `Error` is thrown. Inside a headless JS task, you can import the error and throw it when a retry attempt is required.

Example:

tsx

```
import {HeadlessJsTaskError} from 'HeadlessJsTask';

module.exports = async taskData => {
  const condition = ...;
  if (!condition) {
    throw new HeadlessJsTaskError();
  }
};
```

If you wish all errors to cause a retry attempt, you will need to catch them and throw the above error.

## Caveats[‚Äã](#caveats "Direct link to Caveats")

* By default, your app will crash if you try to run a task while the app is in the foreground. This is to prevent developers from shooting themselves in the foot by doing a lot of work in a task and slowing the UI. You can pass a fourth `boolean` argument to control this behaviour.
* If you start your service from a `BroadcastReceiver`, make sure to call `HeadlessJsTaskService.acquireWakeLockNow()` before returning from `onReceive()`.

## Example Usage[‚Äã](#example-usage "Direct link to Example Usage")

Service can be started from Java API. First you need to decide when the service should be started and implement your solution accordingly. Here is an example that reacts to network connection change.

Following lines shows part of Android manifest file for registering broadcast receiver.

xml

```
<receiver android:name=".NetworkChangeReceiver" >
  <intent-filter>
    <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
  </intent-filter>
</receiver>
```

Broadcast receiver then handles intent that was broadcasted in onReceive function. This is a great place to check whether your app is on foreground or not. If app is not on foreground we can prepare our intent to be started, with no information or additional information bundled using `putExtra` (keep in mind bundle can handle only parcelable values). In the end service is started and wakelock is acquired.

* Java
* Kotlin

java

```
import android.app.ActivityManager;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.Network;
import android.net.NetworkCapabilities;
import android.net.NetworkInfo;
import android.os.Build;

import com.facebook.react.HeadlessJsTaskService;

public class NetworkChangeReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, final Intent intent) {
        /**
         This part will be called every time network connection is changed
         e.g. Connected -> Not Connected
         **/
        if (!isAppOnForeground((context))) {
            /**
             We will start our service and send extra info about
             network connections
             **/
            boolean hasInternet = isNetworkAvailable(context);
            Intent serviceIntent = new Intent(context, MyTaskService.class);
            serviceIntent.putExtra("hasInternet", hasInternet);
            context.startForegroundService(serviceIntent);
            HeadlessJsTaskService.acquireWakeLockNow(context);
        }
    }

    private boolean isAppOnForeground(Context context) {
        /**
         We need to check if app is in foreground otherwise the app will crash.
         https://stackoverflow.com/questions/8489993/check-android-application-is-in-foreground-or-not
         **/
        ActivityManager activityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
        List<ActivityManager.RunningAppProcessInfo> appProcesses =
                activityManager.getRunningAppProcesses();
        if (appProcesses == null) {
            return false;
        }
        final String packageName = context.getPackageName();
        for (ActivityManager.RunningAppProcessInfo appProcess : appProcesses) {
            if (appProcess.importance ==
                    ActivityManager.RunningAppProcessInfo.IMPORTANCE_FOREGROUND &&
                    appProcess.processName.equals(packageName)) {
                return true;
            }
        }
        return false;
    }

    public static boolean isNetworkAvailable(Context context) {
        ConnectivityManager cm = (ConnectivityManager)
                context.getSystemService(Context.CONNECTIVITY_SERVICE);

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
            Network networkCapabilities = cm.getActiveNetwork();

            if(networkCapabilities == null) {
                return false;
            }

            NetworkCapabilities actNw = cm.getNetworkCapabilities(networkCapabilities);

            if(actNw == null) {
                return false;
            }

            if(actNw.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) || actNw.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) || actNw.hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET)) {
                return true;
            }

            return false;
        }

        // deprecated in API level 29
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        return (netInfo != null && netInfo.isConnected());
    }
}
```

kotlin

```
import android.app.ActivityManager
import android.app.ActivityManager.RunningAppProcessInfo
import android.content.BroadcastReceiver
import android.content.Context
import android.content.Intent
import android.net.ConnectivityManager
import android.net.NetworkCapabilities
import android.os.Build
import com.facebook.react.HeadlessJsTaskService

class NetworkChangeReceiver : BroadcastReceiver() {
    override fun onReceive(context: Context, intent: Intent?) {
        /**
         * This part will be called every time network connection is changed e.g. Connected -> Not
         * Connected
         */
        if (!isAppOnForeground(context)) {
            /** We will start our service and send extra info about network connections */
            val hasInternet = isNetworkAvailable(context)
            val serviceIntent = Intent(context, MyTaskService::class.java)
            serviceIntent.putExtra("hasInternet", hasInternet)
            context.startForegroundService(serviceIntent)
            HeadlessJsTaskService.acquireWakeLockNow(context)
        }
    }

    private fun isAppOnForeground(context: Context): Boolean {
        /**
         * We need to check if app is in foreground otherwise the app will crash.
         * https://stackoverflow.com/questions/8489993/check-android-application-is-in-foreground-or-not
         */
        val activityManager = context.getSystemService(Context.ACTIVITY_SERVICE) as ActivityManager
        val appProcesses = activityManager.runningAppProcesses ?: return false
        val packageName: String = context.getPackageName()
        for (appProcess in appProcesses) {
            if (appProcess.importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND &&
                    appProcess.processName == packageName
            ) {
                return true
            }
        }
        return false
    }

    companion object {
        fun isNetworkAvailable(context: Context): Boolean {
            val cm = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager
            var result = false

            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                val networkCapabilities = cm.activeNetwork ?: return false

                val actNw = cm.getNetworkCapabilities(networkCapabilities) ?: return false

                result =
                    when {
                        actNw.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -> true
                        actNw.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -> true
                        actNw.hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET) -> true
                        else -> false
                    }

                return result
            } else {
                cm.run {
                    // deprecated in API level 29
                    cm.activeNetworkInfo?.run {
                        result =
                            when (type) {
                                ConnectivityManager.TYPE_WIFI -> true
                                ConnectivityManager.TYPE_MOBILE -> true
                                ConnectivityManager.TYPE_ETHERNET -> true
                                else -> false
                            }
                    }
                }
            }
            return result
        }
    }
}
```


---

# Height and Width

A component's height and width determine its size on the screen.

## Fixed Dimensions[‚Äã](#fixed-dimensions "Direct link to Fixed Dimensions")

The general way to set the dimensions of a component is by adding a fixed `width` and `height` to style. All dimensions in React Native are unitless, and represent density-independent pixels.

Setting dimensions this way is common for components whose size should always be fixed to a number of points and not calculated based on screen size.

caution

There is no universal mapping from points to physical units of measurement. This means that a component with fixed dimensions might not have the same physical size, across different devices and screen sizes. However, this difference is unnoticeable for most use cases.

## Flex Dimensions[‚Äã](#flex-dimensions "Direct link to Flex Dimensions")

Use `flex` in a component's style to have the component expand and shrink dynamically based on available space. Normally you will use `flex: 1`, which tells a component to fill all available space, shared evenly amongst other components with the same parent. The larger the `flex` given, the higher the ratio of space a component will take compared to its siblings.

info

A component can only expand to fill available space if its parent has dimensions greater than `0`. If a parent does not have either a fixed `width` and `height` or `flex`, the parent will have dimensions of `0` and the `flex` children will not be visible.

After you can control a component's size, the next step is to [learn how to lay it out on the screen](/docs/flexbox.md).

## Percentage Dimensions[‚Äã](#percentage-dimensions "Direct link to Percentage Dimensions")

If you want to fill a certain portion of the screen, but you *don't* want to use the `flex` layout, you *can* use **percentage values** in the component's style. Similar to flex dimensions, percentage dimensions require parent with a defined size.


---

# Using Hermes

[![](/docs/assets/HermesLogo.svg)](https://hermesengine.dev)

[Hermes](https://hermesengine.dev) is an open-source JavaScript engine optimized for React Native. For many apps, using Hermes will result in improved start-up time, decreased memory usage, and smaller app size when compared to JavaScriptCore. Hermes is used by default by React Native and no additional configuration is required to enable it.

## Bundled Hermes[‚Äã](#bundled-hermes "Direct link to Bundled Hermes")

React Native comes with a **bundled version** of Hermes. We are building a version of Hermes for you whenever we release a new version of React Native. This will make sure you're consuming a version of Hermes which is fully compatible with the version of React Native you're using.

This change is fully transparent to users of React Native. You can still disable Hermes using the command described in this page. You can [read more about the technical implementation on this page](/architecture/bundled-hermes.md).

## Confirming Hermes is in use[‚Äã](#confirming-hermes-is-in-use "Direct link to Confirming Hermes is in use")

If you've recently created a new app from scratch, you should see if Hermes is enabled in the welcome view:

![Where to find JS engine status in the new project?](/docs/assets/HermesApp.png)

A `HermesInternal` global variable will be available in JavaScript that can be used to verify that Hermes is in use:

jsx

```
const isHermes = () => !!global.HermesInternal;
```

caution

If you are using a non-standard way of loading the JS bundle, it is possible that the `HermesInternal` variable is available but you aren't using the highly optimised pre-compiled bytecode. Confirm that you are using the `.hbc` file and also benchmark the before/after as detailed below.

To see the benefits of Hermes, try making a release build/deployment of your app to compare. For example; from the root of your project:

* Android
* iOS

- npm
- Yarn

shell

```
npm run android -- --mode="release"
```

shell

```
yarn android --mode release
```

* npm
* Yarn

shell

```
npm run ios -- --mode="Release"
```

shell

```
yarn ios --mode Release
```

This will compile JavaScript to Hermes Bytecode during build time which will improve your app's startup speed on device.

## Switching back to JavaScriptCore[‚Äã](#switching-back-to-javascriptcore "Direct link to Switching back to JavaScriptCore")

React Native also supports using JavaScriptCore as the [JavaScript engine](/docs/javascript-environment.md). Follow the instructions [from the community repository](https://github.com/react-native-community/javascriptcore) to opt-out of Hermes.


---

# I18nManager

The `I18nManager` module provides utilities for managing Right-to-Left (RTL) layout support for languages like Arabic, Hebrew, and others. It provides methods to control RTL behavior and check the current layout direction.

## Examples[‚Äã](#examples "Direct link to Examples")

### Change positions and animations based on RTL[‚Äã](#change-positions-and-animations-based-on-rtl "Direct link to Change positions and animations based on RTL")

If you absolutely position elements to align with other flexbox elements, they may not align in RTL languages. Using `isRTL` can be used to adjust alignment or animations.

### During Development[‚Äã](#during-development "Direct link to During Development")

# Reference

## Properties[‚Äã](#properties "Direct link to Properties")

### `isRTL`[‚Äã](#isrtl "Direct link to isrtl")

typescript

```
static isRTL: boolean;
```

A boolean value indicating whether the app is currently in RTL layout mode.

The value of `isRTL` is determined by the following logic:

* If `forceRTL` is `true`, `isRTL` returns `true`

* If `allowRTL` is `false`, `isRTL` returns `false`

* Otherwise, `isRTL` will be `true` given the following:

  <!-- -->

  * **iOS:**

    * The user-preferred language on the device is an RTL language
    * The application-defined localizations include the user-chosen language (as defined in the Xcode project file (`knownRegions = (...)`)

  * **Android:**

    * The user-preferred language on the device is an RTL language
    * The application's `AndroidManifest.xml` defines `android:supportsRTL="true"` on the `<application>` element

### `doLeftAndRightSwapInRTL`[‚Äã](#doleftandrightswapinrtl "Direct link to doleftandrightswapinrtl")

typescript

```
static doLeftAndRightSwapInRTL: boolean;
```

A boolean value indicating whether left and right style properties should be automatically swapped when in RTL mode. When enabled, left becomes right and right becomes left in RTL layouts.

## Methods[‚Äã](#methods "Direct link to Methods")

### `allowRTL()`[‚Äã](#allowrtl "Direct link to allowrtl")

typescript

```
static allowRTL: (allowRTL: boolean) => void;
```

Enables or disables RTL layout support for the application.

**Parameters:**

* `allowRTL` (boolean): Whether to allow RTL layout

**Important Notes:**

* Changes take effect on the next application start, not immediately
* This setting is persisted across app restarts

### `forceRTL()`[‚Äã](#forcertl "Direct link to forcertl")

typescript

```
static forceRTL: (forced: boolean) => void;
```

Forces the app to use RTL layout regardless of the device language settings. This is primarily useful for testing RTL layouts during development.

Avoid forcing RTL in production apps as it requires a full app restart to take effect, which makes for a poor user-experience.

**Parameters:**

* `forced` (boolean): Whether to force RTL layout

**Important Notes:**

* Changes take full effect on the next application start, not immediately
* The setting is persisted across app restarts
* Only meant for development and testing. In production, you should either disallow RTL fully or handle it appropriately (see `isRTL`)

### `swapLeftAndRightInRTL()`[‚Äã](#swapleftandrightinrtl "Direct link to swapleftandrightinrtl")

typescript

```
static swapLeftAndRightInRTL: (swapLeftAndRight: boolean) => void;
```

Swap left and right style properties in RTL mode. When enabled, left becomes right and right becomes left in RTL layouts. Does not affect the value of `isRTL`.


---

# Image

A React component for displaying different types of images, including network images, static resources, temporary local images, and images from local disk, such as the camera roll.

This example shows fetching and displaying an image from local storage as well as one from network and even from data provided in the `'data:'` uri scheme.

note

For network and data images, you will need to manually specify the dimensions of your image!

## Examples[‚Äã](#examples "Direct link to Examples")

You can also add `style` to an image:

## GIF and WebP support on Android[‚Äã](#gif-and-webp-support-on-android "Direct link to GIF and WebP support on Android")

When building your own native code, GIF and WebP are not supported by default on Android.

You will need to add some optional modules in `android/app/build.gradle`, depending on the needs of your app.

groovy

```
dependencies {
  // If your app supports Android versions before Ice Cream Sandwich (API level 14)
  implementation 'com.facebook.fresco:animated-base-support:1.3.0'

  // For animated GIF support
  implementation 'com.facebook.fresco:animated-gif:3.6.0'

  // For WebP support, including animated WebP
  implementation 'com.facebook.fresco:animated-webp:3.6.0'
  implementation 'com.facebook.fresco:webpsupport:3.6.0'

  // For WebP support, without animations
  implementation 'com.facebook.fresco:webpsupport:3.6.0'
}
```

note

The version listed above may not be updated in time. Please check [`packages/react-native/gradle/libs.versions.toml`](https://github.com/facebook/react-native/blob/main/packages/react-native/gradle/libs.versions.toml) in the main repo to see which fresco version is being used in a specific tagged version.

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [View Props](/docs/view.md#props)[‚Äã](#view-props "Direct link to view-props")

Inherits [View Props](/docs/view.md#props).

***

### `accessible`[‚Äã](#accessible "Direct link to accessible")

When true, indicates the image is an accessibility element.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `accessibilityLabel`[‚Äã](#accessibilitylabel "Direct link to accessibilitylabel")

The text that's read by the screen reader when the user interacts with the image.

| Type   |
| ------ |
| string |

***

### `alt`[‚Äã](#alt "Direct link to alt")

A string that defines an alternative text description of the image, which will be read by the screen reader when the user interacts with it. Using this will automatically mark this element as accessible.

| Type   |
| ------ |
| string |

***

### `blurRadius`[‚Äã](#blurradius "Direct link to blurradius")

blurRadius: the blur radius of the blur filter added to the image.

| Type   |
| ------ |
| number |

tip

On IOS, you will need to increase `blurRadius` by more than `5`.

***

### `capInsets`iOS[‚Äã](#capinsets-ios "Direct link to capinsets-ios")

When the image is resized, the corners of the size specified by `capInsets` will stay a fixed size, but the center content and borders of the image will be stretched. This is useful for creating resizable rounded buttons, shadows, and other resizable assets. More info in the [official Apple documentation](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/index.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets).

| Type                  |
| --------------------- |
| [Rect](/docs/rect.md) |

***

### `crossOrigin`[‚Äã](#crossorigin "Direct link to crossorigin")

A string of a keyword specifying the CORS mode to use when fetching the image resource. It works similar to crossorigin attribute in HTML.

* `anonymous`: No exchange of user credentials in the image request.
* `use-credentials`: Sets `Access-Control-Allow-Credentials` header value to `true` in the image request.

| Type                                     | Default       |
| ---------------------------------------- | ------------- |
| enum(`'anonymous'`, `'use-credentials'`) | `'anonymous'` |

***

### `defaultSource`[‚Äã](#defaultsource "Direct link to defaultsource")

A static image to display while loading the image source.

| Type                                      |
| ----------------------------------------- |
| [ImageSource](/docs/image.md#imagesource) |

note

On Android, the default source prop is ignored on debug builds.

***

### `fadeDuration`Android[‚Äã](#fadeduration-android "Direct link to fadeduration-android")

Fade animation duration in milliseconds.

| Type   | Default |
| ------ | ------- |
| number | `300`   |

***

### `height`[‚Äã](#height "Direct link to height")

Height of the image component.

| Type   |
| ------ |
| number |

***

### `loadingIndicatorSource`[‚Äã](#loadingindicatorsource "Direct link to loadingindicatorsource")

Similarly to `source`, this property represents the resource used to render the loading indicator for the image. The loading indicator is displayed until image is ready to be displayed, typically after the image is downloaded.

| Type                                                           |
| -------------------------------------------------------------- |
| [ImageSource](/docs/image.md#imagesource) (`uri` only), number |

***

### `onError`[‚Äã](#onerror "Direct link to onerror")

Invoked on load error.

| Type                                |
| ----------------------------------- |
| (`{nativeEvent: {error} }`) => void |

***

### `onLayout`[‚Äã](#onlayout "Direct link to onlayout")

Invoked on mount and on layout changes.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: LayoutEvent} => void` |

***

### `onLoad`[‚Äã](#onload "Direct link to onload")

Invoked when load completes successfully.

**Example:** `onLoad={({nativeEvent: {source: {width, height}}}) => setImageRealSize({width, height})}`

| Type                                     |
| ---------------------------------------- |
| `({nativeEvent: ImageLoadEvent} => void` |

***

### `onLoadEnd`[‚Äã](#onloadend "Direct link to onloadend")

Invoked when load either succeeds or fails.

| Type       |
| ---------- |
| () => void |

***

### `onLoadStart`[‚Äã](#onloadstart "Direct link to onloadstart")

Invoked on load start.

**Example:** `onLoadStart={() => this.setState({loading: true})}`

| Type       |
| ---------- |
| () => void |

***

### `onPartialLoad`iOS[‚Äã](#onpartialload-ios "Direct link to onpartialload-ios")

Invoked when a partial load of the image is complete. The definition of what constitutes a "partial load" is loader specific though this is meant for progressive JPEG loads.

| Type       |
| ---------- |
| () => void |

***

### `onProgress`[‚Äã](#onprogress "Direct link to onprogress")

Invoked on download progress.

| Type                                        |
| ------------------------------------------- |
| (`{nativeEvent: {loaded, total} }`) => void |

***

### `progressiveRenderingEnabled`Android[‚Äã](#progressiverenderingenabled-android "Direct link to progressiverenderingenabled-android")

When `true`, enables progressive jpeg streaming - <https://frescolib.org/docs/progressive-jpegs>.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `referrerPolicy`[‚Äã](#referrerpolicy "Direct link to referrerpolicy")

A string indicating which referrer to use when fetching the resource. Sets the value for `Referrer-Policy` header in the image request. Works similar to `referrerpolicy` attribute in HTML.

| Type                                                                                                                                                                                     | Default                             |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------- |
| enum(`'no-referrer'`, `'no-referrer-when-downgrade'`, `'origin'`, `'origin-when-cross-origin'`, `'same-origin'`, `'strict-origin'`, `'strict-origin-when-cross-origin'`, `'unsafe-url'`) | `'strict-origin-when-cross-origin'` |

***

### `ref`[‚Äã](#ref "Direct link to ref")

A ref setter that will be assigned an [element node](/docs/element-nodes.md) when mounted.

***

### `resizeMethod`Android[‚Äã](#resizemethod-android "Direct link to resizemethod-android")

The mechanism that should be used to resize the image when the image's dimensions differ from the image view's dimensions. Defaults to `auto`.

* `auto`: Use heuristics to pick between `resize` and `scale`.

* `resize`: A software operation which changes the encoded image in memory before it gets decoded. This should be used instead of `scale` when the image is much larger than the view.

* `scale`: The image gets drawn downscaled or upscaled. Compared to `resize`, `scale` is faster (usually hardware accelerated) and produces higher quality images. This should be used if the image is smaller than the view. It should also be used if the image is slightly bigger than the view.

* `none`: No sampling is performed and the image is displayed in its full resolution. This should only be used in rare circumstances because it is considered unsafe as Android will throw a runtime exception when trying to render images that consume too much memory.

More details about `resize` and `scale` can be found at <https://frescolib.org/docs/resizing>.

| Type                                            | Default  |
| ----------------------------------------------- | -------- |
| enum(`'auto'`, `'resize'`, `'scale'`, `'none'`) | `'auto'` |

***

### `resizeMode`[‚Äã](#resizemode "Direct link to resizemode")

Determines how to resize the image when the frame doesn't match the raw image dimensions. Defaults to `cover`.

* `cover`: Scale the image uniformly (maintain the image's aspect ratio) so that

  * both dimensions (width and height) of the image will be equal to or larger than the corresponding dimension of the view (minus padding)
  * at least one dimension of the scaled image will be equal to the corresponding dimension of the view (minus padding)

* `contain`: Scale the image uniformly (maintain the image's aspect ratio) so that both dimensions (width and height) of the image will be equal to or less than the corresponding dimension of the view (minus padding).

* `stretch`: Scale width and height independently, This may change the aspect ratio of the src.

* `repeat`: Repeat the image to cover the frame of the view. The image will keep its size and aspect ratio, unless it is larger than the view, in which case it will be scaled down uniformly so that it is contained in the view.

* `center`: Center the image in the view along both dimensions. If the image is larger than the view, scale it down uniformly so that it is contained in the view.

| Type                                                              | Default   |
| ----------------------------------------------------------------- | --------- |
| enum(`'cover'`, `'contain'`, `'stretch'`, `'repeat'`, `'center'`) | `'cover'` |

***

### `resizeMultiplier`Android[‚Äã](#resizemultiplier-android "Direct link to resizemultiplier-android")

When the `resizeMethod` is set to `resize`, the destination dimensions are multiplied by this value. The `scale` method is used to perform the remainder of the resize. A default of `1.0` means the bitmap size is designed to fit the destination dimensions. A multiplier greater than `1.0` will set the resize options larger than that of the destination dimensions, and the resulting bitmap will be scaled down from the hardware size. Defaults to `1.0`.

This prop is most useful in cases where the destination dimensions are quite small and the source image is significantly larger. The `resize` resize method performs downsampling and significant image quality is lost between the source and destination image sizes, often resulting in a blurry image. By using a multiplier, the decoded image is slightly larger than the target size but smaller than the source image (if the source image is large enough). This allows aliasing artifacts to produce faux quality through scaling operations on the multiplied image.

If you have a source image with dimensions 200x200 and destination dimensions of 24x24, a resizeMultiplier of `2.0` will tell Fresco to downsample the image to 48x48. Fresco picks the closest power of 2 (so, 50x50) and decodes the image into a bitmap of that size. Without the multiplier, the closest power of 2 would be 25x25. The resultant image is scaled down by the system.

| Type   | Default |
| ------ | ------- |
| number | `1.0`   |

***

### `source`[‚Äã](#source "Direct link to source")

The image source (either a remote URL or a local file resource).

This prop can also contain several remote URLs, specified together with their width and height and potentially with scale/other URI arguments. The native side will then choose the best `uri` to display based on the measured size of the image container. A `cache` property can be added to control how networked request interacts with the local cache. (For more information see [Cache Control for Images](/docs/images.md#cache-control)).

The currently supported formats are `png`, `jpg`, `jpeg`, `bmp`, `gif`, `webp`, `psd` (iOS only). In addition, iOS supports several RAW image formats. Refer to Apple's documentation for the current list of supported camera models (for iOS 12, see <https://support.apple.com/en-ca/HT208967>).

Please note that the `webp` format is supported on iOS **only** when bundled with the JavaScript code.

| Type                                      |
| ----------------------------------------- |
| [ImageSource](/docs/image.md#imagesource) |

***

### `src`[‚Äã](#src "Direct link to src")

A string representing the remote URL of the image. This prop has precedence over `source` prop.

**Example:** `src={'https://reactnative.dev/img/tiny_logo.png'}`

| Type   |
| ------ |
| string |

***

### `srcSet`[‚Äã](#srcset "Direct link to srcset")

A string representing comma separated list of possible candidate image source. Each image source contains a URL of an image and a pixel density descriptor. If no descriptor is specified, it defaults to descriptor of `1x`.

If `srcSet` does not contain a `1x` descriptor, the value in `src` is used as image source with `1x` descriptor (if provided).

This prop has precedence over both the `src` and `source` props.

**Example:** `srcSet={'https://reactnative.dev/img/tiny_logo.png 1x, https://reactnative.dev/img/header_logo.svg 2x'}`

| Type   |
| ------ |
| string |

***

### `style`[‚Äã](#style "Direct link to style")

| Type                                                                                                                                                                                     |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [Image Style Props](/docs/image-style-props.md#props), [Layout Props](/docs/layout-props.md#props), [Shadow Props](/docs/shadow-props.md#props), [Transforms](/docs/transforms.md#props) |

***

### `testID`[‚Äã](#testid "Direct link to testid")

A unique identifier for this element to be used in UI Automation testing scripts.

| Type   |
| ------ |
| string |

***

### `tintColor`[‚Äã](#tintcolor "Direct link to tintcolor")

Changes the color of all non-transparent pixels to the `tintColor`.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `width`[‚Äã](#width "Direct link to width")

Width of the image component.

| Type   |
| ------ |
| number |

## Methods[‚Äã](#methods "Direct link to Methods")

### `abortPrefetch()`Android[‚Äã](#abortprefetch-android "Direct link to abortprefetch-android")

tsx

```
static abortPrefetch(requestId: number);
```

Abort prefetch request.

**Parameters:**

| Name              | Type   | Description                             |
| ----------------- | ------ | --------------------------------------- |
| requestIdRequired | number | Request id as returned by `prefetch()`. |

***

### `getSize()`[‚Äã](#getsize "Direct link to getsize")

tsx

```
static getSize(uri: string): Promise<{width: number, height: number}>;
```

Retrieve the width and height (in pixels) of an image prior to displaying it. This method can fail if the image cannot be found, or fails to download.

In order to retrieve the image dimensions, the image may first need to be loaded or downloaded, after which it will be cached. This means that in principle you could use this method to preload images, however it is not optimized for that purpose, and may in future be implemented in a way that does not fully load/download the image data. A proper, supported way to preload images will be provided as a separate API.

**Parameters:**

| Name        | Type   | Description                |
| ----------- | ------ | -------------------------- |
| uriRequired | string | The location of the image. |

***

### `getSizeWithHeaders()`[‚Äã](#getsizewithheaders "Direct link to getsizewithheaders")

tsx

```
static getSizeWithHeaders(
  uri: string,
  headers: {[index: string]: string}
): Promise<{width: number, height: number}>;
```

Retrieve the width and height (in pixels) of an image prior to displaying it with the ability to provide the headers for the request. This method can fail if the image cannot be found, or fails to download. It also does not work for static image resources.

In order to retrieve the image dimensions, the image may first need to be loaded or downloaded, after which it will be cached. This means that in principle you could use this method to preload images, however it is not optimized for that purpose, and may in future be implemented in a way that does not fully load/download the image data. A proper, supported way to preload images will be provided as a separate API.

**Parameters:**

| Name            | Type   | Description                  |
| --------------- | ------ | ---------------------------- |
| uriRequired     | string | The location of the image.   |
| headersRequired | object | The headers for the request. |

***

### `prefetch()`[‚Äã](#prefetch "Direct link to prefetch")

tsx

```
await Image.prefetch(url);
```

Prefetches a remote image for later use by downloading it to the disk cache. Returns a promise which resolves to a boolean.

**Parameters:**

| Name        | Type            | Description                                            |
| ----------- | --------------- | ------------------------------------------------------ |
| urlRequired | string          | The remote location of the image.                      |
| callback    | functionAndroid | The function that will be called with the `requestId`. |

***

### `queryCache()`[‚Äã](#querycache "Direct link to querycache")

tsx

```
static queryCache(
  urls: string[],
): Promise<Record<string, 'memory' | 'disk' | 'disk/memory'>>;
```

Perform cache interrogation. Returns a promise which resolves to a mapping from URL to cache status, such as "disk", "memory" or "disk/memory". If a requested URL is not in the mapping, it means it's not in the cache.

**Parameters:**

| Name         | Type  | Description                                |
| ------------ | ----- | ------------------------------------------ |
| urlsRequired | array | List of image URLs to check the cache for. |

***

### `resolveAssetSource()`[‚Äã](#resolveassetsource "Direct link to resolveassetsource")

tsx

```
static resolveAssetSource(source: ImageSourcePropType): {
  height: number;
  width: number;
  scale: number;
  uri: string;
};
```

Resolves an asset reference into an object which has the properties `uri`, `scale`, `width`, and `height`.

**Parameters:**

| Name           | Type                                              | Description                                                                  |
| -------------- | ------------------------------------------------- | ---------------------------------------------------------------------------- |
| sourceRequired | [ImageSource](/docs/image.md#imagesource), number | A number (opaque type returned by `require('./foo.png')`) or an ImageSource. |

## Type Definitions[‚Äã](#type-definitions "Direct link to Type Definitions")

### ImageCacheEnumiOS[‚Äã](#imagecacheenum-ios "Direct link to imagecacheenum-ios")

Enum which can be used to set the cache handling or strategy for the potentially cached responses.

| Type                                                               | Default     |
| ------------------------------------------------------------------ | ----------- |
| enum(`'default'`, `'reload'`, `'force-cache'`, `'only-if-cached'`) | `'default'` |

* `default`: Use the native platforms default strategy.
* `reload`: The data for the URL will be loaded from the originating source. No existing cache data should be used to satisfy a URL load request.
* `force-cache`: The existing cached data will be used to satisfy the request, regardless of its age or expiration date. If there is no existing data in the cache corresponding the request, the data is loaded from the originating source.
* `only-if-cached`: The existing cache data will be used to satisfy a request, regardless of its age or expiration date. If there is no existing data in the cache corresponding to a URL load request, no attempt is made to load the data from the originating source, and the load is considered to have failed.

### ImageLoadEvent[‚Äã](#imageloadevent "Direct link to ImageLoadEvent")

Object returned in the `onLoad` callback.

| Type   |
| ------ |
| object |

**Properties:**

| Name   | Type   | Description                         |
| ------ | ------ | ----------------------------------- |
| source | object | The [source object](#source-object) |

#### Source Object[‚Äã](#source-object "Direct link to Source Object")

**Properties:**

| Name   | Type   | Description                                                  |
| ------ | ------ | ------------------------------------------------------------ |
| width  | number | The width of loaded image.                                   |
| height | number | The height of loaded image.                                  |
| uri    | string | A string representing the resource identifier for the image. |

### ImageSource[‚Äã](#imagesource "Direct link to ImageSource")

| Type                             |
| -------------------------------- |
| object, array of objects, number |

**Properties (if passing as object or array of objects):**

| Name      | Type                                                | Description                                                                                                                                                                          |
| --------- | --------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| uri       | string                                              | A string representing the resource identifier for the image, which could be an http address, a local file path, or the name of a static image resource.                              |
| width     | number                                              | Can be specified if known at build time, in which case the value will be used to set the default `<Image/>` component dimension.                                                     |
| height    | number                                              | Can be specified if known at build time, in which case the value will be used to set the default `<Image/>` component dimension.                                                     |
| scale     | number                                              | Used to indicate the scale factor of the image. Defaults to `1.0` if unspecified, meaning that one image pixel equates to one display point / DIP.                                   |
| bundleiOS | string                                              | The iOS asset bundle which the image is included in. This will default to `[NSBundle mainBundle]` if not set.                                                                        |
| method    | string                                              | The HTTP Method to use. Defaults to `'GET'` if not specified.                                                                                                                        |
| headers   | object                                              | An object representing the HTTP headers to send along with the request for a remote image.                                                                                           |
| body      | string                                              | The HTTP body to send with the request. This must be a valid UTF-8 string, and will be sent exactly as specified, with no additional encoding (e.g. URL-escaping or base64) applied. |
| cacheiOS  | [ImageCacheEnum](/docs/image.md#imagecacheenum-ios) | Determines how the requests handles potentially cached responses.                                                                                                                    |

**If passing a number:**

* `number` - opaque type returned by something like `require('./image.jpg')`.


---

# Image Style Props

## Examples[‚Äã](#examples "Direct link to Examples")

### Image Resize Mode[‚Äã](#image-resize-mode "Direct link to Image Resize Mode")

### Image Border[‚Äã](#image-border "Direct link to Image Border")

### Image Border Radius[‚Äã](#image-border-radius "Direct link to Image Border Radius")

### Image Tint[‚Äã](#image-tint "Direct link to Image Tint")

# Reference

## Props[‚Äã](#props "Direct link to Props")

### `backfaceVisibility`[‚Äã](#backfacevisibility "Direct link to backfacevisibility")

The property defines whether or not the back face of a rotated image should be visible.

| Type                          | Default     |
| ----------------------------- | ----------- |
| enum(`'visible'`, `'hidden'`) | `'visible'` |

***

### `backgroundColor`[‚Äã](#backgroundcolor "Direct link to backgroundcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderBottomLeftRadius`[‚Äã](#borderbottomleftradius "Direct link to borderbottomleftradius")

| Type   |
| ------ |
| number |

***

### `borderBottomRightRadius`[‚Äã](#borderbottomrightradius "Direct link to borderbottomrightradius")

| Type   |
| ------ |
| number |

***

### `borderColor`[‚Äã](#bordercolor "Direct link to bordercolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderRadius`[‚Äã](#borderradius "Direct link to borderradius")

| Type   |
| ------ |
| number |

***

### `borderTopLeftRadius`[‚Äã](#bordertopleftradius "Direct link to bordertopleftradius")

| Type   |
| ------ |
| number |

***

### `borderTopRightRadius`[‚Äã](#bordertoprightradius "Direct link to bordertoprightradius")

| Type   |
| ------ |
| number |

***

### `borderWidth`[‚Äã](#borderwidth "Direct link to borderwidth")

| Type   |
| ------ |
| number |

***

### `opacity`[‚Äã](#opacity "Direct link to opacity")

Set an opacity value for the image. The number should be in the range from `0.0` to `1.0`.

| Type   | Default |
| ------ | ------- |
| number | `1.0`   |

***

### `overflow`[‚Äã](#overflow "Direct link to overflow")

| Type                          | Default     |
| ----------------------------- | ----------- |
| enum(`'visible'`, `'hidden'`) | `'visible'` |

***

### `overlayColor`Android[‚Äã](#overlaycolor-android "Direct link to overlaycolor-android")

When the image has rounded corners, specifying an overlayColor will cause the remaining space in the corners to be filled with a solid color. This is useful in cases which are not supported by the Android implementation of rounded corners:

* Certain resize modes, such as `'contain'`
* Animated GIFs

A typical way to use this prop is with images displayed on a solid background and setting the `overlayColor` to the same color as the background.

For details of how this works under the hood, see [Fresco documentation](https://frescolib.org/docs/rounded-corners-and-circles.html).

| Type   |
| ------ |
| string |

***

### `resizeMode`[‚Äã](#resizemode "Direct link to resizemode")

Determines how to resize the image when the frame doesn't match the raw image dimensions. Defaults to `cover`.

* `cover`: Scale the image uniformly (maintain the image's aspect ratio) so that:

  * Both dimensions (width and height) of the image will be equal to or larger than the corresponding dimension of the view (minus padding)
  * At least one dimension of the scaled image will be equal to the corresponding dimension of the view (minus padding)

* `contain`: Scale the image uniformly (maintain the image's aspect ratio) so that both dimensions (width and height) of the image will be equal to or less than the corresponding dimension of the view (minus padding).

* `stretch`: Scale width and height independently, This may change the aspect ratio of the src.

* `repeat`: Repeat the image to cover the frame of the view. The image will keep its size and aspect ratio, unless it is larger than the view, in which case it will be scaled down uniformly so that it is contained in the view.

* `center`: Center the image in the view along both dimensions. If the image is larger than the view, scale it down uniformly so that it is contained in the view.

| Type                                                              | Default   |
| ----------------------------------------------------------------- | --------- |
| enum(`'cover'`, `'contain'`, `'stretch'`, `'repeat'`, `'center'`) | `'cover'` |

***

### `objectFit`[‚Äã](#objectfit "Direct link to objectfit")

Determines how to resize the image when the frame doesn't match the raw image dimensions.

| Type                                                   | Default   |
| ------------------------------------------------------ | --------- |
| enum(`'cover'`, `'contain'`, `'fill'`, `'scale-down'`) | `'cover'` |

***

### `tintColor`[‚Äã](#tintcolor "Direct link to tintcolor")

Changes the color of all the non-transparent pixels to the tintColor.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |


---

# ImageBackground

A common feature request from developers familiar with the web is `background-image`. To handle this use case, you can use the `<ImageBackground>` component, which has the same props as `<Image>`, and add whatever children to it you would like to layer on top of it.

You might not want to use `<ImageBackground>` in some cases, since the implementation is basic. Refer to `<ImageBackground>`'s [source code](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Image/ImageBackground.js) for more insight, and create your own custom component when needed.

Note that you must specify some width and height style attributes.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [Image Props](/docs/image.md#props)[‚Äã](#image-props "Direct link to image-props")

Inherits [Image Props](/docs/image.md#props).

***

### `imageStyle`[‚Äã](#imagestyle "Direct link to imagestyle")

| Type                                      |
| ----------------------------------------- |
| [Image Style](/docs/image-style-props.md) |

***

### `imageRef`[‚Äã](#imageref "Direct link to imageref")

A ref setter that will be assigned the [element node](/docs/element-nodes.md) of the inner `Image` component when mounted.

***

### `style`[‚Äã](#style "Direct link to style")

| Type                                    |
| --------------------------------------- |
| [View Style](/docs/view-style-props.md) |


---

# ‚ùå ImagePickerIOS

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=image+picker) instead.


---

# Images

## Static Image Resources[‚Äã](#static-image-resources "Direct link to Static Image Resources")

React Native provides a unified way of managing images and other media assets in your Android and iOS apps. To add a static image to your app, place it somewhere in your source code tree and reference it like this:

tsx

```
<Image source={require('./my-icon.png')} />
```

The image name is resolved the same way JS modules are resolved. In the example above, the bundler will look for `my-icon.png` in the same folder as the component that requires it.

You can use the `@2x` and `@3x` suffixes to provide images for different screen densities. If you have the following file structure:

```
.
‚îú‚îÄ‚îÄ button.js
‚îî‚îÄ‚îÄ img
    ‚îú‚îÄ‚îÄ check.png
    ‚îú‚îÄ‚îÄ check@2x.png
    ‚îî‚îÄ‚îÄ check@3x.png
```

...and `button.js` code contains:

tsx

```
<Image source={require('./img/check.png')} />
```

...the bundler will bundle and serve the image corresponding to device's screen density. For example, `check@2x.png`, will be used on an iPhone 7, while`check@3x.png` will be used on an iPhone 7 Plus or a Nexus 5. If there is no image matching the screen density, the closest best option will be selected.

On Windows, you might need to restart the bundler if you add new images to your project.

Here are some benefits that you get:

1. Same system on Android and iOS.
2. Images live in the same folder as your JavaScript code. Components are self-contained.
3. No global namespace, i.e. you don't have to worry about name collisions.
4. Only the images that are actually used will be packaged into your app.
5. Adding and changing images doesn't require app recompilation, you can refresh the simulator as you normally do.
6. The bundler knows the image dimensions, no need to duplicate it in the code.
7. Images can be distributed via [npm](https://www.npmjs.com/) packages.

In order for this to work, the image name in `require` has to be known statically.

tsx

```
// GOOD
<Image source={require('./my-icon.png')} />;

// BAD
const icon = this.props.active
  ? 'my-icon-active'
  : 'my-icon-inactive';
<Image source={require('./' + icon + '.png')} />;

// GOOD
const icon = this.props.active
  ? require('./my-icon-active.png')
  : require('./my-icon-inactive.png');
<Image source={icon} />;
```

Note that image sources required this way include size (width, height) info for the Image. If you need to scale the image dynamically (i.e. via flex), you may need to manually set `{width: undefined, height: undefined}` on the style attribute.

## Static Non-Image Resources[‚Äã](#static-non-image-resources "Direct link to Static Non-Image Resources")

The `require` syntax described above can be used to statically include audio, video or document files in your project as well. Most common file types are supported including `.mp3`, `.wav`, `.mp4`, `.mov`, `.html` and `.pdf`. See [bundler defaults](https://github.com/facebook/metro/blob/master/packages/metro-config/src/defaults/defaults.js#L14-L44) for the full list.

You can add support for other types by adding an [`assetExts` resolver option](https://metrobundler.dev/docs/configuration#resolver-options) in your [Metro configuration](https://metrobundler.dev/docs/configuration).

A caveat is that videos must use absolute positioning instead of `flexGrow`, since size info is not currently passed for non-image assets. This limitation doesn't occur for videos that are linked directly into Xcode or the Assets folder for Android.

## Images From Hybrid App's Resources[‚Äã](#images-from-hybrid-apps-resources "Direct link to Images From Hybrid App's Resources")

If you are building a hybrid app (some UIs in React Native, some UIs in platform code) you can still use images that are already bundled into the app.

For images included via Xcode asset catalogs or in the Android drawable folder, use the image name without the extension:

tsx

```
<Image
  source={{uri: 'app_icon'}}
  style={{width: 40, height: 40}}
/>
```

For images in the Android assets folder, use the `asset:/` scheme:

tsx

```
<Image
  source={{uri: 'asset:/app_icon.png'}}
  style={{width: 40, height: 40}}
/>
```

These approaches provide no safety checks. It's up to you to guarantee that those images are available in the application. Also you have to specify image dimensions manually.

## Network Images[‚Äã](#network-images "Direct link to Network Images")

Many of the images you will display in your app will not be available at compile time, or you will want to load some dynamically to keep the binary size down. Unlike with static resources, *you will need to manually specify the dimensions of your image*. It's highly recommended that you use https as well in order to satisfy [App Transport Security](/docs/publishing-to-app-store.md#1-enable-app-transport-security) requirements on iOS.

tsx

```
// GOOD
<Image source={{uri: 'https://reactjs.org/logo-og.png'}}
       style={{width: 400, height: 400}} />

// BAD
<Image source={{uri: 'https://reactjs.org/logo-og.png'}} />
```

### Network Requests for Images[‚Äã](#network-requests-for-images "Direct link to Network Requests for Images")

If you would like to set such things as the HTTP-Verb, Headers or a Body along with the image request, you may do this by defining these properties on the source object:

tsx

```
<Image
  source={{
    uri: 'https://reactjs.org/logo-og.png',
    method: 'POST',
    headers: {
      Pragma: 'no-cache',
    },
    body: 'Your Body goes here',
  }}
  style={{width: 400, height: 400}}
/>
```

## URI Data Images[‚Äã](#uri-data-images "Direct link to URI Data Images")

Sometimes, you might be getting encoded image data from a REST API call. You can use the `'data:'` URI scheme to use these images. Same as for network resources, *you will need to manually specify the dimensions of your image*.

info

This is recommended for very small and dynamic images only, like icons in a list from a DB.

tsx

```
// include at least width and height!
<Image
  style={{
    width: 51,
    height: 51,
    resizeMode: 'contain',
  }}
  source={{
    uri: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAEXRFWHRTb2Z0d2FyZQBwbmdjcnVzaEB1SfMAAABQSURBVGje7dSxCQBACARB+2/ab8BEeQNhFi6WSYzYLYudDQYGBgYGBgYGBgYGBgYGBgZmcvDqYGBgmhivGQYGBgYGBgYGBgYGBgYGBgbmQw+P/eMrC5UTVAAAAABJRU5ErkJggg==',
  }}
/>
```

### Cache Control[‚Äã](#cache-control "Direct link to Cache Control")

In some cases you might only want to display an image if it is already in the local cache, i.e. a low resolution placeholder until a higher resolution is available. In other cases you do not care if the image is outdated and are willing to display an outdated image to save bandwidth. The `cache` source property gives you control over how the network layer interacts with the cache.

* `default`: Use the native platforms default strategy.
* `reload`: The data for the URL will be loaded from the originating source. No existing cache data should be used to satisfy a URL load request.
* `force-cache`: The existing cached data will be used to satisfy the request, regardless of its age or expiration date. If there is no existing data in the cache corresponding the request, the data is loaded from the originating source.
* `only-if-cached`: The existing cache data will be used to satisfy a request, regardless of its age or expiration date. If there is no existing data in the cache corresponding to a URL load request, no attempt is made to load the data from the originating source, and the load is considered to have failed.

tsx

```
<Image
  source={{
    uri: 'https://reactjs.org/logo-og.png',
    cache: 'only-if-cached',
  }}
  style={{width: 400, height: 400}}
/>
```

## Local Filesystem Images[‚Äã](#local-filesystem-images "Direct link to Local Filesystem Images")

See [CameraRoll](https://github.com/react-native-community/react-native-cameraroll) for an example of using local resources that are outside of `Images.xcassets`.

### Drawable resources[‚Äã](#drawable-resources "Direct link to Drawable resources")

Android supports loading [drawable resources](https://developer.android.com/guide/topics/resources/drawable-resource) via the `xml` file type. This means you can use [vector drawables](https://developer.android.com/develop/ui/views/graphics/vector-drawable-resources) for rendering icons or [shape drawables](https://developer.android.com/guide/topics/resources/drawable-resource#Shape) for, well, drawing shapes! You can import and use these resource types the same as any other [static resource](#static-image-resources) or [hybrid resource](#images-from-hybrid-apps-resources). You have to specify image dimensions manually.

For static drawables that live alongside your JS code, use the `require` or `import` syntax (both work the same):

tsx

```
<Image
  source={require('./img/my_icon.xml')}
  style={{width: 40, height: 40}}
/>
```

For drawables included in the Android drawable folder (i.e. `res/drawable`), use the resource name without the extension:

tsx

```
<Image
  source={{uri: 'my_icon'}}
  style={{width: 40, height: 40}}
/>
```

The one key difference between drawable resources and other image types is that the asset must be referenced at compile-time of the Android application as Android needs to run the [Android Asset Packaging Tool (AAPT)](https://developer.android.com/tools/aapt2) to package the asset. Binary XML, the file format AAPT creates, cannot be loaded over the network by Metro. If you change the directory or name of an asset, you will need to rebuild the Android application each time.

#### Creating XML drawable resources[‚Äã](#creating-xml-drawable-resources "Direct link to Creating XML drawable resources")

Android provides comprehensive documentation on each of the supported drawable resource types in its [Drawable resources](https://developer.android.com/guide/topics/resources/drawable-resource) guide, along with examples of raw XML files. You can utilize tools from Android Studio like the [Vector Asset Studio](https://developer.android.com/studio/write/vector-asset-studio) to create vector drawables from Scalable Vector Graphic (SVG) and Adobe Photoshop Document (PSD) files.

info

You should try to avoid referencing other resources in the XML file you create if you want to treat your XML file as a static image resource (i.e. with an `import` or `require` statement). If you wish to utilize references to other drawables or attributes, like [color state lists](https://developer.android.com/guide/topics/resources/color-list-resource) or [dimension resources](https://developer.android.com/guide/topics/resources/more-resources#Dimension), you should include your drawable as a [hybrid resource](#images-from-hybrid-apps-resources) and import it by name.

### Best Camera Roll Image[‚Äã](#best-camera-roll-image "Direct link to Best Camera Roll Image")

iOS saves multiple sizes for the same image in your Camera Roll, it is very important to pick the one that's as close as possible for performance reasons. You wouldn't want to use the full quality 3264x2448 image as source when displaying a 200x200 thumbnail. If there's an exact match, React Native will pick it, otherwise it's going to use the first one that's at least 50% bigger in order to avoid blur when resizing from a close size. All of this is done by default so you don't have to worry about writing the tedious (and error prone) code to do it yourself.

## Why Not Automatically Size Everything?[‚Äã](#why-not-automatically-size-everything "Direct link to Why Not Automatically Size Everything?")

*In the browser* if you don't give a size to an image, the browser is going to render a 0x0 element, download the image, and then render the image based with the correct size. The big issue with this behavior is that your UI is going to jump all around as images load, this makes for a very bad user experience. This is called [Cumulative Layout Shift](https://web.dev/cls/).

*In React Native* this behavior is intentionally not implemented. It is more work for the developer to know the dimensions (or aspect ratio) of the remote image in advance, but we believe that it leads to a better user experience. Static images loaded from the app bundle via the `require('./my-icon.png')` syntax *can be automatically sized* because their dimensions are available immediately at the time of mounting.

For example, the result of `require('./my-icon.png')` might be:

tsx

```
{"__packager_asset":true,"uri":"my-icon.png","width":591,"height":573}
```

## Source as an object[‚Äã](#source-as-an-object "Direct link to Source as an object")

In React Native, one interesting decision is that the `src` attribute is named `source` and doesn't take a string but an object with a `uri` attribute.

tsx

```
<Image source={{uri: 'something.jpg'}} />
```

On the infrastructure side, the reason is that it allows us to attach metadata to this object. For example if you are using `require('./my-icon.png')`, then we add information about its actual location and size (don't rely on this fact, it might change in the future!). This is also future proofing, for example we may want to support sprites at some point, instead of outputting `{uri: ...}`, we can output `{uri: ..., crop: {left: 10, top: 50, width: 20, height: 40}}` and transparently support spriting on all the existing call sites.

On the user side, this lets you annotate the object with useful attributes such as the dimension of the image in order to compute the size it's going to be displayed in. Feel free to use it as your data structure to store more information about your image.

## Background Image via Nesting[‚Äã](#background-image-via-nesting "Direct link to Background Image via Nesting")

A common feature request from developers familiar with the web is `background-image`. To handle this use case, you can use the `<ImageBackground>` component, which has the same props as `<Image>`, and add whatever children to it you would like to layer on top of it.

You might not want to use `<ImageBackground>` in some cases, since the implementation is basic. Refer to `<ImageBackground>`'s [documentation](/docs/imagebackground.md) for more insight, and create your own custom component when needed.

tsx

```
return (
  <ImageBackground source={...} style={{width: '100%', height: '100%'}}>
    <Text>Inside</Text>
  </ImageBackground>
);
```

Note that you must specify some width and height style attributes.

## iOS Border Radius Styles[‚Äã](#ios-border-radius-styles "Direct link to iOS Border Radius Styles")

Please note that the following corner specific, border radius style properties might be ignored by iOS's image component:

* `borderTopLeftRadius`
* `borderTopRightRadius`
* `borderBottomLeftRadius`
* `borderBottomRightRadius`

## Off-thread Decoding[‚Äã](#off-thread-decoding "Direct link to Off-thread Decoding")

Image decoding can take more than a frame-worth of time. This is one of the major sources of frame drops on the web because decoding is done in the main thread. In React Native, image decoding is done in a different thread. In practice, you already need to handle the case when the image is not downloaded yet, so displaying the placeholder for a few more frames while it is decoding does not require any code change.

## Configuring iOS Image Cache Limits[‚Äã](#configuring-ios-image-cache-limits "Direct link to Configuring iOS Image Cache Limits")

On iOS, we expose an API to override React Native's default image cache limits. This should be called from within your native AppDelegate code (e.g. within `didFinishLaunchingWithOptions`).

objectivec

```
RCTSetImageCacheLimits(4*1024*1024, 200*1024*1024);
```

**Parameters:**

| Name           | Type   | Required | Description             |
| -------------- | ------ | -------- | ----------------------- |
| imageSizeLimit | number | Yes      | Image cache size limit. |
| totalCostLimit | number | Yes      | Total cache cost limit. |

In the above code example the image size limit is set to 4 MB and the total cost limit is set to 200 MB.


---

# Improving User Experience

## Configure text inputs[‚Äã](#configure-text-inputs "Direct link to Configure text inputs")

Entering text on touch phone is a challenge - small screen, software keyboard. But based on what kind of data you need, you can make it easier by properly configuring the text inputs:

* Focus the first field automatically
* Use placeholder text as an example of expected data format
* Enable or disable autocapitalization and autocorrect
* Choose keyboard type (e.g. email, numeric)
* Make sure the return button focuses the next field or submits the form

Check out [`TextInput` docs](/docs/textinput.md) for more configuration options.

* TypeScript
* JavaScript

## Manage layout when keyboard is visible[‚Äã](#manage-layout-when-keyboard-is-visible "Direct link to Manage layout when keyboard is visible")

Software keyboard takes almost half of the screen. If you have interactive elements that can get covered by the keyboard, make sure they are still accessible by using the [`KeyboardAvoidingView` component](/docs/keyboardavoidingview.md).

* TypeScript
* JavaScript

## Make tappable areas larger[‚Äã](#make-tappable-areas-larger "Direct link to Make tappable areas larger")

On mobile phones it's hard to be very precise when pressing buttons. Make sure all interactive elements are 44x44 or larger. One way to do this is to leave enough space for the element, `padding`, `minWidth` and `minHeight` style values can be useful for that. Alternatively, you can use [`hitSlop` prop](/docs/touchablewithoutfeedback.md#hitslop) to increase interactive area without affecting the layout. Here's a demo:

## Use Android Ripple[‚Äã](#use-android-ripple "Direct link to Use Android Ripple")

Android API 21+ uses the material design ripple to provide user with feedback when they touch an interactable area on the screen. React Native exposes this through the [`TouchableNativeFeedback` component](/docs/touchablenativefeedback.md). Using this touchable effect instead of opacity or highlight will often make your app feel much more fitting on the platform. That said, you need to be careful when using it because it doesn't work on iOS or on Android API < 21, so you will need to fallback to using one of the other Touchable components on iOS. You can use a library like [react-native-platform-touchable](https://github.com/react-community/react-native-platform-touchable) to handle the platform differences for you.

## Screen orientation lock[‚Äã](#screen-orientation-lock "Direct link to Screen orientation lock")

Multiple screen orientations should work fine by default unless you're using `Dimensions` API and don't handle orientation changes. If you don't want to support multiple screen orientations, you can lock the screen orientation to either portrait or landscape.

On iOS, in the General tab and Deployment Info section of Xcode enable the Device Orientation you want to support (ensure you have selected iPhone from the Devices menu when making the changes). For Android, open the AndroidManifest.xml file and within the activity element add `'android:screenOrientation="portrait"'` to lock to portrait or `'android:screenOrientation="landscape"'` to lock to landscape.

# Learn more

[Material Design](https://material.io/) and [Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines) are great resources for learning more about designing for mobile platforms.


---

# InputAccessoryView

A component which enables customization of the keyboard input accessory view on iOS. The input accessory view is displayed above the keyboard whenever a `TextInput` has focus. This component can be used to create custom toolbars.

To use this component wrap your custom toolbar with the InputAccessoryView component, and set a `nativeID`. Then, pass that `nativeID` as the `inputAccessoryViewID` of whatever `TextInput` you desire. A basic example:

This component can also be used to create sticky text inputs (text inputs which are anchored to the top of the keyboard). To do this, wrap a `TextInput` with the `InputAccessoryView` component, and don't set a `nativeID`. For an example, look at [InputAccessoryViewExample.js](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/InputAccessoryView/InputAccessoryViewExample.js).

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### `backgroundColor`[‚Äã](#backgroundcolor "Direct link to backgroundcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `nativeID`[‚Äã](#nativeid "Direct link to nativeid")

An ID which is used to associate this `InputAccessoryView` to specified TextInput(s).

| Type   |
| ------ |
| string |

***

### `style`[‚Äã](#style "Direct link to style")

| Type                                    |
| --------------------------------------- |
| [View Style](/docs/view-style-props.md) |

# Known issues

* [react-native#18997](https://github.com/facebook/react-native/issues/18997): Doesn't support multiline `TextInput`
* [react-native#20157](https://github.com/facebook/react-native/issues/20157): Can't use with a bottom tab bar


---

# Integration with an Android Fragment

The guide for [Integration with Existing Apps](/docs/integration-with-existing-apps.md) details how to integrate a full-screen React Native app into an existing Android app as an **Activity**.

To use React Native components within **Fragments** in an existing app requires some additional setup.

### 1. Add React Native to your app[‚Äã](#1-add-react-native-to-your-app "Direct link to 1. Add React Native to your app")

Follow the guide for [Integration with Existing Apps](/docs/integration-with-existing-apps.md) until the end to make sure you can safely run your React Native app in a full screen Activity.

### 2. Add a FrameLayout for the React Native Fragment[‚Äã](#2-add-a-framelayout-for-the-react-native-fragment "Direct link to 2. Add a FrameLayout for the React Native Fragment")

In this example, we're going to use a `FrameLayout` to add a React Native Fragment to an Activity. This approach is flexible enough and can be adapted to use React Native in other layouts such as Bottom Sheets or Tab Layouts.

First add a `<FrameLayout>` with an id, width and height to your Activity's layout (e.g. `main_activity.xml` in the `res/layouts` folder). This is the layout you will find to render your React Native Fragment.

xml

```
<FrameLayout
    android:id="@+id/react_native_fragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />
```

### 3. Make your host Activity implement `DefaultHardwareBackBtnHandler`[‚Äã](#3-make-your-host-activity-implement-defaulthardwarebackbtnhandler "Direct link to 3-make-your-host-activity-implement-defaulthardwarebackbtnhandler")

As your host activity is not a `ReactActivity`, you need to implement the `DefaultHardwareBackBtnHandler` interface to handle the back button press event. This is required by React Native to handle the back button press event.

Go into your host activity and make sure it implements the `DefaultHardwareBackBtnHandler` interface:

Deprecated

`Activity.onBackPressed()` has been [deprecated](https://developer.android.com/reference/android/app/Activity#onBackPressed\(\)) since API level 33. Android 16 devices with apps targeting API level 36 this will [no longer be called](https://developer.android.com/about/versions/16/behavior-changes-16#predictive-back) and [OnBackPressedDispatcher](https://developer.android.com/reference/androidx/activity/OnBackPressedDispatcher) should be used instead.

* Java
* Kotlin

diff

```
package <your-package-here>

import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
+import com.facebook.react.modules.core.DefaultHardwareBackBtnHandler

+class MainActivity : AppCompatActivity() {
+class MainActivity : AppCompatActivity(), DefaultHardwareBackBtnHandler {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.main_activity)

        findViewById<Button>(R.id.sample_button).setOnClickListener {
            // Handle button click
        }
    }

+   override fun invokeDefaultOnBackPressed() {
+       onBackPressedDispatcher.onBackPressed()
+   }
}
```

diff

```
package <your-package-here>;

import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
+import com.facebook.react.modules.core.DefaultHardwareBackBtnHandler;

-class MainActivity extends AppCompatActivity {
+class MainActivity extends AppCompatActivity implements DefaultHardwareBackBtnHandler {

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);

        findViewById(R.id.button_appcompose).setOnClickListener(button -> {
            // Handle button click
        });
    }

+   @Override
+   public void invokeDefaultOnBackPressed() {
+       getOnBackPressedDispatcher().onBackPressed();
+   }
}
```

### 4. Add a React Native Fragment to the FrameLayout[‚Äã](#4-add-a-react-native-fragment-to-the-framelayout "Direct link to 4. Add a React Native Fragment to the FrameLayout")

Finally, we can update the Activity to add a React Native Fragment to the FrameLayout. In this specific example, we're going to assume that your Activity has a button with id `sample_button` that when clicked will render a React Native Fragment into the FrameLayout.

Update your Activity's `onCreate` method as follows:

* Java
* Kotlin

diff

```
package <your-package-here>

import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
+import com.facebook.react.ReactFragment
import com.facebook.react.modules.core.DefaultHardwareBackBtnHandler

public class MainActivity : AppCompatActivity(), DefaultHardwareBackBtnHandler {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.main_activity)

        findViewById<Button>(R.id.sample_button).setOnClickListener {
+           val reactNativeFragment = ReactFragment.Builder()
+               .setComponentName("HelloWorld")
+               .setLaunchOptions(Bundle().apply { putString("message", "my value") })
+               .build()
+           supportFragmentManager
+               .beginTransaction()
+               .add(R.id.react_native_fragment, reactNativeFragment)
+               .commit()
        }
    }

   override fun invokeDefaultOnBackPressed() {
       super.onBackPressed()
   }
}
```

diff

```
package <your-package-here>;

import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
+import com.facebook.react.ReactFragment;
import com.facebook.react.modules.core.DefaultHardwareBackBtnHandler;

public class MainActivity extends AppCompatActivity implements DefaultHardwareBackBtnHandler {

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);

        findViewById(R.id.button_appcompose).setOnClickListener(button -> {
+           Bundle launchOptions = new Bundle();
+           launchOptions.putString("message", "my value");
+
+           ReactFragment fragment = new ReactFragment.Builder()
+                   .setComponentName("HelloWorld")
+                   .setLaunchOptions(launchOptions)
+                   .build();
+           getSupportFragmentManager()
+                   .beginTransaction()
+                   .add(R.id.react_native_fragment, fragment)
+                   .commit();
        });
    }

    @Override
    public void invokeDefaultOnBackPressed() {
        super.onBackPressed();
    }
}
```

Let's look at the code above.

The `ReactFragment.Builder()` is used to create a new `ReactFragment` and then we use the `supportFragmentManager` to add that Fragment to the `FrameLayout`.

Inside the builder you can customize how the fragment is created:

* `setComponentName` is the name of the component you want to render. It's the same string specified in your `index.js` inside the `registerComponent` method.
* `setLaunchOptions` is an optional method to pass initial props to your component. This is optional and you can remove it if you don't use it.

### 5. Test your integration[‚Äã](#5-test-your-integration "Direct link to 5. Test your integration")

Make sure you run `yarn start` to run the bundler and then run your android app in Android Studio. The app should load the JavaScript/TypeScript code from the development server and display it in your React Native Fragment in the Activity.

Your app should look like this one:

![Screenshot](/assets/images/EmbeddedAppAndroidFragmentVideo-aab979735a01abb7c006e01a4442d20c.gif)


---

# Integration with Existing Apps

React Native is great when you are starting a new mobile app from scratch. However, it also works well for adding a single view or user flow to existing native applications. With a few steps, you can add new React Native based features, screens, views, etc.

The specific steps are different depending on what platform you're targeting.

* Android (Java & Kotlin)
* iOS (Objective-C and Swift)

## Key Concepts[‚Äã](#key-concepts "Direct link to Key Concepts")

The keys to integrating React Native components into your Android application are to:

1. Set up the correct directory structure.
2. Install the necessary NPM dependencies.
3. Adding React Native to your Gradle configuration.
4. Writing the TypeScript code for your first React Native screen.
5. Integrate React Native with your Android code using a ReactActivity.
6. Testing your integration by running the bundler and seeing your app in action.

## Using the Community Template[‚Äã](#using-the-community-template "Direct link to Using the Community Template")

While you follow this guide, we suggest you to use the [React Native Community Template](https://github.com/react-native-community/template/) as reference. The template contains a **minimal Android app** and will help you understanding how to integrate React Native into an existing Android app.

## Prerequisites[‚Äã](#prerequisites "Direct link to Prerequisites")

Follow the guide on [setting up your development environment](/docs/set-up-your-environment.md) and using [React Native without a framework](/docs/getting-started-without-a-framework.md) to configure your development environment for building React Native apps for Android. This guide also assumes you're familiar with the basics of Android development such as creating Activities and editing the `AndroidManifest.xml` file.

## 1. Set up directory structure[‚Äã](#1-set-up-directory-structure "Direct link to 1. Set up directory structure")

To ensure a smooth experience, create a new folder for your integrated React Native project, then **move your existing Android project** to the `/android` subfolder.

## 2. Install NPM dependencies[‚Äã](#2-install-npm-dependencies "Direct link to 2. Install NPM dependencies")

Go to the root directory and run the following command:

shell

```
curl -O https://raw.githubusercontent.com/react-native-community/template/refs/heads/0.83-stable/template/package.json
```

This will copy the `package.json` [file from the Community template](https://github.com/react-native-community/template/blob/0.83-stable/template/package.json) to your project.

Next, install the NPM packages by running:

* npm
* Yarn

shell

```
npm install
```

shell

```
yarn install
```

Installation process has created a new `node_modules` folder. This folder stores all the JavaScript dependencies required to build your project.

Add `node_modules/` to your `.gitignore` file (here the [Community default one](https://github.com/react-native-community/template/blob/0.83-stable/template/_gitignore)).

## 3. Adding React Native to your app[‚Äã](#3-adding-react-native-to-your-app "Direct link to 3. Adding React Native to your app")

### Configuring Gradle[‚Äã](#configuring-gradle "Direct link to Configuring Gradle")

React Native uses the React Native Gradle Plugin to configure your dependencies and project setup.

First, let's edit your `settings.gradle` file by adding those lines (as suggested from the [Community template](https://github.com/react-native-community/template/blob/0.83-stable/template/android/settings.gradle)):

groovy

```
// Configures the React Native Gradle Settings plugin used for autolinking
pluginManagement { includeBuild("../node_modules/@react-native/gradle-plugin") }
plugins { id("com.facebook.react.settings") }
extensions.configure(com.facebook.react.ReactSettingsExtension){ ex -> ex.autolinkLibrariesFromCommand() }
// If using .gradle.kts files:
// extensions.configure<com.facebook.react.ReactSettingsExtension> { autolinkLibrariesFromCommand() }
includeBuild("../node_modules/@react-native/gradle-plugin")

// Include your existing Gradle modules here.
// include(":app")
```

Then you need to open your top level `build.gradle` and include this line (as suggested from the [Community template](https://github.com/react-native-community/template/blob/0.83-stable/template/android/build.gradle)):

diff

```
buildscript {
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        classpath("com.android.tools.build:gradle:7.3.1")
+       classpath("com.facebook.react:react-native-gradle-plugin")
    }
}
```

This makes sure the React Native Gradle Plugin (RNGP) is available inside your project. Finally, add those lines inside your Applications's `build.gradle` file (it's a different `build.gradle` file usually inside your `app` folder - you can use the [Community template file as reference](https://github.com/react-native-community/template/blob/0.83-stable/template/android/build.gradle)):

diff

```
apply plugin: "com.android.application"
+apply plugin: "com.facebook.react"

repositories {
    mavenCentral()
}

dependencies {
    // Other dependencies here
+   // Note: we intentionally don't specify the version number here as RNGP will take care of it.
+   // If you don't use the RNGP, you'll have to specify version manually.
+   implementation("com.facebook.react:react-android")
+   implementation("com.facebook.react:hermes-android")
}

+react {
+   // Needed to enable Autolinking - https://github.com/react-native-community/cli/blob/master/docs/autolinking.md
+   autolinkLibrariesWithApp()
+}
```

Finally, open your application `gradle.properties` files and add the following line (here the [Community template file as reference](https://github.com/react-native-community/template/blob/0.83-stable/template/android/gradle.properties)):

diff

```
+reactNativeArchitectures=armeabi-v7a,arm64-v8a,x86,x86_64
+newArchEnabled=true
+hermesEnabled=true
```

### Configuring your manifest[‚Äã](#configuring-your-manifest "Direct link to Configuring your manifest")

First, make sure you have the Internet permission in your `AndroidManifest.xml`:

diff

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android">

+   <uses-permission android:name="android.permission.INTERNET" />

    <application
      android:name=".MainApplication">
    </application>
</manifest>
```

Then you need to enable [cleartext traffic](https://developer.android.com/training/articles/security-config#CleartextTrafficPermitted) in your **debug** `AndroidManifest.xml`:

diff

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <application
+       android:usesCleartextTraffic="true"
+       tools:targetApi="28"
    />
</manifest>
```

As usual, here the AndroidManifest.xml file from the Community template to use as a reference: [main](https://github.com/react-native-community/template/blob/0.83-stable/template/android/app/src/main/AndroidManifest.xml) and [debug](https://github.com/react-native-community/template/blob/0.83-stable/template/android/app/src/debug/AndroidManifest.xml).

This is needed as your application will communicate with your local bundler, [Metro](https://metrobundler.dev/), via HTTP.

Make sure you add this only to your **debug** manifest.

## 4. Writing the TypeScript Code[‚Äã](#4-writing-the-typescript-code "Direct link to 4. Writing the TypeScript Code")

Now we will actually modify the native Android application to integrate React Native.

The first bit of code we will write is the actual React Native code for the new screen that will be integrated into our application.

### Create a `index.js` file[‚Äã](#create-a-indexjs-file "Direct link to create-a-indexjs-file")

First, create an empty `index.js` file in the root of your React Native project.

`index.js` is the starting point for React Native applications, and it is always required. It can be a small file that `import`s other file that are part of your React Native component or application, or it can contain all the code that is needed for it.

Our index.js should look as follows (here the [Community template file as reference](https://github.com/react-native-community/template/blob/0.83-stable/template/index.js)):

js

```
import {AppRegistry} from 'react-native';
import App from './App';

AppRegistry.registerComponent('HelloWorld', () => App);
```

### Create a `App.tsx` file[‚Äã](#create-a-apptsx-file "Direct link to create-a-apptsx-file")

Let's create an `App.tsx` file. This is a [TypeScript](https://www.typescriptlang.org/) file that can have [JSX](https://en.wikipedia.org/wiki/JSX_\(JavaScript\)) expressions. It contains the root React Native component that we will integrate into our Android application ([link](https://github.com/react-native-community/template/blob/0.83-stable/template/App.tsx)):

tsx

```
import React from 'react';
import {
  SafeAreaView,
  ScrollView,
  StatusBar,
  StyleSheet,
  Text,
  useColorScheme,
  View,
} from 'react-native';

import {
  Colors,
  DebugInstructions,
  Header,
  ReloadInstructions,
} from 'react-native/Libraries/NewAppScreen';

function App(): React.JSX.Element {
  const isDarkMode = useColorScheme() === 'dark';

  const backgroundStyle = {
    backgroundColor: isDarkMode ? Colors.darker : Colors.lighter,
  };

  return (
    <SafeAreaView style={backgroundStyle}>
      <StatusBar
        barStyle={isDarkMode ? 'light-content' : 'dark-content'}
        backgroundColor={backgroundStyle.backgroundColor}
      />
      <ScrollView
        contentInsetAdjustmentBehavior="automatic"
        style={backgroundStyle}>
        <Header />
        <View
          style={{
            backgroundColor: isDarkMode
              ? Colors.black
              : Colors.white,
            padding: 24,
          }}>
          <Text style={styles.title}>Step One</Text>
          <Text>
            Edit <Text style={styles.bold}>App.tsx</Text> to
            change this screen and see your edits.
          </Text>
          <Text style={styles.title}>See your changes</Text>
          <ReloadInstructions />
          <Text style={styles.title}>Debug</Text>
          <DebugInstructions />
        </View>
      </ScrollView>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  title: {
    fontSize: 24,
    fontWeight: '600',
  },
  bold: {
    fontWeight: '700',
  },
});

export default App;
```

Here is the [Community template file as reference](https://github.com/react-native-community/template/blob/0.83-stable/template/App.tsx).

## 5. Integrating with your Android code[‚Äã](#5-integrating-with-your-android-code "Direct link to 5. Integrating with your Android code")

We now need to add some native code in order to start the React Native runtime and tell it to render our React components.

### Updating your Application class[‚Äã](#updating-your-application-class "Direct link to Updating your Application class")

First, we need to update your `Application` class to properly initialize React Native as follows:

* Java
* Kotlin

diff

```
package <your-package-here>;

import android.app.Application;
+import com.facebook.react.PackageList;
+import com.facebook.react.ReactApplication;
+import com.facebook.react.ReactHost;
+import com.facebook.react.ReactNativeHost;
+import com.facebook.react.ReactPackage;
+import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint;
+import com.facebook.react.defaults.DefaultReactHost;
+import com.facebook.react.defaults.DefaultReactNativeHost;
+import com.facebook.soloader.SoLoader;
+import com.facebook.react.soloader.OpenSourceMergedSoMapping
+import java.util.List;

-class MainApplication extends Application {
+class MainApplication extends Application implements ReactApplication {
+ @Override
+ public ReactNativeHost getReactNativeHost() {
+   return new DefaultReactNativeHost(this) {
+     @Override
+     protected List<ReactPackage> getPackages() { return new PackageList(this).getPackages(); }
+     @Override
+     protected String getJSMainModuleName() { return "index"; }
+     @Override
+     public boolean getUseDeveloperSupport() { return BuildConfig.DEBUG; }
+     @Override
+     protected boolean isNewArchEnabled() { return BuildConfig.IS_NEW_ARCHITECTURE_ENABLED; }
+     @Override
+     protected Boolean isHermesEnabled() { return BuildConfig.IS_HERMES_ENABLED; }
+   };
+ }

+ @Override
+ public ReactHost getReactHost() {
+   return DefaultReactHost.getDefaultReactHost(getApplicationContext(), getReactNativeHost());
+ }

  @Override
  public void onCreate() {
    super.onCreate();
+   SoLoader.init(this, OpenSourceMergedSoMapping);
+   if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
+     DefaultNewArchitectureEntryPoint.load();
+   }
  }
}
```

diff

```
// package <your-package-here>

import android.app.Application
+import com.facebook.react.PackageList
+import com.facebook.react.ReactApplication
+import com.facebook.react.ReactHost
+import com.facebook.react.ReactNativeHost
+import com.facebook.react.ReactPackage
+import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.load
+import com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost
+import com.facebook.react.defaults.DefaultReactNativeHost
+import com.facebook.soloader.SoLoader
+import com.facebook.react.soloader.OpenSourceMergedSoMapping

-class MainApplication : Application() {
+class MainApplication : Application(), ReactApplication {

+ override val reactNativeHost: ReactNativeHost =
+      object : DefaultReactNativeHost(this) {
+        override fun getPackages(): List<ReactPackage> = PackageList(this).packages
+        override fun getJSMainModuleName(): String = "index"
+        override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG
+        override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED
+        override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED
+      }

+ override val reactHost: ReactHost
+   get() = getDefaultReactHost(applicationContext, reactNativeHost)

  override fun onCreate() {
    super.onCreate()
+   SoLoader.init(this, OpenSourceMergedSoMapping)
+   if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
+     load()
+   }
  }
}
```

As usual, here the [`MainApplication.kt` Community template file as reference](https://github.com/react-native-community/template/blob/0.83-stable/template/android/app/src/main/java/com/helloworld/MainApplication.kt).

#### Creating a `ReactActivity`[‚Äã](#creating-a-reactactivity "Direct link to creating-a-reactactivity")

Finally, we need to create a new `Activity` that will extend `ReactActivity` and host the React Native code. This activity will be responsible for starting the React Native runtime and rendering the React component.

* Java
* Kotlin

java

```
// package <your-package-here>;

import com.facebook.react.ReactActivity;
import com.facebook.react.ReactActivityDelegate;
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint;
import com.facebook.react.defaults.DefaultReactActivityDelegate;

public class MyReactActivity extends ReactActivity {

    @Override
    protected String getMainComponentName() {
        return "HelloWorld";
    }

    @Override
    protected ReactActivityDelegate createReactActivityDelegate() {
        return new DefaultReactActivityDelegate(this, getMainComponentName(), DefaultNewArchitectureEntryPoint.getFabricEnabled());
    }
}
```

kotlin

```
// package <your-package-here>

import com.facebook.react.ReactActivity
import com.facebook.react.ReactActivityDelegate
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.fabricEnabled
import com.facebook.react.defaults.DefaultReactActivityDelegate

class MyReactActivity : ReactActivity() {

    override fun getMainComponentName(): String = "HelloWorld"

    override fun createReactActivityDelegate(): ReactActivityDelegate =
        DefaultReactActivityDelegate(this, mainComponentName, fabricEnabled)
}
```

As usual, here the [`MainActivity.kt` Community template file as reference](https://github.com/react-native-community/template/blob/0.83-stable/template/android/app/src/main/java/com/helloworld/MainActivity.kt).

Whenever you create a new Activity, you need to add it to your `AndroidManifest.xml` file. You also need set the theme of `MyReactActivity` to `Theme.AppCompat.Light.NoActionBar` (or to any non-ActionBar theme) as otherwise your application will render an ActionBar on top of your React Native screen:

diff

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-permission android:name="android.permission.INTERNET" />

    <application
      android:name=".MainApplication">

+     <activity
+       android:name=".MyReactActivity"
+       android:label="@string/app_name"
+       android:theme="@style/Theme.AppCompat.Light.NoActionBar">
+     </activity>
    </application>
</manifest>
```

Now your activity is ready to run some JavaScript code.

## 6. Test your integration[‚Äã](#6-test-your-integration "Direct link to 6. Test your integration")

You have completed all the basic steps to integrate React Native with your application. Now we will start the [Metro bundler](https://metrobundler.dev/) to build your TypeScript application code into a bundle. Metro's HTTP server shares the bundle from `localhost` on your developer environment to a simulator or device. This allows for [hot reloading](https://reactnative.dev/blog/2016/03/24/introducing-hot-reloading).

First, you need to create a `metro.config.js` file in the root of your project as follows:

js

```
const {getDefaultConfig} = require('@react-native/metro-config');
module.exports = getDefaultConfig(__dirname);
```

You can checkout the [`metro.config.js` file](https://github.com/react-native-community/template/blob/0.83-stable/template/metro.config.js) from the Community template file as reference.

Once you have the configuration file in place, you can run the bundler. Run the following command in the root directory of your project:

* npm
* Yarn

shell

```
npm start
```

shell

```
yarn start
```

Now build and run your Android app as normal.

Once you reach your React-powered Activity inside the app, it should load the JavaScript code from the development server and display:

![](/docs/assets/EmbeddedAppAndroidVideo.gif)

### Creating a release build in Android Studio[‚Äã](#creating-a-release-build-in-android-studio "Direct link to Creating a release build in Android Studio")

You can use Android Studio to create your release builds too! It‚Äôs as quick as creating release builds of your previously-existing native Android app.

The React Native Gradle Plugin will take care of bundling the JS code inside your APK/App Bundle.

If you're not using Android Studio, you can create a release build with:

```
cd android
# For a Release APK
./gradlew :app:assembleRelease
# For a Release AAB
./gradlew :app:bundleRelease
```

### Now what?[‚Äã](#now-what "Direct link to Now what?")

At this point you can continue developing your app as usual. Refer to our [debugging](/docs/debugging.md) and [deployment](/docs/running-on-device.md) docs to learn more about working with React Native.

## Key Concepts[‚Äã](#key-concepts "Direct link to Key Concepts")

The keys to integrating React Native components into your iOS application are to:

1. Set up the correct directory structure.
2. Install the necessary NPM dependencies.
3. Adding React Native to your Podfile configuration.
4. Writing the TypeScript code for your first React Native screen.
5. Integrate React Native with your iOS code using a `RCTRootView`.
6. Testing your integration by running the bundler and seeing your app in action.

## Using the Community Template[‚Äã](#using-the-community-template "Direct link to Using the Community Template")

While you follow this guide, we suggest you to use the [React Native Community Template](https://github.com/react-native-community/template/) as reference. The template contains a **minimal iOS app** and will help you understanding how to integrate React Native into an existing iOS app.

## Prerequisites[‚Äã](#prerequisites "Direct link to Prerequisites")

Follow the guide on [setting up your development environment](/docs/set-up-your-environment.md) and using [React Native without a framework](/docs/getting-started-without-a-framework.md) to configure your development environment for building React Native apps for iOS. This guide also assumes you're familiar with the basics of iOS development such as creating a `UIViewController` and editing the `Podfile` file.

### 1. Set up directory structure[‚Äã](#1-set-up-directory-structure "Direct link to 1. Set up directory structure")

To ensure a smooth experience, create a new folder for your integrated React Native project, then **move your existing iOS project** to the `/ios` subfolder.

## 2. Install NPM dependencies[‚Äã](#2-install-npm-dependencies "Direct link to 2. Install NPM dependencies")

Go to the root directory and run the following command:

shell

```
curl -O https://raw.githubusercontent.com/react-native-community/template/refs/heads/0.83-stable/template/package.json
```

This will copy the `package.json` [file from the Community template](https://github.com/react-native-community/template/blob/0.83-stable/template/package.json) to your project.

Next, install the NPM packages by running:

* npm
* Yarn

shell

```
npm install
```

shell

```
yarn install
```

Installation process has created a new `node_modules` folder. This folder stores all the JavaScript dependencies required to build your project.

Add `node_modules/` to your `.gitignore` file (here the [Community default one](https://github.com/react-native-community/template/blob/0.83-stable/template/_gitignore)).

### 3. Install Development tools[‚Äã](#3-install-development-tools "Direct link to 3. Install Development tools")

### Command Line Tools for Xcode[‚Äã](#command-line-tools-for-xcode "Direct link to Command Line Tools for Xcode")

Install the Command Line Tools. Choose **Settings... (or Preferences...)** in the Xcode menu. Go to the Locations panel and install the tools by selecting the most recent version in the Command Line Tools dropdown.

![Xcode Command Line Tools](/assets/images/GettingStartedXcodeCommandLineTools-a319295928960a4458698528086e3230.png)

### CocoaPods[‚Äã](#cocoapods "Direct link to CocoaPods")

[CocoaPods](https://cocoapods.org) is a package management tool for iOS and macOS development. We use it to add the actual React Native framework code locally into your current project.

We recommend installing CocoaPods using [Homebrew](https://brew.sh/):

shell

```
brew install cocoapods
```

## 4. Adding React Native to your app[‚Äã](#4-adding-react-native-to-your-app "Direct link to 4. Adding React Native to your app")

### Configuring CocoaPods[‚Äã](#configuring-cocoapods "Direct link to Configuring CocoaPods")

To configure CocoaPods, we need two files:

* A **Gemfile** that defines which Ruby dependencies we need.
* A **Podfile** that defines how to properly install our dependencies.

For the **Gemfile**, go to the root directory of your project and run this command

shell

```
curl -O https://raw.githubusercontent.com/react-native-community/template/refs/heads/0.83-stable/template/Gemfile
```

This will download the Gemfile from the template.

note

If you created your project with Xcode 16, you need to update the Gemfile as it follows:

diff

```
-gem 'cocoapods', '>= 1.13', '!= 1.15.0', '!= 1.15.1'
+gem 'cocoapods', '1.16.2'
gem 'activesupport', '>= 6.1.7.5', '!= 7.1.0'
-gem 'xcodeproj', '< 1.26.0'
+gem 'xcodeproj', '1.27.0'
```

Xcode 16 generates a project in a slightly different ways from previous versions of Xcode, and you need the latest CocoaPods and Xcodeproj gems to make it work properly.

Similarly, for the **Podfile**, go to the `ios` folder of your project and run

shell

```
curl -O https://raw.githubusercontent.com/react-native-community/template/refs/heads/0.83-stable/template/ios/Podfile
```

Please use the Community Template as a reference point for the [Gemfile](https://github.com/react-native-community/template/blob/0.83-stable/template/Gemfile) and for the [Podfile](https://github.com/react-native-community/template/blob/0.83-stable/template/ios/Podfile).

note

Remember to change [this line](https://github.com/react-native-community/template/blob/0.83-stable/template/ios/Podfile#L17).

Now, we need to run a couple of extra commands to install the Ruby gems and the Pods. Navigate to the `ios` folder and run the following commands:

sh

```
bundle install
bundle exec pod install
```

The first command will install the Ruby dependencies and the second command will actually integrate the React Native code in your application so that your iOS files can import the React Native headers.

## 5. Writing the TypeScript Code[‚Äã](#5-writing-the-typescript-code "Direct link to 5. Writing the TypeScript Code")

Now we will actually modify the native iOS application to integrate React Native.

The first bit of code we will write is the actual React Native code for the new screen that will be integrated into our application.

### Create a `index.js` file[‚Äã](#create-a-indexjs-file "Direct link to create-a-indexjs-file")

First, create an empty `index.js` file in the root of your React Native project.

`index.js` is the starting point for React Native applications, and it is always required. It can be a small file that `import`s other file that are part of your React Native component or application, or it can contain all the code that is needed for it.

Our `index.js` should look as follows (here the [Community template file as reference](https://github.com/react-native-community/template/blob/0.83-stable/template/index.js)):

js

```
import {AppRegistry} from 'react-native';
import App from './App';

AppRegistry.registerComponent('HelloWorld', () => App);
```

### Create a `App.tsx` file[‚Äã](#create-a-apptsx-file "Direct link to create-a-apptsx-file")

Let's create an `App.tsx` file. This is a [TypeScript](https://www.typescriptlang.org/) file that can have [JSX](https://en.wikipedia.org/wiki/JSX_\(JavaScript\)) expressions. It contains the root React Native component that we will integrate into our iOS application ([link](https://github.com/react-native-community/template/blob/0.83-stable/template/App.tsx)):

tsx

```
import React from 'react';
import {
  SafeAreaView,
  ScrollView,
  StatusBar,
  StyleSheet,
  Text,
  useColorScheme,
  View,
} from 'react-native';

import {
  Colors,
  DebugInstructions,
  Header,
  ReloadInstructions,
} from 'react-native/Libraries/NewAppScreen';

function App(): React.JSX.Element {
  const isDarkMode = useColorScheme() === 'dark';

  const backgroundStyle = {
    backgroundColor: isDarkMode ? Colors.darker : Colors.lighter,
  };

  return (
    <SafeAreaView style={backgroundStyle}>
      <StatusBar
        barStyle={isDarkMode ? 'light-content' : 'dark-content'}
        backgroundColor={backgroundStyle.backgroundColor}
      />
      <ScrollView
        contentInsetAdjustmentBehavior="automatic"
        style={backgroundStyle}>
        <Header />
        <View
          style={{
            backgroundColor: isDarkMode
              ? Colors.black
              : Colors.white,
            padding: 24,
          }}>
          <Text style={styles.title}>Step One</Text>
          <Text>
            Edit <Text style={styles.bold}>App.tsx</Text> to
            change this screen and see your edits.
          </Text>
          <Text style={styles.title}>See your changes</Text>
          <ReloadInstructions />
          <Text style={styles.title}>Debug</Text>
          <DebugInstructions />
        </View>
      </ScrollView>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  title: {
    fontSize: 24,
    fontWeight: '600',
  },
  bold: {
    fontWeight: '700',
  },
});

export default App;
```

Here is the [Community template file as reference](https://github.com/react-native-community/template/blob/0.83-stable/template/App.tsx).

## 5. Integrating with your iOS code[‚Äã](#5-integrating-with-your-ios-code "Direct link to 5. Integrating with your iOS code")

We now need to add some native code in order to start the React Native runtime and tell it to render our React components.

### Requirements[‚Äã](#requirements "Direct link to Requirements")

React Native initialization is now unbound to any specific part of an iOS app.

React Native can be initialized using a class called `RCTReactNativeFactory`, that takes care of handling the React Native lifecycle for you.

Once the class is initialized, you can either start a React Native view providing a `UIWindow` object, or you can ask for the factory to generate a `UIView` that you can load in any `UIViewController.`

In the following example, we will create a ViewController that can load a React Native view as it's `view`.

#### Create the ReactViewController[‚Äã](#create-the-reactviewcontroller "Direct link to Create the ReactViewController")

Create a new file from template (`‚åò`+`N`) and choose the Cocoa Touch Class template.

Make sure to select `UIViewController` as the "Subclass of" field.

* ObjectiveC
* Swift

Now open the `ReactViewController.m` file and apply the following changes

ReactViewController.m

```
#import "ReactViewController.h"
+#import <React/RCTBundleURLProvider.h>
+#import <RCTReactNativeFactory.h>
+#import <RCTDefaultReactNativeFactoryDelegate.h>
+#import <RCTAppDependencyProvider.h>


@interface ReactViewController ()

@end

+@interface ReactNativeFactoryDelegate: RCTDefaultReactNativeFactoryDelegate
+@end

-@implementation ReactViewController
+@implementation ReactViewController {
+  RCTReactNativeFactory *_factory;
+  id<RCTReactNativeFactoryDelegate> _factoryDelegate;
+}

 - (void)viewDidLoad {
     [super viewDidLoad];
     // Do any additional setup after loading the view.
+    _factoryDelegate = [ReactNativeFactoryDelegate new];
+    _factoryDelegate.dependencyProvider = [RCTAppDependencyProvider new];
+    _factory = [[RCTReactNativeFactory alloc] initWithDelegate:_factoryDelegate];
+    self.view = [_factory.rootViewFactory viewWithModuleName:@"HelloWorld"];
 }

@end

+@implementation ReactNativeFactoryDelegate
+
+- (NSURL *)sourceURLForBridge:(RCTBridge *)bridge
+{
+  return [self bundleURL];
+}
+
+- (NSURL *)bundleURL
+{
+#if DEBUG
+  return [RCTBundleURLProvider.sharedSettings jsBundleURLForBundleRoot:@"index"];
+#else
+  return [NSBundle.mainBundle URLForResource:@"main" withExtension:@"jsbundle"];
+#endif
+}

@end
```

Now open the `ReactViewController.swift` file and apply the following changes

ReactViewController.swift

```
import UIKit
+import React
+import React_RCTAppDelegate
+import ReactAppDependencyProvider

class ReactViewController: UIViewController {
+  var reactNativeFactory: RCTReactNativeFactory?
+  var reactNativeFactoryDelegate: RCTReactNativeFactoryDelegate?

  override func viewDidLoad() {
    super.viewDidLoad()
+    reactNativeFactoryDelegate = ReactNativeDelegate()
+    reactNativeFactoryDelegate!.dependencyProvider = RCTAppDependencyProvider()
+    reactNativeFactory = RCTReactNativeFactory(delegate: reactNativeFactoryDelegate!)
+    view = reactNativeFactory!.rootViewFactory.view(withModuleName: "HelloWorld")

  }
}

+class ReactNativeDelegate: RCTDefaultReactNativeFactoryDelegate {
+    override func sourceURL(for bridge: RCTBridge) -> URL? {
+      self.bundleURL()
+    }
+
+    override func bundleURL() -> URL? {
+      #if DEBUG
+      RCTBundleURLProvider.sharedSettings().jsBundleURL(forBundleRoot: "index")
+      #else
+      Bundle.main.url(forResource: "main", withExtension: "jsbundle")
+      #endif
+    }
+
+}
```

#### Presenting a React Native view in a rootViewController[‚Äã](#presenting-a-react-native-view-in-a-rootviewcontroller "Direct link to Presenting a React Native view in a rootViewController")

Finally, we can present our React Native view. To do so, we need a new View Controller that can host a view in which we can load the JS content. We already have the initial `ViewController`, and we can make it present the `ReactViewController`. There are several ways to do so, depending on your app. For this example, we assume that you have a button that presents React Native modally.

* ObjectiveC
* Swift

ViewController.m

```
#import "ViewController.h"
+#import "ReactViewController.h"

@interface ViewController ()

@end

- @implementation ViewController
+@implementation ViewController {
+  ReactViewController *reactViewController;
+}

 - (void)viewDidLoad {
   [super viewDidLoad];
   // Do any additional setup after loading the view.
   self.view.backgroundColor = UIColor.systemBackgroundColor;
+  UIButton *button = [UIButton new];
+  [button setTitle:@"Open React Native" forState:UIControlStateNormal];
+  [button setTitleColor:UIColor.systemBlueColor forState:UIControlStateNormal];
+  [button setTitleColor:UIColor.blueColor forState:UIControlStateHighlighted];
+  [button addTarget:self action:@selector(presentReactNative) forControlEvents:UIControlEventTouchUpInside];
+  [self.view addSubview:button];

+  button.translatesAutoresizingMaskIntoConstraints = NO;
+  [NSLayoutConstraint activateConstraints:@[
+    [button.leadingAnchor constraintEqualToAnchor:self.view.leadingAnchor],
+    [button.trailingAnchor constraintEqualToAnchor:self.view.trailingAnchor],
+    [button.centerYAnchor constraintEqualToAnchor:self.view.centerYAnchor],
+    [button.centerXAnchor constraintEqualToAnchor:self.view.centerXAnchor],
+  ]];
 }

+- (void)presentReactNative
+{
+  if (reactViewController == NULL) {
+    reactViewController = [ReactViewController new];
+  }
+  [self presentViewController:reactViewController animated:YES];
+}

@end
```

ViewController.swift

```
import UIKit

class ViewController: UIViewController {

+  var reactViewController: ReactViewController?

  override func viewDidLoad() {
    super.viewDidLoad()
    // Do any additional setup after loading the view.
    self.view.backgroundColor = .systemBackground

+    let button = UIButton()
+    button.setTitle("Open React Native", for: .normal)
+    button.setTitleColor(.systemBlue, for: .normal)
+    button.setTitleColor(.blue, for: .highlighted)
+    button.addAction(UIAction { [weak self] _ in
+      guard let self else { return }
+      if reactViewController == nil {
+       reactViewController = ReactViewController()
+      }
+      present(reactViewController!, animated: true)
+    }, for: .touchUpInside)
+    self.view.addSubview(button)
+
+    button.translatesAutoresizingMaskIntoConstraints = false
+    NSLayoutConstraint.activate([
+      button.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),
+      button.trailingAnchor.constraint(equalTo: self.view.trailingAnchor),
+      button.centerXAnchor.constraint(equalTo: self.view.centerXAnchor),
+      button.centerYAnchor.constraint(equalTo: self.view.centerYAnchor),
+    ])
  }
}
```

Make sure to disable the Sandbox scripting. To achieve this, in Xcode, click on your app, then on build settings. Filter for script and set the `User Script Sandboxing` to `NO`. This step is needed to properly switch between the Debug and Release version of the [Hermes engine](https://github.com/facebook/hermes/blob/main/README.md) that we ship with React Native.

![Disable Sandboxing](/assets/images/disable-sandboxing-6948d9cf1b719f09d30946b97bb68771.png)

Finally, make sure to add the `UIViewControllerBasedStatusBarAppearance` key into your `Info.plist` file, with value of `NO`.

![Disable UIViewControllerBasedStatusBarAppearance](/assets/images/disable-UIViewControllerBasedStatusBarAppearance-c778c3d65569a165bf2b76c43438af71.png)

## 6. Test your integration[‚Äã](#6-test-your-integration "Direct link to 6. Test your integration")

You have completed all the basic steps to integrate React Native with your application. Now we will start the [Metro bundler](https://metrobundler.dev/) to build your TypeScript application code into a bundle. Metro's HTTP server shares the bundle from `localhost` on your developer environment to a simulator or device. This allows for [hot reloading](https://reactnative.dev/blog/2016/03/24/introducing-hot-reloading).

First, you need to create a `metro.config.js` file in the root of your project as follows:

js

```
const {getDefaultConfig} = require('@react-native/metro-config');
module.exports = getDefaultConfig(__dirname);
```

You can checkout the [`metro.config.js` file](https://github.com/react-native-community/template/blob/0.83-stable/template/metro.config.js) from the Community template file as reference.

Then, you need to create a `.watchmanconfig` file in the root of your project. The file must contain an empty json object:

sh

```
echo {} > .watchmanconfig
```

Once you have the configuration file in place, you can run the bundler. Run the following command in the root directory of your project:

* npm
* Yarn

shell

```
npm start
```

shell

```
yarn start
```

Now build and run your iOS app as normal.

Once you reach your React-powered Activity inside the app, it should load the JavaScript code from the development server and display:

![](/docs/assets/EmbeddedAppIOS078.gif)

### Creating a release build in Xcode[‚Äã](#creating-a-release-build-in-xcode "Direct link to Creating a release build in Xcode")

You can use Xcode to create your release builds too! The only additional step is to add a script that is executed when the app is built to package your JS and images into the iOS application.

1. In Xcode, select your application
2. Click on `Build Phases`
3. Click on the `+` in the top left corner and select `New Run Script Phase`
4. Click on the `Run Script` line and rename the Script to `Bundle React Native code and images`
5. Paste in the text box the following script

Build React Native code and image

```
set -e

WITH_ENVIRONMENT="$REACT_NATIVE_PATH/scripts/xcode/with-environment.sh"
REACT_NATIVE_XCODE="$REACT_NATIVE_PATH/scripts/react-native-xcode.sh"

/bin/sh -c "$WITH_ENVIRONMENT $REACT_NATIVE_XCODE"
```

6. Drag and drop the script before the one called `[CP] Embed Pods Frameworks`.

Now, if you build your app for Release, it will work as expected.

## 7. Passing initial props to the React Native view[‚Äã](#7-passing-initial-props-to-the-react-native-view "Direct link to 7. Passing initial props to the React Native view")

In some case, you'd like to pass some information from the Native app to JavaScript. For example, you might want to pass the user id of the currently logged user to React Native, together with a token that can be used to retrieve information from a database.

This is possible by using the `initialProperties` parameter of the `view(withModuleName:initialProperty)` overload of the `RCTReactNativeFactory` class. The following steps shows you how to do it.

### Update the App.tsx file to read the initial properties.[‚Äã](#update-the-apptsx-file-to-read-the-initial-properties "Direct link to Update the App.tsx file to read the initial properties.")

Open the `App.tsx` file and add the following code:

App.tsx

```
import {
  Colors,
  DebugInstructions,
  Header,
  ReloadInstructions,
} from 'react-native/Libraries/NewAppScreen';

-function App(): React.JSX.Element {
+function App(props): React.JSX.Element {
  const isDarkMode = useColorScheme() === 'dark';

  const backgroundStyle = {
    backgroundColor: isDarkMode ? Colors.darker : Colors.lighter,
  };

  return (
    <SafeAreaView style={backgroundStyle}>
      <StatusBar
        barStyle={isDarkMode ? 'light-content' : 'dark-content'}
        backgroundColor={backgroundStyle.backgroundColor}
      />
      <ScrollView
        contentInsetAdjustmentBehavior="automatic"
        style={backgroundStyle}>
        <Header />
-       <View
-         style={{
-           backgroundColor: isDarkMode
-             ? Colors.black
-             : Colors.white,
-           padding: 24,
-         }}>
-         <Text style={styles.title}>Step One</Text>
-         <Text>
-           Edit <Text style={styles.bold}>App.tsx</Text> to
-           change this screen and see your edits.
-         </Text>
-         <Text style={styles.title}>See your changes</Text>
-         <ReloadInstructions />
-         <Text style={styles.title}>Debug</Text>
-         <DebugInstructions />
+         <Text style={styles.title}>UserID: {props.userID}</Text>
+         <Text style={styles.title}>Token: {props.token}</Text>
        </View>
      </ScrollView>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  title: {
    fontSize: 24,
    fontWeight: '600',
+   marginLeft: 20,
  },
  bold: {
    fontWeight: '700',
  },
});

export default App;
```

These changes will tell React Native that your App component is now accepting some properties. The `RCTreactNativeFactory` will take care of passing them to the component when it's rendered.

### Update the Native code to pass the initial properties to JavaScript.[‚Äã](#update-the-native-code-to-pass-the-initial-properties-to-javascript "Direct link to Update the Native code to pass the initial properties to JavaScript.")

* ObjectiveC
* Swift

Modify the `ReactViewController.mm` to pass the initial properties to JavaScript.

ReactViewController.mm

```
 - (void)viewDidLoad {
   [super viewDidLoad];
   // Do any additional setup after loading the view.

   _factoryDelegate = [ReactNativeFactoryDelegate new];
   _factoryDelegate.dependencyProvider = [RCTAppDependencyProvider new];
   _factory = [[RCTReactNativeFactory alloc] initWithDelegate:_factoryDelegate];
-  self.view = [_factory.rootViewFactory viewWithModuleName:@"HelloWorld"];
+  self.view = [_factory.rootViewFactory viewWithModuleName:@"HelloWorld" initialProperties:@{
+    @"userID": @"12345678",
+    @"token": @"secretToken"
+  }];
}
```

Modify the `ReactViewController.swift` to pass the initial properties to the React Native view.

ReactViewController.swift

```
  override func viewDidLoad() {
    super.viewDidLoad()
    reactNativeFactoryDelegate = ReactNativeDelegate()
    reactNativeFactoryDelegate!.dependencyProvider = RCTAppDependencyProvider()
    reactNativeFactory = RCTReactNativeFactory(delegate: reactNativeFactoryDelegate!)
-   view = reactNativeFactory!.rootViewFactory.view(withModuleName: "HelloWorld")
+   view = reactNativeFactory!.rootViewFactory.view(withModuleName: "HelloWorld" initialProperties: [
+     "userID": "12345678",
+     "token": "secretToken"
+])

  }
}
```

3. Run your app once again. You should see the following screen after you present the `ReactViewController`:

![](/docs/assets/brownfield-with-initial-props.png)

## Now what?[‚Äã](#now-what "Direct link to Now what?")

At this point you can continue developing your app as usual. Refer to our [debugging](/docs/debugging.md) and [deployment](/docs/running-on-device.md) docs to learn more about working with React Native.


---

# üóëÔ∏è InteractionManager

Deprecated

Avoid long-running work and use [`requestIdleCallback`](/docs/global-requestIdleCallback.md) instead.

InteractionManager allows long-running work to be scheduled after any interactions/animations have completed. In particular, this allows JavaScript animations to run smoothly.

Applications can schedule tasks to run after interactions with the following:

tsx

```
InteractionManager.runAfterInteractions(() => {
  // ...long-running synchronous task...
});
```

Compare this to other scheduling alternatives:

* `requestAnimationFrame()` for code that animates a view over time.
* `setImmediate/setTimeout()` run code later, note this may delay animations.
* `runAfterInteractions()` run code later, without delaying active animations.

The touch handling system considers one or more active touches to be an 'interaction' and will delay `runAfterInteractions()` callbacks until all touches have ended or been cancelled.

InteractionManager also allows applications to register animations by creating an interaction 'handle' on animation start, and clearing it upon completion:

tsx

```
const handle = InteractionManager.createInteractionHandle();
// run animation... (`runAfterInteractions` tasks are queued)
// later, on animation completion:
InteractionManager.clearInteractionHandle(handle);
// queued tasks run if all handles were cleared
```

`runAfterInteractions` takes either a plain callback function, or a `PromiseTask` object with a `gen` method that returns a `Promise`. If a `PromiseTask` is supplied, then it is fully resolved (including asynchronous dependencies that also schedule more tasks via `runAfterInteractions`) before starting on the next task that might have been queued up synchronously earlier.

By default, queued tasks are executed together in a loop in one `setImmediate` batch. If `setDeadline` is called with a positive number, then tasks will only be executed until the deadline (in terms of js event loop run time) approaches, at which point execution will yield via setTimeout, allowing events such as touches to start interactions and block queued tasks from executing, making apps more responsive.

***

## Example[‚Äã](#example "Direct link to Example")

### Basic[‚Äã](#basic "Direct link to Basic")

* TypeScript
* JavaScript

### Advanced[‚Äã](#advanced "Direct link to Advanced")

* TypeScript
* JavaScript

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `runAfterInteractions()`[‚Äã](#runafterinteractions "Direct link to runafterinteractions")

tsx

```
static runAfterInteractions(task?: (() => any) | SimpleTask | PromiseTask);
```

Schedule a function to run after all interactions have completed. Returns a cancellable "promise".

***

### `createInteractionHandle()`[‚Äã](#createinteractionhandle "Direct link to createinteractionhandle")

tsx

```
static createInteractionHandle(): Handle;
```

Notify manager that an interaction has started.

***

### `clearInteractionHandle()`[‚Äã](#clearinteractionhandle "Direct link to clearinteractionhandle")

tsx

```
static clearInteractionHandle(handle: Handle);
```

Notify manager that an interaction has completed.

***

### `setDeadline()`[‚Äã](#setdeadline "Direct link to setdeadline")

tsx

```
static setDeadline(deadline: number);
```

A positive number will use setTimeout to schedule any tasks after the eventLoopRunningTime hits the deadline value, otherwise all tasks will be executed in one setImmediate batch (default).


---

# React Fundamentals

React Native runs on [React](https://react.dev/), a popular open source library for building user interfaces with JavaScript. To make the most of React Native, it helps to understand React itself. This section can get you started or can serve as a refresher course.

We‚Äôre going to cover the core concepts behind React:

* components
* JSX
* props
* state

If you want to dig deeper, we encourage you to check out [React‚Äôs official documentation](https://react.dev/learn).

## Your first component[‚Äã](#your-first-component "Direct link to Your first component")

The rest of this introduction to React uses cats in its examples: friendly, approachable creatures that need names and a cafe to work in. Here is your very first Cat component:

Here is how you do it: To define your `Cat` component, first use JavaScript‚Äôs [`import`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import) to import React and React Native‚Äôs [`Text`](/docs/next/text) Core Component:

tsx

```
import React from 'react';
import {Text} from 'react-native';
```

Your component starts as a function:

tsx

```
const Cat = () => {};
```

You can think of components as blueprints. Whatever a function component returns is rendered as a **React element.** React elements let you describe what you want to see on the screen.

Here the `Cat` component will render a `<Text>` element:

tsx

```
const Cat = () => {
  return <Text>Hello, I am your cat!</Text>;
};
```

You can export your function component with JavaScript‚Äôs [`export default`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export) for use throughout your app like so:

tsx

```
const Cat = () => {
  return <Text>Hello, I am your cat!</Text>;
};

export default Cat;
```

tip

This is one of many ways to export your component. This kind of export works well with the Snack Player. However, depending on your app‚Äôs file structure, you might need to use a different convention. This [handy cheatsheet on JavaScript imports and exports](https://medium.com/dailyjs/javascript-module-cheatsheet-7bd474f1d829) can help.

Now take a closer look at that `return` statement. `<Text>Hello, I am your cat!</Text>` is using a kind of JavaScript syntax that makes writing elements convenient: JSX.

## JSX[‚Äã](#jsx "Direct link to JSX")

React and React Native use **JSX,** a syntax that lets you write elements inside JavaScript like so: `<Text>Hello, I am your cat!</Text>`. The React docs have [a comprehensive guide to JSX](https://react.dev/learn/writing-markup-with-jsx) you can refer to learn even more. Because JSX is JavaScript, you can use variables inside it. Here you are declaring a name for the cat, `name`, and embedding it with curly braces inside `<Text>`.

Any JavaScript expression will work between curly braces, including function calls like `{getFullName("Rum", "Tum", "Tugger")}`:

* TypeScript
* JavaScript

You can think of curly braces as creating a portal into JS functionality in your JSX!

tip

Because JSX is included in the React library, it won‚Äôt work if you don‚Äôt have `import React from 'react'` at the top of your file!

## Custom Components[‚Äã](#custom-components "Direct link to Custom Components")

You‚Äôve already met [React Native‚Äôs Core Components](/docs/intro-react-native-components.md). React lets you nest these components inside each other to create new components. These nestable, reusable components are at the heart of the React paradigm.

For example, you can nest [`Text`](/docs/text.md) and [`TextInput`](/docs/textinput.md) inside a [`View`](/docs/view.md) below, and React Native will render them together:

#### Developer notes[‚Äã](#developer-notes "Direct link to Developer notes")

* Android
* Web

info

If you‚Äôre familiar with web development, `<View>` and `<Text>` might remind you of HTML! You can think of them as the `<div>` and `<p>` tags of application development.

info

On Android, you usually put your views inside `LinearLayout`, `FrameLayout`, `RelativeLayout`, etc. to define how the view‚Äôs children will be arranged on the screen. In React Native, `View` uses Flexbox for its children‚Äôs layout. You can learn more in [our guide to layout with Flexbox](/docs/flexbox.md).

You can render this component multiple times and in multiple places without repeating your code by using `<Cat>`:

Any component that renders other components is a **parent component.** Here, `Cafe` is the parent component and each `Cat` is a **child component.**

You can put as many cats in your cafe as you like. Each `<Cat>` renders a unique element‚Äîwhich you can customize with props.

## Props[‚Äã](#props "Direct link to Props")

**Props** is short for ‚Äúproperties‚Äù. Props let you customize React components. For example, here you pass each `<Cat>` a different `name` for `Cat` to render:

* TypeScript
* JavaScript

Most of React Native‚Äôs Core Components can be customized with props, too. For example, when using [`Image`](/docs/image.md), you pass it a prop named [`source`](/docs/image.md#source) to define what image it shows:

`Image` has [many different props](/docs/image.md#props), including [`style`](/docs/image.md#style), which accepts a JS object of design and layout related property-value pairs.

note

Notice the double curly braces `{{ }}` surrounding `style`‚Äòs width and height. In JSX, JavaScript values are referenced with `{}`. This is handy if you are passing something other than a string as props, like an array or number: `<Cat food={["fish", "kibble"]} age={2} />`. However, JS objects are ***also*** denoted with curly braces: `{width: 200, height: 200}`. Therefore, to pass a JS object in JSX, you must wrap the object in **another pair** of curly braces: `{{width: 200, height: 200}}`

You can build many things with props and the Core Components [`Text`](/docs/text.md), [`Image`](/docs/image.md), and [`View`](/docs/view.md)! But to build something interactive, you‚Äôll need state.

## State[‚Äã](#state "Direct link to State")

While you can think of props as arguments you use to configure how components render, **state** is like a component‚Äôs personal data storage. State is useful for handling data that changes over time or that comes from user interaction. State gives your components memory!

info

As a general rule, use props to configure a component when it renders. Use state to keep track of any component data that you expect to change over time.

The following example takes place in a cat cafe where two hungry cats are waiting to be fed. Their hunger, which we expect to change over time (unlike their names), is stored as state. To feed the cats, press their buttons‚Äîwhich will update their state.

You can add state to a component by calling [React‚Äôs `useState` Hook](https://react.dev/learn/state-a-components-memory). A Hook is a kind of function that lets you ‚Äúhook into‚Äù React features. For example, `useState` is a Hook that lets you add state to function components. You can learn more about [other kinds of Hooks in the React documentation.](https://react.dev/reference/react)

* TypeScript
* JavaScript

First, you will want to import `useState` from React like so:

tsx

```
import React, {useState} from 'react';
```

Then you declare the component‚Äôs state by calling `useState` inside its function. In this example, `useState` creates an `isHungry` state variable:

tsx

```
const Cat = (props: CatProps) => {
  const [isHungry, setIsHungry] = useState(true);
  // ...
};
```

tip

You can use `useState` to track any kind of data: strings, numbers, Booleans, arrays, objects. For example, you can track the number of times a cat has been petted with `const [timesPetted, setTimesPetted] = useState(0)`!

Calling `useState` does two things:

* it creates a ‚Äústate variable‚Äù with an initial value‚Äîin this case the state variable is `isHungry` and its initial value is `true`
* it creates a function to set that state variable‚Äôs value‚Äî`setIsHungry`

It doesn‚Äôt matter what names you use. But it can be handy to think of the pattern as `[<getter>, <setter>] = useState(<initialValue>)`.

Next you add the [`Button`](/docs/button.md) Core Component and give it an `onPress` prop:

tsx

```
<Button
  onPress={() => {
    setIsHungry(false);
  }}
  //..
/>
```

Now, when someone presses the button, `onPress` will fire, calling the `setIsHungry(false)`. This sets the state variable `isHungry` to `false`. When `isHungry` is false, the `Button`‚Äôs `disabled` prop is set to `true` and its `title` also changes:

tsx

```
<Button
  //..
  disabled={!isHungry}
  title={isHungry ? 'Give me some food, please!' : 'Thank you!'}
/>
```

info

You might‚Äôve noticed that although `isHungry` is a [const](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/const), it is seemingly reassignable! What is happening is when a state-setting function like `setIsHungry` is called, its component will re-render. In this case the `Cat` function will run again‚Äîand this time, `useState` will give us the next value of `isHungry`.

Finally, put your cats inside a `Cafe` component:

tsx

```
const Cafe = () => {
  return (
    <>
      <Cat name="Munkustrap" />
      <Cat name="Spot" />
    </>
  );
};
```

info

See the `<>` and `</>` above? These bits of JSX are [fragments](https://react.dev/reference/react/Fragment). Adjacent JSX elements must be wrapped in an enclosing tag. Fragments let you do that without nesting an extra, unnecessary wrapping element like `View`.

***

Now that you‚Äôve covered both React and React Native‚Äôs Core Components, let‚Äôs dive deeper on some of these core components by looking at [handling `<TextInput>`](/docs/handling-text-input.md).


---

# Core Components and Native Components

React Native is an open source framework for building Android and iOS applications using [React](https://react.dev/) and the app platform‚Äôs native capabilities. With React Native, you use JavaScript to access your platform‚Äôs APIs as well as to describe the appearance and behavior of your UI using React components: bundles of reusable, nestable code. You can learn more about React in the next section. But first, let‚Äôs cover how components work in React Native.

## Views and mobile development[‚Äã](#views-and-mobile-development "Direct link to Views and mobile development")

In Android and iOS development, a **view** is the basic building block of UI: a small rectangular element on the screen which can be used to display text, images, or respond to user input. Even the smallest visual elements of an app, like a line of text or a button, are kinds of views. Some kinds of views can contain other views. It‚Äôs views all the way down!

![Diagram of Android and iOS app showing them both built on top of atomic elements called views.](/docs/assets/diagram_ios-android-views.svg)

Just a sampling of the many views used in Android and iOS apps.

## Native Components[‚Äã](#native-components "Direct link to Native Components")

In Android development, you write views in Kotlin or Java; in iOS development, you use Swift or Objective-C. With React Native, you can invoke these views with JavaScript using React components. At runtime, React Native creates the corresponding Android and iOS views for those components. Because React Native components are backed by the same views as Android and iOS, React Native apps look, feel, and perform like any other apps. We call these platform-backed components **Native Components.**

React Native comes with a set of essential, ready-to-use Native Components you can use to start building your app today. These are React Native's **Core Components**.

caution

This documentation references a legacy set of API and needs to be updated to reflect the New Architecture

React Native also lets you build your own Native Components for [Android](/docs/legacy/native-components-android.md) and [iOS](/docs/legacy/native-components-ios.md) to suit your app‚Äôs unique needs. We also have a thriving ecosystem of these **community-contributed components.** Check out [Native Directory](https://reactnative.directory) to find what the community has been creating.

## Core Components[‚Äã](#core-components "Direct link to Core Components")

React Native has many Core Components for everything from controls to activity indicators. You can find them all [documented in the API section](/docs/components-and-apis.md). You will mostly work with the following Core Components:

| React Native UI Component | Android View   | iOS View         | Web Analog              | Description                                                                                           |
| ------------------------- | -------------- | ---------------- | ----------------------- | ----------------------------------------------------------------------------------------------------- |
| `<View>`                  | `<ViewGroup>`  | `<UIView>`       | A non-scrolling `<div>` | A container that supports layout with flexbox, style, some touch handling, and accessibility controls |
| `<Text>`                  | `<TextView>`   | `<UITextView>`   | `<p>`                   | Displays, styles, and nests strings of text and even handles touch events                             |
| `<Image>`                 | `<ImageView>`  | `<UIImageView>`  | `<img>`                 | Displays different types of images                                                                    |
| `<ScrollView>`            | `<ScrollView>` | `<UIScrollView>` | `<div>`                 | A generic scrolling container that can contain multiple components and views                          |
| `<TextInput>`             | `<EditText>`   | `<UITextField>`  | `<input type="text">`   | Allows the user to enter text                                                                         |

In the next section, you will start combining these Core Components to learn about how React works. Have a play with them here now!

***

Because React Native uses the same API structure as React components, you‚Äôll need to understand React component APIs to get started. The [next section](/docs/intro-react.md) makes for a quick introduction or refresher on the topic. However, if you‚Äôre already familiar with React, feel free to [skip ahead](/docs/handling-text-input.md).

![A diagram showing React Native's Core Components are a subset of React Components that ship with React Native.](/docs/assets/diagram_react-native-components.svg)![A diagram showing React Native's Core Components are a subset of React Components that ship with React Native.](/docs/assets/diagram_react-native-components_dark.svg)


---

# JavaScript Environment

## JavaScript Runtime[‚Äã](#javascript-runtime "Direct link to JavaScript Runtime")

When using React Native, you're going to be running your JavaScript code in up to three environments:

* In most cases, React Native will use [Hermes](/docs/hermes.md), an open-source JavaScript engine optimized for React Native.
* If Hermes is disabled, React Native will use [JavaScriptCore](https://trac.webkit.org/wiki/JavaScriptCore), the JavaScript engine that powers Safari. Note that on iOS, JavaScriptCore does not use JIT due to the absence of writable executable memory in iOS apps.
* When using Chrome debugging, all JavaScript code runs within Chrome itself, communicating with native code via WebSockets. Chrome uses [V8](https://v8.dev/) as its JavaScript engine.

While these environments are very similar, you may end up hitting some inconsistencies. It is best to avoid relying on specifics of any runtime.

## JavaScript Syntax Transformers[‚Äã](#javascript-syntax-transformers "Direct link to JavaScript Syntax Transformers")

Syntax transformers make writing code more enjoyable by allowing you to use new JavaScript syntax without having to wait for support on all interpreters.

React Native ships with the [Babel JavaScript compiler](https://babeljs.io). Check [Babel documentation](https://babeljs.io/docs/plugins/#transform-plugins) on its supported transformations for more details.

A full list of React Native's enabled transformations can be found in [@react-native/babel-preset](https://github.com/facebook/react-native/tree/main/packages/react-native-babel-preset).

| Transformation                                                                                              | Code                                                                             |
| ----------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| ECMAScript 5                                                                                                |                                                                                  |
| Reserved Words                                                                                              | ```
promise.catch(function() {...});
```                                           |
| ECMAScript 2015 (ES6)                                                                                       |                                                                                  |
| [Arrow functions](https://babeljs.io/docs/learn-es2015/#arrows)                                             | ```
<C onPress={() => this.setState({pressed: true})} />
```                       |
| [Block scoping](https://babeljs.io/docs/learn-es2015/#let-const)                                            | ```
let greeting = 'hi';
```                                                       |
| [Call spread](https://babeljs.io/docs/learn-es2015/#default-rest-spread)                                    | ```
Math.max(...array);
```                                                        |
| [Classes](https://babeljs.io/docs/learn-es2015/#classes)                                                    | ```
class C extends React.Component {render() { return <View />; }}
```            |
| [Computed Properties](https://babeljs.io/docs/learn-es2015/#enhanced-object-literals)                       | ```
const key = 'abc'; const obj = {[key]: 10};
```                                |
| [Constants](https://babeljs.io/docs/learn-es2015/#let-const)                                                | ```
const answer = 42;
```                                                         |
| [Destructuring](https://babeljs.io/docs/learn-es2015/#destructuring)                                        | ```
const {isActive, style} = this.props;
```                                      |
| [for‚Ä¶of](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)             | ```
for (var num of [1, 2, 3]) {...};
```                                          |
| [Function Name](https://babeljs.io/docs/en/babel-plugin-transform-function-name)                            | ```
let number = x => x;
```                                                       |
| [Literals](https://babeljs.io/docs/en/babel-plugin-transform-literals)                                      | ```
const b = 0b11; const o = 0o7; const u = 'Hello\u{000A}\u{0009}!';
```         |
| [Modules](https://babeljs.io/docs/learn-es2015/#modules)                                                    | ```
import React, {Component} from 'react';
```                                    |
| [Object Concise Method](https://babeljs.io/docs/learn-es2015/#enhanced-object-literals)                     | ```
const obj = {method() { return 10; }};
```                                     |
| [Object Short Notation](https://babeljs.io/docs/learn-es2015/#enhanced-object-literals)                     | ```
const name = 'vjeux'; const obj = {name};
```                                  |
| [Parameters](https://babeljs.io/docs/en/babel-plugin-transform-parameters)                                  | ```
function test(x = 'hello', {a, b}, ...args) {}
```                             |
| [Rest Params](https://github.com/sebmarkbage/ecmascript-rest-spread)                                        | ```
function(type, ...args) {};
```                                                |
| [Shorthand Properties](https://babeljs.io/docs/en/babel-plugin-transform-shorthand-properties)              | ```
const o = {a, b, c};
```                                                       |
| [Sticky Regex](https://babeljs.io/docs/en/babel-plugin-transform-sticky-regex)                              | ```
const a = /o+/y;
```                                                           |
| [Template Literals](https://babeljs.io/docs/learn-es2015/#template-strings)                                 | ```
const who = 'world'; const str = `Hello ${who}`;
```                           |
| [Unicode Regex](https://babeljs.io/docs/en/babel-plugin-transform-unicode-regex)                            | ```
const string = 'fooüí©bar'; const match = string.match(/foo(.)bar/u);
```       |
| ECMAScript 2016 (ES7)                                                                                       |                                                                                  |
| [Exponentiation Operator](https://babeljs.io/docs/en/babel-plugin-transform-exponentiation-operator)        | ```
let x = 10 ** 2;
```                                                           |
| ECMAScript 2017 (ES8)                                                                                       |                                                                                  |
| [Async Functions](https://github.com/tc39/ecmascript-asyncawait)                                            | ```
async function doStuffAsync() {const foo = await doOtherStuffAsync();};
```    |
| [Function Trailing Comma](https://github.com/jeffmo/es-trailing-function-commas)                            | ```
function f(a, b, c,) {};
```                                                   |
| ECMAScript 2018 (ES9)                                                                                       |                                                                                  |
| [Object Spread](https://github.com/tc39/proposal-object-rest-spread)                                        | ```
const extended = {...obj, a: 10};
```                                          |
| ECMAScript 2019 (ES10)                                                                                      |                                                                                  |
| [Optional Catch Binding](https://babeljs.io/docs/en/babel-plugin-proposal-optional-catch-binding)           | ```
try {throw 0; } catch { doSomethingWhichDoesNotCareAboutTheValueThrown();}
``` |
| ECMAScript 2020 (ES11)                                                                                      |                                                                                  |
| [Dynamic Imports](https://babeljs.io/docs/en/babel-plugin-syntax-dynamic-import)                            | ```
const package = await import('package'); package.function()
```                |
| [Nullish Coalescing Operator](https://babeljs.io/docs/en/babel-plugin-proposal-nullish-coalescing-operator) | ```
const foo = object.foo ?? 'default';
```                                       |
| [Optional Chaining](https://github.com/tc39/proposal-optional-chaining)                                     | ```
const name = obj.user?.name;
```                                               |
| ECMAScript 2022 (ES13)                                                                                      |                                                                                  |
| [Class Fields](https://babeljs.io/docs/en/babel-plugin-proposal-class-properties)                           | ```
class Bork {static a = 'foo'; static b; x = 'bar'; y;}
```                     |
| Stage 1 Proposal                                                                                            |                                                                                  |
| [Export Default From](https://babeljs.io/docs/en/babel-plugin-proposal-export-default-from)                 | ```
export v from 'mod';
```                                                       |
| Miscellaneous                                                                                               |                                                                                  |
| [Babel Template](https://babeljs.io/docs/en/babel-template)                                                 | ```
template(`const %%importName%% = require(%%source%%);`);
```                   |
| [Flow](https://flowtype.org/)                                                                               | ```
function foo(x: ?number): string {};
```                                       |
| [ESM to CJS](https://babeljs.io/docs/en/babel-plugin-transform-modules-commonjs)                            | ```
export default 42;
```                                                         |
| [JSX](https://react.dev/learn/writing-markup-with-jsx)                                                      | ```
<View style={{color: 'red'}} />
```                                            |
| [Object Assign](https://babeljs.io/docs/en/babel-plugin-transform-object-assign)                            | ```
Object.assign(a, b);
```                                                       |
| [React Display Name](https://babeljs.io/docs/en/babel-plugin-transform-react-display-name)                  | ```
const bar = createReactClass({});
```                                          |
| [TypeScript](https://www.typescriptlang.org/)                                                               | ```
function foo(x: {hello: true, target: 'react native!'}): string {};
```        |

## Polyfills[‚Äã](#polyfills "Direct link to Polyfills")

Many standard functions are also available on all the supported JavaScript runtimes.

#### Browser[‚Äã](#browser "Direct link to Browser")

* [CommonJS `require`](https://nodejs.org/docs/latest/api/modules.html)
* `console.{log, warn, error, info, debug, trace, table, group, groupCollapsed, groupEnd}`
* [`XMLHttpRequest`, `fetch`](/docs/network.md#content)
* [`{set, clear}{Timeout, Interval, Immediate}, {request, cancel}AnimationFrame`](/docs/timers.md#content)

#### ECMAScript 2015 (ES6)[‚Äã](#ecmascript-2015-es6 "Direct link to ECMAScript 2015 (ES6)")

* [`Array.from`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)
* `Array.prototype.{find, findIndex}`
* [`Object.assign`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)
* `String.prototype.{startsWith, endsWith, repeat, includes}`

#### ECMAScript 2016 (ES7)[‚Äã](#ecmascript-2016-es7 "Direct link to ECMAScript 2016 (ES7)")

* `Array.prototype.includes`

#### ECMAScript 2017 (ES8)[‚Äã](#ecmascript-2017-es8 "Direct link to ECMAScript 2017 (ES8)")

* `Object.{entries, values}`

#### Specific[‚Äã](#specific "Direct link to Specific")

* `__DEV__`


---

# Keyboard

`Keyboard` module to control keyboard events.

### Usage[‚Äã](#usage "Direct link to Usage")

The Keyboard module allows you to listen for native events and react to them, as well as make changes to the keyboard, like dismissing it.

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `addListener()`[‚Äã](#addlistener "Direct link to addlistener")

tsx

```
static addListener: (
  eventType: KeyboardEventName,
  listener: KeyboardEventListener,
) => EmitterSubscription;
```

The `addListener` function connects a JavaScript function to an identified native keyboard notification event.

This function then returns the reference to the listener.

**Parameters:**

| Name              | Type     | Description                                                                    |
| ----------------- | -------- | ------------------------------------------------------------------------------ |
| eventNameRequired | string   | The string that identifies the event you're listening for. See the list below. |
| callbackRequired  | function | The function to be called when the event fires                                 |

**`eventName`**

This can be any of the following:

* `keyboardWillShow`
* `keyboardDidShow`
* `keyboardWillHide`
* `keyboardDidHide`
* `keyboardWillChangeFrame`
* `keyboardDidChangeFrame`

note

Only `keyboardDidShow` and `keyboardDidHide` events are available on Android. The events will not be fired when using Android 10 or below if your activity has `android:windowSoftInputMode` set to `adjustResize` or `adjustNothing`.

***

### `dismiss()`[‚Äã](#dismiss "Direct link to dismiss")

tsx

```
static dismiss();
```

Dismisses the active keyboard and removes focus.

***

### `scheduleLayoutAnimation`[‚Äã](#schedulelayoutanimation "Direct link to schedulelayoutanimation")

tsx

```
static scheduleLayoutAnimation(event: KeyboardEvent);
```

Useful for syncing TextInput (or other keyboard accessory view) size of position changes with keyboard movements.

***

### `isVisible()`[‚Äã](#isvisible "Direct link to isvisible")

tsx

```
static isVisible(): boolean;
```

Whether the keyboard is last known to be visible.

***

### `metrics()`[‚Äã](#metrics "Direct link to metrics")

tsx

```
static metrics(): KeyboardMetrics | undefined;
```

Return the metrics of the soft-keyboard if visible.


---

# KeyboardAvoidingView

This component will automatically adjust its height, position, or bottom padding based on the keyboard height to remain visible while the virtual keyboard is displayed.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [View Props](/docs/view.md#props)[‚Äã](#view-props "Direct link to view-props")

Inherits [View Props](/docs/view.md#props).

***

### `behavior`[‚Äã](#behavior "Direct link to behavior")

Specify how to react to the presence of the keyboard.

note

Android and iOS both interact with this prop differently. On both iOS and Android, setting `behavior` is recommended.

| Type                                        |
| ------------------------------------------- |
| enum(`'height'`, `'position'`, `'padding'`) |

***

### `contentContainerStyle`[‚Äã](#contentcontainerstyle "Direct link to contentcontainerstyle")

The style of the content container (View) when behavior is `'position'`.

| Type                                    |
| --------------------------------------- |
| [View Style](/docs/view-style-props.md) |

***

### `enabled`[‚Äã](#enabled "Direct link to enabled")

Enabled or disabled KeyboardAvoidingView.

| Type    | Default |
| ------- | ------- |
| boolean | `true`  |

***

### `keyboardVerticalOffset`[‚Äã](#keyboardverticaloffset "Direct link to keyboardverticaloffset")

This is the distance between the top of the user screen and the react native view, may be non-zero in some use cases.

| Type   | Default |
| ------ | ------- |
| number | `0`     |


---

# Layout Props

info

More detailed examples about those properties can be found on the [Layout with Flexbox](/docs/flexbox.md) page.

### Example[‚Äã](#example "Direct link to Example")

The following example shows how different properties can affect or shape a React Native layout. You can try for example to add or remove squares from the UI while changing the values of the property `flexWrap`.

* TypeScript
* JavaScript

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### `alignContent`[‚Äã](#aligncontent "Direct link to aligncontent")

`alignContent` controls how rows align in the cross direction, overriding the `alignContent` of the parent. See <https://developer.mozilla.org/en-US/docs/Web/CSS/align-content> for more details.

| Type                                                                                                 | Required |
| ---------------------------------------------------------------------------------------------------- | -------- |
| enum('flex-start', 'flex-end', 'center', 'stretch', 'space-between', 'space-around', 'space-evenly') | No       |

***

### `alignItems`[‚Äã](#alignitems "Direct link to alignitems")

`alignItems` aligns children in the cross direction. For example, if children are flowing vertically, `alignItems` controls how they align horizontally. It works like `align-items` in CSS (default: stretch). See <https://developer.mozilla.org/en-US/docs/Web/CSS/align-items> for more details.

| Type                                                            | Required |
| --------------------------------------------------------------- | -------- |
| enum('flex-start', 'flex-end', 'center', 'stretch', 'baseline') | No       |

***

### `alignSelf`[‚Äã](#alignself "Direct link to alignself")

`alignSelf` controls how a child aligns in the cross direction, overriding the `alignItems` of the parent. It works like `align-self` in CSS (default: auto). See <https://developer.mozilla.org/en-US/docs/Web/CSS/align-self> for more details.

| Type                                                                    | Required |
| ----------------------------------------------------------------------- | -------- |
| enum('auto', 'flex-start', 'flex-end', 'center', 'stretch', 'baseline') | No       |

***

### `aspectRatio`[‚Äã](#aspectratio "Direct link to aspectratio")

Aspect ratio controls the size of the undefined dimension of a node. See <https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio> for more details.

* On a node with a set width/height, aspect ratio controls the size of the unset dimension
* On a node with a set flex basis, aspect ratio controls the size of the node in the cross axis if unset
* On a node with a measure function, aspect ratio works as though the measure function measures the flex basis
* On a node with flex grow/shrink, aspect ratio controls the size of the node in the cross axis if unset
* Aspect ratio takes min/max dimensions into account

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `borderBottomWidth`[‚Äã](#borderbottomwidth "Direct link to borderbottomwidth")

`borderBottomWidth` works like `border-bottom-width` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-width> for more details.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `borderEndWidth`[‚Äã](#borderendwidth "Direct link to borderendwidth")

When direction is `ltr`, `borderEndWidth` is equivalent to `borderRightWidth`. When direction is `rtl`, `borderEndWidth` is equivalent to `borderLeftWidth`.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `borderLeftWidth`[‚Äã](#borderleftwidth "Direct link to borderleftwidth")

`borderLeftWidth` works like `border-left-width` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/border-left-width> for more details.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `borderRightWidth`[‚Äã](#borderrightwidth "Direct link to borderrightwidth")

`borderRightWidth` works like `border-right-width` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/border-right-width> for more details.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `borderStartWidth`[‚Äã](#borderstartwidth "Direct link to borderstartwidth")

When direction is `ltr`, `borderStartWidth` is equivalent to `borderLeftWidth`. When direction is `rtl`, `borderStartWidth` is equivalent to `borderRightWidth`.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `borderTopWidth`[‚Äã](#bordertopwidth "Direct link to bordertopwidth")

`borderTopWidth` works like `border-top-width` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/border-top-width> for more details.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `borderWidth`[‚Äã](#borderwidth "Direct link to borderwidth")

`borderWidth` works like `border-width` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/border-width> for more details.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `bottom`[‚Äã](#bottom "Direct link to bottom")

`bottom` is the number of logical pixels to offset the bottom edge of this component.

It works similarly to `bottom` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See <https://developer.mozilla.org/en-US/docs/Web/CSS/bottom> for more details of how `bottom` affects layout.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `boxSizing`[‚Äã](#boxsizing "Direct link to boxsizing")

`boxSizing` defines how the element's various sizing props (`width`, `height`, `minWidth`, `minHeight`, etc.) are computed. If `boxSizing` is `border-box`, these sizes apply to the border box of the element. If it is `content-box`, they apply to the content box of the element. The default value is `border-box`. The [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing) is a good source of information if you wish to learn more about how this prop works.

| Type                              | Required |
| --------------------------------- | -------- |
| enum('border-box', 'content-box') | No       |

***

### `columnGap`[‚Äã](#columngap "Direct link to columngap")

`columnGap` works like `column-gap` in CSS. Only pixel units are supported in React Native. See <https://developer.mozilla.org/en-US/docs/Web/CSS/column-gap> for more details.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `direction`[‚Äã](#direction "Direct link to direction")

`direction` specifies the directional flow of the user interface. The default is `inherit`, except for root node which will have value based on the current locale. See <https://www.yogalayout.dev/docs/styling/layout-direction> for more details.

| Type                          | Required | Platform |
| ----------------------------- | -------- | -------- |
| enum('inherit', 'ltr', 'rtl') | No       | iOS      |

***

### `display`[‚Äã](#display "Direct link to display")

`display` sets the display type of this component.

It works similarly to `display` in CSS but only supports the values 'flex', 'none', and 'contents'. The default is `flex`.

| Type                             | Required |
| -------------------------------- | -------- |
| enum('none', 'flex', 'contents') | No       |

***

### `end`[‚Äã](#end "Direct link to end")

When the direction is `ltr`, `end` is equivalent to `right`. When the direction is `rtl`, `end` is equivalent to `left`.

This style takes precedence over the `left` and `right` styles.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `flex`[‚Äã](#flex "Direct link to flex")

In React Native `flex` does not work the same way that it does in CSS. `flex` is a number rather than a string, and it works according to the [Yoga](https://github.com/facebook/yoga) layout engine.

When `flex` is a positive number, it makes the component flexible, and it will be sized proportional to its flex value. So a component with `flex` set to 2 will take twice the space as a component with `flex` set to 1. `flex: <positive number>` equates to `flexGrow: <positive number>, flexShrink: 1, flexBasis: 0`.

When `flex` is 0, the component is sized according to `width` and `height`, and it is inflexible.

When `flex` is -1, the component is normally sized according to `width` and `height`. However, if there's not enough space, the component will shrink to its `minWidth` and `minHeight`.

`flexGrow`, `flexShrink`, and `flexBasis` work the same as in CSS.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `flexBasis`[‚Äã](#flexbasis "Direct link to flexbasis")

`flexBasis` is an axis-independent way of providing the default size of an item along the main axis. Setting the `flexBasis` of a child is similar to setting the `width` of that child if its parent is a container with `flexDirection: row` or setting the `height` of a child if its parent is a container with `flexDirection: column`. The `flexBasis` of an item is the default size of that item, the size of the item before any `flexGrow` and `flexShrink` calculations are performed.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `flexDirection`[‚Äã](#flexdirection "Direct link to flexdirection")

`flexDirection` controls which directions children of a container go. `row` goes left to right, `column` goes top to bottom, and you may be able to guess what the other two do. It works like `flex-direction` in CSS, except the default is `column`. See <https://developer.mozilla.org/en-US/docs/Web/CSS/flex-direction> for more details.

| Type                                                   | Required |
| ------------------------------------------------------ | -------- |
| enum('row', 'row-reverse', 'column', 'column-reverse') | No       |

***

### `flexGrow`[‚Äã](#flexgrow "Direct link to flexgrow")

`flexGrow` describes how any space within a container should be distributed among its children along the main axis. After laying out its children, a container will distribute any remaining space according to the flex grow values specified by its children.

`flexGrow` accepts any floating point value >= 0, with 0 being the default value. A container will distribute any remaining space among its children weighted by the children‚Äôs `flexGrow` values.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `flexShrink`[‚Äã](#flexshrink "Direct link to flexshrink")

[`flexShrink`](/docs/layout-props.md#flexshrink) describes how to shrink children along the main axis in the case in which the total size of the children overflows the size of the container on the main axis. `flexShrink` is very similar to `flexGrow` and can be thought of in the same way if any overflowing size is considered to be negative remaining space. These two properties also work well together by allowing children to grow and shrink as needed.

`flexShrink` accepts any floating point value >= 0, with 0 being the default value. A container will shrink its children weighted by the children‚Äôs `flexShrink` values.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `flexWrap`[‚Äã](#flexwrap "Direct link to flexwrap")

`flexWrap` controls whether children can wrap around after they hit the end of a flex container. It works like `flex-wrap` in CSS (default: nowrap). See <https://developer.mozilla.org/en-US/docs/Web/CSS/flex-wrap> for more details. Note it does not work anymore with `alignItems: stretch` (the default), so you may want to use `alignItems: flex-start` for example (breaking change details: <https://github.com/facebook/react-native/releases/tag/v0.28.0>).

| Type                                   | Required |
| -------------------------------------- | -------- |
| enum('wrap', 'nowrap', 'wrap-reverse') | No       |

***

### `gap`[‚Äã](#gap "Direct link to gap")

`gap` works like `gap` in CSS. Only pixel units are supported in React Native. See <https://developer.mozilla.org/en-US/docs/Web/CSS/gap> for more details.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `height`[‚Äã](#height "Direct link to height")

`height` sets the height of this component.

It works similarly to `height` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported. See <https://developer.mozilla.org/en-US/docs/Web/CSS/height> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `isolation`[‚Äã](#isolation "Direct link to isolation")

`isolation` lets you form a [stacking context](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Stacking_context). This prop is only available on the [New Architecture](/architecture/landing-page.md).

There are two values:

* `auto` (default): Does nothing.
* `isolate`: Forms a stacking context.

| Type                    | Required |
| ----------------------- | -------- |
| enum('auto', 'isolate') | No       |

***

### `justifyContent`[‚Äã](#justifycontent "Direct link to justifycontent")

`justifyContent` aligns children in the main direction. For example, if children are flowing vertically, `justifyContent` controls how they align vertically. It works like `justify-content` in CSS (default: flex-start). See <https://developer.mozilla.org/en-US/docs/Web/CSS/justify-content> for more details.

| Type                                                                                      | Required |
| ----------------------------------------------------------------------------------------- | -------- |
| enum('flex-start', 'flex-end', 'center', 'space-between', 'space-around', 'space-evenly') | No       |

***

### `left`[‚Äã](#left "Direct link to left")

`left` is the number of logical pixels to offset the left edge of this component.

It works similarly to `left` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See <https://developer.mozilla.org/en-US/docs/Web/CSS/left> for more details of how `left` affects layout.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `margin`[‚Äã](#margin "Direct link to margin")

Setting `margin` has the same effect as setting each of `marginTop`, `marginLeft`, `marginBottom`, and `marginRight`. See <https://developer.mozilla.org/en-US/docs/Web/CSS/margin> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `marginBottom`[‚Äã](#marginbottom "Direct link to marginbottom")

`marginBottom` works like `margin-bottom` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/margin-bottom> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `marginEnd`[‚Äã](#marginend "Direct link to marginend")

When direction is `ltr`, `marginEnd` is equivalent to `marginRight`. When direction is `rtl`, `marginEnd` is equivalent to `marginLeft`.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `marginHorizontal`[‚Äã](#marginhorizontal "Direct link to marginhorizontal")

Setting `marginHorizontal` has the same effect as setting both `marginLeft` and `marginRight`.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `marginLeft`[‚Äã](#marginleft "Direct link to marginleft")

`marginLeft` works like `margin-left` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/margin-left> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `marginRight`[‚Äã](#marginright "Direct link to marginright")

`marginRight` works like `margin-right` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/margin-right> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `marginStart`[‚Äã](#marginstart "Direct link to marginstart")

When direction is `ltr`, `marginStart` is equivalent to `marginLeft`. When direction is `rtl`, `marginStart` is equivalent to `marginRight`.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `marginTop`[‚Äã](#margintop "Direct link to margintop")

`marginTop` works like `margin-top` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/margin-top> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `marginVertical`[‚Äã](#marginvertical "Direct link to marginvertical")

Setting `marginVertical` has the same effect as setting both `marginTop` and `marginBottom`.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `maxHeight`[‚Äã](#maxheight "Direct link to maxheight")

`maxHeight` is the maximum height for this component, in logical pixels.

It works similarly to `max-height` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See <https://developer.mozilla.org/en-US/docs/Web/CSS/max-height> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `maxWidth`[‚Äã](#maxwidth "Direct link to maxwidth")

`maxWidth` is the maximum width for this component, in logical pixels.

It works similarly to `max-width` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See <https://developer.mozilla.org/en-US/docs/Web/CSS/max-width> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `minHeight`[‚Äã](#minheight "Direct link to minheight")

`minHeight` is the minimum height for this component, in logical pixels.

It works similarly to `min-height` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See <https://developer.mozilla.org/en-US/docs/Web/CSS/min-height> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `minWidth`[‚Äã](#minwidth "Direct link to minwidth")

`minWidth` is the minimum width for this component, in logical pixels.

It works similarly to `min-width` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See <https://developer.mozilla.org/en-US/docs/Web/CSS/min-width> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `overflow`[‚Äã](#overflow "Direct link to overflow")

`overflow` controls how children are measured and displayed. `overflow: hidden` causes views to be clipped while `overflow: scroll` causes views to be measured independently of their parents' main axis. It works like `overflow` in CSS (default: visible). See <https://developer.mozilla.org/en/docs/Web/CSS/overflow> for more details.

| Type                                | Required |
| ----------------------------------- | -------- |
| enum('visible', 'hidden', 'scroll') | No       |

***

### `padding`[‚Äã](#padding "Direct link to padding")

Setting `padding` has the same effect as setting each of `paddingTop`, `paddingBottom`, `paddingLeft`, and `paddingRight`. See <https://developer.mozilla.org/en-US/docs/Web/CSS/padding> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `paddingBottom`[‚Äã](#paddingbottom "Direct link to paddingbottom")

`paddingBottom` works like `padding-bottom` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/padding-bottom> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `paddingEnd`[‚Äã](#paddingend "Direct link to paddingend")

When direction is `ltr`, `paddingEnd` is equivalent to `paddingRight`. When direction is `rtl`, `paddingEnd` is equivalent to `paddingLeft`.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `paddingHorizontal`[‚Äã](#paddinghorizontal "Direct link to paddinghorizontal")

Setting `paddingHorizontal` is like setting both of `paddingLeft` and `paddingRight`.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `paddingLeft`[‚Äã](#paddingleft "Direct link to paddingleft")

`paddingLeft` works like `padding-left` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/padding-left> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `paddingRight`[‚Äã](#paddingright "Direct link to paddingright")

`paddingRight` works like `padding-right` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/padding-right> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `paddingStart`[‚Äã](#paddingstart "Direct link to paddingstart")

When direction is `ltr`, `paddingStart` is equivalent to `paddingLeft`. When direction is `rtl`, `paddingStart` is equivalent to `paddingRight`.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `paddingTop`[‚Äã](#paddingtop "Direct link to paddingtop")

`paddingTop` works like `padding-top` in CSS. See <https://developer.mozilla.org/en-US/docs/Web/CSS/padding-top> for more details.

| Type            | Required |
| --------------- | -------- |
| number, ,string | No       |

***

### `paddingVertical`[‚Äã](#paddingvertical "Direct link to paddingvertical")

Setting `paddingVertical` is like setting both of `paddingTop` and `paddingBottom`.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `position`[‚Äã](#position "Direct link to position")

`position` in React Native is similar to [regular CSS](https://developer.mozilla.org/en-US/docs/Web/CSS/position), but everything is set to `relative` by default.

`relative` will position an element according to the normal flow of the layout. Insets (`top`, `bottom`, `left`, `right`) will offset relative to this layout.

`absolute` takes the element out of the normal flow of the layout. Insets will offset relative to its [containing block](/docs/flexbox.md#the-containing-block).

`static` will position an element according to the normal flow of the layout. Insets will have no effect. `static` elements do not form a containing block for absolute descendants.

For more information, see the [Layout with Flexbox docs](/docs/flexbox.md#position). Also, [the Yoga documentation](https://www.yogalayout.dev/docs/styling/position) has more details on how `position` differs between React Native and CSS.

| Type                                   | Required |
| -------------------------------------- | -------- |
| enum('absolute', 'relative', 'static') | No       |

***

### `right`[‚Äã](#right "Direct link to right")

`right` is the number of logical pixels to offset the right edge of this component.

It works similarly to `right` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See <https://developer.mozilla.org/en-US/docs/Web/CSS/right> for more details of how `right` affects layout.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `rowGap`[‚Äã](#rowgap "Direct link to rowgap")

`rowGap` works like `row-gap` in CSS. Only pixel units are supported in React Native. See <https://developer.mozilla.org/en-US/docs/Web/CSS/row-gap> for more details.

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `start`[‚Äã](#start "Direct link to start")

When the direction is `ltr`, `start` is equivalent to `left`. When the direction is `rtl`, `start` is equivalent to `right`.

This style takes precedence over the `left`, `right`, and `end` styles.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `top`[‚Äã](#top "Direct link to top")

`top` is the number of logical pixels to offset the top edge of this component.

It works similarly to `top` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See <https://developer.mozilla.org/en-US/docs/Web/CSS/top> for more details of how `top` affects layout.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `width`[‚Äã](#width "Direct link to width")

`width` sets the width of this component.

It works similarly to `width` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported. See <https://developer.mozilla.org/en-US/docs/Web/CSS/width> for more details.

| Type           | Required |
| -------------- | -------- |
| number, string | No       |

***

### `zIndex`[‚Äã](#zindex "Direct link to zindex")

`zIndex` controls which components display on top of others. Normally, you don't use `zIndex`. Components render according to their order in the document tree, so later components draw over earlier ones. `zIndex` may be useful if you have animations or custom modal interfaces where you don't want this behavior.

It works like the CSS `z-index` property - components with a larger `zIndex` will render on top. Think of the z-direction like it's pointing from the phone into your eyeball. See <https://developer.mozilla.org/en-US/docs/Web/CSS/z-index> for more details.

On iOS, `zIndex` may require `View`s to be siblings of each other for it to work as expected.

| Type   | Required |
| ------ | -------- |
| number | No       |

***


---

# LayoutAnimation

Automatically animates views to their new positions when the next layout happens.

A common way to use this API is to call it before updating the state hook in functional components and calling `setState` in class components.

Note that in order to get this to work on **Android** you need to set the following flags via `UIManager`:

js

```
if (Platform.OS === 'android') {
  if (UIManager.setLayoutAnimationEnabledExperimental) {
    UIManager.setLayoutAnimationEnabledExperimental(true);
  }
}
```

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `configureNext()`[‚Äã](#configurenext "Direct link to configurenext")

tsx

```
static configureNext(
  config: LayoutAnimationConfig,
  onAnimationDidEnd?: () => void,
  onAnimationDidFail?: () => void,
);
```

Schedules an animation to happen on the next layout.

#### Parameters:[‚Äã](#parameters "Direct link to Parameters:")

| Name               | Type     | Required | Description                         |
| ------------------ | -------- | -------- | ----------------------------------- |
| config             | object   | Yes      | See config description below.       |
| onAnimationDidEnd  | function | No       | Called when the animation finished. |
| onAnimationDidFail | function | No       | Called when the animation failed.   |

The `config` parameter is an object with the keys below. [`create`](/docs/layoutanimation.md#create) returns a valid object for `config`, and the [`Presets`](/docs/layoutanimation.md#presets) objects can also all be passed as the `config`.

* `duration` in milliseconds
* `create`, optional config for animating in new views
* `update`, optional config for animating views that have been updated
* `delete`, optional config for animating views as they are removed

The config that's passed to `create`, `update`, or `delete` has the following keys:

* `type`, the [animation type](/docs/layoutanimation.md#types) to use
* `property`, the [layout property](/docs/layoutanimation.md#properties) to animate (optional, but recommended for `create` and `delete`)
* `springDamping` (number, optional and only for use with `type: Type.spring`)
* `initialVelocity` (number, optional)
* `delay` (number, optional)
* `duration` (number, optional)

***

### `create()`[‚Äã](#create "Direct link to create")

tsx

```
static create(duration, type, creationProp)
```

Helper that creates an object (with `create`, `update`, and `delete` fields) to pass into [`configureNext`](/docs/layoutanimation.md#configurenext). The `type` parameter is an [animation type](/docs/layoutanimation.md#types), and the `creationProp` parameter is a [layout property](/docs/layoutanimation.md#properties).

**Example:**

## Properties[‚Äã](#properties "Direct link to Properties")

### Types[‚Äã](#types "Direct link to Types")

An enumeration of animation types to be used in the [`create`](/docs/layoutanimation.md#create) method, or in the `create`/`update`/`delete` configs for [`configureNext`](/docs/layoutanimation.md#configurenext). (example usage: `LayoutAnimation.Types.easeIn`)

| Types         |
| ------------- |
| spring        |
| linear        |
| easeInEaseOut |
| easeIn        |
| easeOut       |
| keyboard      |

***

### Properties[‚Äã](#properties-1 "Direct link to Properties")

An enumeration of layout properties to be animated to be used in the [`create`](/docs/layoutanimation.md#create) method, or in the `create`/`update`/`delete` configs for [`configureNext`](/docs/layoutanimation.md#configurenext). (example usage: `LayoutAnimation.Properties.opacity`)

| Properties |
| ---------- |
| opacity    |
| scaleX     |
| scaleY     |
| scaleXY    |

***

### Presets[‚Äã](#presets "Direct link to Presets")

A set of predefined animation configs to pass into [`configureNext`](/docs/layoutanimation.md#configurenext).

| Presets       | Value                                                                                                                                                          |
| ------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| easeInEaseOut | `create(300, 'easeInEaseOut', 'opacity')`                                                                                                                      |
| linear        | `create(500, 'linear', 'opacity')`                                                                                                                             |
| spring        | `{duration: 700, create: {type: 'linear', property: 'opacity'}, update: {type: 'spring', springDamping: 0.4}, delete: {type: 'linear', property: 'opacity'} }` |

***

### `easeInEaseOut`[‚Äã](#easeineaseout "Direct link to easeineaseout")

Calls `configureNext()` with `Presets.easeInEaseOut`.

***

### `linear`[‚Äã](#linear "Direct link to linear")

Calls `configureNext()` with `Presets.linear`.

***

### `spring`[‚Äã](#spring "Direct link to spring")

Calls `configureNext()` with `Presets.spring`.

**Example:**


---

# LayoutEvent Object Type

`LayoutEvent` object is returned in the callback as a result of component layout change, for example `onLayout` in [View](/docs/view.md) component.

## Example[‚Äã](#example "Direct link to Example")

js

```
{
    layout: {
        width: 520,
        height: 70.5,
        x: 0,
        y: 42.5
    },
    target: 1127
}
```

## Keys and values[‚Äã](#keys-and-values "Direct link to Keys and values")

### `height`[‚Äã](#height "Direct link to height")

Height of the component after the layout changes.

| Type   | Optional |
| ------ | -------- |
| number | No       |

### `width`[‚Äã](#width "Direct link to width")

Width of the component after the layout changes.

| Type   | Optional |
| ------ | -------- |
| number | No       |

### `x`[‚Äã](#x "Direct link to x")

Component X coordinate inside the parent component.

| Type   | Optional |
| ------ | -------- |
| number | No       |

### `y`[‚Äã](#y "Direct link to y")

Component Y coordinate inside the parent component.

| Type   | Optional |
| ------ | -------- |
| number | No       |

### `target`[‚Äã](#target "Direct link to target")

The node id of the element receiving the LayoutEvent.

| Type                        | Optional |
| --------------------------- | -------- |
| number, `null`, `undefined` | No       |

## Used by[‚Äã](#used-by "Direct link to Used by")

* [`Image`](/docs/image.md)
* [`Pressable`](/docs/pressable.md)
* [`ScrollView`](/docs/scrollview.md)
* [`Text`](/docs/text.md)
* [`TextInput`](/docs/textinput.md)
* [`TouchableWithoutFeedback`](/docs/touchablewithoutfeedback.md)
* [`View`](/docs/view.md)


---

# Direct Manipulation

It is sometimes necessary to make changes directly to a component without using state/props to trigger a re-render of the entire subtree. When using React in the browser for example, you sometimes need to directly modify a DOM node, and the same is true for views in mobile apps. `setNativeProps` is the React Native equivalent to setting properties directly on a DOM node.

caution

Use `setNativeProps` when frequent re-rendering creates a performance bottleneck!

Direct manipulation will not be a tool that you reach for frequently. You will typically only be using it for creating continuous animations to avoid the overhead of rendering the component hierarchy and reconciling many views. `setNativeProps` is imperative and stores state in the native layer (DOM, UIView, etc.) and not within your React components, which makes your code more difficult to reason about.

Before you use it, try to solve your problem with `setState` and [`shouldComponentUpdate`](https://react.dev/reference/react/Component#shouldcomponentupdate).

## setNativeProps with TouchableOpacity[‚Äã](#setnativeprops-with-touchableopacity "Direct link to setNativeProps with TouchableOpacity")

[TouchableOpacity](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Components/Touchable/TouchableOpacity.js) uses `setNativeProps` internally to update the opacity of its child component:

tsx

```
const viewRef = useRef<View>();
const setOpacityTo = useCallback(value => {
  // Redacted: animation related code
  viewRef.current.setNativeProps({
    opacity: value,
  });
}, []);
```

This allows us to write the following code and know that the child will have its opacity updated in response to taps, without the child having any knowledge of that fact or requiring any changes to its implementation:

tsx

```
<TouchableOpacity onPress={handlePress}>
  <View>
    <Text>Press me!</Text>
  </View>
</TouchableOpacity>
```

Let's imagine that `setNativeProps` was not available. One way that we might implement it with that constraint is to store the opacity value in the state, then update that value whenever `onPress` is fired:

tsx

```
const [buttonOpacity, setButtonOpacity] = useState(1);
return (
  <TouchableOpacity
    onPressIn={() => setButtonOpacity(0.5)}
    onPressOut={() => setButtonOpacity(1)}>
    <View style={{opacity: buttonOpacity}}>
      <Text>Press me!</Text>
    </View>
  </TouchableOpacity>
);
```

This is computationally intensive compared to the original example - React needs to re-render the component hierarchy each time the opacity changes, even though other properties of the view and its children haven't changed. Usually this overhead isn't a concern but when performing continuous animations and responding to gestures, judiciously optimizing your components can improve your animations' fidelity.

If you look at the implementation of `setNativeProps` in [NativeMethodsMixin](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Renderer/implementations/ReactNativeRenderer-prod.js) you will notice that it is a wrapper around `RCTUIManager.updateView` - this is the exact same function call that results from re-rendering - see [receiveComponent in ReactNativeBaseComponent](https://github.com/facebook/react-native/blob/fb2ec1ea47c53c2e7b873acb1cb46192ac74274e/Libraries/Renderer/oss/ReactNativeRenderer-prod.js#L5793-L5813).

## Composite components and setNativeProps[‚Äã](#composite-components-and-setnativeprops "Direct link to Composite components and setNativeProps")

Composite components are not backed by a native view, so you cannot call `setNativeProps` on them. Consider this example:

* TypeScript
* JavaScript

If you run this you will immediately see this error: `Touchable child must either be native or forward setNativeProps to a native component`. This occurs because `MyButton` isn't directly backed by a native view whose opacity should be set. You can think about it like this: if you define a component with `createReactClass` you would not expect to be able to set a style prop on it and have that work - you would need to pass the style prop down to a child, unless you are wrapping a native component. Similarly, we are going to forward `setNativeProps` to a native-backed child component.

#### Forward setNativeProps to a child[‚Äã](#forward-setnativeprops-to-a-child "Direct link to Forward setNativeProps to a child")

Since the `setNativeProps` method exists on any ref to a `View` component, it is enough to forward a ref on your custom component to one of the `<View />` components that it renders. This means that a call to `setNativeProps` on the custom component will have the same effect as if you called `setNativeProps` on the wrapped `View` component itself.

* TypeScript
* JavaScript

You can now use `MyButton` inside of `TouchableOpacity`!

You may have noticed that we passed all of the props down to the child view using `{...props}`. The reason for this is that `TouchableOpacity` is actually a composite component, and so in addition to depending on `setNativeProps` on its child, it also requires that the child perform touch handling. To do this, it passes on [various props](/docs/view.md#onmoveshouldsetresponder) that call back to the `TouchableOpacity` component. `TouchableHighlight`, in contrast, is backed by a native view and only requires that we implement `setNativeProps`.

## setNativeProps to edit TextInput value[‚Äã](#setnativeprops-to-edit-textinput-value "Direct link to setNativeProps to edit TextInput value")

Another very common use case of `setNativeProps` is to edit the value of the TextInput. The `controlled` prop of TextInput can sometimes drop characters when the `bufferDelay` is low and the user types very quickly. Some developers prefer to skip this prop entirely and instead use `setNativeProps` to directly manipulate the TextInput value when necessary. For example, the following code demonstrates editing the input when you tap a button:

* TypeScript
* JavaScript

You can use the [`clear`](/docs/textinput.md#clear) method to clear the `TextInput` which clears the current input text using the same approach.

## Avoiding conflicts with the render function[‚Äã](#avoiding-conflicts-with-the-render-function "Direct link to Avoiding conflicts with the render function")

If you update a property that is also managed by the render function, you might end up with some unpredictable and confusing bugs because anytime the component re-renders and that property changes, whatever value was previously set from `setNativeProps` will be completely ignored and overridden.

## setNativeProps & shouldComponentUpdate[‚Äã](#setnativeprops--shouldcomponentupdate "Direct link to setNativeProps & shouldComponentUpdate")

By [intelligently applying `shouldComponentUpdate`](https://react.dev/reference/react/Component#shouldcomponentupdate) you can avoid the unnecessary overhead involved in reconciling unchanged component subtrees, to the point where it may be performant enough to use `setState` instead of `setNativeProps`.

## Other native methods[‚Äã](#other-native-methods "Direct link to Other native methods")

The methods described here are available on most of the default components provided by React Native. Note, however, that they are *not* available on composite components that aren't directly backed by a native view. This will generally include most components that you define in your own app.

### measure(callback)[‚Äã](#measurecallback "Direct link to measure(callback)")

Determines the location on screen, width, and height in the viewport of the given view and returns the values via an async callback. If successful, the callback will be called with the following arguments:

* x
* y
* width
* height
* pageX
* pageY

Note that these measurements are not available until after the rendering has been completed in native. If you need the measurements as soon as possible and you don't need `pageX` and `pageY`, consider using the [`onLayout`](/docs/view.md#onlayout) property instead.

Also the width and height returned by `measure()` are the width and height of the component in the viewport. If you need the actual size of the component, consider using the [`onLayout`](/docs/view.md#onlayout) property instead.

### measureInWindow(callback)[‚Äã](#measureinwindowcallback "Direct link to measureInWindow(callback)")

Determines the location of the given view in the window and returns the values via an async callback. If the React root view is embedded in another native view, this will give you the absolute coordinates. If successful, the callback will be called with the following arguments:

* x
* y
* width
* height

### measureLayout(relativeToNativeComponentRef, onSuccess, onFail)[‚Äã](#measurelayoutrelativetonativecomponentref-onsuccess-onfail "Direct link to measureLayout(relativeToNativeComponentRef, onSuccess, onFail)")

Like `measure()`, but measures the view relative to an ancestor, specified with `relativeToNativeComponentRef` reference. This means that the returned coordinates are relative to the origin `x`, `y` of the ancestor view.

note

This method can also be called with a `relativeToNativeNode` handler (instead of reference), but this variant is obsolete with the new architecture.

* TypeScript
* JavaScript

### focus()[‚Äã](#focus "Direct link to focus()")

Requests focus for the given input or view. The exact behavior triggered will depend on the platform and type of view.

### blur()[‚Äã](#blur "Direct link to blur()")

Removes focus from an input or view. This is the opposite of `focus()`.


---

# Local libraries setup

A local library is a library containing views or modules that's local to your app and not published to a registry. This is different from the traditional setup for view and modules in the sense that a local library is decoupled from your app's native code.

The local library is created outside of the `android/` and `ios/` folders and makes use of autolinking to integrate with your app. The structure with a local library may look like this:

plaintext

```
MyApp
‚îú‚îÄ‚îÄ node_modules
‚îú‚îÄ‚îÄ modules <-- folder for your local libraries
‚îÇ ‚îî‚îÄ‚îÄ awesome-module <-- your local library
‚îú‚îÄ‚îÄ android
‚îú‚îÄ‚îÄ ios
‚îú‚îÄ‚îÄ src
‚îú‚îÄ‚îÄ index.js
‚îî‚îÄ‚îÄ package.json
```

Since a local library's code exists outside of `android/` and `ios/` folders, it makes it easier to upgrade React Native versions in the future, copy to other projects etc.

To create local library we will use [create-react-native-library](https://callstack.github.io/react-native-builder-bob/create). This tool contains all the necessary templates.

### Getting Started[‚Äã](#getting-started "Direct link to Getting Started")

Inside your React Native application's root folder, run the following command:

shell

```
npx create-react-native-library@latest awesome-module
```

Where `awesome-module` is the name you would like for the new module. After going through the prompts, you will have a new folder called `modules` in your project's root directory which contains the new module.

### Linking[‚Äã](#linking "Direct link to Linking")

By default, the generated library is automatically linked to the project using `link:` protocol when using Yarn and `file:` when using npm:

* npm
* Yarn

json

```
"dependencies": {
  "awesome-module": "file:./modules/awesome-module"
}
```

json

```
"dependencies": {
  "awesome-module": "link:./modules/awesome-module"
}
```

This creates a symlink to the library under `node_modules` which makes autolinking work.

### Installing dependencies[‚Äã](#installing-dependencies "Direct link to Installing dependencies")

To link the module you need to install dependencies:

* npm
* Yarn

shell

```
npm install
```

shell

```
yarn install
```

### Using module inside your app[‚Äã](#using-module-inside-your-app "Direct link to Using module inside your app")

To use the module inside your app, you can import it by its name:

js

```
import {multiply} from 'awesome-module';
```


---

# Android Native UI Components

info

Native Module and Native Components are our stable technologies used by the legacy architecture. They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

There are tons of native UI widgets out there ready to be used in the latest apps - some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like `ScrollView` and `TextInput`, but not all of them, and certainly not ones you might have written yourself for a previous app. Fortunately, we can wrap up these existing components for seamless integration with your React Native application.

Like the native module guide, this too is a more advanced guide that assumes you are somewhat familiar with Android SDK programming. This guide will show you how to build a native UI component, walking you through the implementation of a subset of the existing `ImageView` component available in the core React Native library.

info

You can also setup local library containing native component with one command. Read the guide to [Local libraries setup](/docs/legacy/local-library-setup.md) for more details.

## ImageView example[‚Äã](#imageview-example "Direct link to ImageView example")

For this example we are going to walk through the implementation requirements to allow the use of ImageViews in JavaScript.

Native views are created and manipulated by extending `ViewManager` or more commonly `SimpleViewManager` . A `SimpleViewManager` is convenient in this case because it applies common properties such as background color, opacity, and Flexbox layout.

These subclasses are essentially singletons - only one instance of each is created by the bridge. They send native views to the `NativeViewHierarchyManager`, which delegates back to them to set and update the properties of the views as necessary. The `ViewManagers` are also typically the delegates for the views, sending events back to JavaScript via the bridge.

To send a view:

1. Create the ViewManager subclass.
2. Implement the `createViewInstance` method
3. Expose view property setters using `@ReactProp` (or `@ReactPropGroup`) annotation
4. Register the manager in `createViewManagers` of the applications package.
5. Implement the JavaScript module

### 1. Create the `ViewManager` subclass[‚Äã](#1-create-the-viewmanager-subclass "Direct link to 1-create-the-viewmanager-subclass")

In this example we create view manager class `ReactImageManager` that extends `SimpleViewManager` of type `ReactImageView`. `ReactImageView` is the type of object managed by the manager, this will be the custom native view. Name returned by `getName` is used to reference the native view type from JavaScript.

* Java
* Kotlin

kotlin

```
class ReactImageManager(
    private val callerContext: ReactApplicationContext
) : SimpleViewManager<ReactImageView>() {

  override fun getName() = REACT_CLASS

  companion object {
    const val REACT_CLASS = "RCTImageView"
  }
}
```

java

```
public class ReactImageManager extends SimpleViewManager<ReactImageView> {

  public static final String REACT_CLASS = "RCTImageView";
  ReactApplicationContext mCallerContext;

  public ReactImageManager(ReactApplicationContext reactContext) {
    mCallerContext = reactContext;
  }

  @Override
  public String getName() {
    return REACT_CLASS;
  }
}
```

### 2. Implement method `createViewInstance`[‚Äã](#2-implement-method-createviewinstance "Direct link to 2-implement-method-createviewinstance")

Views are created in the `createViewInstance` method, the view should initialize itself in its default state, any properties will be set via a follow up call to `updateView.`

* Java
* Kotlin

kotlin

```
  override fun createViewInstance(context: ThemedReactContext) =
      ReactImageView(context, Fresco.newDraweeControllerBuilder(), null, callerContext)
```

java

```
  @Override
  public ReactImageView createViewInstance(ThemedReactContext context) {
    return new ReactImageView(context, Fresco.newDraweeControllerBuilder(), null, mCallerContext);
  }
```

### 3. Expose view property setters using `@ReactProp` (or `@ReactPropGroup`) annotation[‚Äã](#3-expose-view-property-setters-using-reactprop-or-reactpropgroup-annotation "Direct link to 3-expose-view-property-setters-using-reactprop-or-reactpropgroup-annotation")

Properties that are to be reflected in JavaScript needs to be exposed as setter method annotated with `@ReactProp` (or `@ReactPropGroup`). Setter method should take view to be updated (of the current view type) as a first argument and property value as a second argument. Setter should be public and not return a value (i.e. return type should be `void` in Java or `Unit` in Kotlin). Property type sent to JS is determined automatically based on the type of value argument of the setter. The following type of values are currently supported (in Java): `boolean`, `int`, `float`, `double`, `String`, `Boolean`, `Integer`, `ReadableArray`, `ReadableMap`. The corresponding types in Kotlin are `Boolean`, `Int`, `Float`, `Double`, `String`, `ReadableArray`, `ReadableMap`.

Annotation `@ReactProp` has one obligatory argument `name` of type `String`. Name assigned to the `@ReactProp` annotation linked to the setter method is used to reference the property on JS side.

Except from `name`, `@ReactProp` annotation may take following optional arguments: `defaultBoolean`, `defaultInt`, `defaultFloat`. Those arguments should be of the corresponding type (accordingly `boolean`, `int`, `float` in Java and `Boolean`, `Int`, `Float` in Kotlin) and the value provided will be passed to the setter method in case when the property that the setter is referencing has been removed from the component. Note that "default" values are only provided for primitive types, in case when setter is of some complex type, `null` will be provided as a default value in case when corresponding property gets removed.

Setter declaration requirements for methods annotated with `@ReactPropGroup` are different than for `@ReactProp`, please refer to the `@ReactPropGroup` annotation class docs for more information about it. **IMPORTANT!** in ReactJS updating the property value will result in setter method call. Note that one of the ways we can update component is by removing properties that have been set before. In that case setter method will be called as well to notify view manager that property has changed. In that case "default" value will be provided (for primitive types "default" value can be specified using `defaultBoolean`, `defaultFloat`, etc. arguments of `@ReactProp` annotation, for complex types setter will be called with value set to `null`).

* Java
* Kotlin

kotlin

```
  @ReactProp(name = "src")
  fun setSrc(view: ReactImageView, sources: ReadableArray?) {
    view.setSource(sources)
  }

  @ReactProp(name = "borderRadius", defaultFloat = 0f)
  override fun setBorderRadius(view: ReactImageView, borderRadius: Float) {
    view.setBorderRadius(borderRadius)
  }

  @ReactProp(name = ViewProps.RESIZE_MODE)
  fun setResizeMode(view: ReactImageView, resizeMode: String?) {
    view.setScaleType(ImageResizeMode.toScaleType(resizeMode))
  }
```

java

```
  @ReactProp(name = "src")
  public void setSrc(ReactImageView view, @Nullable ReadableArray sources) {
    view.setSource(sources);
  }

  @ReactProp(name = "borderRadius", defaultFloat = 0f)
  public void setBorderRadius(ReactImageView view, float borderRadius) {
    view.setBorderRadius(borderRadius);
  }

  @ReactProp(name = ViewProps.RESIZE_MODE)
  public void setResizeMode(ReactImageView view, @Nullable String resizeMode) {
    view.setScaleType(ImageResizeMode.toScaleType(resizeMode));
  }
```

### 4. Register the `ViewManager`[‚Äã](#4-register-the-viewmanager "Direct link to 4-register-the-viewmanager")

The final step is to register the ViewManager to the application, this happens in a similar way to [Native Modules](/docs/legacy/native-modules-android.md), via the applications package member function `createViewManagers`.

* Java
* Kotlin

kotlin

```
  override fun createViewManagers(
      reactContext: ReactApplicationContext
  ) = listOf(ReactImageManager(reactContext))
```

java

```
  @Override
  public List<ViewManager> createViewManagers(
                            ReactApplicationContext reactContext) {
    return Arrays.<ViewManager>asList(
      new ReactImageManager(reactContext)
    );
  }
```

### 5. Implement the JavaScript module[‚Äã](#5-implement-the-javascript-module "Direct link to 5. Implement the JavaScript module")

The very final step is to create the JavaScript module that defines the interface layer between Java/Kotlin and JavaScript for the users of your new view. It is recommended for you to document the component interface in this module (e.g. using TypeScript, Flow, or plain old comments).

ImageView\.tsx

```
import {requireNativeComponent} from 'react-native';

/**
 * Composes `View`.
 *
 * - src: Array<{url: string}>
 * - borderRadius: number
 * - resizeMode: 'cover' | 'contain' | 'stretch'
 */
export default requireNativeComponent('RCTImageView');
```

The `requireNativeComponent` function takes the name of the native view. Note that if your component needs to do anything more sophisticated (e.g. custom event handling), you should wrap the native component in another React component. This is illustrated in the `MyCustomView` example below.

## Events[‚Äã](#events "Direct link to Events")

So now we know how to expose native view components that we can control freely from JS, but how do we deal with events from the user, like pinch-zooms or panning? When a native event occurs the native code should issue an event to the JavaScript representation of the View, and the two views are linked with the value returned from the `getId()` method.

* Java
* Kotlin

kotlin

```
class MyCustomView(context: Context) : View(context) {
  ...
  fun onReceiveNativeEvent() {
    val event = Arguments.createMap().apply {
      putString("message", "MyMessage")
    }
    val reactContext = context as ReactContext
    reactContext
        .getJSModule(RCTEventEmitter::class.java)
        .receiveEvent(id, "topChange", event)
  }
}
```

java

```
class MyCustomView extends View {
   ...
   public void onReceiveNativeEvent() {
      WritableMap event = Arguments.createMap();
      event.putString("message", "MyMessage");
      ReactContext reactContext = (ReactContext)getContext();
      reactContext
          .getJSModule(RCTEventEmitter.class)
          .receiveEvent(getId(), "topChange", event);
    }
}
```

To map the `topChange` event name to the `onChange` callback prop in JavaScript, register it by overriding the `getExportedCustomBubblingEventTypeConstants` method in your `ViewManager`:

* Java
* Kotlin

kotlin

```
class ReactImageManager : SimpleViewManager<MyCustomView>() {
  ...
  override fun getExportedCustomBubblingEventTypeConstants(): Map<String, Any> {
    return mapOf(
      "topChange" to mapOf(
        "phasedRegistrationNames" to mapOf(
          "bubbled" to "onChange"
        )
      )
    )
  }
}
```

java

```
public class ReactImageManager extends SimpleViewManager<MyCustomView> {
    ...
    public Map getExportedCustomBubblingEventTypeConstants() {
        return MapBuilder.builder().put(
            "topChange",
            MapBuilder.of(
                "phasedRegistrationNames",
                MapBuilder.of("bubbled", "onChange")
            )
        ).build();
    }
}
```

This callback is invoked with the raw event, which we typically process in the wrapper component to make a simpler API:

MyCustomView\.tsx

```
import {useCallback} from 'react';
import {requireNativeComponent} from 'react-native';

const RCTMyCustomView = requireNativeComponent('RCTMyCustomView');

export default function MyCustomView(props: {
  // ...
  /**
   * Callback that is called continuously when the user is dragging the map.
   */
  onChangeMessage: (message: string) => unknown;
}) {
  const onChange = useCallback(
    event => {
      props.onChangeMessage?.(event.nativeEvent.message);
    },
    [props.onChangeMessage],
  );

  return <RCTMyCustomView {...props} onChange={onChange} />;
}
```

## Integration with an Android Fragment example[‚Äã](#integration-with-an-android-fragment-example "Direct link to Integration with an Android Fragment example")

In order to integrate existing Native UI elements to your React Native app, you might need to use Android Fragments to give you a more granular control over your native component than returning a `View` from your `ViewManager`. You will need this if you want to add custom logic that is tied to your view with the help of [lifecycle methods](https://developer.android.com/guide/fragments/lifecycle), such as `onViewCreated`, `onPause`, `onResume`. The following steps will show you how to do it:

### 1. Create an example custom view[‚Äã](#1-create-an-example-custom-view "Direct link to 1. Create an example custom view")

First, let's create a `CustomView` class which extends `FrameLayout` (the content of this view can be any view that you'd like to render)

* Java
* Kotlin

CustomView\.kt

```
// replace with your package
package com.mypackage

import android.content.Context
import android.graphics.Color
import android.widget.FrameLayout
import android.widget.TextView

class CustomView(context: Context) : FrameLayout(context) {
  init {
    // set padding and background color
    setPadding(16,16,16,16)
    setBackgroundColor(Color.parseColor("#5FD3F3"))

    // add default text view
    addView(TextView(context).apply {
      text = "Welcome to Android Fragments with React Native."
    })
  }
}
```

CustomView\.java

```
// replace with your package
package com.mypackage;

import android.content.Context;
import android.graphics.Color;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.TextView;

import androidx.annotation.NonNull;

public class CustomView extends FrameLayout {
  public CustomView(@NonNull Context context) {
    super(context);
    // set padding and background color
    this.setPadding(16,16,16,16);
    this.setBackgroundColor(Color.parseColor("#5FD3F3"));

    // add default text view
    TextView text = new TextView(context);
    text.setText("Welcome to Android Fragments with React Native.");
    this.addView(text);
  }
}
```

### 2. Create a `Fragment`[‚Äã](#2-create-a-fragment "Direct link to 2-create-a-fragment")

* Java
* Kotlin

MyFragment.kt

```
// replace with your package
package com.mypackage

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.Fragment

// replace with your view's import
import com.mypackage.CustomView

class MyFragment : Fragment() {
  private lateinit var customView: CustomView

  override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View {
    super.onCreateView(inflater, container, savedInstanceState)
    customView = CustomView(requireNotNull(context))
    return customView // this CustomView could be any view that you want to render
  }

  override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
    super.onViewCreated(view, savedInstanceState)
    // do any logic that should happen in an `onCreate` method, e.g:
    // customView.onCreate(savedInstanceState);
  }

  override fun onPause() {
    super.onPause()
    // do any logic that should happen in an `onPause` method
    // e.g.: customView.onPause();
  }

  override fun onResume() {
    super.onResume()
    // do any logic that should happen in an `onResume` method
    // e.g.: customView.onResume();
  }

  override fun onDestroy() {
    super.onDestroy()
    // do any logic that should happen in an `onDestroy` method
    // e.g.: customView.onDestroy();
  }
}
```

MyFragment.java

```
// replace with your package
package com.mypackage;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import androidx.fragment.app.Fragment;

// replace with your view's import
import com.mypackage.CustomView;

public class MyFragment extends Fragment {
    CustomView customView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
        super.onCreateView(inflater, parent, savedInstanceState);
        customView = new CustomView(this.getContext());
        return customView; // this CustomView could be any view that you want to render
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        // do any logic that should happen in an `onCreate` method, e.g:
        // customView.onCreate(savedInstanceState);
    }

    @Override
    public void onPause() {
        super.onPause();
        // do any logic that should happen in an `onPause` method
        // e.g.: customView.onPause();
    }

    @Override
    public void onResume() {
        super.onResume();
       // do any logic that should happen in an `onResume` method
       // e.g.: customView.onResume();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        // do any logic that should happen in an `onDestroy` method
        // e.g.: customView.onDestroy();
    }
}
```

### 3. Create the `ViewManager` subclass[‚Äã](#3-create-the-viewmanager-subclass "Direct link to 3-create-the-viewmanager-subclass")

* Java
* Kotlin

MyViewManager.kt

```
// replace with your package
package com.mypackage

import android.view.Choreographer
import android.view.View
import android.view.ViewGroup
import android.widget.FrameLayout
import androidx.fragment.app.FragmentActivity
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.bridge.ReadableArray
import com.facebook.react.uimanager.ThemedReactContext
import com.facebook.react.uimanager.ViewGroupManager
import com.facebook.react.uimanager.annotations.ReactPropGroup

class MyViewManager(
    private val reactContext: ReactApplicationContext
) : ViewGroupManager<FrameLayout>() {
  private var propWidth: Int? = null
  private var propHeight: Int? = null

  override fun getName() = REACT_CLASS

  /**
   * Return a FrameLayout which will later hold the Fragment
   */
  override fun createViewInstance(reactContext: ThemedReactContext) =
      FrameLayout(reactContext)

  /**
   * Map the "create" command to an integer
   */
  override fun getCommandsMap() = mapOf("create" to COMMAND_CREATE)

  /**
   * Handle "create" command (called from JS) and call createFragment method
   */
  override fun receiveCommand(
      root: FrameLayout,
      commandId: String,
      args: ReadableArray?
  ) {
    super.receiveCommand(root, commandId, args)
    val reactNativeViewId = requireNotNull(args).getInt(0)

    when (commandId.toInt()) {
      COMMAND_CREATE -> createFragment(root, reactNativeViewId)
    }
  }

  @ReactPropGroup(names = ["width", "height"], customType = "Style")
  fun setStyle(view: FrameLayout, index: Int, value: Int) {
    if (index == 0) propWidth = value
    if (index == 1) propHeight = value
  }

  /**
   * Replace your React Native view with a custom fragment
   */
  fun createFragment(root: FrameLayout, reactNativeViewId: Int) {
    val parentView = root.findViewById<ViewGroup>(reactNativeViewId)
    setupLayout(parentView)

    val myFragment = MyFragment()
    val activity = reactContext.currentActivity as FragmentActivity
    activity.supportFragmentManager
        .beginTransaction()
        .replace(reactNativeViewId, myFragment, reactNativeViewId.toString())
        .commit()
  }

  fun setupLayout(view: View) {
    Choreographer.getInstance().postFrameCallback(object: Choreographer.FrameCallback {
      override fun doFrame(frameTimeNanos: Long) {
        manuallyLayoutChildren(view)
        view.viewTreeObserver.dispatchOnGlobalLayout()
        Choreographer.getInstance().postFrameCallback(this)
      }
    })
  }

  /**
   * Layout all children properly
   */
  private fun manuallyLayoutChildren(view: View) {
    // propWidth and propHeight coming from react-native props
    val width = requireNotNull(propWidth)
    val height = requireNotNull(propHeight)

    view.measure(
        View.MeasureSpec.makeMeasureSpec(width, View.MeasureSpec.EXACTLY),
        View.MeasureSpec.makeMeasureSpec(height, View.MeasureSpec.EXACTLY))

    view.layout(0, 0, width, height)
  }

  companion object {
    private const val REACT_CLASS = "MyViewManager"
    private const val COMMAND_CREATE = 1
  }
}
```

MyViewManager.java

```
// replace with your package
package com.mypackage;

import android.view.Choreographer;
import android.view.View;
import android.view.ViewGroup;
import android.widget.FrameLayout;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.FragmentActivity;

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReadableArray;
import com.facebook.react.common.MapBuilder;
import com.facebook.react.uimanager.annotations.ReactProp;
import com.facebook.react.uimanager.annotations.ReactPropGroup;
import com.facebook.react.uimanager.ViewGroupManager;
import com.facebook.react.uimanager.ThemedReactContext;

import java.util.Map;

public class MyViewManager extends ViewGroupManager<FrameLayout> {

  public static final String REACT_CLASS = "MyViewManager";
  public final int COMMAND_CREATE = 1;
  private int propWidth;
  private int propHeight;

  ReactApplicationContext reactContext;

  public MyViewManager(ReactApplicationContext reactContext) {
    this.reactContext = reactContext;
  }

  @Override
  public String getName() {
    return REACT_CLASS;
  }

  /**
   * Return a FrameLayout which will later hold the Fragment
   */
  @Override
  public FrameLayout createViewInstance(ThemedReactContext reactContext) {
    return new FrameLayout(reactContext);
  }

  /**
   * Map the "create" command to an integer
   */
  @Nullable
  @Override
  public Map<String, Integer> getCommandsMap() {
    return MapBuilder.of("create", COMMAND_CREATE);
  }

  /**
   * Handle "create" command (called from JS) and call createFragment method
   */
  @Override
  public void receiveCommand(
    @NonNull FrameLayout root,
    String commandId,
    @Nullable ReadableArray args
  ) {
    super.receiveCommand(root, commandId, args);
    int reactNativeViewId = args.getInt(0);
    int commandIdInt = Integer.parseInt(commandId);

    switch (commandIdInt) {
      case COMMAND_CREATE:
        createFragment(root, reactNativeViewId);
        break;
      default: {}
    }
  }

  @ReactPropGroup(names = {"width", "height"}, customType = "Style")
  public void setStyle(FrameLayout view, int index, Integer value) {
    if (index == 0) {
      propWidth = value;
    }

    if (index == 1) {
      propHeight = value;
    }
  }

  /**
   * Replace your React Native view with a custom fragment
   */
  public void createFragment(FrameLayout root, int reactNativeViewId) {
    ViewGroup parentView = (ViewGroup) root.findViewById(reactNativeViewId);
    setupLayout(parentView);

    final MyFragment myFragment = new MyFragment();
    FragmentActivity activity = (FragmentActivity) reactContext.getCurrentActivity();
    activity.getSupportFragmentManager()
            .beginTransaction()
            .replace(reactNativeViewId, myFragment, String.valueOf(reactNativeViewId))
            .commit();
  }

  public void setupLayout(View view) {
    Choreographer.getInstance().postFrameCallback(new Choreographer.FrameCallback() {
      @Override
      public void doFrame(long frameTimeNanos) {
        manuallyLayoutChildren(view);
        view.getViewTreeObserver().dispatchOnGlobalLayout();
        Choreographer.getInstance().postFrameCallback(this);
      }
    });
  }

  /**
   * Layout all children properly
   */
  public void manuallyLayoutChildren(View view) {
      // propWidth and propHeight coming from react-native props
      int width = propWidth;
      int height = propHeight;

      view.measure(
              View.MeasureSpec.makeMeasureSpec(width, View.MeasureSpec.EXACTLY),
              View.MeasureSpec.makeMeasureSpec(height, View.MeasureSpec.EXACTLY));

      view.layout(0, 0, width, height);
  }
}
```

### 4. Register the `ViewManager`[‚Äã](#4-register-the-viewmanager-1 "Direct link to 4-register-the-viewmanager-1")

* Java
* Kotlin

MyPackage.kt

```
// replace with your package
package com.mypackage

import com.facebook.react.ReactPackage
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.uimanager.ViewManager

class MyPackage : ReactPackage {
  ...
  override fun createViewManagers(
      reactContext: ReactApplicationContext
  ) = listOf(MyViewManager(reactContext))
}
```

MyPackage.java

```
// replace with your package
package com.mypackage;

import com.facebook.react.ReactPackage;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.uimanager.ViewManager;

import java.util.Arrays;
import java.util.List;

public class MyPackage implements ReactPackage {

   @Override
   public List<ViewManager> createViewManagers(ReactApplicationContext reactContext) {
       return Arrays.<ViewManager>asList(
            new MyViewManager(reactContext)
       );
   }

}
```

### 5. Register the `Package`[‚Äã](#5-register-the-package "Direct link to 5-register-the-package")

* Java
* Kotlin

MainApplication.kt

```
override fun getPackages(): List<ReactPackage> =
    PackageList(this).packages.apply {
        // Packages that cannot be autolinked yet can be added manually here, for example:
        // add(MyReactNativePackage())
        add(MyAppPackage())
    }
```

MainApplication.java

```
@Override
protected List<ReactPackage> getPackages() {
    List<ReactPackage> packages = new PackageList(this).getPackages();
    // Packages that cannot be autolinked yet can be added manually here, for example:
    // packages.add(new MyReactNativePackage());
    packages.add(new MyAppPackage());
    return packages;
}
```

### 6. Implement the JavaScript module[‚Äã](#6-implement-the-javascript-module "Direct link to 6. Implement the JavaScript module")

I. Start with custom View manager:

MyViewManager.tsx

```
import {requireNativeComponent} from 'react-native';

export const MyViewManager =
  requireNativeComponent('MyViewManager');
```

II. Then implement custom View calling the `create` method:

MyView\.tsx

```
import React, {useEffect, useRef} from 'react';
import {
  PixelRatio,
  UIManager,
  findNodeHandle,
} from 'react-native';

import {MyViewManager} from './my-view-manager';

const createFragment = viewId =>
  UIManager.dispatchViewManagerCommand(
    viewId,
    // we are calling the 'create' command
    UIManager.MyViewManager.Commands.create.toString(),
    [viewId],
  );

export const MyView = () => {
  const ref = useRef(null);

  useEffect(() => {
    const viewId = findNodeHandle(ref.current);
    createFragment(viewId);
  }, []);

  return (
    <MyViewManager
      style={{
        // converts dpi to px, provide desired height
        height: PixelRatio.getPixelSizeForLayoutSize(200),
        // converts dpi to px, provide desired width
        width: PixelRatio.getPixelSizeForLayoutSize(200),
      }}
      ref={ref}
    />
  );
};
```

If you want to expose property setters using `@ReactProp` (or `@ReactPropGroup`) annotation see the [ImageView example](#imageview-example) above.


---

# iOS Native UI Components

info

Native Module and Native Components are our stable technologies used by the legacy architecture. They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

There are tons of native UI widgets out there ready to be used in the latest apps - some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like `ScrollView` and `TextInput`, but not all of them, and certainly not ones you might have written yourself for a previous app. Fortunately, we can wrap up these existing components for seamless integration with your React Native application.

Like the native module guide, this too is a more advanced guide that assumes you are somewhat familiar with iOS programming. This guide will show you how to build a native UI component, walking you through the implementation of a subset of the existing `MapView` component available in the core React Native library.

## iOS MapView example[‚Äã](#ios-mapview-example "Direct link to iOS MapView example")

Let's say we want to add an interactive Map to our app - might as well use [`MKMapView`](https://developer.apple.com/library/prerelease/mac/documentation/MapKit/Reference/MKMapView_Class/index.html), we only need to make it usable from JavaScript.

Native views are created and manipulated by subclasses of `RCTViewManager`. These subclasses are similar in function to view controllers, but are essentially singletons - only one instance of each is created by the bridge. They expose native views to the `RCTUIManager`, which delegates back to them to set and update the properties of the views as necessary. The `RCTViewManager`s are also typically the delegates for the views, sending events back to JavaScript via the bridge.

To expose a view you can:

* Subclass `RCTViewManager` to create a manager for your component.
* Add the `RCT_EXPORT_MODULE()` marker macro.
* Implement the `-(UIView *)view` method.

RNTMapManager.m

```
#import <MapKit/MapKit.h>

#import <React/RCTViewManager.h>

@interface RNTMapManager : RCTViewManager
@end

@implementation RNTMapManager

RCT_EXPORT_MODULE(RNTMap)

- (UIView *)view
{
  return [[MKMapView alloc] init];
}

@end
```

note

Do not attempt to set the `frame` or `backgroundColor` properties on the `UIView` instance that you expose through the `-view` method. React Native will overwrite the values set by your custom class in order to match your JavaScript component's layout props. If you need this granularity of control it might be better to wrap the `UIView` instance you want to style in another `UIView` and return the wrapper `UIView` instead. See [Issue 2948](https://github.com/facebook/react-native/issues/2948) for more context.

info

In the example above, we prefixed our class name with `RNT`. Prefixes are used to avoid name collisions with other frameworks. Apple frameworks use two-letter prefixes, and React Native uses `RCT` as a prefix. In order to avoid name collisions, we recommend using a three-letter prefix other than `RCT` in your own classes.

Then you need a little bit of JavaScript to make this a usable React component:

MapView\.tsx

```
import {requireNativeComponent} from 'react-native';

export default requireNativeComponent('RNTMap');
```

The `requireNativeComponent` function automatically resolves `RNTMap` to `RNTMapManager` and exports our native view for use in JavaScript.

MyApp.tsx

```
import MapView from './MapView.tsx';

export default function MyApp() {
  return <MapView style={{flex: 1}} />;
}
```

note

When rendering, don't forget to stretch the view, otherwise you'll be staring at a blank screen.

This is now a fully-functioning native map view component in JavaScript, complete with pinch-zoom and other native gesture support. We can't really control it from JavaScript yet, though.

## Properties[‚Äã](#properties "Direct link to Properties")

The first thing we can do to make this component more usable is to bridge over some native properties. Let's say we want to be able to disable zooming and specify the visible region. Disabling zoom is a boolean, so we add this one line:

RNTMapManager.m

```
RCT_EXPORT_VIEW_PROPERTY(zoomEnabled, BOOL)
```

Note that we explicitly specify the type as `BOOL` - React Native uses `RCTConvert` under the hood to convert all sorts of different data types when talking over the bridge, and bad values will show convenient "RedBox" errors to let you know there is an issue ASAP. When things are straightforward like this, the whole implementation is taken care of for you by this macro.

Now to actually disable zooming, we set the property in JavaScript:

MyApp.tsx

```
import MapView from './MapView.tsx';

export default function MyApp() {
  return <MapView zoomEnabled={false} style={{flex: 1}} />;
}
```

To document the properties (and which values they accept) of our MapView component we'll add a wrapper component and document the interface with TypeScript:

MapView\.tsx

```
import {requireNativeComponent} from 'react-native';

const RNTMap = requireNativeComponent('RNTMap');

export default function MapView(props: {
  /**
   * Whether the user may use pinch gestures to zoom in and out.
   */
  zoomEnabled?: boolean;
}) {
  return <RNTMap {...props} />;
}
```

Now we have a nicely documented wrapper component to work with.

Next, let's add the more complex `region` prop. We start by adding the native code:

RNTMapManager.m

```
RCT_CUSTOM_VIEW_PROPERTY(region, MKCoordinateRegion, MKMapView)
{
  [view setRegion:json ? [RCTConvert MKCoordinateRegion:json] : defaultView.region animated:YES];
}
```

Ok, this is more complicated than the `BOOL` case we had before. Now we have a `MKCoordinateRegion` type that needs a conversion function, and we have custom code so that the view will animate when we set the region from JS. Within the function body that we provide, `json` refers to the raw value that has been passed from JS. There is also a `view` variable which gives us access to the manager's view instance, and a `defaultView` that we use to reset the property back to the default value if JS sends us a null sentinel.

You could write any conversion function you want for your view - here is the implementation for `MKCoordinateRegion` via a category on `RCTConvert`. It uses an already existing category of ReactNative `RCTConvert+CoreLocation`:

RNTMapManager.m

```
#import "RCTConvert+Mapkit.h"
```

RCTConvert+Mapkit.h

```
#import <MapKit/MapKit.h>
#import <React/RCTConvert.h>
#import <CoreLocation/CoreLocation.h>
#import <React/RCTConvert+CoreLocation.h>

@interface RCTConvert (Mapkit)

+ (MKCoordinateSpan)MKCoordinateSpan:(id)json;
+ (MKCoordinateRegion)MKCoordinateRegion:(id)json;

@end

@implementation RCTConvert(MapKit)

+ (MKCoordinateSpan)MKCoordinateSpan:(id)json
{
  json = [self NSDictionary:json];
  return (MKCoordinateSpan){
    [self CLLocationDegrees:json[@"latitudeDelta"]],
    [self CLLocationDegrees:json[@"longitudeDelta"]]
  };
}

+ (MKCoordinateRegion)MKCoordinateRegion:(id)json
{
  return (MKCoordinateRegion){
    [self CLLocationCoordinate2D:json],
    [self MKCoordinateSpan:json]
  };
}

@end
```

These conversion functions are designed to safely process any JSON that the JS might throw at them by displaying "RedBox" errors and returning standard initialization values when missing keys or other developer errors are encountered.

To finish up support for the `region` prop, we can document it with TypeScript:

MapView\.tsx

```
import {requireNativeComponent} from 'react-native';

const RNTMap = requireNativeComponent('RNTMap');

export default function MapView(props: {
  /**
   * The region to be displayed by the map.
   *
   * The region is defined by the center coordinates and the span of
   * coordinates to display.
   */
  region?: {
    /**
     * Coordinates for the center of the map.
     */
    latitude: number;
    longitude: number;

    /**
     * Distance between the minimum and the maximum latitude/longitude
     * to be displayed.
     */
    latitudeDelta: number;
    longitudeDelta: number;
  };
  /**
   * Whether the user may use pinch gestures to zoom in and out.
   */
  zoomEnabled?: boolean;
}) {
  return <RNTMap {...props} />;
}
```

We can now supply the `region` prop to `MapView`:

MyApp.tsx

```
import MapView from './MapView.tsx';

export default function MyApp() {
  const region = {
    latitude: 37.48,
    longitude: -122.16,
    latitudeDelta: 0.1,
    longitudeDelta: 0.1,
  };
  return (
    <MapView
      region={region}
      zoomEnabled={false}
      style={{flex: 1}}
    />
  );
}
```

## Events[‚Äã](#events "Direct link to Events")

So now we have a native map component that we can control freely from JS, but how do we deal with events from the user, like pinch-zooms or panning to change the visible region?

Until now we've only returned a `MKMapView` instance from our manager's `-(UIView *)view` method. We can't add new properties to `MKMapView` so we have to create a new subclass from `MKMapView` which we use for our View. We can then add a `onRegionChange` callback on this subclass:

RNTMapView\.h

```
#import <MapKit/MapKit.h>

#import <React/RCTComponent.h>

@interface RNTMapView: MKMapView

@property (nonatomic, copy) RCTBubblingEventBlock onRegionChange;

@end
```

RNTMapView\.m

```
#import "RNTMapView.h"

@implementation RNTMapView

@end
```

Note that all `RCTBubblingEventBlock` must be prefixed with `on`. Next, declare an event handler property on `RNTMapManager`, make it a delegate for all the views it exposes, and forward events to JS by calling the event handler block from the native view.

RNTMapManager.m

```
#import <MapKit/MapKit.h>
#import <React/RCTViewManager.h>

#import "RNTMapView.h"
#import "RCTConvert+Mapkit.h"

@interface RNTMapManager : RCTViewManager <MKMapViewDelegate>
@end

@implementation RNTMapManager

RCT_EXPORT_MODULE()

RCT_EXPORT_VIEW_PROPERTY(zoomEnabled, BOOL)
RCT_EXPORT_VIEW_PROPERTY(onRegionChange, RCTBubblingEventBlock)

RCT_CUSTOM_VIEW_PROPERTY(region, MKCoordinateRegion, MKMapView)
{
  [view setRegion:json ? [RCTConvert MKCoordinateRegion:json] : defaultView.region animated:YES];
}

- (UIView *)view
{
  RNTMapView *map = [RNTMapView new];
  map.delegate = self;
  return map;
}

#pragma mark MKMapViewDelegate

- (void)mapView:(RNTMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
  if (!mapView.onRegionChange) {
    return;
  }

  MKCoordinateRegion region = mapView.region;
  mapView.onRegionChange(@{
    @"region": @{
      @"latitude": @(region.center.latitude),
      @"longitude": @(region.center.longitude),
      @"latitudeDelta": @(region.span.latitudeDelta),
      @"longitudeDelta": @(region.span.longitudeDelta),
    }
  });
}
@end
```

In the delegate method `-mapView:regionDidChangeAnimated:` the event handler block is called on the corresponding view with the region data. Calling the `onRegionChange` event handler block results in calling the same callback prop in JavaScript. This callback is invoked with the raw event, which we typically process in the wrapper component to simplify the API:

MapView\.tsx

```
// ...

type RegionChangeEvent = {
  nativeEvent: {
    latitude: number;
    longitude: number;
    latitudeDelta: number;
    longitudeDelta: number;
  };
};

export default function MapView(props: {
  // ...
  /**
   * Callback that is called continuously when the user is dragging the map.
   */
  onRegionChange: (event: RegionChangeEvent) => unknown;
}) {
  return <RNTMap {...props} onRegionChange={onRegionChange} />;
}
```

MyApp.tsx

```
import MapView from './MapView.tsx';

export default function MyApp() {
  // ...

  const onRegionChange = useCallback(event => {
    const {region} = event.nativeEvent;
    // Do something with `region.latitude`, etc.
  });

  return (
    <MapView
      // ...
      onRegionChange={onRegionChange}
    />
  );
}
```

## Handling multiple native views[‚Äã](#handling-multiple-native-views "Direct link to Handling multiple native views")

A React Native view can have more than one child view in the view tree eg.

tsx

```
<View>
  <MyNativeView />
  <MyNativeView />
  <Button />
</View>
```

In this example, the class `MyNativeView` is a wrapper for a `NativeComponent` and exposes methods, which will be called on the iOS platform. `MyNativeView` is defined in `MyNativeView.ios.js` and contains proxy methods of `NativeComponent`.

When the user interacts with the component, like clicking the button, the `backgroundColor` of `MyNativeView` changes. In this case `UIManager` would not know which `MyNativeView` should be handled and which one should change `backgroundColor`. Below you will find a solution to this problem:

tsx

```
<View>
  <MyNativeView ref={this.myNativeReference} />
  <MyNativeView ref={this.myNativeReference2} />
  <Button
    onPress={() => {
      this.myNativeReference.callNativeMethod();
    }}
  />
</View>
```

Now the above component has a reference to a particular `MyNativeView` which allows us to use a specific instance of `MyNativeView`. Now the button can control which `MyNativeView` should change its `backgroundColor`. In this example let's assume that `callNativeMethod` changes `backgroundColor`.

MyNativeView\.ios.tsx

```
class MyNativeView extends React.Component {
  callNativeMethod = () => {
    UIManager.dispatchViewManagerCommand(
      ReactNative.findNodeHandle(this),
      UIManager.getViewManagerConfig('RNCMyNativeView').Commands
        .callNativeMethod,
      [],
    );
  };

  render() {
    return <NativeComponent ref={NATIVE_COMPONENT_REF} />;
  }
}
```

`callNativeMethod` is our custom iOS method which for example changes the `backgroundColor` which is exposed through `MyNativeView`. This method uses `UIManager.dispatchViewManagerCommand` which needs 3 parameters:

* `(nonnull NSNumber \*)reactTag`‚Ää -‚Ää id of react view.
* `commandID:(NSInteger)commandID`‚Ää -‚Ää Id of the native method that should be called
* `commandArgs:(NSArray<id> \*)commandArgs`‚Ää -‚Ää Args of the native method that we can pass from JS to native.

RNCMyNativeViewManager.m

```
#import <React/RCTViewManager.h>
#import <React/RCTUIManager.h>
#import <React/RCTLog.h>

RCT_EXPORT_METHOD(callNativeMethod:(nonnull NSNumber*) reactTag) {
    [self.bridge.uiManager addUIBlock:^(RCTUIManager *uiManager, NSDictionary<NSNumber *,UIView *> *viewRegistry) {
        NativeView *view = viewRegistry[reactTag];
        if (!view || ![view isKindOfClass:[NativeView class]]) {
            RCTLogError(@"Cannot find NativeView with tag #%@", reactTag);
            return;
        }
        [view callNativeMethod];
    }];

}
```

Here the `callNativeMethod` is defined in the `RNCMyNativeViewManager.m` file and contains only one parameter which is `(nonnull NSNumber*) reactTag`. This exported function will find a particular view using `addUIBlock` which contains the `viewRegistry` parameter and returns the component based on `reactTag` allowing it to call the method on the correct component.

## Styles[‚Äã](#styles "Direct link to Styles")

Since all our native react views are subclasses of `UIView`, most style attributes will work like you would expect out of the box. Some components will want a default style, however, for example `UIDatePicker` which is a fixed size. This default style is important for the layout algorithm to work as expected, but we also want to be able to override the default style when using the component. `DatePickerIOS` does this by wrapping the native component in an extra view, which has flexible styling, and using a fixed style (which is generated with constants passed in from native) on the inner native component:

DatePickerIOS.ios.tsx

```
import {UIManager} from 'react-native';
const RCTDatePickerIOSConsts = UIManager.RCTDatePicker.Constants;
...
  render: function() {
    return (
      <View style={this.props.style}>
        <RCTDatePickerIOS
          ref={DATEPICKER}
          style={styles.rkDatePickerIOS}
          ...
        />
      </View>
    );
  }
});

const styles = StyleSheet.create({
  rkDatePickerIOS: {
    height: RCTDatePickerIOSConsts.ComponentHeight,
    width: RCTDatePickerIOSConsts.ComponentWidth,
  },
});
```

The `RCTDatePickerIOSConsts` constants are exported from native by grabbing the actual frame of the native component like so:

RCTDatePickerManager.m

```
- (NSDictionary *)constantsToExport
{
  UIDatePicker *dp = [[UIDatePicker alloc] init];
  [dp layoutIfNeeded];

  return @{
    @"ComponentHeight": @(CGRectGetHeight(dp.frame)),
    @"ComponentWidth": @(CGRectGetWidth(dp.frame)),
    @"DatePickerModes": @{
      @"time": @(UIDatePickerModeTime),
      @"date": @(UIDatePickerModeDate),
      @"datetime": @(UIDatePickerModeDateAndTime),
    }
  };
}
```

This guide covered many of the aspects of bridging over custom native components, but there is even more you might need to consider, such as custom hooks for inserting and laying out subviews. If you want to go even deeper, check out the [source code](https://github.com/facebook/react-native/tree/main/packages/react-native/React/Views) of some of the implemented components.


---

# Android Native Modules

info

Native Module and Native Components are our stable technologies used by the legacy architecture. They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

Welcome to Native Modules for Android. Please start by reading the [Native Modules Intro](/docs/legacy/native-modules-intro.md) for an intro to what native modules are.

## Create a Calendar Native Module[‚Äã](#create-a-calendar-native-module "Direct link to Create a Calendar Native Module")

In the following guide you will create a native module, `CalendarModule`, that will allow you to access Android‚Äôs calendar APIs from JavaScript. By the end, you will be able to call `CalendarModule.createCalendarEvent('Dinner Party', 'My House');` from JavaScript, invoking a Java/Kotlin method that creates a calendar event.

### Setup[‚Äã](#setup "Direct link to Setup")

To get started, open up the Android project within your React Native application in Android Studio. You can find your Android project here within a React Native app:

![Image of opening up an Android project within a React Native app inside of Android Studio.](/docs/assets/native-modules-android-open-project.png)

Image of where you can find your Android project

We recommend using Android Studio to write your native code. Android Studio is an IDE built for Android development and using it will help you resolve minor issues like code syntax errors quickly.

We also recommend enabling [Gradle Daemon](https://docs.gradle.org/2.9/userguide/gradle_daemon.html) to speed up builds as you iterate on Java/Kotlin code.

### Create A Custom Native Module File[‚Äã](#create-a-custom-native-module-file "Direct link to Create A Custom Native Module File")

The first step is to create the (`CalendarModule.java` or `CalendarModule.kt`) Java/Kotlin file inside `android/app/src/main/java/com/your-app-name/` folder (the folder is the same for both Kotlin and Java). This Java/Kotlin file will contain your native module Java/Kotlin class.

![Image of adding a class called CalendarModule.java within the Android Studio.](/docs/assets/native-modules-android-add-class.png)

Image of how to add the CalendarModuleClass

Then add the following content:

* Java
* Kotlin

java

```
package com.your-apps-package-name; // replace your-apps-package-name with your app‚Äôs package name
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactContext;
import com.facebook.react.bridge.ReactContextBaseJavaModule;
import com.facebook.react.bridge.ReactMethod;
import java.util.Map;
import java.util.HashMap;

public class CalendarModule extends ReactContextBaseJavaModule {
   CalendarModule(ReactApplicationContext context) {
       super(context);
   }
}
```

kotlin

```
package com.your-apps-package-name; // replace your-apps-package-name with your app‚Äôs package name
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.bridge.ReactContext
import com.facebook.react.bridge.ReactContextBaseJavaModule
import com.facebook.react.bridge.ReactMethod

class CalendarModule(reactContext: ReactApplicationContext) : ReactContextBaseJavaModule(reactContext) {...}
```

As you can see, your `CalendarModule` class extends the `ReactContextBaseJavaModule` class. For Android, Java/Kotlin native modules are written as classes that extend `ReactContextBaseJavaModule` and implement the functionality required by JavaScript.

note

It is worth noting that technically Java/Kotlin classes only need to extend the `BaseJavaModule` class or implement the `NativeModule` interface to be considered a Native Module by React Native.

However we recommend that you use `ReactContextBaseJavaModule`, as shown above. `ReactContextBaseJavaModule` gives access to the `ReactApplicationContext` (RAC), which is useful for Native Modules that need to hook into activity lifecycle methods. Using `ReactContextBaseJavaModule` will also make it easier to make your native module type-safe in the future. For native module type-safety, which is coming in future releases, React Native looks at each native module's JavaScript spec and generates an abstract base class that extends `ReactContextBaseJavaModule`.

### Module Name[‚Äã](#module-name "Direct link to Module Name")

All Java/Kotlin native modules in Android need to implement the `getName()` method. This method returns a string, which represents the name of the native module. The native module can then be accessed in JavaScript using its name. For example, in the below code snippet, `getName()` returns `"CalendarModule"`.

* Java
* Kotlin

java

```
// add to CalendarModule.java
@Override
public String getName() {
   return "CalendarModule";
}
```

kotlin

```
// add to CalendarModule.kt
override fun getName() = "CalendarModule"
```

The native module can then be accessed in JS like this:

tsx

```
const {CalendarModule} = ReactNative.NativeModules;
```

### Export a Native Method to JavaScript[‚Äã](#export-a-native-method-to-javascript "Direct link to Export a Native Method to JavaScript")

Next you will need to add a method to your native module that will create calendar events and can be invoked in JavaScript. All native module methods meant to be invoked from JavaScript must be annotated with `@ReactMethod`.

Set up a method `createCalendarEvent()` for `CalendarModule` that can be invoked in JS through `CalendarModule.createCalendarEvent()`. For now, the method will take in a name and location as strings. Argument type options will be covered shortly.

* Java
* Kotlin

java

```
@ReactMethod
public void createCalendarEvent(String name, String location) {
}
```

kotlin

```
@ReactMethod fun createCalendarEvent(name: String, location: String) {}
```

Add a debug log in the method to confirm it has been invoked when you call it from your application. Below is an example of how you can import and use the [Log](https://developer.android.com/reference/android/util/Log) class from the Android util package:

* Java
* Kotlin

java

```
import android.util.Log;

@ReactMethod
public void createCalendarEvent(String name, String location) {
   Log.d("CalendarModule", "Create event called with name: " + name
   + " and location: " + location);
}
```

kotlin

```
import android.util.Log

@ReactMethod
fun createCalendarEvent(name: String, location: String) {
    Log.d("CalendarModule", "Create event called with name: $name and location: $location")
}
```

Once you finish implementing the native module and hook it up in JavaScript, you can follow [these steps](https://developer.android.com/studio/debug/am-logcat.html) to view the logs from your app.

### Synchronous Methods[‚Äã](#synchronous-methods "Direct link to Synchronous Methods")

You can pass `isBlockingSynchronousMethod = true` to a native method to mark it as a synchronous method.

* Java
* Kotlin

java

```
@ReactMethod(isBlockingSynchronousMethod = true)
```

kotlin

```
@ReactMethod(isBlockingSynchronousMethod = true)
```

At the moment, we do not recommend this, since calling methods synchronously can have strong performance penalties and introduce threading-related bugs to your native modules. Additionally, please note that if you choose to enable `isBlockingSynchronousMethod`, your app can no longer use the Google Chrome debugger. This is because synchronous methods require the JS VM to share memory with the app. For the Google Chrome debugger, React Native runs inside the JS VM in Google Chrome, and communicates asynchronously with the mobile devices via WebSockets.

### Register the Module (Android Specific)[‚Äã](#register-the-module-android-specific "Direct link to Register the Module (Android Specific)")

Once a native module is written, it needs to be registered with React Native. In order to do so, you need to add your native module to a `ReactPackage` and register the `ReactPackage` with React Native. During initialization, React Native will loop over all packages, and for each `ReactPackage`, register each native module within.

React Native invokes the method `createNativeModules()` on a `ReactPackage` in order to get the list of native modules to register. For Android, if a module is not instantiated and returned in createNativeModules it will not be available from JavaScript.

To add your Native Module to `ReactPackage`, first create a new Java/Kotlin Class named (`MyAppPackage.java` or `MyAppPackage.kt`) that implements `ReactPackage` inside the `android/app/src/main/java/com/your-app-name/` folder:

Then add the following content:

* Java
* Kotlin

java

```
package com.your-app-name; // replace your-app-name with your app‚Äôs name
import com.facebook.react.ReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.uimanager.ViewManager;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class MyAppPackage implements ReactPackage {

   @Override
   public List<ViewManager> createViewManagers(ReactApplicationContext reactContext) {
       return Collections.emptyList();
   }

   @Override
   public List<NativeModule> createNativeModules(
           ReactApplicationContext reactContext) {
       List<NativeModule> modules = new ArrayList<>();

       modules.add(new CalendarModule(reactContext));

       return modules;
   }

}
```

kotlin

```
package com.your-app-name // replace your-app-name with your app‚Äôs name

import android.view.View
import com.facebook.react.ReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.uimanager.ReactShadowNode
import com.facebook.react.uimanager.ViewManager

class MyAppPackage : ReactPackage {

    override fun createViewManagers(
        reactContext: ReactApplicationContext
    ): MutableList<ViewManager<View, ReactShadowNode<*>>> = mutableListOf()

    override fun createNativeModules(
        reactContext: ReactApplicationContext
    ): MutableList<NativeModule> = listOf(CalendarModule(reactContext)).toMutableList()
}
```

This file imports the native module you created, `CalendarModule`. It then instantiates `CalendarModule` within the `createNativeModules()` function and returns it as a list of `NativeModules` to register. If you add more native modules down the line, you can also instantiate them and add them to the list returned here.

note

It is worth noting that this way of registering native modules eagerly initializes all native modules when the application starts, which adds to the startup time of an application. You can use [TurboReactPackage](https://github.com/facebook/react-native/blob/main/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/TurboReactPackage.kt) as an alternative. Instead of `createNativeModules`, which return a list of instantiated native module objects, TurboReactPackage implements a `getModule(String name, ReactApplicationContext rac)` method that creates the native module object, when required. TurboReactPackage is a bit more complicated to implement at the moment. In addition to implementing a `getModule()` method, you have to implement a `getReactModuleInfoProvider()` method, which returns a list of all the native modules the package can instantiate along with a function that instantiates them, example [here](https://github.com/facebook/react-native/blob/8ac467c51b94c82d81930b4802b2978c85539925/ReactAndroid/src/main/java/com/facebook/react/CoreModulesPackage.java#L86-L165). Again, using TurboReactPackage will allow your application to have a faster startup time, but it is currently a bit cumbersome to write. So proceed with caution if you choose to use TurboReactPackages.

To register the `CalendarModule` package, you must add `MyAppPackage` to the list of packages returned in ReactNativeHost's `getPackages()` method. Open up your `MainApplication.java` or `MainApplication.kt` file, which can be found in the following path: `android/app/src/main/java/com/your-app-name/`.

Locate ReactNativeHost‚Äôs `getPackages()` method and add your package to the packages list `getPackages()` returns:

* Java
* Kotlin

java

```
@Override
protected List<ReactPackage> getPackages() {
    List<ReactPackage> packages = new PackageList(this).getPackages();
    // Packages that cannot be autolinked yet can be added manually here, for example:
    // packages.add(new MyReactNativePackage());
    packages.add(new MyAppPackage());
    return packages;
}
```

kotlin

```
override fun getPackages(): List<ReactPackage> =
    PackageList(this).packages.apply {
        // Packages that cannot be autolinked yet can be added manually here, for example:
        // add(MyReactNativePackage())
        add(MyAppPackage())
    }
```

You have now successfully registered your native module for Android!

### Test What You Have Built[‚Äã](#test-what-you-have-built "Direct link to Test What You Have Built")

At this point, you have set up the basic scaffolding for your native module in Android. Test that out by accessing the native module and invoking its exported method in JavaScript.

Find a place in your application where you would like to add a call to the native module‚Äôs `createCalendarEvent()` method. Below is an example of a component, `NewModuleButton` you can add in your app. You can invoke the native module inside `NewModuleButton`'s `onPress()` function.

tsx

```
import React from 'react';
import {NativeModules, Button} from 'react-native';

const NewModuleButton = () => {
  const onPress = () => {
    console.log('We will invoke the native module here!');
  };

  return (
    <Button
      title="Click to invoke your native module!"
      color="#841584"
      onPress={onPress}
    />
  );
};

export default NewModuleButton;
```

In order to access your native module from JavaScript you need to first import `NativeModules` from React Native:

tsx

```
import {NativeModules} from 'react-native';
```

You can then access the `CalendarModule` native module off of `NativeModules`.

tsx

```
const {CalendarModule} = NativeModules;
```

Now that you have the CalendarModule native module available, you can invoke your native method `createCalendarEvent()`. Below it is added to the `onPress()` method in `NewModuleButton`:

tsx

```
const onPress = () => {
  CalendarModule.createCalendarEvent('testName', 'testLocation');
};
```

The final step is to rebuild the React Native app so that you can have the latest native code (with your new native module!) available. In your command line, where the react native application is located, run the following:

* npm
* Yarn

shell

```
npm run android
```

shell

```
yarn android
```

### Building as You Iterate[‚Äã](#building-as-you-iterate "Direct link to Building as You Iterate")

As you work through these guides and iterate on your native module, you will need to do a native rebuild of your application to access your most recent changes from JavaScript. This is because the code that you are writing sits within the native part of your application. While React Native‚Äôs metro bundler can watch for changes in JavaScript and rebuild on the fly for you, it will not do so for native code. So if you want to test your latest native changes you need to rebuild by using the above command.

### Recap‚ú®[‚Äã](#recap "Direct link to Recap‚ú®")

You should now be able to invoke your `createCalendarEvent()` method on your native module in the app. In our example this occurs by pressing the `NewModuleButton`. You can confirm this by viewing the log you set up in your `createCalendarEvent()` method. You can follow [these steps](https://developer.android.com/studio/debug/am-logcat.html) to view ADB logs in your app. You should then be able to search for your `Log.d` message (in our example ‚ÄúCreate event called with name: testName and location: testLocation‚Äù) and see your message logged each time you invoke your native module method.

![Image of logs.](/docs/assets/native-modules-android-logs.png)

Image of ADB logs in Android Studio

At this point you have created an Android native module and invoked its native method from JavaScript in your React Native application. You can read on to learn more about things like argument types available to a native module method and how to setup callbacks and promises.

## Beyond a Calendar Native Module[‚Äã](#beyond-a-calendar-native-module "Direct link to Beyond a Calendar Native Module")

### Better Native Module Export[‚Äã](#better-native-module-export "Direct link to Better Native Module Export")

Importing your native module by pulling it off of `NativeModules` like above is a bit clunky.

To save consumers of your native module from needing to do that each time they want to access your native module, you can create a JavaScript wrapper for the module. Create a new JavaScript file named `CalendarModule.js` with the following content:

tsx

```
/**
* This exposes the native CalendarModule module as a JS module. This has a
* function 'createCalendarEvent' which takes the following parameters:

* 1. String name: A string representing the name of the event
* 2. String location: A string representing the location of the event
*/
import {NativeModules} from 'react-native';
const {CalendarModule} = NativeModules;
export default CalendarModule;
```

This JavaScript file also becomes a good location for you to add any JavaScript side functionality. For example, if you use a type system like TypeScript you can add type annotations for your native module here. While React Native does not yet support Native to JS type safety, all your JS code will be type safe. Doing so will also make it easier for you to switch to type-safe native modules down the line. Below is an example of adding type safety to the CalendarModule:

tsx

```
/**
 * This exposes the native CalendarModule module as a JS module. This has a
 * function 'createCalendarEvent' which takes the following parameters:
 *
 * 1. String name: A string representing the name of the event
 * 2. String location: A string representing the location of the event
 */
import {NativeModules} from 'react-native';
const {CalendarModule} = NativeModules;
interface CalendarInterface {
  createCalendarEvent(name: string, location: string): void;
}
export default CalendarModule as CalendarInterface;
```

In your other JavaScript files you can access the native module and invoke its method like this:

tsx

```
import CalendarModule from './CalendarModule';
CalendarModule.createCalendarEvent('foo', 'bar');
```

note

This assumes that the place you are importing `CalendarModule` is in the same hierarchy as `CalendarModule.js`. Please update the relative import as necessary.

### Argument Types[‚Äã](#argument-types "Direct link to Argument Types")

When a native module method is invoked in JavaScript, React Native converts the arguments from JS objects to their Java/Kotlin object analogues. So for example, if your Java Native Module method accepts a double, in JS you need to call the method with a number. React Native will handle the conversion for you. Below is a list of the argument types supported for native module methods and the JavaScript equivalents they map to.

| Java          | Kotlin        | JavaScript |
| ------------- | ------------- | ---------- |
| Boolean       | Boolean       | ?boolean   |
| boolean       |               | boolean    |
| Double        | Double        | ?number    |
| double        |               | number     |
| String        | String        | string     |
| Callback      | Callback      | Function   |
| Promise       | Promise       | Promise    |
| ReadableMap   | ReadableMap   | Object     |
| ReadableArray | ReadableArray | Array      |

info

The following types are currently supported but will not be supported in TurboModules. Please avoid using them:

* Integer Java/Kotlin -> ?number
* Float Java/Kotlin -> ?number
* int Java -> number
* float Java -> number

For argument types not listed above, you will need to handle the conversion yourself. For example, in Android, `Date` conversion is not supported out of the box. You can handle the conversion to the `Date` type within the native method yourself like so:

* Java
* Kotlin

java

```
    String dateFormat = "yyyy-MM-dd";
    SimpleDateFormat sdf = new SimpleDateFormat(dateFormat);
    Calendar eStartDate = Calendar.getInstance();
    try {
        eStartDate.setTime(sdf.parse(startDate));
    }
```

kotlin

```
    val dateFormat = "yyyy-MM-dd"
    val sdf = SimpleDateFormat(dateFormat, Locale.US)
    val eStartDate = Calendar.getInstance()
    try {
        sdf.parse(startDate)?.let {
            eStartDate.time = it
        }
    }
```

### Exporting Constants[‚Äã](#exporting-constants "Direct link to Exporting Constants")

A native module can export constants by implementing the native method `getConstants()`, which is available in JS. Below you will implement `getConstants()` and return a Map that contains a `DEFAULT_EVENT_NAME` constant you can access in JavaScript:

* Java
* Kotlin

java

```
@Override
public Map<String, Object> getConstants() {
   final Map<String, Object> constants = new HashMap<>();
   constants.put("DEFAULT_EVENT_NAME", "New Event");
   return constants;
}
```

kotlin

```
override fun getConstants(): MutableMap<String, Any> =
    hashMapOf("DEFAULT_EVENT_NAME" to "New Event")
```

The constant can then be accessed by invoking `getConstants` on the native module in JS:

tsx

```
const {DEFAULT_EVENT_NAME} = CalendarModule.getConstants();
console.log(DEFAULT_EVENT_NAME);
```

Technically it is possible to access constants exported in `getConstants()` directly off the native module object. This will no longer be supported with TurboModules, so we encourage the community to switch to the above approach to avoid necessary migration down the line.

note

That currently constants are exported only at initialization time, so if you change getConstants values at runtime it won't affect the JavaScript environment. This will change with Turbomodules. With Turbomodules, `getConstants()` will become a regular native module method, and each invocation will hit the native side.

### Callbacks[‚Äã](#callbacks "Direct link to Callbacks")

Native modules also support a unique kind of argument: a callback. Callbacks are used to pass data from Java/Kotlin to JavaScript for asynchronous methods. They can also be used to asynchronously execute JavaScript from the native side.

In order to create a native module method with a callback, first import the `Callback` interface, and then add a new parameter to your native module method of type `Callback`. There are a couple of nuances with callback arguments that will soon be lifted with TurboModules. First off, you can only have two callbacks in your function arguments- a successCallback and a failureCallback. In addition, the last argument to a native module method call, if it's a function, is treated as the successCallback, and the second to last argument to a native module method call, if it's a function, is treated as the failure callback.

* Java
* Kotlin

java

```
import com.facebook.react.bridge.Callback;

@ReactMethod
public void createCalendarEvent(String name, String location, Callback callBack) {
}
```

kotlin

```
import com.facebook.react.bridge.Callback

@ReactMethod fun createCalendarEvent(name: String, location: String, callback: Callback) {}
```

You can invoke the callback in your Java/Kotlin method, providing whatever data you want to pass to JavaScript. Please note that you can only pass serializable data from native code to JavaScript. If you need to pass back a native object you can use `WriteableMaps`, if you need to use a collection use `WritableArrays`. It is also important to highlight that the callback is not invoked immediately after the native function completes. Below the ID of an event created in an earlier call is passed to the callback.

* Java
* Kotlin

java

```
  @ReactMethod
   public void createCalendarEvent(String name, String location, Callback callBack) {
       Integer eventId = ...
       callBack.invoke(eventId);
   }
```

kotlin

```
  @ReactMethod
  fun createCalendarEvent(name: String, location: String, callback: Callback) {
      val eventId = ...
      callback.invoke(eventId)
  }
```

This method could then be accessed in JavaScript using:

tsx

```
const onPress = () => {
  CalendarModule.createCalendarEvent(
    'Party',
    'My House',
    eventId => {
      console.log(`Created a new event with id ${eventId}`);
    },
  );
};
```

Another important detail to note is that a native module method can only invoke one callback, one time. This means that you can either call a success callback or a failure callback, but not both, and each callback can only be invoked at most one time. A native module can, however, store the callback and invoke it later.

There are two approaches to error handling with callbacks. The first is to follow Node‚Äôs convention and treat the first argument passed to the callback as an error object.

* Java
* Kotlin

java

```
  @ReactMethod
   public void createCalendarEvent(String name, String location, Callback callBack) {
       Integer eventId = ...
       callBack.invoke(null, eventId);
   }
```

kotlin

```
  @ReactMethod
  fun createCalendarEvent(name: String, location: String, callback: Callback) {
      val eventId = ...
      callback.invoke(null, eventId)
  }
```

In JavaScript, you can then check the first argument to see if an error was passed through:

tsx

```
const onPress = () => {
  CalendarModule.createCalendarEvent(
    'testName',
    'testLocation',
    (error, eventId) => {
      if (error) {
        console.error(`Error found! ${error}`);
      }
      console.log(`event id ${eventId} returned`);
    },
  );
};
```

Another option is to use an onSuccess and onFailure callback:

* Java
* Kotlin

java

```
@ReactMethod
public void createCalendarEvent(String name, String location, Callback myFailureCallback, Callback mySuccessCallback) {
}
```

kotlin

```
@ReactMethod
  fun createCalendarEvent(
      name: String,
      location: String,
      myFailureCallback: Callback,
      mySuccessCallback: Callback
  ) {}
```

Then in JavaScript you can add a separate callback for error and success responses:

tsx

```
const onPress = () => {
  CalendarModule.createCalendarEvent(
    'testName',
    'testLocation',
    error => {
      console.error(`Error found! ${error}`);
    },
    eventId => {
      console.log(`event id ${eventId} returned`);
    },
  );
};
```

### Promises[‚Äã](#promises "Direct link to Promises")

Native modules can also fulfill a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise), which can simplify your JavaScript, especially when using ES2016's [async/await](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function) syntax. When the last parameter of a native module Java/Kotlin method is a Promise, its corresponding JS method will return a JS Promise object.

Refactoring the above code to use a promise instead of callbacks looks like this:

* Java
* Kotlin

java

```
import com.facebook.react.bridge.Promise;

@ReactMethod
public void createCalendarEvent(String name, String location, Promise promise) {
    try {
        Integer eventId = ...
        promise.resolve(eventId);
    } catch(Exception e) {
        promise.reject("Create Event Error", e);
    }
}
```

kotlin

```
import com.facebook.react.bridge.Promise

@ReactMethod
fun createCalendarEvent(name: String, location: String, promise: Promise) {
    try {
        val eventId = ...
        promise.resolve(eventId)
    } catch (e: Throwable) {
        promise.reject("Create Event Error", e)
    }
}
```

note

Similar to callbacks, a native module method can either reject or resolve a promise (but not both) and can do so at most once. This means that you can either call a success callback or a failure callback, but not both, and each callback can only be invoked at most one time. A native module can, however, store the callback and invoke it later.

The JavaScript counterpart of this method returns a Promise. This means you can use the `await` keyword within an async function to call it and wait for its result:

tsx

```
const onSubmit = async () => {
  try {
    const eventId = await CalendarModule.createCalendarEvent(
      'Party',
      'My House',
    );
    console.log(`Created a new event with id ${eventId}`);
  } catch (e) {
    console.error(e);
  }
};
```

The reject method takes different combinations of the following arguments:

* Java
* Kotlin

java

```
String code, String message, WritableMap userInfo, Throwable throwable
```

kotlin

```
code: String, message: String, userInfo: WritableMap, throwable: Throwable
```

For more detail, you can find the `Promise.java` interface [here](https://github.com/facebook/react-native/blob/main/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/bridge/Promise.kt). If `userInfo` is not provided, ReactNative will set it to null. For the rest of the parameters React Native will use a default value. The `message` argument provides the error `message` shown at the top of an error call stack. Below is an example of the error message shown in JavaScript from the following reject call in Java/Kotlin.

Java/Kotlin reject call:

* Java
* Kotlin

java

```
promise.reject("Create Event error", "Error parsing date", e);
```

kotlin

```
promise.reject("Create Event error", "Error parsing date", e)
```

Error message in React Native App when promise is rejected:

![Image of error message in React Native app.](/docs/assets/native-modules-android-errorscreen.png)

Image of error message

### Sending Events to JavaScript[‚Äã](#sending-events-to-javascript "Direct link to Sending Events to JavaScript")

Native modules can signal events to JavaScript without being invoked directly. For example, you might want to signal to JavaScript a reminder that a calendar event from the native Android calendar app will occur soon. The easiest way to do this is to use the `RCTDeviceEventEmitter` which can be obtained from the `ReactContext` as in the code snippet below.

* Java
* Kotlin

java

```
...
import com.facebook.react.modules.core.DeviceEventManagerModule;
import com.facebook.react.bridge.WritableMap;
import com.facebook.react.bridge.Arguments;
...
private void sendEvent(ReactContext reactContext,
                      String eventName,
                      @Nullable WritableMap params) {
 reactContext
     .getJSModule(DeviceEventManagerModule.RCTDeviceEventEmitter.class)
     .emit(eventName, params);
}

private int listenerCount = 0;

@ReactMethod
public void addListener(String eventName) {
  if (listenerCount == 0) {
    // Set up any upstream listeners or background tasks as necessary
  }

  listenerCount += 1;
}

@ReactMethod
public void removeListeners(Integer count) {
  listenerCount -= count;
  if (listenerCount == 0) {
    // Remove upstream listeners, stop unnecessary background tasks
  }
}
...
WritableMap params = Arguments.createMap();
params.putString("eventProperty", "someValue");
...
sendEvent(reactContext, "EventReminder", params);
```

kotlin

```
...
import com.facebook.react.bridge.WritableMap
import com.facebook.react.bridge.Arguments
import com.facebook.react.modules.core.DeviceEventManagerModule
...

private fun sendEvent(reactContext: ReactContext, eventName: String, params: WritableMap?) {
    reactContext
      .getJSModule(DeviceEventManagerModule.RCTDeviceEventEmitter::class.java)
      .emit(eventName, params)
}

private var listenerCount = 0

@ReactMethod
fun addListener(eventName: String) {
  if (listenerCount == 0) {
    // Set up any upstream listeners or background tasks as necessary
  }

  listenerCount += 1
}

@ReactMethod
fun removeListeners(count: Int) {
  listenerCount -= count
  if (listenerCount == 0) {
    // Remove upstream listeners, stop unnecessary background tasks
  }
}
...
val params = Arguments.createMap().apply {
    putString("eventProperty", "someValue")
}
...
sendEvent(reactContext, "EventReminder", params)
```

JavaScript modules can then register to receive events by `addListener` on the [NativeEventEmitter](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/EventEmitter/NativeEventEmitter.js) class.

tsx

```
import {NativeEventEmitter, NativeModules} from 'react-native';
...
useEffect(() => {
    const eventEmitter = new NativeEventEmitter(NativeModules.ToastExample);
    let eventListener = eventEmitter.addListener('EventReminder', event => {
      console.log(event.eventProperty) // "someValue"
    });

    // Removes the listener once unmounted
    return () => {
      eventListener.remove();
    };
  }, []);
```

### Getting Activity Result from startActivityForResult[‚Äã](#getting-activity-result-from-startactivityforresult "Direct link to Getting Activity Result from startActivityForResult")

You'll need to listen to `onActivityResult` if you want to get results from an activity you started with `startActivityForResult`. To do this, you must extend `BaseActivityEventListener` or implement `ActivityEventListener`. The former is preferred as it is more resilient to API changes. Then, you need to register the listener in the module's constructor like so:

* Java
* Kotlin

java

```
reactContext.addActivityEventListener(mActivityResultListener);
```

kotlin

```
reactContext.addActivityEventListener(mActivityResultListener);
```

Now you can listen to `onActivityResult` by implementing the following method:

* Java
* Kotlin

java

```
@Override
public void onActivityResult(
 final Activity activity,
 final int requestCode,
 final int resultCode,
 final Intent intent) {
 // Your logic here
}
```

kotlin

```
override fun onActivityResult(
    activity: Activity?,
    requestCode: Int,
    resultCode: Int,
    intent: Intent?
) {
    // Your logic here
}
```

Let's implement a basic image picker to demonstrate this. The image picker will expose the method `pickImage` to JavaScript, which will return the path of the image when called.

* Java
* Kotlin

kotlin

```
public class ImagePickerModule extends ReactContextBaseJavaModule {

  private static final int IMAGE_PICKER_REQUEST = 1;
  private static final String E_ACTIVITY_DOES_NOT_EXIST = "E_ACTIVITY_DOES_NOT_EXIST";
  private static final String E_PICKER_CANCELLED = "E_PICKER_CANCELLED";
  private static final String E_FAILED_TO_SHOW_PICKER = "E_FAILED_TO_SHOW_PICKER";
  private static final String E_NO_IMAGE_DATA_FOUND = "E_NO_IMAGE_DATA_FOUND";

  private Promise mPickerPromise;

  private final ActivityEventListener mActivityEventListener = new BaseActivityEventListener() {

    @Override
    public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent intent) {
      if (requestCode == IMAGE_PICKER_REQUEST) {
        if (mPickerPromise != null) {
          if (resultCode == Activity.RESULT_CANCELED) {
            mPickerPromise.reject(E_PICKER_CANCELLED, "Image picker was cancelled");
          } else if (resultCode == Activity.RESULT_OK) {
            Uri uri = intent.getData();

            if (uri == null) {
              mPickerPromise.reject(E_NO_IMAGE_DATA_FOUND, "No image data found");
            } else {
              mPickerPromise.resolve(uri.toString());
            }
          }

          mPickerPromise = null;
        }
      }
    }
  };

  ImagePickerModule(ReactApplicationContext reactContext) {
    super(reactContext);

    // Add the listener for `onActivityResult`
    reactContext.addActivityEventListener(mActivityEventListener);
  }

  @Override
  public String getName() {
    return "ImagePickerModule";
  }

  @ReactMethod
  public void pickImage(final Promise promise) {
    Activity currentActivity = getCurrentActivity();

    if (currentActivity == null) {
      promise.reject(E_ACTIVITY_DOES_NOT_EXIST, "Activity doesn't exist");
      return;
    }

    // Store the promise to resolve/reject when picker returns data
    mPickerPromise = promise;

    try {
      final Intent galleryIntent = new Intent(Intent.ACTION_PICK);

      galleryIntent.setType("image/*");

      final Intent chooserIntent = Intent.createChooser(galleryIntent, "Pick an image");

      currentActivity.startActivityForResult(chooserIntent, IMAGE_PICKER_REQUEST);
    } catch (Exception e) {
      mPickerPromise.reject(E_FAILED_TO_SHOW_PICKER, e);
      mPickerPromise = null;
    }
  }
}
```

kotlin

```
class ImagePickerModule(reactContext: ReactApplicationContext) :
    ReactContextBaseJavaModule(reactContext) {

    private var pickerPromise: Promise? = null

    private val activityEventListener =
        object : BaseActivityEventListener() {
            override fun onActivityResult(
                activity: Activity?,
                requestCode: Int,
                resultCode: Int,
                intent: Intent?
            ) {
                if (requestCode == IMAGE_PICKER_REQUEST) {
                    pickerPromise?.let { promise ->
                        when (resultCode) {
                            Activity.RESULT_CANCELED ->
                                promise.reject(E_PICKER_CANCELLED, "Image picker was cancelled")
                            Activity.RESULT_OK -> {
                                val uri = intent?.data

                                uri?.let { promise.resolve(uri.toString())}
                                    ?: promise.reject(E_NO_IMAGE_DATA_FOUND, "No image data found")
                            }
                        }

                        pickerPromise = null
                    }
                }
            }
        }

    init {
        reactContext.addActivityEventListener(activityEventListener)
    }

    override fun getName() = "ImagePickerModule"

    @ReactMethod
    fun pickImage(promise: Promise) {
        val activity = currentActivity

        if (activity == null) {
            promise.reject(E_ACTIVITY_DOES_NOT_EXIST, "Activity doesn't exist")
            return
        }

        pickerPromise = promise

        try {
            val galleryIntent = Intent(Intent.ACTION_PICK).apply { type = "image\/*" }

            val chooserIntent = Intent.createChooser(galleryIntent, "Pick an image")

            activity.startActivityForResult(chooserIntent, IMAGE_PICKER_REQUEST)
        } catch (t: Throwable) {
            pickerPromise?.reject(E_FAILED_TO_SHOW_PICKER, t)
            pickerPromise = null
        }
    }

    companion object {
        const val IMAGE_PICKER_REQUEST = 1
        const val E_ACTIVITY_DOES_NOT_EXIST = "E_ACTIVITY_DOES_NOT_EXIST"
        const val E_PICKER_CANCELLED = "E_PICKER_CANCELLED"
        const val E_FAILED_TO_SHOW_PICKER = "E_FAILED_TO_SHOW_PICKER"
        const val E_NO_IMAGE_DATA_FOUND = "E_NO_IMAGE_DATA_FOUND"
    }
}
```

### Listening to Lifecycle Events[‚Äã](#listening-to-lifecycle-events "Direct link to Listening to Lifecycle Events")

Listening to the activity's LifeCycle events such as `onResume`, `onPause` etc. is very similar to how `ActivityEventListener` was implemented. The module must implement `LifecycleEventListener`. Then, you need to register a listener in the module's constructor like so:

* Java
* Kotlin

java

```
reactContext.addLifecycleEventListener(this);
```

kotlin

```
reactContext.addLifecycleEventListener(this)
```

Now you can listen to the activity's LifeCycle events by implementing the following methods:

* Java
* Kotlin

java

```
@Override
public void onHostResume() {
   // Activity `onResume`
}
@Override
public void onHostPause() {
   // Activity `onPause`
}
@Override
public void onHostDestroy() {
   // Activity `onDestroy`
}
```

kotlin

```
override fun onHostResume() {
    // Activity `onResume`
}

override fun onHostPause() {
    // Activity `onPause`
}

override fun onHostDestroy() {
    // Activity `onDestroy`
}
```

### Threading[‚Äã](#threading "Direct link to Threading")

To date, on Android, all native module async methods execute on one thread. Native modules should not have any assumptions about what thread they are being called on, as the current assignment is subject to change in the future. If a blocking call is required, the heavy work should be dispatched to an internally managed worker thread, and any callbacks distributed from there.


---

# Native Modules Intro

info

Native Module and Native Components are our stable technologies used by the legacy architecture. They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

Sometimes a React Native app needs to access a native platform API that is not available by default in JavaScript, for example the native APIs to access Apple or Google Pay. Maybe you want to reuse some existing Objective-C, Swift, Java or C++ libraries without having to reimplement it in JavaScript, or write some high performance, multi-threaded code for things like image processing.

The NativeModule system exposes instances of Java/Objective-C/C++ (native) classes to JavaScript (JS) as JS objects, thereby allowing you to execute arbitrary native code from within JS. While we don't expect this feature to be part of the usual development process, it is essential that it exists. If React Native doesn't export a native API that your JS app needs you should be able to export it yourself!

## Native Module Setup[‚Äã](#native-module-setup "Direct link to Native Module Setup")

There are different ways to write a native module for your React Native application:

1. Creating a local library that can be imported in your React Native application. Read [Creating local libraries](/docs/legacy/local-library-setup.md) guide to learn more.
2. Directly within your React Native application's iOS/Android projects
3. As an NPM package that can be installed as a dependency by your/other React Native applications.

This guide will first walk you through implementing a native module directly within a React Native application. However the native module you build in the following guide can be distributed as an NPM package. Check out the [Setting Up a Native Module as an NPM Package](/docs/legacy/native-modules-setup.md) guide if you are interested in doing so.

## Getting Started[‚Äã](#getting-started "Direct link to Getting Started")

In the following sections we will walk you through guides on how to build a native module directly within a React Native application. As a prerequisite, you will need a React Native application to work within. You can follow the steps [here](/docs/getting-started.md) to setup a React Native application if you do not already have one.

Imagine that you want to access the iOS/Android native calendar APIs from JavaScript within a React Native application in order to create calendar events. React Native does not expose a JavaScript API to communicate with the native calendar libraries. However, through native modules, you can write native code that communicates with native calendar APIs. Then you can invoke that native code through JavaScript in your React Native application.

In the following sections you will create such a Calendar native module for both [Android](/docs/legacy/native-modules-android.md) and [iOS](/docs/legacy/native-modules-ios.md).


---

# iOS Native Modules

info

Native Module and Native Components are our stable technologies used by the legacy architecture. They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

Welcome to Native Modules for iOS. Please start by reading the [Native Modules Intro](/docs/legacy/native-modules-intro.md) for an intro to what native modules are.

## Create a Calendar Native Module[‚Äã](#create-a-calendar-native-module "Direct link to Create a Calendar Native Module")

In the following guide you will create a native module, `CalendarModule`, that will allow you to access Apple's calendar APIs from JavaScript. By the end you will be able to call `CalendarModule.createCalendarEvent('Dinner Party', 'My House');` from JavaScript, invoking a native method that creates a calendar event.

### Setup[‚Äã](#setup "Direct link to Setup")

To get started, open up the iOS project within your React Native application in Xcode. You can find your iOS project here within a React Native app:

![Image of opening up an iOS project within a React Native app inside of Xcode.](/docs/assets/native-modules-ios-open-project.png)

Image of where you can find your iOS project

We recommend using Xcode to write your native code. Xcode is built for iOS development, and using it will help you to quickly resolve smaller errors like code syntax.

### Create Custom Native Module Files[‚Äã](#create-custom-native-module-files "Direct link to Create Custom Native Module Files")

The first step is to create our main custom native module header and implementation files. Create a new file called `RCTCalendarModule.h`

![Image of creating a class called  RCTCalendarModule.h.](/docs/assets/native-modules-ios-add-class.png)

Image of creating a custom native module file within the same folder as AppDelegate

and add the following to it:

objectivec

```
//  RCTCalendarModule.h
#import <React/RCTBridgeModule.h>
@interface RCTCalendarModule : NSObject <RCTBridgeModule>
@end
```

You can use any name that fits the native module you are building. Name the class `RCTCalendarModule` since you are creating a calendar native module. Since ObjC does not have language-level support for namespaces like Java or C++, convention is to prepend the class name with a substring. This could be an abbreviation of your application name or your infra name. RCT, in this example, refers to React.

As you can see below, the CalendarModule class implements the `RCTBridgeModule` protocol. A native module is an Objective-C class that implements the `RCTBridgeModule` protocol.

Next up, let‚Äôs start implementing the native module. Create the corresponding implementation file using cocoa touch class in xcode, `RCTCalendarModule.m`, in the same folder and include the following content:

objectivec

```
// RCTCalendarModule.m
#import "RCTCalendarModule.h"

@implementation RCTCalendarModule

// To export a module named RCTCalendarModule
RCT_EXPORT_MODULE();

@end
```

### Module Name[‚Äã](#module-name "Direct link to Module Name")

For now, your `RCTCalendarModule.m` native module only includes a `RCT_EXPORT_MODULE` macro, which exports and registers the native module class with React Native. The `RCT_EXPORT_MODULE` macro also takes an optional argument that specifies the name that the module will be accessible as in your JavaScript code.

This argument is not a string literal. In the example below `RCT_EXPORT_MODULE(CalendarModuleFoo)` is passed, not `RCT_EXPORT_MODULE("CalendarModuleFoo")`.

objectivec

```
// To export a module named CalendarModuleFoo
RCT_EXPORT_MODULE(CalendarModuleFoo);
```

The native module can then be accessed in JS like this:

tsx

```
const {CalendarModuleFoo} = ReactNative.NativeModules;
```

If you do not specify a name, the JavaScript module name will match the Objective-C class name, with any "RCT" or "RK" prefixes removed.

Let's follow the example below and call `RCT_EXPORT_MODULE` without any arguments. As a result, the module will be exposed to React Native using the name `CalendarModule`, since that is the Objective-C class name, with RCT removed.

objectivec

```
// Without passing in a name this will export the native module name as the Objective-C class name with ‚ÄúRCT‚Äù removed
RCT_EXPORT_MODULE();
```

The native module can then be accessed in JS like this:

tsx

```
const {CalendarModule} = ReactNative.NativeModules;
```

### Export a Native Method to JavaScript[‚Äã](#export-a-native-method-to-javascript "Direct link to Export a Native Method to JavaScript")

React Native will not expose any methods in a native module to JavaScript unless explicitly told to. This can be done using the `RCT_EXPORT_METHOD` macro. Methods written in the `RCT_EXPORT_METHOD` macro are asynchronous and the return type is therefore always void. In order to pass a result from a `RCT_EXPORT_METHOD` method to JavaScript you can use callbacks or emit events (covered below). Let‚Äôs go ahead and set up a native method for our `CalendarModule` native module using the `RCT_EXPORT_METHOD` macro. Call it `createCalendarEvent()` and for now have it take in name and location arguments as strings. Argument type options will be covered shortly.

objectivec

```
RCT_EXPORT_METHOD(createCalendarEvent:(NSString *)name location:(NSString *)location)
{
}
```

note

Please note that the `RCT_EXPORT_METHOD` macro will not be necessary with TurboModules unless your method relies on RCT argument conversion (see argument types below). Ultimately, React Native will remove `RCT_EXPORT_MACRO,` so we discourage people from using `RCTConvert`. Instead, you can do the argument conversion within the method body.

Before you build out the `createCalendarEvent()` method‚Äôs functionality, add a console log in the method so you can confirm it has been invoked from JavaScript in your React Native application. Use the `RCTLog` APIs from React. Let‚Äôs import that header at the top of your file and then add the log call.

objectivec

```
#import <React/RCTLog.h>
RCT_EXPORT_METHOD(createCalendarEvent:(NSString *)name location:(NSString *)location)
{
 RCTLogInfo(@"Pretending to create an event %@ at %@", name, location);
}
```

### Synchronous Methods[‚Äã](#synchronous-methods "Direct link to Synchronous Methods")

You can use the `RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD` to create a synchronous native method.

objectivec

```
RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD(getName)
{
return [[UIDevice currentDevice] name];
}
```

The return type of this method must be of object type (id) and should be serializable to JSON. This means that the hook can only return nil or JSON values (e.g. NSNumber, NSString, NSArray, NSDictionary).

At the moment, we do not recommend using synchronous methods, since calling methods synchronously can have strong performance penalties and introduce threading-related bugs to your native modules. Additionally, please note that if you choose to use `RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD`, your app can no longer use the Google Chrome debugger. This is because synchronous methods require the JS VM to share memory with the app. For the Google Chrome debugger, React Native runs inside the JS VM in Google Chrome, and communicates asynchronously with the mobile devices via WebSockets.

### Test What You Have Built[‚Äã](#test-what-you-have-built "Direct link to Test What You Have Built")

At this point you have set up the basic scaffolding for your native module in iOS. Test that out by accessing the native module and invoking it‚Äôs exported method in JavaScript.

Find a place in your application where you would like to add a call to the native module‚Äôs `createCalendarEvent()` method. Below is an example of a component, `NewModuleButton` you can add in your app. You can invoke the native module inside `NewModuleButton`'s `onPress()` function.

tsx

```
import React from 'react';
import {Button} from 'react-native';

const NewModuleButton = () => {
  const onPress = () => {
    console.log('We will invoke the native module here!');
  };

  return (
    <Button
      title="Click to invoke your native module!"
      color="#841584"
      onPress={onPress}
    />
  );
};

export default NewModuleButton;
```

In order to access your native module from JavaScript you need to first import `NativeModules` from React Native:

tsx

```
import {NativeModules} from 'react-native';
```

You can then access the `CalendarModule` native module off of `NativeModules`.

tsx

```
const {CalendarModule} = NativeModules;
```

Now that you have the CalendarModule native module available, you can invoke your native method `createCalendarEvent()`. Below it is added to the `onPress()` method in `NewModuleButton`:

tsx

```
const onPress = () => {
  CalendarModule.createCalendarEvent('testName', 'testLocation');
};
```

The final step is to rebuild the React Native app so that you can have the latest native code (with your new native module!) available. In your command line, where the react native application is located, run the following :

* npm
* Yarn

shell

```
npm run ios
```

shell

```
yarn ios
```

### Building as You Iterate[‚Äã](#building-as-you-iterate "Direct link to Building as You Iterate")

As you work through these guides and iterate on your native module, you will need to do a native rebuild of your application to access your most recent changes from JavaScript. This is because the code that you are writing sits within the native part of your application. While React Native‚Äôs metro bundler can watch for changes in JavaScript and rebuild JS bundle on the fly for you, it will not do so for native code. So if you want to test your latest native changes you need to rebuild by using the above command.

### Recap‚ú®[‚Äã](#recap "Direct link to Recap‚ú®")

You should now be able to invoke your `createCalendarEvent()` method on your native module in JavaScript. Since you are using `RCTLog` in the function, you can confirm your native method is being invoked by [enabling debug mode in your app](https://reactnative.dev/docs/debugging#chrome-developer-tools) and looking at the JS console in Chrome or the mobile app debugger Flipper. You should see your `RCTLogInfo(@"Pretending to create an event %@ at %@", name, location);` message each time you invoke the native module method.

![Image of logs.](/docs/assets/native-modules-ios-logs.png)

Image of iOS logs in Flipper

At this point you have created an iOS native module and invoked a method on it from JavaScript in your React Native application. You can read on to learn more about things like what argument types your native module method takes and how to setup callbacks and promises within your native module.

## Beyond a Calendar Native Module[‚Äã](#beyond-a-calendar-native-module "Direct link to Beyond a Calendar Native Module")

### Better Native Module Export[‚Äã](#better-native-module-export "Direct link to Better Native Module Export")

Importing your native module by pulling it off of `NativeModules` like above is a bit clunky.

To save consumers of your native module from needing to do that each time they want to access your native module, you can create a JavaScript wrapper for the module. Create a new JavaScript file named NativeCalendarModule.js with the following content:

tsx

```
/**
* This exposes the native CalendarModule module as a JS module. This has a
* function 'createCalendarEvent' which takes the following parameters:

* 1. String name: A string representing the name of the event
* 2. String location: A string representing the location of the event
*/
import {NativeModules} from 'react-native';
const {CalendarModule} = NativeModules;
export default CalendarModule;
```

This JavaScript file also becomes a good location for you to add any JavaScript side functionality. For example, if you use a type system like TypeScript you can add type annotations for your native module here. While React Native does not yet support Native to JS type safety, with these type annotations, all your JS code will be type safe. These annotations will also make it easier for you to switch to type-safe native modules down the line. Below is an example of adding type safety to the Calendar Module:

tsx

```
/**
 * This exposes the native CalendarModule module as a JS module. This has a
 * function 'createCalendarEvent' which takes the following parameters:
 *
 * 1. String name: A string representing the name of the event
 * 2. String location: A string representing the location of the event
 */
import {NativeModules} from 'react-native';
const {CalendarModule} = NativeModules;
interface CalendarInterface {
  createCalendarEvent(name: string, location: string): void;
}
export default CalendarModule as CalendarInterface;
```

In your other JavaScript files you can access the native module and invoke its method like this:

tsx

```
import NativeCalendarModule from './NativeCalendarModule';
NativeCalendarModule.createCalendarEvent('foo', 'bar');
```

note

This assumes that the place you are importing `CalendarModule` is in the same hierarchy as `NativeCalendarModule.js`. Please update the relative import as necessary.

### Argument Types[‚Äã](#argument-types "Direct link to Argument Types")

When a native module method is invoked in JavaScript, React Native converts the arguments from JS objects to their Objective-C/Swift object analogues. So for example, if your Objective-C Native Module method accepts a NSNumber, in JS you need to call the method with a number. React Native will handle the conversion for you. Below is a list of the argument types supported for native module methods and the JavaScript equivalents they map to.

| Objective-C                                   | JavaScript         |
| --------------------------------------------- | ------------------ |
| NSString                                      | string, ?string    |
| BOOL                                          | boolean            |
| double                                        | number             |
| NSNumber                                      | ?number            |
| NSArray                                       | Array, ?Array      |
| NSDictionary                                  | Object, ?Object    |
| RCTResponseSenderBlock                        | Function (success) |
| RCTResponseSenderBlock, RCTResponseErrorBlock | Function (failure) |
| RCTPromiseResolveBlock, RCTPromiseRejectBlock | Promise            |

info

The following types are currently supported but will not be supported in TurboModules. Please avoid using them.

* Function (failure) -> RCTResponseErrorBlock
* Number -> NSInteger
* Number -> CGFloat
* Number -> float

For iOS, you can also write native module methods with any argument type that is supported by the `RCTConvert` class (see [RCTConvert](https://github.com/facebook/react-native/blob/main/packages/react-native/React/Base/RCTConvert.h) for details about what is supported). The RCTConvert helper functions all accept a JSON value as input and map it to a native Objective-C type or class.

### Exporting Constants[‚Äã](#exporting-constants "Direct link to Exporting Constants")

A native module can export constants by overriding the native method `constantsToExport()`. Below `constantsToExport()` is overridden, and returns a Dictionary that contains a default event name property you can access in JavaScript like so:

objectivec

```
- (NSDictionary *)constantsToExport
{
 return @{ @"DEFAULT_EVENT_NAME": @"New Event" };
}
```

The constant can then be accessed by invoking `getConstants()` on the native module in JS like so:

tsx

```
const {DEFAULT_EVENT_NAME} = CalendarModule.getConstants();
console.log(DEFAULT_EVENT_NAME);
```

Technically, it is possible to access constants exported in `constantsToExport()` directly off the `NativeModule` object. This will no longer be supported with TurboModules, so we encourage the community to switch to the above approach to avoid necessary migration down the line.

note

The constants are exported only at initialization time, so if you change `constantsToExport()` values at runtime it won't affect the JavaScript environment.

For iOS, if you override `constantsToExport()` then you should also implement `+ requiresMainQueueSetup` to let React Native know if your module needs to be initialized on the main thread, before any JavaScript code executes. Otherwise you will see a warning that in the future your module may be initialized on a background thread unless you explicitly opt out with `+ requiresMainQueueSetup:`. If your module does not require access to UIKit, then you should respond to `+ requiresMainQueueSetup` with NO.

### Callbacks[‚Äã](#callbacks "Direct link to Callbacks")

Native modules also support a unique kind of argument - a callback. Callbacks are used to pass data from Objective-C to JavaScript for asynchronous methods. They can also be used to asynchronously execute JS from the native side.

For iOS, callbacks are implemented using the type `RCTResponseSenderBlock`. Below the callback parameter `myCallBack` is added to the `createCalendarEventMethod()`:

objectivec

```
RCT_EXPORT_METHOD(createCalendarEvent:(NSString *)title
                location:(NSString *)location
                myCallback:(RCTResponseSenderBlock)callback)
```

You can then invoke the callback in your native function, providing whatever result you want to pass to JavaScript in an array. Note that `RCTResponseSenderBlock` accepts only one argument - an array of parameters to pass to the JavaScript callback. Below you will pass back the ID of an event created in an earlier call.

info

It is important to highlight that the callback is not invoked immediately after the native function completes‚Äîremember the communication is asynchronous.

objectivec

```
RCT_EXPORT_METHOD(createCalendarEvent:(NSString *)title location:(NSString *)location callback: (RCTResponseSenderBlock)callback)
{
 NSInteger eventId = ...
 callback(@[@(eventId)]);

 RCTLogInfo(@"Pretending to create an event %@ at %@", title, location);
}
```

This method could then be accessed in JavaScript using the following:

tsx

```
const onSubmit = () => {
  CalendarModule.createCalendarEvent(
    'Party',
    '04-12-2020',
    eventId => {
      console.log(`Created a new event with id ${eventId}`);
    },
  );
};
```

A native module is supposed to invoke its callback only once. It can, however, store the callback and invoke it later. This pattern is often used to wrap iOS APIs that require delegates‚Äî see [`RCTAlertManager`](https://github.com/facebook/react-native/blob/main/packages/react-native/React/CoreModules/RCTAlertManager.mm) for an example. If the callback is never invoked, some memory is leaked.

There are two approaches to error handling with callbacks. The first is to follow Node‚Äôs convention and treat the first argument passed to the callback array as an error object.

objectivec

```
RCT_EXPORT_METHOD(createCalendarEventCallback:(NSString *)title location:(NSString *)location callback: (RCTResponseSenderBlock)callback)
{
  NSNumber *eventId = [NSNumber numberWithInt:123];
  callback(@[[NSNull null], eventId]);
}
```

In JavaScript, you can then check the first argument to see if an error was passed through:

tsx

```
const onPress = () => {
  CalendarModule.createCalendarEventCallback(
    'testName',
    'testLocation',
    (error, eventId) => {
      if (error) {
        console.error(`Error found! ${error}`);
      }
      console.log(`event id ${eventId} returned`);
    },
  );
};
```

Another option is to use two separate callbacks: onFailure and onSuccess.

objectivec

```
RCT_EXPORT_METHOD(createCalendarEventCallback:(NSString *)title
                  location:(NSString *)location
                  errorCallback: (RCTResponseSenderBlock)errorCallback
                  successCallback: (RCTResponseSenderBlock)successCallback)
{
  @try {
    NSNumber *eventId = [NSNumber numberWithInt:123];
    successCallback(@[eventId]);
  }

  @catch ( NSException *e ) {
    errorCallback(@[e]);
  }
}
```

Then in JavaScript you can add a separate callback for error and success responses:

tsx

```
const onPress = () => {
  CalendarModule.createCalendarEventCallback(
    'testName',
    'testLocation',
    error => {
      console.error(`Error found! ${error}`);
    },
    eventId => {
      console.log(`event id ${eventId} returned`);
    },
  );
};
```

If you want to pass error-like objects to JavaScript, use `RCTMakeError` from [`RCTUtils.h.`](https://github.com/facebook/react-native/blob/main/packages/react-native/React/Base/RCTUtils.h) Right now this only passes an Error-shaped dictionary to JavaScript, but React Native aims to automatically generate real JavaScript Error objects in the future. You can also provide a `RCTResponseErrorBlock` argument, which is used for error callbacks and accepts an `NSError \* object`. Please note that this argument type will not be supported with TurboModules.

### Promises[‚Äã](#promises "Direct link to Promises")

Native modules can also fulfill a promise, which can simplify your JavaScript, especially when using ES2016's `async/await` syntax. When the last parameter of a native module method is a `RCTPromiseResolveBlock` and `RCTPromiseRejectBlock`, its corresponding JS method will return a JS Promise object.

Refactoring the above code to use a promise instead of callbacks looks like this:

objectivec

```
RCT_EXPORT_METHOD(createCalendarEvent:(NSString *)title
                 location:(NSString *)location
                 resolver:(RCTPromiseResolveBlock)resolve
                 rejecter:(RCTPromiseRejectBlock)reject)
{
 NSInteger eventId = createCalendarEvent();
 if (eventId) {
    resolve(@(eventId));
  } else {
    reject(@"event_failure", @"no event id returned", nil);
  }
}
```

The JavaScript counterpart of this method returns a Promise. This means you can use the `await` keyword within an async function to call it and wait for its result:

tsx

```
const onSubmit = async () => {
  try {
    const eventId = await CalendarModule.createCalendarEvent(
      'Party',
      'my house',
    );
    console.log(`Created a new event with id ${eventId}`);
  } catch (e) {
    console.error(e);
  }
};
```

### Sending Events to JavaScript[‚Äã](#sending-events-to-javascript "Direct link to Sending Events to JavaScript")

Native modules can signal events to JavaScript without being invoked directly. For example, you might want to signal to JavaScript a reminder that a calendar event from the native iOS calendar app will occur soon. The preferred way to do this is to subclass `RCTEventEmitter`, implement `supportedEvents` and call self `sendEventWithName`:

Update your header class to import `RCTEventEmitter` and subclass `RCTEventEmitter`:

objectivec

```
//  CalendarModule.h

#import <React/RCTBridgeModule.h>
#import <React/RCTEventEmitter.h>

@interface CalendarModule : RCTEventEmitter <RCTBridgeModule>
@end
```

JavaScript code can subscribe to these events by creating a new `NativeEventEmitter` instance around your module.

You will receive a warning if you expend resources unnecessarily by emitting an event while there are no listeners. To avoid this, and to optimize your module's workload (e.g. by unsubscribing from upstream notifications or pausing background tasks), you can override `startObserving` and `stopObserving` in your `RCTEventEmitter` subclass.

objectivec

```
@implementation CalendarModule
{
  bool hasListeners;
}

// Will be called when this module's first listener is added.
-(void)startObserving {
    hasListeners = YES;
    // Set up any upstream listeners or background tasks as necessary
}

// Will be called when this module's last listener is removed, or on dealloc.
-(void)stopObserving {
    hasListeners = NO;
    // Remove upstream listeners, stop unnecessary background tasks
}

- (void)calendarEventReminderReceived:(NSNotification *)notification
{
  NSString *eventName = notification.userInfo[@"name"];
  if (hasListeners) {// Only send events if anyone is listening
    [self sendEventWithName:@"EventReminder" body:@{@"name": eventName}];
  }
}
```

### Threading[‚Äã](#threading "Direct link to Threading")

Unless the native module provides its own method queue, it shouldn't make any assumptions about what thread it's being called on. Currently, if a native module doesn't provide a method queue, React Native will create a separate GCD queue for it and invoke its methods there. Please note that this is an implementation detail and might change. If you want to explicitly provide a method queue for a native module, override the `(dispatch_queue_t) methodQueue` method in the native module. For example, if it needs to use a main-thread-only iOS API, it should specify this via:

objectivec

```
- (dispatch_queue_t)methodQueue
{
  return dispatch_get_main_queue();
}
```

Similarly, if an operation may take a long time to complete, the native module can specify its own queue to run operations on. Again, currently React Native will provide a separate method queue for your native module, but this is an implementation detail you should not rely on. If you don't provide your own method queue, in the future, your native module's long running operations may end up blocking async calls being executed on other unrelated native modules. The `RCTAsyncLocalStorage` module here, for example, creates its own queue so the React queue isn't blocked waiting on potentially slow disk access.

objectivec

```
- (dispatch_queue_t)methodQueue
{
 return dispatch_queue_create("com.facebook.React.AsyncLocalStorageQueue", DISPATCH_QUEUE_SERIAL);
}
```

The specified `methodQueue` will be shared by all of the methods in your module. If only one of your methods is long-running (or needs to be run on a different queue than the others for some reason), you can use `dispatch_async` inside the method to perform that particular method's code on another queue, without affecting the others:

objectivec

```
RCT_EXPORT_METHOD(doSomethingExpensive:(NSString *)param callback:(RCTResponseSenderBlock)callback)
{
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
   // Call long-running code on background thread
   ...
   // You can invoke callback from any thread/queue
   callback(@[...]);
 });
}
```

Sharing dispatch queues between modules

The `methodQueue` method will be called once when the module is initialized, and then retained by React Native, so there is no need to keep a reference to the queue yourself, unless you wish to make use of it within your module. However, if you wish to share the same queue between multiple modules then you will need to ensure that you retain and return the same queue instance for each of them.

### Dependency Injection[‚Äã](#dependency-injection "Direct link to Dependency Injection")

React Native will create and initialize any registered native modules automatically. However, you may wish to create and initialize your own module instances to, for example, inject dependencies.

You can do this by creating a class that implements the `RCTBridgeDelegate` Protocol, initializing an `RCTBridge` with the delegate as an argument and initialising a `RCTRootView` with the initialized bridge.

objectivec

```
id<RCTBridgeDelegate> moduleInitialiser = [[classThatImplementsRCTBridgeDelegate alloc] init];

RCTBridge *bridge = [[RCTBridge alloc] initWithDelegate:moduleInitialiser launchOptions:nil];

RCTRootView *rootView = [[RCTRootView alloc]
                        initWithBridge:bridge
                            moduleName:kModuleName
                     initialProperties:nil];
```

### Exporting Swift[‚Äã](#exporting-swift "Direct link to Exporting Swift")

Swift doesn't have support for macros, so exposing native modules and their methods to JavaScript inside React Native requires a bit more setup. However, it works relatively the same. Let's say you have the same `CalendarModule` but as a Swift class:

swift

```
// CalendarModule.swift

@objc(CalendarModule)
class CalendarModule: NSObject {

 @objc(addEvent:location:date:)
 func addEvent(_ name: String, location: String, date: NSNumber) -> Void {
   // Date is ready to use!
 }

 @objc
 func constantsToExport() -> [String: Any]! {
   return ["someKey": "someValue"]
 }

}
```

note

It is important to use the `@objc` modifiers to ensure the class and functions are exported properly to the Objective-C runtime.

Then create a private implementation file that will register the required information with React Native:

objectivec

```
// CalendarModuleBridge.m
#import <React/RCTBridgeModule.h>

@interface RCT_EXTERN_MODULE(CalendarModule, NSObject)

RCT_EXTERN_METHOD(addEvent:(NSString *)name location:(NSString *)location date:(nonnull NSNumber *)date)

@end
```

For those of you new to Swift and Objective-C, whenever you [mix the two languages in an iOS project](https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html), you will also need an additional bridging file, known as a bridging header, to expose the Objective-C files to Swift. Xcode will offer to create this header file for you if you add your Swift file to your app through the Xcode `File>New File` menu option. You will need to import `RCTBridgeModule.h` in this header file.

objectivec

```
// CalendarModule-Bridging-Header.h
#import <React/RCTBridgeModule.h>
```

You can also use `RCT_EXTERN_REMAP_MODULE` and `_RCT_EXTERN_REMAP_METHOD` to alter the JavaScript name of the module or methods you are exporting. For more information see [`RCTBridgeModule`](https://github.com/facebook/react-native/blob/main/packages/react-native/React/Base/RCTBridgeModule.h).

note

Important when making third party modules: Static libraries with Swift are only supported in Xcode 9 and later. In order for the Xcode project to build when you use Swift in the iOS static library you include in the module, your main app project must contain Swift code and a bridging header itself. If your app project does not contain any Swift code, a workaround can be a single empty .swift file and an empty bridging header.

### Reserved Method Names[‚Äã](#reserved-method-names "Direct link to Reserved Method Names")

#### invalidate()[‚Äã](#invalidate "Direct link to invalidate()")

Native modules can conform to the [RCTInvalidating](https://github.com/facebook/react-native/blob/main/packages/react-native/React/Base/RCTInvalidating.h) protocol on iOS by implementing the `invalidate()` method. This method [can be invoked](https://github.com/facebook/react-native/blob/0.62-stable/ReactCommon/turbomodule/core/platform/ios/RCTTurboModuleManager.mm#L456) when the native bridge is invalidated (i.e.: on devmode reload). Please use this mechanism as necessary to do the required cleanup for your native module.


---

# Native Modules NPM Package Setup

info

Native Module and Native Components are our stable technologies used by the legacy architecture. They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

Native modules are usually distributed as npm packages, except that on top of the usual JavaScript they will include some native code per platform. To understand more about npm packages you may find [this guide](https://docs.npmjs.com/packages-and-modules/contributing-packages-to-the-registry) useful.

To get set up with the basic project structure for a native module we will use the community tool called [create-react-native-library](https://callstack.github.io/react-native-builder-bob/create). You can go ahead further and dive deep into how that library works, but for our needs we will only execute the basic script:

shell

```
npx create-react-native-library@latest react-native-awesome-module
```

Where `react-native-awesome-module` is the name you would like for the new module. After doing this you will navigate into `react-native-awesome-module` folder and bootstrap the example project by running:

shell

```
yarn
```

When the bootstrap is done, you will be able to start the example app by executing one of the following commands:

shell

```
# Android app
yarn example android
# iOS app
yarn example ios
```

When all steps above are done, you will be able to continue with [Android Native Modules](/docs/legacy/native-modules-android.md) or [iOS Native Modules](/docs/legacy/native-modules-ios.md) guides to add in some code.


---

# Using Libraries

React Native provides a set of built-in [Core Components and APIs](/docs/components-and-apis.md) ready to use in your app. You're not limited to the components and APIs bundled with React Native. React Native has a community of thousands of developers. If the Core Components and APIs don't have what you are looking for, you may be able to find and install a library from the community to add the functionality to your app.

## Selecting a Package Manager[‚Äã](#selecting-a-package-manager "Direct link to Selecting a Package Manager")

React Native libraries are typically installed from the [npm registry](https://www.npmjs.com/) using a Node.js package manager such as [npm CLI](https://docs.npmjs.com/cli/npm) or [Yarn Classic](https://classic.yarnpkg.com/en/).

If you have Node.js installed on your computer then you already have the npm CLI installed. Some developers prefer to use Yarn Classic for slightly faster install times and additional advanced features like Workspaces. Both tools work great with React Native. We will assume npm for the rest of this guide for simplicity of explanation.

note

The terms "library" and "package" are used interchangeably in the JavaScript community.

## Installing a Library[‚Äã](#installing-a-library "Direct link to Installing a Library")

To install a library in your project, navigate to your project directory in your terminal and run the installation command. Let's try this with `react-native-webview`:

* npm
* Yarn

shell

```
npm install react-native-webview
```

shell

```
yarn add react-native-webview
```

The library that we installed includes native code, and we need to link to our app before we use it.

## Linking Native Code on iOS[‚Äã](#linking-native-code-on-ios "Direct link to Linking Native Code on iOS")

React Native uses CocoaPods to manage iOS project dependencies and most React Native libraries follow this same convention. If a library you are using does not, then please refer to their README for additional instruction. In most cases, the following instructions will apply.

Run `pod install` in our `ios` directory in order to link it to our native iOS project. A shortcut for doing this without switching to the `ios` directory is to run `npx pod-install`.

bash

```
npx pod-install
```

Once this is complete, re-build the app binary to start using your new library:

* npm
* Yarn

shell

```
npm run ios
```

shell

```
yarn ios
```

## Linking Native Code on Android[‚Äã](#linking-native-code-on-android "Direct link to Linking Native Code on Android")

React Native uses Gradle to manage Android project dependencies. After you install a library with native dependencies, you will need to re-build the app binary to use your new library:

* npm
* Yarn

shell

```
npm run android
```

shell

```
yarn android
```

## Finding Libraries[‚Äã](#finding-libraries "Direct link to Finding Libraries")

[React Native Directory](https://reactnative.directory) is a searchable database of libraries built specifically for React Native. This is the first place to look for a library for your React Native app.

Many of the libraries you will find on the directory are from [React Native Community](https://github.com/react-native-community/) or [Expo](https://docs.expo.dev/versions/latest/).

Libraries built by the React Native Community are driven by volunteers and individuals at companies that depend on React Native. They often support iOS, tvOS, Android, Windows, but this varies across projects. Many of the libraries in this organization were once React Native Core Components and APIs.

Libraries built by Expo are all written in TypeScript and support iOS, Android, and `react-native-web` wherever possible.

After React Native Directory, the [npm registry](https://www.npmjs.com/) is the next best place if you can't find a library specifically for React Native on the directory. The npm registry is the definitive source for JavaScript libraries, but the libraries that it lists may not all be compatible with React Native. React Native is one of many JavaScript programming environments, including Node.js, web browsers, Electron, and more, and npm includes libraries that work for all of these environments.

## Determining Library Compatibility[‚Äã](#determining-library-compatibility "Direct link to Determining Library Compatibility")

### Does it work with React Native?[‚Äã](#does-it-work-with-react-native "Direct link to Does it work with React Native?")

Usually libraries built *specifically for other platforms* will not work with React Native. Examples include `react-select` which is built for the web and specifically targets `react-dom`, and `rimraf` which is built for Node.js and interacts with your computer file system. Other libraries like `lodash` use only JavaScript language features and work in any environment. You will gain a sense for this over time, but until then the easiest way to find out is to try it yourself. You can remove packages using `npm uninstall` if it turns out that it does not work in React Native.

### Does it work for the platforms that my app supports?[‚Äã](#does-it-work-for-the-platforms-that-my-app-supports "Direct link to Does it work for the platforms that my app supports?")

[React Native Directory](https://reactnative.directory) allows you to filter by platform compatibility, such as iOS, Android, Web, and Windows. If the library you would like to use is not currently listed there, refer to the README for the library to learn more.

### Does it work with my app version of React Native?[‚Äã](#does-it-work-with-my-app-version-of-react-native "Direct link to Does it work with my app version of React Native?")

The latest version of a library is typically compatible with the latest version of React Native. If you are using an older version, you should refer to the README to know which version of the library you should install. You can install a particular version of the library by running `npm install <library-name>@<version-number>`, for example: `npm install @react-native-community/netinfo@^2.0.0`.


---

# Linking

`Linking` gives you a general interface to interact with both incoming and outgoing app links.

Every Link (URL) has a URL Scheme, some websites are prefixed with `https://` or `http://` and the `http` is the URL Scheme. Let's call it scheme for short.

In addition to `https`, you're likely also familiar with the `mailto` scheme. When you open a link with the mailto scheme, your operating system will open an installed mail application. Similarly, there are schemes for making phone calls and sending SMS. Read more about [built-in URL](#built-in-url-schemes) schemes below.

Like using the mailto scheme, it's possible to link to other applications by using custom url schemes. For example, when you get a **Magic Link** email from Slack, the **Launch Slack** button is an anchor tag with an href that looks something like: `slack://secret/magic-login/other-secret`. Like with Slack, you can tell the operating system that you want to handle a custom scheme. When the Slack app opens, it receives the URL that was used to open it. This is often referred to as deep linking. Read more about how to [get the deep link](#get-the-deep-link) into your app.

A custom URL scheme isn't the only way to open your application on mobile. For example, if you want to email someone a link to be opened on mobile, using a custom URL scheme isn't ideal because the user might open the email on a desktop, where the link wouldn't work. Instead, you should use standard `https` links, such as `https://www.myapp.io/records/1234546`. On mobile, these links can be configured to open your app. On Android, this feature is called **Deep Links**, while on iOS, it is known as **Universal Links**.

### Built-in URL Schemes[‚Äã](#built-in-url-schemes "Direct link to Built-in URL Schemes")

As mentioned in the introduction, there are some URL schemes for core functionality that exist on every platform. The following is a non-exhaustive list, but covers the most commonly used schemes.

| Scheme           | Description                                  | iOS | Android |
| ---------------- | -------------------------------------------- | --- | ------- |
| `mailto`         | Open mail app, eg: mailto: <hello@world.dev> | ‚úÖ  | ‚úÖ      |
| `tel`            | Open phone app, eg: tel:+123456789           | ‚úÖ  | ‚úÖ      |
| `sms`            | Open SMS app, eg: sms:+123456789             | ‚úÖ  | ‚úÖ      |
| `https` / `http` | Open web browser app, eg: <https://expo.dev> | ‚úÖ  | ‚úÖ      |

### Enabling Deep Links[‚Äã](#enabling-deep-links "Direct link to Enabling Deep Links")

### Projects with Native Code Only

The following section only applies to projects with native code exposed. If you are using the managed Expo workflow, see the guide on [Linking](https://docs.expo.dev/guides/linking/) in the Expo documentation for the appropriate alternative.

If you want to enable deep links in your app, please read the below guide:

* Android
* iOS

info

For instructions on how to add support for deep linking on Android, refer to [Enabling Deep Links for App Content - Add Intent Filters for Your Deep Links](https://developer.android.com/training/app-indexing/deep-linking.html#adding-filters).

If you wish to receive the intent in an existing instance of MainActivity, you may set the `launchMode` of MainActivity to `singleTask` in `AndroidManifest.xml`. See [`<activity>`](https://developer.android.com/guide/topics/manifest/activity-element.html) documentation for more information.

xml

```
<activity
  android:name=".MainActivity"
  android:launchMode="singleTask">
```

note

On iOS, you'll need to add the `LinkingIOS` folder into your header search paths as described in step 3 [here](/docs/linking-libraries-ios.md#step-3). If you also want to listen to incoming app links during your app's execution, you'll need to add the following lines to your `*AppDelegate.m`:

* ObjectiveC
* Swift

AppDelegate.mm

```
// iOS 9.x or newer
#import <React/RCTLinkingManager.h>

- (BOOL)application:(UIApplication *)application
   openURL:(NSURL *)url
   options:(NSDictionary<UIApplicationOpenURLOptionsKey,id> *)options
{
  return [RCTLinkingManager application:application openURL:url options:options];
}
```

If your app is using [Universal Links](https://developer.apple.com/ios/universal-links/), you'll need to add the following code as well:

AppDelegate.mm

```
- (BOOL)application:(UIApplication *)application continueUserActivity:(nonnull NSUserActivity *)userActivity
 restorationHandler:(nonnull void (^)(NSArray<id<UIUserActivityRestoring>> * _Nullable))restorationHandler
{
 return [RCTLinkingManager application:application
                  continueUserActivity:userActivity
                    restorationHandler:restorationHandler];
}
```

AppDelegate.swift

```
override func application(_ app: UIApplication, open url: URL, options: [UIApplication.OpenURLOptionsKey : Any] = [:]) -> Bool {
  return RCTLinkingManager.application(app, open: url, options: options)
}
```

If your app is using [Universal Links](https://developer.apple.com/ios/universal-links/), you'll need to add the following code as well:

AppDelegate.swift

```
override func application(
  _ application: UIApplication,
  continue userActivity: NSUserActivity,
  restorationHandler: @escaping ([UIUserActivityRestoring]?) -> Void) -> Bool {
    return RCTLinkingManager.application(
      application,
      continue: userActivity,
      restorationHandler: restorationHandler
    )
  }
```

### Handling Deep Links[‚Äã](#handling-deep-links "Direct link to Handling Deep Links")

There are two ways to handle URLs that open your app.

#### 1. If the app is already open, the app is foregrounded and a Linking 'url' event is fired[‚Äã](#1-if-the-app-is-already-open-the-app-is-foregrounded-and-a-linking-url-event-is-fired "Direct link to 1. If the app is already open, the app is foregrounded and a Linking 'url' event is fired")

You can handle these events with `Linking.addEventListener('url', callback)` - it calls `callback({url})` with the linked URL

#### 2. If the app is not already open, it is opened and the url is passed in as the initialURL[‚Äã](#2-if-the-app-is-not-already-open-it-is-opened-and-the-url-is-passed-in-as-the-initialurl "Direct link to 2. If the app is not already open, it is opened and the url is passed in as the initialURL")

You can handle these events with `Linking.getInitialURL()` - it returns a Promise that resolves to the URL, if there is one.

***

## Example[‚Äã](#example "Direct link to Example")

### Open Links and Deep Links (Universal Links)[‚Äã](#open-links-and-deep-links-universal-links "Direct link to Open Links and Deep Links (Universal Links)")

* TypeScript
* JavaScript

### Open Custom Settings[‚Äã](#open-custom-settings "Direct link to Open Custom Settings")

* TypeScript
* JavaScript

### Get the Deep Link[‚Äã](#get-the-deep-link "Direct link to Get the Deep Link")

* TypeScript
* JavaScript

### Send Intents (Android)[‚Äã](#send-intents-android "Direct link to Send Intents (Android)")

* TypeScript
* JavaScript

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `addEventListener()`[‚Äã](#addeventlistener "Direct link to addeventlistener")

tsx

```
static addEventListener(
  type: 'url',
  handler: (event: {url: string}) => void,
): EmitterSubscription;
```

Add a handler to Linking changes by listening to the `url` event type and providing the handler.

***

### `canOpenURL()`[‚Äã](#canopenurl "Direct link to canopenurl")

tsx

```
static canOpenURL(url: string): Promise<boolean>;
```

Determine whether or not an installed app can handle a given URL.

The method returns a `Promise` object. When it is determined whether or not the given URL can be handled, the promise is resolved and the first parameter is whether or not it can be opened.

The `Promise` will reject on Android if it was impossible to check if the URL can be opened or when targeting Android 11 (SDK 30) if you didn't specify the relevant intent queries in `AndroidManifest.xml`. Similarly on iOS, the promise will reject if you didn't add the specific scheme in the `LSApplicationQueriesSchemes` key inside `Info.plist` (see bellow).

**Parameters:**

| Name        | Type   | Description      |
| ----------- | ------ | ---------------- |
| urlRequired | string | The URL to open. |

note

For web URLs, the protocol (`"http://"`, `"https://"`) must be set accordingly!

warning

This method has limitations on iOS 9+. From [the official Apple documentation](https://developer.apple.com/documentation/uikit/uiapplication/1622952-canopenurl):

* If your app is linked against an earlier version of iOS but is running in iOS 9.0 or later, you can call this method up to 50 times. After reaching that limit, subsequent calls always resolve to `false`. If the user reinstalls or upgrades the app, iOS resets the limit.
* As of iOS 9, your app also needs to provide the `LSApplicationQueriesSchemes` key inside `Info.plist` or `canOpenURL()` will always resolve to `false`.

info

When targeting Android 11 (SDK 30) you must specify the intents for the schemes you want to handle in `AndroidManifest.xml`. A list of common intents can be found [here](https://developer.android.com/guide/components/intents-common).

For example to handle `https` schemes the following needs to be added to your manifest:

```
<manifest ...>
  <queries>
    <intent>
      <action android:name="android.intent.action.VIEW" />
      <data android:scheme="https"/>
    </intent>
  </queries>
</manifest>
```

***

### `getInitialURL()`[‚Äã](#getinitialurl "Direct link to getinitialurl")

tsx

```
static getInitialURL(): Promise<string | null>;
```

If the app launch was triggered by an app link, it will give the link url, otherwise it will give `null`.

info

To support deep linking on Android, refer <https://developer.android.com/training/app-indexing/deep-linking.html#handling-intents>.

tip

`getInitialURL` may return `null` when Remote JS Debugging is active. Disable the debugger to ensure it gets passed.

***

### `openSettings()`[‚Äã](#opensettings "Direct link to opensettings")

tsx

```
static openSettings(): Promise<void>;
```

Open the Settings app and displays the app‚Äôs custom settings, if it has any.

***

### `openURL()`[‚Äã](#openurl "Direct link to openurl")

tsx

```
static openURL(url: string): Promise<any>;
```

Try to open the given `url` with any of the installed apps.

You can use other URLs, like a location (e.g. "geo:37.484847,-122.148386" on Android or "<https://maps.apple.com/?ll=37.484847,-122.148386>" on iOS), a contact, or any other URL that can be opened with the installed apps.

The method returns a `Promise` object. If the user confirms the open dialog or the url automatically opens, the promise is resolved. If the user cancels the open dialog or there are no registered applications for the url, the promise is rejected.

**Parameters:**

| Name        | Type   | Description      |
| ----------- | ------ | ---------------- |
| urlRequired | string | The URL to open. |

note

This method will fail if the system doesn't know how to open the specified URL. If you're passing in a non-http(s) URL, it's best to check `canOpenURL()` first. For web URLs, the protocol (`"http://"`, `"https://"`) must be set accordingly!

warning

This method may behave differently in a simulator e.g. `"tel:"` links are not able to be handled in the iOS simulator as there's no access to the dialer app.

***

### `sendIntent()`Android[‚Äã](#sendintent-android "Direct link to sendintent-android")

tsx

```
static sendIntent(
  action: string,
  extras?: Array<{key: string; value: string | number | boolean}>,
): Promise<void>;
```

Launch an Android intent with extras.

**Parameters:**

| Name           | Type                                                       |
| -------------- | ---------------------------------------------------------- |
| actionRequired | string                                                     |
| extras         | `Array<{key: string, value: string ÔΩú number ÔΩú boolean}>` |


---

# Linking Libraries

Not every app uses all the native capabilities, and including the code to support all those features would impact the binary size... But we still want to support adding these features whenever you need them.

With that in mind we exposed many of these features as independent static libraries.

For most of the libs it will be as quick as dragging two files, sometimes a third step will be necessary, but no more than that.

note

All the libraries we ship with React Native live in the `Libraries` folder in the root of the repository. Some of them are pure JavaScript, and you only need to `require` it. Other libraries also rely on some native code, in that case you'll have to add these files to your app, otherwise the app will throw an error as soon as you try to use the library.

## Here are the few steps to link your libraries that contain native code[‚Äã](#here-are-the-few-steps-to-link-your-libraries-that-contain-native-code "Direct link to Here are the few steps to link your libraries that contain native code")

### Automatic linking[‚Äã](#automatic-linking "Direct link to Automatic linking")

Install a library with native dependencies:

shell

```
npm install <library-with-native-dependencies> --save
```

info

`--save` or `--save-dev` flag is very important for this step. React Native will link your libs based on `dependencies` and `devDependencies` in your `package.json` file.

That's it! Next time you build your app the native code will be linked thanks to the [autolinking](https://github.com/react-native-community/cli/blob/main/docs/autolinking.md) mechanism.

### Manual linking[‚Äã](#manual-linking "Direct link to Manual linking")

#### Step 1[‚Äã](#step-1 "Direct link to Step 1")

If the library has native code, there must be an `.xcodeproj` file inside its folder. Drag this file to your project on Xcode (usually under the `Libraries` group on Xcode);

![](/assets/images/AddToLibraries-92a6a7f58c75a8344d9bbeeae4ac167b.png)

#### Step 2[‚Äã](#step-2 "Direct link to Step 2")

Click on your main project file (the one that represents the `.xcodeproj`) select `Build Phases` and drag the static library from the `Products` folder inside the Library you are importing to `Link Binary With Libraries`

![](/assets/images/AddToBuildPhases-3e79422ff24780db618eae2d7a5ea604.png)

#### Step 3[‚Äã](#step-3 "Direct link to Step 3")

Not every library will need this step, what you need to consider is:

*Do I need to know the contents of the library at compile time?*

What that means is, are you using this library on the native side or only in JavaScript? If you are only using it in JavaScript, you are good to go!

If you do need to call it from native, then we need to know the library's headers. To achieve that you have to go to your project's file, select `Build Settings` and search for `Header Search Paths`. There you should include the path to your library. (This documentation used to recommend using `recursive`, but this is no longer recommended, as it can cause subtle build failures, especially with CocoaPods.)

![](/assets/images/AddToSearchPaths-721692ba7f3a91a1f4e4f73e7d88f2ca.png)


---

# Metro

React Native uses [Metro](https://metrobundler.dev/) to build your JavaScript code and assets.

## Configuring Metro[‚Äã](#configuring-metro "Direct link to Configuring Metro")

Configuration options for Metro can be customized in your project's `metro.config.js` file. This can export either:

* **An object (recommended)** that will be merged on top of Metro's internal config defaults.
* [**A function**](#advanced-using-a-config-function) that will be called with Metro's internal config defaults and should return a final config object.

tip

Please see [**Configuring Metro**](https://metrobundler.dev/docs/configuration) on the Metro website for documentation on all available config options.

In React Native, your Metro config should extend either [`@react-native/metro-config`](https://www.npmjs.com/package/@react-native/metro-config) or [`@expo/metro-config`](https://www.npmjs.com/package/@expo/metro-config). These packages contain essential defaults necessary to build and run React Native apps.

Below is the default `metro.config.js` file in a React Native template project:

js

```
const {getDefaultConfig, mergeConfig} = require('@react-native/metro-config');

/**
 * Metro configuration
 * https://metrobundler.dev/docs/configuration
 *
 * @type {import('metro-config').MetroConfig}
 */
const config = {};

module.exports = mergeConfig(getDefaultConfig(__dirname), config);
```

Metro options you wish to customize can be done so within the `config` object.

### Advanced: Using a config function[‚Äã](#advanced-using-a-config-function "Direct link to Advanced: Using a config function")

Exporting a config function is an opt-in to managing the final config yourself ‚Äî **Metro will not apply any internal defaults**. This pattern can be useful when needing to read the base default config object from Metro or to set options dynamically.

info

**From `@react-native/metro-config` 0.72.1**, it is no longer necessary to use a config function to access the complete default config. See the **Tip** section below.

js

```
const {getDefaultConfig, mergeConfig} = require('@react-native/metro-config');

module.exports = function (baseConfig) {
  const defaultConfig = mergeConfig(baseConfig, getDefaultConfig(__dirname));
  const {resolver: {assetExts, sourceExts}} = defaultConfig;

  return mergeConfig(
    defaultConfig,
    {
      resolver: {
        assetExts: assetExts.filter(ext => ext !== 'svg'),
        sourceExts: [...sourceExts, 'svg'],
      },
    },
  );
};
```

tip

Using a config function is for advanced use cases. A simpler method than the above, e.g. for customising `sourceExts`, would be to read these defaults from `@react-native/metro-config`.

**Alternative**

js

```
const defaultConfig = getDefaultConfig(__dirname);

const config = {
  resolver: {
    sourceExts: [...defaultConfig.resolver.sourceExts, 'svg'],
  },
};

module.exports = mergeConfig(defaultConfig, config);
```

**However!**, we recommend copying and editing when overriding these config values ‚Äî placing the source of truth in your config file.

‚úÖ **Recommended**

js

```
const config = {
  resolver: {
    sourceExts: ['js', 'ts', 'tsx', 'svg'],
  },
};
```

## Learn more about Metro[‚Äã](#learn-more-about-metro "Direct link to Learn more about Metro")

* [Metro website](https://metrobundler.dev/)
* [Video: "Metro & React Native DevX" talk at App.js 2023](https://www.youtube.com/watch?v=c9D4pg0y9cI)


---

# Modal

The Modal component is a basic way to present content above an enclosing view.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [View Props](/docs/view.md#props)[‚Äã](#view-props "Direct link to view-props")

Inherits [View Props](/docs/view.md#props).

***

### `animated`[‚Äã](#animated "Direct link to animated")

Deprecated

Use the [`animationType`](/docs/modal.md#animationtype) prop instead.

***

### `animationType`[‚Äã](#animationtype "Direct link to animationtype")

The `animationType` prop controls how the modal animates.

Possible values:

* `slide` slides in from the bottom
* `fade` fades into view
* `none` appears without an animation

| Type                                | Default |
| ----------------------------------- | ------- |
| enum(`'none'`, `'slide'`, `'fade'`) | `none`  |

***

### `backdropColor`[‚Äã](#backdropcolor "Direct link to backdropcolor")

The `backdropColor` of the modal (or background color of the modal's container.) Defaults to `white` if not provided and transparent is `false`. Ignored if `transparent` is `true`.

| Type                     | Default |
| ------------------------ | ------- |
| [color](/docs/colors.md) | white   |

***

### `hardwareAccelerated`Android[‚Äã](#hardwareaccelerated-android "Direct link to hardwareaccelerated-android")

The `hardwareAccelerated` prop controls whether to force hardware acceleration for the underlying window.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `navigationBarTranslucent`Android[‚Äã](#navigationbartranslucent-android "Direct link to navigationbartranslucent-android")

The `navigationBarTranslucent` prop determines whether your modal should go under the system navigation bar. However, `statusBarTranslucent` also needs to be set to `true` to make navigation bar translucent.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `onDismiss`iOS[‚Äã](#ondismiss-ios "Direct link to ondismiss-ios")

The `onDismiss` prop allows passing a function that will be called once the modal has been dismissed.

| Type     |
| -------- |
| function |

***

### `onOrientationChange`iOS[‚Äã](#onorientationchange-ios "Direct link to onorientationchange-ios")

The `onOrientationChange` callback is called when the orientation changes while the modal is being displayed. The orientation provided is only 'portrait' or 'landscape'. This callback is also called on initial render, regardless of the current orientation.

| Type     |
| -------- |
| function |

***

### `allowSwipeDismissal`iOS[‚Äã](#allowswipedismissal-ios "Direct link to allowswipedismissal-ios")

Controls whether the modal can be dismissed by swiping down on iOS. This requires you to implement the `onRequestClose` prop to handle the dismissal.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `ref`[‚Äã](#ref "Direct link to ref")

A ref setter that will be assigned an [element node](/docs/element-nodes.md) when mounted.

***

### `onRequestClose`[‚Äã](#onrequestclose "Direct link to onrequestclose")

The `onRequestClose` callback is called when the user taps the hardware back button on Android or the menu button on Apple TV. Because of this required prop, be aware that `BackHandler` events will not be emitted as long as the modal is open. On iOS, this callback is called when a Modal is being dismissed using a drag gesture when `presentationStyle` is `pageSheet or formSheet`. When `allowSwipeDismissal` is enabled this callback will be called after dismissing the modal.

| Type                                    |
| --------------------------------------- |
| functionRequiredAndroidTV***functioniOS |

***

### `onShow`[‚Äã](#onshow "Direct link to onshow")

The `onShow` prop allows passing a function that will be called once the modal has been shown.

| Type     |
| -------- |
| function |

***

### `presentationStyle`iOS[‚Äã](#presentationstyle-ios "Direct link to presentationstyle-ios")

The `presentationStyle` prop controls how the modal appears (generally on larger devices such as iPad or plus-sized iPhones). See <https://developer.apple.com/reference/uikit/uimodalpresentationstyle> for details.

Possible values:

* `fullScreen` covers the screen completely
* `pageSheet` covers portrait-width view centered (only on larger devices)
* `formSheet` covers narrow-width view centered (only on larger devices)
* `overFullScreen` covers the screen completely, but allows transparency

| Type                                                                   | Default                                                                          |
| ---------------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| enum(`'fullScreen'`, `'pageSheet'`, `'formSheet'`, `'overFullScreen'`) | `fullScreen` if `transparent={false}`***`overFullScreen` if `transparent={true}` |

***

### `statusBarTranslucent`Android[‚Äã](#statusbartranslucent-android "Direct link to statusbartranslucent-android")

The `statusBarTranslucent` prop determines whether your modal should go under the system statusbar.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `supportedOrientations`iOS[‚Äã](#supportedorientations-ios "Direct link to supportedorientations-ios")

The `supportedOrientations` prop allows the modal to be rotated to any of the specified orientations. On iOS, the modal is still restricted by what's specified in your app's Info.plist's UISupportedInterfaceOrientations field.

note

When using `presentationStyle` of `pageSheet` or `formSheet`, this property will be ignored on iOS.

| Type                                                                                                           | Default        |
| -------------------------------------------------------------------------------------------------------------- | -------------- |
| array of enums(`'portrait'`, `'portrait-upside-down'`, `'landscape'`, `'landscape-left'`, `'landscape-right'`) | `['portrait']` |

***

### `transparent`[‚Äã](#transparent "Direct link to transparent")

The `transparent` prop determines whether your modal will fill the entire view. Setting this to `true` will render the modal over a transparent background.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `visible`[‚Äã](#visible "Direct link to visible")

The `visible` prop determines whether your modal is visible.

| Type | Default |
| ---- | ------- |
| bool | `true`  |


---

# More Resources

There‚Äôs always more to learn: developer workflows, shipping to app stores, internationalization, security and more.

## Where to go from here[‚Äã](#where-to-go-from-here "Direct link to Where to go from here")

* [Set up your environment](/docs/environment-setup.md)
* [Set up your development workflow](/docs/running-on-device.md)
* [Design and layout your app](/docs/flexbox.md)
* [Debug your app](/docs/debugging.md)
* [Make your app cross platform](/docs/platform-specific-code.md)
* [Get involved in the React Native community](/community/overview.md)

## Dive deep[‚Äã](#dive-deep "Direct link to Dive deep")

* [React‚Äôs Documentation](https://react.dev/learn)
* [MDN‚Äôs JavaScript tutorials, reference, and guides](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
* [Android](https://developer.android.com/docs) and [iOS](https://developer.apple.com/documentation/uikit) platform docs

## IDEs[‚Äã](#ides "Direct link to IDEs")

We recommend using the [VS Code](https://code.visualstudio.com/) code editor and its handy [React Native tools](https://marketplace.visualstudio.com/items?itemName=msjsdiag.vscode-react-native).

## Platforms to try[‚Äã](#platforms-to-try "Direct link to Platforms to try")

[Expo](https://docs.expo.dev/) is a framework of tools and services for React Native that focuses on helping you build, ship, and iterate on your app, to use preview deployment workflows that are popular with web development, and to automate your development workflows. Expo also makes it possible to build React Native apps without ever touching Xcode or Android Studio, and it doesn't get in the way if you want to use those tools.

[Ignite](https://github.com/infinitered/ignite) is a starter kit CLI with several React Native boilerplates. The latest, Ignite Maverick, uses MobX-State-Tree for state management, React Navigation, and other common libraries. It has generators for screens, models, and more, and supports Expo out of the box. Ignite also comes with a component library that is tuned for custom designs, theming support, and testing. If you are looking for a preconfigured tech stack, Ignite could be perfect for you.

## Example Apps[‚Äã](#example-apps "Direct link to Example Apps")

Try out apps from the [Showcase](https://reactnative.dev/showcase) to see what React Native is capable of! Looking for something more hands on? Check out this [set of example apps on GitHub](https://github.com/ReactNativeNews/React-Native-Apps). You can look at their source code‚Äîtry running one on a simulator or device.

## Find, make, and share your own Native Components and TurboModules[‚Äã](#find-make-and-share-your-own-native-components-and-turbomodules "Direct link to Find, make, and share your own Native Components and TurboModules")

React Native has a community of thousands of developers like you making content, tools, tutorials‚Äîand Native Components!

Can‚Äôt find what you‚Äôre looking for in the Core Components? Visit [React Native Directory](https://reactnative.directory) to find what the community has been creating.

caution

This documentation references a legacy set of API and needs to be updated to reflect the New Architecture

Interested in making your own Native Component or Module? Making modules for your own use case and sharing them with others on NPM and GitHub helps grow the React Native ecosystem and community! Read the guides to making your own Native Modules ([Android](/docs/legacy/native-modules-android.md), [iOS](/docs/legacy/native-modules-ios.md)) and Native Components ([Android](/docs/legacy/native-components-android.md), [iOS](/docs/legacy/native-components-ios.md)).


---

# Native Platform

Your application may need access to platform features that aren‚Äôt directly available from react-native or one of the hundreds of [third-party libraries](https://reactnative.directory/) maintained by the community. Maybe you want to reuse some existing Objective-C, Swift, Java, Kotlin or C++ code from the JavaScript runtime. Whatever your reason, React Native exposes a powerful set of API to connect your native code to your JavaScript application code.

This guide introduces:

* **Native Modules:** native libraries that have no User Interface (UI) for the user. Examples would be persistent storage, notifications, network events. These are accessible to your user as JavaScript functions and objects.
* **Native Component:** native platform views, widgets and controllers that are available to your application's JavaScript code through React Components.

note

You might have previously been familiar with:

* [Legacy Native Modules](/docs/legacy/native-modules-intro.md);
* [Legacy Native Components](/docs/legacy/native-components-android.md);

These are our deprecated native module and component API. You can still use many of these legacy libraries with the New Architecture thanks to our interop layers. You should consider:

* using alternative libraries,
* upgrading to newer library versions that have first-class support for the New Architecture, or
* port these libraries yourself to Turbo Native Modules or Fabric Native Components.

1. Native Modules

   <!-- -->

   * [Android & iOS](/docs/turbo-native-modules-introduction.md)
   * [Cross-Platform with C++](/docs/the-new-architecture/pure-cxx-modules.md)
   * [Advanced: Custom C++ Types](/docs/the-new-architecture/custom-cxx-types.md)

2. Fabric Native Components
   <!-- -->
   * [Android & iOS](/docs/fabric-native-components-introduction.md)


---

# Navigating Between Screens

Mobile apps are rarely made up of a single screen. Managing the presentation of, and transition between, multiple screens is typically handled by what is known as a navigator.

This guide covers the various navigation components available in React Native. If you are getting started with navigation, you will probably want to use [React Navigation](/docs/navigation.md#react-navigation). React Navigation provides a straightforward navigation solution, with the ability to present common stack navigation and tabbed navigation patterns on both Android and iOS.

If you're integrating React Native into an app that already manages navigation natively, or looking for an alternative to React Navigation, the following library provides native navigation on both platforms: [react-native-navigation](https://github.com/wix/react-native-navigation).

## React Navigation[‚Äã](#react-navigation "Direct link to React Navigation")

The community solution to navigation is a standalone library that allows developers to set up the screens of an app with a few lines of code.

### Starter template[‚Äã](#starter-template "Direct link to Starter template")

If you're starting a new project, you can use the React Navigation template to quickly set up a new project with [Expo](https://expo.dev/):

shell

```
npx create-expo-app@latest --template react-navigation/template
```

See the project's `README.md` for more information on how to get started.

### Installation and setup[‚Äã](#installation-and-setup "Direct link to Installation and setup")

First, you need to install them in your project:

shell

```
npm install @react-navigation/native @react-navigation/native-stack
```

Next, install the required peer dependencies. You need to run different commands depending on whether your project is an Expo managed project or a bare React Native project.

* If you have an Expo managed project, install the dependencies with `expo`:

  shell

  ```
  npx expo install react-native-screens react-native-safe-area-context
  ```

* If you have a bare React Native project, install the dependencies with `npm`:

  shell

  ```
  npm install react-native-screens react-native-safe-area-context
  ```

  For iOS with bare React Native project, make sure you have [CocoaPods](https://cocoapods.org/) installed. Then install the pods to complete the installation:

  shell

  ```
  cd ios
  pod install
  cd ..
  ```

Once you've installed and configured the dependencies, you can move on to setting up your project to use React Navigation.

When using React Navigation, you configure [navigators](https://reactnavigation.org/docs/glossary-of-terms#navigator) in your app. Navigators handle the transition between screens in your app and provide UI such as header, tab bar etc.

Now you are ready to build and run your app on the device/simulator.

### Usage[‚Äã](#usage "Direct link to Usage")

Now you can create an app with a home screen and a profile screen:

tsx

```
import * as React from 'react';
import {createStaticNavigation} from '@react-navigation/native';
import {createNativeStackNavigator} from '@react-navigation/native-stack';

const RootStack = createNativeStackNavigator({
  screens: {
    Home: {
      screen: HomeScreen,
      options: {title: 'Welcome'},
    },
    Profile: {
      screen: ProfileScreen,
    },
  },
});

const Navigation = createStaticNavigation(RootStack);

export default function App() {
  return <Navigation />;
}
```

In this example, `RootStack` is a navigator with 2 screens (`Home` and `Profile`), defined in the `screens` property in `createNativeStackNavigator`. Similarly, you can define as many screens as you like.

You can specify options such as the screen title for each screen in the `options` property of each screen. Each screen definition also needs a `screen` property that is a React component or another navigator.

Inside each screen component, you can use the `useNavigation` hook to get the `navigation` object, which has various methods to link to other screens. For example, you can use `navigation.navigate` to go to the `Profile` screen:

tsx

```
import {useNavigation} from '@react-navigation/native';

function HomeScreen() {
  const navigation = useNavigation();

  return (
    <Button
      title="Go to Jane's profile"
      onPress={() =>
        navigation.navigate('Profile', {name: 'Jane'})
      }
    />
  );
}

function ProfileScreen({route}) {
  return <Text>This is {route.params.name}'s profile</Text>;
}
```

This `native-stack` navigator uses the native APIs: `UINavigationController` on iOS and `Fragment` on Android so that navigation built with `createNativeStackNavigator` will behave the same and have the similar performance characteristics as apps built natively on top of those APIs.

React Navigation also has packages for different kind of navigators such as tabs and drawer. You can use them to implement various patterns in your app.

For a complete intro to React Navigation, follow the [React Navigation Getting Started Guide](https://reactnavigation.org/docs/getting-started).


---

# Networking

Many mobile apps need to load resources from a remote URL. You may want to make a POST request to a REST API, or you may need to fetch a chunk of static content from another server.

## Using Fetch[‚Äã](#using-fetch "Direct link to Using Fetch")

React Native provides the [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) for your networking needs. Fetch will seem familiar if you have used `XMLHttpRequest` or other networking APIs before. You may refer to MDN's guide on [Using Fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch) for additional information.

### Making requests[‚Äã](#making-requests "Direct link to Making requests")

In order to fetch content from an arbitrary URL, you can pass the URL to fetch:

tsx

```
fetch('https://mywebsite.com/mydata.json');
```

Fetch also takes an optional second argument that allows you to customize the HTTP request. You may want to specify additional headers, or make a POST request:

tsx

```
fetch('https://mywebsite.com/endpoint/', {
  method: 'POST',
  headers: {
    Accept: 'application/json',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    firstParam: 'yourValue',
    secondParam: 'yourOtherValue',
  }),
});
```

Take a look at the [Fetch Request docs](https://developer.mozilla.org/en-US/docs/Web/API/Request) for a full list of properties.

### Handling the response[‚Äã](#handling-the-response "Direct link to Handling the response")

The above examples show how you can make a request. In many cases, you will want to do something with the response.

Networking is an inherently asynchronous operation. Fetch method will return a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) that makes it straightforward to write code that works in an asynchronous manner:

tsx

```
const getMoviesFromApi = () => {
  return fetch('https://reactnative.dev/movies.json')
    .then(response => response.json())
    .then(json => {
      return json.movies;
    })
    .catch(error => {
      console.error(error);
    });
};
```

You can also use the `async` / `await` syntax in a React Native app:

tsx

```
const getMoviesFromApiAsync = async () => {
  try {
    const response = await fetch(
      'https://reactnative.dev/movies.json',
    );
    const json = await response.json();
    return json.movies;
  } catch (error) {
    console.error(error);
  }
};
```

Don't forget to catch any errors that may be thrown by `fetch`, otherwise they will be dropped silently.

* TypeScript
* JavaScript

info

By default, iOS 9.0 or later enforce App Transport Security (ATS). ATS requires any HTTP connection to use HTTPS. If you need to fetch from a cleartext URL (one that begins with `http`) you will first need to [add an ATS exception](/docs/integration-with-existing-apps.md#test-your-integration). If you know ahead of time what domains you will need access to, it is more secure to add exceptions only for those domains; if the domains are not known until runtime you can [disable ATS completely](/docs/publishing-to-app-store.md#1-enable-app-transport-security). Note however that from January 2017, [Apple's App Store review will require reasonable justification for disabling ATS](https://forums.developer.apple.com/thread/48979). See [Apple's documentation](https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW33) for more information.

tip

On Android, as of API Level 28, clear text traffic is also blocked by default. This behaviour can be overridden by setting [`android:usesCleartextTraffic`](https://developer.android.com/guide/topics/manifest/application-element#usesCleartextTraffic) in the app manifest file.

## Using Other Networking Libraries[‚Äã](#using-other-networking-libraries "Direct link to Using Other Networking Libraries")

The [XMLHttpRequest API](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) is built into React Native. This means that you can use third party libraries such as [frisbee](https://github.com/niftylettuce/frisbee) or [axios](https://github.com/axios/axios) that depend on it, or you can use the XMLHttpRequest API directly if you prefer.

tsx

```
const request = new XMLHttpRequest();
request.onreadystatechange = e => {
  if (request.readyState !== 4) {
    return;
  }

  if (request.status === 200) {
    console.log('success', request.responseText);
  } else {
    console.warn('error');
  }
};

request.open('GET', 'https://mywebsite.com/endpoint/');
request.send();
```

Caution

The security model for XMLHttpRequest is different than on web as there is no concept of [CORS](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing) in native apps.

## WebSocket Support[‚Äã](#websocket-support "Direct link to WebSocket Support")

React Native also supports [WebSockets](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket), a protocol which provides full-duplex communication channels over a single TCP connection.

tsx

```
const ws = new WebSocket('ws://host.com/path');

ws.onopen = () => {
  // connection opened
  ws.send('something'); // send a message
};

ws.onmessage = e => {
  // a message was received
  console.log(e.data);
};

ws.onerror = e => {
  // an error occurred
  console.log(e.message);
};

ws.onclose = e => {
  // connection closed
  console.log(e.code, e.reason);
};
```

## Known Issues with `fetch` and cookie based authentication[‚Äã](#known-issues-with-fetch-and-cookie-based-authentication "Direct link to known-issues-with-fetch-and-cookie-based-authentication")

The following options are currently not working with `fetch`

* `redirect:manual`
* `credentials:omit`

- Having same name headers on Android will result in only the latest one being present. A temporary solution can be found here: <https://github.com/facebook/react-native/issues/18837#issuecomment-398779994>.
- Cookie based authentication is currently unstable. You can view some of the issues raised here: <https://github.com/facebook/react-native/issues/23185>
- As a minimum on iOS, when redirected through a `302`, if a `Set-Cookie` header is present, the cookie is not set properly. Since the redirect cannot be handled manually this might cause a scenario where infinite requests occur if the redirect is the result of an expired session.

## Configuring NSURLSession on iOS[‚Äã](#configuring-nsurlsession-on-ios "Direct link to Configuring NSURLSession on iOS")

For some applications it may be appropriate to provide a custom `NSURLSessionConfiguration` for the underlying `NSURLSession` that is used for network requests in a React Native application running on iOS. For instance, one may need to set a custom user agent string for all network requests coming from the app or supply `NSURLSession` with an ephemeral `NSURLSessionConfiguration`. The function `RCTSetCustomNSURLSessionConfigurationProvider` allows for such customization. Remember to add the following import to the file in which `RCTSetCustomNSURLSessionConfigurationProvider` will be called:

objectivec

```
#import <React/RCTHTTPRequestHandler.h>
```

`RCTSetCustomNSURLSessionConfigurationProvider` should be called early in the application life cycle such that it is readily available when needed by React, for instance:

objectivec

```
-(void)application:(__unused UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

  // set RCTSetCustomNSURLSessionConfigurationProvider
  RCTSetCustomNSURLSessionConfigurationProvider(^NSURLSessionConfiguration *{
     NSURLSessionConfiguration *configuration = [NSURLSessionConfiguration defaultSessionConfiguration];
     // configure the session
     return configuration;
  });

  // set up React
  _bridge = [[RCTBridge alloc] initWithDelegate:self launchOptions:launchOptions];
}
```


---

# Nodes from refs

React Native apps render a native view tree that represents the UI, similar to how React DOM does on Web (the DOM tree). React Native provides imperative access to this tree via [refs](https://react.dev/learn/manipulating-the-dom-with-refs), which are returned by all native components (including those rendered by built-in components like [`View`](/docs/next/view)).

React Native provides 3 types of nodes:

* [Elements](/docs/next/element-nodes): element nodes represent native components in the native view tree (similar to [Element](https://developer.mozilla.org/en-US/docs/Web/API/Element) nodes on Web). They are provided by all native components via refs.
* [Text](/docs/next/text-nodes): text nodes represent raw text content on the tree (similar to [`Text`](https://developer.mozilla.org/en-US/docs/Web/API/Text) nodes on Web). They are not directly accessible via `refs`, but can be accessed using methods like [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes) on element refs.
* [Documents](/docs/next/document-nodes): document nodes represent a complete native view tree (similar to [`Document`](https://developer.mozilla.org/en-US/docs/Web/API/Document) nodes on Web). Like text nodes, they can only be accessed through other nodes, using properties like [`ownerDocument`](https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument).

As on Web, these nodes can be used to traverse the rendered UI tree, access layout information or execute imperative operations like `focus`.

info

**Unlike on Web, these nodes do not allow mutation** (e.g.: [`node.appendChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild)), as the tree contents are fully managed by the React renderer.


---

# Optimizing FlatList Configuration

## Terms[‚Äã](#terms "Direct link to Terms")

* **VirtualizedList:** The component behind `FlatList` (React Native's implementation of the [`Virtual List`](https://bvaughn.github.io/react-virtualized/#/components/List) concept.)

* **Memory consumption:** How much information about your list is being stored in memory, which could lead to an app crash.

* **Responsiveness:** Application ability to respond to interactions. Low responsiveness, for instance, is when you touch on a component and it waits a bit to respond, instead of responding immediately as expected.

* **Blank areas:** When `VirtualizedList` can't render your items fast enough, you may enter a part of your list with non-rendered components that appear as blank space.

* **Viewport:** The visible area of content that is rendered to pixels.

* **Window:** The area in which items should be mounted, which is generally much larger than the viewport.

## Props[‚Äã](#props "Direct link to Props")

Here are a list of props that can help to improve `FlatList` performance:

### `removeClippedSubviews`[‚Äã](#removeclippedsubviews "Direct link to removeclippedsubviews")

| Type    | Default                              |
| ------- | ------------------------------------ |
| Boolean | `true` on Android, otherwise `false` |

If `true`, views that are outside of the viewport are automatically detached from the native view hierarchy.

**Pros:** This reduces time spent on the main thread, and thus reduces the risk of dropped frames, by excluding views outside of the viewport from the native rendering and drawing traversals.

**Cons:** Be aware that this implementation can have bugs, such as missing content (mainly observed on iOS), especially if you are doing complex things with transforms and/or absolute positioning. Also note this does not save significant memory because the views are not deallocated, only detached.

### `maxToRenderPerBatch`[‚Äã](#maxtorenderperbatch "Direct link to maxtorenderperbatch")

| Type   | Default |
| ------ | ------- |
| Number | 10      |

It is a `VirtualizedList` prop that can be passed through `FlatList`. This controls the amount of items rendered per batch, which is the next chunk of items rendered on every scroll.

**Pros:** Setting a bigger number means less visual blank areas when scrolling (increases the fill rate).

**Cons:** More items per batch means longer periods of JavaScript execution potentially blocking other event processing, like presses, hurting responsiveness.

### `updateCellsBatchingPeriod`[‚Äã](#updatecellsbatchingperiod "Direct link to updatecellsbatchingperiod")

| Type   | Default |
| ------ | ------- |
| Number | 50      |

While `maxToRenderPerBatch` tells the amount of items rendered per batch, setting `updateCellsBatchingPeriod` tells your `VirtualizedList` the delay in milliseconds between batch renders (how frequently your component will be rendering the windowed items).

**Pros:** Combining this prop with `maxToRenderPerBatch` gives you the power to, for example, render more items in a less frequent batch, or less items in a more frequent batch.

**Cons:** Less frequent batches may cause blank areas, More frequent batches may cause responsiveness issues.

### initialNumToRender[‚Äã](#initialnumtorender "Direct link to initialNumToRender")

| Type   | Default |
| ------ | ------- |
| Number | 10      |

The initial amount of items to render.

**Pros:** Define precise number of items that would cover the screen for every device. This can be a big performance boost for the initial render.

**Cons:** Setting a low `initialNumToRender` may cause blank areas, especially if it's too small to cover the viewport on initial render.

### `windowSize`[‚Äã](#windowsize "Direct link to windowsize")

| Type   | Default |
| ------ | ------- |
| Number | 21      |

The number passed here is a measurement unit where 1 is equivalent to your viewport height. The default value is 21 (10 viewports above, 10 below, and one in between).

**Pros:** Bigger `windowSize` will result in less chance of seeing blank space while scrolling. On the other hand, smaller `windowSize` will result in fewer items mounted simultaneously, saving memory.

**Cons:** For a bigger `windowSize`, you will have more memory consumption. For a lower `windowSize`, you will have a bigger chance of seeing blank areas.

## List items[‚Äã](#list-items "Direct link to List items")

Below are some tips about list item components. They are the core of your list, so they need to be fast.

### Use basic components[‚Äã](#use-basic-components "Direct link to Use basic components")

The more complex your components are, the slower they will render. Try to avoid a lot of logic and nesting in your list items. If you are reusing this list item component a lot in your app, create a component only for your big lists and make them with as little logic and nesting as possible.

### Use light components[‚Äã](#use-light-components "Direct link to Use light components")

The heavier your components are, the slower they render. Avoid heavy images (use a cropped version or thumbnail for list items, as small as possible). Talk to your design team, use as little effects and interactions and information as possible in your list. Show them in your item's detail.

### Use `memo()`[‚Äã](#use-memo "Direct link to use-memo")

`React.memo()` creates a memoized component that will be re-rendered only when the props passed to the component change. We can use this function to optimize the components in the FlatList.

tsx

```
import React, {memo} from 'react';
import {View, Text} from 'react-native';

const MyListItem = memo(
  ({title}: {title: string}) => (
    <View>
      <Text>{title}</Text>
    </View>
  ),
  (prevProps, nextProps) => {
    return prevProps.title === nextProps.title;
  },
);

export default MyListItem;
```

In this example, we have determined that MyListItem should be re-rendered only when the title changes. We passed the comparison function as the second argument to React.memo() so that the component is re-rendered only when the specified prop is changed. If the comparison function returns true, the component will not be re-rendered.

### Use cached optimized images[‚Äã](#use-cached-optimized-images "Direct link to Use cached optimized images")

You can use the community packages (such as [@d11/react-native-fast-image](https://github.com/ds-horizon/react-native-fast-image) from [Dream11](https://github.com/ds-horizon)) for more performant images. Every image in your list is a `new Image()` instance. The faster it reaches the `loaded` hook, the faster your JavaScript thread will be free again.

### Use `getItemLayout`[‚Äã](#use-getitemlayout "Direct link to use-getitemlayout")

If all your list item components have the same height (or width, for a horizontal list), providing the [getItemLayout](/docs/flatlist.md#getitemlayout) prop removes the need for your `FlatList` to manage async layout calculations. This is a very desirable optimization technique.

If your components have dynamic size and you really need performance, consider asking your design team if they may think of a redesign in order to perform better.

### Use `keyExtractor` or `key`[‚Äã](#use-keyextractor-or-key "Direct link to use-keyextractor-or-key")

You can set the [`keyExtractor`](/docs/flatlist.md#keyextractor) to your `FlatList` component. This prop is used for caching and as the React `key` to track item re-ordering.

You can also use a `key` prop in your item component.

### Avoid anonymous function on `renderItem`[‚Äã](#avoid-anonymous-function-on-renderitem "Direct link to avoid-anonymous-function-on-renderitem")

For functional components, move the `renderItem` function outside of the returned JSX. Also, ensure that it is wrapped in a `useCallback` hook to prevent it from being recreated each render.

For class components, move the `renderItem` function outside of the render function, so it won't recreate itself each time the render function is called.

tsx

```
const renderItem = useCallback(({item}) => (
   <View key={item.key}>
      <Text>{item.title}</Text>
   </View>
 ), []);

return (
  // ...
  <FlatList data={items} renderItem={renderItem} />;
  // ...
);
```


---

# Optimizing JavaScript loading

Parsing and running JavaScript code requires memory and time. Because of this, as your app grows, it's often useful to delay loading code until it's needed for the first time. React Native comes with some standard optimizations that are on by default, and there are techniques you can adopt in your own code to help React load your app more efficiently. There are also some advanced automatic optimizations (with their own tradeoffs) that are suitable for very large apps.

## Recommended: Use Hermes[‚Äã](#recommended-use-hermes "Direct link to Recommended: Use Hermes")

Hermes is the default engine for new React Native apps, and is highly optimized for efficient code loading. In release builds, JavaScript code is fully compiled to bytecode ahead of time. Bytecode is loaded to memory on-demand and does not need to be parsed like plain JavaScript does.

info

Read more about using Hermes in React Native [here](/docs/hermes.md).

## Recommended: Lazy-load large components[‚Äã](#recommended-lazy-load-large-components "Direct link to Recommended: Lazy-load large components")

If a component with a lot of code/dependencies is not likely to be used when initially rendering your app, you can use React's [`lazy`](https://react.dev/reference/react/lazy) API to defer loading its code until it's rendered for the first time. Typically, you should consider lazy-loading screen-level components in your app, so that adding new screens to your app does not increase its startup time.

info

Read more about [lazy-loading components with Suspense ](https://react.dev/reference/react/lazy#suspense-for-code-splitting), including code examples, in React's documentation.

### Tip: Avoid module side effects[‚Äã](#tip-avoid-module-side-effects "Direct link to Tip: Avoid module side effects")

Lazy-loading components can change the behavior of your app if your component modules (or their dependencies) have *side effects*, such as modifying global variables or subscribing to events outside of a component. Most modules in React apps should not have any side effects.

SideEffects.tsx

```
import Logger from './utils/Logger';

//  üö© üö© üö© Side effect! This must be executed before React can even begin to
// render the SplashScreen component, and can unexpectedly break code elsewhere
// in your app if you later decide to lazy-load SplashScreen.
global.logger = new Logger();

export function SplashScreen() {
  // ...
}
```

## Advanced: Call `require` inline[‚Äã](#advanced-call-require-inline "Direct link to advanced-call-require-inline")

Sometimes you may want to defer loading some code until you use it for the first time, without using `lazy` or an asynchronous `import()`. You can do this by using the [`require()`](https://metrobundler.dev/docs/module-api/#require) function where you would otherwise use a static `import` at the top of the file.

VeryExpensive.tsx

```
import {Component} from 'react';
import {Text} from 'react-native';
// ... import some very expensive modules

export default function VeryExpensive() {
  // ... lots and lots of rendering logic
  return <Text>Very Expensive Component</Text>;
}
```

Optimized.tsx

```
import {useCallback, useState} from 'react';
import {TouchableOpacity, View, Text} from 'react-native';
// Usually we would write a static import:
// import VeryExpensive from './VeryExpensive';

let VeryExpensive = null;

export default function Optimize() {
  const [needsExpensive, setNeedsExpensive] = useState(false);
  const didPress = useCallback(() => {
    if (VeryExpensive == null) {
      VeryExpensive = require('./VeryExpensive').default;
    }

    setNeedsExpensive(true);
  }, []);

  return (
    <View style={{marginTop: 20}}>
      <TouchableOpacity onPress={didPress}>
        <Text>Load</Text>
      </TouchableOpacity>
      {needsExpensive ? <VeryExpensive /> : null}
    </View>
  );
}
```

## Advanced: Automatically inline `require` calls[‚Äã](#advanced-automatically-inline-require-calls "Direct link to advanced-automatically-inline-require-calls")

If you use the React Native CLI to build your app, `require` calls (but not `import`s) will automatically be inlined for you, both in your code and inside any third-party packages (`node_modules`) you use.

tsx

```
import {useCallback, useState} from 'react';
import {TouchableOpacity, View, Text} from 'react-native';

// This top-level require call will be evaluated lazily as part of the component below.
const VeryExpensive = require('./VeryExpensive').default;

export default function Optimize() {
  const [needsExpensive, setNeedsExpensive] = useState(false);
  const didPress = useCallback(() => {
    setNeedsExpensive(true);
  }, []);

  return (
    <View style={{marginTop: 20}}>
      <TouchableOpacity onPress={didPress}>
        <Text>Load</Text>
      </TouchableOpacity>
      {needsExpensive ? <VeryExpensive /> : null}
    </View>
  );
}
```

info

Some React Native frameworks disable this behavior. In particular, in Expo projects, `require` calls are not inlined by default. You can enable this optimization by editing your project's Metro config and setting `inlineRequires: true` in [`getTransformOptions`](https://metrobundler.dev/docs/configuration#gettransformoptions).

### Pitfalls of inline `require`s[‚Äã](#pitfalls-of-inline-requires "Direct link to pitfalls-of-inline-requires")

Inlining `require` calls changes the order in which modules are evaluated, and can even cause some modules to *never* be evaluated. This is usually safe to do automatically, because JavaScript modules are often written to be side-effect-free.

If one of your modules does have side effects - for example, if it initializes some logging mechanism, or patches a global API used by the rest of your code - then you might see unexpected behavior or even crashes. In those cases, you may want to exclude certain modules from this optimization, or disable it entirely.

To **disable all automatic inlining of `require` calls:**

Update your `metro.config.js` to set the `inlineRequires` transformer option to `false`:

metro.config.js

```
module.exports = {
  transformer: {
    async getTransformOptions() {
      return {
        transform: {
          inlineRequires: false,
        },
      };
    },
  },
};
```

To only **exclude certain modules from `require` inlining:**

There are two relevant transformer options: `inlineRequires.blockList` and `nonInlinedRequires`. See the code snippet for examples of how to use each one.

metro.config.js

```
module.exports = {
  transformer: {
    async getTransformOptions() {
      return {
        transform: {
          inlineRequires: {
            blockList: {
              // require() calls in `DoNotInlineHere.js` will not be inlined.
              [require.resolve('./src/DoNotInlineHere.js')]: true,

              // require() calls anywhere else will be inlined, unless they
              // match any entry nonInlinedRequires (see below).
            },
          },
          nonInlinedRequires: [
            // require('react') calls will not be inlined anywhere
            'react',
          ],
        },
      };
    },
  },
};
```

See the documentation for [`getTransformOptions` in Metro](https://metrobundler.dev/docs/configuration#gettransformoptions) for more details on setting up and fine-tuning your inline `require`s.

## Advanced: Use random access module bundles (non-Hermes)[‚Äã](#advanced-use-random-access-module-bundles-non-hermes "Direct link to Advanced: Use random access module bundles (non-Hermes)")

tip

**Not supported when [using Hermes](#use-hermes).** Hermes bytecode is not compatible with the RAM bundle format, and provides the same (or better) performance in all use cases.

Random access module bundles (also known as RAM bundles) work in conjunction with the techniques mentioned above to limit the amount of JavaScript code that needs to be parsed and loaded into memory. Each module is stored as a separate string (or file) which is only parsed when the module needs to be executed.

RAM bundles may be physically split into separate files, or they may use the *indexed* format, consisting of a lookup table of multiple modules in a single file.

* Android
* iOS

On Android enable the RAM format by editing your `android/app/build.gradle` file. Before the line `apply from: "../../node_modules/react-native/react.gradle"` add or amend the `project.ext.react` block:

```
project.ext.react = [
  bundleCommand: "ram-bundle",
]
```

Use the following lines on Android if you want to use a single indexed file:

```
project.ext.react = [
  bundleCommand: "ram-bundle",
  extraPackagerArgs: ["--indexed-ram-bundle"]
]
```

On iOS, RAM bundles are always indexed ( = single file).

Enable the RAM format in Xcode by editing the build phase "Bundle React Native code and images". Before `../node_modules/react-native/scripts/react-native-xcode.sh` add `export BUNDLE_COMMAND="ram-bundle"`:

```
export BUNDLE_COMMAND="ram-bundle"
export NODE_BINARY=node
../node_modules/react-native/scripts/react-native-xcode.sh
```

See the documentation for [`getTransformOptions` in Metro](https://metrobundler.dev/docs/configuration#gettransformoptions) for more details on setting up and fine-tuning your RAM bundle build.


---

# Other Debugging Methods

This page covers how to use legacy JavaScript debugging methods. If you are getting started with a new React Native or Expo app, we recommend using [React Native DevTools](/docs/react-native-devtools.md).

## Safari Developer Tools (direct JSC debugging)[‚Äã](#safari-developer-tools-direct-jsc-debugging "Direct link to Safari Developer Tools (direct JSC debugging)")

You can use Safari to debug the iOS version of your app when using [JavaScriptCore](https://trac.webkit.org/wiki/JavaScriptCore) (JSC) as your app's runtime.

1. **Physical devices only**: Open the Settings app, and navigate to Safari > Advanced, and make sure "Web Inspector" is turned on.
2. On your Mac, open Safari and enable the Develop menu. This can be found under Safari > Settings..., then the Advanced tab, then selecting "Show features for web developers".
3. Find your device under the Develop menu, and select the "JSContext" item from the submenu. This will open Safari's Web Inspector, which includes Console and Sources panels similar to Chrome DevTools.

![Opening Safari Web Inspector](/assets/images/debugging-safari-developer-tools-5aefdee28e230260908d691621c4fa63.jpg)

tip

While source maps may not be enabled by default, you can follow [this guide](https://blog.nparashuram.com/2019/10/debugging-react-native-ios-apps-with.html) or [video](https://www.youtube.com/watch?v=GrGqIIz51k4) to enable them and set break points at the right places in the source code.

tip

Every time the app is reloaded, a new JSContext is created. Choosing "Automatically Show Web Inspectors for JSContexts" saves you from having to select the latest JSContext manually.

## Remote JavaScript Debugging (removed)[‚Äã](#remote-javascript-debugging-removed "Direct link to Remote JavaScript Debugging (removed)")

Important

Remote JavaScript Debugging has been removed as of React Native 0.79. See the original [deprecation announcement](https://github.com/react-native-community/discussions-and-proposals/discussions/734).

If you are on an older version of React Native, please go to the docs [for your version](/versions.md).

![The remote debugger window in Chrome](/assets/images/debugging-chrome-remote-debugger-ddf0ea5593f18b93a26ed3a8ea44e42e.jpg)


---

# Out-of-Tree Platforms

React Native is not only for Android and iOS devices - our partners and the community maintain projects that bring React Native to other platforms, such as:

**From Partners**

* [React Native macOS](https://github.com/microsoft/react-native-macos) - React Native for macOS and Cocoa.
* [React Native Windows](https://github.com/microsoft/react-native-windows) - React Native for Microsoft's Universal Windows Platform (UWP).
* [React Native visionOS](https://github.com/callstack/react-native-visionos) - React Native for Apple's visionOS.

**From Community**

* [React Native tvOS](https://github.com/react-native-tvos/react-native-tvos) - React Native for Apple TV and Android TV devices.
* [React Native Web](https://github.com/necolas/react-native-web) - React Native on the web using React DOM.
* [React Native Skia](https://github.com/react-native-skia/react-native-skia) - React Native using [Skia](https://skia.org/) as a renderer. Currently supports Linux and macOS.

## Creating your own React Native platform[‚Äã](#creating-your-own-react-native-platform "Direct link to Creating your own React Native platform")

Right now the process of creating a React Native platform from scratch is not very well documented - one of the goals of the upcoming re-architecture ([Fabric](/blog/2018/06/14/state-of-react-native-2018)) is to make maintaining a platform easier.

### Bundling[‚Äã](#bundling "Direct link to Bundling")

As of React Native 0.57 you can now register your React Native platform with React Native's JavaScript bundler, [Metro](https://metrobundler.dev/). This means you can pass `--platform example` to `npx react-native bundle`, and it will look for JavaScript files with the `.example.js` suffix.

To register your platform with RNPM, your module's name must match one of these patterns:

* `react-native-example` - It will search all top-level modules that start with `react-native-`
* `@org/react-native-example` - It will search for modules that start with `react-native-` under any scope
* `@react-native-example/module` - It will search in all modules under scopes with names starting with `@react-native-`

You must also have an entry in your `package.json` like this:

json

```
{
  "rnpm": {
    "haste": {
      "providesModuleNodeModules": ["react-native-example"],
      "platforms": ["example"]
    }
  }
}
```

`"providesModuleNodeModules"` is an array of modules that will get added to the Haste module search path, and `"platforms"` is an array of platform suffixes that will be added as valid platforms.


---

# PanResponder

`PanResponder` reconciles several touches into a single gesture. It makes single-touch gestures resilient to extra touches, and can be used to recognize basic multi-touch gestures.

By default, `PanResponder` holds an `InteractionManager` handle to block long-running JS events from interrupting active gestures.

It provides a predictable wrapper of the responder handlers provided by the [gesture responder system](/docs/gesture-responder-system.md). For each handler, it provides a new `gestureState` object alongside the native event object:

```
onPanResponderMove: (event, gestureState) => {}
```

A native event is a synthetic touch event with form of [PressEvent](/docs/pressevent.md).

A `gestureState` object has the following:

* `stateID` - ID of the gestureState- persisted as long as there's at least one touch on screen
* `moveX` - the latest screen coordinates of the recently-moved touch
* `moveY` - the latest screen coordinates of the recently-moved touch
* `x0` - the screen coordinates of the responder grant
* `y0` - the screen coordinates of the responder grant
* `dx` - accumulated distance of the gesture since the touch started
* `dy` - accumulated distance of the gesture since the touch started
* `vx` - current velocity of the gesture
* `vy` - current velocity of the gesture
* `numberActiveTouches` - Number of touches currently on screen

## Usage Pattern[‚Äã](#usage-pattern "Direct link to Usage Pattern")

tsx

```
const ExampleComponent = () => {
  const panResponder = React.useRef(
    PanResponder.create({
      // Ask to be the responder:
      onStartShouldSetPanResponder: (evt, gestureState) => true,
      onStartShouldSetPanResponderCapture: (evt, gestureState) =>
        true,
      onMoveShouldSetPanResponder: (evt, gestureState) => true,
      onMoveShouldSetPanResponderCapture: (evt, gestureState) =>
        true,

      onPanResponderGrant: (evt, gestureState) => {
        // The gesture has started. Show visual feedback so the user knows
        // what is happening!
        // gestureState.d{x,y} will be set to zero now
      },
      onPanResponderMove: (evt, gestureState) => {
        // The most recent move distance is gestureState.move{X,Y}
        // The accumulated gesture distance since becoming responder is
        // gestureState.d{x,y}
      },
      onPanResponderTerminationRequest: (evt, gestureState) =>
        true,
      onPanResponderRelease: (evt, gestureState) => {
        // The user has released all touches while this view is the
        // responder. This typically means a gesture has succeeded
      },
      onPanResponderTerminate: (evt, gestureState) => {
        // Another component has become the responder, so this gesture
        // should be cancelled
      },
      onShouldBlockNativeResponder: (evt, gestureState) => {
        // Returns whether this component should block native components from becoming the JS
        // responder. Returns true by default. Is currently only supported on android.
        return true;
      },
    }),
  ).current;

  return <View {...panResponder.panHandlers} />;
};
```

## Example[‚Äã](#example "Direct link to Example")

`PanResponder` works with `Animated` API to help build complex gestures in the UI. The following example contains an animated `View` component which can be dragged freely across the screen

Try the [PanResponder example in RNTester](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/PanResponder/PanResponderExample.js).

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `create()`[‚Äã](#create "Direct link to create")

tsx

```
static create(config: PanResponderCallbacks): PanResponderInstance;
```

**Parameters:**

| Name           | Type   | Description |
| -------------- | ------ | ----------- |
| configRequired | object | Refer below |

The `config` object provides enhanced versions of all of the responder callbacks that provide not only the [`PressEvent`](/docs/pressevent.md), but also the `PanResponder` gesture state, by replacing the word `Responder` with `PanResponder` in each of the typical `onResponder*` callbacks. For example, the `config` object would look like:

* `onMoveShouldSetPanResponder: (e, gestureState) => {...}`
* `onMoveShouldSetPanResponderCapture: (e, gestureState) => {...}`
* `onStartShouldSetPanResponder: (e, gestureState) => {...}`
* `onStartShouldSetPanResponderCapture: (e, gestureState) => {...}`
* `onPanResponderReject: (e, gestureState) => {...}`
* `onPanResponderGrant: (e, gestureState) => {...}`
* `onPanResponderStart: (e, gestureState) => {...}`
* `onPanResponderEnd: (e, gestureState) => {...}`
* `onPanResponderRelease: (e, gestureState) => {...}`
* `onPanResponderMove: (e, gestureState) => {...}`
* `onPanResponderTerminate: (e, gestureState) => {...}`
* `onPanResponderTerminationRequest: (e, gestureState) => {...}`
* `onShouldBlockNativeResponder: (e, gestureState) => {...}`

In general, for events that have capture equivalents, we update the gestureState once in the capture phase and can use it in the bubble phase as well.

Be careful with `onStartShould*` callbacks. They only reflect updated `gestureState` for start/end events that bubble/capture to the Node. Once the node is the responder, you can rely on every start/end event being processed by the gesture and `gestureState` being updated accordingly. (numberActiveTouches) may not be totally accurate unless you are the responder.


---

# Performance Overview

A compelling reason to use React Native instead of WebView-based tools is to achieve at least 60 frames per second and provide a native look and feel to your apps. Whenever feasible, we aim for React Native to handle optimizations automatically, allowing you to focus on your app without worrying about performance. However, there are certain areas where we haven't quite reached that level yet, and others where React Native (similar to writing native code directly) cannot determine the best optimization approach for you. In such cases, manual intervention becomes necessary. We strive to deliver buttery-smooth UI performance by default, but there may be instances where that isn't possible.

This guide is intended to teach you some basics to help you to [troubleshoot performance issues](/docs/profiling.md), as well as discuss [common sources of problems and their suggested solutions](/docs/performance.md#common-sources-of-performance-problems).

## What you need to know about frames[‚Äã](#what-you-need-to-know-about-frames "Direct link to What you need to know about frames")

Your grandparents' generation called movies ["moving pictures"](https://www.youtube.com/watch?v=F1i40rnpOsA) for a reason: realistic motion in video is an illusion created by quickly changing static images at a consistent speed. We refer to each of these images as frames. The number of frames that is displayed each second has a direct impact on how smooth and ultimately life-like a video (or user interface) seems to be. iOS and Android devices display at least 60 frames per second, which gives you and the UI system at most 16.67ms to do all of the work needed to generate the static image (frame) that the user will see on the screen for that interval. If you are unable to do the work necessary to generate that frame within the allotted time slot, then you will "drop a frame" and the UI will appear unresponsive.

Now to confuse the matter a little bit, open up the [Dev Menu](/docs/debugging.md#opening-the-dev-menu) in your app and toggle `Show Perf Monitor`. You will notice that there are two different frame rates.

![Performance Monitor screenshot](/assets/images/PerfUtil-38a2ddbf1777887d70563a644c72aa64.png)

### JS frame rate (JavaScript thread)[‚Äã](#js-frame-rate-javascript-thread "Direct link to JS frame rate (JavaScript thread)")

For most React Native applications, your business logic will run on the JavaScript thread. This is where your React application lives, API calls are made, touch events are processed, and more. Updates to native-backed views are batched and sent over to the native side at the end of each iteration of the event loop, before the frame deadline (if all goes well). If the JavaScript thread is unresponsive for a frame, it will be considered a dropped frame. For example, if you were to set a new state on the root component of a complex application and it resulted in re-rendering computationally expensive component subtrees, it's conceivable that this might take 200ms and result in 12 frames being dropped. Any animations controlled by JavaScript would appear to freeze during that time. If enough frames are dropped, the user will feel it.

An example is responding to touches: if you are doing work across multiple frames on the JavaScript thread, you might notice a delay in responding to `TouchableOpacity`, for example. This is because the JavaScript thread is busy and cannot process the raw touch events sent over from the main thread. As a result, `TouchableOpacity` cannot react to the touch events and command the native view to adjust its opacity.

### UI frame rate (main thread)[‚Äã](#ui-frame-rate-main-thread "Direct link to UI frame rate (main thread)")

You may have noticed that performance of native stack navigators (such as the [@react-navigation/native-stack](https://reactnavigation.org/docs/native-stack-navigator) provided by React Navigation) is better out of the box than JavaScript-based stack navigators. This is because the transition animations are executed on the native main UI thread, so they are not interrupted by frame drops on the JavaScript thread.

Similarly, you can happily scroll up and down through a `ScrollView` when the JavaScript thread is locked up because the `ScrollView` lives on the main thread. The scroll events are dispatched to the JS thread, but their receipt is not necessary for the scroll to occur.

## Common sources of performance problems[‚Äã](#common-sources-of-performance-problems "Direct link to Common sources of performance problems")

### Running in development mode (`dev=true`)[‚Äã](#running-in-development-mode-devtrue "Direct link to running-in-development-mode-devtrue")

JavaScript thread performance suffers greatly when running in dev mode. This is unavoidable: a lot more work needs to be done at runtime to provide you with good warnings and error messages. Always make sure to test performance in [release builds](/docs/running-on-device.md#building-your-app-for-production).

### Using `console.log` statements[‚Äã](#using-consolelog-statements "Direct link to using-consolelog-statements")

When running a bundled app, these statements can cause a big bottleneck in the JavaScript thread. This includes calls from debugging libraries such as [redux-logger](https://github.com/evgenyrodionov/redux-logger), so make sure to remove them before bundling. You can also use this [babel plugin](https://babeljs.io/docs/plugins/transform-remove-console/) that removes all the `console.*` calls. You need to install it first with `npm i babel-plugin-transform-remove-console --save-dev`, and then edit the `.babelrc` file under your project directory like this:

json

```
{
  "env": {
    "production": {
      "plugins": ["transform-remove-console"]
    }
  }
}
```

This will automatically remove all `console.*` calls in the release (production) versions of your project.

It is recommended to use the plugin even if no `console.*` calls are made in your project. A third party library could also call them.

### `FlatList` rendering is too slow or scroll performance is bad for large lists[‚Äã](#flatlist-rendering-is-too-slow-or-scroll-performance-is-bad-for-large-lists "Direct link to flatlist-rendering-is-too-slow-or-scroll-performance-is-bad-for-large-lists")

If your [`FlatList`](/docs/flatlist.md) is rendering slowly, be sure that you've implemented [`getItemLayout`](/docs/flatlist.md#getitemlayout) to optimize rendering speed by skipping measurement of the rendered items.

There are also other third-party list libraries that are optimized for performance, including [FlashList](https://github.com/shopify/flash-list) and [Legend List](https://github.com/legendapp/legend-list).

### Dropping JS thread FPS because of doing a lot of work on the JavaScript thread at the same time[‚Äã](#dropping-js-thread-fps-because-of-doing-a-lot-of-work-on-the-javascript-thread-at-the-same-time "Direct link to Dropping JS thread FPS because of doing a lot of work on the JavaScript thread at the same time")

"Slow Navigator transitions" is the most common manifestation of this, but there are other times this can happen. Using [`InteractionManager`](/docs/interactionmanager.md) can be a good approach, but if the user experience cost is too high to delay work during an animation, then you might want to consider [`LayoutAnimation`](/docs/layoutanimation.md).

The [`Animated API`](/docs/animated.md) currently calculates each keyframe on-demand on the JavaScript thread unless you [set `useNativeDriver: true`](/blog/2017/02/14/using-native-driver-for-animated#how-do-i-use-this-in-my-app), while [`LayoutAnimation`](/docs/layoutanimation.md) leverages Core Animation and is unaffected by JS thread and main thread frame drops.

One case for using this is animating in a modal (sliding down from top and fading in a translucent overlay) while initializing and perhaps receiving responses for several network requests, rendering the contents of the modal, and updating the view where the modal was opened from. See the [Animations guide](/docs/animations.md) for more information about how to use `LayoutAnimation`.

**Caveats:**

* `LayoutAnimation` only works for fire-and-forget animations ("static" animations) -- if it must be interruptible, you will need to use [`Animated`](/docs/animated.md).

### Moving a view on the screen (scrolling, translating, rotating) drops UI thread FPS[‚Äã](#moving-a-view-on-the-screen-scrolling-translating-rotating-drops-ui-thread-fps "Direct link to Moving a view on the screen (scrolling, translating, rotating) drops UI thread FPS")

This is especially true on Android when you have text with a transparent background positioned on top of an image, or any other situation where alpha compositing would be required to re-draw the view on each frame. You will find that enabling `renderToHardwareTextureAndroid` can help with this significantly. For iOS, `shouldRasterizeIOS` is already enabled by default.

Be careful not to overuse this or your memory usage could go through the roof. Profile your performance and memory usage when using these props. If you don't plan to move a view anymore, turn this property off.

### Animating the size of an image drops UI thread FPS[‚Äã](#animating-the-size-of-an-image-drops-ui-thread-fps "Direct link to Animating the size of an image drops UI thread FPS")

On iOS, each time you adjust the width or height of an [`Image` component](/docs/image.md) it is re-cropped and scaled from the original image. This can be very expensive, especially for large images. Instead, use the `transform: [{scale}]` style property to animate the size. An example of when you might do this is when you tap an image and zoom it in to full screen.

### My TouchableX view isn't very responsive[‚Äã](#my-touchablex-view-isnt-very-responsive "Direct link to My TouchableX view isn't very responsive")

Sometimes, if we do an action in the same frame that we are adjusting the opacity or highlight of a component that is responding to a touch, we won't see that effect until after the `onPress` function has returned. This may occur if `onPress` sets a state that results in a heavy re-render and a few frames are dropped as a result. A solution to this is to wrap any action inside of your `onPress` handler in `requestAnimationFrame`:

tsx

```
function handleOnPress() {
  requestAnimationFrame(() => {
    this.doExpensiveAction();
  });
}
```


---

# PermissionsAndroid

### Project with Native Code Required

The following section only applies to projects with native code exposed. If you are using the managed Expo workflow, see the guide on [Permissions](https://docs.expo.dev/guides/permissions/) in the Expo documentation for the appropriate alternative.

`PermissionsAndroid` provides access to Android M's new permissions model. The so-called "normal" permissions are granted by default when the application is installed as long as they appear in `AndroidManifest.xml`. However, "dangerous" permissions require a dialog prompt. You should use this module for those permissions.

On devices before SDK version 23, the permissions are automatically granted if they appear in the manifest, so `check` should always result to `true` and `request` should always resolve to `PermissionsAndroid.RESULTS.GRANTED`.

If a user has previously turned off a permission that you prompt for, the OS will advise your app to show a rationale for needing the permission. The optional `rationale` argument will show a dialog prompt only if necessary - otherwise the normal permission prompt will appear.

### Example[‚Äã](#example "Direct link to Example")

### Permissions that require prompting the user[‚Äã](#permissions-that-require-prompting-the-user "Direct link to Permissions that require prompting the user")

Available as constants under `PermissionsAndroid.PERMISSIONS`:

* `READ_CALENDAR`: 'android.permission.READ\_CALENDAR'
* `WRITE_CALENDAR`: 'android.permission.WRITE\_CALENDAR'
* `CAMERA`: 'android.permission.CAMERA'
* `READ_CONTACTS`: 'android.permission.READ\_CONTACTS'
* `WRITE_CONTACTS`: 'android.permission.WRITE\_CONTACTS'
* `GET_ACCOUNTS`: 'android.permission.GET\_ACCOUNTS'
* `ACCESS_FINE_LOCATION`: 'android.permission.ACCESS\_FINE\_LOCATION'
* `ACCESS_COARSE_LOCATION`: 'android.permission.ACCESS\_COARSE\_LOCATION'
* `ACCESS_BACKGROUND_LOCATION`: 'android.permission.ACCESS\_BACKGROUND\_LOCATION'
* `RECORD_AUDIO`: 'android.permission.RECORD\_AUDIO'
* `READ_PHONE_STATE`: 'android.permission.READ\_PHONE\_STATE'
* `CALL_PHONE`: 'android.permission.CALL\_PHONE'
* `READ_CALL_LOG`: 'android.permission.READ\_CALL\_LOG'
* `WRITE_CALL_LOG`: 'android.permission.WRITE\_CALL\_LOG'
* `ADD_VOICEMAIL`: 'com.android.voicemail.permission.ADD\_VOICEMAIL'
* `USE_SIP`: 'android.permission.USE\_SIP'
* `PROCESS_OUTGOING_CALLS`: 'android.permission.PROCESS\_OUTGOING\_CALLS'
* `BODY_SENSORS`: 'android.permission.BODY\_SENSORS'
* `SEND_SMS`: 'android.permission.SEND\_SMS'
* `RECEIVE_SMS`: 'android.permission.RECEIVE\_SMS'
* `READ_SMS`: 'android.permission.READ\_SMS'
* `RECEIVE_WAP_PUSH`: 'android.permission.RECEIVE\_WAP\_PUSH'
* `RECEIVE_MMS`: 'android.permission.RECEIVE\_MMS'
* `READ_EXTERNAL_STORAGE`: 'android.permission.READ\_EXTERNAL\_STORAGE'
* `WRITE_EXTERNAL_STORAGE`: 'android.permission.WRITE\_EXTERNAL\_STORAGE'
* `BLUETOOTH_CONNECT`: 'android.permission.BLUETOOTH\_CONNECT'
* `BLUETOOTH_SCAN`: 'android.permission.BLUETOOTH\_SCAN'
* `BLUETOOTH_ADVERTISE`: 'android.permission.BLUETOOTH\_ADVERTISE'
* `ACCESS_MEDIA_LOCATION`: 'android.permission.ACCESS\_MEDIA\_LOCATION'
* `ACCEPT_HANDOVER`: 'android.permission.ACCEPT\_HANDOVER'
* `ACTIVITY_RECOGNITION`: 'android.permission.ACTIVITY\_RECOGNITION'
* `ANSWER_PHONE_CALLS`: 'android.permission.ANSWER\_PHONE\_CALLS'
* `READ_PHONE_NUMBERS`: 'android.permission.READ\_PHONE\_NUMBERS'
* `UWB_RANGING`: 'android.permission.UWB\_RANGING'
* `BODY_SENSORS_BACKGROUND`: 'android.permission.BODY\_SENSORS\_BACKGROUND'
* `READ_MEDIA_IMAGES`: 'android.permission.READ\_MEDIA\_IMAGES'
* `READ_MEDIA_VIDEO`: 'android.permission.READ\_MEDIA\_VIDEO'
* `READ_MEDIA_AUDIO`: 'android.permission.READ\_MEDIA\_AUDIO'
* `POST_NOTIFICATIONS`: 'android.permission.POST\_NOTIFICATIONS'
* `NEARBY_WIFI_DEVICES`: 'android.permission.NEARBY\_WIFI\_DEVICES'
* `READ_VOICEMAIL`: 'com.android.voicemail.permission.READ\_VOICEMAIL',
* `WRITE_VOICEMAIL`: 'com.android.voicemail.permission.WRITE\_VOICEMAIL',

### Result strings for requesting permissions[‚Äã](#result-strings-for-requesting-permissions "Direct link to Result strings for requesting permissions")

Available as constants under `PermissionsAndroid.RESULTS`:

* `GRANTED`: 'granted'
* `DENIED`: 'denied'
* `NEVER_ASK_AGAIN`: 'never\_ask\_again'

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `check()`[‚Äã](#check "Direct link to check")

tsx

```
static check(permission: Permission): Promise<boolean>;
```

Returns a promise resolving to a boolean value as to whether the specified permissions has been granted.

**Parameters:**

| Name       | Type   | Required | Description                  |
| ---------- | ------ | -------- | ---------------------------- |
| permission | string | Yes      | The permission to check for. |

***

### `request()`[‚Äã](#request "Direct link to request")

tsx

```
static request(
  permission: Permission,
  rationale?: Rationale,
): Promise<PermissionStatus>;
```

Prompts the user to enable a permission and returns a promise resolving to a string value (see result strings above) indicating whether the user allowed or denied the request or does not want to be asked again.

If `rationale` is provided, this function checks with the OS whether it is necessary to show a dialog explaining why the permission is needed (<https://developer.android.com/training/permissions/requesting.html#explain>) and then shows the system permission dialog.

**Parameters:**

| Name       | Type   | Required | Description                |
| ---------- | ------ | -------- | -------------------------- |
| permission | string | Yes      | The permission to request. |
| rationale  | object | No       | See `rationale` below.     |

**Rationale:**

| Name           | Type   | Required | Description                      |
| -------------- | ------ | -------- | -------------------------------- |
| title          | string | Yes      | The title of the dialog.         |
| message        | string | Yes      | The message of the dialog.       |
| buttonPositive | string | Yes      | The text of the positive button. |
| buttonNegative | string | No       | The text of the negative button. |
| buttonNeutral  | string | No       | The text of the neutral button.  |

***

### `requestMultiple()`[‚Äã](#requestmultiple "Direct link to requestmultiple")

tsx

```
static requestMultiple(
  permissions: Permission[],
): Promise<{[key in Permission]: PermissionStatus}>;
```

Prompts the user to enable multiple permissions in the same dialog and returns an object with the permissions as keys and strings as values (see result strings above) indicating whether the user allowed or denied the request or does not want to be asked again.

**Parameters:**

| Name        | Type  | Required | Description                      |
| ----------- | ----- | -------- | -------------------------------- |
| permissions | array | Yes      | Array of permissions to request. |


---

# PixelRatio

`PixelRatio` gives you access to the device's pixel density and font scale.

## Fetching a correctly sized image[‚Äã](#fetching-a-correctly-sized-image "Direct link to Fetching a correctly sized image")

You should get a higher resolution image if you are on a high pixel density device. A good rule of thumb is to multiply the size of the image you display by the pixel ratio.

tsx

```
const image = getImage({
  width: PixelRatio.getPixelSizeForLayoutSize(200),
  height: PixelRatio.getPixelSizeForLayoutSize(100),
});
<Image source={image} style={{width: 200, height: 100}} />;
```

## Pixel grid snapping[‚Äã](#pixel-grid-snapping "Direct link to Pixel grid snapping")

In iOS, you can specify positions and dimensions for elements with arbitrary precision, for example 29.674825. But, ultimately the physical display only have a fixed number of pixels, for example 640√ó1136 for iPhone SE (1st generation) or 828√ó1792 for iPhone 11. iOS tries to be as faithful as possible to the user value by spreading one original pixel into multiple ones to trick the eye. The downside of this technique is that it makes the resulting element look blurry.

In practice, we found out that developers do not want this feature and they have to work around it by doing manual rounding in order to avoid having blurry elements. In React Native, we are rounding all the pixels automatically.

We have to be careful when to do this rounding. You never want to work with rounded and unrounded values at the same time as you're going to accumulate rounding errors. Having even one rounding error is deadly because a one pixel border may vanish or be twice as big.

In React Native, everything in JavaScript and within the layout engine works with arbitrary precision numbers. It's only when we set the position and dimensions of the native element on the main thread that we round. Also, rounding is done relative to the root rather than the parent, again to avoid accumulating rounding errors.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `get()`[‚Äã](#get "Direct link to get")

tsx

```
static get(): number;
```

Returns the device pixel density. Some examples:

* `PixelRatio.get() === 1`
  * [mdpi Android devices](https://material.io/tools/devices/)

* `PixelRatio.get() === 1.5`
  * [hdpi Android devices](https://material.io/tools/devices/)

* `PixelRatio.get() === 2`

  * iPhone SE, 6S, 7, 8
  * iPhone XR
  * iPhone 11
  * [xhdpi Android devices](https://material.io/tools/devices/)

* `PixelRatio.get() === 3`

  * iPhone 6S Plus, 7 Plus, 8 Plus
  * iPhone X, XS, XS Max
  * iPhone 11 Pro, 11 Pro Max
  * Pixel, Pixel 2
  * [xxhdpi Android devices](https://material.io/tools/devices/)

* `PixelRatio.get() === 3.5`

  * Nexus 6
  * Pixel XL, Pixel 2 XL
  * [xxxhdpi Android devices](https://material.io/tools/devices/)

***

### `getFontScale()`[‚Äã](#getfontscale "Direct link to getfontscale")

tsx

```
static getFontScale(): number;
```

Returns the scaling factor for font sizes. This is the ratio that is used to calculate the absolute font size, so any elements that heavily depend on that should use this to do calculations.

* on Android value reflects the user preference set in **Settings > Display > Font size**
* on iOS value reflects the user preference set in **Settings > Display & Brightness > Text Size**, value can also be updated in **Settings > Accessibility > Display & Text Size > Larger Text**

If a font scale is not set, this returns the device pixel ratio.

***

### `getPixelSizeForLayoutSize()`[‚Äã](#getpixelsizeforlayoutsize "Direct link to getpixelsizeforlayoutsize")

tsx

```
static getPixelSizeForLayoutSize(layoutSize: number): number;
```

Converts a layout size (dp) to pixel size (px).

Guaranteed to return an integer number.

***

### `roundToNearestPixel()`[‚Äã](#roundtonearestpixel "Direct link to roundtonearestpixel")

tsx

```
static roundToNearestPixel(layoutSize: number): number;
```

Rounds a layout size (dp) to the nearest layout size that corresponds to an integer number of pixels. For example, on a device with a PixelRatio of 3, `PixelRatio.roundToNearestPixel(8.4) = 8.33`, which corresponds to exactly (8.33 \* 3) = 25 pixels.


---

# Platform

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Properties[‚Äã](#properties "Direct link to Properties")

### `constants`[‚Äã](#constants "Direct link to constants")

tsx

```
static constants: PlatformConstants;
```

Returns an object which contains all available common and specific constants related to the platform.

**Properties:**

| Name                   | Type    | Optional | Description                                                                                                                                                                                       |
| ---------------------- | ------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| isTesting              | boolean | No       |                                                                                                                                                                                                   |
| reactNativeVersion     | object  | No       | Information about React Native version. Keys are `major`, `minor`, `patch` with optional `prerelease` and values are `number`s.                                                                   |
| VersionAndroid         | number  | No       | OS version constant specific to Android.                                                                                                                                                          |
| ReleaseAndroid         | string  | No       |                                                                                                                                                                                                   |
| SerialAndroid          | string  | No       | Hardware serial number of an Android device.                                                                                                                                                      |
| FingerprintAndroid     | string  | No       | A string that uniquely identifies the build.                                                                                                                                                      |
| ModelAndroid           | string  | No       | The end-user-visible name for the Android device.                                                                                                                                                 |
| BrandAndroid           | string  | No       | The consumer-visible brand with which the product/hardware will be associated.                                                                                                                    |
| ManufacturerAndroid    | string  | No       | The manufacturer of the Android device.                                                                                                                                                           |
| ServerHostAndroid      | string  | Yes      |                                                                                                                                                                                                   |
| uiModeAndroid          | string  | No       | Possible values are: `'car'`, `'desk'`, `'normal'`,`'tv'`, `'watch'` and `'unknown'`. Read more about [Android ModeType](https://developer.android.com/reference/android/app/UiModeManager.html). |
| forceTouchAvailableiOS | boolean | No       | Indicate the availability of 3D Touch on a device.                                                                                                                                                |
| interfaceIdiomiOS      | string  | No       | The interface type for the device. Read more about [UIUserInterfaceIdiom](https://developer.apple.com/documentation/uikit/uiuserinterfaceidiom).                                                  |
| osVersioniOS           | string  | No       | OS version constant specific to iOS.                                                                                                                                                              |
| systemNameiOS          | string  | No       | OS name constant specific to iOS.                                                                                                                                                                 |

***

### `isPad`iOS[‚Äã](#ispad-ios "Direct link to ispad-ios")

tsx

```
static isPad: boolean;
```

Returns a boolean which defines if device is an iPad.

| Type    |
| ------- |
| boolean |

***

### `isTV`[‚Äã](#istv "Direct link to istv")

tsx

```
static isTV: boolean;
```

Returns a boolean which defines if device is a TV.

| Type    |
| ------- |
| boolean |

***

### `isVision`[‚Äã](#isvision "Direct link to isvision")

tsx

```
static isVision: boolean;
```

Returns a boolean which defines if device is an Apple Vision. *If you are using [Apple Vision Pro (Designed for iPad)](https://developer.apple.com/documentation/visionos/determining-whether-to-bring-your-app-to-visionos) `isVision` will be `false` but `isPad` will be `true`*

| Type    |
| ------- |
| boolean |

***

### `isTesting`[‚Äã](#istesting "Direct link to istesting")

tsx

```
static isTesting: boolean;
```

Returns a boolean which defines if application is running in Developer Mode with testing flag set.

| Type    |
| ------- |
| boolean |

***

### `OS`[‚Äã](#os "Direct link to os")

tsx

```
static OS: 'android' | 'ios';
```

Returns string value representing the current OS.

| Type                       |
| -------------------------- |
| enum(`'android'`, `'ios'`) |

***

### `Version`[‚Äã](#version "Direct link to version")

tsx

```
static Version: 'number' | 'string';
```

Returns the version of the OS.

| Type                      |
| ------------------------- |
| numberAndroid***stringiOS |

## Methods[‚Äã](#methods "Direct link to Methods")

### `select()`[‚Äã](#select "Direct link to select")

tsx

```
static select(config: Record<string, T>): T;
```

Returns the most fitting value for the platform you are currently running on.

#### Parameters:[‚Äã](#parameters "Direct link to Parameters:")

| Name   | Type   | Required | Description                   |
| ------ | ------ | -------- | ----------------------------- |
| config | object | Yes      | See config description below. |

Select method returns the most fitting value for the platform you are currently running on. That is, if you're running on a phone, `android` and `ios` keys will take preference. If those are not specified, `native` key will be used and then the `default` key.

The `config` parameter is an object with the following keys:

* `android` (any)
* `ios` (any)
* `native` (any)
* `default` (any)

**Example usage:**

tsx

```
import {Platform, StyleSheet} from 'react-native';

const styles = StyleSheet.create({
  container: {
    flex: 1,
    ...Platform.select({
      android: {
        backgroundColor: 'green',
      },
      ios: {
        backgroundColor: 'red',
      },
      default: {
        // other platforms, web for example
        backgroundColor: 'blue',
      },
    }),
  },
});
```

This will result in a container having `flex: 1` on all platforms, a green background color on Android, a red background color on iOS, and a blue background color on other platforms.

Since the value of the corresponding platform key can be of type `any`, [`select`](/docs/platform.md#select) method can also be used to return platform-specific components, like below:

tsx

```
const Component = Platform.select({
  ios: () => require('ComponentIOS'),
  android: () => require('ComponentAndroid'),
})();

<Component />;
```

tsx

```
const Component = Platform.select({
  native: () => require('ComponentForNative'),
  default: () => require('ComponentForWeb'),
})();

<Component />;
```


---

# Platform-Specific Code

When building a cross-platform app, you'll want to re-use as much code as possible. Scenarios may arise where it makes sense for the code to be different, for example you may want to implement separate visual components for Android and iOS.

React Native provides two ways to organize your code and separate it by platform:

* Using the [`Platform` module](/docs/platform-specific-code.md#platform-module).
* Using [platform-specific file extensions](/docs/platform-specific-code.md#platform-specific-extensions).

Certain components may have properties that work on one platform only. All of these props are annotated with `@platform` and have a small badge next to them on the website.

## Platform module[‚Äã](#platform-module "Direct link to Platform module")

React Native provides a module that detects the platform in which the app is running. You can use the detection logic to implement platform-specific code. Use this option when only small parts of a component are platform-specific.

tsx

```
import {Platform, StyleSheet} from 'react-native';

const styles = StyleSheet.create({
  height: Platform.OS === 'ios' ? 200 : 100,
});
```

`Platform.OS` will be `ios` when running on iOS and `android` when running on Android.

There is also a `Platform.select` method available that, given an object where keys can be one of `'ios' | 'android' | 'native' | 'default'`, returns the most fitting value for the platform you are currently running on. That is, if you're running on a phone, `ios` and `android` keys will take preference. If those are not specified, `native` key will be used and then the `default` key.

tsx

```
import {Platform, StyleSheet} from 'react-native';

const styles = StyleSheet.create({
  container: {
    flex: 1,
    ...Platform.select({
      ios: {
        backgroundColor: 'red',
      },
      android: {
        backgroundColor: 'green',
      },
      default: {
        // other platforms, web for example
        backgroundColor: 'blue',
      },
    }),
  },
});
```

This will result in a container having `flex: 1` on all platforms, a red background color on iOS, a green background color on Android, and a blue background color on other platforms.

Since it accepts `any` value, you can also use it to return platform-specific components, like below:

tsx

```
const Component = Platform.select({
  ios: () => require('ComponentIOS'),
  android: () => require('ComponentAndroid'),
})();

<Component />;
```

tsx

```
const Component = Platform.select({
  native: () => require('ComponentForNative'),
  default: () => require('ComponentForWeb'),
})();

<Component />;
```

### Detecting the Android versionAndroid[‚Äã](#detecting-the-android-version-android "Direct link to detecting-the-android-version-android")

On Android, the `Platform` module can also be used to detect the version of the Android Platform in which the app is running:

tsx

```
import {Platform} from 'react-native';

if (Platform.Version === 25) {
  console.log('Running on Nougat!');
}
```

**Note**: `Version` is set to the Android API version not the Android OS version. To find a mapping please refer to [Android Version History](https://en.wikipedia.org/wiki/Android_version_history#Overview).

### Detecting the iOS versioniOS[‚Äã](#detecting-the-ios-version-ios "Direct link to detecting-the-ios-version-ios")

On iOS, the `Version` is a result of `-[UIDevice systemVersion]`, which is a string with the current version of the operating system. An example of the system version is "10.3". For example, to detect the major version number on iOS:

tsx

```
import {Platform} from 'react-native';

const majorVersionIOS = parseInt(Platform.Version, 10);
if (majorVersionIOS <= 9) {
  console.log('Work around a change in behavior');
}
```

## Platform-specific extensions[‚Äã](#platform-specific-extensions "Direct link to Platform-specific extensions")

When your platform-specific code is more complex, you should consider splitting the code out into separate files. React Native will detect when a file has a `.ios.` or `.android.` extension and load the relevant platform file when required from other components.

For example, say you have the following files in your project:

shell

```
BigButton.ios.js
BigButton.android.js
```

You can then import the component as follows:

tsx

```
import BigButton from './BigButton';
```

React Native will automatically pick up the right file based on the running platform.

## Native-specific extensions (i.e. sharing code with NodeJS and Web)[‚Äã](#native-specific-extensions-ie-sharing-code-with-nodejs-and-web "Direct link to Native-specific extensions (i.e. sharing code with NodeJS and Web)")

You can also use the `.native.js` extension when a module needs to be shared between NodeJS/Web and React Native but it has no Android/iOS differences. This is especially useful for projects that have common code shared among React Native and ReactJS.

For example, say you have the following files in your project:

shell

```
Container.js # picked up by webpack, Rollup or any other Web bundler
Container.native.js # picked up by the React Native bundler for both Android and iOS (Metro)
```

You can still import it without the `.native` extension, as follows:

tsx

```
import Container from './Container';
```

**Pro tip:** Configure your Web bundler to ignore `.native.js` extensions in order to avoid having unused code in your production bundle, thus reducing the final bundle size.


---

# PlatformColor

js

```
PlatformColor(color1, [color2, ...colorN]);
```

You can use the `PlatformColor` function to access native colors on the target platform by supplying the native color‚Äôs corresponding string value. You pass a string to the `PlatformColor` function and, provided it exists on that platform, it will return the corresponding native color, which you can apply in any part of your application.

If you pass more than one string value to the `PlatformColor` function, it will treat the first value as the default and the rest as fallback.

js

```
PlatformColor('bogusName', 'linkColor');
```

Since native colors can be sensitive to themes and/or high contrast, this platform specific logic also translates inside your components.

### Supported colors[‚Äã](#supported-colors "Direct link to Supported colors")

For a full list of the types of system colors supported, see:

* Android:

  <!-- -->

  * [R.attr](https://developer.android.com/reference/android/R.attr) - `?attr` prefix
  * [R.color](https://developer.android.com/reference/android/R.color) - `@android:color` prefix

* iOS (Objective-C and Swift notations):

  <!-- -->

  * [UIColor Standard Colors](https://developer.apple.com/documentation/uikit/uicolor/standard_colors)
  * [UIColor UI Element Colors](https://developer.apple.com/documentation/uikit/uicolor/ui_element_colors)

#### Developer notes[‚Äã](#developer-notes "Direct link to Developer notes")

* Web

info

If you‚Äôre familiar with design systems, another way of thinking about this is that `PlatformColor` lets you tap into the local design system's color tokens so your app can blend right in!

## Example[‚Äã](#example "Direct link to Example")

The string value provided to the `PlatformColor` function must match the string as it exists on the native platform where the app is running. In order to avoid runtime errors, the function should be wrapped in a platform check, either through a `Platform.OS === 'platform'` or a `Platform.select()`, as shown on the example above.

note

You can find a complete example that demonstrates proper, intended use of `PlatformColor` in [PlatformColorExample.js](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/PlatformColor/PlatformColorExample.js).


---

# Pressable

Pressable is a Core Component wrapper that can detect various stages of press interactions on any of its defined children.

tsx

```
<Pressable onPress={onPressFunction}>
  <Text>I'm pressable!</Text>
</Pressable>
```

## How it works[‚Äã](#how-it-works "Direct link to How it works")

On an element wrapped by `Pressable`:

* [`onPressIn`](#onpressin) is called when a press is activated.
* [`onPressOut`](#onpressout) is called when the press gesture is deactivated.

After pressing [`onPressIn`](#onpressin), one of two things will happen:

1. The person will remove their finger, triggering [`onPressOut`](#onpressout) followed by [`onPress`](#onpress).
2. If the person leaves their finger longer than 500 milliseconds before removing it, [`onLongPress`](#onlongpress) is triggered. ([`onPressOut`](#onpressout) will still fire when they remove their finger.)

![Diagram of the onPress events in sequence.](/docs/assets/d_pressable_pressing.svg)

Fingers are not the most precise instruments, and it is common for users to accidentally activate the wrong element or miss the activation area. To help, `Pressable` has an optional `HitRect` you can use to define how far a touch can register away from the wrapped element. Presses can start anywhere within a `HitRect`.

`PressRect` allows presses to move beyond the element and its `HitRect` while maintaining activation and being eligible for a "press"‚Äîthink of sliding your finger slowly away from a button you're pressing down on.

note

The touch area never extends past the parent view bounds and the Z-index of sibling views always takes precedence if a touch hits two overlapping views.

![Diagram of HitRect and PressRect and how they work.](/docs/assets/d_pressable_anatomy.svg)

You can set `HitRect` with `hitSlop` and set `PressRect` with `pressRetentionOffset`.

info

`Pressable` uses React Native's `Pressability` API. For more information around the state machine flow of Pressability and how it works, check out the implementation for [Pressability](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Pressability/Pressability.js#L350).

## Example[‚Äã](#example "Direct link to Example")

## Props[‚Äã](#props "Direct link to Props")

### `android_disableSound`Android[‚Äã](#android_disablesound-android "Direct link to android_disablesound-android")

If true, doesn't play Android system sound on press.

| Type    | Default |
| ------- | ------- |
| boolean | `false` |

### `android_ripple`Android[‚Äã](#android_ripple-android "Direct link to android_ripple-android")

Enables the Android ripple effect and configures its properties.

| Type                                            |
| ----------------------------------------------- |
| [RippleConfig](/docs/pressable.md#rippleconfig) |

### `children`[‚Äã](#children "Direct link to children")

Either children or a function that receives a boolean reflecting whether the component is currently pressed.

| Type                              |
| --------------------------------- |
| [React Node](/docs/react-node.md) |

### `unstable_pressDelay`[‚Äã](#unstable_pressdelay "Direct link to unstable_pressdelay")

Duration (in milliseconds) to wait after press down before calling `onPressIn`.

| Type   |
| ------ |
| number |

### `delayLongPress`[‚Äã](#delaylongpress "Direct link to delaylongpress")

Duration (in milliseconds) from `onPressIn` before `onLongPress` is called.

| Type   | Default |
| ------ | ------- |
| number | `500`   |

### `disabled`[‚Äã](#disabled "Direct link to disabled")

Whether the press behavior is disabled.

| Type    | Default |
| ------- | ------- |
| boolean | `false` |

### `hitSlop`[‚Äã](#hitslop "Direct link to hitslop")

Sets additional distance outside of element in which a press can be detected.

| Type                            |
| ------------------------------- |
| [Rect](/docs/rect.md) or number |

### `onHoverIn`[‚Äã](#onhoverin "Direct link to onhoverin")

Called when the hover is activated to provide visual feedback.

| Type                                    |
| --------------------------------------- |
| `({ nativeEvent: MouseEvent }) => void` |

### `onHoverOut`[‚Äã](#onhoverout "Direct link to onhoverout")

Called when the hover is deactivated to undo visual feedback.

| Type                                    |
| --------------------------------------- |
| `({ nativeEvent: MouseEvent }) => void` |

### `onLongPress`[‚Äã](#onlongpress "Direct link to onlongpress")

Called if the time after `onPressIn` lasts longer than 500 milliseconds. This time period can be customized with [`delayLongPress`](#delaylongpress).

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

### `onPress`[‚Äã](#onpress "Direct link to onpress")

Called after `onPressOut`.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

### `onPressIn`[‚Äã](#onpressin "Direct link to onpressin")

Called immediately when a touch is engaged, before `onPressOut` and `onPress`.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

### `onPressMove`[‚Äã](#onpressmove "Direct link to onpressmove")

Called when the press location moves.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

### `onPressOut`[‚Äã](#onpressout "Direct link to onpressout")

Called when a touch is released.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

### `pressRetentionOffset`[‚Äã](#pressretentionoffset "Direct link to pressretentionoffset")

Additional distance outside of this view in which a touch is considered a press before `onPressOut` is triggered.

| Type                            | Default                                      |
| ------------------------------- | -------------------------------------------- |
| [Rect](/docs/rect.md) or number | `{bottom: 30, left: 20, right: 20, top: 20}` |

### `style`[‚Äã](#style "Direct link to style")

Either view styles or a function that receives a boolean reflecting whether the component is currently pressed and returns view styles.

| Type                                                                              |
| --------------------------------------------------------------------------------- |
| [View Style](/docs/view-style-props.md) or `({ pressed: boolean }) => View Style` |

### `testOnly_pressed`[‚Äã](#testonly_pressed "Direct link to testonly_pressed")

Used only for documentation or testing (e.g. snapshot testing).

| Type    | Default |
| ------- | ------- |
| boolean | `false` |

## Type Definitions[‚Äã](#type-definitions "Direct link to Type Definitions")

### RippleConfig[‚Äã](#rippleconfig "Direct link to RippleConfig")

Ripple effect configuration for the `android_ripple` property.

| Type   |
| ------ |
| object |

**Properties:**

| Name       | Type                     | Required | Description                                                                                                                                                                                                                                                  |
| ---------- | ------------------------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| color      | [color](/docs/colors.md) | No       | Defines the color of the ripple effect.                                                                                                                                                                                                                      |
| borderless | boolean                  | No       | Defines if ripple effect should not include border.                                                                                                                                                                                                          |
| radius     | number                   | No       | Defines the radius of the ripple effect.                                                                                                                                                                                                                     |
| foreground | boolean                  | No       | Set to true to add the ripple effect to the foreground of the view, instead of the background. This is useful if one of your child views has a background of its own, or you're e.g. displaying images, and you don't want the ripple to be covered by them. |


---

# PressEvent Object Type

`PressEvent` object is returned in the callback as a result of user press interaction, for example `onPress` in [Button](/docs/button.md) component.

## Example[‚Äã](#example "Direct link to Example")

js

```
{
    changedTouches: [PressEvent],
    identifier: 1,
    locationX: 8,
    locationY: 4.5,
    pageX: 24,
    pageY: 49.5,
    target: 1127,
    timestamp: 85131876.58868201,
    touches: []
}
```

## Keys and values[‚Äã](#keys-and-values "Direct link to Keys and values")

### `changedTouches`[‚Äã](#changedtouches "Direct link to changedtouches")

Array of all PressEvents that have changed since the last event.

| Type                 | Optional |
| -------------------- | -------- |
| array of PressEvents | No       |

### `force`iOS[‚Äã](#force-ios "Direct link to force-ios")

Amount of force used during the 3D Touch press. Returns the float value in range from `0.0` to `1.0`.

| Type   | Optional |
| ------ | -------- |
| number | Yes      |

### `identifier`[‚Äã](#identifier "Direct link to identifier")

Unique numeric identifier assigned to the event.

| Type   | Optional |
| ------ | -------- |
| number | No       |

### `locationX`[‚Äã](#locationx "Direct link to locationx")

Touch origin X coordinate inside touchable area (relative to the element).

| Type   | Optional |
| ------ | -------- |
| number | No       |

### `locationY`[‚Äã](#locationy "Direct link to locationy")

Touch origin Y coordinate inside touchable area (relative to the element).

| Type   | Optional |
| ------ | -------- |
| number | No       |

### `pageX`[‚Äã](#pagex "Direct link to pagex")

Touch origin X coordinate on the screen (relative to the root view).

| Type   | Optional |
| ------ | -------- |
| number | No       |

### `pageY`[‚Äã](#pagey "Direct link to pagey")

Touch origin Y coordinate on the screen (relative to the root view).

| Type   | Optional |
| ------ | -------- |
| number | No       |

### `target`[‚Äã](#target "Direct link to target")

The node id of the element receiving the PressEvent.

| Type                        | Optional |
| --------------------------- | -------- |
| number, `null`, `undefined` | No       |

### `timestamp`[‚Äã](#timestamp "Direct link to timestamp")

Timestamp value when a PressEvent occurred. Value is represented in milliseconds.

| Type   | Optional |
| ------ | -------- |
| number | No       |

### `touches`[‚Äã](#touches "Direct link to touches")

Array of all current PressEvents on the screen.

| Type                 | Optional |
| -------------------- | -------- |
| array of PressEvents | No       |

## Used by[‚Äã](#used-by "Direct link to Used by")

* [`Button`](/docs/button.md)
* [`PanResponder`](/docs/panresponder.md)
* [`Pressable`](/docs/pressable.md)
* [`ScrollView`](/docs/scrollview.md)
* [`Text`](/docs/text.md)
* [`TextInput`](/docs/textinput.md)
* [`TouchableHighlight`](/docs/touchablenativefeedback.md)
* [`TouchableOpacity`](/docs/touchablewithoutfeedback.md)
* [`TouchableNativeFeedback`](/docs/touchablenativefeedback.md)
* [`TouchableWithoutFeedback`](/docs/touchablewithoutfeedback.md)
* [`View`](/docs/view.md)


---

# Profiling

Profiling is the process of analyzing an app's performance, resource usage, and behavior to identify potential bottlenecks or inefficiencies. It's worth making use of profiling tools to ensure your app works smoothly across different devices and conditions.

For iOS, Instruments is an invaluable tool, and on Android you should learn to use the [Android Studio Profiler](/docs/profiling.md#profiling-android-ui-performance-with-system-tracing).

But first, [**make sure that Development Mode is OFF!**](/docs/performance.md#running-in-development-mode-devtrue).

## Profiling Android UI Performance with System Tracing[‚Äã](#profiling-android-ui-performance-with-system-tracing "Direct link to Profiling Android UI Performance with System Tracing")

Android supports 10k+ different phones and is generalized to support software rendering: the framework architecture and need to generalize across many hardware targets unfortunately means you get less for free relative to iOS. But sometimes, there are things you can improve -- and many times it's not native code's fault at all!

The first step for debugging this jank is to answer the fundamental question of where your time is being spent during each 16ms frame. For that, we'll be using the [built-in System Tracing profiler in the Android Studio](https://developer.android.com/studio/profile).

note

The standalone `systrace` tool has been removed from Android platform-tools. Use the Android Studio Profiler instead, which provides the same functionality with a better user interface.

### 1. Collecting a trace[‚Äã](#1-collecting-a-trace "Direct link to 1. Collecting a trace")

First, connect a device that exhibits the stuttering you want to investigate to your computer via USB. Open your project's `android` folder in Android Studio, select your device in the top right pane, and [run your project as profileable](https://developer.android.com/studio/profile#build-and-run).

When your app is built as profileable and is running on the device, get your app to the point right before the navigation/animation you want to profile and start the ["Capture System Activities" task](https://developer.android.com/studio/profile#start-profiling) in the Android Studio Profiler pane.

Once the trace starts collecting, perform the animation or interaction you care about. Then press "Stop recording". You can now [inspect the trace directly in the Android Studio](https://developer.android.com/studio/profile/jank-detection). Alternatively, you can select it in the "Past Recordings" pane, press "Export recording", and open it in a tool like [Perfetto](https://perfetto.dev/).

### 2. Reading the trace[‚Äã](#2-reading-the-trace "Direct link to 2. Reading the trace")

After opening the trace in Android Studio or Perfetto, you should see something like this:

![Example](/assets/images/SystraceExample-05b3ea44681d0291c1040e5f655fcd95.png)

Hint

Use the WASD keys to strafe and zoom.

The exact UI might be different but the instructions below will apply regardless of the tool you're using.

Enable VSync highlighting

Check this checkbox at the top right of the screen to highlight the 16ms frame boundaries:

![Enable VSync Highlighting](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAAAwCAIAAABffUWTAAALlUlEQVR4AdSPWaEFARSCpn88RU6ct94S8+8CT2SKLp2XdsI2VAew9HqlnNs6pKXgomYT5jL0KHRbVradadrjcraUbsjQyXbDo8NYvGtu84xH8daUY9elLbSZC20KGxpkbq1XMz1ep/bQTuvRWaqFdN46d+QuadvFOjHzZJy2R9bNApQ2d9ayjfVyFD3P4Lb0PJZ5veqhd17GCjlTaY4eu5N56Y27InakJmXL1kqULmaXbqy0vE7tEeKxVEtXbsugCZ5O0m6uNyUrru0sm1Bga43NTjJKN900Wzc5mHRr7giS2ZaxhXGseCticjNbLwVKaQGbYHdVP3PccnFnp0gP2evUHjpoZa3Vdg1iiTIkF2+M0sqwuGxrhrQlM5IFqGGUq6lUMqx3XosXs11vkLiu6+LiYHVLZ2RjalxbuXXKaKgNE9du7qyfOrqUvU7tmx2r4G4jScL9c6wck6RjJsPy7qOl8OKjGEL229gOGSXrNqaQSYrDEZrGl5OVzTmyYIQzDi4zQ9i+r6c1GrXn5IOAAvrevH7VVV99Vd0laRKT9UXcMSCR0+8WnzvkIW/dMSiCvFloFFGrgrzxxhvYF9cCrhjDJQXk9VsDORgIBGILfAEhEJOpFQsEgjKsfABBCOrjUIConDHyCGi1+PjiZJSTdSdQ28UmJuzr6bHZbH37vGjs5kIbxoULF7BfZJ1Jv1nr/uQPvRe/Zb327ZwHWzgRCqbe0GXJLUsIIS1yrl/2wlfnlRHdjGCNN39dEBCXqa1T2Ay/7CUKIa+CQkBc5w/a6lq8MV5ZFirAXraPYwb74KuwBWALtmWEYonZbCYK6vYFNOYNr9wwzp8/v8i60fXx923XzJ3XftZ97efaA88VOBHCPHRZckc5IWablOuXJnDm5gkJtiSKsrxIXcm2hDSCqXp0CrIIhfw9g2km5glJH4WfKXB+T6OJkMdy+RPKATzwyF4DIc/3CSpf7KvBR8IkaP3f6KoNQzrlqS5HOcDU6Jg4rwM+/rh03D73dF6qcl/8ZdclhEDQJUn0LKYOifNNwIeLgOVofK7ZcYp5Hc3PobzB9JzDc7i5unkKcaQbSK3D0/EcMhB71AGvomBiCtJU49LnHKekPAqMWe7wOKpNTKARTmRlT7oXew2IdMPb6BFVh9gI4qPdilIzQg5EsjjlWKoITu2tLV/aoeV4OsrLa6ckyVH9XLdnorv6UVZbqwWtpSbWQG0HBp2BNoznwH/O6h4ft1thkip39ByPb1kXfidMr17qOfnN/Pz8y0e+wvcDBNB4pK3l0N04Pj3tz2B6etyOAzaNp2nUQAwN4zDsqAnnnkNKdaDcnVbTlcYOue1VtP9HlbxxmFBgRgOMPAog4CaA56x2BEzUbU2fi9qtG9GD6TnreBSkXEQ3grPUntlN78FuI7uK6CEDQc5Sq93tj6a1NFqkCZEuf5rt9iwFDVXU5pc22O17nlNqj1OKn/aHGm5cNaik6lDmqrVh0FO502fPnoXXZa1qsvuZnV2/beUm8dPOK0/0f3n1+pz4xlffbfoQHhDA5LNSrCE9cJU0aiKmpjHlzKgeZVn/HFqNvsdSsNMgoG3mT41ZcUoX/OowzqbGqDGWyqcAZhkmsSdzljHIGZpS1KZ+qz/Nd8s4j6jVYYP1KLMRnXZjr6Hs2QZ3RmEa9UxN47AzFe3T7HTk2d1pJRcDA8WdZr0ZhiIZTftSTOMgs7Vh4KMCGMpWb+8c+kfq7JkzZxDWVnUYP91x6SnHN+ZXLxltX8XfuXzt+txvmmfNOy6zYeiyUha0Zmg4nkxGIpFwOByJpJInD6DJ7aNJGlWGkRzdjqONJtWslMtALx12kk7LMsr8bBhj8CdHmUJ2GPkUGNMCpuJXhmHBMLIKzM+tkSH6bXBFzpwJb4RVeWABJxk+7jq4e3slZgYYDkao39UAvQ0RRJ31aNKJTtjprGOZ3KTToPjHmtQe+LrcMM6gwSFL5bOZ2T/bOXqGB+4a34ZKF/1d6j35TcvklzBafG99r/UzTCI7DB5JDAPXmeR8o/DhImDRdmGNWkCCgyHbN6ztBlKvBjSaepVZI68CCMxQMGqhF4GdpqAD64qsHkqG6VQsKifs3G3pdHLEk0MGelHHac7xTpCHwskD+Nw/0okcvnmtE/SgXQgPbRj19bsSpxkSg5WoUo9tLtg344fN78fe/Gpubv7S1bnZ974paXgDE8oOAzQeiXZcvLE9wflGjIRsG0nQqJEYYY1sI8RwIJSJhw5sQA7iIGzDeWBl8tqZX1NQjTwKjGk8ppYfQT0DbUZT+Hd4bXAVvmcbKkGpzEgitx538szfOeIIDvfIDuYLbUBO/bZHkMP64JtXO0EPSFr1mipxoNJo3HCM2dowgPUDvvjs7Gz8RHsp+AOzPNgLHC/t72yS3/vsMuZRaj3DfqDwIAQCaDzikMIw4pzPRy8CpRClw/DNxiefQfmHt/lm4jO+ASMBSlkr20rIJliZPDoM7DQFzcijAAKuQC3vQ70SNJNRWMPOq0f8GLqmEu0+zTe5U3FtQglg5oSvfRWtM3AiK/4wtmhCFeWa1zo5MaB0up+ax3AitDHDKNowhl+BVhYPDwdiMo/f93zD/mn7E9s3P2yQ/touf7flU2zZgxAI8kLE2qBa2hbjfD4cdasvRqNosM1HncGjK0sIw8r1K5FzFHEQSsgrYLI8oQ1+7JhCGyzVyKcAAirAYPC1laKeshPWK+T1LKZD/xqES/qDuT5UQL85gNawkBPupzlr+tmOb57rJDC8lagoXd+b7UAbhiRJsVhwShCEQFCUJMQkfl139IPsf/qMf7uYfVVgCydCIPBZ//0aE7zeILVF6hFacc4j4q1WwHlj/3u3YjAgKJekyw0O43LbhP9OUxSDwaDId8gNI51OL7JOhWdx3fj46/8cAufaI+8HIqf5rP9+9ZTiHCtsU6IY9R9eCfshm3i7FW5kjXq9R1qfxveiNXoDOtow0gWF/3DrX4mKh1r9BVC4AUQ9Sum/9k1Eb0RGG0bqDkBEQWEVCghtGMlkEvsCrsWVG0YikSjgWlxrVZBEEXcMSLyIOwYkVsQdAyIWcceAtBVxx4DM5wchiN47uPNP+l8N44MPPggpwO8atlevXhUUzM3NYYsVtt/vh3EPDGNyctLpdH7xxRe6o3Hbgg2jp6enrq6ut7e3r68PfTz44IN79+61WCytra2Itv+LWjPQVCCIwvBb9AChB4hAIpFACIWElCCVSCpAEBGBEgKlQgRKBNAL9BJVSZGqZVnuxzDGvTAw7AXmbHvs/89//jO7zfT7vV5vNBpxz38XY7lc8r6/2Wx8Ph81p1Izz1RDDGa/XC7fbrfP50P4eDyy2ay4HolETqdTIBBwHIcwmUze73eRy55Jt9uNx+ONRmM4HHo8nslkwvXpdBqLxUKh0OVycZsY3+8XbGhgWRa7oZhDpXY8Hg0y1RcjHA6XSiWeR0W832+/3w9cehcPPhwO1WpV3J/L5SREPvQrlQqDQqGw3W5t206lUtDzer2w5ZAvfnebGJACXiKRyGQyzCx6qNT478sgU/02hRuEKtFoFBAsHsFgsNlsIgZ1UavV/kJkdaH5MlgsFtfrldxOpwO41WpFVj6f5/CW28SgzoQzGFP77MGp1AgNM9UQ4/l88tYlxTifzxhQmBrEEKC9Ug74F0tyUULc7/cMZrMZHhIQ6XWckRW/ttttFzqDA5zMo2BKX1KpUZGmmWq1KdY05h03jMdjwnq9XiwWsSHFwg3r9ZrGRchrhszl415AnM/nEiJMWPxJpxVQTS5cwHe7HVzS6fRgMPhNzTxT3e8M/IEJZIhJX6+X+mur1dJ8JLk/q66uJimwGhoaaKEY06eQHP/hwwdkrwG59PEpRZ0+yhXT33D6+3RoRsZoZAwiMAre4QbAhva7EQEI+/TRo/fXr3+gNRqNjNHIIBaMRsZoZIxGxmhkAAAFB1URZ+TqrQAAAABJRU5ErkJggg==)

You should see zebra stripes as in the screenshot above. If you don't, try profiling on a different device: Samsung has been known to have issues displaying vsyncs while the Nexus series is generally pretty reliable.

### 3. Find your process[‚Äã](#3-find-your-process "Direct link to 3. Find your process")

Scroll until you see (part of) the name of your package. In this case, I was profiling `com.facebook.adsmanager`, which shows up as `book.adsmanager` because of silly thread name limits in the kernel.

On the left side, you'll see a set of threads which correspond to the timeline rows on the right. There are a few threads we care about for our purposes: the UI thread (which has your package name or the name UI Thread), `mqt_js`, and `mqt_native_modules`. If you're running on Android 5+, we also care about the Render Thread.

* **UI Thread.** This is where standard android measure/layout/draw happens. The thread name on the right will be your package name (in my case book.adsmanager) or UI Thread. The events that you see on this thread should look something like this and have to do with `Choreographer`, `traversals`, and `DispatchUI`:

  ![UI Thread Example](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN8AAAByCAIAAABcGZNLAAAPBUlEQVR4AezXgUbFUBwG8N41AHqEBD3AyJKgJyggUUBkS0iwVqYKM8WcN1hjMIExmzn39/cBh8t3vx9sr6676WmabptXVVUX3SlLJ510GkxZOuncUZ10KkunwZSlk046DaYsnXTSSaeydBpMWTrppNNgytJJJ50GU5ZOg9FZFGF6yjK0m7x+sDa6U5ZOOuk0mLJ00kmnwZSl02B0TgydytJpMGXppJNOgylLJ5100qksnQZTlk466TSYsnTSSafBlKXTYHSGeXd88dLn9OnyMDuZk7P7u+GnhqQ32fg1ebgavx7l6fh1+8m+n8Mqd5t/9f/PEjl/vP5X6qf9XbpOVDrppJNOOumkk84lvoreXj8O9hOJMu/l54rf7HQKnUInnUInnXTS+de+WfjGtVx/PD9ow5w4ZmZmZrYXvGBmZgqzOcxQZmYWlZmZWVBu/4nXT3KUq5X32XLdfc4q76xG1txzBz2f+z0zu+eO9942Vw1VFLY2W46Lpb91caTzmjesU3fTpcm+uxsv39s8N9V/v7vxoqtxsH35Zacz1HGlzXa69VnygikrnW7Lv2f3geqSribzTE5abVRY2mTfvdK8xibzrBes0/3ggJjRrusbf8yS4wp7W+YLsqyu9qridqdpyr089rio7KrijvLCVqZMRa+iU+m8H+gf3eWiNHXlfYPtKzWl3SnxRYcO+O7fe7i/bQl7s/XEzp17X/ua7bbaMZGo3PS6Y0eDWxtOdjovUMy4NdF7Oy2xdNu2bfHRuQIW3FOXy4zkitHum651qSLN1pR2URJEctPraS0kMHa48yoWhsEzI9Uneu9gsVYP0zjVu5suc1mcay/JdYQFJ7bbz2an1VCRKlFhqQwbD8AUmCAN0tcTHEs6n9W9xCVcttvPkDFSQ81IUY6d8iOdV0vyGinscziwteEUt7DnZ1qwlOY3gTUZLvkHkvIyzTLfse6bHqNT6RzruYVwjnbfWGWvLe2ODk+HBlPlIP/6oY6rFMMPUvLIIX9oZnVZjxbrieHOa6wlrnO85xa3eprnCrIsSBGNmCr6E2PyqAtbFMDbksF7GnUh9cB+H1YUoCGGxlngmIiMqf579EuGhWcYtIYlJb4YOe9wnPX3jUDdQZN+cfoUAEfGxgDSkyparCchlQdmtOcmbTaaZ3hC/I6FY6c6hakrjxNCy0MYF5UDhYXZNoCjOybOLWZBGRkAHdEjuwUZCaOlNTJUxz7UvlJZ1F6UY2O+jDklocSTdCqd8OG+30JUxLN3OS+gEPa6CdbPANdpmu58aueSDKvVaJqGg9jILEf9JJeCO+iEBMY76yeNusAKzUZdElThc9nyCrjsK8BIBBjRmuy7A69UwQJJDAmGstNqEWO6QxeHOlaMAtDJAPDOWCb67tIaqglVMmbqZqVUSeMkqUWbeRn16LelapiRwyITZ3bGFtZeN56faQ4NSpjqv0sV+UcBNFCSgVcaZMy1ZT3MAlFnSDxInqFT6QQgBG+gbcmw8B/H2Rl0CknmykGDMG650gm+IMjqopQsT1/LvKigEMaturKetegETaDEUXI0CQ9J4pYrnb4+oa50ypCe8mRCpUyVA3RHMSmAQkeGptB1UmwBFhw0bInmURd6qJuaULqKTtoUi/tjibQzNrBmSxARkgydxkiMjIw2ITqXDQPTt1QNwSiIe4xOPRXhmERsZEnE5a2ik5XGXbLSsk/tcJw3COMWgiEQZCRX4vRBUDZz4mTx47hICiA8bA9GXOjETbMTJYPz5ZZ4doCQfqk7PXBvFZ08J9ApzxVwjPfeMgrQKRoPJYxBCqC+onaZKZVNluP1Ff2INJcyEtdputNZXtCMcJLhLB/oF4kirkUn85Uq/CvYcHuSTqWTfRiHiW1PP6iFcVxgOYUSOf+y++Qu7JIBNcNOKstvkls56XWsDYtEU5xLjNZQRyycV8R9G3VlF8vaI9j8BR02l1KXv2BBa650MiRGi/umME0h2K4FOFFxEspMqQI7GZitdpx22GnQPhKI0JKnLkZ013WaRjIsHY5zMmaGRF+g706nNMuWmrm7ztdISqdnEps2+Y+vkwBrZI0vd+CMLaxxidKwM4Mkcd9sE43vB1b1QknDwiEMNWK9wUvqrpWoAmobmRcDW3WOZmDGUNdPjEe+c8CxrD8emYW7aiqd3p7kPM6xGpkUx7pOMvadL35SOr0noVgcXBQ7pVOT0ql0alI61/88esvnPvzJ7/z+uz/+xOyVFyl97sobmN3bXv+ZVyGaX/7CD57f++xKp9KpdCqdSqfSqXQqnUqn0ql0fnR6+UHXzCYqvm987k39p17NdPJ7ElGCryCdSueHJxenqp0fn1nZMM1LGWExH5xceOvgmTl7r7fRSSwI8W/8TrsFdI49jXDdfASd0vnx2ZWhsicB3uE+/rfbx7FctvV0FlTH+occ3rMfwqBzoMQEnX3F9V0F1ZQcLrPCKxkuqf7+8bmqxCwuC6KT3jF8/rylk3xlQuYb+06eNbfT4I3W0f27du987fb5p7AiqNb0grL4dIpdbR7eYjqJaaJfgtx6mi6/bEA+P8QTZATEFCbUiIgt91h3I/yeqGQJIqkoaqMY0dPU5ZIfYHmhADp5EjZPp9L5qHu2ODYFyF7feyI+IBQKT9S1kPnAxPyp+taO/CoyKcGRH5tZLoxJHq+0cQm4ZD40uUCxdw5fgFQSTZ2zdAyXWd4zdgmsQfBB1zT4vmvkIpfvGrmAow894vu45zgdAetbBs7QddAhH1reSjolWI6Q5LUD8q8TiERMoISfttnOuMe6G+H3ZIBb3naCVEKhSVKSCCkP0Kme/Y39pxYc/eglHhlWpqud11pGsD/ungUvcMT+0ZmlioQMyMNeHp8OlGTg9VbbGFXYmIImBaATrfU/eISSwEf1RWd/b1GddAT3K01DYpc9Q3po9BbTCYKwOLJuQD6hyry8gXxKNP6qWHfXuGNeSgFo4j4lVgsQwRo0KeABOpXOm61jKBnc3Gobz42Md6XzkTudo5ewGxlcOXTi6NNCouZsPZds3f0lplV04ugNOmnZlU5p+bnT6R6Qz10yuHUp4Bbrfs+gk4R28vYSMtzpPE8j6G5Dzai1egTv/9/SqXSOVjQgnGTutE8kBobh2d3pROHWovNm2xh32W5yOVreMFhqFjrx41IdYc4Kj6VZNg9JQeGorCudz0s72VyuE5BPnhBjtqESO+wW627Qed94yxTdBVzeS2G7yWVZQXNJnhM6sSidm6eT3SHPPeJnSs1DRO91TELn9Wd0dhfWwFB+VOLL0Smeffy0qY0TDy3YMorYYnJIcmQWs5d92DVDdYqxeaXlY/sPkQFTaRa7tLzFdMr7JLw6ggteKyAfI6jhxCXEeHWsu0v4PS8zATGtUYAXmnm7mkvkEzUFdEilltK5eTpJH55afN/YZTIfmVri283NfbXJIUmaEsuqdnD076ULr/m+E+zWCcjfcKy78RLBVeMWrBPJ79aO0qm/Fb0gSen0/qR0Kp1Kp9KpdCqdSqfb56vvf/fj7mZvTt/55MfWn8Kvv/ttiv3rH383LD/7/q+Wxx69StIH3/AZTyCndCqdSqfSqXQqnUqn0ql0Kp1K5/2OxgvWmrPmKtK8rV6MD7uaLlprPMUZrV221a2yzLlYrjZZVxotZBjA7TaHN9N5omNhYeS+0rlFdF5qqN3xmv/vKczpK86tTIiJD/C70+641+HsLMh+1NX0n4JYkxTnjvXddkfQoYOurWEJOHgARuWyLS/TkpZEJs7f90RtuTfTGR0cf673qtK5RXQiV1G+Po+ecQOU9swU6GzMSoMnWNm7Yzv4ksFYFhdtSk3EUpccD1vUasp+EsoOfGdMVYsOE/kje3ejf1KRNFNderfdSYHy+GjutudlCp2JgX4GnTwbdEomIzT4dH2lF9I5ZD/O4NNic3bv3Huh/wYKWp5VH+ATMtp4usc8gXH7a7Y3VvbMD9/NTy5bHHlwums5NTqbzPm+a2WZdUtjD5XOTdKJjBnCNm9/cnm7zR7rdwwR9dm3l/zNVpvv/n23Wu2Q11WQDZQlsVG9RbnobmZYMJfUivA5Cm3Rvj4TlcXXWxrg8lqzddlpPrBrJy1Q8VRdhYjozRbbWnSmhwZ5IZ2gBn/8PdExL3TOts8B64jz1KWB20cO+FwevA2XwHpp4GaYf9T5vuu9lkkKUHLQNmspavbYYJROgINL6HnQ2YisFsdEnjFVIpwkgVWKoYVk0MupqhJrWpLQJuKHRWgjXWmyUoUNg3SRFxkmdKaFBBl0Ajqe3WvpHHWeqst3SD4zPh/mplsvVuVaxXKu99pAw4yttE3ANRc1jThOmgobEdEh+wkyUy0XlE7P0DlQkm/PSDG0jTPTeEVxSnAA4nejpcGVztK4KEhCI2ELfClDecFruKzAoBO3LqzLTsCgM+TIIVc6R8oLvZbOlup+IJN8blKJK52gCZSo43jT2biwZG5NNp/HlRenVU21XsT7Z8YXzA3dVTo3TydeG1BIC3YT/ggL9KB2gIjCCbhklp0WGOXQI76YHWprbgYyySXnfVSWkqKdsJsU6M8lmwE8O1jTmiudyDCdHq8tE3wh9Zy52mvpZJcZG5q4NPqQ03qwb7grnbBYlFZJ5uLAzX17DlwauDU3dMfnoG9ltpnyvocDClMrNt+10glJ21w+cmQWz/ugq4lTPDtF2CqJjUQCQYoTEpdPpdTGV1FU4aDNNhQRPW+pRjWf4Nhqw1NTkruj5YWuflzoJCNHKGTbOCp586kIFeTcw84yJTpL6KzObcAOjiDIXjMpMoO/+HeM6bG5fdYp2QZ0mcaUzlfw23gUVHgSweOERDLu4voRSDJsUoU/MoZPp8o6LVOSk5NU9/5v44GSM7i7fXH0AbckPz98z5OdKp0bT6CGLoKm/lb03JLSub7abQGXSqfSqb+zK51Kp9KpdHrV549//ONz7P2rv/3WrS+/fq30qz//9oWZrNKpdCqdSqfS6Z0fpVPpVDqVTqVT6VQ6lU6lU+lUOpVOpVPpVDqVTqVT6VQ6lU6lU+lUOpVOpVPpVDqVTqVT6VQ6lU6lU+lUOpVOpVPpVDr/9reXNp7+8Y+XvPPDgr30wn10skqn0ql06oLpZJVOpfNF+vwbMG/3LSYXRc8AAAAASUVORK5CYII=)

* **JS Thread.** This is where JavaScript is executed. The thread name will be either `mqt_js` or `<...>` depending on how cooperative the kernel on your device is being. To identify it if it doesn't have a name, look for things like `JSCall`, `Bridge.executeJSCall`, etc:

  ![JS Thread Example](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAScAAABPCAIAAAAm6JSVAAAQ/ElEQVR4AezToQ2AMBRF0e6PZx3QCDZ4wSEbNgCFJwFac27+BC//lNqk7NswjQ9vyVp7lKTKwv9HnZ+wMHXUUUcddf2ijjrqZGHq/AR11FEnC1PnJ6ijjjrqVM47JTFCg4X1rTo/IQtT5ycsTJ2fsLDK8aL5auccgKRJmj7+BM72Y9te27Ztc2btWfNs2+b3vT5b4dcOv7Z/e/lcxVwvDrszp+zI2Oiursqqrvn/KrPq8Navh297f9ntlhde6X31Knfa7S++vsh4rnv3kSX6v+HV/1/E/6UPvetc+ZaXX6Dwi2/XPPM2o/1a2e+W6VLqlDqlTqlT6pS6ZTalTqlT6pS6L/Km8/m3X7Bf2qam5n678+m7RYSdkw+8+s4Pvh5nmEqdmlKn1KkpdUqdmppSp9SpKXVKXVl3Ze1wAzfN0y0pFWlR2TF5zQXOFTLrciIyInnVPNUyr4eSznJeVQ3U4Gfp/fJY0FKUZyssai8tbC2Wm4q+aqvzJXwvPo0tl1vMDHJ5jQkp6SyTeW6csLlgctxOnVK3ceemrPqcxknbqg2ro3NiuT8e4rnPc79tprV+tHHNprV+MQFZdTm8Ov3M06sctVYPM20bdmysHqwLSQnLqM1eer9NU/bIrGiM7o4GHoPG+MJEBlDcUbp0lTDaHQd3+sX4s46Ep0cy5rKeyqXDdsD7EJ75BBnk8lrDePNFqy+yTbUyz5UDNS6YHLdTp9TtPLQrtymfJZOfFtJEmvyW/NjByaH8wKYm1bD6sab9XgdWrFiBfKsdtVTe57GftRYFZNfnLku/pkK+vUju06oyitpKIMQj1HPPsb0r16/KqMlChYivtKucCvg554JzTz7l5NTKdAloPpG+VMttLgAwRst9ZX81XQA2qDuPJDgpNKEoiZu0yoygxGBukstSpQnOhSsGSUloajge/GIDJLYkliQTnw/7HeEVC4cMknKmQpoTnXj0jw3AGCoTZelajMLD/rNOcMXnW2aYks27t0CdzLPrJsd91Cl1/LSonzRm695t/DD+cYH8GPKKH9vcG4NDQTGxOJlYYaVuyf1aKphOcY6IJd6iHrkhunpH+hKTURWPEhbKuiuoiZhymvIJAuu2rodqXKFsXB30OeQd4ROSHIYFxAc1jDXVDNXjraClGCcEbTK3tZvXMjAkS0nTpJ2An9OYBxsfcFiB4kX98smkeedddD5dyyAxKtBctE5OyGNAXCBJOCzNO0W+UX4Mhpn0CPGMK0iwzLCFOtdNjrupU+rkvrCthOWc30xkZ145m226lWoIAhHMpW5Z+p1bQZyjY+IMj8gFcrgBDJRU1FoCGOw/ybV2H92D2kxNKEJhhBqkxlApIdbF5scjTYyYBlQmuKVWpIuIvSJ8SBfxdsHKCxkbo5JozGfWjzYZ9cuo8CzhWh49Q73MsGdrDjWY+rF5cXOniIYMvm60kXsGw4AtM2yhzqWTo9S5ljoyIpZ5k+nxY6Azs/lZv20DS/6RgKNkL1IooglPjwAPtmScf6DUoMQQC3XL0u/HCsvciOKL2ks27dqcVJpKosioKvtrTAVBhU5Z7wk19unZ0YrEnY1hoD+kyX1MXpxvtD+iTyie9VbcUWaoY89J7LJQZKGOSVuIunmniBhICCUimV2cZYat1LlucmaUOldSx/zyu6InETqpHbIzcUZOOCTX4vdgayHrIrGI/IqfUErC0sLZ+FmpW45+P62wSrsrCEoCBkcy+DcV+ITgpBABBnGLdjlupUe6w0R5Z517FvDzgaif3RrUCQ+MoXakAeeUy5hxvv3ADrTLI+kZI7RQx9aUzZJx2zhuW4Q6yyaN+YR5ywxDHSWGOtdNDjFWqXNtrGPDzeouW3ymGw0hNUqggr8RGVFSjW0Gj1wmAaOEbRjVjgV7oKrZjMtQ15C7XP1iVDDCEufIhe0fj+YGYcnORBJU1gh2Mvg0FaAFPaFRXrGoUyKHH+aCfLRI1JLcko8CSDIx3OKQEGHyTx7JPHHODJgB0xx0ETekySB5JKOjOW9pSH1Dy0JTJFsykKYhiYBlhtmSMX5DnUsnR6lz+b6OZMkEFkx+Bkos52wshJw3oEXnarSVfYhzTTRBRppekyXGPaKUe2N4W7zfz2w4MeefFmNgklV+cqOJGY98qbNzjhllQhYyPmehweR9dE44p5HdMiNcfIa/MJNjTKn7AhhCYQfPEbYY95V9VR8tqRCxfp2tYnZOKsyElPdWfd3/3RSlTk1NqVPq1JQ6pU5NTamT67d/+Ls7/8cEamrPvPxLV6lZqbOamppSp9SpKXVKnZpSp9SpqSl1Sp198tn6oYdrBu6v6run++oXLW8bRh513Py2eey/4Q371HNf5M/puvL51plvyH1lz90ppUMlbTc5f0JZ521JRf0FtmtNocWax5/iVftl32I2lDqlziW244C/T0Redt0MAj3/orVozvltWvlI33WvmsfG0ceDEyo/x9EWNF+TWja8SIWU0sGwlDpughOrwlLqyztvTyjo5rt6rnmp99qXN2w7FJ46W8h3nXH2+e2Xf9vSfOjW97bu8eq84rtxeZ2l7bcodUqdS2zf8Yj6oUfkPirThqyJfiFJ1Ws37a3uuxfJ9l73ysCNbxwPSkemOw8GIEdqlnfdzuMRvyT/6CIqIFYkzr9kTImhVCy/6SrK8QbPgze/c9A7lvhJeXhaA1HI0tB4xkrbb6bfgJiSoVvflfrtl3175brtVK4bfAiEGDn3MdmtUkEso3Kcr+i7/rVzzr+k59qXpbC45YaW6edic9th0tQktmMMIC63Az+rN+yq7r+PR0bSffULrEEV3XcodUqdSwyRHfKOi8xo9o0skJgAHqiwqvcex01v7/eIRIJIH9gcN70FIWiaLE4CRdPYk9yQiSWXOKIz7XjLqb/MKyzHOCd33bj9MLDhE+dkbkiZEtC6ePUWyi0NxXPHFd9pnfl/sMEzkWfwlneBQUbCKhAUX0HJnqOh5IqUe4Vm5zVeaXpMrxhlhNzE53XxFSwKsM3IJaqzjlg+v3HksQOe0fhhhLNDveUdd1Cn1Cl1EMW+DhKIHqgNIRJYeHVi4b/qeaQvcQNp8qqs41ZRNnYsIIUKNMyomiAlI7KBE1SYfI+MFM8kdZR3Xvk9CkMSq0459Qy4wr+lYZH9euOZnVXPNS+DCt5MCDKh7MKVG4pbbyQewiFdWKgzW9bMqolNO49BMt7oi+A2786WYEjmSV+Om91CnVKnGWat4wG5Jw1D+vXDjzpTh17J63o/pC4ivSmrZsqZOjR61D+Z7RabQ8IOCNHwBAOVY+yyiGM5dZfC1cBNb0quaPZUlobUNJ77b3i997pX9x4LhzrTkUAFdSSEVM6snqQhCScLAWMzGSYHKmBjvpEcEv69w3OhyzkXTSzsJaQzGO4Jg7uPhCh1Sp07jMxNjg3I9zjc84sqtMQ6JIjiEaUcZqBp9E1Wxm6KDFDyQCqgUYkbnM3QkFCGw9z6y+Vsg9wSvDkCJaiSyAEMW0Q8WBo2jT8p5YRWPHde+Tx04UcyTzoSqPDG6sDAaJjbcAXsJRT0QDiPbN4wkDZgY2TIfCPpLlku6SslRF0q2CaepqGgyMCIipphKnXuMPZFKz68AAO5Qx0BzZk6kODt5l3HiTzJJQNm17Rtn7fAgL4RNG95hEkabt/v23XV8wDDplFyPIISpyOETU5TJLeE4bkNoZT8E+fU55FVgEfTkYykdvBBslZuSH05luQYhuBGBVDEG9XMKQ5j5i/fKGEWPs3HFtquo4STJPkQ6uCBsO9E3Z1KnVL3eRoHEhJbJFAgesESWUs5eSA3lMxtSzm8LeR5bkNyS+f6JLfOb+HH3HD24+yHE384dx4zkY101PIhshw4O2StkVeU6z8lV+q+iAYS/JMAz9AsAhdJKSVqSp1S5w4jsLDdUsUrdUqdmlKn1KmpKXXuuf7zn/8MTT+hpvYZ7I9/+qsrtanUqakpdUqdmlKn1KkpdUqdUqem1Cl1/eMPN7ZdK/e2rhtTs5uyCzu6hu4xFdr7b0/Nbk7ObGjuvEFKOgburGm+rLrpUjFb101fbR3Xt149MPEoN0xLRl5rem4LU7HI/FjMMfloY/u18lepU+pmraH16osvWeeYfCy/tHfvAZ/SmtGcos4zzjyn1n4Fb/NKe88+58L8sr6S6uE9+73jkisoRGGHjgWnZDYmptVQQpMljgFN79h1tG/0wSU4cVXXvaMP8G9adg3ezZJ04UVrmIriquE167bx+QvNz1wPK1dt7B6+j7/M85BSp9Q1dVyHGganHt+243BV47QUsmyX100gFCTVN/aQWbPhjdiI4Gptlzs7iUksI0JyU1jhiE4oETkiVtTZ1HH9BxH1IS+/OEo8fWNRYU5RV3XTDOW8xSePvDriEcYwUrIapSEDo0J0QinOd+45zivpi5uw6LzZ+sdDe0ceKKsd9w9OoZCQe/BIIINkHTn/gpWnnHJaYfnAp+raMmYxmgMbUY7KkXFFUgilrE1dQ/fOOz8037BpF66CI7IopFPAZjL5q9R95FLqwAyh7DvoCz/kkBIGN27eY+RuLC3HdvhYSGxSBQYAiKzTcZeER+RO2zr7lTREcLyihHgSGplDZVz5B6dm5rfBLd3hqq7lyvCYfDSNfMGGwv2H/Aw5CJpHT98YGY9YckZ9VHwxN+genPC5acu+ospBQg1Rt2f4PhqS9QEG38Xy8Qm7njtmC3WMgW9cvXZLUkY9k7bI/LB+1bdcxQ2cs5AtSJ1Sp9TJvoVk6bh3FPih4EWoA7aiikGCSV5JT1vfbRSSoNKqoLxfUtCg8EyiUFntGOlre/8drP3ITraRyNdIny6QvlF2QEiaibeEsi7HXfwluzNdMxjWBXZWJdUjhCbJjWGGrulRHNIXg6frg0eCyAY/YdeWMVPTQp14oG1weBbdEfcWmh+A5ysYJH6qGmeUOqXuhLX23gIhhrq+sQdJ5Fjp5S1nJCR19u6bERyFRn/IqGfkfoRr2DAGBsKqYBkalUssImzCRs/IA6RtRCEjSiN9Aouz9L394xenDiMbJAvFc25xN50ieiIbXUsAbGi7ZvvOI6wF0nVLz82fsGvLmIEEDnFuKhBj6Uj88Eg8pK+580Nfu/Z6+AYm0ktYdD5/lTql7oSRXx04HMANp5Es2KgBdQozErhY+GWzh0ylMC658qhnBDeUFFcN0QSdYchO8jQCBTkYsmOzhILlrILQJIkiHVESm1SOvhPSagiqsiGMjCsWZdMwq6A9Mb2WcnHYO/qgoQ5giJncMAbBhuMNb/8EhrF56368EdPYbVKI9CX+sN/jePaTdW0dc6fjbsoHJh6BFvko4rDZ18l6xNu58wNjEoEZAwOja0pYCPDD3681dUodamPpJURwEdkk6CEv4h5/ZWsk6odGqSbSoTCroI1Hc3Fwh77Tc+2y6fILSoZDsju2W7gi7BjnqBA2OAIhN6Ph1u0HKUSsQgirACGXCjTkLQEH4RrqWCY4nJCTeobHcSttccsCIcsHGzNIgJn4lCr5BOrj4RN2DUKWMXMsJB8oXAEeM8AhzboNO/hbUT857/zQo4dPNNPI4zHPCDyTHTBaXvHXodTpvg5BI0TnEvYz3UP3WqohOAo/g3PYNo8ITqA1/5yQIGD551pmDJZXFsMVzi0bKsuA8fAZuraMGT8EPctHUULXi88P1fApfek/JVfq1L4qptQpdWpKnVKnptQpdUqdmlKn149+9COdBJ1hpU41oTOs1Kkm9NIZ/vJRp5rQGVbqZtx76aWXXm6PdXrppbHuF+699NJLrxU/ce+ll156/Q9jsU3hs3yOEAAAAABJRU5ErkJggg==)

* **Native Modules Thread.** This is where native module calls (e.g. the `UIManager`) are executed. The thread name will be either `mqt_native_modules` or `<...>`. To identify it in the latter case, look for things like `NativeCall`, `callJavaModuleMethod`, and `onBatchComplete`:

  ![Native Modules Thread Example](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjAAAABaCAIAAAApY/stAAARb0lEQVR4AezVgQUAMBBD0e6/Y2a5TlAFTvD+CI/ImZWSjN6xAgUKFCiHZBWgQAmUQxIrUKBAgXJIVgEKlEA5JLECBQoUKIdkFaBACZRDEitQoKqh5JDEChQoUKAcklWAAiVQDkmsQIECBcohWQUoUALlkMQKFChQoBySVYACJVAOSaxAgQIFyiH9sgpQoEDJIYkVKFCgQDkkqwAFSqAckliBAgUKlEOyClCgBMohiRUoUKBAOSSrAAVKoBySWIECBao7hyRWoECBckiXvXJIkxgAo+BJ5yDDzdi2sR3btm2r3X2EzjpfbNT7ahO9P66MiYzMP9WPnRYdtIQcAABIZ9IZc0FIAACAkLwFAAAgJAAAQEgpR/L6+ipas1xxMJO37QBrdUeSp5SIJizp/3n8k+y/nH2076Lez78lh96tv1rSv9F0ItkvzDXZvNV2Ktn8cvRp+V06GLqSnPV192u+PJlISpavVB1aeAnPBx+SU573P0w2Cx+gZPPD1pvlDyIlk5VKC+7V+fi9ZHlp92BOQYkxynqGRG1Ds0+lA1chpGzwSvp/bk8QEkJCSAgJISEkhISQEBJCQkgICSEhJISEkBASQkJICAkhISSEhJAQEkLKsnMWzHXkSABeZgyTw3Y4DqMhZI6ZmZ7Zz8zMHGayw8xMDifLTIXHd7/jvj1tTXn99pyxPAFnlZqaasmabvWMRt90Sy/PMZBO5d/YkrDvQvFdUTyUdeFA5rmnBiTM7Uo5ohX3pB4/kXfNKCDJuyYFJP12JYAkrVwCSBImJIC0NWH/ybzrQj5dcHNXylFjgcRY6trtrYkH8MgAIEncJQkgSbggASQdXkgDKTCn2CctW4ONb3puSEH5kwNSXuuVjLpTadXHUioPl2150KvZP6f5Ys2er7tVZjac8Y2tCk5p0bRJH0XrO/UqUUDannTwpZdeKvCpEkWze0GkY4Ll+KsKbs3xLDUcSLle5VjfnnRIFOeMX9AStdUAIMm7Jg8kHXblgSShXAJIEibkgMQ8+NG7H7vM8hTFbYkHRw8ae55p0Tgg2U9ZMeyjEaAO+WT+DTw6kn3JACBJ3CUJIEm4IAEk3V5IAGmpdwCavVOyRHHEBGuX6IQnB6RJtg5LXSLDzGv9TXUDBo+CMZZtonO2BiTUd6us6/hu4rTF5dseda1Z4ZMyx84roWRvVPZmtCWXH+wLkDwjS0xF7Zb1yzxNmfVnflepgESAwrhhdjiYeZ5inld5/Mo0hNrQNVS+/cY71Jwu6Bw7ZALNNpv2GgukIt8aTMybsOhc0R2KDlNXrovdaRSQ5F2TAlLPdvsIJAnlEkCSMyEBJG47BMJEU8RmMS3yFC4YCiQnWw9MRC9LFOZGDrA6mnPZACBJ3CUJIEm4IAEk3V5IAMnBP+T1N94cOdEmoqSG4thpM93jUqSBVLTh1rjJ8+mqR1hBXce3eW1XwQ/MoCaxZB8NZixwyag7LRq7heTCHoSYvO3vfjDgzbfeDUpqrN71xTArG9qba08WrL0hZK+oMvCzaFUoBKLlXHvf6t1fplUfnzJnucaG4o234RxCcvkhoQ21Am/OgZlDRkzg8pjcXw3Rh8rtn6J84cpgO9do9IemtdESRiaV7UcAb1SOGjcdXhLSIUO7iu2fZDWcRfhNs4qQFlgv3RDfzplivnclI5KPMkY/GRVeA+vhU47nXk1zzQ2xi7lQcs9YIPECpLnlESdlrS4Rn4QGAskQ1ySAZGnXCCBJKJcAkrwJCSCRkuJ8pvAW06LhQGIs4QJnMl1ni24bBSS5uyQBJAkXJIAk54UeINn5BC509yZOWuLpR3HM1BnSQIJAY6xnp1YeAR6LV4WFpq1hQgcABWuvM5WDhNr2b2HJ7CWersE5kIDJvXzrw6qdXwwaNgZCgCIYULHtkXd02XKvpNr2b9BG0CPqc1suzVzo6hNbiRKUQw5/U+3qiKJuIUvppnsfDhhasukueoBZdtP54ORmLqza+flKnxQESAafiIToG6RJrz3Bn0RLASQyimNt5tTu+YYG9LB691fjpyyAZCikCHFF+9zWy39qIO1M/m0ucJvj0xq1rTywUYxIsslNEZvM7oV8PfEaaCPVcCCZVqZjnYmJbzRyOMYASd41A4BkadcAIEkolwCShAlZIDG9koZCOTmi9rQTTwhI+8ynGVp8f6DfECDpuEvyQJJwQQ5IEl5IAGmuk1tEae2Hg4YEZhdbz54nDSQma6ZysCTWe5j34RBnikDFZqadABKZMdaQEkv3EanAAP4KPyAES0HQi1UcEELw1FUblfCAa8u23KcYlNwEOQITG2jWlUY0jivYpVWiJ6G4AxNQTRTjC3cjCP30UNNPTWTWJloKzq3wTqZ7hHRAlL6BMVa88AVAkh6kHqaK5F6DAhJjnTmC2cG0ysyUzWSd4pLD+7DIxo7MNeR4QkASankZ7KYsNzRCknfNACBZ2DUASBLKJYAkYUIWSOgnMJ0xZnayS/Y0K1vDgSTGUuyKlAhHE3O6IUDScZfkgSThghyQJLyQAdIqVwTXmMQxU6b3JUIiu6VN8VmN57oCqXLHZ6weASQglF5zXAAjf81VZvyiDbfhkFdkqUjBgRwSdwCjq7aa3V8Rl2hAEuQgF+fgHtt1y8PkWY7hGes1INEMIGmJOE1Afw9AgnZO/mb0hJvXkbsjoqLPAAmPYCrNSAxSX7i+81cgKSCJFR2CTRY2N5v2+S8Ko+ZY7tVB7w8mr6WFEYezLoqNcHvTT7Hwowl9BBKH5zx/rK+P243MJ7NY+j6YeU4zKgskedfohiSQLOxaqhXeSQBJQrkMkCxMCM2WJvoCJG0Zg5QRFi0HFbb6CCRtvQpzliNKGJIAksSDkACShAtyQNLjhRyQOCbPX4Rm9/hUZD9zHufQwsrA7CKEoJwSdt/1DCS2wI0YM4W1FmSPsEJCja5AEhES0YaILciJERLZu8WQIhNcYcMC2TYiIRHBEFSBK4okAEmaZTee6wYkdEKy1KqjQpv1jCUkCcEYWAIz4io2I/QAJLEyREtWubSWERkbAJJwBxSRURQREprpjwCYg0ccKb4/O5D4RBUjkjMyI5JpmmGKzC6D/9UUku5nSG0ydbDkQ76LD1t2IhzJvqgJckACBnwdC5n9prxyAIlMDtbZc8WG1DD7OP4kjEoAqS+uad2QAJKlXUu1wjsJIOlXLg0kSxOaZgsTkkDq+r2fsMoMkM4X3xFeWLrTeyCJDTK7hMzWTTGbdxtRmiE5IOl/EBJAknBBAkhyXugBkr1v0AJXTyEHZBW99e67ACm0sOLjIcMiSms8k8y2Div4E+tMzpHxj93UEJu/g5cU9nCwLASQXIKyBZCmz3cWyz80EP+Y7oGQWOxhKwTzPmcoxdQvVnfE5gKoQw6Na38PpAMIbHzQtEE+QQsn/wwuATYI1GiNNQHgkTYUa0iYpiWa0S8awDYycvQEJcRDtAdRkJK0IXsrhGaWo8DYnw5Ieg5GobbHlGVnce73P4yVcE39MFb9MFb9MPY5+GEsIUXJxjsI+g9gIEjDQYpMOwsBmPV8Odd2awM82C7R81Wk4KAO+AGKf6iTEE0rkjMUAvjUbCkgGXCo/6lBAUkBSQFJ/U8NREiER4RQ6n9qUEBSQFJAUkBSQOo/hwKSApICkgKSApICkgKSApICkgKSApICkgKSApLFv39+/s8vSr8w/PjlwC86u/fjwx/bAtt6dawNXqvf/RvtN7jEkOM/f/+PTqNn2s5I6H945qFO/Z37Onul+cr2Kzo1Hyo71Me7dPvQbZ227p+43yvN7VntOjXzpPriwl9/+atOQ5e3Xe6V5hP1J3RqPr/+fF9c6Mjt0Gnou7vfSej/4soXOvUfLD2oU+fXN7/W/17//M+/5lzc+6Ienb980/v5XAFJAUkBSQFJAUkBSQFJAUkBSQFJAUkBSQFJAUkBSQFJAUkBSQFJAUkBSQFJAUkBSQFJAUkB6dPiT0+lnHoBgKSApICkgKSAFLOtIXJTbdL+9alHtzy2cezO5qyze/5fTcapnTHbGxGSDmxI3LfuaQBJAelewT3rIdaflXymgKSApICkgNSvgQRLPhw2GIqsSI4Maip6TPsLHWNmT0s7tq1bTfLBjRrbBo4ekX2+3ckcuzTS3xggKSBdMl8COfy3gIWuhZ+Xfn469bTtKFuKiQ6JhEcAyW6i3QsApMB5gThlNcCqxL2kB0MKSE1+TXbWdtwrnnuDb0M/BVL68vT33nyPI2VZSj8FUvnq8uEfDudB+M3xaw1sVUDqO5CWRvlzP71Kza7ZppDWsrhdzS5ZJuozTu9aEOiRfaEjpKX0nY8+eOPttxCon7V61eIwH2qmO9lnntkNkBBSj2zRoqXBY624yi0vyTE+xAAgKSBBGvDTHtP+sPDh1BFTz6SeWTx+8bHEY/wpeH7wvth9LwaQUpel4l1LQAuUnTtmbg+GFJBcp7v6zvZlBlwxeUXk4shnDKRsGSBVe1WDokrPyjKPsg/f/rDZv7nfAak1oHXsoLHmFWa+D/iKKnYrVkDqO5AIbkbbTjGf3CGAFLWlzi46kHpqCH04fzxyWPrxbWTzCH0IpyY5LCT6IQaa7bmK9gpITxxIVzOvzraaLXjTmdt5N//u/YL7cKjet37coHH74/a/GEBymeaSuTJTyBWrKyz1KyB1nQfrfOqQm/ybqryq+iOQkhyTPG09hVzhWcGHSL8DEjTlBeRxINd61/I+KiD1HUgZp3eOn28LYASQyLlpQKI+69weqxmTbT1Whq+rpGVX/LjnJf8hkETKzjAgKSCdSzunAelR0aMHhQ8cbRwjFkYQM6UtT+P8YgDJ3tpeA5KYbf/wUEAimOB7XLtFjX6N/RFIsUtjAZLmAtFevwMSiWUNSDwU4iQFpL4DCfBYAkmk7MbNm0k9eTm/6tyJi+ey1GQ+sU3DD+0FkIiZtDUkMn5zvJ0RDAOSAhKZOsb9nbw7rB7NHzv/kOkQRfCjFQHSkglLqLmRfYP4iUsumi+ytoRwPv18fwFS+MJw0lAI2U7Zs0fPRij1KOWsCUxbfJMqIHHMspqV45SD4DPbh/um3RnyYOI7nTwYMcfzDKQityIytMzmkJWUHS5ofdYEnvvzDCQINPSDofQfmk4cMpH1Xcv7jwu9BZICkgCPlrKb7eVEfeia8pHTbNJPbLexm08KjhqE5AMbugEJYYaLo0NcMAJwmh/gweYIg4GkNjWsC17HQt+AdweY7E2flX4WMDeAPQ5AiBncdZrrnfw7q6asAkhksXdE7gBU/Olmzk1t912/ABIvNpmoCYMnsLTAu81aPcvFvNWakOec5zzNWQFJzObcJSZB7hgzoHZn/Of6s0GA+XHysMk13jXPM5DoJCthb772JgM7zi5O67MmaM/9ed7UEG8XT/95Fk5Tnei5dv8tXVBA0g8kSCOAFNpWxnIRi0AcwydPGL9gFvXz/N2GTBgDtNjOkH1ujwYk0V5s9R4x1ZpdDzwaoiWyfFS65ycvT4owDEhq2/fDoocARit25nSKGIj6F+mHsWBJT/ZGbftmmtOydv0xZacl64gz+vW2b5bxdG50VECSO4CQ2NitHVAKCD12cwSHkP/bzh1YABDFQBDtv+uUECwM3voVPGLA3f4EyZ8a/uc7pH6QfIckSP0nSIIkSD6MFSRB6j9BEiRBEiRBEiRBEiRBEiRBEiRBEiRjBQoUKFCC5CpAgTJQgmSsQIECBUqQXAUoUAZKkIwVKFCg4hMkYwUKFChQguQqQIEyUIJkrECBAgVKkFwFKFAGSpCMFShQoEAJkqsABcpACZKxApWGAmWCZKxAgQIFSpBcBShQBkqQjBUoUKBACZKrAAXKQAmSsQIFChQoQXIVoEAZKEEyVqBAgUpPkIwVKFCgQAmSqwAFykAJkrECBQoUKEFyFaBAGShBMlagQIECJUiuAhQoAyVIxgoUKFDpCZKxAgUKFKgD5XeGmdFVHdAAAAAASUVORK5CYII=)

* **Bonus: Render Thread.** If you're using Android L (5.0) and up, you will also have a render thread in your application. This thread generates the actual OpenGL commands used to draw your UI. The thread name will be either `RenderThread` or `<...>`. To identify it in the latter case, look for things like `DrawFrame` and `queueBuffer`:

  ![Render Thread Example](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlUAAABTCAIAAAA5omXRAAAZkklEQVR4AeyaA6xcWxSGJ3i2bds2a9u2bdvttW3btq3i2bYx709O36TuRTn9Vr7c7LPvPmuwTvJl7T2m+PRsOIDw+GT9BcoBVlwLagFnov94sCgHUAtqASbzQUG88847ZqsOykFQC2pB4D8eLMpBUAtqgf8IHizKQVALaoH/eLAIymG1QS2oBf5b41VzMB45xUuL7M5MQnclf9/sCMt4T1/X4dgSUt329wOffvmZ8W0Tn3/5rZ6rNrK1wueo3zmAfXXg9ycvand/dcin1yWlrJnv//sfvj9q4D/8h//wHwD+w3/4D//hPwD8Z7XgP/yH/wDwn7kZUZqYsbrPuF1lNZaZtD2bYxoWniIAAADUf5FgbkngvxYCAAD4DwAAAP8BAADgPwAAAPxnTQD45U+3jRq9LWyk8Myc0rokUbUL7GLGKIOBEmoSAPAfwKnLtDWd73nkhjmbu8/e1O25N+8ZMv3V6LoFLU0SUj7nkssvmLi8w6QVHYWyRddrHgDwH8CpysyNXcctetty+eQrd24JGeGaMnHg5JfvevC6rSEjVrgOkNvOu+BsrQyrnNt16NORtfM9Mqe81vVBDdQ+9p/4YnDZnBfb37dvWq3sNfq5niOfHbe4nXPShPsev9FkMg2Y9JJucUud1Hvs8693f0j513gNevT525Rfa3RXUMks5dHK0fPfNDR8sgDAf9YP4L+Rc96wXKoL1KVT4nhJaHPw8OCy2TfcenlI2Wz5TLoKLJ710NO3+BfMWOU+QAv8C2es8x0yfkm70Io5N91x5ZgFb0ml6iAlM62/9qZLlU33Pv7i7dodVfLOg56UXJVcwvPOmWaYVYO13oOlRrWMz799rxJqoJWL7ftQnRMH4D8A/KcdUfu4sUNnvGbM+OZNl58mr+woVwUUzZThNgcNH7vobTWCG/2HaiC3yX933H/tMud+Sxz6LrTt7ZU1VTuiT7x0h84FlUH/lfa0KSpHqqG0JHeIGyftaSBf3nrP1UEls+XaVR4D1RROWNZebSXVOUEA/gPAf+36PKq2z6IoyU/aU4e3PXzUM6/frYZPv22RmXqPec4+dqzs1a7vY2EVc2W7F9rdt++Zn2a0lSr/aVI3dh/xzMaAYUOnv6q/luSWgTpC+S+4dLYkKn3O3dpDHrWJ5Ec01g/gP4CT6T/tWGqgk7k1noO0aSmfWcwk2/Uc9awGQcWzrrz2Ip3PGVudg6e9ovM5SUsnfPrvvt2e2HdGA603RPjwM7dujxh1OP9FVM3TSilWM9r8lAU1OCkA4D/rB0D9lun/kOF0GmeYafis1zWQ8GQmnfm91PF+/dUuqCbf7PnIas+BRrOoPU8NjP5vX/9ZZqS9jgOeUBLpUM3iK50fsI/Zm9zyKvKfkkuoG/yG6m3oFzH6vYwODqnOSQPwHwDIYUZPJsKr5rUuiTKov2xOBi0ILJ6pgTUBgP8AAADwHwAAAP4DAADAf80HAADwXxtik7P3ks320HyikjPNh4mmzz4b7+tT9v57xuW3v/yiy9L39l7OGu88pMeGhtoP9r3lve/3uNc4tAiPGkfzcY7E2prJ/n4a/Pn33/oImU2NGgcUF9mkpWnw2fffa7Lmo480Lqz9co1XjQZ///2PPt1JBMYN3m5uRrzzzjsHzPzzzz96sEHfg/m4RUy1y7rEkUcAdn9RZTYC/+E//Af4D/9ZAfgP/+E/wH/4D/Af/sN/gP/wH+A//If/AP/hP2sG/836j52zYG4kScLo8TDzmJmZWWBJlmSRmZktmZmZhuGYmRl+371x3lV41cssjTY6FNXVWdm1sZX96sss79bx4PTSwP+v+d1Hn5Zn38qOq7W7sXsQnyH+BT3/2px7HsvS5/Muj2XRYZy26ydsOl9z7dZ7mVkqRxusq22ufVP5EL/Bx78e7+zUxsH0xsGHCbHxpc3V45fvY7B8+JyY/RjRNzK/hue3nH9bf+lc/lWLtMeeOxpnKwaPrHv/7PnYDvf/3Tv1PY/vtcv3ysUvt+9qtvuP7oEjK79rv2sbPLYe/CfEv49yOZs7s/KLnS2d9sY2q6dJAuCTX639Y6lZud3j0009Q5cuXxmaXZlc388rqVh/9FprXG60jMytBTT/QvxzVs9lJld/Pu8Ku5+cEl9RVdRZmtd0+dJNt2lea+M2L1y9fLvJvllR0MrEOtyHwcU/eLZ1687duZ0TwrZrdOr9jYm72MTkhb3H72MzurBRabJ9jOhzt3Yv7j99y/k39V2PsS2bhrE9x9ydN/zY7vaW3rx/ZfNPHR/P4fZfuy5fP+8aL2ld1tuHim6HXdv+S6fWrGVRx3uhY1ZVbPeW6a3Tf0uHzwrLdfyPegvKdctHz6ssdmEYwq5EV+1d2S6qNEA4DHrGZ+iHQ/cehHFrq2shKiDf0MzKO9A1MGZ21t+4dXt+56TG04Tlg7CIgalFHtFvsLnosdY1A04a3OKES291cptdWCKREJeU0j+5IA69y9u9vjmmh4HrTag8yS0qow0gZzaPmC1tXkf/6Pw6jW+dO98+5A0I/oX41+bcT4wpPn/ucvj9lMIs9ykIZ2HSN79xzljWf9YAYlUWtnObnqjrcB/xKCfNKurNUNLLGrh1Ixxone3XFXfb9BNag6iwTPSfTCAv3W4o7fNz22BbC7uXxEurywb5fXgvsdWx2+LYZiB+8jMcWCIis1JM+EREBhz/iPT45DR2loQMIdzrnW3qHSZIhYvEpqhDDIgmGtwWlFVVmm30EKQrRy/OumJjSn9iagYo5bZUb+bTQdsvVHkFO1qGEPXyMbHXtyL+bPUtWPLdMNicEdGxV69d5yOjJsDrSvUmDAKaf+gqqPZm8ZgThUMjT+zwidvKxgzE3/QP6iy9+UDr2u1Linn9BzWzP6ovc6ft/6tn6ZfNOcZ4Gmu/bzslVp9ztBiHD+NveV86d//ejZmpMxefwjN6YB7CTt4em/kAfdm5UY0xPXM/bmiYqVj4WRP2iXlhHWsGXIHeg//0dm+baIcn3sYm+PlX39lf426kYXE3kmz0tPeycLlt6Bqkn6QHS3BybY84uXPvAWkKFmifb45V/jAiCjJ52nuyCorhnMlRR9hAMjwAIR4xJD2ngB4iKjImfu3R67TsPGQihMMJDRIm9M9sHTmaOxjOS1F7wJgGASlhw5QgMT0kV9muLh084y1cYsxU8R8dn9Q26F3Ye8J7pzcPITqEZgJffv6F+Ad1wF676yAn1QKKYAzwa7CutTr3blx74DEvYlCcUw9vkuPKMGh17j64m3Cqxo6iw7PQZ5Ds7q0YemAbY9td+9KPc+RdTdWYxuAgPqogNjI3N92WmlBJD7DUurXqxtMSddwWZDqNpf00Ih9mWCpHaDATfUkPqpElatV5GRWI+q9vYh5QET7CP/mlf3huFT4R4IQbMUVqVAJfgnft5BU7UbGUq8xgJgxXjl+whSWKGUgY8hEgzP1ClR0tApHvAOFJg1dHxSUs7j3GMzKUIXwNCHC+SLia3T7my0M4jy1u0mAaAc2/hukK+2Ahjc4NY6krFYYBnpXftII3Ght/bBf+YYBiY10BxYHT/Kega/337bCQ/vU/tA8/smODfbY+jqdQKjr93vZfOxGLZE3pKXWmNi9Uwb+7kddBmrW/IMcQl29JhG0YjDypFbkpr3OMFvfuWcBqWmnUwk8bJ7/rwRu3uMUhEwhy/rGU2eKRgqAMwC0LjtXJGoU9wjCCQW0Yp9b3hWT0sCLZlME/XY0DvdXSN9o5Minh1D02rWp4HcM+tnUJKelrxy/Zysk6BplgjwZLn6jgXXUdfSRhWvpHCTZiTPyzJWRryX91to2QWCbGU7KdRBTeBNXihKmCVSzZWmbmFeLtS8+/EP+OoE5L7bbkGxFeiL+7t6LBDLU3EGWuGIY6Zw0AFdlLARUYA1SleY3kJ7HnunblXqNtQ/oV/97VAOhS/6MHSYeZ1i0z4XXKCQakQ03lg0ypKNuDQzEI3PynCm0//kk/gQac8ksrByYX2acS14QblMKAkMdSmxdlm8tAAMaHQkLYL1QxI6+DtsstLucLwAeH3/WTV+JZTYA8Kn74hsiemAsRiUHg8g8mZVbGtCzphk5sqCuwRKXNNlAoTwtqkqCa4h8XHCJpCfbeMPLXLeg8KoKACoUHvWhQ2BMzoGjpyUsujEA4ova2/twp2q7ckwb/AFjfvmX8hZNfXjr5Hbfin3qd6kGJMg1EIfIRbUoCliEUBYOcf0IpMpNgBgixoFmj1NuQd6snr1SQsKxhmHdpS/GPHR9QZNWqRKVcah33T8yzcWNbRwglp2fBPxVCqgH5GJ5TWOpq6ULqNfeNwK3lw2eIUd6OgSg/Uivji//jH7lTZtg2ME6N0OxqUE4IGwIPDOMHjlLY/5LzL8Q/so6IPDSf4A1BRhWQxCPqiuIcSUtyjFBHDHgk/INYIrkSogsBVXl+a3aqRVfcJUPaXHsATPKflO5Al8ZgHw92w6TMoc6yBBR5hZ9bLf9uXg/DCTlYpldrmApC/vnmFMZokOQkyohc9Nzi3hMVs2Kvkp9EJTJRBhrtbvlQCP/8QpVvS15pBbkiNqlsmkl+IvUUWf0AzKOg4R8X8qtxrpI0Y9dWNRQEb+/KP5KcAEmNgnwACU0Gk3RNmdPfr6vuyCm0Ju38vRsiQkeqd+MvnUg3P/4hMeGf6uFqXzWQgMX56NNasTnLPwgt/EM4YoZI7Vg3gmrSp0HOPxIU5DNl21VlttMgTQ8La5vazwaJbOuWDp6iz1juknUcW9xQq1bLP9Y34k8Axl6SkHgv/rG+GSIkptyIJfQlSNRZGLIlov94xDSoJdBP2YAMrdJ/jGVuwmYSO8ztS86/EP8ENlI/owhHehPgQSOpw5F+dJnmyEaKAeDJy6gVDgGqJvsGlTk4R5EPvGFAYhOGtTl3kYyc20TJ3bsdy1iNwR4+kXH04Kckpz4toUrr1o9/jGViIiv1xd1MJsj4Z29oJd3CrcXVAHiId2JToonGzNahln8KTmxwpfDPQKX/+ERoQxWqkW3CD8Z8ZIjZ9+IfNKV6wgTIA1ER5Je6hngjNSrlQOoy7JIDgn9ADsyIaEOczf6o4TR72Uvmk4Kfyn+SEZW8qIyCecBy529dSDGwhP39mJuVDRk8cvtKEX80ON6JUsQGtSe6EIZBTdF/uJJaYHp5dM+u2TNRxi82tcNFAFjLPwqEvIh+Mp9oVkBLqpbyJD1Lv2gmL0pj8edNwcM/VpscPGFdAipZXvRMrO3KU/Z0NCQeWNZIK54i7CSDr7aN6lI9FBKwZANIwQB7jslo+Qe6CB6Sruwx8Y8ZnKOfX9oAj1+p6slOs7axXUIIt9TYCQwiAWBLhHAkR+wBOXP78vMvxD+AxyK5fycOMpXkNtBDdhECUZbjdAkMkzIbT/klaUkPuOJ0DGdSBFRAi0wpqOMWZSakxBgDfuGf1oACHo/4RzyTX9W6BW+cc1H8kz+HwJ6ELRlajsNggGANaP6hyVTAyneAZCYRhG4jfIgvTq7BME6+nE3e+IW8HEBjN0z8Opo61IeCR9pQlUOnQItR0lD8U27VN4dpyAdE6n98T4hr2ViTJRK+MjAg+AeHoFFGRQx4A36qzsfZE1X/s/YV0C/HT+KyHvBLJU8UGHCiHCgcFYBRwJPh2OBh/LkDRp678M2k/HBeRL0Q5gFLtc6pPgJC3kI7ITdMjobiRxSh4h+E45SNpF45DiqghcEY4Bm3CE3c4ipI+CeZTJYRWX71J30qyam9JDHCKv8wnrEk6S+veP+dGgHDHPygRY1wfvex1hgBymzFv/pXUI/U3L78/AvxT2SZ6Cp1kY1EkKlbAMYt+U/FGwwg1tkheCCbesbDDqPex0B7ad1qL3KnoDFY//5dG9dEE1H5IT8gND5MqH74PyyWc6eSagr0/CcXzAAwgIQ2dTVqbDS4BXX0KzPRXqu/aYU07+8QNHJSVOw5Uwr/4CjXf9k5BydJkiiMh9Y2x7Zt2/a0e9jG2LbNs21fGHfh+y/O9n13uVHr7Vlv9b0XGRWvsl5m10TG5C++l5llspXJnvE+wOf/8fwfy0uwndD8LebHP/r+C7ZxYo8o882+0Pdf2A5zSE+W9TGz83+gCw4YhGS6QkvlKsLvHjPokOVRdxRP33+5C21H/CP+PZzCSTqzL8Q/LgOE5RhzPf/e8lQpVtfuFWlMnFUg/lEh/tH3P4l/5l/o+5/EPyrEP+If8c+MC/GP+GfadJNG7YTh0Smtc+3cu33700+Ydh9u+d3EfwiZ6TmXjMaC7KUPP61o7UWRdA9f8+i7H77D1PfZF5/fsGH3+wvt786aU/nqp2+5v474R/yjOZeMxoIHRvwj/hH/yGjOpbEgI/4R/4h/ZDTn0liQEf+If8Q/MppzaSzIiH/EP+Ifb4zmXBoLMuKf9rlB+VKzZN6Aonyy92Zhggm16qk+ziH+Ef/4bTTn0liQEf+ytOXHzp0saBfnNlXb+jrDuT6mfrPjxMXTuheGOcfc+Kcc0fhF+YelROw/uD8kKUwzppe0ysOSw89anitXVzUOKJ28nfEhtJjsOM24vqi+NDAu2MHDEcFVOiGai1ukF2wuIiA0OVw9prt//IsSCfErnslJvpmZsu2toMJCweIC6pOVyrzubjgpGjUCTtvaloyO4DZVqw0tKz18+rRPRnrZ+BhqqubnvNNS0Zb4x6M5l4zGgvjX/PqEX3r4gaOHgnNj81tFqIkTZupfHIZT1CmVzOnhlPTIMQGed7ICq3YSkGOsSlMUw0GRLhhDC+PxK2HFiW3vzLDm6mf67QNc8aOyBSNzaldbDS+Pukb5op8keR4iG7e7oivT0Kd4Vs9L/imG1EdOHE0pTdOOG3wj/NIqMkTNUvx5ZapK9ajO0cupuKGMPcoR52VUZR06eqi+T4EYOMphjbWzTbVBhH4QUK6qvE/8yzAa7IODpRvrSUrFCQsL2dYmbgULC3gUI5Vmt7cV9vedc3KSbm4AfmAenPjaGjilY6NwwqsqEZnY2BBeUUH6j+ZcGgsyfvEPWEpXloA3gdlRCdKc9ndm3KL9mBrL0lUIJtXIZFq627W+NQ22QdW1vjFpIuDNKXD08MmjybX5MdUZmPBli01Nr45DCLa9Pc31L5rWhhUl4PaS8/a0S4R39ZgKNXiT4m5Z/UYH2opmdOiZr/rv2Knj0HlMzPlFBQiM4oj0KIZGPCqsKS6qK0koSIQ6TCvPiM6KYQ2hC6XtNYgB9tIrM0+cPQm9eJ/4F15ZkdvVCUeyvmbp5Snb3HCOirySfzFSiV9OdnZbW3Zb67ELFyD1UJ/V0oKAytkZIBOyzy4oCDgk/tGcS2NBxiP+ATagjuGlEZaQhDJDjXdSyJV4QzIzsjwFS3TV46pTVme1zw6YCHhuEGlPr8RgLP6BbegT8cZXxhyC3Bn/WHMIPjxCJ8wBIJEFrRhqqBxRpDUWo0MuAMUc+Ocb6Xcl/85cPJMtzIXsyxHnI+EJ/sXmxrOGHsGe4J+9u4N/dGCpojwiLQrX+8Q/qL287q5r+Mfyn5B34F9cTU1gfj7UYZJCgUSoZGOdcREB8u0tCw+Pgv4+pEahC4l/NOfSWJDxiH9IS4I6SDzCr11r4/jH0pvAGPCWa6yGjCvslBZ2SJDnbHl9wkTAG5PIf6bUFbCfgLKEKFQ92esa6QP+ocY3NeyG/Dtnb4FO8luExT1ySEZz4B/ynyyHCbwll6Ry/EP+E6oO2U74OaI8UDC9IgPYQzqUobGmux4BWDJEjaWDVaVWgEhAkbGztruec+6Sf4AcS10WDw0hzwn+2QYEVExPgW3nXVwgDbEKCP4hAISDzhOvrXL8Q8FTiPRosYh3+19oziWjsaD8J7KRbIEN4EmU5TJFiN2YcKy9HMQzOizyAW8IQGIT63PNr46bCHhtAlyMqU5HDUtv/ovYl0aBN2QyoQ6x2gd8XsM/tIV2ZLKyqEuGlzEH/oFhu/fstnGxBQjrehvBv8iMaPa0pLEM5LByssYmF8WgCghkt7iyJUPvMJ9T50+hrWeIt4uva+OgCrcgYrVeiB0x6IE5d8k/8AzqDczbd/iwlY8PkpkJDfV4Bwg7XCENgT3HsDCwEAEpajXLi+Z0tLPm1fNzCCufnCD+0ZxLY0HGO/6xZTaIM1xT6gtRg9U7+Hb+LrgCjYCWZ3wgUAduQZntKKANAZcMC4FQlgBhaEH87n170YrjH/a5IJhzkEFFPJYJLdxskS9Ffbw4m/f8g8hDuSGlVCPahn4l8yEQ4/ISsM8Tqo4LQEPUsMj7ev5BuLQoWlm2CwzE/hfcwr8mn4kVQSRIr2+I5UCoRlCTj/yjOZeMxoLOPyAtifQjKMXxxvjK6DW7TqDMkCyFYzrg5gWJVoDwFgHInepfHDGf8w9sS+dOiIXdoVEZ0Q/x/J94deWiuzvj3w4LDkL8pxG76fwfr+dcMhoLOv8nX26OFWTAuWeFvv+iGtXy6Pw7TkHguvOCvTCgJp1/pzmXxoKM7/xDudlJg3/auWMigKEohmH8WWcMBt/JFPTabN/+ef/F+y/+uSzk/Rf7Z//sn38uC9k/+xfJR45DLFjI/jksHGLBwv7JYeEQCxb2z2EJh1iwsH8OSzjEgoX9c1jCwUIs7J/DEg4WYmH/HJZwsBAL++ewhIOFWNg/hyUcLMTC/jks4WAhFvbPYQkHC7Gwfw5LOFiIhf1zWDjEQizsn8PCIRZiYf8cFg6xYCH79xwWDrFgIfvnsHCIBQvZP4eFQyxYaNlVALU9TudyAAAAAElFTkSuQmCC)

## Identifying a culprit[‚Äã](#identifying-a-culprit "Direct link to Identifying a culprit")

A smooth animation should look something like the following:

![Smooth Animation](/assets/images/SystraceWellBehaved-82dfa037cb9e1d29d7daae2d6dba2ffc.png)

Each change in color is a frame -- remember that in order to display a frame, all our UI work needs to be done by the end of that 16ms period. Notice that no thread is working close to the frame boundary. An application rendering like this is rendering at 60 FPS.

If you noticed chop, however, you might see something like this:

![Choppy Animation from JS](/assets/images/SystraceBadJS-b8518ae5e520b074ccc7722fcf30b7ed.png)

Notice that the JS thread is executing almost all the time, and across frame boundaries! This app is not rendering at 60 FPS. In this case, **the problem lies in JS**.

You might also see something like this:

![Choppy Animation from UI](/assets/images/SystraceBadUI-cc4bb271e7a568efc7933d1c6f453d67.png)

In this case, the UI and render threads are the ones that have work crossing frame boundaries. The UI that we're trying to render on each frame is requiring too much work to be done. In this case, **the problem lies in the native views being rendered**.

At this point, you'll have some very helpful information to inform your next steps.

## Resolving JavaScript issues[‚Äã](#resolving-javascript-issues "Direct link to Resolving JavaScript issues")

If you identified a JS problem, look for clues in the specific JS that you're executing. In the scenario above, we see `RCTEventEmitter` being called multiple times per frame. Here's a zoom-in of the JS thread from the trace above:

![Too much JS](/assets/images/SystraceBadJS2-f454f409a22625f659d465abdab06ce0.png)

This doesn't seem right. Why is it being called so often? Are they actually different events? The answers to these questions will probably depend on your product code. And many times, you'll want to look into [shouldComponentUpdate](https://react.dev/reference/react/Component#shouldcomponentupdate).

## Resolving native UI Issues[‚Äã](#resolving-native-ui-issues "Direct link to Resolving native UI Issues")

If you identified a native UI problem, there are usually two scenarios:

1. the UI you're trying to draw each frame involves too much work on the GPU, or
2. You're constructing new UI during the animation/interaction (e.g. loading in new content during a scroll).

### Too much GPU work[‚Äã](#too-much-gpu-work "Direct link to Too much GPU work")

In the first scenario, you'll see a trace that has the UI thread and/or Render Thread looking like this:

![Overloaded GPU](/assets/images/SystraceBadUI-cc4bb271e7a568efc7933d1c6f453d67.png)

Notice the long amount of time spent in `DrawFrame` that crosses frame boundaries. This is time spent waiting for the GPU to drain its command buffer from the previous frame.

To mitigate this, you should:

* investigate using `renderToHardwareTextureAndroid` for complex, static content that is being animated/transformed (e.g. the `Navigator` slide/alpha animations)
* make sure that you are **not** using `needsOffscreenAlphaCompositing`, which is disabled by default, as it greatly increases the per-frame load on the GPU in most cases.

### Creating new views on the UI thread[‚Äã](#creating-new-views-on-the-ui-thread "Direct link to Creating new views on the UI thread")

In the second scenario, you'll see something more like this:

![Creating Views](/assets/images/SystraceBadCreateUI-fc9d228fc136be3574c0c5805ac0d7b5.png)

Notice that first the JS thread thinks for a bit, then you see some work done on the native modules thread, followed by an expensive traversal on the UI thread.

There isn't a quick way to mitigate this unless you're able to postpone creating new UI until after the interaction, or you are able to simplify the UI you're creating. The react native team is working on an infrastructure level solution for this that will allow new UI to be created and configured off the main thread, allowing the interaction to continue smoothly.

### Finding native CPU hotspots[‚Äã](#finding-native-cpu-hotspots "Direct link to Finding native CPU hotspots")

If the problem seems to be on the native side, you can use the [CPU hotspot profiler](https://developer.android.com/studio/profile/record-java-kotlin-methods) to get more details on what's happening. Open the Android Studio Profiler panel and select "Find CPU Hotspots (Java/Kotlin Method Recording)".

Choose the Java/Kotlin recording

Make sure you select "Find CPU Hotspots **(Java/Kotlin Recording)**" rather than "Find CPU Hotspots (Callstack Sample)". They have similar icons but do different things.

Perform the interactions and press "Stop recording". Recording is resource-intensive, so keep the interaction short. You can then either inspect the resulting trace in the Android Studio or export it and open it in an online tool like [Firefox Profiler](https://profiler.firefox.com/).

Unlike System Trace, CPU hotspot profiling is slow so it won't give you accurate measurements. However, it should give you an idea of what native methods are being called, and where the time is being spent proportionally during each frame.


---

# üóëÔ∏è ProgressBarAndroid

Deprecated

Use one of the [community packages](https://reactnative.directory/?search=progressbar) instead.

Android-only React component used to indicate that the app is loading or there is some activity in the app.

### Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

Inherits [View Props](/docs/view.md#props).

### `animating`[‚Äã](#animating "Direct link to animating")

Whether to show the ProgressBar (true, the default) or hide it (false).

| Type | Required |
| ---- | -------- |
| bool | No       |

***

### `color`[‚Äã](#color "Direct link to color")

Color of the progress bar.

| Type                     | Required |
| ------------------------ | -------- |
| [color](/docs/colors.md) | No       |

***

### `indeterminate`[‚Äã](#indeterminate "Direct link to indeterminate")

If the progress bar will show indeterminate progress. Note that this can only be false if styleAttr is Horizontal, and requires a `progress` value.

| Type              | Required |
| ----------------- | -------- |
| indeterminateType | No       |

***

### `progress`[‚Äã](#progress "Direct link to progress")

The progress value (between 0 and 1).

| Type   | Required |
| ------ | -------- |
| number | No       |

***

### `styleAttr`[‚Äã](#styleattr "Direct link to styleattr")

Style of the ProgressBar. One of:

* Horizontal
* Normal (default)
* Small
* Large
* Inverse
* SmallInverse
* LargeInverse

| Type                                                                                      | Required |
| ----------------------------------------------------------------------------------------- | -------- |
| enum('Horizontal', 'Normal', 'Small', 'Large', 'Inverse', 'SmallInverse', 'LargeInverse') | No       |

***

### `testID`[‚Äã](#testid "Direct link to testid")

Used to locate this view in end-to-end tests.

| Type   | Required |
| ------ | -------- |
| string | No       |


---

# Props

Most components can be customized when they are created, with different parameters. These created parameters are called `props`, short for properties.

For example, one basic React Native component is the `Image`. When you create an image, you can use a prop named `source` to control what image it shows.

Notice the braces surrounding `{pic}` - these embed the variable `pic` into JSX. You can put any JavaScript expression inside braces in JSX.

Your own components can also use `props`. This lets you make a single component that is used in many different places in your app, with slightly different properties in each place by referring to `props` in your `render` function. Here's an example:

* TypeScript
* JavaScript

Using `name` as a prop lets us customize the `Greeting` component, so we can reuse that component for each of our greetings. This example also uses the `Greeting` component in JSX, similar to the [Core Components](/docs/intro-react-native-components.md). The power to do this is what makes React so cool - if you find yourself wishing that you had a different set of UI primitives to work with, you can invent new ones.

The other new thing going on here is the [`View`](/docs/view.md) component. A [`View`](/docs/view.md) is useful as a container for other components, to help control style and layout.

With `props` and the basic [`Text`](/docs/text.md), [`Image`](/docs/image.md), and [`View`](/docs/view.md) components, you can build a wide variety of static screens. To learn how to make your app change over time, you need to [learn about State](/docs/state.md).


---

# Publishing to Apple App Store

The publishing process is the same as any other native iOS app, with some additional considerations to take into account.

info

If you are using Expo, read the Expo guide for [Deploying to App Stores](https://docs.expo.dev/distribution/app-stores/) to build and submit your app for the Apple App Store. This guide works with any React Native app to automate the deployment process.

### 1. Configure release scheme[‚Äã](#1-configure-release-scheme "Direct link to 1. Configure release scheme")

Building an app for distribution in the App Store requires using the `Release` scheme in Xcode. Apps built for `Release` will automatically disable the in-app Dev Menu, which will prevent your users from inadvertently accessing the menu in production. It will also bundle the JavaScript locally, so you can put the app on a device and test whilst not connected to the computer.

To configure your app to be built using the `Release` scheme, go to **Product** ‚Üí **Scheme** ‚Üí **Edit Scheme**. Select the **Run** tab in the sidebar, then set the Build Configuration dropdown to `Release`.

![](/assets/images/ConfigureReleaseScheme-68e17e8d9a2cf2b73adb47865b45399d.png)

#### Pro Tips[‚Äã](#pro-tips "Direct link to Pro Tips")

The static bundle is built every time you target a physical device, even in Debug. If you want to save time, turn off bundle generation in Debug by adding the following to your shell script in the Xcode Build Phase `Bundle React Native code and images`:

shell

```
 if [ "${CONFIGURATION}" == "Debug" ]; then
  export SKIP_BUNDLING=true
 fi
```

### 2. Build app for release[‚Äã](#2-build-app-for-release "Direct link to 2. Build app for release")

You can now build your app for release by tapping `Cmd ‚åò` + `B` or selecting **Product** ‚Üí **Build** from the menu bar. Once built for release, you'll be able to distribute the app to beta testers and submit the app to the App Store.

info

You can also use the `React Native CLI` to perform this operation using the option `--mode` with the value `Release` (e.g. from the root of your project: `npm run ios -- --mode="Release"` or `yarn ios --mode Release`).

Once you are done with the testing and ready to publish to App Store, follow along with this guide.

* Launch your terminal, and navigate into the iOS folder of your app and type `open .`.
* Double click on YOUR\_APP\_NAME.xcworkspace. It should launch Xcode.
* Click on `Product` ‚Üí `Archive`. Make sure to set the device to "Any iOS Device (arm64)".

note

Check your Bundle Identifier and make sure it is exactly same as the one you have created in the Identifiers in Apple Developer Dashboard.

* After the archive is completed, in the archive window, click on `Distribute App`.
* Click on `App Store Connect` now (if you want to publish in App Store).
* Click `Upload` ‚Üí Make sure all the checkboxes are selected, hit `Next`.
* Choose between `Automatically manage signing` and `Manually manage signing` based on your needs.
* Click on `Upload`.
* Now you can find it in the App Store Connect under TestFlight.

Now fill up the necessary information and in the Build Section, select the build of the app and click on `Save` ‚Üí `Submit For Review`.

### 3. Screenshots[‚Äã](#3-screenshots "Direct link to 3. Screenshots")

The Apple Store requires you have screenshots for the latest devices. The reference for such devices would be found [here](https://developer.apple.com/help/app-store-connect/reference/screenshot-specifications/). Note that screenshots for some display sizes are not required if they are provided for other sizes.


---

# üóëÔ∏è PushNotificationIOS

Deprecated

Use one of the [community packages](https://reactnative.directory/?search=notification) instead.

### Projects with Native Code Only

The following section only applies to projects with native code exposed. If you are using the managed Expo workflow, see the guide on [Notifications](https://docs.expo.dev/versions/latest/sdk/notifications/) in the Expo documentation for the appropriate alternative.

Handle notifications for your app, including scheduling and permissions.

***

## Getting Started[‚Äã](#getting-started "Direct link to Getting Started")

To enable push notifications, [configure your notifications with Apple](https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server) and your server-side system.

Then, [enable remote notifications](https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/pushing_background_updates_to_your_app#2980038) in your project. This will automatically enable the required settings.

### Enable support for `register` events[‚Äã](#enable-support-for-register-events "Direct link to enable-support-for-register-events")

In your `AppDelegate.m`, add:

objectivec

```
#import <React/RCTPushNotificationManager.h>
```

Then implement the following in order to handle remote notification registration events:

objectivec

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
 // This will trigger 'register' events on PushNotificationIOS
 [RCTPushNotificationManager didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];
}
- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error
{
 // This will trigger 'registrationError' events on PushNotificationIOS
 [RCTPushNotificationManager didFailToRegisterForRemoteNotificationsWithError:error];
}
```

### Handle notifications[‚Äã](#handle-notifications "Direct link to Handle notifications")

You'll need to implement `UNUserNotificationCenterDelegate` in your `AppDelegate`:

objectivec

```
#import <UserNotifications/UserNotifications.h>

@interface YourAppDelegate () <UNUserNotificationCenterDelegate>
@end
```

Set the delegate on app launch:

objectivec

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  ...
  UNUserNotificationCenter *center = [UNUserNotificationCenter currentNotificationCenter];
  center.delegate = self;

  return YES;
}
```

#### Foreground notifications[‚Äã](#foreground-notifications "Direct link to Foreground notifications")

Implement `userNotificationCenter:willPresentNotification:withCompletionHandler:` to handle notifications that arrive when the app is in the foreground. Use the completionHandler to determine if the notification will be shown to the user and notify `RCTPushNotificationManager` accordingly:

objectivec

```
// Called when a notification is delivered to a foreground app.
- (void)userNotificationCenter:(UNUserNotificationCenter *)center
       willPresentNotification:(UNNotification *)notification
         withCompletionHandler:(void (^)(UNNotificationPresentationOptions options))completionHandler
{
  // This will trigger 'notification' and 'localNotification' events on PushNotificationIOS
  [RCTPushNotificationManager didReceiveNotification:notification];
  // Decide if and how the notification will be shown to the user
  completionHandler(UNNotificationPresentationOptionNone);
}
```

#### Background notifications[‚Äã](#background-notifications "Direct link to Background notifications")

Implement `userNotificationCenter:didReceiveNotificationResponse:withCompletionHandler:` to handle when a notification is tapped, typically called for background notifications which the user taps to open the app. However, if you had set foreground notifications to be shown in `userNotificationCenter:willPresentNotification:withCompletionHandler:`, this method will also be invoked on foreground notifications when tapped. In this case, you should only notify `RCTPushNotificationManager` in one of these callbacks.

If the tapped notification resulted in app launch, call `setInitialNotification:`. If the notification was not previously handled by `userNotificationCenter:willPresentNotification:withCompletionHandler:`, call `didReceiveNotification:` as well:

objectivec

```
- (void)  userNotificationCenter:(UNUserNotificationCenter *)center
  didReceiveNotificationResponse:(UNNotificationResponse *)response
           withCompletionHandler:(void (^)(void))completionHandler
{
  // This condition passes if the notification was tapped to launch the app
  if ([response.actionIdentifier isEqualToString:UNNotificationDefaultActionIdentifier]) {
    // Allow the notification to be retrieved on the JS side using getInitialNotification()
    [RCTPushNotificationManager setInitialNotification:response.notification];
  }
  // This will trigger 'notification' and 'localNotification' events on PushNotificationIOS
  [RCTPushNotificationManager didReceiveNotification:response.notification];
  completionHandler();
}
```

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `presentLocalNotification()`[‚Äã](#presentlocalnotification "Direct link to presentlocalnotification")

tsx

```
static presentLocalNotification(details: PresentLocalNotificationDetails);
```

Schedules a local notification for immediate presentation.

**Parameters:**

| Name    | Type   | Required | Description |
| ------- | ------ | -------- | ----------- |
| details | object | Yes      | See below.  |

`details` is an object containing:

* `alertTitle` : The text displayed as the title of the notification alert.
* `alertBody` : The message displayed in the notification alert.
* `userInfo` : An object containing additional notification data (optional).
* `category` : The category of this notification, required for actionable notifications (optional). e.g. notifications with additional actions such as Reply or Like.
* `applicationIconBadgeNumber` The number to display as the app's icon badge. The default value of this property is 0, which means that no badge is displayed (optional).
* `isSilent` : If true, the notification will appear without sound (optional).
* `soundName` : The sound played when the notification is fired (optional).
* `alertAction` : DEPRECATED. This was used for iOS's legacy UILocalNotification.

***

### `scheduleLocalNotification()`[‚Äã](#schedulelocalnotification "Direct link to schedulelocalnotification")

tsx

```
static scheduleLocalNotification(details: ScheduleLocalNotificationDetails);
```

Schedules a local notification for future presentation.

**Parameters:**

| Name    | Type   | Required | Description |
| ------- | ------ | -------- | ----------- |
| details | object | Yes      | See below.  |

`details` is an object containing:

* `alertTitle` : The text displayed as the title of the notification alert.
* `alertBody` : The message displayed in the notification alert.
* `fireDate` : When the notification will be fired. Schedule notifications using either `fireDate` or `fireIntervalSeconds`, with `fireDate` taking precedence.
* `fireIntervalSeconds` : Seconds from now to display the notification.
* `userInfo` : An object containing additional notification data (optional).
* `category` : The category of this notification, required for actionable notifications (optional). e.g. notifications with additional actions such as Reply or Like.
* `applicationIconBadgeNumber` The number to display as the app's icon badge. The default value of this property is 0, which means that no badge is displayed (optional).
* `isSilent` : If true, the notification will appear without sound (optional).
* `soundName` : The sound played when the notification is fired (optional).
* `alertAction` : DEPRECATED. This was used for iOS's legacy UILocalNotification.
* `repeatInterval` : DEPRECATED. Use `fireDate` or `fireIntervalSeconds` instead.

***

### `cancelAllLocalNotifications()`[‚Äã](#cancelalllocalnotifications "Direct link to cancelalllocalnotifications")

tsx

```
static cancelAllLocalNotifications();
```

Cancels all scheduled local notifications.

***

### `removeAllDeliveredNotifications()`[‚Äã](#removealldeliverednotifications "Direct link to removealldeliverednotifications")

tsx

```
static removeAllDeliveredNotifications();
```

Removes all delivered notifications from Notification Center.

***

### `getDeliveredNotifications()`[‚Äã](#getdeliverednotifications "Direct link to getdeliverednotifications")

tsx

```
static getDeliveredNotifications(callback: (notifications: Object[]) => void);
```

Provides a list of the app‚Äôs notifications that are currently displayed in Notification Center.

**Parameters:**

| Name     | Type     | Required | Description                                                  |
| -------- | -------- | -------- | ------------------------------------------------------------ |
| callback | function | Yes      | Function which receives an array of delivered notifications. |

A delivered notification is an object containing:

* `identifier` : The identifier of this notification.
* `title` : The title of this notification.
* `body` : The body of this notification.
* `category` : The category of this notification (optional).
* `userInfo` : An object containing additional notification data (optional).
* `thread-id` : The thread identifier of this notification, if it has one.

***

### `removeDeliveredNotifications()`[‚Äã](#removedeliverednotifications "Direct link to removedeliverednotifications")

tsx

```
static removeDeliveredNotifications(identifiers: string[]);
```

Removes the specified notifications from Notification Center.

**Parameters:**

| Name        | Type  | Required | Description                        |
| ----------- | ----- | -------- | ---------------------------------- |
| identifiers | array | Yes      | Array of notification identifiers. |

***

### `setApplicationIconBadgeNumber()`[‚Äã](#setapplicationiconbadgenumber "Direct link to setapplicationiconbadgenumber")

tsx

```
static setApplicationIconBadgeNumber(num: number);
```

Sets the badge number for the app icon on the Home Screen.

**Parameters:**

| Name   | Type   | Required | Description                    |
| ------ | ------ | -------- | ------------------------------ |
| number | number | Yes      | Badge number for the app icon. |

***

### `getApplicationIconBadgeNumber()`[‚Äã](#getapplicationiconbadgenumber "Direct link to getapplicationiconbadgenumber")

tsx

```
static getApplicationIconBadgeNumber(callback: (num: number) => void);
```

Gets the current badge number for the app icon on the Home Screen.

**Parameters:**

| Name     | Type     | Required | Description                                        |
| -------- | -------- | -------- | -------------------------------------------------- |
| callback | function | Yes      | Function which processes the current badge number. |

***

### `cancelLocalNotifications()`[‚Äã](#cancellocalnotifications "Direct link to cancellocalnotifications")

tsx

```
static cancelLocalNotifications(userInfo: Object);
```

Cancels any scheduled local notifications which match the fields in the provided `userInfo`.

**Parameters:**

| Name     | Type   | Required | Description |
| -------- | ------ | -------- | ----------- |
| userInfo | object | No       |             |

***

### `getScheduledLocalNotifications()`[‚Äã](#getscheduledlocalnotifications "Direct link to getscheduledlocalnotifications")

tsx

```
static getScheduledLocalNotifications(
  callback: (notifications: ScheduleLocalNotificationDetails[]) => void,
);
```

Gets the list of local notifications that are currently scheduled.

**Parameters:**

| Name     | Type     | Required | Description                                                                  |
| -------- | -------- | -------- | ---------------------------------------------------------------------------- |
| callback | function | Yes      | Function which processes an array of objects describing local notifications. |

***

### `addEventListener()`[‚Äã](#addeventlistener "Direct link to addeventlistener")

tsx

```
static addEventListener(
  type: PushNotificationEventName,
  handler:
    | ((notification: PushNotification) => void)
    | ((deviceToken: string) => void)
    | ((error: {message: string; code: number; details: any}) => void),
);
```

Attaches a listener to notification events including local notifications, remote notifications, and notification registration results.

**Parameters:**

| Name    | Type     | Required | Description                         |
| ------- | -------- | -------- | ----------------------------------- |
| type    | string   | Yes      | Event type to listen to. See below. |
| handler | function | Yes      | Listener.                           |

Valid events types include:

* `notification` : Fired when a remote notification is received. The handler will be invoked with an instance of `PushNotificationIOS`. This will handle notifications that arrive in the foreground or were tapped to open the app from the background.
* `localNotification` : Fired when a local notification is received. The handler will be invoked with an instance of `PushNotificationIOS`. This will handle notifications that arrive in the foreground or were tapped to open the app from the background.
* `register`: Fired when the user registers successfully for remote notifications. The handler will be invoked with a hex string representing the deviceToken.
* `registrationError`: Fired when the user fails to register for remote notifications. Typically occurs due to APNS issues or if the device is a simulator. The handler will be invoked with `{message: string, code: number, details: any}`.

***

### `removeEventListener()`[‚Äã](#removeeventlistener "Direct link to removeeventlistener")

tsx

```
static removeEventListener(
  type: PushNotificationEventName,
);
```

Removes the event listener. Do this in `componentWillUnmount` to prevent memory leaks.

**Parameters:**

| Name | Type   | Required | Description                                       |
| ---- | ------ | -------- | ------------------------------------------------- |
| type | string | Yes      | Event type. See `addEventListener()` for options. |

***

### `requestPermissions()`[‚Äã](#requestpermissions "Direct link to requestpermissions")

tsx

```
static requestPermissions(permissions?: PushNotificationPermissions[]);
```

Requests notification permissions from iOS, prompting the user with a dialog box. By default, this will request all notification permissions, but you can optionally specify which permissions to request. The following permissions are supported:

* `alert`
* `badge`
* `sound`

If a map is provided to the method, only the permissions with truthy values will be requested.

This method returns a promise that will resolve when the user accepts or rejects the request, or if the permissions were previously rejected. The promise resolves to the state of the permissions after the request has been completed.

**Parameters:**

| Name        | Type  | Required | Description            |
| ----------- | ----- | -------- | ---------------------- |
| permissions | array | No       | alert, badge, or sound |

***

### `abandonPermissions()`[‚Äã](#abandonpermissions "Direct link to abandonpermissions")

tsx

```
static abandonPermissions();
```

Unregister for all remote notifications received via Apple Push Notification service.

You should call this method in rare circumstances only, such as when a new version of the app removes support for all types of remote notifications. Users can temporarily prevent apps from receiving remote notifications through the Settings app. Apps unregistered through this method can always re-register.

***

### `checkPermissions()`[‚Äã](#checkpermissions "Direct link to checkpermissions")

tsx

```
static checkPermissions(
  callback: (permissions: PushNotificationPermissions) => void,
);
```

Check which push permissions are currently enabled.

**Parameters:**

| Name     | Type     | Required | Description |
| -------- | -------- | -------- | ----------- |
| callback | function | Yes      | See below.  |

`callback` will be invoked with a `permissions` object:

* `alert: boolean`
* `badge: boolean`
* `sound: boolean`

***

### `getInitialNotification()`[‚Äã](#getinitialnotification "Direct link to getinitialnotification")

tsx

```
static getInitialNotification(): Promise<PushNotification | null>;
```

This method returns a promise. If the app was launched by a push notification, this promise resolves to an object of type `PushNotificationIOS` for the notification that was tapped. Otherwise, it resolves to `null`.

***

### `getAuthorizationStatus()`[‚Äã](#getauthorizationstatus "Direct link to getauthorizationstatus")

tsx

```
static getAuthorizationStatus(): Promise<number>;
```

This method returns a promise that resolves to the current notification authorization status. See [UNAuthorizationStatus](https://developer.apple.com/documentation/usernotifications/unauthorizationstatus?language=objc) for possible values.

***

### `finish()`[‚Äã](#finish "Direct link to finish")

tsx

```
finish(result: string);
```

This method is available for remote notifications that have been received via [`application:didReceiveRemoteNotification:fetchCompletionHandler:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623013-application?language=objc). However, this is superseded by `UNUserNotificationCenterDelegate` and will no longer be invoked if both `application:didReceiveRemoteNotification:fetchCompletionHandler:` and the newer handlers from `UNUserNotificationCenterDelegate` are implemented.

If for some reason you're still relying on `application:didReceiveRemoteNotification:fetchCompletionHandler:`, you'll need to set up event handling on the iOS side:

objectivec

```
- (void)           application:(UIApplication *)application
  didReceiveRemoteNotification:(NSDictionary *)userInfo
        fetchCompletionHandler:(void (^)(UIBackgroundFetchResult result))handler
{
  [RCTPushNotificationManager didReceiveRemoteNotification:userInfo fetchCompletionHandler:handler];
}
```

Call `finish()` to execute the native completion handlers once you're done handling the notification on the JS side. When calling this block, pass in the fetch result value that best describes the results of your operation. For a list of possible values, see `PushNotificationIOS.FetchResult`.

If you're using `application:didReceiveRemoteNotification:fetchCompletionHandler:`, you *must* call this handler and should do so as soon as possible. See the [official documentation](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623013-application?language=objc) for more details.

***

### `getMessage()`[‚Äã](#getmessage "Direct link to getmessage")

tsx

```
getMessage(): string | Object;
```

An alias for `getAlert` to get the notification's main message string.

***

### `getSound()`[‚Äã](#getsound "Direct link to getsound")

tsx

```
getSound(): string;
```

Gets the sound string from the `aps` object. This will be `null` for local notifications.

***

### `getCategory()`[‚Äã](#getcategory "Direct link to getcategory")

tsx

```
getCategory(): string;
```

Gets the category string from the `aps` object.

***

### `getAlert()`[‚Äã](#getalert "Direct link to getalert")

tsx

```
getAlert(): string | Object;
```

Gets the notification's main message from the `aps` object. Also see the alias: `getMessage()`.

***

### `getContentAvailable()`[‚Äã](#getcontentavailable "Direct link to getcontentavailable")

tsx

```
getContentAvailable(): number;
```

Gets the content-available number from the `aps` object.

***

### `getBadgeCount()`[‚Äã](#getbadgecount "Direct link to getbadgecount")

tsx

```
getBadgeCount(): number;
```

Gets the badge count number from the `aps` object.

***

### `getData()`[‚Äã](#getdata "Direct link to getdata")

tsx

```
getData(): Object;
```

Gets the data object on the notification.

***

### `getThreadID()`[‚Äã](#getthreadid "Direct link to getthreadid")

tsx

```
getThreadID();
```

Gets the thread ID on the notification.


---

# React Native DevTools

React Native DevTools is our modern debugging experience for React Native. Purpose-built from the ground up, it aims to be fundamentally more integrated, correct, and reliable than previous debugging methods.

![React Native DevTools opened to the \&quot;Welcome\&quot; pane](/assets/images/debugging-rndt-welcome-083-9f56f0124de2d2607022330b0ce41d85.jpg)

React Native DevTools is designed for debugging React app concerns, and not to replace native tools. If you want to inspect React Native‚Äôs underlying platform layers (for example, while developing a Native Module), please use the debugging tools available in Android Studio and Xcode (see [Debugging Native Code](/docs/debugging-native-code.md)).

**üí° Compatibility** ‚Äî¬†released in 0.76

React Native DevTools supports all React Native apps running Hermes. It replaces the previous Flipper, Experimental Debugger, and Hermes debugger (Chrome) frontends.

It is not possible to set up React Native DevTools with any older versions of React Native.

* **Chrome Browser DevTools ‚Äî¬†unsupported**
  * Connecting to React Native via `chrome://inspect` is no longer supported. Features may not work correctly, as the latest versions of Chrome DevTools (which are built to match the latest browser capabilities and APIs) have not been tested, and this frontend lacks our customisations. Instead, we ship a supported version with React Native DevTools.
* **Visual Studio Code ‚Äî unsupported** (pre-existing)
  <!-- -->
  * Third party extensions such as [Expo Tools](https://github.com/expo/vscode-expo) and [Radon IDE](https://ide.swmansion.com/) may have improved compatibility, but are not directly supported by the React team.

**üí° Feedback & FAQs**

We want the tooling you use to debug React across all platforms to be reliable, familiar, simple, and cohesive. All the features described on this page are built with these principles in mind, and we also want to offer more capabilities in future.

We are actively iterating on the future of React Native DevTools, and have created a centralized [GitHub discussion](https://github.com/react-native-community/discussions-and-proposals/discussions/819) to keep track of issues, frequently asked questions, and feedback.

## Core features[‚Äã](#core-features "Direct link to Core features")

React Native DevTools is based on the Chrome DevTools frontend. If you have a web development background, its features should be familiar. As a starting point, we recommend browsing the [Chrome DevTools docs](https://developer.chrome.com/docs/devtools) which contain full guides as well as video resources.

### Console[‚Äã](#console "Direct link to Console")

![A series of logs React Native DevTools Sources view, alongside a device](/assets/images/debugging-rndt-console-536fe8a6f470b09b93ace9b4f67b4612.jpg)

The Console panel allows you to view and filter messages, evaluate JavaScript, inspect object properties, and more.

[Console features reference | Chrome DevTools](https://developer.chrome.com/docs/devtools/console/reference)

#### Useful tips[‚Äã](#useful-tips "Direct link to Useful tips")

* If your app has a lot of logs, use the filter box or change the log levels that are shown.
* Watch values over time with [Live Expressions](https://developer.chrome.com/docs/devtools/console/live-expressions).
* Persist messages across reloads with [Preserve Logs](https://developer.chrome.com/docs/devtools/console/reference#persist).
* Use `Ctrl` + `L` to clear the console view.

### Sources & breakpoints[‚Äã](#sources--breakpoints "Direct link to Sources & breakpoints")

![A paused breakpoint in the React Native DevTools Sources view, alongside a device](/assets/images/debugging-rndt-sources-paused-with-device-c7585ed4a3ab596e32c2109efd9c22a0.jpg)

The Sources panel allows you to view the source files in your app and register breakpoints. Use a breakpoint to define a line of code where your app should pause ‚Äî allowing you to inspect the live state of the program and incrementally step through code.

[Pause your code with breakpoints | Chrome DevTools](https://developer.chrome.com/docs/devtools/javascript/breakpoints)

tip

#### Mini-guide[‚Äã](#mini-guide "Direct link to Mini-guide")

Breakpoints are a fundamental tool in your debugging toolkit!

1. Navigate to a source file using the sidebar or `Cmd ‚åò`+`P` / `Ctrl`+`P`.
2. Click in the line number column next to a line of code to add a breakpoint.
3. Use the navigation controls at the top right to [step through code](https://developer.chrome.com/docs/devtools/javascript/reference#stepping) when paused.

#### Useful tips[‚Äã](#useful-tips-1 "Direct link to Useful tips")

* A "Paused in Debugger" overlay appears when your app is paused. Tap it to resume.
* Pay attention to the right-hand panels when on a breakpoint, which allow you to inspect the current scope and call stack, and set watch expressions.
* Use a `debugger;` statement to quickly set a breakpoint from your text editor. This will reach the device immediately via Fast Refresh.
* There are multiple kinds of breakpoints! For example, [Conditional Breakpoints and Logpoints](https://developer.chrome.com/docs/devtools/javascript/breakpoints#overview).

### NetworkSince 0.83[‚Äã](#network-since-083 "Direct link to network-since-083")

![A network request in the React Native DevTools Network panel](/assets/images/debugging-rndt-network-462cd5e39a5525592501627bb0087747.jpg)

The Network panel allows you to view and inspect the network requests made by your app. Logged requests provide detailed metadata such as timings and headers sent/received, as well as response previews.

Network requests are recorded automatically when DevTools is open. We support most features from Chrome, with some exceptions. See more below.

**üí° Network event coverage, Expo support**

**Which network events are captured?**

Today, we record all network calls through `fetch()`, `XMLHttpRequest`, and `<Image>` ‚Äî with support for custom networking libraries, such as Expo Fetch, coming later.

**Expo Network differences**

Because of this, apps using Expo will continue to see the "Expo Network" panel ‚Äî a separate implementation by the Expo framework which will log these additional request sources but has slightly reduced features.

* Coverage for Expo-specific network events.
* No request initiator support.
* No Performance panel integration.

We're working with Expo to integrate Expo Fetch and third party networking libraries with our new Network inspection pipeline in future releases.

**Unimplemented features**

At launch, these are the features we don't yet support in React Native:

* WebSocket events
* Network response mocking
* Simulated network throttling

**üí° Response previews buffer size**

If you are inspecting a large volume of response data, please note that response previews are cached in an on-device buffer with a maximum size of 100MB. This means we may evict response previews (but not metadata) if the cache becomes too large, oldest request first.

#### Useful tips[‚Äã](#useful-tips-2 "Direct link to Useful tips")

* Use the Initiator tab to see the call stack of where a network request was initiated in your app.
* Network events will also be shown in the Network track in the Performance panel.

### PerformanceSince 0.83[‚Äã](#performance-since-083 "Direct link to performance-since-083")

![A performance trace in the React Native DevTools Performance panel](/assets/images/debugging-rndt-performance-084166527768b90dbb936b240707bdcb.jpg)

Performance tracing allows you to record a performance session within your app to understand how your JavaScript code is running and what operations took the most time. In React Native, we show JavaScript execution, React Performance tracks, Network events, and custom [User Timings](https://developer.mozilla.org/en-US/docs/Web/API/Performance_API/User_timing), rendered in a single performance timeline.

#### Useful tips[‚Äã](#useful-tips-3 "Direct link to Useful tips")

* Use [Annotations](https://developer.chrome.com/docs/devtools/performance/annotations) to label and mark up a performance trace ‚Äî¬†useful before [downloading and sharing](https://developer.chrome.com/docs/devtools/performance/save-trace) with a teammate.
* Use the [`PerformanceObserver` API](/docs/global-PerformanceObserver.md) in your app to observe performance events at runtime ‚Äî useful if you want to capture performance telemetry.

#### Learn more[‚Äã](#learn-more "Direct link to Learn more")

* [React Performance tracks](https://react.dev/reference/dev-tools/react-performance-tracks)
* [Performance APIs > User Timings | MDN](https://developer.mozilla.org/en-US/docs/Web/API/Performance_API/User_timing)
* ["Debug Like a Senior ‚Äî React Native Performance Panel" | Software Mansion](https://blog.swmansion.com/react-native-debugging-new-performance-panel-in-react-native-0-83-21ca90871f6d)

### Memory[‚Äã](#memory "Direct link to Memory")

![Inspecting a heap snapshot in the Memory panel](/assets/images/debugging-rndt-memory-741d3be5a43f872d0d4485d9f71456c8.jpg)

The Memory panel allows you to take a heap snapshot and view the memory usage of your JavaScript code over time.

[Record heap snapshots | Chrome DevTools](https://developer.chrome.com/docs/devtools/memory-problems/heap-snapshots)

#### Useful tips[‚Äã](#useful-tips-4 "Direct link to Useful tips")

* Use `Cmd ‚åò`+`F` / `Ctrl`+`F` to filter for specific objects in the heap.
* Taking an [allocation timeline report](https://developer.chrome.com/docs/devtools/memory-problems/allocation-profiler) can be useful to see memory usage over time as a graph, to identify possible memory leaks.

## React DevTools features[‚Äã](#react-devtools-features "Direct link to React DevTools features")

In the integrated Components and Profiler panels, you'll find all the features of the [React DevTools](https://react.dev/learn/react-developer-tools) browser extension. These work seamlessly in React Native DevTools.

### React Components[‚Äã](#react-components "Direct link to React Components")

![Selecting and locating elements using the React Components panel](/assets/images/debugging-rndt-react-components-628d33c662dc37b0a7c3c21d840fc63c.gif)

The React Components panel allows you to inspect and update the rendered React component tree.

* Hover or select an element in DevTools to highlight it on the device.
* To locate an element in DevTools, click the top-left "Select element" button, then tap any element in the app.

#### Useful tips[‚Äã](#useful-tips-5 "Direct link to Useful tips")

* Props and state on a component can be viewed and modified at runtime using the right hand panel.
* Components optimized with [React Compiler](https://react.dev/learn/react-compiler) will be annotated with a "Memo ‚ú®" badge.

tip

#### Protip: Highlight re-renders[‚Äã](#protip-highlight-re-renders "Direct link to Protip: Highlight re-renders")

Re-renders can be a significant contributor to performance issues in React apps. DevTools can highlight component re-renders as they happen.

* To enable, click the View Settings (`‚öôÔ∏é`) icon and check "Highlight updates when components render".

![Location of the \&quot;highlight updates\&quot; setting, next to a recording of the live render overlay](/assets/images/debugging-rndt-highlight-renders-bc20258bbc79dba4fe1866c227943e37.gif)

### React Profiler[‚Äã](#react-profiler "Direct link to React Profiler")

![A profile rendered as a flame graph](/assets/images/debugging-rndt-react-profiler-df4337af110cbdc1da74837b2beacec2.jpg)

The React Profiler panel allows you to record performance profiles to understand the timing of component renders and React commits.

For more info, see the [original 2018 guide](https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html#reading-performance-data) (note that parts of this may be outdated).

## Reconnecting DevTools[‚Äã](#reconnecting-devtools "Direct link to Reconnecting DevTools")

Occasionally, DevTools might disconnect from the target device. This can happen if:

* The app is closed.
* The app is rebuilt (a new native build is installed).
* The app crashes on the native side.
* The dev server (Metro) is quit.
* A physical device is disconnected.

On disconnect, a dialog will be shown with the message "Debugging connection was closed".

![A reconnect dialog shown when a device is disconnected](/assets/images/debugging-reconnect-menu-fc38b7d074e730cc41346286561f75b8.jpg)

From here, you can either:

* **Dismiss**: Select the close (`√ó`) icon or click outside the dialog to return to the DevTools UI in the last state before disconnection.
* **Reconnect**: Select "Reconnect DevTools", having addressed the reason for disconnection.


---

# React Native Gradle Plugin

This guide describes how to configure the **React Native Gradle Plugin** (often referred as RNGP), when building your React Native application for Android.

## Using the plugin[‚Äã](#using-the-plugin "Direct link to Using the plugin")

The React Native Gradle Plugin is distributed as a separate NPM package which is installed automatically with `react-native`.

The plugin is **already configured** for new projects created using `npx react-native init`. You don't need to do any extra steps to install it if you created your app with this command.

If you're integrating React Native into an existing project, please refer to [the corresponding page](/docs/next/integration-with-existing-apps#configuring-gradle): it contains specific instructions on how to install the plugin.

## Configuring the plugin[‚Äã](#configuring-the-plugin "Direct link to Configuring the plugin")

By default, the plugin will work **out of the box** with sensible defaults. You should refer to this guide and customize the behavior only if you need it.

To configure the plugin you can modify the `react` block, inside your `android/app/build.gradle`:

groovy

```
apply plugin: "com.facebook.react"

/**
 * This is the configuration block to customize your React Native Android app.
 * By default you don't need to apply any configuration, just uncomment the lines you need.
 */
react {
  // Custom configuration goes here.
}
```

Each configuration key is described below:

### `root`[‚Äã](#root "Direct link to root")

This is the root folder of your React Native project, i.e. where the `package.json` file lives. Default is `..`. You can customize it as follows:

groovy

```
root = file("../")
```

### `reactNativeDir`[‚Äã](#reactnativedir "Direct link to reactnativedir")

This is the folder where the `react-native` package lives. Default is `../node_modules/react-native`. If you're in a monorepo or using a different package manager, you can use adjust `reactNativeDir` to your setup.

You can customize it as follows:

groovy

```
reactNativeDir = file("../node_modules/react-native")
```

### `codegenDir`[‚Äã](#codegendir "Direct link to codegendir")

This is the folder where the `react-native-codegen` package lives. Default is `../node_modules/react-native-codegen`. If you're in a monorepo or using a different package manager, you can adjust `codegenDir` to your setup.

You can customize it as follows:

groovy

```
codegenDir = file("../node_modules/@react-native/codegen")
```

### `cliFile`[‚Äã](#clifile "Direct link to clifile")

This is the entrypoint file for the React Native CLI. Default is `../node_modules/react-native/cli.js`. The entrypoint file is needed as the plugin needs to invoke the CLI for bundling and creating your app.

If you're in a monorepo or using a different package manager, you can adjust `cliFile` to your setup. You can customize it as follows:

groovy

```
cliFile = file("../node_modules/react-native/cli.js")
```

### `debuggableVariants`[‚Äã](#debuggablevariants "Direct link to debuggablevariants")

This is the list of variants that are debuggable (see [using variants](#using-variants) for more context on variants).

By default the plugin is considering as `debuggableVariants` only `debug`, while `release` is not. If you have other variants (like `staging`, `lite`, etc.) you'll need to adjust this accordingly.

Variants that are listed as `debuggableVariants` will not come with a shipped bundle, so you'll need Metro to run them.

You can customize it as follows:

groovy

```
debuggableVariants = ["liteDebug", "prodDebug"]
```

### `nodeExecutableAndArgs`[‚Äã](#nodeexecutableandargs "Direct link to nodeexecutableandargs")

This is the list of node command and arguments that should be invoked for all the scripts. By default is `[node]` but can be customized to add extra flags as follows:

groovy

```
nodeExecutableAndArgs = ["node"]
```

### `bundleCommand`[‚Äã](#bundlecommand "Direct link to bundlecommand")

This is the name of the `bundle` command to be invoked when creating the bundle for your app. That's useful if you're using [RAM Bundles](https://reactnative.dev/docs/0.74/ram-bundles-inline-requires). By default is `bundle` but can be customized to add extra flags as follows:

groovy

```
bundleCommand = "ram-bundle"
```

### `bundleConfig`[‚Äã](#bundleconfig "Direct link to bundleconfig")

This is the path to a configuration file that will be passed to `bundle --config <file>` if provided. Default is empty (no config file will be probided). More information on bundling config files can be found [on the CLI documentation](https://github.com/react-native-community/cli/blob/main/docs/commands.md#bundle). Can be customized as follow:

groovy

```
bundleConfig = file(../rn-cli.config.js)
```

### `bundleAssetName`[‚Äã](#bundleassetname "Direct link to bundleassetname")

This is the name of the bundle file that should be generated. Default is `index.android.bundle`. Can be customized as follow:

groovy

```
bundleAssetName = "MyApplication.android.bundle"
```

### `entryFile`[‚Äã](#entryfile "Direct link to entryfile")

The entry file used for bundle generation. The default is to search for `index.android.js` or `index.js`. Can be customized as follow:

groovy

```
entryFile = file("../js/MyApplication.android.js")
```

### `extraPackagerArgs`[‚Äã](#extrapackagerargs "Direct link to extrapackagerargs")

A list of extra flags that will be passed to the `bundle` command. The list of available flags is in [the CLI documentation](https://github.com/react-native-community/cli/blob/main/docs/commands.md#bundle). Default is empty. Can be customized as follows:

groovy

```
extraPackagerArgs = []
```

### `hermesCommand`[‚Äã](#hermescommand "Direct link to hermescommand")

The path to the `hermesc` command (the Hermes Compiler). React Native comes with a version of the Hermes compiler bundled with it, so you generally won't be needing to customize this. The plugin will use the correct compiler for your system by default.

### `hermesFlags`[‚Äã](#hermesflags "Direct link to hermesflags")

The list of flags to pass to `hermesc`. By default is `["-O", "-output-source-map"]`. You can customize it as follows

groovy

```
hermesFlags = ["-O", "-output-source-map"]
```

### `enableBundleCompression`[‚Äã](#enablebundlecompression "Direct link to enablebundlecompression")

Whether the Bundle Asset should be compressed when packaged into a `.apk`, or not.

Disabling compression for the `.bundle` allows it to be directly memory-mapped to RAM, hence improving startup time - at the cost of a larger resulting app size on disk. Please note that the `.apk` download size will be mostly unaffected as the `.apk` files are compressed before downloading

By default this is disabled, and you should not turn it on, unless you're really concerned about disk space for your application.

## Using Flavors & Build Variants[‚Äã](#using-flavors--build-variants "Direct link to Using Flavors & Build Variants")

When building Android apps, you might want to use [custom flavors](https://developer.android.com/studio/build/build-variants#product-flavors) to have different versions of your app starting from the same project.

Please refer to the [official Android guide](https://developer.android.com/studio/build/build-variants) to configure custom build types (like `staging`) or custom flavors (like `full`, `lite`, etc.). By default new apps are created with two build types (`debug` and `release`) and no custom flavors.

The combination of all the build types and all the flavors generates a set of **build variants**. For instance for `debug`/`staging`/`release` build types and `full`/`lite` you will have 6 build variants: `fullDebug`, `fullStaging`, `fullRelease` and so on.

If you're using custom variants beyond `debug` and `release`, you need to instruct the React Native Gradle Plugin specifying which of your variants are **debuggable** using the [`debuggableVariants`](#debuggablevariants) configuration as follows:

diff

```
apply plugin: "com.facebook.react"

react {
+ debuggableVariants = ["fullStaging", "fullDebug"]
}
```

This is necessary because the plugin will skip the JS bundling for all the `debuggableVariants`: you'll need Metro to run them. For example, if you list `fullStaging` in the `debuggableVariants`, you won't be able to publish it to a store as it will be missing the bundle.

## What is the plugin doing under the hood?[‚Äã](#what-is-the-plugin-doing-under-the-hood "Direct link to What is the plugin doing under the hood?")

The React Native Gradle Plugin is responsible for configuring your Application build to ship React Native applications to production. The plugin is also used inside 3rd party libraries, to run the [Codegen](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/codegen.md) used for the New Architecture.

Here is a summary of the plugin responsibilities:

* Add a `createBundle<Variant>JsAndAssets` task for every non debuggable variant, that is responsible of invoking the `bundle`, `hermesc` and `compose-source-map` commands.
* Setting up the proper version of the `com.facebook.react:react-android` and `com.facebook.react:hermes-android` dependency, reading the React Native version from the `package.json` of `react-native`.
* Setting up the proper Maven repositories (Maven Central, Google Maven Repo, JSC local Maven repo, etc.) needed to consume all the necessary Maven Dependencies.
* Setting up the NDK to let you build apps that are using the New Architecture.
* Setting up the `buildConfigFields` so that you can know at runtime if Hermes or the New Architecture are enabled.
* Setting up the Metro DevServer Port as an Android resource so the app knows on which port to connect.
* Invoking the [React Native Codegen](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/codegen.md) if a library or app is using the Codegen for the New Architecture.


---

# React Node Object Type

A React Node is one of the following types:

* Boolean (which is ignored)
* `null` or `undefined` (which is ignored)
* Number
* String
* A React element (result of JSX)
* An array of any of the above, possibly a nested one


---

# Rect Object Type

`Rect` accepts numeric pixel values to describe how far to extend a rectangular area. These values are added to the original area's size to expand it.

## Example[‚Äã](#example "Direct link to Example")

js

```
{
    bottom: 20,
    left: null,
    right: undefined,
    top: 50
}
```

## Keys and values[‚Äã](#keys-and-values "Direct link to Keys and values")

### `bottom`[‚Äã](#bottom "Direct link to bottom")

| Type                        | Required |
| --------------------------- | -------- |
| number, `null`, `undefined` | No       |

### `left`[‚Äã](#left "Direct link to left")

| Type                        | Required |
| --------------------------- | -------- |
| number, `null`, `undefined` | No       |

### `right`[‚Äã](#right "Direct link to right")

| Type                        | Required |
| --------------------------- | -------- |
| number, `null`, `undefined` | No       |

### `top`[‚Äã](#top "Direct link to top")

| Type                        | Required |
| --------------------------- | -------- |
| number, `null`, `undefined` | No       |

## Used by[‚Äã](#used-by "Direct link to Used by")

* [`Image`](/docs/image.md)
* [`Pressable`](/docs/pressable.md)
* [`Text`](/docs/text.md)
* [`TouchableWithoutFeedback`](/docs/touchablewithoutfeedback.md)


---

# RefreshControl

This component is used inside a ScrollView or ListView to add pull to refresh functionality. When the ScrollView is at `scrollY: 0`, swiping down triggers an `onRefresh` event.

## Example[‚Äã](#example "Direct link to Example")

note

`refreshing` is a controlled prop, this is why it needs to be set to `true` in the `onRefresh` function otherwise the refresh indicator will stop immediately.

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [View Props](/docs/view.md#props)[‚Äã](#view-props "Direct link to view-props")

Inherits [View Props](/docs/view.md#props).

***

### Require&#x64;**`refreshing`**[‚Äã](#requiredrefreshing "Direct link to requiredrefreshing")

Whether the view should be indicating an active refresh.

| Type    |
| ------- |
| boolean |

***

### `colors`Android[‚Äã](#colors-android "Direct link to colors-android")

The colors (at least one) that will be used to draw the refresh indicator.

| Type                               |
| ---------------------------------- |
| array of [colors](/docs/colors.md) |

***

### `enabled`Android[‚Äã](#enabled-android "Direct link to enabled-android")

Whether the pull to refresh functionality is enabled.

| Type    | Default |
| ------- | ------- |
| boolean | `true`  |

***

### `onRefresh`[‚Äã](#onrefresh "Direct link to onrefresh")

Called when the view starts refreshing.

| Type     |
| -------- |
| function |

***

### `progressBackgroundColor`Android[‚Äã](#progressbackgroundcolor-android "Direct link to progressbackgroundcolor-android")

The background color of the refresh indicator.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `progressViewOffset`[‚Äã](#progressviewoffset "Direct link to progressviewoffset")

Progress view top offset.

| Type   | Default |
| ------ | ------- |
| number | `0`     |

***

### `size`Android[‚Äã](#size-android "Direct link to size-android")

Size of the refresh indicator.

| Type                         | Default     |
| ---------------------------- | ----------- |
| enum(`'default'`, `'large'`) | `'default'` |

***

### `tintColor`iOS[‚Äã](#tintcolor-ios "Direct link to tintcolor-ios")

The color of the refresh indicator.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `title`iOS[‚Äã](#title-ios "Direct link to title-ios")

The title displayed under the refresh indicator.

| Type   |
| ------ |
| string |

***

### `titleColor`iOS[‚Äã](#titlecolor-ios "Direct link to titlecolor-ios")

The color of the refresh indicator title.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |


---

# Releases Overview

New React Native releases are shipped **every two months**, usually resulting in six (6) new minors per year.

Below is the schedule and current status of recent and upcoming React Native releases:

| Version  | Branch-cut Date | Release Date | Support      | Blogpost                                         |
| -------- | --------------- | ------------ | ------------ | ------------------------------------------------ |
| `0.89.x` | 2026-11-03      | 2026-12-07   | Future       |                                                  |
| `0.88.x` | 2026-09-07      | 2026-10-12   | Future       |                                                  |
| `0.87.x` | 2026-07-06      | 2026-08-10   | Future       |                                                  |
| `0.86.x` | 2026-05-04      | 2026-06-08   | Future       |                                                  |
| `0.85.x` | 2026-03-02      | 2026-04-06   | Future       |                                                  |
| `0.84.x` | 2026-01-05      | 2026-02-09   | Future       |                                                  |
| `0.83.x` | 2025-11-03      | 2025-12-10   | Active       | [Details](/blog/2025/12/10/react-native-0.83.md) |
| `0.82.x` | 2025-09-01      | 2025-10-06   | Active       | [Details](/blog/2025/10/08/react-native-0.82.md) |
| `0.81.x` | 2025-07-10      | 2025-08-12   | End of Cycle | [Details](/blog/2025/08/12/react-native-0.81.md) |
| `0.80.x` | 2025-05-07      | 2025-06-12   | Unsupported  | [Details](/blog/2025/06/12/react-native-0.80.md) |
| `0.79.x` | 2025-03-04      | 2025-04-08   | Unsupported  | [Details](/blog/2025/04/08/react-native-0.79.md) |
| `0.78.x` | 2025-01-15      | 2025-02-19   | Unsupported  | [Details](/blog/2025/02/19/react-native-0.78.md) |
| `0.77.x` | 2024-11-26      | 2025-01-21   | Unsupported  | [Details](/blog/2025/01/21/version-0.77.md)      |

The different support level presented in the table are defined as such:

* **Future**
  * After a new version branch gets cut, creating new Release Candidates to allow the community to test the upcoming version is very important. New RC releases are done at a high pace, as soon as viable.
* **Active**
  * Stable releases in active support receive frequent updates. Latest stable has the highest priority, and at the start of its stable cycle (right after .0 is released) multiple patches will be done as soon as possible to stabilize the version and ensure a good upgrade experience to the community.
* **End of Cycle**
  * A version in this support bracket will receive less patches, unless some important regressions need to be addressed. Once a next version becomes the new latest stable, before the version in EoC moves over into Unsupported one last patch released will be produced with the latest receive pick requests.
* **Unsupported**
  * When a version is in the unsupported stage, no new released are to be expected. Only very important regressions might create exceptions to this rule; it is recommended that codebases using an unsupported version upgrade as soon as possible.

## Commitment to Stability[‚Äã](#commitment-to-stability "Direct link to Commitment to Stability")

In order to support users upgrading React Native versions, we‚Äôre committed to maintain the **latest 3 minor series** (e.g. 0.78.x, 0.77.x and 0.76.x when 0.78 is the latest release).

For those releases we‚Äôll be publishing regular updates and bug fixes.

You can read more about our support policy on [the react-native-releases working group](https://github.com/reactwg/react-native-releases/blob/main/docs/support.md).

More information on our versioning, and what we consider a breaking change is available in our [versioning policy](/docs/releases/versioning-policy.md) page.


---

# Release Levels

React Native provides the community with the ability to adopt individual new features as soon as their design and implementation are nearly complete, even before they are included in a stable release. This approach is known as **release levels**.

You can configure the release level of React Native so that your React Native instance will initialize with Feature Flags set to either `EXPERIMENTAL`, `CANARY`, or `STABLE` modes.

note

This approach is similar to [Canary and Experimental releases in React](https://react.dev/blog/2023/05/03/react-canaries), but with a key difference: regardless of the release level, the same version of React JS and React Native code is used.<br /><!-- -->React Native is also not using `@canary` or `@experimental` NPM tags, as release levels are available for both stable and nightly releases of React Native.

Moreover, setting the release level to `EXPERIMENTAL` or `CANARY` will **not** result in consuming `react@nightly` or `react@canary` due to how react-native is consuming the React version ([you can read more about it here](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Renderer/README.md#react--react-native-versions)).

## When to Use Each Release Level[‚Äã](#when-to-use-each-release-level "Direct link to When to Use Each Release Level")

* **`STABLE`**:

  <!-- -->

  * Use for all production apps and libraries that do not need early access to unreleased features.
  * This is the default level for stable and nightly releases.

* **`CANARY`:**

  * Use if you are a framework author, advanced app developer, or need to test or adopt new features before they are released in stable.
  * Not recommended for production or user-facing applications.

* **`EXPERIMENTAL`:**

  * Use only for testing and providing feedback for new features in the early stages of development
  * Not recommended for production or user-facing applications.

## How to initialize React Native using Canary & Experimental[‚Äã](#how-to-initialize-react-native-using-canary--experimental "Direct link to How to initialize React Native using Canary & Experimental")

### Android[‚Äã](#android "Direct link to Android")

The `DefaultNewArchitectureEntryPoint` class now has a `releaseLevel` property (default: `STABLE`).<br /><!-- -->The feature flag system uses this property to select the appropriate set of feature flags for the chosen release level.

Example usage

```
DefaultNewArchitectureEntryPoint.releaseLevel = ReleaseLevel.CANARY
DefaultNewArchitectureEntryPoint.load()
```

The build system generates different feature flag override classes for each release level, ensuring the correct features are enabled for each stage.

### iOS[‚Äã](#ios "Direct link to iOS")

The `RCTReactNativeFactory` class now has an initializer that accepts a `releaseLevel` parameter. The feature flag setup uses this parameter to select the correct feature flag overrides.

Example usage

```
[[RCTReactNativeFactory alloc] initWithDelegate:delegate releaseLevel:Canary];
```

The system ensures that only one release level is active per app instance, and will crash if multiple factories are created with different release levels.


---

# Versioning Policy

This page describes the versioning policy we follow for the `react-native` package.

We test each version of React Native thoroughly, both with manual and automated tests, to ensure the quality doesn't regress.

The `stable` channel of React Native follows the 0.x.y release policy described below.

React Native also offers a `nightly` release channel to encourage early feedback on experimental features.

This page describes our approach to version numbers for `react-native` and for packages under the `@react-native` scope.

## Stable Release Versions[‚Äã](#stable-release-versions "Direct link to Stable Release Versions")

React Native releases stable versions at a regular cadence.

We follow the 0.x.y versioning schema:

* Breaking changes will be shipped in a new minor version, i.e. we increment the x number (e.g.: 0.78.0 to 0.79.0).
* New features and APIs will also be shipped in a new minor version, i.e. we increment the x number (e.g.: 0.78.0 to 0.79.0).
* Critical bug fixes will be shipped in a new patch version, i.e. we increment the y number (e.g.: 0.78.1 to 0.78.2).

Stable releases are shipped regularly, with the latest tagged as `latest` on NPM.

A series of releases under the same minor number is called a **minor series** (e.g. 0.76.x is the minor series for 0.76.0, 0.76.1, 0.76.2, etc.).

You can read more about our **commitment to stability** in [the releases page](/docs/releases.md).

### Breaking changes[‚Äã](#breaking-changes "Direct link to Breaking changes")

Breaking changes are inconvenient for everyone, and we‚Äôre trying to minimize them to the bare minimum. All the breaking changes we ship in each stable release will be highlighted in:

* The *Breaking* and the *Removed* section of [the React Native Changelog](https://github.com/facebook/react-native/blob/main/CHANGELOG.md)
* Each release blogpost in the *Breaking Changes* section

For each breaking change we‚Äôre committed to explaining the reasoning behind it, provide a replacement API if possible, and minimize the impact on final users.

### What is a breaking change?[‚Äã](#what-is-a-breaking-change "Direct link to What is a breaking change?")

We consider a breaking change for React Native:

* An incompatible API change (i.e. an API that is changed or removed so that your code won‚Äôt compile/run anymore due to that change). Examples:

  <!-- -->

  * Changes of any JS/Java/Kotlin/Obj-c/C++ APIs that would require your code to be changed in order to compile.
  * Changes inside `@react-native/codegen` that are not backward compatible.

* A significant behavior/runtime change. Example:
  <!-- -->
  * The layout logic of a prop is changed drastically.

* A significant change in the development experience. Example:
  <!-- -->
  * A debugging feature is entirely removed.

* A major bump of any of our transitive dependencies. Examples:

  <!-- -->

  * Bumping React from 18.x to 19.x
  * Bumping the Target SDK on Android from 34 to 35).

* A reduction of any of our supported platform versions. Examples:

  <!-- -->

  * Bumping min SDK on Android from 21 to 23
  * Bumping the min iOS version to 15.1.

We don‚Äôt consider those changes to be breaking:

* Modifying APIs starting with `unstable_` prefix: These APIs expose experimental features, and we are not confident on their final shape. By releasing these with an `unstable_` prefix, we can iterate faster and get to a stable API sooner.

* Changes to private or internal APIs: These APIs are often prefixed with either `internal_` , `private_` or living inside a `internal/` or `private/` folder/package. While some of those APIs might have public visibility due to tooling constraints, we don‚Äôt consider them part of our public API, so we‚Äôll be changing them without previous notice.

  <!-- -->

  * Similarly, If you access internal property names like `__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED` or `__reactInternalInstance$uk43rzhitjg`, there are no guarantees. You are on your own.
  * Classes annotated with `@FrameworkAPI` are also considered internal

* Changes to tooling/development APIs: Some public APIs of React Native are reserved for integration with frameworks and other tools. For example, some of the Metro APIs or React Native DevTools APIs are supposed to be used only by other frameworks or tools. Changes to those APIs are discussed directly with the affected tools and are not considered breaking changes (we won‚Äôt be communicating them broadly in the release blogposts).

* Development warnings: Since warnings don‚Äôt affect runtime behavior, we may add new warnings or modify existing warnings in between any versions.

If we expect a change to cause broad problems in the community, we will still do our best to provide a gradual migration path for the ecosystem.

### Deprecation Cycles[‚Äã](#deprecation-cycles "Direct link to Deprecation Cycles")

As we keep on developing and evolving React Native, we write new APIs and sometimes we need to deprecate existing ones. Those APIs will go through a deprecation cycle.

Once an API is deprecated, it will remain available **also** for the **following** stable releases.

For example: if an API is deprecated in React Native 0.76.x, it will still be available in 0.77.x and won‚Äôt be removed sooner than React Native 0.78.x.

Sometimes we decide to keep a deprecated API for a longer time, if we feel that the ecosystem needs more time to migrate away from it. For those APIs we generally provide warnings to help users migrate away from them.

## Release channels[‚Äã](#release-channels "Direct link to Release channels")

React Native relies on a thriving open source community to file bug reports, open pull requests, and submit RFCs. To encourage feedback we do support several release channels.

note

This section will be most relevant to developers who work on frameworks, libraries, or developer tooling. Developers who use React Native primarily to build user-facing applications should not need to worry about release channels other than latest.

### latest[‚Äã](#latest "Direct link to latest")

`latest` is for stable, semver React Native releases. It‚Äôs what you get when you install React Native from npm. This is the channel you‚Äôre already using today. User-facing applications that consume React Native directly use this channel.

We publish a newer minor series of React Native regularly, and we update the `latest` tag to reflect the latest stable version.

### next[‚Äã](#next "Direct link to next")

Before we declare a new React Native release stable, we publish a series of **release candidate**, starting from RC0. Those versions are pre-release versions (following the versioning schema `0.79.0-rc.0`) and are tagged as `next` on NPM.

When a new branch cut happens, and RCs start to get published on NPM and GitHub, it‚Äôs a good idea to test your library/framework against a `next` version of React Native.

That will ensure that your project will keep on working well with the upcoming versions of React Native.

However, do not use prereleases/RCs in user-facing applications directly as they‚Äôre not considered production ready.

### nightly[‚Äã](#nightly "Direct link to nightly")

We also publish a `nightly` release channel. Nightlies are published every day starting from the `main` branch of [facebook/react-native](https://github.com/facebook/react-native). Nightlies are considered unstable versions of React Native and are not recommended for production use.

Nightlies follow the versioning schema as `0.80.0-nightly-<DATE>-<SHA>` where `<DATE>` is the date of the nightly and `<SHA>` is the SHA of the commit that was used to publish this nightly.

The nightly releases are provided for testing purposes only, and we provide no guarantees that behavior won‚Äôt change between nightlies. They do not follow the semver protocol that we use for releases from latest/next.

It is a good idea to set up a CI workflow to test your library against a react-native\@nightly version every day, to make sure your library will keep on working with future releases.


---

# RootTag

`RootTag` is an opaque identifier assigned to the native root view of your React Native surface ‚Äî i.e. the `ReactRootView` or `RCTRootView` instance for Android or iOS respectively. In short, it is a surface identifier.

## When to use a RootTag?[‚Äã](#when-to-use-a-roottag "Direct link to When to use a RootTag?")

For most React Native developers, you likely won‚Äôt need to deal with `RootTag`s.

`RootTag`s are useful for when an app renders **multiple React Native root views** and you need to handle native API calls differently depending on the surface. An example of this is when an app is using native navigation and each screen is a separate React Native root view.

In native navigation, every React Native root view is rendered in a platform‚Äôs navigation view (e.g., `Activity` for Android, `UINavigationViewController` for iOS). By this, you are able to leverage the navigation paradigms of the platform such as native look and feel and navigation transitions. The functionality to interact with the native navigation APIs can be exposed to React Native via a [native module](https://reactnative.dev/docs/next/native-modules-intro).

For example, to update the title bar of a screen, you would call the navigation module‚Äôs API `setTitle("Updated Title")`, but it would need to know which screen in the stack to update. A `RootTag` is necessary here to identify the root view and its hosting container.

Another use case for `RootTag` is when your app needs to attribute a certain JavaScript call to native based on its originating root view. A `RootTag` is necessary to differentiate the source of the call from different surfaces.

## How to access the RootTag... if you need it[‚Äã](#how-to-access-the-roottag-if-you-need-it "Direct link to How to access the RootTag... if you need it")

In versions 0.65 and below, RootTag is accessed via a [legacy context](https://github.com/facebook/react-native/blob/v0.64.1/Libraries/ReactNative/AppContainer.js#L56). To prepare React Native for Concurrent features coming in React 18 and beyond, we are migrating to the latest [Context API](https://react.dev/reference/react/createContext) via `RootTagContext` in 0.66. Version 0.65 supports both the legacy context and the recommended `RootTagContext` to allow developers time to migrate their call-sites. See the breaking changes summary.

How to access `RootTag` via the `RootTagContext`.

js

```
import {RootTagContext} from 'react-native';
import NativeAnalytics from 'native-analytics';
import NativeNavigation from 'native-navigation';

function ScreenA() {
  const rootTag = useContext(RootTagContext);

  const updateTitle = title => {
    NativeNavigation.setTitle(rootTag, title);
  };

  const handleOneEvent = () => {
    NativeAnalytics.logEvent(rootTag, 'one_event');
  };

  // ...
}

class ScreenB extends React.Component {
  static contextType: typeof RootTagContext = RootTagContext;

  updateTitle(title) {
    NativeNavigation.setTitle(this.context, title);
  }

  handleOneEvent() {
    NativeAnalytics.logEvent(this.context, 'one_event');
  }

  // ...
}
```

Learn more about the Context API for [classes](https://react.dev/reference/react/Component#static-contexttype) and [hooks](https://react.dev/reference/react/useContext) from the React docs.

### Breaking Change in 0.65[‚Äã](#breaking-change-in-065 "Direct link to Breaking Change in 0.65")

`RootTagContext` was formerly named `unstable_RootTagContext` and changed to `RootTagContext` in 0.65. Please update any usages of `unstable_RootTagContext` in your codebase.

### Breaking Change in 0.66[‚Äã](#breaking-change-in-066 "Direct link to Breaking Change in 0.66")

The legacy context access to `RootTag` will be removed and replaced by `RootTagContext`. Beginning in 0.65, we encourage developers to proactively migrate `RootTag` accesses to `RootTagContext`.

## Future Plans[‚Äã](#future-plans "Direct link to Future Plans")

With the new React Native architecture progressing, there will be future iterations to `RootTag`, with the intention to keep the `RootTag` type opaque and prevent thrash in React Native codebases. Please do not rely on the fact that RootTag currently aliases to a number! If your app relies on RootTags, keep an eye on our version change logs, which you can find [here](https://github.com/facebook/react-native/blob/main/CHANGELOG.md).


---

# Running On Device

It's always a good idea to test your app on an actual device before releasing it to your users. This document will guide you through the necessary steps to run your React Native app on a device and to get it ready for production.

tip

If you used `create-expo-app` to set up your project, you can run your app on a device in Expo Go by scanning the QR code that is displayed when you run `npm start`. Refer to the Expo guide for [running your project on your device](https://docs.expo.dev/get-started/expo-go/) for more information.

* Android
* iOS

## Running your app on Android devices[‚Äã](#running-your-app-on-android-devices "Direct link to Running your app on Android devices")

#### Development OS[‚Äã](#development-os "Direct link to Development OS")

* macOS
* Windows
* Linux

### 1. Enable Debugging over USB[‚Äã](#1-enable-debugging-over-usb "Direct link to 1. Enable Debugging over USB")

Most Android devices can only install and run apps downloaded from Google Play, by default. You will need to enable USB Debugging on your device in order to install your app during development.

To enable USB debugging on your device, you will first need to enable the "Developer options" menu by going to **Settings** ‚Üí **About phone** ‚Üí **Software information** and then tapping the `Build number` row at the bottom seven times. You can then go back to **Settings** ‚Üí **Developer options** to enable "USB debugging".

### 2. Plug in your device via USB[‚Äã](#2-plug-in-your-device-via-usb "Direct link to 2. Plug in your device via USB")

Let's now set up an Android device to run our React Native projects. Go ahead and plug in your device via USB to your development machine.

Now check that your device is properly connecting to ADB, the Android Debug Bridge, by running `adb devices`.

shell

```
$ adb devices
List of devices attached
emulator-5554 offline   # Google emulator
14ed2fcc device         # Physical device
```

Seeing `device` in the right column means the device is connected. You must have **only one device connected** at a time.

note

If you see `unauthorized` in the list you will need to run `adb reverse tcp:8081 tcp:8081` and press allow USB debugging on the device.

### 3. Run your app[‚Äã](#3-run-your-app "Direct link to 3. Run your app")

From the root of your project; type the following in your command prompt to install and launch your app on the device:

* npm
* Yarn

shell

```
npm run android
```

shell

```
yarn android
```

note

If you get a "bridge configuration isn't available" error, see [Using adb reverse](/docs/running-on-device.md#method-1-using-adb-reverse-recommended).

tip

You can also use the `React Native CLI` to generate and run a `release` build (e.g. from the root of your project: `yarn android --mode release`).

## Connecting to the development server

You can also iterate quickly on a device by connecting to the development server running on your development machine. There are several ways of accomplishing this, depending on whether you have access to a USB cable or a Wi-Fi network.

### Method 1: Using adb reverse (recommended)[‚Äã](#method-1-using-adb-reverse-recommended "Direct link to Method 1: Using adb reverse (recommended)")

You can use this method if your device is running Android 5.0 (Lollipop) or newer, it has USB debugging enabled, and it is connected via USB to your development machine.

Run the following in a command prompt:

shell

```
$ adb -s <device name> reverse tcp:8081 tcp:8081
```

To find the device name, run the following adb command:

shell

```
$ adb devices
```

You can now enable Fast Refresh from the [Dev Menu](/docs/debugging.md#opening-the-dev-menu). Your app will reload whenever your JavaScript code has changed.

### Method 2: Connect via Wi-Fi[‚Äã](#method-2-connect-via-wi-fi "Direct link to Method 2: Connect via Wi-Fi")

You can also connect to the development server over Wi-Fi. You'll first need to install the app on your device using a USB cable, but once that has been done you can debug wirelessly by following these instructions. You'll need your development machine's current IP address before proceeding.

You can find the IP address in **System Settings (or System Preferences)** ‚Üí **Network**.

1. Make sure your laptop and your phone are on the **same** Wi-Fi network.
2. Open your React Native app on your device.
3. You'll see a [red screen with an error](/docs/debugging.md#logbox). This is OK. The following steps will fix that.
4. Open the in-app [Dev Menu](/docs/debugging.md#opening-the-dev-menu).
5. Go to **Dev Settings** ‚Üí **Debug server host & port for device**.
6. Type in your machine's IP address and the port of the local dev server (e.g. `10.0.1.1:8081`).
7. Go back to the **Dev Menu** and select **Reload JS**.

You can now enable Fast Refresh from the [Dev Menu](/docs/debugging.md#opening-the-dev-menu). Your app will reload whenever your JavaScript code has changed.

## Building your app for production[‚Äã](#building-your-app-for-production "Direct link to Building your app for production")

You have built a great app using React Native, and you are now itching to release it in the Play Store. The process is the same as any other native Android app, with some additional considerations to take into account. Follow the guide for [generating a signed APK](/docs/signed-apk-android.md) to learn more.

### 1. Enable Debugging over USB[‚Äã](#1-enable-debugging-over-usb-1 "Direct link to 1. Enable Debugging over USB")

Most Android devices can only install and run apps downloaded from Google Play, by default. You will need to enable USB Debugging on your device in order to install your app during development.

To enable USB debugging on your device, you will first need to enable the "Developer options" menu by going to **Settings** ‚Üí **About phone** ‚Üí **Software information** and then tapping the `Build number` row at the bottom seven times. You can then go back to **Settings** ‚Üí **Developer options** to enable "USB debugging".

### 2. Plug in your device via USB[‚Äã](#2-plug-in-your-device-via-usb-1 "Direct link to 2. Plug in your device via USB")

Let's now set up an Android device to run our React Native projects. Go ahead and plug in your device via USB to your development machine.

Now check that your device is properly connecting to ADB, the Android Debug Bridge, by running `adb devices`.

shell

```
$ adb devices
List of devices attached
emulator-5554 offline   # Google emulator
14ed2fcc device         # Physical device
```

Seeing `device` in the right column means the device is connected. You must have **only one device connected** at a time.

### 3. Run your app[‚Äã](#3-run-your-app-1 "Direct link to 3. Run your app")

From the root of your project, run the following in your command prompt to install and launch your app on the device:

* npm
* Yarn

shell

```
npm run android
```

shell

```
yarn android
```

tip

You can also use the `React Native CLI` to generate and run a `release` build (e.g. from the root of your project: `yarn android --mode release`).

## Connecting to the development server

You can also iterate quickly on a device by connecting to the development server running on your development machine. There are several ways of accomplishing this, depending on whether you have access to a USB cable or a Wi-Fi network.

### Method 1: Using adb reverse (recommended)[‚Äã](#method-1-using-adb-reverse-recommended-1 "Direct link to Method 1: Using adb reverse (recommended)")

You can use this method if your device is running Android 5.0 (Lollipop) or newer, it has USB debugging enabled, and it is connected via USB to your development machine.

Run the following in a command prompt:

shell

```
$ adb -s <device name> reverse tcp:8081 tcp:8081
```

To find the device name, run the following adb command:

shell

```
$ adb devices
```

You can now enable Fast Refresh from the [Dev Menu](/docs/debugging.md#opening-the-dev-menu). Your app will reload whenever your JavaScript code has changed.

### Method 2: Connect via Wi-Fi[‚Äã](#method-2-connect-via-wi-fi-1 "Direct link to Method 2: Connect via Wi-Fi")

You can also connect to the development server over Wi-Fi. You'll first need to install the app on your device using a USB cable, but once that has been done you can debug wirelessly by following these instructions. You'll need your development machine's current IP address before proceeding.

Open the command prompt and type `ipconfig` to find your machine's IP address ([more info](https://windows.microsoft.com/en-us/windows/using-command-line-tools-networking-information)).

1. Make sure your laptop and your phone are on the **same** Wi-Fi network.
2. Open your React Native app on your device.
3. You'll see a [red screen with an error](/docs/debugging.md#logbox). This is OK. The following steps will fix that.
4. Open the in-app [Dev Menu](/docs/debugging.md#opening-the-dev-menu).
5. Go to **Dev Settings** ‚Üí **Debug server host & port for device**.
6. Type in your machine's IP address and the port of the local dev server (e.g. `10.0.1.1:8081`).
7. Go back to the **Dev Menu** and select **Reload JS**.

You can now enable Fast Refresh from the [Dev Menu](/docs/debugging.md#opening-the-dev-menu). Your app will reload whenever your JavaScript code has changed.

## Building your app for production[‚Äã](#building-your-app-for-production-1 "Direct link to Building your app for production")

You have built a great app using React Native, and you are now itching to release it in the Play Store. The process is the same as any other native Android app, with some additional considerations to take into account. Follow the guide for [generating a signed APK](/docs/signed-apk-android.md) to learn more.

### 1. Enable Debugging over USB[‚Äã](#1-enable-debugging-over-usb-2 "Direct link to 1. Enable Debugging over USB")

Most Android devices can only install and run apps downloaded from Google Play, by default. You will need to enable USB Debugging on your device in order to install your app during development.

To enable USB debugging on your device, you will first need to enable the "Developer options" menu by going to **Settings** ‚Üí **About phone** ‚Üí **Software information** and then tapping the `Build number` row at the bottom seven times. You can then go back to **Settings** ‚Üí **Developer options** to enable "USB debugging".

### 2. Plug in your device via USB[‚Äã](#2-plug-in-your-device-via-usb-2 "Direct link to 2. Plug in your device via USB")

Let's now set up an Android device to run our React Native projects. Go ahead and plug in your device via USB to your development machine.

Next, check the manufacturer code by using `lsusb` (on mac, you must first [install lsusb](https://github.com/jlhonora/lsusb)). `lsusb` should output something like this:

bash

```
$ lsusb
Bus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 003: ID 22b8:2e76 Motorola PCS
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
```

These lines represent the USB devices currently connected to your machine.

You want the line that represents your phone. If you're in doubt, try unplugging your phone and running the command again:

bash

```
$ lsusb
Bus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
```

You'll see that after removing the phone, the line which has the phone model ("Motorola PCS" in this case) disappeared from the list. This is the line that we care about.

`Bus 001 Device 003: ID 22b8:2e76 Motorola PCS`

From the above line, you want to grab the first four digits from the device ID:

`22b8:2e76`

In this case, it's `22b8`. That's the identifier for Motorola.

You'll need to input this into your udev rules in order to get up and running:

shell

```
echo 'SUBSYSTEM=="usb", ATTR{idVendor}=="22b8", MODE="0666", GROUP="plugdev"' | sudo tee /etc/udev/rules.d/51-android-usb.rules
```

Make sure that you replace `22b8` with the identifier you get in the above command.

Now check that your device is properly connecting to ADB, the Android Debug Bridge, by running `adb devices`.

shell

```
$ adb devices
List of devices attached
emulator-5554 offline   # Google emulator
14ed2fcc device         # Physical device
```

Seeing `device` in the right column means the device is connected. You must have **only one device connected** at a time.

### 3. Run your app[‚Äã](#3-run-your-app-2 "Direct link to 3. Run your app")

From the root of your project, type the following in your command prompt to install and launch your app on the device:

* npm
* Yarn

shell

```
npm run android
```

shell

```
yarn android
```

note

If you get a "bridge configuration isn't available" error, see [Using adb reverse](/docs/running-on-device.md#method-1-using-adb-reverse-recommended).

tip

You can also use the `React Native CLI` to generate and run a `release` build (e.g. from the root of your project: `yarn android --mode release`).

## Connecting to the development server

You can also iterate quickly on a device by connecting to the development server running on your development machine. There are several ways of accomplishing this, depending on whether you have access to a USB cable or a Wi-Fi network.

### Method 1: Using adb reverse (recommended)[‚Äã](#method-1-using-adb-reverse-recommended-2 "Direct link to Method 1: Using adb reverse (recommended)")

You can use this method if your device is running Android 5.0 (Lollipop) or newer, it has USB debugging enabled, and it is connected via USB to your development machine.

Run the following in a command prompt:

shell

```
$ adb -s <device name> reverse tcp:8081 tcp:8081
```

To find the device name, run the following adb command:

shell

```
$ adb devices
```

You can now enable Fast Refresh from the [Dev Menu](/docs/debugging.md#opening-the-dev-menu). Your app will reload whenever your JavaScript code has changed.

### Method 2: Connect via Wi-Fi[‚Äã](#method-2-connect-via-wi-fi-2 "Direct link to Method 2: Connect via Wi-Fi")

You can also connect to the development server over Wi-Fi. You'll first need to install the app on your device using a USB cable, but once that has been done you can debug wirelessly by following these instructions. You'll need your development machine's current IP address before proceeding.

Open a terminal and type `/sbin/ifconfig` to find your machine's IP address.

1. Make sure your laptop and your phone are on the **same** Wi-Fi network.
2. Open your React Native app on your device.
3. You'll see a [red screen with an error](/docs/debugging.md#logbox). This is OK. The following steps will fix that.
4. Open the in-app [Dev Menu](/docs/debugging.md#opening-the-dev-menu).
5. Go to **Dev Settings** ‚Üí **Debug server host & port for device**.
6. Type in your machine's IP address and the port of the local dev server (e.g. `10.0.1.1:8081`).
7. Go back to the **Dev Menu** and select **Reload JS**.

You can now enable Fast Refresh from the [Dev Menu](/docs/debugging.md#opening-the-dev-menu). Your app will reload whenever your JavaScript code has changed.

## Building your app for production[‚Äã](#building-your-app-for-production-2 "Direct link to Building your app for production")

You have built a great app using React Native, and you are now itching to release it in the Play Store. The process is the same as any other native Android app, with some additional considerations to take into account. Follow the guide for [generating a signed APK](/docs/signed-apk-android.md) to learn more.

## Running your app on iOS devices[‚Äã](#running-your-app-on-ios-devices "Direct link to Running your app on iOS devices")

#### Development OS[‚Äã](#development-os-1 "Direct link to Development OS")

* macOS
* Windows
* Linux

### 1. Plug in your device via USB[‚Äã](#1-plug-in-your-device-via-usb "Direct link to 1. Plug in your device via USB")

Connect your iOS device to your Mac using a USB to Lightning or USB-C cable. Navigate to the `ios` folder in your project, then open the `.xcodeproj` file, or if you are using CocoaPods open `.xcworkspace`, within it using Xcode.

If this is your first time running an app on your iOS device, you may need to register your device for development. Open the **Product** menu from Xcode's menubar, then go to **Destination**. Look for and select your device from the list. Xcode will then register your device for development.

### 2. Configure code signing[‚Äã](#2-configure-code-signing "Direct link to 2. Configure code signing")

Register for an [Apple Developer account](https://developer.apple.com/) if you don't have one yet.

Select your project in the Xcode Project Navigator, then select your main target (it should share the same name as your project). Look for the "General" tab. Go to "Signing" and make sure your Apple Developer account or team is selected under the Team dropdown. Do the same for the tests target (it ends with Tests, and is below your main target).

**Repeat** this step for the **Tests** target in your project.

![](/assets/images/RunningOnDeviceCodeSigning-daffe4c45a59c3f5031b35f6b24def1d.png)

### 3. Build and Run your app[‚Äã](#3-build-and-run-your-app "Direct link to 3. Build and Run your app")

If everything is set up correctly, your device will be listed as the build target in the Xcode toolbar, and it will also appear in the Devices pane (`Shift ‚áß` + `Cmd ‚åò` + `2`). You can now press the **Build and run** button (`Cmd ‚åò` + `R`) or select **Run** from the **Product** menu. Your app will launch on your device shortly.

![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoEAAAAdCAIAAABaCiH+AAAcxklEQVR4AeyVhcoDMRCE8/6vV3dX7K+7DH9gKltvTzhmoBv72Ay7DeeGDzUYDOxS/Pe8ePHixYsX7zDcO2O0m+LFixcvXvyXvHg3uFS/3+f8/pF48eLFixcv/lveYdbr9fpGdpNKEt9oNEqlUi6Xy2Qy2TvCkT19kUdm5G+1Wo/90AaT/NYPorfxuD7NZrNYLJ5nC8CP+Gj6yz+8b3Fo/sWLFw/h3fGFnsvxrWJCcUmRSRJfqVRqtdpkMtntdodgtN1ukR8Xlcvle35wWq/XA7WBzLRxrz4hVEOKsL8QTuPQYknSC+Ujdd1ut2fETbuTGL7RaKAiKM1+v99ut5hAVxNEyO6/zvv8iLgLN1o/9Xrd2/gs/4s8hX8AbNj6WBuB+REfQX+xc9XiMP2LFy+eHwK8xPPvkcMP8gsrnnKSGL5QKIzH4x1ka0fZQn/Kj0Yj3PjURtB+cBdtUNZGkH7ER9BfRLY4Av/ixYs3L/T0De78y08YIc4tkAA+k8ksFgsUZbPZIEKcI0L3l5/wy+USN1o/2MQRyaD94K50Om3rg80je+cBF8W1/fFJ7733Xl3Se9l9IT1h05s1BWNPR6wQFdD8BWxo7L2LMXbwScSlI9hLrMBTVJTqo73+3nf3yP1fGXYy8orlw/lsNmfO/c2dM+feub977txFimzW3+uWC/7j8YmNHXbf/Q/f2+yBeh+MMTFDG1//yY+3bl9zhz9m/jfhm/BNeHlCdT4yCgsL0QqVmA7NxpMDv2HDhgajZtb79OnDu3TR7eDRGyzauHGj2R9xA2l8/fbxyg2TYLRf/+g3nGNbvWEfv3z58nXr1lnjmzkePPfc80477bTTTz/9ep+gnHrqqRih4cbf78mPt9W+9Dd62rH1vwnfhG/C882TqPORoTRoRun569dsmTwyt2u79A9f4IPCYcGGtRSZ8UqX7z/sWL09bfDmBS3XTX2UD8qO9CEY/eF1ZdPONbOzhkYsad1x9hMdZj3eb3FrDjH6w1v7Y41fv359vamKv1B+9NFHH3/88eTJk6uqqqzx1lMhQm/2B6PCW/uzwCfz58+Xb6Xo33b84Yrm+GD0hzd/r507vfv1Z29YtsgmvqSkZObMmSzCWOBvve0uGPcsn5xdJ6eccophGBQpfGPjf/LjrdtXelpTfE4sfEZGRlN8Tj481KMzkcHPUfZowuEuT1Juj06bWr2S1+6dgi9a8EHhEOPOlcvNeP0wb2Pi5kWf/GH+g8XLnypP+R0fFA4x5m9aZsbrkr55Wf+ln3Za+uQ3yYHdMl/lg8LhgITPKPJ3lrU/FniGpD/75C9/+QvfSsyWD33SunXr4ODgpKQka7zZqBRCb/YHo4JZ+/OzT+bNmydKg4d2/OHGLdyw8H9H9so1bdqueLP5H1Izfnjwpqgn77HG60WMJikpKRZ4lp1JfB+qkwcffDAgIODuu++GmCnyV3/1oWplUbbqagt/Du1YnbV6Z6lFfBrdvur6Ivhmha8uzMr6FUR10ZasDQds1t/o9pUmbnz9Jw6ejd8VFRXHof9r1qxhu9xR1R8REfEf9IdJMLPhY95eTXidCOAjg/9EEyVv3Wq4dkfwWwVftSn4qnXBl94PCocYKSJF1vH66QXbc+HaosTHy9OfL08NVB8OMVIEQPDm0zdsz4WAv0py9Vzl7pHt7p7l7pYZhMIhRoo2kklreAvF+lAprI6ag2U+VBz8wQcf8E1CHBoayo+9LPBKMXOw2Q2MCmDtDxRrwb4idvzhiub4EA1r//fu3hEf3mbj28GJj7+wNyN7xeAoUuHEwf0psuM/+/JnzZrFHgQdYObgRx555GGfwMHNmjW79957hYMbrr80y2UY3RYVaPbSsW8Yxu9GlPjxJzHUQWIdOnODstv03z5+9Qg8UOKetbqwYXzpigDj+yL+n/q9EbrCZv2Nbl8Eu3X9yJtvvpmcnIzy34uPfXxWVpbTJ88///yQIUP4o0J26n///fcnTJhg35+EhAQLf7iu+BAYGNi3b1/eqTf6funJnTt3Pqr4wMH+8GPHjnUeKdOmTbP2B0CnTp3+I+1F0Mx4tp126dKlV69e/uofNmwYfvKbHDkMCgpSzjM46PjMzEy96flDFtIfXnjhBWYSCsa71bfeemvx4sVH6/+xxR9BBMLBzM7kAGXzpB9JeYWA870E3IoPitAwRZsn/qjj9dO3pQ4i5fUScEognzJPYOlKlMM0TBGAepdTNczKHELK2zPbR8CZQd0yvB8UoWGKACi8qsH60BoP6/zJvxAspQv7IigqJ6Y/0TNMeCtZu3at2R9rN/T659kQO/5wRT0+Nt1YNm/4xqyBBUktR719a/72rdTf59YLu992CUU2/ec95ZIlS/wBIFpeBkO9D/gEAr7nnntUHtzwORWZbmjOFbu/7n6rts/wEd/wkjrEnvz8PfsrfDrFeVGGEf7LHhWfiv3ecorrABVVPiPn6NcpZi23qASFBEsZQSmYLrmxLqNrQsWfqyoqihJicBD3NGdKuIJPSlLcjhiKSjL7u8JT8KcBDHX4PMJYVHHEnRcCw2SzfW10eOSXX365+eabmzdvruJjU/5L+KVLl8J8eXl5PDhfffXVe++999/w57LLLrPAQyp0qK+//hr2uvrqqy+//HI4QOHZ46aDlcUswsFUclT+9+vXzx+AwYe/ysKffeCVDQq/SWOOYl3nlClTOnbs2Oj2MgdNF/6+EA8vbQQpCj4tLQ2v9G7J+tZNN91Eb+SQ93p33XUXAJHS0lLrphcjbTFu3DjlD+MJlvHjxx+t/8cWz03pfGTwWyU09Z0T8jkrz3UZcCv1kWyYIgA6HlH6pvktWHmGcYWAy1Y+xwdFaJiiTfNb6nhd6buoJSvPhwk4XX0O0zBFAHS8Lv78scYTCJsh09lX6S1btmzTps1PP/3EoqP90Jv9YYXK5ukW1CtpMWKnHq5ojo9FNIqLi6eMGzw5ru3f/zH494nNoiPb8fxgj//iE1LhmSEdbfpfU1ODn4waFhx83333sQQNAcO+PKJ33nmnJQfnSso5eUvFYRYJdxmIa3gxD3l+IgQo8kb/xIo/lYw5fAxrZ3LyLzH/X56wnRp8gIAAQyR4EgQJbCF1+sTR3O3je6reEatOdcdurzzCqcxYVwD1i2wZCyKrBPZPUNnxFzNyD3NwQGyRl4Oj4GAMYNxHYCiKRXfUGSfncvEj7svdP7HcXvva6WmffvrpnDlzbr/9dlYsy8vLSVPETlfnFYz0wMGDB6Nw+Mwzzzz33HPTp08X1iF7Jod+9tlnBw0aJGdBDG+//Tbt+M477/CbSCw8LD/88ANjNOscixYtGjBgAJOtzz//nGtRykBMEQsh0dHROCBj7muvvYaCsI4C/2GnErJD7MJnTIXl5cXw4cMFyQ5K9gCaK5Qp1JdffulwOJhn8HIEy4svvsjqy+OPPy79H5ait5s5GHqTUnQyNvRJkyZdd911F110Ef5DP3K/r7zyyvnnn8/cEa/kdFI0pjV4jkU4GO685pprOItSbvzaa6/FJXSzKA62lnPOOUfp5pgjUVFR3PLrr79O8IWDeQfJeh5Ba9++PRzArIJ0kwhLiIiJPqbRvj169HjssccgQmjVHDSR1NTU1atXsytFOBghyHFxcerZp8NwOk+0cDD86nK5UMzjp7+mx/jEE0/giYLR5Z566inh4BNIiJtOAYb8L79O0j543vsOWBHwFy35oOT7aJgitmjpeETVsHbKI7wAhm69GXDy7yBgRcNlKc9RBEDHiy7f7MDiBTBL0KS/UG9o6uuhaa+jcIiRIgA6Xr+0P3+s8QxJtf6FTqP0D/wLNEy35nkG7+90JVzR7A9Ghbf25yc/IuwrusJb+MMVzfHBaMYP7/kWn4j2gV3ev3f/nqF7dr/6Zdur+nQMxBjX461BnweG3XDOd9eePfDzwDgf8jfjyYMXHx8PhZvvF6L10q1PYN877rgDMrjtttvYlkVRw/Epy3Ab7qgwt/HFQi+gPMNluCbNjTIcMQdrysa4DGeMp7K2tnJ3CqQVt668tvZgTIAR5dnnPXXtaCjMs9tb7olzG87R5bXFcU7D6DKjGFPeQrjPc7C2fPMYYCm7K2tqyhKiXIYjjtJ1Y8DH5XHqH3dxqitune5UTowTCt21e3de3qYZ4Q4jgFPKRzuN5pNyar01z4Xnk/bjiyeIPJj/Z3g5mPpHu3SMI2lf7cGcOAb9GeuKsS3tahhhnlpfVa6YlD/W1FTu9sh92Wlf6fAW/RM+IEdhOfGLL74YM2YMAAY7+Zs+N954I1QEhv0Q7PujiAaizzN8M4x6PB6KIJ6tW7cympMyssgGhqeDQZ+FRziA4RjMqFGjbr31VmCcws472BrCgxtmzJgBnjVkAAy15D2wLHiyHAZiFIRFFC4qlcBhjPgMzbz5ZtLGfTH6QzPy4ytmErNnz65XIWRGETz97rvv4h4OQP94i/HSSy+VgNAtoaWcnBw9PsLBRI+bhbfQV65cWVZWBtfK7hDmi8xRwMfExLB5k9JPPvnk3HPP5TcnnM6EEqoeMWIE9My5cDDGl19++aqrruIUGAsj3/6eF3HbenyAgxVAxTwyMlJinp2dTWQIEQu5cDODFUa2lzKT4H6Bwa9YCAvzYxQez1atWun1cyIwYsU0Cx7FooJmFroHvGh2mPVk+hUKHExvRElPT+dJZzbGk06TEV4dz9xFNT2/5KHppT+0aNGCSMp4S+ck8/7uu+/IjO2Mn/rhscXTHDofGWi6QLEQbb6Jg/kIB0PS+SZhbOWbXdCKg6FenYMxKg5WeF06zHpC52AIWOfg0IxXhINtitRvLQTCZgSFblUGzLeywME8V/QnOy2kQq8Lw4fNFlVEKyKHuhHdTg/gisTHIhpKBoW8tnzid+3c98yf2uGvf+s1aewtEd+8tGJ6L/WJfvhmUuHwh25GB2ztv87B5vsVDpbcV9iX8fqWW24RDm44PuWZLnh0e5LTcGZU1ubNbWt8tGD3Ongrphg+ZnSre64XdIEpGVuLYxxGVOZ+Ts+JcxlfJByubfcCiDazvDjOYYSnQIvUvy/K4U4qrl032g1MLlcJHztiYEZgXyzMO3xHC7+g6oPa/ebENTeUGB9l7KutKcvA5Gr7RdcvvggNbYs1jHlAsYc8eB8+ZUY5IddyL8YZ3AVM167BYPCkOCfGMKLA1OBQUhhUDcx3XzX6fdlpX+tJJ/WT5MElLAmSRMKsGHv37j1x4kQ2tMMuMvhCeNAPYzHJ5VifQEsMgpwOrzB2MwRDjSBJp2644QZpaCz80gx2hxF5ISqXu+KKK8CgUzkXQicjlDr79+//6KOPypgLgVGt2+2mY0jOTSVCJAgvaKEcqRCmhyoUBzdYIcubDN+q/yg6sXhehIOVfPPNN4CZNKDzQgpeoWayYe6Om4WSmT1AQpSuWLECkkAJCwvjFGYeioPJ29BhR06/5JJLiI+/50U42Hp8gIM59Bfz8PBwQiQA3tRK6DhkvkLjhoSE8IZVxhZuB4VpBO966/lD3kw3IKm94IILGuRg8DoH1zudxJcpGvMtxcEAVq1axe3jM3kwk6Tvv/9e4fWmf+ONN2h63mQrDmauQK+T7JzJjXDw8cy4ZgBPaL4mhjCWklXftdXXovMbWovO8yOsRR+stxadfMRa9Mafm/s79zfXovssbNHgieK/fVF4AkFoEOvg+suDZS167ty5dHqL0xE99GZ/dA629kejXr8ieGt//Llhxvfr6Ozb/tmILo/XVI9ek/tI24+u6f7JExjVp8+rzXyp8FndXr6XQ2v/0XGetegG71c4WGdfFvHIzBQHm+MDIcG+OZWVCcFG89ELogKMmJyyynUxcPDBshxyxPhdfxT83GDDPbqOgzMgNR+5Bs+VUtgbsswpP6hKvUinl4O3xXcx3DNgFaRS2L22mAw7OH6b+LMrPthwjS7X7ignxuWIykDPSwglrd7MyeVeZ8LmenIyPBkZJFrr8ooraw563DB6TQ15MBx8GBPvycmswxysPJjjuxfqknQ5zFNz+L7Eo1ou7h6TY6d9EewW/RMSJTWEURCIgWZiH/tnn30GpbEDkbGP1JPxWhqRJUGhNzJmhmxOZyRldkUKSLLFI0b2TNup+smkWYOFPr/99lsOEThYlkPIhuFg8FdeeSW1IVTLSq+MuVwIMmMNE7A4rFcCIzIKi85iL4wCQDhYVUhtqkKmDryVrBcB6MTieWHSAF8Sip49e6JMnToVO4M+OrQxtE7Itln+hfW7d+8OQwgHs0aNIjk98UcXCmRlG+Jk0gAz4a3FA8skg2/r8YGqRJeYqyJiTkLMQrcK0cCBAzt06IDCTcFtrApQv3AwnA3V0UbkpvolZMJBtsq5zNJ0Djb7o+fBCH8NCgdQoFiuwgyJULCqzJ5WWJn5AUsvcjqpNosu6vZV07NBgV4nTa84mJ6Gk+TNOEzYdQ62OZ4jxxavP6FeDt7lE6ZsomwYH1e3J0ujYW1PFgAdr5/+qydG9mQpGlYEXJ72PEUAdLyuT0+LZeMV268UDdfbkwVAx+vizx9rfG5ubnWd0MxmXR3CuKxrqW/SXyZovBhjualBvD8jI6vZH4wN4s06fI8w0qlvJerQjj/cuDk+GBvEZ3t+XpPW/9ChTwb9cNuCedPM9cc8ciupcO/7b/xN/9kNyBKTv/hAtNCtzr43+kQ4uOH4lKbBwcklVYfWjDK80rugurokO9owoouqKqZ/ZBghc/YeOlS4Zg6vVCduLK2uLop2GBFphZx6aONE1nvnrCmsqCicH+YwgiYcqj5AaWT6Xl/9hdEu9++LqqsL5htUNz9759aVvZ0kqsOKqqo2TqTq3mv2llK199SJG3X30gY6HZHpKJwcyRnRaTg6LchwRC4pRdu5vEtQSHZRVfWBlUGOSC5WlBbhDFupMCVVVWA6B4WsOlB9IN17Lwd893sgPdLZOxnHp314xH1N2Fhip331nmaOP6WkTQzEUkSGAcFwCB/z0hcjORPJMW9w0UmFmScx4qPToJANgyljNMuVWHgfSaZCJQy7vMDDwqtfCB5l5MiRsKZcGg4WfGxsLPkZRpJUMmwsrDBDmVL5q6++Ws/VH3/8UVUCnheZ5O7kWPgJU2JkHsBCK4pUCFJVCO0xZGPhLyTwIEsSxoSDO0KRCtH1+AgHc7MM9ywgM0fkLA7PPPNM6I2ZCmku+Rx47og36KyZk7VzCjkxp8MTnMJbdvJL4WCQEiUyQizco8X4A0dajCcicLDSiTlEhbJw4UKJOTMk4oDz8CusBgdzLk8Zb44phQ4JoFTI7TDl6tq1a736mVKwz1yag7umSAXN7A9NDweLzqIxvEtRYmIifD/CJ0yM6EUwKL2RlX9KEbiZeZheFX2Gpq9XPw6wwI5OOz799NM0DUYmZMyxrMdPc9GxxfOE6hRgyFOqZFtO1qpuHRr+bdJnb1G0PSdrpx/Zvilj44I26rdJvAPWf5tEEQDzWeLA6s2ZkYs/1n+bxAeFndIYKQKg8KbT/Yglnk5AOPSQqUOly+H7mrBiw2PMU22B12tDdA42+4NRYaz9gWgRnXeVRdnt+MMVzQFhaahB/PL5A/7xj7hlS+6KDG9eUlxsrn9FbASp8Mj33tyS4rHwnyeW5SxexZn90TlYZ18W1iAG4eCG76gEDg5KP8BhwUCn0XnOBuwHVkV7mZLSwrQQhyHSeQJECKxolNOITj8g9WRPCDFEHCHwspRGoAkHO4N+D99SdfrEIAMJGjptqNMZDWtSOq2LU05t1nkCJ+h3tCra5YhME70obSiL0MmFVdWFaZ3rnPlsVHIFeDjYGV3oI9eg3slViAlTsmaY0Wyg9140WPXedP2+bLavauIG489qLUSiDkkWYQ50XhOyGIvCaiQ75hg7BMAEFMphTGecZXDHAo9yCBEySgqXQ0K0IExDg8LTij5RhINl/VY4WOFJVdllQ2KkD8S6t0LkYuFCPI9sV4YdoQoBCAejqAqffPJJFn6xkHNQORMIjMwqBE+WBlNya/gDQ5Bz6/Fh9Vg4GAt7u9BZkpWIsSGZQ94Hw3NYSOgvvvhiMkUm6MLBnE7efOGFF/Lym0GDIihQauZZAENSyEUtxh/2l6Fbjw9wsNLrxRwLMwZIkftifYJX9WzCkoYgleRlKo0OB0tt/BwIl3hhUa9+MlHeQTAbg6F5E49dD1o9f1gj4XKi88jTQPVqo1+R/KHIDIDokQGTlNNL9btT0y9EJ2Z6FwrDCBuz6aXY4WBWO6zHT3PpscXrT6iXg3fUiZhQfl2+FK41/40OjBSZ8bqybc0iuLbe3+go+PlBjBTpeLOSvHYRXEvK+3Xyc/rf6MBIkb8TLfyxxivWEaG7+FOEfVl8ZuGI580aL4rS9fq5otkfjApv7Y8iXabV8X7Ejj/0AH9umPEpiUN27Xo2IvyeVE+SP8d+Xb6somh/4Zb1Fv4ztLFdxSI+wsFCvcK+1/lEONiEtxv/EqTCBFNSUYJYxL8iPzmi98gtJVXIjsVwdvT+uvorVNW2/SkpKpIz/PoDZv/+4vLf7g9cu5iqbLev4mAzvnH9mcEdH3QYdMKwWw8Pex1V/TD60fpT6hNlgQOgIoWnwnp4LPVqw3NVrf34EAHyaR3PegDJfT0YleOebmGFFjqX1Wzr+MPBjWgv1ud0vAqCDsN5vNXjyT41fo/rr35WGnSLChrS6PFQeBpCtY8X5UTH60TANxx8hGz3ydZVmevHDcv+NpgdWKnvB6JwiJEiM14ZRdm6IW1z8kBe/bIDiw/KlpXR2zam+8PrdeZuypiWGsOrX3Zg8UGZmhKN0R/e2h9rPFNjPV5mRXThYOa2vHVg0LGDFzHDuKLZH31ktPYn3obY8Qc3zPERN8z4yQM79fjs2rCQjyzuN2H00DH/180zPcqf/wwKvFXiMbaID3+Q0qgT/jgHE2R1SJHCNzL+jcfnD/3QUDJ02XYBHzt/Gtm+0sSNqP/EwpNSk1RBD8ez//ww6YwzzmCtGBa0xrOw/L/xn+SeLdxsWPuvx6cJb3pCje0mwaorZjk58ASCcDBvVd/6oa7wroKqOLSD9weQ0Fu40Yj6G4fniub4YGwQP21A+4hOb+3aud26/rZvPDJ3WIg/f3ghBAH48wdhOsy/2XD+BReeZhKM/JsNkmH89+Jjjd+3Ow/ZV974+o95+yLYjwf/m/AsiZMKH1f+48//6PlqwpuIwNimCRvozbpZTg48gWDoVzFSYh3fRuNZj+KK/txQ+P+2P+KGOT4Y4bl6eDZaP/XIAwlLF/HjK/bysc9TtrwiKBzy9ogilv6YsHf/NLBx/gsH9+vX3xHwiPnfLmzmeKhvZNS/2jcDTIlhIAzn/repAi1aKEigdF8P0B6gvcH7bfjFjtZa2Q3xD/ImydfkN5N5a1cDbed55o9PXbzNr01xQf3ixYu3HwQulisMDlvr0KrhQwjbtqVRs3G03Y/5fd+xo9UTZZD8th7I8N7b+GAQU8Ty6hFfPL88aQX1ixcvnhXK8nTrusZOdK669Kvh8W4zXhSK365OYxw0wCc8DHthR6tnnudpmvjIV/VQxk00yOfXI75cfuNJw2xB/eLFi7cV6uhZu5iqh8cViGEYcFkNv9FdhJKOsfd4rIz1sQv2snpSGbi3fhwHH8yrBzKw/jiO2MuGgjIAWBn59Ygvkd/0wCPFP9MvXrx4W6E09/e02Hnx0xG2lfHe+77v27ZtmgYX29HSYTf6sNR/k8fKWD+EcK8HQCoDllEPZXjv7+MDoOs6wFwzvx7x5fKbHvif6RcvXjwr1P7/d/HP42nRYZt26YgXL168ePHis/DucW3LsthB8eLFixcvXnwW/h9ANZXZVIUD8QAAAABJRU5ErkJggg==)

note

If you run into any issues, please take a look at Apple's [Launching Your App on a Device](https://developer.apple.com/library/content/documentation/IDEs/Conceptual/AppDistributionGuide/LaunchingYourApponDevices/LaunchingYourApponDevices.html#//apple_ref/doc/uid/TP40012582-CH27-SW4) docs.

## Connecting to the development server

You can also iterate quickly on a device using the development server. You only have to be on the same Wi-Fi network as your computer. Shake your device to open the [Dev Menu](/docs/debugging.md#opening-the-dev-menu), then enable Fast Refresh. Your app will reload whenever your JavaScript code has changed.

![](/assets/images/debugging-dev-menu-083-70616da2986550a977feb0158f218bdd.jpg)

### Troubleshooting[‚Äã](#troubleshooting "Direct link to Troubleshooting")

tip

If you have any issues, ensure that your Mac and device are on the same network and can reach each other. Many open wireless networks with captive portals are configured to prevent devices from reaching other devices on the network. You may use your device's Personal Hotspot feature in this case. You may also share your internet (Wi-Fi/Ethernet) connection from your Mac to your device via USB and connect to the bundler through this tunnel for very high transfer speeds.

When trying to connect to the development server you might get a [red screen with an error](/docs/debugging.md#logbox) saying:

note

Connection to `http://localhost:8081/debugger-proxy?role=client` timed out. Are you running node proxy? If you are running on the device, check if you have the right IP address in `RCTWebSocketExecutor.m`.

To solve this issue check the following points.

#### 1. Wi-Fi network.[‚Äã](#1-wi-fi-network "Direct link to 1. Wi-Fi network.")

Make sure your laptop and your phone are on the **same** Wi-Fi network.

#### 2. IP address[‚Äã](#2-ip-address "Direct link to 2. IP address")

Make sure that the build script detected the IP address of your machine correctly (e.g. `10.0.1.123`).

![](/assets/images/XcodeBuildIP-dfc8243436f5436466109acb8f9e0502.png)

Open the **Report navigator** tab, select the last **Build** and search for `IP=` followed by an IP address. The IP address which gets embedded in the app should match your machines IP address.

## Building your app for production[‚Äã](#building-your-app-for-production-3 "Direct link to Building your app for production")

You have built a great app using React Native, and you are now itching to release it in the App Store. The process is the same as any other native iOS app, with some additional considerations to take into account. Follow the guide for [publishing to the Apple App Store](/docs/publishing-to-app-store.md) to learn more.

info

A Mac is required in order to build your app for iOS devices. Alternatively, you can refer to our [environment setup guide](/docs/environment-setup.md) to learn how to build your app using Expo CLI, which will allow you to run your app using the Expo client app.

info

A Mac is required in order to build your app for iOS devices. Alternatively, you can refer to our [environment setup guide](/docs/environment-setup.md) to learn how to build your app using Expo CLI, which will allow you to run your app using the Expo client app.


---

# Running On Simulator

## Starting the simulator[‚Äã](#starting-the-simulator "Direct link to Starting the simulator")

Once you have your React Native project initialized, you can run the following command inside the newly created project directory.

* npm
* Yarn

shell

```
npm run ios
```

shell

```
yarn ios
```

If everything is set up correctly, you should see your new app running in the iOS Simulator shortly.

## Specifying a device[‚Äã](#specifying-a-device "Direct link to Specifying a device")

You can specify the device the simulator should run with the `--simulator` flag, followed by the device name as a string. The default is `"iPhone 14"`. If you wish to run your app on an iPhone SE (3rd generation), run the following command:

* npm
* Yarn

shell

```
npm run ios -- --simulator="iPhone SE (3rd generation)"
```

shell

```
yarn ios --simulator "iPhone SE (3rd generation)"
```

The device names correspond to the list of devices available in Xcode. You can check your available devices by running `xcrun simctl list devices` from the console.

### Specifying a version of device[‚Äã](#specifying-a-version-of-device "Direct link to Specifying a version of device")

If you have multiple iOS versions installed, you also need to specify its appropriate version. E.g. To run your app on an iPhone 14 Pro (16.0) run the following command:

* npm
* Yarn

shell

```
npm run ios -- --simulator="iPhone 14 Pro (16.0)"
```

shell

```
yarn ios --simulator "iPhone 14 Pro (16.0)"
```

## Specifying an UDID[‚Äã](#specifying-an-udid "Direct link to Specifying an UDID")

You can specify the device UDID returned from `xcrun simctl list devices` command. E.g. To run your app with UDID `AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA` run the following command:

* npm
* Yarn

shell

```
npm run ios -- --udid="AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA"
```

shell

```
yarn ios --udid "AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA"
```


---

# üóëÔ∏è SafeAreaView

Deprecated

Use [react-native-safe-area-context](https://github.com/AppAndFlow/react-native-safe-area-context) instead.

The purpose of `SafeAreaView` is to render content within the safe area boundaries of a device. It is currently only applicable to iOS devices with iOS version 11 or later.

`SafeAreaView` renders nested content and automatically applies padding to reflect the portion of the view that is not covered by navigation bars, tab bars, toolbars, and other ancestor views. Moreover, and most importantly, Safe Area's paddings reflect the physical limitation of the screen, such as rounded corners or camera notches (i.e. the sensor housing area on iPhone 13).

## Example[‚Äã](#example "Direct link to Example")

To use, wrap your top level view with a `SafeAreaView` with a `flex: 1` style applied to it. You may also want to use a background color that matches your application's design.

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [View Props](/docs/view.md#props)[‚Äã](#view-props "Direct link to view-props")

Inherits [View Props](/docs/view.md#props).

note

As padding is used to implement the behavior of the component, padding rules in styles applied to a `SafeAreaView` will be ignored and can cause different results depending on the platform. See [#22211](https://github.com/facebook/react-native/issues/22211) for details.


---

# ScrollView

Component that wraps platform ScrollView while providing integration with touch locking "responder" system.

Keep in mind that ScrollViews must have a bounded height in order to work, since they contain unbounded-height children into a bounded container (via a scroll interaction). In order to bound the height of a ScrollView, either set the height of the view directly (discouraged) or make sure all parent views have bounded height. Forgetting to transfer `{flex: 1}` down the view stack can lead to errors here, which the element inspector makes quick to debug.

Doesn't yet support other contained responders from blocking this scroll view from becoming the responder.

`<ScrollView>` vs [`<FlatList>`](/docs/flatlist.md) - which one to use?

`ScrollView` renders all its react child components at once, but this has a performance downside.

Imagine you have a very long list of items you want to display, maybe several screens worth of content. Creating JS components and native views for everything all at once, much of which may not even be shown, will contribute to slow rendering and increased memory usage.

This is where `FlatList` comes into play. `FlatList` renders items lazily, when they are about to appear, and removes items that scroll way off screen to save memory and processing time.

`FlatList` is also handy if you want to render separators between your items, multiple columns, infinite scroll loading, or any number of other features it supports out of the box.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [View Props](/docs/view.md#props)[‚Äã](#view-props "Direct link to view-props")

Inherits [View Props](/docs/view.md#props).

***

### `StickyHeaderComponent`[‚Äã](#stickyheadercomponent "Direct link to stickyheadercomponent")

A React Component that will be used to render sticky headers, should be used together with `stickyHeaderIndices`. You may need to set this component if your sticky header uses custom transforms, for example, when you want your list to have an animated and hidable header. If a component has not been provided, the default [`ScrollViewStickyHeader`](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js) component will be used.

| Type               |
| ------------------ |
| component, element |

***

### `alwaysBounceHorizontal`iOS[‚Äã](#alwaysbouncehorizontal-ios "Direct link to alwaysbouncehorizontal-ios")

When true, the scroll view bounces horizontally when it reaches the end even if the content is smaller than the scroll view itself.

| Type | Default                                             |
| ---- | --------------------------------------------------- |
| bool | `true` when `horizontal={true}`***`false` otherwise |

***

### `alwaysBounceVertical`iOS[‚Äã](#alwaysbouncevertical-ios "Direct link to alwaysbouncevertical-ios")

When true, the scroll view bounces vertically when it reaches the end even if the content is smaller than the scroll view itself.

| Type | Default                                             |
| ---- | --------------------------------------------------- |
| bool | `false` when `horizontal={true}`***`true` otherwise |

***

### `automaticallyAdjustContentInsets`iOS[‚Äã](#automaticallyadjustcontentinsets-ios "Direct link to automaticallyadjustcontentinsets-ios")

Controls whether iOS should automatically adjust the content inset for scroll views that are placed behind a navigation bar or tab bar/toolbar.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `automaticallyAdjustKeyboardInsets`iOS[‚Äã](#automaticallyadjustkeyboardinsets-ios "Direct link to automaticallyadjustkeyboardinsets-ios")

Controls whether the ScrollView should automatically adjust its `contentInset` and `scrollViewInsets` when the Keyboard changes its size.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `automaticallyAdjustsScrollIndicatorInsets`iOS[‚Äã](#automaticallyadjustsscrollindicatorinsets-ios "Direct link to automaticallyadjustsscrollindicatorinsets-ios")

Controls whether iOS should automatically adjust the scroll indicator insets. See Apple's [documentation on the property](https://developer.apple.com/documentation/uikit/uiscrollview/3198043-automaticallyadjustsscrollindica).

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `bounces`iOS[‚Äã](#bounces-ios "Direct link to bounces-ios")

When true, the scroll view bounces when it reaches the end of the content if the content is larger than the scroll view along the axis of the scroll direction. When `false`, it disables all bouncing even if the `alwaysBounce*` props are `true`.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `bouncesZoom`iOS[‚Äã](#bounceszoom-ios "Direct link to bounceszoom-ios")

When `true`, gestures can drive zoom past min/max and the zoom will animate to the min/max value at gesture end, otherwise the zoom will not exceed the limits.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `canCancelContentTouches`iOS[‚Äã](#cancancelcontenttouches-ios "Direct link to cancancelcontenttouches-ios")

When `false`, once tracking starts, won't try to drag if the touch moves.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `centerContent`iOS[‚Äã](#centercontent-ios "Direct link to centercontent-ios")

When `true`, the scroll view automatically centers the content when the content is smaller than the scroll view bounds; when the content is larger than the scroll view, this property has no effect.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `contentContainerStyle`[‚Äã](#contentcontainerstyle "Direct link to contentcontainerstyle")

These styles will be applied to the scroll view content container which wraps all of the child views. Example:

```
return (
  <ScrollView contentContainerStyle={styles.contentContainer}>
  </ScrollView>
);
...
const styles = StyleSheet.create({
  contentContainer: {
    paddingVertical: 20
  }
});
```

| Type                                    |
| --------------------------------------- |
| [View Style](/docs/view-style-props.md) |

***

### `contentInset`iOS[‚Äã](#contentinset-ios "Direct link to contentinset-ios")

The amount by which the scroll view content is inset from the edges of the scroll view.

| Type                                                                 | Default                                  |
| -------------------------------------------------------------------- | ---------------------------------------- |
| object: `{top: number, left: number, bottom: number, right: number}` | `{top: 0, left: 0, bottom: 0, right: 0}` |

***

### `contentInsetAdjustmentBehavior`iOS[‚Äã](#contentinsetadjustmentbehavior-ios "Direct link to contentinsetadjustmentbehavior-ios")

This property specifies how the safe area insets are used to modify the content area of the scroll view. Available on iOS 11 and later.

| Type                                                           | Default   |
| -------------------------------------------------------------- | --------- |
| enum(`'automatic'`, `'scrollableAxes'`, `'never'`, `'always'`) | `'never'` |

***

### `contentOffset`[‚Äã](#contentoffset "Direct link to contentoffset")

Used to manually set the starting scroll offset.

| Type  | Default        |
| ----- | -------------- |
| Point | `{x: 0, y: 0}` |

***

### `decelerationRate`[‚Äã](#decelerationrate "Direct link to decelerationrate")

A floating-point number that determines how quickly the scroll view decelerates after the user lifts their finger. You may also use string shortcuts `"normal"` and `"fast"` which match the underlying iOS settings for `UIScrollViewDecelerationRateNormal` and `UIScrollViewDecelerationRateFast` respectively.

* `'normal'` 0.998 on iOS, 0.985 on Android.
* `'fast'`, 0.99 on iOS, 0.9 on Android.

| Type                               | Default    |
| ---------------------------------- | ---------- |
| enum(`'fast'`, `'normal'`), number | `'normal'` |

***

### `directionalLockEnabled`iOS[‚Äã](#directionallockenabled-ios "Direct link to directionallockenabled-ios")

When true, the ScrollView will try to lock to only vertical or horizontal scrolling while dragging.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `disableIntervalMomentum`[‚Äã](#disableintervalmomentum "Direct link to disableintervalmomentum")

When true, the scroll view stops on the next index (in relation to scroll position at release) regardless of how fast the gesture is. This can be used for pagination when the page is less than the width of the horizontal ScrollView or the height of the vertical ScrollView.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `disableScrollViewPanResponder`[‚Äã](#disablescrollviewpanresponder "Direct link to disablescrollviewpanresponder")

When true, the default JS pan responder on the ScrollView is disabled, and full control over touches inside the ScrollView is left to its child components. This is particularly useful if `snapToInterval` is enabled, since it does not follow typical touch patterns. Do not use this on regular ScrollView use cases without `snapToInterval` as it may cause unexpected touches to occur while scrolling.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `endFillColor`Android[‚Äã](#endfillcolor-android "Direct link to endfillcolor-android")

Sometimes a scrollview takes up more space than its content fills. When this is the case, this prop will fill the rest of the scrollview with a color to avoid setting a background and creating unnecessary overdraw. This is an advanced optimization that is not needed in the general case.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `fadingEdgeLength`Android[‚Äã](#fadingedgelength-android "Direct link to fadingedgelength-android")

Fades out the edges of the scroll content.

If the value is greater than `0`, the fading edges will be set accordingly to the current scroll direction and position, indicating if there is more content to show.

| Type                                            | Default |
| ----------------------------------------------- | ------- |
| number***object: `{start: number, end: number}` | `0`     |

***

### `horizontal`[‚Äã](#horizontal "Direct link to horizontal")

When `true`, the scroll view's children are arranged horizontally in a row instead of vertically in a column.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `indicatorStyle`iOS[‚Äã](#indicatorstyle-ios "Direct link to indicatorstyle-ios")

The style of the scroll indicators.

* `'default'` same as `black`.
* `'black'`, scroll indicator is `black`. This style is good against a light background.
* `'white'`, scroll indicator is `white`. This style is good against a dark background.

| Type                                    | Default     |
| --------------------------------------- | ----------- |
| enum(`'default'`, `'black'`, `'white'`) | `'default'` |

***

### `invertStickyHeaders`[‚Äã](#invertstickyheaders "Direct link to invertstickyheaders")

If sticky headers should stick at the bottom instead of the top of the ScrollView. This is usually used with inverted ScrollViews.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `keyboardDismissMode`[‚Äã](#keyboarddismissmode "Direct link to keyboarddismissmode")

Determines whether the keyboard gets dismissed in response to a drag.

* `'none'`, drags do not dismiss the keyboard.
* `'on-drag'`, the keyboard is dismissed when a drag begins.

**iOS Only**

* `'interactive'`, the keyboard is dismissed interactively with the drag and moves in synchrony with the touch, dragging upwards cancels the dismissal. On Android this is not supported and it will have the same behavior as `'none'`.

| Type                                                                                 | Default  |
| ------------------------------------------------------------------------------------ | -------- |
| enum(`'none'`, `'on-drag'`)Android***enum(`'none'`, `'on-drag'`, `'interactive'`)iOS | `'none'` |

***

### `keyboardShouldPersistTaps`[‚Äã](#keyboardshouldpersisttaps "Direct link to keyboardshouldpersisttaps")

Determines when the keyboard should stay visible after a tap.

* `'never'` tapping outside of the focused text input when the keyboard is up dismisses the keyboard. When this happens, children won't receive the tap.
* `'always'`, the keyboard will not dismiss automatically, and the scroll view will not catch taps, but children of the scroll view can catch taps.
* `'handled'`, the keyboard will not dismiss automatically when the tap was handled by children of the scroll view (or captured by an ancestor).
* `false`, ***deprecated***, use `'never'` instead
* `true`, ***deprecated***, use `'always'` instead

| Type                                                      | Default   |
| --------------------------------------------------------- | --------- |
| enum(`'always'`, `'never'`, `'handled'`, `false`, `true`) | `'never'` |

***

### `maintainVisibleContentPosition`[‚Äã](#maintainvisiblecontentposition "Direct link to maintainvisiblecontentposition")

When set, the scroll view will adjust the scroll position so that the first child that is currently visible and at or beyond `minIndexForVisible` will not change position. This is useful for lists that are loading content in both directions, e.g. a chat thread, where new messages coming in might otherwise cause the scroll position to jump. A value of 0 is common, but other values such as 1 can be used to skip loading spinners or other content that should not maintain position.

The optional `autoscrollToTopThreshold` can be used to make the content automatically scroll to the top after making the adjustment if the user was within the threshold of the top before the adjustment was made. This is also useful for chat-like applications where you want to see new messages scroll into place, but not if the user has scrolled up a ways and it would be disruptive to scroll a bunch.

Caveat 1: Reordering elements in the scrollview with this enabled will probably cause jumpiness and jank. It can be fixed, but there are currently no plans to do so. For now, don't re-order the content of any ScrollViews or Lists that use this feature.

Caveat 2: This uses `contentOffset` and `frame.origin` in native code to compute visibility. Occlusion, transforms, and other complexity won't be taken into account as to whether content is "visible" or not.

| Type                                                                     |
| ------------------------------------------------------------------------ |
| object: `{minIndexForVisible: number, autoscrollToTopThreshold: number}` |

***

### `maximumZoomScale`iOS[‚Äã](#maximumzoomscale-ios "Direct link to maximumzoomscale-ios")

The maximum allowed zoom scale.

| Type   | Default |
| ------ | ------- |
| number | `1.0`   |

***

### `minimumZoomScale`iOS[‚Äã](#minimumzoomscale-ios "Direct link to minimumzoomscale-ios")

The minimum allowed zoom scale.

| Type   | Default |
| ------ | ------- |
| number | `1.0`   |

***

### `nestedScrollEnabled`Android[‚Äã](#nestedscrollenabled-android "Direct link to nestedscrollenabled-android")

Enables nested scrolling for Android API level 21+.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `onContentSizeChange`[‚Äã](#oncontentsizechange "Direct link to oncontentsizechange")

Called when scrollable content view of the ScrollView changes.

The handler function will receive two parameters: the content width and content height `(contentWidth, contentHeight)`.

It's implemented using onLayout handler attached to the content container which this ScrollView renders.

| Type     |
| -------- |
| function |

***

### `onMomentumScrollBegin`[‚Äã](#onmomentumscrollbegin "Direct link to onmomentumscrollbegin")

Called when the momentum scroll starts (scroll which occurs as the ScrollView starts gliding).

| Type     |
| -------- |
| function |

***

### `onMomentumScrollEnd`[‚Äã](#onmomentumscrollend "Direct link to onmomentumscrollend")

Called when the momentum scroll ends (scroll which occurs as the ScrollView glides to a stop).

| Type     |
| -------- |
| function |

***

### `onScroll`[‚Äã](#onscroll "Direct link to onscroll")

Fires at most once per frame during scrolling. The event has the following shape (all values with unspecified type are numbers):

js

```
{
  nativeEvent: {
    contentInset: {bottom, left, right, top},
    contentOffset: {x, y},
    contentSize: {height, width},
    layoutMeasurement: {height, width},
    velocity: {x, y},
    responderIgnoreScroll: boolean,
    zoomScale,
    // iOS only
    targetContentOffset: {x, y}
  }
}
```

| Type     |
| -------- |
| function |

***

### `onScrollBeginDrag`[‚Äã](#onscrollbegindrag "Direct link to onscrollbegindrag")

Called when the user begins to drag the scroll view.

| Type     |
| -------- |
| function |

***

### `onScrollEndDrag`[‚Äã](#onscrollenddrag "Direct link to onscrollenddrag")

Called when the user stops dragging the scroll view and it either stops or begins to glide.

| Type     |
| -------- |
| function |

***

### `onScrollToTop`iOS[‚Äã](#onscrolltotop-ios "Direct link to onscrolltotop-ios")

Fires when the scroll view scrolls to top after the status bar has been tapped.

| Type     |
| -------- |
| function |

***

### `overScrollMode`Android[‚Äã](#overscrollmode-android "Direct link to overscrollmode-android")

Used to override default value of overScroll mode.

Possible values:

* `'auto'` - Allow a user to over-scroll this view only if the content is large enough to meaningfully scroll.
* `'always'` - Always allow a user to over-scroll this view.
* `'never'` - Never allow a user to over-scroll this view.

| Type                                  | Default  |
| ------------------------------------- | -------- |
| enum(`'auto'`, `'always'`, `'never'`) | `'auto'` |

***

### `pagingEnabled`[‚Äã](#pagingenabled "Direct link to pagingenabled")

When true, the scroll view stops on multiples of the scroll view's size when scrolling. This can be used for horizontal pagination.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `persistentScrollbar`Android[‚Äã](#persistentscrollbar-android "Direct link to persistentscrollbar-android")

Causes the scrollbars not to turn transparent when they are not in use.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `pinchGestureEnabled`iOS[‚Äã](#pinchgestureenabled-ios "Direct link to pinchgestureenabled-ios")

When true, ScrollView allows use of pinch gestures to zoom in and out.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `refreshControl`[‚Äã](#refreshcontrol "Direct link to refreshcontrol")

A RefreshControl component, used to provide pull-to-refresh functionality for the ScrollView. Only works for vertical ScrollViews (`horizontal` prop must be `false`).

See [RefreshControl](/docs/refreshcontrol.md).

| Type    |
| ------- |
| element |

***

### `removeClippedSubviews`[‚Äã](#removeclippedsubviews "Direct link to removeclippedsubviews")

warning

Using this property may lead to bugs (missing content) in some circumstances - use at your own risk.

When `true`, offscreen child views are removed from their native backing superview when offscreen. This may improve scroll performance for large lists. On Android the default value is `true`.

| Type    |
| ------- |
| boolean |

***

### `scrollEnabled`[‚Äã](#scrollenabled "Direct link to scrollenabled")

When false, the view cannot be scrolled via touch interaction.

Note that the view can always be scrolled by calling `scrollTo`.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `scrollEventThrottle`[‚Äã](#scrolleventthrottle "Direct link to scrolleventthrottle")

Limits how often scroll events will be fired while scrolling, specified as a time interval in ms. This may be useful when expensive work is performed in response to scrolling. Values ‚â§ `16` will disable throttling, regardless of the refresh rate of the device.

| Type   | Default |
| ------ | ------- |
| number | `0`     |

***

### `scrollIndicatorInsets`iOS[‚Äã](#scrollindicatorinsets-ios "Direct link to scrollindicatorinsets-ios")

The amount by which the scroll view indicators are inset from the edges of the scroll view. This should normally be set to the same value as the `contentInset`.

| Type                                                                 | Default                                  |
| -------------------------------------------------------------------- | ---------------------------------------- |
| object: `{top: number, left: number, bottom: number, right: number}` | `{top: 0, left: 0, bottom: 0, right: 0}` |

***

### `scrollPerfTag`Android[‚Äã](#scrollperftag-android "Direct link to scrollperftag-android")

Tag used to log scroll performance on this scroll view. Will force momentum events to be turned on (see sendMomentumEvents). This doesn't do anything out of the box and you need to implement a custom native FpsListener for it to be useful.

| Type   |
| ------ |
| string |

***

### `scrollToOverflowEnabled`iOS[‚Äã](#scrolltooverflowenabled-ios "Direct link to scrolltooverflowenabled-ios")

When `true`, the scroll view can be programmatically scrolled beyond its content size.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `scrollsToTop`iOS[‚Äã](#scrollstotop-ios "Direct link to scrollstotop-ios")

When `true`, the scroll view scrolls to top when the status bar is tapped.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `showsHorizontalScrollIndicator`[‚Äã](#showshorizontalscrollindicator "Direct link to showshorizontalscrollindicator")

When `true`, shows a horizontal scroll indicator.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `showsVerticalScrollIndicator`[‚Äã](#showsverticalscrollindicator "Direct link to showsverticalscrollindicator")

When `true`, shows a vertical scroll indicator.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `snapToAlignment`[‚Äã](#snaptoalignment "Direct link to snaptoalignment")

When `snapToInterval` is set, `snapToAlignment` will define the relationship of the snapping to the scroll view.

Possible values:

* `'start'` will align the snap at the left (horizontal) or top (vertical).
* `'center'` will align the snap in the center.
* `'end'` will align the snap at the right (horizontal) or bottom (vertical).

| Type                                 | Default   |
| ------------------------------------ | --------- |
| enum(`'start'`, `'center'`, `'end'`) | `'start'` |

***

### `snapToEnd`[‚Äã](#snaptoend "Direct link to snaptoend")

Use in conjunction with `snapToOffsets`. By default, the end of the list counts as a snap offset. Set `snapToEnd` to false to disable this behavior and allow the list to scroll freely between its end and the last `snapToOffsets` offset.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `snapToInterval`[‚Äã](#snaptointerval "Direct link to snaptointerval")

When set, causes the scroll view to stop at multiples of the value of `snapToInterval`. This can be used for paginating through children that have lengths smaller than the scroll view. Typically used in combination with `snapToAlignment` and `decelerationRate="fast"`. Overrides less configurable `pagingEnabled` prop.

| Type   |
| ------ |
| number |

***

### `snapToOffsets`[‚Äã](#snaptooffsets "Direct link to snaptooffsets")

When set, causes the scroll view to stop at the defined offsets. This can be used for paginating through variously sized children that have lengths smaller than the scroll view. Typically used in combination with `decelerationRate="fast"`. Overrides less configurable `pagingEnabled` and `snapToInterval` props.

| Type            |
| --------------- |
| array of number |

***

### `snapToStart`[‚Äã](#snaptostart "Direct link to snaptostart")

Use in conjunction with `snapToOffsets`. By default, the beginning of the list counts as a snap offset. Set `snapToStart` to `false` to disable this behavior and allow the list to scroll freely between its start and the first `snapToOffsets` offset.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `stickyHeaderHiddenOnScroll`[‚Äã](#stickyheaderhiddenonscroll "Direct link to stickyheaderhiddenonscroll")

When set to `true`, sticky header will be hidden when scrolling down the list, and it will dock at the top of the list when scrolling up.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `stickyHeaderIndices`[‚Äã](#stickyheaderindices "Direct link to stickyheaderindices")

An array of child indices determining which children get docked to the top of the screen when scrolling. For example, passing `stickyHeaderIndices={[0]}` will cause the first child to be fixed to the top of the scroll view. You can also use like \[x,y,z] to make multiple items sticky when they are at the top. This property is not supported in conjunction with `horizontal={true}`.

| Type            |
| --------------- |
| array of number |

***

### `zoomScale`iOS[‚Äã](#zoomscale-ios "Direct link to zoomscale-ios")

The current scale of the scroll view content.

| Type   | Default |
| ------ | ------- |
| number | `1.0`   |

***

## Methods[‚Äã](#methods "Direct link to Methods")

### `flashScrollIndicators()`[‚Äã](#flashscrollindicators "Direct link to flashscrollindicators")

tsx

```
flashScrollIndicators();
```

Displays the scroll indicators momentarily.

***

### `scrollTo()`[‚Äã](#scrollto "Direct link to scrollto")

tsx

```
scrollTo(
  options?: {x?: number, y?: number, animated?: boolean} | number,
  deprecatedX?: number,
  deprecatedAnimated?: boolean,
);
```

Scrolls to a given x, y offset, either immediately, with a smooth animation.

**Example:**

`scrollTo({x: 0, y: 0, animated: true})`

note

The weird function signature is due to the fact that, for historical reasons, the function also accepts separate arguments as an alternative to the options object. This is deprecated due to ambiguity (y before x), and SHOULD NOT BE USED.

***

### `scrollToEnd()`[‚Äã](#scrolltoend "Direct link to scrolltoend")

tsx

```
scrollToEnd(options?: {animated?: boolean});
```

If this is a vertical ScrollView scrolls to the bottom. If this is a horizontal ScrollView scrolls to the right.

Use `scrollToEnd({animated: true})` for smooth animated scrolling, `scrollToEnd({animated: false})` for immediate scrolling. If no options are passed, `animated` defaults to `true`.


---

# SectionList

A performant interface for rendering sectioned lists, supporting the most handy features:

* Fully cross-platform.
* Configurable viewability callbacks.
* List header support.
* List footer support.
* Item separator support.
* Section header support.
* Section separator support.
* Heterogeneous data and item rendering support.
* Pull to Refresh.
* Scroll loading.

If you don't need section support and want a simpler interface, use [`<FlatList>`](/docs/flatlist.md).

## Example[‚Äã](#example "Direct link to Example")

This is a convenience wrapper around [`<VirtualizedList>`](/docs/virtualizedlist.md), and thus inherits its props (as well as those of [`<ScrollView>`](/docs/scrollview.md)) that aren't explicitly listed here, along with the following caveats:

* Internal state is not preserved when content scrolls out of the render window. Make sure all your data is captured in the item data or external stores like Flux, Redux, or Relay.
* This is a `PureComponent` which means that it will not re-render if `props` remain shallow-equal. Make sure that everything your `renderItem` function depends on is passed as a prop (e.g. `extraData`) that is not `===` after updates, otherwise your UI may not update on changes. This includes the `data` prop and parent component state.
* In order to constrain memory and enable smooth scrolling, content is rendered asynchronously offscreen. This means it's possible to scroll faster than the fill rate and momentarily see blank content. This is a tradeoff that can be adjusted to suit the needs of each application, and we are working on improving it behind the scenes.
* By default, the list looks for a `key` prop on each item and uses that for the React key. Alternatively, you can provide a custom `keyExtractor` prop.

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [VirtualizedList Props](/docs/virtualizedlist.md#props)[‚Äã](#virtualizedlist-props "Direct link to virtualizedlist-props")

Inherits [VirtualizedList Props](/docs/virtualizedlist.md#props).

***

### Require&#x64;**`renderItem`**[‚Äã](#requiredrenderitem "Direct link to requiredrenderitem")

Default renderer for every item in every section. Can be over-ridden on a per-section basis. Should return a React element.

| Type     |
| -------- |
| function |

The render function will be passed an object with the following keys:

* 'item' (object) - the item object as specified in this section's `data` key

* 'index' (number) - Item's index within the section.

* 'section' (object) - The full section object as specified in `sections`.

* 'separators' (object) - An object with the following keys:

  <!-- -->

  * 'highlight' (function) - `() => void`

  * 'unhighlight' (function) - `() => void`

  * 'updateProps' (function) - `(select, newProps) => void`

    * 'select' (enum) - possible values are 'leading', 'trailing'
    * 'newProps' (object)

***

### Require&#x64;**`sections`**[‚Äã](#requiredsections "Direct link to requiredsections")

The actual data to render, akin to the `data` prop in [`FlatList`](/docs/flatlist.md).

| Type                                              |
| ------------------------------------------------- |
| array of [Section](/docs/sectionlist.md#section)s |

***

### `extraData`[‚Äã](#extradata "Direct link to extradata")

A marker property for telling the list to re-render (since it implements `PureComponent`). If any of your `renderItem`, Header, Footer, etc. functions depend on anything outside of the `data` prop, stick it here and treat it immutably.

| Type |
| ---- |
| any  |

***

### `initialNumToRender`[‚Äã](#initialnumtorender "Direct link to initialnumtorender")

How many items to render in the initial batch. This should be enough to fill the screen but not much more. Note these items will never be unmounted as part of the windowed rendering in order to improve perceived performance of scroll-to-top actions.

| Type   | Default |
| ------ | ------- |
| number | `10`    |

***

### `inverted`[‚Äã](#inverted "Direct link to inverted")

Reverses the direction of scroll. Uses scale transforms of -1.

| Type    | Default |
| ------- | ------- |
| boolean | `false` |

***

### `ItemSeparatorComponent`[‚Äã](#itemseparatorcomponent "Direct link to itemseparatorcomponent")

Rendered in between each item, but not at the top or bottom. By default, `highlighted`, `section`, and `[leading/trailing][Item/Section]` props are provided. `renderItem` provides `separators.highlight`/`unhighlight` which will update the `highlighted` prop, but you can also add custom props with `separators.updateProps`. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type                         |
| ---------------------------- |
| component, function, element |

***

### `keyExtractor`[‚Äã](#keyextractor "Direct link to keyextractor")

Used to extract a unique key for a given item at the specified index. Key is used for caching and as the React key to track item re-ordering. The default extractor checks `item.key`, then `item.id`, and then falls back to using the index, like React does. Note that this sets keys for each item, but each overall section still needs its own key.

| Type                                    |
| --------------------------------------- |
| (item: object, index: number) => string |

***

### `ListEmptyComponent`[‚Äã](#listemptycomponent "Direct link to listemptycomponent")

Rendered when the list is empty. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type               |
| ------------------ |
| component, element |

***

### `ListFooterComponent`[‚Äã](#listfootercomponent "Direct link to listfootercomponent")

Rendered at the very end of the list. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type               |
| ------------------ |
| component, element |

***

### `ListHeaderComponent`[‚Äã](#listheadercomponent "Direct link to listheadercomponent")

Rendered at the very beginning of the list. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type               |
| ------------------ |
| component, element |

***

### `onRefresh`[‚Äã](#onrefresh "Direct link to onrefresh")

If provided, a standard RefreshControl will be added for "Pull to Refresh" functionality. Make sure to also set the `refreshing` prop correctly. To offset the RefreshControl from the top (e.g. by 100 pts), use `progressViewOffset={100}`.

| Type     |
| -------- |
| function |

***

### `onViewableItemsChanged`[‚Äã](#onviewableitemschanged "Direct link to onviewableitemschanged")

Called when the viewability of rows changes, as defined by the `viewabilityConfig` prop.

| Type                                                                     |
| ------------------------------------------------------------------------ |
| `(callback: {changed: ViewToken[], viewableItems: ViewToken[]}) => void` |

***

### `refreshing`[‚Äã](#refreshing "Direct link to refreshing")

Set this true while waiting for new data from a refresh.

| Type    | Default |
| ------- | ------- |
| boolean | `false` |

***

### `removeClippedSubviews`[‚Äã](#removeclippedsubviews "Direct link to removeclippedsubviews")

warning

Using this property may lead to bugs (missing content) in some circumstances - use at your own risk.

When `true`, offscreen child views are removed from their native backing superview when offscreen. This may improve scroll performance for large lists. On Android the default value is `true`.

| Type    |
| ------- |
| boolean |

***

### `renderSectionFooter`[‚Äã](#rendersectionfooter "Direct link to rendersectionfooter")

Rendered at the bottom of each section.

| Type                                            |
| ----------------------------------------------- |
| `(info: {section: Section}) => element ÔΩú null` |

***

### `renderSectionHeader`[‚Äã](#rendersectionheader "Direct link to rendersectionheader")

Rendered at the top of each section. These stick to the top of the `ScrollView` by default on iOS. See `stickySectionHeadersEnabled`.

| Type                                            |
| ----------------------------------------------- |
| `(info: {section: Section}) => element ÔΩú null` |

***

### `SectionSeparatorComponent`[‚Äã](#sectionseparatorcomponent "Direct link to sectionseparatorcomponent")

Rendered at the top and bottom of each section (note this is different from `ItemSeparatorComponent` which is only rendered between items). These are intended to separate sections from the headers above and below and typically have the same highlight response as `ItemSeparatorComponent`. Also receives `highlighted`, `[leading/trailing][Item/Section]`, and any custom props from `separators.updateProps`.

| Type               |
| ------------------ |
| component, element |

***

### `stickySectionHeadersEnabled`[‚Äã](#stickysectionheadersenabled "Direct link to stickysectionheadersenabled")

Makes section headers stick to the top of the screen until the next one pushes it off. Only enabled by default on iOS because that is the platform standard there.

| Type    | Default                    |
| ------- | -------------------------- |
| boolean | `false`Android***`true`iOS |

## Methods[‚Äã](#methods "Direct link to Methods")

### `flashScrollIndicators()`iOS[‚Äã](#flashscrollindicators-ios "Direct link to flashscrollindicators-ios")

tsx

```
flashScrollIndicators();
```

Displays the scroll indicators momentarily.

***

### `recordInteraction()`[‚Äã](#recordinteraction "Direct link to recordinteraction")

tsx

```
recordInteraction();
```

Tells the list an interaction has occurred, which should trigger viewability calculations, e.g. if `waitForInteractions` is true and the user has not scrolled. This is typically called by taps on items or by navigation actions.

***

### `scrollToLocation()`[‚Äã](#scrolltolocation "Direct link to scrolltolocation")

tsx

```
scrollToLocation(params: SectionListScrollParams);
```

Scrolls to the item at the specified `sectionIndex` and `itemIndex` (within the section) positioned in the viewable area such that `viewPosition` set to `0` places it at the top (and may be covered by a sticky header), `1` at the bottom, and `0.5` centered in the middle.

note

You cannot scroll to locations outside the render window without specifying the `getItemLayout` or `onScrollToIndexFailed` prop.

**Parameters:**

| Name           | Type   |
| -------------- | ------ |
| paramsRequired | object |

Valid `params` keys are:

* 'animated' (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.
* 'itemIndex' (number) - Index within section for the item to scroll to. Required.
* 'sectionIndex' (number) - Index for section that contains the item to scroll to. Required.
* 'viewOffset' (number) - A fixed number of pixels to offset the final target position, e.g. to compensate for sticky headers.
* 'viewPosition' (number) - A value of `0` places the item specified by index at the top, `1` at the bottom, and `0.5` centered in the middle.

## Type Definitions[‚Äã](#type-definitions "Direct link to Type Definitions")

### Section[‚Äã](#section "Direct link to Section")

An object that identifies the data to be rendered for a given section.

| Type |
| ---- |
| any  |

**Properties:**

| Name                   | Type               | Description                                                                                                                                                                  |
| ---------------------- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| dataRequired           | array              | The data for rendering items in this section. Array of objects, much like [`FlatList`'s data prop](/docs/flatlist.md#required-data).                                         |
| key                    | string             | Optional key to keep track of section re-ordering. If you don't plan on re-ordering sections, the array index will be used by default.                                       |
| renderItem             | function           | Optionally define an arbitrary item renderer for this section, overriding the default [`renderItem`](/docs/sectionlist.md#renderitem) for the list.                          |
| ItemSeparatorComponent | component, element | Optionally define an arbitrary item separator for this section, overriding the default [`ItemSeparatorComponent`](/docs/sectionlist.md#itemseparatorcomponent) for the list. |
| keyExtractor           | function           | Optionally define an arbitrary key extractor for this section, overriding the default [`keyExtractor`](/docs/sectionlist.md#keyextractor).                                   |


---

# Security

Security is often overlooked when building apps. It is true that it is impossible to build software that is completely impenetrable‚Äîwe‚Äôve yet to invent a completely impenetrable lock (bank vaults do, after all, still get broken into). However, the probability of falling victim to a malicious attack or being exposed for a security vulnerability is inversely proportional to the effort you‚Äôre willing to put in to protecting your application against any such eventuality. Although an ordinary padlock is pickable, it is still much harder to get past than a cabinet hook!

![ ](/docs/assets/d_security_chart.svg)

In this guide, you will learn about best practices for storing sensitive information, authentication, network security, and tools that will help you secure your app. This is not a preflight checklist‚Äîit is a catalogue of options, each of which will help further protect your app and users.

## Storing Sensitive Info[‚Äã](#storing-sensitive-info "Direct link to Storing Sensitive Info")

Never store sensitive API keys in your app code. Anything included in your code could be accessed in plain text by anyone inspecting the app bundle. Tools like [react-native-dotenv](https://github.com/goatandsheep/react-native-dotenv) and [react-native-config](https://github.com/luggit/react-native-config/) are great for adding environment-specific variables like API endpoints, but they should not be confused with server-side environment variables, which can often contain secrets and API keys.

If you must have an API key or a secret to access some resource from your app, the most secure way to handle this would be to build an orchestration layer between your app and the resource. This could be a serverless function (e.g. using AWS Lambda or Google Cloud Functions) which can forward the request with the required API key or secret. Secrets in server side code cannot be accessed by the API consumers the same way secrets in your app code can.

**For persisted user data, choose the right type of storage based on its sensitivity.** As your app is used, you‚Äôll often find the need to save data on the device, whether to support your app being used offline, cut down on network requests or save your user‚Äôs access token between sessions so they wouldn‚Äôt have to re-authenticate each time they use the app.

info

**Persisted vs unpersisted** ‚Äî persisted data is written to the device‚Äôs disk, which lets the data be read by your app across application launches without having to do another network request to fetch it or asking the user to re-enter it. But this also can make that data more vulnerable to being accessed by attackers. Unpersisted data is never written to disk‚Äîso there's no data to access!

### Async Storage[‚Äã](#async-storage "Direct link to Async Storage")

[Async Storage](https://github.com/react-native-async-storage/async-storage) is a community-maintained module for React Native that provides an asynchronous, unencrypted, key-value store. Async Storage is not shared between apps: every app has its own sandbox environment and has no access to data from other apps.

| **Do** use async storage when...              | **Don't** use async storage for... |
| --------------------------------------------- | ---------------------------------- |
| Persisting non-sensitive data across app runs | Token storage                      |
| Persisting Redux state                        | Secrets                            |
| Persisting GraphQL state                      |                                    |
| Storing global app-wide variables             |                                    |

#### Developer Notes[‚Äã](#developer-notes "Direct link to Developer Notes")

* Web

note

Async Storage is the React Native equivalent of Local Storage from the web

### Secure Storage[‚Äã](#secure-storage "Direct link to Secure Storage")

React Native does not come bundled with any way of storing sensitive data. However, there are pre-existing solutions for Android and iOS platforms.

#### iOS - Keychain Services[‚Äã](#ios---keychain-services "Direct link to iOS - Keychain Services")

[Keychain Services](https://developer.apple.com/documentation/security/keychain_services) allows you to securely store small chunks of sensitive info for the user. This is an ideal place to store certificates, tokens, passwords, and any other sensitive information that doesn‚Äôt belong in Async Storage.

#### Android - Secure Shared Preferences[‚Äã](#android---secure-shared-preferences "Direct link to Android - Secure Shared Preferences")

[Shared Preferences](https://developer.android.com/reference/android/content/SharedPreferences) is the Android equivalent for a persistent key-value data store. **Data in Shared Preferences is not encrypted by default**, but [Encrypted Shared Preferences](https://developer.android.com/topic/security/data) wraps the Shared Preferences class for Android, and automatically encrypts keys and values.

#### Android - Keystore[‚Äã](#android---keystore "Direct link to Android - Keystore")

The [Android Keystore](https://developer.android.com/training/articles/keystore) system lets you store cryptographic keys in a container to make it more difficult to extract from the device.

In order to use iOS Keychain services or Android Secure Shared Preferences, you can either write a bridge yourself or use a library which wraps them for you and provides a unified API at your own risk. Some libraries to consider:

* [expo-secure-store](https://docs.expo.dev/versions/latest/sdk/securestore/)
* [react-native-keychain](https://github.com/oblador/react-native-keychain)

Caution

**Be mindful of unintentionally storing or exposing sensitive info.** This could happen accidentally, for example saving sensitive form data in redux state and persisting the whole state tree in Async Storage. Or sending user tokens and personal info to an application monitoring service such as Sentry or Crashlytics.

## Authentication and Deep Linking[‚Äã](#authentication-and-deep-linking "Direct link to Authentication and Deep Linking")

![ ](/docs/assets/d_security_deep-linking.svg)

Mobile apps have a unique vulnerability that is non-existent in the web: **deep linking**. Deep linking is a way of sending data directly to a native application from an outside source. A deep link looks like `app://` where `app` is your app scheme and anything following the // could be used internally to handle the request.

For example, if you were building an ecommerce app, you could use `app://products/1` to deep link to your app and open the product detail page for a product with id 1. You can think of these kind of like URLs on the web, but with one crucial distinction:

Deep links are not secure and you should never send any sensitive information in them.

The reason deep links are not secure is because there is no centralized method of registering URL schemes. As an application developer, you can use almost any url scheme you choose by [configuring it in Xcode](https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content/defining_a_custom_url_scheme_for_your_app) for iOS or [adding an intent on Android](https://developer.android.com/training/app-links/deep-linking).

There is nothing stopping a malicious application from hijacking your deep link by also registering to the same scheme and then obtaining access to the data your link contains. Sending something like `app://products/1` is not harmful, but sending tokens is a security concern.

When the operating system has two or more applications to choose from when opening a link, Android will show the user a [Disambiguation dialog](https://developer.android.com/training/basics/intents/sending#disambiguation-dialog) and ask them to choose which application to use to open the link. On iOS however, the operating system will make the choice for you, so the user will be blissfully unaware. Apple has made steps to address this issue in later iOS versions (iOS 11) where they instituted a first-come-first-served principle, although this vulnerability could still be exploited in different ways which you can read more about [here](https://thehackernews.com/2019/07/ios-custom-url-scheme.html). Using [universal links](https://developer.apple.com/ios/universal-links/) will allow linking to content within your app securely in iOS.

### OAuth2 and Redirects[‚Äã](#oauth2-and-redirects "Direct link to OAuth2 and Redirects")

The OAuth2 authentication protocol is incredibly popular nowadays, prided as the most complete and secure protocol around. The OpenID Connect protocol is also based on this. In OAuth2, the user is asked to authenticate via a third party. On successful completion, this third party redirects back to the requesting application with a verification code which can be exchanged for a JWT ‚Äî a [JSON Web Token](https://jwt.io/introduction/). JWT is an open standard for securely transmitting information between parties on the web.

On the web, this redirect step is secure, because URLs on the web are guaranteed to be unique. This is not true for apps because, as mentioned earlier, there is no centralized method of registering URL schemes! In order to address this security concern, an additional check must be added in the form of PKCE.

[PKCE](https://oauth.net/2/pkce/), pronounced ‚ÄúPixy‚Äù stands for Proof of Key Code Exchange, and is an extension to the OAuth 2 spec. This involves adding an additional layer of security which verifies that the authentication and token exchange requests come from the same client. PKCE uses the [SHA 256](https://www.movable-type.co.uk/scripts/sha256.html) Cryptographic Hash Algorithm. SHA 256 creates a unique ‚Äúsignature‚Äù for a text or file of any size, but it is:

* Always the same length regardless of the input file
* Guaranteed to always produce the same result for the same input
* One way (that is, you can‚Äôt reverse engineer it to reveal the original input)

Now you have two values:

* **code\_verifier** - a large random string generated by the client
* **code\_challenge** - the SHA 256 of the code\_verifier

During the initial `/authorize` request, the client also sends the `code_challenge` for the `code_verifier` it keeps in memory. After the authorize request has returned correctly, the client also sends the `code_verifier` that was used to generate the `code_challenge`. The IDP will then calculate the `code_challenge`, see if it matches what was set on the very first `/authorize` request, and only send the access token if the values match.

This guarantees that only the application that triggered the initial authorization flow would be able to successfully exchange the verification code for a JWT. So even if a malicious application gets access to the verification code, it will be useless on its own. To see this in action, check out [this example](https://aaronparecki.com/oauth-2-simplified/#mobile-apps).

A library to consider for native OAuth is [react-native-app-auth](https://github.com/FormidableLabs/react-native-app-auth). React-native-app-auth is an SDK for communicating with OAuth2 providers. It wraps the native [AppAuth-iOS](https://github.com/openid/AppAuth-iOS) and [AppAuth-Android](https://github.com/openid/AppAuth-Android) libraries and can support PKCE.

note

`react-native-app-auth` can support PKCE only if your Identity Provider supports it.

![OAuth2 with PKCE](/assets/images/diagram_pkce-e0b4a829176ac05d07b0bcec73994985.svg)

## Network Security[‚Äã](#network-security "Direct link to Network Security")

Your APIs should always use [SSL encryption](https://www.ssl.com/faqs/faq-what-is-ssl/). SSL encryption protects against the requested data being read in plain text between when it leaves the server and before it reaches the client. You‚Äôll know the endpoint is secure, because it starts with `https://` instead of `http://`.

### SSL Pinning[‚Äã](#ssl-pinning "Direct link to SSL Pinning")

Using https endpoints could still leave your data vulnerable to interception. With https, the client will only trust the server if it can provide a valid certificate that is signed by a trusted Certificate Authority that is pre-installed on the client. An attacker could take advantage of this by installing a malicious root CA certificate to the user‚Äôs device, so the client would trust all certificates that are signed by the attacker. Thus, relying on certificates alone could still leave you vulnerable to a [man-in-the-middle attack](https://en.wikipedia.org/wiki/Man-in-the-middle_attack).

**SSL pinning** is a technique that can be used on the client side to avoid this attack. It works by embedding (or pinning) a list of trusted certificates to the client during development, so that only the requests signed with one of the trusted certificates will be accepted, and any self-signed certificates will not be.

Caution

When using SSL pinning, you should be mindful of certificate expiry. Certificates expire every 1-2 years and when one does, it‚Äôll need to be updated in the app as well as on the server. As soon as the certificate on the server has been updated, any apps with the old certificate embedded in them will cease to work.

## Summary[‚Äã](#summary "Direct link to Summary")

There is no bulletproof way to handle security, but with conscious effort and diligence, it is possible to significantly reduce the likelihood of a security breach in your application. Invest in security proportional to the sensitivity of the data stored in your application, the number of users, and the damage a hacker could do when gaining access to their account. And remember: it‚Äôs significantly harder to access information that was never requested in the first place.


---

# ‚ùå SegmentedControlIOS

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=segmentedcontrol) instead.

***


---

# Set Up Your Environment

In this guide, you'll learn how to set up your environment, so that you can run your project with Android Studio and Xcode. This will allow you to develop with Android emulators and iOS simulators, build your app locally, and more.

info

This guide requires Android Studio or Xcode. If you already have one of these programs installed, you should be able to get up and running within a few minutes. If they are not installed, you should expect to spend about an hour installing and configuring them.

Is setting up my environment required?

Setting up your environment is not required if you're using a [Framework](/architecture/glossary.md#react-native-framework). With a React Native Framework, you don't need to set up Android Studio or Xcode as it will take care of building the native app for you

If you have constraints that prevent you from using a Framework, or you'd like to write your own Framework, then setting up your local environment is a requirement. After your environment is set up, learn how to [get started without a framework](/docs/getting-started-without-a-framework.md).

#### Development OS[‚Äã](#development-os "Direct link to Development OS")

* macOS
* Windows
* Linux

#### Target OS[‚Äã](#target-os "Direct link to Target OS")

* Android
* iOS

## Installing dependencies[‚Äã](#installing-dependencies "Direct link to Installing dependencies")

You will need Node, Watchman, the React Native command line interface, a JDK, and Android Studio.

While you can use any editor of your choice to develop your app, you will need to install Android Studio in order to set up the necessary tooling to build your React Native app for Android.

### Node & Watchman

We recommend installing Node and Watchman using [Homebrew](https://brew.sh/). Run the following commands in a Terminal after installing Homebrew:

shell

```
brew install node
brew install watchman
```

If you have already installed Node on your system, make sure it is Node 20.19.4 or newer.

[Watchman](https://facebook.github.io/watchman) is a tool by Facebook for watching changes in the filesystem. It is highly recommended you install it for better performance.

### Java Development Kit

We recommend installing the OpenJDK distribution called Azul **Zulu** using [Homebrew](https://brew.sh/). Run the following commands in a Terminal after installing Homebrew:

shell

```
brew install --cask zulu@17

# Get path to where cask was installed to find the JDK installer
brew info --cask zulu@17

# ==> zulu@17: <version number>
# https://www.azul.com/downloads/
# Installed
# /opt/homebrew/Caskroom/zulu@17/<version number> (185.8MB) (note that the path is /usr/local/Caskroom on non-Apple Silicon Macs)
# Installed using the formulae.brew.sh API on 2024-06-06 at 10:00:00

# Navigate to the folder
open /opt/homebrew/Caskroom/zulu@17/<version number> # or /usr/local/Caskroom/zulu@17/<version number>
```

After opening Finder, double click the `Double-Click to Install Azul Zulu JDK 17.pkg` package to install the JDK.

After the JDK installation, add or update your `JAVA_HOME` environment variable in `~/.zshrc` (or in `~/.bash_profile`).

If you used above steps, JDK will likely be located at `/Library/Java/JavaVirtualMachines/zulu-17.jdk/Contents/Home`:

shell

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-17.jdk/Contents/Home
```

The Zulu OpenJDK distribution offers JDKs for **both Intel and M1 Macs**. This will make sure your builds are faster on M1 Macs compared to using an Intel-based JDK.

If you have already installed JDK on your system, we recommend JDK 17. You may encounter problems using higher JDK versions.

### Android development environment

Setting up your development environment can be somewhat tedious if you're new to Android development. If you're already familiar with Android development, there are a few things you may need to configure. In either case, please make sure to carefully follow the next few steps.

#### 1. Install Android Studio

[Download and install Android Studio](https://developer.android.com/studio). While on Android Studio installation wizard, make sure the boxes next to all of the following items are checked:

* `Android SDK`
* `Android SDK Platform`
* `Android Virtual Device`

Then, click "Next" to install all of these components.

note

If the checkboxes are grayed out, you will have a chance to install these components later on.

Once setup has finalized and you're presented with the Welcome screen, proceed to the next step.

#### 2. Install the Android SDK

Android Studio installs the latest Android SDK by default. Building a React Native app with native code, however, requires the `Android 15 (VanillaIceCream)` SDK in particular. Additional Android SDKs can be installed through the SDK Manager in Android Studio.

To do that, open Android Studio, click on "More Actions" button and select "SDK Manager".

![Android Studio Welcome](/assets/images/GettingStartedAndroidStudioWelcomeMacOS-8af2dfd190d6acc795d58c7f89197dcd.png)

tip

The SDK Manager can also be found within the Android Studio "Settings" dialog, under **Languages & Frameworks** ‚Üí **Android SDK**.

Select the "SDK Platforms" tab from within the SDK Manager, then check the box next to "Show Package Details" in the bottom right corner. Look for and expand the `Android 15 (VanillaIceCream)` entry, then make sure the following items are checked:

* `Android SDK Platform 35`
* `Intel x86 Atom_64 System Image` or `Google APIs Intel x86 Atom System Image` or (for Apple M1 Silicon) `Google APIs ARM 64 v8a System Image`

Next, select the "SDK Tools" tab and check the box next to "Show Package Details" here as well. Look for and expand the "Android SDK Build-Tools" entry, then make sure that `35.0.0` is selected.

Finally, click "Apply" to download and install the Android SDK and related build tools.

#### 3. Configure the ANDROID\_HOME environment variable

The React Native tools require some environment variables to be set up in order to build apps with native code.

Add the following lines to your `~/.zprofile` or `~/.zshrc` (if you are using `bash`, then `~/.bash_profile` or `~/.bashrc`) config file:

shell

```
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools
```

Run `source ~/.zprofile` (or `source ~/.bash_profile` for `bash`) to load the config into your current shell. Verify that ANDROID\_HOME has been set by running `echo $ANDROID_HOME` and the appropriate directories have been added to your path by running `echo $PATH`.

note

Please make sure you use the correct Android SDK path. You can find the actual location of the SDK in the Android Studio "Settings" dialog, under **Languages & Frameworks** ‚Üí **Android SDK**.

## Preparing the Android device

You will need an Android device to run your React Native Android app. This can be either a physical Android device, or more commonly, you can use an Android Virtual Device which allows you to emulate an Android device on your computer.

Either way, you will need to prepare the device to run Android apps for development.

### Using a physical device

If you have a physical Android device, you can use it for development in place of an AVD by plugging it in to your computer using a USB cable and following the instructions [here](/docs/running-on-device.md).

### Using a virtual device

If you use Android Studio to open `./AwesomeProject/android`, you can see the list of available Android Virtual Devices (AVDs) by opening the "AVD Manager" from within Android Studio. Look for an icon that looks like this:

![Android Studio AVD Manager](/docs/assets/GettingStartedAndroidStudioAVD.svg)

If you have recently installed Android Studio, you will likely need to [create a new AVD](https://developer.android.com/studio/run/managing-avds.html). Select "Create Virtual Device...", then pick any Phone from the list and click "Next", then select the **VanillaIceCream** API Level 35 image.

Click "Next" then "Finish" to create your AVD. At this point you should be able to click on the green triangle button next to your AVD to launch it.

### That's it!

Congratulations! You successfully set up your development environment.

![](/docs/assets/GettingStartedCongratulations.png)

## Now what?

* If you want to add this new React Native code to an existing application, check out the [Integration guide](/docs/integration-with-existing-apps.md).
* If you're curious to learn more about React Native, check out the [Introduction to React Native](/docs/getting-started.md).

## Installing dependencies[‚Äã](#installing-dependencies "Direct link to Installing dependencies")

You will need Node, Watchman, the React Native command line interface, Xcode and CocoaPods.

While you can use any editor of your choice to develop your app, you will need to install Xcode in order to set up the necessary tooling to build your React Native app for iOS.

### Node & Watchman[‚Äã](#node--watchman "Direct link to Node & Watchman")

We recommend installing Node and Watchman using [Homebrew](https://brew.sh/). Run the following commands in a Terminal after installing Homebrew:

shell

```
brew install node
brew install watchman
```

If you have already installed Node on your system, make sure it is Node 20.19.4 or newer.

[Watchman](https://facebook.github.io/watchman) is a tool by Facebook for watching changes in the filesystem. It is highly recommended you install it for better performance.

### Xcode[‚Äã](#xcode "Direct link to Xcode")

Please use the **latest version** of Xcode.

The easiest way to install Xcode is via the [Mac App Store](https://itunes.apple.com/us/app/xcode/id497799835?mt=12). Installing Xcode will also install the iOS Simulator and all the necessary tools to build your iOS app.

#### Command Line Tools[‚Äã](#command-line-tools "Direct link to Command Line Tools")

You will also need to install the Xcode Command Line Tools. Open Xcode, then choose **Settings... (or Preferences...)** from the Xcode menu. Go to the Locations panel and install the tools by selecting the most recent version in the Command Line Tools dropdown.

![Xcode Command Line Tools](/assets/images/GettingStartedXcodeCommandLineTools-a319295928960a4458698528086e3230.png)

#### Installing an iOS Simulator in Xcode[‚Äã](#installing-an-ios-simulator-in-xcode "Direct link to Installing an iOS Simulator in Xcode")

To install a simulator, open **Xcode > Settings... (or Preferences...)** and select the **Platforms (or Components)** tab. Select a simulator with the corresponding version of iOS you wish to use.

If you are using Xcode version 14.0 or greater to install a simulator, open **Xcode > Settings > Platforms** tab, then click "+" icon and select **iOS‚Ä¶** option.

#### CocoaPods[‚Äã](#cocoapods "Direct link to CocoaPods")

[CocoaPods](https://cocoapods.org/) is one of the dependency management system available for iOS. CocoaPods is a Ruby [gem](https://en.wikipedia.org/wiki/RubyGems). You can install CocoaPods using the version of Ruby that ships with the latest version of macOS.

For more information, please visit [CocoaPods Getting Started guide](https://guides.cocoapods.org/using/getting-started.html).

### \[Optional] Configuring your environment[‚Äã](#optional-configuring-your-environment "Direct link to \[Optional] Configuring your environment")

Starting from React Native version 0.69, it is possible to configure the Xcode environment using the `.xcode.env` file provided by the template.

The `.xcode.env` file contains an environment variable to export the path to the `node` executable in the `NODE_BINARY` variable. This is the **suggested approach** to decouple the build infrastructure from the system version of `node`. You should customize this variable with your own path or your own `node` version manager, if it differs from the default.

On top of this, it's possible to add any other environment variable and to source the `.xcode.env` file in your build script phases. If you need to run script that requires some specific environment, this is the **suggested approach**: it allows to decouple the build phases from a specific environment.

info

If you are already using [NVM](https://nvm.sh/) (a command which helps you install and switch between versions of Node.js) and [zsh](https://ohmyz.sh/), you might want to move the code that initialize NVM from your `~/.zshrc` into a `~/.zshenv` file to help Xcode find your Node executable:

zsh

```
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
```

You might also want to ensure that all "shell script build phase" of your Xcode project, is using `/bin/zsh` as its shell.

### That's it!

Congratulations! You successfully set up your development environment.

![](/docs/assets/GettingStartedCongratulations.png)

## Now what?

* If you want to add this new React Native code to an existing application, check out the [Integration guide](/docs/integration-with-existing-apps.md).
* If you're curious to learn more about React Native, check out the [Introduction to React Native](/docs/getting-started.md).

#### Target OS[‚Äã](#target-os-1 "Direct link to Target OS")

* Android
* iOS

## Installing dependencies

You will need Node, the React Native command line interface, a JDK, and Android Studio.

While you can use any editor of your choice to develop your app, you will need to install Android Studio in order to set up the necessary tooling to build your React Native app for Android.

### Node, JDK

We recommend installing Node via [Chocolatey](https://chocolatey.org/install), a popular package manager for Windows.

It is recommended to use an LTS version of Node. If you want to be able to switch between different versions, you might want to install Node via [nvm-windows](https://github.com/coreybutler/nvm-windows), a Node version manager for Windows.

React Native also requires [Java SE Development Kit (JDK)](https://openjdk.java.net/projects/jdk/17/), which can be installed using Chocolatey as well.

Open an Administrator Command Prompt (right click Command Prompt and select "Run as Administrator"), then run the following command:

powershell

```
choco install -y nodejs-lts microsoft-openjdk17
```

If you have already installed Node on your system, make sure it is Node 20.19.4 or newer. If you already have a JDK on your system, we recommend JDK17. You may encounter problems using higher JDK versions.

note

You can find additional installation options on [Node's Downloads page](https://nodejs.org/en/download/).

info

If you're using the latest version of Java Development Kit, you'll need to change the Gradle version of your project so it can recognize the JDK. You can do that by going to `{project root folder}\android\gradle\wrapper\gradle-wrapper.properties` and changing the `distributionUrl` value to upgrade the Gradle version. You can check out [here the latest releases of Gradle](https://gradle.org/releases/).

### Android development environment

Setting up your development environment can be somewhat tedious if you're new to Android development. If you're already familiar with Android development, there are a few things you may need to configure. In either case, please make sure to carefully follow the next few steps.

#### 1. Install Android Studio

[Download and install Android Studio](https://developer.android.com/studio). While on Android Studio installation wizard, make sure the boxes next to all of the following items are checked:

* `Android SDK`
* `Android SDK Platform`
* `Android Virtual Device`
* If you are not already using Hyper-V: `Performance (Intel ¬Æ HAXM)` ([See here for AMD or Hyper-V](https://android-developers.googleblog.com/2018/07/android-emulator-amd-processor-hyper-v.html))

Then, click "Next" to install all of these components.

note

If the checkboxes are grayed out, you will have a chance to install these components later on.

Once setup has finalized and you're presented with the Welcome screen, proceed to the next step.

#### 2. Install the Android SDK

Android Studio installs the latest Android SDK by default. Building a React Native app with native code, however, requires the `Android 15 (VanillaIceCream)` SDK in particular. Additional Android SDKs can be installed through the SDK Manager in Android Studio.

To do that, open Android Studio, click on "More Actions" button and select "SDK Manager".

![Android Studio Welcome](/assets/images/GettingStartedAndroidStudioWelcomeWindows-8a34e703bcb79bb67f84764b04f3e05c.png)

tip

The SDK Manager can also be found within the Android Studio "Settings" dialog, under **Languages & Frameworks** ‚Üí **Android SDK**.

Select the "SDK Platforms" tab from within the SDK Manager, then check the box next to "Show Package Details" in the bottom right corner. Look for and expand the `Android 15 (VanillaIceCream)` entry, then make sure the following items are checked:

* `Android SDK Platform 35`
* `Intel x86 Atom_64 System Image` or `Google APIs Intel x86 Atom System Image`

Next, select the "SDK Tools" tab and check the box next to "Show Package Details" here as well. Look for and expand the `Android SDK Build-Tools` entry, then make sure that `35.0.0` is selected.

Finally, click "Apply" to download and install the Android SDK and related build tools.

#### 3. Configure the ANDROID\_HOME environment variable

The React Native tools require some environment variables to be set up in order to build apps with native code.

1. Open the **Windows Control Panel.**
2. Click on **User Accounts,** then click **User Accounts** again
3. Click on **Change my environment variables**
4. Click on **New\...** to create a new `ANDROID_HOME` user variable that points to the path to your Android SDK:

![ANDROID\_HOME Environment Variable](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAo0AAAClCAMAAAAOEzcNAAABwlBMVEVfosv///8AAADMzMz//7ZmAABmtv9mADqQ2///25A6ADq2ZgA6kNv/tmYAZrYFBwg6AGa2//9mAGY6AAA6kJCQ27b//9uQOgAAAGZmZjq2/7aQtpDbkDoAADoAOpDb//86OpDb/9uQOjoAOmZmOjrw8PB6enqrYAA2h87wq2AAYKvwzoc2ADaHzvDw8KtgADZgq/A6OmY6OgA6Ojo2AGCr8PBgAGAAZmbw8M6HNgBgYDYAAGCr8KuHq4c2AACHh2DOhzYANofO8PBgAADb/7Y2NofO8M6HNjYAADZmtrYANmBgNjaQOmYAeNczmf/MZgCg7v//7v9amf/B//9/mf+gq/9/3v//3v/hzv8zq//h//8zvP/BvP+gvP/h7v/B7v/h3v9azv/B3v+gzv9gNoc2NmBgNmClZgAAYGCtra3h4eHh4aBaAABaoOEzf8HhwX8zADN/weFaADPhoFrh4cF/MwAAWqAAM3/B4eEzAFqg4eEAADOgWgAzAAB/oOHBfzNaWjMAAFozWqBaoKAzMwB/MzN/f1ozMzMzM3+gWjN/oH/B4cFaAFpaM39/waB/M1qgwX9aWlozM1paMzMAM1q/v7+vTvonAAAKLUlEQVR4Aeyd17arNhBAo3EBAnZyesO39957r+n5/7/JDBouxrfiNLO89wNiNOPztJdG4jzouxUCIACsBtgI2AiAjYCNANgI/bYRABsBsBGwEUAGcRzIJ20cjkRkXL0lafZ9qi8e+GORvNDHZBpq/Dde7QPAJxn8MPDh0zYmLQHt+SUbXcR8HFpgYwfQ0R7/jI3ZjxthuLmBjcuCjibjF23MtmQ7SYfJzkhkOmfj7p7I2LL7G8PkYF8l3N0b2/qYW51NHWqlB0dbUtiPYn34JICOLuOn941m2mgcylmqJi2sjZNazUkxHBXBKIvYqK14FO3z4Nhx3UTqW6wP3QBsdJmyE8ft7WMbs62iWjhFpp7R2pOn1DaRyl4ragL1VIdYH7oCdOpP27irwlVbxFDKWEevjKmjE8d1SkvcxibQNh7jALDsKabdqY382PGQT4NSeo/2jPlZhEndlW3ag1Fh/noDB1jiC89IxOwS2Y4q5rHH2vFFhZzYrtJatXdqQ82z9OkztY11cCAy9lNMl04NfP0G4D+DAGtgI2AjADYCNgJgI2AjADYCNgJgI2DjWYDVABsBGwGwEbARABsBGwGwEbARABsBGwGwEbARABsBGwGwEQAbARsBsBGwEQAbARsB/jkbAbDxHKwpK2ljgLUEG/8+gI2AjdgI2AjYeP6CPi5e+hBfvnI1vly7ftWHf9PGeGfXcOQXbPp9Ss097hOPNzc8tXCDsVf4n1DKWeo/hr7Z6CKev9Gu+e9szG6eSU2rW+Noo/plXtk42d8Ik5ld3VWYjZ5asLGpSG5XUyO/grOPYOPlO3fPXrt39/+ysSzKwrTSyzRrG/3CQgvtPuwYq42eamxsVyQHha2l95P+2oiNDx7esPXxvMglNe/R4ydqnwdPn8mFysbLz+Tx3crM56JTc/kbL2wiFlx8+aqrjXbdaxY9zIvaRr/M1S7XjPJpkdtoqbaNTUWys7mhLzt9tREbjRcXYqNW7a69jvZ58PKVbiLtTacuXrDZ15fOXjQv6/xFuWATsWAZG1VFNck9nLdxJDKt0iHGizaOxJilTYUKPdYfvImbT+3yPQQbL799915lEvnJtDPPmkA91UFXPhHbXrbzHswXdLbR2nTp28RpbaP66atea2301GfXRjMzH/sf6SfY+OD907evdPf44H0tWBNoG49xLP0o30wstW/0JW5/I162/nNr32imdto3ptVV7v21ERuNF9ZurSvXgnmgbVs18wZe0co3NnpB905tW0Nvs2ba1szP1GPzrD5Xa+xn6phqbGxX2LvY2GcbsVHN0kVQfvm1FqwOHonc8FNMq1O3ipuCJWzMC3uW1qObT4Wz1G0r443tMg5mo6cWbfxQYcvrbxtzHy2hA/wvpucANg5HwokZG1kb1xpsBGzERsBGwEZsBGxcT2AlbQTARsBGAGwEbATARsBGgH/PRgBsBGwEwMbf1xRYSRvDWgLYCN8ANv6xjvwZ+gM2YiM2YiM2YuNf7JzNrtsgEIXF81Tqri/QVVcWdhyDAze37v/7P0HnZBgfW02EarE0qgLM+RhS+YiJ7wLvXD9Ifxk7fF7140kjUG0Ko03hiSYbx//MD+FVzv2a+YYZ+SS7jYaBPN3Y/m5bxBu4cb5leYBveMa54kYClUa4m+/ve95SXAJn9fwqvMgJ6TU/30b8/+jG042t7rZt70af1zPla8WNBCqNcLfEJT51I0zCWT0/hBc5Ib3mUz8wouTpxiZ327Z3o5kCz8xf6UbU7yyWQZG7fHMjpgV4u6HMIjg5FzSQF4cgeHE3Yfmc70NZxA6Szx3Wo2wHHfELWCZNpSqEfc7vtmcUCd9HFwEsQU0oEDH5F043NrnbFihuIoOMOKRVlvgBN96H1Y0p0o0pdDpJEY9Tpwr0Q3IjgkpoQBAEYeDrBpb0sAQYEawzN/K40hG/QMnUeUTI7XMG23NxokZbBFCDynceFjXs6vN5Nra52xauJavxVT7mRiuYaO/D6sb5Vo46FxDClIB5KImMkQUfyaa8gVFSlwANwraDobheR/wClgkd9/k356Uck1BtEYPKI1tesXs8K3Wju21R0T/++Gyy4pSP/27ka4S333SLMzPgsWKqAN0I2T9x4xZ2aCN07MQOi7leR8y/dyO5fc66GzFDWwLdGE43NrrbFueonKSrTPzwW0xyj3dqqdT6GjHJQP+CsqBGmxsxVYBuTFZ3GcywBGFkVf9FCKVTOnN9GTF/Z5lQqcntc3JPLcG2iEHlpfOR2BRPN7a42xbtw89fn8g+fnJ+KfKhSq3luB/KM8aTw1T/SAdNK7VOAdCNQPv3nRvBb+Ep6smEdwy43joHzNZPLuhI80OMJdMDzdxnm9P2TM5eT3QRg0wYug3m+9+nG5vcbSuYdGSlZP8x+aAbty1FjtnqQBXmm8pf9u3YBmAYBIDghBnETvavMwAFTRDEuqtdIPEdclQ3QHzvFuMyGGvsokY1qjGnxhxqVCNqRI1qRI3t8GcQ8hpBjagR1AhqRI2gRtQIakSNoEbUCGpEjaBG1Li6TRrlX64SxetIaty91qxR1Fi7jnNrVOP+nBrVGKlRjdOpUY1qVKMa1Xg/L3vmoSM5CINhicdlAtks9RLmtvdeHviMibcXVuftSJP2U2Lxf+M4ihBCVUyLHbWU/crwMTS+MTKIa7E6NBpNsSmvhXWeiUbrhAjxeQdWByYaYaL+z1jhOXRcdL4iGAYa3xoZnTQazZQp1LgWSTPlxn6pYPf3Y2iErdJzoONDaayOrNFISUxJtAnWYs2zPKlpUik/hkbj4bC+MfbL/GhMCsV+07p8CeLGWDpiXHCkzqDnPludEF6WwdA0bUPsJkQOGqsjwz38SPydNFK6sDuwFrshMtF4k4NSNhpmxlrgjgl8NHYCpoODhk3lqhAIMHtarmnjiQn9gMZOz7p11FQGY1MelxRL3VgRGRWYhUYSfy2N+1EWmzpAhYvG/Ruu0X2wYWO8td5oztyIFFGRlhTc++Bw/2hn6JdaYsoT/obGHbK86DhE3hmMYB6Pi5PIUzfWRka58UZsufFwZeDOjUaICQ2BLYtkAiuNJeOR53bn9OTo7Dz/H9aEQvFu3Ug0ov4kjXJNr2meurE+MqKRRNnqRkhgvHUjTGt3HtCIe/bcSA9bmH0tPw0vkKc1vehmsKjHTGPRb9I1DS7MXl5hwOX3PzRWR0Y0FvHm3r/wnRoQpEpqLUQWGqUR+E5tQpwNgQ2tnzFgrRsnnB7TLpxmBHAzWLeBKPxtR6Kx6KgqmcpbDM0jk5cMNNZGdpfGIv5iGvPaCDUvSgqRg8ZidojWiesronG2ntb7C3+LSap9i2nfYr4Ijf1+bDQ2Gr8EjdZNQ/tO/a+dO7YBAISBGMj+/e/LEki4uJvBShqCGr2aUKMa1ahGNapRjWp8x5XWby5YXbCCvyZAjagR1EjfpkbUCDY1UZvZiBpJs6kxGM1G1Ag2NXkHOi61IHl9uT0p7gAAAABJRU5ErkJggg==)

The SDK is installed, by default, at the following location:

powershell

```
%LOCALAPPDATA%\Android\Sdk
```

You can find the actual location of the SDK in the Android Studio "Settings" dialog, under **Languages & Frameworks** ‚Üí **Android SDK**.

Open a new Command Prompt window to ensure the new environment variable is loaded before proceeding to the next step.

1. Open powershell
2. Copy and paste **Get-ChildItem -Path Env:\\** into powershell
3. Verify `ANDROID_HOME` has been added

#### 4. Add platform-tools to Path

1. Open the **Windows Control Panel.**
2. Click on **User Accounts,** then click **User Accounts** again
3. Click on **Change my environment variables**
4. Select the **Path** variable.
5. Click **Edit.**
6. Click **New** and add the path to platform-tools to the list.

The default location for this folder is:

powershell

```
%LOCALAPPDATA%\Android\Sdk\platform-tools
```

## Preparing the Android device

You will need an Android device to run your React Native Android app. This can be either a physical Android device, or more commonly, you can use an Android Virtual Device which allows you to emulate an Android device on your computer.

Either way, you will need to prepare the device to run Android apps for development.

### Using a physical device

If you have a physical Android device, you can use it for development in place of an AVD by plugging it in to your computer using a USB cable and following the instructions [here](/docs/running-on-device.md).

### Using a virtual device

If you use Android Studio to open `./AwesomeProject/android`, you can see the list of available Android Virtual Devices (AVDs) by opening the "AVD Manager" from within Android Studio. Look for an icon that looks like this:

![Android Studio AVD Manager](/docs/assets/GettingStartedAndroidStudioAVD.svg)

If you have recently installed Android Studio, you will likely need to [create a new AVD](https://developer.android.com/studio/run/managing-avds.html). Select "Create Virtual Device...", then pick any Phone from the list and click "Next", then select the **VanillaIceCream** API Level 35 image.

note

If you don't have HAXM installed, click on "Install HAXM" or follow [these instructions](https://github.com/intel/haxm/wiki/Installation-Instructions-on-Windows) to set it up, then go back to the AVD Manager.

Click "Next" then "Finish" to create your AVD. At this point you should be able to click on the green triangle button next to your AVD to launch it.

### That's it!

Congratulations! You successfully set up your development environment.

![](/docs/assets/GettingStartedCongratulations.png)

## Now what?

* If you want to add this new React Native code to an existing application, check out the [Integration guide](/docs/integration-with-existing-apps.md).
* If you're curious to learn more about React Native, check out the [Introduction to React Native](/docs/getting-started.md).

## Unsupported[‚Äã](#unsupported "Direct link to Unsupported")

info

A Mac is required to build projects with native code for iOS. You can use [Expo Go](https://expo.dev/go) from [Expo](/docs/environment-setup.md#start-a-new-react-native-project-with-expo) to develop your app on your iOS device.

#### Target OS[‚Äã](#target-os-2 "Direct link to Target OS")

* Android
* iOS

## Installing dependencies[‚Äã](#installing-dependencies "Direct link to Installing dependencies")

You will need Node, the React Native command line interface, a JDK, and Android Studio.

While you can use any editor of your choice to develop your app, you will need to install Android Studio in order to set up the necessary tooling to build your React Native app for Android.

### Node

Follow the [installation instructions for your Linux distribution](https://nodejs.org/en/download/package-manager/) to install Node 20.19.4 or newer.

### Java Development Kit

React Native currently recommends version 17 of the Java SE Development Kit (JDK). You may encounter problems using higher JDK versions. You may download and install [OpenJDK](https://openjdk.java.net) from [AdoptOpenJDK](https://adoptopenjdk.net/) or your system packager.

### Android development environment

Setting up your development environment can be somewhat tedious if you're new to Android development. If you're already familiar with Android development, there are a few things you may need to configure. In either case, please make sure to carefully follow the next few steps.

#### 1. Install Android Studio

[Download and install Android Studio](https://developer.android.com/studio). While on Android Studio installation wizard, make sure the boxes next to all of the following items are checked:

* `Android SDK`
* `Android SDK Platform`
* `Android Virtual Device`

Then, click "Next" to install all of these components.

note

If the checkboxes are grayed out, you will have a chance to install these components later on.

Once setup has finalized and you're presented with the Welcome screen, proceed to the next step.

#### 2. Install the Android SDK

Android Studio installs the latest Android SDK by default. Building a React Native app with native code, however, requires the `Android 15 (VanillaIceCream)` SDK in particular. Additional Android SDKs can be installed through the SDK Manager in Android Studio.

To do that, open Android Studio, click on "Configure" button and select "SDK Manager".

tip

The SDK Manager can also be found within the Android Studio "Settings" dialog, under **Languages & Frameworks** ‚Üí **Android SDK**.

Select the "SDK Platforms" tab from within the SDK Manager, then check the box next to "Show Package Details" in the bottom right corner. Look for and expand the `Android 15 (VanillaIceCream)` entry, then make sure the following items are checked:

* `Android SDK Platform 35`
* `Intel x86 Atom_64 System Image` or `Google APIs Intel x86 Atom System Image`

Next, select the "SDK Tools" tab and check the box next to "Show Package Details" here as well. Look for and expand the "Android SDK Build-Tools" entry, then make sure that `35.0.0` is selected.

Finally, click "Apply" to download and install the Android SDK and related build tools.

#### 3. Configure the ANDROID\_HOME environment variable

The React Native tools require some environment variables to be set up in order to build apps with native code.

Add the following lines to your `$HOME/.bash_profile` or `$HOME/.bashrc` (if you are using `zsh` then `~/.zprofile` or `~/.zshrc`) config file:

shell

```
export ANDROID_HOME=$HOME/Android/Sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools
```

note

`.bash_profile` is specific to `bash`. If you're using another shell, you will need to edit the appropriate shell-specific config file.

Type `source $HOME/.bash_profile` for `bash` or `source $HOME/.zprofile` to load the config into your current shell. Verify that ANDROID\_HOME has been set by running `echo $ANDROID_HOME` and the appropriate directories have been added to your path by running `echo $PATH`.

note

Please make sure you use the correct Android SDK path. You can find the actual location of the SDK in the Android Studio "Settings" dialog, under **Languages & Frameworks** ‚Üí **Android SDK**.

### Watchman

Follow the [Watchman installation guide](https://facebook.github.io/watchman/docs/install#buildinstall) to compile and install Watchman from source.

info

[Watchman](https://facebook.github.io/watchman/docs/install) is a tool by Facebook for watching changes in the filesystem. It is highly recommended you install it for better performance and increased compatibility in certain edge cases (translation: you may be able to get by without installing this, but your mileage may vary; installing this now may save you from a headache later).

## Preparing the Android device

You will need an Android device to run your React Native Android app. This can be either a physical Android device, or more commonly, you can use an Android Virtual Device which allows you to emulate an Android device on your computer.

Either way, you will need to prepare the device to run Android apps for development.

### Using a physical device

If you have a physical Android device, you can use it for development in place of an AVD by plugging it in to your computer using a USB cable and following the instructions [here](/docs/running-on-device.md).

### Using a virtual device

If you use Android Studio to open `./AwesomeProject/android`, you can see the list of available Android Virtual Devices (AVDs) by opening the "AVD Manager" from within Android Studio. Look for an icon that looks like this:

![Android Studio AVD Manager](/docs/assets/GettingStartedAndroidStudioAVD.svg)

If you have recently installed Android Studio, you will likely need to [create a new AVD](https://developer.android.com/studio/run/managing-avds.html). Select "Create Virtual Device...", then pick any Phone from the list and click "Next", then select the **VanillaIceCream** API Level 35 image.

tip

We recommend configuring [VM acceleration](https://developer.android.com/studio/run/emulator-acceleration.html#vm-linux) on your system to improve performance. Once you've followed those instructions, go back to the AVD Manager.

Click "Next" then "Finish" to create your AVD. At this point you should be able to click on the green triangle button next to your AVD to launch it.

### That's it!

Congratulations! You successfully set up your development environment.

![](/docs/assets/GettingStartedCongratulations.png)

## Now what?

* If you want to add this new React Native code to an existing application, check out the [Integration guide](/docs/integration-with-existing-apps.md).
* If you're curious to learn more about React Native, check out the [Introduction to React Native](/docs/getting-started.md).

## Unsupported[‚Äã](#unsupported-1 "Direct link to Unsupported")

info

A Mac is required to build projects with native code for iOS. You can use [Expo Go](https://expo.dev/go) from [Expo](/docs/environment-setup.md#start-a-new-react-native-project-with-expo) to develop your app on your iOS device.


---

# Settings

`Settings` serves as a wrapper for [`NSUserDefaults`](https://developer.apple.com/documentation/foundation/nsuserdefaults), a persistent key-value store available only on iOS.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `clearWatch()`[‚Äã](#clearwatch "Direct link to clearwatch")

tsx

```
static clearWatch(watchId: number);
```

`watchId` is the number returned by `watchKeys()` when the subscription was originally configured.

***

### `get()`[‚Äã](#get "Direct link to get")

tsx

```
static get(key: string): any;
```

Get the current value for a given `key` in `NSUserDefaults`.

***

### `set()`[‚Äã](#set "Direct link to set")

tsx

```
static set(settings: Record<string, any>);
```

Set one or more values in `NSUserDefaults`.

***

### `watchKeys()`[‚Äã](#watchkeys "Direct link to watchkeys")

tsx

```
static watchKeys(keys: string | array<string>, callback: () => void): number;
```

Subscribe to be notified when the value for any of the keys specified by the `keys` parameter has been changed in `NSUserDefaults`. Returns a `watchId` number that may be used with `clearWatch()` to unsubscribe.

note

`watchKeys()` by design ignores internal `set()` calls and fires callback only on changes preformed outside of React Native code.


---

# Shadow Props

* TypeScript
* JavaScript

***

# Reference

There are 3 sets of shadow APIs in React Native:

* `boxShadow`: A View style prop and a spec-compliant implementation of the [web style prop of the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow).
* `dropShadow`: A specific filter function available as part of the [`filter`](/docs/view-style-props.md#filter) View style prop.
* Various `shadow` props (`shadowColor`, `shadowOffset`, `shadowOpacity`, `shadowRadius`): These map directly to their native counterparts exposed by the platform-level APIs.

The difference between `dropShadow` and `boxShadow` are as follows:

* `dropShadow` exists as part of `filter`, whereas `boxShadow` is a standalone style prop.
* `dropShadow` is an alpha mask, so only pixels with a positive alpha value will "cast" a shadow. `boxShadow` will cast around the border box of the element no matter it's contents (unless it is inset).
* `dropShadow` is only available on Android, `boxShadow` is available on iOS and Android.
* `dropShadow` cannot be inset like `boxShadow`.
* `dropShadow` does not have the `spreadDistance` argument like `boxShadow`.

Both `boxShadow` and `dropShadow` are generally more capable than the `shadow` props. The `shadow` props, however, map to native platform-level APIs, so if you only need a straightforward shadow these props are recommended. Note that only `shadowColor` works on both Android and iOS, all other `shadow` props only work on iOS.

## Props[‚Äã](#props "Direct link to Props")

### `boxShadow`[‚Äã](#boxshadow "Direct link to boxshadow")

See [View Style Props](/docs/view-style-props.md#boxshadow) for documentation.

### `dropShadow`Android[‚Äã](#dropshadow-android "Direct link to dropshadow-android")

See [View Style Props](/docs/view-style-props.md#filter) for documentation.

### `shadowColor`[‚Äã](#shadowcolor "Direct link to shadowcolor")

Sets the drop shadow color.

This property will only work on Android API 28 and above. For similar functionality on lower Android APIs, use the [`elevation` property](/docs/view-style-props.md#elevation-android).

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `shadowOffset`iOS[‚Äã](#shadowoffset-ios "Direct link to shadowoffset-ios")

Sets the drop shadow offset.

| Type                                     |
| ---------------------------------------- |
| object: `{width: number,height: number}` |

***

### `shadowOpacity`iOS[‚Äã](#shadowopacity-ios "Direct link to shadowopacity-ios")

Sets the drop shadow opacity (multiplied by the color's alpha component).

| Type   |
| ------ |
| number |

***

### `shadowRadius`iOS[‚Äã](#shadowradius-ios "Direct link to shadowradius-ios")

Sets the drop shadow blur radius.

| Type   |
| ------ |
| number |


---

# Share

## Example[‚Äã](#example "Direct link to Example")

* TypeScript
* JavaScript

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `share()`[‚Äã](#share "Direct link to share")

tsx

```
static share(content: ShareContent, options?: ShareOptions);
```

Open a dialog to share text content.

In iOS, returns a Promise which will be invoked with an object containing `action` and `activityType`. If the user dismissed the dialog, the Promise will still be resolved with action being `Share.dismissedAction` and all the other keys being undefined. Note that some share options will not appear or work on the iOS simulator.

In Android, returns a Promise which will always be resolved with action being `Share.sharedAction`.

**Properties:**

| Name            | Type   | Description                                                                                                                                                                                                        |
| --------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| contentRequired | object | `message` - a message to share<br />`url` - a URL to shareiOS<br />`title` - title of the messageAndroid***At least one of `url` and `message` is required.                                                        |
| options         | object | `dialogTitle`Android<br />`excludedActivityTypes`iOS<br />`subject` - a subject to share via emailiOS<br />`tintColor`iOS<br />`anchor` - the node to which the action sheet should be anchored (used for iPad)iOS |

***

## Properties[‚Äã](#properties "Direct link to Properties")

### `sharedAction`[‚Äã](#sharedaction "Direct link to sharedaction")

tsx

```
static sharedAction: 'sharedAction';
```

The content was successfully shared.

***

### `dismissedAction`iOS[‚Äã](#dismissedaction-ios "Direct link to dismissedaction-ios")

tsx

```
static dismissedAction: 'dismissedAction';
```

The dialog has been dismissed.


---

# Publishing to Google Play Store

Android requires that all apps be digitally signed with a certificate before they can be installed. In order to distribute your Android application via [Google Play store](https://play.google.com/store) it needs to be signed with a release key that then needs to be used for all future updates. Since 2017 it is possible for Google Play to manage signing releases automatically thanks to [App Signing by Google Play](https://developer.android.com/studio/publish/app-signing#app-signing-google-play) functionality. However, before your application binary is uploaded to Google Play it needs to be signed with an upload key. The [Signing Your Applications](https://developer.android.com/tools/publishing/app-signing.html) page on Android Developers documentation describes the topic in detail. This guide covers the process in brief, as well as lists the steps required to package the JavaScript bundle.

info

If you are using Expo, read the Expo guide for [Deploying to App Stores](https://docs.expo.dev/distribution/app-stores/) to build and submit your app for the Google Play Store. This guide works with any React Native app to automate the deployment process.

## Generating an upload key[‚Äã](#generating-an-upload-key "Direct link to Generating an upload key")

You can generate a private signing key using `keytool`.

### Windows[‚Äã](#windows "Direct link to Windows")

On Windows `keytool` must be run from `C:\Program Files\Java\jdkx.x.x_x\bin`, as administrator.

shell

```
keytool -genkeypair -v -storetype PKCS12 -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000
```

This command prompts you for passwords for the keystore and key and for the Distinguished Name fields for your key. It then generates the keystore as a file called `my-upload-key.keystore`.

The keystore contains a single key, valid for 10000 days. The alias is a name that you will use later when signing your app, so remember to take note of the alias.

### macOS[‚Äã](#macos "Direct link to macOS")

On macOS, if you're not sure where your JDK bin folder is, then perform the following command to find it:

shell

```
/usr/libexec/java_home
```

It will output the directory of the JDK, which will look something like this:

shell

```
/Library/Java/JavaVirtualMachines/jdkX.X.X_XXX.jdk/Contents/Home
```

Navigate to that directory by using the command `cd /your/jdk/path` and use the keytool command with sudo permission as shown below.

shell

```
sudo keytool -genkey -v -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000
```

caution

Remember to keep the keystore file private. In case you've lost upload key or it's been compromised you should [follow these instructions](https://support.google.com/googleplay/android-developer/answer/7384423#reset).

## Setting up Gradle variables[‚Äã](#setting-up-gradle-variables "Direct link to Setting up Gradle variables")

1. Place the `my-upload-key.keystore` file under the `android/app` directory in your project folder.
2. Edit the file `~/.gradle/gradle.properties` or `android/gradle.properties`, and add the following (replace `*****` with the correct keystore password, alias and key password),

```
MYAPP_UPLOAD_STORE_FILE=my-upload-key.keystore
MYAPP_UPLOAD_KEY_ALIAS=my-key-alias
MYAPP_UPLOAD_STORE_PASSWORD=*****
MYAPP_UPLOAD_KEY_PASSWORD=*****
```

These are going to be global Gradle variables, which we can later use in our Gradle config to sign our app.

Note about using git

Saving the above Gradle variables in `~/.gradle/gradle.properties` instead of `android/gradle.properties` prevents them from being checked in to git. You may have to create the `~/.gradle/gradle.properties` file in your user's home directory before you can add the variables.

Note about security

If you are not keen on storing your passwords in plaintext, and you are running macOS, you can also [store your credentials in the Keychain Access app](https://pilloxa.gitlab.io/posts/safer-passwords-in-gradle/). Then you can skip the two last rows in `~/.gradle/gradle.properties`.

## Adding signing config to your app's Gradle config[‚Äã](#adding-signing-config-to-your-apps-gradle-config "Direct link to Adding signing config to your app's Gradle config")

The last configuration step that needs to be done is to setup release builds to be signed using upload key. Edit the file `android/app/build.gradle` in your project folder, and add the signing config,

groovy

```
...
android {
    ...
    defaultConfig { ... }
    signingConfigs {
        release {
            if (project.hasProperty('MYAPP_UPLOAD_STORE_FILE')) {
                storeFile file(MYAPP_UPLOAD_STORE_FILE)
                storePassword MYAPP_UPLOAD_STORE_PASSWORD
                keyAlias MYAPP_UPLOAD_KEY_ALIAS
                keyPassword MYAPP_UPLOAD_KEY_PASSWORD
            }
        }
    }
    buildTypes {
        release {
            ...
            signingConfig signingConfigs.release
        }
    }
}
...
```

## Generating the release AAB[‚Äã](#generating-the-release-aab "Direct link to Generating the release AAB")

Run the following command in a terminal:

shell

```
npx react-native build-android --mode=release
```

This command uses Gradle's `bundleRelease` under the hood that bundles all the JavaScript needed to run your app into the AAB ([Android App Bundle](https://developer.android.com/guide/app-bundle)). If you need to change the way the JavaScript bundle and/or drawable resources are bundled (e.g. if you changed the default file/folder names or the general structure of the project), have a look at `android/app/build.gradle` to see how you can update it to reflect these changes.

note

Make sure `gradle.properties` does not include `org.gradle.configureondemand=true` as that will make the release build skip bundling JS and assets into the app binary.

The generated AAB can be found under `android/app/build/outputs/bundle/release/app-release.aab`, and is ready to be uploaded to Google Play.

In order for Google Play to accept AAB format the App Signing by Google Play needs to be configured for your application on the Google Play Console. If you are updating an existing app that doesn't use App Signing by Google Play, please check our [migration section](#migrating-old-android-react-native-apps-to-use-app-signing-by-google-play) to learn how to perform that configuration change.

## Testing the release build of your app[‚Äã](#testing-the-release-build-of-your-app "Direct link to Testing the release build of your app")

Before uploading the release build to the Play Store, make sure you test it thoroughly. First uninstall any previous version of the app you already have installed. Install it on the device using the following command in the project root:

* npm
* Yarn

shell

```
npm run android -- --mode="release"
```

shell

```
yarn android --mode release
```

Note that `--mode release` is only available if you've set up signing as described above.

You can terminate any running bundler instances, since all your framework and JavaScript code is bundled in the APK's assets.

## Publishing to other stores[‚Äã](#publishing-to-other-stores "Direct link to Publishing to other stores")

By default, the generated APK has the native code for both `x86`, `x86_64`, `ARMv7a` and `ARM64-v8a` CPU architectures. This makes it easier to share APKs that run on almost all Android devices. However, this has the downside that there will be some unused native code on any device, leading to unnecessarily bigger APKs.

You can create an APK for each CPU by adding the following line in your `android/app/build.gradle` file:

diff

```
android {

    splits {
        abi {
            reset()
            enable true
            universalApk false
            include "armeabi-v7a", "arm64-v8a", "x86", "x86_64"
        }
    }

}
```

Upload these files to markets which support device targeting, such as [Amazon AppStore](https://developer.amazon.com/docs/app-submission/device-filtering-and-compatibility.html) or [F-Droid](https://f-droid.org/en/), and the users will automatically get the appropriate APK. If you want to upload to other markets, such as [APKFiles](https://www.apkfiles.com/), which do not support multiple APKs for a single app, change the `universalApk false` line to `true` to create the default universal APK with binaries for both CPUs.

Please note that you will also have to configure distinct version codes, as [suggested in this page](https://developer.android.com/studio/build/configure-apk-splits#configure-APK-versions) from the official Android documentation.

## Enabling Proguard to reduce the size of the APK (optional)[‚Äã](#enabling-proguard-to-reduce-the-size-of-the-apk-optional "Direct link to Enabling Proguard to reduce the size of the APK (optional)")

Proguard is a tool that can slightly reduce the size of the APK. It does this by stripping parts of the React Native Java bytecode (and its dependencies) that your app is not using.

Important

Make sure to thoroughly test your app if you've enabled Proguard. Proguard often requires configuration specific to each native library you're using. See `app/proguard-rules.pro`.

To enable Proguard, edit `android/app/build.gradle`:

groovy

```
/**
 * Run Proguard to shrink the Java bytecode in release builds.
 */
def enableProguardInReleaseBuilds = true
```

## Migrating old Android React Native apps to use App Signing by Google Play[‚Äã](#migrating-old-android-react-native-apps-to-use-app-signing-by-google-play "Direct link to Migrating old Android React Native apps to use App Signing by Google Play")

If you are migrating from previous version of React Native chances are your app does not use App Signing by Google Play feature. We recommend you enable that in order to take advantage from things like automatic app splitting. In order to migrate from the old way of signing you need to start by [generating new upload key](#generating-an-upload-key) and then replacing release signing config in `android/app/build.gradle` to use the upload key instead of the release one (see section about [adding signing config to gradle](#adding-signing-config-to-your-apps-gradle-config)). Once that's done you should follow the [instructions from Google Play Help website](https://support.google.com/googleplay/android-developer/answer/7384423) in order to send your original release key to Google Play.

## Default Permissions[‚Äã](#default-permissions "Direct link to Default Permissions")

By default, `INTERNET` permission is added to your Android app as pretty much all apps use it. `SYSTEM_ALERT_WINDOW` permission is added to your Android APK in debug mode but it will be removed in production.


---

# State

There are two types of data that control a component: `props` and `state`. `props` are set by the parent and they are fixed throughout the lifetime of a component. For data that is going to change, we have to use `state`.

In general, you should initialize `state` in the constructor, and then call `setState` when you want to change it.

For example, let's say we want to make text that blinks all the time. The text itself gets set once when the blinking component gets created, so the text itself is a `prop`. The "whether the text is currently on or off" changes over time, so that should be kept in `state`.

* TypeScript
* JavaScript

In a real application, you probably won't be setting state with a timer. You might set state when you have new data from the server, or from user input. You can also use a state container like [Redux](https://redux.js.org/) or [MobX](https://mobx.js.org/) to control your data flow. In that case you would use Redux or MobX to modify your state rather than calling `setState` directly.

When setState is called, BlinkApp will re-render its Component. By calling setState within the Timer, the component will re-render every time the Timer ticks.

State works the same way as it does in React, so for more details on handling state, you can look at the [React.Component API](https://react.dev/reference/react/Component#setstate). At this point, you may have noticed that most of our examples use the default text color. To customize the text color, you will have to [learn about Style](/docs/style.md).


---

# StatusBar

Component to control the app's status bar. The status bar is the zone, typically at the top of the screen, that displays the current time, Wi-Fi and cellular network information, battery level and/or other status icons.

### Usage with Navigator[‚Äã](#usage-with-navigator "Direct link to Usage with Navigator")

It is possible to have multiple `StatusBar` components mounted at the same time. The props will be merged in the order the `StatusBar` components were mounted.

* TypeScript
* JavaScript

### Imperative API[‚Äã](#imperative-api "Direct link to Imperative API")

For cases where using a component is not ideal, there is also an imperative API exposed as static functions on the component. It is however not recommended to use the static API and the component for the same prop because any value set by the static API will get overridden by the one set by the component in the next render.

***

# Reference

## Constants[‚Äã](#constants "Direct link to Constants")

### `currentHeight`Android[‚Äã](#currentheight-android "Direct link to currentheight-android")

The height of the status bar, which includes the notch height, if present.

***

## Props[‚Äã](#props "Direct link to Props")

### `animated`[‚Äã](#animated "Direct link to animated")

If the transition between status bar property changes should be animated. Supported for `backgroundColor`, `barStyle` and `hidden` properties.

| Type    | Required | Default |
| ------- | -------- | ------- |
| boolean | No       | `false` |

***

### `backgroundColor`Android[‚Äã](#backgroundcolor-android "Direct link to backgroundcolor-android")

The background color of the status bar.

warning

Due to edge-to-edge enforcement introduced in Android 15, setting background color of the status bar is deprecated in API level 35 and setting it will have no effect. You can read more about our [edge-to-edge recommendations here](https://github.com/react-native-community/discussions-and-proposals/discussions/827).

| Type                     | Required | Default                                                                |
| ------------------------ | -------- | ---------------------------------------------------------------------- |
| [color](/docs/colors.md) | No       | default system StatusBar background color, or `'black'` if not defined |

***

### `barStyle`[‚Äã](#barstyle "Direct link to barstyle")

Sets the color of the status bar text.

On Android, this will only have an impact on API versions 23 and above.

| Type                                                | Required | Default     |
| --------------------------------------------------- | -------- | ----------- |
| [StatusBarStyle](/docs/statusbar.md#statusbarstyle) | No       | `'default'` |

***

### `hidden`[‚Äã](#hidden "Direct link to hidden")

If the status bar is hidden.

| Type    | Required | Default |
| ------- | -------- | ------- |
| boolean | No       | `false` |

***

### `networkActivityIndicatorVisible`iOS[‚Äã](#networkactivityindicatorvisible-ios "Direct link to networkactivityindicatorvisible-ios")

If the network activity indicator should be visible.

| Type    | Default |
| ------- | ------- |
| boolean | `false` |

***

### `showHideTransition`iOS[‚Äã](#showhidetransition-ios "Direct link to showhidetransition-ios")

The transition effect when showing and hiding the status bar using the `hidden` prop.

| Type                                                        | Default  |
| ----------------------------------------------------------- | -------- |
| [StatusBarAnimation](/docs/statusbar.md#statusbaranimation) | `'fade'` |

***

### `translucent`Android[‚Äã](#translucent-android "Direct link to translucent-android")

If the status bar is translucent. When translucent is set to `true`, the app will draw under the status bar. This is useful when using a semi transparent status bar color.

warning

Due to edge-to-edge enforcement introduced in Android 15, setting the status bar as translucent is deprecated in API level 35 and setting it will have no effect. You can read more about our [edge-to-edge recommendations here](https://github.com/react-native-community/discussions-and-proposals/discussions/827).

| Type    | Default |
| ------- | ------- |
| boolean | `false` |

## Methods[‚Äã](#methods "Direct link to Methods")

### `popStackEntry()`[‚Äã](#popstackentry "Direct link to popstackentry")

tsx

```
static popStackEntry(entry: StatusBarProps);
```

Get and remove the last StatusBar entry from the stack.

**Parameters:**

| Name          | Type | Description                           |
| ------------- | ---- | ------------------------------------- |
| entryRequired | any  | Entry returned from `pushStackEntry`. |

***

### `pushStackEntry()`[‚Äã](#pushstackentry "Direct link to pushstackentry")

tsx

```
static pushStackEntry(props: StatusBarProps): StatusBarProps;
```

Push a StatusBar entry onto the stack. The return value should be passed to `popStackEntry` when complete.

**Parameters:**

| Name          | Type | Description                                                      |
| ------------- | ---- | ---------------------------------------------------------------- |
| propsRequired | any  | Object containing the StatusBar props to use in the stack entry. |

***

### `replaceStackEntry()`[‚Äã](#replacestackentry "Direct link to replacestackentry")

tsx

```
static replaceStackEntry(
  entry: StatusBarProps,
  props: StatusBarProps
): StatusBarProps;
```

Replace an existing StatusBar stack entry with new props.

**Parameters:**

| Name          | Type | Description                                                                  |
| ------------- | ---- | ---------------------------------------------------------------------------- |
| entryRequired | any  | Entry returned from `pushStackEntry` to replace.                             |
| propsRequired | any  | Object containing the StatusBar props to use in the replacement stack entry. |

***

### `setBackgroundColor()`Android[‚Äã](#setbackgroundcolor-android "Direct link to setbackgroundcolor-android")

tsx

```
static setBackgroundColor(color: ColorValue, animated?: boolean);
```

Set the background color for the status bar.

warning

Due to edge-to-edge enforcement introduced in Android 15, setting background color of the status bar is deprecated in API level 35 and setting it will have no effect. You can read more about our [edge-to-edge recommendations here](https://github.com/react-native-community/discussions-and-proposals/discussions/827).

**Parameters:**

| Name          | Type    | Description               |
| ------------- | ------- | ------------------------- |
| colorRequired | string  | Background color.         |
| animated      | boolean | Animate the style change. |

***

### `setBarStyle()`[‚Äã](#setbarstyle "Direct link to setbarstyle")

tsx

```
static setBarStyle(style: StatusBarStyle, animated?: boolean);
```

Set the status bar style.

**Parameters:**

| Name          | Type                                                | Description               |
| ------------- | --------------------------------------------------- | ------------------------- |
| styleRequired | [StatusBarStyle](/docs/statusbar.md#statusbarstyle) | Status bar style to set.  |
| animated      | boolean                                             | Animate the style change. |

***

### `setHidden()`[‚Äã](#sethidden "Direct link to sethidden")

tsx

```
static setHidden(hidden: boolean, animation?: StatusBarAnimation);
```

Show or hide the status bar.

**Parameters:**

| Name           | Type                                                        | Description                                             |
| -------------- | ----------------------------------------------------------- | ------------------------------------------------------- |
| hiddenRequired | boolean                                                     | Hide the status bar.                                    |
| animationiOS   | [StatusBarAnimation](/docs/statusbar.md#statusbaranimation) | Animation when changing the status bar hidden property. |

***

### `setNetworkActivityIndicatorVisible()`iOS[‚Äã](#setnetworkactivityindicatorvisible-ios "Direct link to setnetworkactivityindicatorvisible-ios")

tsx

```
static setNetworkActivityIndicatorVisible(visible: boolean);
```

Control the visibility of the network activity indicator.

**Parameters:**

| Name            | Type    | Description         |
| --------------- | ------- | ------------------- |
| visibleRequired | boolean | Show the indicator. |

***

### `setTranslucent()`Android[‚Äã](#settranslucent-android "Direct link to settranslucent-android")

tsx

```
static setTranslucent(translucent: boolean);
```

Control the translucency of the status bar.

warning

Due to edge-to-edge enforcement introduced in Android 15, setting the status bar as translucent is deprecated in API level 35 and setting it will have no effect. You can read more about our [edge-to-edge recommendations here](https://github.com/react-native-community/discussions-and-proposals/discussions/827).

**Parameters:**

| Name                | Type    | Description         |
| ------------------- | ------- | ------------------- |
| translucentRequired | boolean | Set as translucent. |

## Type Definitions[‚Äã](#type-definitions "Direct link to Type Definitions")

### StatusBarAnimation[‚Äã](#statusbaranimation "Direct link to StatusBarAnimation")

Status bar animation type for transitions on the iOS.

| Type |
| ---- |
| enum |

**Constants:**

| Value     | Type   | Description     |
| --------- | ------ | --------------- |
| `'fade'`  | string | Fade animation  |
| `'slide'` | string | Slide animation |
| `'none'`  | string | No animation    |

***

### StatusBarStyle[‚Äã](#statusbarstyle "Direct link to StatusBarStyle")

Status bar style type.

| Type |
| ---- |
| enum |

**Constants:**

| Value             | Type   | Description                                                |
| ----------------- | ------ | ---------------------------------------------------------- |
| `'default'`       | string | Default status bar style (dark for iOS, light for Android) |
| `'light-content'` | string | White texts and icons                                      |
| `'dark-content'`  | string | Dark texts and icons (requires API>=23 on Android)         |


---

# ‚ùå StatusBarIOS

Removed from React Native

Use [`StatusBar`](/docs/statusbar.md) for mutating the status bar.

***


---

# Strict TypeScript API (opt in)

The Strict TypeScript API is a preview of our future, stable JavaScript API for React Native.

Specifically, this is a new set of TypeScript types for the `react-native` npm package, available from 0.80 onwards. These provide stronger and more futureproof type accuracy, and will allow us to confidently evolve React Native's API into a stable shape. Opting in to the Strict TypeScript API brings some structural type differences, and is therefore a one-time breaking change.

The new types are:

1. **Generated directly from our source code** ‚Äî¬†improving coverage and correctness, so you can expect stronger compatibility guarantees.
2. **Restricted to `react-native`'s index file** ‚Äî¬†more tightly defining our public API, and meaning we won't break the API when making internal file changes.

When the community is ready, the Strict TypeScript API will become our default API in future ‚Äî synchronized with deep imports removal.

## Opting in[‚Äã](#opting-in "Direct link to Opting in")

We're shipping these new types alongside our existing types,¬†meaning you can choose to migrate when ready. We encourage early adopters and newly created apps to opt in via your `tsconfig.json` file.

Opting in is a **breaking change**, since some of our new types have updated names and shapes, although many apps won't be affected. You can learn about each breaking change in the next section.

tsconfig.json

```
{
  "extends": "@react-native/typescript-config",
  "compilerOptions": {
    ...
    "customConditions": ["react-native-strict-api"]
  }
}
```

Under the hood

This will instruct TypeScript to resolve `react-native` types from our new [`types_generated/`](https://www.npmjs.com/package/react-native?activeTab=code) dir, instead of the previous [`types/`](https://www.npmjs.com/package/react-native?activeTab=code) dir (manually maintained). No restart of TypeScript or your editor is required.

The Strict TypeScript API follows our [RFC](https://github.com/react-native-community/discussions-and-proposals/pull/894) to remove deep imports from React Native. Therefore, some APIs are no longer exported at root. This is intentional, in order to reduce the overall surface area of React Native's API.

API feedback

**Sending feedback**: We will be working with the community to finalize which APIs we export over (at least) the next two React Native releases. Please share your feedback in our [feedback thread](https://github.com/react-native-community/discussions-and-proposals/discussions/893).

See also our [announcement blog post](/blog/2025/06/12/moving-towards-a-stable-javascript-api.md) for more info on our motivation and timelines.

## Migration guide[‚Äã](#migration-guide "Direct link to Migration guide")

### Codegen types should now be imported from the `react-native` package[‚Äã](#codegen-types-should-now-be-imported-from-the-react-native-package "Direct link to codegen-types-should-now-be-imported-from-the-react-native-package")

Types used for codegen, like `Int32`, `Double`, `WithDefault` etc. are now available under a single `CodegenTypes` namespace. Similarly, `codegenNativeComponent` and `codegenNativeCommands` are now available to import from the react-native package instead of using the deep import.

Namespaced `CodegenTypes` as well as `codegenNativeCommands` and `codegenNativeComponent` are also available from `react-native` package when the Strict API is not enabled to make the adoption easier for third-party libraries.

**Before**

```
import codegenNativeComponent from 'react-native/Libraries/Utilities/codegenNativeComponent';
import type {
  Int32,
  WithDefault,
} from 'react-native/Libraries/Types/CodegenTypes';

interface NativeProps extends ViewProps {
  enabled?: WithDefault<boolean, true>;
  size?: Int32;
}

export default codegenNativeComponent<NativeProps>(
  'RNCustomComponent',
);
```

**After**

```
import {CodegenTypes, codegenNativeComponent} from 'react-native';

interface NativeProps extends ViewProps {
  enabled?: CodegenTypes.WithDefault<boolean, true>;
  size?: CodegenTypes.Int32;
}

export default codegenNativeComponent<NativeProps>(
  'RNCustomComponent',
);
```

### Removal of `*Static` types[‚Äã](#removal-of-static-types "Direct link to removal-of-static-types")

**Before**

```
import {Linking, LinkingStatic} from 'react-native';

function foo(linking: LinkingStatic) {}
foo(Linking);
```

**After**

```
import {Linking} from 'react-native';

function foo(linking: Linking) {}
foo(Linking);
```

The following APIs were previously named as `*Static` plus a variable declaration of said type. In most cases there was an alias so that value and the type were exported under the same identifier, but some were missing.

(For example there was an `AlertStatic` type, `Alert` variable of type `AlertStatic` and type `Alert` which was an alias for `AlertStatic`. But in the case of `PixelRatio` there was a `PixelRatioStatic` type and a `PixelRatio` variable of that type without additional type aliases.)

**Affected APIs**

* `AlertStatic`
* `ActionSheetIOSStatic`
* `ToastAndroidStatic`
* `InteractionManagerStatic` (In this case there was no relevant `InteractionManager` type alias)
* `UIManagerStatic`
* `PlatformStatic`
* `SectionListStatic`
* `PixelRatioStatic` (In this case there was no relevant `PixelRatio` type alias)
* `AppStateStatic`
* `AccessibilityInfoStatic`
* `ImageResizeModeStatic`
* `BackHandlerStatic`
* `DevMenuStatic` (In this case there was no relevant `DevMenu` type alias)
* `ClipboardStatic`
* `PermissionsAndroidStatic`
* `ShareStatic`
* `DeviceEventEmitterStatic`
* `LayoutAnimationStatic`
* `KeyboardStatic` (In this case there was no relevant `Keyboard` type alias)
* `DevSettingsStatic` (In this case there was no relevant `DevSettings` type alias)
* `I18nManagerStatic`
* `EasingStatic`
* `PanResponderStatic`
* `NativeModulesStatic` (In this case there was no relevant `NativeModules` type alias)
* `LogBoxStatic`
* `PushNotificationIOSStatic`
* `SettingsStatic`
* `VibrationStatic`

### Some core components are now function components instead of class components[‚Äã](#some-core-components-are-now-function-components-instead-of-class-components "Direct link to Some core components are now function components instead of class components")

* `View`
* `Image`
* `TextInput`
* `Modal`
* `Text`
* `TouchableWithoutFeedback`
* `Switch`
* `ActivityIndicator`
* `ProgressBarAndroid`
* `InputAccessoryView`
* `Button`
* `SafeAreaView`

Due to this change, accessing ref types of these views requires using `React.ComponentRef<typeof View>` pattern which works as expected for both class and function components, e.g.:

```
const ref = useRef<React.ComponentRef<typeof View>>(null);
```

## Other breaking changes[‚Äã](#other-breaking-changes "Direct link to Other breaking changes")

### Changes to Animated types[‚Äã](#changes-to-animated-types "Direct link to Changes to Animated types")

Animated nodes were previously generic types based on their interpolation output. Now, they are non-generic types with a generic `interpolate` method.

`Animated.LegacyRef` is no longer available.

### Unified types for optional props[‚Äã](#unified-types-for-optional-props "Direct link to Unified types for optional props")

In the new types, every optional prop will be typed as `type | undefined`.

### Removal of some deprecated types[‚Äã](#removal-of-some-deprecated-types "Direct link to Removal of some deprecated types")

All types listed in [`DeprecatedPropertiesAlias.d.ts`](https://github.com/facebook/react-native/blob/0.83-stable/packages/react-native/types/public/DeprecatedPropertiesAlias.d.ts) are inaccessible under the Strict API.

### Removal of leftover component props[‚Äã](#removal-of-leftover-component-props "Direct link to Removal of leftover component props")

Some properties that were defined in type definitions but were not used by the component or were lacking a definition were removed (for example: `lineBreakMode` on `Text`, `scrollWithoutAnimationTo` on `ScrollView`, transform styles defined outside of transform array).

### Previously accessible private type helpers may now be removed[‚Äã](#previously-accessible-private-type-helpers-may-now-be-removed "Direct link to Previously accessible private type helpers may now be removed")

Due to the configuration of the previous type definitions, every defined type was accessible from the `react-native` package. This included types that were not explicitly exported and helper types that were only supposed to be used internally.

Notable examples of this are types related to StyleSheet (like `RecursiveArray`, `RegisteredStyle` and `Falsy`) and Animated (like `WithAnimatedArray` and `WithAnimatedObject`).


---

# Style

With React Native, you style your application using JavaScript. All of the core components accept a prop named `style`. The style names and [values](/docs/colors.md) usually match how CSS works on the web, except names are written using camel casing, e.g. `backgroundColor` rather than `background-color`.

The `style` prop can be a plain old JavaScript object. That's what we usually use for example code. You can also pass an array of styles - the last style in the array has precedence, so you can use this to inherit styles.

As a component grows in complexity, it is often cleaner to use `StyleSheet.create` to define several styles in one place. Here's an example:

One common pattern is to make your component accept a `style` prop which in turn is used to style subcomponents. You can use this to make styles "cascade" the way they do in CSS.

There are a lot more ways to customize the text style. Check out the [Text component reference](/docs/text.md) for a complete list.

Now you can make your text beautiful. The next step in becoming a style expert is to [learn how to control component size](/docs/height-and-width.md).

## Known issues[‚Äã](#known-issues "Direct link to Known issues")

* [react-native#29308](https://github.com/facebook/react-native/issues/29308#issuecomment-792864162): In some cases React Native does not match how CSS works on the web, for example the touch area never extends past the parent view bounds and on Android negative margin is not supported.


---

# StyleSheet

A StyleSheet is an abstraction similar to CSS StyleSheets.

Code quality tips:

* By moving styles away from the render function, you're making the code easier to understand.
* Naming the styles is a good way to add meaning to the low level components in the render function, and encourage reuse.
* In most IDEs, using `StyleSheet.create()` will offer static type checking and suggestions to help you write valid styles.

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `compose()`[‚Äã](#compose "Direct link to compose")

tsx

```
static compose(style1: Object, style2: Object): Object | Object[];
```

Combines two styles such that `style2` will override any styles in `style1`. If either style is falsy, the other one is returned without allocating an array, saving allocations and maintaining reference equality for PureComponent checks.

***

### `create()`[‚Äã](#create "Direct link to create")

tsx

```
static create(styles: Object extends Record<string, ViewStyle | ImageStyle | TextStyle>): Object;
```

An identity function for creating styles. The main practical benefit of creating styles inside `StyleSheet.create()` is static type checking against native style properties.

***

### `flatten()`[‚Äã](#flatten "Direct link to flatten")

tsx

```
static flatten(style: Array<Object extends Record<string, ViewStyle | ImageStyle | TextStyle>>): Object;
```

Flattens an array of style objects, into one aggregated style object.

***

### `setStyleAttributePreprocessor()`[‚Äã](#setstyleattributepreprocessor "Direct link to setstyleattributepreprocessor")

Experimental

Breaking changes will probably happen a lot and will not be reliably announced. The whole thing might be deleted, who knows? Use at your own risk.

tsx

```
static setStyleAttributePreprocessor(
  property: string,
  process: (propValue: any) => any,
);
```

Sets a function to use to pre-process a style property value. This is used internally to process color and transform values. You should not use this unless you really know what you are doing and have exhausted other options.

## Properties[‚Äã](#properties "Direct link to Properties")

***

### `absoluteFill`[‚Äã](#absolutefill "Direct link to absolutefill")

A very common pattern is to create overlays with position absolute and zero positioning (`position: 'absolute', left: 0, right: 0, top: 0, bottom: 0`), so `absoluteFill` can be used for convenience and to reduce duplication of these repeated styles. If you want, absoluteFill can be used to create a customized entry in a StyleSheet, e.g.:

***

### `absoluteFillObject`[‚Äã](#absolutefillobject "Direct link to absolutefillobject")

Sometimes you may want `absoluteFill` but with a couple tweaks - `absoluteFillObject` can be used to create a customized entry in a `StyleSheet`, e.g.:

***

### `hairlineWidth`[‚Äã](#hairlinewidth "Direct link to hairlinewidth")

This is defined as the width of a thin line on the platform. It can be used as the thickness of a border or division between two elements. Example:

This constant will always be a round number of pixels (so a line defined by it can look crisp) and will try to match the standard width of a thin line on the underlying platform. However, you should not rely on it being a constant size, because on different platforms and screen densities its value may be calculated differently.

A line with hairline width may not be visible if your simulator is downscaled.


---

# Switch

Renders a boolean input.

This is a controlled component that requires an `onValueChange` callback that updates the `value` prop in order for the component to reflect user actions. If the `value` prop is not updated, the component will continue to render the supplied `value` prop instead of the expected result of any user actions.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [View Props](/docs/view.md#props)[‚Äã](#view-props "Direct link to view-props")

Inherits [View Props](/docs/view.md#props).

***

### `disabled`[‚Äã](#disabled "Direct link to disabled")

If true the user won't be able to toggle the switch.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `ios_backgroundColor`iOS[‚Äã](#ios_backgroundcolor-ios "Direct link to ios_backgroundcolor-ios")

On iOS, custom color for the background. This background color can be seen either when the switch value is `false` or when the switch is disabled (and the switch is translucent).

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `onChange`[‚Äã](#onchange "Direct link to onchange")

Invoked when the user tries to change the value of the switch. Receives the change event as an argument. If you want to only receive the new value, use `onValueChange` instead.

| Type     |
| -------- |
| function |

***

### `onValueChange`[‚Äã](#onvaluechange "Direct link to onvaluechange")

Invoked when the user tries to change the value of the switch. Receives the new value as an argument. If you want to instead receive an event, use `onChange`.

| Type     |
| -------- |
| function |

***

### `ref`[‚Äã](#ref "Direct link to ref")

A ref setter that will be assigned an [element node](/docs/element-nodes.md) when mounted.

***

### `thumbColor`[‚Äã](#thumbcolor "Direct link to thumbcolor")

Color of the foreground switch grip. If this is set on iOS, the switch grip will lose its drop shadow.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `trackColor`[‚Äã](#trackcolor "Direct link to trackcolor")

Custom colors for the switch track.

*iOS*: When the switch value is `false`, the track shrinks into the border. If you want to change the color of the background exposed by the shrunken track, use [`ios_backgroundColor`](/docs/switch.md#ios_backgroundColor).

| Type                                  |
| ------------------------------------- |
| `object: {false: color, true: color}` |

***

### `value`[‚Äã](#value "Direct link to value")

The value of the switch. If true the switch will be turned on. Default value is false.

| Type |
| ---- |
| bool |


---

# Systrace

`Systrace` is a standard Android marker-based profiling tool (and is installed when you install the Android platform-tools package). Profiled code blocks are surrounded by start/end markers which are then visualized in a colorful chart format. Both the Android SDK and React Native framework provide standard markers that you can visualize.

## Example[‚Äã](#example "Direct link to Example")

`Systrace` allows you to mark JavaScript (JS) events with a tag and an integer value. Capture the non-Timed JS events in EasyProfiler.

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `isEnabled()`[‚Äã](#isenabled "Direct link to isenabled")

tsx

```
static isEnabled(): boolean;
```

***

### `beginEvent()`[‚Äã](#beginevent "Direct link to beginevent")

tsx

```
static beginEvent(eventName: string | (() => string), args?: EventArgs);
```

beginEvent/endEvent for starting and then ending a profile within the same call stack frame.

***

### `endEvent()`[‚Äã](#endevent "Direct link to endevent")

tsx

```
static endEvent(args?: EventArgs);
```

***

### `beginAsyncEvent()`[‚Äã](#beginasyncevent "Direct link to beginasyncevent")

tsx

```
static beginAsyncEvent(
  eventName: string | (() => string),
  args?: EventArgs,
): number;
```

beginAsyncEvent/endAsyncEvent for starting and then ending a profile where the end can either occur on another thread or out of the current stack frame, eg await the returned cookie variable should be used as input into the endAsyncEvent call to end the profile.

***

### `endAsyncEvent()`[‚Äã](#endasyncevent "Direct link to endasyncevent")

tsx

```
static endAsyncEvent(
  eventName: EventName,
  cookie: number,
  args?: EventArgs,
);
```

***

### `counterEvent()`[‚Äã](#counterevent "Direct link to counterevent")

tsx

```
static counterEvent(eventName: string | (() => string), value: number);
```

Register the value to the profileName on the systrace timeline.


---

# TargetEvent Object Type

`TargetEvent` object is returned in the callback as a result of focus change, for example `onFocus` or `onBlur` in the [TextInput](/docs/textinput.md) component.

## Example[‚Äã](#example "Direct link to Example")

```
{
    target: 1127
}
```

## Keys and values[‚Äã](#keys-and-values "Direct link to Keys and values")

### `target`[‚Äã](#target "Direct link to target")

The node id of the element receiving the TargetEvent.

| Type                        | Optional |
| --------------------------- | -------- |
| number, `null`, `undefined` | No       |

## Used by[‚Äã](#used-by "Direct link to Used by")

* [`TextInput`](/docs/textinput.md)
* [`TouchableWithoutFeedback`](/docs/touchablewithoutfeedback.md)


---

# Testing

As your codebase expands, small errors and edge cases you don‚Äôt expect can cascade into larger failures. Bugs lead to bad user experience and ultimately, business losses. One way to prevent fragile programming is to test your code before releasing it into the wild.

In this guide, we will cover different, automated ways to ensure your app works as expected, ranging from static analysis to end-to-end tests.

![Testing is a cycle of fixing, testing, and either passing to release or failing back into testing.](/docs/assets/diagram_testing.svg)

## Why Test[‚Äã](#why-test "Direct link to Why Test")

We're humans, and humans make mistakes. Testing is important because it helps you uncover these mistakes and verifies that your code is working. Perhaps even more importantly, testing ensures that your code continues to work in the future as you add new features, refactor the existing ones, or upgrade major dependencies of your project.

There is more value in testing than you might realize. One of the best ways to fix a bug in your code is to write a failing test that exposes it. Then when you fix the bug and re-run the test, if it passes it means the bug is fixed, never reintroduced into the code base.

Tests can also serve as documentation for new people joining your team. For people who have never seen a codebase before, reading tests can help them understand how the existing code works.

Last but not least, more automated testing means less time spent with manual QA, freeing up valuable time.

## Static Analysis[‚Äã](#static-analysis "Direct link to Static Analysis")

The first step to improve your code quality is to start using static analysis tools. Static analysis checks your code for errors as you write it, but without running any of that code.

* **Linters** analyze code to catch common errors such as unused code and to help avoid pitfalls, to flag style guide no-nos like using tabs instead of spaces (or vice versa, depending on your configuration).
* **Type checking** ensures that the construct you‚Äôre passing to a function matches what the function was designed to accept, preventing passing a string to a counting function that expects a number, for instance.

React Native comes with two such tools configured out of the box: [ESLint](https://eslint.org/) for linting and [TypeScript](/docs/typescript.md) for type checking.

## Writing Testable Code[‚Äã](#writing-testable-code "Direct link to Writing Testable Code")

To start with tests, you first need to write code that is testable. Consider an aircraft manufacturing process - before any model first takes off to show that all of its complex systems work well together, individual parts are tested to guarantee they are safe and function correctly. For example, wings are tested by bending them under extreme load; engine parts are tested for their durability; the windshield is tested against simulated bird impact.

Software is similar. Instead of writing your entire program in one huge file with many lines of code, you write your code in multiple small modules that you can test more thoroughly than if you tested the assembled whole. In this way, writing testable code is intertwined with writing clean, modular code.

To make your app more testable, start by separating the view part of your app‚Äîyour React components‚Äîfrom your business logic and app state (regardless of whether you use Redux, MobX or other solutions). This way, you can keep your business logic testing‚Äîwhich shouldn‚Äôt rely on your React components‚Äîindependent of the components themselves, whose job is primarily rendering your app‚Äôs UI!

Theoretically, you could go so far as to move all logic and data fetching out of your components. This way your components would be solely dedicated to rendering. Your state would be entirely independent of your components. Your app‚Äôs logic would work without any React components at all!

tip

We encourage you to further explore the topic of testable code in other learning resources.

## Writing Tests[‚Äã](#writing-tests "Direct link to Writing Tests")

After writing testable code, it‚Äôs time to write some actual tests! The default template of React Native ships with [Jest](https://jestjs.io) testing framework. It includes a preset that's tailored to this environment so you can get productive without tweaking the configuration and mocks straight away‚Äî[more on mocks](#mocking) shortly. You can use Jest to write all types of tests featured in this guide.

note

If you do test-driven development, you actually write tests first! That way, testability of your code is given.

### Structuring Tests[‚Äã](#structuring-tests "Direct link to Structuring Tests")

Your tests should be short and ideally test only one thing. Let's start with an example unit test written with Jest:

js

```
it('given a date in the past, colorForDueDate() returns red', () => {
  expect(colorForDueDate('2000-10-20')).toBe('red');
});
```

The test is described by the string passed to the [`it`](https://jestjs.io/docs/en/api#testname-fn-timeout) function. Take good care writing the description so that it‚Äôs clear what is being tested. Do your best to cover the following:

1. **Given** - some precondition
2. **When** - some action executed by the function that you‚Äôre testing
3. **Then** - the expected outcome

This is also known as AAA (Arrange, Act, Assert).

Jest offers [`describe`](https://jestjs.io/docs/en/api#describename-fn) function to help structure your tests. Use `describe` to group together all tests that belong to one functionality. Describes can be nested, if you need that. Other functions you'll commonly use are [`beforeEach`](https://jestjs.io/docs/en/api#beforeeachfn-timeout) or [`beforeAll`](https://jestjs.io/docs/en/api#beforeallfn-timeout) that you can use for setting up the objects you're testing. Read more in the [Jest api reference](https://jestjs.io/docs/en/api).

If your test has many steps or many expectations, you probably want to split it into multiple smaller ones. Also, ensure that your tests are completely independent of one another. Each test in your suite must be executable on its own without first running some other test. Conversely, if you run all your tests together, the first test must not influence the output of the second one.

Lastly, as developers we like when our code works great and doesn't crash. With tests, this is often the opposite. Think of a failed test as of a *good thing!* When a test fails, it often means something is not right. This gives you an opportunity to fix the problem before it impacts the users.

## Unit Tests[‚Äã](#unit-tests "Direct link to Unit Tests")

Unit tests cover the smallest parts of code, like individual functions or classes.

When the object being tested has any dependencies, you‚Äôll often need to mock them out, as described in the next paragraph.

The great thing about unit tests is that they are quick to write and run. Therefore, as you work, you get fast feedback about whether your tests are passing. Jest even has an option to continuously run tests that are related to code you‚Äôre editing: [Watch mode](https://jestjs.io/docs/en/cli#watch).

![ ](/docs/assets/p_tests-unit.svg)

### Mocking[‚Äã](#mocking "Direct link to Mocking")

Sometimes, when your tested objects have external dependencies, you‚Äôll want to ‚Äúmock them out.‚Äù ‚ÄúMocking‚Äù is when you replace some dependency of your code with your own implementation.

info

Generally, using real objects in your tests is better than using mocks but there are situations where this is not possible. For example: when your JS unit test relies on a native module written in Java or Objective-C.

Imagine you‚Äôre writing an app that shows the current weather in your city and you‚Äôre using some external service or other dependency that provides you with the weather information. If the service tells you that it‚Äôs raining, you want to show an image with a rainy cloud. You don‚Äôt want to call that service in your tests, because:

* It could make the tests slow and unstable (because of the network requests involved)
* The service may return different data every time you run the test
* Third party services can go offline when you really need to run tests!

Therefore, you can provide a mock implementation of the service, effectively replacing thousands of lines of code and some internet-connected thermometers!

note

Jest comes with [support for mocking](https://jestjs.io/docs/en/mock-functions#mocking-modules) from function level all the way to module level mocking.

## Integration Tests[‚Äã](#integration-tests "Direct link to Integration Tests")

When writing larger software systems, individual pieces of it need to interact with each other. In unit testing, if your unit depends on another one, you‚Äôll sometimes end up mocking the dependency, replacing it with a fake one.

In integration testing, real individual units are combined (same as in your app) and tested together to ensure that their cooperation works as expected. This is not to say that mocking does not happen here: you‚Äôll still need mocks (for example, to mock communication with a weather service), but you'll need them much less than in unit testing.

info

Please note that the terminology around what integration testing means is not always consistent. Also, the line between what is a unit test and what is an integration test may not always be clear. For this guide, your test falls into "integration testing" if it:

* Combines several modules of your app as described above
* Uses an external system
* Makes a network call to other application (such as the weather service API)
* Does any kind of file or database I/O

![ ](/docs/assets/p_tests-integration.svg)

## Component Tests[‚Äã](#component-tests "Direct link to Component Tests")

React components are responsible for rendering your app, and users will directly interact with their output. Even if your app's business logic has high testing coverage and is correct, without component tests you may still deliver a broken UI to your users. Component tests could fall into both unit and integration testing, but because they are such a core part of React Native, we'll cover them separately.

For testing React components, there are two things you may want to test:

* Interaction: to ensure the component behaves correctly when interacted with by a user (eg. when user presses a button)
* Rendering: to ensure the component render output used by React is correct (eg. the button's appearance and placement in the UI)

For example, if you have a button that has an `onPress` listener, you want to test that the button both appears correctly and that tapping the button is correctly handled by the component.

There are several libraries that can help you testing these:

* [React Native Testing Library](https://callstack.github.io/react-native-testing-library/) builds on top of React‚Äôs test renderer and adds `fireEvent` and `query` APIs described in the next paragraph.
* \[Deprecated] React‚Äôs [Test Renderer](https://react.dev/blog/2024/04/25/react-19-upgrade-guide#deprecated-react-test-renderer), developed alongside its core, provides a React renderer that can be used to render React components to pure JavaScript objects, without depending on the DOM or a native mobile environment.

warning

Component tests are only JavaScript tests running in Node.js environment. They do *not* take into account any iOS, Android, or other platform code which is backing the React Native components. It follows that they cannot give you a 100% confidence that everything works for the user. If there is a bug in the iOS or Android code, they will not find it.

![ ](/docs/assets/p_tests-component.svg)

### Testing User Interactions[‚Äã](#testing-user-interactions "Direct link to Testing User Interactions")

Aside from rendering some UI, your components handle events like `onChangeText` for `TextInput` or `onPress` for `Button`. They may also contain other functions and event callbacks. Consider the following example:

tsx

```
function GroceryShoppingList() {
  const [groceryItem, setGroceryItem] = useState('');
  const [items, setItems] = useState<string[]>([]);

  const addNewItemToShoppingList = useCallback(() => {
    setItems([groceryItem, ...items]);
    setGroceryItem('');
  }, [groceryItem, items]);

  return (
    <>
      <TextInput
        value={groceryItem}
        placeholder="Enter grocery item"
        onChangeText={text => setGroceryItem(text)}
      />
      <Button
        title="Add the item to list"
        onPress={addNewItemToShoppingList}
      />
      {items.map(item => (
        <Text key={item}>{item}</Text>
      ))}
    </>
  );
}
```

When testing user interactions, test the component from the user perspective‚Äîwhat's on the page? What changes when interacted with?

As a rule of thumb, prefer using things users can see or hear:

* make assertions using rendered text or [accessibility helpers](https://reactnative.dev/docs/accessibility#accessibility-properties)

Conversely, you should avoid:

* making assertions on component props or state
* testID queries

Avoid testing implementation details like props or state‚Äîwhile such tests work, they are not oriented toward how users will interact with the component and tend to break by refactoring (for example when you'd like to rename some things or rewrite class component using hooks).

info

React class components are especially prone to testing their implementation details such as internal state, props or event handlers. To avoid testing implementation details, prefer using function components with Hooks, which make relying on component internals *harder*.

Component testing libraries such as [React Native Testing Library](https://callstack.github.io/react-native-testing-library/) facilitate writing user-centric tests by careful choice of provided APIs. The following example uses `fireEvent` methods `changeText` and `press` that simulate a user interacting with the component and a query function `getAllByText` that finds matching `Text` nodes in the rendered output.

tsx

```
test('given empty GroceryShoppingList, user can add an item to it', () => {
  const {getByPlaceholderText, getByText, getAllByText} = render(
    <GroceryShoppingList />,
  );

  fireEvent.changeText(
    getByPlaceholderText('Enter grocery item'),
    'banana',
  );
  fireEvent.press(getByText('Add the item to list'));

  const bananaElements = getAllByText('banana');
  expect(bananaElements).toHaveLength(1); // expect 'banana' to be on the list
});
```

This example is not testing how some state changes when you call a function. It tests what happens when a user changes text in the `TextInput` and presses the `Button`!

### Testing Rendered Output[‚Äã](#testing-rendered-output "Direct link to Testing Rendered Output")

[Snapshot testing](https://jestjs.io/docs/en/snapshot-testing) is an advanced kind of testing enabled by Jest. It is a very powerful and low-level tool, so extra attention is advised when using it.

A "component snapshot" is a JSX-like string created by a custom React serializer built into Jest. This serializer lets Jest translate React component trees to string that's human-readable. Put another way: a component snapshot is a textual representation of your component‚Äôs render output *generated* during a test run. It may look like this:

tsx

```
<Text
  style={
    Object {
      "fontSize": 20,
      "textAlign": "center",
    }
  }>
  Welcome to React Native!
</Text>
```

With snapshot testing, you typically first implement your component and then run the snapshot test. The snapshot test then creates a snapshot and saves it to a file in your repo as a reference snapshot. **The file is then committed and checked during code review**. Any future changes to the component render output will change its snapshot, which will cause the test to fail. You then need to update the stored reference snapshot for the test to pass. That change again needs to be committed and reviewed.

Snapshots have several weak points:

* For you as a developer or reviewer, it can be hard to tell whether a change in snapshot is intended or whether it's evidence of a bug. Especially large snapshots can quickly become hard to understand and their added value becomes low.
* When snapshot is created, at that point it is considered to be correct-even in the case when the rendered output is actually wrong.
* When a snapshot fails, it's tempting to update it using the `--updateSnapshot` jest option without taking proper care to investigate whether the change is expected. Certain developer discipline is thus needed.

Snapshots themselves do not ensure that your component render logic is correct, they are merely good at guarding against unexpected changes and for checking that the components in the React tree under test receive the expected props (styles and etc.).

We recommend that you only use small snapshots (see [`no-large-snapshots` rule](https://github.com/jest-community/eslint-plugin-jest/blob/master/docs/rules/no-large-snapshots.md)). If you want to test a *change* between two React component states, use [`snapshot-diff`](https://github.com/jest-community/snapshot-diff). When in doubt, prefer explicit expectations as described in the previous paragraph.

![ ](/docs/assets/p_tests-snapshot.svg)

## End-to-End Tests[‚Äã](#end-to-end-tests "Direct link to End-to-End Tests")

In end-to-end (E2E) tests, you verify your app is working as expected on a device (or a simulator / emulator) from the user perspective.

This is done by building your app in the release configuration and running the tests against it. In E2E tests, you no longer think about React components, React Native APIs, Redux stores or any business logic. That is not the purpose of E2E tests and those are not even accessible to you during E2E testing.

Instead, E2E testing libraries allow you to find and control elements in the screen of your app: for example, you can *actually* tap buttons or insert text into `TextInputs` the same way a real user would. Then you can make assertions about whether or not a certain element exists in the app‚Äôs screen, whether or not it‚Äôs visible, what text it contains, and so on.

E2E tests give you the highest possible confidence that part of your app is working. The tradeoffs include:

* writing them is more time consuming compared to the other types of tests
* they are slower to run
* they are more prone to flakiness (a "flaky" test is a test which randomly passes and fails without any change to code)

Try to cover the vital parts of your app with E2E tests: authentication flow, core functionalities, payments, etc. Use faster JS tests for the non-vital parts of your app. The more tests you add, the higher your confidence, but also, the more time you'll spend maintaining and running them. Consider the tradeoffs and decide what's best for you.

There are several E2E testing tools available: in the React Native community, [Detox](https://github.com/wix/detox/) is a popular framework because it‚Äôs tailored for React Native apps. Another popular library in the space of iOS and Android apps is [Appium](https://appium.io/) or [Maestro](https://maestro.mobile.dev/).

![ ](/docs/assets/p_tests-e2e.svg)

## Summary[‚Äã](#summary "Direct link to Summary")

We hope you enjoyed reading and learned something from this guide. There are many ways you can test your apps. It may be hard to decide what to use at first. However, we believe it all will make sense once you start adding tests to your awesome React Native app. So what are you waiting for? Get your coverage up!

### Links[‚Äã](#links "Direct link to Links")

* [React testing overview](https://react.dev/reference/react/act)
* [React Native Testing Library](https://callstack.github.io/react-native-testing-library/)
* [Jest docs](https://jestjs.io/docs/en/tutorial-react-native)
* [Detox](https://github.com/wix/detox/)
* [Appium](https://appium.io/)
* [Maestro](https://maestro.mobile.dev/)

***

*This guide originally authored and contributed in full by [Vojtech Novak](https://twitter.com/vonovak).*


---

# Text

A React component for displaying text.

`Text` supports nesting, styling, and touch handling.

In the following example, the nested title and body text will inherit the `fontFamily` from `styles.baseText`, but the title provides its own additional styles. The title and body will stack on top of each other on account of the literal newlines:

## Nested text[‚Äã](#nested-text "Direct link to Nested text")

Both Android and iOS allow you to display formatted text by annotating ranges of a string with specific formatting like bold or colored text (`NSAttributedString` on iOS, `SpannableString` on Android). In practice, this is very tedious. For React Native, we decided to use the web paradigm for this, where you can nest text to achieve the same effect.

Behind the scenes, React Native converts this to a flat `NSAttributedString` or `SpannableString` that contains the following information:

```
"I am bold and red"
0-9: bold
9-17: bold, red
```

## Containers[‚Äã](#containers "Direct link to Containers")

The `<Text>` element is unique relative to layout: everything inside is no longer using the Flexbox layout but using text layout. This means that elements inside of a `<Text>` are no longer rectangles, but wrap when they see the end of the line.

tsx

```
<Text>
  <Text>First part and </Text>
  <Text>second part</Text>
</Text>
// Text container: the text will be inline, if the space allows it
// |First part and second part|

// otherwise, the text will flow as if it was one
// |First part |
// |and second |
// |part       |

<View>
  <Text>First part and </Text>
  <Text>second part</Text>
</View>
// View container: each text is its own block
// |First part and|
// |second part   |

// otherwise, the text will flow in its own block
// |First part |
// |and        |
// |second part|
```

## Limited Style Inheritance[‚Äã](#limited-style-inheritance "Direct link to Limited Style Inheritance")

On the web, the usual way to set a font family and size for the entire document is to take advantage of inherited CSS properties like so:

css

```
html {
  font-family:
    'lucida grande', tahoma, verdana, arial, sans-serif;
  font-size: 11px;
  color: #141823;
}
```

All elements in the document will inherit this font unless they or one of their parents specifies a new rule.

In React Native, we are more strict about it: **you must wrap all the text nodes inside of a `<Text>` component**. You cannot have a text node directly under a `<View>`.

tsx

```
// BAD: will raise exception, can't have a text node as child of a <View>
<View>
  Some text
</View>

// GOOD
<View>
  <Text>
    Some text
  </Text>
</View>
```

You also lose the ability to set up a default font for an entire subtree. Meanwhile, `fontFamily` only accepts a single font name, which is different from `font-family` in CSS. The recommended way to use consistent fonts and sizes across your application is to create a component `MyAppText` that includes them and use this component across your app. You can also use this component to make more specific components like `MyAppHeaderText` for other kinds of text.

tsx

```
<View>
  <MyAppText>
    Text styled with the default font for the entire application
  </MyAppText>
  <MyAppHeaderText>Text styled as a header</MyAppHeaderText>
</View>
```

Assuming that `MyAppText` is a component that only renders out its children into a `Text` component with styling, then `MyAppHeaderText` can be defined as follows:

tsx

```
const MyAppHeaderText = ({children}) => {
  return (
    <MyAppText>
      <Text style={{fontSize: 20}}>{children}</Text>
    </MyAppText>
  );
};
```

Composing `MyAppText` in this way ensures that we get the styles from a top-level component, but leaves us the ability to add/override them in specific use cases.

React Native still has the concept of style inheritance, but limited to text subtrees. In this case, the second part will be both bold and red.

tsx

```
<Text style={{fontWeight: 'bold'}}>
  I am bold
  <Text style={{color: 'red'}}>and red</Text>
</Text>
```

We believe that this more constrained way to style text will yield better apps:

* (Developer) React components are designed with strong isolation in mind: You should be able to drop a component anywhere in your application, trusting that as long as the props are the same, it will look and behave the same way. Text properties that could inherit from outside of the props would break this isolation.

* (Implementor) The implementation of React Native is also simplified. We do not need to have a `fontFamily` field on every single element, and we do not need to potentially traverse the tree up to the root every time we display a text node. The style inheritance is only encoded inside of the native Text component and doesn't leak to other components or the system itself.

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### `accessibilityHint`[‚Äã](#accessibilityhint "Direct link to accessibilityhint")

An accessibility hint helps users understand what will happen when they perform an action on the accessibility element when that result is not clear from the accessibility label.

| Type   |
| ------ |
| string |

***

### `accessibilityLanguage`iOS[‚Äã](#accessibilitylanguage-ios "Direct link to accessibilitylanguage-ios")

A value indicating which language should be used by the screen reader when the user interacts with the element. It should follow the [BCP 47 specification](https://www.rfc-editor.org/info/bcp47).

See the [iOS `accessibilityLanguage` doc](https://developer.apple.com/documentation/objectivec/nsobject/1615192-accessibilitylanguage) for more information.

| Type   |
| ------ |
| string |

***

### `accessibilityLabel`[‚Äã](#accessibilitylabel "Direct link to accessibilitylabel")

Overrides the text that's read by the screen reader when the user interacts with the element. By default, the label is constructed by traversing all the children and accumulating all the `Text` nodes separated by space.

| Type   |
| ------ |
| string |

***

### `accessibilityRole`[‚Äã](#accessibilityrole "Direct link to accessibilityrole")

Tells the screen reader to treat the currently focused on element as having a specific role.

On iOS, these roles map to corresponding Accessibility Traits. Image button has the same functionality as if the trait was set to both 'image' and 'button'. See the [Accessibility guide](/docs/accessibility.md#accessibilitytraits-ios) for more information.

On Android, these roles have similar functionality on TalkBack as adding Accessibility Traits does on Voiceover in iOS

| Type                                                          |
| ------------------------------------------------------------- |
| [AccessibilityRole](/docs/accessibility.md#accessibilityrole) |

***

### `accessibilityState`[‚Äã](#accessibilitystate "Direct link to accessibilitystate")

Tells the screen reader to treat the currently focused on element as being in a specific state.

You can provide one state, no state, or multiple states. The states must be passed in through an object, e.g. `{selected: true, disabled: true}`.

| Type                                                            |
| --------------------------------------------------------------- |
| [AccessibilityState](/docs/accessibility.md#accessibilitystate) |

***

### `accessibilityActions`[‚Äã](#accessibilityactions "Direct link to accessibilityactions")

Accessibility actions allow an assistive technology to programmatically invoke the actions of a component. The `accessibilityActions` property should contain a list of action objects. Each action object should contain the field name and label.

See the [Accessibility guide](/docs/accessibility.md#accessibility-actions) for more information.

| Type  | Required |
| ----- | -------- |
| array | No       |

***

### `onAccessibilityAction`[‚Äã](#onaccessibilityaction "Direct link to onaccessibilityaction")

Invoked when the user performs the accessibility actions. The only argument to this function is an event containing the name of the action to perform.

See the [Accessibility guide](/docs/accessibility.md#accessibility-actions) for more information.

| Type     | Required |
| -------- | -------- |
| function | No       |

***

### `accessible`[‚Äã](#accessible "Direct link to accessible")

When set to `true`, indicates that the view is an accessibility element.

See the [Accessibility guide](/docs/accessibility.md#accessible-ios-android) for more information.

| Type    | Default |
| ------- | ------- |
| boolean | `true`  |

***

### `adjustsFontSizeToFit`[‚Äã](#adjustsfontsizetofit "Direct link to adjustsfontsizetofit")

Specifies whether fonts should be scaled down automatically to fit given style constraints.

| Type    | Default |
| ------- | ------- |
| boolean | `false` |

***

### `allowFontScaling`[‚Äã](#allowfontscaling "Direct link to allowfontscaling")

Specifies whether fonts should scale to respect Text Size accessibility settings.

| Type    | Default |
| ------- | ------- |
| boolean | `true`  |

***

### `android_hyphenationFrequency`Android[‚Äã](#android_hyphenationfrequency-android "Direct link to android_hyphenationfrequency-android")

Sets the frequency of automatic hyphenation to use when determining word breaks on Android API Level 23+.

| Type                                | Default  |
| ----------------------------------- | -------- |
| enum(`'none'`, `'normal'`,`'full'`) | `'none'` |

***

### `aria-busy`[‚Äã](#aria-busy "Direct link to aria-busy")

Indicates an element is being modified and that assistive technologies may want to wait until the changes are complete before informing the user about the update.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-checked`[‚Äã](#aria-checked "Direct link to aria-checked")

Indicates the state of a checkable element. This field can either take a boolean or the "mixed" string to represent mixed checkboxes.

| Type             | Default |
| ---------------- | ------- |
| boolean, 'mixed' | false   |

***

### `aria-disabled`[‚Äã](#aria-disabled "Direct link to aria-disabled")

Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-expanded`[‚Äã](#aria-expanded "Direct link to aria-expanded")

Indicates whether an expandable element is currently expanded or collapsed.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-label`[‚Äã](#aria-label "Direct link to aria-label")

Defines a string value that labels an interactive element.

| Type   |
| ------ |
| string |

***

### `aria-selected`[‚Äã](#aria-selected "Direct link to aria-selected")

Indicates whether a selectable element is currently selected or not.

| Type    |
| ------- |
| boolean |

### `dataDetectorType`Android[‚Äã](#datadetectortype-android "Direct link to datadetectortype-android")

Determines the types of data converted to clickable URLs in the text element. By default, no data types are detected.

You can provide only one type.

| Type                                                          | Default  |
| ------------------------------------------------------------- | -------- |
| enum(`'phoneNumber'`, `'link'`, `'email'`, `'none'`, `'all'`) | `'none'` |

***

### `disabled`Android[‚Äã](#disabled-android "Direct link to disabled-android")

Specifies the disabled state of the text view for testing purposes.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `dynamicTypeRamp`iOS[‚Äã](#dynamictyperamp-ios "Direct link to dynamictyperamp-ios")

The [Dynamic Type](https://developer.apple.com/documentation/uikit/uifont/scaling_fonts_automatically) ramp to apply to this element on iOS.

| Type                                                                                                                                                     | Default  |
| -------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| enum(`'caption2'`, `'caption1'`, `'footnote'`, `'subheadline'`, `'callout'`, `'body'`, `'headline'`, `'title3'`, `'title2'`, `'title1'`, `'largeTitle'`) | `'body'` |

***

### `ellipsizeMode`[‚Äã](#ellipsizemode "Direct link to ellipsizemode")

When `numberOfLines` is set, this prop defines how the text will be truncated. `numberOfLines` must be set in conjunction with this prop.

This can be one of the following values:

* `head` - The line is displayed so that the end fits in the container and the missing text at the beginning of the line is indicated by an ellipsis glyph. e.g., "...wxyz"
* `middle` - The line is displayed so that the beginning and end fit in the container and the missing text in the middle is indicated by an ellipsis glyph. "ab...yz"
* `tail` - The line is displayed so that the beginning fits in the container and the missing text at the end of the line is indicated by an ellipsis glyph. e.g., "abcd..."
* `clip` - Lines are not drawn past the edge of the text container.

note

On Android, when `numberOfLines` is set to a value higher than `1`, only `tail` value will work correctly.

| Type                                           | Default |
| ---------------------------------------------- | ------- |
| enum(`'head'`, `'middle'`, `'tail'`, `'clip'`) | `tail`  |

***

### `id`[‚Äã](#id "Direct link to id")

Used to locate this view from native code. Has precedence over `nativeID` prop.

| Type   |
| ------ |
| string |

***

### `maxFontSizeMultiplier`[‚Äã](#maxfontsizemultiplier "Direct link to maxfontsizemultiplier")

Specifies the largest possible scale a font can reach when `allowFontScaling` is enabled. Possible values:

* `null/undefined`: inherit from the parent node or the global default (0)
* `0`: no max, ignore parent/global default
* `>= 1`: sets the `maxFontSizeMultiplier` of this node to this value

| Type   | Default     |
| ------ | ----------- |
| number | `undefined` |

***

### `minimumFontScale`[‚Äã](#minimumfontscale "Direct link to minimumfontscale")

Specifies the smallest possible scale a font can reach when `adjustsFontSizeToFit` is enabled. (values 0.01-1.0).

| Type   |
| ------ |
| number |

***

### `nativeID`[‚Äã](#nativeid "Direct link to nativeid")

Used to locate this view from native code.

| Type   |
| ------ |
| string |

***

### `numberOfLines`[‚Äã](#numberoflines "Direct link to numberoflines")

Used to truncate the text with an ellipsis after computing the text layout, including line wrapping, such that the total number of lines does not exceed this number. Setting this property to `0` will result in unsetting this value, which means that no lines restriction will be applied.

This prop is commonly used with `ellipsizeMode`.

| Type   | Default |
| ------ | ------- |
| number | `0`     |

***

### `onLayout`[‚Äã](#onlayout "Direct link to onlayout")

Invoked on mount and on layout changes.

| Type                                   |
| -------------------------------------- |
| `({nativeEvent: LayoutEvent}) => void` |

***

### `onLongPress`[‚Äã](#onlongpress "Direct link to onlongpress")

This function is called on long press.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onMoveShouldSetResponder`[‚Äã](#onmoveshouldsetresponder "Direct link to onmoveshouldsetresponder")

Does this view want to "claim" touch responsiveness? This is called for every touch move on the `View` when it is not the responder.

| Type                                     |
| ---------------------------------------- |
| `({nativeEvent: PressEvent}) => boolean` |

***

### `onPress`[‚Äã](#onpress "Direct link to onpress")

Function called on user press, triggered after `onPressOut`.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onPressIn`[‚Äã](#onpressin "Direct link to onpressin")

Called immediately when a touch is engaged, before `onPressOut` and `onPress`.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onPressOut`[‚Äã](#onpressout "Direct link to onpressout")

Called when a touch is released.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onResponderGrant`[‚Äã](#onrespondergrant "Direct link to onrespondergrant")

The View is now responding to touch events. This is the time to highlight and show the user what is happening.

On Android, return true from this callback to prevent any other native components from becoming responder until this responder terminates.

| Type                                             |
| ------------------------------------------------ |
| `({nativeEvent: PressEvent}) => void ÔΩú boolean` |

***

### `onResponderMove`[‚Äã](#onrespondermove "Direct link to onrespondermove")

The user is moving their finger.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onResponderRelease`[‚Äã](#onresponderrelease "Direct link to onresponderrelease")

Fired at the end of the touch.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onResponderTerminate`[‚Äã](#onresponderterminate "Direct link to onresponderterminate")

The responder has been taken from the `View`. Might be taken by other views after a call to `onResponderTerminationRequest`, or might be taken by the OS without asking (e.g., happens with control center/ notification center on iOS)

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onResponderTerminationRequest`[‚Äã](#onresponderterminationrequest "Direct link to onresponderterminationrequest")

Some other `View` wants to become a responder and is asking this `View` to release its responder. Returning `true` allows its release.

| Type                                     |
| ---------------------------------------- |
| `({nativeEvent: PressEvent}) => boolean` |

***

### `onStartShouldSetResponderCapture`[‚Äã](#onstartshouldsetrespondercapture "Direct link to onstartshouldsetrespondercapture")

If a parent `View` wants to prevent a child `View` from becoming a responder on a touch start, it should have this handler which returns `true`.

| Type                                     |
| ---------------------------------------- |
| `({nativeEvent: PressEvent}) => boolean` |

***

### `onTextLayout`[‚Äã](#ontextlayout "Direct link to ontextlayout")

Invoked on Text layout change.

| Type                                                          |
| ------------------------------------------------------------- |
| ([`TextLayoutEvent`](/docs/text.md#textlayoutevent)) => mixed |

***

### `pressRetentionOffset`[‚Äã](#pressretentionoffset "Direct link to pressretentionoffset")

When the scroll view is disabled, this defines how far your touch may move off of the button, before deactivating the button. Once deactivated, try moving it back and you'll see that the button is once again reactivated! Move it back and forth several times while the scroll view is disabled. Ensure you pass in a constant to reduce memory allocations.

| Type                          |
| ----------------------------- |
| [Rect](/docs/rect.md), number |

***

### `ref`[‚Äã](#ref "Direct link to ref")

A ref setter that will be assigned an [element node](/docs/element-nodes.md) when mounted.

Note that `Text` components don't provide text nodes, the same way that paragraph elements (`<p>`) on Web are element nodes instead of text nodes. Text nodes can be found as their child nodes instead.

***

### `role`[‚Äã](#role "Direct link to role")

`role` communicates the purpose of a component to the user of an assistive technology. Has precedence over the [`accessibilityRole`](/docs/text.md#accessibilityrole) prop.

| Type                                |
| ----------------------------------- |
| [Role](/docs/accessibility.md#role) |

***

### `selectable`[‚Äã](#selectable "Direct link to selectable")

Lets the user select text, to use the native copy and paste functionality.

| Type    | Default |
| ------- | ------- |
| boolean | `false` |

***

### `selectionColor`Android[‚Äã](#selectioncolor-android "Direct link to selectioncolor-android")

The highlight color of the text.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `style`[‚Äã](#style "Direct link to style")

| Type                                                                                   |
| -------------------------------------------------------------------------------------- |
| [Text Style](/docs/text-style-props.md), [View Style Props](/docs/view-style-props.md) |

***

### `suppressHighlighting`iOS[‚Äã](#suppresshighlighting-ios "Direct link to suppresshighlighting-ios")

When `true`, no visual change is made when text is pressed down. By default, a gray oval highlights the text on press down.

| Type    | Default |
| ------- | ------- |
| boolean | `false` |

***

### `testID`[‚Äã](#testid "Direct link to testid")

Used to locate this view in end-to-end tests.

| Type   |
| ------ |
| string |

***

### `textBreakStrategy`Android[‚Äã](#textbreakstrategy-android "Direct link to textbreakstrategy-android")

Set text break strategy on Android API Level 23+, possible values are `simple`, `highQuality`, `balanced`.

| Type                                            | Default       |
| ----------------------------------------------- | ------------- |
| enum(`'simple'`, `'highQuality'`, `'balanced'`) | `highQuality` |

***

### `lineBreakStrategyIOS`iOS[‚Äã](#linebreakstrategyios-ios "Direct link to linebreakstrategyios-ios")

Set line break strategy on iOS 14+. Possible values are `none`, `standard`, `hangul-word` and `push-out`.

| Type                                                        | Default  |
| ----------------------------------------------------------- | -------- |
| enum(`'none'`, `'standard'`, `'hangul-word'`, `'push-out'`) | `'none'` |

## Type Definitions[‚Äã](#type-definitions "Direct link to Type Definitions")

### TextLayout[‚Äã](#textlayout "Direct link to TextLayout")

`TextLayout` object is a part of [`TextLayoutEvent`](/docs/text.md#textlayoutevent) callback and contains the measurement data for `Text` line.

#### Example[‚Äã](#example "Direct link to Example")

js

```
{
    capHeight: 10.496,
    ascender: 14.624,
    descender: 4,
    width: 28.224,
    height: 18.624,
    xHeight: 6.048,
    x: 0,
    y: 0
}
```

#### Properties[‚Äã](#properties "Direct link to Properties")

| Name      | Type   | Optional | Description                                                         |
| --------- | ------ | -------- | ------------------------------------------------------------------- |
| ascender  | number | No       | The line ascender height after the text layout changes.             |
| capHeight | number | No       | Height of capital letter above the baseline.                        |
| descender | number | No       | The line descender height after the text layout changes.            |
| height    | number | No       | Height of the line after the text layout changes.                   |
| width     | number | No       | Width of the line after the text layout changes.                    |
| x         | number | No       | Line X coordinate inside the Text component.                        |
| xHeight   | number | No       | Distance between the baseline and median of the line (corpus size). |
| y         | number | No       | Line Y coordinate inside the Text component.                        |

### TextLayoutEvent[‚Äã](#textlayoutevent "Direct link to TextLayoutEvent")

`TextLayoutEvent` object is returned in the callback as a result of a component layout change. It contains a key called `lines` with a value which is an array containing [`TextLayout`](/docs/text.md#textlayout) object corresponded to every rendered text line.

#### Example[‚Äã](#example-1 "Direct link to Example")

js

```
{
  lines: [
    TextLayout,
    TextLayout,
    // ...
  ];
  target: 1127;
}
```

#### Properties[‚Äã](#properties-1 "Direct link to Properties")

| Name   | Type                                             | Optional | Description                                           |
| ------ | ------------------------------------------------ | -------- | ----------------------------------------------------- |
| lines  | array of [TextLayout](/docs/text.md#textlayout)s | No       | Provides the TextLayout data for every rendered line. |
| target | number                                           | No       | The node id of the element.                           |


---

# Text nodes

Text nodes represent raw text content on the tree (similar to [`Text`](https://developer.mozilla.org/en-US/docs/Web/API/Text) nodes on Web). They are not directly accessible via `refs`, but can be accessed using methods like [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes) on element refs.

***

## Reference[‚Äã](#reference "Direct link to Reference")

### Web-compatible API[‚Äã](#web-compatible-api "Direct link to Web-compatible API")

From [`CharacterData`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData):

* Properties

  <!-- -->

  * [`data`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData/data)
  * [`length`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData/length)
  * [`nextElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData/nextElementSibling)
  * [`previousElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData/previousElementSibling)

* Methods
  <!-- -->
  * [`substringData()`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData/substringData)

From [`Node`](https://developer.mozilla.org/en-US/docs/Web/API/Node):

* Properties

  <!-- -->

  * [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes)
  * [`firstChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/firstChild)
  * [`isConnected`](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected)
  * [`lastChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/lastChild)
  * [`nextSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling)
  * [`nodeName`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeName)
  * [`nodeType`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType)
  * [`nodeValue`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeValue)
  * [`ownerDocument`](https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument)
    * ‚ÑπÔ∏è Will return the [document instance](/docs/next/document-instances) where this component was rendered.
  * [`parentElement`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentElement)
  * [`parentNode`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentNode)
  * [`previousSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling)
  * [`textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent)

* Methods

  <!-- -->

  * [`compareDocumentPosition()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition)
  * [`contains()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/contains)
  * [`getRootNode()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/getRootNode)
    * ‚ÑπÔ∏è Will return a reference to itself if the component is not mounted.
  * [`hasChildNodes()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/hasChildNodes)


---

# Text Style Props

### Example[‚Äã](#example "Direct link to Example")

<!-- -->

* TypeScript
* JavaScript

# Reference

## Props[‚Äã](#props "Direct link to Props")

### `color`[‚Äã](#color "Direct link to color")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `fontFamily`[‚Äã](#fontfamily "Direct link to fontfamily")

| Type   |
| ------ |
| string |

The generic font families `system-ui`, `ui-sans-serif`, `ui-serif`, `ui-monospace`, and `ui-rounded` are supported on iOS.

***

### `fontSize`[‚Äã](#fontsize "Direct link to fontsize")

| Type   |
| ------ |
| number |

***

### `fontStyle`[‚Äã](#fontstyle "Direct link to fontstyle")

| Type                         |
| ---------------------------- |
| enum(`'normal'`, `'italic'`) |

***

### `fontWeight`[‚Äã](#fontweight "Direct link to fontweight")

Specifies font weight. The values `'normal'` and `'bold'` are supported for most fonts. Not all fonts have a variant for each of the numeric values, in that case the closest one is chosen.

| Type                                                                                                                  | Default    |
| --------------------------------------------------------------------------------------------------------------------- | ---------- |
| enum(`'normal'`, `'bold'`, `'100'`, `'200'`, `'300'`, `'400'`, `'500'`, `'600'`, `'700'`, `'800'`, `'900'`) or number | `'normal'` |

***

### `includeFontPadding`Android[‚Äã](#includefontpadding-android "Direct link to includefontpadding-android")

Set to `false` to remove extra font padding intended to make space for certain ascenders / descenders. With some fonts, this padding can make text look slightly misaligned when centered vertically. For best results also set `textAlignVertical` to `center`.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `fontVariant`[‚Äã](#fontvariant "Direct link to fontvariant")

Allows you to set all the font variants for a font. Can be set by using an array of enums or a space-separated string e.g. `'small-caps common-ligatures'`.

| Type                                                                                                                 | Default |
| -------------------------------------------------------------------------------------------------------------------- | ------- |
| array of enum(`'small-caps'`, `'oldstyle-nums'`, `'lining-nums'`, `'tabular-nums'`, `'proportional-nums'`) or string | `[]`    |

***

### `letterSpacing`[‚Äã](#letterspacing "Direct link to letterspacing")

Increase or decrease the spacing between characters. By default there is no extra letter spacing.

| Type   |
| ------ |
| number |

***

### `lineHeight`[‚Äã](#lineheight "Direct link to lineheight")

Numeric value that controls the vertical spacing between lines of text within a text element. It specifies the distance between the baselines of consecutive lines of text.

| Type   |
| ------ |
| number |

***

### `textAlign`[‚Äã](#textalign "Direct link to textalign")

Specifies text alignment. On Android, the value 'justify' is only supported on Oreo (8.0) or above (API level >= 26). The value will fallback to `left` on lower Android versions.

| Type                                                         | Default  |
| ------------------------------------------------------------ | -------- |
| enum(`'auto'`, `'left'`, `'right'`, `'center'`, `'justify'`) | `'auto'` |

***

### `textAlignVertical`Android[‚Äã](#textalignvertical-android "Direct link to textalignvertical-android")

| Type                                            | Default  |
| ----------------------------------------------- | -------- |
| enum(`'auto'`, `'top'`, `'bottom'`, `'center'`) | `'auto'` |

***

### `textDecorationColor`iOS[‚Äã](#textdecorationcolor-ios "Direct link to textdecorationcolor-ios")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `textDecorationLine`[‚Äã](#textdecorationline "Direct link to textdecorationline")

| Type                                                                        | Default  |
| --------------------------------------------------------------------------- | -------- |
| enum(`'none'`, `'underline'`, `'line-through'`, `'underline line-through'`) | `'none'` |

***

### `textDecorationStyle`iOS[‚Äã](#textdecorationstyle-ios "Direct link to textdecorationstyle-ios")

| Type                                                | Default   |
| --------------------------------------------------- | --------- |
| enum(`'solid'`, `'double'`, `'dotted'`, `'dashed'`) | `'solid'` |

***

### `textShadowColor`[‚Äã](#textshadowcolor "Direct link to textshadowcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `textShadowOffset`[‚Äã](#textshadowoffset "Direct link to textshadowoffset")

| Type                                        |
| ------------------------------------------- |
| object: `{width?: number, height?: number}` |

***

### `textShadowRadius`[‚Äã](#textshadowradius "Direct link to textshadowradius")

| Type   |
| ------ |
| number |

***

### `textTransform`[‚Äã](#texttransform "Direct link to texttransform")

| Type                                                         | Default  |
| ------------------------------------------------------------ | -------- |
| enum(`'none'`, `'uppercase'`, `'lowercase'`, `'capitalize'`) | `'none'` |

***

### `verticalAlign`Android[‚Äã](#verticalalign-android "Direct link to verticalalign-android")

| Type                                            | Default  |
| ----------------------------------------------- | -------- |
| enum(`'auto'`, `'top'`, `'bottom'`, `'middle'`) | `'auto'` |

***

### `writingDirection`iOS[‚Äã](#writingdirection-ios "Direct link to writingdirection-ios")

| Type                             | Default  |
| -------------------------------- | -------- |
| enum(`'auto'`, `'ltr'`, `'rtl'`) | `'auto'` |

***

### `userSelect`[‚Äã](#userselect "Direct link to userselect")

It allows the user to select text and to use the native copy and paste functionality. Has precedence over the `selectable` prop.

| Type                                                     | Default |
| -------------------------------------------------------- | ------- |
| enum(`'auto'`, `'text'`, `'none'`, `'contain'`, `'all'`) | `none`  |


---

# TextInput

A foundational component for inputting text into the app via a keyboard. Props provide configurability for several features, such as auto-correction, auto-capitalization, placeholder text, and different keyboard types, such as a numeric keypad.

The most basic use case is to plop down a `TextInput` and subscribe to the `onChangeText` events to read the user input. There are also other events, such as `onSubmitEditing` and `onFocus` that can be subscribed to. A minimal example:

Two methods exposed via the native element are `.focus()` and `.blur()` that will focus or blur the TextInput programmatically.

Note that some props are only available with `multiline={true/false}`. Additionally, border styles that apply to only one side of the element (e.g., `borderBottomColor`, `borderLeftWidth`, etc.) will not be applied if `multiline=true`. To achieve the same effect, you can wrap your `TextInput` in a `View`:

`TextInput` has a border at the bottom of its view by default. This border has its padding set by the background image provided by the system, and it cannot be changed. Solutions to avoid this are to either not set height explicitly, in which case the system will take care of displaying the border in the correct position, or to not display the border by setting `underlineColorAndroid` to transparent.

Note that on Android performing text selection in an input can change the app's activity `windowSoftInputMode` param to `adjustResize`. This may cause issues with components that have position: 'absolute' while the keyboard is active. To avoid this behavior either specify `windowSoftInputMode` in AndroidManifest.xml ( <https://developer.android.com/guide/topics/manifest/activity-element.html> ) or control this param programmatically with native code.

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [View Props](/docs/view.md#props)[‚Äã](#view-props "Direct link to view-props")

Inherits [View Props](/docs/view.md#props).

***

### `allowFontScaling`[‚Äã](#allowfontscaling "Direct link to allowfontscaling")

Specifies whether fonts should scale to respect Text Size accessibility settings. The default is `true`.

| Type |
| ---- |
| bool |

***

### `autoCapitalize`[‚Äã](#autocapitalize "Direct link to autocapitalize")

Tells `TextInput` to automatically capitalize certain characters. This property is not supported by some keyboard types such as `name-phone-pad`.

* `characters`: all characters.
* `words`: first letter of each word.
* `sentences`: first letter of each sentence (*default*).
* `none`: don't auto capitalize anything.

| Type                                             |
| ------------------------------------------------ |
| enum('none', 'sentences', 'words', 'characters') |

***

### `autoComplete`[‚Äã](#autocomplete "Direct link to autocomplete")

Specifies autocomplete hints for the system, so it can provide autofill. On Android, the system will always attempt to offer autofill by using heuristics to identify the type of content. To disable autocomplete, set `autoComplete` to `off`.

The following values work across platforms:

* `additional-name`
* `address-line1`
* `address-line2`
* `birthdate-day` (iOS 17+)
* `birthdate-full` (iOS 17+)
* `birthdate-month` (iOS 17+)
* `birthdate-year` (iOS 17+)
* `cc-csc` (iOS 17+)
* `cc-exp` (iOS 17+)
* `cc-exp-day` (iOS 17+)
* `cc-exp-month` (iOS 17+)
* `cc-exp-year` (iOS 17+)
* `cc-number`
* `country`
* `current-password`
* `email`
* `family-name`
* `given-name`
* `honorific-prefix`
* `honorific-suffix`
* `name`
* `new-password`
* `off`
* `one-time-code`
* `postal-code`
* `street-address`
* `tel`
* `username`

iOS

The following values work on iOS only:

* `cc-family-name` (iOS 17+)
* `cc-given-name` (iOS 17+)
* `cc-middle-name` (iOS 17+)
* `cc-name` (iOS 17+)
* `cc-type` (iOS 17+)
* `nickname`
* `organization`
* `organization-title`
* `url`

Android

The following values work on Android only:

* `gender`
* `name-family`
* `name-given`
* `name-middle`
* `name-middle-initial`
* `name-prefix`
* `name-suffix`
* `password`
* `password-new`
* `postal-address`
* `postal-address-country`
* `postal-address-extended`
* `postal-address-extended-postal-code`
* `postal-address-locality`
* `postal-address-region`
* `sms-otp`
* `tel-country-code`
* `tel-device`
* `tel-national`
* `username-new`

| Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| enum('additional-name', 'address-line1', 'address-line2', 'birthdate-day', 'birthdate-full', 'birthdate-month', 'birthdate-year', 'cc-csc', 'cc-exp', 'cc-exp-day', 'cc-exp-month', 'cc-exp-year', 'cc-number', 'country', 'current-password', 'email', 'family-name', 'given-name', 'honorific-prefix', 'honorific-suffix', 'name', 'new-password', 'off', 'one-time-code', 'postal-code', 'street-address', 'tel', 'username', 'cc-family-name', 'cc-given-name', 'cc-middle-name', 'cc-name', 'cc-type', 'nickname', 'organization', 'organization-title', 'url', 'gender', 'name-family', 'name-given', 'name-middle', 'name-middle-initial', 'name-prefix', 'name-suffix', 'password', 'password-new', 'postal-address', 'postal-address-country', 'postal-address-extended', 'postal-address-extended-postal-code', 'postal-address-locality', 'postal-address-region', 'sms-otp', 'tel-country-code', 'tel-device', 'tel-national', 'username-new') |

***

### `autoCorrect`[‚Äã](#autocorrect "Direct link to autocorrect")

If `false`, disables auto-correct. The default value is `true`.

| Type |
| ---- |
| bool |

***

### `autoFocus`[‚Äã](#autofocus "Direct link to autofocus")

If `true`, focuses the input. The default value is `false`.

| Type |
| ---- |
| bool |

***

### `blurOnSubmit`[‚Äã](#bluronsubmit "Direct link to bluronsubmit")

Deprecated

Note that `submitBehavior` now takes the place of `blurOnSubmit` and will override any behavior defined by `blurOnSubmit`. See [submitBehavior](/docs/textinput.md#submitbehavior).

If `true`, the text field will blur when submitted. The default value is true for single-line fields and false for multiline fields. Note that for multiline fields, setting `blurOnSubmit` to `true` means that pressing return will blur the field and trigger the `onSubmitEditing` event instead of inserting a newline into the field.

| Type |
| ---- |
| bool |

***

### `caretHidden`[‚Äã](#carethidden "Direct link to carethidden")

If `true`, caret is hidden. The default value is `false`.

| Type |
| ---- |
| bool |

***

### `clearButtonMode`iOS[‚Äã](#clearbuttonmode-ios "Direct link to clearbuttonmode-ios")

When the clear button should appear on the right side of the text view. This property is supported only for single-line TextInput component. The default value is `never`.

| Type                                                       |
| ---------------------------------------------------------- |
| enum('never', 'while-editing', 'unless-editing', 'always') |

***

### `clearTextOnFocus`iOS[‚Äã](#cleartextonfocus-ios "Direct link to cleartextonfocus-ios")

If `true`, clears the text field automatically when editing begins.

| Type |
| ---- |
| bool |

***

### `contextMenuHidden`[‚Äã](#contextmenuhidden "Direct link to contextmenuhidden")

If `true`, context menu is hidden. The default value is `false`.

| Type |
| ---- |
| bool |

***

### `dataDetectorTypes`iOS[‚Äã](#datadetectortypes-ios "Direct link to datadetectortypes-ios")

Determines the types of data converted to clickable URLs in the text input. Only valid if `multiline={true}` and `editable={false}`. By default no data types are detected.

You can provide one type or an array of many types.

Possible values for `dataDetectorTypes` are:

* `'phoneNumber'`
* `'link'`
* `'address'`
* `'calendarEvent'`
* `'none'`
* `'all'`

| Type                                                                                                                                                     |
| -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| enum('phoneNumber', 'link', 'address', 'calendarEvent', 'none', 'all'), ,array of enum('phoneNumber', 'link', 'address', 'calendarEvent', 'none', 'all') |

***

### `defaultValue`[‚Äã](#defaultvalue "Direct link to defaultvalue")

Provides an initial value that will change when the user starts typing. Useful for use-cases where you do not want to deal with listening to events and updating the value prop to keep the controlled state in sync.

| Type   |
| ------ |
| string |

***

### `disableKeyboardShortcuts`iOS[‚Äã](#disablekeyboardshortcuts-ios "Direct link to disablekeyboardshortcuts-ios")

If `true`, the keyboard shortcuts (undo/redo and copy buttons) are disabled.

| Type | Default |
| ---- | ------- |
| bool | `false` |

***

### `cursorColor`Android[‚Äã](#cursorcolor-android "Direct link to cursorcolor-android")

When provided it will set the color of the cursor (or "caret") in the component. Unlike the behavior of `selectionColor` the cursor color will be set independently from the color of the text selection box.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `disableFullscreenUI`Android[‚Äã](#disablefullscreenui-android "Direct link to disablefullscreenui-android")

When `false`, if there is a small amount of space available around a text input (e.g. landscape orientation on a phone), the OS may choose to have the user edit the text inside of a full screen text input mode. When `true`, this feature is disabled and users will always edit the text directly inside of the text input. Defaults to `false`.

| Type |
| ---- |
| bool |

***

### `editable`[‚Äã](#editable "Direct link to editable")

If `false`, text is not editable. The default value is `true`.

| Type |
| ---- |
| bool |

***

### `enablesReturnKeyAutomatically`iOS[‚Äã](#enablesreturnkeyautomatically-ios "Direct link to enablesreturnkeyautomatically-ios")

If `true`, the keyboard disables the return key when there is no text and automatically enables it when there is text. The default value is `false`.

| Type |
| ---- |
| bool |

***

### `enterKeyHint`[‚Äã](#enterkeyhint "Direct link to enterkeyhint")

Determines what text should be shown to the return key. Has precedence over the `returnKeyType` prop.

The following values work across platforms:

* `done`
* `next`
* `search`
* `send`
* `go`

*Android Only*

The following values work on Android only:

* `previous`

*iOS Only*

The following values work on iOS only:

* `enter`

| Type                                                              |
| ----------------------------------------------------------------- |
| enum('enter', 'done', 'next', 'previous', 'search', 'send', 'go') |

***

### `importantForAutofill`Android[‚Äã](#importantforautofill-android "Direct link to importantforautofill-android")

Tells the operating system whether the individual fields in your app should be included in a view structure for autofill purposes on Android API Level 26+. Possible values are `auto`, `no`, `noExcludeDescendants`, `yes`, and `yesExcludeDescendants`. The default value is `auto`.

* `auto`: Let the Android System use its heuristics to determine if the view is important for autofill.
* `no`: This view isn't important for autofill.
* `noExcludeDescendants`: This view and its children aren't important for autofill.
* `yes`: This view is important for autofill.
* `yesExcludeDescendants`: This view is important for autofill, but its children aren't important for autofill.

| Type                                                                       |
| -------------------------------------------------------------------------- |
| enum('auto', 'no', 'noExcludeDescendants', 'yes', 'yesExcludeDescendants') |

***

### `inlineImageLeft`Android[‚Äã](#inlineimageleft-android "Direct link to inlineimageleft-android")

If defined, the provided image resource will be rendered on the left. The image resource must be inside `/android/app/src/main/res/drawable` and referenced like

```
<TextInput
 inlineImageLeft='search_icon'
/>
```

| Type   |
| ------ |
| string |

***

### `inlineImagePadding`Android[‚Äã](#inlineimagepadding-android "Direct link to inlineimagepadding-android")

Padding between the inline image, if any, and the text input itself.

| Type   |
| ------ |
| number |

***

### `inputAccessoryViewID`iOS[‚Äã](#inputaccessoryviewid-ios "Direct link to inputaccessoryviewid-ios")

An optional identifier which links a custom [InputAccessoryView](/docs/inputaccessoryview.md) to this text input. The InputAccessoryView is rendered above the keyboard when this text input is focused.

| Type   |
| ------ |
| string |

***

### `inputAccessoryViewButtonLabel`iOS[‚Äã](#inputaccessoryviewbuttonlabel-ios "Direct link to inputaccessoryviewbuttonlabel-ios")

An optional label that overrides the default [InputAccessoryView](/docs/inputaccessoryview.md) button label.

By default, the default button label is not localized. Use this property to provide a localized version.

| Type   |
| ------ |
| string |

***

### `inputMode`[‚Äã](#inputmode "Direct link to inputmode")

Works like the `inputmode` attribute in HTML, it determines which keyboard to open, e.g. `numeric` and has precedence over `keyboardType`.

Support the following values:

* `none`
* `text`
* `decimal`
* `numeric`
* `tel`
* `search`
* `email`
* `url`

| Type                                                                        |
| --------------------------------------------------------------------------- |
| enum('decimal', 'email', 'none', 'numeric', 'search', 'tel', 'text', 'url') |

***

### `keyboardAppearance`iOS[‚Äã](#keyboardappearance-ios "Direct link to keyboardappearance-ios")

Determines the color of the keyboard.

| Type                             |
| -------------------------------- |
| enum('default', 'light', 'dark') |

***

### `keyboardType`[‚Äã](#keyboardtype "Direct link to keyboardtype")

Determines which keyboard to open, e.g.`numeric`.

See screenshots of all the types [here](https://davidl.fr/blog/keyboard-react-native-ios-android#all-react-native-keyboard-type-examples-i-os-on-the-left-android-on-the-right).

The following values work across platforms:

* `default`
* `number-pad`
* `decimal-pad`
* `numeric`
* `email-address`
* `phone-pad`
* `url`

*iOS Only*

The following values work on iOS only:

* `ascii-capable`
* `numbers-and-punctuation`
* `name-phone-pad`
* `twitter`
* `web-search`

*Android Only*

The following values work on Android only:

* `visible-password`

| Type                                                                                                                                                                                                    |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| enum('default', 'email-address', 'numeric', 'phone-pad', 'ascii-capable', 'numbers-and-punctuation', 'url', 'number-pad', 'name-phone-pad', 'decimal-pad', 'twitter', 'web-search', 'visible-password') |

***

### `lineBreakStrategyIOS`iOS[‚Äã](#linebreakstrategyios-ios "Direct link to linebreakstrategyios-ios")

Set line break strategy on iOS 14+. Possible values are `none`, `standard`, `hangul-word` and `push-out`.

| Type                                                        | Default  |
| ----------------------------------------------------------- | -------- |
| enum(`'none'`, `'standard'`, `'hangul-word'`, `'push-out'`) | `'none'` |

***

### `lineBreakModeIOS`iOS[‚Äã](#linebreakmodeios-ios "Direct link to linebreakmodeios-ios")

Set line break mode on iOS. Possible values are `wordWrapping`, `char`, `clip`, `head`, `middle` and `tail`.

| Type                                                                       | Default          |
| -------------------------------------------------------------------------- | ---------------- |
| enum(`'wordWrapping'`, `'char'`, `'clip'`, `'head'`, `'middle'`, `'tail'`) | `'wordWrapping'` |

***

### `maxFontSizeMultiplier`[‚Äã](#maxfontsizemultiplier "Direct link to maxfontsizemultiplier")

Specifies largest possible scale a font can reach when `allowFontScaling` is enabled. Possible values:

* `null/undefined` (default): inherit from the parent node or the global default (0)
* `0`: no max, ignore parent/global default
* `>= 1`: sets the `maxFontSizeMultiplier` of this node to this value

| Type   |
| ------ |
| number |

***

### `maxLength`[‚Äã](#maxlength "Direct link to maxlength")

Limits the maximum number of characters that can be entered. Use this instead of implementing the logic in JS to avoid flicker.

| Type   |
| ------ |
| number |

***

### `multiline`[‚Äã](#multiline "Direct link to multiline")

If `true`, the text input can be multiple lines. The default value is `false`.

note

It is important to note that this aligns the text to the top on iOS, and centers it on Android. Use with `textAlignVertical` set to `top` for the same behavior in both platforms.

| Type |
| ---- |
| bool |

***

### `numberOfLines`[‚Äã](#numberoflines "Direct link to numberoflines")

note

`numberOfLines` on iOS is only available on the [New Architecture](/architecture/landing-page.md)

Sets the maximum number of lines for a `TextInput`. Use it with multiline set to `true` to be able to fill the lines.

| Type   |
| ------ |
| number |

***

### `onBlur`[‚Äã](#onblur "Direct link to onblur")

Callback that is called when the text input is blurred.

note

If you are attempting to access the `text` value from `nativeEvent` keep in mind that the resulting value you get can be `undefined` which can cause unintended errors. If you are trying to find the last value of TextInput, you can use the [`onEndEditing`](/docs/textinput.md#onendediting) event, which is fired upon completion of editing.

| Type                                   |
| -------------------------------------- |
| `({nativeEvent: TargetEvent}) => void` |

***

### `onChange`[‚Äã](#onchange "Direct link to onchange")

Callback that is called when the text input's text changes.

| Type                                                  |
| ----------------------------------------------------- |
| (`{nativeEvent: {eventCount, target, text}}`) => void |

***

### `onChangeText`[‚Äã](#onchangetext "Direct link to onchangetext")

Callback that is called when the text input's text changes. Changed text is passed as a single string argument to the callback handler.

| Type     |
| -------- |
| function |

***

### `onContentSizeChange`[‚Äã](#oncontentsizechange "Direct link to oncontentsizechange")

Callback that is called when the text input's content size changes.

Only called for multiline text inputs.

| Type                                                       |
| ---------------------------------------------------------- |
| (`{nativeEvent: {contentSize: {width, height} }}`) => void |

***

### `onEndEditing`[‚Äã](#onendediting "Direct link to onendediting")

Callback that is called when text input ends.

| Type     |
| -------- |
| function |

***

### `onPressIn`[‚Äã](#onpressin "Direct link to onpressin")

Callback that is called when a touch is engaged.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onPressOut`[‚Äã](#onpressout "Direct link to onpressout")

Callback that is called when a touch is released.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onFocus`[‚Äã](#onfocus "Direct link to onfocus")

Callback that is called when the text input is focused.

| Type                                   |
| -------------------------------------- |
| `({nativeEvent: TargetEvent}) => void` |

***

### `onKeyPress`[‚Äã](#onkeypress "Direct link to onkeypress")

Callback that is called when a key is pressed. This will be called with object where `keyValue` is `'Enter'` or `'Backspace'` for respective keys and the typed-in character otherwise including `' '` for space. Fires before `onChange` callbacks. Note: on Android only the inputs from soft keyboard are handled, not the hardware keyboard inputs.

| Type                                        |
| ------------------------------------------- |
| (`{nativeEvent: {key: keyValue} }`) => void |

***

### `onLayout`[‚Äã](#onlayout "Direct link to onlayout")

Invoked on mount and on layout changes.

| Type                                   |
| -------------------------------------- |
| `({nativeEvent: LayoutEvent}) => void` |

***

### `onScroll`[‚Äã](#onscroll "Direct link to onscroll")

Invoked on content scroll. May also contain other properties from `ScrollEvent` but on Android `contentSize` is not provided for performance reasons.

| Type                                                |
| --------------------------------------------------- |
| (`{nativeEvent: {contentOffset: {x, y} }}`) => void |

***

### `onSelectionChange`[‚Äã](#onselectionchange "Direct link to onselectionchange")

Callback that is called when the text input selection is changed.

| Type                                                  |
| ----------------------------------------------------- |
| (`{nativeEvent: {selection: {start, end} }}`) => void |

***

### `onSubmitEditing`[‚Äã](#onsubmitediting "Direct link to onsubmitediting")

Callback that is called when the text input's submit button is pressed.

| Type                                                  |
| ----------------------------------------------------- |
| (`{nativeEvent: {text, eventCount, target}}`) => void |

Note that on iOS this method isn't called when using `keyboardType="phone-pad"`.

***

### `placeholder`[‚Äã](#placeholder "Direct link to placeholder")

The string that will be rendered before text input has been entered.

| Type   |
| ------ |
| string |

***

### `placeholderTextColor`[‚Äã](#placeholdertextcolor "Direct link to placeholdertextcolor")

The text color of the placeholder string.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `readOnly`[‚Äã](#readonly "Direct link to readonly")

If `true`, text is not editable. The default value is `false`.

| Type |
| ---- |
| bool |

***

### `returnKeyLabel`Android[‚Äã](#returnkeylabel-android "Direct link to returnkeylabel-android")

Sets the return key to the label. Use it instead of `returnKeyType`.

| Type   |
| ------ |
| string |

***

### `returnKeyType`[‚Äã](#returnkeytype "Direct link to returnkeytype")

Determines how the return key should look. On Android you can also use `returnKeyLabel`.

*Cross platform*

The following values work across platforms:

* `done`
* `go`
* `next`
* `search`
* `send`

*Android Only*

The following values work on Android only:

* `none`
* `previous`

*iOS Only*

The following values work on iOS only:

* `default`
* `emergency-call`
* `google`
* `join`
* `route`
* `yahoo`

| Type                                                                                                                              |
| --------------------------------------------------------------------------------------------------------------------------------- |
| enum('done', 'go', 'next', 'search', 'send', 'none', 'previous', 'default', 'emergency-call', 'google', 'join', 'route', 'yahoo') |

### `rejectResponderTermination`iOS[‚Äã](#rejectrespondertermination-ios "Direct link to rejectrespondertermination-ios")

If `true`, allows TextInput to pass touch events to the parent component. This allows components such as SwipeableListView to be swipeable from the TextInput on iOS, as is the case on Android by default. If `false`, TextInput always asks to handle the input (except when disabled). The default value is `true`.

| Type |
| ---- |
| bool |

***

### `rows`Android[‚Äã](#rows-android "Direct link to rows-android")

Sets the number of lines for a `TextInput`. Use it with multiline set to `true` to be able to fill the lines.

| Type   |
| ------ |
| number |

***

### `scrollEnabled`iOS[‚Äã](#scrollenabled-ios "Direct link to scrollenabled-ios")

If `false`, scrolling of the text view will be disabled. The default value is `true`. Only works with `multiline={true}`.

| Type |
| ---- |
| bool |

***

### `secureTextEntry`[‚Äã](#securetextentry "Direct link to securetextentry")

If `true`, the text input obscures the text entered so that sensitive text like passwords stay secure. The default value is `false`. Does not work with `multiline={true}`.

| Type |
| ---- |
| bool |

***

### `selection`[‚Äã](#selection "Direct link to selection")

The start and end of the text input's selection. Set start and end to the same value to position the cursor.

| Type                                  |
| ------------------------------------- |
| object: `{start: number,end: number}` |

***

### `selectionColor`[‚Äã](#selectioncolor "Direct link to selectioncolor")

The highlight, selection handle and cursor color of the text input.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `selectionHandleColor`Android[‚Äã](#selectionhandlecolor-android "Direct link to selectionhandlecolor-android")

Sets the color of the selection handle. Unlike `selectionColor`, it allows the selection handle color to be customized independently of the selection's color.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `selectTextOnFocus`[‚Äã](#selecttextonfocus "Direct link to selecttextonfocus")

If `true`, all text will automatically be selected on focus.

| Type |
| ---- |
| bool |

***

### `showSoftInputOnFocus`[‚Äã](#showsoftinputonfocus "Direct link to showsoftinputonfocus")

When `false`, it will prevent the soft keyboard from showing when the field is focused. The default value is `true`.

| Type |
| ---- |
| bool |

***

### `smartInsertDelete`iOS[‚Äã](#smartinsertdelete-ios "Direct link to smartinsertdelete-ios")

If `false`, the iOS system will not insert an extra space after a paste operation neither delete one or two spaces after a cut or delete operation.

| Type | Default |
| ---- | ------- |
| bool | `true`  |

***

### `spellCheck`iOS[‚Äã](#spellcheck-ios "Direct link to spellcheck-ios")

If `false`, disables spell-check style (i.e. red underlines). The default value is inherited from `autoCorrect`.

| Type |
| ---- |
| bool |

***

### `submitBehavior`[‚Äã](#submitbehavior "Direct link to submitbehavior")

When the return key is pressed,

For single line inputs:

* `'newline'` defaults to `'blurAndSubmit'`
* `undefined` defaults to `'blurAndSubmit'`

For multiline inputs:

* `'newline'` adds a newline
* `undefined` defaults to `'newline'`

For both single line and multiline inputs:

* `'submit'` will only send a submit event and not blur the input
* `'blurAndSubmit`' will both blur the input and send a submit event

| Type                                       |
| ------------------------------------------ |
| enum('submit', 'blurAndSubmit', 'newline') |

***

### `textAlign`[‚Äã](#textalign "Direct link to textalign")

Align the input text to the left, center, or right sides of the input field.

Possible values for `textAlign` are:

* `left`
* `center`
* `right`

| Type                            |
| ------------------------------- |
| enum('left', 'center', 'right') |

***

### `textContentType`iOS[‚Äã](#textcontenttype-ios "Direct link to textcontenttype-ios")

Give the keyboard and the system information about the expected semantic meaning for the content that users enter.

note

[`autoComplete`](#autocomplete), provides the same functionality and is available for all platforms. You can use [`Platform.select`](/docs/next/platform#select) for differing platform behaviors.

Avoid using both `textContentType` and `autoComplete`. For backwards compatibility, `textContentType` takes precedence when both properties are set.

You can set `textContentType` to `username` or `password` to enable autofill of login details from the device keychain.

`newPassword` can be used to indicate a new password input the user may want to save in the keychain, and `oneTimeCode` can be used to indicate that a field can be autofilled by a code arriving in an SMS.

To disable autofill, set `textContentType` to `none`.

Possible values for `textContentType` are:

* `none`
* `addressCity`
* `addressCityAndState`
* `addressState`
* `birthdate` (iOS 17+)
* `birthdateDay` (iOS 17+)
* `birthdateMonth` (iOS 17+)
* `birthdateYear` (iOS 17+)
* `countryName`
* `creditCardExpiration` (iOS 17+)
* `creditCardExpirationMonth` (iOS 17+)
* `creditCardExpirationYear` (iOS 17+)
* `creditCardFamilyName` (iOS 17+)
* `creditCardGivenName` (iOS 17+)
* `creditCardMiddleName` (iOS 17+)
* `creditCardName` (iOS 17+)
* `creditCardNumber`
* `creditCardSecurityCode` (iOS 17+)
* `creditCardType` (iOS 17+)
* `emailAddress`
* `familyName`
* `fullStreetAddress`
* `givenName`
* `jobTitle`
* `location`
* `middleName`
* `name`
* `namePrefix`
* `nameSuffix`
* `newPassword`
* `nickname`
* `oneTimeCode`
* `organizationName`
* `password`
* `postalCode`
* `streetAddressLine1`
* `streetAddressLine2`
* `sublocality`
* `telephoneNumber`
* `URL`
* `username`

| Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| enum('none', 'addressCity', 'addressCityAndState', 'addressState', 'birthdate', 'birthdateDay', 'birthdateMonth', 'birthdateYear', 'countryName', 'creditCardExpiration', 'creditCardExpirationMonth', 'creditCardExpirationYear', 'creditCardFamilyName', 'creditCardGivenName', 'creditCardMiddleName', 'creditCardName', 'creditCardNumber', 'creditCardSecurityCode', 'creditCardType', 'emailAddress', 'familyName', 'fullStreetAddress', 'givenName', 'jobTitle', 'location', 'middleName', 'name', 'namePrefix', 'nameSuffix', 'newPassword', 'nickname', 'oneTimeCode', 'organizationName', 'password', 'postalCode', 'streetAddressLine1', 'streetAddressLine2', 'sublocality', 'telephoneNumber', 'URL', 'username') |

***

### `passwordRules`iOS[‚Äã](#passwordrules-ios "Direct link to passwordrules-ios")

When using `textContentType` as `newPassword` on iOS we can let the OS know the minimum requirements of the password so that it can generate one that will satisfy them. In order to create a valid string for `PasswordRules` take a look to the [Apple Docs](https://developer.apple.com/password-rules/).

tip

If passwords generation dialog doesn't appear please make sure that:

* AutoFill is enabled: **Settings** ‚Üí **Passwords & Accounts** ‚Üí toggle "On" the **AutoFill Passwords**,
* iCloud Keychain is used: **Settings** ‚Üí **Apple ID** ‚Üí **iCloud** ‚Üí **Keychain** ‚Üí toggle "On" the **iCloud Keychain**.

| Type   |
| ------ |
| string |

***

### `style`[‚Äã](#style "Direct link to style")

Note that not all Text styles are supported, an incomplete list of what is not supported includes:

* `borderLeftWidth`
* `borderTopWidth`
* `borderRightWidth`
* `borderBottomWidth`
* `borderTopLeftRadius`
* `borderTopRightRadius`
* `borderBottomRightRadius`
* `borderBottomLeftRadius`

[Styles](/docs/style.md)

| Type                        |
| --------------------------- |
| [Text](/docs/text.md#style) |

***

### `textBreakStrategy`Android[‚Äã](#textbreakstrategy-android "Direct link to textbreakstrategy-android")

Set text break strategy on Android API Level 23+, possible values are `simple`, `highQuality`, `balanced` The default value is `highQuality`.

| Type                                      |
| ----------------------------------------- |
| enum('simple', 'highQuality', 'balanced') |

***

### `underlineColorAndroid`Android[‚Äã](#underlinecolorandroid-android "Direct link to underlinecolorandroid-android")

The color of the `TextInput` underline.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `value`[‚Äã](#value "Direct link to value")

The value to show for the text input. `TextInput` is a controlled component, which means the native value will be forced to match this value prop if provided. For most uses, this works great, but in some cases this may cause flickering - one common cause is preventing edits by keeping value the same. In addition to setting the same value, either set `editable={false}`, or set/update `maxLength` to prevent unwanted edits without flicker.

| Type   |
| ------ |
| string |

## Methods[‚Äã](#methods "Direct link to Methods")

### `.focus()`[‚Äã](#focus "Direct link to focus")

tsx

```
focus();
```

Makes the native input request focus.

### `.blur()`[‚Äã](#blur "Direct link to blur")

tsx

```
blur();
```

Makes the native input lose focus.

### `clear()`[‚Äã](#clear "Direct link to clear")

tsx

```
clear();
```

Removes all text from the `TextInput`.

***

### `isFocused()`[‚Äã](#isfocused "Direct link to isfocused")

tsx

```
isFocused(): boolean;
```

Returns `true` if the input is currently focused; `false` otherwise.

# Known issues

* [react-native#19096](https://github.com/facebook/react-native/issues/19096): Doesn't support Android's `onKeyPreIme`.
* [react-native#19366](https://github.com/facebook/react-native/issues/19366): Calling .focus() after closing Android's keyboard via back button doesn't bring keyboard up again.
* [react-native#26799](https://github.com/facebook/react-native/issues/26799): Doesn't support Android's `secureTextEntry` when `keyboardType="email-address"` or `keyboardType="phone-pad"`.


---

# Advanced Topics on Native Modules Development

This document contains a set of advanced topics to implement more complex functionalities of Native Components. It is recommended to first read the [Codegen](/docs/the-new-architecture/what-is-codegen.md) section and the guides on [Native Components](/docs/fabric-native-components-introduction.md).

This guide will cover the following topics:

* [Direct Manipulation](/docs/the-new-architecture/direct-manipulation-new-architecture.md)
* [Measuring the Layout](/docs/the-new-architecture/layout-measurements.md)
* [Invoking native functions on your native component](/docs/next/the-new-architecture/fabric-component-native-commands)


---

# Advanced Topics on Native Modules Development

This document contains a set of advanced topics to implement more complex functionalities of Native Modules. It is recommended to first read the [Codegen](/docs/the-new-architecture/what-is-codegen.md) section and the guides on [Native Modules](/docs/turbo-native-modules-introduction.md).

This guide will cover the following topics:

* [Add custom C++ types to your C++ modules](/docs/the-new-architecture/custom-cxx-types.md)
* [Use Swift in your Module](/docs/next/the-new-architecture/turbo-modules-with-swift)
* [Emit custom events from your Native Modules](/docs/next/the-new-architecture/native-modules-custom-events)
* [Native Modules Lifecycle](/docs/next/the-new-architecture/native-modules-lifecycle)


---

# The Codegen CLI

Calling Gradle or manually calling a script might be hard to remember and it requires a lot of ceremony.

To simplify it, we created a CLI tool that can help you running those tasks: the **Codegen** cli. This command runs [@react-native/codegen](https://www.npmjs.com/package/@react-native/codegen) for your project. The following options are available:

sh

```
npx @react-native-community/cli codegen --help
Usage: rnc-cli codegen [options]

Options:
  --verbose            Increase logging verbosity
  --path <path>        Path to the React Native project root. (default: "/Users/MyUsername/projects/my-app")
  --platform <string>  Target platform. Supported values: "android", "ios", "all". (default: "all")
  --outputPath <path>  Path where generated artifacts will be output to.
  -h, --help           display help for command
```

## Examples[‚Äã](#examples "Direct link to Examples")

* Read `package.json` from the current working directory, generate code based on its codegenConfig.

shell

```
npx @react-native-community/cli codegen
```

* Read `package.json` from the current working directory, generate iOS code in the location defined in the codegenConfig.

shell

```
npx @react-native-community/cli codegen --platform ios
```

* Read `package.json` from `third-party/some-library`, generate Android code in `third-party/some-library/android/generated`.

shell

```
npx @react-native-community/cli codegen \
    --path third-party/some-library \
    --platform android \
    --outputPath third-party/some-library/android/generated
```

## Including Generated Code into Libraries[‚Äã](#including-generated-code-into-libraries "Direct link to Including Generated Code into Libraries")

The Codegen CLI is a great tool for library developers. It can be used to take a sneak-peek at the generated code to see which interfaces you need to implement.

Normally the generated code is not included in the library, and the app that uses the library is responsible for running the Codegen at build time. This is a good setup for most cases, but Codegen also offers a mechanism to include the generated code in the library itself via the `includesGeneratedCode` property.

It's important to understand what are the implications of using `includesGeneratedCode = true`. Including the generated code comes with several benefits such as:

* No need to rely on the app to run **Codegen** for you, the generated code is always there.
* The implementation files are always consistent with the generated interfaces (this makes your library code more resilient against API changes in codegen).
* No need to include two sets of files to support both architectures on Android. You can only keep the New Architecture one, and it is guaranteed to be backwards compatible.
* Since all native code is there, it is possible to ship the native part of the library as a prebuild.

On the other hand, you also need to be aware of one drawback:

* The generated code will use the React Native version defined inside your library. So if your library is shipping with React Native 0.76, the generated code will be based on that version. This could mean that the generated code is not compatible with apps using **previous** React Native version used by the app (e.g. an App running on React Native 0.75).

## Enabling `includesGeneratedCode`[‚Äã](#enabling-includesgeneratedcode "Direct link to enabling-includesgeneratedcode")

To enable this setup:

* Add the `includesGeneratedCode` property into your library's `codegenConfig` field in the `package.json` file. Set its value to `true`.
* Run **Codegen** locally with the codegen CLI.
* Update your `package.json` to include the generated code.
* Update your `podspec` to include the generated code.
* Update your `build.Gradle` file to include the generated code.
* Update `cmakeListsPath` in `react-native.config.js` so that Gradle doesn't look for CMakeLists file in the build directory but instead in your outputDir.


---

# Create a Library for Your Module

React Native has a rich ecosystem of libraries to solve common problems. We collect React Native libraries in the [reactnative.directory](https://reactnative.directory) website, and this is a great resource to bookmark for every React Native developer.

Sometimes, you might be working on a module that is worth extracting in a separate library for code reuse. This can be a library that you want to reuse in all your apps, a library that you want to distribute to the ecosystem as an open source component, or even a library you'd like to sell.

In this guide, you'll learn:

* how to extract a module into a library
* how to distribute the library using NPM

## Extract the Module into a Library[‚Äã](#extract-the-module-into-a-library "Direct link to Extract the Module into a Library")

You can use the [`create-react-native-library`](https://callstack.github.io/react-native-builder-bob/create) tool to create a new library. This tool sets up a new library with all the boilerplate code that is needed: all the configuration files and all files required by the various platforms. It also comes with a nice interactive menu to guide you through the creation of the library.

To extract a module into a separate library, you can follow these steps:

1. Create the new library
2. Move the code from the App to the Library
3. Update the code to reflect the new structure
4. Publish it.

### 1. Create a Library[‚Äã](#1-create-a-library "Direct link to 1. Create a Library")

1. Start the creation process by running the command:

sh

```
npx create-react-native-library@latest <Name of Your Library>
```

2. Add a name for your module. It must be a valid npm name, so it should be all lowercase. You can use `-` to separate words.
3. Add a description for the package.
4. Continue filling the form until you reach the question *"What type of library do you want to develop?"* ![What type of Library](/assets/images/what-library-82a9a474327fd86f807a7eedf6cd29fc.png)
5. For the sake of this guide, select the *Turbo module* option. Notice that you can create libraries for both New Architecture and Legacy Architecture.
6. Then, you can choose whether you want a library that access the platform (Kotlin & Objective-C) or a shared C++ library (C++ for Android and iOS).
7. Finally, select the `Test App` as last option. This option creates the library with a separate app already configured within the library folder.

Once the interactive prompt is done, the tool creates a folder whose structure looks like this in Visual Studio Code:

![Folder structure after initializing a new library.](/docs/assets/turbo-native-modules/c++visualstudiocode.webp)

Feel free to explore the code that has been created for you. However, the most important parts:

* The `android` folder: this is where the Android code lives
* The `cpp` folder: this is where the c++ code lives
* The `ios` folder: this is where the iOS code lives
* The `src` folder: this is where the JS code lives.

The `package.json` is already configured with all the information that we provided to the `create-react-native-library` tool, including the name and the description of the package. Notice that the `package.json` is also already configured to run Codegen.

json

```
  "codegenConfig": {
    "name": "RN<your module name>Spec",
    "type": "all",
    "jsSrcsDir": "src",
    "outputDir": {
      "ios": "ios/generated",
      "android": "android/generated"
    },
    "android": {
      "javaPackageName": "com.<name-of-the-module>"
    }
  },
```

Finally, the library contains already all the infrastructure to let the library be linked with iOS and Android.

### 2. Copy the Code over from Your App[‚Äã](#2-copy-the-code-over-from-your-app "Direct link to 2. Copy the Code over from Your App")

The rest of the guide assumes that you have a local Turbo Native Module in your app, created following the guidelines shown in the other guides in the website: platform specific Turbo Native Modules, or [cross-platform Turbo Native Modules](/docs/the-new-architecture/pure-cxx-modules.md). But it works also for Components and legacy architecture modules and components. You'll have to adapt the files you need to copy and update.

1. **\[Not required for legacy architecture modules and components]** Move the code you have in the `specs` folder in your app into the `src` folder created by the `create-react-native-library` folder.
2. Update the `index.ts` file to properly export the Turbo Native Module spec so that it is accessible from the library. For example:

ts

```
import NativeSampleModule from './NativeSampleModule';

export default NativeSampleModule;
```

3. Copy the native module over:

   * Replace the code in the `android/src/main/java/com/<name-of-the-module>` with the code you wrote in the app for your native module, if any.
   * Replace the code in the `ios` folder with the code you wrote in your app for your native module, if any.
   * Replace the code in the `cpp` folder with the code you wrote in your app for your native module, if any.

4. **\[Not required for legacy architecture modules and components]** Update all the references from the previous spec name to the new spec name, the one that is defined in the `codegenConfig` field of the library's `package.json`. For example, if in the app `package.json` you set `AppSpecs` as `codegenConfig.name` and in the library it is called `RNNativeSampleModuleSpec`, you have to replace every occurrence of `AppSpecs` with `RNNativeSampleModuleSpec`.

That's it! You have moved all the required code out of your app and in a separate library.

## Testing your Library[‚Äã](#testing-your-library "Direct link to Testing your Library")

The `create-react-native-library` comes with a useful example application that is already configured to work properly with the library. This is a great way to test it!

If you look at the `example` folder, you can find the same structure of a new React Native application that you can create from the [`react-native-community/template`](https://github.com/react-native-community/template).

To test your library:

1. Navigate to the `example` folder.
2. Run `yarn install` to install all the dependencies.
3. For iOS only, you need to install CocoaPods: `cd ios && pod install`.
4. Build and run Android with `yarn android` from the `example` folder.
5. Build and run iOS with `yarn ios` from the `example` folder.

## Use your library as a Local Module[‚Äã](#use-your-library-as-a-local-module "Direct link to Use your library as a Local Module")

There are some scenario where you might want to reuse your library as a local module for your applications, without publishing it to NPM.

In this case, you might end up in a scenario where you have your library sitting as a sibling of your apps.

shell

```
Development
‚îú‚îÄ‚îÄ App
‚îî‚îÄ‚îÄ Library
```

You can use the library created with `create-react-native-library` also in this case.

1. add you library to your app by navigating into the `App` folder and running `yarn add ../Library`.
2. For iOS only, navigate in the `App/ios` folder and run `bundle exec pod install` to install your dependencies.
3. Update the `App.tsx` code to import the code in your library. For example:

tsx

```
import NativeSampleModule from '../Library/src/index';
```

If you run your app right now, Metro would not find the JS files that it needs to serve to the app. That's because metro will be running starting from the `App` folder and it would not have access to the JS files located in the `Library` folder. To fix this, let's update the `metro.config.js` file as it follows

diff

```
const {getDefaultConfig, mergeConfig} = require('@react-native/metro-config');

/**
 * Metro configuration
 * https://reactnative.dev/docs/metro
 *
 * @type {import('metro-config').MetroConfig}
 */
+ const path = require('path');

- const config = {}
+ const config = {
+  // Make Metro able to resolve required external dependencies
+  watchFolders: [
+    path.resolve(__dirname, '../Library'),
+  ],
+  resolver: {
+    extraNodeModules: {
+      'react-native': path.resolve(__dirname, 'node_modules/react-native'),
+    },
+  },
+};

module.exports = mergeConfig(getDefaultConfig(__dirname), config);
```

The `watchFolders` configs tells Metro to watch for files and changes in some additional paths, in this case to the `../Library` path, which contains the `src/index` file you need. The `resolver`property is required to feed to the library the React Native code used by the app. The library might refer and import code from React Native: without the additional resolver, the imports in the library will fail.

At this point, you can build and run your app as usual:

* Build and run Android with `yarn android` from the `example` folder.
* Build and run iOS with `yarn ios` from the `example` folder.

## Publish the Library on NPM[‚Äã](#publish-the-library-on-npm "Direct link to Publish the Library on NPM")

The setup to publish everything on NPM is already in place, thanks to `create-react-native-library`.

1. Install the dependencies in your module `yarn install`.
2. Build the library running `yarn prepare`.
3. Release it with `yarn release`.

After a while, you'll find your library on NPM. To verify that, run:

bash

```
npm view <package.name>
```

where `package.name` is the `name` you set up in the `package.json` file during the initialization of the library.

Now, you can install the library in your application by running:

bash

```
yarn add <package.name>
```

note

For iOS only, whenever you install a new module with some native code, you have to reinstall CocoaPods, by running `bundle exec pod install` (recommended) or `pod install` if you are not using Ruby's Bundler (not recommended).

Congratulations! You published your first React Native library.


---

# Advanced: Custom C++ Types

note

This guide assumes that you are familiar with the [**Pure C++ Turbo Native Modules**](/docs/the-new-architecture/pure-cxx-modules.md) guide. This will build on top of that guide.

C++ Turbo Native Modules support [bridging functionality](https://github.com/facebook/react-native/tree/main/packages/react-native/ReactCommon/react/bridging) for most `std::` standard types. You can use most of those types in your modules without any additional code required.

If you want to add support for new and custom types in your app or library, you need to provide the necessary `bridging` header file.

## Adding a New Custom: Int64[‚Äã](#adding-a-new-custom-int64 "Direct link to Adding a New Custom: Int64")

C++ Turbo Native Modules don't support `int64_t` numbers yet - because JavaScript doesn't support numbers greater 2^53. To represent numbers greater than 2^53, we can use a `string` type in JS and automatically convert it to `int64_t` in C++.

### 1. Create the Bridging Header file[‚Äã](#1-create-the-bridging-header-file "Direct link to 1. Create the Bridging Header file")

The first step to support a new custom type is to define the bridging header that takes care of converting the type **from** the JS representation to the C++ representation, and from the C++ representation **to** the JS one.

1. In the `shared` folder, add a new file called `Int64.h`
2. Add the following code to that file:

Int64.h

```
#pragma once

#include <react/bridging/Bridging.h>

namespace facebook::react {

template <>
struct Bridging<int64_t> {
  // Converts from the JS representation to the C++ representation
  static int64_t fromJs(jsi::Runtime &rt, const jsi::String &value) {
    try {
      size_t pos;
      auto str = value.utf8(rt);
      auto num = std::stoll(str, &pos);
      if (pos != str.size()) {
        throw std::invalid_argument("Invalid number"); // don't support alphanumeric strings
      }
      return num;
    } catch (const std::logic_error &e) {
      throw jsi::JSError(rt, e.what());
    }
  }

  // Converts from the C++ representation to the JS representation
  static jsi::String toJs(jsi::Runtime &rt, int64_t value) {
    return bridging::toJs(rt, std::to_string(value));
  }
};

}
```

The key components for your custom bridging header are:

* Explicit specialization of the `Bridging` struct for your custom type. In this case, the template specify the `int64_t` type.
* A `fromJs` function to convert from the JS representation to the C++ representation
* A `toJs` function to convert from the C++ representation to the JS representation

note

On iOS, remember to add the `Int64.h` file to the Xcode project.

### 2. Modify the JS Spec[‚Äã](#2-modify-the-js-spec "Direct link to 2. Modify the JS Spec")

Now, we can modify the JS spec to add a method that uses the new type. As usual, we can use either Flow or TypeScript for our specs.

1. Open the `specs/NativeSampleTurbomodule`
2. Modify the spec as follows:

* TypeScript
* Flow

NativeSampleModule.ts

```
import {TurboModule, TurboModuleRegistry} from 'react-native';

export interface Spec extends TurboModule {
  readonly reverseString: (input: string) => string;
+  readonly cubicRoot: (input: string) => number;
}

export default TurboModuleRegistry.getEnforcing<Spec>(
  'NativeSampleModule',
);
```

NativeSampleModule.js

```
// @flow
import type {TurboModule} from 'react-native';
import { TurboModuleRegistry } from "react-native";

export interface Spec extends TurboModule {
  +reverseString: (input: string) => string;
+  +cubicRoot: (input: string) => number;
}

export default (TurboModuleRegistry.getEnforcing<Spec>(
  "NativeSampleModule"
): Spec);
```

In this files, we are defining the function that needs to be implemented in C++.

### 3. Implement the Native Code[‚Äã](#3-implement-the-native-code "Direct link to 3. Implement the Native Code")

Now, we need to implement the function that we declared in the JS specification.

1. Open the `specs/NativeSampleModule.h` file and apply the following changes:

NativeSampleModule.h

```
#pragma once

#include <AppSpecsJSI.h>
#include <memory>
#include <string>

+ #include "Int64.h"

namespace facebook::react {

class NativeSampleModule : public NativeSampleModuleCxxSpec<NativeSampleModule> {
public:
  NativeSampleModule(std::shared_ptr<CallInvoker> jsInvoker);

  std::string reverseString(jsi::Runtime& rt, std::string input);
+ int32_t cubicRoot(jsi::Runtime& rt, int64_t input);
};

} // namespace facebook::react
```

2. Open the `specs/NativeSampleModule.cpp` file and apply the implement the new function:

NativeSampleModule.cpp

```
#include "NativeSampleModule.h"
+ #include <cmath>

namespace facebook::react {

NativeSampleModule::NativeSampleModule(std::shared_ptr<CallInvoker> jsInvoker)
    : NativeSampleModuleCxxSpec(std::move(jsInvoker)) {}

std::string NativeSampleModule::reverseString(jsi::Runtime& rt, std::string input) {
  return std::string(input.rbegin(), input.rend());
}

+int32_t NativeSampleModule::cubicRoot(jsi::Runtime& rt, int64_t input) {
+    return std::cbrt(input);
+}

} // namespace facebook::react
```

The implementation imports the `<cmath>` C++ library to perform mathematical operations, then it implements the `cubicRoot` function using the `cbrt` primitive from the `<cmath>` module.

### 4. Test your code in Your App[‚Äã](#4-test-your-code-in-your-app "Direct link to 4. Test your code in Your App")

Now, we can test the code in our app.

First, we need to update the `App.tsx` file to use the new method from the TurboModule. Then, we can build our apps in Android and iOS.

1. Open the `App.tsx` code apply the following changes:

App.tsx

```
// ...
+ const [cubicSource, setCubicSource] = React.useState('')
+ const [cubicRoot, setCubicRoot] = React.useState(0)
  return (
    <SafeAreaView style={styles.container}>
      <View>
        <Text style={styles.title}>
          Welcome to C++ Turbo Native Module Example
        </Text>
        <Text>Write down here the text you want to revert</Text>
        <TextInput
          style={styles.textInput}
          placeholder="Write your text here"
          onChangeText={setValue}
          value={value}
        />
        <Button title="Reverse" onPress={onPress} />
        <Text>Reversed text: {reversedValue}</Text>
+        <Text>For which number do you want to compute the Cubic Root?</Text>
+        <TextInput
+          style={styles.textInput}
+          placeholder="Write your text here"
+          onChangeText={setCubicSource}
+          value={cubicSource}
+        />
+        <Button title="Get Cubic Root" onPress={() => setCubicRoot(SampleTurboModule.cubicRoot(cubicSource))} />
+        <Text>The cubic root is: {cubicRoot}</Text>
      </View>
    </SafeAreaView>
  );
}
//...
```

2. To test the app on Android, run `yarn android` from the root folder of your project.
3. To test the app on iOS, run `yarn ios` from the root folder of your project.

## Adding a New Structured Custom Type: Address[‚Äã](#adding-a-new-structured-custom-type-address "Direct link to Adding a New Structured Custom Type: Address")

The approach above can be generalized to any kind of type. For structured types, React Native provides some helper functions that make it easier to bridge them from JS to C++ and vice versa.

Let's assume that we want to bridge a custom `Address` type with the following properties:

ts

```
interface Address {
  street: string;
  num: number;
  isInUS: boolean;
}
```

### 1. Define the type in the specs[‚Äã](#1-define-the-type-in-the-specs "Direct link to 1. Define the type in the specs")

For the first step, let's define the new custom type in the JS specs, so that Codegen can output all the supporting code. In this way, we don't have to manually write the code.

1. Open the `specs/NativeSampleModule` file and add the following changes.

* TypeScript
* Flow

NativeSampleModule (Add Address type and validateAddress function)

```
import {TurboModule, TurboModuleRegistry} from 'react-native';

+export type Address = {
+  street: string,
+  num: number,
+  isInUS: boolean,
+};

export interface Spec extends TurboModule {
  readonly reverseString: (input: string) => string;
+ readonly validateAddress: (input: Address) => boolean;
}

export default TurboModuleRegistry.getEnforcing<Spec>(
  'NativeSampleModule',
);
```

NativeSampleModule (Add Address type and validateAddress function)

```

// @flow
import type {TurboModule} from 'react-native';
import { TurboModuleRegistry } from "react-native";

+export type Address = {
+  street: string,
+  num: number,
+  isInUS: boolean,
+};


export interface Spec extends TurboModule {
  +reverseString: (input: string) => string;
+ +validateAddress: (input: Address) => boolean;
}

export default (TurboModuleRegistry.getEnforcing<Spec>(
  "NativeSampleModule"
): Spec);
```

This code defines the new `Address` type and defines a new `validateAddress` function for the Turbo Native Module. Notice that the `validateFunction` requires an `Address` object as parameter.

It is also possible to have functions that return custom types.

### 2. Define the bridging code[‚Äã](#2-define-the-bridging-code "Direct link to 2. Define the bridging code")

From the `Address` type defined in the specs, Codegen will generate two helper types: `NativeSampleModuleAddress` and `NativeSampleModuleAddressBridging`.

The first type is the definition of the `Address`. The second type contains all the infrastructure to bridge the custom type from JS to C++ and vice versa. The only extra step we need to add is to define the `Bridging` structure that extends the `NativeSampleModuleAddressBridging` type.

1. Open the `shared/NativeSampleModule.h` file
2. Add the following code in the file:

NativeSampleModule.h (Bridging the Address type)

```
#include "Int64.h"
#include <memory>
#include <string>

namespace facebook::react {
+  using Address = NativeSampleModuleAddress<std::string, int32_t, bool>;

+  template <>
+  struct Bridging<Address>
+      : NativeSampleModuleAddressBridging<Address> {};
  // ...
}
```

This code defines an `Address` typealias for the generic type `NativeSampleModuleAddress`. **The order of the generics matters**: the first template argument refers to the first data type of the struct, the second refers to the second, and so forth.

Then, the code adds the `Bridging` specialization for the new `Address` type, by extending `NativeSampleModuleAddressBridging` that is generated by Codegen.

note

There is a convention that is followed to generate this types:

* The first part of the name is always the type of the module. `NativeSampleModule`, in this example.
* The second part of the name is always the name of the JS type defined in the specs. `Address`, in this example.

### 3. Implement the Native Code[‚Äã](#3-implement-the-native-code-1 "Direct link to 3. Implement the Native Code")

Now, we need to implement the `validateAddress` function in C++. First, we need to add the function declaration into the `.h` file, and then we can implement it in the `.cpp` file.

1. Open the `shared/NativeSampleModule.h` file and add the function definition

NativeSampleModule.h (validateAddress function prototype)

```
  std::string reverseString(jsi::Runtime& rt, std::string input);

+  bool validateAddress(jsi::Runtime &rt, jsi::Object input);
};

} // namespace facebook::react
```

2. Open the `shared/NativeSampleModule.cpp` file and add the function implementation

NativeSampleModule.cpp (validateAddress implementation)

```
bool NativeSampleModule::validateAddress(jsi::Runtime &rt, jsi::Object input) {
  std::string street = input.getProperty(rt, "street").asString(rt).utf8(rt);
  int32_t number = input.getProperty(rt, "num").asNumber();

  return !street.empty() && number > 0;
}
```

In the implementation, the object that represents the `Address` is a `jsi::Object`. To extract the values from this object, we need to use the accessors provided by `JSI`:

* `getProperty()` retrieves the property from and object by name.
* `asString()` converts the property to `jsi::String`.
* `utf8()` converts the `jsi::String` to a `std::string`.
* `asNumber()` converts the property to a `double`.

Once we manually parsed the object, we can implement the logic that we need.

note

If you want to learn more about `JSI` and how it works, have a look at this [great talk](https://youtu.be/oLmGInjKU2U?feature=shared) from App.JS 2024

### 4. Testing the code in the app[‚Äã](#4-testing-the-code-in-the-app "Direct link to 4. Testing the code in the app")

To test the code in the app, we have to modify the `App.tsx` file.

1. Open the `App.tsx` file. Remove the content of the `App()` function.
2. Replace the body of the `App()` function with the following code:

App.tsx (App function body replacement)

```
const [street, setStreet] = React.useState('');
const [num, setNum] = React.useState('');
const [isValidAddress, setIsValidAddress] = React.useState<
  boolean | null
>(null);

const onPress = () => {
  let houseNum = parseInt(num, 10);
  if (isNaN(houseNum)) {
    houseNum = -1;
  }
  const address = {
    street,
    num: houseNum,
    isInUS: false,
  };
  const result = SampleTurboModule.validateAddress(address);
  setIsValidAddress(result);
};

return (
  <SafeAreaView style={styles.container}>
    <View>
      <Text style={styles.title}>
        Welcome to C Turbo Native Module Example
      </Text>
      <Text>Address:</Text>
      <TextInput
        style={styles.textInput}
        placeholder="Write your address here"
        onChangeText={setStreet}
        value={street}
      />
      <Text>Number:</Text>
      <TextInput
        style={styles.textInput}
        placeholder="Write your address here"
        onChangeText={setNum}
        value={num}
      />
      <Button title="Validate" onPress={onPress} />
      {isValidAddress != null && (
        <Text>
          Your address is {isValidAddress ? 'valid' : 'not valid'}
        </Text>
      )}
    </View>
  </SafeAreaView>
);
```

Congratulation! üéâ

You bridged your first types from JS to C++.


---

# Direct Manipulation

It is sometimes necessary to make changes directly to a component without using state/props to trigger a re-render of the entire subtree. When using React in the browser for example, you sometimes need to directly modify a DOM node, and the same is true for views in mobile apps. `setNativeProps` is the React Native equivalent to setting properties directly on a DOM node.

caution

Use `setNativeProps` when frequent re-rendering creates a performance bottleneck!

Direct manipulation will not be a tool that you reach for frequently. You will typically only be using it for creating continuous animations to avoid the overhead of rendering the component hierarchy and reconciling many views. `setNativeProps` is imperative and stores state in the native layer (DOM, UIView, etc.) and not within your React components, which makes your code more difficult to reason about.

Before you use it, try to solve your problem with `setState` and [`shouldComponentUpdate`](https://react.dev/reference/react/Component#shouldcomponentupdate).

## setNativeProps to edit TextInput value[‚Äã](#setnativeprops-to-edit-textinput-value "Direct link to setNativeProps to edit TextInput value")

Another very common use case of `setNativeProps` is to edit the value of the TextInput. The `controlled` prop of TextInput can sometimes drop characters when the `bufferDelay` is low and the user types very quickly. Some developers prefer to skip this prop entirely and instead use `setNativeProps` to directly manipulate the TextInput value when necessary.

For example, the following code demonstrates editing the input when you tap a button:

* TypeScript
* JavaScript

You can use the [`clear`](/docs/textinput.md#clear) method to clear the `TextInput` which clears the current input text using the same approach.

## Avoiding conflicts with the render function[‚Äã](#avoiding-conflicts-with-the-render-function "Direct link to Avoiding conflicts with the render function")

If you update a property that is also managed by the render function, you might end up with some unpredictable and confusing bugs because anytime the component re-renders and that property changes, whatever value was previously set from `setNativeProps` will be completely ignored and overridden.


---

# Invoking native functions on your native component

In the [base guide](/docs/fabric-native-components-introduction.md) to write a new Native Component, you have explored how to create a new component, how to pass properties from the JS side to the native side, and how to emit events from native side to JS.

Custom components can also call some of the functions implemented in the native code imperatively, to achieve some more advanced functionalities, such as programmatically reload a web page.

In this guide you'll learn how to achieve this, by using a new concept: Native Commands.

This guide starts from the [Native Components](/docs/fabric-native-components-introduction.md) guide and assumes that you are familiar with it and that you are familiar with [Codegen](/docs/next/the-new-architecture/what-is-codegen).

## 1. Update your component specs[‚Äã](#1-update-your-component-specs "Direct link to 1. Update your component specs")

The first step is to update the component spec to declare the `NativeCommand`.

* TypeScript
* Flow

Update the `WebViewNativeComponent.ts` as it follows:

Demo/specs/WebViewNativeComponent.ts

```
import type {HostComponent, ViewProps} from 'react-native';
import type {BubblingEventHandler} from 'react-native/Libraries/Types/CodegenTypes';
import codegenNativeComponent from 'react-native/Libraries/Utilities/codegenNativeComponent';
+import codegenNativeCommands from 'react-native/Libraries/Utilities/codegenNativeCommands';

type WebViewScriptLoadedEvent = {
  result: 'success' | 'error';
};

export interface NativeProps extends ViewProps {
  sourceURL?: string;
  onScriptLoaded?: BubblingEventHandler<WebViewScriptLoadedEvent> | null;
}

+interface NativeCommands {
+    reload: (viewRef: React.ElementRef<HostComponent<NativeProps>>) => void;
+}

+export const Commands: NativeCommands = codegenNativeCommands<NativeCommands>({
+    supportedCommands: ['reload'],
+});

export default codegenNativeComponent<NativeProps>(
  'CustomWebView',
) as HostComponent<NativeProps>;
```

Update the `WebViewNativeComponent.js` as it follows:

Demo/specs/WebViewNativeComponent.js

```
// @flow strict-local

import type {HostComponent, ViewProps} from 'react-native';
import type {BubblingEventHandler} from 'react-native/Libraries/Types/CodegenTypes';
import codegenNativeComponent from 'react-native/Libraries/Utilities/codegenNativeComponent';
+import codegenNativeCommands from 'react-native/Libraries/Utilities/codegenNativeCommands';

type WebViewScriptLoadedEvent = $ReadOnly<{|
  result: "success" | "error",
|}>;

type NativeProps = $ReadOnly<{|
  ...ViewProps,
  sourceURL?: string;
  onScriptLoaded?: BubblingEventHandler<WebViewScriptLoadedEvent>?;
|}>;

+interface NativeCommands {
+    reload: (viewRef: React.ElementRef<HostComponent<NativeProps>>) => void;
+}

+export const Commands: NativeCommands = codegenNativeCommands<NativeCommands>({
+    supportedCommands: ['reload'],
+});

export default (codegenNativeComponent<NativeProps>(
  'CustomWebView',
): HostComponent<NativeProps>);
```

These changes requires you to:

1. Import the `codegenNativeCommands` function from `react-native`. This instruct codegen that it has to generate the code for `NativeCommands`
2. Define an interface that contains the methods we want to invoke in native. All the Native Commands must have a first parameter of type `React.ElementRef`.
3. Export the `Commands` variable that is the result of the invocation of `codegenNativeCommands`, passing a list of the supported commands.

warning

In TypeScript, the `React.ElementRef` is deprecated. The correct type to use is actually `React.ComponentRef`. However, due to a bug in Codegen, using `ComponentRef` will crash the app. We have the fix already, but we need to release a new version of React Native to apply it.

## 2. Update the App code to use the new command[‚Äã](#2-update-the-app-code-to-use-the-new-command "Direct link to 2. Update the App code to use the new command")

Now you can use the command in the the app.

* TypeScript
* Flow

Open the `App.tsx` file and modify it as it follows:

App.tsx

```
import React from 'react';
-import {Alert, StyleSheet, View} from 'react-native';
-import WebView from '../specs/WebViewNativeComponent';
+import {Alert, StyleSheet, Pressable, Text, View} from 'react-native';
+import WebView, {Commands} from '../specs/WebViewNativeComponent';

function App(): React.JSX.Element {
+    const webViewRef = React.useRef<React.ElementRef<typeof View> | null>(null);
+
+    const refresh = () => {
+        if (webViewRef.current) {
+            Commands.reload(webViewRef.current);
+        }
+    };

  return (
    <View style={styles.container}>
      <WebView
+       ref={webViewRef}
        sourceURL="https://react.dev/"
        style={styles.webview}
        onScriptLoaded={() => {
          Alert.alert('Page Loaded');
        }}
      />
+      <View style={styles.tabbar}>
+        <Pressable onPress={refresh} style={styles.button}>
+            {({pressed}) => (
+                !pressed ? <Text style={styles.buttonText}>Refresh</Text> : <Text style={styles.buttonTextPressed}>Refresh</Text>) }
+        </Pressable>
+      </View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    alignContent: 'center',
  },
  webview: {
    width: '100%',
-    height: '100%',
+    height: '90%',
  },
+  tabbar: {
+    flex: 1,
+    backgroundColor: 'gray',
+    width: '100%',
+    alignItems: 'center',
+    alignContent: 'center',
+  },
+  button: {
+    margin: 10,
+  },
+  buttonText: {
+    fontSize: 20,
+    fontWeight: 'bold',
+    color: '#00D6FF',
+    width: '100%',
+  },
+  buttonTextPressed: {
+    fontSize: 20,
+    fontWeight: 'bold',
+    color: '#00D6FF77',
+    width: '100%',
+  },
});

export default App;
```

Open the `App.tsx` file and modify it as it follows:

App.jsx

```
import React from 'react';
-import {Alert, StyleSheet, View} from 'react-native';
-import WebView from '../specs/WebViewNativeComponent';
+import {Alert, StyleSheet, Pressable, Text, View} from 'react-native';
+import WebView, {Commands} from '../specs/WebViewNativeComponent';

function App(): React.JSX.Element {
+    const webViewRef = React.useRef<React.ElementRef<typeof View> | null>(null);
+
+    const refresh = () => {
+        if (webViewRef.current) {
+            Commands.reload(webViewRef.current);
+        }
+    };

  return (
    <View style={styles.container}>
      <WebView
+       ref={webViewRef}
        sourceURL="https://react.dev/"
        style={styles.webview}
        onScriptLoaded={() => {
          Alert.alert('Page Loaded');
        }}
      />
+      <View style={styles.tabbar}>
+        <Pressable onPress={refresh} style={styles.button}>
+            {({pressed}) => (
+                !pressed ? <Text style={styles.buttonText}>Refresh</Text> : <Text style={styles.buttonTextPressed}>Refresh</Text>) }
+        </Pressable>
+      </View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    alignContent: 'center',
  },
  webview: {
    width: '100%',
-    height: '100%',
+    height: '90%',
  },
+  tabbar: {
+    flex: 1,
+    backgroundColor: 'gray',
+    width: '100%',
+    alignItems: 'center',
+    alignContent: 'center',
+  },
+  button: {
+    margin: 10,
+  },
+  buttonText: {
+    fontSize: 20,
+    fontWeight: 'bold',
+    color: '#00D6FF',
+    width: '100%',
+  },
+  buttonTextPressed: {
+    fontSize: 20,
+    fontWeight: 'bold',
+    color: '#00D6FF77',
+    width: '100%',
+  },
});

export default App;
```

The relevant changes here are the following:

1. Import the `Commands` const from the spec file. The Command is an object that let us call the methods we have in native.
2. Declare a ref to the `WebView` custom native component using `useRef`. You need to pass this ref to the native command.
3. Implement the `refresh` function. This function checks that the WebView's ref is not null and if not, it calls the command.
4. Add a pressable to call the command when the user taps on the button.

The remaining changes are regular React changes to add a `Pressable` and to style the view so it looks nicer.

## 3. Rerun Codegen[‚Äã](#3-rerun-codegen "Direct link to 3. Rerun Codegen")

Now that the specs are updated and the code is ready to use the command, it is time to implement the Native code. However, before diving into writing native code, you have to rerun codegen, to let it generate the new types that are needed by the Native code.

* Android
* iOS

Codegen is executed through the `generateCodegenArtifactsFromSchema` Gradle task:

bash

```
cd android
./gradlew generateCodegenArtifactsFromSchema

BUILD SUCCESSFUL in 837ms
14 actionable tasks: 3 executed, 11 up-to-date
```

This is automatically run when you build your Android application.

Codegen is run as part of the script phases that's automatically added to the project generated by CocoaPods.

bash

```
cd ios
bundle install
bundle exec pod install
```

The output will look like this:

shell

```
...
Framework build type is static library
[Codegen] Adding script_phases to ReactCodegen.
[Codegen] Generating ./build/generated/ios/ReactCodegen.podspec.json
[Codegen] Analyzing /Users/me/src/TurboModuleExample/package.json
[Codegen] Searching for codegen-enabled libraries in the app.
[Codegen] Found TurboModuleExample
[Codegen] Searching for codegen-enabled libraries in the project dependencies.
[Codegen] Found react-native
...
```

## 4. Implement the Native Code[‚Äã](#4-implement-the-native-code "Direct link to 4. Implement the Native Code")

Now it's time to implement the native changes that will enable your JS to directly invoke methods on your native view.

* Android
* iOS

To let your view respond to the Native Command, you only have to modify the ReactWebViewManager.

If you try to build right now, the build will fail, because the current `ReactWebViewManager` does not implement the new `reload` method. To fix the build error, let's modify the `ReactWebViewManager` to implement it.

* Java
* Kotlin

ReactWebViewManager.java

```

//...
  @ReactProp(name = "sourceUrl")
  @Override
  public void setSourceURL(ReactWebView view, String sourceURL) {
    if (sourceURL == null) {
      view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error);
      return;
    }
    view.loadUrl(sourceURL, new HashMap<>());
  }

+  @Override
+  public void reload(ReactWebView view) {
+    view.reload();
+  }

  public static final String REACT_CLASS = "CustomWebView";
//...
```

ReactWebViewManager.kt

```
  @ReactProp(name = "sourceUrl")
  override fun setSourceURL(view: ReactWebView, sourceURL: String?) {
    if (sourceURL == null) {
      view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error)
      return;
    }
    view.loadUrl(sourceURL, emptyMap())
  }

+  override fun reload(view: ReactWebView) {
+    view.reload()
+  }

  companion object {
    const val REACT_CLASS = "CustomWebView"
  }
```

In this case, it's enough to call directly the `view.reload()` method because our ReactWebView inherits from the Android's `WebView` and it has a reload method directly available. If you are implementing a custom function, that is not available in your custom view, you might also have to implement the required method in the Android's View that is managed by the React Native's `ViewManager`.

To let your view respond to the Native Command, we need to implement a couple of methods on iOS.

Let's open the `RCTWebView.mm` file and let's modify it as it follows:

RCTWebView\.mm

```
  // Event emitter convenience method
  - (const CustomWebViewEventEmitter &)eventEmitter
  {
  return static_cast<const CustomWebViewEventEmitter &>(*_eventEmitter);
  }

+  - (void)handleCommand:(const NSString *)commandName args:(const NSArray *)args
+  {
+  RCTCustomWebViewHandleCommand(self, commandName, args);
+  }
+
+  - (void)reload
+  {
+  [_webView reloadFromOrigin];
+  }

  + (ComponentDescriptorProvider)componentDescriptorProvider
  {
  return concreteComponentDescriptorProvider<CustomWebViewComponentDescriptor>();
  }
```

To make your view respond to the Native Commands, you need to apply the following changes:

1. Add a `handleCommand:args` function. This function is invoked by the components infrastructure to handle the commands. The function implementation is similar for every component: you need to call an `RCT<componentNameInJS>HandleCommand` function that is generated by Codegen for you. The `RCT<componentNameInJS>HandleCommand` perform a bunch of validation, verifying that the command that we need to invoke is among the supported ones and that the parameters passed matches the one expected. If all the checks pass, the `RCT<componentNameInJS>HandleCommand` will then invoke the proper native method.
2. Implement the `reload` method. In this example, the `reload` method calls the `reloadFromOrigin` function of the WebKit's WebView.

## 5. Run your app[‚Äã](#5-run-your-app "Direct link to 5. Run your app")

Finally, you can run your app with the usual commands. Once the app is running, you can tap on the refresh button to see the page getting reloaded.

| Android                                       | iOS                                       |
| --------------------------------------------- | ----------------------------------------- |
| ![](/docs/assets/native-commands-android.gif) | ![](/docs/assets/native-commands-ios.gif) |


---

# Measuring the Layout

Sometimes, you need to measure the current layout to apply some changes to the overall layout or to make decisions and call some specific logic.

React Native provides some native methods to know what are the measurements of the views.

The best way to invoke those methods is in a `useLayoutEffect` hook: this will give you the most recent values for those measurements and it will let you apply changes in the same frame when the measurements are computed.

Typical code will look like this:

tsx

```
function AComponent(children) {
  const targetRef = React.useRef(null)

  useLayoutEffect(() => {
    targetRef.current?.measure((x, y, width, height, pageX, pageY) => {
      //do something with the measurements
    });
  }, [ /* add dependencies here */]);

  return (
    <View ref={targetRef}>
     {children}
    <View />
  );
}
```

note

The methods described here are available on most of the default components provided by React Native. However, they are *not* available on composite components that aren't directly backed by a native view. This will generally include most components that you define in your own app.

## measure(callback)[‚Äã](#measurecallback "Direct link to measure(callback)")

Determines the location on screen (`x` and `y`), `width`, and `height` in the viewport of the given view. Returns the values via an async callback. If successful, the callback will be called with the following arguments:

* `x`: the `x` coordinate of the origin (top-left corner) of the measured view in the viewport.
* `y`: the `y` coordinate of the origin (top-left corner) of the measured view in the viewport.
* `width`: the `width` of the view.
* `height`: the `height` of the view.
* `pageX`: the `x` coordinate of the view in the viewport (typically the whole screen).
* `pageY`: the `y` coordinate of the view in the viewport (typically the whole screen).

Also the `width` and `height` returned by `measure()` are the `width` and `height` of the component in the viewport.

## measureInWindow(callback)[‚Äã](#measureinwindowcallback "Direct link to measureInWindow(callback)")

Determines the location (`x` and `y`) of the given view in the window and returns the values via an async callback. If the React root view is embedded in another native view, this will give you the absolute coordinates. If successful, the callback will be called with the following arguments:

* `x`: the `x` coordinate of the view in the current window.
* `y`: the `y` coordinate of the view in the current window.
* `width`: the `width` of the view.
* `height`: the `height` of the view.


---

# Emitting Events in Native Modules

In some circustamces, you may want to have a Native Module that listen to some events in the platform layer and then emit them to the JavaScript layer, to let you application react to such native events. In other cases, you might have long running operations that can emits events so that the UI can be updated when those happen.

Both are good use cases for emitting events from a Native Modules. In this guide, you'll learn how to do that.

## Emitting an Event when a new key added to the storage[‚Äã](#emitting-an-event-when-a-new-key-added-to-the-storage "Direct link to Emitting an Event when a new key added to the storage")

In this example, you will learn how to emit an event when a new key is added to the storage. Changing the value of the key will not emit the event, but adding a new key will.

This guide starts from the [Native Module](/docs/next/turbo-native-modules-introduction) guide. Make sure to be familiar with that guide before diving into this one, potentially implementing the example in the guide.

## Step 1: Update the Specs of NativeLocalStorage[‚Äã](#step-1-update-the-specs-of-nativelocalstorage "Direct link to Step 1: Update the Specs of NativeLocalStorage")

The first step would be to update the specs of the `NativeLocalStorage` specs to let React Native aware that the module can emit events.

* TypeScript
* Flow

Open the `NativeLocalStorage.ts` file and update it as it follows:

NativeLocalStorage.ts

```
+import type {TurboModule, CodegenTypes} from 'react-native';
import {TurboModuleRegistry} from 'react-native';

+export type KeyValuePair = {
+  key: string,
+  value: string,
+}

export interface Spec extends TurboModule {
  setItem(value: string, key: string): void;
  getItem(key: string): string | null;
  removeItem(key: string): void;
  clear(): void;

+ readonly onKeyAdded: CodegenTypes.EventEmitter<KeyValuePair>;
}

export default TurboModuleRegistry.getEnforcing<Spec>(
  'NativeLocalStorage',
);
```

Open the `NativeLocalStorage.js` file and update it as it follows:

NativeLocalStorage.js

```

// @flow
+import type {TurboModule, CodegenTypes} from 'react-native';
import {TurboModule, TurboModuleRegistry} from 'react-native';

+export type KeyValuePair = {
+  key: string,
+  value: string,
+}

export interface Spec extends TurboModule {
  setItem(value: string, key: string): void;
  getItem(key: string): ?string;
  removeItem(key: string): void;
  clear(): void;
+ onKeyAdded: CodegenTypes.EventEmitter<KeyValuePair>
}
export default (TurboModuleRegistry.get<Spec>(
  'NativeLocalStorage'
): ?Spec);
```

With the `import type` statement, you are importing the `CodegenTypes` from `react-native`, which includes the `EventEmitter` type. This allows you to define the `onKeyAdded` property using `CodegenTypes.EventEmitter<KeyValuePair>`, specifying that the event will emit a payload of type `KeyValuePair`.

When the event is emitted, you expect for it to receive a parameter of type `KeyValuePair`.

## Step 2: Generate Codegen[‚Äã](#step-2-generate-codegen "Direct link to Step 2: Generate Codegen")

Given that you have updated the specs for your Native Module, you now have to rerun Codegen to generate the artifacts in the native code.

This is the same process presented in the Native Modules guide.

* Android
* iOS

Codegen is executed through the `generateCodegenArtifactsFromSchema` Gradle task:

bash

```
cd android
./gradlew generateCodegenArtifactsFromSchema

BUILD SUCCESSFUL in 837ms
14 actionable tasks: 3 executed, 11 up-to-date
```

This is automatically run when you build your Android application.

Codegen is run as part of the script phases that's automatically added to the project generated by CocoaPods.

bash

```
cd ios
bundle install
bundle exec pod install
```

The output will look like this:

shell

```
...
Framework build type is static library
[Codegen] Adding script_phases to ReactCodegen.
[Codegen] Generating ./build/generated/ios/ReactCodegen.podspec.json
[Codegen] Analyzing /Users/me/src/TurboModuleExample/package.json
[Codegen] Searching for Codegen-enabled libraries in the app.
[Codegen] Found TurboModuleExample
[Codegen] Searching for Codegen-enabled libraries in the project dependencies.
[Codegen] Found react-native
...
```

## Step 3: Update the App code[‚Äã](#step-3-update-the-app-code "Direct link to Step 3: Update the App code")

Now, it's time to update the code of the App to handle the new event.

Open the `App.tsx` file and modify it as it follows:

App.tsx

```
import React from 'react';
import {
+ Alert,
+ EventSubscription,
  SafeAreaView,
  StyleSheet,
  Text,
  TextInput,
  Button,
} from 'react-native';

import NativeLocalStorage from './specs/NativeLocalStorage';

const EMPTY = '<empty>';

function App(): React.JSX.Element {
  const [value, setValue] = React.useState<string | null>(null);
+ const [key, setKey] = React.useState<string | null>(null);
+ const listenerSubscription = React.useRef<null | EventSubscription>(null);

+ React.useEffect(() => {
+   listenerSubscription.current = NativeLocalStorage?.onKeyAdded((pair) => Alert.alert(`New key added: ${pair.key} with value: ${pair.value}`));

+   return  () => {
+     listenerSubscription.current?.remove();
+     listenerSubscription.current = null;
+   }
+ }, [])

  const [editingValue, setEditingValue] = React.useState<
    string | null
  >(null);

- React.useEffect(() => {
-   const storedValue = NativeLocalStorage?.getItem('myKey');
-   setValue(storedValue ?? '');
- }, []);

  function saveValue() {
+   if (key == null) {
+     Alert.alert('Please enter a key');
+     return;
+   }
    NativeLocalStorage?.setItem(editingValue ?? EMPTY, key);
    setValue(editingValue);
  }

  function clearAll() {
    NativeLocalStorage?.clear();
    setValue('');
  }

  function deleteValue() {
+   if (key == null) {
+     Alert.alert('Please enter a key');
+     return;
+   }
    NativeLocalStorage?.removeItem(key);
    setValue('');
  }

+ function retrieveValue() {
+   if (key == null) {
+     Alert.alert('Please enter a key');
+     return;
+   }
+   const val = NativeLocalStorage?.getItem(key);
+   setValue(val);
+ }

  return (
    <SafeAreaView style={{flex: 1}}>
      <Text style={styles.text}>
        Current stored value is: {value ?? 'No Value'}
      </Text>
+     <Text>Key:</Text>
+      <TextInput
+       placeholder="Enter the key you want to store"
+       style={styles.textInput}
+       onChangeText={setKey}
+     />
+     <Text>Value:</Text>
      <TextInput
        placeholder="Enter the text you want to store"
        style={styles.textInput}
        onChangeText={setEditingValue}
      />
      <Button title="Save" onPress={saveValue} />
+     <Button title="Retrieve" onPress={retrieveValue} />
      <Button title="Delete" onPress={deleteValue} />
      <Button title="Clear" onPress={clearAll} />
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  text: {
    margin: 10,
    fontSize: 20,
  },
  textInput: {
    margin: 10,
    height: 40,
    borderColor: 'black',
    borderWidth: 1,
    paddingLeft: 5,
    paddingRight: 5,
    borderRadius: 5,
  },
});

export default App;
```

There are a few relevant changes to look at:

1. You need to import the `EventSubscription` type from `react-native` to handle the `EventSubscription`
2. You need to use a `useRef` to keep track of the `EventSubscription` reference
3. You register the listener using an `useEffect` hook. The `onKeyAdded` function takes a callback with an object of type `KeyValuePair` as a function parameter.
4. The callback added to `onKeyAdded` is executed every time the event is emitted from Native to JS.
5. In the `useEffect` cleanup function, you `remove` the event subscription and you set the ref to `null`.

The rest of the changes are regular React changes to improve the App for this new feature.

## Step 4: Write your Native Code[‚Äã](#step-4-write-your-native-code "Direct link to Step 4: Write your Native Code")

With everything prepared, let's start writing native platform code.

* Android
* iOS

Assuming you followed the guide for Android described in the [Native Modules guide](/docs/turbo-native-modules-introduction.md?platforms=android\&language=typescript#3-write-application-code-using-the-turbo-native-module), what's left to do is to plug the code that emit the events in your app.

To do so, you have to:

1. Open the `NativeLocalStorage.kt` file
2. Modify it as it follows:

NativeLocalStorage

```
package com.nativelocalstorage

import android.content.Context
import android.content.SharedPreferences
import com.nativelocalstorage.NativeLocalStorageSpec
+import com.facebook.react.bridge.Arguments
import com.facebook.react.bridge.ReactApplicationContext
+import com.facebook.react.bridge.WritableMap

class NativeLocalStorageModule(reactContext: ReactApplicationContext) : NativeLocalStorageSpec(reactContext) {

  override fun getName() = NAME

  override fun setItem(value: String, key: String) {
+   var shouldEmit = false
+   if (getItem(key) != null) {
+       shouldEmit = true
+   }
    val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
    val editor = sharedPref.edit()
    editor.putString(key, value)
    editor.apply()

+   if (shouldEmit == true) {
+       val eventData = Arguments.createMap().apply {
+           putString("key", key)
+           putString("value", value)
+       }
+       emitOnKeyAdded(eventData)
+   }
  }

  override fun getItem(key: String): String? {
    val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
    val username = sharedPref.getString(key, null)
    return username.toString()
  }
```

First, you need to import a couple of types that you need to use to create the eventData that needs to be sent from Native to JS. These imports are:

* `import com.facebook.react.bridge.Arguments`
* `import com.facebook.react.bridge.WritableMap`

Secondly, you need to implement the logic that actually emits the event to JS. In case of complex types, like the `KeyValuePair` defined in the specs, Codegen will generate a function that expects a `ReadableMap` as a parameter. You can create the `ReadableMap` by using the `Arguments.createMap()` factory method, and use the `apply` function to populate the map. It's your responsibility to make sure that the the keys you are using in the map are the same properties that are defined in the spec type in JS.

Assuming you followed the guide for iOS described in the [Native Modules guide](/docs/turbo-native-modules-introduction.md?platforms=ios\&language=typescript#3-write-application-code-using-the-turbo-native-module), what's left to do is to plug the code that emit the events in your app.

To do so, you have to:

1. Open the `RCTNativeLocalStorage.h` file.
2. Change the base class from `NSObject` to `NativeLocalStorageSpecBase`

RCTNativeLocalStorage.h

```
#import <Foundation/Foundation.h>
#import <NativeLocalStorageSpec/NativeLocalStorageSpec.h>

NS_ASSUME_NONNULL_BEGIN

-@interface RCTNativeLocalStorage : NSObject <NativeLocalStorageSpec>
+@interface RCTNativeLocalStorage : NativeLocalStorageSpecBase <NativeLocalStorageSpec>

@end

NS_ASSUME_NONNULL_END
```

3. Open the `RCTNativeLocalStorage.mm` file.
4. Modify it to emit the events when needed, for example:

RCTNativeLocalStorage.mm

```
 - (void)setItem:(NSString *)value key:(NSString *)key {
+  BOOL shouldEmitEvent = NO;
+  if (![self getItem:key]) {
+    shouldEmitEvent = YES;
+  }
   [self.localStorage setObject:value forKey:key];

+  if (shouldEmitEvent) {
+    [self emitOnKeyAdded:@{@"key": key, @"value": value}];
+  }
}
```

The `NativeLocalStorageSpecBase` is a base class that provides the `emitOnKeyAdded` method and its basic implementation and boilerplate. Thanks to this class, you don't have to handle all the conversion between Objective-C and JSI that is required to send the event to JS.

In case of complex types, like the `KeyValuePair` defined in the specs, Codegen will generate a generic dictionary that you can populate on the native side. It's your responsibility to make sure that the the keys you are using in the dictionary are the same properties that are defined in the spec type in JS.

## Step 5: Run Your App[‚Äã](#step-5-run-your-app "Direct link to Step 5: Run Your App")

If you now try to run your app, you should see this behavior.

| Android                                                   | iOS                                                   |
| --------------------------------------------------------- | ----------------------------------------------------- |
| ![](/docs/assets/turbo-native-modules-events-android.gif) | ![](/docs/assets/turbo-native-modules-events-ios.gif) |


---

# Native Modules Lifecycle

In React Native, Native Modules are singleton. The Native Module infrastructure lazily creates a Native Module the first time it is accessed and it keeps it around whenever the app requires it. This is a performance optimization that allows us to avoid the overhead of creating Native Modules eagerly, at app start, and it ensure faster startup times.

In a pure React Native app, the Native Modules are created once and they are never destroyed. However, in more complex apps, there might be use cases where the Native Modules are destroyed and recreated. Imagine, for example, a brownfield app that mixes some native views with some React Native surfaces, as presented in the [Integrating with Existing App guide](/docs/integration-with-existing-apps.md). In that case it might make sense to destroy a React Native instance when the user navigates away from a React Native surface and recreate it when the user navigates back to that surface.

When this happens, Native Modules that are stateless won't cause any issues. However, for stateful Native Modules it might be necessary to properly invalidate the Native Module to ensure that the state is reset and the resources released.

In this guide, you will explore how to initialize and invalidate a Native Module properly. This guide assumes that you are familiar with how to write a Native Modules and you are comfortable writing native code. If you are not familiar with Native Modules, please read the [Native Modules guide](/docs/next/turbo-native-modules-introduction) first.

## Android[‚Äã](#android "Direct link to Android")

When it comes to Android, all the Native Modules already implements a [TurboModule](https://github.com/facebook/react-native/blob/main/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/turbomodule/core/interfaces/TurboModule.kt) interface that defines two methods: `initialize()` and `invalidate()`.

The `initialize()` method is called by the Native Module infrastructure when the Native Module is created. This is the best place to put all the initialization code that needs access to the ReactApplicationContext, for example. These are some Native Modules from core that implements the `initialize()` method: [BlobModule](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/modules/blob/BlobModule.java#L155-L157), [NetworkingModule](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/modules/network/NetworkingModule.java#L193-L197).

The `invalidate()` method is called by the Native Module infrastructure when the Native Module is destroyed. This is the best place to put all the cleanup code, resetting the Native Module state and release resources that are no longer needed, such as memory and files. These are some Native Modules from core that implements the `invalidate()` method: [DeviceInfoModule](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/modules/deviceinfo/DeviceInfoModule.kt#L72-L76), [NetworkModule](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/modules/network/NetworkingModule.java#L200-L212)

## iOS[‚Äã](#ios "Direct link to iOS")

On iOS, Native Modules conforms to the [`RCTTurboModule`](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/ReactCommon/react/nativemodule/core/platform/ios/ReactCommon/RCTTurboModule.h#L196-L200) protocol. However, this protocol does not expose the `initialize` and `invalidate` method that are exposed by the Android's `TurboModule` class.

Instead, on iOS, there are two additional protocols: [`RCTInitializing`](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/React/Base/RCTInitializing.h) and [`RCTInvalidating`](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/React/Base/RCTInvalidating.h). These protocols are used to define the `initialize` and `invalidate` methods, respectively.

If your module needs to run some initialization code, then you can conform to the `RCTInitializing` protocol and implement the `initialize` method. To do so, you have to:

1. Modify the `NativeModule.h` file by adding the following lines:

NativeModule.h

```
+ #import <React/RCTInitializing.h>

//...

- @interface NativeModule : NSObject <NativeModuleSpec>
+ @interface NativeModule : NSObject <NativeModuleSpec, RCTInitializing>
//...
@end
```

2. Implement the `initialize` method in the `NativeModule.mm` file:

NativeModule.mm

```
// ...

@implementation NativeModule

+- (void)initialize {
+ // add the initialization code here
+}

@end
```

These are some Native Modules from core that implements the `initialize` method: [RCTBlobManager](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/Libraries/Blob/RCTBlobManager.mm#L58-L68), [RCTTiming](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/React/CoreModules/RCTTiming.mm#L121-L124).

If your module needs to run some cleanup code, then you can conform to the `RCTInvalidating` protocol and implement the `invalidate` method. To do so, you have to:

1. Moduify the `NativeModule.h` file by adding the following lines:

NativeModule.h

```
+ #import <React/RCTInvalidating.h>

//...

- @interface NativeModule : NSObject <NativeModuleSpec>
+ @interface NativeModule : NSObject <NativeModuleSpec, RCTInvalidating>

//...

@end
```

2. Implement the `invalidate` method in the `NativeModule.mm` file:

NativeModule.mm

```

// ...

@implementation NativeModule

+- (void)invalidate {
+ // add the cleanup code here
+}

@end
```

These are some Native Modules from core that implements the `invalidate` method: [RCTAppearance](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/React/CoreModules/RCTAppearance.mm#L151-L155), [RCTDeviceInfo](https://github.com/facebook/react-native/blob/0617accecdcb11159ba15c34885f294bc206aa89/packages/react-native/React/CoreModules/RCTDeviceInfo.mm#L127-L133).


---

# Cross-Platform Native Modules (C++)

<!-- -->

Writing a module in C++ is the best way to share platform-agnostic code between Android and iOS. With pure C++ modules, you can write your logic only once and reuse it right away from all the platforms, without the need of writing platform-specific code.

In this guide, we will go through the creation of a pure C++ Turbo Native Module:

1. Create the JS specs
2. Configure Codegen to generate the scaffolding
3. Implement the Native logic
4. Register the module in the Android and iOS application
5. Test your changes in JS

The rest of this guide assumes that you have created your application running the command:

shell

```
npx @react-native-community/cli@latest init SampleApp --version 0.83
```

## 1. Create the JS specs[‚Äã](#1-create-the-js-specs "Direct link to 1. Create the JS specs")

Pure C++ Turbo Native Modules are Turbo Native Modules. They need a specification file (also called spec file) so that Codegen can create the scaffolding code for us. The specification file is also what we use to access the Turbo Native Module in JS.

Spec files need to be written in a typed JS dialect. React Native currently supports Flow or TypeScript.

1. Inside the root folder of your app, create a new folder called `specs`.
2. Create a new file called `NativeSampleModule.ts` with the following code:

warning

All Native Turbo Module spec files must have the prefix `Native`, otherwise Codegen will ignore them.

* TypeScript
* Flow

specs/NativeSampleModule.ts

```
// @flow
import type {TurboModule} from 'react-native'
import { TurboModuleRegistry } from "react-native";

export interface Spec extends TurboModule {
  +reverseString: (input: string) => string;
}

export default (TurboModuleRegistry.getEnforcing<Spec>(
  "NativeSampleModule"
): Spec);
```

specs/NativeSampleModule.ts

```
import {TurboModule, TurboModuleRegistry} from 'react-native';

export interface Spec extends TurboModule {
  readonly reverseString: (input: string) => string;
}

export default TurboModuleRegistry.getEnforcing<Spec>(
  'NativeSampleModule',
);
```

## 2. Configure Codegen[‚Äã](#2-configure-codegen "Direct link to 2. Configure Codegen")

The next step is to configure [Codegen](/docs/the-new-architecture/what-is-codegen.md) in your `package.json`. Update the file to include:

package.json

```
     "start": "react-native start",
     "test": "jest"
   },
   "codegenConfig": {
     "name": "AppSpecs",
     "type": "modules",
     "jsSrcsDir": "specs",
     "android": {
       "javaPackageName": "com.sampleapp.specs"
     }
   },
   "dependencies": {
```

This configuration tells Codegen to look for spec files in the `specs` folder. It also instructs Codegen to only generate code for `modules` and to namespace the generated code as `AppSpecs`.

## 3. Write the Native Code[‚Äã](#3-write-the-native-code "Direct link to 3. Write the Native Code")

Writing a C++ Turbo Native Module allows you to share the code between Android and iOS. Therefore we will be writing the code once, and we will look into what changes we need to apply to the platforms so that the C++ code can be picked up.

1. Create a folder named `shared` at the same level as the `android` and `ios` folders.

2. Inside the `shared` folder, create a new file called `NativeSampleModule.h`.

   shared/NativeSampleModule.h

   ```
   #pragma once

   #include <AppSpecsJSI.h>

   #include <memory>
   #include <string>

   namespace facebook::react {

   class NativeSampleModule : public NativeSampleModuleCxxSpec<NativeSampleModule> {
   public:
     NativeSampleModule(std::shared_ptr<CallInvoker> jsInvoker);

     std::string reverseString(jsi::Runtime& rt, std::string input);
   };

   } // namespace facebook::react
   ```

3. Inside the `shared` folder, create a new file called `NativeSampleModule.cpp`.

   shared/NativeSampleModule.cpp

   ```
   #include "NativeSampleModule.h"

   namespace facebook::react {

   NativeSampleModule::NativeSampleModule(std::shared_ptr<CallInvoker> jsInvoker)
       : NativeSampleModuleCxxSpec(std::move(jsInvoker)) {}

   std::string NativeSampleModule::reverseString(jsi::Runtime& rt, std::string input) {
     return std::string(input.rbegin(), input.rend());
   }

   } // namespace facebook::react
   ```

Let's have a look at the two files we created:

* The `NativeSampleModule.h` file is the header file for a Pure C++ TurboModule. The `include` statements make sure that we include the specs that will be created by Codegen and that contains the interface and the base class we need to implement.
* The module lives in the `facebook::react` namespace to have access to all the types that live in that namespace.
* The class `NativeSampleModule` is the actual Turbo Native Module class and it extends the `NativeSampleModuleCxxSpec` class which contains some glue code and boilerplate code to let this class behave as a Turbo Native Module.
* Finally, we have the constructor, that accepts a pointer to the `CallInvoker`, to communicate with JS if needed and the function's prototype we have to implement.

The `NativeSampleModule.cpp` file is the actual implementation of our Turbo Native Module and implements the constructor and the method that we declared in the specs.

## 4. Register the Module in the platform[‚Äã](#4-register-the-module-in-the-platform "Direct link to 4. Register the Module in the platform")

The next steps will let us register the module in the platform. This is the step that exposes the native code to JS so that the React Native application can finally call the native methods from the JS layer.

This is the only time when we will have to write some platform-specific code.

### Android[‚Äã](#android "Direct link to Android")

To make sure that the Android app can effectively build the C++ Turbo Native Module, we need to:

1. Create a `CMakeLists.txt` to access our C++ code.
2. Modify `build.gradle` to point to the newly created `CMakeLists.txt` file.
3. Create an `OnLoad.cpp` file in our Android app to register the new Turbo Native Module.

#### 1. Create the `CMakeLists.txt` file[‚Äã](#1-create-the-cmakeliststxt-file "Direct link to 1-create-the-cmakeliststxt-file")

Android uses CMake to build. CMake needs to access the files we defined in our shared folder to be able to build them.

1. Create a new folder `SampleApp/android/app/src/main/jni`. The `jni` folder is where the C++ side of Android lives.
2. Create a `CMakeLists.txt` file and add this context:

CMakeLists.txt

```
cmake_minimum_required(VERSION 3.13)

# Define the library name here.
project(appmodules)

# This file includes all the necessary to let you build your React Native application
include(${REACT_ANDROID_DIR}/cmake-utils/ReactNative-application.cmake)

# Define where the additional source code lives. We need to crawl back the jni, main, src, app, android folders
target_sources(${CMAKE_PROJECT_NAME} PRIVATE ../../../../../shared/NativeSampleModule.cpp)

# Define where CMake can find the additional header files. We need to crawl back the jni, main, src, app, android folders
target_include_directories(${CMAKE_PROJECT_NAME} PUBLIC ../../../../../shared)
```

The CMake file does the following things:

* Defines the `appmodules` library, where all the app C++ code will be included.
* Loads the base React Native's CMake file.
* Adds the Module C++ source code that we need to build with the `target_sources` directives. By default React Native will already populate the `appmodules` library with default sources, here we include our custom one. You can see that we need to crawl back from the `jni` folder to the `shared` folder where our C++ Turbo Module lives.
* Specifies where CMake can find the module header files. Also in this case we need to crawl back from the `jni` folder.

#### 2. Modify `build.gradle` to include the custom C++ code[‚Äã](#2-modify-buildgradle-to-include-the-custom-c-code "Direct link to 2-modify-buildgradle-to-include-the-custom-c-code")

Gradle is the tool that orchestrates the Android build. We need to tell it where it can find the `CMake` files to build the Turbo Native Module.

1. Open the `SampleApp/android/app/build.gradle` file.
2. Add the following block into the Gradle file, within the existing `android` block:

android/app/build.gradle

```
    buildTypes {
        debug {
            signingConfig signingConfigs.debug
        }
        release {
            // Caution! In production, you need to generate your own keystore file.
            // see https://reactnative.dev/docs/signed-apk-android.
            signingConfig signingConfigs.debug
            minifyEnabled enableProguardInReleaseBuilds
            proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
        }
    }

+   externalNativeBuild {
+       cmake {
+           path "src/main/jni/CMakeLists.txt"
+       }
+   }
}
```

This block tells the Gradle file where to look for the CMake file. The path is relative to the folder where the `build.gradle` file lives, so we need to add the path to the `CMakeLists.txt` files in the `jni` folder.

#### 3. Register the new Turbo Native Module[‚Äã](#3-register-the-new-turbo-native-module "Direct link to 3. Register the new Turbo Native Module")

The final step is to register the new C++ Turbo Native Module in the runtime, so that when JS requires the C++ Turbo Native Module, the app knows where to find it and can return it.

1. From the folder `SampleApp/android/app/src/main/jni`, run the following command:

shell

```
curl -O https://raw.githubusercontent.com/facebook/react-native/v0.83.0/packages/react-native/ReactAndroid/cmake-utils/default-app-setup/OnLoad.cpp
```

2. Then, modify this file as follows:

android/app/src/main/jni/OnLoad.cpp

```
#include <DefaultComponentsRegistry.h>
#include <DefaultTurboModuleManagerDelegate.h>
#include <autolinking.h>
#include <fbjni/fbjni.h>
#include <react/renderer/componentregistry/ComponentDescriptorProviderRegistry.h>
#include <rncore.h>

+ // Include the NativeSampleModule header
+ #include <NativeSampleModule.h>

//...

std::shared_ptr<TurboModule> cxxModuleProvider(
    const std::string& name,
    const std::shared_ptr<CallInvoker>& jsInvoker) {
  // Here you can provide your CXX Turbo Modules coming from
  // either your application or from external libraries. The approach to follow
  // is similar to the following (for a module called `NativeCxxModuleExample`):
  //
  // if (name == NativeCxxModuleExample::kModuleName) {
  //   return std::make_shared<NativeCxxModuleExample>(jsInvoker);
  // }

+  // This code registers the module so that when the JS side asks for it, the app can return it
+  if (name == NativeSampleModule::kModuleName) {
+    return std::make_shared<NativeSampleModule>(jsInvoker);
+  }

  // And we fallback to the CXX module providers autolinked
  return autolinking_cxxModuleProvider(name, jsInvoker);
}

// leave the rest of the file
```

These steps download the original `OnLoad.cpp` file from React Native, so that we can safely override it to load the C++ Turbo Native Module in the app.

Once we downloaded the file, we can modify it by:

* Including the header file that points to our module
* Registering the Turbo Native Module so that when JS requires it, the app can return it.

Now, you can run `yarn android` from the project root to see your app building successfully.

### iOS[‚Äã](#ios "Direct link to iOS")

To make sure that the iOS app can effectively build the C++ Turbo Native Module, we need to:

1. Install pods and run Codegen.
2. Add the `shared` folder to our iOS project.
3. Register the C++ Turbo Native Module in the application.

#### 1. Install Pods and Run Codegen.[‚Äã](#1-install-pods-and-run-codegen "Direct link to 1. Install Pods and Run Codegen.")

The first step we need to run is the usual steps we run every time we have to prepare our iOS application. CocoaPods is the tool we use to setup and install React Native dependencies and, as part of the process, it will also run Codegen for us.

bash

```
cd ios
bundle install
bundle exec pod install
```

#### 2. Add the shared folder to the iOS project[‚Äã](#2-add-the-shared-folder-to-the-ios-project "Direct link to 2. Add the shared folder to the iOS project")

This step adds the `shared` folder to the project to make it visible to Xcode.

1. Open the CocoaPods generated Xcode Workspace.

bash

```
cd ios
open SampleApp.xcworkspace
```

2. Click on the `SampleApp` project on the left and select `Add files to "Sample App"...`.

![Add Files to Sample App...](/assets/images/AddFilesToXcode1-801bbeb4251cda02929c1863939466c5.png)

3. Select the `shared` folder and click on `Add`.

![Add Files to Sample App...](/assets/images/AddFilesToXcode2-f22d79daca6d0e121ad57c63225e43c6.png)

If you did everything right, your project on the left should look like this:

![Xcode Project](/assets/images/CxxTMGuideXcodeProject-96458e4d285dbdde12b12edaf7193e57.png)

#### 3. Registering the Cxx Turbo Native Module in your app[‚Äã](#3-registering-the-cxx-turbo-native-module-in-your-app "Direct link to 3. Registering the Cxx Turbo Native Module in your app")

To register a pure Cxx Turbo Native Module in your app, you need to:

1. Create a `ModuleProvider` for the Native Module
2. Configure the `package.json` to associate the JS module name with the ModuleProvider class.

The ModuleProvider is an Objective-C++ that glues together the Pure C++ module with the rest of your iOS App.

##### 3.1 Create the ModuleProvider[‚Äã](#31-create-the-moduleprovider "Direct link to 3.1 Create the ModuleProvider")

1. From Xcode, select the `SampleApp` project and press `‚åò` + `N` to create a new file.
2. Select the `Cocoa Touch Class` template
3. Add the name `NativeSampleModuleProvider` (keep the other field as `Subclass of: NSObject` and `Language: Objective-C`)
4. Click Next to generate the files.
5. Rename the `NativeSampleModuleProvider.m` to `NativeSampleModuleProvider.mm`. The `mm` extension denotes an Objective-C++ file.
6. Implement the content of the `NativeSampleModuleProvider.h` with the following:

NativeSampleModuleProvider.h

```

#import <Foundation/Foundation.h>
#import <ReactCommon/RCTTurboModule.h>

NS_ASSUME_NONNULL_BEGIN

@interface NativeSampleModuleProvider : NSObject <RCTModuleProvider>

@end

NS_ASSUME_NONNULL_END
```

This declares a `NativeSampleModuleProvider` object that conforms to the `RCTModuleProvider` protocol.

7. Implement the content of the `NativeSampleModuleProvider.mm` with the following:

NativeSampleModuleProvider.mm

```

#import "NativeSampleModuleProvider.h"
#import <ReactCommon/CallInvoker.h>
#import <ReactCommon/TurboModule.h>
#import "NativeSampleModule.h"

@implementation NativeSampleModuleProvider

- (std::shared_ptr<facebook::react::TurboModule>)getTurboModule:
    (const facebook::react::ObjCTurboModule::InitParams &)params
{
  return std::make_shared<facebook::react::NativeSampleModule>(params.jsInvoker);
}

@end
```

This code implements the `RCTModuleProvider` protocol by creating the pure C++ `NativeSampleModule` when the `getTurboModule:` method is called.

##### 3.2 Update the package.json[‚Äã](#32-update-the-packagejson "Direct link to 3.2 Update the package.json")

The last step consists in updating the `package.json` to tell React Native about the link between the JS specs of the Native Module and the concrete implementation of those spec in native code.

Modify the `package.json` as it follows:

package.json

```
     "start": "react-native start",
     "test": "jest"
   },
   "codegenConfig": {
     "name": "AppSpecs",
     "type": "modules",
     "jsSrcsDir": "specs",
     "android": {
       "javaPackageName": "com.sampleapp.specs"
     },
     "ios": {
        "modulesProvider": {
          "NativeSampleModule":  "NativeSampleModuleProvider"
        }
     }
   },

   "dependencies": {
```

At this point, you need to re-install the pods to make sure that codegen runs again to generate the new files:

bash

```
# from the ios folder
bundle exec pod install
open SampleApp.xcworkspace
```

If you now build your application from Xcode, you should be able to build successfully.

## 5. Testing your Code[‚Äã](#5-testing-your-code "Direct link to 5. Testing your Code")

It's now time to access our C++ Turbo Native Module from JS. To do so, we have to modify the `App.tsx` file to import the Turbo Native Module and to call it in our code.

1. Open the `App.tsx` file.
2. Replace the content of the template with the following code:

App.tsx

```
import React from 'react';
import {
  Button,
  SafeAreaView,
  StyleSheet,
  Text,
  TextInput,
  View,
} from 'react-native';
import SampleTurboModule from './specs/NativeSampleModule';

function App(): React.JSX.Element {
  const [value, setValue] = React.useState('');
  const [reversedValue, setReversedValue] = React.useState('');

  const onPress = () => {
    const revString = SampleTurboModule.reverseString(value);
    setReversedValue(revString);
  };

  return (
    <SafeAreaView style={styles.container}>
      <View>
        <Text style={styles.title}>
          Welcome to C++ Turbo Native Module Example
        </Text>
        <Text>Write down here the text you want to reverse</Text>
        <TextInput
          style={styles.textInput}
          placeholder="Write your text here"
          onChangeText={setValue}
          value={value}
        />
        <Button title="Reverse" onPress={onPress} />
        <Text>Reversed text: {reversedValue}</Text>
      </View>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  title: {
    fontSize: 18,
    marginBottom: 20,
  },
  textInput: {
    borderColor: 'black',
    borderWidth: 1,
    borderRadius: 5,
    padding: 10,
    marginTop: 10,
  },
});

export default App;
```

The interesting lines in this app are:

* `import SampleTurboModule from './specs/NativeSampleModule';`: this line imports the Turbo Native Module in the app,
* `const revString = SampleTurboModule.reverseString(value);` in the `onPress` callback: this is how you can use the Turbo Native Module in your app.

warning

For the sake of this example and to keep it as short as possible, we directly imported the spec file in our app. The best practice in this case is to create a separate file to wrap the specs and use that file into your application. This allows you to prepare the input for the specs and gives you more control over them in JS.

Congratulations, you wrote your first C++ Turbo Native Module!

| Android                                                 | iOS                                             |
| ------------------------------------------------------- | ----------------------------------------------- |
| ![Android Video](/docs/assets/CxxGuideAndroidVideo.gif) | ![iOS video](/docs/assets/CxxGuideIOSVideo.gif) |


---

# iOS - Using Swift in Your Native Modules

Swift is the official and default language for developing native application on iOS.

In this guide, you will explore how you can write your Native Modules using Swift.

note

The core of React Native is mainly written in C++ and the interoperability between Swift and C++ is not great, despite the [interoperability layer](https://www.swift.org/documentation/cxx-interop/) developed by Apple.

Therefore, the module you are going to write in this guide won't be a pure Swift implementation due to the incompatibilities between the languages. You'll have to write some Objective-C++ glue code but the goal of the guide is to minimize the amount of Objective-C++ code that is needed. If you are migrating an existing Native Modules from the legacy architecture to the New Architecture, this approach should allow you to reuse most of the code.

This guide starts from the iOS implementation of the [Native Module](/docs/next/turbo-native-modules-introduction) guide. Make sure to be familiar with that guide before diving into this one, potentially implementing the example in the guide.

## The Adapter pattern[‚Äã](#the-adapter-pattern "Direct link to The Adapter pattern")

The goal is to implement all our business logic using a Swift module and have a thin glue layer in Objective-C++ that is able to connect the app with the Swift implementation.

You can achieve this by leveraging the [Adapter](https://en.wikipedia.org/wiki/Adapter_pattern) design pattern, to connect the Swift Module with the Objective-C++ layer.

The Objective-C++ object is created by React Native and it keeps a reference to the Swift module, handling its lifecycle. The Objective-C++ object forwards to the all the methods invocation to Swift.

### Creating the Swift Module[‚Äã](#creating-the-swift-module "Direct link to Creating the Swift Module")

The first step is to move the implementation from the Objective-C++ layer to the Swift Layer.

To achieve that, please follow these steps:

1. Create a new empty file in the Xcode project, and call it `NativeLocalStorage.swift`
2. Add the implementation in your Swift module like it follows:

NativeLocalStorage.swift

```
import Foundation

@objcMembers public class NativeLocalStorage: NSObject {
  let userDefaults = UserDefaults(suiteName: "local-storage");

  public func getItem(for key: String) -> String? {
    return userDefaults?.string(forKey: key)
  }

  public func setItem(for key: String, value: String) {
    userDefaults?.set(value, forKey: key)
  }

  public func removeItem(for key: String) {
    userDefaults?.removeObject(forKey: key)
  }

  public func clear() {
    userDefaults?.dictionaryRepresentation().keys.forEach { removeItem(for: $0) }
  }
}
```

Notice that you have to declare all the methods that you need to call from Objective-C as `public` and with the `@objc` annotation. Remember also to make your class inherit from `NSObject`, otherwise it would not be possible to use it from Objective-C.

### Update the `RCTNativeLocalStorage` file[‚Äã](#update-the-rctnativelocalstorage-file "Direct link to update-the-rctnativelocalstorage-file")

Then, you need to update the implementation of the `RCTNativeLocalStorage` to be able to create the Swift module and to call its methods.

1. Open the `RCTNativeLocalStorage.mm` file
2. Update it as it follows:

RCTNativeLocalStorage.mm

```
//  RCTNativeLocalStorage.m
//  TurboModuleExample

#import "RCTNativeLocalStorage.h"
+#import "SampleApp-Swift.h"

- static NSString *const RCTNativeLocalStorageKey = @"local-storage";

-@interface RCTNativeLocalStorage()
-@property (strong, nonatomic) NSUserDefaults *localStorage;
-@end

-@implementation RCTNativeLocalStorage
+@implementation RCTNativeLocalStorage {
+    NativeLocalStorage *storage;
+}

-RCT_EXPORT_MODULE(NativeLocalStorage)

 - (id) init {
   if (self = [super init]) {
-    _localStorage = [[NSUserDefaults alloc] initWithSuiteName:RCTNativeLocalStorageKey];
+    storage = [NativeLocalStorage new];
   }
   return self;
 }

 - (std::shared_ptr<facebook::react::TurboModule>)getTurboModule:(const facebook::react::ObjCTurboModule::InitParams &)params {
   return std::make_shared<facebook::react::NativeLocalStorageSpecJSI>(params);
 }

 - (NSString * _Nullable)getItem:(NSString *)key {
-   return [self.localStorage stringForKey:key];
+   return [storage getItemFor:key];
 }

 - (void)setItem:(NSString *)value key:(NSString *)key {
-   [self.localStorage setObject:value forKey:key];
+   [storage setItemFor:key value:value];
 }

 - (void)removeItem:(NSString *)key {
-   [self.localStorage removeObjectForKey:key];
+   [storage removeItemFor:key];
 }

 - (void)clear {
-   NSDictionary *keys = [self.localStorage dictionaryRepresentation];
-   for (NSString *key in keys) {
-     [self removeItem:key];
-   }
+  [storage clear];
 }

++ (NSString *)moduleName
+{
+  return @"NativeLocalStorage";
+}

@end
```

The code is not really changed. Instead of creating a reference to the `NSUserDefaults` directly, you create a new `NativeLocalStorage` using the swift implementation and, whenever a native module function is invoked, the invocation is forwarded to the `NativeLocalStorage` implemented in Swift.

Remember to import the `"SampleApp-Swift.h"` header. This is a header automatically generated by Xcode which contains the public API of your Swift files, in a format that is consumable by Objective-C. The `SampleApp` part of the header is actually your App name, so if you created the app with a name that is **different** from `SampleApp`, you'll have to change it.

Note also that the `RCT_EXPORT_MODULE` macro is not required anymore, because native modules are registered using the `package.json` as described [here](/docs/next/turbo-native-modules-introduction?platforms=ios#register-the-native-module-in-your-app).

This approach introduces a bit of code duplication in the interfaces, but it allows you to reuse the Swift code you may already have in your codebase, with little extra effort.

### Implementing the Bridging Header[‚Äã](#implementing-the-bridging-header "Direct link to Implementing the Bridging Header")

note

If you are a library author, developing a native module that is going to be distributed as a separate library, this step is not required.

The last required step to connect the Swift code with the Objective-C++ counterpart is a bridging header.

A bridging header is an header where you can import all the Objective-C header files that needs to be visible by your swift code.

You might already have a bridging header in your codebase, but in case you haven't, you can create a new one by following these steps:

1. In Xcode, create a new file and call it `"SampleApp-Bridging-Header.h"`
2. Update the content of the `"SampleApp-Bridging-Header.h"` like this:

SampleApp-Bridging-Header.h

```
//
//  Use this file to import your target's public headers that you would like to expose to Swift.
//

+ #import <React-RCTAppDelegate/RCTDefaultReactNativeFactoryDelegate.h>
```

3. Link the Bridging header in your project:

   <!-- -->

   1. In the project navigator, select your app name (`SampleApp`, on the left)
   2. Click on `Build Settings`
   3. Filter for `"Bridging Header"`
   4. Add the relative path to the "Bridging Header", in the example it is `SampleApp-Bridging-Header.h`

![Bridging Header](/assets/images/BridgingHeader-9e80996731bb512e28b1478f6d8b7a79.png)

## Build and Run Your App[‚Äã](#build-and-run-your-app "Direct link to Build and Run Your App")

Now you can follow the last step of the [Native Module's guide](/docs/turbo-native-modules-introduction.md#build-and-run-your-code-on-a-simulator) and you should see your app running with a Native Module written in Swift.


---

# Using Codegen

This guide teaches how to:

* Configure **Codegen**.
* Invoke it manually for each platform.

It also describes the generated code.

## Prerequisites[‚Äã](#prerequisites "Direct link to Prerequisites")

You always need a React Native app to generate the code properly, even when invoking the **Codegen** manually.

The **Codegen** process is tightly coupled with the build of the app, and the scripts are located in the `react-native` NPM package.

For the sake of this guide, create a project using the React Native CLI as follows:

shell

```
npx @react-native-community/cli@latest init SampleApp --version 0.83
```

**Codegen** is used to generate the glue-code for your custom modules or components. See the guides for Turbo Native Modules and Fabric Native Components for more details on how to create them.

## Configuring **Codegen**[‚Äã](#configuring-codegen "Direct link to configuring-codegen")

**Codegen** can be configured in your app by modifying the `package.json` file. **Codegen** is controlled by a custom field called `codegenConfig`.

package.json

```
  "codegenConfig": {
    "name": "<SpecName>",
    "type": "<types>",
    "jsSrcsDir": "<source_dir>",
    "android": {
      "javaPackageName": "<java.package.name>"
    },
    "ios": {
      "modules": {
        "TestModule": {
          "className": "<iOS-class-implementing-the-RCTModuleProvider-protocol>",
          "unstableRequiresMainQueueSetup": false,
          "conformsToProtocols": ["RCTImageURLLoader", "RCTURLRequestHandler", "RCTImageDataDecoder"],
        }
      },
      "components": {
        "TestComponent": {
          "className": "<iOS-class-implementing-the-component>"
        }
      }
    }
  },
```

You can add this snippet to your app and customize the various fields:

* `name:` Name of the codegen config. This will customize the codegen output: the filenames, and the code.

* `type:`

  * `modules:` Only generate code for modules.
  * `components:` Only generate code for components.
  * `all`: Generate code for everything.

* `jsSrcsDir`: The root folder where all your specs live.

* `android`: Codegen configuration for Android (all optional):
  <!-- -->
  * `.javaPackageName`: Configure the package name of the Android Java codegen output.

* `ios`: Codegen configuration for iOS (all optional):

  <!-- -->

  * `.modules[moduleName]:`

    * `.className`: This module's ObjC class. Or, if it's a [C++-only module](/docs/next/the-new-architecture/pure-cxx-modules), its `RCTModuleProvider` class.
    * `.unstableRequiresMainQueueSetup`: Initialize this module on the UI Thread, before running any JavaScript.
    * `.conformsToProtocols`: Annotate which of these protocols this module conforms to any of the following protocols: [`RCTImageURLLoader`](https://github.com/facebook/react-native/blob/00d5caee9921b6c10be8f7d5b3903c6afe8dbefa/packages/react-native/Libraries/Image/RCTImageURLLoader.h#L26-L81), [`RCTURLRequestHandler`](https://github.com/facebook/react-native/blob/00d5caee9921b6c10be8f7d5b3903c6afe8dbefa/packages/react-native/React/Base/RCTURLRequestHandler.h#L11-L52), [`RCTImageDataDecoder`](https://github.com/facebook/react-native/blob/00d5caee9921b6c10be8f7d5b3903c6afe8dbefa/packages/react-native/Libraries/Image/RCTImageDataDecoder.h#L15-L53).

  * `.components[componentName]`:
    <!-- -->
    * `.className`: This component's ObjC class (e.g: `TextInput` -> `RCTTextInput`).

When **Codegen** runs, it searches among all the dependencies of the app, looking for JS files that respects some specific conventions, and it generates the required code:

* Turbo Native Modules require that the spec files are prefixed with `Native`. For example, `NativeLocalStorage.ts` is a valid name for a spec file.
* Native Fabric Components require that the spec files are suffixed with `NativeComponent`. For example, `WebViewNativeComponent.ts` is a valid name for a spec file.

## Running **Codegen**[‚Äã](#running-codegen "Direct link to running-codegen")

The rest of this guide assumes that you have a Native Turbo Module, a Native Fabric Component or both already set up in your project. We also assume that you have valid specification files in the `jsSrcsDir` specified in the `package.json`.

### Android[‚Äã](#android "Direct link to Android")

**Codegen** for Android is integrated with the React Native Gradle Plugin (RNGP). The RNGP contains a task that can be invoked that reads the configurations defined in the `package.json` file and execute **Codegen**. To run the gradle task, first navigate inside the `android` folder of your project. Then run:

bash

```
./gradlew generateCodegenArtifactsFromSchema
```

This task invokes the `generateCodegenArtifactsFromSchema` command on all the imported projects of the app (the app and all the node modules which are linked to it). It generates the code in the corresponding `node_modules/<dependency>` folder. For example, if you have a Fabric Native Component whose Node module is called `my-fabric-component`, the generated code is located in the `SampleApp/node_modules/my-fabric-component/android/build/generated/source/codegen` path. For the app, the code is generated in the `android/app/build/generated/source/codegen` folder.

#### The Generated Code[‚Äã](#the-generated-code "Direct link to The Generated Code")

After running the gradle command above, you will find the codegen code in the `SampleApp/android/app/build` folder. The structure will look like this:

```
build
‚îî‚îÄ‚îÄ generated
    ‚îî‚îÄ‚îÄ source
        ‚îî‚îÄ‚îÄ codegen
            ‚îú‚îÄ‚îÄ java
            ‚îÇ   ‚îî‚îÄ‚îÄ com
            ‚îÇ       ‚îú‚îÄ‚îÄ facebook
            ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ react
            ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ viewmanagers
            ‚îÇ       ‚îÇ           ‚îú‚îÄ‚îÄ <nativeComponent>ManagerDelegate.java
            ‚îÇ       ‚îÇ           ‚îî‚îÄ‚îÄ <nativeComponent>ManagerInterface.java
            ‚îÇ       ‚îî‚îÄ‚îÄ sampleapp
            ‚îÇ           ‚îî‚îÄ‚îÄ NativeLocalStorageSpec.java
            ‚îú‚îÄ‚îÄ jni
            ‚îÇ   ‚îú‚îÄ‚îÄ <codegenConfig.name>-generated.cpp
            ‚îÇ   ‚îú‚îÄ‚îÄ <codegenConfig.name>.h
            ‚îÇ   ‚îú‚îÄ‚îÄ CMakeLists.txt
            ‚îÇ   ‚îî‚îÄ‚îÄ react
            ‚îÇ       ‚îî‚îÄ‚îÄ renderer
            ‚îÇ           ‚îî‚îÄ‚îÄ components
            ‚îÇ               ‚îî‚îÄ‚îÄ <codegenConfig.name>
            ‚îÇ                   ‚îú‚îÄ‚îÄ <codegenConfig.name>JSI-generated.cpp
            ‚îÇ                   ‚îú‚îÄ‚îÄ <codegenConfig.name>.h
            ‚îÇ                   ‚îú‚îÄ‚îÄ ComponentDescriptors.cpp
            ‚îÇ                   ‚îú‚îÄ‚îÄ ComponentDescriptors.h
            ‚îÇ                   ‚îú‚îÄ‚îÄ EventEmitters.cpp
            ‚îÇ                   ‚îú‚îÄ‚îÄ EventEmitters.h
            ‚îÇ                   ‚îú‚îÄ‚îÄ Props.cpp
            ‚îÇ                   ‚îú‚îÄ‚îÄ Props.h
            ‚îÇ                   ‚îú‚îÄ‚îÄ ShadowNodes.cpp
            ‚îÇ                   ‚îú‚îÄ‚îÄ ShadowNodes.h
            ‚îÇ                   ‚îú‚îÄ‚îÄ States.cpp
            ‚îÇ                   ‚îî‚îÄ‚îÄ States.h
            ‚îî‚îÄ‚îÄ schema.json
```

The generated code is split in two folders:

* `java` which contains the platform specific code
* `jni` which contains the C++ code required to let JS and Java interact correctly.

In the `java` folder, you can find the Fabric Native component generated code in the `com/facebook/viewmanagers` subfolder.

* the `<nativeComponent>ManagerDelegate.java` contains the methods that the `ViewManager` can call on the custom Native Component
* the `<nativeComponent>ManagerInterface.java` contains the interface of the `ViewManager`.

In the folder whose name was set up in the `codegenConfig.android.javaPackageName`, instead, you can find the abstract class that a Turbo Native Module has to implement to carry out its tasks.

In the `jni` folder, finally, there is all the boilerplate code to connect JS to Android.

* `<codegenConfig.name>.h` this contains the interface of your custom C++ Turbo Native Modules.
* `<codegenConfig.name>-generated.cpp` this contains the glue code of your custom C++ Turbo Native Modules.
* `react/renderer/components/<codegenConfig.name>`: this folder contains all the glue-code required by your custom component.

This structure has been generated by using the value `all` for the `codegenConfig.type` field. If you use the value `modules`, expect to see no `react/renderer/components/` folder. If you use the value `components`, expect not to see any of the other files.

### iOS[‚Äã](#ios "Direct link to iOS")

**Codegen** for iOS relies on some Node scripts that are invoked during the build process. The scripts are located in the `SampleApp/node_modules/react-native/scripts/` folder.

The main script is the `generate-codegen-artifacts.js` script. To invoke the script, you can run this command from the root folder of your app:

bash

```
node node_modules/react-native/scripts/generate-codegen-artifacts.js

Usage: generate-codegen-artifacts.js -p [path to app] -t [target platform] -o [output path]

Options:
      --help            Show help                                      [boolean]
      --version         Show version number                            [boolean]
  -p, --path            Path to the React Native project root.        [required]
  -t, --targetPlatform  Target platform. Supported values: "android", "ios",
                        "all".                                        [required]
  -o, --outputPath      Path where generated artifacts will be output to.
```

where:

* `--path` is the path to the root folder of your app.
* `--outputPath` is the destination where **Codegen** will write the generated files.
* `--targetPlatform` is the platform you'd like to generate the code for.

#### The Generated Code[‚Äã](#the-generated-code-1 "Direct link to The Generated Code")

Running the script with these arguments:

shell

```
node node_modules/react-native/scripts/generate-codegen-artifacts.js \
    --path . \
    --outputPath ios/ \
    --targetPlatform ios
```

Will generate these files in the `ios/build` folder:

```
build
‚îî‚îÄ‚îÄ generated
    ‚îî‚îÄ‚îÄ ios
        ‚îú‚îÄ‚îÄ <codegenConfig.name>
        ‚îÇ   ‚îú‚îÄ‚îÄ <codegenConfig.name>-generated.mm
        ‚îÇ   ‚îî‚îÄ‚îÄ <codegenConfig.name>.h
        ‚îú‚îÄ‚îÄ <codegenConfig.name>JSI-generated.cpp
        ‚îú‚îÄ‚îÄ <codegenConfig.name>JSI.h
        ‚îú‚îÄ‚îÄ FBReactNativeSpec
        ‚îÇ   ‚îú‚îÄ‚îÄ FBReactNativeSpec-generated.mm
        ‚îÇ   ‚îî‚îÄ‚îÄ FBReactNativeSpec.h
        ‚îú‚îÄ‚îÄ FBReactNativeSpecJSI-generated.cpp
        ‚îú‚îÄ‚îÄ FBReactNativeSpecJSI.h
        ‚îú‚îÄ‚îÄ RCTModulesConformingToProtocolsProvider.h
        ‚îú‚îÄ‚îÄ RCTModulesConformingToProtocolsProvider.mm
        ‚îî‚îÄ‚îÄ react
            ‚îî‚îÄ‚îÄ renderer
                ‚îî‚îÄ‚îÄ components
                    ‚îî‚îÄ‚îÄ <codegenConfig.name>
                        ‚îú‚îÄ‚îÄ ComponentDescriptors.cpp
                        ‚îú‚îÄ‚îÄ ComponentDescriptors.h
                        ‚îú‚îÄ‚îÄ EventEmitters.cpp
                        ‚îú‚îÄ‚îÄ EventEmitters.h
                        ‚îú‚îÄ‚îÄ Props.cpp
                        ‚îú‚îÄ‚îÄ Props.h
                        ‚îú‚îÄ‚îÄ RCTComponentViewHelpers.h
                        ‚îú‚îÄ‚îÄ ShadowNodes.cpp
                        ‚îú‚îÄ‚îÄ ShadowNodes.h
                        ‚îú‚îÄ‚îÄ States.cpp
                        ‚îî‚îÄ‚îÄ States.h
```

Part of these generated files are used by React Native in the Core. Then there is a set of files which contains the same name you specified in the package.json `codegenConfig.name` field.

* `<codegenConfig.name>/<codegenConfig.name>.h`: this contains the interface of your custom iOS Turbo Native Modules.
* `<codegenConfig.name>/<codegenConfig.name>-generated.mm`: this contains the glue code of your custom iOS Turbo Native Modules.
* `<codegenConfig.name>JSI.h`: this contains the interface of your custom C++ Turbo Native Modules.
* `<codegenConfig.name>JSI-generated.h`: this contains the glue code of your custom C++ Turbo Native Modules.
* `react/renderer/components/<codegenConfig.name>`: this folder contains all the glue-code required by your custom component.

This structure has been generated by using the value `all` for the `codegenConfig.type` field. If you use the value `modules`, expect to see no `react/renderer/components/` folder. If you use the value `components`, expect not to see any of the other files.


---

# What is Codegen?

**Codegen** is a tool to avoid writing a lot of repetitive code. Using Codegen **is not mandatory**: you can write all the generated code manually. However, Codegen generates scaffolding code that could save you a lot of time.

React Native invokes Codegen automatically every time an iOS or Android app is built. Occasionally, you would like to manually run the Codegen scripts to know which types and files are actually generated: this is a common scenario when developing [Turbo Native Modules](/docs/turbo-native-modules-introduction.md) and Fabric Native Components.

## How Codegen Works[‚Äã](#how-codegen-works "Direct link to How Codegen Works")

**Codegen** is a process that is tightly coupled with a React Native app. The Codegen scripts live inside the `react-native` NPM package and the apps call those scripts at build time.

Codegen crawls the folders in your project, starting from a directory you specify in your `package.json`, looking for some specific JS files that contain the specification (or specs) for your custom modules and components. Spec files are JS files written in a typed dialect: React Native currently supports Flow and TypeScript.

Every time Codegen finds a spec file, it generates boilerplate code associated with it. Codegen generates some C++ glue-code and then it generates platform-specific code, using Java for Android and Objective-C++ for iOS.


---

# ‚ùå TimePickerAndroid

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=timepicker) instead.


---

# Timers

Timers are an important part of an application and React Native implements the [browser timers](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals).

## Timers[‚Äã](#timers "Direct link to Timers")

* `setTimeout` and `clearTimeout`
* `setInterval` and `clearInterval`
* `setImmediate` and `clearImmediate`
* `requestAnimationFrame` and `cancelAnimationFrame`

`requestAnimationFrame(fn)` is not the same as `setTimeout(fn, 0)` - the former will fire after all the frames have flushed, whereas the latter will fire as quickly as possible (over 1000x per second on a iPhone 5S).

`setImmediate` is executed at the end of the current JavaScript execution block, right before sending the batched response back to native. Note that if you call `setImmediate` within a `setImmediate` callback, it will be executed right away, it won't yield back to native in between.

The `Promise` implementation uses `setImmediate` as its asynchronicity implementation.

note

When debugging on Android, if the times between the debugger and device have drifted; things such as animation, event behavior, etc., might not work properly or the results may not be accurate. Please correct this by running ``adb shell "date `date +%m%d%H%M%Y.%S%3N`"`` on your debugger machine. Root access is required for the use in real device.

## InteractionManager[‚Äã](#interactionmanager "Direct link to InteractionManager")

Deprecated

The `InteractionManager` behavior has been changed to be the same as `setImmediate`, which should be used instead.

One reason why well-built native apps feel so smooth is by avoiding expensive operations during interactions and animations. In React Native, we currently have a limitation that there is only a single JS execution thread, but you can use `InteractionManager` to make sure long-running work is scheduled to start after any interactions/animations have completed.

Applications can schedule tasks to run after interactions with the following:

tsx

```
InteractionManager.runAfterInteractions(() => {
  // ...long-running synchronous task...
});
```

Compare this to other scheduling alternatives:

* requestAnimationFrame(): for code that animates a view over time.
* setImmediate/setTimeout/setInterval(): run code later, note this may delay animations.
* runAfterInteractions(): run code later, without delaying active animations.

The touch handling system considers one or more active touches to be an 'interaction' and will delay `runAfterInteractions()` callbacks until all touches have ended or been cancelled.

`InteractionManager` also allows applications to register animations by creating an interaction 'handle' on animation start, and clearing it upon completion:

tsx

```
const handle = InteractionManager.createInteractionHandle();
// run animation... (`runAfterInteractions` tasks are queued)
// later, on animation completion:
InteractionManager.clearInteractionHandle(handle);
// queued tasks run if all handles were cleared
```


---

# ToastAndroid

React Native's ToastAndroid API exposes the Android platform's ToastAndroid module as a JS module. It provides the method `show(message, duration)` which takes the following parameters:

* *message* A string with the text to toast
* *duration* The duration of the toast‚Äîeither `ToastAndroid.SHORT` or `ToastAndroid.LONG`

You can alternatively use `showWithGravity(message, duration, gravity)` to specify where the toast appears in the screen's layout. May be `ToastAndroid.TOP`, `ToastAndroid.BOTTOM` or `ToastAndroid.CENTER`.

The `showWithGravityAndOffset(message, duration, gravity, xOffset, yOffset)` method adds the ability to specify an offset with in pixels.

note

Starting with Android 11 (API level 30), setting the gravity has no effect on text toasts. Read about the changes [here](https://developer.android.com/about/versions/11/behavior-changes-11#text-toast-api-changes).

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `show()`[‚Äã](#show "Direct link to show")

tsx

```
static show(message: string, duration: number);
```

***

### `showWithGravity()`[‚Äã](#showwithgravity "Direct link to showwithgravity")

This property will only work on Android API 29 and below. For similar functionality on higher Android APIs, consider using snackbar or notification.

tsx

```
static showWithGravity(message: string, duration: number, gravity: number);
```

***

### `showWithGravityAndOffset()`[‚Äã](#showwithgravityandoffset "Direct link to showwithgravityandoffset")

This property will only work on Android API 29 and below. For similar functionality on higher Android APIs, consider using snackbar or notification.

tsx

```
static showWithGravityAndOffset(
  message: string,
  duration: number,
  gravity: number,
  xOffset: number,
  yOffset: number,
);
```

## Properties[‚Äã](#properties "Direct link to Properties")

### `SHORT`[‚Äã](#short "Direct link to short")

Indicates the duration on the screen.

tsx

```
static SHORT: number;
```

***

### `LONG`[‚Äã](#long "Direct link to long")

Indicates the duration on the screen.

tsx

```
static LONG: number;
```

***

### `TOP`[‚Äã](#top "Direct link to top")

Indicates the position on the screen.

tsx

```
static TOP: number;
```

***

### `BOTTOM`[‚Äã](#bottom "Direct link to bottom")

Indicates the position on the screen.

tsx

```
static BOTTOM: number;
```

***

### `CENTER`[‚Äã](#center "Direct link to center")

Indicates the position on the screen.

tsx

```
static CENTER: number;
```


---

# TouchableHighlight

tip

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the [Pressable](/docs/pressable.md) API.

A wrapper for making views respond properly to touches. On press down, the opacity of the wrapped view is decreased, which allows the underlay color to show through, darkening or tinting the view.

The underlay comes from wrapping the child in a new View, which can affect layout, and sometimes cause unwanted visual artifacts if not used correctly, for example if the backgroundColor of the wrapped view isn't explicitly set to an opaque color.

TouchableHighlight must have one child (not zero or more than one). If you wish to have several child components, wrap them in a View.

tsx

```
function MyComponent(props: MyComponentProps) {
  return (
    <View {...props} style={{flex: 1, backgroundColor: '#fff'}}>
      <Text>My Component</Text>
    </View>
  );
}

<TouchableHighlight
  activeOpacity={0.6}
  underlayColor="#DDDDDD"
  onPress={() => alert('Pressed!')}>
  <MyComponent />
</TouchableHighlight>;
```

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [TouchableWithoutFeedback Props](/docs/touchablewithoutfeedback.md#props)[‚Äã](#touchablewithoutfeedback-props "Direct link to touchablewithoutfeedback-props")

Inherits [TouchableWithoutFeedback Props](/docs/touchablewithoutfeedback.md#props).

***

### `activeOpacity`[‚Äã](#activeopacity "Direct link to activeopacity")

Determines what the opacity of the wrapped view should be when touch is active. The value should be between 0 and 1. Defaults to 0.85. Requires `underlayColor` to be set.

| Type   |
| ------ |
| number |

***

### `onHideUnderlay`[‚Äã](#onhideunderlay "Direct link to onhideunderlay")

Called immediately after the underlay is hidden.

| Type     |
| -------- |
| function |

***

### `onShowUnderlay`[‚Äã](#onshowunderlay "Direct link to onshowunderlay")

Called immediately after the underlay is shown.

| Type     |
| -------- |
| function |

***

### `ref`[‚Äã](#ref "Direct link to ref")

A ref setter that will be assigned an [element node](/docs/element-nodes.md) when mounted.

***

### `style`[‚Äã](#style "Direct link to style")

| Type        |
| ----------- |
| View\.style |

***

### `underlayColor`[‚Äã](#underlaycolor "Direct link to underlaycolor")

The color of the underlay that will show through when the touch is active.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `hasTVPreferredFocus`iOS[‚Äã](#hastvpreferredfocus-ios "Direct link to hastvpreferredfocus-ios")

*(Apple TV only)* TV preferred focus (see documentation for the View component).

| Type |
| ---- |
| bool |

***

### `nextFocusDown`Android[‚Äã](#nextfocusdown-android "Direct link to nextfocusdown-android")

TV next focus down (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusForward`Android[‚Äã](#nextfocusforward-android "Direct link to nextfocusforward-android")

TV next focus forward (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusLeft`Android[‚Äã](#nextfocusleft-android "Direct link to nextfocusleft-android")

TV next focus left (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusRight`Android[‚Äã](#nextfocusright-android "Direct link to nextfocusright-android")

TV next focus right (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusUp`Android[‚Äã](#nextfocusup-android "Direct link to nextfocusup-android")

TV next focus up (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `testOnly_pressed`[‚Äã](#testonly_pressed "Direct link to testonly_pressed")

Handy for snapshot tests.

| Type |
| ---- |
| bool |


---

# TouchableNativeFeedback

tip

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the [Pressable](/docs/pressable.md) API.

A wrapper for making views respond properly to touches (Android only). On Android this component uses native state drawable to display touch feedback.

At the moment it only supports having a single View instance as a child node, as it's implemented by replacing that View with another instance of RCTView node with some additional properties set.

Background drawable of native feedback touchable can be customized with `background` property.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [TouchableWithoutFeedback Props](/docs/touchablewithoutfeedback.md#props)[‚Äã](#touchablewithoutfeedback-props "Direct link to touchablewithoutfeedback-props")

Inherits [TouchableWithoutFeedback Props](/docs/touchablewithoutfeedback.md#props).

***

### `background`[‚Äã](#background "Direct link to background")

Determines the type of background drawable that's going to be used to display feedback. It takes an object with `type` property and extra data depending on the `type`. It's recommended to use one of the static methods to generate that dictionary.

| Type               |
| ------------------ |
| backgroundPropType |

***

### `useForeground`[‚Äã](#useforeground "Direct link to useforeground")

Set to true to add the ripple effect to the foreground of the view, instead of the background. This is useful if one of your child views has a background of its own, or you're e.g. displaying images, and you don't want the ripple to be covered by them.

Check TouchableNativeFeedback.canUseNativeForeground() first, as this is only available on Android 6.0 and above. If you try to use this on older versions you will get a warning and fallback to background.

| Type |
| ---- |
| bool |

***

### `hasTVPreferredFocus`Android[‚Äã](#hastvpreferredfocus-android "Direct link to hastvpreferredfocus-android")

TV preferred focus (see documentation for the View component).

| Type |
| ---- |
| bool |

***

### `nextFocusDown`Android[‚Äã](#nextfocusdown-android "Direct link to nextfocusdown-android")

TV next focus down (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusForward`Android[‚Äã](#nextfocusforward-android "Direct link to nextfocusforward-android")

TV next focus forward (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusLeft`Android[‚Äã](#nextfocusleft-android "Direct link to nextfocusleft-android")

TV next focus left (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusRight`Android[‚Äã](#nextfocusright-android "Direct link to nextfocusright-android")

TV next focus right (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusUp`Android[‚Äã](#nextfocusup-android "Direct link to nextfocusup-android")

TV next focus up (see documentation for the View component).

| Type   |
| ------ |
| number |

## Methods[‚Äã](#methods "Direct link to Methods")

### `SelectableBackground()`[‚Äã](#selectablebackground "Direct link to selectablebackground")

tsx

```
static SelectableBackground(
  rippleRadius: number | null,
): ThemeAttributeBackgroundPropType;
```

Creates an object that represents android theme's default background for selectable elements (`?android:attr/selectableItemBackground`). `rippleRadius` parameter controls the radius of the ripple effect.

***

### `SelectableBackgroundBorderless()`[‚Äã](#selectablebackgroundborderless "Direct link to selectablebackgroundborderless")

tsx

```
static SelectableBackgroundBorderless(
  rippleRadius: number | null,
): ThemeAttributeBackgroundPropType;
```

Creates an object that represent android theme's default background for borderless selectable elements (`?android:attr/selectableItemBackgroundBorderless`). Available on android API level 21+. `rippleRadius` parameter controls the radius of the ripple effect.

***

### `Ripple()`[‚Äã](#ripple "Direct link to ripple")

tsx

```
static Ripple(
  color: ColorValue,
  borderless: boolean,
  rippleRadius?: number | null,
): RippleBackgroundPropType;
```

Creates an object that represents ripple drawable with specified color (as a string). If property `borderless` evaluates to true the ripple will render outside of the view bounds (see native actionbar buttons as an example of that behavior). This background type is available on Android API level 21+.

**Parameters:**

| Name         | Type    | Required | Description                                 |
| ------------ | ------- | -------- | ------------------------------------------- |
| color        | string  | Yes      | The ripple color                            |
| borderless   | boolean | Yes      | If the ripple can render outside its bounds |
| rippleRadius | ?number | No       | controls the radius of the ripple effect    |

***

### `canUseNativeForeground()`[‚Äã](#canusenativeforeground "Direct link to canusenativeforeground")

tsx

```
static canUseNativeForeground(): boolean;
```


---

# TouchableOpacity

tip

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the [Pressable](/docs/pressable.md) API.

A wrapper for making views respond properly to touches. On press down, the opacity of the wrapped view is decreased, dimming it.

Opacity is controlled by wrapping the children in an `Animated.View`, which is added to the view hierarchy. Be aware that this can affect layout.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [TouchableWithoutFeedback Props](/docs/touchablewithoutfeedback.md#props)[‚Äã](#touchablewithoutfeedback-props "Direct link to touchablewithoutfeedback-props")

Inherits [TouchableWithoutFeedback Props](/docs/touchablewithoutfeedback.md#props).

***

### `style`[‚Äã](#style "Direct link to style")

| Type                                    |
| --------------------------------------- |
| [View.style](/docs/view-style-props.md) |

***

### `activeOpacity`[‚Äã](#activeopacity "Direct link to activeopacity")

Determines what the opacity of the wrapped view should be when touch is active. Defaults to `0.2`.

| Type   |
| ------ |
| number |

***

### `hasTVPreferredFocus`iOS[‚Äã](#hastvpreferredfocus-ios "Direct link to hastvpreferredfocus-ios")

*(Apple TV only)* TV preferred focus (see documentation for the View component).

| Type |
| ---- |
| bool |

***

### `nextFocusDown`Android[‚Äã](#nextfocusdown-android "Direct link to nextfocusdown-android")

TV next focus down (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusForward`Android[‚Äã](#nextfocusforward-android "Direct link to nextfocusforward-android")

TV next focus forward (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusLeft`Android[‚Äã](#nextfocusleft-android "Direct link to nextfocusleft-android")

TV next focus left (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusRight`Android[‚Äã](#nextfocusright-android "Direct link to nextfocusright-android")

TV next focus right (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `nextFocusUp`Android[‚Äã](#nextfocusup-android "Direct link to nextfocusup-android")

TV next focus up (see documentation for the View component).

| Type   |
| ------ |
| number |

***

### `ref`[‚Äã](#ref "Direct link to ref")

A ref setter that will be assigned an [element node](/docs/element-nodes.md) when mounted.


---

# TouchableWithoutFeedback

tip

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the [Pressable](/docs/pressable.md) API.

Do not use unless you have a very good reason. All elements that respond to press should have a visual feedback when touched.

`TouchableWithoutFeedback` supports only one child. If you wish to have several child components, wrap them in a View. Importantly, `TouchableWithoutFeedback` works by cloning its child and applying responder props to it. It is therefore required that any intermediary components pass through those props to the underlying React Native component.

## Usage Pattern[‚Äã](#usage-pattern "Direct link to Usage Pattern")

tsx

```
function MyComponent(props: MyComponentProps) {
  return (
    <View {...props} style={{flex: 1, backgroundColor: '#fff'}}>
      <Text>My Component</Text>
    </View>
  );
}

<TouchableWithoutFeedback onPress={() => alert('Pressed!')}>
  <MyComponent />
</TouchableWithoutFeedback>;
```

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### `accessibilityIgnoresInvertColors`iOS[‚Äã](#accessibilityignoresinvertcolors-ios "Direct link to accessibilityignoresinvertcolors-ios")

A value indicating this view should or should not be inverted when color inversion is turned on. A value of `true` will tell the view to not be inverted even if color inversion is turned on.

See the [Accessibility guide](/docs/accessibility.md#accessibilityignoresinvertcolors) for more information.

| Type    |
| ------- |
| Boolean |

***

### `accessible`[‚Äã](#accessible "Direct link to accessible")

When `true`, indicates that the view is an accessibility element. By default, all the touchable elements are accessible.

| Type |
| ---- |
| bool |

***

### `accessibilityLabel`[‚Äã](#accessibilitylabel "Direct link to accessibilitylabel")

Overrides the text that's read by the screen reader when the user interacts with the element. By default, the label is constructed by traversing all the children and accumulating all the `Text` nodes separated by space.

| Type   |
| ------ |
| string |

***

### `accessibilityLanguage`iOS[‚Äã](#accessibilitylanguage-ios "Direct link to accessibilitylanguage-ios")

A value indicating which language should be used by the screen reader when the user interacts with the element. It should follow the [BCP 47 specification](https://www.rfc-editor.org/info/bcp47).

See the [iOS `accessibilityLanguage` doc](https://developer.apple.com/documentation/objectivec/nsobject/1615192-accessibilitylanguage) for more information.

| Type   |
| ------ |
| string |

***

### `accessibilityHint`[‚Äã](#accessibilityhint "Direct link to accessibilityhint")

An accessibility hint helps users understand what will happen when they perform an action on the accessibility element when that result is not clear from the accessibility label.

| Type   |
| ------ |
| string |

***

### `accessibilityRole`[‚Äã](#accessibilityrole "Direct link to accessibilityrole")

`accessibilityRole` communicates the purpose of a component to the user of an assistive technology.

`accessibilityRole` can be one of the following:

* `'none'` - Used when the element has no role.
* `'button'` - Used when the element should be treated as a button.
* `'link'` - Used when the element should be treated as a link.
* `'search'` - Used when the text field element should also be treated as a search field.
* `'image'` - Used when the element should be treated as an image. Can be combined with button or link, for example.
* `'keyboardkey'` - Used when the element acts as a keyboard key.
* `'text'` - Used when the element should be treated as static text that cannot change.
* `'adjustable'` - Used when an element can be "adjusted" (e.g. a slider).
* `'imagebutton'` - Used when the element should be treated as a button and is also an image.
* `'header'` - Used when an element acts as a header for a content section (e.g. the title of a navigation bar).
* `'summary'` - Used when an element can be used to provide a quick summary of current conditions in the app when the app first launches.
* `'alert'` - Used when an element contains important text to be presented to the user.
* `'checkbox'` - Used when an element represents a checkbox which can be checked, unchecked, or have mixed checked state.
* `'combobox'` - Used when an element represents a combo box, which allows the user to select among several choices.
* `'menu'` - Used when the component is a menu of choices.
* `'menubar'` - Used when a component is a container of multiple menus.
* `'menuitem'` - Used to represent an item within a menu.
* `'progressbar'` - Used to represent a component which indicates progress of a task.
* `'radio'` - Used to represent a radio button.
* `'radiogroup'` - Used to represent a group of radio buttons.
* `'scrollbar'` - Used to represent a scroll bar.
* `'spinbutton'` - Used to represent a button which opens a list of choices.
* `'switch'` - Used to represent a switch which can be turned on and off.
* `'tab'` - Used to represent a tab.
* `'tablist'` - Used to represent a list of tabs.
* `'timer'` - Used to represent a timer.
* `'toolbar'` - Used to represent a tool bar (a container of action buttons or components).

| Type   |
| ------ |
| string |

***

### `accessibilityState`[‚Äã](#accessibilitystate "Direct link to accessibilitystate")

Describes the current state of a component to the user of an assistive technology.

See the [Accessibility guide](/docs/accessibility.md#accessibilitystate-ios-android) for more information.

| Type                                                                                             |
| ------------------------------------------------------------------------------------------------ |
| object: `{disabled: bool, selected: bool, checked: bool or 'mixed', busy: bool, expanded: bool}` |

***

### `accessibilityActions`[‚Äã](#accessibilityactions "Direct link to accessibilityactions")

Accessibility actions allow an assistive technology to programmatically invoke the actions of a component. The `accessibilityActions` property should contain a list of action objects. Each action object should contain the field name and label.

See the [Accessibility guide](/docs/accessibility.md#accessibility-actions) for more information.

| Type  |
| ----- |
| array |

***

### `aria-busy`[‚Äã](#aria-busy "Direct link to aria-busy")

Indicates an element is being modified and that assistive technologies may want to wait until the changes are complete before informing the user about the update.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-checked`[‚Äã](#aria-checked "Direct link to aria-checked")

Indicates the state of a checkable element. This field can either take a boolean or the "mixed" string to represent mixed checkboxes.

| Type             | Default |
| ---------------- | ------- |
| boolean, 'mixed' | false   |

***

### `aria-disabled`[‚Äã](#aria-disabled "Direct link to aria-disabled")

Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-expanded`[‚Äã](#aria-expanded "Direct link to aria-expanded")

Indicates whether an expandable element is currently expanded or collapsed.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-hidden`[‚Äã](#aria-hidden "Direct link to aria-hidden")

Indicates whether the element is hidden from assistive technologies.

For example, in a window that contains sibling views `A` and `B`, setting `aria-hidden` to `true` on view `B` causes VoiceOver to ignore the `B` element and its children.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-label`[‚Äã](#aria-label "Direct link to aria-label")

Defines a string value that labels an interactive element.

| Type   |
| ------ |
| string |

***

### `aria-live`Android[‚Äã](#aria-live-android "Direct link to aria-live-android")

Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region.

* **off** Accessibility services should not announce changes to this view.
* **polite** Accessibility services should announce changes to this view.
* **assertive** Accessibility services should interrupt ongoing speech to immediately announce changes to this view.

| Type                                     | Default |
| ---------------------------------------- | ------- |
| enum(`'assertive'`, `'off'`, `'polite'`) | `'off'` |

***

### `aria-modal`iOS[‚Äã](#aria-modal-ios "Direct link to aria-modal-ios")

Boolean value indicating whether VoiceOver should ignore the elements within views that are siblings of the receiver. Has precedence over the [`accessibilityViewIsModal`](#accessibilityviewismodal-ios) prop.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-selected`[‚Äã](#aria-selected "Direct link to aria-selected")

Indicates whether a selectable element is currently selected or not.

| Type    |
| ------- |
| boolean |

### `onAccessibilityAction`[‚Äã](#onaccessibilityaction "Direct link to onaccessibilityaction")

Invoked when the user performs the accessibility actions. The only argument to this function is an event containing the name of the action to perform.

See the [Accessibility guide](/docs/accessibility.md#accessibility-actions) for more information.

| Type     |
| -------- |
| function |

***

### `accessibilityValue`[‚Äã](#accessibilityvalue "Direct link to accessibilityvalue")

Represents the current value of a component. It can be a textual description of a component's value, or for range-based components, such as sliders and progress bars, it contains range information (minimum, current, and maximum).

See the [Accessibility guide](/docs/accessibility.md#accessibilityvalue-ios-android) for more information.

| Type                                                            |
| --------------------------------------------------------------- |
| object: `{min: number, max: number, now: number, text: string}` |

***

### `aria-valuemax`[‚Äã](#aria-valuemax "Direct link to aria-valuemax")

Represents the maximum value for range-based components, such as sliders and progress bars. Has precedence over the `max` value in the `accessibilityValue` prop.

| Type   |
| ------ |
| number |

***

### `aria-valuemin`[‚Äã](#aria-valuemin "Direct link to aria-valuemin")

Represents the minimum value for range-based components, such as sliders and progress bars. Has precedence over the `min` value in the `accessibilityValue` prop.

| Type   |
| ------ |
| number |

***

### `aria-valuenow`[‚Äã](#aria-valuenow "Direct link to aria-valuenow")

Represents the current value for range-based components, such as sliders and progress bars. Has precedence over the `now` value in the `accessibilityValue` prop.

| Type   |
| ------ |
| number |

***

### `aria-valuetext`[‚Äã](#aria-valuetext "Direct link to aria-valuetext")

Represents the textual description of the component. Has precedence over the `text` value in the `accessibilityValue` prop.

| Type   |
| ------ |
| string |

***

### `delayLongPress`[‚Äã](#delaylongpress "Direct link to delaylongpress")

Duration (in milliseconds) from `onPressIn` before `onLongPress` is called.

| Type   |
| ------ |
| number |

***

### `delayPressIn`[‚Äã](#delaypressin "Direct link to delaypressin")

Duration (in milliseconds), from the start of the touch, before `onPressIn` is called.

| Type   |
| ------ |
| number |

***

### `delayPressOut`[‚Äã](#delaypressout "Direct link to delaypressout")

Duration (in milliseconds), from the release of the touch, before `onPressOut` is called.

| Type   |
| ------ |
| number |

***

### `disabled`[‚Äã](#disabled "Direct link to disabled")

If true, disable all interactions for this component.

| Type |
| ---- |
| bool |

***

### `hitSlop`[‚Äã](#hitslop "Direct link to hitslop")

This defines how far your touch can start away from the button. This is added to `pressRetentionOffset` when moving off of the button.

note

The touch area never extends past the parent view bounds and the Z-index of sibling views always takes precedence if a touch hits two overlapping views.

| Type                            |
| ------------------------------- |
| [Rect](/docs/rect.md) or number |

### `id`[‚Äã](#id "Direct link to id")

Used to locate this view from native code. Has precedence over `nativeID` prop.

| Type   |
| ------ |
| string |

***

### `onBlur`[‚Äã](#onblur "Direct link to onblur")

Invoked when the item loses focus.

| Type                                   |
| -------------------------------------- |
| `({nativeEvent: TargetEvent}) => void` |

***

### `onFocus`[‚Äã](#onfocus "Direct link to onfocus")

Invoked when the item receives focus.

| Type                                   |
| -------------------------------------- |
| `({nativeEvent: TargetEvent}) => void` |

***

### `onLayout`[‚Äã](#onlayout "Direct link to onlayout")

Invoked on mount and on layout changes.

| Type                                   |
| -------------------------------------- |
| `({nativeEvent: LayoutEvent}) => void` |

***

### `onLongPress`[‚Äã](#onlongpress "Direct link to onlongpress")

Called if the time after `onPressIn` lasts longer than 370 milliseconds. This time period can be customized with [`delayLongPress`](#delaylongpress).

| Type     |
| -------- |
| function |

***

### `onPress`[‚Äã](#onpress "Direct link to onpress")

Called when the touch is released, but not if cancelled (e.g. by a scroll that steals the responder lock). The first function argument is an event in form of [PressEvent](/docs/pressevent.md).

| Type     |
| -------- |
| function |

***

### `onPressIn`[‚Äã](#onpressin "Direct link to onpressin")

Called as soon as the touchable element is pressed and invoked even before onPress. This can be useful when making network requests. The first function argument is an event in form of [PressEvent](/docs/pressevent.md).

| Type     |
| -------- |
| function |

***

### `onPressOut`[‚Äã](#onpressout "Direct link to onpressout")

Called as soon as the touch is released even before onPress. The first function argument is an event in form of [PressEvent](/docs/pressevent.md).

| Type     |
| -------- |
| function |

***

### `pressRetentionOffset`[‚Äã](#pressretentionoffset "Direct link to pressretentionoffset")

When the scroll view is disabled, this defines how far your touch may move off of the button, before deactivating the button. Once deactivated, try moving it back and you'll see that the button is once again reactivated! Move it back and forth several times while the scroll view is disabled. Ensure you pass in a constant to reduce memory allocations.

| Type                            |
| ------------------------------- |
| [Rect](/docs/rect.md) or number |

***

### `nativeID`[‚Äã](#nativeid "Direct link to nativeid")

| Type   |
| ------ |
| string |

***

### `testID`[‚Äã](#testid "Direct link to testid")

Used to locate this view in end-to-end tests.

| Type   |
| ------ |
| string |

***

### `touchSoundDisabled`Android[‚Äã](#touchsounddisabled-android "Direct link to touchsounddisabled-android")

If true, doesn't play a system sound on touch.

| Type    |
| ------- |
| Boolean |


---

# Transforms

Transforms are style properties that will help you modify the appearance and position of your components using 2D or 3D transformations. However, once you apply transforms, the layouts remain the same around the transformed component hence it might overlap with the nearby components. You can apply margin to the transformed component, the nearby components or padding to the container to prevent such overlaps.

## Example[‚Äã](#example "Direct link to Example")

***

# Reference

## Transform[‚Äã](#transform "Direct link to Transform")

`transform` accepts an array of transformation objects or space-separated string values. Each object specifies the property that will be transformed as the key, and the value to use in the transformation. Objects should not be combined. Use a single key/value pair per object.

The rotate transformations require a string so that the transform may be expressed in degrees (deg) or radians (rad). For example:

js

```
{
  transform: [{rotateX: '45deg'}, {rotateZ: '0.785398rad'}],
}
```

The same could also be achieved using a space-separated string:

js

```
{
  transform: 'rotateX(45deg) rotateZ(0.785398rad)',
}
```

The skew transformations require a string so that the transform may be expressed in degrees (deg). For example:

js

```
{
  transform: [{skewX: '45deg'}],
}
```

### Matrix Transform[‚Äã](#matrix-transform "Direct link to Matrix Transform")

The `matrix` transform accepts a 4x4 transformation matrix as an array of 16 numbers. This allows you to apply complex transformations that combine translation, rotation, scaling, and skewing in a single operation.

The matrix is specified in column-major order:

js

```
{
  transform: [
    {
      matrix: [
        scaleX,
        skewY,
        0,
        0,
        skewX,
        scaleY,
        0,
        0,
        0,
        0,
        1,
        0,
        translateX,
        translateY,
        0,
        1,
      ],
    },
  ];
}
```

For example, to apply a combination of scale and skew:

js

```
{
  transform: [
    {
      matrix: [
        1, 0.5, 0, 0, 0.5, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1,
      ],
    },
  ];
}
```

note

Matrix transforms are useful when you need to apply pre-calculated transformation matrices, such as those from animation libraries or when building UI editor applications. For basic transformations, it's recommended to use the individual transform properties (scale, rotate, translate, etc.) as they are more readable.

| Type                                                                                                                                                                                                                                                                                                          | Required |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| array of objects: `{matrix: number[]}`, `{perspective: number}`, `{rotate: string}`, `{rotateX: string}`, `{rotateY: string}`, `{rotateZ: string}`, `{scale: number}`, `{scaleX: number}`, `{scaleY: number}`, `{translateX: number}`, `{translateY: number}`, `{skewX: string}`, `{skewY: string}` or string | No       |

***

### `decomposedMatrix`, `rotation`, `scaleX`, `scaleY`, `transformMatrix`, `translateX`, `translateY`[‚Äã](#decomposedmatrix-rotation-scalex-scaley-transformmatrix-translatex-translatey "Direct link to decomposedmatrix-rotation-scalex-scaley-transformmatrix-translatex-translatey")

Deprecated

Use the [`transform`](/docs/transforms.md#transform) prop instead.

## Transform Origin[‚Äã](#transform-origin "Direct link to Transform Origin")

The `transformOrigin` property sets the origin for a view's transformations. The transform origin is the point around which a transformation is applied. By default, the origin of a transform is `center`.

# Example

### Values[‚Äã](#values "Direct link to Values")

Transform origin supports `px`, `percentage` and keywords `top`, `left`, `right`, `bottom`, `center` values.

The `transformOrigin` property may be specified using one, two, or three values, where each value represents an offset.

#### One-value syntax:[‚Äã](#one-value-syntax "Direct link to One-value syntax:")

* The value must be a `px`, a `percentage`, or one of the keywords `left`, `center`, `right`, `top`, and `bottom`.

js

```
{
  transformOrigin: '20px',
  transformOrigin: 'bottom',
}
```

#### Two-value syntax:[‚Äã](#two-value-syntax "Direct link to Two-value syntax:")

* First value (x-offset) must be a `px`, a `percentage`, or one of the keywords `left`, `center`, and `right`.
* The second value (y-offset) must be a `px`, a `percentage`, or one of the keywords `top`, `center`, and `bottom`.

js

```
{
  transformOrigin: '10px 2px',
  transformOrigin: 'left top',
  transformOrigin: 'top right',
}
```

#### Three-value syntax:[‚Äã](#three-value-syntax "Direct link to Three-value syntax:")

* The first two values are the same as for the two-value syntax.
* The third value (z-offset) must be a `px`. It always represents the Z offset.

js

```
{
  transformOrigin: '2px 30% 10px',
  transformOrigin: 'right bottom 20px',
}
```

#### Array syntax[‚Äã](#array-syntax "Direct link to Array syntax")

`transformOrigin` also supports an array syntax. It makes it convenient to use it with Animated APIs. It also avoids string parsing, so should be more efficient.

js

```
{
  // Using numeric values
  transformOrigin: [10, 30, 40],
  // Mixing numeric and percentage values
  transformOrigin: [10, '20%', 0],
}
```

You may refer to MDN's guide on [Transform origin](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin) for additional information.


---

# Troubleshooting

These are some common issues you may run into while setting up React Native. If you encounter something that is not listed here, try [searching for the issue in GitHub](https://github.com/facebook/react-native/issues/).

### Port already in use[‚Äã](#port-already-in-use "Direct link to Port already in use")

The [Metro bundler](https://metrobundler.dev/) runs on port 8081. If another process is already using that port, you can either terminate that process, or change the port that the bundler uses.

#### Terminating a process on port 8081[‚Äã](#terminating-a-process-on-port-8081 "Direct link to Terminating a process on port 8081")

Run the following command to find the id for the process that is listening on port 8081:

shell

```
sudo lsof -i :8081
```

Then run the following to terminate the process:

shell

```
kill -9 <PID>
```

On Windows you can find the process using port 8081 using [Resource Monitor](https://stackoverflow.com/questions/48198/how-can-you-find-out-which-process-is-listening-on-a-port-on-windows) and stop it using Task Manager.

#### Using a port other than 8081[‚Äã](#using-a-port-other-than-8081 "Direct link to Using a port other than 8081")

You can configure the bundler to use a port other than 8081 by using the `port` parameter, from the root of your project run:

* npm
* Yarn

shell

```
npm start -- --port=8088
```

shell

```
yarn start --port 8088
```

You will also need to update your applications to load the JavaScript bundle from the new port. If running on device from Xcode, you can do this by updating occurrences of `8081` to your chosen port in the `ios/__App_Name__.xcodeproj/project.pbxproj` file.

### NPM locking error[‚Äã](#npm-locking-error "Direct link to NPM locking error")

If you encounter an error such as `npm WARN locking Error: EACCES` while using the React Native CLI, try running the following:

shell

```
sudo chown -R $USER ~/.npm
sudo chown -R $USER /usr/local/lib/node_modules
```

### Missing libraries for React[‚Äã](#missing-libraries-for-react "Direct link to Missing libraries for React")

If you added React Native manually to your project, make sure you have included all the relevant dependencies that you are using, like `RCTText.xcodeproj`, `RCTImage.xcodeproj`. Next, the binaries built by these dependencies have to be linked to your app binary. Use the `Linked Frameworks and Binaries` section in the Xcode project settings. More detailed steps are here: [Linking Libraries](/docs/linking-libraries-ios.md#content).

If you are using CocoaPods, verify that you have added React along with the subspecs to the `Podfile`. For example, if you were using the `<Text />`, `<Image />` and `fetch()` APIs, you would need to add these in your `Podfile`:

```
pod 'React', :path => '../node_modules/react-native', :subspecs => [
  'RCTText',
  'RCTImage',
  'RCTNetwork',
  'RCTWebSocket',
]
```

Next, make sure you have run `pod install` and that a `Pods/` directory has been created in your project with React installed. CocoaPods will instruct you to use the generated `.xcworkspace` file henceforth to be able to use these installed dependencies.

#### React Native does not compile when being used as a CocoaPod[‚Äã](#react-native-does-not-compile-when-being-used-as-a-cocoapod "Direct link to React Native does not compile when being used as a CocoaPod")

There is a CocoaPods plugin called [cocoapods-fix-react-native](https://github.com/orta/cocoapods-fix-react-native) which handles any potential post-fixing of the source code due to differences when using a dependency manager.

#### Argument list too long: recursive header expansion failed[‚Äã](#argument-list-too-long-recursive-header-expansion-failed "Direct link to Argument list too long: recursive header expansion failed")

In the project's build settings, `User Search Header Paths` and `Header Search Paths` are two configs that specify where Xcode should look for `#import` header files specified in the code. For Pods, CocoaPods uses a default array of specific folders to look in. Verify that this particular config is not overwritten, and that none of the folders configured are too large. If one of the folders is a large folder, Xcode will attempt to recursively search the entire directory and throw above error at some point.

To revert the `User Search Header Paths` and `Header Search Paths` build settings to their defaults set by CocoaPods - select the entry in the Build Settings panel, and hit delete. It will remove the custom override and return to the CocoaPod defaults.

### No transports available[‚Äã](#no-transports-available "Direct link to No transports available")

React Native implements a polyfill for WebSockets. These [polyfills](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Core/InitializeCore.js) are initialized as part of the react-native module that you include in your application through `import React from 'react'`. If you load another module that requires WebSockets, such as [Firebase](https://github.com/facebook/react-native/issues/3645), be sure to load/require it after react-native:

```
import React from 'react';
import Firebase from 'firebase';
```

## Shell Command Unresponsive Exception[‚Äã](#shell-command-unresponsive-exception "Direct link to Shell Command Unresponsive Exception")

If you encounter a ShellCommandUnresponsiveException exception such as:

```
Execution failed for task ':app:installDebug'.
  com.android.builder.testing.api.DeviceException: com.android.ddmlib.ShellCommandUnresponsiveException
```

Restart the ADB server by running the following commands in your terminal:

```
adb kill-server
adb start-server
```

## Unable to start react-native package manager (on Linux)[‚Äã](#unable-to-start-react-native-package-manager-on-linux "Direct link to Unable to start react-native package manager (on Linux)")

### Case 1: Error "code":"ENOSPC","errno":"ENOSPC"[‚Äã](#case-1-error-codeenospcerrnoenospc "Direct link to Case 1: Error \"code\":\"ENOSPC\",\"errno\":\"ENOSPC\"")

Issue caused by the number of directories [inotify](https://github.com/guard/listen/blob/master/README.md#increasing-the-amount-of-inotify-watchers) (used by watchman on Linux) can monitor. To solve it, run this command in your terminal window

shell

```
echo fs.inotify.max_user_watches=582222 | sudo tee -a /etc/sysctl.conf && sudo sysctl -p
```

### Error: spawnSync ./gradlew EACCES[‚Äã](#error-spawnsync-gradlew-eacces "Direct link to Error: spawnSync ./gradlew EACCES")

If you run into issue where executing `npm run android` or `yarn android` on macOS throws the above error, try to run `sudo chmod +x android/gradlew` command to make `gradlew` files into executable.


---

# Turbo Native Modules: Android

Now it's time to write some Android platform code to make sure `localStorage` survives after the application is closed.

The first step is to implement the generated `NativeLocalStorageSpec` interface:

* Java
* Kotlin

android/app/src/main/java/com/nativelocalstorage/NativeLocalStorageModule.java

```
package com.nativelocalstorage;

import android.content.Context;
import android.content.SharedPreferences;
import com.nativelocalstorage.NativeLocalStorageSpec;
import com.facebook.react.bridge.ReactApplicationContext;

public class NativeLocalStorageModule extends NativeLocalStorageSpec {

  public static final String NAME = "NativeLocalStorage";

  public NativeLocalStorageModule(ReactApplicationContext reactContext) {
    super(reactContext);
  }

  @Override
  public String getName() {
    return NAME;
  }

  @Override
  public void setItem(String value, String key) {
    SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPref.edit();
    editor.putString(key, value);
    editor.apply();
  }

  @Override
  public String getItem(String key) {
    SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
    String username = sharedPref.getString(key, null);
    return username;
  }

  @Override
  public void removeItem(String key) {
    SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
    sharedPref.edit().remove(key).apply();
  }

  @Override
  public void clear() {
    SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
    sharedPref.edit().clear().apply();
  }
}
```

android/app/src/main/java/com/nativelocalstorage/NativeLocalStorageModule.kt

```
package com.nativelocalstorage

import android.content.Context
import android.content.SharedPreferences
import com.nativelocalstorage.NativeLocalStorageSpec
import com.facebook.react.bridge.ReactApplicationContext

class NativeLocalStorageModule(reactContext: ReactApplicationContext) : NativeLocalStorageSpec(reactContext) {

  override fun getName() = NAME

  override fun setItem(value: String, key: String) {
    val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
    val editor = sharedPref.edit()
    editor.putString(key, value)
    editor.apply()
  }

  override fun getItem(key: String): String? {
    val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
    val username = sharedPref.getString(key, null)
    return username.toString()
  }

  override fun removeItem(key: String) {
    val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
    val editor = sharedPref.edit()
    editor.remove(key)
    editor.apply()
  }

  override fun clear() {
    val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
    val editor = sharedPref.edit()
    editor.clear()
    editor.apply()
  }

  companion object {
    const val NAME = "NativeLocalStorage"
  }
}
```

Next we need to create `NativeLocalStoragePackage`. It provides an object to register our Module in the React Native runtime, by wrapping it as a Base Native Package:

* Java
* Kotlin

android/app/src/main/java/com/nativelocalstorage/NativeLocalStoragePackage.java

```
package com.nativelocalstorage;

import com.facebook.react.BaseReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.model.ReactModuleInfo;
import com.facebook.react.module.model.ReactModuleInfoProvider;

import java.util.HashMap;
import java.util.Map;

public class NativeLocalStoragePackage extends BaseReactPackage {

  @Override
  public NativeModule getModule(String name, ReactApplicationContext reactContext) {
    if (name.equals(NativeLocalStorageModule.NAME)) {
      return new NativeLocalStorageModule(reactContext);
    } else {
      return null;
    }
  }

  @Override
  public ReactModuleInfoProvider getReactModuleInfoProvider() {
    return new ReactModuleInfoProvider() {
      @Override
      public Map<String, ReactModuleInfo> getReactModuleInfos() {
        Map<String, ReactModuleInfo> map = new HashMap<>();
        map.put(NativeLocalStorageModule.NAME, new ReactModuleInfo(
          NativeLocalStorageModule.NAME,       // name
          NativeLocalStorageModule.NAME,       // className
          false, // canOverrideExistingModule
          false, // needsEagerInit
          false, // isCXXModule
          true   // isTurboModule
        ));
        return map;
      }
    };
  }
}
```

android/app/src/main/java/com/nativelocalstorage/NativeLocalStoragePackage.kt

```
package com.nativelocalstorage

import com.facebook.react.BaseReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.module.model.ReactModuleInfo
import com.facebook.react.module.model.ReactModuleInfoProvider

class NativeLocalStoragePackage : BaseReactPackage() {

  override fun getModule(name: String, reactContext: ReactApplicationContext): NativeModule? =
    if (name == NativeLocalStorageModule.NAME) {
      NativeLocalStorageModule(reactContext)
    } else {
      null
    }

  override fun getReactModuleInfoProvider() = ReactModuleInfoProvider {
    mapOf(
      NativeLocalStorageModule.NAME to ReactModuleInfo(
        name = NativeLocalStorageModule.NAME,
        className = NativeLocalStorageModule.NAME,
        canOverrideExistingModule = false,
        needsEagerInit = false,
        isCxxModule = false,
        isTurboModule = true
      )
    )
  }
}
```

Finally, we need to tell the React Native in our main application how to find this `Package`. We call this "registering" the package in React Native.

In this case, you add it to be returned by the [getPackages](https://github.com/facebook/react-native/blob/8d8b8c343e62115a5509e1aed62047053c2f6e39/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/ReactNativeHost.java#L233) method.

info

Later you‚Äôll learn how to distribute your Native Modules as [npm packages](/docs/the-new-architecture/create-module-library.md#publish-the-library-on-npm), which our build tooling will autolink for you.

* Java
* Kotlin

android/app/src/main/java/com/turobmoduleexample/MainApplication.java

```
package com.inappmodule;

import android.app.Application;
import com.facebook.react.PackageList;
import com.facebook.react.ReactApplication;
import com.facebook.react.ReactHost;
import com.facebook.react.ReactNativeHost;
import com.facebook.react.ReactPackage;
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint;
import com.facebook.react.defaults.DefaultReactHost;
import com.facebook.react.defaults.DefaultReactNativeHost;
import com.facebook.soloader.SoLoader;
import com.nativelocalstorage.NativeLocalStoragePackage;

import java.util.ArrayList;
import java.util.List;

public class MainApplication extends Application implements ReactApplication {

  private final ReactNativeHost reactNativeHost = new DefaultReactNativeHost(this) {
    @Override
    public List<ReactPackage> getPackages() {
      List<ReactPackage> packages = new PackageList(this).getPackages();
      // Packages that cannot be autolinked yet can be added manually here, for example:
      // packages.add(new MyReactNativePackage());
      packages.add(new NativeLocalStoragePackage());
      return packages;
    }

    @Override
    public String getJSMainModuleName() {
      return "index";
    }

    @Override
    public boolean getUseDeveloperSupport() {
      return BuildConfig.DEBUG;
    }

    @Override
    public boolean isNewArchEnabled() {
      return BuildConfig.IS_NEW_ARCHITECTURE_ENABLED;
    }

    @Override
    public boolean isHermesEnabled() {
      return BuildConfig.IS_HERMES_ENABLED;
    }
  };

  @Override
  public ReactHost getReactHost() {
    return DefaultReactHost.getDefaultReactHost(getApplicationContext(), reactNativeHost);
  }

  @Override
  public void onCreate() {
    super.onCreate();
    SoLoader.init(this, false);
    if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
      // If you opted-in for the New Architecture, we load the native entry point for this app.
      DefaultNewArchitectureEntryPoint.load();
    }
  }
}
```

android/app/src/main/java/com/turobmoduleexample/MainApplication.kt

```
package com.inappmodule

import android.app.Application
import com.facebook.react.PackageList
import com.facebook.react.ReactApplication
import com.facebook.react.ReactHost
import com.facebook.react.ReactNativeHost
import com.facebook.react.ReactPackage
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.load
import com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost
import com.facebook.react.defaults.DefaultReactNativeHost
import com.facebook.soloader.SoLoader
import com.nativelocalstorage.NativeLocalStoragePackage

class MainApplication : Application(), ReactApplication {

  override val reactNativeHost: ReactNativeHost =
      object : DefaultReactNativeHost(this) {
        override fun getPackages(): List<ReactPackage> =
            PackageList(this).packages.apply {
              // Packages that cannot be autolinked yet can be added manually here, for example:
              // add(MyReactNativePackage())
              add(NativeLocalStoragePackage())
            }

        override fun getJSMainModuleName(): String = "index"

        override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG

        override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED
        override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED
      }

  override val reactHost: ReactHost
    get() = getDefaultReactHost(applicationContext, reactNativeHost)

  override fun onCreate() {
    super.onCreate()
    SoLoader.init(this, false)
    if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
      // If you opted-in for the New Architecture, we load the native entry point for this app.
      load()
    }
  }
}
```

You can now build and run your code on an emulator:

* npm
* Yarn

bash

```
npm run android
```

bash

```
yarn run android
```

[](/docs/assets/turbo-native-modules/turbo-native-modules-android.webm)


---

# Native Modules

Your React Native application code may need to interact with native platform APIs that aren't provided by React Native or an existing library. You can write the integration code yourself using a **Turbo Native Module**. This guide will show you how to write one.

The basic steps are:

1. **define a typed JavaScript specification** using one of the most popular JavaScript type annotation languages: Flow or TypeScript;
2. **configure your dependency management system to run Codegen**, which converts the specification into native language interfaces;
3. **write your application code** using your specification; and
4. **write your native platform code using the generated interfaces** to write and hook your native code into the React Native runtime environment.

Lets work through each of these steps by building an example Turbo Native Module. The rest of this guide assume that you have created your application running the command:

shell

```
npx @react-native-community/cli@latest init TurboModuleExample --version 0.83
```

## Native Persistent Storage[‚Äã](#native-persistent-storage "Direct link to Native Persistent Storage")

This guide will show you how to write an implementation of the [Web Storage API](https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage-dev): `localStorage`. The API is relatable to a React developer who might be writing application code on your project.

To make this work on mobile, we need to use Android and iOS APIs:

* Android: [SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences), and
* iOS: [NSUserDefaults](https://developer.apple.com/documentation/foundation/nsuserdefaults).

### 1. Declare Typed Specification[‚Äã](#1-declare-typed-specification "Direct link to 1. Declare Typed Specification")

React Native provides a tool called [Codegen](/docs/the-new-architecture/what-is-codegen.md), which takes a specification written in TypeScript or Flow and generates platform specific code for Android and iOS. The specification declares the methods and data types that will pass back and forth between your native code and the React Native JavaScript runtime. A Turbo Native Module is both your specification, the native code you write, and the Codegen interfaces generated from your specification.

To create a specs file:

1. Inside the root folder of your app, create a new folder called `specs`.
2. Create a new file called `NativeLocalStorage.ts`.

info

You can see all of the types you can use in your specification and the native types that are generated in the [Appendix](/docs/appendix.md) documentation.

Here is an implementation of the `localStorage` specification:

* TypeScript
* Flow

specs/NativeLocalStorage.ts

```
import type {TurboModule} from 'react-native';
import {TurboModuleRegistry} from 'react-native';

export interface Spec extends TurboModule {
  setItem(value: string, key: string): void;
  getItem(key: string): string | null;
  removeItem(key: string): void;
  clear(): void;
}

export default TurboModuleRegistry.getEnforcing<Spec>(
  'NativeLocalStorage',
);
```

NativeLocalStorage.js

```
import type {TurboModule} from 'react-native';
import {TurboModule, TurboModuleRegistry} from 'react-native';

export interface Spec extends TurboModule {
  setItem(value: string, key: string): void;
  getItem(key: string): ?string;
  removeItem(key: string): void;
  clear(): void;
}
```

### 2. Configure Codegen to run[‚Äã](#2-configure-codegen-to-run "Direct link to 2. Configure Codegen to run")

The specification is used by the React Native Codegen tools to generate platform specific interfaces and boilerplate for us. To do this, Codegen needs to know where to find our specification and what to do with it. Update your `package.json` to include:

package.json

```
     "start": "react-native start",
     "test": "jest"
   },
   "codegenConfig": {
     "name": "NativeLocalStorageSpec",
     "type": "modules",
     "jsSrcsDir": "specs",
     "android": {
       "javaPackageName": "com.nativelocalstorage"
     }
   },
   "dependencies": {
```

With everything wired up for Codegen, we need to prepare our native code to hook into our generated code.

* Android
* iOS

Codegen is executed through the `generateCodegenArtifactsFromSchema` Gradle task:

bash

```
cd android
./gradlew generateCodegenArtifactsFromSchema

BUILD SUCCESSFUL in 837ms
14 actionable tasks: 3 executed, 11 up-to-date
```

This is automatically run when you build your Android application.

Codegen is run as part of the script phases that's automatically added to the project generated by CocoaPods.

bash

```
cd ios
bundle install
bundle exec pod install
```

The output will look like this:

shell

```
...
Framework build type is static library
[Codegen] Adding script_phases to ReactCodegen.
[Codegen] Generating ./build/generated/ios/ReactCodegen.podspec.json
[Codegen] Analyzing /Users/me/src/TurboModuleExample/package.json
[Codegen] Searching for codegen-enabled libraries in the app.
[Codegen] Found TurboModuleExample
[Codegen] Searching for codegen-enabled libraries in the project dependencies.
[Codegen] Found react-native
...
```

### 3. Write Application Code using the Turbo Native Module[‚Äã](#3-write-application-code-using-the-turbo-native-module "Direct link to 3. Write Application Code using the Turbo Native Module")

Using `NativeLocalStorage`, here‚Äôs a modified `App.tsx` that includes some text we want persisted, an input field and some buttons to update this value.

The `TurboModuleRegistry` supports 2 modes of retrieving a Turbo Native Module:

* `get<T>(name: string): T | null` which will return `null` if the Turbo Native Module is unavailable.
* `getEnforcing<T>(name: string): T` which will throw an exception if the Turbo Native Module is unavailable. This assumes the module is always available.

App.tsx

```
import React from 'react';
import {
  SafeAreaView,
  StyleSheet,
  Text,
  TextInput,
  Button,
} from 'react-native';

import NativeLocalStorage from './specs/NativeLocalStorage';

const EMPTY = '<empty>';

function App(): React.JSX.Element {
  const [value, setValue] = React.useState<string | null>(null);

  const [editingValue, setEditingValue] = React.useState<
    string | null
  >(null);

  React.useEffect(() => {
    const storedValue = NativeLocalStorage?.getItem('myKey');
    setValue(storedValue ?? '');
  }, []);

  function saveValue() {
    NativeLocalStorage?.setItem(editingValue ?? EMPTY, 'myKey');
    setValue(editingValue);
  }

  function clearAll() {
    NativeLocalStorage?.clear();
    setValue('');
  }

  function deleteValue() {
    NativeLocalStorage?.removeItem('myKey');
    setValue('');
  }

  return (
    <SafeAreaView style={{flex: 1}}>
      <Text style={styles.text}>
        Current stored value is: {value ?? 'No Value'}
      </Text>
      <TextInput
        placeholder="Enter the text you want to store"
        style={styles.textInput}
        onChangeText={setEditingValue}
      />
      <Button title="Save" onPress={saveValue} />
      <Button title="Delete" onPress={deleteValue} />
      <Button title="Clear" onPress={clearAll} />
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  text: {
    margin: 10,
    fontSize: 20,
  },
  textInput: {
    margin: 10,
    height: 40,
    borderColor: 'black',
    borderWidth: 1,
    paddingLeft: 5,
    paddingRight: 5,
    borderRadius: 5,
  },
});

export default App;
```

### 4. Write your Native Platform code[‚Äã](#4-write-your-native-platform-code "Direct link to 4. Write your Native Platform code")

With everything prepared, we're going to start writing native platform code. We do this in 2 parts:

note

This guide shows you how to create a Turbo Native Module that only works with the New Architecture. If you need to support both the New Architecture and the Legacy Architecture, please refer to our [backwards compatibility guide](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/backwards-compat.md).

* Android
* iOS

Now it's time to write some Android platform code to make sure `localStorage` survives after the application is closed.

The first step is to implement the generated `NativeLocalStorageSpec` interface:

* Java
* Kotlin

android/app/src/main/java/com/nativelocalstorage/NativeLocalStorageModule.java

```
package com.nativelocalstorage;

import android.content.Context;
import android.content.SharedPreferences;
import com.nativelocalstorage.NativeLocalStorageSpec;
import com.facebook.react.bridge.ReactApplicationContext;

public class NativeLocalStorageModule extends NativeLocalStorageSpec {

  public static final String NAME = "NativeLocalStorage";

  public NativeLocalStorageModule(ReactApplicationContext reactContext) {
    super(reactContext);
  }

  @Override
  public String getName() {
    return NAME;
  }

  @Override
  public void setItem(String value, String key) {
    SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPref.edit();
    editor.putString(key, value);
    editor.apply();
  }

  @Override
  public String getItem(String key) {
    SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
    String username = sharedPref.getString(key, null);
    return username;
  }

  @Override
  public void removeItem(String key) {
    SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
    sharedPref.edit().remove(key).apply();
  }

  @Override
  public void clear() {
    SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
    sharedPref.edit().clear().apply();
  }
}
```

android/app/src/main/java/com/nativelocalstorage/NativeLocalStorageModule.kt

```
package com.nativelocalstorage

import android.content.Context
import android.content.SharedPreferences
import com.nativelocalstorage.NativeLocalStorageSpec
import com.facebook.react.bridge.ReactApplicationContext

class NativeLocalStorageModule(reactContext: ReactApplicationContext) : NativeLocalStorageSpec(reactContext) {

  override fun getName() = NAME

  override fun setItem(value: String, key: String) {
    val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
    val editor = sharedPref.edit()
    editor.putString(key, value)
    editor.apply()
  }

  override fun getItem(key: String): String? {
    val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
    val username = sharedPref.getString(key, null)
    return username.toString()
  }

  override fun removeItem(key: String) {
    val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
    val editor = sharedPref.edit()
    editor.remove(key)
    editor.apply()
  }

  override fun clear() {
    val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
    val editor = sharedPref.edit()
    editor.clear()
    editor.apply()
  }

  companion object {
    const val NAME = "NativeLocalStorage"
  }
}
```

Next we need to create `NativeLocalStoragePackage`. It provides an object to register our Module in the React Native runtime, by wrapping it as a Base Native Package:

* Java
* Kotlin

android/app/src/main/java/com/nativelocalstorage/NativeLocalStoragePackage.java

```
package com.nativelocalstorage;

import com.facebook.react.BaseReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.model.ReactModuleInfo;
import com.facebook.react.module.model.ReactModuleInfoProvider;

import java.util.HashMap;
import java.util.Map;

public class NativeLocalStoragePackage extends BaseReactPackage {

  @Override
  public NativeModule getModule(String name, ReactApplicationContext reactContext) {
    if (name.equals(NativeLocalStorageModule.NAME)) {
      return new NativeLocalStorageModule(reactContext);
    } else {
      return null;
    }
  }

  @Override
  public ReactModuleInfoProvider getReactModuleInfoProvider() {
    return new ReactModuleInfoProvider() {
      @Override
      public Map<String, ReactModuleInfo> getReactModuleInfos() {
        Map<String, ReactModuleInfo> map = new HashMap<>();
        map.put(NativeLocalStorageModule.NAME, new ReactModuleInfo(
          NativeLocalStorageModule.NAME,       // name
          NativeLocalStorageModule.NAME,       // className
          false, // canOverrideExistingModule
          false, // needsEagerInit
          false, // isCXXModule
          true   // isTurboModule
        ));
        return map;
      }
    };
  }
}
```

android/app/src/main/java/com/nativelocalstorage/NativeLocalStoragePackage.kt

```
package com.nativelocalstorage

import com.facebook.react.BaseReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.module.model.ReactModuleInfo
import com.facebook.react.module.model.ReactModuleInfoProvider

class NativeLocalStoragePackage : BaseReactPackage() {

  override fun getModule(name: String, reactContext: ReactApplicationContext): NativeModule? =
    if (name == NativeLocalStorageModule.NAME) {
      NativeLocalStorageModule(reactContext)
    } else {
      null
    }

  override fun getReactModuleInfoProvider() = ReactModuleInfoProvider {
    mapOf(
      NativeLocalStorageModule.NAME to ReactModuleInfo(
        name = NativeLocalStorageModule.NAME,
        className = NativeLocalStorageModule.NAME,
        canOverrideExistingModule = false,
        needsEagerInit = false,
        isCxxModule = false,
        isTurboModule = true
      )
    )
  }
}
```

Finally, we need to tell the React Native in our main application how to find this `Package`. We call this "registering" the package in React Native.

In this case, you add it to be returned by the [getPackages](https://github.com/facebook/react-native/blob/8d8b8c343e62115a5509e1aed62047053c2f6e39/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/ReactNativeHost.java#L233) method.

info

Later you‚Äôll learn how to distribute your Native Modules as [npm packages](/docs/the-new-architecture/create-module-library.md#publish-the-library-on-npm), which our build tooling will autolink for you.

* Java
* Kotlin

android/app/src/main/java/com/turobmoduleexample/MainApplication.java

```
package com.inappmodule;

import android.app.Application;
import com.facebook.react.PackageList;
import com.facebook.react.ReactApplication;
import com.facebook.react.ReactHost;
import com.facebook.react.ReactNativeHost;
import com.facebook.react.ReactPackage;
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint;
import com.facebook.react.defaults.DefaultReactHost;
import com.facebook.react.defaults.DefaultReactNativeHost;
import com.facebook.soloader.SoLoader;
import com.nativelocalstorage.NativeLocalStoragePackage;

import java.util.ArrayList;
import java.util.List;

public class MainApplication extends Application implements ReactApplication {

  private final ReactNativeHost reactNativeHost = new DefaultReactNativeHost(this) {
    @Override
    public List<ReactPackage> getPackages() {
      List<ReactPackage> packages = new PackageList(this).getPackages();
      // Packages that cannot be autolinked yet can be added manually here, for example:
      // packages.add(new MyReactNativePackage());
      packages.add(new NativeLocalStoragePackage());
      return packages;
    }

    @Override
    public String getJSMainModuleName() {
      return "index";
    }

    @Override
    public boolean getUseDeveloperSupport() {
      return BuildConfig.DEBUG;
    }

    @Override
    public boolean isNewArchEnabled() {
      return BuildConfig.IS_NEW_ARCHITECTURE_ENABLED;
    }

    @Override
    public boolean isHermesEnabled() {
      return BuildConfig.IS_HERMES_ENABLED;
    }
  };

  @Override
  public ReactHost getReactHost() {
    return DefaultReactHost.getDefaultReactHost(getApplicationContext(), reactNativeHost);
  }

  @Override
  public void onCreate() {
    super.onCreate();
    SoLoader.init(this, false);
    if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
      // If you opted-in for the New Architecture, we load the native entry point for this app.
      DefaultNewArchitectureEntryPoint.load();
    }
  }
}
```

android/app/src/main/java/com/turobmoduleexample/MainApplication.kt

```
package com.inappmodule

import android.app.Application
import com.facebook.react.PackageList
import com.facebook.react.ReactApplication
import com.facebook.react.ReactHost
import com.facebook.react.ReactNativeHost
import com.facebook.react.ReactPackage
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.load
import com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost
import com.facebook.react.defaults.DefaultReactNativeHost
import com.facebook.soloader.SoLoader
import com.nativelocalstorage.NativeLocalStoragePackage

class MainApplication : Application(), ReactApplication {

  override val reactNativeHost: ReactNativeHost =
      object : DefaultReactNativeHost(this) {
        override fun getPackages(): List<ReactPackage> =
            PackageList(this).packages.apply {
              // Packages that cannot be autolinked yet can be added manually here, for example:
              // add(MyReactNativePackage())
              add(NativeLocalStoragePackage())
            }

        override fun getJSMainModuleName(): String = "index"

        override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG

        override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED
        override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED
      }

  override val reactHost: ReactHost
    get() = getDefaultReactHost(applicationContext, reactNativeHost)

  override fun onCreate() {
    super.onCreate()
    SoLoader.init(this, false)
    if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
      // If you opted-in for the New Architecture, we load the native entry point for this app.
      load()
    }
  }
}
```

You can now build and run your code on an emulator:

* npm
* Yarn

bash

```
npm run android
```

bash

```
yarn run android
```

[](/docs/assets/turbo-native-modules/turbo-native-modules-android.webm)

Now it's time to write some iOS platform code to make sure `localStorage` survives after the application is closed.

## Prepare your Xcode Project[‚Äã](#prepare-your-xcode-project "Direct link to Prepare your Xcode Project")

We need to prepare your iOS project using Xcode. After completing these **6 steps** you'll have `RCTNativeLocalStorage` that implements the generated `NativeLocalStorageSpec` interface.

1. Open the CocoaPods generated Xcode Workspace:

bash

```
cd ios
open TurboModuleExample.xcworkspace
```

![Open Xcode Workspace](/docs/assets/turbo-native-modules/xcode/1.webp)

2. Right click on app and select `New Group`, call the new group `NativeLocalStorage`.

![Right click on app and select New Group](/docs/assets/turbo-native-modules/xcode/2.webp)

3. In the `NativeLocalStorage` group, create `New`‚Üí`File from Template`.

![Create a new file using the Cocoa Touch Class template](/docs/assets/turbo-native-modules/xcode/3.webp)

4. Use the `Cocoa Touch Class`.

![Use the Cocoa Touch Class template](/docs/assets/turbo-native-modules/xcode/4.webp)

5. Name the Cocoa Touch Class `RCTNativeLocalStorage` with the `Objective-C` language.

![Create an Objective-C RCTNativeLocalStorage class](/docs/assets/turbo-native-modules/xcode/5.webp)

6. Rename `RCTNativeLocalStorage.m` ‚Üí `RCTNativeLocalStorage.mm` making it an Objective-C++ file.

![Convert to and Objective-C++ file](/docs/assets/turbo-native-modules/xcode/6.webp)

## Implement localStorage with NSUserDefaults[‚Äã](#implement-localstorage-with-nsuserdefaults "Direct link to Implement localStorage with NSUserDefaults")

Start by updating `RCTNativeLocalStorage.h`:

NativeLocalStorage/RCTNativeLocalStorage.h

```
//  RCTNativeLocalStorage.h
//  TurboModuleExample

#import <Foundation/Foundation.h>
#import <NativeLocalStorageSpec/NativeLocalStorageSpec.h>

NS_ASSUME_NONNULL_BEGIN

@interface RCTNativeLocalStorage : NSObject
@interface RCTNativeLocalStorage : NSObject <NativeLocalStorageSpec>

@end
```

Then update our implementation to use `NSUserDefaults` with a custom [suite name](https://developer.apple.com/documentation/foundation/nsuserdefaults/1409957-initwithsuitename).

NativeLocalStorage/RCTNativeLocalStorage.mm

```
//  RCTNativeLocalStorage.m
//  TurboModuleExample

#import "RCTNativeLocalStorage.h"

static NSString *const RCTNativeLocalStorageKey = @"local-storage";

@interface RCTNativeLocalStorage()
@property (strong, nonatomic) NSUserDefaults *localStorage;
@end

@implementation RCTNativeLocalStorage

- (id) init {
  if (self = [super init]) {
    _localStorage = [[NSUserDefaults alloc] initWithSuiteName:RCTNativeLocalStorageKey];
  }
  return self;
}

- (std::shared_ptr<facebook::react::TurboModule>)getTurboModule:(const facebook::react::ObjCTurboModule::InitParams &)params {
  return std::make_shared<facebook::react::NativeLocalStorageSpecJSI>(params);
}

- (NSString * _Nullable)getItem:(NSString *)key {
  return [self.localStorage stringForKey:key];
}

- (void)setItem:(NSString *)value
          key:(NSString *)key {
  [self.localStorage setObject:value forKey:key];
}

- (void)removeItem:(NSString *)key {
  [self.localStorage removeObjectForKey:key];
}

- (void)clear {
  NSDictionary *keys = [self.localStorage dictionaryRepresentation];
  for (NSString *key in keys) {
    [self removeItem:key];
  }
}

+ (NSString *)moduleName
{
  return @"NativeLocalStorage";
}

@end
```

Important things to note:

* You can use Xcode to jump to the Codegen `@protocol NativeLocalStorageSpec`. You can also use Xcode to generate stubs for you.

## Register the Native Module in your app[‚Äã](#register-the-native-module-in-your-app "Direct link to Register the Native Module in your app")

The last step consist in updating the `package.json` to tell React Native about the link between the JS specs of the Native Module and the concrete implementation of those specs in native code.

Modify the `package.json` as it follows:

package.json

```
     "start": "react-native start",
     "test": "jest"
   },
   "codegenConfig": {
     "name": "AppSpecs",
     "type": "modules",
     "jsSrcsDir": "specs",
     "android": {
       "javaPackageName": "com.sampleapp.specs"
     },
     "ios": {
        "modulesProvider": {
          "NativeLocalStorage": "RCTNativeLocalStorage"
        }
     }
   },

   "dependencies": {
```

At this point, you need to re-install the pods to make sure that codegen runs again to generate the new files:

bash

```
# from the ios folder
bundle exec pod install
open SampleApp.xcworkspace
```

If you now build your application from Xcode, you should be able to build successfully.

## Build and run your code on a Simulator[‚Äã](#build-and-run-your-code-on-a-simulator "Direct link to Build and run your code on a Simulator")

* npm
* Yarn

bash

```
npm run ios
```

bash

```
yarn run ios
```

[](/docs/assets/turbo-native-modules/turbo-native-modules-ios.webm)


---

# Turbo Native Modules: iOS

Now it's time to write some iOS platform code to make sure `localStorage` survives after the application is closed.

## Prepare your Xcode Project[‚Äã](#prepare-your-xcode-project "Direct link to Prepare your Xcode Project")

We need to prepare your iOS project using Xcode. After completing these **6 steps** you'll have `RCTNativeLocalStorage` that implements the generated `NativeLocalStorageSpec` interface.

1. Open the CocoaPods generated Xcode Workspace:

bash

```
cd ios
open TurboModuleExample.xcworkspace
```

![Open Xcode Workspace](/docs/assets/turbo-native-modules/xcode/1.webp)

2. Right click on app and select `New Group`, call the new group `NativeLocalStorage`.

![Right click on app and select New Group](/docs/assets/turbo-native-modules/xcode/2.webp)

3. In the `NativeLocalStorage` group, create `New`‚Üí`File from Template`.

![Create a new file using the Cocoa Touch Class template](/docs/assets/turbo-native-modules/xcode/3.webp)

4. Use the `Cocoa Touch Class`.

![Use the Cocoa Touch Class template](/docs/assets/turbo-native-modules/xcode/4.webp)

5. Name the Cocoa Touch Class `RCTNativeLocalStorage` with the `Objective-C` language.

![Create an Objective-C RCTNativeLocalStorage class](/docs/assets/turbo-native-modules/xcode/5.webp)

6. Rename `RCTNativeLocalStorage.m` ‚Üí `RCTNativeLocalStorage.mm` making it an Objective-C++ file.

![Convert to and Objective-C++ file](/docs/assets/turbo-native-modules/xcode/6.webp)

## Implement localStorage with NSUserDefaults[‚Äã](#implement-localstorage-with-nsuserdefaults "Direct link to Implement localStorage with NSUserDefaults")

Start by updating `RCTNativeLocalStorage.h`:

NativeLocalStorage/RCTNativeLocalStorage.h

```
//  RCTNativeLocalStorage.h
//  TurboModuleExample

#import <Foundation/Foundation.h>
#import <NativeLocalStorageSpec/NativeLocalStorageSpec.h>

NS_ASSUME_NONNULL_BEGIN

@interface RCTNativeLocalStorage : NSObject
@interface RCTNativeLocalStorage : NSObject <NativeLocalStorageSpec>

@end
```

Then update our implementation to use `NSUserDefaults` with a custom [suite name](https://developer.apple.com/documentation/foundation/nsuserdefaults/1409957-initwithsuitename).

NativeLocalStorage/RCTNativeLocalStorage.mm

```
//  RCTNativeLocalStorage.m
//  TurboModuleExample

#import "RCTNativeLocalStorage.h"

static NSString *const RCTNativeLocalStorageKey = @"local-storage";

@interface RCTNativeLocalStorage()
@property (strong, nonatomic) NSUserDefaults *localStorage;
@end

@implementation RCTNativeLocalStorage

- (id) init {
  if (self = [super init]) {
    _localStorage = [[NSUserDefaults alloc] initWithSuiteName:RCTNativeLocalStorageKey];
  }
  return self;
}

- (std::shared_ptr<facebook::react::TurboModule>)getTurboModule:(const facebook::react::ObjCTurboModule::InitParams &)params {
  return std::make_shared<facebook::react::NativeLocalStorageSpecJSI>(params);
}

- (NSString * _Nullable)getItem:(NSString *)key {
  return [self.localStorage stringForKey:key];
}

- (void)setItem:(NSString *)value
          key:(NSString *)key {
  [self.localStorage setObject:value forKey:key];
}

- (void)removeItem:(NSString *)key {
  [self.localStorage removeObjectForKey:key];
}

- (void)clear {
  NSDictionary *keys = [self.localStorage dictionaryRepresentation];
  for (NSString *key in keys) {
    [self removeItem:key];
  }
}

+ (NSString *)moduleName
{
  return @"NativeLocalStorage";
}

@end
```

Important things to note:

* You can use Xcode to jump to the Codegen `@protocol NativeLocalStorageSpec`. You can also use Xcode to generate stubs for you.

## Register the Native Module in your app[‚Äã](#register-the-native-module-in-your-app "Direct link to Register the Native Module in your app")

The last step consist in updating the `package.json` to tell React Native about the link between the JS specs of the Native Module and the concrete implementation of those specs in native code.

Modify the `package.json` as it follows:

package.json

```
     "start": "react-native start",
     "test": "jest"
   },
   "codegenConfig": {
     "name": "AppSpecs",
     "type": "modules",
     "jsSrcsDir": "specs",
     "android": {
       "javaPackageName": "com.sampleapp.specs"
     },
     "ios": {
        "modulesProvider": {
          "NativeLocalStorage": "RCTNativeLocalStorage"
        }
     }
   },

   "dependencies": {
```

At this point, you need to re-install the pods to make sure that codegen runs again to generate the new files:

bash

```
# from the ios folder
bundle exec pod install
open SampleApp.xcworkspace
```

If you now build your application from Xcode, you should be able to build successfully.

## Build and run your code on a Simulator[‚Äã](#build-and-run-your-code-on-a-simulator "Direct link to Build and run your code on a Simulator")

* npm
* Yarn

bash

```
npm run ios
```

bash

```
yarn run ios
```

[](/docs/assets/turbo-native-modules/turbo-native-modules-ios.webm)


---

# Learn the Basics

React Native is like React, but it uses native components instead of web components as building blocks. So to understand the basic structure of a React Native app, you need to understand some of the basic React concepts, like JSX, components, `state`, and `props`. If you already know React, you still need to learn some React Native specific stuff, like the native components. This tutorial is aimed at all audiences, whether you have React experience or not.

Let's do this thing.

## Hello World[‚Äã](#hello-world "Direct link to Hello World")

In accordance with the ancient traditions of our people, we must first build an app that does nothing except say "Hello, world!". Here it is:

If you are feeling curious, you can play around with sample code directly in the web simulators. You can also paste it into your `App.js` file to create a real app on your local machine.

## What's going on here?[‚Äã](#whats-going-on-here "Direct link to What's going on here?")

1. First of all, we need to import `React` to be able to use `JSX`, which will then be transformed to the native components of each platform.
2. On line 2, we import the `Text` and `View` components from `react-native`

Then we define the `HelloWorldApp` function, which is a [function component](https://react.dev/reference/react/Component) and behaves in the same way as in React for the web. This function returns a `View` component with some styles and a`Text` as its child.

The `Text` component allows us to render a text, while the `View` component renders a container. This container has several styles applied, let's analyze what each one is doing.

The first style that we find is `flex: 1`, the [`flex`](/docs/layout-props.md#flex) prop will define how your items are going to "fill" over the available space along your main axis. Since we only have one container, it will take all the available space of the parent component. In this case, it is the only component, so it will take all the available screen space.

The following style is [`justifyContent`](/docs/layout-props.md#justifycontent): "center". This aligns children of a container in the center of the container's main axis. Finally, we have [`alignItems`](/docs/layout-props.md#alignitems): "center", which aligns children of a container in the center of the container's cross axis.

Some of the things in here might not look like JavaScript to you. Don't panic. *This is the future*.

First of all, ES2015 (also known as ES6) is a set of improvements to JavaScript that is now part of the official standard, but not yet supported by all browsers, so often it isn't used yet in web development. React Native ships with ES2015 support, so you can use this stuff without worrying about compatibility. `import`, `export`, `const` and `from` in the example above are all ES2015 features. If you aren't familiar with ES2015, you can probably pick it up by reading through sample code like this tutorial has. If you want, [this page](https://babeljs.io/learn-es2015/) has a good overview of ES2015 features.

The other unusual thing in this code example is `<View><Text>Hello world!</Text></View>`. This is JSX - a syntax for embedding XML within JavaScript. Many frameworks use a specialized templating language which lets you embed code inside markup language. In React, this is reversed. JSX lets you write your markup language inside code. It looks like HTML on the web, except instead of web things like `<div>` or `<span>`, you use React components. In this case, `<Text>` is a [Core Component](/docs/intro-react-native-components.md) that displays some text and `View` is like the `<div>` or `<span>`.

## Components[‚Äã](#components "Direct link to Components")

So this code is defining `HelloWorldApp`, a new `Component`. When you're building a React Native app, you'll be making new components a lot. Anything you see on the screen is some sort of component.

## Props[‚Äã](#props "Direct link to Props")

Most components can be customized when they are created, with different parameters. These creation parameters are called props.

Your own components can also use `props`. This lets you make a single component that is used in many different places in your app, with slightly different properties in each place. Refer to `props.YOUR_PROP_NAME` in your functional components or `this.props.YOUR_PROP_NAME` in your class components. Here's an example:

* TypeScript
* JavaScript

Using `name` as a prop lets us customize the `Greeting` component, so we can reuse that component for each of our greetings. This example also uses the `Greeting` component in JSX. The power to do this is what makes React so cool.

The other new thing going on here is the [`View`](/docs/view.md) component. A [`View`](/docs/view.md) is useful as a container for other components, to help control style and layout.

With `props` and the basic [`Text`](/docs/text.md), [`Image`](/docs/image.md), and [`View`](/docs/view.md) components, you can build a wide variety of static screens. To learn how to make your app change over time, you need to [learn about State](#state).

## State[‚Äã](#state "Direct link to State")

Unlike props [that are read-only](https://react.dev/reference/react/Component#props) and should not be modified, the `state` allows React components to change their output over time in response to user actions, network responses and anything else.

#### What's the difference between state and props in React?[‚Äã](#whats-the-difference-between-state-and-props-in-react "Direct link to What's the difference between state and props in React?")

In a React component, the props are the variables that we pass from a parent component to a child component. Similarly, the state are also variables, with the difference that they are not passed as parameters, but rather that the component initializes and manages them internally.

#### Are there differences between React and React Native to handle the state?[‚Äã](#are-there-differences-between-react-and-react-native-to-handle-the-state "Direct link to Are there differences between React and React Native to handle the state?")

tsx

```
// ReactJS Counter Example using Hooks!

import React, {useState} from 'react';



const App = () => {
  const [count, setCount] = useState(0);

  return (
    <div className="container">
      <p>You clicked {count} times</p>
      <button
        onClick={() => setCount(count + 1)}>
        Click me!
      </button>
    </div>
  );
};


// CSS
.container {
  display: flex;
  justify-content: center;
  align-items: center;
}
```

tsx

```
// React Native Counter Example using Hooks!

import React, {useState} from 'react';
import {View, Text, Button, StyleSheet} from 'react-native';

const App = () => {
  const [count, setCount] = useState(0);

  return (
    <View style={styles.container}>
      <Text>You clicked {count} times</Text>
      <Button
        onPress={() => setCount(count + 1)}
        title="Click me!"
      />
    </View>
  );
};

// React Native Styles
const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
});
```

As shown above, there is no difference in handling the `state` between [React](https://react.dev/learn/state-a-components-memory) and `React Native`. You can use the state of your components both in classes and in function components using [hooks](https://react.dev/reference/react/useState)!

In the following example we will show the same above counter example using classes.


---

# Using TypeScript

[TypeScript](https://www.typescriptlang.org/) is a language which extends JavaScript by adding type definitions. New React Native projects target TypeScript by default, but also support JavaScript and Flow.

## Getting Started with TypeScript[‚Äã](#getting-started-with-typescript "Direct link to Getting Started with TypeScript")

New projects created by the [React Native CLI](/docs/getting-started-without-a-framework.md#step-1-creating-a-new-application) or popular templates like [Ignite](https://github.com/infinitered/ignite) will use TypeScript by default.

TypeScript may also be used with [Expo](https://expo.io), which maintains TypeScript templates, or will prompt you to automatically install and configure TypeScript when a `.ts` or `.tsx` file is added to your project.

shell

```
npx create-expo-app --template
```

## Adding TypeScript to an Existing Project[‚Äã](#adding-typescript-to-an-existing-project "Direct link to Adding TypeScript to an Existing Project")

1. Add TypeScript, types, and ESLint plugins to your project.

* npm
* Yarn

shell

```
npm install -D typescript @react-native/typescript-config @types/jest @types/react @types/react-test-renderer
```

shell

```
yarn add --dev typescript @react-native/typescript-config @types/jest @types/react @types/react-test-renderer
```

note

This command adds the latest version of every dependency. The versions may need to be changed to match the existing packages used by your project. You can use a tool like [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to see the versions shipped by React Native.

2. Add a TypeScript config file. Create a `tsconfig.json` in the root of your project:

tsconfig.json

```
{
  "extends": "@react-native/typescript-config"
}
```

3. Rename a JavaScript file to be `*.tsx`

warning

You should leave the `./index.js` entrypoint file as it is otherwise you may run into an issue when it comes to bundling a production build.

4. Run `tsc` to type-check your new TypeScript files.

* npm
* Yarn

shell

```
npx tsc
```

shell

```
yarn tsc
```

## Using JavaScript Instead of TypeScript[‚Äã](#using-javascript-instead-of-typescript "Direct link to Using JavaScript Instead of TypeScript")

React Native defaults new applications to TypeScript, but JavaScript may still be used. Files with a `.jsx` extension are treated as JavaScript instead of TypeScript, and will not be typechecked. JavaScript modules may still be imported by TypeScript modules, along with the reverse.

## How TypeScript and React Native works[‚Äã](#how-typescript-and-react-native-works "Direct link to How TypeScript and React Native works")

Out of the box, TypeScript sources are transformed by [Babel](/docs/javascript-environment.md#javascript-syntax-transformers) during bundling. We recommend that you use the TypeScript compiler only for type checking. This is the default behavior of `tsc` for newly created applications. If you have existing TypeScript code being ported to React Native, there are [one or two caveats](https://babeljs.io/docs/en/next/babel-plugin-transform-typescript) to using Babel instead of TypeScript.

## What does React Native + TypeScript look like[‚Äã](#what-does-react-native--typescript-look-like "Direct link to What does React Native + TypeScript look like")

You can provide an interface for a React Component's [Props](/docs/props.md) and [State](/docs/state.md) via `React.Component<Props, State>` which will provide type-checking and editor auto-completing when working with that component in JSX.

components/Hello.tsx

```
import {useState} from 'react';
import {Button, StyleSheet, Text, View} from 'react-native';

export type Props = {
  name: string;
  baseEnthusiasmLevel?: number;
};

function Hello({name, baseEnthusiasmLevel = 0}: Props) {
  const [enthusiasmLevel, setEnthusiasmLevel] = useState(
    baseEnthusiasmLevel,
  );

  const onIncrement = () =>
    setEnthusiasmLevel(enthusiasmLevel + 1);
  const onDecrement = () =>
    setEnthusiasmLevel(
      enthusiasmLevel > 0 ? enthusiasmLevel - 1 : 0,
    );

  const getExclamationMarks = (numChars: number) =>
    numChars > 0 ? Array(numChars + 1).join('!') : '';

  return (
    <View style={styles.container}>
      <Text style={styles.greeting}>
        Hello {name}
        {getExclamationMarks(enthusiasmLevel)}
      </Text>
      <View>
        <Button
          title="Increase enthusiasm"
          accessibilityLabel="increment"
          onPress={onIncrement}
          color="blue"
        />
        <Button
          title="Decrease enthusiasm"
          accessibilityLabel="decrement"
          onPress={onDecrement}
          color="red"
        />
      </View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
  },
  greeting: {
    fontSize: 20,
    fontWeight: 'bold',
    margin: 16,
  },
});

export default Hello;
```

You can explore the syntax more in the [TypeScript playground](https://www.typescriptlang.org/play?strictNullChecks=false\&jsx=3#code/JYWwDg9gTgLgBAJQKYEMDG8BmUIjgcilQ3wG4BYAKFEljgG8AhAVxhggDsAaOAZRgCeAGyS8AFkiQweAFSQAPaXABqwJAHcAvnGy4CRdDAC0HFDGAA3JGSpUFteILBI4ABRxgAznAC8DKnBwpiBIAFxwnjBQwBwA5hSUgQBGKJ5IAKIcMGLMnsCpIAAySFZCAPzhHMwgSUhQCZq2lGickXAAEkhCQhDhyIYAdABiAMIAPO4QXgB8vnAAFPRBKCE8KWmZ2bn5nkUlXXMADHCaAJS+s-QBcC0cbQDaSFk5eQXFpTxpMJsvO3ulAF05v0MANcqIYGYkPN1hlnts3vshKcEtdbm1OABJDhoIghLJzebnHyzL4-BG7d5deZPLavSlIuAAajgAEYUWjWvBOAARJC4pD4+B+IkXCJScn0-7U2m-RGlOCzY5lOCyinSoRwIxsuDhQ4cyicu7wWIS+RoIQrMzATgAWRQUAA1t4RVUQCMxA7PJVqrUoMTZm6PV7FXBlXAAIJQKAoATzIOeqDeFnsgYAKwgMXm+AAhPhzuF8DZDYk4EQYMwoBwFtdAmNVBoIoIRD56JFhEhPANbpCYnVNNNa4E4GM5Iomx3W+2RF3YkQpDFYgOh8OOl0evR8ARGqXV4F6MEkDu98P6KbvubLSBrXaHc6afCpVTkce92MAPRjmCD3fD+tqdQfxPOsWDYTgVz3cwYBbAAibEBVSFw1SlGCINXdA0E7PIkmAIRgEEQoUFqIQfBgmIBSFVDfxPTh3Cw1ssRxPFaVfYCbggHooFIpIhGYJAqLY98gOAsZQPYDg0OHKDYL5BC0lVR8-gEti4AwrDgBwvCCKIrpSIAE35ZismUtjaKITxPAYjhZKMmBWOAlpONIog9JMvchIgj8G0AocvIA4SDU0VFmi5CcZzmfgO3ESQYG7AwYGhK5Sx7FA+ygcIktXTARHkcJWS4IcUDw2IOExBKQG9OAYMwrI6hggrfzTXJzEwAQRk4BKsnCaraTq65NAawI5xixcMqHTAOt4YAAC8wjgAAmQ5BuHCasgAdSQYBYjEGBCySDi9PwZbAmvKBYhiPKADZloGqgzmC+xoHgAzMBQZghHgTpuggBIgA).

## Where to Find Useful Advice[‚Äã](#where-to-find-useful-advice "Direct link to Where to Find Useful Advice")

* [TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/intro.html)
* [React's documentation on TypeScript](https://react.dev/learn/typescript)
* [React + TypeScript Cheatsheets](https://github.com/typescript-cheatsheets/react-typescript-cheatsheet#reacttypescript-cheatsheets) has a good overview on how to use React with TypeScript

## Using Custom Path Aliases with TypeScript[‚Äã](#using-custom-path-aliases-with-typescript "Direct link to Using Custom Path Aliases with TypeScript")

To use custom path aliases with TypeScript, you need to set the path aliases to work from both Babel and TypeScript. Here's how:

1. Edit your `tsconfig.json` to have your [custom path mappings](https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping). Set anything in the root of `src` to be available with no preceding path reference, and allow any test file to be accessed by using `tests/File.tsx`:

diff

```
{
-  "extends": "@react-native/typescript-config"
+  "extends": "@react-native/typescript-config",
+  "compilerOptions": {
+    "baseUrl": ".",
+    "paths": {
+      "*": ["src/*"],
+      "tests": ["tests/*"],
+      "@components/*": ["src/components/*"],
+    },
+  }
}
```

2. Add [`babel-plugin-module-resolver`](https://github.com/tleunen/babel-plugin-module-resolver) as a development package to your project:

* npm
* Yarn

shell

```
npm install --save-dev babel-plugin-module-resolver
```

shell

```
yarn add --dev babel-plugin-module-resolver
```

3. Finally, configure your `babel.config.js` (note that the syntax for your `babel.config.js` is different from your `tsconfig.json`):

diff

```
{
   presets: ['module:metro-react-native-babel-preset'],
+  plugins: [
+    [
+       'module-resolver',
+       {
+         root: ['./src'],
+         extensions: ['.ios.js', '.android.js', '.js', '.ts', '.tsx', '.json'],
+         alias: {
+           tests: ['./tests/'],
+           "@components": "./src/components",
+         }
+       }
+    ]
+  ]
}
```


---

# Upgrading to new versions

Upgrading to new versions of React Native will give you access to more APIs, views, developer tools and other goodies. Upgrading requires a small amount of effort, but we try to make it straightforward for you.

## Expo projects[‚Äã](#expo-projects "Direct link to Expo projects")

Upgrading your Expo project to a new version of React Native requires updating the `react-native`, `react`, and `expo` package versions in your `package.json` file. Expo recommends upgrading SDK versions incrementally, one at a time. Doing so will help you pinpoint breakages and issues that arise during the upgrade process. See the [Upgrading Expo SDK Walkthrough](https://docs.expo.dev/workflow/upgrading-expo-sdk-walkthrough/) for up-to-date information about upgrading your project.

## React Native projects[‚Äã](#react-native-projects "Direct link to React Native projects")

Because typical React Native projects are essentially made up of an Android project, an iOS project, and a JavaScript project, upgrading can be rather tricky. The [Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) is a web tool to help you out when upgrading your apps by providing the full set of changes happening between any two versions. It also shows comments on specific files to help understanding why that change is needed.

### 1. Select the versions[‚Äã](#1-select-the-versions "Direct link to 1. Select the versions")

You first need to select from and to which version you wish to upgrade, by default the latest major versions are selected. After selecting you can click the button "Show me how to upgrade".

üí° Major updates will show a "useful content" section on the top with links to help you out when upgrading.

### 2. Upgrade dependencies[‚Äã](#2-upgrade-dependencies "Direct link to 2. Upgrade dependencies")

The first file that is shown is the `package.json`, it's good to update the dependencies that are showing in there. For example, if `react-native` and `react` appears as changes then you can install it in your project by running following commands:

* npm
* Yarn

shell

```
# {{VERSION}} and {{REACT_VERSION}} are the release versions showing in the diff
npm install react-native@{{VERSION}}
npm install react@{{REACT_VERSION}}
```

shell

```
# {{VERSION}} and {{REACT_VERSION}} are the release versions showing in the diff
yarn add react-native@{{VERSION}}
yarn add react@{{REACT_VERSION}}
```

### 3. Upgrade your project files[‚Äã](#3-upgrade-your-project-files "Direct link to 3. Upgrade your project files")

The new release may contain updates to other files that are generated when you run `npx react-native init`, those files are listed after the `package.json` in the [Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) page. If there aren't other changes then you only need to rebuild the project to continue developing. In case there are changes you need to manually apply them into your project.

### Troubleshooting[‚Äã](#troubleshooting "Direct link to Troubleshooting")

#### I have done all the changes but my app is still using an old version[‚Äã](#i-have-done-all-the-changes-but-my-app-is-still-using-an-old-version "Direct link to I have done all the changes but my app is still using an old version")

These sort of errors are usually related to caching, it's recommended to install [react-native-clean-project](https://github.com/pmadruga/react-native-clean-project) to clear all your project's cache and then you can run it again.


---

# useColorScheme

tsx

```
import {useColorScheme} from 'react-native';
```

The `useColorScheme` React hook provides and subscribes to color scheme updates from the [`Appearance`](/docs/appearance.md) module. The return value indicates the current user preferred color scheme. The value may be updated later, either through direct user action (e.g. theme selection in device settings) or on a schedule (e.g. light and dark themes that follow the day/night cycle).

### Supported color schemes[‚Äã](#supported-color-schemes "Direct link to Supported color schemes")

* `"light"`: The user prefers a light color theme.
* `"dark"`: The user prefers a dark color theme.
* `null`: The user has not indicated a preferred color theme.

***

## Example[‚Äã](#example "Direct link to Example")

You can find a complete example that demonstrates the use of this hook alongside a React context to add support for light and dark themes to your application in [`AppearanceExample.js`](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/Appearance/AppearanceExample.js).


---

# useWindowDimensions

tsx

```
import {useWindowDimensions} from 'react-native';
```

`useWindowDimensions` automatically updates all of its values when screen size or font scale changes. You can get your application window's width and height like so:

tsx

```
const {height, width} = useWindowDimensions();
```

## Example[‚Äã](#example "Direct link to Example")

## Properties[‚Äã](#properties "Direct link to Properties")

### `fontScale`[‚Äã](#fontscale "Direct link to fontscale")

tsx

```
useWindowDimensions().fontScale;
```

The scale of the font currently used. Some operating systems allow users to scale their font sizes larger or smaller for reading comfort. This property will let you know what is in effect.

***

### `height`[‚Äã](#height "Direct link to height")

tsx

```
useWindowDimensions().height;
```

The height in pixels of the window or screen your app occupies.

***

### `scale`[‚Äã](#scale "Direct link to scale")

tsx

```
useWindowDimensions().scale;
```

The pixel ratio of the device your app is running on. The values can be:

* `1` which indicates that one point equals one pixel (usually PPI/DPI of 96, 76 on some platforms).
* `2` or `3` which indicates a Retina or high DPI display.

***

### `width`[‚Äã](#width "Direct link to width")

tsx

```
useWindowDimensions().width;
```

The width in pixels of the window or screen your app occupies.


---

# Using List Views

React Native provides a suite of components for presenting lists of data. Generally, you'll want to use either [FlatList](/docs/flatlist.md) or [SectionList](/docs/sectionlist.md).

The `FlatList` component displays a scrolling list of changing, but similarly structured, data. `FlatList` works well for long lists of data, where the number of items might change over time. Unlike the more generic [`ScrollView`](/docs/using-a-scrollview.md), the `FlatList` only renders elements that are currently showing on the screen, not all the elements at once.

The `FlatList` component requires two props: `data` and `renderItem`. `data` is the source of information for the list. `renderItem` takes one item from the source and returns a formatted component to render.

This example creates a basic `FlatList` of hardcoded data. Each item in the `data` props is rendered as a `Text` component. The `FlatListBasics` component then renders the `FlatList` and all `Text` components.

If you want to render a set of data broken into logical sections, maybe with section headers, similar to `UITableView` on iOS, then a [SectionList](/docs/sectionlist.md) is the way to go.

One of the most common uses for a list view is displaying data that you fetch from a server. To do that, you will need to [learn about networking in React Native](/docs/network.md).


---

# Using a ScrollView

The [ScrollView](/docs/scrollview.md) is a generic scrolling container that can contain multiple components and views. The scrollable items can be heterogeneous, and you can scroll both vertically and horizontally (by setting the `horizontal` property).

This example creates a vertical `ScrollView` with both images and text mixed together.

ScrollViews can be configured to allow paging through views using swiping gestures by using the `pagingEnabled` props. Swiping horizontally between views can also be implemented on Android using the [ViewPager](https://github.com/react-native-community/react-native-viewpager) component.

On iOS a ScrollView with a single item can be used to allow the user to zoom content. Set up the `maximumZoomScale` and `minimumZoomScale` props and your user will be able to use pinch and expand gestures to zoom in and out.

The ScrollView works best to present a small number of things of a limited size. All the elements and views of a `ScrollView` are rendered, even if they are not currently shown on the screen. If you have a long list of items which cannot fit on the screen, you should use a `FlatList` instead. So let's [learn about list views](/docs/using-a-listview.md) next.


---

# Vibration

Vibrates the device.

## Example[‚Äã](#example "Direct link to Example")

info

Android apps should request the `android.permission.VIBRATE` permission by adding `<uses-permission android:name="android.permission.VIBRATE"/>` to `AndroidManifest.xml`.

note

The Vibration API is implemented as a `AudioServicesPlaySystemSound(kSystemSoundID_Vibrate)` call on iOS.

***

# Reference

## Methods[‚Äã](#methods "Direct link to Methods")

### `cancel()`[‚Äã](#cancel "Direct link to cancel")

tsx

```
static cancel();
```

Call this to stop vibrating after having invoked `vibrate()` with repetition enabled.

***

### `vibrate()`[‚Äã](#vibrate "Direct link to vibrate")

tsx

```
static vibrate(
  pattern?: number | number[],
  repeat?: boolean
);
```

Triggers a vibration with a fixed duration.

**On Android,** the vibration duration defaults to 400 milliseconds, and an arbitrary vibration duration can be specified by passing a number as the value for the `pattern` argument. **On iOS,** the vibration duration is fixed at roughly 400 milliseconds.

The `vibrate()` method can take a `pattern` argument with an array of numbers that represent time in milliseconds. You may set `repeat` to true to run through the vibration pattern in a loop until `cancel()` is called.

**On Android,** the odd indices of the `pattern` array represent the vibration duration, while the even ones represent the separation time. **On iOS,** the numbers in the `pattern` array represent the separation time, as the vibration duration is fixed.

**Parameters:**

| Name    | Type                             | Default | Description                                                                                     |
| ------- | -------------------------------- | ------- | ----------------------------------------------------------------------------------------------- |
| pattern | numberAndroid***array of numbers | `400`   | Vibration duration in milliseconds.***Vibration pattern as an array of numbers in milliseconds. |
| repeat  | boolean                          | `false` | Repeat vibration pattern until `cancel()`.                                                      |


---

# View

The most fundamental component for building a UI, `View` is a container that supports layout with [flexbox](/docs/flexbox.md), [style](/docs/style.md), [some touch handling](/docs/handling-touches.md), and [accessibility](/docs/accessibility.md) controls. `View` maps directly to the native view equivalent on whatever platform React Native is running on, whether that is a `UIView`, `<div>`, `android.view`, etc.

`View` is designed to be nested inside other views and can have 0 to many children of any type.

This example creates a `View` that wraps two boxes with color and a text component in a row with padding.

note

`View`s are designed to be used with [`StyleSheet`](/docs/style.md) for clarity and performance, although inline styles are also supported.

### Synthetic Touch Events[‚Äã](#synthetic-touch-events "Direct link to Synthetic Touch Events")

For `View` responder props (e.g., `onResponderMove`), the synthetic touch event passed to them are in form of [PressEvent](/docs/pressevent.md).

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

***

### `accessibilityActions`[‚Äã](#accessibilityactions "Direct link to accessibilityactions")

Accessibility actions allow an assistive technology to programmatically invoke the actions of a component. The `accessibilityActions` property should contain a list of action objects. Each action object should contain the field name and label.

See the [Accessibility guide](/docs/accessibility.md#accessibility-actions) for more information.

| Type  |
| ----- |
| array |

***

### `accessibilityElementsHidden`iOS[‚Äã](#accessibilityelementshidden-ios "Direct link to accessibilityelementshidden-ios")

A boolean value indicating whether the given accessibility element, and any accessibility elements it contains, are hidden. Default is `false`.

See the [Accessibility guide](/docs/accessibility.md#accessibilityelementshidden-ios) for more information.

| Type |
| ---- |
| bool |

***

### `accessibilityHint`[‚Äã](#accessibilityhint "Direct link to accessibilityhint")

An accessibility hint helps users understand what will happen when they perform an action on the accessibility element when that result is not clear from the accessibility label.

| Type   |
| ------ |
| string |

***

### `accessibilityLanguage`iOS[‚Äã](#accessibilitylanguage-ios "Direct link to accessibilitylanguage-ios")

A value indicating which language should be used by the screen reader when the user interacts with the element. It should follow the [BCP 47 specification](https://www.rfc-editor.org/info/bcp47).

See the [iOS `accessibilityLanguage` doc](https://developer.apple.com/documentation/objectivec/nsobject/1615192-accessibilitylanguage) for more information.

| Type   |
| ------ |
| string |

***

### `accessibilityIgnoresInvertColors`iOS[‚Äã](#accessibilityignoresinvertcolors-ios "Direct link to accessibilityignoresinvertcolors-ios")

A value indicating this view should or should not be inverted when color inversion is turned on. A value of `true` will tell the view to not be inverted even if color inversion is turned on.

See the [Accessibility guide](/docs/accessibility.md#accessibilityignoresinvertcolors) for more information.

| Type |
| ---- |
| bool |

***

### `accessibilityLabel`[‚Äã](#accessibilitylabel "Direct link to accessibilitylabel")

Overrides the text that's read by the screen reader when the user interacts with the element. By default, the label is constructed by traversing all the children and accumulating all the `Text` nodes separated by space.

| Type   |
| ------ |
| string |

***

### `accessibilityLiveRegion`Android[‚Äã](#accessibilityliveregion-android "Direct link to accessibilityliveregion-android")

Indicates to accessibility services whether the user should be notified when this view changes. Works for Android API >= 19 only. Possible values:

* `'none'` - Accessibility services should not announce changes to this view.
* `'polite'`- Accessibility services should announce changes to this view.
* `'assertive'` - Accessibility services should interrupt ongoing speech to immediately announce changes to this view.

See the [Android `View` docs](https://developer.android.com/reference/android/view/View.html#attr_android:accessibilityLiveRegion) for reference.

| Type                                |
| ----------------------------------- |
| enum('none', 'polite', 'assertive') |

***

### `accessibilityRole`[‚Äã](#accessibilityrole "Direct link to accessibilityrole")

`accessibilityRole` communicates the purpose of a component to the user of an assistive technology.

`accessibilityRole` can be one of the following:

* `'none'` - Used when the element has no role.
* `'button'` - Used when the element should be treated as a button.
* `'link'` - Used when the element should be treated as a link.
* `'search'` - Used when the text field element should also be treated as a search field.
* `'image'` - Used when the element should be treated as an image. Can be combined with button or link, for example.
* `'keyboardkey'` - Used when the element acts as a keyboard key.
* `'text'` - Used when the element should be treated as static text that cannot change.
* `'adjustable'` - Used when an element can be "adjusted" (e.g. a slider).
* `'imagebutton'` - Used when the element should be treated as a button and is also an image.
* `'header'` - Used when an element acts as a header for a content section (e.g. the title of a navigation bar).
* `'summary'` - Used when an element can be used to provide a quick summary of current conditions in the app when the app first launches.
* `'alert'` - Used when an element contains important text to be presented to the user.
* `'checkbox'` - Used when an element represents a checkbox which can be checked, unchecked, or have mixed checked state.
* `'combobox'` - Used when an element represents a combo box, which allows the user to select among several choices.
* `'menu'` - Used when the component is a menu of choices.
* `'menubar'` - Used when a component is a container of multiple menus.
* `'menuitem'` - Used to represent an item within a menu.
* `'progressbar'` - Used to represent a component which indicates progress of a task.
* `'radio'` - Used to represent a radio button.
* `'radiogroup'` - Used to represent a group of radio buttons.
* `'scrollbar'` - Used to represent a scroll bar.
* `'spinbutton'` - Used to represent a button which opens a list of choices.
* `'switch'` - Used to represent a switch which can be turned on and off.
* `'tab'` - Used to represent a tab.
* `'tablist'` - Used to represent a list of tabs.
* `'timer'` - Used to represent a timer.
* `'toolbar'` - Used to represent a tool bar (a container of action buttons or components).
* `'grid'` - Used with ScrollView, VirtualizedList, FlatList, or SectionList to represent a grid. Adds the in/out of grid announcements to the android GridView.

| Type   |
| ------ |
| string |

***

### `accessibilityState`[‚Äã](#accessibilitystate "Direct link to accessibilitystate")

Describes the current state of a component to the user of an assistive technology.

See the [Accessibility guide](/docs/accessibility.md#accessibilitystate-ios-android) for more information.

| Type                                                                                             |
| ------------------------------------------------------------------------------------------------ |
| object: `{disabled: bool, selected: bool, checked: bool or 'mixed', busy: bool, expanded: bool}` |

***

### `accessibilityValue`[‚Äã](#accessibilityvalue "Direct link to accessibilityvalue")

Represents the current value of a component. It can be a textual description of a component's value, or for range-based components, such as sliders and progress bars, it contains range information (minimum, current, and maximum).

See the [Accessibility guide](/docs/accessibility.md#accessibilityvalue-ios-android) for more information.

| Type                                                            |
| --------------------------------------------------------------- |
| object: `{min: number, max: number, now: number, text: string}` |

***

### `accessibilityViewIsModal`iOS[‚Äã](#accessibilityviewismodal-ios "Direct link to accessibilityviewismodal-ios")

A value indicating whether VoiceOver should ignore the elements within views that are siblings of the receiver. Default is `false`.

See the [Accessibility guide](/docs/accessibility.md#accessibilityviewismodal-ios) for more information.

| Type |
| ---- |
| bool |

***

### `accessible`[‚Äã](#accessible "Direct link to accessible")

When `true`, indicates that the view is an accessibility element and discoverable by assistive technologies such as screen readers and hardware keyboards. By default, all the touchable elements are accessible.

See the [Accessibility guide](/docs/accessibility.md#accessible) for more information.

***

### `aria-busy`[‚Äã](#aria-busy "Direct link to aria-busy")

Indicates an element is being modified and that assistive technologies may want to wait until the changes are complete before informing the user about the update.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-checked`[‚Äã](#aria-checked "Direct link to aria-checked")

Indicates the state of a checkable element. This field can either take a boolean or the "mixed" string to represent mixed checkboxes.

| Type             | Default |
| ---------------- | ------- |
| boolean, 'mixed' | false   |

***

### `aria-disabled`[‚Äã](#aria-disabled "Direct link to aria-disabled")

Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-expanded`[‚Äã](#aria-expanded "Direct link to aria-expanded")

Indicates whether an expandable element is currently expanded or collapsed.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-hidden`[‚Äã](#aria-hidden "Direct link to aria-hidden")

Indicates whether the element is hidden from assistive technologies.

For example, in a window that contains sibling views `A` and `B`, setting `aria-hidden` to `true` on view `B` causes VoiceOver to ignore the `B` element and its children.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-label`[‚Äã](#aria-label "Direct link to aria-label")

Defines a string value that labels an interactive element.

| Type   |
| ------ |
| string |

***

### `aria-labelledby`Android[‚Äã](#aria-labelledby-android "Direct link to aria-labelledby-android")

Identifies the element that labels the element it is applied to. The value of `aria-labelledby` should match the [`nativeID`](/docs/view.md#nativeid) of the related element:

tsx

```
<View>
  <Text nativeID="formLabel">Label for Input Field</Text>
  <TextInput aria-label="input" aria-labelledby="formLabel" />
</View>
```

| Type   |
| ------ |
| string |

***

### `aria-live`Android[‚Äã](#aria-live-android "Direct link to aria-live-android")

Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region.

* **off** Accessibility services should not announce changes to this view.
* **polite** Accessibility services should announce changes to this view.
* **assertive** Accessibility services should interrupt ongoing speech to immediately announce changes to this view.

| Type                                     | Default |
| ---------------------------------------- | ------- |
| enum(`'assertive'`, `'off'`, `'polite'`) | `'off'` |

***

### `aria-modal`iOS[‚Äã](#aria-modal-ios "Direct link to aria-modal-ios")

Boolean value indicating whether VoiceOver should ignore the elements within views that are siblings of the receiver. Has precedence over the [`accessibilityViewIsModal`](#accessibilityviewismodal-ios) prop.

| Type    | Default |
| ------- | ------- |
| boolean | false   |

***

### `aria-selected`[‚Äã](#aria-selected "Direct link to aria-selected")

Indicates whether a selectable element is currently selected or not.

| Type    |
| ------- |
| boolean |

### `aria-valuemax`[‚Äã](#aria-valuemax "Direct link to aria-valuemax")

Represents the maximum value for range-based components, such as sliders and progress bars. Has precedence over the `max` value in the `accessibilityValue` prop.

| Type   |
| ------ |
| number |

***

### `aria-valuemin`[‚Äã](#aria-valuemin "Direct link to aria-valuemin")

Represents the minimum value for range-based components, such as sliders and progress bars. Has precedence over the `min` value in the `accessibilityValue` prop.

| Type   |
| ------ |
| number |

***

### `aria-valuenow`[‚Äã](#aria-valuenow "Direct link to aria-valuenow")

Represents the current value for range-based components, such as sliders and progress bars. Has precedence over the `now` value in the `accessibilityValue` prop.

| Type   |
| ------ |
| number |

***

### `aria-valuetext`[‚Äã](#aria-valuetext "Direct link to aria-valuetext")

Represents the textual description of the component. Has precedence over the `text` value in the `accessibilityValue` prop.

| Type   |
| ------ |
| string |

***

### `collapsable`[‚Äã](#collapsable "Direct link to collapsable")

Views that are only used to layout their children or otherwise don't draw anything may be automatically removed from the native hierarchy as an optimization. Set this property to `false` to disable this optimization and ensure that this `View` exists in the native view hierarchy.

| Type    | Default |
| ------- | ------- |
| boolean | true    |

***

### `collapsableChildren`[‚Äã](#collapsablechildren "Direct link to collapsablechildren")

Setting to false prevents direct children of the view from being removed from the native view hierarchy, similar to the effect of setting `collapsable={false}` on each child.

| Type    | Default |
| ------- | ------- |
| boolean | true    |

***

### `experimental_accessibilityOrder`[‚Äã](#experimental_accessibilityorder "Direct link to experimental_accessibilityorder")

Experimental üß™

**This API is experimental.** Experimental APIs may contain bugs and are likely to change in a future version of React Native. Don't use them in production.

`experimental_accessibilityOrder` indicates the order in which an assistive technology focuses descendants of this `View`. This prop takes an array of strings where each string is a [`nativeID`](/docs/view.md#nativeid) of some descendant component whose order is being defined. This prop does not enable accessibility itself, each referenced component still needs to be accessible by setting [`accessible`](/docs/view.md#accessible) to true. This prop is both **nestable** and **exhaustive** meaning

* If `experimental_accessibilityOrder` contains a reference to some non-accessible component, it will focus the descendants of that component in the default order. Additionally, it can also contain a reference to other components that also have an `experimental_accessibilityOrder`.
* If some component that is otherwise accessible is not directly referenced in `experimental_accessibilityOrder`, or nested within some container directly referenced in `experimental_accessibilityOrder`, then it will not be accessible.

See the [accessibility guide](/docs/accessibility.md#experimental_accessibilityorder) for more information.

| Type             |
| ---------------- |
| array of strings |

***

### `focusable`Android[‚Äã](#focusable-android "Direct link to focusable-android")

Whether this `View` should be focusable with a non-touch input device, eg. receive focus with a hardware keyboard.

| Type    |
| ------- |
| boolean |

***

### `hitSlop`[‚Äã](#hitslop "Direct link to hitslop")

This defines how far a touch event can start away from the view. Typical interface guidelines recommend touch targets that are at least 30 - 40 points/density-independent pixels.

For example, if a touchable view has a height of 20 the touchable height can be extended to 40 with `hitSlop={{top: 10, bottom: 10, left: 0, right: 0}}`

note

The touch area never extends past the parent view bounds, and the Z-index of sibling views always takes precedence if a touch hits two overlapping views.

| Type                                                                 |
| -------------------------------------------------------------------- |
| object: `{top: number, left: number, bottom: number, right: number}` |

***

### `id`[‚Äã](#id "Direct link to id")

Used to locate this view from native classes. Has precedence over `nativeID` prop.

warning

This disables the 'layout-only view removal' optimization for this view!

| Type   |
| ------ |
| string |

***

### `importantForAccessibility`Android[‚Äã](#importantforaccessibility-android "Direct link to importantforaccessibility-android")

Controls how view is important for accessibility which is if it fires accessibility events and if it is reported to accessibility services that query the screen. Works for Android only.

Possible values:

* `'auto'` - The system determines whether the view is important for accessibility - default (recommended).
* `'yes'` - The view is important for accessibility.
* `'no'` - The view is not important for accessibility.
* `'no-hide-descendants'` - The view is not important for accessibility, nor are any of its descendant views.

See the [Android `importantForAccessibility` docs](https://developer.android.com/reference/android/R.attr.html#importantForAccessibility) for reference.

| Type                                             |
| ------------------------------------------------ |
| enum('auto', 'yes', 'no', 'no-hide-descendants') |

***

### `nativeID`[‚Äã](#nativeid "Direct link to nativeid")

Used to locate this view from native classes.

warning

This disables the 'layout-only view removal' optimization for this view!

| Type   |
| ------ |
| string |

***

### `needsOffscreenAlphaCompositing`[‚Äã](#needsoffscreenalphacompositing "Direct link to needsoffscreenalphacompositing")

Whether this `View` needs to rendered offscreen and composited with an alpha in order to preserve 100% correct colors and blending behavior. The default (`false`) falls back to drawing the component and its children with an alpha applied to the paint used to draw each element instead of rendering the full component offscreen and compositing it back with an alpha value. This default may be noticeable and undesired in the case where the `View` you are setting an opacity on has multiple overlapping elements (e.g. multiple overlapping `View`s, or text and a background).

Rendering offscreen to preserve correct alpha behavior is extremely expensive and hard to debug for non-native developers, which is why it is not turned on by default. If you do need to enable this property for an animation, consider combining it with renderToHardwareTextureAndroid if the view **contents** are static (i.e. it doesn't need to be redrawn each frame). If that property is enabled, this View will be rendered off-screen once, saved in a hardware texture, and then composited onto the screen with an alpha each frame without having to switch rendering targets on the GPU.

| Type |
| ---- |
| bool |

***

### `nextFocusDown`Android[‚Äã](#nextfocusdown-android "Direct link to nextfocusdown-android")

Designates the next view to receive focus when the user navigates down. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusDown).

| Type   |
| ------ |
| number |

***

### `nextFocusForward`Android[‚Äã](#nextfocusforward-android "Direct link to nextfocusforward-android")

Designates the next view to receive focus when the user navigates forward. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusForward).

| Type   |
| ------ |
| number |

***

### `nextFocusLeft`Android[‚Äã](#nextfocusleft-android "Direct link to nextfocusleft-android")

Designates the next view to receive focus when the user navigates left. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusLeft).

| Type   |
| ------ |
| number |

***

### `nextFocusRight`Android[‚Äã](#nextfocusright-android "Direct link to nextfocusright-android")

Designates the next view to receive focus when the user navigates right. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusRight).

| Type   |
| ------ |
| number |

***

### `nextFocusUp`Android[‚Äã](#nextfocusup-android "Direct link to nextfocusup-android")

Designates the next view to receive focus when the user navigates up. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusUp).

| Type   |
| ------ |
| number |

***

### `onAccessibilityAction`[‚Äã](#onaccessibilityaction "Direct link to onaccessibilityaction")

Invoked when the user performs the accessibility actions. The only argument to this function is an event containing the name of the action to perform.

See the [Accessibility guide](/docs/accessibility.md#accessibility-actions) for more information.

| Type     |
| -------- |
| function |

***

### `onAccessibilityEscape`iOS[‚Äã](#onaccessibilityescape-ios "Direct link to onaccessibilityescape-ios")

When `accessible` is `true`, the system will invoke this function when the user performs the escape gesture.

| Type     |
| -------- |
| function |

***

### `onAccessibilityTap`iOS[‚Äã](#onaccessibilitytap-ios "Direct link to onaccessibilitytap-ios")

When `accessible` is true, the system will try to invoke this function when the user performs accessibility tap gesture.

| Type     |
| -------- |
| function |

***

### `onLayout`[‚Äã](#onlayout "Direct link to onlayout")

Invoked on mount and on layout changes.

This event is fired immediately once the layout has been calculated, but the new layout may not yet be reflected on the screen at the time the event is received, especially if a layout animation is in progress.

| Type                                   |
| -------------------------------------- |
| `({nativeEvent: LayoutEvent}) => void` |

***

### `onMagicTap`iOS[‚Äã](#onmagictap-ios "Direct link to onmagictap-ios")

When `accessible` is `true`, the system will invoke this function when the user performs the magic tap gesture.

| Type     |
| -------- |
| function |

***

### `onMoveShouldSetResponder`[‚Äã](#onmoveshouldsetresponder "Direct link to onmoveshouldsetresponder")

Does this view want to "claim" touch responsiveness? This is called for every touch move on the `View` when it is not the responder.

| Type                                     |
| ---------------------------------------- |
| `({nativeEvent: PressEvent}) => boolean` |

***

### `onMoveShouldSetResponderCapture`[‚Äã](#onmoveshouldsetrespondercapture "Direct link to onmoveshouldsetrespondercapture")

If a parent `View` wants to prevent a child `View` from becoming responder on a move, it should have this handler which returns `true`.

| Type                                     |
| ---------------------------------------- |
| `({nativeEvent: PressEvent}) => boolean` |

***

### `onResponderGrant`[‚Äã](#onrespondergrant "Direct link to onrespondergrant")

The View is now responding for touch events. This is the time to highlight and show the user what is happening.

On Android, return true from this callback to prevent any other native components from becoming responder until this responder terminates.

| Type                                             |
| ------------------------------------------------ |
| `({nativeEvent: PressEvent}) => void ÔΩú boolean` |

***

### `onResponderMove`[‚Äã](#onrespondermove "Direct link to onrespondermove")

The user is moving their finger.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onResponderReject`[‚Äã](#onresponderreject "Direct link to onresponderreject")

Another responder is already active and will not release it to that `View` asking to be the responder.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onResponderRelease`[‚Äã](#onresponderrelease "Direct link to onresponderrelease")

Fired at the end of the touch.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onResponderTerminate`[‚Äã](#onresponderterminate "Direct link to onresponderterminate")

The responder has been taken from the `View`. Might be taken by other views after a call to `onResponderTerminationRequest`, or might be taken by the OS without asking (e.g., happens with control center/ notification center on iOS)

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onResponderTerminationRequest`[‚Äã](#onresponderterminationrequest "Direct link to onresponderterminationrequest")

Some other `View` wants to become responder and is asking this `View` to release its responder. Returning `true` allows its release.

| Type                                  |
| ------------------------------------- |
| `({nativeEvent: PressEvent}) => void` |

***

### `onStartShouldSetResponder`[‚Äã](#onstartshouldsetresponder "Direct link to onstartshouldsetresponder")

Does this view want to become responder on the start of a touch?

| Type                                     |
| ---------------------------------------- |
| `({nativeEvent: PressEvent}) => boolean` |

***

### `onStartShouldSetResponderCapture`[‚Äã](#onstartshouldsetrespondercapture "Direct link to onstartshouldsetrespondercapture")

If a parent `View` wants to prevent a child `View` from becoming responder on a touch start, it should have this handler which returns `true`.

| Type                                     |
| ---------------------------------------- |
| `({nativeEvent: PressEvent}) => boolean` |

***

### `pointerEvents`[‚Äã](#pointerevents "Direct link to pointerevents")

Controls whether the `View` can be the target of touch events.

* `'auto'`: The View can be the target of touch events.
* `'none'`: The View is never the target of touch events.
* `'box-none'`: The View is never the target of touch events but its subviews can be. It behaves like if the view had the following classes in CSS:

css

```
.box-none {
  pointer-events: none;
}
.box-none * {
  pointer-events: auto;
}
```

* `'box-only'`: The view can be the target of touch events but its subviews cannot be. It behaves like if the view had the following classes in CSS:

css

```
.box-only {
  pointer-events: auto;
}
.box-only * {
  pointer-events: none;
}
```

| Type                                         |
| -------------------------------------------- |
| enum('box-none', 'none', 'box-only', 'auto') |

***

### `ref`[‚Äã](#ref "Direct link to ref")

A ref setter that will be assigned an [element node](/docs/element-nodes.md) when mounted.

***

### `removeClippedSubviews`[‚Äã](#removeclippedsubviews "Direct link to removeclippedsubviews")

This is a reserved performance property exposed by `RCTView` and is useful for scrolling content when there are many subviews, most of which are offscreen. For this property to be effective, it must be applied to a view that contains many subviews that extend outside its bound. The subviews must also have `overflow: hidden`, as should the containing view (or one of its superviews).

| Type |
| ---- |
| bool |

***

### `renderToHardwareTextureAndroid`Android[‚Äã](#rendertohardwaretextureandroid-android "Direct link to rendertohardwaretextureandroid-android")

Whether this `View` should render itself (and all of its children) into a single hardware texture on the GPU.

On Android, this is useful for animations and interactions that only modify opacity, rotation, translation, and/or scale: in those cases, the view doesn't have to be redrawn and display lists don't need to be re-executed. The texture can be re-used and re-composited with different parameters. The downside is that this can use up limited video memory, so this prop should be set back to false at the end of the interaction/animation.

| Type |
| ---- |
| bool |

***

### `role`[‚Äã](#role "Direct link to role")

`role` communicates the purpose of a component to the user of an assistive technology. Has precedence over the [`accessibilityRole`](/docs/view.md#accessibilityrole) prop.

| Type                                |
| ----------------------------------- |
| [Role](/docs/accessibility.md#role) |

***

### `shouldRasterizeIOS`iOS[‚Äã](#shouldrasterizeios-ios "Direct link to shouldrasterizeios-ios")

Whether this `View` should be rendered as a bitmap before compositing.

On iOS, this is useful for animations and interactions that do not modify this component's dimensions nor its children; for example, when translating the position of a static view, rasterization allows the renderer to reuse a cached bitmap of a static view and quickly composite it during each frame.

Rasterization incurs an off-screen drawing pass and the bitmap consumes memory. Test and measure when using this property.

| Type |
| ---- |
| bool |

***

### `style`[‚Äã](#style "Direct link to style")

| Type                                    |
| --------------------------------------- |
| [View Style](/docs/view-style-props.md) |

***

### `tabIndex`Android[‚Äã](#tabindex-android "Direct link to tabindex-android")

Whether this `View` should be focusable with a non-touch input device, eg. receive focus with a hardware keyboard. Supports the following values:

* `0` - View is focusable
* `-1` - View is not focusable

| Type        |
| ----------- |
| enum(0, -1) |

***

### `testID`[‚Äã](#testid "Direct link to testid")

Used to locate this view in end-to-end tests.

warning

This disables the 'layout-only view removal' optimization for this view!

| Type   |
| ------ |
| string |


---

# View Style Props

### Example[‚Äã](#example "Direct link to Example")

# Reference

## Props[‚Äã](#props "Direct link to Props")

### `backfaceVisibility`[‚Äã](#backfacevisibility "Direct link to backfacevisibility")

| Type                          |
| ----------------------------- |
| enum(`'visible'`, `'hidden'`) |

***

### `backgroundColor`[‚Äã](#backgroundcolor "Direct link to backgroundcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderBottomColor`[‚Äã](#borderbottomcolor "Direct link to borderbottomcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderBlockColor`[‚Äã](#borderblockcolor "Direct link to borderblockcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderBlockEndColor`[‚Äã](#borderblockendcolor "Direct link to borderblockendcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderBlockStartColor`[‚Äã](#borderblockstartcolor "Direct link to borderblockstartcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderBottomEndRadius`[‚Äã](#borderbottomendradius "Direct link to borderbottomendradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderBottomLeftRadius`[‚Äã](#borderbottomleftradius "Direct link to borderbottomleftradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderBottomRightRadius`[‚Äã](#borderbottomrightradius "Direct link to borderbottomrightradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderBottomStartRadius`[‚Äã](#borderbottomstartradius "Direct link to borderbottomstartradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderStartEndRadius`[‚Äã](#borderstartendradius "Direct link to borderstartendradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderStartStartRadius`[‚Äã](#borderstartstartradius "Direct link to borderstartstartradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderEndEndRadius`[‚Äã](#borderendendradius "Direct link to borderendendradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderEndStartRadius`[‚Äã](#borderendstartradius "Direct link to borderendstartradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderBottomWidth`[‚Äã](#borderbottomwidth "Direct link to borderbottomwidth")

| Type   |
| ------ |
| number |

***

### `borderColor`[‚Äã](#bordercolor "Direct link to bordercolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderCurve`iOS[‚Äã](#bordercurve-ios "Direct link to bordercurve-ios")

On iOS 13+, it is possible to change the corner curve of borders.

| Type                               |
| ---------------------------------- |
| enum(`'circular'`, `'continuous'`) |

***

### `borderEndColor`[‚Äã](#borderendcolor "Direct link to borderendcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderLeftColor`[‚Äã](#borderleftcolor "Direct link to borderleftcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderLeftWidth`[‚Äã](#borderleftwidth "Direct link to borderleftwidth")

| Type   |
| ------ |
| number |

***

### `borderRadius`[‚Äã](#borderradius "Direct link to borderradius")

If the rounded border is not visible, try applying `overflow: 'hidden'` as well.

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderRightColor`[‚Äã](#borderrightcolor "Direct link to borderrightcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderRightWidth`[‚Äã](#borderrightwidth "Direct link to borderrightwidth")

| Type   |
| ------ |
| number |

***

### `borderStartColor`[‚Äã](#borderstartcolor "Direct link to borderstartcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderStyle`[‚Äã](#borderstyle "Direct link to borderstyle")

| Type                                    |
| --------------------------------------- |
| enum(`'solid'`, `'dotted'`, `'dashed'`) |

***

### `borderTopColor`[‚Äã](#bordertopcolor "Direct link to bordertopcolor")

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `borderTopEndRadius`[‚Äã](#bordertopendradius "Direct link to bordertopendradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderTopLeftRadius`[‚Äã](#bordertopleftradius "Direct link to bordertopleftradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderTopRightRadius`[‚Äã](#bordertoprightradius "Direct link to bordertoprightradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderTopStartRadius`[‚Äã](#bordertopstartradius "Direct link to bordertopstartradius")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderTopWidth`[‚Äã](#bordertopwidth "Direct link to bordertopwidth")

| Type                              |
| --------------------------------- |
| number, string (percentage value) |

***

### `borderWidth`[‚Äã](#borderwidth "Direct link to borderwidth")

| Type   |
| ------ |
| number |

### `boxShadow`[‚Äã](#boxshadow "Direct link to boxshadow")

note

`boxShadow` is only available on the [New Architecture](/architecture/landing-page.md). Outset shadows are only supported on **Android 9+**. Inset shadows are only supported on **Android 10+**.

Adds a shadow effect to an element, with the ability to control the position, color, size, and blurriness of the shadow. This shadow either appears around the outside or inside of the border box of the element, depending on whether or not the shadow is *inset*. This is a spec-compliant implementation of the [web style prop of the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow). Read more about all the arguments available in the [BoxShadowValue](/docs/boxshadowvalue.md) documentation.

These shadows can be composed together so that a single `boxShadow` can be comprised of multiple different shadows.

`boxShadow` takes either a string which mimics the [web syntax](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow#syntax) or an array of [BoxShadowValue](/docs/boxshadowvalue.md) objects.

| Type                                      |
| ----------------------------------------- |
| array of BoxShadowValue objects \| string |

### `cursor`iOS[‚Äã](#cursor-ios "Direct link to cursor-ios")

On iOS 17+, Setting to `pointer` allows hover effects when a pointer (such as a trackpad or stylus on iOS, or the users' gaze on visionOS) is over the view.

| Type                        |
| --------------------------- |
| enum(`'auto'`, `'pointer'`) |

***

### `elevation`Android[‚Äã](#elevation-android "Direct link to elevation-android")

Sets the elevation of a view, using Android's underlying [elevation API](https://developer.android.com/training/material/shadows-clipping.html#Elevation). This adds a drop shadow to the item and affects z-order for overlapping views. Only supported on Android 5.0+, has no effect on earlier versions.

| Type   |
| ------ |
| number |

***

### `filter`[‚Äã](#filter "Direct link to filter")

note

`filter` is only available on the [New Architecture](/architecture/landing-page.md)

Adds a graphical filter to the `View`. This filter is comprised of any number of *filter functions*, which each represent some atomic change to the graphical composition of the `View`. The complete list of valid filter functions is defined below. `filter` will apply to descendants of the `View` as well as the `View` itself. `filter` implies `overflow: hidden`, so descendants will be clipped to fit the bounds of the `View`.

The following filter functions work across all platforms:

* `brightness`: Changes the brightness of the `View`. Takes a non-negative number or percentage.
* `opacity`: Changes the opacity, or alpha, of the `View`. Takes a non-negative number or percentage.

note

Due to issues with performance and spec compliance, these are the only two filter functions available on iOS. There are plans to explore some potential workarounds using SwiftUI instead of UIKit for this implementation.

Android

The following filter functions work on Android only:

* `blur`: Blurs the `View` with a [Gaussian blur](https://en.wikipedia.org/wiki/Gaussian_blur), where the specified length represents the radius used in the blurring algorithm. Any non-negative DIP value is valid (no percents). The larger the value, the blurrier the result.
* `contrast`: Changes the contrast of the `View`. Takes a non-negative number or percentage.
* `dropShadow`: Adds a shadow around the alpha mask of the `View` (only non-zero alpha pixels in the `View` will cast a shadow). Takes an optional color representing the shadow color, and 2 or 3 lengths. If 2 lengths are specified they are interpreted as `offsetX` and `offsetY` which will translate the shadow in the X and Y dimensions respectfully. If a 3rd length is given it is interpreted as the standard deviation of the Gaussian blur used on the shadow - so a larger value will blur the shadow more. Read more about the arguments in [DropShadowValue](/docs/dropshadowvalue.md).
* `grayscale`: Converts the `View` to [grayscale](https://en.wikipedia.org/wiki/Grayscale) by the specified amount. Takes a non-negative number or percentage, where `1` or `100%` represents complete grayscale.
* `hueRotate`: Changes the [hue](https://en.wikipedia.org/wiki/Hue) of the View. The argument of this function defines the angle of a color wheel around which the hue will be rotated, so e.g., `360deg` would have no effect. This angle can have either `deg` or `rad` units.
* `invert`: Inverts the colors in the `View`. Takes a non-negative number or percentage, where `1` or `100%` represents complete inversion.
* `sepia`: Converts the `View` to [sepia](https://en.wikipedia.org/wiki/Sepia_\(color\)). Takes a non-negative number or percentage, where `1` or `100%` represents complete sepia.
* `saturate`: Changes the [saturation](https://en.wikipedia.org/wiki/Colorfulness) of the `View`. Takes a non-negative number or percentage.

note

`blur` and `dropShadow` are only supported on **Android 12+**

`filter` takes either an array of objects comprising of the above filter functions or a string which mimics the [web syntax](https://developer.mozilla.org/en-US/docs/Web/CSS/filter#syntax).

| Type                                                                                                                                                                                                                                                                                                                                        |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| array of objects: `{brightness: number\|string}`, `{opacity: number\|string}`, `{blur: number\|string}`, `{contrast: number\|string}`, `{dropShadow: DropShadowValue\|string}`, `{grayscale: number\|string}`, `{hueRotate: number\|string}`, `{invert: number\|string}`, `{sepia: number\|string}`, `{saturate: number\|string}` or string |

***

### `opacity`[‚Äã](#opacity "Direct link to opacity")

| Type   |
| ------ |
| number |

***

### `outlineColor`[‚Äã](#outlinecolor "Direct link to outlinecolor")

note

`outlineColor` is only available on the [New Architecture](/architecture/landing-page.md)

Sets the color of an element's outline. See [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/outline-color) for more details.

| Type                     |
| ------------------------ |
| [color](/docs/colors.md) |

***

### `outlineOffset`[‚Äã](#outlineoffset "Direct link to outlineoffset")

note

`outlineOffset` is only available on the [New Architecture](/architecture/landing-page.md)

Sets the amount of space between an outline and the bounds of an element. Does not affect layout. See [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/outline-offset) for more details.

| Type   |
| ------ |
| number |

***

### `outlineStyle`[‚Äã](#outlinestyle "Direct link to outlinestyle")

note

`outlineStyle` is only available on the [New Architecture](/architecture/landing-page.md)

Sets the style of an element's outline. See [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/outline-style) for more details.

| Type                                    |
| --------------------------------------- |
| enum(`'solid'`, `'dotted'`, `'dashed'`) |

***

### `outlineWidth`[‚Äã](#outlinewidth "Direct link to outlinewidth")

note

`outlineWidth` is only available on the [New Architecture](/architecture/landing-page.md)

The width of an outline which is drawn around an element, outside the border. Does not affect layout. See [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/outline-width) for more details.

| Type   |
| ------ |
| number |

***

### `pointerEvents`[‚Äã](#pointerevents "Direct link to pointerevents")

Controls whether the `View` can be the target of touch events.

* `'auto'`: The View can be the target of touch events.
* `'none'`: The View is never the target of touch events.
* `'box-none'`: The View is never the target of touch events but its subviews can be.
* `'box-only'`: The view can be the target of touch events but its subviews cannot be.

| Type                                                  |
| ----------------------------------------------------- |
| enum(`'auto'`, `'box-none'`, `'box-only'`, `'none'` ) |


---

# ViewToken Object Type

`ViewToken` object is returned as one of the properties in the `onViewableItemsChanged` callback (for example, in the [FlatList](/docs/flatlist.md) component). It is exported by [`ViewabilityHelper.js`](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Lists/ViewabilityHelper.js).

## Example[‚Äã](#example "Direct link to Example")

js

```
{
  item: {key: "key-12"},
  key: "key-12",
  index: 11,
  isViewable: true
}
```

## Keys and values[‚Äã](#keys-and-values "Direct link to Keys and values")

### `index`[‚Äã](#index "Direct link to index")

Unique numeric identifier assigned to the data element.

| Type   | Optional |
| ------ | -------- |
| number | Yes      |

### `isViewable`[‚Äã](#isviewable "Direct link to isviewable")

Specifies if at least some part of list element is visible in the viewport.

| Type    | Optional |
| ------- | -------- |
| boolean | No       |

### `item`[‚Äã](#item "Direct link to item")

Item data

| Type | Optional |
| ---- | -------- |
| any  | No       |

### `key`[‚Äã](#key "Direct link to key")

Key identifier assigned to the data element extracted to the top level.

| Type   | Optional |
| ------ | -------- |
| string | No       |

### `section`[‚Äã](#section "Direct link to section")

Item section data when used with `SectionList`.

| Type | Optional |
| ---- | -------- |
| any  | Yes      |

## Used by[‚Äã](#used-by "Direct link to Used by")

* [`FlatList`](/docs/flatlist.md)
* [`SectionList`](/docs/sectionlist.md)
* [`VirtualizedList`](/docs/virtualizedlist.md)


---

# VirtualizedList

Base implementation for the more convenient [`<FlatList>`](/docs/flatlist.md) and [`<SectionList>`](/docs/sectionlist.md) components, which are also better documented. In general, this should only really be used if you need more flexibility than [`FlatList`](/docs/flatlist.md) provides, e.g. for use with immutable data instead of plain arrays.

Virtualization massively improves memory consumption and performance of large lists by maintaining a finite render window of active items and replacing all items outside of the render window with appropriately sized blank space. The window adapts to scrolling behavior, and items are rendered incrementally with low-pri (after any running interactions) if they are far from the visible area, or with hi-pri otherwise to minimize the potential of seeing blank space.

## Example[‚Äã](#example "Direct link to Example")

* TypeScript
* JavaScript

***

Some caveats:

* Internal state is not preserved when content scrolls out of the render window. Make sure all your data is captured in the item data or external stores like Flux, Redux, or Relay.
* This is a `PureComponent` which means that it will not re-render if `props` are shallow-equal. Make sure that everything your `renderItem` function depends on is passed as a prop (e.g. `extraData`) that is not `===` after updates, otherwise your UI may not update on changes. This includes the `data` prop and parent component state.
* In order to constrain memory and enable smooth scrolling, content is rendered asynchronously offscreen. This means it's possible to scroll faster than the fill rate and momentarily see blank content. This is a tradeoff that can be adjusted to suit the needs of each application, and we are working on improving it behind the scenes.
* By default, the list looks for a `key` prop on each item and uses that for the React key. Alternatively, you can provide a custom `keyExtractor` prop.

***

# Reference

## Props[‚Äã](#props "Direct link to Props")

### [ScrollView Props](/docs/scrollview.md#props)[‚Äã](#scrollview-props "Direct link to scrollview-props")

Inherits [ScrollView Props](/docs/scrollview.md#props).

***

### `data`[‚Äã](#data "Direct link to data")

Opaque data type passed to `getItem` and `getItemCount` to retrieve items.

| Type |
| ---- |
| any  |

***

### Require&#x64;**`getItem`**[‚Äã](#required-getitem "Direct link to required-getitem")

tsx

```
(data: any, index: number) => any;
```

A generic accessor for extracting an item from any sort of data blob.

| Type     |
| -------- |
| function |

***

### Require&#x64;**`getItemCount`**[‚Äã](#required-getitemcount "Direct link to required-getitemcount")

tsx

```
(data: any) => number;
```

Determines how many items are in the data blob.

| Type     |
| -------- |
| function |

***

### Require&#x64;**`renderItem`**[‚Äã](#required-renderitem "Direct link to required-renderitem")

tsx

```
(info: any) => ?React.Element<any>
```

Takes an item from `data` and renders it into the list

| Type     |
| -------- |
| function |

***

### `CellRendererComponent`[‚Äã](#cellrenderercomponent "Direct link to cellrenderercomponent")

CellRendererComponent allows customizing how cells rendered by `renderItem`/`ListItemComponent` are wrapped when placed into the underlying ScrollView. This component must accept event handlers which notify VirtualizedList of changes within the cell.

| Type                                     |
| ---------------------------------------- |
| `React.ComponentType<CellRendererProps>` |

***

### `ItemSeparatorComponent`[‚Äã](#itemseparatorcomponent "Direct link to itemseparatorcomponent")

Rendered in between each item, but not at the top or bottom. By default, `highlighted` and `leadingItem` props are provided. `renderItem` provides `separators.highlight`/`unhighlight` which will update the `highlighted` prop, but you can also add custom props with `separators.updateProps`. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type                         |
| ---------------------------- |
| component, function, element |

***

### `ListEmptyComponent`[‚Äã](#listemptycomponent "Direct link to listemptycomponent")

Rendered when the list is empty. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type               |
| ------------------ |
| component, element |

***

### `ListItemComponent`[‚Äã](#listitemcomponent "Direct link to listitemcomponent")

Each data item is rendered using this element. Can be a React Component Class, or a render function.

| Type                |
| ------------------- |
| component, function |

***

### `ListFooterComponent`[‚Äã](#listfootercomponent "Direct link to listfootercomponent")

Rendered at the bottom of all the items. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type               |
| ------------------ |
| component, element |

***

### `ListFooterComponentStyle`[‚Äã](#listfootercomponentstyle "Direct link to listfootercomponentstyle")

Styling for internal View for `ListFooterComponent`.

| Type          | Required |
| ------------- | -------- |
| ViewStyleProp | No       |

***

### `ListHeaderComponent`[‚Äã](#listheadercomponent "Direct link to listheadercomponent")

Rendered at the top of all the items. Can be a React Component (e.g. `SomeComponent`), or a React element (e.g. `<SomeComponent />`).

| Type               |
| ------------------ |
| component, element |

***

### `ListHeaderComponentStyle`[‚Äã](#listheadercomponentstyle "Direct link to listheadercomponentstyle")

Styling for internal View for `ListHeaderComponent`.

| Type                                    |
| --------------------------------------- |
| [View Style](/docs/view-style-props.md) |

***

### `debug`[‚Äã](#debug "Direct link to debug")

`debug` will turn on extra logging and visual overlays to aid with debugging both usage and implementation, but with a significant perf hit.

| Type    |
| ------- |
| boolean |

***

### `disableVirtualization`[‚Äã](#disablevirtualization "Direct link to disablevirtualization")

Deprecated

Virtualization provides significant performance and memory optimizations, but fully unmounts react instances that are outside of the render window. You should only need to disable this for debugging purposes.

| Type    |
| ------- |
| boolean |

***

### `extraData`[‚Äã](#extradata "Direct link to extradata")

A marker property for telling the list to re-render (since it implements `PureComponent`). If any of your `renderItem`, Header, Footer, etc. functions depend on anything outside of the `data` prop, stick it here and treat it immutably.

| Type |
| ---- |
| any  |

***

### `getItemLayout`[‚Äã](#getitemlayout "Direct link to getitemlayout")

tsx

```
(
  data: any,
  index: number,
) => {length: number, offset: number, index: number}
```

| Type     |
| -------- |
| function |

***

### `horizontal`[‚Äã](#horizontal "Direct link to horizontal")

If `true`, renders items next to each other horizontally instead of stacked vertically.

| Type    |
| ------- |
| boolean |

***

### `initialNumToRender`[‚Äã](#initialnumtorender "Direct link to initialnumtorender")

How many items to render in the initial batch. This should be enough to fill the screen but not much more. Note these items will never be unmounted as part of the windowed rendering in order to improve perceived performance of scroll-to-top actions.

| Type   | Default |
| ------ | ------- |
| number | `10`    |

***

### `initialScrollIndex`[‚Äã](#initialscrollindex "Direct link to initialscrollindex")

Instead of starting at the top with the first item, start at `initialScrollIndex`. This disables the "scroll to top" optimization that keeps the first `initialNumToRender` items always rendered and immediately renders the items starting at this initial index. Requires `getItemLayout` to be implemented.

| Type   |
| ------ |
| number |

***

### `inverted`[‚Äã](#inverted "Direct link to inverted")

Reverses the direction of scroll. Uses scale transforms of `-1`.

| Type    |
| ------- |
| boolean |

***

### `keyExtractor`[‚Äã](#keyextractor "Direct link to keyextractor")

tsx

```
(item: any, index: number) => string;
```

Used to extract a unique key for a given item at the specified index. Key is used for caching and as the react key to track item re-ordering. The default extractor checks `item.key`, then `item.id`, and then falls back to using the index, like React does.

| Type     |
| -------- |
| function |

***

### `maxToRenderPerBatch`[‚Äã](#maxtorenderperbatch "Direct link to maxtorenderperbatch")

The maximum number of items to render in each incremental render batch. The more rendered at once, the better the fill rate, but responsiveness may suffer because rendering content may interfere with responding to button taps or other interactions.

| Type   |
| ------ |
| number |

***

### `onEndReached`[‚Äã](#onendreached "Direct link to onendreached")

Called once when the scroll position gets within `onEndReachedThreshold` from the logical end of the list.

| Type                                        |
| ------------------------------------------- |
| `(info: {distanceFromEnd: number}) => void` |

***

### `onEndReachedThreshold`[‚Äã](#onendreachedthreshold "Direct link to onendreachedthreshold")

How far from the end (in units of visible length of the list) the trailing edge of the list must be from the end of the content to trigger the `onEndReached` callback. Thus, a value of 0.5 will trigger `onEndReached` when the end of the content is within half the visible length of the list.

| Type   | Default |
| ------ | ------- |
| number | `2`     |

***

### `onRefresh`[‚Äã](#onrefresh "Direct link to onrefresh")

tsx

```
() => void;
```

If provided, a standard `RefreshControl` will be added for "Pull to Refresh" functionality. Make sure to also set the `refreshing` prop correctly.

| Type     |
| -------- |
| function |

***

### `onScrollToIndexFailed`[‚Äã](#onscrolltoindexfailed "Direct link to onscrolltoindexfailed")

tsx

```
(info: {
  index: number,
  highestMeasuredFrameIndex: number,
  averageItemLength: number,
}) => void;
```

Used to handle failures when scrolling to an index that has not been measured yet. Recommended action is to either compute your own offset and `scrollTo` it, or scroll as far as possible and then try again after more items have been rendered.

| Type     |
| -------- |
| function |

***

### `onStartReached`[‚Äã](#onstartreached "Direct link to onstartreached")

Called once when the scroll position gets within `onStartReachedThreshold` from the logical start of the list.

| Type                                          |
| --------------------------------------------- |
| `(info: {distanceFromStart: number}) => void` |

***

### `onStartReachedThreshold`[‚Äã](#onstartreachedthreshold "Direct link to onstartreachedthreshold")

How far from the start (in units of visible length of the list) the leading edge of the list must be from the start of the content to trigger the `onStartReached` callback. Thus, a value of 0.5 will trigger `onStartReached` when the start of the content is within half the visible length of the list.

| Type   | Default |
| ------ | ------- |
| number | `2`     |

***

### `onViewableItemsChanged`[‚Äã](#onviewableitemschanged "Direct link to onviewableitemschanged")

Called when the viewability of rows changes, as defined by the `viewabilityConfig` prop.

| Type                                                                     |
| ------------------------------------------------------------------------ |
| `(callback: {changed: ViewToken[], viewableItems: ViewToken[]}) => void` |

***

### `persistentScrollbar`[‚Äã](#persistentscrollbar "Direct link to persistentscrollbar")

| Type |
| ---- |
| bool |

***

### `progressViewOffset`[‚Äã](#progressviewoffset "Direct link to progressviewoffset")

Set this when offset is needed for the loading indicator to show correctly.

| Type   |
| ------ |
| number |

***

### `refreshControl`[‚Äã](#refreshcontrol "Direct link to refreshcontrol")

A custom refresh control element. When set, it overrides the default `<RefreshControl>` component built internally. The onRefresh and refreshing props are also ignored. Only works for vertical VirtualizedList.

| Type    |
| ------- |
| element |

***

### `refreshing`[‚Äã](#refreshing "Direct link to refreshing")

Set this true while waiting for new data from a refresh.

| Type    |
| ------- |
| boolean |

***

### `removeClippedSubviews`[‚Äã](#removeclippedsubviews "Direct link to removeclippedsubviews")

warning

Using this property may lead to bugs (missing content) in some circumstances - use at your own risk.

When `true`, offscreen child views are removed from their native backing superview when offscreen. This may improve scroll performance for large lists. On Android the default value is `true`.

| Type    |
| ------- |
| boolean |

***

### `renderScrollComponent`[‚Äã](#renderscrollcomponent "Direct link to renderscrollcomponent")

tsx

```
(props: object) => element;
```

Render a custom scroll component, e.g. with a differently styled `RefreshControl`.

| Type     |
| -------- |
| function |

***

### `viewabilityConfig`[‚Äã](#viewabilityconfig "Direct link to viewabilityconfig")

See `ViewabilityHelper.js` for flow type and further documentation.

| Type              |
| ----------------- |
| ViewabilityConfig |

***

### `viewabilityConfigCallbackPairs`[‚Äã](#viewabilityconfigcallbackpairs "Direct link to viewabilityconfigcallbackpairs")

List of `ViewabilityConfig`/`onViewableItemsChanged` pairs. A specific `onViewableItemsChanged` will be called when its corresponding `ViewabilityConfig`'s conditions are met. See `ViewabilityHelper.js` for flow type and further documentation.

| Type                                   |
| -------------------------------------- |
| array of ViewabilityConfigCallbackPair |

***

### `updateCellsBatchingPeriod`[‚Äã](#updatecellsbatchingperiod "Direct link to updatecellsbatchingperiod")

Amount of time between low-pri item render batches, e.g. for rendering items quite a ways off screen. Similar fill rate/responsiveness tradeoff as `maxToRenderPerBatch`.

| Type   |
| ------ |
| number |

***

### `windowSize`[‚Äã](#windowsize "Direct link to windowsize")

Determines the maximum number of items rendered outside of the visible area, in units of visible lengths. So if your list fills the screen, then `windowSize={21}` (the default) will render the visible screen area plus up to 10 screens above and 10 below the viewport. Reducing this number will reduce memory consumption and may improve performance, but will increase the chance that fast scrolling may reveal momentary blank areas of unrendered content.

| Type   |
| ------ |
| number |

## Methods[‚Äã](#methods "Direct link to Methods")

### `flashScrollIndicators()`[‚Äã](#flashscrollindicators "Direct link to flashscrollindicators")

tsx

```
flashScrollIndicators();
```

***

### `getScrollableNode()`[‚Äã](#getscrollablenode "Direct link to getscrollablenode")

tsx

```
getScrollableNode(): any;
```

***

### `getScrollRef()`[‚Äã](#getscrollref "Direct link to getscrollref")

tsx

```
getScrollRef():
  | React.ElementRef<typeof ScrollView>
  | React.ElementRef<typeof View>
  | null;
```

***

### `getScrollResponder()`[‚Äã](#getscrollresponder "Direct link to getscrollresponder")

tsx

```
getScrollResponder () => ScrollResponderMixin | null;
```

Provides a handle to the underlying scroll responder. Note that `this._scrollRef` might not be a `ScrollView`, so we need to check that it responds to `getScrollResponder` before calling it.

***

### `scrollToEnd()`[‚Äã](#scrolltoend "Direct link to scrolltoend")

tsx

```
scrollToEnd(params?: {animated?: boolean});
```

Scrolls to the end of the content. May be janky without `getItemLayout` prop.

**Parameters:**

| Name   | Type   |
| ------ | ------ |
| params | object |

Valid `params` keys are:

* `'animated'` (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.

***

### `scrollToIndex()`[‚Äã](#scrolltoindex "Direct link to scrolltoindex")

tsx

```
scrollToIndex(params: {
  index: number;
  animated?: boolean;
  viewOffset?: number;
  viewPosition?: number;
});
```

Valid `params` consist of:

* 'index' (number). Required.
* 'animated' (boolean). Optional.
* 'viewOffset' (number). Optional.
* 'viewPosition' (number). Optional.

***

### `scrollToItem()`[‚Äã](#scrolltoitem "Direct link to scrolltoitem")

tsx

```
scrollToItem(params: {
  item: ItemT;
  animated?: boolean;
  viewOffset?: number;
  viewPosition?: number;
);
```

Valid `params` consist of:

* 'item' (Item). Required.
* 'animated' (boolean). Optional.
* 'viewOffset' (number). Optional.
* 'viewPosition' (number). Optional.

***

### `scrollToOffset()`[‚Äã](#scrolltooffset "Direct link to scrolltooffset")

tsx

```
scrollToOffset(params: {
  offset: number;
  animated?: boolean;
});
```

Scroll to a specific content pixel offset in the list.

Param `offset` expects the offset to scroll to. In case of `horizontal` is true, the offset is the x-value, in any other case the offset is the y-value.

Param `animated` (`true` by default) defines whether the list should do an animation while scrolling.


---

# VirtualView üß™

Experimental üß™

**This API is experimental.** Experimental APIs may contain bugs and are likely to change in a future version of React Native. Don't use them in production.

`VirtualView` is a core component that behaves similar to [`View`](/docs/view.md).

When it is the descendent of a [`ScrollView`](/docs/scrollview.md), it gains additional virtualization capabilities to reduce its memory footprint when obscured by the scroll viewport.

tsx

```
<ScrollView>
  <VirtualView>
    <Text>Hello world!</Text>
  </VirtualView>
</ScrollView>
```

A `VirtualView` without an ancestor[`ScrollView`](/docs/scrollview.md) does not have any virtualization capabilities.

## Virtualization[‚Äã](#virtualization "Direct link to Virtualization")

When a `VirtualView` leaves the visible region of a [`ScrollView`](/docs/scrollview.md), it becomes hidden. When hidden, a `VirtualView` will cache its most recent layout and may unmount its children ‚Äî a process called virtualization.

When a `VirtualView` returns to the visible region of a [`ScrollView`](/docs/scrollview.md), it becomes visible. When visible, its children are *guaranteed* to be rendered. This guarantee is maintained by blocking the main thread from rendering the next frame that would reveal the `VirtualView` until its children can be rendered.

![Diagram of VirtualView modes and thresholds.](/docs/assets/d_virtualview_modes.svg)

note

In future developments, a hidden `VirtualView` may instead render its children in an [`<Activity mode="hidden">`](https://react.dev/reference/react/Activity) to preserve state for as long as possible while balancing memory overhead.

### Blocking the Main Thread[‚Äã](#blocking-the-main-thread "Direct link to Blocking the Main Thread")

This is the first time in React Native‚Äôs feature set where rendering a React component can block the main thread. This is a new capability enabled by the [New Architecture](/architecture/landing-page.md)!

Blocking the main thread can provide a better user experience by preventing flashes of blank frames that sometimes occur when using components like [`FlatList`](/docs/flatlist.md). It can also enable better performance by using main thread priority, which is also typically run on higher performance cores.

However, blocking the main thread also comes with tradeoffs. If an update operation, such as mounting the children of a `VirtualView`, takes too long to finish, it can now drop frames. Dropping more than a couple frames can lead to a worse user experience by making the app feel sluggish and non-responsive. Dropping too many frames may cause the operating system to display a modal indicating the app is not responsive, or it may even terminate your app!

warning

DevTools does not currently support debugging JavaScript on the main thread. This means if you are using breakpoints to debug code called from `onModeChange`, that is executed on the main thread, your debugger may freeze.

Debugging all other parts of your JavaScript code should work as expected. We are working on closing this gap before releasing `VirtualView` to stable channels of React Native.

### Prerendering[‚Äã](#prerendering "Direct link to Prerendering")

`VirtualView` enables you to benefit from main thread rendering while mitigating the disadvantages of dropped frames by rendering earlier before it is needed. This is called ‚Äúprerendering‚Äù.

By default, each `VirtualView` will prerender its children when it approaches the visible region of a [`ScrollView`](/docs/scrollview.md). When this happens, its children will be rendered on a background thread at a lower priority (using a [transition](https://react.dev/reference/react/startTransition)). This ensures that the main thread and React are available to handle other critical user interactions at a higher priority.

note

`VirtualView`'s prerender logic is not currently configurable. The algorithm for determining this is undergoing active design iteration and is likely to change in a future release.

***

## Props[‚Äã](#props "Direct link to Props")

### `children`[‚Äã](#children "Direct link to children")

Content to render inside this `VirtualView`.

| Type                              |
| --------------------------------- |
| [React Node](/docs/react-node.md) |

***

### `onModeChange`[‚Äã](#onmodechange "Direct link to onmodechange")

Invoked when the `VirtualView` changes how it renders its children.

If a callback is supplied, it may be invoked from different threads and priorities depending on the internal state change. This can be detected by checking the `mode` property on the event:

* If `mode` is [`VirtualViewMode.Visible`](#virtualviewmode), the callback is being invoked from the main thread with immediate priority.
* If `mode` is [`VirtualViewMode.Prerender`](#virtualviewmode) or [`VirtualViewMode.Hidden`](#virtualviewmode), the callback is being invoked from a background thread with transition priority.

The callback will never be invoked consecutively with the same `mode` value. However, there are few guarantees about sequencing of events. Also, the callback may never be invoked with [`VirtualViewMode.Visible`](#virtualviewmode) even if it becomes visible, if the children were successfully prerendered.

| Type                        |
| --------------------------- |
| `(ModeChangeEvent) => void` |

***

### `nativeID`[‚Äã](#nativeid "Direct link to nativeid")

An identifier for locating this view from native classes.

| Type   |
| ------ |
| string |

***

### `style`[‚Äã](#style "Direct link to style")

| Type                                    |
| --------------------------------------- |
| [View Style](/docs/view-style-props.md) |

***

## Type Definitions[‚Äã](#type-definitions "Direct link to Type Definitions")

### `ModeChangeEvent`[‚Äã](#modechangeevent "Direct link to modechangeevent")

Argument supplied to [`onModeChange`](#onmodechange).

| Type   |
| ------ |
| object |

**Properties:**

| Name          | Type                                | Description                                                                                       |
| ------------- | ----------------------------------- | ------------------------------------------------------------------------------------------------- |
| mode          | [VirtualViewMode](#virtualviewmode) | New mode of the `VirtualView`.                                                                    |
| target        | element                             | `VirtualView` emitting this event.                                                                |
| targetRect    | [Rect](/docs/rect.md)               | Layout of `target` relative to the nearest ancestor `ScrollView`.                                 |
| thresholdRect | [Rect](/docs/rect.md)               | Layout of the threshold that triggered this event, relative to the nearest ancestor `ScrollView`. |

note

For example, if a `VirtualView` enters the visible region of a [`ScrollView`](/docs/scrollview.md)...

* `mode` would be [`VirtualViewMode.Visible`](#virtualviewmode)
* `thresholdRect` would describe the visible viewport of the nearest ancestor [`ScrollView`](/docs/scrollview.md)
* `targetRect` would be the layout of `target` that overlaps with `thresholdRect` (i.e. it is within the visible region of the [`ScrollView`](/docs/scrollview.md))

### `VirtualViewMode`[‚Äã](#virtualviewmode "Direct link to virtualviewmode")

Possible modes of a `VirtualView`.

| Name      | Value | Description                                    |
| --------- | ----- | ---------------------------------------------- |
| Visible   | `0`   | Target view is visible.                        |
| Prerender | `1`   | Target view is hidden, but can be prerendered. |
| Hidden    | `2`   | Target view is hidden.                         |

***

## Static Methods[‚Äã](#static-methods "Direct link to Static Methods")

### `createHiddenVirtualView()`[‚Äã](#createhiddenvirtualview "Direct link to createhiddenvirtualview")

tsx

```
static createHiddenVirtualView(height: number): typeof VirtualView;
```

`VirtualView` initially renders its children as visible, even if it is initially obscured by an ancestor [`ScrollView`](/docs/scrollview.md). This is because when a component is initially rendered, the presence of an ancestor [`ScrollView`](/docs/scrollview.md) ‚Äî let alone its size and scroll position ‚Äî are unknown.

For advanced use cases, `createHiddenVirtualView()` creates a component that renders an initially hidden `VirtualView` with the supplied estimated layout.

tsx

```
const HiddenVirtualView = createHiddenVirtualView(100);

<ScrollView>
  <HiddenVirtualView>
    <Text>Hello world!</Text>
  </HiddenVirtualView>
</ScrollView>;
```

**Parameters:**

| Name           | Type   | Description                                            |
| -------------- | ------ | ------------------------------------------------------ |
| heightRequired | number | Estimated height of initially rendering `VirtualView`. |


---

