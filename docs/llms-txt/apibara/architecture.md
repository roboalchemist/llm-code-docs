# Source: https://www.apibara.com/docs/dna/architecture

<!DOCTYPE html><html lang="en" class="dark bg-background"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/><link rel="modulepreload" href="/assets/entry.client-CwKnTHhE.js"/><link rel="modulepreload" href="/assets/button-B7cAtSR2.js"/><link rel="modulepreload" href="/assets/utils-Dxu6Btum.js"/><link rel="modulepreload" href="/assets/cookie-consent-clHrPgeC.js"/><link rel="modulepreload" href="/assets/index-PuoCZrSn.js"/><link rel="modulepreload" href="/assets/index-D1RvQa8Q.js"/><link rel="modulepreload" href="/assets/createLucideIcon-O_0coRDA.js"/><link rel="modulepreload" href="/assets/root-ipolV0AO.js"/><link rel="modulepreload" href="/assets/constants-Dl4TjVTX.js"/><link rel="modulepreload" href="/assets/useBaseQuery-BvxeFzjL.js"/><link rel="modulepreload" href="/assets/index-CnbLAjcy.js"/><link rel="modulepreload" href="/assets/logo-fuNHPPx1.js"/><link rel="modulepreload" href="/assets/utils-UlyEuLxL.js"/><link rel="modulepreload" href="/assets/meta-M0oKkN_M.js"/><link rel="modulepreload" href="/assets/iconBase-CrV5vKX5.js"/><link rel="modulepreload" href="/assets/_marketing-CGxmZCn-.js"/><link rel="modulepreload" href="/assets/devlog-wkYzDMBY.js"/><link rel="modulepreload" href="/assets/index-CJcc-0k1.js"/><link rel="modulepreload" href="/assets/index-D0z94NDm.js"/><link rel="modulepreload" href="/assets/index-DfeBrNmd.js"/><link rel="modulepreload" href="/assets/version-select-PcccTYUw.js"/><link rel="modulepreload" href="/assets/index-D-3o5vKG.js"/><link rel="modulepreload" href="/assets/index-CKNh5fP9.js"/><link rel="modulepreload" href="/assets/check-BIZc5W9p.js"/><link rel="modulepreload" href="/assets/_marketing._docs-TRmate3G.js"/><link rel="modulepreload" href="/assets/_marketing._docs.docs._-BiDJ9VmJ.js"/><link rel="modulepreload" href="/assets/components-jah0Jotm.js"/><meta name="theme-color" content="#171923"/><meta name="apple-mobile-web-app-title" content="Apibara"/><title>DNA v2 architecture - Apibara Documentation</title><meta name="description" content="Discover how DNA achieves best-in-class performance for indexing onchain data."/><meta property="og:url" content="https://www.apibara.com/docs/dna/architecture"/><meta property="og:title" content="DNA v2 architecture - Apibara Documentation"/><meta property="og:description" content="Discover how DNA achieves best-in-class performance for indexing onchain data."/><meta property="og:image" content="http://www.apibara.com/resource/og?title=DNA%20v2%20architecture"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@apibara_web3"/><meta name="twitter:site" content="@apibara_web3"/><meta name="twitter:title" content="DNA v2 architecture - Apibara Documentation"/><meta name="twitter:description" content="Discover how DNA achieves best-in-class performance for indexing onchain data."/><meta name="twitter:image" content="http://www.apibara.com/resource/og?title=DNA%20v2%20architecture"/><link rel="canonical" href="https://www.apibara.com/docs/dna/architecture"/><meta name="og:type" content="article"/><meta name="article:author" content="Apibara"/><meta name="article:published_time" content="2024-09-20T00:00:00.000Z"/><meta name="article:modified_time" content="2024-09-20T00:00:00.000Z"/><link rel="icon" href="/favicon-16x16.png" sizes="16x16"/><link rel="icon" href="/favicon-32x32.png" sizes="32x32"/><link rel="icon" href="/web-app-manifest-192x192.png" sizes="192x192"/><link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="manifest" href="/site.webmanifest"/><link rel="preconnect" href="https://6XRVYOGFCW-dsn.algolia.net" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preload" as="font" href="/fonts/JetBrainsMono-Regular.woff2" crossorigin="anonymous"/><link rel="stylesheet" href="/assets/root-DQw5JbnM.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Encode+Sans:wght@100..900&amp;display=swap"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&amp;display=swap"/><link rel="stylesheet" href="/assets/_marketing-CAX2t5ve.css"/></head><body class="font-sans antialiased"><script>window._POSTHOG = {"key":"phc_UZjZ1DOpyAQOegVmcW09tIO4XcIKvsd6qtHbCmXZw4F","host":"https://us.i.posthog.com"}</script><div role="progressbar" aria-hidden="true" class="fixed inset-x-0 left-0 top-0 z-50 h-1 animate-pulse"><div class="h-full bg-gradient-to-r from-blue-brand to-aqua-brand duration-500 ease-in-out w-0 opacity-0 transition-none"></div></div><div class="flex h-full flex-1 flex-col"><main class="flex flex-1 flex-col" tabindex="-1"><header class="supports-backdrop-blur:bg-muted/60 sticky top-0 z-50 w-full border-b bg-muted/60 backdrop-blur"><div class="px-8 flex h-14 items-center justify-between"><div class="mr-4 hidden md:flex"><a class="mr-6 flex items-center space-x-2" href="/" data-discover="true"><svg viewBox="0 0 1600 461" color="hsl(var(--primary))" fill="none" class="h-8"><title>Apibara</title><g clip-path="url(#clip0_104_6)"><path d="M486.76 341L552.136 133.64H602.968L668.344 341H632.632L573.304 154.952H581.08L522.472 341H486.76ZM523.192 296.072V263.672H632.056V296.072H523.192ZM769.115 345.32C753.947 345.32 741.227 341.72 730.955 334.52C720.683 327.32 712.955 317.528 707.771 305.144C702.587 292.664 699.995 278.696 699.995 263.24C699.995 247.592 702.587 233.576 707.771 221.192C712.955 208.808 720.539 199.064 730.523 191.96C740.603 184.76 753.035 181.16 767.819 181.16C782.507 181.16 795.227 184.76 805.979 191.96C816.827 199.064 825.227 208.808 831.179 221.192C837.131 233.48 840.107 247.496 840.107 263.24C840.107 278.792 837.179 292.76 831.323 305.144C825.467 317.528 817.211 327.32 806.555 334.52C795.899 341.72 783.419 345.32 769.115 345.32ZM694.091 410.12V185.48H724.763V294.632H729.083V410.12H694.091ZM763.787 314.216C772.811 314.216 780.251 311.96 786.107 307.448C791.963 302.936 796.283 296.84 799.067 289.16C801.947 281.384 803.387 272.744 803.387 263.24C803.387 253.832 801.947 245.288 799.067 237.608C796.187 229.832 791.723 223.688 785.675 219.176C779.627 214.568 771.947 212.264 762.635 212.264C753.803 212.264 746.603 214.424 741.035 218.744C735.467 222.968 731.339 228.92 728.651 236.6C726.059 244.184 724.763 253.064 724.763 263.24C724.763 273.32 726.059 282.2 728.651 289.88C731.339 297.56 735.515 303.56 741.179 307.88C746.939 312.104 754.475 314.216 763.787 314.216ZM874.728 161.864V130.04H909.432V161.864H874.728ZM874.728 341V185.48H909.432V341H874.728ZM1027.3 345.32C1012.13 345.32 999.414 341.72 989.142 334.52C978.87 327.32 971.142 317.528 965.958 305.144C960.774 292.664 958.182 278.696 958.182 263.24C958.182 247.592 960.774 233.576 965.958 221.192C971.142 208.808 978.726 199.064 988.71 191.96C998.79 184.76 1011.22 181.16 1026.01 181.16C1040.69 181.16 1053.41 184.76 1064.17 191.96C1075.01 199.064 1083.41 208.808 1089.37 221.192C1095.32 233.48 1098.29 247.496 1098.29 263.24C1098.29 278.792 1095.37 292.76 1089.51 305.144C1083.65 317.528 1075.4 327.32 1064.74 334.52C1054.09 341.72 1041.61 345.32 1027.3 345.32ZM952.278 341V133.64H987.27V231.848H982.95V341H952.278ZM1021.97 314.216C1031 314.216 1038.44 311.96 1044.29 307.448C1050.15 302.936 1054.47 296.84 1057.25 289.16C1060.13 281.384 1061.57 272.744 1061.57 263.24C1061.57 253.832 1060.13 245.288 1057.25 237.608C1054.37 229.832 1049.91 223.688 1043.86 219.176C1037.81 214.568 1030.13 212.264 1020.82 212.264C1011.99 212.264 1004.79 214.424 999.222 218.744C993.654 222.968 989.526 228.92 986.838 236.6C984.246 244.184 982.95 253.064 982.95 263.24C982.95 273.32 984.246 282.2 986.838 289.88C989.526 297.56 993.702 303.56 999.366 307.88C1005.13 312.104 1012.66 314.216 1021.97 314.216ZM1173.52 345.32C1162.29 345.32 1152.79 343.208 1145.01 338.984C1137.24 334.664 1131.33 328.952 1127.3 321.848C1123.36 314.744 1121.4 306.92 1121.4 298.376C1121.4 290.888 1122.64 284.168 1125.14 278.216C1127.64 272.168 1131.48 266.984 1136.66 262.664C1141.84 258.248 1148.56 254.648 1156.82 251.864C1163.06 249.848 1170.36 248.024 1178.71 246.392C1187.16 244.76 1196.28 243.272 1206.07 241.928C1215.96 240.488 1226.28 238.952 1237.03 237.32L1224.64 244.376C1224.74 233.624 1222.34 225.704 1217.44 220.616C1212.55 215.528 1204.29 212.984 1192.68 212.984C1185.67 212.984 1178.9 214.616 1172.37 217.88C1165.84 221.144 1161.28 226.76 1158.69 234.728L1127.01 224.792C1130.85 211.64 1138.15 201.08 1148.9 193.112C1159.75 185.144 1174.34 181.16 1192.68 181.16C1206.5 181.16 1218.64 183.416 1229.11 187.928C1239.67 192.44 1247.49 199.832 1252.58 210.104C1255.36 215.576 1257.04 221.192 1257.62 226.952C1258.2 232.616 1258.48 238.808 1258.48 245.528V341H1228.1V307.304L1233.14 312.776C1226.13 324.008 1217.92 332.264 1208.52 337.544C1199.2 342.728 1187.54 345.32 1173.52 345.32ZM1180.44 317.672C1188.31 317.672 1195.03 316.28 1200.6 313.496C1206.16 310.712 1210.58 307.304 1213.84 303.272C1217.2 299.24 1219.46 295.448 1220.61 291.896C1222.44 287.48 1223.44 282.44 1223.64 276.776C1223.92 271.016 1224.07 266.36 1224.07 262.808L1234.72 265.976C1224.26 267.608 1215.28 269.048 1207.8 270.296C1200.31 271.544 1193.88 272.744 1188.5 273.896C1183.12 274.952 1178.37 276.152 1174.24 277.496C1170.21 278.936 1166.8 280.616 1164.02 282.536C1161.24 284.456 1159.08 286.664 1157.54 289.16C1156.1 291.656 1155.38 294.584 1155.38 297.944C1155.38 301.784 1156.34 305.192 1158.26 308.168C1160.18 311.048 1162.96 313.352 1166.61 315.08C1170.36 316.808 1174.96 317.672 1180.44 317.672ZM1295.97 341V185.48H1326.64V223.352L1322.9 218.456C1324.82 213.272 1327.36 208.568 1330.53 204.344C1333.8 200.024 1337.68 196.472 1342.2 193.688C1346.04 191.096 1350.26 189.08 1354.87 187.64C1359.57 186.104 1364.37 185.192 1369.27 184.904C1374.16 184.52 1378.92 184.712 1383.52 185.48V217.88C1378.92 216.536 1373.59 216.104 1367.54 216.584C1361.59 217.064 1356.21 218.744 1351.41 221.624C1346.61 224.216 1342.68 227.528 1339.6 231.56C1336.63 235.592 1334.42 240.2 1332.98 245.384C1331.54 250.472 1330.82 255.992 1330.82 261.944V341H1295.97ZM1450.84 345.32C1439.6 345.32 1430.1 343.208 1422.32 338.984C1414.55 334.664 1408.64 328.952 1404.61 321.848C1400.68 314.744 1398.71 306.92 1398.71 298.376C1398.71 290.888 1399.96 284.168 1402.45 278.216C1404.95 272.168 1408.79 266.984 1413.97 262.664C1419.16 258.248 1425.88 254.648 1434.13 251.864C1440.37 249.848 1447.67 248.024 1456.02 246.392C1464.47 244.76 1473.59 243.272 1483.38 241.928C1493.27 240.488 1503.59 238.952 1514.34 237.32L1501.96 244.376C1502.05 233.624 1499.65 225.704 1494.76 220.616C1489.86 215.528 1481.6 212.984 1469.99 212.984C1462.98 212.984 1456.21 214.616 1449.68 217.88C1443.16 221.144 1438.6 226.76 1436 234.728L1404.32 224.792C1408.16 211.64 1415.46 201.08 1426.21 193.112C1437.06 185.144 1451.65 181.16 1469.99 181.16C1483.81 181.16 1495.96 183.416 1506.42 187.928C1516.98 192.44 1524.8 199.832 1529.89 210.104C1532.68 215.576 1534.36 221.192 1534.93 226.952C1535.51 232.616 1535.8 238.808 1535.8 245.528V341H1505.41V307.304L1510.45 312.776C1503.44 324.008 1495.24 332.264 1485.83 337.544C1476.52 342.728 1464.85 345.32 1450.84 345.32ZM1457.75 317.672C1465.62 317.672 1472.34 316.28 1477.91 313.496C1483.48 310.712 1487.89 307.304 1491.16 303.272C1494.52 299.24 1496.77 295.448 1497.92 291.896C1499.75 287.48 1500.76 282.44 1500.95 276.776C1501.24 271.016 1501.38 266.36 1501.38 262.808L1512.04 265.976C1501.57 267.608 1492.6 269.048 1485.11 270.296C1477.62 271.544 1471.19 272.744 1465.81 273.896C1460.44 274.952 1455.68 276.152 1451.56 277.496C1447.52 278.936 1444.12 280.616 1441.33 282.536C1438.55 284.456 1436.39 286.664 1434.85 289.16C1433.41 291.656 1432.69 294.584 1432.69 297.944C1432.69 301.784 1433.65 305.192 1435.57 308.168C1437.49 311.048 1440.28 313.352 1443.92 315.08C1447.67 316.808 1452.28 317.672 1457.75 317.672Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M172.261 410.969C98.0948 384.564 45 313.735 45 230.505C45 224.019 45.3224 217.609 45.9522 211.288C63.9951 201.908 81.7329 190.752 90.3601 182.24C92.3653 180.562 93.8555 179.302 95.0239 178.315C97.0495 176.604 98.1077 175.71 99.2049 174.866C100.405 173.944 101.652 173.082 104.262 171.278C105.417 170.48 106.838 169.498 108.64 168.244C109.033 167.971 108.753 166.714 108.323 164.788C107.793 162.41 107.036 159.011 107.036 155.186C107.007 153.709 108.233 150.551 109.41 147.519L109.41 147.519C110.417 144.927 111.388 142.426 111.509 141.146C111.866 137.36 113.198 134.677 114.43 134.349C115.662 134.021 123.376 134.349 131.501 138.225C137.635 141.151 141.876 147.869 144.433 151.918C145.703 153.93 146.557 155.283 147.021 155.186C147.642 155.055 148.13 154.938 148.576 154.831C149.473 154.616 150.2 154.442 151.496 154.277C151.946 154.22 152.395 152.655 151.09 148.846C150.42 146.89 151.113 145.124 151.98 142.913C152.346 141.98 152.743 140.967 153.081 139.828C153.322 139.017 153.442 138.239 153.551 137.533C153.788 135.992 153.972 134.793 155.252 134.349C156.668 133.857 166.181 134.349 171.973 138.914C176.153 142.209 177.985 147.071 179.175 150.23L179.175 150.23L179.175 150.23C179.634 151.447 179.997 152.411 180.363 152.936C181.97 152.906 186.769 152.92 190.183 152.929H190.183H190.184H190.184C191.467 152.933 192.555 152.936 193.203 152.936C233.719 152.936 296.799 156.524 335.719 182.24C366.02 202.261 365.12 214.887 363.523 237.292L363.523 237.293C363.295 240.482 363.054 243.869 362.886 247.503C362.262 261.053 360.981 276.248 358.05 285.032C355.959 291.298 352.672 292.709 349.394 294.116C347.294 295.018 345.198 295.917 343.423 298.092C341.54 300.399 341.378 303.233 341.228 305.861C341.05 308.982 340.889 311.812 337.879 313.12C313.588 323.675 272.295 329.323 243.718 333.231L243.718 333.231C229.967 335.111 219.162 336.589 214.611 338.017C209.987 339.469 207.445 345.894 203.5 355.87C198.268 369.099 190.567 388.573 172.261 410.969ZM351.659 220.933C351.555 228.392 347.679 230.452 342.935 230.385C338.191 230.319 334.375 228.152 334.48 220.693C334.584 213.233 338.515 207.24 343.259 207.307C348.003 207.373 351.764 213.474 351.659 220.933ZM197.468 204.095C203.963 203.771 208.794 203.53 209.151 198.317C209.692 190.407 201.265 185.5 188.113 186.187C174.96 186.875 162.913 197.366 166.133 204.304C168.722 209.881 176.247 207.954 183.344 206.138C184.394 205.869 185.434 205.603 186.448 205.363C190.307 204.452 194.11 204.263 197.468 204.095Z" fill="currentColor"></path><circle cx="236.506" cy="230.506" r="181.506" stroke="currentColor" stroke-width="20"></circle></g><defs><clipPath id="clip0_104_6"><rect width="1600" height="461" fill="white"></rect></clipPath></defs></svg></a><nav class="flex items-center space-x-6 text-md font-medium"><a class="transition-colors hover:text-foreground/80 text-foreground" href="/docs" data-discover="true">Documentation</a><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-7 w-7 rounded-full flex-none p-0" title="Devlog" aria-label="Devlog" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Raal5»" data-state="closed"><div class="relative flex items-center justify-center text-foreground/60 hover:text-foreground/80"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-activity !h-4 !w-4"><path d="M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"></path></svg></div></button></nav></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:text-accent-foreground h-10 py-2 mr-2 px-0 text-base hover:bg-transparent focus-visible:bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 md:hidden" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Ril5»" data-state="closed"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm5-1v12h9a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM4 2H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2z"></path></svg><span class="sr-only">Toggle Menu</span></button><div class="flex md:flex-1 items-center justify-between space-x-2 md:justify-end"><nav class="flex items-center space-x-8"><div class="hidden lg:flex items-center space-x-2"><a rel="noreferrer" href="https://github.com/apibara/dna" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></button></a><a rel="noreferrer" href="https://www.twitter.com/apibara_web3" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button></a><a rel="noreferrer" href="https://discord.gg/m7B92CNFNt" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path></svg></button></a></div><div class="hidden md:flex items-center space-x-8"><a rel="noreferrer" class="hidden lg:block" href="https://calendly.com/apibara/chat-with-founder" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9 rounded-md px-3">Book a quick call w/ our founders</button></a><a rel="noreferrer" href="https://app.apibara.com" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 h-9 rounded-md px-3">Get started for free</button></a></div></nav></div></div></header><div class="md:container flex-1 py-8 px-4 md:px-2 md:grid md:grid-cols-[220px_minmax(0,1fr)_20px] md:gap-6 lg:grid-cols-[220px_minmax(0,1fr)_140px] lg:gap-8 xl:grid-cols-[240px_minmax(0,1fr)_240px] xl:gap-10"><div class="hidden top-20 z-30 md:-ml-2 w-full shrink-0 md:sticky md:block md:self-start"><div class="pb-4 sticky top-4 bg-background"><button type="button" role="combobox" aria-controls="radix-«Rlcl5»" aria-expanded="false" aria-autocomplete="none" dir="ltr" data-state="closed" class="flex items-center justify-between rounded-md border border-input bg-background py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&amp;&gt;span]:line-clamp-1 w-full h-8 px-4 mb-4"><span style="pointer-events:none"></span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 opacity-50" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><select aria-hidden="true" tabindex="-1" style="position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal"></select><button class="inline-flex items-center gap-2 whitespace-nowrap ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border border-input hover:bg-accent hover:text-accent-foreground px-4 py-2 relative h-8 justify-start rounded-[0.5rem] bg-background text-sm font-normal text-muted-foreground shadow-none sm:pr-12 w-full"><span class="inline-flex">Search...</span><kbd class="pointer-events-none absolute right-[0.3rem] top-[0.3rem] hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex"><span class="text-xs">⌘</span>K</kbd></button></div><aside class=""><div class="flex flex-col space-y-6 overflow-y-auto h-[calc(100vh-228px)] styled-scrollbar"><div><h4 class="mb-1 rounded-md md:px-2 py-1 text-md font-semibold md:text-primary md:uppercase">Getting Started</h4><div class="grid grid-flow-row auto-rows-max text-sm"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/installation" data-discover="true"><span class="hover:underline">Installation</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/indexers" data-discover="true"><span class="hover:underline">Indexers</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/plugins" data-discover="true"><span class="hover:underline">Plugins &amp; Hooks</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/configuration" data-discover="true"><span class="hover:underline">apibara.config.ts</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/instrumentation" data-discover="true"><span class="hover:underline">instrumentation.ts</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/top-tips" data-discover="true"><span class="hover:underline">Top tips</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/upgrading" data-discover="true"><span class="hover:underline">Upgrading from v1</span></a></div></div><div><h4 class="mb-1 rounded-md md:px-2 py-1 text-md font-semibold md:text-primary md:uppercase">Storage</h4><div class="grid grid-flow-row auto-rows-max text-sm"><button type="button" class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent md:px-2 py-1 text-muted-foreground">Drizzle<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-4 h-4"><path d="m9 18 6-6-6-6"></path></svg></button><div class="ml-4 border-l border-gray-800 overflow-hidden h-0"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/storage/drizzle-pg" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/storage/drizzle-pg/testing" data-discover="true"><span class="hover:underline">Testing</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/storage/drizzle-pg/internals" data-discover="true"><span class="hover:underline">Internals</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/storage/drizzle-pg/api-reference" data-discover="true"><span class="hover:underline">API Ref</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/storage/drizzle-pg/faq" data-discover="true"><span class="hover:underline">FAQ</span></a></div></div></div><div><h4 class="mb-1 rounded-md md:px-2 py-1 text-md font-semibold md:text-primary md:uppercase">Networks</h4><div class="grid grid-flow-row auto-rows-max text-sm"><button type="button" class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent md:px-2 py-1 text-muted-foreground">Beacon Chain<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-4 h-4"><path d="m9 18 6-6-6-6"></path></svg></button><div class="ml-4 border-l border-gray-800 overflow-hidden h-0"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/beaconchain" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/beaconchain/filter" data-discover="true"><span class="hover:underline">Filter</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/beaconchain/data" data-discover="true"><span class="hover:underline">Block data</span></a></div><button type="button" class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent md:px-2 py-1 text-muted-foreground">EVM<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-4 h-4"><path d="m9 18 6-6-6-6"></path></svg></button><div class="ml-4 border-l border-gray-800 overflow-hidden h-0"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/evm" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/evm/filter" data-discover="true"><span class="hover:underline">Filter</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/evm/data" data-discover="true"><span class="hover:underline">Block data</span></a></div><button type="button" class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent md:px-2 py-1 text-muted-foreground">Starknet<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-4 h-4"><path d="m9 18 6-6-6-6"></path></svg></button><div class="ml-4 border-l border-gray-800 overflow-hidden h-0"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet/filter" data-discover="true"><span class="hover:underline">Filter</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet/data" data-discover="true"><span class="hover:underline">Block data</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet/decoder" data-discover="true"><span class="hover:underline">Event decoder</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet/helpers" data-discover="true"><span class="hover:underline">Helpers</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet/upgrade-from-v1" data-discover="true"><span class="hover:underline">Upgrading</span></a></div></div></div><div><h4 class="mb-1 rounded-md md:px-2 py-1 text-md font-semibold md:text-primary md:uppercase">DNA Protocol</h4><div class="grid grid-flow-row auto-rows-max text-sm"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/dna" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-foreground" href="/docs/dna/architecture" data-discover="true"><span class="hover:underline font-medium">Architecture</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/dna/protocol" data-discover="true"><span class="hover:underline">Protocol</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/dna/add-new-chain" data-discover="true"><span class="hover:underline">Add new chain</span></a></div></div></div></aside></div><div class="docs_layout_children"><div class="flex flex-col"><article class="mdx"><h1 class="font-heading mt-2 text-4xl font-bold" id="dna-v2-architecture">DNA v2 architecture</h1>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">This page describes in detail the architecture of DNA v2.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">At a high-level, the goals for DNA v2 are:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">serve onchain data through a protocol that&#x27;s optimized for building indexers.</li>
<li class="mt-2">provide a scalable and cost-efficient way to access onchain data.</li>
<li class="mt-2">decouple compute from storage.</li>
</ul>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">This is achieved by building a <em>cloud native</em> service that ingests onchain data
from an archive node and stores it into Object Storage (for example Amazon S3,
Cloudflare R2). Data is served by stateless workers that read and filter data
from Object Storage before sending it to the indexers. The diagram below shows
all the high-level components that make a production deployment of DNA v2.
Communication between components is done through etcd.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0"><code class="text-sm"><span class="line"><span>                 ┌─────────────────────────────────────────────┐                 </span></span>
<span class="line"><span>                 │                Archive Node                 │░                </span></span>
<span class="line"><span>                 └─────────────────────────────────────────────┘░                </span></span>
<span class="line"><span>                  ░░░░░░░░░░░░░░░░░░░░░░│░░░░░░░░░░░░░░░░░░░░░░░░                </span></span>
<span class="line"><span>                                        │                                        </span></span>
<span class="line"><span>                                        │                                        </span></span>
<span class="line"><span>  ╔═ DNA Cluster ═══════════════════════╬══════════════════════════════════════╗ </span></span>
<span class="line"><span>  ║                                     │                                      ║░</span></span>
<span class="line"><span>  ║ ┌──────┐                            ▼                            ┌──────┐  ║░</span></span>
<span class="line"><span>  ║ │      │     ┌─────────────────────────────────────────────┐     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     │                                             │     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │◀────│              Ingestion Service              │────▶│      │  ║░</span></span>
<span class="line"><span>  ║ │      │     │                                             │     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     └─────────────────────────────────────────────┘     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     ┌─────────────────────────────────────────────┐     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     │                                             │     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │◀────│             Compaction Service              │────▶│      │  ║░</span></span>
<span class="line"><span>  ║ │      │     │                                             │     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     └─────────────────────────────────────────────┘     │      │  ║░</span></span>
<span class="line"><span>  ║ │  S3  │     ┌─────────────────────────────────────────────┐     │ etcd │  ║░</span></span>
<span class="line"><span>  ║ │      │     │                                             │     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │◀────│               Pruning Service               │────▶│      │  ║░</span></span>
<span class="line"><span>  ║ │      │     │                                             │     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     └─────────────────────────────────────────────┘     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     ┌───────────────────────────────────────────┐       │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     │┌──────────────────────────────────────────┴┐      │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     ││┌──────────────────────────────────────────┴┐     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     │││                                           │     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │     │││                  Stream                   │     │      │  ║░</span></span>
<span class="line"><span>  ║ │      │◀────┤││                                           ├────▶│      │  ║░</span></span>
<span class="line"><span>  ║ │      │     │││                  Service                  │     │      │  ║░</span></span>
<span class="line"><span>  ║ └──────┘     └┤│                                           │     └──────┘  ║░</span></span>
<span class="line"><span>  ║               └┤                                           │               ║░</span></span>
<span class="line"><span>  ║                └───────────────────────────────────────────┘               ║░</span></span>
<span class="line"><span>  ║                                                                            ║░</span></span>
<span class="line"><span>  ╚════════════════════════════════════════════════════════════════════════════╝░</span></span>
<span class="line"><span>   ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░</span></span></code></pre></div>
<a href="#dna-service" class="
                block font-heading mt-12 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0
          "><h2 id="dna-service" class="hover:after:content-[&#x27;#&#x27;] after:relative after:pl-2">DNA service</h2></a>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The DNA service is comprised of several components:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">ingestion service: listens for new blocks on the network and stores them into
Object Storage.</li>
<li class="mt-2">compaction service: combines multiple blocks together into <em>segments</em>.
Segments are grouped by data type (like logs, transactions, and receipts).</li>
<li class="mt-2">pruner service: removes blocks that have been compacted to reduce storage cost.</li>
<li class="mt-2">stream service: receives streaming requests from clients (indexers) and serves
onchain data by filtering objects stored on S3.</li>
</ul>
<h3 class="font-heading mt-8 text-xl font-semibold tracking-tight" id="ingestion-service">Ingestion service</h3>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The ingestion service fetches blocks from the network and stores them into
Object Storage. This service is the only chain-specific service in DNA, all
other components work on generic data-structures.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Serving onchain data requires serving a high-volume of data filtered by a
relatively small number of columns. When designing DNA, we took a few decisions
to make this process as efficient as possible:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">data is stored as pre-serialized protobuf messages to avoid wasting CPU
cycles serializing the same data over and over again.</li>
<li class="mt-2">filtering is entirely done using indices to reduce reads.</li>
<li class="mt-2">joins (for example include logs&#x27; transactions) are also achieved with indices.</li>
</ul>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The ingestion service is responsible for creating this data and indices.
Data is grouped into <em>blocks</em>. Blocks are comprised of <em>fragments</em>, that
is groups of related data. All fragments have an unique numerical id used
to identify them. There are four different types of fragments:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">index: a collection of indices, the fragment id is <code class="text-sm">0</code>.
Indices are grouped by the fragment they index.</li>
<li class="mt-2">join: a collection of join indices, the fragment id is <code class="text-sm">254</code>.
Join indices are also grouped by the source fragment index.</li>
<li class="mt-2">header: the block header, the fragment id is <code class="text-sm">1</code>. Header are stored as
pre-serialized protobuf messages.</li>
<li class="mt-2">body: the chain-specific block data, grouped by fragment id.</li>
</ul>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Note that we call block number + hash a <em>cursor</em> since it uniquely identifies a
block in the chain.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0"><code class="text-sm"><span class="line"><span> ╔═ Block ══════════════════════════════════════════════════════════════╗ </span></span>
<span class="line"><span> ║ ┌─ Index ──────────────────────────────────────────────────────────┐ ║░</span></span>
<span class="line"><span> ║ │ ┌─ Fragment 0 ─────────────────────────────────────────────────┐ │ ║░</span></span>
<span class="line"><span> ║ │ │┌────────────────────────────────────────────────────────────┐│ │ ║░</span></span>
<span class="line"><span> ║ │ ││                          Index 0                           ││ │ ║░</span></span>
<span class="line"><span> ║ │ │├────────────────────────────────────────────────────────────┤│ │ ║░</span></span>
<span class="line"><span> ║ │ ││                          Index 1                           ││ │ ║░</span></span>
<span class="line"><span> ║ │ │├────────────────────────────────────────────────────────────┤│ │ ║░</span></span>
<span class="line"><span> ║ │ │                                                              │ │ ║░</span></span>
<span class="line"><span> ║ │ │├────────────────────────────────────────────────────────────┤│ │ ║░</span></span>
<span class="line"><span> ║ │ ││                          Index N                           ││ │ ║░</span></span>
<span class="line"><span> ║ │ │└────────────────────────────────────────────────────────────┘│ │ ║░</span></span>
<span class="line"><span> ║ │ └──────────────────────────────────────────────────────────────┘ │ ║░</span></span>
<span class="line"><span> ║ └──────────────────────────────────────────────────────────────────┘ ║░</span></span>
<span class="line"><span> ║ ┌─ Join ───────────────────────────────────────────────────────────┐ ║░</span></span>
<span class="line"><span> ║ │ ┌─ Fragment 0 ─────────────────────────────────────────────────┐ │ ║░</span></span>
<span class="line"><span> ║ │ │┌────────────────────────────────────────────────────────────┐│ │ ║░</span></span>
<span class="line"><span> ║ │ ││                         Fragment 1                         ││ │ ║░</span></span>
<span class="line"><span> ║ │ │├────────────────────────────────────────────────────────────┤│ │ ║░</span></span>
<span class="line"><span> ║ │ ││                         Fragment 2                         ││ │ ║░</span></span>
<span class="line"><span> ║ │ │└────────────────────────────────────────────────────────────┘│ │ ║░</span></span>
<span class="line"><span> ║ │ └──────────────────────────────────────────────────────────────┘ │ ║░</span></span>
<span class="line"><span> ║ └──────────────────────────────────────────────────────────────────┘ ║░</span></span>
<span class="line"><span> ║ ┌─ Body ───────────────────────────────────────────────────────────┐ ║░</span></span>
<span class="line"><span> ║ │ ┌──────────────────────────────────────────────────────────────┐ │ ║░</span></span>
<span class="line"><span> ║ │ │                                                              │ │ ║░</span></span>
<span class="line"><span> ║ │ │                           Fragment 0                         │ │ ║░</span></span>
<span class="line"><span> ║ │ │                                                              │ │ ║░</span></span>
<span class="line"><span> ║ │ └──────────────────────────────────────────────────────────────┘ │ ║░</span></span>
<span class="line"><span> ║ │ ┌──────────────────────────────────────────────────────────────┐ │ ║░</span></span>
<span class="line"><span> ║ │ │                                                              │ │ ║░</span></span>
<span class="line"><span> ║ │ │                           Fragment 1                         │ │ ║░</span></span>
<span class="line"><span> ║ │ │                                                              │ │ ║░</span></span>
<span class="line"><span> ║ │ └──────────────────────────────────────────────────────────────┘ │ ║░</span></span>
<span class="line"><span> ║ └──────────────────────────────────────────────────────────────────┘ ║░</span></span>
<span class="line"><span> ╚══════════════════════════════════════════════════════════════════════╝░</span></span>
<span class="line"><span> ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░</span></span></code></pre></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">On supported networks, the ingestion service is also responsible for
periodically refreshing the mempool (pending) block data and uploading it into
Object Storage. This works exactly as for all other blocks.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The ingestion service tracks the canonical chain and uploads it to Object Storage.
This data is used by the stream service to track online and offline chain
reorganizations.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The ingestion service stores its data on etcd. Stream services subscribe to
etcd updates to receive notifications about new blocks ingested and other
changes to the chain (for example changes to the finalized block).</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Finally, the ingestion service is <em>fault tolerant</em>. When the ingestion service
starts, it acquires a distributed lock from etcd to ensure only one instance is
running at the same time. If running multiple deployments of DNA, all other
instances will wait for the lock to be released (following a service restart or
crash) and will try to take over the ingestion.</p>
<h3 class="font-heading mt-8 text-xl font-semibold tracking-tight" id="compaction-service">Compaction service</h3>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The compaction service groups together data from several blocks (usually 100 or
1000) into <em>segments</em>. Segments only contain data for one fragment type (for example
headers, indices, and transactions).
In other words, the compaction service groups <code class="text-sm">N</code> blocks into <code class="text-sm">M</code> segments.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Only data that has been finalized is compacted into segments.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The compaction service also creates block-level indices called <em>groups</em>. Groups
combine indices from multiple blocks/segments to quickly look up which blocks
contain specific data. This type of index is very useful to increase performance
on sparse datasets.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0"><code class="text-sm"><span class="line"><span> ╔═ Index Segment ═══════════════════════╗         ╔═ Transaction Segment ═════════════════╗ </span></span>
<span class="line"><span> ║ ┌─ Block ───────────────────────────┐ ║░        ║ ┌─ Block ───────────────────────────┐ ║░</span></span>
<span class="line"><span> ║ │ ┌─ Fragment 0 ──────────────────┐ │ ║░        ║ │ ┌───────────────────────────────┐ │ ║░</span></span>
<span class="line"><span> ║ │ │┌─────────────────────────────┐│ │ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ │ ││           Index 0           ││ │ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ │ │├─────────────────────────────┤│ │ ║░        ║ │ │           Fragment 2          │ │ ║░</span></span>
<span class="line"><span> ║ │ ││           Index 1           ││ │ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ │ │├─────────────────────────────┤│ │ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ │ │                               │ │ ║░        ║ │ └───────────────────────────────┘ │ ║░</span></span>
<span class="line"><span> ║ │ │├─────────────────────────────┤│ │ ║░        ║ └───────────────────────────────────┘ ║░</span></span>
<span class="line"><span> ║ │ ││           Index N           ││ │ ║░        ║ ┌─ Block ───────────────────────────┐ ║░</span></span>
<span class="line"><span> ║ │ │└─────────────────────────────┘│ │ ║░        ║ │ ┌───────────────────────────────┐ │ ║░</span></span>
<span class="line"><span> ║ │ └───────────────────────────────┘ │ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ └───────────────────────────────────┘ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ ┌─ Block ───────────────────────────┐ ║░        ║ │ │           Fragment 2          │ │ ║░</span></span>
<span class="line"><span> ║ │ ┌─ Fragment 0 ──────────────────┐ │ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ │ │┌─────────────────────────────┐│ │ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ │ ││           Index 0           ││ │ ║░        ║ │ └───────────────────────────────┘ │ ║░</span></span>
<span class="line"><span> ║ │ │├─────────────────────────────┤│ │ ║░        ║ └───────────────────────────────────┘ ║░</span></span>
<span class="line"><span> ║ │ ││           Index 1           ││ │ ║░        ║ ┌─ Block ───────────────────────────┐ ║░</span></span>
<span class="line"><span> ║ │ │├─────────────────────────────┤│ │ ║░        ║ │ ┌───────────────────────────────┐ │ ║░</span></span>
<span class="line"><span> ║ │ │                               │ │ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ │ │├─────────────────────────────┤│ │ ║░        ║ │ │           Fragment 2          │ │ ║░</span></span>
<span class="line"><span> ║ │ ││           Index N           ││ │ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ │ │└─────────────────────────────┘│ │ ║░        ║ │ │                               │ │ ║░</span></span>
<span class="line"><span> ║ │ └───────────────────────────────┘ │ ║░        ║ │ └───────────────────────────────┘ │ ║░</span></span>
<span class="line"><span> ║ └───────────────────────────────────┘ ║░        ║ └───────────────────────────────────┘ ║░</span></span>
<span class="line"><span> ╚═══════════════════════════════════════╝░        ╚═══════════════════════════════════════╝░</span></span>
<span class="line"><span>  ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░         ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░</span></span></code></pre></div>
<h3 class="font-heading mt-8 text-xl font-semibold tracking-tight" id="pruner-service">Pruner service</h3>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The pruner service cleans up block data that has been included in segments.
This is done to reduce the storage used by DNA.</p>
<h3 class="font-heading mt-8 text-xl font-semibold tracking-tight" id="object-hierarchy">Object hierarchy</h3>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">We now have all elements to understand the objects uploaded to Object Storage by the
ingestion service.
If you run DNA pointing it to your bucket, you can eventually see a folder structure
that looks like the following.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0"><code class="text-sm"><span class="line"><span>my-chain</span></span>
<span class="line"><span>├── blocks</span></span>
<span class="line"><span>│   ├── 000020908017</span></span>
<span class="line"><span>│   │   └── 0xc137607affd53bd9e857af372429762f77eaff0fe32f0e49224e9fc0e439118d</span></span>
<span class="line"><span>│   │   ├── pending-0</span></span>
<span class="line"><span>│   │   ├── pending-1</span></span>
<span class="line"><span>│   │   └── pending-2</span></span>
<span class="line"><span>│   ├── 000020908018</span></span>
<span class="line"><span>│   │   └── ... same as above</span></span>
<span class="line"><span>│   └── 000020908019</span></span>
<span class="line"><span>│       └── ... same as above</span></span>
<span class="line"><span>├── chain</span></span>
<span class="line"><span>│   ├── recent</span></span>
<span class="line"><span>│   ├── z-000020906000</span></span>
<span class="line"><span>│   ├── z-000020907000</span></span>
<span class="line"><span>│   └── z-000020908000</span></span>
<span class="line"><span>├── groups</span></span>
<span class="line"><span>│   └── 000020905000</span></span>
<span class="line"><span>│       └── index</span></span>
<span class="line"><span>└── segments</span></span>
<span class="line"><span>    ├── 000020906000</span></span>
<span class="line"><span>    │   ├── header</span></span>
<span class="line"><span>    │   ├── index</span></span>
<span class="line"><span>    │   ├── join</span></span>
<span class="line"><span>    │   ├── log</span></span>
<span class="line"><span>    │   ├── receipt</span></span>
<span class="line"><span>    │   └── transaction</span></span>
<span class="line"><span>    ├── 000020907000</span></span>
<span class="line"><span>    │   └── ... same as above</span></span>
<span class="line"><span>    └── 000020908000</span></span>
<span class="line"><span>        └── ... same as above</span></span></code></pre></div>
<h3 class="font-heading mt-8 text-xl font-semibold tracking-tight" id="stream-service">Stream service</h3>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The stream service is responsible for serving data to clients. The raw onchain
data stored in Object Storage is filtered by the stream service before being
sent over the network, this results in lower egress fees compared to solutions
that filter data on the client.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Upon receiving a stream request, the service validates and compiles the request
into a <em>query</em>. A query is simply a list of index lookup requests that are
applied to each block.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The stream service loops then keeps repeating the following steps:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">check if it should send a new block of data or inform the client of a chain
reorganization.</li>
<li class="mt-2">load the indices from the segment or the block and use them to compute what
data to send the client.</li>
<li class="mt-2">load the pre-serialized protobuf messages and copy them to the output stream.</li>
</ul>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">One critical aspect of the stream service is how it loads blocks and segments.
Reading from Object Storage has virtually unlimited throughput, but also high
latency. The service is also very likely to access data closer to the chain&#x27;s
tip more frequently, and we should cache Object Storage requests to avoid
unnecessarily increase our cloud spending.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">We achieve all of this (and more!) by using an hybrid cache that stores
frequently accessed data in memory and <em>on disk</em>. This may come as a surprise
since isn&#x27;t the point of DNA to avoid expensive disks and rely on cheap Object
Storage? The reasons this design still makes sense are multiple:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">we can use cheaper and higher performance temporary NVMe disks attached
directly to our server.</li>
<li class="mt-2">we can quickly scale horizontally the stream service without re-indexing all
data.</li>
<li class="mt-2">we can use disks that are much smaller than the full chain&#x27;s data. The cache
dynamically stores the most frequently accessed data. Unused or rarely used
data lives on Object Storage.</li>
</ul>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The following table, inspired <a class="font-medium underline underline-offset-4" href="https://www.vantage.sh/blog/ebs-vs-nvme-pricing-performance">by the table in this article by
Vantage</a>, shows the
difference in performance and price between an AWS EC2 instance using
(temporary) NVMe disks and two using EBS (one with a general purpose <code class="text-sm">gp3</code>
volume, and one with higher performance <code class="text-sm">io1</code> volume). All prices as of April
2024, US East, 1 year reserved with no upfront payment.</p>
<table><thead><tr><th>Metric</th><th>EBS (gp3)</th><th>EBS (io1)</th><th>NVMe</th></tr></thead><tbody><tr><td>Instance Type</td><td>r6i.8xlarge</td><td>r6i.8xlarge</td><td>i4i.8xlarge</td></tr><tr><td>vCPU</td><td>32</td><td>32</td><td>32</td></tr><tr><td>Memory (GiB)</td><td>256</td><td>256</td><td>245</td></tr><tr><td>Network (Gibps)</td><td>12.50</td><td>12.50</td><td>18.75</td></tr><tr><td>Storage (GiB)</td><td>7500</td><td>7500</td><td>2x3750</td></tr><tr><td>IOPS (read/write)</td><td>16,000</td><td>40,000</td><td>800,000 / 440,000</td></tr><tr><td>Cost - Compute ($/mo)</td><td>973</td><td>973</td><td>1,300</td></tr><tr><td>Cost - Storage ($/mo)</td><td>665</td><td>3,537</td><td>0</td></tr><tr><td>Cost - Total ($/mo)</td><td>1,638</td><td>4,510</td><td>1,300</td></tr></tbody></table>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Notice how the NVMe instance has 30-50x the IOPS per dollar. This price
difference means that Apibara users benefit from lower costs and/or higher
performance.</p></article><div class="mt-8 pt-2 border-t flex flex-row justify-between text-muted-foreground w-full"><div><span>Last modified<!-- --> </span></div><div><a class="flex items-center hover:text-foreground" href="https://github.com/apibara/documentation/blob/main/docs/v2/dna/architecture/index.mdx" target="_blank"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="w-4 h-4 inline-block mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>Edit on GitHub</a></div></div></div></div></div></main></div><div class="border-t bg-muted px-4 py-12 md:py-16"><div class="container flex flex-col px-0"><div class=""><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="flex flex-col items-start space-y-8"><svg viewBox="0 0 1600 461" color="hsl(var(--primary))" fill="none" class="h-14"><title>Apibara</title><g clip-path="url(#clip0_104_6)"><path d="M486.76 341L552.136 133.64H602.968L668.344 341H632.632L573.304 154.952H581.08L522.472 341H486.76ZM523.192 296.072V263.672H632.056V296.072H523.192ZM769.115 345.32C753.947 345.32 741.227 341.72 730.955 334.52C720.683 327.32 712.955 317.528 707.771 305.144C702.587 292.664 699.995 278.696 699.995 263.24C699.995 247.592 702.587 233.576 707.771 221.192C712.955 208.808 720.539 199.064 730.523 191.96C740.603 184.76 753.035 181.16 767.819 181.16C782.507 181.16 795.227 184.76 805.979 191.96C816.827 199.064 825.227 208.808 831.179 221.192C837.131 233.48 840.107 247.496 840.107 263.24C840.107 278.792 837.179 292.76 831.323 305.144C825.467 317.528 817.211 327.32 806.555 334.52C795.899 341.72 783.419 345.32 769.115 345.32ZM694.091 410.12V185.48H724.763V294.632H729.083V410.12H694.091ZM763.787 314.216C772.811 314.216 780.251 311.96 786.107 307.448C791.963 302.936 796.283 296.84 799.067 289.16C801.947 281.384 803.387 272.744 803.387 263.24C803.387 253.832 801.947 245.288 799.067 237.608C796.187 229.832 791.723 223.688 785.675 219.176C779.627 214.568 771.947 212.264 762.635 212.264C753.803 212.264 746.603 214.424 741.035 218.744C735.467 222.968 731.339 228.92 728.651 236.6C726.059 244.184 724.763 253.064 724.763 263.24C724.763 273.32 726.059 282.2 728.651 289.88C731.339 297.56 735.515 303.56 741.179 307.88C746.939 312.104 754.475 314.216 763.787 314.216ZM874.728 161.864V130.04H909.432V161.864H874.728ZM874.728 341V185.48H909.432V341H874.728ZM1027.3 345.32C1012.13 345.32 999.414 341.72 989.142 334.52C978.87 327.32 971.142 317.528 965.958 305.144C960.774 292.664 958.182 278.696 958.182 263.24C958.182 247.592 960.774 233.576 965.958 221.192C971.142 208.808 978.726 199.064 988.71 191.96C998.79 184.76 1011.22 181.16 1026.01 181.16C1040.69 181.16 1053.41 184.76 1064.17 191.96C1075.01 199.064 1083.41 208.808 1089.37 221.192C1095.32 233.48 1098.29 247.496 1098.29 263.24C1098.29 278.792 1095.37 292.76 1089.51 305.144C1083.65 317.528 1075.4 327.32 1064.74 334.52C1054.09 341.72 1041.61 345.32 1027.3 345.32ZM952.278 341V133.64H987.27V231.848H982.95V341H952.278ZM1021.97 314.216C1031 314.216 1038.44 311.96 1044.29 307.448C1050.15 302.936 1054.47 296.84 1057.25 289.16C1060.13 281.384 1061.57 272.744 1061.57 263.24C1061.57 253.832 1060.13 245.288 1057.25 237.608C1054.37 229.832 1049.91 223.688 1043.86 219.176C1037.81 214.568 1030.13 212.264 1020.82 212.264C1011.99 212.264 1004.79 214.424 999.222 218.744C993.654 222.968 989.526 228.92 986.838 236.6C984.246 244.184 982.95 253.064 982.95 263.24C982.95 273.32 984.246 282.2 986.838 289.88C989.526 297.56 993.702 303.56 999.366 307.88C1005.13 312.104 1012.66 314.216 1021.97 314.216ZM1173.52 345.32C1162.29 345.32 1152.79 343.208 1145.01 338.984C1137.24 334.664 1131.33 328.952 1127.3 321.848C1123.36 314.744 1121.4 306.92 1121.4 298.376C1121.4 290.888 1122.64 284.168 1125.14 278.216C1127.64 272.168 1131.48 266.984 1136.66 262.664C1141.84 258.248 1148.56 254.648 1156.82 251.864C1163.06 249.848 1170.36 248.024 1178.71 246.392C1187.16 244.76 1196.28 243.272 1206.07 241.928C1215.96 240.488 1226.28 238.952 1237.03 237.32L1224.64 244.376C1224.74 233.624 1222.34 225.704 1217.44 220.616C1212.55 215.528 1204.29 212.984 1192.68 212.984C1185.67 212.984 1178.9 214.616 1172.37 217.88C1165.84 221.144 1161.28 226.76 1158.69 234.728L1127.01 224.792C1130.85 211.64 1138.15 201.08 1148.9 193.112C1159.75 185.144 1174.34 181.16 1192.68 181.16C1206.5 181.16 1218.64 183.416 1229.11 187.928C1239.67 192.44 1247.49 199.832 1252.58 210.104C1255.36 215.576 1257.04 221.192 1257.62 226.952C1258.2 232.616 1258.48 238.808 1258.48 245.528V341H1228.1V307.304L1233.14 312.776C1226.13 324.008 1217.92 332.264 1208.52 337.544C1199.2 342.728 1187.54 345.32 1173.52 345.32ZM1180.44 317.672C1188.31 317.672 1195.03 316.28 1200.6 313.496C1206.16 310.712 1210.58 307.304 1213.84 303.272C1217.2 299.24 1219.46 295.448 1220.61 291.896C1222.44 287.48 1223.44 282.44 1223.64 276.776C1223.92 271.016 1224.07 266.36 1224.07 262.808L1234.72 265.976C1224.26 267.608 1215.28 269.048 1207.8 270.296C1200.31 271.544 1193.88 272.744 1188.5 273.896C1183.12 274.952 1178.37 276.152 1174.24 277.496C1170.21 278.936 1166.8 280.616 1164.02 282.536C1161.24 284.456 1159.08 286.664 1157.54 289.16C1156.1 291.656 1155.38 294.584 1155.38 297.944C1155.38 301.784 1156.34 305.192 1158.26 308.168C1160.18 311.048 1162.96 313.352 1166.61 315.08C1170.36 316.808 1174.96 317.672 1180.44 317.672ZM1295.97 341V185.48H1326.64V223.352L1322.9 218.456C1324.82 213.272 1327.36 208.568 1330.53 204.344C1333.8 200.024 1337.68 196.472 1342.2 193.688C1346.04 191.096 1350.26 189.08 1354.87 187.64C1359.57 186.104 1364.37 185.192 1369.27 184.904C1374.16 184.52 1378.92 184.712 1383.52 185.48V217.88C1378.92 216.536 1373.59 216.104 1367.54 216.584C1361.59 217.064 1356.21 218.744 1351.41 221.624C1346.61 224.216 1342.68 227.528 1339.6 231.56C1336.63 235.592 1334.42 240.2 1332.98 245.384C1331.54 250.472 1330.82 255.992 1330.82 261.944V341H1295.97ZM1450.84 345.32C1439.6 345.32 1430.1 343.208 1422.32 338.984C1414.55 334.664 1408.64 328.952 1404.61 321.848C1400.68 314.744 1398.71 306.92 1398.71 298.376C1398.71 290.888 1399.96 284.168 1402.45 278.216C1404.95 272.168 1408.79 266.984 1413.97 262.664C1419.16 258.248 1425.88 254.648 1434.13 251.864C1440.37 249.848 1447.67 248.024 1456.02 246.392C1464.47 244.76 1473.59 243.272 1483.38 241.928C1493.27 240.488 1503.59 238.952 1514.34 237.32L1501.96 244.376C1502.05 233.624 1499.65 225.704 1494.76 220.616C1489.86 215.528 1481.6 212.984 1469.99 212.984C1462.98 212.984 1456.21 214.616 1449.68 217.88C1443.16 221.144 1438.6 226.76 1436 234.728L1404.32 224.792C1408.16 211.64 1415.46 201.08 1426.21 193.112C1437.06 185.144 1451.65 181.16 1469.99 181.16C1483.81 181.16 1495.96 183.416 1506.42 187.928C1516.98 192.44 1524.8 199.832 1529.89 210.104C1532.68 215.576 1534.36 221.192 1534.93 226.952C1535.51 232.616 1535.8 238.808 1535.8 245.528V341H1505.41V307.304L1510.45 312.776C1503.44 324.008 1495.24 332.264 1485.83 337.544C1476.52 342.728 1464.85 345.32 1450.84 345.32ZM1457.75 317.672C1465.62 317.672 1472.34 316.28 1477.91 313.496C1483.48 310.712 1487.89 307.304 1491.16 303.272C1494.52 299.24 1496.77 295.448 1497.92 291.896C1499.75 287.48 1500.76 282.44 1500.95 276.776C1501.24 271.016 1501.38 266.36 1501.38 262.808L1512.04 265.976C1501.57 267.608 1492.6 269.048 1485.11 270.296C1477.62 271.544 1471.19 272.744 1465.81 273.896C1460.44 274.952 1455.68 276.152 1451.56 277.496C1447.52 278.936 1444.12 280.616 1441.33 282.536C1438.55 284.456 1436.39 286.664 1434.85 289.16C1433.41 291.656 1432.69 294.584 1432.69 297.944C1432.69 301.784 1433.65 305.192 1435.57 308.168C1437.49 311.048 1440.28 313.352 1443.92 315.08C1447.67 316.808 1452.28 317.672 1457.75 317.672Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M172.261 410.969C98.0948 384.564 45 313.735 45 230.505C45 224.019 45.3224 217.609 45.9522 211.288C63.9951 201.908 81.7329 190.752 90.3601 182.24C92.3653 180.562 93.8555 179.302 95.0239 178.315C97.0495 176.604 98.1077 175.71 99.2049 174.866C100.405 173.944 101.652 173.082 104.262 171.278C105.417 170.48 106.838 169.498 108.64 168.244C109.033 167.971 108.753 166.714 108.323 164.788C107.793 162.41 107.036 159.011 107.036 155.186C107.007 153.709 108.233 150.551 109.41 147.519L109.41 147.519C110.417 144.927 111.388 142.426 111.509 141.146C111.866 137.36 113.198 134.677 114.43 134.349C115.662 134.021 123.376 134.349 131.501 138.225C137.635 141.151 141.876 147.869 144.433 151.918C145.703 153.93 146.557 155.283 147.021 155.186C147.642 155.055 148.13 154.938 148.576 154.831C149.473 154.616 150.2 154.442 151.496 154.277C151.946 154.22 152.395 152.655 151.09 148.846C150.42 146.89 151.113 145.124 151.98 142.913C152.346 141.98 152.743 140.967 153.081 139.828C153.322 139.017 153.442 138.239 153.551 137.533C153.788 135.992 153.972 134.793 155.252 134.349C156.668 133.857 166.181 134.349 171.973 138.914C176.153 142.209 177.985 147.071 179.175 150.23L179.175 150.23L179.175 150.23C179.634 151.447 179.997 152.411 180.363 152.936C181.97 152.906 186.769 152.92 190.183 152.929H190.183H190.184H190.184C191.467 152.933 192.555 152.936 193.203 152.936C233.719 152.936 296.799 156.524 335.719 182.24C366.02 202.261 365.12 214.887 363.523 237.292L363.523 237.293C363.295 240.482 363.054 243.869 362.886 247.503C362.262 261.053 360.981 276.248 358.05 285.032C355.959 291.298 352.672 292.709 349.394 294.116C347.294 295.018 345.198 295.917 343.423 298.092C341.54 300.399 341.378 303.233 341.228 305.861C341.05 308.982 340.889 311.812 337.879 313.12C313.588 323.675 272.295 329.323 243.718 333.231L243.718 333.231C229.967 335.111 219.162 336.589 214.611 338.017C209.987 339.469 207.445 345.894 203.5 355.87C198.268 369.099 190.567 388.573 172.261 410.969ZM351.659 220.933C351.555 228.392 347.679 230.452 342.935 230.385C338.191 230.319 334.375 228.152 334.48 220.693C334.584 213.233 338.515 207.24 343.259 207.307C348.003 207.373 351.764 213.474 351.659 220.933ZM197.468 204.095C203.963 203.771 208.794 203.53 209.151 198.317C209.692 190.407 201.265 185.5 188.113 186.187C174.96 186.875 162.913 197.366 166.133 204.304C168.722 209.881 176.247 207.954 183.344 206.138C184.394 205.869 185.434 205.603 186.448 205.363C190.307 204.452 194.11 204.263 197.468 204.095Z" fill="currentColor"></path><circle cx="236.506" cy="230.506" r="181.506" stroke="currentColor" stroke-width="20"></circle></g><defs><clipPath id="clip0_104_6"><rect width="1600" height="461" fill="white"></rect></clipPath></defs></svg><p class="text-muted-foreground">Apibara is the fastest platform to build production-grade indexers that connect onchain data to web2 services.</p></div><div><div><p class="font-semibold text-lg mb-4">Resources</p><ul class="space-y-2"><li><a class="text-muted-foreground hover:text-white" href="/docs" data-discover="true">Documentation</a></li><li><a class="text-muted-foreground hover:text-white" href="/brand-kit" data-discover="true">Brand Kit</a></li><li><a class="text-muted-foreground hover:text-white" href="/devlog" data-discover="true">Devlog</a></li></ul></div></div></div></div></div><div class="container flex flex-col md:flex-row justify-between items-center border-t mt-8 pt-8 px-0 text-muted-foreground"><p>© <!-- -->2025<!-- --> GNC Labs Limited. All rights reserved.</p><div class="flex items-center space-x-2 justify-center"><a rel="noreferrer" href="https://status.apibara.com/" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border border-input bg-background hover:bg-accent h-10 px-4 py-2 hover:text-accent-foreground data-[status=operational]:bg-emerald-400/10 data-[status=operational]:hover:bg-emerald-400/20 data-[status=operational]:text-emerald-500 data-[status=degraded]:bg-amber-400/10 data-[status=degraded]:hover:bg-amber-400/20 data-[status=degraded]:text-amber-500 data-[status=outage]:bg-red-400/10 data-[status=outage]:hover:bg-red-400/20 data-[status=outage]:text-red-500" data-status="operational"><div class="mr-2 flex items-center justify-center"><span class="animate-ping absolute rounded-full w-3 h-3 [[data-status=operational]_&amp;]:bg-emerald-400 [[data-status=degraded]_&amp;]:bg-amber-400 [[data-status=outage]_&amp;]:bg-red-400"></span><span class="rounded-full w-3 h-3 [[data-status=operational]_&amp;]:bg-emerald-400 [[data-status=degraded]_&amp;]:bg-amber-400 [[data-status=outage]_&amp;]:bg-red-400"></span></div>All systems operational</button></a><a rel="noreferrer" href="https://github.com/apibara/dna" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></button></a><a rel="noreferrer" href="https://www.twitter.com/apibara_web3" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button></a><a rel="noreferrer" href="https://discord.gg/m7B92CNFNt" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path></svg></button></a></div></div></div><div class="fixed z-[200] bottom-0 left-0 right-0 p-4 sm:p-0 sm:left-4 sm:bottom-4 w-full sm:max-w-[300px] duration-700 transition-[opacity,transform] translate-y-8 opacity-0"><div class="m-0 sm:m-3 dark:bg-card bg-background border border-border rounded-lg shadow-lg"><div class="p-3 flex items-center justify-between border-b border-border"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cookie h-3 w-3 sm:h-4 sm:w-4"><path d="M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5"></path><path d="M8.5 8.5v.01"></path><path d="M16 15.5v.01"></path><path d="M12 12v.01"></path><path d="M11 17v.01"></path><path d="M7 14v.01"></path></svg><span class="text-xs sm:text-sm font-medium">Cookie Notice</span></div></div><div class="p-3"><p class="text-[11px] sm:text-xs text-muted-foreground">We use cookies to enhance your browsing experience.</p><div class="flex flex-col sm:flex-row items-center gap-2 mt-3"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md w-full h-6 sm:h-7 text-[11px] sm:text-xs px-2 sm:px-3">Accept</button><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md w-full h-6 sm:h-7 text-[11px] sm:text-xs px-2 sm:px-3">Decline</button></div></div></div></div><script>((storageKey2, restoreKey) => {
    if (!window.history.state || !window.history.state.key) {
      let key = Math.random().toString(32).slice(2);
      window.history.replaceState({ key }, "");
    }
    try {
      let positions = JSON.parse(sessionStorage.getItem(storageKey2) || "{}");
      let storedY = positions[restoreKey || window.history.state.key];
      if (typeof storedY === "number") {
        window.scrollTo(0, storedY);
      }
    } catch (error) {
      console.error(error);
      sessionStorage.removeItem(storageKey2);
    }
  })("react-router-scroll-positions", null)</script><script>window.__reactRouterContext = {"basename":"/","future":{"unstable_optimizeDeps":false,"unstable_splitRouteModules":false,"unstable_viteEnvironmentApi":false},"ssr":true,"isSpaMode":false};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());</script><script type="module" async="">;
import * as route0 from "/assets/root-ipolV0AO.js";
import * as route1 from "/assets/_marketing-CGxmZCn-.js";
import * as route2 from "/assets/_marketing._docs-TRmate3G.js";
import * as route3 from "/assets/_marketing._docs.docs._-BiDJ9VmJ.js";
  window.__reactRouterManifest = {
  "entry": {
    "module": "/assets/entry.client-CwKnTHhE.js",
    "imports": [
      "/assets/button-B7cAtSR2.js",
      "/assets/utils-Dxu6Btum.js",
      "/assets/cookie-consent-clHrPgeC.js",
      "/assets/index-PuoCZrSn.js",
      "/assets/index-D1RvQa8Q.js",
      "/assets/createLucideIcon-O_0coRDA.js"
    ],
    "css": []
  },
  "routes": {
    "root": {
      "id": "root",
      "path": "",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": true,
      "module": "/assets/root-ipolV0AO.js",
      "imports": [
        "/assets/button-B7cAtSR2.js",
        "/assets/utils-Dxu6Btum.js",
        "/assets/cookie-consent-clHrPgeC.js",
        "/assets/index-PuoCZrSn.js",
        "/assets/index-D1RvQa8Q.js",
        "/assets/createLucideIcon-O_0coRDA.js",
        "/assets/constants-Dl4TjVTX.js",
        "/assets/useBaseQuery-BvxeFzjL.js",
        "/assets/index-CnbLAjcy.js",
        "/assets/logo-fuNHPPx1.js",
        "/assets/utils-UlyEuLxL.js",
        "/assets/meta-M0oKkN_M.js",
        "/assets/iconBase-CrV5vKX5.js"
      ],
      "css": [
        "/assets/root-DQw5JbnM.css"
      ]
    },
    "routes/_marketing": {
      "id": "routes/_marketing",
      "parentId": "root",
      "hasAction": false,
      "hasLoader": false,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/_marketing-CGxmZCn-.js",
      "imports": [
        "/assets/constants-Dl4TjVTX.js",
        "/assets/button-B7cAtSR2.js",
        "/assets/index-CnbLAjcy.js",
        "/assets/utils-UlyEuLxL.js",
        "/assets/devlog-wkYzDMBY.js",
        "/assets/logo-fuNHPPx1.js",
        "/assets/index-CJcc-0k1.js",
        "/assets/index-D0z94NDm.js",
        "/assets/createLucideIcon-O_0coRDA.js",
        "/assets/index-DfeBrNmd.js",
        "/assets/version-select-PcccTYUw.js",
        "/assets/iconBase-CrV5vKX5.js",
        "/assets/useBaseQuery-BvxeFzjL.js",
        "/assets/utils-Dxu6Btum.js",
        "/assets/index-D1RvQa8Q.js",
        "/assets/index-PuoCZrSn.js",
        "/assets/index-D-3o5vKG.js",
        "/assets/index-CKNh5fP9.js",
        "/assets/check-BIZc5W9p.js"
      ],
      "css": []
    },
    "routes/_marketing._docs": {
      "id": "routes/_marketing._docs",
      "parentId": "routes/_marketing",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/_marketing._docs-TRmate3G.js",
      "imports": [
        "/assets/constants-Dl4TjVTX.js",
        "/assets/button-B7cAtSR2.js",
        "/assets/index-D1RvQa8Q.js",
        "/assets/utils-UlyEuLxL.js",
        "/assets/version-select-PcccTYUw.js",
        "/assets/index-PuoCZrSn.js",
        "/assets/index-D-3o5vKG.js",
        "/assets/createLucideIcon-O_0coRDA.js",
        "/assets/index-D0z94NDm.js",
        "/assets/index-CJcc-0k1.js",
        "/assets/index-CKNh5fP9.js",
        "/assets/check-BIZc5W9p.js"
      ],
      "css": [
        "/assets/_marketing-CAX2t5ve.css"
      ]
    },
    "routes/_marketing._docs.docs.$": {
      "id": "routes/_marketing._docs.docs.$",
      "parentId": "routes/_marketing._docs",
      "path": "docs/*",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": true,
      "module": "/assets/_marketing._docs.docs._-BiDJ9VmJ.js",
      "imports": [
        "/assets/constants-Dl4TjVTX.js",
        "/assets/button-B7cAtSR2.js",
        "/assets/index-D-3o5vKG.js",
        "/assets/components-jah0Jotm.js",
        "/assets/index-CnbLAjcy.js",
        "/assets/meta-M0oKkN_M.js",
        "/assets/root-ipolV0AO.js",
        "/assets/index-PuoCZrSn.js",
        "/assets/check-BIZc5W9p.js",
        "/assets/createLucideIcon-O_0coRDA.js",
        "/assets/iconBase-CrV5vKX5.js",
        "/assets/useBaseQuery-BvxeFzjL.js",
        "/assets/cookie-consent-clHrPgeC.js",
        "/assets/utils-Dxu6Btum.js",
        "/assets/logo-fuNHPPx1.js",
        "/assets/utils-UlyEuLxL.js"
      ],
      "css": [
        "/assets/root-DQw5JbnM.css"
      ]
    },
    "routes/_marketing._index": {
      "id": "routes/_marketing._index",
      "parentId": "routes/_marketing",
      "index": true,
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/_marketing._index-Do53JMs3.js",
      "imports": [
        "/assets/constants-Dl4TjVTX.js",
        "/assets/button-B7cAtSR2.js",
        "/assets/components-jah0Jotm.js",
        "/assets/index-DfeBrNmd.js",
        "/assets/iconBase-CrV5vKX5.js",
        "/assets/index-PuoCZrSn.js",
        "/assets/check-BIZc5W9p.js",
        "/assets/createLucideIcon-O_0coRDA.js"
      ],
      "css": []
    }
  },
  "url": "/assets/manifest-9386f539.js",
  "version": "9386f539"
};
  window.__reactRouterRouteModules = {"root":route0,"routes/_marketing":route1,"routes/_marketing._docs":route2,"routes/_marketing._docs.docs.$":route3};

import("/assets/entry.client-CwKnTHhE.js");</script><!--$--><script>window.__reactRouterContext.streamController.enqueue("[{\"_1\":2,\"_154\":-5,\"_155\":-5},\"loaderData\",{\"_3\":4,\"_13\":14,\"_130\":131,\"_153\":-5},\"root\",{\"_5\":6,\"_7\":8},\"siteUrl\",\"https://www.apibara.com/docs/dna/architecture\",\"posthog\",{\"_9\":10,\"_11\":12},\"key\",\"phc_UZjZ1DOpyAQOegVmcW09tIO4XcIKvsd6qtHbCmXZw4F\",\"host\",\"https://us.i.posthog.com\",\"routes/_marketing._docs\",{\"_15\":16,\"_17\":18,\"_126\":127},\"version\",\"v2\",\"sidebar\",[19,51,74,112],{\"_20\":21,\"_22\":23,\"_24\":25},\"name\",\"Getting Started\",\"path\",\"/\",\"items\",[26,30,33,36,39,42,45,48],{\"_20\":27,\"_28\":29,\"_22\":23},\"Overview\",\"type\",\"page\",{\"_20\":31,\"_28\":29,\"_22\":32},\"Installation\",\"/getting-started/installation\",{\"_20\":34,\"_28\":29,\"_22\":35},\"Indexers\",\"/getting-started/indexers\",{\"_20\":37,\"_28\":29,\"_22\":38},\"Plugins \u0026 Hooks\",\"/getting-started/plugins\",{\"_20\":40,\"_28\":29,\"_22\":41},\"apibara.config.ts\",\"/getting-started/configuration\",{\"_20\":43,\"_28\":29,\"_22\":44},\"instrumentation.ts\",\"/getting-started/instrumentation\",{\"_20\":46,\"_28\":29,\"_22\":47},\"Top tips\",\"/getting-started/top-tips\",{\"_20\":49,\"_28\":29,\"_22\":50},\"Upgrading from v1\",\"/getting-started/upgrading\",{\"_20\":52,\"_22\":53,\"_24\":54},\"Storage\",\"/storage\",[55],{\"_20\":56,\"_28\":57,\"_22\":58,\"_59\":60},\"Drizzle\",\"group\",\"/drizzle-pg\",\"groupItems\",[61,62,65,68,71],{\"_20\":27,\"_28\":29,\"_22\":23},{\"_20\":63,\"_28\":29,\"_22\":64},\"Testing\",\"/testing\",{\"_20\":66,\"_28\":29,\"_22\":67},\"Internals\",\"/internals\",{\"_20\":69,\"_28\":29,\"_22\":70},\"API Ref\",\"/api-reference\",{\"_20\":72,\"_28\":29,\"_22\":73},\"FAQ\",\"/faq\",{\"_20\":75,\"_22\":76,\"_24\":77},\"Networks\",\"/networks\",[78,89,96],{\"_20\":79,\"_28\":57,\"_22\":80,\"_59\":81},\"Beacon Chain\",\"/beaconchain\",[82,83,86],{\"_20\":27,\"_28\":29,\"_22\":23},{\"_20\":84,\"_28\":29,\"_22\":85},\"Filter\",\"/filter\",{\"_20\":87,\"_28\":29,\"_22\":88},\"Block data\",\"/data\",{\"_20\":90,\"_28\":57,\"_22\":91,\"_59\":92},\"EVM\",\"/evm\",[93,94,95],{\"_20\":27,\"_28\":29,\"_22\":23},{\"_20\":84,\"_28\":29,\"_22\":85},{\"_20\":87,\"_28\":29,\"_22\":88},{\"_20\":97,\"_28\":57,\"_22\":98,\"_59\":99},\"Starknet\",\"/starknet\",[100,101,102,103,106,109],{\"_20\":27,\"_28\":29,\"_22\":23},{\"_20\":84,\"_28\":29,\"_22\":85},{\"_20\":87,\"_28\":29,\"_22\":88},{\"_20\":104,\"_28\":29,\"_22\":105},\"Event decoder\",\"/decoder\",{\"_20\":107,\"_28\":29,\"_22\":108},\"Helpers\",\"/helpers\",{\"_20\":110,\"_28\":29,\"_22\":111},\"Upgrading\",\"/upgrade-from-v1\",{\"_20\":113,\"_22\":114,\"_24\":115},\"DNA Protocol\",\"/dna\",[116,117,120,123],{\"_20\":27,\"_28\":29,\"_22\":23},{\"_20\":118,\"_28\":29,\"_22\":119},\"Architecture\",\"/architecture\",{\"_20\":121,\"_28\":29,\"_22\":122},\"Protocol\",\"/protocol\",{\"_20\":124,\"_28\":29,\"_22\":125},\"Add new chain\",\"/add-new-chain\",\"slug\",[128,129],\"dna\",\"architecture\",\"routes/_marketing._docs.docs.$\",{\"_29\":132,\"_5\":6,\"_151\":152},{\"_126\":133,\"_134\":135,\"_136\":137,\"_145\":146,\"_147\":148,\"_149\":150},\"dna/architecture\",\"componentCode\",\"var Component=(()=\u003e{var p=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),b=(a,e)=\u003e{for(var i in e)l(a,i,{get:e[i],enumerable:!0})},r=(a,e,i,c)=\u003e{if(e\u0026\u0026typeof e==\\\"object\\\"||typeof e==\\\"function\\\")for(let s of N(e))!g.call(a,s)\u0026\u0026s!==i\u0026\u0026l(a,s,{get:()=\u003ee[s],enumerable:!(c=m(e,s))||c.enumerable});return a};var v=(a,e,i)=\u003e(i=a!=null?p(u(a)):{},r(e||!a||!a.__esModule?l(i,\\\"default\\\",{value:a,enumerable:!0}):i,a)),y=a=\u003er(l({},\\\"__esModule\\\",{value:!0}),a);var h=f((S,d)=\u003e{d.exports=_jsx_runtime});var w={};b(w,{default:()=\u003eo,frontmatter:()=\u003ek});var n=v(h()),k={title:\\\"DNA v2 architecture\\\",description:\\\"Discover how DNA achieves best-in-class performance for indexing onchain data.\\\",diataxis:\\\"explanation\\\",updatedAt:\\\"2024-09-20\\\"};function t(a){let e={a:\\\"a\\\",code:\\\"code\\\",em:\\\"em\\\",h1:\\\"h1\\\",h2:\\\"h2\\\",h3:\\\"h3\\\",li:\\\"li\\\",p:\\\"p\\\",pre:\\\"pre\\\",span:\\\"span\\\",table:\\\"table\\\",tbody:\\\"tbody\\\",td:\\\"td\\\",th:\\\"th\\\",thead:\\\"thead\\\",tr:\\\"tr\\\",ul:\\\"ul\\\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{id:\\\"dna-v2-architecture\\\",children:\\\"DNA v2 architecture\\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\\"This page describes in detail the architecture of DNA v2.\\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\\"At a high-level, the goals for DNA v2 are:\\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:\\\"serve onchain data through a protocol that's optimized for building indexers.\\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\\"provide a scalable and cost-efficient way to access onchain data.\\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\\"decouple compute from storage.\\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\\"This is achieved by building a \\\",(0,n.jsx)(e.em,{children:\\\"cloud native\\\"}),` service that ingests onchain data\\nfrom an archive node and stores it into Object Storage (for example Amazon S3,\\nCloudflare R2). Data is served by stateless workers that read and filter data\\nfrom Object Storage before sending it to the indexers. The diagram below shows\\nall the high-level components that make a production deployment of DNA v2.\\nCommunication between components is done through etcd.`]}),`\\n`,(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"                 \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510                 \\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"                 \\\\u2502                Archive Node                 \\\\u2502\\\\u2591                \\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"                 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518\\\\u2591                \\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"                  \\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2502\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591                \\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"                                        \\\\u2502                                        \\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"                                        \\\\u2502                                        \\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2554\\\\u2550 DNA Cluster \\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u256C\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2557 \\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551                                     \\\\u2502                                      \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510                            \\\\u25BC                            \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502                                             \\\\u2502     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502\\\\u25C0\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2502              Ingestion Service              \\\\u2502\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u25B6\\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502                                             \\\\u2502     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502                                             \\\\u2502     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502\\\\u25C0\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2502             Compaction Service              \\\\u2502\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u25B6\\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502                                             \\\\u2502     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502  S3  \\\\u2502     \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510     \\\\u2502 etcd \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502                                             \\\\u2502     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502\\\\u25C0\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2502               Pruning Service               \\\\u2502\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u25B6\\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502                                             \\\\u2502     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510       \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502\\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2534\\\\u2510      \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502\\\\u2502\\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2534\\\\u2510     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502\\\\u2502\\\\u2502                                           \\\\u2502     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502\\\\u2502\\\\u2502                  Stream                   \\\\u2502     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502\\\\u25C0\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502\\\\u2502                                           \\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u25B6\\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2502      \\\\u2502     \\\\u2502\\\\u2502\\\\u2502                  Service                  \\\\u2502     \\\\u2502      \\\\u2502  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518     \\\\u2514\\\\u2524\\\\u2502                                           \\\\u2502     \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518  \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551               \\\\u2514\\\\u2524                                           \\\\u2502               \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551                \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518               \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2551                                                                            \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u255A\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u255D\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"   \\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\"})})]})})}),`\\n`,(0,n.jsx)(e.h2,{id:\\\"dna-service\\\",children:\\\"DNA service\\\"}),`\\n`,(0,n.jsx)(e.p,{children:\\\"The DNA service is comprised of several components:\\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:`ingestion service: listens for new blocks on the network and stores them into\\nObject Storage.`}),`\\n`,(0,n.jsxs)(e.li,{children:[\\\"compaction service: combines multiple blocks together into \\\",(0,n.jsx)(e.em,{children:\\\"segments\\\"}),`.\\nSegments are grouped by data type (like logs, transactions, and receipts).`]}),`\\n`,(0,n.jsx)(e.li,{children:\\\"pruner service: removes blocks that have been compacted to reduce storage cost.\\\"}),`\\n`,(0,n.jsx)(e.li,{children:`stream service: receives streaming requests from clients (indexers) and serves\\nonchain data by filtering objects stored on S3.`}),`\\n`]}),`\\n`,(0,n.jsx)(e.h3,{id:\\\"ingestion-service\\\",children:\\\"Ingestion service\\\"}),`\\n`,(0,n.jsx)(e.p,{children:`The ingestion service fetches blocks from the network and stores them into\\nObject Storage. This service is the only chain-specific service in DNA, all\\nother components work on generic data-structures.`}),`\\n`,(0,n.jsx)(e.p,{children:`Serving onchain data requires serving a high-volume of data filtered by a\\nrelatively small number of columns. When designing DNA, we took a few decisions\\nto make this process as efficient as possible:`}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:`data is stored as pre-serialized protobuf messages to avoid wasting CPU\\ncycles serializing the same data over and over again.`}),`\\n`,(0,n.jsx)(e.li,{children:\\\"filtering is entirely done using indices to reduce reads.\\\"}),`\\n`,(0,n.jsx)(e.li,{children:\\\"joins (for example include logs' transactions) are also achieved with indices.\\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[`The ingestion service is responsible for creating this data and indices.\\nData is grouped into `,(0,n.jsx)(e.em,{children:\\\"blocks\\\"}),\\\". Blocks are comprised of \\\",(0,n.jsx)(e.em,{children:\\\"fragments\\\"}),`, that\\nis groups of related data. All fragments have an unique numerical id used\\nto identify them. There are four different types of fragments:`]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsxs)(e.li,{children:[\\\"index: a collection of indices, the fragment id is \\\",(0,n.jsx)(e.code,{children:\\\"0\\\"}),`.\\nIndices are grouped by the fragment they index.`]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\\"join: a collection of join indices, the fragment id is \\\",(0,n.jsx)(e.code,{children:\\\"254\\\"}),`.\\nJoin indices are also grouped by the source fragment index.`]}),`\\n`,(0,n.jsxs)(e.li,{children:[\\\"header: the block header, the fragment id is \\\",(0,n.jsx)(e.code,{children:\\\"1\\\"}),`. Header are stored as\\npre-serialized protobuf messages.`]}),`\\n`,(0,n.jsx)(e.li,{children:\\\"body: the chain-specific block data, grouped by fragment id.\\\"}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\\"Note that we call block number + hash a \\\",(0,n.jsx)(e.em,{children:\\\"cursor\\\"}),` since it uniquely identifies a\\nblock in the chain.`]}),`\\n`,(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2554\\\\u2550 Block \\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2557 \\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u250C\\\\u2500 Index \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u250C\\\\u2500 Fragment 0 \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502                          Index 0                           \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502                          Index 1                           \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502                                                              \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502                          Index N                           \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u250C\\\\u2500 Join \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u250C\\\\u2500 Fragment 0 \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502                         Fragment 1                         \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502                         Fragment 2                         \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u250C\\\\u2500 Body \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502                                                              \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502                           Fragment 0                         \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502                                                              \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502                                                              \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502                           Fragment 1                         \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502                                                              \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u255A\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u255D\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\"})})]})})}),`\\n`,(0,n.jsx)(e.p,{children:`On supported networks, the ingestion service is also responsible for\\nperiodically refreshing the mempool (pending) block data and uploading it into\\nObject Storage. This works exactly as for all other blocks.`}),`\\n`,(0,n.jsx)(e.p,{children:`The ingestion service tracks the canonical chain and uploads it to Object Storage.\\nThis data is used by the stream service to track online and offline chain\\nreorganizations.`}),`\\n`,(0,n.jsx)(e.p,{children:`The ingestion service stores its data on etcd. Stream services subscribe to\\netcd updates to receive notifications about new blocks ingested and other\\nchanges to the chain (for example changes to the finalized block).`}),`\\n`,(0,n.jsxs)(e.p,{children:[\\\"Finally, the ingestion service is \\\",(0,n.jsx)(e.em,{children:\\\"fault tolerant\\\"}),`. When the ingestion service\\nstarts, it acquires a distributed lock from etcd to ensure only one instance is\\nrunning at the same time. If running multiple deployments of DNA, all other\\ninstances will wait for the lock to be released (following a service restart or\\ncrash) and will try to take over the ingestion.`]}),`\\n`,(0,n.jsx)(e.h3,{id:\\\"compaction-service\\\",children:\\\"Compaction service\\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[`The compaction service groups together data from several blocks (usually 100 or\\n1000) into `,(0,n.jsx)(e.em,{children:\\\"segments\\\"}),`. Segments only contain data for one fragment type (for example\\nheaders, indices, and transactions).\\nIn other words, the compaction service groups `,(0,n.jsx)(e.code,{children:\\\"N\\\"}),\\\" blocks into \\\",(0,n.jsx)(e.code,{children:\\\"M\\\"}),\\\" segments.\\\"]}),`\\n`,(0,n.jsx)(e.p,{children:\\\"Only data that has been finalized is compacted into segments.\\\"}),`\\n`,(0,n.jsxs)(e.p,{children:[\\\"The compaction service also creates block-level indices called \\\",(0,n.jsx)(e.em,{children:\\\"groups\\\"}),`. Groups\\ncombine indices from multiple blocks/segments to quickly look up which blocks\\ncontain specific data. This type of index is very useful to increase performance\\non sparse datasets.`]}),`\\n`,(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2554\\\\u2550 Index Segment \\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2557         \\\\u2554\\\\u2550 Transaction Segment \\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2557 \\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u250C\\\\u2500 Block \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2551\\\\u2591        \\\\u2551 \\\\u250C\\\\u2500 Block \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u250C\\\\u2500 Fragment 0 \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502           Index 0           \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502           Fragment 2          \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502           Index 1           \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502           Index N           \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u250C\\\\u2500 Block \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u250C\\\\u2500 Block \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502           Fragment 2          \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u250C\\\\u2500 Fragment 0 \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502           Index 0           \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502           Index 1           \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u250C\\\\u2500 Block \\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u250C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2510 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u251C\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2524\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502           Fragment 2          \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2502           Index N           \\\\u2502\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2502\\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518\\\\u2502 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2502                               \\\\u2502 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2502 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2502 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2502 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2502 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u2551 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2551\\\\u2591        \\\\u2551 \\\\u2514\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2500\\\\u2518 \\\\u2551\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\" \\\\u255A\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u255D\\\\u2591        \\\\u255A\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u2550\\\\u255D\\\\u2591\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"  \\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591         \\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\\u2591\\\"})})]})})}),`\\n`,(0,n.jsx)(e.h3,{id:\\\"pruner-service\\\",children:\\\"Pruner service\\\"}),`\\n`,(0,n.jsx)(e.p,{children:`The pruner service cleans up block data that has been included in segments.\\nThis is done to reduce the storage used by DNA.`}),`\\n`,(0,n.jsx)(e.h3,{id:\\\"object-hierarchy\\\",children:\\\"Object hierarchy\\\"}),`\\n`,(0,n.jsx)(e.p,{children:`We now have all elements to understand the objects uploaded to Object Storage by the\\ningestion service.\\nIf you run DNA pointing it to your bucket, you can eventually see a folder structure\\nthat looks like the following.`}),`\\n`,(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"my-chain\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u251C\\\\u2500\\\\u2500 blocks\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 000020908017\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u2502\\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 0xc137607affd53bd9e857af372429762f77eaff0fe32f0e49224e9fc0e439118d\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u2502   \\\\u251C\\\\u2500\\\\u2500 pending-0\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u2502   \\\\u251C\\\\u2500\\\\u2500 pending-1\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u2502   \\\\u2514\\\\u2500\\\\u2500 pending-2\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 000020908018\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u2502\\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 ... same as above\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 000020908019\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0  \\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 ... same as above\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u251C\\\\u2500\\\\u2500 chain\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 recent\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 z-000020906000\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 z-000020907000\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 z-000020908000\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u251C\\\\u2500\\\\u2500 groups\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 000020905000\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2502\\\\xA0\\\\xA0     \\\\u2514\\\\u2500\\\\u2500 index\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"\\\\u2514\\\\u2500\\\\u2500 segments\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"    \\\\u251C\\\\u2500\\\\u2500 000020906000\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"    \\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 header\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"    \\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 index\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"    \\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 join\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"    \\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 log\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"    \\\\u2502\\\\xA0\\\\xA0 \\\\u251C\\\\u2500\\\\u2500 receipt\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"    \\\\u2502\\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 transaction\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"    \\\\u251C\\\\u2500\\\\u2500 000020907000\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"    \\\\u2502\\\\xA0\\\\xA0 \\\\u2514\\\\u2500\\\\u2500 ... same as above\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"    \\\\u2514\\\\u2500\\\\u2500 000020908000\\\"})}),`\\n`,(0,n.jsx)(e.span,{className:\\\"line\\\",children:(0,n.jsx)(e.span,{children:\\\"        \\\\u2514\\\\u2500\\\\u2500 ... same as above\\\"})})]})})}),`\\n`,(0,n.jsx)(e.h3,{id:\\\"stream-service\\\",children:\\\"Stream service\\\"}),`\\n`,(0,n.jsx)(e.p,{children:`The stream service is responsible for serving data to clients. The raw onchain\\ndata stored in Object Storage is filtered by the stream service before being\\nsent over the network, this results in lower egress fees compared to solutions\\nthat filter data on the client.`}),`\\n`,(0,n.jsxs)(e.p,{children:[`Upon receiving a stream request, the service validates and compiles the request\\ninto a `,(0,n.jsx)(e.em,{children:\\\"query\\\"}),`. A query is simply a list of index lookup requests that are\\napplied to each block.`]}),`\\n`,(0,n.jsx)(e.p,{children:\\\"The stream service loops then keeps repeating the following steps:\\\"}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:`check if it should send a new block of data or inform the client of a chain\\nreorganization.`}),`\\n`,(0,n.jsx)(e.li,{children:`load the indices from the segment or the block and use them to compute what\\ndata to send the client.`}),`\\n`,(0,n.jsx)(e.li,{children:\\\"load the pre-serialized protobuf messages and copy them to the output stream.\\\"}),`\\n`]}),`\\n`,(0,n.jsx)(e.p,{children:`One critical aspect of the stream service is how it loads blocks and segments.\\nReading from Object Storage has virtually unlimited throughput, but also high\\nlatency. The service is also very likely to access data closer to the chain's\\ntip more frequently, and we should cache Object Storage requests to avoid\\nunnecessarily increase our cloud spending.`}),`\\n`,(0,n.jsxs)(e.p,{children:[`We achieve all of this (and more!) by using an hybrid cache that stores\\nfrequently accessed data in memory and `,(0,n.jsx)(e.em,{children:\\\"on disk\\\"}),`. This may come as a surprise\\nsince isn't the point of DNA to avoid expensive disks and rely on cheap Object\\nStorage? The reasons this design still makes sense are multiple:`]}),`\\n`,(0,n.jsxs)(e.ul,{children:[`\\n`,(0,n.jsx)(e.li,{children:`we can use cheaper and higher performance temporary NVMe disks attached\\ndirectly to our server.`}),`\\n`,(0,n.jsx)(e.li,{children:`we can quickly scale horizontally the stream service without re-indexing all\\ndata.`}),`\\n`,(0,n.jsx)(e.li,{children:`we can use disks that are much smaller than the full chain's data. The cache\\ndynamically stores the most frequently accessed data. Unused or rarely used\\ndata lives on Object Storage.`}),`\\n`]}),`\\n`,(0,n.jsxs)(e.p,{children:[\\\"The following table, inspired \\\",(0,n.jsx)(e.a,{href:\\\"https://www.vantage.sh/blog/ebs-vs-nvme-pricing-performance\\\",children:`by the table in this article by\\nVantage`}),`, shows the\\ndifference in performance and price between an AWS EC2 instance using\\n(temporary) NVMe disks and two using EBS (one with a general purpose `,(0,n.jsx)(e.code,{children:\\\"gp3\\\"}),`\\nvolume, and one with higher performance `,(0,n.jsx)(e.code,{children:\\\"io1\\\"}),` volume). All prices as of April\\n2024, US East, 1 year reserved with no upfront payment.`]}),`\\n`,(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:\\\"Metric\\\"}),(0,n.jsx)(e.th,{children:\\\"EBS (gp3)\\\"}),(0,n.jsx)(e.th,{children:\\\"EBS (io1)\\\"}),(0,n.jsx)(e.th,{children:\\\"NVMe\\\"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\\\"Instance Type\\\"}),(0,n.jsx)(e.td,{children:\\\"r6i.8xlarge\\\"}),(0,n.jsx)(e.td,{children:\\\"r6i.8xlarge\\\"}),(0,n.jsx)(e.td,{children:\\\"i4i.8xlarge\\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\\\"vCPU\\\"}),(0,n.jsx)(e.td,{children:\\\"32\\\"}),(0,n.jsx)(e.td,{children:\\\"32\\\"}),(0,n.jsx)(e.td,{children:\\\"32\\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\\\"Memory (GiB)\\\"}),(0,n.jsx)(e.td,{children:\\\"256\\\"}),(0,n.jsx)(e.td,{children:\\\"256\\\"}),(0,n.jsx)(e.td,{children:\\\"245\\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\\\"Network (Gibps)\\\"}),(0,n.jsx)(e.td,{children:\\\"12.50\\\"}),(0,n.jsx)(e.td,{children:\\\"12.50\\\"}),(0,n.jsx)(e.td,{children:\\\"18.75\\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\\\"Storage (GiB)\\\"}),(0,n.jsx)(e.td,{children:\\\"7500\\\"}),(0,n.jsx)(e.td,{children:\\\"7500\\\"}),(0,n.jsx)(e.td,{children:\\\"2x3750\\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\\\"IOPS (read/write)\\\"}),(0,n.jsx)(e.td,{children:\\\"16,000\\\"}),(0,n.jsx)(e.td,{children:\\\"40,000\\\"}),(0,n.jsx)(e.td,{children:\\\"800,000 / 440,000\\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\\\"Cost - Compute ($/mo)\\\"}),(0,n.jsx)(e.td,{children:\\\"973\\\"}),(0,n.jsx)(e.td,{children:\\\"973\\\"}),(0,n.jsx)(e.td,{children:\\\"1,300\\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\\\"Cost - Storage ($/mo)\\\"}),(0,n.jsx)(e.td,{children:\\\"665\\\"}),(0,n.jsx)(e.td,{children:\\\"3,537\\\"}),(0,n.jsx)(e.td,{children:\\\"0\\\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\\\"Cost - Total ($/mo)\\\"}),(0,n.jsx)(e.td,{children:\\\"1,638\\\"}),(0,n.jsx)(e.td,{children:\\\"4,510\\\"}),(0,n.jsx)(e.td,{children:\\\"1,300\\\"})]})]})]}),`\\n`,(0,n.jsx)(e.p,{children:`Notice how the NVMe instance has 30-50x the IOPS per dollar. This price\\ndifference means that Apibara users benefit from lower costs and/or higher\\nperformance.`})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(t,{...a})}):t(a)}return y(w);})();\\n;return Component;\",\"frontmatter\",{\"_138\":139,\"_140\":139,\"_141\":142,\"_143\":144},\"title\",\"DNA v2 architecture\",\"titleShort\",\"description\",\"Discover how DNA achieves best-in-class performance for indexing onchain data.\",\"updatedAt\",[\"D\",1726790400000],\"githubUrl\",\"https://github.com/apibara/documentation/blob/main/docs/v2/dna/architecture/index.mdx\",\"assetPath\",\"https://docs-r2.apibara.com/docs/v2/dna/architecture/\",\"content\",\"---\\ntitle: DNA v2 architecture\\ndescription: \\\"Discover how DNA achieves best-in-class performance for indexing onchain data.\\\"\\ndiataxis: explanation\\nupdatedAt: 2024-09-20\\n---\\n\\n# DNA v2 architecture\\n\\nThis page describes in detail the architecture of DNA v2.\\n\\nAt a high-level, the goals for DNA v2 are:\\n\\n- serve onchain data through a protocol that's optimized for building indexers.\\n- provide a scalable and cost-efficient way to access onchain data.\\n- decouple compute from storage.\\n\\nThis is achieved by building a _cloud native_ service that ingests onchain data\\nfrom an archive node and stores it into Object Storage (for example Amazon S3,\\nCloudflare R2). Data is served by stateless workers that read and filter data\\nfrom Object Storage before sending it to the indexers. The diagram below shows\\nall the high-level components that make a production deployment of DNA v2.\\nCommunication between components is done through etcd.\\n\\n```txt\\n                 ┌─────────────────────────────────────────────┐                 \\n                 │                Archive Node                 │░                \\n                 └─────────────────────────────────────────────┘░                \\n                  ░░░░░░░░░░░░░░░░░░░░░░│░░░░░░░░░░░░░░░░░░░░░░░░                \\n                                        │                                        \\n                                        │                                        \\n  ╔═ DNA Cluster ═══════════════════════╬══════════════════════════════════════╗ \\n  ║                                     │                                      ║░\\n  ║ ┌──────┐                            ▼                            ┌──────┐  ║░\\n  ║ │      │     ┌─────────────────────────────────────────────┐     │      │  ║░\\n  ║ │      │     │                                             │     │      │  ║░\\n  ║ │      │◀────│              Ingestion Service              │────▶│      │  ║░\\n  ║ │      │     │                                             │     │      │  ║░\\n  ║ │      │     └─────────────────────────────────────────────┘     │      │  ║░\\n  ║ │      │     ┌─────────────────────────────────────────────┐     │      │  ║░\\n  ║ │      │     │                                             │     │      │  ║░\\n  ║ │      │◀────│             Compaction Service              │────▶│      │  ║░\\n  ║ │      │     │                                             │     │      │  ║░\\n  ║ │      │     └─────────────────────────────────────────────┘     │      │  ║░\\n  ║ │  S3  │     ┌─────────────────────────────────────────────┐     │ etcd │  ║░\\n  ║ │      │     │                                             │     │      │  ║░\\n  ║ │      │◀────│               Pruning Service               │────▶│      │  ║░\\n  ║ │      │     │                                             │     │      │  ║░\\n  ║ │      │     └─────────────────────────────────────────────┘     │      │  ║░\\n  ║ │      │     ┌───────────────────────────────────────────┐       │      │  ║░\\n  ║ │      │     │┌──────────────────────────────────────────┴┐      │      │  ║░\\n  ║ │      │     ││┌──────────────────────────────────────────┴┐     │      │  ║░\\n  ║ │      │     │││                                           │     │      │  ║░\\n  ║ │      │     │││                  Stream                   │     │      │  ║░\\n  ║ │      │◀────┤││                                           ├────▶│      │  ║░\\n  ║ │      │     │││                  Service                  │     │      │  ║░\\n  ║ └──────┘     └┤│                                           │     └──────┘  ║░\\n  ║               └┤                                           │               ║░\\n  ║                └───────────────────────────────────────────┘               ║░\\n  ║                                                                            ║░\\n  ╚════════════════════════════════════════════════════════════════════════════╝░\\n   ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\\n```\\n\\n## DNA service\\n\\nThe DNA service is comprised of several components:\\n\\n- ingestion service: listens for new blocks on the network and stores them into\\n  Object Storage.\\n- compaction service: combines multiple blocks together into _segments_.\\n  Segments are grouped by data type (like logs, transactions, and receipts).\\n- pruner service: removes blocks that have been compacted to reduce storage cost.\\n- stream service: receives streaming requests from clients (indexers) and serves\\n  onchain data by filtering objects stored on S3.\\n\\n### Ingestion service\\n\\nThe ingestion service fetches blocks from the network and stores them into\\nObject Storage. This service is the only chain-specific service in DNA, all\\nother components work on generic data-structures.\\n\\nServing onchain data requires serving a high-volume of data filtered by a\\nrelatively small number of columns. When designing DNA, we took a few decisions\\nto make this process as efficient as possible:\\n\\n- data is stored as pre-serialized protobuf messages to avoid wasting CPU\\n  cycles serializing the same data over and over again.\\n- filtering is entirely done using indices to reduce reads.\\n- joins (for example include logs' transactions) are also achieved with indices.\\n\\nThe ingestion service is responsible for creating this data and indices.\\nData is grouped into _blocks_. Blocks are comprised of _fragments_, that\\nis groups of related data. All fragments have an unique numerical id used\\nto identify them. There are four different types of fragments:\\n\\n- index: a collection of indices, the fragment id is `0`.\\n  Indices are grouped by the fragment they index.\\n- join: a collection of join indices, the fragment id is `254`.\\n  Join indices are also grouped by the source fragment index.\\n- header: the block header, the fragment id is `1`. Header are stored as\\n  pre-serialized protobuf messages.\\n- body: the chain-specific block data, grouped by fragment id.\\n\\nNote that we call block number + hash a _cursor_ since it uniquely identifies a\\nblock in the chain.\\n\\n```txt\\n ╔═ Block ══════════════════════════════════════════════════════════════╗ \\n ║ ┌─ Index ──────────────────────────────────────────────────────────┐ ║░\\n ║ │ ┌─ Fragment 0 ─────────────────────────────────────────────────┐ │ ║░\\n ║ │ │┌────────────────────────────────────────────────────────────┐│ │ ║░\\n ║ │ ││                          Index 0                           ││ │ ║░\\n ║ │ │├────────────────────────────────────────────────────────────┤│ │ ║░\\n ║ │ ││                          Index 1                           ││ │ ║░\\n ║ │ │├────────────────────────────────────────────────────────────┤│ │ ║░\\n ║ │ │                                                              │ │ ║░\\n ║ │ │├────────────────────────────────────────────────────────────┤│ │ ║░\\n ║ │ ││                          Index N                           ││ │ ║░\\n ║ │ │└────────────────────────────────────────────────────────────┘│ │ ║░\\n ║ │ └──────────────────────────────────────────────────────────────┘ │ ║░\\n ║ └──────────────────────────────────────────────────────────────────┘ ║░\\n ║ ┌─ Join ───────────────────────────────────────────────────────────┐ ║░\\n ║ │ ┌─ Fragment 0 ─────────────────────────────────────────────────┐ │ ║░\\n ║ │ │┌────────────────────────────────────────────────────────────┐│ │ ║░\\n ║ │ ││                         Fragment 1                         ││ │ ║░\\n ║ │ │├────────────────────────────────────────────────────────────┤│ │ ║░\\n ║ │ ││                         Fragment 2                         ││ │ ║░\\n ║ │ │└────────────────────────────────────────────────────────────┘│ │ ║░\\n ║ │ └──────────────────────────────────────────────────────────────┘ │ ║░\\n ║ └──────────────────────────────────────────────────────────────────┘ ║░\\n ║ ┌─ Body ───────────────────────────────────────────────────────────┐ ║░\\n ║ │ ┌──────────────────────────────────────────────────────────────┐ │ ║░\\n ║ │ │                                                              │ │ ║░\\n ║ │ │                           Fragment 0                         │ │ ║░\\n ║ │ │                                                              │ │ ║░\\n ║ │ └──────────────────────────────────────────────────────────────┘ │ ║░\\n ║ │ ┌──────────────────────────────────────────────────────────────┐ │ ║░\\n ║ │ │                                                              │ │ ║░\\n ║ │ │                           Fragment 1                         │ │ ║░\\n ║ │ │                                                              │ │ ║░\\n ║ │ └──────────────────────────────────────────────────────────────┘ │ ║░\\n ║ └──────────────────────────────────────────────────────────────────┘ ║░\\n ╚══════════════════════════════════════════════════════════════════════╝░\\n ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\\n```\\n\\nOn supported networks, the ingestion service is also responsible for\\nperiodically refreshing the mempool (pending) block data and uploading it into\\nObject Storage. This works exactly as for all other blocks.\\n\\nThe ingestion service tracks the canonical chain and uploads it to Object Storage.\\nThis data is used by the stream service to track online and offline chain\\nreorganizations.\\n\\nThe ingestion service stores its data on etcd. Stream services subscribe to\\netcd updates to receive notifications about new blocks ingested and other\\nchanges to the chain (for example changes to the finalized block).\\n\\nFinally, the ingestion service is _fault tolerant_. When the ingestion service\\nstarts, it acquires a distributed lock from etcd to ensure only one instance is\\nrunning at the same time. If running multiple deployments of DNA, all other\\ninstances will wait for the lock to be released (following a service restart or\\ncrash) and will try to take over the ingestion.\\n\\n### Compaction service\\n\\nThe compaction service groups together data from several blocks (usually 100 or\\n1000) into _segments_. Segments only contain data for one fragment type (for example \\nheaders, indices, and transactions).\\nIn other words, the compaction service groups `N` blocks into `M` segments.\\n\\nOnly data that has been finalized is compacted into segments.\\n\\nThe compaction service also creates block-level indices called _groups_. Groups\\ncombine indices from multiple blocks/segments to quickly look up which blocks\\ncontain specific data. This type of index is very useful to increase performance\\non sparse datasets.\\n\\n```txt\\n ╔═ Index Segment ═══════════════════════╗         ╔═ Transaction Segment ═════════════════╗ \\n ║ ┌─ Block ───────────────────────────┐ ║░        ║ ┌─ Block ───────────────────────────┐ ║░\\n ║ │ ┌─ Fragment 0 ──────────────────┐ │ ║░        ║ │ ┌───────────────────────────────┐ │ ║░\\n ║ │ │┌─────────────────────────────┐│ │ ║░        ║ │ │                               │ │ ║░\\n ║ │ ││           Index 0           ││ │ ║░        ║ │ │                               │ │ ║░\\n ║ │ │├─────────────────────────────┤│ │ ║░        ║ │ │           Fragment 2          │ │ ║░\\n ║ │ ││           Index 1           ││ │ ║░        ║ │ │                               │ │ ║░\\n ║ │ │├─────────────────────────────┤│ │ ║░        ║ │ │                               │ │ ║░\\n ║ │ │                               │ │ ║░        ║ │ └───────────────────────────────┘ │ ║░\\n ║ │ │├─────────────────────────────┤│ │ ║░        ║ └───────────────────────────────────┘ ║░\\n ║ │ ││           Index N           ││ │ ║░        ║ ┌─ Block ───────────────────────────┐ ║░\\n ║ │ │└─────────────────────────────┘│ │ ║░        ║ │ ┌───────────────────────────────┐ │ ║░\\n ║ │ └───────────────────────────────┘ │ ║░        ║ │ │                               │ │ ║░\\n ║ └───────────────────────────────────┘ ║░        ║ │ │                               │ │ ║░\\n ║ ┌─ Block ───────────────────────────┐ ║░        ║ │ │           Fragment 2          │ │ ║░\\n ║ │ ┌─ Fragment 0 ──────────────────┐ │ ║░        ║ │ │                               │ │ ║░\\n ║ │ │┌─────────────────────────────┐│ │ ║░        ║ │ │                               │ │ ║░\\n ║ │ ││           Index 0           ││ │ ║░        ║ │ └───────────────────────────────┘ │ ║░\\n ║ │ │├─────────────────────────────┤│ │ ║░        ║ └───────────────────────────────────┘ ║░\\n ║ │ ││           Index 1           ││ │ ║░        ║ ┌─ Block ───────────────────────────┐ ║░\\n ║ │ │├─────────────────────────────┤│ │ ║░        ║ │ ┌───────────────────────────────┐ │ ║░\\n ║ │ │                               │ │ ║░        ║ │ │                               │ │ ║░\\n ║ │ │├─────────────────────────────┤│ │ ║░        ║ │ │           Fragment 2          │ │ ║░\\n ║ │ ││           Index N           ││ │ ║░        ║ │ │                               │ │ ║░\\n ║ │ │└─────────────────────────────┘│ │ ║░        ║ │ │                               │ │ ║░\\n ║ │ └───────────────────────────────┘ │ ║░        ║ │ └───────────────────────────────┘ │ ║░\\n ║ └───────────────────────────────────┘ ║░        ║ └───────────────────────────────────┘ ║░\\n ╚═══════════════════════════════════════╝░        ╚═══════════════════════════════════════╝░\\n  ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░         ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\\n```\\n\\n### Pruner service\\n\\nThe pruner service cleans up block data that has been included in segments.\\nThis is done to reduce the storage used by DNA.\\n\\n### Object hierarchy\\n\\nWe now have all elements to understand the objects uploaded to Object Storage by the\\ningestion service.\\nIf you run DNA pointing it to your bucket, you can eventually see a folder structure\\nthat looks like the following.\\n\\n```txt\\nmy-chain\\n├── blocks\\n│   ├── 000020908017\\n│   │   └── 0xc137607affd53bd9e857af372429762f77eaff0fe32f0e49224e9fc0e439118d\\n│   │   ├── pending-0\\n│   │   ├── pending-1\\n│   │   └── pending-2\\n│   ├── 000020908018\\n│   │   └── ... same as above\\n│   └── 000020908019\\n│       └── ... same as above\\n├── chain\\n│   ├── recent\\n│   ├── z-000020906000\\n│   ├── z-000020907000\\n│   └── z-000020908000\\n├── groups\\n│   └── 000020905000\\n│       └── index\\n└── segments\\n    ├── 000020906000\\n    │   ├── header\\n    │   ├── index\\n    │   ├── join\\n    │   ├── log\\n    │   ├── receipt\\n    │   └── transaction\\n    ├── 000020907000\\n    │   └── ... same as above\\n    └── 000020908000\\n        └── ... same as above\\n```\\n\\n### Stream service\\n\\nThe stream service is responsible for serving data to clients. The raw onchain\\ndata stored in Object Storage is filtered by the stream service before being\\nsent over the network, this results in lower egress fees compared to solutions\\nthat filter data on the client.\\n\\nUpon receiving a stream request, the service validates and compiles the request\\ninto a _query_. A query is simply a list of index lookup requests that are\\napplied to each block.\\n\\nThe stream service loops then keeps repeating the following steps:\\n\\n- check if it should send a new block of data or inform the client of a chain\\n  reorganization.\\n- load the indices from the segment or the block and use them to compute what\\n  data to send the client.\\n- load the pre-serialized protobuf messages and copy them to the output stream.\\n\\nOne critical aspect of the stream service is how it loads blocks and segments.\\nReading from Object Storage has virtually unlimited throughput, but also high\\nlatency. The service is also very likely to access data closer to the chain's\\ntip more frequently, and we should cache Object Storage requests to avoid\\nunnecessarily increase our cloud spending.\\n\\nWe achieve all of this (and more!) by using an hybrid cache that stores\\nfrequently accessed data in memory and _on disk_. This may come as a surprise\\nsince isn't the point of DNA to avoid expensive disks and rely on cheap Object\\nStorage? The reasons this design still makes sense are multiple:\\n\\n- we can use cheaper and higher performance temporary NVMe disks attached\\n  directly to our server.\\n- we can quickly scale horizontally the stream service without re-indexing all\\n  data.\\n- we can use disks that are much smaller than the full chain's data. The cache\\n  dynamically stores the most frequently accessed data. Unused or rarely used\\n  data lives on Object Storage.\\n\\nThe following table, inspired [by the table in this article by\\nVantage](https://www.vantage.sh/blog/ebs-vs-nvme-pricing-performance), shows the\\ndifference in performance and price between an AWS EC2 instance using\\n(temporary) NVMe disks and two using EBS (one with a general purpose `gp3`\\nvolume, and one with higher performance `io1` volume). All prices as of April\\n2024, US East, 1 year reserved with no upfront payment.\\n\\n| Metric                | EBS (gp3)   | EBS (io1)   | NVMe              |\\n| --------------------- | ----------- | ----------- | ----------------- |\\n| Instance Type         | r6i.8xlarge | r6i.8xlarge | i4i.8xlarge       |\\n| vCPU                  | 32          | 32          | 32                |\\n| Memory (GiB)          | 256         | 256         | 245               |\\n| Network (Gibps)       | 12.50       | 12.50       | 18.75             |\\n| Storage (GiB)         | 7500        | 7500        | 2x3750            |\\n| IOPS (read/write)     | 16,000      | 40,000      | 800,000 / 440,000 |\\n| Cost - Compute ($/mo) | 973         | 973         | 1,300             |\\n| Cost - Storage ($/mo) | 665         | 3,537       | 0                 |\\n| Cost - Total ($/mo)   | 1,638       | 4,510       | 1,300             |\\n\\nNotice how the NVMe instance has 30-50x the IOPS per dollar. This price\\ndifference means that Apibara users benefit from lower costs and/or higher\\nperformance.\\n\\n\",\"baseUrl\",\"http://www.apibara.com\",\"routes/_marketing\",\"actionData\",\"errors\"]\n");</script><!--$--><script>window.__reactRouterContext.streamController.close();</script><!--/$--><!--/$--></body></html>