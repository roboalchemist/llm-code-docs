# Source: https://www.apibara.com/docs/getting-started/installation

<!DOCTYPE html><html lang="en" class="dark bg-background"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/><link rel="modulepreload" href="/assets/entry.client-CwKnTHhE.js"/><link rel="modulepreload" href="/assets/button-B7cAtSR2.js"/><link rel="modulepreload" href="/assets/utils-Dxu6Btum.js"/><link rel="modulepreload" href="/assets/cookie-consent-clHrPgeC.js"/><link rel="modulepreload" href="/assets/index-PuoCZrSn.js"/><link rel="modulepreload" href="/assets/index-D1RvQa8Q.js"/><link rel="modulepreload" href="/assets/createLucideIcon-O_0coRDA.js"/><link rel="modulepreload" href="/assets/root-ipolV0AO.js"/><link rel="modulepreload" href="/assets/constants-Dl4TjVTX.js"/><link rel="modulepreload" href="/assets/useBaseQuery-BvxeFzjL.js"/><link rel="modulepreload" href="/assets/index-CnbLAjcy.js"/><link rel="modulepreload" href="/assets/logo-fuNHPPx1.js"/><link rel="modulepreload" href="/assets/utils-UlyEuLxL.js"/><link rel="modulepreload" href="/assets/meta-M0oKkN_M.js"/><link rel="modulepreload" href="/assets/iconBase-CrV5vKX5.js"/><link rel="modulepreload" href="/assets/_marketing-CGxmZCn-.js"/><link rel="modulepreload" href="/assets/devlog-wkYzDMBY.js"/><link rel="modulepreload" href="/assets/index-CJcc-0k1.js"/><link rel="modulepreload" href="/assets/index-D0z94NDm.js"/><link rel="modulepreload" href="/assets/index-DfeBrNmd.js"/><link rel="modulepreload" href="/assets/version-select-PcccTYUw.js"/><link rel="modulepreload" href="/assets/index-D-3o5vKG.js"/><link rel="modulepreload" href="/assets/index-CKNh5fP9.js"/><link rel="modulepreload" href="/assets/check-BIZc5W9p.js"/><link rel="modulepreload" href="/assets/_marketing._docs-TRmate3G.js"/><link rel="modulepreload" href="/assets/_marketing._docs.docs._-BiDJ9VmJ.js"/><link rel="modulepreload" href="/assets/components-jah0Jotm.js"/><meta name="theme-color" content="#171923"/><meta name="apple-mobile-web-app-title" content="Apibara"/><title>Installation - Apibara Documentation</title><meta name="description" content="Learn how to install and get started with Apibara."/><meta property="og:url" content="https://www.apibara.com/docs/getting-started/installation"/><meta property="og:title" content="Installation - Apibara Documentation"/><meta property="og:description" content="Learn how to install and get started with Apibara."/><meta property="og:image" content="http://www.apibara.com/resource/og?title=Installation"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@apibara_web3"/><meta name="twitter:site" content="@apibara_web3"/><meta name="twitter:title" content="Installation - Apibara Documentation"/><meta name="twitter:description" content="Learn how to install and get started with Apibara."/><meta name="twitter:image" content="http://www.apibara.com/resource/og?title=Installation"/><link rel="canonical" href="https://www.apibara.com/docs/getting-started/installation"/><meta name="og:type" content="article"/><meta name="article:author" content="Apibara"/><meta name="article:published_time" content="2025-06-11T00:00:00.000Z"/><meta name="article:modified_time" content="2025-06-11T00:00:00.000Z"/><link rel="icon" href="/favicon-16x16.png" sizes="16x16"/><link rel="icon" href="/favicon-32x32.png" sizes="32x32"/><link rel="icon" href="/web-app-manifest-192x192.png" sizes="192x192"/><link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="manifest" href="/site.webmanifest"/><link rel="preconnect" href="https://6XRVYOGFCW-dsn.algolia.net" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preload" as="font" href="/fonts/JetBrainsMono-Regular.woff2" crossorigin="anonymous"/><link rel="stylesheet" href="/assets/root-DQw5JbnM.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Encode+Sans:wght@100..900&amp;display=swap"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&amp;display=swap"/><link rel="stylesheet" href="/assets/_marketing-CAX2t5ve.css"/></head><body class="font-sans antialiased"><script>window._POSTHOG = {"key":"phc_UZjZ1DOpyAQOegVmcW09tIO4XcIKvsd6qtHbCmXZw4F","host":"https://us.i.posthog.com"}</script><div role="progressbar" aria-hidden="true" class="fixed inset-x-0 left-0 top-0 z-50 h-1 animate-pulse"><div class="h-full bg-gradient-to-r from-blue-brand to-aqua-brand duration-500 ease-in-out w-0 opacity-0 transition-none"></div></div><div class="flex h-full flex-1 flex-col"><main class="flex flex-1 flex-col" tabindex="-1"><header class="supports-backdrop-blur:bg-muted/60 sticky top-0 z-50 w-full border-b bg-muted/60 backdrop-blur"><div class="px-8 flex h-14 items-center justify-between"><div class="mr-4 hidden md:flex"><a class="mr-6 flex items-center space-x-2" href="/" data-discover="true"><svg viewBox="0 0 1600 461" color="hsl(var(--primary))" fill="none" class="h-8"><title>Apibara</title><g clip-path="url(#clip0_104_6)"><path d="M486.76 341L552.136 133.64H602.968L668.344 341H632.632L573.304 154.952H581.08L522.472 341H486.76ZM523.192 296.072V263.672H632.056V296.072H523.192ZM769.115 345.32C753.947 345.32 741.227 341.72 730.955 334.52C720.683 327.32 712.955 317.528 707.771 305.144C702.587 292.664 699.995 278.696 699.995 263.24C699.995 247.592 702.587 233.576 707.771 221.192C712.955 208.808 720.539 199.064 730.523 191.96C740.603 184.76 753.035 181.16 767.819 181.16C782.507 181.16 795.227 184.76 805.979 191.96C816.827 199.064 825.227 208.808 831.179 221.192C837.131 233.48 840.107 247.496 840.107 263.24C840.107 278.792 837.179 292.76 831.323 305.144C825.467 317.528 817.211 327.32 806.555 334.52C795.899 341.72 783.419 345.32 769.115 345.32ZM694.091 410.12V185.48H724.763V294.632H729.083V410.12H694.091ZM763.787 314.216C772.811 314.216 780.251 311.96 786.107 307.448C791.963 302.936 796.283 296.84 799.067 289.16C801.947 281.384 803.387 272.744 803.387 263.24C803.387 253.832 801.947 245.288 799.067 237.608C796.187 229.832 791.723 223.688 785.675 219.176C779.627 214.568 771.947 212.264 762.635 212.264C753.803 212.264 746.603 214.424 741.035 218.744C735.467 222.968 731.339 228.92 728.651 236.6C726.059 244.184 724.763 253.064 724.763 263.24C724.763 273.32 726.059 282.2 728.651 289.88C731.339 297.56 735.515 303.56 741.179 307.88C746.939 312.104 754.475 314.216 763.787 314.216ZM874.728 161.864V130.04H909.432V161.864H874.728ZM874.728 341V185.48H909.432V341H874.728ZM1027.3 345.32C1012.13 345.32 999.414 341.72 989.142 334.52C978.87 327.32 971.142 317.528 965.958 305.144C960.774 292.664 958.182 278.696 958.182 263.24C958.182 247.592 960.774 233.576 965.958 221.192C971.142 208.808 978.726 199.064 988.71 191.96C998.79 184.76 1011.22 181.16 1026.01 181.16C1040.69 181.16 1053.41 184.76 1064.17 191.96C1075.01 199.064 1083.41 208.808 1089.37 221.192C1095.32 233.48 1098.29 247.496 1098.29 263.24C1098.29 278.792 1095.37 292.76 1089.51 305.144C1083.65 317.528 1075.4 327.32 1064.74 334.52C1054.09 341.72 1041.61 345.32 1027.3 345.32ZM952.278 341V133.64H987.27V231.848H982.95V341H952.278ZM1021.97 314.216C1031 314.216 1038.44 311.96 1044.29 307.448C1050.15 302.936 1054.47 296.84 1057.25 289.16C1060.13 281.384 1061.57 272.744 1061.57 263.24C1061.57 253.832 1060.13 245.288 1057.25 237.608C1054.37 229.832 1049.91 223.688 1043.86 219.176C1037.81 214.568 1030.13 212.264 1020.82 212.264C1011.99 212.264 1004.79 214.424 999.222 218.744C993.654 222.968 989.526 228.92 986.838 236.6C984.246 244.184 982.95 253.064 982.95 263.24C982.95 273.32 984.246 282.2 986.838 289.88C989.526 297.56 993.702 303.56 999.366 307.88C1005.13 312.104 1012.66 314.216 1021.97 314.216ZM1173.52 345.32C1162.29 345.32 1152.79 343.208 1145.01 338.984C1137.24 334.664 1131.33 328.952 1127.3 321.848C1123.36 314.744 1121.4 306.92 1121.4 298.376C1121.4 290.888 1122.64 284.168 1125.14 278.216C1127.64 272.168 1131.48 266.984 1136.66 262.664C1141.84 258.248 1148.56 254.648 1156.82 251.864C1163.06 249.848 1170.36 248.024 1178.71 246.392C1187.16 244.76 1196.28 243.272 1206.07 241.928C1215.96 240.488 1226.28 238.952 1237.03 237.32L1224.64 244.376C1224.74 233.624 1222.34 225.704 1217.44 220.616C1212.55 215.528 1204.29 212.984 1192.68 212.984C1185.67 212.984 1178.9 214.616 1172.37 217.88C1165.84 221.144 1161.28 226.76 1158.69 234.728L1127.01 224.792C1130.85 211.64 1138.15 201.08 1148.9 193.112C1159.75 185.144 1174.34 181.16 1192.68 181.16C1206.5 181.16 1218.64 183.416 1229.11 187.928C1239.67 192.44 1247.49 199.832 1252.58 210.104C1255.36 215.576 1257.04 221.192 1257.62 226.952C1258.2 232.616 1258.48 238.808 1258.48 245.528V341H1228.1V307.304L1233.14 312.776C1226.13 324.008 1217.92 332.264 1208.52 337.544C1199.2 342.728 1187.54 345.32 1173.52 345.32ZM1180.44 317.672C1188.31 317.672 1195.03 316.28 1200.6 313.496C1206.16 310.712 1210.58 307.304 1213.84 303.272C1217.2 299.24 1219.46 295.448 1220.61 291.896C1222.44 287.48 1223.44 282.44 1223.64 276.776C1223.92 271.016 1224.07 266.36 1224.07 262.808L1234.72 265.976C1224.26 267.608 1215.28 269.048 1207.8 270.296C1200.31 271.544 1193.88 272.744 1188.5 273.896C1183.12 274.952 1178.37 276.152 1174.24 277.496C1170.21 278.936 1166.8 280.616 1164.02 282.536C1161.24 284.456 1159.08 286.664 1157.54 289.16C1156.1 291.656 1155.38 294.584 1155.38 297.944C1155.38 301.784 1156.34 305.192 1158.26 308.168C1160.18 311.048 1162.96 313.352 1166.61 315.08C1170.36 316.808 1174.96 317.672 1180.44 317.672ZM1295.97 341V185.48H1326.64V223.352L1322.9 218.456C1324.82 213.272 1327.36 208.568 1330.53 204.344C1333.8 200.024 1337.68 196.472 1342.2 193.688C1346.04 191.096 1350.26 189.08 1354.87 187.64C1359.57 186.104 1364.37 185.192 1369.27 184.904C1374.16 184.52 1378.92 184.712 1383.52 185.48V217.88C1378.92 216.536 1373.59 216.104 1367.54 216.584C1361.59 217.064 1356.21 218.744 1351.41 221.624C1346.61 224.216 1342.68 227.528 1339.6 231.56C1336.63 235.592 1334.42 240.2 1332.98 245.384C1331.54 250.472 1330.82 255.992 1330.82 261.944V341H1295.97ZM1450.84 345.32C1439.6 345.32 1430.1 343.208 1422.32 338.984C1414.55 334.664 1408.64 328.952 1404.61 321.848C1400.68 314.744 1398.71 306.92 1398.71 298.376C1398.71 290.888 1399.96 284.168 1402.45 278.216C1404.95 272.168 1408.79 266.984 1413.97 262.664C1419.16 258.248 1425.88 254.648 1434.13 251.864C1440.37 249.848 1447.67 248.024 1456.02 246.392C1464.47 244.76 1473.59 243.272 1483.38 241.928C1493.27 240.488 1503.59 238.952 1514.34 237.32L1501.96 244.376C1502.05 233.624 1499.65 225.704 1494.76 220.616C1489.86 215.528 1481.6 212.984 1469.99 212.984C1462.98 212.984 1456.21 214.616 1449.68 217.88C1443.16 221.144 1438.6 226.76 1436 234.728L1404.32 224.792C1408.16 211.64 1415.46 201.08 1426.21 193.112C1437.06 185.144 1451.65 181.16 1469.99 181.16C1483.81 181.16 1495.96 183.416 1506.42 187.928C1516.98 192.44 1524.8 199.832 1529.89 210.104C1532.68 215.576 1534.36 221.192 1534.93 226.952C1535.51 232.616 1535.8 238.808 1535.8 245.528V341H1505.41V307.304L1510.45 312.776C1503.44 324.008 1495.24 332.264 1485.83 337.544C1476.52 342.728 1464.85 345.32 1450.84 345.32ZM1457.75 317.672C1465.62 317.672 1472.34 316.28 1477.91 313.496C1483.48 310.712 1487.89 307.304 1491.16 303.272C1494.52 299.24 1496.77 295.448 1497.92 291.896C1499.75 287.48 1500.76 282.44 1500.95 276.776C1501.24 271.016 1501.38 266.36 1501.38 262.808L1512.04 265.976C1501.57 267.608 1492.6 269.048 1485.11 270.296C1477.62 271.544 1471.19 272.744 1465.81 273.896C1460.44 274.952 1455.68 276.152 1451.56 277.496C1447.52 278.936 1444.12 280.616 1441.33 282.536C1438.55 284.456 1436.39 286.664 1434.85 289.16C1433.41 291.656 1432.69 294.584 1432.69 297.944C1432.69 301.784 1433.65 305.192 1435.57 308.168C1437.49 311.048 1440.28 313.352 1443.92 315.08C1447.67 316.808 1452.28 317.672 1457.75 317.672Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M172.261 410.969C98.0948 384.564 45 313.735 45 230.505C45 224.019 45.3224 217.609 45.9522 211.288C63.9951 201.908 81.7329 190.752 90.3601 182.24C92.3653 180.562 93.8555 179.302 95.0239 178.315C97.0495 176.604 98.1077 175.71 99.2049 174.866C100.405 173.944 101.652 173.082 104.262 171.278C105.417 170.48 106.838 169.498 108.64 168.244C109.033 167.971 108.753 166.714 108.323 164.788C107.793 162.41 107.036 159.011 107.036 155.186C107.007 153.709 108.233 150.551 109.41 147.519L109.41 147.519C110.417 144.927 111.388 142.426 111.509 141.146C111.866 137.36 113.198 134.677 114.43 134.349C115.662 134.021 123.376 134.349 131.501 138.225C137.635 141.151 141.876 147.869 144.433 151.918C145.703 153.93 146.557 155.283 147.021 155.186C147.642 155.055 148.13 154.938 148.576 154.831C149.473 154.616 150.2 154.442 151.496 154.277C151.946 154.22 152.395 152.655 151.09 148.846C150.42 146.89 151.113 145.124 151.98 142.913C152.346 141.98 152.743 140.967 153.081 139.828C153.322 139.017 153.442 138.239 153.551 137.533C153.788 135.992 153.972 134.793 155.252 134.349C156.668 133.857 166.181 134.349 171.973 138.914C176.153 142.209 177.985 147.071 179.175 150.23L179.175 150.23L179.175 150.23C179.634 151.447 179.997 152.411 180.363 152.936C181.97 152.906 186.769 152.92 190.183 152.929H190.183H190.184H190.184C191.467 152.933 192.555 152.936 193.203 152.936C233.719 152.936 296.799 156.524 335.719 182.24C366.02 202.261 365.12 214.887 363.523 237.292L363.523 237.293C363.295 240.482 363.054 243.869 362.886 247.503C362.262 261.053 360.981 276.248 358.05 285.032C355.959 291.298 352.672 292.709 349.394 294.116C347.294 295.018 345.198 295.917 343.423 298.092C341.54 300.399 341.378 303.233 341.228 305.861C341.05 308.982 340.889 311.812 337.879 313.12C313.588 323.675 272.295 329.323 243.718 333.231L243.718 333.231C229.967 335.111 219.162 336.589 214.611 338.017C209.987 339.469 207.445 345.894 203.5 355.87C198.268 369.099 190.567 388.573 172.261 410.969ZM351.659 220.933C351.555 228.392 347.679 230.452 342.935 230.385C338.191 230.319 334.375 228.152 334.48 220.693C334.584 213.233 338.515 207.24 343.259 207.307C348.003 207.373 351.764 213.474 351.659 220.933ZM197.468 204.095C203.963 203.771 208.794 203.53 209.151 198.317C209.692 190.407 201.265 185.5 188.113 186.187C174.96 186.875 162.913 197.366 166.133 204.304C168.722 209.881 176.247 207.954 183.344 206.138C184.394 205.869 185.434 205.603 186.448 205.363C190.307 204.452 194.11 204.263 197.468 204.095Z" fill="currentColor"></path><circle cx="236.506" cy="230.506" r="181.506" stroke="currentColor" stroke-width="20"></circle></g><defs><clipPath id="clip0_104_6"><rect width="1600" height="461" fill="white"></rect></clipPath></defs></svg></a><nav class="flex items-center space-x-6 text-md font-medium"><a class="transition-colors hover:text-foreground/80 text-foreground" href="/docs" data-discover="true">Documentation</a><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-7 w-7 rounded-full flex-none p-0" title="Devlog" aria-label="Devlog" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Raal5»" data-state="closed"><div class="relative flex items-center justify-center text-foreground/60 hover:text-foreground/80"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-activity !h-4 !w-4"><path d="M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"></path></svg></div></button></nav></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:text-accent-foreground h-10 py-2 mr-2 px-0 text-base hover:bg-transparent focus-visible:bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 md:hidden" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Ril5»" data-state="closed"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm5-1v12h9a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM4 2H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2z"></path></svg><span class="sr-only">Toggle Menu</span></button><div class="flex md:flex-1 items-center justify-between space-x-2 md:justify-end"><nav class="flex items-center space-x-8"><div class="hidden lg:flex items-center space-x-2"><a rel="noreferrer" href="https://github.com/apibara/dna" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></button></a><a rel="noreferrer" href="https://www.twitter.com/apibara_web3" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button></a><a rel="noreferrer" href="https://discord.gg/m7B92CNFNt" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path></svg></button></a></div><div class="hidden md:flex items-center space-x-8"><a rel="noreferrer" class="hidden lg:block" href="https://calendly.com/apibara/chat-with-founder" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9 rounded-md px-3">Book a quick call w/ our founders</button></a><a rel="noreferrer" href="https://app.apibara.com" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 h-9 rounded-md px-3">Get started for free</button></a></div></nav></div></div></header><div class="md:container flex-1 py-8 px-4 md:px-2 md:grid md:grid-cols-[220px_minmax(0,1fr)_20px] md:gap-6 lg:grid-cols-[220px_minmax(0,1fr)_140px] lg:gap-8 xl:grid-cols-[240px_minmax(0,1fr)_240px] xl:gap-10"><div class="hidden top-20 z-30 md:-ml-2 w-full shrink-0 md:sticky md:block md:self-start"><div class="pb-4 sticky top-4 bg-background"><button type="button" role="combobox" aria-controls="radix-«Rlcl5»" aria-expanded="false" aria-autocomplete="none" dir="ltr" data-state="closed" class="flex items-center justify-between rounded-md border border-input bg-background py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&amp;&gt;span]:line-clamp-1 w-full h-8 px-4 mb-4"><span style="pointer-events:none"></span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 opacity-50" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><select aria-hidden="true" tabindex="-1" style="position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal"></select><button class="inline-flex items-center gap-2 whitespace-nowrap ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border border-input hover:bg-accent hover:text-accent-foreground px-4 py-2 relative h-8 justify-start rounded-[0.5rem] bg-background text-sm font-normal text-muted-foreground shadow-none sm:pr-12 w-full"><span class="inline-flex">Search...</span><kbd class="pointer-events-none absolute right-[0.3rem] top-[0.3rem] hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex"><span class="text-xs">⌘</span>K</kbd></button></div><aside class=""><div class="flex flex-col space-y-6 overflow-y-auto h-[calc(100vh-228px)] styled-scrollbar"><div><h4 class="mb-1 rounded-md md:px-2 py-1 text-md font-semibold md:text-primary md:uppercase">Getting Started</h4><div class="grid grid-flow-row auto-rows-max text-sm"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-foreground" href="/docs/getting-started/installation" data-discover="true"><span class="hover:underline font-medium">Installation</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/indexers" data-discover="true"><span class="hover:underline">Indexers</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/plugins" data-discover="true"><span class="hover:underline">Plugins &amp; Hooks</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/configuration" data-discover="true"><span class="hover:underline">apibara.config.ts</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/instrumentation" data-discover="true"><span class="hover:underline">instrumentation.ts</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/top-tips" data-discover="true"><span class="hover:underline">Top tips</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/getting-started/upgrading" data-discover="true"><span class="hover:underline">Upgrading from v1</span></a></div></div><div><h4 class="mb-1 rounded-md md:px-2 py-1 text-md font-semibold md:text-primary md:uppercase">Storage</h4><div class="grid grid-flow-row auto-rows-max text-sm"><button type="button" class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent md:px-2 py-1 text-muted-foreground">Drizzle<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-4 h-4"><path d="m9 18 6-6-6-6"></path></svg></button><div class="ml-4 border-l border-gray-800 overflow-hidden h-0"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/storage/drizzle-pg" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/storage/drizzle-pg/testing" data-discover="true"><span class="hover:underline">Testing</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/storage/drizzle-pg/internals" data-discover="true"><span class="hover:underline">Internals</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/storage/drizzle-pg/api-reference" data-discover="true"><span class="hover:underline">API Ref</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/storage/drizzle-pg/faq" data-discover="true"><span class="hover:underline">FAQ</span></a></div></div></div><div><h4 class="mb-1 rounded-md md:px-2 py-1 text-md font-semibold md:text-primary md:uppercase">Networks</h4><div class="grid grid-flow-row auto-rows-max text-sm"><button type="button" class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent md:px-2 py-1 text-muted-foreground">Beacon Chain<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-4 h-4"><path d="m9 18 6-6-6-6"></path></svg></button><div class="ml-4 border-l border-gray-800 overflow-hidden h-0"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/beaconchain" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/beaconchain/filter" data-discover="true"><span class="hover:underline">Filter</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/beaconchain/data" data-discover="true"><span class="hover:underline">Block data</span></a></div><button type="button" class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent md:px-2 py-1 text-muted-foreground">EVM<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-4 h-4"><path d="m9 18 6-6-6-6"></path></svg></button><div class="ml-4 border-l border-gray-800 overflow-hidden h-0"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/evm" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/evm/filter" data-discover="true"><span class="hover:underline">Filter</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/evm/data" data-discover="true"><span class="hover:underline">Block data</span></a></div><button type="button" class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent md:px-2 py-1 text-muted-foreground">Starknet<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right w-4 h-4"><path d="m9 18 6-6-6-6"></path></svg></button><div class="ml-4 border-l border-gray-800 overflow-hidden h-0"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet/filter" data-discover="true"><span class="hover:underline">Filter</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet/data" data-discover="true"><span class="hover:underline">Block data</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet/decoder" data-discover="true"><span class="hover:underline">Event decoder</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet/helpers" data-discover="true"><span class="hover:underline">Helpers</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/networks/starknet/upgrade-from-v1" data-discover="true"><span class="hover:underline">Upgrading</span></a></div></div></div><div><h4 class="mb-1 rounded-md md:px-2 py-1 text-md font-semibold md:text-primary md:uppercase">DNA Protocol</h4><div class="grid grid-flow-row auto-rows-max text-sm"><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/dna" data-discover="true"><span class="hover:underline">Overview</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/dna/architecture" data-discover="true"><span class="hover:underline">Architecture</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/dna/protocol" data-discover="true"><span class="hover:underline">Protocol</span></a><a class="group flex flex-row justify-between items-start w-full rounded-lg border border-transparent py-2 md:px-2 md:py-1 text-muted-foreground" href="/docs/dna/add-new-chain" data-discover="true"><span class="hover:underline">Add new chain</span></a></div></div></div></aside></div><div class="docs_layout_children"><div class="flex flex-col"><article class="mdx"><h1 class="font-heading mt-2 text-4xl font-bold" id="installation">Installation</h1>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">This tutorial shows how to setup an Apibara project from scratch. The goal is to
start indexing data as quickly as possible and to understand the basic structure
of a project. By the end of this tutorial, you will have a basic indexer that
streams data from two networks (Ethereum and Starknet).</p>
<a href="#installation-1" class="
                block font-heading mt-12 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0
          "><h2 id="installation-1" class="hover:after:content-[&#x27;#&#x27;] after:relative after:pl-2">Installation</h2></a>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">This tutorial starts with a fresh Typescript project. In the examples, we use
<code class="text-sm">pnpm</code> as the package manager, but you can use any package manager you prefer.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Let&#x27;s start by creating the project. The <code class="text-sm">--language</code> flag specifies which language
to use to implement indexers, while the <code class="text-sm">--no-create-indexer</code> flag is used to
delay the creation of the indexer.</p>
<div class="flex flex-col my-6 rounded overflow-hidden"><div class="-my-6 z-10"><div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal w-4 h-4 mr-2"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg><div>Terminal</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="Terminal" data-lang="bash"><code class="text-sm"><span class="line"><span style="color:#89B4FA;font-style:italic">mkdir</span><span style="color:#A6E3A1"> my-indexer</span></span>
<span class="line"><span style="color:#F38BA8;font-style:italic">cd</span><span style="color:#A6E3A1"> my-indexer</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">pnpm</span><span style="color:#A6E3A1"> dlx</span><span style="color:#A6E3A1"> apibara@next</span><span style="color:#A6E3A1"> init</span><span style="color:#A6E3A1"> .</span><span style="color:#A6E3A1"> --language=&quot;ts&quot;</span><span style="color:#A6E3A1"> --no-create-indexer</span></span></code></pre></div></div><div class="text-muted-foreground border border-gray-800 pt-4 -mt-4" style="background:var(--shiki-background)"><pre class="my-6 has-[[data-is-output=true]]:my-0 shadow-xl has-[[data-is-output=true]]:shadow-none border has-[[data-is-output=true]]:border-0 px-4 rounded border-gray-800 py-2 block leading-5 overflow-auto styled-scrollbar" style="background:#1e1e2e"><code data-is-output="true" class="text-sm">ℹ Initializing project in .
✔ Created  package.json
✔ Created  tsconfig.json
✔ Created  apibara.config.ts

✔ Project initialized successfully
</code></pre></div></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">After that, you can install the dependencies.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal w-4 h-4 mr-2"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg><div>Terminal</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="Terminal" data-lang="bash"><code class="text-sm"><span class="line"><span style="color:#89B4FA;font-style:italic">pnpm</span><span style="color:#A6E3A1"> install</span></span></code></pre></div>
<a href="#apibara-config" class="
                block font-heading mt-12 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0
          "><h2 id="apibara-config" class="hover:after:content-[&#x27;#&#x27;] after:relative after:pl-2">Apibara Config</h2></a>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Your indexers&#x27; configuration goes in the <code class="text-sm">apibara.config.ts</code> file. You can
leave the configuration as is for now.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="w-4 h-4 mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"></path></svg><div>apibara.config.ts</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="apibara.config.ts" data-lang="typescript"><code class="text-sm"><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> defineConfig </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/config&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">export</span><span style="color:#CBA6F7"> default</span><span style="color:#89B4FA;font-style:italic"> defineConfig</span><span style="color:#CDD6F4">(</span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#CDD6F4">  runtimeConfig</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {},</span></span>
<span class="line"><span style="color:#9399B2">}</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span></code></pre></div>
<a href="#api-key" class="
                block font-heading mt-12 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0
          "><h2 id="api-key" class="hover:after:content-[&#x27;#&#x27;] after:relative after:pl-2">API Key</h2></a>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The streams hosted by Apibara require an API key.</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2"><a class="font-medium underline underline-offset-4" href="https://app.apibara.com">Sign up for a free account</a>,</li>
<li class="mt-2">Create an API key,</li>
<li class="mt-2">Export the API key as the <code class="text-sm">DNA_TOKEN</code> environment variable.</li>
</ul>
<a href="#evm-indexer" class="
                block font-heading mt-12 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0
          "><h2 id="evm-indexer" class="hover:after:content-[&#x27;#&#x27;] after:relative after:pl-2">EVM Indexer</h2></a>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Let&#x27;s create the first EVM indexer. All indexers must go in the <code class="text-sm">indexers</code>
directory and have a name that ends with <code class="text-sm">.indexer.ts</code> or <code class="text-sm">.indexer.js</code>.
The Apibara CLI will automatically detect the indexers in this directory and
make them available to the project.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">You can use the <code class="text-sm">apibara add</code> command to add an indexer to your project. This
command does the following:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">gathers information about the chain you want to index.</li>
<li class="mt-2">asks about your preferred storage solution.</li>
<li class="mt-2">creates the indexer.</li>
<li class="mt-2">adds dependencies to your <code class="text-sm">package.json</code>.</li>
</ul>
<div class="flex flex-col my-6 rounded overflow-hidden"><div class="-my-6 z-10"><div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal w-4 h-4 mr-2"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg><div>Terminal</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="Terminal" data-lang="bash"><code class="text-sm"><span class="line"><span style="color:#89B4FA;font-style:italic">pnpm</span><span style="color:#A6E3A1"> apibara</span><span style="color:#A6E3A1"> add</span></span></code></pre></div></div><div class="text-muted-foreground border border-gray-800 pt-4 -mt-4" style="background:var(--shiki-background)"><pre class="my-6 has-[[data-is-output=true]]:my-0 shadow-xl has-[[data-is-output=true]]:shadow-none border has-[[data-is-output=true]]:border-0 px-4 rounded border-gray-800 py-2 block leading-5 overflow-auto styled-scrollbar" style="background:#1e1e2e"><code data-is-output="true" class="text-sm">✔ Indexer ID: … rocket-pool
✔ Select a chain: › Ethereum
✔ Select a network: › Mainnet
✔ Select a storage: › None
✔ Updated apibara.config.ts
✔ Updated package.json
✔ Created rocket-pool.indexer.ts

ℹ Before running the indexer, run pnpm run install &amp; pnpm run prepare
</code></pre></div></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">After installing dependencies, you can look at the changes to <code class="text-sm">apibara.config.ts</code>.
Notice the indexer&#x27;s specific runtime configuration. This is a good time to update
the indexing starting block.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="w-4 h-4 mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"></path></svg><div>apibara.config.ts</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="apibara.config.ts" data-lang="typescript"><code class="text-sm"><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> defineConfig </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/config&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">export</span><span style="color:#CBA6F7"> default</span><span style="color:#89B4FA;font-style:italic"> defineConfig</span><span style="color:#CDD6F4">(</span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#CDD6F4">  runtimeConfig</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">    rocketPool</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">      startingBlock</span><span style="color:#94E2D5">:</span><span style="color:#FAB387"> 21_000_000</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">      streamUrl</span><span style="color:#94E2D5">:</span><span style="color:#A6E3A1"> &quot;https://mainnet.ethereum.a5a.ch&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#9399B2">  },</span></span>
<span class="line"><span style="color:#9399B2">}</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span></code></pre></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Implement the indexer by editing <code class="text-sm">indexers/rocket-pool.indexer.ts</code>.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="w-4 h-4 mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"></path></svg><div>rocket-pool.indexer.ts</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="rocket-pool.indexer.ts" data-lang="typescript"><code class="text-sm"><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> defineIndexer </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/indexer&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> useLogger </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/plugins&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> EvmStream </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;@apibara/evm&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CBA6F7"> type</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> ApibaraRuntimeConfig </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/types&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">export</span><span style="color:#CBA6F7"> default</span><span style="color:#CBA6F7"> function</span><span style="color:#9399B2"> (</span><span style="color:#EBA0AC;font-style:italic">runtimeConfig</span><span style="color:#94E2D5">:</span><span style="color:#F9E2AF;font-style:italic"> ApibaraRuntimeConfig</span><span style="color:#9399B2">)</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CBA6F7">  const</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> startingBlock</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> streamUrl </span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> =</span><span style="color:#CDD6F4"> runtimeConfig</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">rocketPool</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">  return</span><span style="color:#89B4FA;font-style:italic"> defineIndexer</span><span style="color:#CDD6F4">(EvmStream)(</span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#CDD6F4">    streamUrl</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">    finality</span><span style="color:#94E2D5">:</span><span style="color:#A6E3A1"> &quot;accepted&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">    startingBlock</span><span style="color:#94E2D5">:</span><span style="color:#89B4FA;font-style:italic"> BigInt</span><span style="color:#CDD6F4">(startingBlock)</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">    filter</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">      logs</span><span style="color:#94E2D5">:</span><span style="color:#CDD6F4"> [</span></span>
<span class="line"><span style="color:#9399B2">        {</span></span>
<span class="line"><span style="color:#CDD6F4">          address</span><span style="color:#94E2D5">:</span><span style="color:#A6E3A1"> &quot;0xae78736Cd615f374D3085123A210448E74Fc6393&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">        },</span></span>
<span class="line"><span style="color:#CDD6F4">      ]</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#CDD6F4">    plugins</span><span style="color:#94E2D5">:</span><span style="color:#CDD6F4"> []</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CBA6F7">    async</span><span style="color:#89B4FA;font-style:italic"> transform</span><span style="color:#9399B2">({</span><span style="color:#EBA0AC;font-style:italic"> block</span><span style="color:#9399B2"> })</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CBA6F7">      const</span><span style="color:#CDD6F4"> logger </span><span style="color:#94E2D5">=</span><span style="color:#89B4FA;font-style:italic"> useLogger</span><span style="color:#CDD6F4">()</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">      const</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> logs</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> header </span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> =</span><span style="color:#CDD6F4"> block</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CDD6F4">      logger</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">log</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">`Block number </span><span style="color:#9399B2">${</span><span style="color:#CDD6F4">header</span><span style="color:#94E2D5">?.</span><span style="color:#CDD6F4">blockNumber</span><span style="color:#9399B2">}</span><span style="color:#A6E3A1">`</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">      for</span><span style="color:#CDD6F4"> (</span><span style="color:#CBA6F7">const</span><span style="color:#CDD6F4"> log </span><span style="color:#CBA6F7">of</span><span style="color:#CDD6F4"> logs) </span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#CDD6F4">        logger</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">log</span><span style="color:#CDD6F4">(</span></span>
<span class="line"><span style="color:#A6E3A1">          `Log </span><span style="color:#9399B2">${</span><span style="color:#CDD6F4">log</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">logIndex</span><span style="color:#9399B2">}</span><span style="color:#A6E3A1"> from </span><span style="color:#9399B2">${</span><span style="color:#CDD6F4">log</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">address</span><span style="color:#9399B2">}</span><span style="color:#A6E3A1"> tx=</span><span style="color:#9399B2">${</span><span style="color:#CDD6F4">log</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">transactionHash</span><span style="color:#9399B2">}</span><span style="color:#A6E3A1">`</span></span>
<span class="line"><span style="color:#CDD6F4">        )</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#9399B2">      }</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#9399B2">  }</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#9399B2">}</span></span></code></pre></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Notice the following:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">The indexer file exports a single indexer.</li>
<li class="mt-2">The <code class="text-sm">defineIndexer</code> function takes the stream as parameter. In this case, the
<code class="text-sm">EvmStream</code> is used. This is needed because Apibara supports multiple networks
with different data types.</li>
<li class="mt-2"><code class="text-sm">streamUrl</code> specifies where the data comes from. You can connect to streams hosted
by us, or to self-hosted streams.</li>
<li class="mt-2"><code class="text-sm">startingBlock</code> specifies from which block to start streaming.</li>
<li class="mt-2">These two properties are read from the <code class="text-sm">runtimeConfig</code> object. Use the runtime configuration
object to have multiple presets for the same indexer.</li>
<li class="mt-2">The <code class="text-sm">filter</code> specifies which data to receive. You can read more about the available
data for EVM chains in the <a class="font-medium underline underline-offset-4" href="/docs/networks/evm/filter">EVM documentation</a>.</li>
<li class="mt-2">The <code class="text-sm">transform</code> function is called for each block. It receives the block as parameter.
This is where your indexer processes the data.</li>
<li class="mt-2">The <code class="text-sm">useLogger</code> hook returns an indexer-specific logger.</li>
</ul>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">There are more indexer options available, you can find them <a class="font-medium underline underline-offset-4" href="/docs/getting-started/indexers">in the documentation</a>.</p>
<a href="#running-the-indexer" class="
                block font-heading mt-12 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0
          "><h2 id="running-the-indexer" class="hover:after:content-[&#x27;#&#x27;] after:relative after:pl-2">Running the indexer</h2></a>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">During development, you will use the <code class="text-sm">apibara</code> CLI to build and run indexers. For convenience,
the template adds the following scripts to your <code class="text-sm">package.json</code>:</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="w-4 h-4 mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 2.984V2h-.09c-.313 0-.616.062-.909.185a2.33 2.33 0 0 0-.775.53 2.23 2.23 0 0 0-.493.753v.001a3.542 3.542 0 0 0-.198.83v.002a6.08 6.08 0 0 0-.024.863c.012.29.018.58.018.869 0 .203-.04.393-.117.572v.001a1.504 1.504 0 0 1-.765.787 1.376 1.376 0 0 1-.558.115H2v.984h.09c.195 0 .38.04.556.121l.001.001c.178.078.329.184.455.318l.002.002c.13.13.233.285.307.465l.001.002c.078.18.117.368.117.566 0 .29-.006.58-.018.869-.012.296-.004.585.024.87v.001c.033.283.099.558.197.824v.001c.106.273.271.524.494.753.223.23.482.407.775.53.293.123.596.185.91.185H6v-.984h-.09c-.2 0-.387-.038-.563-.115a1.613 1.613 0 0 1-.457-.32 1.659 1.659 0 0 1-.309-.467c-.074-.18-.11-.37-.11-.573 0-.228.003-.453.011-.672.008-.228.008-.45 0-.665a4.639 4.639 0 0 0-.055-.64 2.682 2.682 0 0 0-.168-.609A2.284 2.284 0 0 0 3.522 8a2.284 2.284 0 0 0 .738-.955c.08-.192.135-.393.168-.602.033-.21.051-.423.055-.64.008-.22.008-.442 0-.666-.008-.224-.012-.45-.012-.678a1.47 1.47 0 0 1 .877-1.354 1.33 1.33 0 0 1 .563-.121H6zm4 10.032V14h.09c.313 0 .616-.062.909-.185.293-.123.552-.3.775-.53.223-.23.388-.48.493-.753v-.001c.1-.266.165-.543.198-.83v-.002c.028-.28.036-.567.024-.863-.012-.29-.018-.58-.018-.869 0-.203.04-.393.117-.572v-.001a1.502 1.502 0 0 1 .765-.787 1.38 1.38 0 0 1 .558-.115H14v-.984h-.09c-.196 0-.381-.04-.557-.121l-.001-.001a1.376 1.376 0 0 1-.455-.318l-.002-.002a1.415 1.415 0 0 1-.307-.465v-.002a1.405 1.405 0 0 1-.118-.566c0-.29.006-.58.018-.869a6.174 6.174 0 0 0-.024-.87v-.001a3.537 3.537 0 0 0-.197-.824v-.001a2.23 2.23 0 0 0-.494-.753 2.331 2.331 0 0 0-.775-.53 2.325 2.325 0 0 0-.91-.185H10v.984h.09c.2 0 .387.038.562.115.174.082.326.188.457.32.127.134.23.29.309.467.074.18.11.37.11.573 0 .228-.003.452-.011.672-.008.228-.008.45 0 .665.004.222.022.435.055.64.033.214.089.416.168.609a2.285 2.285 0 0 0 .738.955 2.285 2.285 0 0 0-.738.955 2.689 2.689 0 0 0-.168.602c-.033.21-.051.423-.055.64a9.15 9.15 0 0 0 0 .666c.008.224.012.45.012.678a1.471 1.471 0 0 1-.877 1.354 1.33 1.33 0 0 1-.563.121H10z"></path></svg><div>package.json</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="package.json" data-lang="json"><code class="text-sm"><span class="line"><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#9399B2">  &quot;</span><span style="color:#89B4FA">scripts</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#9399B2">    &quot;</span><span style="color:#89B4FA">dev</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#A6E3A1"> &quot;apibara dev&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    &quot;</span><span style="color:#89B4FA">build</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#A6E3A1"> &quot;apibara build&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    &quot;</span><span style="color:#89B4FA">start</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#A6E3A1"> &quot;apibara start&quot;</span></span>
<span class="line"><span style="color:#9399B2">  }</span></span>
<span class="line"><span style="color:#9399B2">}</span></span></code></pre></div>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2"><code class="text-sm">dev</code>: runs all indexers in development mode. Indexers are automatically
reloaded and restarted when they change.</li>
<li class="mt-2"><code class="text-sm">build</code>: builds the indexers for production.</li>
<li class="mt-2"><code class="text-sm">start</code>: runs a <em>single indexer</em> in production mode. Notice you must first
build the indexers.</li>
</ul>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Before running the indexer, you must set the <code class="text-sm">DNA_TOKEN</code> environment variable to your DNA API key, created from the dashboard.
You can store the environment variable in a <code class="text-sm">.env</code> file, but make sure not to commit it to git!</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Now, run the indexer in development mode.</p>
<div class="flex flex-col my-6 rounded overflow-hidden"><div class="-my-6 z-10"><div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal w-4 h-4 mr-2"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg><div>Terminal</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="Terminal" data-lang="bash"><code class="text-sm"><span class="line"><span style="color:#89B4FA;font-style:italic">pnpm</span><span style="color:#A6E3A1"> run</span><span style="color:#A6E3A1"> dev</span></span></code></pre></div></div><div class="text-muted-foreground border border-gray-800 pt-4 -mt-4" style="background:var(--shiki-background)"><pre class="my-6 has-[[data-is-output=true]]:my-0 shadow-xl has-[[data-is-output=true]]:shadow-none border has-[[data-is-output=true]]:border-0 px-4 rounded border-gray-800 py-2 block leading-5 overflow-auto styled-scrollbar" style="background:#1e1e2e"><code data-is-output="true" class="text-sm">&gt; <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f697869f94978497db978686b6c6d8c7d8c6">[email&#160;protected]</a> dev /tmp/my-indexer
&gt; apibara dev

✔ Output directory .apibara/build cleaned
✔ Types written to .apibara/types
✔ Indexers built in 19369 ms
✔ Restarting indexers
rocket-pool | log Block number 21000071
rocket-pool | log Log 239 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0xe3b7e285c02e9a1dad654ba095ee517cf4c15bf0c2c0adec555045e86ea1de89
rocket-pool | log Block number 21000097
rocket-pool | log Log 265 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba
rocket-pool | log Log 266 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba
rocket-pool | log Block number 21000111
rocket-pool | log Log 589 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0xa01ec6551e76364f6cf687f52823d66b1c07f7a47ce157a9cd9e441691a021f0
...
</code></pre></div></div>
<a href="#starknet-indexer" class="
                block font-heading mt-12 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0
          "><h2 id="starknet-indexer" class="hover:after:content-[&#x27;#&#x27;] after:relative after:pl-2">Starknet indexer</h2></a>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">You can index data on different networks in the same project. Let&#x27;s add an indexer for Starknet.
Like before, you can use the <code class="text-sm">apibara add</code> command to add an indexer to your project.</p>
<div class="flex flex-col my-6 rounded overflow-hidden"><div class="-my-6 z-10"><div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal w-4 h-4 mr-2"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg><div>Terminal</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="Terminal" data-lang="bash"><code class="text-sm"><span class="line"><span style="color:#89B4FA;font-style:italic">pnpm</span><span style="color:#A6E3A1"> apibara</span><span style="color:#A6E3A1"> add</span></span></code></pre></div></div><div class="text-muted-foreground border border-gray-800 pt-4 -mt-4" style="background:var(--shiki-background)"><pre class="my-6 has-[[data-is-output=true]]:my-0 shadow-xl has-[[data-is-output=true]]:shadow-none border has-[[data-is-output=true]]:border-0 px-4 rounded border-gray-800 py-2 block leading-5 overflow-auto styled-scrollbar" style="background:#1e1e2e"><code data-is-output="true" class="text-sm">✔ Indexer ID: … strk-staking
✔ Select a chain: › Starknet
✔ Select a network: › Mainnet
✔ Select a storage: › None
✔ Updated apibara.config.ts
✔ Updated package.json
✔ Created strk-staking.indexer.ts

ℹ Before running the indexer, run pnpm run install &amp; pnpm run prepare
</code></pre></div></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">After that, you can implement the indexer. In this case, the indexer listens for all events
emitted by the STRK staking contract.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Let&#x27;s start by updating the <code class="text-sm">apibara.config.ts</code> file with the starting block.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="w-4 h-4 mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"></path></svg><div>apibara.config.ts</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="apibara.config.ts" data-lang="typescript"><code class="text-sm"><span class="line"><span style="color:#6C7086;font-style:italic">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">export</span><span style="color:#CBA6F7"> default</span><span style="color:#89B4FA;font-style:italic"> defineConfig</span><span style="color:#CDD6F4">(</span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#CDD6F4">  runtimeConfig</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#6C7086;font-style:italic">    // ...</span></span>
<span class="line"><span style="color:#CDD6F4">    strkStaking</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">      startingBlock</span><span style="color:#94E2D5">:</span><span style="color:#FAB387"> 900_000</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">      streamUrl</span><span style="color:#94E2D5">:</span><span style="color:#A6E3A1"> &quot;https://mainnet.starknet.a5a.ch&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#9399B2">  },</span></span>
<span class="line"><span style="color:#6C7086;font-style:italic">  // ...</span></span>
<span class="line"><span style="color:#9399B2">}</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span></code></pre></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Then you can implement the indexer.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="w-4 h-4 mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"></path></svg><div>strk-staking.indexer.ts</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="strk-staking.indexer.ts" data-lang="typescript"><code class="text-sm"><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> defineIndexer </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/indexer&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> useLogger </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/plugins&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CBA6F7"> type</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> ApibaraRuntimeConfig </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/types&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> StarknetStream </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;@apibara/starknet&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">export</span><span style="color:#CBA6F7"> default</span><span style="color:#CBA6F7"> function</span><span style="color:#9399B2"> (</span><span style="color:#EBA0AC;font-style:italic">runtimeConfig</span><span style="color:#94E2D5">:</span><span style="color:#F9E2AF;font-style:italic"> ApibaraRuntimeConfig</span><span style="color:#9399B2">)</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CBA6F7">  const</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> startingBlock</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> streamUrl </span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> =</span><span style="color:#CDD6F4"> runtimeConfig</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">strkStaking</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">  return</span><span style="color:#89B4FA;font-style:italic"> defineIndexer</span><span style="color:#CDD6F4">(StarknetStream)(</span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#CDD6F4">    streamUrl</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">    finality</span><span style="color:#94E2D5">:</span><span style="color:#A6E3A1"> &quot;accepted&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">    startingBlock</span><span style="color:#94E2D5">:</span><span style="color:#89B4FA;font-style:italic"> BigInt</span><span style="color:#CDD6F4">(startingBlock)</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">    filter</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">      events</span><span style="color:#94E2D5">:</span><span style="color:#CDD6F4"> [</span></span>
<span class="line"><span style="color:#9399B2">        {</span></span>
<span class="line"><span style="color:#CDD6F4">          address</span><span style="color:#94E2D5">:</span></span>
<span class="line"><span style="color:#A6E3A1">            &quot;0x028d709c875c0ceac3dce7065bec5328186dc89fe254527084d1689910954b0a&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">        },</span></span>
<span class="line"><span style="color:#CDD6F4">      ]</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#CDD6F4">    plugins</span><span style="color:#94E2D5">:</span><span style="color:#CDD6F4"> []</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CBA6F7">    async</span><span style="color:#89B4FA;font-style:italic"> transform</span><span style="color:#9399B2">({</span><span style="color:#EBA0AC;font-style:italic"> block</span><span style="color:#9399B2"> })</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CBA6F7">      const</span><span style="color:#CDD6F4"> logger </span><span style="color:#94E2D5">=</span><span style="color:#89B4FA;font-style:italic"> useLogger</span><span style="color:#CDD6F4">()</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">      const</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> events</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> header </span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> =</span><span style="color:#CDD6F4"> block</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CDD6F4">      logger</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">log</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">`Block number </span><span style="color:#9399B2">${</span><span style="color:#CDD6F4">header</span><span style="color:#94E2D5">?.</span><span style="color:#CDD6F4">blockNumber</span><span style="color:#9399B2">}</span><span style="color:#A6E3A1">`</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">      for</span><span style="color:#CDD6F4"> (</span><span style="color:#CBA6F7">const</span><span style="color:#CDD6F4"> event </span><span style="color:#CBA6F7">of</span><span style="color:#CDD6F4"> events) </span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#CDD6F4">        logger</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">log</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">`Event </span><span style="color:#9399B2">${</span><span style="color:#CDD6F4">event</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">eventIndex</span><span style="color:#9399B2">}</span><span style="color:#A6E3A1"> tx=</span><span style="color:#9399B2">${</span><span style="color:#CDD6F4">event</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">transactionHash</span><span style="color:#9399B2">}</span><span style="color:#A6E3A1">`</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#9399B2">      }</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#9399B2">  }</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#9399B2">}</span></span></code></pre></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">You can now run the indexer. In this case, you can specify which indexer you want to run
with the <code class="text-sm">--indexers</code> option. When the flag is omitted, all indexers are run concurrently.</p>
<div class="flex flex-col my-6 rounded overflow-hidden"><div class="-my-6 z-10"><div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal w-4 h-4 mr-2"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg><div>Terminal</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="Terminal" data-lang="bash"><code class="text-sm"><span class="line"><span style="color:#89B4FA;font-style:italic">pnpm</span><span style="color:#A6E3A1"> run</span><span style="color:#A6E3A1"> dev</span><span style="color:#A6E3A1"> --indexers</span><span style="color:#A6E3A1"> strk-staking</span></span></code></pre></div></div><div class="text-muted-foreground border border-gray-800 pt-4 -mt-4" style="background:var(--shiki-background)"><pre class="my-6 has-[[data-is-output=true]]:my-0 shadow-xl has-[[data-is-output=true]]:shadow-none border has-[[data-is-output=true]]:border-0 px-4 rounded border-gray-800 py-2 block leading-5 overflow-auto styled-scrollbar" style="background:#1e1e2e"><code data-is-output="true" class="text-sm">...
&gt; <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6a0b1a03080b180b470b1a1a2a5a445b445a">[email&#160;protected]</a> dev /tmp/my-indexer
&gt; apibara dev &quot;--indexers=strk-staking&quot;

✔ Output directory .apibara/build cleaned
✔ Types written to .apibara/types
✔ Indexers built in 20072 ms
✔ Restarting indexers
strk-staking | log Block number 929092
strk-staking | log Event 233 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7
strk-staking | log Event 234 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7
strk-staking | log Event 235 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7
strk-staking | log Event 236 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7
strk-staking | log Block number 929119
strk-staking | log Event 122 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7
strk-staking | log Event 123 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7
</code></pre></div></div>
<a href="#production-build" class="
                block font-heading mt-12 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0
          "><h2 id="production-build" class="hover:after:content-[&#x27;#&#x27;] after:relative after:pl-2">Production build</h2></a>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">The <code class="text-sm">apibara build</code> command is used to build a production version of the indexer. There are two main
changes for the production build:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">No hot code reloading is available.</li>
<li class="mt-2">Only one indexer is started. If your project has multiple indexers, it should start them independently.</li>
</ul>
<div class="flex flex-col my-6 rounded overflow-hidden"><div class="-my-6 z-10"><div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal w-4 h-4 mr-2"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg><div>Terminal</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="Terminal" data-lang="bash"><code class="text-sm"><span class="line"><span style="color:#89B4FA;font-style:italic">pnpm</span><span style="color:#A6E3A1"> run</span><span style="color:#A6E3A1"> build</span></span></code></pre></div></div><div class="text-muted-foreground border border-gray-800 pt-4 -mt-4" style="background:var(--shiki-background)"><pre class="my-6 has-[[data-is-output=true]]:my-0 shadow-xl has-[[data-is-output=true]]:shadow-none border has-[[data-is-output=true]]:border-0 px-4 rounded border-gray-800 py-2 block leading-5 overflow-auto styled-scrollbar" style="background:#1e1e2e"><code data-is-output="true" class="text-sm">&gt; <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7312031a111201125e12030333435d425d43">[email&#160;protected]</a> build /tmp/my-indexer
&gt; apibara build

✔ Output directory .apibara/build cleaned
✔ Types written to .apibara/types
◐ Building 2 indexers
✔ Build succeeded!
ℹ You can start the indexers with apibara start
</code></pre></div></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Once the indexers are built, you can run them in two (equivalent) ways:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">The <code class="text-sm">apibara start</code> command by specifying which indexer to run with the
<code class="text-sm">--indexer</code> flag. In this tutorial we are going to use this method.</li>
<li class="mt-2">Running <code class="text-sm">.apibara/build/start.mjs</code> with Node. This is useful when building Docker images for your indexers.</li>
</ul>
<div class="flex flex-col my-6 rounded overflow-hidden"><div class="-my-6 z-10"><div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal w-4 h-4 mr-2"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg><div>Terminal</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="Terminal" data-lang="bash"><code class="text-sm"><span class="line"><span style="color:#89B4FA;font-style:italic">pnpm</span><span style="color:#A6E3A1"> run</span><span style="color:#A6E3A1"> start</span><span style="color:#A6E3A1"> --indexer</span><span style="color:#A6E3A1"> rocket-pool</span></span></code></pre></div></div><div class="text-muted-foreground border border-gray-800 pt-4 -mt-4" style="background:var(--shiki-background)"><pre class="my-6 has-[[data-is-output=true]]:my-0 shadow-xl has-[[data-is-output=true]]:shadow-none border has-[[data-is-output=true]]:border-0 px-4 rounded border-gray-800 py-2 block leading-5 overflow-auto styled-scrollbar" style="background:#1e1e2e"><code data-is-output="true" class="text-sm">&gt; <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="93f2e3faf1f2e1f2bef2e3e3d3a3bda2bda3">[email&#160;protected]</a> start /tmp/my-indexer
&gt; apibara start &quot;--indexer&quot; &quot;rocket-pool&quot;

◐ Starting indexer rocket-pool
rocket-pool  | log Block number 21000071
rocket-pool  | log Log 239 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0xe3b7e285c02e9a1dad654ba095ee517cf4c15bf0c2c0adec555045e86ea1de89
rocket-pool  | log Block number 21000097
rocket-pool  | log Log 265 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba
rocket-pool  | log Log 266 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba
rocket-pool  | log Block number 21000111
...
</code></pre></div></div>
<a href="#runtime-configuration--presets" class="
                block font-heading mt-12 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0
          "><h2 id="runtime-configuration--presets" class="hover:after:content-[&#x27;#&#x27;] after:relative after:pl-2">Runtime configuration &amp; presets</h2></a>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Apibara provides a mechanism for indexers to load their configuration from the <code class="text-sm">apibara.config.ts</code> file:</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">Add the configuration under the <code class="text-sm">runtimeConfig</code> key in <code class="text-sm">apibara.config.ts</code>.</li>
<li class="mt-2">Change your indexer&#x27;s module to return a function that, given the runtime configuration, returns the indexer.</li>
</ul>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">You can update the configuration to define values that are configurable by your indexer. This example used
the runtime configuration to store the DNA stream URL and contract address.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="w-4 h-4 mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"></path></svg><div>apibara.config.ts</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="apibara.config.ts" data-lang="ts"><code class="text-sm"><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> defineConfig </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/config&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">export</span><span style="color:#CBA6F7"> default</span><span style="color:#89B4FA;font-style:italic"> defineConfig</span><span style="color:#CDD6F4">(</span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#CDD6F4">  runtimeConfig</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">    strkStaking</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">      startingBlock</span><span style="color:#94E2D5">:</span><span style="color:#FAB387"> 900_000</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">      streamUrl</span><span style="color:#94E2D5">:</span><span style="color:#A6E3A1"> &quot;https://mainnet.starknet.a5a.ch&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">      contractAddress</span><span style="color:#94E2D5">:</span></span>
<span class="line"><span style="color:#A6E3A1">        &quot;0x028d709c875c0ceac3dce7065bec5328186dc89fe254527084d1689910954b0a&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#9399B2">  },</span></span>
<span class="line"><span style="color:#9399B2">}</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span></code></pre></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Then update the indexer to return a function that returns the indexer. Your editor is going to show a type error
since the types of <code class="text-sm">config.streamUrl</code> and <code class="text-sm">config.contractAddress</code> are unknown, the next session is going to
explain how to solve that issue.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="w-4 h-4 mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"></path></svg><div>strk-staking.indexer.ts</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="strk-staking.indexer.ts" data-lang="ts"><code class="text-sm"><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> defineIndexer </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/indexer&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> useLogger </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/plugins&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> StarknetStream </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;@apibara/starknet&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> ApibaraRuntimeConfig </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/types&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">export</span><span style="color:#CBA6F7"> default</span><span style="color:#CBA6F7"> function</span><span style="color:#9399B2"> (</span><span style="color:#EBA0AC;font-style:italic">runtimeConfig</span><span style="color:#94E2D5">:</span><span style="color:#F9E2AF;font-style:italic"> ApibaraRuntimeConfig</span><span style="color:#9399B2">)</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CBA6F7">  const</span><span style="color:#CDD6F4"> config </span><span style="color:#94E2D5">=</span><span style="color:#CDD6F4"> runtimeConfig</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">strkStaking</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">  const</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> startingBlock</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> streamUrl </span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> =</span><span style="color:#CDD6F4"> config</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">  return</span><span style="color:#89B4FA;font-style:italic"> defineIndexer</span><span style="color:#CDD6F4">(StarknetStream)(</span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#CDD6F4">    streamUrl</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">    startingBlock</span><span style="color:#94E2D5">:</span><span style="color:#89B4FA;font-style:italic"> BigInt</span><span style="color:#CDD6F4">(startingBlock)</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">    filter</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">      events</span><span style="color:#94E2D5">:</span><span style="color:#CDD6F4"> [</span></span>
<span class="line"><span style="color:#9399B2">        {</span></span>
<span class="line"><span style="color:#CDD6F4">          address</span><span style="color:#94E2D5">:</span><span style="color:#CDD6F4"> config</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">contractAddress </span><span style="color:#CBA6F7">as</span><span style="color:#A6E3A1"> `0x</span><span style="color:#9399B2">${</span><span style="color:#CBA6F7">string</span><span style="color:#9399B2">}</span><span style="color:#A6E3A1">`</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">        },</span></span>
<span class="line"><span style="color:#CDD6F4">      ]</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#CBA6F7">    async</span><span style="color:#89B4FA;font-style:italic"> transform</span><span style="color:#9399B2">({</span><span style="color:#EBA0AC;font-style:italic"> block</span><span style="color:#9399B2"> })</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#6C7086;font-style:italic">      // Unchanged.</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#9399B2">  }</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#9399B2">}</span></span></code></pre></div>
<h3 class="font-heading mt-8 text-xl font-semibold tracking-tight" id="typescript--type-safety">Typescript &amp; type safety</h3>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">You may have noticed that the CLI generates types in <code class="text-sm">.apibara/types</code> before
building the indexers (both in development and production mode).
These types contain the type definition of your runtime configuration. You can
instruct Typescript to use them by adding the following <code class="text-sm">tsconfig.json</code> to your
project.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="w-4 h-4 mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 2.984V2h-.09c-.313 0-.616.062-.909.185a2.33 2.33 0 0 0-.775.53 2.23 2.23 0 0 0-.493.753v.001a3.542 3.542 0 0 0-.198.83v.002a6.08 6.08 0 0 0-.024.863c.012.29.018.58.018.869 0 .203-.04.393-.117.572v.001a1.504 1.504 0 0 1-.765.787 1.376 1.376 0 0 1-.558.115H2v.984h.09c.195 0 .38.04.556.121l.001.001c.178.078.329.184.455.318l.002.002c.13.13.233.285.307.465l.001.002c.078.18.117.368.117.566 0 .29-.006.58-.018.869-.012.296-.004.585.024.87v.001c.033.283.099.558.197.824v.001c.106.273.271.524.494.753.223.23.482.407.775.53.293.123.596.185.91.185H6v-.984h-.09c-.2 0-.387-.038-.563-.115a1.613 1.613 0 0 1-.457-.32 1.659 1.659 0 0 1-.309-.467c-.074-.18-.11-.37-.11-.573 0-.228.003-.453.011-.672.008-.228.008-.45 0-.665a4.639 4.639 0 0 0-.055-.64 2.682 2.682 0 0 0-.168-.609A2.284 2.284 0 0 0 3.522 8a2.284 2.284 0 0 0 .738-.955c.08-.192.135-.393.168-.602.033-.21.051-.423.055-.64.008-.22.008-.442 0-.666-.008-.224-.012-.45-.012-.678a1.47 1.47 0 0 1 .877-1.354 1.33 1.33 0 0 1 .563-.121H6zm4 10.032V14h.09c.313 0 .616-.062.909-.185.293-.123.552-.3.775-.53.223-.23.388-.48.493-.753v-.001c.1-.266.165-.543.198-.83v-.002c.028-.28.036-.567.024-.863-.012-.29-.018-.58-.018-.869 0-.203.04-.393.117-.572v-.001a1.502 1.502 0 0 1 .765-.787 1.38 1.38 0 0 1 .558-.115H14v-.984h-.09c-.196 0-.381-.04-.557-.121l-.001-.001a1.376 1.376 0 0 1-.455-.318l-.002-.002a1.415 1.415 0 0 1-.307-.465v-.002a1.405 1.405 0 0 1-.118-.566c0-.29.006-.58.018-.869a6.174 6.174 0 0 0-.024-.87v-.001a3.537 3.537 0 0 0-.197-.824v-.001a2.23 2.23 0 0 0-.494-.753 2.331 2.331 0 0 0-.775-.53 2.325 2.325 0 0 0-.91-.185H10v.984h.09c.2 0 .387.038.562.115.174.082.326.188.457.32.127.134.23.29.309.467.074.18.11.37.11.573 0 .228-.003.452-.011.672-.008.228-.008.45 0 .665.004.222.022.435.055.64.033.214.089.416.168.609a2.285 2.285 0 0 0 .738.955 2.285 2.285 0 0 0-.738.955 2.689 2.689 0 0 0-.168.602c-.033.21-.051.423-.055.64a9.15 9.15 0 0 0 0 .666c.008.224.012.45.012.678a1.471 1.471 0 0 1-.877 1.354 1.33 1.33 0 0 1-.563.121H10z"></path></svg><div>tsconfig.json</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="tsconfig.json" data-lang="json"><code class="text-sm"><span class="line"><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#9399B2">  &quot;</span><span style="color:#89B4FA">$schema</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#A6E3A1"> &quot;https://json.schemastore.org/tsconfig&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">  &quot;</span><span style="color:#89B4FA">compilerOptions</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#9399B2">    &quot;</span><span style="color:#89B4FA">target</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#A6E3A1"> &quot;ES2022&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    &quot;</span><span style="color:#89B4FA">module</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#A6E3A1"> &quot;ESNext&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    &quot;</span><span style="color:#89B4FA">moduleResolution</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#A6E3A1"> &quot;bundler&quot;</span></span>
<span class="line"><span style="color:#9399B2">  },</span></span>
<span class="line"><span style="color:#9399B2">  &quot;</span><span style="color:#89B4FA">include</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#9399B2"> [</span><span style="color:#A6E3A1">&quot;**/*.ts&quot;</span><span style="color:#9399B2">,</span><span style="color:#A6E3A1"> &quot;.apibara/types&quot;</span><span style="color:#9399B2">],</span></span>
<span class="line"><span style="color:#9399B2">  &quot;</span><span style="color:#89B4FA">exclude</span><span style="color:#9399B2">&quot;</span><span style="color:#9399B2">:</span><span style="color:#9399B2"> [</span><span style="color:#A6E3A1">&quot;node_modules&quot;</span><span style="color:#9399B2">]</span></span>
<span class="line"><span style="color:#9399B2">}</span></span></code></pre></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">After restarting the Typescript language server you will have a type-safe runtime configuration
right into your indexer!</p>
<h3 class="font-heading mt-8 text-xl font-semibold tracking-tight" id="presets">Presets</h3>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">Having a single runtime configuration is useful but not enough for real-world
indexers. The CLI provides a way to have multiple &quot;presets&quot; and select which
one to use at runtime. This is useful, for example, if you&#x27;re deploying the
same indexers on multiple networks where only the DNA stream URL and contract
addresses change.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">You can have any number of presets in the configuration and use the <code class="text-sm">--preset</code> flag to select which one to use.
For example, you can add a <code class="text-sm">sepolia</code> preset that contains the URL of the Starknet Sepolia DNA stream.
If a preset doesn&#x27;t specify a key, then the value from the root configuration is used.</p>
<div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="w-4 h-4 mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"></path></svg><div>apibara.config.ts</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="apibara.config.ts" data-lang="ts"><code class="text-sm"><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> defineConfig </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> &quot;apibara/config&quot;</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">export</span><span style="color:#CBA6F7"> default</span><span style="color:#89B4FA;font-style:italic"> defineConfig</span><span style="color:#CDD6F4">(</span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#CDD6F4">  runtimeConfig</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">    streamUrl</span><span style="color:#94E2D5">:</span><span style="color:#A6E3A1"> &quot;https://mainnet.starknet.a5a.ch&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">    contractAddress</span><span style="color:#94E2D5">:</span></span>
<span class="line"><span style="color:#A6E3A1">      &quot;0x028d709c875c0ceac3dce7065bec5328186dc89fe254527084d1689910954b0a&quot;</span><span style="color:#CBA6F7"> as</span><span style="color:#A6E3A1"> `0x</span><span style="color:#9399B2">${</span><span style="color:#CBA6F7">string</span><span style="color:#9399B2">}</span><span style="color:#A6E3A1">`</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">  },</span></span>
<span class="line"><span style="color:#CDD6F4">  presets</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">    sepolia</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">      runtimeConfig</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">        streamUrl</span><span style="color:#94E2D5">:</span><span style="color:#A6E3A1"> &quot;https://sepolia.starknet.a5a.ch&quot;</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">      },</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#9399B2">  },</span></span>
<span class="line"><span style="color:#9399B2">}</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span></code></pre></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">You can then run the indexer in development mode using the <code class="text-sm">sepolia</code> preset.</p>
<div class="flex flex-col my-6 rounded overflow-hidden"><div class="-my-6 z-10"><div class="my-6 rounded overflow-hidden shadow-xl border border-gray-800"><div class="border-b flex flex-row justify-between items-center text-sm px-4 py-2" style="background:#181825;border-color:#00000000"><div class="flex flex-row justify-start items-center text-muted-foreground h-8"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal w-4 h-4 mr-2"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg><div>Terminal</div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md h-8 w-8 p-2" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4 text-muted-foreground"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><pre class="px-4 py-2 block leading-5 overflow-auto styled-scrollbar" style="background-color:#1e1e2e;color:#cdd6f4" tabindex="0" data-title="Terminal" data-lang="bash"><code class="text-sm"><span class="line"><span style="color:#89B4FA;font-style:italic">npm</span><span style="color:#A6E3A1"> run</span><span style="color:#A6E3A1"> dev</span><span style="color:#A6E3A1"> --</span><span style="color:#A6E3A1"> --indexers=strk-staking</span><span style="color:#A6E3A1"> --preset=sepolia</span></span></code></pre></div></div><div class="text-muted-foreground border border-gray-800 pt-4 -mt-4" style="background:var(--shiki-background)"><pre class="my-6 has-[[data-is-output=true]]:my-0 shadow-xl has-[[data-is-output=true]]:shadow-none border has-[[data-is-output=true]]:border-0 px-4 rounded border-gray-800 py-2 block leading-5 overflow-auto styled-scrollbar" style="background:#1e1e2e"><code data-is-output="true" class="text-sm">&gt; <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="630e1a4e0a0d07061b061123524d534d53">[email&#160;protected]</a> dev
&gt; apibara dev --indexers=strk-staking --preset=sepolia

✔ Output directory .apibara/build cleaned
✔ Types written to .apibara/types
✔ Indexers built in 3858 ms
✔ Restarting indexers
strk-staking | log Block number 100092
strk-staking | log Event 233 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7
strk-staking | log Event 234 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7
strk-staking | log Event 235 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7
strk-staking | log Event 236 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7
strk-staking | log Block number 100119
strk-staking | log Event 122 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7
strk-staking | log Event 123 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7
...
</code></pre></div></div>
<a href="#storing-data--persisting-state-across-restarts" class="
                block font-heading mt-12 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0
          "><h2 id="storing-data--persisting-state-across-restarts" class="hover:after:content-[&#x27;#&#x27;] after:relative after:pl-2">Storing data &amp; persisting state across restarts</h2></a>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">All indexers implemented in this tutorial are stateless. They don&#x27;t store any
data to a database and if you restart them they will restart indexing from the
beginning.</p>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">You can refer to our storage section to learn more about writing data to a database
and persisting the indexer&#x27;s state across restarts.</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2"><a class="font-medium underline underline-offset-4" href="/docs/storage/drizzle-pg">Drizzle with PostgreSQL</a></li>
</ul></article><div class="mt-8 pt-2 border-t flex flex-row justify-between text-muted-foreground w-full"><div><span>Last modified<!-- --> </span></div><div><a class="flex items-center hover:text-foreground" href="https://github.com/apibara/documentation/blob/main/docs/v2/getting-started/installation/index.mdx" target="_blank"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="w-4 h-4 inline-block mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>Edit on GitHub</a></div></div></div></div></div></main></div><div class="border-t bg-muted px-4 py-12 md:py-16"><div class="container flex flex-col px-0"><div class=""><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="flex flex-col items-start space-y-8"><svg viewBox="0 0 1600 461" color="hsl(var(--primary))" fill="none" class="h-14"><title>Apibara</title><g clip-path="url(#clip0_104_6)"><path d="M486.76 341L552.136 133.64H602.968L668.344 341H632.632L573.304 154.952H581.08L522.472 341H486.76ZM523.192 296.072V263.672H632.056V296.072H523.192ZM769.115 345.32C753.947 345.32 741.227 341.72 730.955 334.52C720.683 327.32 712.955 317.528 707.771 305.144C702.587 292.664 699.995 278.696 699.995 263.24C699.995 247.592 702.587 233.576 707.771 221.192C712.955 208.808 720.539 199.064 730.523 191.96C740.603 184.76 753.035 181.16 767.819 181.16C782.507 181.16 795.227 184.76 805.979 191.96C816.827 199.064 825.227 208.808 831.179 221.192C837.131 233.48 840.107 247.496 840.107 263.24C840.107 278.792 837.179 292.76 831.323 305.144C825.467 317.528 817.211 327.32 806.555 334.52C795.899 341.72 783.419 345.32 769.115 345.32ZM694.091 410.12V185.48H724.763V294.632H729.083V410.12H694.091ZM763.787 314.216C772.811 314.216 780.251 311.96 786.107 307.448C791.963 302.936 796.283 296.84 799.067 289.16C801.947 281.384 803.387 272.744 803.387 263.24C803.387 253.832 801.947 245.288 799.067 237.608C796.187 229.832 791.723 223.688 785.675 219.176C779.627 214.568 771.947 212.264 762.635 212.264C753.803 212.264 746.603 214.424 741.035 218.744C735.467 222.968 731.339 228.92 728.651 236.6C726.059 244.184 724.763 253.064 724.763 263.24C724.763 273.32 726.059 282.2 728.651 289.88C731.339 297.56 735.515 303.56 741.179 307.88C746.939 312.104 754.475 314.216 763.787 314.216ZM874.728 161.864V130.04H909.432V161.864H874.728ZM874.728 341V185.48H909.432V341H874.728ZM1027.3 345.32C1012.13 345.32 999.414 341.72 989.142 334.52C978.87 327.32 971.142 317.528 965.958 305.144C960.774 292.664 958.182 278.696 958.182 263.24C958.182 247.592 960.774 233.576 965.958 221.192C971.142 208.808 978.726 199.064 988.71 191.96C998.79 184.76 1011.22 181.16 1026.01 181.16C1040.69 181.16 1053.41 184.76 1064.17 191.96C1075.01 199.064 1083.41 208.808 1089.37 221.192C1095.32 233.48 1098.29 247.496 1098.29 263.24C1098.29 278.792 1095.37 292.76 1089.51 305.144C1083.65 317.528 1075.4 327.32 1064.74 334.52C1054.09 341.72 1041.61 345.32 1027.3 345.32ZM952.278 341V133.64H987.27V231.848H982.95V341H952.278ZM1021.97 314.216C1031 314.216 1038.44 311.96 1044.29 307.448C1050.15 302.936 1054.47 296.84 1057.25 289.16C1060.13 281.384 1061.57 272.744 1061.57 263.24C1061.57 253.832 1060.13 245.288 1057.25 237.608C1054.37 229.832 1049.91 223.688 1043.86 219.176C1037.81 214.568 1030.13 212.264 1020.82 212.264C1011.99 212.264 1004.79 214.424 999.222 218.744C993.654 222.968 989.526 228.92 986.838 236.6C984.246 244.184 982.95 253.064 982.95 263.24C982.95 273.32 984.246 282.2 986.838 289.88C989.526 297.56 993.702 303.56 999.366 307.88C1005.13 312.104 1012.66 314.216 1021.97 314.216ZM1173.52 345.32C1162.29 345.32 1152.79 343.208 1145.01 338.984C1137.24 334.664 1131.33 328.952 1127.3 321.848C1123.36 314.744 1121.4 306.92 1121.4 298.376C1121.4 290.888 1122.64 284.168 1125.14 278.216C1127.64 272.168 1131.48 266.984 1136.66 262.664C1141.84 258.248 1148.56 254.648 1156.82 251.864C1163.06 249.848 1170.36 248.024 1178.71 246.392C1187.16 244.76 1196.28 243.272 1206.07 241.928C1215.96 240.488 1226.28 238.952 1237.03 237.32L1224.64 244.376C1224.74 233.624 1222.34 225.704 1217.44 220.616C1212.55 215.528 1204.29 212.984 1192.68 212.984C1185.67 212.984 1178.9 214.616 1172.37 217.88C1165.84 221.144 1161.28 226.76 1158.69 234.728L1127.01 224.792C1130.85 211.64 1138.15 201.08 1148.9 193.112C1159.75 185.144 1174.34 181.16 1192.68 181.16C1206.5 181.16 1218.64 183.416 1229.11 187.928C1239.67 192.44 1247.49 199.832 1252.58 210.104C1255.36 215.576 1257.04 221.192 1257.62 226.952C1258.2 232.616 1258.48 238.808 1258.48 245.528V341H1228.1V307.304L1233.14 312.776C1226.13 324.008 1217.92 332.264 1208.52 337.544C1199.2 342.728 1187.54 345.32 1173.52 345.32ZM1180.44 317.672C1188.31 317.672 1195.03 316.28 1200.6 313.496C1206.16 310.712 1210.58 307.304 1213.84 303.272C1217.2 299.24 1219.46 295.448 1220.61 291.896C1222.44 287.48 1223.44 282.44 1223.64 276.776C1223.92 271.016 1224.07 266.36 1224.07 262.808L1234.72 265.976C1224.26 267.608 1215.28 269.048 1207.8 270.296C1200.31 271.544 1193.88 272.744 1188.5 273.896C1183.12 274.952 1178.37 276.152 1174.24 277.496C1170.21 278.936 1166.8 280.616 1164.02 282.536C1161.24 284.456 1159.08 286.664 1157.54 289.16C1156.1 291.656 1155.38 294.584 1155.38 297.944C1155.38 301.784 1156.34 305.192 1158.26 308.168C1160.18 311.048 1162.96 313.352 1166.61 315.08C1170.36 316.808 1174.96 317.672 1180.44 317.672ZM1295.97 341V185.48H1326.64V223.352L1322.9 218.456C1324.82 213.272 1327.36 208.568 1330.53 204.344C1333.8 200.024 1337.68 196.472 1342.2 193.688C1346.04 191.096 1350.26 189.08 1354.87 187.64C1359.57 186.104 1364.37 185.192 1369.27 184.904C1374.16 184.52 1378.92 184.712 1383.52 185.48V217.88C1378.92 216.536 1373.59 216.104 1367.54 216.584C1361.59 217.064 1356.21 218.744 1351.41 221.624C1346.61 224.216 1342.68 227.528 1339.6 231.56C1336.63 235.592 1334.42 240.2 1332.98 245.384C1331.54 250.472 1330.82 255.992 1330.82 261.944V341H1295.97ZM1450.84 345.32C1439.6 345.32 1430.1 343.208 1422.32 338.984C1414.55 334.664 1408.64 328.952 1404.61 321.848C1400.68 314.744 1398.71 306.92 1398.71 298.376C1398.71 290.888 1399.96 284.168 1402.45 278.216C1404.95 272.168 1408.79 266.984 1413.97 262.664C1419.16 258.248 1425.88 254.648 1434.13 251.864C1440.37 249.848 1447.67 248.024 1456.02 246.392C1464.47 244.76 1473.59 243.272 1483.38 241.928C1493.27 240.488 1503.59 238.952 1514.34 237.32L1501.96 244.376C1502.05 233.624 1499.65 225.704 1494.76 220.616C1489.86 215.528 1481.6 212.984 1469.99 212.984C1462.98 212.984 1456.21 214.616 1449.68 217.88C1443.16 221.144 1438.6 226.76 1436 234.728L1404.32 224.792C1408.16 211.64 1415.46 201.08 1426.21 193.112C1437.06 185.144 1451.65 181.16 1469.99 181.16C1483.81 181.16 1495.96 183.416 1506.42 187.928C1516.98 192.44 1524.8 199.832 1529.89 210.104C1532.68 215.576 1534.36 221.192 1534.93 226.952C1535.51 232.616 1535.8 238.808 1535.8 245.528V341H1505.41V307.304L1510.45 312.776C1503.44 324.008 1495.24 332.264 1485.83 337.544C1476.52 342.728 1464.85 345.32 1450.84 345.32ZM1457.75 317.672C1465.62 317.672 1472.34 316.28 1477.91 313.496C1483.48 310.712 1487.89 307.304 1491.16 303.272C1494.52 299.24 1496.77 295.448 1497.92 291.896C1499.75 287.48 1500.76 282.44 1500.95 276.776C1501.24 271.016 1501.38 266.36 1501.38 262.808L1512.04 265.976C1501.57 267.608 1492.6 269.048 1485.11 270.296C1477.62 271.544 1471.19 272.744 1465.81 273.896C1460.44 274.952 1455.68 276.152 1451.56 277.496C1447.52 278.936 1444.12 280.616 1441.33 282.536C1438.55 284.456 1436.39 286.664 1434.85 289.16C1433.41 291.656 1432.69 294.584 1432.69 297.944C1432.69 301.784 1433.65 305.192 1435.57 308.168C1437.49 311.048 1440.28 313.352 1443.92 315.08C1447.67 316.808 1452.28 317.672 1457.75 317.672Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M172.261 410.969C98.0948 384.564 45 313.735 45 230.505C45 224.019 45.3224 217.609 45.9522 211.288C63.9951 201.908 81.7329 190.752 90.3601 182.24C92.3653 180.562 93.8555 179.302 95.0239 178.315C97.0495 176.604 98.1077 175.71 99.2049 174.866C100.405 173.944 101.652 173.082 104.262 171.278C105.417 170.48 106.838 169.498 108.64 168.244C109.033 167.971 108.753 166.714 108.323 164.788C107.793 162.41 107.036 159.011 107.036 155.186C107.007 153.709 108.233 150.551 109.41 147.519L109.41 147.519C110.417 144.927 111.388 142.426 111.509 141.146C111.866 137.36 113.198 134.677 114.43 134.349C115.662 134.021 123.376 134.349 131.501 138.225C137.635 141.151 141.876 147.869 144.433 151.918C145.703 153.93 146.557 155.283 147.021 155.186C147.642 155.055 148.13 154.938 148.576 154.831C149.473 154.616 150.2 154.442 151.496 154.277C151.946 154.22 152.395 152.655 151.09 148.846C150.42 146.89 151.113 145.124 151.98 142.913C152.346 141.98 152.743 140.967 153.081 139.828C153.322 139.017 153.442 138.239 153.551 137.533C153.788 135.992 153.972 134.793 155.252 134.349C156.668 133.857 166.181 134.349 171.973 138.914C176.153 142.209 177.985 147.071 179.175 150.23L179.175 150.23L179.175 150.23C179.634 151.447 179.997 152.411 180.363 152.936C181.97 152.906 186.769 152.92 190.183 152.929H190.183H190.184H190.184C191.467 152.933 192.555 152.936 193.203 152.936C233.719 152.936 296.799 156.524 335.719 182.24C366.02 202.261 365.12 214.887 363.523 237.292L363.523 237.293C363.295 240.482 363.054 243.869 362.886 247.503C362.262 261.053 360.981 276.248 358.05 285.032C355.959 291.298 352.672 292.709 349.394 294.116C347.294 295.018 345.198 295.917 343.423 298.092C341.54 300.399 341.378 303.233 341.228 305.861C341.05 308.982 340.889 311.812 337.879 313.12C313.588 323.675 272.295 329.323 243.718 333.231L243.718 333.231C229.967 335.111 219.162 336.589 214.611 338.017C209.987 339.469 207.445 345.894 203.5 355.87C198.268 369.099 190.567 388.573 172.261 410.969ZM351.659 220.933C351.555 228.392 347.679 230.452 342.935 230.385C338.191 230.319 334.375 228.152 334.48 220.693C334.584 213.233 338.515 207.24 343.259 207.307C348.003 207.373 351.764 213.474 351.659 220.933ZM197.468 204.095C203.963 203.771 208.794 203.53 209.151 198.317C209.692 190.407 201.265 185.5 188.113 186.187C174.96 186.875 162.913 197.366 166.133 204.304C168.722 209.881 176.247 207.954 183.344 206.138C184.394 205.869 185.434 205.603 186.448 205.363C190.307 204.452 194.11 204.263 197.468 204.095Z" fill="currentColor"></path><circle cx="236.506" cy="230.506" r="181.506" stroke="currentColor" stroke-width="20"></circle></g><defs><clipPath id="clip0_104_6"><rect width="1600" height="461" fill="white"></rect></clipPath></defs></svg><p class="text-muted-foreground">Apibara is the fastest platform to build production-grade indexers that connect onchain data to web2 services.</p></div><div><div><p class="font-semibold text-lg mb-4">Resources</p><ul class="space-y-2"><li><a class="text-muted-foreground hover:text-white" href="/docs" data-discover="true">Documentation</a></li><li><a class="text-muted-foreground hover:text-white" href="/brand-kit" data-discover="true">Brand Kit</a></li><li><a class="text-muted-foreground hover:text-white" href="/devlog" data-discover="true">Devlog</a></li></ul></div></div></div></div></div><div class="container flex flex-col md:flex-row justify-between items-center border-t mt-8 pt-8 px-0 text-muted-foreground"><p>© <!-- -->2025<!-- --> GNC Labs Limited. All rights reserved.</p><div class="flex items-center space-x-2 justify-center"><a rel="noreferrer" href="https://status.apibara.com/" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border border-input bg-background hover:bg-accent h-10 px-4 py-2 hover:text-accent-foreground data-[status=operational]:bg-emerald-400/10 data-[status=operational]:hover:bg-emerald-400/20 data-[status=operational]:text-emerald-500 data-[status=degraded]:bg-amber-400/10 data-[status=degraded]:hover:bg-amber-400/20 data-[status=degraded]:text-amber-500 data-[status=outage]:bg-red-400/10 data-[status=outage]:hover:bg-red-400/20 data-[status=outage]:text-red-500" data-status="operational"><div class="mr-2 flex items-center justify-center"><span class="animate-ping absolute rounded-full w-3 h-3 [[data-status=operational]_&amp;]:bg-emerald-400 [[data-status=degraded]_&amp;]:bg-amber-400 [[data-status=outage]_&amp;]:bg-red-400"></span><span class="rounded-full w-3 h-3 [[data-status=operational]_&amp;]:bg-emerald-400 [[data-status=degraded]_&amp;]:bg-amber-400 [[data-status=outage]_&amp;]:bg-red-400"></span></div>All systems operational</button></a><a rel="noreferrer" href="https://github.com/apibara/dna" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></button></a><a rel="noreferrer" href="https://www.twitter.com/apibara_web3" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></button></a><a rel="noreferrer" href="https://discord.gg/m7B92CNFNt" target="_blank"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" class="w-6 h-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path></svg></button></a></div></div></div><div class="fixed z-[200] bottom-0 left-0 right-0 p-4 sm:p-0 sm:left-4 sm:bottom-4 w-full sm:max-w-[300px] duration-700 transition-[opacity,transform] translate-y-8 opacity-0"><div class="m-0 sm:m-3 dark:bg-card bg-background border border-border rounded-lg shadow-lg"><div class="p-3 flex items-center justify-between border-b border-border"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cookie h-3 w-3 sm:h-4 sm:w-4"><path d="M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5"></path><path d="M8.5 8.5v.01"></path><path d="M16 15.5v.01"></path><path d="M12 12v.01"></path><path d="M11 17v.01"></path><path d="M7 14v.01"></path></svg><span class="text-xs sm:text-sm font-medium">Cookie Notice</span></div></div><div class="p-3"><p class="text-[11px] sm:text-xs text-muted-foreground">We use cookies to enhance your browsing experience.</p><div class="flex flex-col sm:flex-row items-center gap-2 mt-3"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md w-full h-6 sm:h-7 text-[11px] sm:text-xs px-2 sm:px-3">Accept</button><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md w-full h-6 sm:h-7 text-[11px] sm:text-xs px-2 sm:px-3">Decline</button></div></div></div></div><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>((storageKey2, restoreKey) => {
    if (!window.history.state || !window.history.state.key) {
      let key = Math.random().toString(32).slice(2);
      window.history.replaceState({ key }, "");
    }
    try {
      let positions = JSON.parse(sessionStorage.getItem(storageKey2) || "{}");
      let storedY = positions[restoreKey || window.history.state.key];
      if (typeof storedY === "number") {
        window.scrollTo(0, storedY);
      }
    } catch (error) {
      console.error(error);
      sessionStorage.removeItem(storageKey2);
    }
  })("react-router-scroll-positions", null)</script><script>window.__reactRouterContext = {"basename":"/","future":{"unstable_optimizeDeps":false,"unstable_splitRouteModules":false,"unstable_viteEnvironmentApi":false},"ssr":true,"isSpaMode":false};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());</script><script type="module" async="">;
import * as route0 from "/assets/root-ipolV0AO.js";
import * as route1 from "/assets/_marketing-CGxmZCn-.js";
import * as route2 from "/assets/_marketing._docs-TRmate3G.js";
import * as route3 from "/assets/_marketing._docs.docs._-BiDJ9VmJ.js";
  window.__reactRouterManifest = {
  "entry": {
    "module": "/assets/entry.client-CwKnTHhE.js",
    "imports": [
      "/assets/button-B7cAtSR2.js",
      "/assets/utils-Dxu6Btum.js",
      "/assets/cookie-consent-clHrPgeC.js",
      "/assets/index-PuoCZrSn.js",
      "/assets/index-D1RvQa8Q.js",
      "/assets/createLucideIcon-O_0coRDA.js"
    ],
    "css": []
  },
  "routes": {
    "root": {
      "id": "root",
      "path": "",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": true,
      "module": "/assets/root-ipolV0AO.js",
      "imports": [
        "/assets/button-B7cAtSR2.js",
        "/assets/utils-Dxu6Btum.js",
        "/assets/cookie-consent-clHrPgeC.js",
        "/assets/index-PuoCZrSn.js",
        "/assets/index-D1RvQa8Q.js",
        "/assets/createLucideIcon-O_0coRDA.js",
        "/assets/constants-Dl4TjVTX.js",
        "/assets/useBaseQuery-BvxeFzjL.js",
        "/assets/index-CnbLAjcy.js",
        "/assets/logo-fuNHPPx1.js",
        "/assets/utils-UlyEuLxL.js",
        "/assets/meta-M0oKkN_M.js",
        "/assets/iconBase-CrV5vKX5.js"
      ],
      "css": [
        "/assets/root-DQw5JbnM.css"
      ]
    },
    "routes/_marketing": {
      "id": "routes/_marketing",
      "parentId": "root",
      "hasAction": false,
      "hasLoader": false,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/_marketing-CGxmZCn-.js",
      "imports": [
        "/assets/constants-Dl4TjVTX.js",
        "/assets/button-B7cAtSR2.js",
        "/assets/index-CnbLAjcy.js",
        "/assets/utils-UlyEuLxL.js",
        "/assets/devlog-wkYzDMBY.js",
        "/assets/logo-fuNHPPx1.js",
        "/assets/index-CJcc-0k1.js",
        "/assets/index-D0z94NDm.js",
        "/assets/createLucideIcon-O_0coRDA.js",
        "/assets/index-DfeBrNmd.js",
        "/assets/version-select-PcccTYUw.js",
        "/assets/iconBase-CrV5vKX5.js",
        "/assets/useBaseQuery-BvxeFzjL.js",
        "/assets/utils-Dxu6Btum.js",
        "/assets/index-D1RvQa8Q.js",
        "/assets/index-PuoCZrSn.js",
        "/assets/index-D-3o5vKG.js",
        "/assets/index-CKNh5fP9.js",
        "/assets/check-BIZc5W9p.js"
      ],
      "css": []
    },
    "routes/_marketing._docs": {
      "id": "routes/_marketing._docs",
      "parentId": "routes/_marketing",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/_marketing._docs-TRmate3G.js",
      "imports": [
        "/assets/constants-Dl4TjVTX.js",
        "/assets/button-B7cAtSR2.js",
        "/assets/index-D1RvQa8Q.js",
        "/assets/utils-UlyEuLxL.js",
        "/assets/version-select-PcccTYUw.js",
        "/assets/index-PuoCZrSn.js",
        "/assets/index-D-3o5vKG.js",
        "/assets/createLucideIcon-O_0coRDA.js",
        "/assets/index-D0z94NDm.js",
        "/assets/index-CJcc-0k1.js",
        "/assets/index-CKNh5fP9.js",
        "/assets/check-BIZc5W9p.js"
      ],
      "css": [
        "/assets/_marketing-CAX2t5ve.css"
      ]
    },
    "routes/_marketing._docs.docs.$": {
      "id": "routes/_marketing._docs.docs.$",
      "parentId": "routes/_marketing._docs",
      "path": "docs/*",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": true,
      "module": "/assets/_marketing._docs.docs._-BiDJ9VmJ.js",
      "imports": [
        "/assets/constants-Dl4TjVTX.js",
        "/assets/button-B7cAtSR2.js",
        "/assets/index-D-3o5vKG.js",
        "/assets/components-jah0Jotm.js",
        "/assets/index-CnbLAjcy.js",
        "/assets/meta-M0oKkN_M.js",
        "/assets/root-ipolV0AO.js",
        "/assets/index-PuoCZrSn.js",
        "/assets/check-BIZc5W9p.js",
        "/assets/createLucideIcon-O_0coRDA.js",
        "/assets/iconBase-CrV5vKX5.js",
        "/assets/useBaseQuery-BvxeFzjL.js",
        "/assets/cookie-consent-clHrPgeC.js",
        "/assets/utils-Dxu6Btum.js",
        "/assets/logo-fuNHPPx1.js",
        "/assets/utils-UlyEuLxL.js"
      ],
      "css": [
        "/assets/root-DQw5JbnM.css"
      ]
    },
    "routes/_marketing._index": {
      "id": "routes/_marketing._index",
      "parentId": "routes/_marketing",
      "index": true,
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/_marketing._index-Do53JMs3.js",
      "imports": [
        "/assets/constants-Dl4TjVTX.js",
        "/assets/button-B7cAtSR2.js",
        "/assets/components-jah0Jotm.js",
        "/assets/index-DfeBrNmd.js",
        "/assets/iconBase-CrV5vKX5.js",
        "/assets/index-PuoCZrSn.js",
        "/assets/check-BIZc5W9p.js",
        "/assets/createLucideIcon-O_0coRDA.js"
      ],
      "css": []
    }
  },
  "url": "/assets/manifest-9386f539.js",
  "version": "9386f539"
};
  window.__reactRouterRouteModules = {"root":route0,"routes/_marketing":route1,"routes/_marketing._docs":route2,"routes/_marketing._docs.docs.$":route3};

import("/assets/entry.client-CwKnTHhE.js");</script><!--$--><script>window.__reactRouterContext.streamController.enqueue("[{\"_1\":2,\"_153\":-5,\"_154\":-5},\"loaderData\",{\"_3\":4,\"_13\":14,\"_130\":131,\"_152\":-5},\"root\",{\"_5\":6,\"_7\":8},\"siteUrl\",\"https://www.apibara.com/docs/getting-started/installation\",\"posthog\",{\"_9\":10,\"_11\":12},\"key\",\"phc_UZjZ1DOpyAQOegVmcW09tIO4XcIKvsd6qtHbCmXZw4F\",\"host\",\"https://us.i.posthog.com\",\"routes/_marketing._docs\",{\"_15\":16,\"_17\":18,\"_126\":127},\"version\",\"v2\",\"sidebar\",[19,51,74,112],{\"_20\":21,\"_22\":23,\"_24\":25},\"name\",\"Getting Started\",\"path\",\"/\",\"items\",[26,30,33,36,39,42,45,48],{\"_20\":27,\"_28\":29,\"_22\":23},\"Overview\",\"type\",\"page\",{\"_20\":31,\"_28\":29,\"_22\":32},\"Installation\",\"/getting-started/installation\",{\"_20\":34,\"_28\":29,\"_22\":35},\"Indexers\",\"/getting-started/indexers\",{\"_20\":37,\"_28\":29,\"_22\":38},\"Plugins \u0026 Hooks\",\"/getting-started/plugins\",{\"_20\":40,\"_28\":29,\"_22\":41},\"apibara.config.ts\",\"/getting-started/configuration\",{\"_20\":43,\"_28\":29,\"_22\":44},\"instrumentation.ts\",\"/getting-started/instrumentation\",{\"_20\":46,\"_28\":29,\"_22\":47},\"Top tips\",\"/getting-started/top-tips\",{\"_20\":49,\"_28\":29,\"_22\":50},\"Upgrading from v1\",\"/getting-started/upgrading\",{\"_20\":52,\"_22\":53,\"_24\":54},\"Storage\",\"/storage\",[55],{\"_20\":56,\"_28\":57,\"_22\":58,\"_59\":60},\"Drizzle\",\"group\",\"/drizzle-pg\",\"groupItems\",[61,62,65,68,71],{\"_20\":27,\"_28\":29,\"_22\":23},{\"_20\":63,\"_28\":29,\"_22\":64},\"Testing\",\"/testing\",{\"_20\":66,\"_28\":29,\"_22\":67},\"Internals\",\"/internals\",{\"_20\":69,\"_28\":29,\"_22\":70},\"API Ref\",\"/api-reference\",{\"_20\":72,\"_28\":29,\"_22\":73},\"FAQ\",\"/faq\",{\"_20\":75,\"_22\":76,\"_24\":77},\"Networks\",\"/networks\",[78,89,96],{\"_20\":79,\"_28\":57,\"_22\":80,\"_59\":81},\"Beacon Chain\",\"/beaconchain\",[82,83,86],{\"_20\":27,\"_28\":29,\"_22\":23},{\"_20\":84,\"_28\":29,\"_22\":85},\"Filter\",\"/filter\",{\"_20\":87,\"_28\":29,\"_22\":88},\"Block data\",\"/data\",{\"_20\":90,\"_28\":57,\"_22\":91,\"_59\":92},\"EVM\",\"/evm\",[93,94,95],{\"_20\":27,\"_28\":29,\"_22\":23},{\"_20\":84,\"_28\":29,\"_22\":85},{\"_20\":87,\"_28\":29,\"_22\":88},{\"_20\":97,\"_28\":57,\"_22\":98,\"_59\":99},\"Starknet\",\"/starknet\",[100,101,102,103,106,109],{\"_20\":27,\"_28\":29,\"_22\":23},{\"_20\":84,\"_28\":29,\"_22\":85},{\"_20\":87,\"_28\":29,\"_22\":88},{\"_20\":104,\"_28\":29,\"_22\":105},\"Event decoder\",\"/decoder\",{\"_20\":107,\"_28\":29,\"_22\":108},\"Helpers\",\"/helpers\",{\"_20\":110,\"_28\":29,\"_22\":111},\"Upgrading\",\"/upgrade-from-v1\",{\"_20\":113,\"_22\":114,\"_24\":115},\"DNA Protocol\",\"/dna\",[116,117,120,123],{\"_20\":27,\"_28\":29,\"_22\":23},{\"_20\":118,\"_28\":29,\"_22\":119},\"Architecture\",\"/architecture\",{\"_20\":121,\"_28\":29,\"_22\":122},\"Protocol\",\"/protocol\",{\"_20\":124,\"_28\":29,\"_22\":125},\"Add new chain\",\"/add-new-chain\",\"slug\",[128,129],\"getting-started\",\"installation\",\"routes/_marketing._docs.docs.$\",{\"_29\":132,\"_5\":6,\"_150\":151},{\"_126\":133,\"_134\":135,\"_136\":137,\"_144\":145,\"_146\":147,\"_148\":149},\"getting-started/installation\",\"componentCode\",\"var Component=(()=\u003e{var p=Object.create;var s=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var u=(l,n)=\u003e()=\u003e(n||l((n={exports:{}}).exports,n),n.exports),D=(l,n)=\u003e{for(var c in n)s(l,c,{get:n[c],enumerable:!0})},o=(l,n,c,a)=\u003e{if(n\u0026\u0026typeof n==\\\"object\\\"||typeof n==\\\"function\\\")for(let r of m(n))!B.call(l,r)\u0026\u0026r!==c\u0026\u0026s(l,r,{get:()=\u003en[r],enumerable:!(a=y(n,r))||a.enumerable});return l};var g=(l,n,c)=\u003e(c=l!=null?p(f(l)):{},o(n||!l||!l.__esModule?s(c,\\\"default\\\",{value:l,enumerable:!0}):c,l)),A=l=\u003eo(s({},\\\"__esModule\\\",{value:!0}),l);var t=u((N,i)=\u003e{i.exports=_jsx_runtime});var C={};D(C,{default:()=\u003eh,frontmatter:()=\u003eb});var e=g(t()),b={title:\\\"Installation\\\",description:\\\"Learn how to install and get started with Apibara.\\\",diataxis:\\\"tutorial\\\",updatedAt:\\\"2025-06-11\\\"};function d(l){let n={a:\\\"a\\\",code:\\\"code\\\",div:\\\"div\\\",em:\\\"em\\\",h1:\\\"h1\\\",h2:\\\"h2\\\",h3:\\\"h3\\\",li:\\\"li\\\",p:\\\"p\\\",pre:\\\"pre\\\",span:\\\"span\\\",ul:\\\"ul\\\",...l.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h1,{id:\\\"installation\\\",children:\\\"Installation\\\"}),`\\n`,(0,e.jsx)(n.p,{children:`This tutorial shows how to setup an Apibara project from scratch. The goal is to\\nstart indexing data as quickly as possible and to understand the basic structure\\nof a project. By the end of this tutorial, you will have a basic indexer that\\nstreams data from two networks (Ethereum and Starknet).`}),`\\n`,(0,e.jsx)(n.h2,{id:\\\"installation-1\\\",children:\\\"Installation\\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[`This tutorial starts with a fresh Typescript project. In the examples, we use\\n`,(0,e.jsx)(n.code,{children:\\\"pnpm\\\"}),\\\" as the package manager, but you can use any package manager you prefer.\\\"]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"Let's start by creating the project. The \\\",(0,e.jsx)(n.code,{children:\\\"--language\\\"}),` flag specifies which language\\nto use to implement indexers, while the `,(0,e.jsx)(n.code,{children:\\\"--no-create-indexer\\\"}),` flag is used to\\ndelay the creation of the indexer.`]}),`\\n`,(0,e.jsxs)(n.div,{className:\\\"cli-command\\\",children:[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"Terminal\\\",\\\"data-lang\\\":\\\"bash\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"mkdir\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" my-indexer\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#F38BA8\\\",fontStyle:\\\"italic\\\"},children:\\\"cd\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" my-indexer\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"pnpm\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" dlx\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" apibara@next\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" init\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" .\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' --language=\\\"ts\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" --no-create-indexer\\\"})]})]})})}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{\\\"data-is-output\\\":!0,children:`\\\\u2139 Initializing project in .\\n\\\\u2714 Created  package.json\\n\\\\u2714 Created  tsconfig.json\\n\\\\u2714 Created  apibara.config.ts\\n\\n\\\\u2714 Project initialized successfully\\n`})})]}),`\\n`,(0,e.jsx)(n.p,{children:\\\"After that, you can install the dependencies.\\\"}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"Terminal\\\",\\\"data-lang\\\":\\\"bash\\\",children:(0,e.jsx)(n.code,{children:(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"pnpm\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" install\\\"})]})})})}),`\\n`,(0,e.jsx)(n.h2,{id:\\\"apibara-config\\\",children:\\\"Apibara Config\\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"Your indexers' configuration goes in the \\\",(0,e.jsx)(n.code,{children:\\\"apibara.config.ts\\\"}),` file. You can\\nleave the configuration as is for now.`]}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"apibara.config.ts\\\",\\\"data-lang\\\":\\\"typescript\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" defineConfig \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/config\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"export\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" default\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" defineConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"  runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {},\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]})]})})}),`\\n`,(0,e.jsx)(n.h2,{id:\\\"api-key\\\",children:\\\"API Key\\\"}),`\\n`,(0,e.jsx)(n.p,{children:\\\"The streams hosted by Apibara require an API key.\\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\\\"https://app.apibara.com\\\",children:\\\"Sign up for a free account\\\"}),\\\",\\\"]}),`\\n`,(0,e.jsx)(n.li,{children:\\\"Create an API key,\\\"}),`\\n`,(0,e.jsxs)(n.li,{children:[\\\"Export the API key as the \\\",(0,e.jsx)(n.code,{children:\\\"DNA_TOKEN\\\"}),\\\" environment variable.\\\"]}),`\\n`]}),`\\n`,(0,e.jsx)(n.h2,{id:\\\"evm-indexer\\\",children:\\\"EVM Indexer\\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"Let's create the first EVM indexer. All indexers must go in the \\\",(0,e.jsx)(n.code,{children:\\\"indexers\\\"}),`\\ndirectory and have a name that ends with `,(0,e.jsx)(n.code,{children:\\\".indexer.ts\\\"}),\\\" or \\\",(0,e.jsx)(n.code,{children:\\\".indexer.js\\\"}),`.\\nThe Apibara CLI will automatically detect the indexers in this directory and\\nmake them available to the project.`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"You can use the \\\",(0,e.jsx)(n.code,{children:\\\"apibara add\\\"}),` command to add an indexer to your project. This\\ncommand does the following:`]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\\"gathers information about the chain you want to index.\\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\\"asks about your preferred storage solution.\\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\\"creates the indexer.\\\"}),`\\n`,(0,e.jsxs)(n.li,{children:[\\\"adds dependencies to your \\\",(0,e.jsx)(n.code,{children:\\\"package.json\\\"}),\\\".\\\"]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.div,{className:\\\"cli-command\\\",children:[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"Terminal\\\",\\\"data-lang\\\":\\\"bash\\\",children:(0,e.jsx)(n.code,{children:(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"pnpm\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" apibara\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" add\\\"})]})})})}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{\\\"data-is-output\\\":!0,children:`\\\\u2714 Indexer ID: \\\\u2026 rocket-pool\\n\\\\u2714 Select a chain: \\\\u203A Ethereum\\n\\\\u2714 Select a network: \\\\u203A Mainnet\\n\\\\u2714 Select a storage: \\\\u203A None\\n\\\\u2714 Updated apibara.config.ts\\n\\\\u2714 Updated package.json\\n\\\\u2714 Created rocket-pool.indexer.ts\\n\\n\\\\u2139 Before running the indexer, run pnpm run install \u0026 pnpm run prepare\\n`})})]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"After installing dependencies, you can look at the changes to \\\",(0,e.jsx)(n.code,{children:\\\"apibara.config.ts\\\"}),`.\\nNotice the indexer's specific runtime configuration. This is a good time to update\\nthe indexing starting block.`]}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"apibara.config.ts\\\",\\\"data-lang\\\":\\\"typescript\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" defineConfig \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/config\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"export\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" default\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" defineConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"  runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    rocketPool\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      startingBlock\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#FAB387\\\"},children:\\\" 21_000_000\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      streamUrl\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"https://mainnet.ethereum.a5a.ch\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"    },\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"  },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]})]})})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"Implement the indexer by editing \\\",(0,e.jsx)(n.code,{children:\\\"indexers/rocket-pool.indexer.ts\\\"}),\\\".\\\"]}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"rocket-pool.indexer.ts\\\",\\\"data-lang\\\":\\\"typescript\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" defineIndexer \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/indexer\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" useLogger \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/plugins\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" EvmStream \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"@apibara/evm\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" type\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" ApibaraRuntimeConfig \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/types\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"export\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" default\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" function\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" (\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#EBA0AC\\\",fontStyle:\\\"italic\\\"},children:\\\"runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#F9E2AF\\\",fontStyle:\\\"italic\\\"},children:\\\" ApibaraRuntimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"  const\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" startingBlock\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" streamUrl \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\" =\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"rocketPool\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"  return\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" defineIndexer\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(EvmStream)(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    streamUrl\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    finality\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"accepted\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    startingBlock\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" BigInt\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(startingBlock)\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    filter\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      logs\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" [\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"        {\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"          address\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"0xae78736Cd615f374D3085123A210448E74Fc6393\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"        },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      ]\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"    },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    plugins\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" []\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"    async\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" transform\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"({\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#EBA0AC\\\",fontStyle:\\\"italic\\\"},children:\\\" block\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" })\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"      const\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" logger \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\"=\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" useLogger\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"()\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"      const\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" logs\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" header \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\" =\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" block\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      logger\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"log\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\"`Block number \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"${\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"header\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\"?.\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"blockNumber\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\"`\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"      for\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" (\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"const\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" log \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"of\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" logs) \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"        logger\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"log\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\"          `Log \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"${\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"log\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"logIndex\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" from \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"${\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"log\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"address\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" tx=\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"${\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"log\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"transactionHash\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\"`\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"        )\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"      }\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"    },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"  }\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"})})]})})}),`\\n`,(0,e.jsx)(n.p,{children:\\\"Notice the following:\\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\\"The indexer file exports a single indexer.\\\"}),`\\n`,(0,e.jsxs)(n.li,{children:[\\\"The \\\",(0,e.jsx)(n.code,{children:\\\"defineIndexer\\\"}),` function takes the stream as parameter. In this case, the\\n`,(0,e.jsx)(n.code,{children:\\\"EvmStream\\\"}),` is used. This is needed because Apibara supports multiple networks\\nwith different data types.`]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\\\"streamUrl\\\"}),` specifies where the data comes from. You can connect to streams hosted\\nby us, or to self-hosted streams.`]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\\\"startingBlock\\\"}),\\\" specifies from which block to start streaming.\\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\\"These two properties are read from the \\\",(0,e.jsx)(n.code,{children:\\\"runtimeConfig\\\"}),` object. Use the runtime configuration\\nobject to have multiple presets for the same indexer.`]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\\"The \\\",(0,e.jsx)(n.code,{children:\\\"filter\\\"}),` specifies which data to receive. You can read more about the available\\ndata for EVM chains in the `,(0,e.jsx)(n.a,{href:\\\"/docs/networks/evm/filter\\\",children:\\\"EVM documentation\\\"}),\\\".\\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\\"The \\\",(0,e.jsx)(n.code,{children:\\\"transform\\\"}),` function is called for each block. It receives the block as parameter.\\nThis is where your indexer processes the data.`]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\\"The \\\",(0,e.jsx)(n.code,{children:\\\"useLogger\\\"}),\\\" hook returns an indexer-specific logger.\\\"]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"There are more indexer options available, you can find them \\\",(0,e.jsx)(n.a,{href:\\\"/docs/getting-started/indexers\\\",children:\\\"in the documentation\\\"}),\\\".\\\"]}),`\\n`,(0,e.jsx)(n.h2,{id:\\\"running-the-indexer\\\",children:\\\"Running the indexer\\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"During development, you will use the \\\",(0,e.jsx)(n.code,{children:\\\"apibara\\\"}),` CLI to build and run indexers. For convenience,\\nthe template adds the following scripts to your `,(0,e.jsx)(n.code,{children:\\\"package.json\\\"}),\\\":\\\"]}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"package.json\\\",\\\"data-lang\\\":\\\"json\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'  \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"scripts\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'    \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"dev\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara dev\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'    \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"build\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara build\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'    \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"start\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara start\\\"'})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"  }\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"})})]})})}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\\\"dev\\\"}),`: runs all indexers in development mode. Indexers are automatically\\nreloaded and restarted when they change.`]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\\\"build\\\"}),\\\": builds the indexers for production.\\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\\\"start\\\"}),\\\": runs a \\\",(0,e.jsx)(n.em,{children:\\\"single indexer\\\"}),` in production mode. Notice you must first\\nbuild the indexers.`]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"Before running the indexer, you must set the \\\",(0,e.jsx)(n.code,{children:\\\"DNA_TOKEN\\\"}),` environment variable to your DNA API key, created from the dashboard.\\nYou can store the environment variable in a `,(0,e.jsx)(n.code,{children:\\\".env\\\"}),\\\" file, but make sure not to commit it to git!\\\"]}),`\\n`,(0,e.jsx)(n.p,{children:\\\"Now, run the indexer in development mode.\\\"}),`\\n`,(0,e.jsxs)(n.div,{className:\\\"cli-command\\\",children:[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"Terminal\\\",\\\"data-lang\\\":\\\"bash\\\",children:(0,e.jsx)(n.code,{children:(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"pnpm\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" run\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" dev\\\"})]})})})}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{\\\"data-is-output\\\":!0,children:`\u003e apibara-app@0.1.0 dev /tmp/my-indexer\\n\u003e apibara dev\\n\\n\\\\u2714 Output directory .apibara/build cleaned\\n\\\\u2714 Types written to .apibara/types\\n\\\\u2714 Indexers built in 19369 ms\\n\\\\u2714 Restarting indexers\\nrocket-pool | log Block number 21000071\\nrocket-pool | log Log 239 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0xe3b7e285c02e9a1dad654ba095ee517cf4c15bf0c2c0adec555045e86ea1de89\\nrocket-pool | log Block number 21000097\\nrocket-pool | log Log 265 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba\\nrocket-pool | log Log 266 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba\\nrocket-pool | log Block number 21000111\\nrocket-pool | log Log 589 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0xa01ec6551e76364f6cf687f52823d66b1c07f7a47ce157a9cd9e441691a021f0\\n...\\n`})})]}),`\\n`,(0,e.jsx)(n.h2,{id:\\\"starknet-indexer\\\",children:\\\"Starknet indexer\\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[`You can index data on different networks in the same project. Let's add an indexer for Starknet.\\nLike before, you can use the `,(0,e.jsx)(n.code,{children:\\\"apibara add\\\"}),\\\" command to add an indexer to your project.\\\"]}),`\\n`,(0,e.jsxs)(n.div,{className:\\\"cli-command\\\",children:[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"Terminal\\\",\\\"data-lang\\\":\\\"bash\\\",children:(0,e.jsx)(n.code,{children:(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"pnpm\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" apibara\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" add\\\"})]})})})}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{\\\"data-is-output\\\":!0,children:`\\\\u2714 Indexer ID: \\\\u2026 strk-staking\\n\\\\u2714 Select a chain: \\\\u203A Starknet\\n\\\\u2714 Select a network: \\\\u203A Mainnet\\n\\\\u2714 Select a storage: \\\\u203A None\\n\\\\u2714 Updated apibara.config.ts\\n\\\\u2714 Updated package.json\\n\\\\u2714 Created strk-staking.indexer.ts\\n\\n\\\\u2139 Before running the indexer, run pnpm run install \u0026 pnpm run prepare\\n`})})]}),`\\n`,(0,e.jsx)(n.p,{children:`After that, you can implement the indexer. In this case, the indexer listens for all events\\nemitted by the STRK staking contract.`}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"Let's start by updating the \\\",(0,e.jsx)(n.code,{children:\\\"apibara.config.ts\\\"}),\\\" file with the starting block.\\\"]}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"apibara.config.ts\\\",\\\"data-lang\\\":\\\"typescript\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#6C7086\\\",fontStyle:\\\"italic\\\"},children:\\\"// ...\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"export\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" default\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" defineConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"  runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#6C7086\\\",fontStyle:\\\"italic\\\"},children:\\\"    // ...\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    strkStaking\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      startingBlock\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#FAB387\\\"},children:\\\" 900_000\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      streamUrl\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"https://mainnet.starknet.a5a.ch\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"    },\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"  },\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#6C7086\\\",fontStyle:\\\"italic\\\"},children:\\\"  // ...\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]})]})})}),`\\n`,(0,e.jsx)(n.p,{children:\\\"Then you can implement the indexer.\\\"}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"strk-staking.indexer.ts\\\",\\\"data-lang\\\":\\\"typescript\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" defineIndexer \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/indexer\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" useLogger \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/plugins\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" type\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" ApibaraRuntimeConfig \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/types\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" StarknetStream \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"@apibara/starknet\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"export\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" default\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" function\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" (\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#EBA0AC\\\",fontStyle:\\\"italic\\\"},children:\\\"runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#F9E2AF\\\",fontStyle:\\\"italic\\\"},children:\\\" ApibaraRuntimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"  const\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" startingBlock\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" streamUrl \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\" =\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"strkStaking\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"  return\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" defineIndexer\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(StarknetStream)(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    streamUrl\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    finality\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"accepted\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    startingBlock\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" BigInt\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(startingBlock)\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    filter\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      events\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" [\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"        {\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"          address\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:'            \\\"0x028d709c875c0ceac3dce7065bec5328186dc89fe254527084d1689910954b0a\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"        },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      ]\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"    },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    plugins\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" []\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"    async\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" transform\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"({\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#EBA0AC\\\",fontStyle:\\\"italic\\\"},children:\\\" block\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" })\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"      const\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" logger \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\"=\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" useLogger\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"()\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"      const\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" events\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" header \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\" =\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" block\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      logger\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"log\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\"`Block number \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"${\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"header\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\"?.\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"blockNumber\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\"`\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"      for\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" (\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"const\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" event \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"of\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" events) \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"        logger\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"log\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\"`Event \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"${\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"event\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"eventIndex\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" tx=\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"${\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"event\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"transactionHash\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\"`\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"      }\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"    },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"  }\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"})})]})})}),`\\n`,(0,e.jsxs)(n.p,{children:[`You can now run the indexer. In this case, you can specify which indexer you want to run\\nwith the `,(0,e.jsx)(n.code,{children:\\\"--indexers\\\"}),\\\" option. When the flag is omitted, all indexers are run concurrently.\\\"]}),`\\n`,(0,e.jsxs)(n.div,{className:\\\"cli-command\\\",children:[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"Terminal\\\",\\\"data-lang\\\":\\\"bash\\\",children:(0,e.jsx)(n.code,{children:(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"pnpm\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" run\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" dev\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" --indexers\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" strk-staking\\\"})]})})})}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{\\\"data-is-output\\\":!0,children:`...\\n\u003e apibara-app@0.1.0 dev /tmp/my-indexer\\n\u003e apibara dev \\\"--indexers=strk-staking\\\"\\n\\n\\\\u2714 Output directory .apibara/build cleaned\\n\\\\u2714 Types written to .apibara/types\\n\\\\u2714 Indexers built in 20072 ms\\n\\\\u2714 Restarting indexers\\nstrk-staking | log Block number 929092\\nstrk-staking | log Event 233 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 234 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 235 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 236 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Block number 929119\\nstrk-staking | log Event 122 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7\\nstrk-staking | log Event 123 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7\\n`})})]}),`\\n`,(0,e.jsx)(n.h2,{id:\\\"production-build\\\",children:\\\"Production build\\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"The \\\",(0,e.jsx)(n.code,{children:\\\"apibara build\\\"}),` command is used to build a production version of the indexer. There are two main\\nchanges for the production build:`]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:\\\"No hot code reloading is available.\\\"}),`\\n`,(0,e.jsx)(n.li,{children:\\\"Only one indexer is started. If your project has multiple indexers, it should start them independently.\\\"}),`\\n`]}),`\\n`,(0,e.jsxs)(n.div,{className:\\\"cli-command\\\",children:[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"Terminal\\\",\\\"data-lang\\\":\\\"bash\\\",children:(0,e.jsx)(n.code,{children:(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"pnpm\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" run\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" build\\\"})]})})})}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{\\\"data-is-output\\\":!0,children:`\u003e apibara-app@0.1.0 build /tmp/my-indexer\\n\u003e apibara build\\n\\n\\\\u2714 Output directory .apibara/build cleaned\\n\\\\u2714 Types written to .apibara/types\\n\\\\u25D0 Building 2 indexers\\n\\\\u2714 Build succeeded!\\n\\\\u2139 You can start the indexers with apibara start\\n`})})]}),`\\n`,(0,e.jsx)(n.p,{children:\\\"Once the indexers are built, you can run them in two (equivalent) ways:\\\"}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[\\\"The \\\",(0,e.jsx)(n.code,{children:\\\"apibara start\\\"}),` command by specifying which indexer to run with the\\n`,(0,e.jsx)(n.code,{children:\\\"--indexer\\\"}),\\\" flag. In this tutorial we are going to use this method.\\\"]}),`\\n`,(0,e.jsxs)(n.li,{children:[\\\"Running \\\",(0,e.jsx)(n.code,{children:\\\".apibara/build/start.mjs\\\"}),\\\" with Node. This is useful when building Docker images for your indexers.\\\"]}),`\\n`]}),`\\n`,(0,e.jsxs)(n.div,{className:\\\"cli-command\\\",children:[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"Terminal\\\",\\\"data-lang\\\":\\\"bash\\\",children:(0,e.jsx)(n.code,{children:(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"pnpm\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" run\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" start\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" --indexer\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" rocket-pool\\\"})]})})})}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{\\\"data-is-output\\\":!0,children:`\u003e apibara-app@0.1.0 start /tmp/my-indexer\\n\u003e apibara start \\\"--indexer\\\" \\\"rocket-pool\\\"\\n\\n\\\\u25D0 Starting indexer rocket-pool\\nrocket-pool  | log Block number 21000071\\nrocket-pool  | log Log 239 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0xe3b7e285c02e9a1dad654ba095ee517cf4c15bf0c2c0adec555045e86ea1de89\\nrocket-pool  | log Block number 21000097\\nrocket-pool  | log Log 265 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba\\nrocket-pool  | log Log 266 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba\\nrocket-pool  | log Block number 21000111\\n...\\n`})})]}),`\\n`,(0,e.jsx)(n.h2,{id:\\\"runtime-configuration--presets\\\",children:\\\"Runtime configuration \u0026 presets\\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"Apibara provides a mechanism for indexers to load their configuration from the \\\",(0,e.jsx)(n.code,{children:\\\"apibara.config.ts\\\"}),\\\" file:\\\"]}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsxs)(n.li,{children:[\\\"Add the configuration under the \\\",(0,e.jsx)(n.code,{children:\\\"runtimeConfig\\\"}),\\\" key in \\\",(0,e.jsx)(n.code,{children:\\\"apibara.config.ts\\\"}),\\\".\\\"]}),`\\n`,(0,e.jsx)(n.li,{children:\\\"Change your indexer's module to return a function that, given the runtime configuration, returns the indexer.\\\"}),`\\n`]}),`\\n`,(0,e.jsx)(n.p,{children:`You can update the configuration to define values that are configurable by your indexer. This example used\\nthe runtime configuration to store the DNA stream URL and contract address.`}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"apibara.config.ts\\\",\\\"data-lang\\\":\\\"ts\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" defineConfig \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/config\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"export\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" default\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" defineConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"  runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    strkStaking\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      startingBlock\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#FAB387\\\"},children:\\\" 900_000\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      streamUrl\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"https://mainnet.starknet.a5a.ch\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      contractAddress\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:'        \\\"0x028d709c875c0ceac3dce7065bec5328186dc89fe254527084d1689910954b0a\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"    },\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"  },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]})]})})}),`\\n`,(0,e.jsxs)(n.p,{children:[`Then update the indexer to return a function that returns the indexer. Your editor is going to show a type error\\nsince the types of `,(0,e.jsx)(n.code,{children:\\\"config.streamUrl\\\"}),\\\" and \\\",(0,e.jsx)(n.code,{children:\\\"config.contractAddress\\\"}),` are unknown, the next session is going to\\nexplain how to solve that issue.`]}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"strk-staking.indexer.ts\\\",\\\"data-lang\\\":\\\"ts\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" defineIndexer \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/indexer\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" useLogger \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/plugins\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" StarknetStream \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"@apibara/starknet\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" ApibaraRuntimeConfig \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/types\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"export\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" default\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" function\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" (\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#EBA0AC\\\",fontStyle:\\\"italic\\\"},children:\\\"runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#F9E2AF\\\",fontStyle:\\\"italic\\\"},children:\\\" ApibaraRuntimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"  const\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" config \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\"=\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"strkStaking\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"  const\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" startingBlock\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" streamUrl \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\" =\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" config\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"  return\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" defineIndexer\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(StarknetStream)(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    streamUrl\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    startingBlock\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" BigInt\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(startingBlock)\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    filter\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      events\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" [\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"        {\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"          address\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" config\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\".\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"contractAddress \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"as\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" `0x\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"${\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"string\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\"`\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"        },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      ]\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"    },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"    async\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" transform\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"({\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#EBA0AC\\\",fontStyle:\\\"italic\\\"},children:\\\" block\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" })\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#6C7086\\\",fontStyle:\\\"italic\\\"},children:\\\"      // Unchanged.\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"    },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"  }\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"})})]})})}),`\\n`,(0,e.jsx)(n.h3,{id:\\\"typescript--type-safety\\\",children:\\\"Typescript \u0026 type safety\\\"}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"You may have noticed that the CLI generates types in \\\",(0,e.jsx)(n.code,{children:\\\".apibara/types\\\"}),` before\\nbuilding the indexers (both in development and production mode).\\nThese types contain the type definition of your runtime configuration. You can\\ninstruct Typescript to use them by adding the following `,(0,e.jsx)(n.code,{children:\\\"tsconfig.json\\\"}),` to your\\nproject.`]}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"tsconfig.json\\\",\\\"data-lang\\\":\\\"json\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'  \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"$schema\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"https://json.schemastore.org/tsconfig\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'  \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"compilerOptions\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'    \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"target\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"ES2022\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'    \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"module\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"ESNext\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'    \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"moduleResolution\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"bundler\\\"'})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"  },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'  \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"include\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" [\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:'\\\"**/*.ts\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\".apibara/types\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"],\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'  \\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\"},children:\\\"exclude\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:'\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" [\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:'\\\"node_modules\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"]\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"})})]})})}),`\\n`,(0,e.jsx)(n.p,{children:`After restarting the Typescript language server you will have a type-safe runtime configuration\\nright into your indexer!`}),`\\n`,(0,e.jsx)(n.h3,{id:\\\"presets\\\",children:\\\"Presets\\\"}),`\\n`,(0,e.jsx)(n.p,{children:`Having a single runtime configuration is useful but not enough for real-world\\nindexers. The CLI provides a way to have multiple \\\"presets\\\" and select which\\none to use at runtime. This is useful, for example, if you're deploying the\\nsame indexers on multiple networks where only the DNA stream URL and contract\\naddresses change.`}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"You can have any number of presets in the configuration and use the \\\",(0,e.jsx)(n.code,{children:\\\"--preset\\\"}),` flag to select which one to use.\\nFor example, you can add a `,(0,e.jsx)(n.code,{children:\\\"sepolia\\\"}),` preset that contains the URL of the Starknet Sepolia DNA stream.\\nIf a preset doesn't specify a key, then the value from the root configuration is used.`]}),`\\n`,(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"apibara.config.ts\\\",\\\"data-lang\\\":\\\"ts\\\",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"import\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\" defineConfig \\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" from\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"apibara/config\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\"}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"export\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" default\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\" defineConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"(\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"{\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"  runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    streamUrl\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"https://mainnet.starknet.a5a.ch\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    contractAddress\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:'      \\\"0x028d709c875c0ceac3dce7065bec5328186dc89fe254527084d1689910954b0a\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\" as\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" `0x\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"${\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CBA6F7\\\"},children:\\\"string\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\"`\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"  },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"  presets\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"    sepolia\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"      runtimeConfig\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\" {\\\"})]}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\"        streamUrl\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#94E2D5\\\"},children:\\\":\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:' \\\"https://sepolia.starknet.a5a.ch\\\"'}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\",\\\"})]}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"      },\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"    },\\\"})}),`\\n`,(0,e.jsx)(n.span,{className:\\\"line\\\",children:(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"  },\\\"})}),`\\n`,(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\"}\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#CDD6F4\\\"},children:\\\")\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#9399B2\\\"},children:\\\";\\\"})]})]})})}),`\\n`,(0,e.jsxs)(n.p,{children:[\\\"You can then run the indexer in development mode using the \\\",(0,e.jsx)(n.code,{children:\\\"sepolia\\\"}),\\\" preset.\\\"]}),`\\n`,(0,e.jsxs)(n.div,{className:\\\"cli-command\\\",children:[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.pre,{className:\\\"shiki catppuccin-mocha\\\",style:{backgroundColor:\\\"#1e1e2e\\\",color:\\\"#cdd6f4\\\"},tabIndex:\\\"0\\\",\\\"data-title\\\":\\\"Terminal\\\",\\\"data-lang\\\":\\\"bash\\\",children:(0,e.jsx)(n.code,{children:(0,e.jsxs)(n.span,{className:\\\"line\\\",children:[(0,e.jsx)(n.span,{style:{color:\\\"#89B4FA\\\",fontStyle:\\\"italic\\\"},children:\\\"npm\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" run\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" dev\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" --\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" --indexers=strk-staking\\\"}),(0,e.jsx)(n.span,{style:{color:\\\"#A6E3A1\\\"},children:\\\" --preset=sepolia\\\"})]})})})}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{\\\"data-is-output\\\":!0,children:`\u003e my-indexer@1.0.0 dev\\n\u003e apibara dev --indexers=strk-staking --preset=sepolia\\n\\n\\\\u2714 Output directory .apibara/build cleaned\\n\\\\u2714 Types written to .apibara/types\\n\\\\u2714 Indexers built in 3858 ms\\n\\\\u2714 Restarting indexers\\nstrk-staking | log Block number 100092\\nstrk-staking | log Event 233 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 234 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 235 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 236 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Block number 100119\\nstrk-staking | log Event 122 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7\\nstrk-staking | log Event 123 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7\\n...\\n`})})]}),`\\n`,(0,e.jsx)(n.h2,{id:\\\"storing-data--persisting-state-across-restarts\\\",children:\\\"Storing data \u0026 persisting state across restarts\\\"}),`\\n`,(0,e.jsx)(n.p,{children:`All indexers implemented in this tutorial are stateless. They don't store any\\ndata to a database and if you restart them they will restart indexing from the\\nbeginning.`}),`\\n`,(0,e.jsx)(n.p,{children:`You can refer to our storage section to learn more about writing data to a database\\nand persisting the indexer's state across restarts.`}),`\\n`,(0,e.jsxs)(n.ul,{children:[`\\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\\\"/docs/storage/drizzle-pg\\\",children:\\\"Drizzle with PostgreSQL\\\"})}),`\\n`]})]})}function h(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,{...l,children:(0,e.jsx)(d,{...l})}):d(l)}return A(C);})();\\n;return Component;\",\"frontmatter\",{\"_138\":31,\"_139\":31,\"_140\":141,\"_142\":143},\"title\",\"titleShort\",\"description\",\"Learn how to install and get started with Apibara.\",\"updatedAt\",[\"D\",1749600000000],\"githubUrl\",\"https://github.com/apibara/documentation/blob/main/docs/v2/getting-started/installation/index.mdx\",\"assetPath\",\"https://docs-r2.apibara.com/docs/v2/getting-started/installation/\",\"content\",\"---\\ntitle: Installation\\ndescription: \\\"Learn how to install and get started with Apibara.\\\"\\ndiataxis: tutorial\\nupdatedAt: 2025-06-11\\n---\\n\\n# Installation\\n\\nThis tutorial shows how to setup an Apibara project from scratch. The goal is to\\nstart indexing data as quickly as possible and to understand the basic structure\\nof a project. By the end of this tutorial, you will have a basic indexer that\\nstreams data from two networks (Ethereum and Starknet).\\n\\n## Installation\\n\\nThis tutorial starts with a fresh Typescript project. In the examples, we use\\n`pnpm` as the package manager, but you can use any package manager you prefer.\\n\\nLet's start by creating the project. The `--language` flag specifies which language\\nto use to implement indexers, while the `--no-create-indexer` flag is used to\\ndelay the creation of the indexer.\\n\\n:::cli-command\\n\\n```bash [Terminal]\\nmkdir my-indexer\\ncd my-indexer\\npnpm dlx apibara@next init . --language=\\\"ts\\\" --no-create-indexer\\n```\\n\\n```\\nℹ Initializing project in .\\n✔ Created  package.json\\n✔ Created  tsconfig.json\\n✔ Created  apibara.config.ts\\n\\n✔ Project initialized successfully\\n```\\n\\n:::\\n\\nAfter that, you can install the dependencies.\\n\\n```bash [Terminal]\\npnpm install\\n```\\n\\n## Apibara Config\\n\\nYour indexers' configuration goes in the `apibara.config.ts` file. You can\\nleave the configuration as is for now.\\n\\n```typescript [apibara.config.ts]\\nimport { defineConfig } from \\\"apibara/config\\\";\\n\\nexport default defineConfig({\\n  runtimeConfig: {},\\n});\\n```\\n\\n## API Key\\n\\nThe streams hosted by Apibara require an API key.\\n\\n- [Sign up for a free account](https://app.apibara.com),\\n- Create an API key,\\n- Export the API key as the `DNA_TOKEN` environment variable.\\n\\n## EVM Indexer\\n\\nLet's create the first EVM indexer. All indexers must go in the `indexers`\\ndirectory and have a name that ends with `.indexer.ts` or `.indexer.js`.\\nThe Apibara CLI will automatically detect the indexers in this directory and\\nmake them available to the project.\\n\\nYou can use the `apibara add` command to add an indexer to your project. This\\ncommand does the following:\\n\\n- gathers information about the chain you want to index.\\n- asks about your preferred storage solution.\\n- creates the indexer.\\n- adds dependencies to your `package.json`.\\n\\n:::cli-command\\n\\n```bash [Terminal]\\npnpm apibara add\\n```\\n\\n```\\n✔ Indexer ID: … rocket-pool\\n✔ Select a chain: › Ethereum\\n✔ Select a network: › Mainnet\\n✔ Select a storage: › None\\n✔ Updated apibara.config.ts\\n✔ Updated package.json\\n✔ Created rocket-pool.indexer.ts\\n\\nℹ Before running the indexer, run pnpm run install \u0026 pnpm run prepare\\n```\\n\\n:::\\n\\nAfter installing dependencies, you can look at the changes to `apibara.config.ts`.\\nNotice the indexer's specific runtime configuration. This is a good time to update\\nthe indexing starting block.\\n\\n```typescript [apibara.config.ts]\\nimport { defineConfig } from \\\"apibara/config\\\";\\n\\nexport default defineConfig({\\n  runtimeConfig: {\\n    rocketPool: {\\n      startingBlock: 21_000_000,\\n      streamUrl: \\\"https://mainnet.ethereum.a5a.ch\\\",\\n    },\\n  },\\n});\\n```\\n\\nImplement the indexer by editing `indexers/rocket-pool.indexer.ts`.\\n\\n```typescript [rocket-pool.indexer.ts]\\nimport { defineIndexer } from \\\"apibara/indexer\\\";\\nimport { useLogger } from \\\"apibara/plugins\\\";\\n\\nimport { EvmStream } from \\\"@apibara/evm\\\";\\nimport type { ApibaraRuntimeConfig } from \\\"apibara/types\\\";\\n\\nexport default function (runtimeConfig: ApibaraRuntimeConfig) {\\n  const { startingBlock, streamUrl } = runtimeConfig.rocketPool;\\n\\n  return defineIndexer(EvmStream)({\\n    streamUrl,\\n    finality: \\\"accepted\\\",\\n    startingBlock: BigInt(startingBlock),\\n    filter: {\\n      logs: [\\n        {\\n          address: \\\"0xae78736Cd615f374D3085123A210448E74Fc6393\\\",\\n        },\\n      ],\\n    },\\n    plugins: [],\\n    async transform({ block }) {\\n      const logger = useLogger();\\n      const { logs, header } = block;\\n      logger.log(`Block number ${header?.blockNumber}`);\\n      for (const log of logs) {\\n        logger.log(\\n          `Log ${log.logIndex} from ${log.address} tx=${log.transactionHash}`\\n        );\\n      }\\n    },\\n  });\\n}\\n```\\n\\nNotice the following:\\n\\n- The indexer file exports a single indexer.\\n- The `defineIndexer` function takes the stream as parameter. In this case, the\\n  `EvmStream` is used. This is needed because Apibara supports multiple networks\\n  with different data types.\\n- `streamUrl` specifies where the data comes from. You can connect to streams hosted\\n  by us, or to self-hosted streams.\\n- `startingBlock` specifies from which block to start streaming.\\n- These two properties are read from the `runtimeConfig` object. Use the runtime configuration\\n  object to have multiple presets for the same indexer.\\n- The `filter` specifies which data to receive. You can read more about the available\\n  data for EVM chains in the [EVM documentation](/docs/networks/evm/filter).\\n- The `transform` function is called for each block. It receives the block as parameter.\\n  This is where your indexer processes the data.\\n- The `useLogger` hook returns an indexer-specific logger.\\n\\nThere are more indexer options available, you can find them [in the documentation](/docs/getting-started/indexers).\\n\\n## Running the indexer\\n\\nDuring development, you will use the `apibara` CLI to build and run indexers. For convenience,\\nthe template adds the following scripts to your `package.json`:\\n\\n```json [package.json]\\n{\\n  \\\"scripts\\\": {\\n    \\\"dev\\\": \\\"apibara dev\\\",\\n    \\\"build\\\": \\\"apibara build\\\",\\n    \\\"start\\\": \\\"apibara start\\\"\\n  }\\n}\\n```\\n\\n- `dev`: runs all indexers in development mode. Indexers are automatically\\n  reloaded and restarted when they change.\\n- `build`: builds the indexers for production.\\n- `start`: runs a _single indexer_ in production mode. Notice you must first\\n  build the indexers.\\n\\nBefore running the indexer, you must set the `DNA_TOKEN` environment variable to your DNA API key, created from the dashboard.\\nYou can store the environment variable in a `.env` file, but make sure not to commit it to git!\\n\\nNow, run the indexer in development mode.\\n\\n:::cli-command\\n\\n```bash [Terminal]\\npnpm run dev\\n```\\n\\n```\\n\u003e apibara-app@0.1.0 dev /tmp/my-indexer\\n\u003e apibara dev\\n\\n✔ Output directory .apibara/build cleaned\\n✔ Types written to .apibara/types\\n✔ Indexers built in 19369 ms\\n✔ Restarting indexers\\nrocket-pool | log Block number 21000071\\nrocket-pool | log Log 239 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0xe3b7e285c02e9a1dad654ba095ee517cf4c15bf0c2c0adec555045e86ea1de89\\nrocket-pool | log Block number 21000097\\nrocket-pool | log Log 265 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba\\nrocket-pool | log Log 266 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba\\nrocket-pool | log Block number 21000111\\nrocket-pool | log Log 589 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0xa01ec6551e76364f6cf687f52823d66b1c07f7a47ce157a9cd9e441691a021f0\\n...\\n```\\n\\n:::\\n\\n## Starknet indexer\\n\\nYou can index data on different networks in the same project. Let's add an indexer for Starknet.\\nLike before, you can use the `apibara add` command to add an indexer to your project.\\n\\n:::cli-command\\n\\n```bash [Terminal]\\npnpm apibara add\\n```\\n\\n```\\n✔ Indexer ID: … strk-staking\\n✔ Select a chain: › Starknet\\n✔ Select a network: › Mainnet\\n✔ Select a storage: › None\\n✔ Updated apibara.config.ts\\n✔ Updated package.json\\n✔ Created strk-staking.indexer.ts\\n\\nℹ Before running the indexer, run pnpm run install \u0026 pnpm run prepare\\n```\\n\\n:::\\n\\nAfter that, you can implement the indexer. In this case, the indexer listens for all events\\nemitted by the STRK staking contract.\\n\\nLet's start by updating the `apibara.config.ts` file with the starting block.\\n\\n```typescript [apibara.config.ts]\\n// ...\\n\\nexport default defineConfig({\\n  runtimeConfig: {\\n    // ...\\n    strkStaking: {\\n      startingBlock: 900_000,\\n      streamUrl: \\\"https://mainnet.starknet.a5a.ch\\\",\\n    },\\n  },\\n  // ...\\n});\\n```\\n\\nThen you can implement the indexer.\\n\\n```typescript [strk-staking.indexer.ts]\\nimport { defineIndexer } from \\\"apibara/indexer\\\";\\nimport { useLogger } from \\\"apibara/plugins\\\";\\n\\nimport type { ApibaraRuntimeConfig } from \\\"apibara/types\\\";\\nimport { StarknetStream } from \\\"@apibara/starknet\\\";\\n\\nexport default function (runtimeConfig: ApibaraRuntimeConfig) {\\n  const { startingBlock, streamUrl } = runtimeConfig.strkStaking;\\n\\n  return defineIndexer(StarknetStream)({\\n    streamUrl,\\n    finality: \\\"accepted\\\",\\n    startingBlock: BigInt(startingBlock),\\n    filter: {\\n      events: [\\n        {\\n          address:\\n            \\\"0x028d709c875c0ceac3dce7065bec5328186dc89fe254527084d1689910954b0a\\\",\\n        },\\n      ],\\n    },\\n    plugins: [],\\n    async transform({ block }) {\\n      const logger = useLogger();\\n      const { events, header } = block;\\n      logger.log(`Block number ${header?.blockNumber}`);\\n      for (const event of events) {\\n        logger.log(`Event ${event.eventIndex} tx=${event.transactionHash}`);\\n      }\\n    },\\n  });\\n}\\n```\\n\\nYou can now run the indexer. In this case, you can specify which indexer you want to run\\nwith the `--indexers` option. When the flag is omitted, all indexers are run concurrently.\\n\\n:::cli-command\\n\\n```bash [Terminal]\\npnpm run dev --indexers strk-staking\\n```\\n\\n```\\n...\\n\u003e apibara-app@0.1.0 dev /tmp/my-indexer\\n\u003e apibara dev \\\"--indexers=strk-staking\\\"\\n\\n✔ Output directory .apibara/build cleaned\\n✔ Types written to .apibara/types\\n✔ Indexers built in 20072 ms\\n✔ Restarting indexers\\nstrk-staking | log Block number 929092\\nstrk-staking | log Event 233 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 234 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 235 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 236 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Block number 929119\\nstrk-staking | log Event 122 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7\\nstrk-staking | log Event 123 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7\\n```\\n\\n:::\\n\\n## Production build\\n\\nThe `apibara build` command is used to build a production version of the indexer. There are two main\\nchanges for the production build:\\n\\n- No hot code reloading is available.\\n- Only one indexer is started. If your project has multiple indexers, it should start them independently.\\n\\n:::cli-command\\n\\n```bash [Terminal]\\npnpm run build\\n```\\n\\n```\\n\u003e apibara-app@0.1.0 build /tmp/my-indexer\\n\u003e apibara build\\n\\n✔ Output directory .apibara/build cleaned\\n✔ Types written to .apibara/types\\n◐ Building 2 indexers\\n✔ Build succeeded!\\nℹ You can start the indexers with apibara start\\n```\\n\\n:::\\n\\nOnce the indexers are built, you can run them in two (equivalent) ways:\\n\\n- The `apibara start` command by specifying which indexer to run with the\\n  `--indexer` flag. In this tutorial we are going to use this method.\\n- Running `.apibara/build/start.mjs` with Node. This is useful when building Docker images for your indexers.\\n\\n:::cli-command\\n\\n```bash [Terminal]\\npnpm run start --indexer rocket-pool\\n```\\n\\n```\\n\u003e apibara-app@0.1.0 start /tmp/my-indexer\\n\u003e apibara start \\\"--indexer\\\" \\\"rocket-pool\\\"\\n\\n◐ Starting indexer rocket-pool\\nrocket-pool  | log Block number 21000071\\nrocket-pool  | log Log 239 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0xe3b7e285c02e9a1dad654ba095ee517cf4c15bf0c2c0adec555045e86ea1de89\\nrocket-pool  | log Block number 21000097\\nrocket-pool  | log Log 265 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba\\nrocket-pool  | log Log 266 from 0xae78736cd615f374d3085123a210448e74fc6393 tx=0x8946aaa1ae303a19576d6dca9abe0f774709ff6c3f2de40c11dfda2ab276fbba\\nrocket-pool  | log Block number 21000111\\n...\\n```\\n\\n:::\\n\\n## Runtime configuration \u0026 presets\\n\\nApibara provides a mechanism for indexers to load their configuration from the `apibara.config.ts` file:\\n\\n- Add the configuration under the `runtimeConfig` key in `apibara.config.ts`.\\n- Change your indexer's module to return a function that, given the runtime configuration, returns the indexer.\\n\\nYou can update the configuration to define values that are configurable by your indexer. This example used\\nthe runtime configuration to store the DNA stream URL and contract address.\\n\\n```ts [apibara.config.ts]\\nimport { defineConfig } from \\\"apibara/config\\\";\\n\\nexport default defineConfig({\\n  runtimeConfig: {\\n    strkStaking: {\\n      startingBlock: 900_000,\\n      streamUrl: \\\"https://mainnet.starknet.a5a.ch\\\",\\n      contractAddress:\\n        \\\"0x028d709c875c0ceac3dce7065bec5328186dc89fe254527084d1689910954b0a\\\",\\n    },\\n  },\\n});\\n```\\n\\nThen update the indexer to return a function that returns the indexer. Your editor is going to show a type error\\nsince the types of `config.streamUrl` and `config.contractAddress` are unknown, the next session is going to\\nexplain how to solve that issue.\\n\\n```ts [strk-staking.indexer.ts]\\nimport { defineIndexer } from \\\"apibara/indexer\\\";\\nimport { useLogger } from \\\"apibara/plugins\\\";\\n\\nimport { StarknetStream } from \\\"@apibara/starknet\\\";\\nimport { ApibaraRuntimeConfig } from \\\"apibara/types\\\";\\n\\nexport default function (runtimeConfig: ApibaraRuntimeConfig) {\\n  const config = runtimeConfig.strkStaking;\\n  const { startingBlock, streamUrl } = config;\\n\\n  return defineIndexer(StarknetStream)({\\n    streamUrl,\\n    startingBlock: BigInt(startingBlock),\\n    filter: {\\n      events: [\\n        {\\n          address: config.contractAddress as `0x${string}`,\\n        },\\n      ],\\n    },\\n    async transform({ block }) {\\n      // Unchanged.\\n    },\\n  });\\n}\\n```\\n\\n### Typescript \u0026 type safety\\n\\nYou may have noticed that the CLI generates types in `.apibara/types` before\\nbuilding the indexers (both in development and production mode).\\nThese types contain the type definition of your runtime configuration. You can\\ninstruct Typescript to use them by adding the following `tsconfig.json` to your\\nproject.\\n\\n```json [tsconfig.json]\\n{\\n  \\\"$schema\\\": \\\"https://json.schemastore.org/tsconfig\\\",\\n  \\\"compilerOptions\\\": {\\n    \\\"target\\\": \\\"ES2022\\\",\\n    \\\"module\\\": \\\"ESNext\\\",\\n    \\\"moduleResolution\\\": \\\"bundler\\\"\\n  },\\n  \\\"include\\\": [\\\"**/*.ts\\\", \\\".apibara/types\\\"],\\n  \\\"exclude\\\": [\\\"node_modules\\\"]\\n}\\n```\\n\\nAfter restarting the Typescript language server you will have a type-safe runtime configuration\\nright into your indexer!\\n\\n### Presets\\n\\nHaving a single runtime configuration is useful but not enough for real-world\\nindexers. The CLI provides a way to have multiple \\\"presets\\\" and select which\\none to use at runtime. This is useful, for example, if you're deploying the\\nsame indexers on multiple networks where only the DNA stream URL and contract\\naddresses change.\\n\\nYou can have any number of presets in the configuration and use the `--preset` flag to select which one to use.\\nFor example, you can add a `sepolia` preset that contains the URL of the Starknet Sepolia DNA stream.\\nIf a preset doesn't specify a key, then the value from the root configuration is used.\\n\\n```ts [apibara.config.ts]\\nimport { defineConfig } from \\\"apibara/config\\\";\\n\\nexport default defineConfig({\\n  runtimeConfig: {\\n    streamUrl: \\\"https://mainnet.starknet.a5a.ch\\\",\\n    contractAddress:\\n      \\\"0x028d709c875c0ceac3dce7065bec5328186dc89fe254527084d1689910954b0a\\\" as `0x${string}`,\\n  },\\n  presets: {\\n    sepolia: {\\n      runtimeConfig: {\\n        streamUrl: \\\"https://sepolia.starknet.a5a.ch\\\",\\n      },\\n    },\\n  },\\n});\\n```\\n\\nYou can then run the indexer in development mode using the `sepolia` preset.\\n\\n:::cli-command\\n\\n```bash [Terminal]\\nnpm run dev -- --indexers=strk-staking --preset=sepolia\\n```\\n\\n```\\n\u003e my-indexer@1.0.0 dev\\n\u003e apibara dev --indexers=strk-staking --preset=sepolia\\n\\n✔ Output directory .apibara/build cleaned\\n✔ Types written to .apibara/types\\n✔ Indexers built in 3858 ms\\n✔ Restarting indexers\\nstrk-staking | log Block number 100092\\nstrk-staking | log Event 233 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 234 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 235 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Event 236 tx=0x012f8356ef02c36ed1ffddd5252c4f03707166cabcccb49046acf4ab565051c7\\nstrk-staking | log Block number 100119\\nstrk-staking | log Event 122 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7\\nstrk-staking | log Event 123 tx=0x01078c3bb0f339eeaf303bc5c47ea03b781841f7b4628f79bb9886ad4c170be7\\n...\\n```\\n\\n:::\\n\\n## Storing data \u0026 persisting state across restarts\\n\\nAll indexers implemented in this tutorial are stateless. They don't store any\\ndata to a database and if you restart them they will restart indexing from the\\nbeginning.\\n\\nYou can refer to our storage section to learn more about writing data to a database\\nand persisting the indexer's state across restarts.\\n\\n- [Drizzle with PostgreSQL](/docs/storage/drizzle-pg)\\n\",\"baseUrl\",\"http://www.apibara.com\",\"routes/_marketing\",\"actionData\",\"errors\"]\n");</script><!--$--><script>window.__reactRouterContext.streamController.close();</script><!--/$--><!--/$--></body></html>