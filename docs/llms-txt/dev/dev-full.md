# Dev Documentation

Source: https://dev.writer.com/llms-full.txt

---

# Understand agent architecture
Source: https://dev.writer.com/agent-builder/agent-architecture

Understand how Agent Builder agents work. Learn about UI components, blueprints, state management, and how they connect to create functional agents.

<iframe className="w-full aspect-video rounded-xl" src="https://fast.wistia.com/embed/iframe/28xiogdl3c?version=v1x&playerColor=aae3d8" title="Your Video Title" frameBorder="0" allow="autoplay; fullscreen" allowFullScreen />

An Agent Builder agent consists of a UI, which is the agent's interface, and a blueprint, which is the agent's logic. The UI and blueprint are connected through the agent's state and UI triggers.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=35154169be3557ced366471ee8d79f1c" alt="Agent blueprint showing the relationship between UI, blueprint, and state" data-og-width="3992" width="3992" data-og-height="1108" height="1108" data-path="images/agent-builder/demo-agent-architecture.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a71d0176610fd21adec609d68a202725 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7507b00a3e821ca78b9f3914a50d00a8 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d9cdc46a4e60a9f4eab76620fe33d647 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4c2c8100345ef45ccfd25e972c3bee04 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d20b310c2216ff7eacb0275b018ae977 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=592487bd21fedcd005afea4d51651446 2500w" />

## Agent components

An agent consists of the following components:

* **UI**: the interface that users interact with.
  * UIs are designed using elements like input fields, buttons, and embeds, including support for guided workflows with pagination.
  * They give users a structured, intuitive way to engage with agents, from simple chat interfaces to rich, interactive tools.
  * The UI is optional. If you do not need to receive user input or display output, you can build an agent without a UI by only using the blueprint.
* **Blueprint**: a visual map of the agent's business logic and behavior.
  * Blueprints are created using a library of configurable blocks for tool calling, built-in RAG, text generation, classification, state management, and more.
  * They define how the agent processes input, makes decisions, and takes action—enabling it to reliably orchestrate work across people, data, systems, and even other agents built in Writer.

An agent can also include:

* Custom Python code to extend its capabilities with more complex logic.
* [Secrets](/agent-builder/secrets) to store sensitive information like API keys, passwords, and other credentials and use them in your agent.

Check out the [demo agent walkthrough](/agent-builder/demo-agent) to see how these components work together in practice.

### Connecting components

Agents work by passing data between the UI and blueprint. The following variables are available to each block in the blueprint:

* `@{result}`: Access the output from the previous block in your blueprint
* `@{payload}`: Access data from UI interactions that triggered the blueprint, like button clicks or user messages
* `@{state_variable}`: Access values stored in your agent's state
* `@{vault.secret_name}`: Access secrets stored in your agent's secrets

These variables let you chain blocks together and create dynamic workflows. Learn more in [Using Data from Previous Blocks](/agent-builder/execution-environment).

### Key capabilities

Agent Builder enables agentic workflows with automation and intelligence by providing the following capabilities:

* **Control Flow**: Blueprints support control structures including:
  * Conditional branching based on input analysis or state conditions
  * Iterative loops for processing collections of data or retrying operations
  * Decision trees that route execution based on classification results or business rules
* **Memory**: Agents can use state, environment variables, and Knowledge Graphs to store and retrieve information across blocks and across agent sessions.
* **Knowledge Graph Integration**: Writer's Knowledge Graph provides:
  * Contextual information that enhances agent responses and decision making
  * Semantic search and content discovery
  * Data storage and retrieval across agent sessions
* **Tool calling**: Agents can dynamically analyze requests and intelligently orchestrate external tools, supporting advanced reasoning patterns like ReAct for step-by-step problem solving.
* **Multi-agent workflows**: Built-in blocks enable integration with other Writer agents for complex multi-agent workflows.

### Agent state

Agents use the agent's state to communicate information across components. The state is a shared memory for each part of the agent: the UI, blueprint, and custom Python code can all read and write data to the state.

Learn more in [Agent state](/agent-builder/state).

## Blueprint-only agents

If you don't need to receive user input or display output, you can build an agent without a UI by only using the blueprint.

To run the blueprint without a UI Trigger, press the **Run blueprint** button in the top right of the blueprint.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/run-blueprint.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a3f0120c9a4ab04b4ce5f8b7355eed47" alt="" data-og-width="412" width="412" data-og-height="128" height="128" data-path="images/agent-builder/run-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/run-blueprint.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0af3e3bc9625efd98a86ba672ddfd8cd 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/run-blueprint.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f82ce16103e20ec9d41a83483e47b084 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/run-blueprint.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=70b6d779516643fe8c6fb7339f1c86c0 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/run-blueprint.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=800e63b93ad904785768cbba76410f7d 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/run-blueprint.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ed7eaa9a94342c926866666a93013a06 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/run-blueprint.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f96d3251f8efa113d19bd0bc8578b108 2500w" />

<feedback />


# Trigger blueprints via API
Source: https://dev.writer.com/agent-builder/api-trigger

Enable external systems to trigger blueprints via HTTP API calls. Integrate agents with webhooks, schedulers, and third-party services programmatically.

The [**API Trigger**](/blueprints/apitrigger) block enables external systems to trigger your blueprint via HTTP API calls. Use it to integrate your agent with webhooks, external services, or other applications that need to programmatically execute your workflows.

Unlike the [**UI Trigger**](/blueprints/uitrigger) block that responds to user interactions in the interface, the **API Trigger** block accepts HTTP POST requests to trigger blueprint execution.

<Tip>
  You must deploy your agent before you can trigger a blueprint via API.
</Tip>

## Overview

When you add an **API Trigger** block to your blueprint, it creates a public HTTP endpoint that external systems can use to trigger your blueprint execution. This enables:

* **Webhook integration**: Receive notifications from external services like GitHub, Slack, or payment processors
* **API-first workflows**: Build workflows that can be triggered programmatically by other applications
* **Scheduled automation**: Use external schedulers like task schedulers or cloud functions to trigger workflows
* **Cross-service communication**: Enable microservices to trigger agent workflows
* **Third-party integrations**: Allow external tools and platforms to execute your agent's capabilities

## How it works

The API Trigger block creates an HTTP endpoint that external systems can use to trigger your blueprint.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-flow.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f4492dc843b55552043b95cd95250ab9" alt="API trigger flow showing how external systems send requests to endpoints that trigger blueprint execution" data-og-width="2485" width="2485" data-og-height="1860" height="1860" data-path="images/agent-builder/api-trigger-flow.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-flow.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a11107a62acb2322915cba291a8e48e5 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-flow.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=438c45b1276076e713f2295cd00d0145 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-flow.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=15b1d89e555431f0faabdc3e67a29b39 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-flow.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c621f53c4b74796224f466e17b63d9a8 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-flow.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b2d67aac1ba059b63545fe5d8c857a76 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-flow.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=323c6b488ee44a751694d478c6a1c9c3 2500w" />

Here's what happens when you add an API Trigger block:

### Endpoint creation

The block creates two HTTP endpoints using your agent and blueprint IDs:

* A synchronous endpoint for real-time responses
* An asynchronous endpoint for long-running tasks

### Request handling

When an external system calls your endpoint:

* The request body must contain an `inputs` field with your data
* Your blueprint receives this data as `@{result.inputs}`
* Your blueprint executes with this input data

<Tip>
  #### Accessing the payload data

  `@{result}` is only available in the block that immediately follows the API Trigger block. For subsequent blocks, you have two options to access the payload data:

  1. **Use a Set State block**: Make the first block after API Trigger a Set State block to store the payload data for use throughout your blueprint
  2. **Access via block ID**: Use `@{results.[api_trigger_block_id]}` where `[api_trigger_block_id]` is the unique identifier found in the API Trigger block's configuration menu
</Tip>

### Return values

To send data back to the API caller:

* Add a [**Return Value**](/blueprints/returnvalue) block at the end of your blueprint. The value from this block becomes the API response
* For synchronous calls, the result is the final event in the SSE stream
* For asynchronous calls, the result is available when polling the job status endpoint

### Blueprint structure requirements

When building blueprints that will be triggered via API, ensure your workflow ends with a [**Return Value**](/blueprints/returnvalue) block:

1. **Start with API Trigger**: Begin your blueprint with the API Trigger block
2. **Process your logic**: Add all the blocks needed for your workflow
3. **End with Return Value**: Always finish with a Return Value block to specify what gets returned to the API caller

**Example blueprint structure:**

```
API Trigger → [Your workflow blocks] → Return Value
```

The Return Value block returns any value as a string. If your blueprint returns a JSON object, it will be serialized as a JSON string. You may need to parse it using `JSON.parse()` in JavaScript or `json.loads()` in Python to access the individual fields.

## API endpoint

When you add an **API Trigger** block to your blueprint, it creates a public HTTP endpoint that you can use to trigger your blueprint. You can either use the synchronous endpoint for real-time execution and to get the result as soon as possible, or the asynchronous endpoint for long-running tasks. The asynchronous endpoint returns a job ID that you can poll for status updates and results.

### Authentication

All API calls require authentication using a Bearer token in the Authorization header:

```
Authorization: Bearer <your_api_key>
```

Learn how to [create and manage API keys](/api-reference/api-keys).

### Synchronous endpoint

The endpoint URL follows this pattern:

```
POST https://api.writer.com/v1/agents/{agent_id}/blueprints/{blueprint_id}
```

Where:

* `{agent_id}` is the unique identifier for your deployed agent. You can find this in the URL of your agent's page in the [Agent Builder](https://app.writer.com/agents) or via the [/agents API endpoint](#list-available-agents-and-blueprints).
* `{blueprint_id}` is the unique identifier for your blueprint. You find this in **Blueprint ID** field of the blueprint in the Agent Builder UI, or via the [/agents API endpoint](#list-available-agents-and-blueprints).

The synchronous endpoint is used for real-time execution. It accepts a JSON payload and returns [Server-Sent Events (SSE)](https://en.wikipedia.org/wiki/Server-sent_events) with real-time execution status.

### Request format

Send a POST request with a JSON body containing the data you want to pass to your blueprint.

<Warning>
  The `inputs` key is required for the JSON payload. If you don't include it, the API will return an error. Include the rest of your data under the `inputs` key. The value of the `inputs` key can be any JSON-serializable value.
</Warning>

<CodeGroup>
  ```bash cURL theme={null}
  curl -X POST "https://api.writer.com/v1/agents/123e4567-e89b-12d3-a456-426614174000/blueprints/ooamr04yng7" \
    -H "Authorization: Bearer <your_api_key>" \
    -H "Content-Type: application/json" \
    -d '{"inputs": {"document_id": "doc_67890", "file_url": "https://storage.example.com/documents/invoice_2024_001.pdf", "document_type": "invoice", "priority": "high"}}'
  ```

  ```python Python theme={null}
  import os
  import requests

  # Note about streaming
  # The Python `requests` library with `stream=True` will collect the entire SSE
  # stream and then process it line by line. For true real-time streaming,
  # consider using libraries like `httpx` or `aiohttp` that support async streaming.

  response = requests.post(
      "https://api.writer.com/v1/agents/123e4567-e89b-12d3-a456-426614174000/blueprints/ooamr04yng7",
      headers={"Authorization": f"Bearer {os.environ.get('WRITER_API_KEY')}"},
      json={"inputs": {"document_id": "doc_67890", "file_url": "https://storage.example.com/documents/invoice_2024_001.pdf", "document_type": "invoice", "priority": "high"}},
      stream=True
  )

  # Process Server-Sent Events stream
  for line in response.iter_lines():
      if line:
          line = line.decode('utf-8')
          if line.startswith('data: '):
              data = line[6:]  # Remove 'data: ' prefix
              if data == '[DONE]':
                  break
              print(f"Received: {data}")
  ```

  ```javascript JavaScript theme={null}
  import fetch from 'node-fetch';

  const response = await fetch(
      "https://api.writer.com/v1/agents/123e4567-e89b-12d3-a456-426614174000/blueprints/ooamr04yng7",
      {
          method: 'POST',
          headers: { 
              'Authorization': `Bearer ${process.env.WRITER_API_KEY}`,
              'Content-Type': 'application/json'
          },
          body: JSON.stringify({
              inputs: { document_id: "doc_67890", file_url: "https://storage.example.com/documents/invoice_2024_001.pdf", document_type: "invoice", priority: "high" }
          })
      }
  );

  // Process Server-Sent Events stream
  const reader = response.body.getReader();
  const decoder = new TextDecoder();

  while (true) {
      const { done, value } = await reader.read();
      if (done) break;
      
      const chunk = decoder.decode(value);
      const lines = chunk.split('\n');
      
      for (const line of lines) {
          if (line.startsWith('data: ')) {
              const data = line.slice(6); // Remove 'data: ' prefix
              if (data === '[DONE]') {
                  return;
              }
              console.log('Received:', data);
          }
      }
  }
  ```
</CodeGroup>

This data you send in the request is available in your blueprint under `@{result.inputs}`; for example, `@{result.inputs.document_id}`, `@{result.inputs.file_url}`, etc.

### Response format

The API returns Server-Sent Events (SSE) with real-time execution status:

```
data: {"status":"in progress","message":null}
data: {"status":"initializing","message":"Initializing session..."}
data: {"status":"validating","message":"Validating blueprint..."}
data: {"status":"executing","message":"Executing blueprint: ooamr04yng7..."}
data: {"status":"running","message":"Blueprint is running. Awaiting output..."}
data: {"status":"processing","message":"Processing blueprint result..."}
data: {"delta":"Document processed and routed to accounting team"}
data: [DONE]
```

### Asynchronous execution

For long-running workflows, you can also use the asynchronous endpoint:

```
POST https://api.writer.com/v1/agents/{agent_id}/blueprints/{blueprint_id}/jobs
```

This returns a job ID that you can poll for status updates using:

```
GET https://api.writer.com/v1/agents/jobs/{job_id}
```

#### Example job result

When you poll the job status, you'll receive a response like this:

```json  theme={null}
{
  "job_id": "6f6919ba-d97f-4315-bddf-191e5c3efb89",
  "agent_id": "5d746de9-73e7-4c0e-b264-a514f672a3f9",
  "blueprint_id": "ooamr04yng7",
  "status": "completed",
  "artifact": "Document processed and routed to accounting team",
  "error": null,
  "started_at": "2025-08-14T22:26:06.259540Z",
  "finished_at": "2025-08-14T22:26:06.700431Z"
}
```

The actual return value from your agent is in the `artifact` field of the JSON response. The `result` field contains metadata about the job execution.

The `artifact` field always contains a string. If your blueprint returns a JSON object, it will be serialized as a JSON string. You may need to parse it using `JSON.parse()` in JavaScript or `json.loads()` in Python to access the individual fields.

#### Creating and polling async jobs

Here is an example of how to create an async job and then poll for results:

<CodeGroup>
  ```bash cURL theme={null}
  # 1. Create the async job
  curl -X POST "https://api.writer.com/v1/agents/123e4567-e89b-12d3-a456-426614174000/blueprints/ooamr04yng7/jobs" \
    -H "Authorization: Bearer <your_api_key>" \
    -H "Content-Type: application/json" \
    -d '{"inputs": {"document_id": "doc_67890", "file_url": "https://storage.example.com/documents/invoice_2024_001.pdf", "document_type": "invoice", "priority": "high"}}'

  # Response: {"job_id": "job_abc123def456", "status": "queued"}

  # 2. Poll for job status and result
  curl -X GET "https://api.writer.com/v1/agents/jobs/job_abc123def456" \
    -H "Authorization: Bearer <your_api_key>"
  ```

  ```python Python theme={null}
  import os
  import requests
  import time

  def create_and_poll_job(agent_id, blueprint_id, inputs):
      # 1. Create the async job
      url = f"https://api.writer.com/v1/agents/{agent_id}/blueprints/{blueprint_id}/jobs"
      headers = {
          'Authorization': f"Bearer {os.environ.get('WRITER_API_KEY')}",
          'Content-Type': 'application/json'
      }
      
      response = requests.post(url, headers=headers, json={'inputs': inputs})
      job_data = response.json()
      job_id = job_data['job_id']
      
      print(f"Job created: {job_id}")
      
      # 2. Poll for completion
      while True:
          poll_url = f"https://api.writer.com/v1/agents/jobs/{job_id}"
          poll_response = requests.get(poll_url, headers=headers)
          job_status = poll_response.json()
          
          print(f"Job status: {job_status['status']}")
          
          if job_status['status'] in ['completed', 'error']:
              return job_status
          
          time.sleep(2)  # Wait 2 seconds before polling again

  # Example usage
  result = create_and_poll_job(
      '123e4567-e89b-12d3-a456-426614174000',
      'ooamr04yng7',
      {'document_id': 'doc_67890', 'file_url': 'https://storage.example.com/documents/invoice_2024_001.pdf', 'document_type': 'invoice', 'priority': 'high'}
  )
  print(f"Final result: {result}")
  print(f"Artifact: {result['artifact']}")
  ```

  ```javascript JavaScript theme={null}
  import fetch from 'node-fetch';

  async function createAndPollJob(agentId, blueprintId, inputs) {
      // 1. Create the async job
      const createResponse = await fetch(
          `https://api.writer.com/v1/agents/${agentId}/blueprints/${blueprintId}/jobs`,
          {
              method: 'POST',
              headers: {
                  'Authorization': `Bearer ${process.env.WRITER_API_KEY}`,
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify({ inputs }),
          }
      );
      
      const jobData = await createResponse.json();
      const jobId = jobData.job_id;
      
      console.log(`Job created: ${jobId}`);
      
      // 2. Poll for completion
      while (true) {
          const pollResponse = await fetch(
              `https://api.writer.com/v1/agents/jobs/${jobId}`,
              {
                  headers: {
                      'Authorization': `Bearer ${process.env.WRITER_API_KEY}`,
                  },
              }
          );
          
          const jobStatus = await pollResponse.json();
          console.log(`Job status: ${jobStatus.status}`);
          
          if (jobStatus.status === 'completed' || jobStatus.status === 'error') {
              return jobStatus;
          }
          
          // Wait 2 seconds before polling again
          await new Promise(resolve => setTimeout(resolve, 2000));
      }
  }

  // Example usage
  createAndPollJob(
      '123e4567-e89b-12d3-a456-426614174000',
      'ooamr04yng7',
      { document_id: 'doc_67890', file_url: 'https://storage.example.com/documents/invoice_2024_001.pdf', document_type: 'invoice', priority: 'high' }
  ).then(result => {
      console.log('Final result:', result);
      console.log('Artifact:', result.artifact);
  });
  ```
</CodeGroup>

### List available agents and blueprints

To see a list of all your agents and blueprints, you can use the following API endpoint:

```
GET https://api.writer.com/v1/agents?type=builder
```

This returns a list of all your deployed Agent Builder agents and includes any API-triggered blueprints associated with them. You can then use the agent and blueprint IDs to trigger the blueprint via API.

Below is an example of how to list all your agents and blueprints:

<CodeGroup>
  ```bash cURL theme={null}
  curl -X GET "https://api.writer.com/v1/agents?type=builder" \
    -H "Authorization: Bearer <your_api_key>"
  ```

  ```python Python theme={null}
  import os
  import requests

  response = requests.get(
      "https://api.writer.com/v1/agents?type=builder",
      headers={"Authorization": f"Bearer {os.environ.get('WRITER_API_KEY')}"}
  )

  print(response.json())
  ```

  ```javascript JavaScript theme={null}
  import fetch from 'node-fetch';

  const response = await fetch(
      "https://api.writer.com/v1/agents?type=builder",
      { headers: { Authorization: `Bearer ${process.env.WRITER_API_KEY}` } }
  );

  console.log(await response.json());
  ```
</CodeGroup>

## Testing

You can test your API trigger using the **Run blueprint** button in the Agent Builder editor.

Under **Test your trigger** in the API Trigger block, you can provide sample data for testing without making actual HTTP requests.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-run-blueprint.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=46f6d38ae7deb7849e2acfbba54fb4cf" alt="" data-og-width="2294" width="2294" data-og-height="1594" height="1594" data-path="images/agent-builder/api-trigger-run-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-run-blueprint.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=be09132cc72ce6bf93f53bb107ddfab5 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-run-blueprint.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=623b73372b10db86d3a9b489d88716a2 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-run-blueprint.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=fdafc8c41f54393751d8b973bf827587 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-run-blueprint.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=02cc034485efb2bc0c2553c4e9ac5954 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-run-blueprint.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b2fca547c64c3a7e4229b51cbaf30069 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/api-trigger-run-blueprint.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=abbc1fbcf01ebf5b6cd121e3d7eba4c7 2500w" />

You can also test your API trigger by sending a POST request to the API endpoint.

## Troubleshooting

### Common issues and solutions

#### I can't see or trigger my agent via the API

**Problem**: Your agent doesn't appear in the API or you get errors when trying to trigger it.

**Solution**: Check that your agent is deployed. Only deployed agents are accessible via the API.

#### I don't see my blueprint when looking via the API

**Problem**: Your blueprint doesn't show up in the list of available blueprints for your agent.

**Solution**: Ensure your blueprint starts with an **API Trigger** block. Only blueprints that begin with an API Trigger block are exposed via the API.

#### The blueprint isn't returning anything

**Problem**: Your blueprint executes but doesn't return any data to the API caller.

**Solution**: Make sure you have a [**Return Value**](/blueprints/returnvalue) block at the end of your blueprint workflow. This block is required to return data to the API caller.

#### My blueprint isn't receiving any input values

**Problem**: You can't access the data you sent in your API request.

**Solution**: Remember that your data is nested under the `inputs` key. Use `@{result.inputs.field_name}` instead of `@{result.field_name}`.

### Debugging tips

Since there are limited logs and execution visibility, use the **Return Value** block for debugging:

**Test payload structure**: Create a simple blueprint with just `API Trigger → Return Value` and set the return value to `@{result}`. This will show you exactly what data structure the blueprint is receiving.

**Test specific values**: Use `@{result.inputs}` to see just the inputs portion of your payload.

**Test state variables**: Return `@{state[key]}` to see the value of a specific state variable in your blueprint execution.

**Note**: Since `@{result}` is only available in the block immediately following the API Trigger, consider using a Set State block as your first block to store the payload data for debugging purposes.

## Next steps

* Learn how to [add file inputs and parse PDFs](/agent-builder/summarize-pdfs)
* Explore [tool calling](/agent-builder/tool-calling) for intelligent integrations with external tools
* Build [data tables with DataFrames](/agent-builder/dataframes) to display structured data
* Add [custom Python code](/agent-builder/python-code) to extend your agent's capabilities

<feedback />


# Build a chatbot connected to a Knowledge Graph
Source: https://dev.writer.com/agent-builder/chatbot-tutorial



Agent Builder contains prebuilt UI and blueprint blocks that you can combine to build a full-featured chatbot.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/chatbot-preview.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6c0fc1c1e2d8a79fef0450311d53882d" alt="" data-og-width="3456" width="3456" data-og-height="1802" height="1802" data-path="images/agent-builder/chatbot-tutorial/chatbot-preview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/chatbot-preview.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=084392a471bb7efdce393ec4d4ffb48d 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/chatbot-preview.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6357545d42d08b1b5cd9e237686b53fb 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/chatbot-preview.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=910cb15918f8d15b9d4e280dd4ce0f09 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/chatbot-preview.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3b31132d0390399fa8ba2e46250aecf5 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/chatbot-preview.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=82436f0f91e26bbcd02b3cfa7248adf2 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/chatbot-preview.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7e13128916bca38d44d781f5b2165eb0 2500w" />

This tutorial demonstrates how to build a chatbot that's connected to the Palmyra X5 model and integrates with a Knowledge Graph for domain-specific knowledge. It covers the following steps:

1. Adding a [**Chatbot** block](/components/chatbot) to the UI
2. Adding a [**Chat reply** block](/blueprints/chatreply) to the blueprint
3. Connecting a Knowledge Graph to the chatbot

<Note>
  If you are unfamiliar with Agent Builder interface, check out the [Agent Builder Quickstart](/agent-builder/quickstart).
</Note>

## Build the UI

The UI for the agent contains a single **Chatbot** block. This block handles the full UI for the chatbot, including the chat interface and the chat messages.

<Steps>
  <Step title="Add a Chatbot block to the UI">
    Drag and drop a [**Chatbot** component](/components/chatbot) onto the Interface.

    In the block's configuration panel, set the following fields:

    * **Conversation**: `@{chat}`. This is the state variable that stores the chat conversation.
    * **Assistant initials**: `AI`. This is the text that appears next to the assistant's messages in the chat.
    * **User initials**: `YOU`. This is the text that appears next to the user's messages in the chat.
    * **Use markdown**: `no`. You can change this to `yes` if you want to parse Markdown formatting in messages.
    * **Enable file upload**: `no`. This disables the file uploads in the chatbot.
    * **Placeholder**: `Type your message here.`. This is the text that appears in the input field when it's empty.

        <img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chatbot-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=621776f311d0d757a1611cc02b0aa1c4" alt="" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/chatbot-tutorial/chatbot-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chatbot-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6e877cb949fd46a3216d09122dd4dbcb 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chatbot-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e62f5b2adc54f986c5fd874dfb66e4f6 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chatbot-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f55bb1f4dcb3e5eb224148dd00bf5aaf 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chatbot-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=af6ad7683eea9cf13790590bf5c4282c 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chatbot-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f0dd908b1cc6aee146356fdd95c08d8c 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chatbot-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c7bcbcb98eaf08a32bc69fee334468c0 2500w" />
  </Step>
</Steps>

## Build the blueprint

The blueprint for the agent contains the following blocks:

* **UI trigger** block to run the blueprint when a user enters a chat message
* **Chat reply** block to manage the conversation and generate a response to the user's message

<Steps>
  <Step title="Add a UI trigger for the chat message event">
    To run the blueprint when a user enters a chat message, add a [**UI trigger** block](/blueprints/uitrigger) to the canvas. In the block's configuration panel, update the following fields:

    * **Component Id**: select the `Chatbot` component from the dropdown of UI blocks
    * **Event type**: `wf-chatbot-message`

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/ui-trigger.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d6eeabe1cabaf87f66b7dcafe1e2b5c7" alt="" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/chatbot-tutorial/ui-trigger.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/ui-trigger.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=59a1514070f803aedeb4f597103305df 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/ui-trigger.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=36e17bc7508a7970f75deccd395a901e 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/ui-trigger.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6cfdcd7311073125329f582aa8598962 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/ui-trigger.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4516706d7b0da1d13c8b3d472464b21a 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/ui-trigger.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=82201092805c68e36aa6e0127c6d5d1a 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/chatbot-tutorial/ui-trigger.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3e63009fb036d02f621dfa03220a1772 2500w" />
  </Step>

  <Step title="Add a Chat reply block">
    Add a **Chat reply** block to the canvas, which runs after the UI trigger block. This block manages the chat conversation, including the chat messages and the chat history.

    Connect the **UI trigger** block to the **Chat reply** block by dragging a line from the green dot on the **UI trigger** block to the **Chat reply** block.

    In the **Chat reply** block's configuration panel, set the following fields:

    * **Conversation object**: `chat`
    * **System prompt**: This provides the context for the chat conversation and gives instructions to the model about how to act or respond. The example below uses a system prompt that instructs the model to act as a helpful assistant regarding Writer's developer platform. System prompts help the model understand the context of the chat conversation and the goals of the chatbot. Learn more in [Prompting strategies](/home/prompting).

    ```
    You are a helpful assistant for Writer's developer platform. Use the provided documentation to answer questions about Writer's APIs, SDKs, and Agent Builder.

    Be clear and concise, include code examples when helpful, and reference specific docs when appropriate. If you're unsure about something, say so and suggest checking the documentation directly.
    ```

    * **Message**: `@{payload}`. This is the message that the user sends to the chatbot that triggers the blueprint to run.

        <img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chat-reply-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f4e32a11c5fe4dcc92e934bdd3dd01c5" alt="" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/chatbot-tutorial/chat-reply-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chat-reply-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=3a13c60d4bb16981c6e9fcaf0160ac90 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chat-reply-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=8162377efa83a541c3033af564f2c11b 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chat-reply-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=8774f42d478b19dfbb8a7a7233ea838c 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chat-reply-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d06ecda231e250927c2a11fabe86f9cb 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chat-reply-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1340f7f7669a63ada59891a1ab4eca6e 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/chat-reply-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f4b4a7a23598acadd457e18e34f5cbe1 2500w" />
  </Step>
</Steps>

At this point, the chatbot isn't connected to a Knowledge Graph, but it's configured to respond to messages from the user. You can preview the agent to see how it works and then [connect a Knowledge Graph to the chatbot](#connect-a-knowledge-graph-to-the-chatbot) to enable the chatbot to answer domain-specific questions.

## Preview the agent

To preview the agent, navigate to the **Preview** tab. Type a message in the chatbot and see the response from the model.

## Connect a Knowledge Graph to the chatbot

You can connect one or more [Knowledge Graphs](/home/knowledge-graph) to the chatbot to answer questions about data related to your business or a specific dataset.

To connect a Knowledge Graph to the chatbot, update the **Chat reply** block.

<Steps>
  <Step title="Update the Chat reply block">
    * Click the **Chat reply** block to open its configuration panel
    * Click the **+ Add tool** button under **Tools**
    * Select "Knowledge graph" under **Tool type**
    * Under **Graph id(s)**, select one or more Knowledge Graphs you want to connect to the chatbot. The example below connects the chatbot to a Knowledge Graph that contains developer docs and a Knowledge Graph connected to the support center.
    * Click **Save** to save the changes.

        <img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/add-knowledge-graph-tool.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b71b33e1b7c579e9d634499bc1b2797c" alt="" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/chatbot-tutorial/add-knowledge-graph-tool.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/add-knowledge-graph-tool.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=aae7d4be6c106b0682959db110f598fe 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/add-knowledge-graph-tool.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=32dab8c5daf2630e534d5d15d6c052f0 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/add-knowledge-graph-tool.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=70ef802a1a46b65b2acb5dc5cf735fdc 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/add-knowledge-graph-tool.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=92879204977d50f8b39d1cd88b920943 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/add-knowledge-graph-tool.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=3bac154d1fca78852ede979863959596 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/chatbot-tutorial/add-knowledge-graph-tool.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6cec67281d3c04ca3497d9ae3cd65796 2500w" />
  </Step>
</Steps>

Now when the user asks questions related to data in the connected Knowledge Graphs, the chatbot can reference the data in the Knowledge Graphs to answer the question.

If you encounter any issues, refer to the [Troubleshooting](/agent-builder/troubleshooting) guide for debugging information.

<feedback />


# Collaborate on agents
Source: https://dev.writer.com/agent-builder/collaboration



Agent Builder provides the following collaboration tools to help you and your team work together on your agents:

* [Add notes to your agents](#add-notes-to-your-agents)
* [See where users are working in real-time](#see-where-users-are-working-in-real-time)

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/collaboration-tools.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c10b10415bb0a1fa1e17d5824940dbc4" alt="" data-og-width="2436" width="2436" data-og-height="846" height="846" data-path="images/agent-builder/collaboration-tools.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/collaboration-tools.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7124c359d2cef5a56cea6554f765cabb 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/collaboration-tools.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0c6593dc1a8f145478e3d8db3a95be78 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/collaboration-tools.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=98408747d6e0593f272451d0c46cf6c2 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/collaboration-tools.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=bb0f8400ddc9d164873ef7cd5d5de930 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/collaboration-tools.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=72b701a697961ae09e2cbcb5de6a69d1 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/collaboration-tools.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=48493c51634cef5ac3baed793ab1a883 2500w" />

## Add notes to your agents

You can add notes anywhere in an agent's Interface or Blueprint view.

To add a note or view existing notes, click the **Add note** button in the top right corner of the interface or blueprint.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c48a301b98c288b61525565b9b0461df" alt="" data-og-width="1010" width="1010" data-og-height="462" height="462" data-path="images/agent-builder/add-note.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=14ade47dd0848b415f295e57da71ac17 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a69d3913c30927ac039685b09095f5c7 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=caf3d06f7534904c268fecc84ce1f83c 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=61149a6f00f7a3d2a921cd3e972593fb 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e06d7de7ffd1db034b387d0f666c4584 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=cd59fc423315c7c244298af7d4ada3dd 2500w" />

Click anywhere in the interface or blueprint to add a note at that location. Type the note in the text box that appears and then click the **Send** button.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note-example.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=182a2a91b8c4935f704d59deef2030de" alt="" data-og-width="1586" width="1586" data-og-height="846" height="846" data-path="images/agent-builder/add-note-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note-example.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=3ceac42e19e6e24244068b51eb17a2af 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note-example.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=611259a5ab29689cdd16f91cf4335a0a 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note-example.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=7e1891f18268031fa2cc4a29808bf103 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note-example.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b5ad71c43dd0976aa718eb3bff2cc6fa 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note-example.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=95ca57852033c2e4565de77da846617d 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-note-example.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=de3030de87a0fe509abeef35673a8e12 2500w" />

To view a specific note, click the note icon on the blueprint or interface. This opens the **Note** view to that particular note.

## See where users are working in real-time

If other users are working on the same interface or blueprint, you can see an icon on top of the block they're editing.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/user-editing-icon.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=132b776ecf3f3db260a7e5ec59d187cd" alt="" data-og-width="586" width="586" data-og-height="198" height="198" data-path="images/agent-builder/user-editing-icon.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/user-editing-icon.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b2264433ce0bfd62f6f71a95d85a4a9c 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/user-editing-icon.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=8efad51bc0f6b134a319208f1789970e 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/user-editing-icon.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b983047bc9fade12063e0292ff4f84d6 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/user-editing-icon.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=ce298bed6960eabc8e6dfc4add14b9e0 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/user-editing-icon.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=31c857418fb203366ef11c6154f79c29 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/user-editing-icon.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=0478f64a6be47b0f6657b8345c05431d 2500w" />

Changes that other users make to the interface or blueprint automatically apply to your view as well. This allows you to keep your view up to date with the latest changes.

Conflicts can occur if multiple users make changes to the same block at the same time. If you see a user icon on top of a particular block, it means that another user is editing that block and you should wait for them to finish their changes before making any changes to that block yourself.

<feedback />


# Add styling to the agent UI
Source: https://dev.writer.com/agent-builder/component-styles



You can style an agent's interface in two ways:

1. [Using component configuration menus](#component-configuration-menu) to adjust styling such as colors, backgrounds, shadows, and text alignment.

2. [Using CSS](#style-agent-builder-components-with-css) to target specific components, apply more advanced styling not available in the configuration menu, and create reusable styles across multiple components.

The configuration menu provides a convenient interface for common styling needs, while CSS gives you complete control over the agent's appearance.

## Component configuration menu

The component's configuration menu provides an interface for common styling needs such as colors, backgrounds, and text alignment. Each interface component has a different set of configurable attributes, which you can access via the configuration menu.

There are three styling options for each configurable attribute:

* **Default**: the default styling for the attribute.
* **CSS**: provide a CSS rule to apply to the attribute. For example, if the attribute is font color, you can set a CSS value such as `red`, a hex code, or an RGB value to apply to the attribute.
* **Pick**: define a value from a visual picker. For example, you can select a color from a color picker or control a shadow from a set of slider controls.

<Tabs>
  <Tab title="Default">
    Revert to the default styling for the attribute.
    <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/default-styling.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5877d1641997671c54dab544f4871114" alt="" data-og-width="2876" width="2876" data-og-height="860" height="860" data-path="images/agent-builder/default-styling.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/default-styling.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4be13d1f7f4631e2b50d5c896dd0ed19 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/default-styling.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0813c379b509c2033b8419e1866878f5 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/default-styling.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a85037279618f18af556bd5149d2855d 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/default-styling.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=b52b7630b2b03b52e69b7044b4d894ba 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/default-styling.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0a7105770d618ce2981cdbf711266acc 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/default-styling.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ac392fb2142604ee5ca6a4d75adcc37e 2500w" />
  </Tab>

  <Tab title="CSS">
    Provide a CSS rule to apply to the attribute.

    For example, if the attribute is font color, you can set a [CSS value](https://www.w3schools.com/cssref/css_colors.php) such as `red`, a hex code, or an RGB value to apply to the attribute.

    For shadow attributes, you can remove a component's shadow with `none` or update the shadow with [`box-shadow` CSS rules](https://www.w3schools.com/cssref/css3_pr_box-shadow.php).

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/css-styling.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=07c97a999bdb875ca9fd49fc4c977991" alt="" data-og-width="2876" width="2876" data-og-height="838" height="838" data-path="images/agent-builder/css-styling.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/css-styling.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4531ca1ab1bedf0ef8ced72ee6718bd0 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/css-styling.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=b7e94ab9ec627d31f875770c2e980622 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/css-styling.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=33dc8263ab8b69012a2675f9fc55e979 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/css-styling.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=b5142d85d6c43e6e827394edeaac5f4f 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/css-styling.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9081660132e6cc95863908777737a1fd 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/css-styling.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=12e08d0308a7d52216ef5684340a8339 2500w" />
  </Tab>

  <Tab title="Pick">
    Define a value from a visual picker. For example, you can select a color from a color picker.
    <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/pick-styling.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=b59b72907c383f82a3f0efcf9066e5e0" alt="" data-og-width="2872" width="2872" data-og-height="850" height="850" data-path="images/agent-builder/pick-styling.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/pick-styling.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9e833daf5d74bbf43dc6b1251c45f494 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/pick-styling.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d13d65629148b72bdff3d946bcbae532 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/pick-styling.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=6d56291411c8cd67478ac3940fbb27e1 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/pick-styling.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e48a5566d59a3f745e10406261143b28 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/pick-styling.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=11f10e4e3a62e722228abcb95281e90d 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/pick-styling.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=cbe11353f977870ce08e4ebcb14a0a67 2500w" />
  </Tab>
</Tabs>

## Add a CSS stylesheet

To add more specific and detailed styling for your agent's UI, you can add CSS stylesheets.

To style your agent's UI with CSS, follow these steps:

1. Add a CSS file to your project via the **Code** tab
2. Load the stylesheet into the agent's state
3. Apply CSS classes to components via the component's configuration menu

The example below creates a `bubblegum` class to make a pink, rotated component and makes the header font color for `CoreSection h3` elements yellow.

<Steps>
  <Step title="Add the `.css` file to your project">
    Create a new `.css` file in your project or upload an existing one via the **Code** tab.

    This example creates a new file named `theme.css` in the `static` directory with the following content:

    ```css  theme={null}
    .bubblegum {
        background: #ff63ca !important;
        line-height: 1.5;
        transform: rotate(-5deg);
    }

    .CoreSection h3 {
        color: #f9ff94 !important;
    }
    ```

    <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-file.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e195f460e11ddfb726f82b23f4ab6ef0" alt="" data-og-width="2862" width="2862" data-og-height="838" height="838" data-path="images/agent-builder/add-css-file.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-file.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a04e45a7dd6a78474ecd18ea87193af9 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-file.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=33a8907b8b5e31ea8ad6baa5ecd9e5b0 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-file.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=43400ca456ca5d31c102dfe5d39c0567 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-file.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=af2f40ab9b44e7df0a5a9636084a3360 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-file.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=07f78171f71abaeb5b4c8b37ce9029a3 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-file.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=63670d1c6aff6f3e46a2f406147f5afc 2500w" />
    See [Style Agent Builder components with CSS](#style-agent-builder-components-with-css) for more information about specifically styling Agent Builder components.

    <Note>
      To move a file into a directory such as `static`, prepend the directory name to the beginning of the filename. For example, `static/theme.css`.
    </Note>
  </Step>

  <Step title="Import the CSS file in your agent's code">
    To load the stylesheet when the agent starts, import the CSS file using the state's `import_stylesheet` method in `main.py`. The code below imports the stylesheet named `theme` from the `static` directory.

    ```python  theme={null}
    initial_state.import_stylesheet("theme", "static/theme.css")
    ```

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/import-css-file.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=75d53eca11d82dfd47d5237b513ab442" alt="" data-og-width="2856" width="2856" data-og-height="834" height="834" data-path="images/agent-builder/import-css-file.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/import-css-file.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0dbfbfefa5325f22507a9e18b7ca5c54 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/import-css-file.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=04d57b4a7435fd277d19bcc1e17b4f36 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/import-css-file.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=cb775459e906cf0e1dab6b91550bb4fa 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/import-css-file.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=bceb747032908dba7f8605ac5898a494 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/import-css-file.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=52f8a5d5d5cde076d2b1327d6e4c4905 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/import-css-file.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5cecd4e236210879079e7a5b6729812c 2500w" />

    The first argument is the name you want to give to the stylesheet, which you can reference if there are multiple stylesheets. The second argument is the path to the CSS file.

    You can also import stylesheets during runtime by calling the `import_stylesheet` method from the `state` object. See [Switch stylesheets during runtime](#switch-stylesheets-during-runtime) for more information.
  </Step>

  <Step title="Apply CSS classes to components">
    In the component's configuration menu, add a CSS class to the component under **Custom CSS classes**. Separate multiple classes with a space.

    This example adds the `bubblegum` class to a `Section` component so that the component's background is pink and rotated 5 degrees. The `CoreSection h3` styling applies to the header for any `Section` components, making the header text yellow.
    <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-class.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c2938f3eb534c78bd4a64ef1d436b218" alt="" data-og-width="2866" width="2866" data-og-height="826" height="826" data-path="images/agent-builder/add-css-class.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-class.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=669f8669fdd655f29e5cc01f9ae540c8 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-class.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=6d9755f51ccef4b6f71a2acb8ff415f7 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-class.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c4af83f37fa48f327c8c5b1b37582076 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-class.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=1447e6dc9d660c6c01b99ba30a44e87a 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-class.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=6f718d0d664c477c37184ce0211a70ab 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-css-class.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=4fd955df06124d9331509fb66aa2e8e1 2500w" />
  </Step>
</Steps>

<Warning>
  **CSS changes may not appear immediately due to browser caching.** When you modify a CSS file and refresh the page, you may experience a delay before the changes apply. This is expected behavior caused by browser caching.

  To see your CSS changes immediately during development, append a version querystring to your stylesheet path. This works because browsers cache CSS files based on their URL. By changing the querystring parameter, you force the browser to treat it as a new file and download a fresh copy. Increment the version number each time you update the CSS file to see changes immediately:

  ```python  theme={null}
  initial_state.import_stylesheet("theme", "static/theme.css?v=1")
  # After making changes, update to:
  initial_state.import_stylesheet("theme", "static/theme.css?v=2")
  ```
</Warning>

### Style Agent Builder components with CSS

Agent Builder components each have a class name starting with `Core` that you can use when defining CSS rules.

For example, the `Text` component has the class name `CoreText`. You can use this class name to style all `Text` components with the following CSS rule:

```css  theme={null}
.CoreText {
  color: red !important;
}
```

<Tip>
  The `!important` flag is essential when targeting attributes that are configurable via the component's configuration menu, such as text and background colors. Without the `!important` flag, the styles you define in CSS will be overridden by the component's configuration menu styling, because the configuration menu styling is of higher specificity.
</Tip>

### Switch stylesheets during runtime

You can switch stylesheets during runtime by calling the `import_stylesheet` method. To replace the current stylesheet with a new one, use the same stylesheet name but a different path to a new stylesheet.

The example below switches the stylesheet named `theme` to a different file when the `handle_cyberpunk` or `handle_minimalist` functions are called.

```python  theme={null}
def handle_cyberpunk(state):
    state.import_stylesheet("theme", "static/cyberpunk_theme.css")

def handle_minimalist(state):
    state.import_stylesheet("theme", "static/minimalist_theme.css")
```

<feedback />


# Build data tables with DataFrames
Source: https://dev.writer.com/agent-builder/dataframes



The [**DataFrame** component](/components/dataframe) lets you display structured data in a table format with built-in features like sorting, searching, and downloading. It's designed to work with [Pandas DataFrames](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html) or [PyArrow tables](https://arrow.apache.org/docs/python/generated/pyarrow.Table.html).

## Overview

DataFrames allow you to present data in a grid format. They provide an interface with built-in features like sorting, searching, and downloading. They work well for displaying lists of records, reports, or any tabular data that you've processed with Python.

### When to use DataFrames

DataFrames are useful for:

* **Data analysis results** from pandas operations
* **CSV file uploads** that need to be displayed as tables
* **Database query results** formatted as DataFrames
* **Any data that benefits from sorting and filtering**
* **Reports that users might want to download as CSV**

## Example: Display a sales report

This example creates a sales report from hardcoded data. It processes data with pandas and displays it in a DataFrame.

<Steps>
  <Step title="Open the Code tab and edit the main.py file">
    Open the **Code** tab at the bottom of the agent's interface and navigate to the `main.py` file.

    Add the following code to the `main.py` file. It creates a pandas DataFrame with the sales data and sets it in the state as `sales_report`.

    ```python  theme={null}
    import pandas as pd
    import writer as wf

    # Sample sales data
    sales_data = [
        {"rep_name": "Sarah Chen", "region": "West", "product": "Software License", "amount": 15000, "quarter": "Q3 2024"},
        {"rep_name": "Mike Rodriguez", "region": "East", "product": "Consulting", "amount": 8500, "quarter": "Q3 2024"},
        {"rep_name": "Alex Johnson", "region": "Central", "product": "Software License", "amount": 22000, "quarter": "Q3 2024"},
        {"rep_name": "Sarah Chen", "region": "West", "product": "Support Package", "amount": 5000, "quarter": "Q3 2024"},
        {"rep_name": "Lisa Park", "region": "East", "product": "Software License", "amount": 18000, "quarter": "Q3 2024"},
        {"rep_name": "Mike Rodriguez", "region": "East", "product": "Consulting", "amount": 12000, "quarter": "Q3 2024"}
    ]

    # Create pandas DataFrame
    df = pd.DataFrame(sales_data)

    # Set the DataFrame in state
    initial_state = wf.init_state({
     "sales_report": df
    })
    ```
  </Step>

  <Step title="Add a DataFrame component to the agent's interface">
    Navigate to the **Interface** tab to build the agent's interface.

    Add a **DataFrame** component to your page. Update the following settings:

    * **Data**: `@{sales_report}`. This is the state variable that contains the sales report data.

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-component.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3c6408ed45bdfc6f0c951b4e6bb3a745" alt="" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/dataframe-component.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-component.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=010957aa52d37b7d880c406f20233c2d 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-component.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ab70fa9b7a571c42a5fe686484b8765e 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-component.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=2806348ed5a90a6d2eb19f8a185c40b9 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-component.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d8dc687b3794e93206d74b14cf87efeb 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-component.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=aac70b54a159ea00a201fe1f5fe1d457 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-component.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3e28c7795a1b68d30d76991aa1eec0e5 2500w" />
  </Step>
</Steps>

### Preview the DataFrame

Navigate to the **Preview** tab to see the DataFrame in action.

You should see a table with columns for sales rep, region, product, amount, and quarter.

Try clicking column headers to sort by amount or region.

### Enable advanced features

Navigate back to the **Interface** tab to click on the DataFrame component. There, you can enable more features, like search, download, and editing or adding records.

1. **Enable Search**: In the DataFrame component settings, set **Enable search** to `yes`
2. **Enable Download**: Set **Enable download** to `yes`
3. **Optionally enable editing**: Set **Enable adding a record** and **Enable updating a record** to `yes` if you want users to modify data
4. **Test the enhanced features**:
   * Search for specific sales reps or regions
   * Sort by amount to see top performers
   * Download the data as CSV for further analysis

## Example: CSV file upload and processing

This example shows how to upload a CSV file and process the data with pandas to then display it in a DataFrame.

The example assumes you have a CSV file with the following columns:

* `product_category`
* `product_name`
* `quantity`
* `unit_price`
* `sales_rep`
* `date`
* `region`

It processes the data to calculate the total revenue for each product category and displays the data in a DataFrame.

Below is an example of the CSV file that you can use to test the agent:

```csv  theme={null}
product_category,product_name,quantity,unit_price,sales_rep,date,region
Software,CRM Pro,2,5000,Sarah Chen,2024-07-15,West
Hardware,Server Rack,1,8000,Mike Rodriguez,2024-07-18,East
Software,Analytics Suite,3,3000,Alex Johnson,2024-07-22,Central
Consulting,Implementation Service,5,1200,Sarah Chen,2024-07-25,West
Hardware,Network Switch,4,2500,Lisa Park,2024-08-02,East
Software,CRM Pro,1,5000,Mike Rodriguez,2024-08-05,East
Consulting,Training Package,8,800,Alex Johnson,2024-08-10,Central
Software,Analytics Suite,2,3000,Sarah Chen,2024-08-12,West
Hardware,Server Rack,2,8000,Lisa Park,2024-08-15,East
Consulting,Implementation Service,3,1200,Mike Rodriguez,2024-08-20,East
Software,CRM Pro,4,5000,Alex Johnson,2024-08-22,Central
Hardware,Network Switch,2,2500,Sarah Chen,2024-08-25,West
```

### Build the interface

Navigate to the **Interface** tab to build the agent's interface.

<Steps>
  <Step title="Add a File input component to allow users to upload the CSV file">
    Add a **File input** component to your page. Update the following settings:

    * **Label**: `Upload CSV`
    * **Allowed file types**: `.csv`
    * **Link variable** under **Binding**: `input_file`
  </Step>

  <Step title="Add a Button component to trigger the file upload">
    Add a **Button** component to your page. Update the following settings:

    * **Label**: `Process CSV`
  </Step>

  <Step title="Add a DataFrame component">
    Add a **DataFrame** component to your page. Update the following settings:

    * **Data**: `@{processed_data}`. This is the state variable that will contain the processed data after you build the blueprint.
  </Step>
</Steps>

The interface should look like this:

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-ui.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=51f0391060921fd82b873218b1fa4beb" alt="" data-og-width="3456" width="3456" data-og-height="988" height="988" data-path="images/agent-builder/dataframe-ui.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-ui.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e77b25238e87c8367712aa77ac259212 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-ui.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=05140d87292349924a26e014472d1699 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-ui.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=12619ab7007c6c29cdc828b6bca08066 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-ui.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=2896a253f1ede8101c7f6190a62c5fd9 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-ui.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=b6f705d5bf49b508e2585245a4ac04d9 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-ui.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=60ddcfbce3e9345854bab0fe50f9cb78 2500w" />

### Build the blueprint

Open the **Blueprint** tab to build the agent's blueprint. The blueprint contains:

* A **UI Trigger** that triggers blueprint execution when the user clicks the **Upload CSV** button.
* A **Python** block that processes the uploaded file and stores the data in a state variable.

<Steps>
  <Step title="Add a UI Trigger">
    Add a **UI Trigger** to the blueprint. Update the following settings:

    * **Component Id**: Select the **Process CSV** button you added to the interface.
    * **Event type**: `wf-click`
  </Step>

  <Step title="Add a Python code block">
    Add a **Python code** block to the blueprint. Then paste the following code into the block. The code reads the uploaded file, processes the data, and stores the processed data in a state variable.

    ```python  theme={null}
    import io
    import pandas as pd
    import writer as wf

    if "input_file" in state:
        # Read the uploaded file into a buffer
        file_buffer = io.BytesIO(state["input_file"][0]["data"])
        # Read buffer into pandas DataFrame
        df = pd.read_csv(file_buffer)
        
        # Process the data to calculate the total revenue for each product category
        df['total_revenue'] = df['quantity'] * df['unit_price']
        df = df.groupby('product_category').agg({
            'total_revenue': 'sum',
            'quantity': 'sum'
        }).reset_index()
        
        # Set processed DataFrame in state
        state["processed_data"] = df
    ```
  </Step>
</Steps>

The blueprint should look like this, with the Python block containing the code to process the uploaded file and store the processed data in a state variable.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-blueprint.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c1830d131ad072995749c39250a07ad8" alt="" data-og-width="3456" width="3456" data-og-height="1806" height="1806" data-path="images/agent-builder/dataframe-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-blueprint.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d05b7c047e730d7dd0029302524a0411 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-blueprint.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=80b089aeb965d86f4f2cf28a4624cdd8 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-blueprint.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=dc9306f0b008242abce5f1ae7e59a0a7 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-blueprint.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e69729aa4263186876f9c555352d4588 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-blueprint.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=629d2d4135ed3cbb226cc90e2f3b8b3f 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-blueprint.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c31872f2d5b1cdb4fc3cce4000572992 2500w" />

### Preview the agent

Navigate to the **Preview** tab to see the agent in action. You should see a button to upload a CSV file and a table to display the processed data.

Upload a CSV file; see the [beginning of this example](#example%3A-csv-file-upload-and-processing) for a sample CSV file.

Once you click the **Process CSV** button, the agent processes the data and displays it in the DataFrame component.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-preview.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7dd43ba5e826d82f79cd737e89d75c3c" alt="" data-og-width="3456" width="3456" data-og-height="1180" height="1180" data-path="images/agent-builder/dataframe-preview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-preview.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0e2634c88834ed9eff977a1ce02bb19c 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-preview.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=cd8b6341950431d2a1a82da40f0d5747 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-preview.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c4badb0b6901f9305adb84397c22ca18 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-preview.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7bd590eb9430ff54a771c4f05030bd51 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-preview.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=21fce990ddc4973a947dcad675b33c35 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dataframe-preview.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5990658355f226e0dbe475c537531cd8 2500w" />

## Best practices

1. **Use pandas for data processing**: Clean, aggregate, and transform data before display
2. **Keep DataFrames reasonably sized**: Use "Display row count" to control how many rows show simultaneously
3. **Enable appropriate features**: Only enable editing if users should modify data
4. **Consider text wrapping**: Toggle "Wrap text" based on your data content
5. **Use meaningful column names**: Pandas column names become the table headers

## Next steps

Try extending this example by:

* Adding more sophisticated pandas operations such as `groupby` and `pivot_tables`
* Connecting to real databases or APIs
* Creating calculated columns based on business rules
* Styling the component with custom CSS classes


# Agent Builder Demo Application
Source: https://dev.writer.com/agent-builder/demo-agent

Explore the Agent Builder demo agent that analyzes customer reviews and drafts responses. Learn how UI, blueprints, and state variables work together.

<Warning>
  Agent Builder is in beta. Some features are still in development and are subject to change.
</Warning>

When you create a new agent with Agent Builder, it comes with a demo agent that analyzes customer reviews and drafts personalized responses. This walkthrough shows you how the demo agent works and how to modify it to understand Agent Builder's core concepts.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6a0d38372c2d7cff242a3457a46c019a" alt="" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/demo-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=1a64409aab0dff73b54117e08f42e455 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=cebd1417ee1d0d2afe47aca29f786d9c 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=da63201c6ab4ef7c4ec801cdb2733f49 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5109985216f24095fb26a575ec57ec62 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=029c2382c84e5255376b1831fa487665 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=56a5a0dd544ec6e2956e3185e0d70c6d 2500w" />

This walkthrough covers the following topics:

* How to navigate the Agent Builder interface
* How the UI and blueprint work together through state variables
* How to use the **Classification** block to route workflows
* How to connect blocks using `@{result}`
* How to modify an existing agent to add new behavior

<Tip>
  If you are unfamiliar with Agent Builder, review the [Agent Builder Overview](/agent-builder/overview) to learn more about the different components of an agent.
</Tip>

## Start an Agent Builder project

To create an agent with Agent Builder, log in to [AI Studio](https://app.writer.com/aistudio) and follow these steps:

<Steps>
  <Step title="Click the Build an agent button">
    Click the **Build an agent** button in the top right corner of the page.

        <img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=cc6bdc545119bcd97319a71850cf7d5a" alt="Build an agent button" data-og-width="590" width="590" data-og-height="198" height="198" data-path="images/agent-builder/build-agent-button.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=929c05fa19f02fd96d9c40398950e4bc 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2fdd754b4a5342b91906b353300ec77c 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9f9b4bde8acb4e44aaddf6f83a24f00a 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=da1ef54b5c7f7235e5218e063fbaca62 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b383319378a3e1d8b599bfa21b38efe1 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2a038c483d5fcd8755c33af77b067631 2500w" />
  </Step>

  <Step title="Create a new agent">
    In the modal that appears, select **New Agent** to create a new agent from scratch.

    <Tip>
      For common use cases, prebuilt agent templates are available. These include both general-purpose and industry-specific options, all customizable to your specific requirements.
    </Tip>

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=035990e1925e3c575f3d4966ae57ea10" alt="Agent creation options" data-og-width="2778" width="2778" data-og-height="1606" height="1606" data-path="images/agent-builder/get-started-agent-builder.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=8fba199fd65a3da92c6909a2eb07d749 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d909dab372cb2721833f33202b980c6b 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=2b94eb2c112853f0cc6ae11860a58f83 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e84b5f0849480ded8f8cbd44093b96f3 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5c0d754d551628ee2b0e732575666716 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=650a29916a2c295f13ac724c8e63b554 2500w" />

    Once the agent is created, a new tab will open in your browser with the Agent Builder interface.
  </Step>

  <Step title="Return to the Agent Builder interface">
    You can get to the Agent Builder interface any time by going to the [AI Studio homepage](https://app.writer.com/aistudio) and selecting the agent you created.

    You'll see the Configure Deployment page when you select the agent. To get to the edit interface, click the **Edit** button in the top right corner.

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=293915f43f6e0e45aa67b6cfac784403" alt="Edit agent" data-og-width="581" width="581" data-og-height="163" height="163" data-path="images/agent-builder/edit-button.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=2082b3e16cd438f17b79cd8b26c97944 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9338001cc20185c05c8d1e2762f3b8d2 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0e78b548c604e91540dc88caf00dc302 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d1c3512c824ee46c2a503661e992aa18 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=8eab76b5bba0baf3efd589fc530833b3 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=89357ffd387c198c992a2c064ebe0cd9 2500w" />
  </Step>
</Steps>

## Preview the demo agent

Writer initializes the new agent with a demo workflow that you can use to get started. The demo agent takes a customer review and uses a series of tools to analyze the review and draft a response to the customer.

### Agent Builder views

The Agent Builder interface contains four views:
<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/view-switching.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f2e6eaf0cce2d5c10b9c2f5cc35c332b" alt="" data-og-width="1048" width="1048" data-og-height="138" height="138" data-path="images/agent-builder/view-switching.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/view-switching.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=1202fb830eeb69c4b6c33c501a958634 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/view-switching.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=736266518a7f896fa552c76f1fe3e1c1 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/view-switching.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=1e76c868c119086e495c36af429e5c47 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/view-switching.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=749ae4255f81531621aa66bd00da0de8 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/view-switching.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b82945b59cc5f615ac657a3f435fd04f 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/view-switching.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e2de61db111903896ddb547c66ebecaf 2500w" />

* **Interface**: The agent's UI, where you can edit the agent's appearance.
* **Blueprints**: The agent's blueprint, where you can edit the agent's behavior.
* **Vault**: The agent's secrets, where you can add secrets like API keys or passwords.
* **Preview**: Test the agent's behavior and preview what the user sees.

You can switch between views by clicking the tabs at the top of the page.

### Preview the agent's behavior

Before you start editing, preview the agent to see how it works:

<Steps>
  <Step title="Click the Preview tab">
    Click the **Preview** tab to see the agent in action.
    <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-preview.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5518823879655e3523bf3ab475fe4052" alt="" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/agent-preview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-preview.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=437f73907e5cd744131f6c14b74bd707 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-preview.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=01074314fb1b6a71e7fd574d742d0c10 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-preview.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ca0fab4be6d86d534640b816fa489b87 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-preview.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=214dd8c4ba06e62eeb3ac2b04436d2ad 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-preview.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=499b2f5ea52a61a8d51a401181e88b0c 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-preview.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ed7ea1a98f317f42e0dd36f08c6aaacb 2500w" />
  </Step>

  <Step title="Copy and paste the example customer review">
    Copy the example customer review under **1. Copy Review** and paste it into the **2.Paste Review** text input.
  </Step>

  <Step title="Click Draft response">
    Click **Draft response**. You'll see a status message in the UI that the agent is generating a response. Once the agent has finished, you'll see the response in the UI.
  </Step>

  <Step title="Inspect the agent's blueprint">
    Click the **Blueprints** tab to see the agent's blueprint. You'll see green boxes highlighting the path that the agent took through the blueprint. You'll learn more about the blueprint in the next section.

        <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ae025688c6e18eeb322758556a42f761" alt="" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/agent-path.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f1da279c5773b0613a51bdbdbf6bff97 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=32ffae7be0d7a16f5d94d56b81fc48ed 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=7bab99fc7c9e571df2af0e62f7bf08c6 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5028866807576fca11cda037b79c2917 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=bb1e21a19f69358d107cb4861d0d6208 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=46347e36c59b35df762f73b1094b4aaf 2500w" />
  </Step>
</Steps>

## Tour of the demo agent architecture

The demo agent consists of an interface and a blueprint. The interface and blueprint are connected through the agent's state and UI triggers.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=35154169be3557ced366471ee8d79f1c" alt="Demo agent blueprint structure showing the flow from UI trigger to text generation" data-og-width="3992" width="3992" data-og-height="1108" height="1108" data-path="images/agent-builder/demo-agent-architecture.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a71d0176610fd21adec609d68a202725 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7507b00a3e821ca78b9f3914a50d00a8 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d9cdc46a4e60a9f4eab76620fe33d647 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4c2c8100345ef45ccfd25e972c3bee04 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d20b310c2216ff7eacb0275b018ae977 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent-architecture.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=592487bd21fedcd005afea4d51651446 2500w" />

* [**Interface**](#interface-view): What the user sees and interacts with.
* [**Blueprint**](#blueprints-view): A flowchart-like interface where you connect blocks of logic.
* [**Agent state**](#agent-state): A set of values that's shared between the UI and the blueprint. Both the UI and the blueprint can reference and update the state.
* **UI trigger**: A trigger from the UI that starts the agent's blueprint. In this case, the UI trigger is attached to click events on the **Draft response** button.

### Agent state

The [agent's state](/agent-builder/state) is a core component of the agent's behavior. It contains values that the UI and blueprint can access and update.

You can view the agent's state from any view by clicking the **State explorer** icon in the top right of the page.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=dc9b3e4865094cbb8ab1c1b016b1393d" alt="" data-og-width="830" width="830" data-og-height="183" height="183" data-path="images/agent-builder/state-explorer-icon.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c879c37cc482564a6d147017903e4783 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3f059d1a8f0aef068d333aab62ac3eee 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=9fc574243187e6eddf1fbd838e21c0d8 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b6244e617a09a9b798cedf1d021f946a 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3a2844ff0e041c4880ddb3f7306038b4 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f31a2f62a7a3b151be20e9c1901f1f42 2500w" />

The section [Connecting the UI and the blueprint](#connecting-the-ui-and-the-blueprint) describes how the UI and blueprint interact with the state to perform the agent's tasks.

### Blueprints view

The Blueprints view is where you define the agent's logic and behavior. It's a flowchart-like interface where you connect blocks of logic.

If you previewed the agent, you'll see green boxes highlighting the path that the agent took through the blueprint. For the sample review, the agent takes the following steps:

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ae025688c6e18eeb322758556a42f761" alt="" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/agent-path.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f1da279c5773b0613a51bdbdbf6bff97 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=32ffae7be0d7a16f5d94d56b81fc48ed 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=7bab99fc7c9e571df2af0e62f7bf08c6 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5028866807576fca11cda037b79c2917 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=bb1e21a19f69358d107cb4861d0d6208 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=46347e36c59b35df762f73b1094b4aaf 2500w" />

<Steps>
  <Step title="UI Trigger">
    The blueprint started with the **UI Trigger** element. In this case, the UI Trigger is configured to run when the user clicks the **Draft response** button in the UI.
  </Step>

  <Step title="Set state to show the progress message">
    The agent used the **Set state** block to set the `progress_message` value for the agent state to show that it is generating a response.
  </Step>

  <Step title="Classification">
    The agent uses the **Classification** block to analyze the review to determine the primary focus of the review, from the following: `Packaging`, `Pricing`, `Quality`, `Delivery`, or `Empty`.

    The agent determined the review fit into the `Quality` category. Classification blocks are built-in blocks that use a Palmyra model to classify the input based on a set of user-defined categories.
  </Step>

  <Step title="Text generation">
    The agent used the **Text generation** block to have a Palmyra model draft a response to the customer specifically focused on quality.
  </Step>

  <Step title="Set state for the response">
    The agent stored the drafted response using the `@{result}` environment variable so it could use it in the UI.
  </Step>

  <Step title="Set state to clear the progress message">
    The agent cleared the `progress_message` value in the state to remove the loading message from the UI.
  </Step>
</Steps>

#### View another path through the blueprint

To view another path through the blueprint, go back to the **Preview** view and paste the following:

`I like the style but it's a lot more expensive than other brands without any difference in quality.`

Click **Draft response**, and navigate back to the **Blueprint** view. You'll see that the agent took a different path through the blueprint, this time selecting the `Pricing` category and drafting a response using a pricing-related prompt.

### Interface view

The Interface view is where you define the agent's appearance. You build the interface with components that you can customize and reference in the blueprint.

This agent's UI has the following components:

* A welcome image in a sidebar
* A section for the review:
  * A **Text area Input** for the customer review
  * A button to **Draft response**
* A section for the response:
  * A **Message** component to display the in progress status message
  * A section with **Text** components to display the response

The Interface uses **Column container** components to layout the Review section in a two-column format.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-ui.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=6ac3c04756349ac695633f34f1c617d6" alt="" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/agent-ui.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-ui.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f62260322574ce3824950d2492891045 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-ui.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=9ab00f13da9423be5cc3bf86650bf1eb 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-ui.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f5ab0d5a3e9359de457ef917288f68f2 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-ui.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f39d0274fd6c55b3b7a059c3595b786d 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-ui.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=404b163258203cab853e53cd2891b596 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-ui.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a780de261e5be94f4466c1c7987d73a3 2500w" />

#### Hidden sections

You won't see the hidden section for the results in the UI when you first load the agent. You can see that the section is in the UI from the **Interface Layers** view, which shows all the components in the UI. The hidden section has an icon next to it indicating that it's not visible.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/hidden-components.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=f7dd2e3509d7dd19fbe1b90b6f18b30f" alt="" data-og-width="424" width="424" data-og-height="116" height="116" data-path="images/agent-builder/hidden-components.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/hidden-components.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=fb369ba90ed96062983f609fdb5ff280 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/hidden-components.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=59f5caacba229d31590f19a8abe47823 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/hidden-components.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=26d9651d45d27e0e7ef15da254fa4754 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/hidden-components.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=80086c82dd0d8108fce7272abfef417b 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/hidden-components.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c8bd17c0d1cb843b817809c163358b85 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/hidden-components.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=84a928a1ca238ce29e25771cabcd4abf 2500w" />

Click that element in the Component tree to see its settings. Under **Visibility**, it's set to only show up once there is a value in the `review_response` state variable.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/review-response-visibility.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ed68e3df92d501351b8369ce65e27b5b" alt="" data-og-width="752" width="752" data-og-height="258" height="258" data-path="images/agent-builder/review-response-visibility.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/review-response-visibility.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=acf0626e4bd876be1c93d34dc5bc0f93 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/review-response-visibility.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a37b5ab1fc0595a860f1cc8a64ecffab 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/review-response-visibility.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f48f6ab4f4f84f255874373599356710 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/review-response-visibility.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a3ef016784ad453b170f21974ce9b520 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/review-response-visibility.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=5375d6a9fa837ecfdefa31a449d10834 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/review-response-visibility.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=358ca51a608cc731f03c872a6b057504 2500w" />

### Connecting the UI and the blueprint with state variables

To build full-featured agents, you must be able to connect the UI to the blueprint.

The agent's state is the main way to pass data between the UI and the blueprint. The state contains a set of values that the UI and blueprint can both reference and set. You can also use triggers to connect the UI to the blueprint.

Here are the places where the demo agent connects the UI to the blueprint and passes data between them:

<Steps>
  <Step title="UI Trigger">
    The **Draft response** button in the UI is connected to the **UI Trigger** element in the blueprint. Click events trigger the blueprint to run.
  </Step>

  <Step title="Customer review input">
    The **Text area Input** component in the UI binds the user's input to the `customer_review` state variable. The blueprint uses this value in the **Classification** block.
  </Step>

  <Step title="Progress message">
    The **Message** component in the UI displays the value of the `progress_message` state variable to the user. The blueprint sets this value after the user clicks **Generate response**.
  </Step>

  <Step title="Review response">
    The two sections in the response with **Text** components in the UI depend on the value of the `review_response` state variable.

    1. The blueprint sets this value after the **Text generation** block runs.
    2. Once `review_response` contains a value, the section that had the message "The response will be shown here" disappears.
    3. The section that displays the response appears. The text area in that section contains the value of `review_response`.

    See [Hidden sections](#hidden-sections) for more information about the review response sections and conditionally showing and hiding them.
  </Step>

  <Step title="Clear progress message">
    Once the review response is generated, the final **Set state** block in the blueprint sets the `progress_message` state variable to an empty string to clear the loading message from the UI.
  </Step>
</Steps>

### Passing data between blocks

The demo agent also shows how to pass data between blocks with the `@{result}` variable. Once the text generation block has finished, it passes its result to the next block in the blueprint, which is the **Set state** block. The **Set state** block sets the `review_response` state variable with the `@{result}` from the text generation block.

Learn more about all available variables in [Using Data from Previous Blocks](/agent-builder/execution-environment).

## Modify the demo agent

Now that you've toured the Agent Builder interface, try editing the agent's behavior.

### Add a new category to the classification block

This example shows how to add a new category to the classification block to look for and respond to reviews that focus on sizing issues.

First, add another category to the **Classification** block in the blueprint so that the agent can also classify reviews that are about sizing.

<Steps>
  <Step title="Open the Classification block">
    Navigate to the **Blueprints** view and click the **Classification** block in the blueprint to open the block settings.
  </Step>

  <Step title="Add a new category">
    In the **Categories** section, add a new category called `Sizing` with the value:

    ```
    The review relates to sizing issues or satisfaction with sizing.
    ```

        <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-category.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ed7994ab24346faecf62107cdbcb4c2f" alt="" data-og-width="1850" width="1850" data-og-height="1144" height="1144" data-path="images/agent-builder/add-category.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-category.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c4ed5f3c1d9d2055aec2279fc91e88d3 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-category.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5db2a0555d6f7de60cc0510904a890b8 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-category.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=1cfdb455ec4046e88a06fe9a45ced12b 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-category.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c16cd4b5850a87ec43ee39232ad8f246 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-category.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b58e3900d056c79cfa5728efdf883374 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-category.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=d0e426890f0590c120ad5e258c6ef696 2500w" />
  </Step>

  <Step title="Add a new text generation block">
    Add a new **Text generation** block to the blueprint to generate a response to sizing-related reviews:

    1. Click one of the existing **Text generation** blocks in the blueprint.
    2. Type `Command + c` (on Mac) or `Ctrl + c` (on Windows) to copy the block.
    3. Click onto the blueprint canvas and type `Command + v` (on Mac) or `Ctrl + v` (on Windows) to paste the block.
  </Step>

  <Step title="Edit the new text generation block">
    Click on the new text generation block you pasted to edit it. Update the following settings:

    * **Alias**: `Draft sizing response`
    * **Prompt**: update the prompt to focus on sizing issues:

    ```
    Take the role of a customer success rep and draft an email response to the customer review below that mentions sizing: @{customer_review}

    Address the customer's sizing experience. Thank them if the sizing was accurate, or address their concerns if there were problems with sizing.
    ```
  </Step>

  <Step title="Connect the new text generation block to the rest of the blueprint">
    Connect the new text generation block to the rest of the blueprint:

    * Drag a line from the purple dot next to **Sizing** on the **Classification** block to connect it to the new **Text generation** block.
    * Drag a line from the **Success** connection point on the **Text generation** block to the **Set state** block.

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/new-sizing-path.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a80a3def505f72b0e80230449b320bdf" alt="" data-og-width="3456" width="3456" data-og-height="1808" height="1808" data-path="images/agent-builder/new-sizing-path.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/new-sizing-path.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=dfbf1b27d91598b67ad0c1c0a60106fc 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/new-sizing-path.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ca0a0e99c4687e550c769677e23394f5 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/new-sizing-path.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=73741a3ce5237d3e86b85e8e1c00ac04 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/new-sizing-path.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=10432091589beebff04008f75e62d6f2 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/new-sizing-path.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0bc199abb051b8d866156e3a0c3b480c 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/new-sizing-path.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=913e73ded2139dff74ed52869892b37e 2500w" />
  </Step>
</Steps>

Now, preview the agent to see the new behavior. Paste the following review into the input field and click **Draft response**:

```
The sizing felt off, I'm normally a small and even the XS was too big.
```

You should see the agent take a different path through the blueprint and generate a sizing-related response.

### Add a new UI component

This next example shows how to add a new UI component that you can incorporate into the agent's blueprint.

The steps show how to prompt the agent to add a discount of a certain percentage when generating a response to the customer review. You will:

* Add a **Select input** component to the UI that lists different discount percentages
* Edit the prompt for one of the **Text generation** blocks to add the selected discount percentage to the response if there is one

**From the UI view:**

<Steps>
  <Step title="Add a new Select input component">
    Add a new **Select input** component to the UI. Drag it into the section that contains the area for pasting the review text and the **Draft response** button.

    Update the following settings in the Select input component's settings:

    * **Label**: `Discount %`
    * **Options**: `0`, `5`, `10`, `15` (the keys and values should be the same)
    * **Link variable** under **Binding**: `discount`
  </Step>

  <Step title="Move the component above the Draft response button">
    Move the component above the **Draft response** button by clicking the three vertical dots on the component's settings menu and selecting **Move up**. You can also drag the component up in the UI.

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/move-component-up.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=986d926c6f5916133530919c192e6f27" alt="" data-og-width="678" width="678" data-og-height="278" height="278" data-path="images/agent-builder/move-component-up.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/move-component-up.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ac1fde8e5244b79dd3582939d274b4ff 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/move-component-up.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=1cd6156eee19510b5e6aec7b5cfacb94 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/move-component-up.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3b5fdce7d4019e53b903b2236621d46f 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/move-component-up.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c4e7088359349cb25138ef11af418ce4 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/move-component-up.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4bd79e769ef5ca8a3382d2f69e3d7ea6 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/move-component-up.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=f82ca631a8b70efa14a39c501b76d449 2500w" />

    The UI should now look like this:
    <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dropdown-input-settings.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=44782af75624ccd310c9d2c0b80fc271" alt="" data-og-width="3456" width="3456" data-og-height="1808" height="1808" data-path="images/agent-builder/dropdown-input-settings.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dropdown-input-settings.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=dc385bfa33f0db5cc40855a67b5002fd 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dropdown-input-settings.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=b371a8784a4e329e5f3c744e90c0e542 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dropdown-input-settings.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9138ca7a609e756c2ec3e142a17515df 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dropdown-input-settings.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=403fcb2906f65986fafc17c5bc05e14a 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dropdown-input-settings.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a12bc9bfe6b25244751245aa157aacbf 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/dropdown-input-settings.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6ffa239d7e4d44a443be23c46c34ffa1 2500w" />
  </Step>
</Steps>

**From the blueprint view:**

<Steps>
  <Step title="Edit the Draft packaging response text generation block">
    Click the **Draft packaging response** text generation block to open its settings.

    Edit the block's prompt to read the `discount` state variable and add a discount to the response if there is one. For example, add the following to the prompt:

    ```
    Offer a discount of @{discount} percent on their next purchase.

    Do not offer a discount if the value of @{discount} is 0.
    ```

        <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-discount.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=fdae7550de665470de4d5d80fe72b268" alt="" data-og-width="3456" width="3456" data-og-height="1804" height="1804" data-path="images/agent-builder/add-discount.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-discount.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5ded7ee088cfffabd6f30c3ce479dd65 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-discount.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e036132034baf5f18dae55720618ffd0 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-discount.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e3cd7f7cfa0bac951c77bb726ee589c4 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-discount.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=0e11018fa261f21cf5f2bed0633ed26d 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-discount.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=653cc8d1c4119d69df2c0fab3fdf9541 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-discount.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=4ecea2dee901b329ba9f8745b6da2a14 2500w" />
  </Step>
</Steps>

Now, preview the agent to see the new behavior. Paste the following review into the input field:

```
The packaging was awful.
```

Then, choose a discount amount from the select input and click **Draft response**.

You should see the agent take a different path through the blueprint and generate a response that offers a discount if you set it above 0.

You can update the prompts for the other text generation blocks to have the agent offer a discount for the other categories.

## Next steps

Now that you've interacted with and modified an agent in Agent Builder, you can build your own. Check out the [Agent Builder Quickstart](/agent-builder/quickstart) to learn how to build a new agent from scratch.

<feedback />


# Deploy with Docker
Source: https://dev.writer.com/agent-builder/deploy-with-docker

Deploy Agent Builder agents with Docker containers. Run agents on cloud platforms, on-premises servers, or local development machines.

This guide shows you how to deploy your Agent Builder agents using [Docker containers](https://www.docker.com/). After completing these steps, you can run your agents in any environment that supports Docker, including cloud platforms, on-premises servers, or local development machines.

<Tip>
  To deploy a local agent to the Writer cloud, see [Sync agents between local and cloud](/agent-builder/sync-agent).
</Tip>

## Prerequisites

Before getting started, ensure you have:

* [A local Agent Builder project](/agent-builder/local-development)
* [Docker installed on your system](https://docs.docker.com/get-docker/)
* [A Writer API key](/api-reference/api-keys)

## Overview

Below are the main steps to deploying your agent with Docker:

1. Create and build a Docker image for your agent
2. Publish the Docker image to a container registry and deploy it to your target environment

## Create a Docker image

A `Dockerfile` contains instructions that tell Docker how to build your agent's container image. The `Dockerfile` must be named `Dockerfile` and placed in your agent's project directory alongside `main.py` and `.wf/`.

### Create the Dockerfile

Create a `Dockerfile` in your agent's project directory with the following content:

```docker  theme={null}
FROM python:3.13-slim

# Install system dependencies
RUN apt-get update -y && \
    apt-get install -y build-essential cmake python3-dev curl && \
    rm -rf /var/lib/apt/lists/* && \
    mkdir /app

# Workdir
WORKDIR /app
# Copy only requirements first for better caching, then install
COPY requirements.txt /app/requirements.txt
RUN python -m pip install --upgrade pip && \
    pip install --no-cache-dir -r /app/requirements.txt

# Copy the rest of the project
COPY . /app

# Set up the agent
ENTRYPOINT [ "writer", "run" ]
EXPOSE 8080
CMD [ ".", "--port", "8080", "--host", "0.0.0.0" ]
```

<Note>
  This Dockerfile uses an official Python base image and installs dependencies from the `requirements.txt` file that's automatically generated in your Agent Builder project. If you're familiar with Docker, you can customize this `Dockerfile` for your specific needs. Agent Builder agents are standard Python applications that work with the Writer Framework package.

  The `--port 8080` flag overrides Writer Framework's default port range (3005-3099 for run mode) to use port 8080, which is commonly used for web applications and works well with most cloud platforms.
</Note>

### Build the Docker image

Build your Docker image using the following command:

```bash  theme={null}
docker build . -t my-agent-app
```

Replace `my-agent-app` with a descriptive name for your agent.

<Warning>
  By default, Docker builds images for the architecture it's running on. If you're using an ARM-based computer (like a Mac with M1/M2 chip or Raspberry Pi), Docker builds an ARM image. Most cloud platforms require x86 images. Use [Docker buildx](https://docs.docker.com/build/building/multi-platform/) to build multi-platform images, or build on an x86 machine.
</Warning>

## Run the container

Your agent needs access to your Writer API key to perform actions with the Writer API and Writer LLMs. The Docker image doesn't include your API key for security reasons, so you need to provide it when running the container.

### Set up your environment

Create a `.env` file in your project directory with your API key:

```bash  theme={null}
WRITER_API_KEY=your_api_key_here
```

Then source the environment file in your shell:

```bash  theme={null}
source .env
```

Now you can run your container using either `docker run` or `docker compose`.

### Using `docker run`

```bash  theme={null}
docker run -e WRITER_API_KEY -p 8080:8080 my-agent-app

# Or load environment variables from a file:
docker run --env-file .env -p 8080:8080 my-agent-app
```

### Using `docker compose`

Create a `docker-compose.yml` file for easier management:

```yaml  theme={null}
services:
  agent:
    build: .
    ports:
      - "8080:8080"
    environment:
      - WRITER_API_KEY
    # Or load environment variables from a file
    # env_file:
    #   - .env
```

Then run with:

```bash  theme={null}
docker compose up
```

## Test your agent locally

After setting up your environment and building your Docker image, test your agent locally using either `docker run` or `docker compose`.

Open your browser to [http://localhost:8080](http://localhost:8080) to verify your agent is running correctly.

## Publish your Docker image

To deploy your agent to cloud platforms, publish your Docker image to a container registry such as Docker Hub, Google Container Registry, or Amazon Elastic Container Registry.

The following example shows how to publish your image to Docker Hub:

```bash  theme={null}
docker tag my-agent-app <DOCKERHUB_USERNAME>/my-agent-app:latest
docker login
docker push <DOCKERHUB_USERNAME>/my-agent-app:latest
```

Once your image is in a registry, deploy it to services such as AWS ECS, Azure Container Instances, or Kubernetes.

## Troubleshoot issues

### Common issues

**Agent fails to start**

* Verify your `WRITER_API_KEY` is set correctly
* Check that all required dependencies are installed
* Review container logs for specific error messages

**Port binding errors**

* Ensure the port in your `Dockerfile` matches the port you're trying to access
* Check that the port isn't already in use by another service

**Memory or CPU issues**

* Increase resource allocation in your cloud platform
* Optimize your agent's code for better performance
* Consider using a more powerful instance type

### Debug locally

Run your container with verbose logging to debug issues:

```bash  theme={null}
docker run -e WRITER_LOG_LEVEL=DEBUG -p 8080:8080 my-agent-app
```

## Next steps

* Learn how to [sync your local agent with cloud agents](/agent-builder/sync-agent) for easier deployment
* Explore [custom Python code](/agent-builder/python-code) to extend your agent's capabilities
* Set up [secrets management](/agent-builder/secrets) for production deployments in the Writer cloud

<feedback />


# Using data from previous blocks
Source: https://dev.writer.com/agent-builder/execution-environment

Pass data between blocks in Agent Builder blueprints. Access state variables, secrets, and results from preceding blocks with execution environment.

Agents can pass data between blocks in the blueprint and the UI to create dynamic workflows. Each block operates with a set of variables in its execution environment.

The execution environment includes the agent's [state variables](/agent-builder/state) and [secrets](/agent-builder/secrets), along with the results and inputs from the preceding blocks in the blueprint. You can access variables from the execution environment in the blueprint and in custom code.

The most common use case for the execution environment is to access the result of the preceding block. Each blueprint block that runs passes its result to the next block in the blueprint, which you can access with the `@{result}` variable in the following block.

The execution environment is specific to each block in the blueprint and changes based on the block's inputs, outputs, and state.

This document includes:

* [An explanation of the execution environment](#execution-environment-explained)
* [A table of variables available in the execution environment](#variables-available-to-each-block)
* [Examples of how to access variables in the execution environment](#access-execution-environment-variables)

## Execution environment explained

Think of an execution environment like a toolbox that a block can access while it's running. This toolbox contains useful information that your agent needs to do its job, like remembering information from earlier steps or accessing important values you've saved. Blocks can add, remove, and update variables in the execution environment as they run.

Most of the information in the toolbox is primarily useful for internal use, debugging, and advanced use cases, but `@{result}` is particularly important for you as you build workflows.

Whenever a block finishes running, it adds its result to the execution environment. This result is then available to the next block in the blueprint so it can act on it.

<img src="https://mintcdn.com/writer/AfqfjP6jBmTFWZzr/images/agent-builder/execution-environment.png?fit=max&auto=format&n=AfqfjP6jBmTFWZzr&q=85&s=92ecc2e4f23d2c055261917c3a229b4f" alt="" data-og-width="2781" width="2781" data-og-height="879" height="879" data-path="images/agent-builder/execution-environment.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/AfqfjP6jBmTFWZzr/images/agent-builder/execution-environment.png?w=280&fit=max&auto=format&n=AfqfjP6jBmTFWZzr&q=85&s=18641488b5ff70f60874bbd0b68ef79c 280w, https://mintcdn.com/writer/AfqfjP6jBmTFWZzr/images/agent-builder/execution-environment.png?w=560&fit=max&auto=format&n=AfqfjP6jBmTFWZzr&q=85&s=3d99193fea9f7056eb6309105ca969d9 560w, https://mintcdn.com/writer/AfqfjP6jBmTFWZzr/images/agent-builder/execution-environment.png?w=840&fit=max&auto=format&n=AfqfjP6jBmTFWZzr&q=85&s=42078254c8f8660273f2daff8f7fd9a5 840w, https://mintcdn.com/writer/AfqfjP6jBmTFWZzr/images/agent-builder/execution-environment.png?w=1100&fit=max&auto=format&n=AfqfjP6jBmTFWZzr&q=85&s=1c821542a1686ccbbe519027dd4807db 1100w, https://mintcdn.com/writer/AfqfjP6jBmTFWZzr/images/agent-builder/execution-environment.png?w=1650&fit=max&auto=format&n=AfqfjP6jBmTFWZzr&q=85&s=5dd9f454fb3fe58de32338324997aba0 1650w, https://mintcdn.com/writer/AfqfjP6jBmTFWZzr/images/agent-builder/execution-environment.png?w=2500&fit=max&auto=format&n=AfqfjP6jBmTFWZzr&q=85&s=51392ae3e3b86b26d5d49233fad00cf0 2500w" />

### Example from a blueprint

Consider the following section of a blueprint that generates text based on a specific prompt. It shows two connected blocks:

* A **Text generation** block that generates text based on a specific prompt
* A **Set state** block that sets a state variable with the results of the **Text generation** block

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-example.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4560c3db84629182529e4440fcb8b0af" alt="" data-og-width="1503" width="1503" data-og-height="670" height="670" data-path="images/agent-builder/execution-environment-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-example.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=99faea70c5ad70ff6d10342388afc98b 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-example.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=b8b76e47feefa7adc4431d18af3e4ca1 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-example.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5e1341daa9f2be2c4705f99b4790439e 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-example.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=23ed9a467ba7ee40b2ab3692ca980e36 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-example.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4ddcf22bc20875720041e1dd61210fa3 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-example.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=b0ad54ea15799a8f7f3bbd0304e58341 2500w" />

* The **Text generation** block uses the state variable `product` to access information that the user input via the UI. It then generates text based on that information.
* The **Set state** block's execution environment includes the `result` variable from the **Text generation** block, which is the summary of the file. It sets a state variable with that result so that the UI can display the summary.

## Variables available to each block

The following table shows the variables that are available to each block in the execution environment. Not all variables are available in all blocks; for example, the `api_calls` variable is only available when the block makes an API call.

Many of these variables are primarily useful for internal use, debugging, and advanced use cases. However, the `result` variable is particularly useful for building workflows.

| Variable         | Type          | Description                                                                                                                                                                                                                                       | Example                                                                                                                      |
| ---------------- | ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| `api_calls`      | `array[dict]` | Any Writer API calls that the agent made at this block, including the request and the response. For example, API calls from a **Text generation** block to the Writer [chat completions](/api-reference/completion-api/chat-completion) endpoint. | `[{'request': {'method': 'POST', ...}, 'response': {'status_code': 200, ...}}]`                                              |
| `call_stack`     | `dict`        | The call stack of the agent. The key is the index of the block in the call stack and the value is the block ID.                                                                                                                                   | `{0: "123abc", 1: "456def"}`                                                                                                 |
| `context`        | `dict`        | The ID of the block that triggered the blueprint execution and the event that triggered it.                                                                                                                                                       | `{'target': '123abc', 'event': 'wf-click'}`                                                                                  |
| `httpx_requests` | `array[dict]` | Any HTTP requests that the agent made at this block, including the request and the response.                                                                                                                                                      | `[{'request': {'method': 'POST', ...}, 'response': {'status_code': 200, ...}}]`                                              |
| `item`           | Any           | An individual item in a **For-each** block loop. The type of the item varies based on the values provided to the **For-each** block. For a dictionary, this is the value of the item. For a list, this is the item itself.                        | `file123`                                                                                                                    |
| `itemId`         | `str`         | The ID of the individual item in a **For-each** block loop. For a list, this is its index in the loop, starting at 0. For a dictionary, this is the key of the item.                                                                              | `0`                                                                                                                          |
| `message`        | `str`         | The error message if a block failed with an error.                                                                                                                                                                                                | `"Invalid input: age must be a number"`                                                                                      |
| `result`         | varies        | The result of the preceding block. The type of the result varies based on the block.                                                                                                                                                              | `Thank you so much for your wonderful review! We're thrilled to hear that you've found the perfect tailored blazer with us.` |
| `results`        | `dict`        | The full list of results from all blocks in the blueprint. It's a dictionary where the key is the block ID and the value is the result of the block. If the block hasn't run yet, the value is `null`.                                            | `{'123abc': 'Thank you so much...', '456def': '%Generating response...', '789ghi': null}`                                    |
| `session`        | `dict`        | Session information, such as the session ID, cookies, headers, and user information.                                                                                                                                                              | `{'id': '123', 'cookies': {...}, 'headers': {...}, 'userInfo': {}}`                                                          |
| `state`          | `dict`        | The agent's [state variables](/agent-builder/state).                                                                                                                                                                                              | `{'user_name': 'John', 'persona': 'sales'}`                                                                                  |
| `target`         | `str`         | The ID of the next block to run.                                                                                                                                                                                                                  | `'123abc'`                                                                                                                   |
| `ui`             | `object`      | The UI of the agent as a WriterUIManager object. This is a Python object that allows you to interact with the UI of the agent via custom code.                                                                                                    |                                                                                                                              |

## Access execution environment variables

### In blueprint blocks

You can read the execution environment variables in blueprint blocks using `@{variable_name}` syntax. For example, `@{result}` accesses the result of the preceding block.

This example shows a **Set state** block that uses the `@{result}` variable to access the result of the preceding block. The block sets a state variable `message` with the string `Result: ` and the output of the preceding block.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d50c641d8693637dab3352efc66a46af" alt="" data-og-width="2854" width="2854" data-og-height="1704" height="1704" data-path="images/agent-builder/execution-environment-set-state-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=fd750aba913556a2590665f2bdcd82b2 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0136e42ba6cee0a90d700ae6a90af9f3 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e4562255cdcc968a6082c51f0f168b53 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=36584b922faf6ef688a505cad293f2b3 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9d304ba8506a4e94faf6e209ee600ec4 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=1e6640cf6ee1817eccc7e48067cbb270 2500w" />

#### Nested variable syntax

You can access nested variables in blueprint blocks using dot notation. For example, `@{result.0.id}` accesses the `id` field of the first result of the preceding block.

This example shows a **Set state** block to set a `file_id` state variable from an **Add files to Writer Cloud** block. It uses `@{result.0.id}` to access the `id` field of the first item in the result of the preceding block.

Here is the what the `result` variable looks like in the execution environment. It's possible to add multiple files to Writer Cloud, so the `result` variable from this block is an array of dictionaries. The `0` index accesses the first item in the array.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-result-variable.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d598d08eee8fa476772cb9cda39c5a2a" alt="" data-og-width="800" width="800" data-og-height="314" height="314" data-path="images/agent-builder/execution-environment-result-variable.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-result-variable.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=823197df66fe120a62e5d70c007c243c 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-result-variable.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=be6660ab209235be65b6f45727cfea89 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-result-variable.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7f6cc4d3c9453d80936c7195c1c83ce1 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-result-variable.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c775d0619bb3eaf58c131ce3eed7d392 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-result-variable.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=22acc80a9c388ce65a8e7387a20d1030 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-result-variable.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5e4b112b70a01ff5c8fc8a2bd4296a38 2500w" />

The **Set state** block uses `@{result.0.id}` to access the `id` field of the first item in the result of the preceding block.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block-nested.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7127d3a3645fd151eb80f1f28cecd074" alt="" data-og-width="1922" width="1922" data-og-height="1104" height="1104" data-path="images/agent-builder/execution-environment-set-state-block-nested.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block-nested.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=47a6857dfac795ea95fb06106f27db29 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block-nested.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d02639eee8c72e5010e03fd1b1c56401 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block-nested.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=651ff630403185bdbc22df8b10aaff14 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block-nested.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0c7bf492cbdcebab644f793d669b2320 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block-nested.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=42aa91054063af11f24f2868de9ffaae 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-set-state-block-nested.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9009efb060dd77984c72be2925019e26 2500w" />

### In custom Python code

You can access the execution environment variables in custom Python code directly as variables.

For example, this Python block in the blueprint accesses the output of the preceding block and prepends the string `Result: ` to it. It then sets state variable `message` with the final result.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-python-block.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e30328aac1475d3a866dda2c5035777e" alt="" data-og-width="2644" width="2644" data-og-height="1108" height="1108" data-path="images/agent-builder/execution-environment-python-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-python-block.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d40ed26bb41e1bf419cb0679935bd9e1 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-python-block.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=52210c02059d266a827eb2c06d0dfc81 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-python-block.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d5d7a5041f98a1510d9be3be99851dda 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-python-block.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d2529f22c879875d15fabf741e2813a2 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-python-block.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=236f564205d7891d4c6a802bd25f85b8 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/execution-environment-python-block.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=dd0c72fa27dd4a8cf00d86816167c91a 2500w" />

#### Environment variables

Your `WRITER_API_KEY` is also available when you run custom Python code. It's available as an environment variable (as opposed to an execution environment variable), so you can access it using `os.getenv('WRITER_API_KEY')`.

```python  theme={null}
import os

api_key = os.getenv('WRITER_API_KEY')
```

<feedback />


# Process invoices and send to Slack
Source: https://dev.writer.com/agent-builder/invoice-processing



This tutorial walks through building an agent that processes PDF invoices, extracts structured data, and sends the results to Slack. The agent takes an uploaded invoice PDF, extracts key information like vendor details and line items, and posts a formatted summary to a Slack channel.

<CardGroup cols={3}>
  <Card title="Interface">
        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=91e1504d0e0b0fed6beaee4e3613ab0d" alt="Invoice processing interface" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/invoice-processing/invoice-processing-ui.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=f46ca9356480600bae6baa6321a82c1d 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=040e526aad341c7947cb92dfa874d608 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4d1cce99cba05ed92a6d764bea1be799 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e0dda655ba5e64af44c4531b838626c2 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=23046f0e821324a4f997eec2c44fa7dd 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=66c91a8386807d01c3f51b9dd331e563 2500w" />
  </Card>

  <Card title="Blueprint">
        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=f2ca546cce690c54f94b5dd564982278" alt="Invoice processing blueprint" data-og-width="3456" width="3456" data-og-height="1800" height="1800" data-path="images/agent-builder/invoice-processing/invoice-processing-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9fbf3e07c6db5581b61482a7332024dd 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=bd449de73548eca0c4a40a3fd6a1abd3 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c438f074f3439a72dd49c8d8bfbab772 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7c22860a3c414100fb98ecea91c9398f 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4ed43624e12ef197a8bfb9cbcb617da9 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6267021bb940c573379a98b385763d84 2500w" />
  </Card>

  <Card title="Slack message">
        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3dd999da4d1e2abb49fa4417de707cc3" alt="Invoice processing Slack message" data-og-width="1172" width="1172" data-og-height="308" height="308" data-path="images/agent-builder/invoice-processing/slack-message.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=96a6357bd0d87a475bbc54ab20026bdf 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=346fc7e4f0231663fb27fd24ecdd3d50 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c94d92cc685d4d0e7204b0e67c22fdae 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=8b0768872f4ae4cd5a39a44964e91a88 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=fc26d4bb060a382f7cf56c47b0631b86 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ecdc156592b1efd92bda9be5788ff7fc 2500w" />
  </Card>
</CardGroup>

This pattern is useful for automating accounts payable workflows, expense processing, and any scenario where you need to extract structured data from documents and route it to business systems. Once you complete this tutorial, you can continue enhancing the agent by adding [tool calling](/agent-builder/tool-calling-tutorial) with behaviors like validating invoices, flagging potential issues, and comparing invoices against historical data.

## Prerequisites

Before building this agent, you need to set up a Slack webhook to send the invoice data to a Slack channel.

Follow the instructions in the [Slack documentation](https://api.slack.com/messaging/webhooks) to set up a webhook. The general steps are:

1. Go to [Slack API](https://api.slack.com/apps) and create a new app
2. Select "From scratch" and provide a name for your app
3. Choose the Slack workspace where you want to build the agent
4. Navigate to "Incoming Webhooks" in the left sidebar of the new app and activate webhooks
5. Click "Add New Webhook to Workspace" and select the channel where invoices should be posted. You might need administrator permissions to add a webhook to a channel, depending on your Slack workspace settings.
6. Copy the webhook URL - you'll need this for the HTTP request block. The webhook URL will look like: `https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX`

## Agent overview

This agent processes invoices through the following steps:

1. User uploads a PDF invoice file
2. File is uploaded to Writer Cloud storage
3. PDF content is extracted and parsed
4. AI extracts structured invoice data such as vendor, amounts, line items.
5. Formatted invoice summary is sent to Slack

## Build the UI

The agent's UI contains a file input for uploading invoices and a submit button.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=91e1504d0e0b0fed6beaee4e3613ab0d" alt="UI" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/invoice-processing/invoice-processing-ui.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=f46ca9356480600bae6baa6321a82c1d 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=040e526aad341c7947cb92dfa874d608 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4d1cce99cba05ed92a6d764bea1be799 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e0dda655ba5e64af44c4531b838626c2 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=23046f0e821324a4f997eec2c44fa7dd 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-ui.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=66c91a8386807d01c3f51b9dd331e563 2500w" />

<Steps>
  <Step title="Add a file input">
    Drag a **File Input** block to the canvas. In the block's configuration menu, update the following:

    * **Label**: `Invoice`
    * **Allowed file types**: `.pdf`
    * **Link variable** under **Binding**: `invoice`

    This allows users to upload PDF files and stores the file in the `invoice` state variable.
  </Step>

  <Step title="Add a button to submit the request">
    Drag a **Button** block to the canvas. In the block's configuration menu, update the following:

    * **Label**: `Submit`
  </Step>
</Steps>

## Build the blueprint

The logic of the blueprint is as follows:

1. The **UI Trigger** block starts the agent when the user clicks the submit button
2. The **Add files to Writer Cloud** block uploads the invoice file to cloud storage
3. The **Parse PDF** block extracts text content from the uploaded file
4. The **Structured Output** block processes the PDF text and extracts invoice data as JSON
5. The **HTTP Request** block sends the structured data to Slack

The finished blueprint contains the following blocks:
<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=f2ca546cce690c54f94b5dd564982278" alt="Finished blueprint" data-og-width="3456" width="3456" data-og-height="1800" height="1800" data-path="images/agent-builder/invoice-processing/invoice-processing-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9fbf3e07c6db5581b61482a7332024dd 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=bd449de73548eca0c4a40a3fd6a1abd3 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c438f074f3439a72dd49c8d8bfbab772 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7c22860a3c414100fb98ecea91c9398f 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4ed43624e12ef197a8bfb9cbcb617da9 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/invoice-processing-blueprint.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6267021bb940c573379a98b385763d84 2500w" />

<Steps>
  <Step title="Add a UI Trigger block">
    Drag a **UI Trigger** block to the canvas. In the block's configuration menu, update the following:

    * **Component Id**: select the **Submit** button from the dropdown
    * **Trigger**: `wf-click`

    This triggers the blueprint when the user clicks the Process Invoice button.
  </Step>

  <Step title="Add an Add files to Writer Cloud block">
    Drag an **Add files to Writer Cloud** block to the canvas. In the block's configuration menu, update the following:

    * **Files**: `@{invoice}`

    This uploads the invoice file from the `invoice` state variable to Writer Cloud storage.
  </Step>

  <Step title="Add a Parse PDF block">
    Drag a **Parse PDF tool** block to the canvas. In the block's configuration menu, update the following:

    * **File**: `@{result.0.id}`

    This extracts the text content from the uploaded PDF file using the file information returned from the Add files to Writer Cloud block.
  </Step>

  <Step title="Add a Structured Output block">
    Drag a **Structured Output** block to the canvas. In the block's configuration menu, update the following:

    * **Prompt**:

    ```
    Extract the following information from this invoice:

    - Invoice number
    - Vendor name and address
    - Invoice date and due date
    - Bill-to company and address  
    - Total amount, subtotal, and tax amount
    - Currency
    - All line items with descriptions, quantities, unit prices, and totals
    - Payment terms
    - Purchase order number (if present)

    If any information is not clearly stated in the invoice, use null for that field.
    ```

    * **Input**: `@{result}`
    * **Model**: `Palmyra X5`
    * **JSON Schema**: The following is an example JSON schema for the structured output. You can use this as a starting point, or create your own schema based on the invoice format you'd like to extract.

    ```json  theme={null}
    {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "type": "object",
      "title": "Invoice Processing Data",
      "description": "Schema for structured invoice data extracted from PDF documents",
      "properties": {
        "invoiceNumber": {
          "type": "string",
          "description": "Unique invoice identifier"
        },
        "vendorName": {
          "type": "string",
          "description": "Name of the company or vendor issuing the invoice"
        },
        "vendorAddress": {
          "type": "string",
          "description": "Full address of the vendor"
        },
        "invoiceDate": {
          "type": "string",
          "format": "date",
          "description": "Date the invoice was issued (YYYY-MM-DD format)"
        },
        "dueDate": {
          "type": "string",
          "format": "date",
          "description": "Payment due date (YYYY-MM-DD format)"
        },
        "billToCompany": {
          "type": "string",
          "description": "Company name being billed"
        },
        "billToAddress": {
          "type": "string",
          "description": "Billing address"
        },
        "totalAmount": {
          "type": "number",
          "description": "Total invoice amount including tax",
          "minimum": 0
        },
        "subtotal": {
          "type": "number",
          "description": "Subtotal before tax",
          "minimum": 0
        },
        "taxAmount": {
          "type": "number",
          "description": "Total tax amount",
          "minimum": 0
        },
        "currency": {
          "type": "string",
          "description": "Currency code (e.g., USD, EUR, GBP)",
          "default": "USD"
        },
        "lineItems": {
          "type": "array",
          "description": "Individual items or services on the invoice",
          "items": {
            "type": "object",
            "properties": {
              "description": {
                "type": "string",
                "description": "Description of the product or service"
              },
              "quantity": {
                "type": "number",
                "description": "Quantity of items",
                "minimum": 0
              },
              "unitPrice": {
                "type": "number",
                "description": "Price per unit",
                "minimum": 0
              },
              "totalPrice": {
                "type": "number",
                "description": "Total price for this line item",
                "minimum": 0
              }
            },
            "required": ["description", "totalPrice"],
            "additionalProperties": false
          }
        },
        "paymentTerms": {
          "type": "string",
          "description": "Payment terms (e.g., 'Net 30', 'Due on receipt')"
        },
        "purchaseOrderNumber": {
          "type": "string",
          "description": "Purchase order number if referenced on invoice"
        }
      },
      "required": [
        "invoiceNumber",
        "vendorName",
        "invoiceDate",
        "totalAmount",
        "currency",
        "lineItems"
      ],
      "additionalProperties": false
    }
    ```

    This processes the PDF text and extracts structured invoice data according to the JSON schema. The AI will identify and extract the relevant information from the invoice text.
  </Step>

  <Step title="Add an HTTP Request block to send to Slack">
    Drag an **HTTP Request** block to the canvas. In the block's configuration menu, update the following:

    * **Method**: `POST`
    * **URL**: Your [Slack webhook URL](/agent-builder/invoice-processing#prerequisites)
    * **Body**:

    ```json  theme={null}
    {
      "text": "New Invoice Processed",
      "blocks": [
        {
          "type": "header",
          "text": {
            "type": "plain_text",
            "text": "📄 Invoice Processed"
          }
        },
        {
          "type": "section",
          "fields": [
            {
              "type": "mrkdwn",
              "text": "*Invoice #:* @{result.invoiceNumber}"
            },
            {
              "type": "mrkdwn",
              "text": "*Vendor:* @{result.vendorName}"
            },
            {
              "type": "mrkdwn",
              "text": "*Date:* @{result.invoiceDate}"
            },
            {
              "type": "mrkdwn",
              "text": "*Due Date:* @{result.dueDate}"
            },
            {
              "type": "mrkdwn",
              "text": "*Amount:* @{result.currency} @{result.totalAmount}"
            },
            {
              "type": "mrkdwn",
              "text": "*Bill To:* @{result.billToCompany}"
            }
          ]
        }
      ]
    }
    ```

    This sends a formatted message to Slack with the key invoice details. The message uses Slack's block kit format to create a structured, readable invoice summary.
  </Step>
</Steps>

## Preview the agent

Navigate to the **Preview** tab to test the agent.

Upload a PDF invoice and click the Process Invoice button. The agent will upload the file, extract the invoice data, and send a summary to your configured Slack channel.

You can see the agent's progress in the **Logs** tab, including the extracted JSON data and the Slack API response.

You should see a message in the Slack channel with the invoice data.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3dd999da4d1e2abb49fa4417de707cc3" alt="Slack message" data-og-width="1172" width="1172" data-og-height="308" height="308" data-path="images/agent-builder/invoice-processing/slack-message.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=96a6357bd0d87a475bbc54ab20026bdf 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=346fc7e4f0231663fb27fd24ecdd3d50 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c94d92cc685d4d0e7204b0e67c22fdae 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=8b0768872f4ae4cd5a39a44964e91a88 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=fc26d4bb060a382f7cf56c47b0631b86 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/invoice-processing/slack-message.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ecdc156592b1efd92bda9be5788ff7fc 2500w" />

## Add tool calling for invoice validation

You can enhance this agent by adding [tool calling](/agent-builder/tool-calling) to validate invoices and flag potential issues. Here are some ways to extend the functionality:

* Check for missing required fields like tax ID or payment terms
* Compare against previous invoices from the same vendor to detect price discrepancies
* Validate amounts against purchase orders and company spending policies
* Flag duplicate invoice numbers or unusual payment terms
* Verify vendor details against your approved vendor list

To add these capabilities:

1. Add a tool calling block after the structured output to analyze the extracted data
2. Configure validation rules and checks in your custom Python code
3. Update the Slack message to include any validation warnings or approvals
4. Optionally trigger different workflows based on the validation results

Check out the [tool calling tutorial](/agent-builder/tool-calling-tutorial) to learn how to add these validation capabilities to your invoice processing agent.

<feedback />


# Create and test agents locally
Source: https://dev.writer.com/agent-builder/local-development

Develop Agent Builder agents offline on your local machine with Writer Framework. Test agents locally before deploying to Writer Cloud.

This guide shows you how to create, edit, and test agents on your local machine before deploying them to the Writer Cloud. This uses [Writer Framework](https://github.com/writer/writer-framework) to work with Agent Builder agents locally with Python.

After completing these steps, you can develop Agent Builder agents offline locally and push them to the cloud when you're ready to share them with your team.

For more information about syncing agents between local and cloud and deploying to the Writer Cloud, see [Sync agents between local and cloud](/agent-builder/sync-agent).

## Prerequisites

Before getting started, ensure you have:

* Python 3.8 or later
* `pip` package manager
* A Writer API key. Learn how to [create and manage API keys](/api-reference/api-keys).

### Set your Writer API key as an environment variable

To pass your API key to Writer Framework, you need to set an environment variable called `WRITER_API_KEY`.

Create a new file called `.env` in the root of your project, for example, `my-agent/.env`, and add the following line:

```bash  theme={null}
export WRITER_API_KEY=[your_api_key]
```

Run the following command to activate the environment variable:

```bash  theme={null}
source .env
```

### Install the Writer Framework package

Install the Writer Framework package in a virtual environment. The Writer Framework package includes tools for creating, editing, and testing agents locally and deploying them to the Writer Cloud.

```bash  theme={null}
python3 -m venv venv  # Create a virtual environment
source venv/bin/activate  # Activate the virtual environment
pip install writer  # Install Writer Framework
```

<Tip>To make sure your local development environment matches the Writer Cloud environment, you should use the latest version of the Writer Framework package and check for updates regularly.</Tip>

## Create a new local project

Create a new Agent Builder project locally using the Writer Framework CLI:

```bash  theme={null}
writer create my-agent
cd my-agent
```

This creates a new project directory with the following structure:

```
my-agent/
├── .wf/                    # Project metadata and components. Don't edit this directory manually.
├── main.py                 # Main application code
├── requirements.txt        # Python dependencies
├── README.md              # Project documentation
└── static/                # Static assets
```

## Start developing

To run your agent in development mode with live reloading, run the following command:

```bash  theme={null}
writer edit . # Run in the current directory
```

This command displays the local URL in your terminal, which you can use to access your agent. The default URL is `http://127.0.0.1:4005` and you can specify a different port with the `--port` flag.

<Note>When you run the `writer edit` command, you might see the warning `Missing required environment variables for vault access`. This warning is expected because Vault is a secrets management feature that's only available in the Writer Cloud version of Agent Builder.</Note>

### Production mode

To run your agent in production-like mode, run the following command:

```bash  theme={null}
writer run .  # Run in the current directory
```

### Work with the included demo agent

When you create a new Agent Builder project, it automatically loads with a demo agent that demonstrates different components of an Agent Builder project. Learn how to navigate the demo agent in the [demo agent walkthrough](/agent-builder/demo-agent) or see how to [delete the demo agent in the Quickstart](/agent-builder/quickstart#clear-the-demo-agent).

### Control log output

You can enable verbose logging to see more detailed information about the agent's execution.

```bash  theme={null}
writer edit . --verbose
```

If you find the logs too verbose by default, you can control the log level using the `WRITER_LOG_LEVEL` environment variable:

```bash  theme={null}
# Show only errors
export WRITER_LOG_LEVEL=ERROR

# Reduce log output (only warnings and errors)
export WRITER_LOG_LEVEL=WARNING

# Show all logs (default)
export WRITER_LOG_LEVEL=INFO

# Show debug information (most verbose)
export WRITER_LOG_LEVEL=DEBUG
```

## Understand your project structure

Your local project contains several key components:

### Main application file (`main.py`)

The `main.py` file contains your agent's Python code and initial state:

```python  theme={null}
import writer as wf

# Initialize the agent's state
initial_state = wf.init_state({
    "user_count": 0,
    "messages": []
})

# Define your agent's logic here
def handle_user_message(state, payload):
    # Process user input
    user_message = payload.get("message", "")
    state["messages"].append(user_message)
    state["user_count"] += 1
    
    return {"response": f"Processed message: {user_message}"}
```

### Project metadata (`.wf/` directory)

The `.wf/` directory contains your agent's configuration, including:

* UI components and layout
* Blueprint definitions
* State schemas
* Component configurations

Do not manually edit the `.wf/` directory. Writer Framework automatically manages this directory.

### Static assets (`static/` directory)

Store your images, CSS files, and other static assets in the `static/` directory. The development server serves these files automatically, allowing you to reference them in your agent's UI.

## Follow the development workflow

### 1. Start local development

```bash  theme={null}
writer edit my-agent
```

The default URL to access your agent is `http://127.0.0.1:4005`. You can see the URL in the terminal after running the `writer edit` command.

### 2. Make changes

Edit your Python code, UI components, or blueprints either in code or in the local development web editor. The development server automatically detects changes and reloads your agent.

### 3. Test locally

Open your browser to the local development URL to test your agent's behavior.

### 4. Sync to cloud and deploy

When you're ready to make your agent live, sync it to the cloud and deploy it from there. See [Sync agents between local and cloud](/agent-builder/sync-agent) for complete instructions.

## Plan for cross-environment development

If you plan to do both local and cloud development or to deploy your agent to the Writer Cloud, review the following differences between the two environments.

### Python package compatibility

If you install Python packages locally that aren't listed in [Python libraries installed in Agent Builder](/agent-builder/python-libraries), your agent won't run in the cloud version of Agent Builder because those packages aren't available there.

### Local and cloud secrets support

The remote cloud version of Agent Builder uses [Vault](/agent-builder/secrets) to manage secrets. Vault is only available when you're working in the cloud editor. To access secrets and environment variables in local development, you should add them to your `.env` file.

<Warning>When you export your agent to a zip file, the exported file includes all files in your project including dot files. Do not include sensitive information in the exported file as it will be visible in the cloud editor. For example, you should delete your `.env` file when exporting your agent to a zip file and move your secrets to your cloud agent's Vault.</Warning>

If you plan to do both local and cloud development or to deploy your agent to the Writer Cloud, structure your code to check for both environment variables and Vault values. The code below shows how to get a secret from Vault if available, otherwise fall back to environment variables.

```python  theme={null}
import os

def get_secret(key, default=None):
    """Get a secret from Vault if available, otherwise from environment variables"""
    try:
        # Try to get from Vault first (cloud environment). The `vault` object is available in Python code blocks and in event handlers.
        return vault[key]
    except KeyError:
        # Fall back to environment variables (local development)
        return os.getenv(key, default)

# Usage example
api_key = get_secret("WRITER_API_KEY", "default_key")
database_url = get_secret("DATABASE_URL")
```

### Keep your local Writer Framework package up to date

When you sync your agent to the cloud, the cloud version of Agent Builder uses the latest version of the Writer Framework package. If you're using a different version of the Writer Framework package in your local project, you might encounter errors when you sync to the cloud. To avoid this, keep your local Writer Framework package up to date by running the following command:

```bash  theme={null}
pip install --upgrade writer
```

## Next steps

* Learn how to [sync your local agent with cloud agents](/agent-builder/sync-agent)
* Understand how to [deploy your agent](/agent-builder/sync-agent#deploy-your-agent) from the cloud
* Explore [custom Python code](/agent-builder/python-code) for advanced functionality

<feedback />


# Learn about Agent Builder
Source: https://dev.writer.com/agent-builder/overview

Build AI agents with a low-code visual editor. Collaborate with drag-and-drop blocks for tool calling, RAG, and custom workflows.

<Warning>
  Agent Builder is in beta. Some features are still in development and are subject to change.
</Warning>

<iframe className="w-full aspect-video rounded-xl" src="https://fast.wistia.com/embed/iframe/7g9zhwwyrt?version=v1x&playerColor=aae3d8" title="Your Video Title" frameBorder="0" allow="autoplay; fullscreen" allowFullScreen />

Agent Builder is a low-code tool for building AI agents with Writer. It enables technical and business builders to collaborate in a shared development environment, where they can assemble an agent using a visual editor and a library of drag-and-drop blocks.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-builder-overview.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5bd011b4940537f0ba1f85db2dfa6b40" alt="Agent Builder" data-og-width="2362" width="2362" data-og-height="1880" height="1880" data-path="images/agent-builder/agent-builder-overview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-builder-overview.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=781c0a014bcc1e113400246fba102cc8 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-builder-overview.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=858859dba044d8e7c5b6ac91db33f432 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-builder-overview.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=bf916234792a1d6a69b6850da4c6a8a3 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-builder-overview.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=0a388ba834ee282508d01f9274e82b94 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-builder-overview.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=1c32dda973867f0626f80aa6647fc5c4 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-builder-overview.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=dd479eb457c9c82e28a2d11f5b44177a 2500w" />

Agents created in Agent Builder are fully composable and reusable—from the backend logic to frontend experience—making them faster to build and easier to maintain. Each agent consists of two core components: a blueprint and a UI.

* **Blueprint**: a visual map of the agent's business logic and behavior.
  * Blueprints are created using a library of configurable blocks for tool calling, built-in RAG, text generation, classification, state management, and more.
  * They define how the agent processes input, makes decisions, and takes action—enabling it to reliably orchestrate work across people, data, systems, and even other agents built in Writer.
* **UI**: the interface that users interact with.
  * UIs are designed using elements like input fields, buttons, and embeds, including support for guided workflows with pagination.
  * They give users a structured, intuitive way to engage with agents, from simple chat interfaces to rich, interactive tools.

Agent Builder includes other features to help you build and deploy agents:

* **Custom code**: add custom Python code to the agent to extend its capabilities with more complex logic.
* **Deploy and supervise**: deploy the agent to the Writer cloud, grant access to specific teams, and monitor the agent's performance.

<CardGroup>
  <Card title="Blueprint">
    Define the agent's business logic and behavior.
    <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ae025688c6e18eeb322758556a42f761" alt="Blueprint" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/agent-path.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f1da279c5773b0613a51bdbdbf6bff97 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=32ffae7be0d7a16f5d94d56b81fc48ed 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=7bab99fc7c9e571df2af0e62f7bf08c6 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5028866807576fca11cda037b79c2917 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=bb1e21a19f69358d107cb4861d0d6208 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-path.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=46347e36c59b35df762f73b1094b4aaf 2500w" />
  </Card>

  <Card title="UI">
    Design the agent's interface.
    <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6a0d38372c2d7cff242a3457a46c019a" alt="UI" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/demo-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=1a64409aab0dff73b54117e08f42e455 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=cebd1417ee1d0d2afe47aca29f786d9c 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=da63201c6ab4ef7c4ec801cdb2733f49 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5109985216f24095fb26a575ec57ec62 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=029c2382c84e5255376b1831fa487665 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/demo-agent.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=56a5a0dd544ec6e2956e3185e0d70c6d 2500w" />
  </Card>

  <Card title="Custom code">
    Add custom Python code to the agent to extend its capabilities.
    <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-custom-code.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b67251c8abfa5acf37f0918a4985f484" alt="Custom code" data-og-width="2244" width="2244" data-og-height="1106" height="1106" data-path="images/agent-builder/agent-custom-code.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-custom-code.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=61fe889150e69a8c383a3491043b9daa 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-custom-code.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=bad4f3ba011d689556966a74abf4658e 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-custom-code.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=363d492b2b00f1cf78b3a32aa4045d3f 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-custom-code.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=0519577159a816e493440830b23938f3 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-custom-code.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=4225e22d546ad42436625d9a47b092e0 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-custom-code.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=1a62e3dba946a1addae54dee04f6743b 2500w" />
  </Card>

  <Card title="Deploy and supervise">
    Deploy the agent to the Writer cloud and monitor its performance.
    <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deploy-and-monitor.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5a9f82e4e9dc8eaac24c9751bbbd11d5" alt="Deploy and monitor" data-og-width="3454" width="3454" data-og-height="1804" height="1804" data-path="images/agent-builder/deploy-and-monitor.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deploy-and-monitor.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5bfc0dd96ceb9776d647dfb67eaaae0d 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deploy-and-monitor.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=591ee52c32f4c86b0e9b2e31ffcdbcb5 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deploy-and-monitor.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3ba8f7f9fa72d4254ce2e7dce9996407 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deploy-and-monitor.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=019ddf962c31256b7f1c3c06cfe15e41 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deploy-and-monitor.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=cd592ee511fade2f95a3d68e19730c50 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deploy-and-monitor.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=01a0521a7a0c83a657cd9448ee4a4c21 2500w" />
  </Card>
</CardGroup>

## Choose your development approach

Agent Builder supports two development approaches:

* **Cloud development**: Build agents directly in the web editor with immediate deployment
* **Local development**: Develop agents locally with your preferred editor, then sync to cloud when ready or [deploy with Docker](/agent-builder/deploy-with-docker)

Get started with Agent Builder with the following guides:

* [Tour the Agent Builder interface and interact with the demo agent](/agent-builder/demo-agent)
* [Build your first agent](/agent-builder/quickstart)
* [Develop agents locally](/agent-builder/local-development)

<feedback />


# Add custom Python code
Source: https://dev.writer.com/agent-builder/python-code



Agent Builder provides two ways to add custom Python code to your agents: using **Python code** blocks in your blueprint for inline logic, and using the code editor to create reusable functions and manage files.

## When to use custom Python code

Custom Python code is ideal for:

* **Complex data processing** that goes beyond built-in blocks
* **API integrations** with external services
* **Custom business logic** specific to your use case
* **File processing** and data transformation
* **Mathematical calculations** and statistical analysis
* **Reusable functions** across multiple blocks

## Variables available in Python code and blocks

The following variables and libraries are available in Python code blocks and other Python files. You can reference them in your code directly.

* **State variables**: Access your [agent's state](/agent-builder/state) using `state["variable_name"]`.
* **Execution environment**: Access [environment variables](/agent-builder/execution-environment) like `result`, `payload`, `session`.
* **Pre-installed libraries**: Use any of the [pre-installed Python libraries](/agent-builder/python-libraries) like `pandas`, `requests`, or `numpy`.
* **Custom functions**: Call functions you've defined in your `main.py` file from Python code blocks.
* **Secrets**: Access sensitive data from [Vault](/agent-builder/secrets) using `vault["SECRET_NAME"]`.

<Warning>
  You can't install additional Python packages in the Agent Builder code editor. Use the [pre-installed libraries](/agent-builder/python-libraries) that are already available. Request new packages in the [feature request form](https://writerai.atlassian.net/jira/software/form/a2dfaf0b-fcbf-4fdc-94af-8e24ed0c4fe1).
</Warning>

## Python blocks in blueprints

[**Python code** blocks](/blueprints/pythoncode) allow you to run custom code directly within your blueprint workflow. They're useful for one-off operations or processing steps that need to happen at specific points in your agent's logic.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0e036182b28e067fbb66aa61b0c1a234" alt="Python code block" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/python-code-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c40908b77a2e4b23a4db43edf7bda0f0 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4daf1507746d13adbd6310c8c8111c1d 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=40e6c064f3e1b43674e282e92f5110df 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=29f1f9d99ed61493e5a3df096471cb7a 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=91f52c2c1f9fb1d55a48cb4371e222ca 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=89e5dbb984b7b941cb5c521bf9461864 2500w" />

### How to use Python code blocks

1. **Add a Python block** to your blueprint from the blocks library
2. **Write your code** in the Code field
3. **Access variables** directly from the [execution environment](/agent-builder/execution-environment), [state](/agent-builder/state), and [secrets](/agent-builder/secrets)
4. **Return results** using the `set_output()` function

### Returning values

Use `set_output(value)` to pass data to the next block:

```python  theme={null}
# Calculate something
total = sum(state["numbers"])

# Pass it to the next block
set_output(total)
```

The value becomes available as `@{result}` in subsequent blocks.

## Code editor for custom functions

The **code editor** lets you create reusable Python functions and manage files for your agent. This is where you build the foundation that your Python blocks can use. Any functions you define in the code editor are available to use in Python code blocks.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/code-editor.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a45789575006f8bf35614df89e5f28ce" alt="Code editor" data-og-width="3456" width="3456" data-og-height="880" height="880" data-path="images/agent-builder/code-editor.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/code-editor.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5d29bfa97f7134d6724068ce83e69c50 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/code-editor.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=91dacbbc10f29afcdd652d769ef9b657 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/code-editor.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=696e10dee1fd128aa907ad771cd9fc9c 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/code-editor.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=bf741a4830792534a74f0e3fb269ffca 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/code-editor.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=71463ca188997f5b7dda5337efcedf06 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/code-editor.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=214458a223c706aeae799cc4ba5ae6e7 2500w" />

### Accessing the code editor

1. **Open your agent** in Agent Builder
2. **Look for the code editor** at the bottom of the interface
3. **Click to expand** and start editing your `main.py` file

### File structure

Your agent starts with these files:

* **`main.py`**: your main Python code file.
* **`requirements.txt`**: shows the version of the `writer` package that your agent is using.
* **`README.md`**: documentation for your agent.
* **`static/`**: folder for static assets like images.

### Managing files

**Add new files**: click **+ Add file** to create Python modules, data files, or configuration files.

**Upload files**: click **Upload** to add external files like CSV data, images, or documents.

#### Creating folders and moving files

To move a file into a folder, click **+ Add file** and rename the file to `<folder_name>/<file_name>.<file_extension>`. If the folder doesn't exist yet, it will be created automatically.

For example, given the following file structure:

```
main.py
README.md
email_validator.py
pricing_calculator.py
```

To move `email_validator.py` to a new folder called `utils`, rename the file to `utils/email_validator.py` and click **Save file**. The new file structure will look like this:

```
main.py
README.md
pricing_calculator.py
utils/
  └── email_validator.py
```

To move a file into an existing folder, follow the same process as creating a new folder. For example, to move `pricing_calculator.py` to the `utils` folder, rename the file to `utils/pricing_calculator.py` and click **Save file**. The new file structure will look like this:

```
main.py
README.md
utils/
  ├── email_validator.py
  └── pricing_calculator.py
```

## Common patterns

### Initialize state variables

```python  theme={null}
import writer as wf

initial_state = wf.init_state(
    user_id="123456",
    user_name="John Doe",
    user_email="john.doe@example.com"
)
```

### Data validation and cleaning

```python  theme={null}
def clean_user_input(raw_data):
    cleaned = {}
    for key, value in raw_data.items():
        if isinstance(value, str):
            cleaned[key] = value.strip().lower()
        else:
            cleaned[key] = value
    return cleaned
```

### Using secrets in custom functions

```python  theme={null}
import requests

def fetch_user_profile(user_id):
    """Fetch user profile from external API using stored credentials"""
    try:
        api_key = vault["USER_API_KEY"]
        headers = {"Authorization": f"Bearer {api_key}"}
        response = requests.get(
            f"https://api.example.com/users/{state['user_id']}",
            headers=headers
        )
        response.raise_for_status()
        return {"success": True, "profile": response.json()}
    except requests.RequestException as e:
        return {"success": False, "error": str(e)}
```

### File processing

```python  theme={null}
import io
import pandas as pd

def process_uploaded_csv(file_data):
    try:
        file_buffer = io.BytesIO(file_data)
        df = pd.read_csv(file_buffer)
        summary = {
            "row_count": len(df),
            "columns": list(df.columns),
            "summary_stats": df.describe().to_dict()
        }
        return {"success": True, "summary": summary}
    except Exception as e:
        return {"success": False, "error": str(e)}
```

## Debugging

Use print or logger statements to debug your code. The [`logger` object](https://docs.python.org/3/library/logging.html) is globally available in Python blocks.

```python  theme={null}
logger.info(f"Processing user: {state['user_id']}")
logger.info(f"Input data: {payload}")

# Your logic here
result = process_data()

print(f"Result: {result}")
set_output(result)
```

See more general troubleshooting tips in [Troubleshooting](/agent-builder/troubleshooting).

## Next steps

* Review [pre-installed Python libraries](/agent-builder/python-libraries) to see what's available
* Learn about [storing secrets](/agent-builder/secrets) for secure API key management
* Check out the [Python block reference](/blueprints/pythoncode) for detailed field information
* Learn about [state management](/agent-builder/state) for better data handling
* Review [execution environment variables](/agent-builder/execution-environment) for accessing block results

<feedback />


# Python libraries installed in Agent Builder
Source: https://dev.writer.com/agent-builder/python-libraries

View all Python packages available in Agent Builder including `aiohttp`, `boto3`, `pandas`, `requests`, and 50+ other libraries with version numbers.

Agent Builder includes the following Python packages:

| Package                                                                              | Version    |
| ------------------------------------------------------------------------------------ | ---------- |
| [`aiofiles`](https://pypi.org/project/aiofiles/)                                     | 24.1.0     |
| [`aiohttp`](https://pypi.org/project/aiohttp/)                                       | 3.11.16    |
| [`authlib`](https://pypi.org/project/authlib/)                                       | 1.6.5      |
| [`beautifulsoup4`](https://pypi.org/project/beautifulsoup4/)                         | 4.13.3     |
| [`boto3`](https://pypi.org/project/boto3/)                                           | 1.38.30    |
| [`click`](https://pypi.org/project/click/)                                           | 8.1.7      |
| [`cowsay`](https://pypi.org/project/cowsay/)                                         | 6.1        |
| [`docusign-esign`](https://pypi.org/project/docusign-esign/)                         | 5.0.0      |
| [`docxcompose`](https://pypi.org/project/docxcompose/)                               | 1.4.0      |
| [`fastapi`](https://pypi.org/project/fastapi/)                                       | 0.120.4    |
| [`fitz`](https://pypi.org/project/fitz/)                                             | 0.0.1.dev2 |
| [`gitignore-parser`](https://pypi.org/project/gitignore-parser/)                     | 0.1.12     |
| [`google-auth-oauthlib`](https://pypi.org/project/google-auth-oauthlib/)             | 1.2.2      |
| [`google-genai`](https://pypi.org/project/google-genai/)                             | 1.19.0     |
| [`gspread`](https://pypi.org/project/gspread/)                                       | 6.2.1      |
| [`ipython`](https://pypi.org/project/ipython/)                                       | 9.1.0      |
| [`jinja2`](https://pypi.org/project/jinja2/)                                         | 3.1.6      |
| [`langid`](https://pypi.org/project/langid/)                                         | 1.1.6      |
| [`lxml_html_clean`](https://pypi.org/project/lxml_html_clean/)                       | 0.4.2      |
| [`mysql-connector-python`](https://pypi.org/project/mysql-connector-python/)         | 9.4.0      |
| [`numpy`](https://pypi.org/project/numpy/)                                           | 2.2.4      |
| [`opencv-python`](https://pypi.org/project/opencv-python/)                           | 4.11.0.86  |
| [`openpyxl`](https://pypi.org/project/openpyxl/)                                     | 3.1.5      |
| [`orjson`](https://pypi.org/project/orjson/)                                         | 3.11.0     |
| [`pandas`](https://pypi.org/project/pandas/)                                         | 2.2.3      |
| [`paramiko`](https://pypi.org/project/paramiko/)                                     | 4.0.0      |
| [`pdf2image`](https://pypi.org/project/pdf2image/)                                   | 1.17.0     |
| [`pillow`](https://pypi.org/project/pillow/)                                         | 11.1.0     |
| [`plotly`](https://pypi.org/project/plotly/)                                         | 5.24.1     |
| [`PyMuPDF`](https://pypi.org/project/PyMuPDF/)                                       | 1.25.5     |
| [`pypdf`](https://pypi.org/project/pypdf/)                                           | 5.4.0      |
| [`pyarrow`](https://pypi.org/project/pyarrow/)                                       | 18.1.0     |
| [`pydantic`](https://pypi.org/project/pydantic/)                                     | 2.11.3     |
| [`python-dateutil`](https://pypi.org/project/python-dateutil/)                       | 2.9.0      |
| [`python-docx`](https://pypi.org/project/python-docx/)                               | 1.1.2      |
| [`python-multipart`](https://pypi.org/project/python-multipart/)                     | 0.0.20     |
| [`python-pptx`](https://pypi.org/project/python-pptx/)                               | 1.0.2      |
| [`pytz`](https://pypi.org/project/pytz/)                                             | 2024.2     |
| [`reportlab`](https://pypi.org/project/reportlab/)                                   | 4.3.1      |
| [`requests`](https://pypi.org/project/requests/)                                     | 2.32.3     |
| [`scikit-learn`](https://pypi.org/project/scikit-learn/)                             | 1.6.1      |
| [`selenium`](https://pypi.org/project/selenium/)                                     | 4.31.0     |
| [`smartsheet-python-sdk`](https://pypi.org/project/smartsheet-python-sdk/)           | 3.0.5      |
| [`snowflake-connector-python`](https://pypi.org/project/snowflake-connector-python/) | 3.15.0     |
| [`tabulate`](https://pypi.org/project/tabulate/)                                     | 0.9.0      |
| [`trafilatura`](https://pypi.org/project/trafilatura/)                               | 2.0.0      |
| [`uvicorn`](https://pypi.org/project/uvicorn/)                                       | 0.38.0     |
| [`weasyprint`](https://pypi.org/project/weasyprint/)                                 | 66.0       |
| [`webdriver-manager`](https://pypi.org/project/webdriver-manager/)                   | 4.0.2      |
| [`watchdog`](https://pypi.org/project/watchdog/)                                     | 3.0.0      |
| [`websockets`](https://pypi.org/project/websockets/)                                 | 15.0.1     |
| [`xhtml2pdf`](https://pypi.org/project/xhtml2pdf/)                                   | 0.2.17     |
| [`xmltodict`](https://pypi.org/project/xmltodict/)                                   | 0.14.2     |
| [`yfinance`](https://pypi.org/project/yfinance/)                                     | 0.2.58     |

<feedback />


# Access secrets in Python code
Source: https://dev.writer.com/agent-builder/python-secrets



Agent Builder provides **Vault**, which is a secure way to store and use secrets in your agents. Use Vault to store sensitive information like API keys, passwords, and other credentials that you don't want to expose in your code. Secrets are available in [blueprint blocks](/agent-builder/secrets#use-a-secret) and within Python code.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=33a4c1f34a0ea1cde51abe05f46f875b" alt="Vault overview" data-og-width="3456" width="3456" data-og-height="1802" height="1802" data-path="images/agent-builder/vault-overview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3e0abcc1b9967069f0433812e10bb19d 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=6a564527da152a1f2e71f12508ae2bed 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=88cc23749f5845ceaa489ba436b7b19b 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=35d2ab4d37f68fba5470a6496942bc34 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=dbcd039c17bcfb507431a4d220c2b28b 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e5094d1e66358b82c79b122916f81189 2500w" />

## Create a secret

Secrets are strings stored as key-value pairs. To create a secret, go to the **Vault** tab in the Agent Builder UI and click **+Add a pair**.

The example below creates a secret with the name `WRITER_API_KEY`. When you type the value, it's masked in the UI.

Click **Save** to store the secret.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=1537e604f2e50506eacb0c1dc1aa3bcb" alt="Add a secret" data-og-width="964" width="964" data-og-height="618" height="618" data-path="images/agent-builder/vault-add-secret.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=19a12076120d71ef6d1e4489e41ae561 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c79a2e7e9623c0fe355e5d2fd01d26ff 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=4fd9f60e1bbb5eea13f3435f483ba9c2 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b66edd2bdd42ff870f7e1e1f0f811493 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d174a98844576a825259f4f34b889421 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d362bb87f81d1666f9a71b4537510ce5 2500w" />

You can also delete and update secrets from the **Vault** tab.

## Where secrets are available

Within Python code, Vault is a runtime-only feature that's injected into specific execution contexts, not into the main module scope. It isn't a global variable and is only available in the execution context of the blueprint. This design provides security benefits:

* Secrets are only loaded when needed
* Access is limited to proper execution contexts
* No global exposure of sensitive data

The vault is only available in these specific contexts:

* **Event handlers and blueprint code blocks**: Secrets are injected into event handlers and blueprint code blocks when they run. This includes:
  * Button click handlers
  * Form submission handlers
  * Page load handlers
  * Custom event handlers
* **Blueprint execution environment**: Secrets are injected into the blueprint execution environment when the blueprint runs and can be referenced from any blueprint block.

### Access your Writer API key

Each Agent Builder agent in the online editor has a Writer API key set as an environment variable called `WRITER_API_KEY`. If you want to use this API key with other Writer API calls, you can access it with `os.getenv('WRITER_API_KEY')`. This allows you to access the API key outside of event handlers and blueprint code blocks, and means you don't need to set a new secret in Vault for your API key.

```python  theme={null}
import os

api_key = os.getenv('WRITER_API_KEY')
```

## Examples

### Secrets in Python code blocks

You can reference secrets in [Python code blocks](/blueprints/pythoncode) within blueprints using the `vault` object. `vault` is a dictionary that contains all the secrets in your blueprint.

For example, to access a secret called `ACME_API_KEY` and use it in an HTTP request, you would use the following code:

```python  theme={null}
headers = {
    "Authorization": f"Bearer {vault['ACME_API_KEY']}"
}
```

### Event handler with vault access

Vault is also provided as an argument to event handlers. Here's an example of an event handler that's triggered when a button is clicked and accesses the vault.

```python  theme={null}
def handle_button_click(state, payload, context, session, ui, blueprint_runner, vault):
    # Access vault secrets
    api_key = vault.get('ACME_API_KEY')
    
    # Use the secret
    headers = {"Authorization": f"Bearer {api_key}"} 
```

<feedback />


# Agent Builder Quickstart
Source: https://dev.writer.com/agent-builder/quickstart

Build your first agent in Agent Builder. Create a meeting notes summarizer with a visual interface and blueprint in this step-by-step tutorial.

<Warning>
  Agent Builder is in beta. Some features are still in development and are subject to change.
</Warning>

This quickstart walks through building a new agent that summarizes meeting notes in different formats for various stakeholders.

<CardGroup>
  <Card title="Interface">
        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-interface.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=5b037297a0523ccd9f956942e028cd3b" alt="Agent Builder interface showing text input for meeting notes and dropdown for summary format" data-og-width="3456" width="3456" data-og-height="1802" height="1802" data-path="images/agent-builder/quickstart-interface.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-interface.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2ca9b8e58d016568be86eb3ea5ff4333 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-interface.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=da52ae76cb5d5d7570a8c66d73410255 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-interface.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d227d2a8b948029e6d9101549f336090 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-interface.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c9c9de6c1cbfc23970fdb40537fbc72e 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-interface.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=fcaf3e629d12e5923bc45380e51d1dd6 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-interface.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=51de4c64c23a3e465f6f03e8dc6e651b 2500w" />
  </Card>

  <Card title="Blueprint">
        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-blueprint.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a929fdee047f656e931625698dc839b9" alt="Agent Builder blueprint with blocks for processing meeting notes and generating summaries" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/quickstart-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-blueprint.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=dc956610c3341f494f5b92208fede78b 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-blueprint.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ce91971cf2adbe38d74916b299e0709c 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-blueprint.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=efe0bdfa3fc88fcbae8b758ecba67a74 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-blueprint.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=1bdc9d1e199c0e2b2065b5d4023cf26e 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-blueprint.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f54886444ec593899867043d2857cdbd 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/quickstart-blueprint.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d7ad7f4fed75977d0e9a17272ecf9913 2500w" />
  </Card>
</CardGroup>

This quickstart covers how to:

* [Create a new Agent Builder project](#create-a-new-agent-builder-project)
* [Clear the demo agent that's automatically created](#clear-the-demo-agent)
* [Build the agent's UI to accept meeting notes and select a summary format](#build-the-ui)
* [Build the agent's blueprint to summarize the meeting notes and display the result in the UI](#build-the-blueprint)
* [Preview the agent](#preview-the-agent)
* [Deploy the agent](#deploy-the-agent)

<Tip>
  If you are unfamiliar with Agent Builder:

  * Review the [Agent Builder overview](/agent-builder/overview) to learn more about the different components of an agent.
  * Follow the [Demo agent walkthrough](/agent-builder/demo-agent) to see how to modify an existing agent.
</Tip>

## Choose your development approach

This quickstart shows the cloud development workflow. If you prefer to develop locally with your editor of choice, see [Develop agents locally](/agent-builder/local-development) for the local development workflow.

You can follow the same steps here to build and deploy the quickstart agent locally once you've initialized a local project.

## Create a new Agent Builder project

To create an agent with Agent Builder, log in to [AI Studio](https://app.writer.com/aistudio) and follow these steps:

<Steps>
  <Step title="Click the Build an agent button">
    Click the **Build an agent** button in the top right corner of the page.

        <img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=cc6bdc545119bcd97319a71850cf7d5a" alt="Build an agent button" data-og-width="590" width="590" data-og-height="198" height="198" data-path="images/agent-builder/build-agent-button.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=929c05fa19f02fd96d9c40398950e4bc 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2fdd754b4a5342b91906b353300ec77c 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9f9b4bde8acb4e44aaddf6f83a24f00a 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=da1ef54b5c7f7235e5218e063fbaca62 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b383319378a3e1d8b599bfa21b38efe1 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/build-agent-button.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2a038c483d5fcd8755c33af77b067631 2500w" />
  </Step>

  <Step title="Create a new agent">
    In the modal that appears, select **New Agent** to create a new agent from scratch.

    <Tip>
      For common use cases, prebuilt agent templates are available. These include both general-purpose and industry-specific options, all customizable to your specific requirements.
    </Tip>

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=035990e1925e3c575f3d4966ae57ea10" alt="Agent creation options" data-og-width="2778" width="2778" data-og-height="1606" height="1606" data-path="images/agent-builder/get-started-agent-builder.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=8fba199fd65a3da92c6909a2eb07d749 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d909dab372cb2721833f33202b980c6b 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=2b94eb2c112853f0cc6ae11860a58f83 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e84b5f0849480ded8f8cbd44093b96f3 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5c0d754d551628ee2b0e732575666716 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=650a29916a2c295f13ac724c8e63b554 2500w" />

    Once the agent is created, a new tab will open in your browser with the Agent Builder interface.
  </Step>

  <Step title="Return to the Agent Builder interface">
    You can get to the Agent Builder interface any time by going to the [AI Studio homepage](https://app.writer.com/aistudio) and selecting the agent you created.

    You'll see the Configure Deployment page when you select the agent. To get to the edit interface, click the **Edit** button in the top right corner.

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=293915f43f6e0e45aa67b6cfac784403" alt="Edit agent" data-og-width="581" width="581" data-og-height="163" height="163" data-path="images/agent-builder/edit-button.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=2082b3e16cd438f17b79cd8b26c97944 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9338001cc20185c05c8d1e2762f3b8d2 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0e78b548c604e91540dc88caf00dc302 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d1c3512c824ee46c2a503661e992aa18 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=8eab76b5bba0baf3efd589fc530833b3 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/edit-button.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=89357ffd387c198c992a2c064ebe0cd9 2500w" />
  </Step>
</Steps>

## Clear the demo agent

When you create a new Agent Builder project, a demo agent is automatically created for you. You can remove the demo agent's components and blueprints to start building your own agent.

### Clear the UI

<Steps>
  <Step title="Delete the top-level Page component from the Component Tree">
    Navigate to the **Interface** view. Then select the **Interface Layers** section in the left sidebar.

    Click the top **Page** component from the UI component tree.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/select-page-element.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ec50052a28934c909c68b518885f26da" alt="" data-og-width="624" width="624" data-og-height="380" height="380" data-path="images/agent-builder/select-page-element.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/select-page-element.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c8efb2c8fbcff521352dc260dbfe0bee 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/select-page-element.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=027a85d1b0f7555aa05500735ad8e5e4 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/select-page-element.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=41bc2b9d47712c977ab85ebb3004af93 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/select-page-element.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3e770042e90a6bd569800e22e5abfe4e 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/select-page-element.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9ec38938e957b7aeea0e974ce6ed35d0 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/select-page-element.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=8e072193b7c317d15aa97cfb5621b7b5 2500w" />

    Then click the three vertical dots on the Page's settings menu to find the **Delete** option.

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-page.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d0671ed7e5bac4841af791de261db67e" alt="" data-og-width="660" width="660" data-og-height="674" height="674" data-path="images/agent-builder/delete-page.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-page.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=94e24475c6d5fc629fc808d27f415ecc 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-page.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a99c05f36272d69cfc94fc65354284b9 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-page.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=63b603068c46ffb283634dbd96899943 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-page.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=385d5bd94fd11634f46314544009da86 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-page.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e995b99f35d71e20d8cf7f7c9d3f7e2a 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-page.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=b98f217eb08241e1e97689d9d6a8daa0 2500w" />
  </Step>

  <Step title="Add a new Page">
    Your Component Tree should now contain a single **Root** component.

    Click **Add page** at the bottom of the component tree to create a new blank page.

        <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-new-page.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=0f2230acf1920193b55b0956540c03f5" alt="" data-og-width="438" width="438" data-og-height="80" height="80" data-path="images/agent-builder/add-new-page.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-new-page.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f2b9c03fe7a8e31f7ce97ee668c0ba8d 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-new-page.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=dd77edf68152c4d777e15ece497466da 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-new-page.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=11815b76be3918ff0d3c9820778057c5 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-new-page.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=fde7cd3fa8c6f0483763d7501b9f75a1 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-new-page.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=dfa36412fd7709e0d187c963b7cc0281 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-new-page.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=d3eb4707a21f333741ba209e5a9e22af 2500w" />
  </Step>
</Steps>

### Clear the blueprint

<Steps>
  <Step title="Delete the first component under Blueprints Root">
    Navigate to the **Blueprints** view. Then select the **Blueprints Layers** section in the left sidebar.

    Click the first component under **Blueprints Root**. Here, the component is a blueprint called `BUTTON@CLICK_1`.

        <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprint-component-tree.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e2afa8a10d7dd95c9946d394f8332a55" alt="" data-og-width="600" width="600" data-og-height="368" height="368" data-path="images/agent-builder/blueprint-component-tree.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprint-component-tree.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=203f295519300e12a9a7613ff3fb8cbd 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprint-component-tree.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=7f6ab819165711a25fc44b6a48b3194e 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprint-component-tree.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=704b70a5f957853d0252f2adb39fa61e 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprint-component-tree.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=caf1a4c090e2e12201d9da606c76d257 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprint-component-tree.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b30a449eca6292d4c6f4ec6361bdd24a 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprint-component-tree.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=add7145ddf39f7a068ce95397f34db3c 2500w" />

    Then click the three vertical dots on the blueprint's settings menu to find the **Delete** option.

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-blueprint.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a9cbe340c9a4681bc533717d83e7658f" alt="" data-og-width="652" width="652" data-og-height="684" height="684" data-path="images/agent-builder/delete-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-blueprint.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=1d758d2fb62bfe0d2493f972ae1e4c7d 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-blueprint.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9d1a07f713fddea9077c59026debbcb9 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-blueprint.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=61d5b55fb7c06a6b5441e0600f3e11a5 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-blueprint.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6b756483439d177f2bbfcabd48be7895 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-blueprint.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9900defc83a698f9706aa069f242d81a 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/delete-blueprint.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=76966d92a1283cba265790b6a1c8a7f2 2500w" />
  </Step>

  <Step title="Add a new Blueprint">
    Your blueprint's component tree should now be empty.

    Click **Add blueprint** at the bottom of the component tree to create a new blank blueprint.

        <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-blueprint.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ad77596bd30a5ec50453fd1dccb5fefc" alt="" data-og-width="440" width="440" data-og-height="78" height="78" data-path="images/agent-builder/add-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-blueprint.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=673622b583b78df18d7140c284f45846 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-blueprint.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=3fe0f420023282e8006ca06c7bd4ab9c 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-blueprint.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=7cd5edf407745e241a59cb303c390c10 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-blueprint.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=cf29545e9756d364ebc877f690971b05 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-blueprint.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=674e831ee7ae79b8282431ce4a4f21d7 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-blueprint.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f93d3be64f51eabac5aa0d6888273954 2500w" />
  </Step>
</Steps>

## Build the UI

Now that you have an empty page, build the UI for the new agent. This agent has the following components:

* A **Text area** for users to paste their meeting notes
* A **Select input** for users to select the summary format they want
* A **Button** to start the summarization process
* A **Message** component to display a loading message while summarization is in progress
* A **Text** component to display the summary

Navigate to the **Interface** view to build the UI.

### Add the Text area Input

The [**Text area Input** component](/components/textareainput) is where users can paste their meeting notes.

<Steps>
  <Step title="Add the Text area Input component to the canvas">
    Make sure you are in the **Interface** view. Then open the **Add block** section in the left sidebar and search for the **Text area Input** component in the component library.

    Click and drag the **Text area Input** component onto the canvas.
  </Step>

  <Step title="Edit the Text area Input component settings">
    Click the **Text area Input** component you just added to edit its settings. Update the following settings:

    * **Label**: `Meeting notes`
    * **Placeholder**: `Paste your meeting notes here.`
    * **Link variable** under **Binding**: `meeting_notes`. This allows the blueprint to access the meeting notes content whenever the user updates it.

    <Tip>
      The "link variable" is stored in the agent's state. The state is a set of variables that both the blueprint and the UI can access and update. You can learn more about the agent's state in [Agent state](/agent-builder/state).
    </Tip>

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-textarea.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=092065f0671c8c6b3eb42fb554274609" alt="" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/meeting-notes-textarea.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-textarea.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ac0d07785d02f3715a965c8dbacff374 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-textarea.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=07d894d84145b0341433f43361eca4e6 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-textarea.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ca50e98d8a81fa987330d9489e7505aa 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-textarea.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7d258f7fbedbf86709b18d3555b1e737 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-textarea.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=77a39ea2ae9d8561060fea999fde307b 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-textarea.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6a14c06bf9b7ed90be2c1580c4e034fa 2500w" />
  </Step>
</Steps>

### Add the select input

The [**Select input** component](/components/selectinput) is where users can choose what type of summary they want via a dropdown.

<Steps>
  <Step title="Add the select input component to the canvas">
    Search for the **Select input** component in the component library on the left side of the page.

    Click and drag the **Select input** component onto the canvas.
  </Step>

  <Step title="Edit the select input component settings">
    Click the **Select input** component you just added to edit its settings. Update the following settings:

    * **Label**: `Summary format`
    * **Options**: Add the options you want to display in the dropdown. For this example, add the following options, with the key and the value both set to the option name.
      * `Executive brief`
      * `Action items only`
      * `Full summary`
      * `Key decisions`
    * **Link variable** under **Binding**: `summary_format`. This allows the blueprint to access the selected format whenever the user changes it.

        <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-format-dropdown.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b646a7aba2f804026cfc1c2eef36c42b" alt="" data-og-width="3454" width="3454" data-og-height="1806" height="1806" data-path="images/agent-builder/summary-format-dropdown.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-format-dropdown.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=bf8e5e6bb77241f03aa2ae6c87a5d14a 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-format-dropdown.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7dbbe796d76fffda728a1f0d120ca9fd 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-format-dropdown.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d6cf4e6e9719c3e666b0c7fbbcf5fd31 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-format-dropdown.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=64ce75cd350f6adcae3b768b1b0ce64c 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-format-dropdown.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=5b1e002d8781063c491d498e360afce7 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-format-dropdown.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=956be04efcf27fe37029f8022ace3ab2 2500w" />
  </Step>
</Steps>

### Add the summarize button

Next, add a [**Button** component](/components/button) to the UI. In a later step, you'll connect this button to the blueprint that triggers the summarization process.

<Steps>
  <Step title="Add the button component to the canvas">
    Search for the **Button** component in the block library on the left side of the page. Then click and drag the **Button** component onto the canvas.
  </Step>

  <Step title="Edit the button component settings">
    Click the **Button** component you just added to open its settings. Update the following settings:

    * **Text**: `Generate summary`

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/generate-summary-button.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=460b1b1c51b1d86265d3aaddf8af25e8" alt="" data-og-width="3454" width="3454" data-og-height="1806" height="1806" data-path="images/agent-builder/generate-summary-button.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/generate-summary-button.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c7857feabc3a9deed7903a7e36bca5ae 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/generate-summary-button.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=bf7f4153790809ebbc1e197fe6901776 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/generate-summary-button.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=dcf1954bd29f4a4995059cf12ad1cfec 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/generate-summary-button.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=022dc36128048c6663f7050db0bf59bf 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/generate-summary-button.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c78c1457c5fa330ce2f7c519e55e7681 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/generate-summary-button.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=72aed2a02b33067c4873cd51902d47a6 2500w" />
  </Step>
</Steps>

### Add the progress message component

The [**Message** component](/components/message) displays messages to users. Here, you use it to display a loading message while summarization is in progress.

<Steps>
  <Step title="Add the message component to the canvas">
    Search for the **Message** component in the block library. Then click and drag the **Message** component onto the canvas.
  </Step>

  <Step title="Edit the message component settings">
    Click the **Message** component you just added to edit its settings. Update the following settings:

    * **Message**: `@{status}`. This reads from the `status` state variable, which the blueprint will set to indicate the progress of the summarization.

        <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/status-message-component.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=1b8cdf69f044398c452b5957617ebcd7" alt="" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/status-message-component.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/status-message-component.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b3e47cd616d121232b57ffee3dfe3d01 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/status-message-component.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7ab6b7ec17870ccb5c27a56e0ce47cf7 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/status-message-component.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=ac897b9535c36a7e44db09ae791c64f8 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/status-message-component.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=2a52f6a348f387fa8a38b7a83722d47b 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/status-message-component.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=da4bfcaadfc445b9bbb339f8fcdb7b9b 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/status-message-component.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=a8620dd0dd3fc4bc84b81734d519075a 2500w" />
  </Step>
</Steps>

### Add the summary text component

The [**Text** component](/components/text) is where the blueprint displays the meeting summary when it's complete.

<Steps>
  <Step title="Add the text component to the canvas">
    Search for the **Text** component in the block library on the left side of the page. Then click and drag the **Text** component onto the canvas.

    <Tip>
      There are multiple components with the name **Text** in them. Make sure you select the **Text** component under the **Content** section of the component library.
    </Tip>
  </Step>

  <Step title="Edit the text component settings">
    Click the **Text** component you just added to edit its settings. Update the following settings:

    * **Text**: `@{summary}`. This displays the value of the `summary` state variable, which the blueprint sets to the meeting summary.
    * **Use Markdown**: Select **Yes**. This allows you to use markdown formatting in the text.

        <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-text-component.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b4b7c9b86cf25f99093aff624cc556a2" alt="" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/summary-text-component.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-text-component.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f36ecd005568a0d80802e039f69d59f3 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-text-component.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=72b39eee4c92b8d34629d03e23290721 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-text-component.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e910441cd7c8afc59efce1764fbfb583 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-text-component.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=96484941c13c4712101678633a11be98 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-text-component.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=5c4eba3bbd46bf298538bb806dc87355 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/summary-text-component.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=30b5f8e1f2491c2e690ed05dbb51da54 2500w" />
  </Step>
</Steps>

## Build the blueprint

With the UI built, you can now build the blueprint for the new agent.

The blueprint has the following logic:

1. The **UI trigger** block triggers the blueprint when the user clicks the **Generate summary** button in the UI.
2. The **Set state** block sets the `status` state variable to `Summarizing` so that the `Message` component in the UI can display it.
3. The **Text generation** block generates a summary of the meeting notes based on the selected format.
4. The **Set state** block sets the `summary` state variable to the generated summary so that the `Text` component in the UI can display it.
5. The **Set state** block sets the `status` state variable back to an empty string to clear the loading message from the UI.

Navigate to the **Blueprints** view to build the blueprint.

### Add the UI trigger

The [**UI trigger** block](/blueprints/uitrigger) triggers the blueprint when the user clicks the **Generate summary** button in the UI.

<Steps>
  <Step title="Add the UI trigger block to the canvas">
    Make sure you are in the **Blueprints** view. Then open the **Add block** section in the left sidebar and search for the **UI trigger** block in the blueprints toolkit.

    Click and drag the **UI trigger** block onto the canvas.
  </Step>

  <Step title="Edit the UI trigger block settings">
    Click the **UI trigger** block you just added to edit its settings. Update the following settings:

    * **Component ID**: Select the button component (it should show as `Generate summary`)
    * **Event type**: `wf-click`. This triggers the blueprint when the user clicks the **Generate summary** button in the UI.

        <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/ui-trigger-meeting-notes.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=339e6e6e8942e0582d0c82c28fab3bf0" alt="" data-og-width="3456" width="3456" data-og-height="1816" height="1816" data-path="images/agent-builder/ui-trigger-meeting-notes.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/ui-trigger-meeting-notes.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=999e8e5ba97d4ab89c5d99d754182d5f 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/ui-trigger-meeting-notes.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=46c1b395a2df0cb3889300d4f85deb36 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/ui-trigger-meeting-notes.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=63cf87cd1951d61a61ad4fabbd4a1c50 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/ui-trigger-meeting-notes.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=171015edfd79c4608eb276664eda852c 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/ui-trigger-meeting-notes.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3746f06f28d4654f332c9bec2d8f717c 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/ui-trigger-meeting-notes.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=60c483552bd53e228bd97082ddcab7de 2500w" />
  </Step>
</Steps>

### Add the set state block for the progress message

The [**Set state** block](/blueprints/setstate) sets the `status` state variable to `Summarizing` so that the `Message` component in the UI can display it.

<Steps>
  <Step title="Add the set state block to the canvas">
    Search for the **Set state** block. Then click and drag the **Set state** block onto the canvas.

    Connect the **Set state** block to the **UI trigger** block by dragging a line from the green dot on the **UI trigger** block to the **Set state** block. This tells the blueprint to execute the **Set state** block after the UI Trigger completes.
  </Step>

  <Step title="Edit the set state block settings">
    Click the **Set state** block you just added to edit its settings. Update the following settings:

    * **Link variable**: `status`
    * **Value**: `% Generating summary`. The `%` symbol indicates that the message should display a dynamic loading symbol.

    The **Message** component in the UI displays the loading message when this block is executed.

        <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-status-summarizing.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=86bf9a51363ac3c6e91922c3b276ada2" alt="" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/set-status-summarizing.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-status-summarizing.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b80a2cf70c955dd1466d80e442a6d302 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-status-summarizing.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e3eedee998d37eee9ebbff398b7b699b 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-status-summarizing.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=6ee9ed720aaa730a4dc427edc8f51dda 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-status-summarizing.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7e9f37e574ae7aa265637dd31d7f386f 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-status-summarizing.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=2ed56057940eae2d374dbfee1ca0dc35 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-status-summarizing.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=31a63d173cbbaf3b6060bc060afafef5 2500w" />
  </Step>
</Steps>

At this point, you can preview the agent to see the new behavior. When you click the **Generate summary** button, the `Message` component displays the loading message that you set in the **Set state** block.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/preview-agent-summarizing.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=8a22735e4ab67c553b087862b3383e4b" alt="" data-og-width="3456" width="3456" data-og-height="922" height="922" data-path="images/agent-builder/preview-agent-summarizing.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/preview-agent-summarizing.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e866253afea975296e484cca2f3639ea 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/preview-agent-summarizing.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0823dbc0901dbbf92cb692561c67f663 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/preview-agent-summarizing.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0f255e6a017bf287129e76fbd9bbcda3 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/preview-agent-summarizing.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2caa7f6cd6fdd1c0d2400623deb5dd26 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/preview-agent-summarizing.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c88d0bd2be969cc46fa752f300121c15 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/preview-agent-summarizing.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9f56287ffef87281e972b37fdfe9fc55 2500w" />

### Add the text generation block

The [**Text generation** block](/blueprints/textgeneration) generates a summary of the meeting notes based on the selected format using Palmyra LLMs.

<Steps>
  <Step title="Add the text generation block to the canvas">
    Search for the **Text generation** block in the block library. Then click and drag the **Text generation** block onto the canvas.

    Connect the previous **Set state** block to this **Text generation** block. Drag a line from the green dot on the **Set state** block to the **Text generation** block. This tells the blueprint to execute the **Text generation** block after the **Set state** block completes successfully.
  </Step>

  <Step title="Edit the text generation block settings">
    Click the **Text generation** block you just added to edit its settings. Update the following settings:

    * **Prompt**: Enter the following prompt. This prompt references the `meeting_notes` and `summary_format` state variables, which you set up in the UI. It instructs the agent to summarize the meeting notes and defines the different formats.

    ```
    Summarize these meeting notes based on the requested format:

    Meeting Notes: @{meeting_notes}
    Format: @{summary_format}

    Guidelines for each format:
    - Executive brief: Create a concise 2-3 sentence overview focusing on high-level outcomes and decisions for leadership
    - Action items only: List only the specific action items, who is responsible, and deadlines
    - Full summary: Provide a comprehensive summary including discussion points, decisions, action items, and next steps
    - Key decisions: Focus specifically on decisions made during the meeting and their implications

    Format the output appropriately for the selected format type.
    ```

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-text-generation.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3fcf16dd570ca0395db4434084a79374" alt="" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/meeting-notes-text-generation.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-text-generation.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ada6665f6b715084c6a23615bf2cacb2 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-text-generation.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=330297e8b70062e78d5d3673aee651a5 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-text-generation.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=b2fffbd79a6fbffa0672ee7250f3f6c7 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-text-generation.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ccb0265d4921493d88250ac659b7eb43 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-text-generation.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4460bbeceaefc8f0ac85eecc5954a0a4 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/meeting-notes-text-generation.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5920e2341deea931a57e7e301cdafbe6 2500w" />
  </Step>
</Steps>

### Add the set state block for the summary result

This [**Set state** block](/blueprints/setstate) sets the `summary` state variable to the generated summary so that the Text component in the UI can display it.

<Steps>
  <Step title="Add the set state block to the canvas">
    Search for the **Set state** block in the block library. Then click and drag the **Set state** block onto the canvas.

    Connect the new **Set state** block to the **Text generation** block. Drag a line from the green dot on the **Text generation** block to the new **Set state** block. This tells the blueprint to execute the new block after the **Text generation** block completes successfully.
  </Step>

  <Step title="Edit the set state block settings">
    Click the **Set state** block you just added to edit its settings. Update the following settings:

    * **Link variable**: `summary`
    * **Value**: `@{result}`. The `result` environment variable is the output of the previous **Text generation** block.

    <Tip>
      The `@{result}` syntax is how you reference the output of previous blocks. Learn more about what data and variables are available to reference in [Using data from previous blocks](/agent-builder/execution-environment).
    </Tip>

        <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-summary-result.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=226c53cb4fb6e248d636b4ec4f5a2599" alt="" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/set-summary-result.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-summary-result.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=946d7af0e4ad6d4042aeffa3ee8e36c9 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-summary-result.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3ccca2d70893415829b84c8b342face6 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-summary-result.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=87e9636a213418dd02c8343f79829df1 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-summary-result.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f8dc740606fc43c1b719d76e4c09d384 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-summary-result.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=2276dc7bc6fe05c0ae55a516e4f93ede 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/set-summary-result.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c10c8099347c9fc257a4a68606b36e35 2500w" />
  </Step>
</Steps>

### Add the set state block to clear the status message

This [**Set state** block](/blueprints/setstate) clears the `status` state variable to remove the status message from the UI.

<Steps>
  <Step title="Add the set state block to the canvas">
    Search for the **Set state** block in the block library. Then click and drag the **Set state** block onto the canvas.

    Connect the new **Set state** block to the previous **Set state** block. Drag a line from the green dot on the previous **Set state** block to the new **Set state** block. This tells the blueprint to execute the new block after the previous block completes successfully.
  </Step>

  <Step title="Edit the set state block settings">
    Click the **Set state** block you just added to edit its settings. Update the following settings:

    * **Link variable**: `status`
    * **Value**: Leave the **Value** blank. This clears the `status` state variable.

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/clear-status-message.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=12817ab9201bbd4de4467b3bea58bb0c" alt="" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/clear-status-message.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/clear-status-message.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=0880d823b3aff4e2bb7190860a0e9744 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/clear-status-message.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d01e5711a434ed9a69c0e74504d2ef89 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/clear-status-message.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=b4672bc7e63fe7574ca556323b4603af 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/clear-status-message.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=2121b3060ce31187a5679d28b334977d 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/clear-status-message.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=03c3ab398faf7d2c919183c08297c11f 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/clear-status-message.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=56f2c2e293e991d995843e43b1540e4e 2500w" />
  </Step>
</Steps>

### Data connection patterns

Notice how the blueprint connects blocks and passes data using variables:

* `@{meeting_notes}` and `@{summary_format}`: the blueprint blocks read from UI inputs via state
* `@{result}`: the blueprint blocks read the output from the Text generation block
* `@{summary}`: the blueprint blocks write the summary to the state, which the UI displays
* `@{status}`: the blueprint blocks set progress messages that the UI displays

This pattern of using `@{variable_name}` is how all Agent Builder components communicate.

## Preview the agent

You've now built the UI and blueprint for the new agent. Go to the **Preview** view to test the agent.

Paste meeting notes into the **Meeting notes** text area and select a summary format from the **Summary format** select input. Then click the **Generate summary** button to see the agent create a summary in your selected format.

Here's a sample transcript that you can use to test if you don't have your own meeting notes:

<Expandable title="Sample transcript">
  ```text  theme={null}
  1
  00:00:00,000 --> 00:00:03,500
  Sarah: Alright everyone, let's start with our Q1 campaign performance.

  2
  00:00:03,500 --> 00:00:07,000
  Sarah: Mike, how are we tracking on the content calendar?

  3
  00:00:07,000 --> 00:00:12,500
  Mike: We're slightly behind on blog posts - only published 8 out of 12 planned for January.

  4
  00:00:12,500 --> 00:00:18,000
  Mike: The SEO-focused pieces are taking longer than expected because we're doing more keyword research.

  5
  00:00:18,000 --> 00:00:22,500
  Mike: The good news is organic traffic is up 18% month-over-month.

  6
  00:00:22,500 --> 00:00:28,000
  Mike: I think we can catch up by end of month if we get approval for two freelance writers at $150 per article.

  7
  00:00:28,000 --> 00:00:32,500
  Sarah: Approved. That's within our content budget. Alex, what's the budget looking like for paid campaigns?

  8
  00:00:32,500 --> 00:00:37,000
  Alex: We've spent 60% of Q1 budget already, but conversion rates are 23% higher than last quarter.

  9
  00:00:37,000 --> 00:00:42,500
  Alex: The LinkedIn campaign is performing especially well for enterprise leads.

  10
  00:00:42,500 --> 00:00:47,000
  Alex: We're seeing a 4.2% CTR compared to 2.8% industry average.

  11
  00:00:47,000 --> 00:00:53,500
  Alex: I'd like to shift $15K from the underperforming Google Display campaign to LinkedIn and maybe test some YouTube ads.

  12
  00:00:53,500 --> 00:00:57,000
  Sarah: Let's do the LinkedIn shift but hold off on YouTube until we see February numbers.

  13
  00:00:57,000 --> 00:01:02,500
  Sarah: We need to be more conservative with spend until we understand the pricing impact.

  14
  00:01:02,500 --> 00:01:06,000
  Sarah: Lisa, any updates on the product launch messaging?

  15
  00:01:06,000 --> 00:01:10,500
  Lisa: The beta feedback is mostly positive. Users love the new dashboard interface and automation features.

  16
  00:01:10,500 --> 00:01:16,000
  Lisa: Main concern is pricing - 40% of beta users said our current model is too high for small businesses.

  17
  00:01:16,000 --> 00:01:20,500
  Lisa: They're comparing us to competitors who start at $39/month.

  18
  00:01:20,500 --> 00:01:25,000
  Lisa: I recommend we create a basic tier at $29/month instead of starting at $79.

  19
  00:01:25,000 --> 00:01:30,500
  Lisa: All marketing materials are ready but we'll need to update pricing pages, sales decks, and comparison charts.

  20
  00:01:30,500 --> 00:01:35,000
  Sarah: That's a significant pricing change that could impact our revenue projections by 30-40%.

  21
  00:01:35,000 --> 00:01:39,500
  Sarah: I need to discuss with leadership before we commit.

  22
  00:01:39,500 --> 00:01:45,000
  Sarah: Can you prepare a comprehensive business case by Friday? Include competitive analysis and revenue projections.

  23
  00:01:45,000 --> 00:01:49,500
  Lisa: Absolutely. I'll also coordinate with the sales team to get their input on customer feedback.

  24
  00:01:49,500 --> 00:01:53,000
  Mike: Quick question - should we hold off on publishing the pricing comparison blog post?

  25
  00:01:53,000 --> 00:01:57,500
  Sarah: Good catch. Yes, hold that one back. Focus on the feature-focused content instead.

  26
  00:01:57,500 --> 00:02:02,000
  Alex: Should we pause the Google Display campaign completely or just reduce spend?

  27
  00:02:02,000 --> 00:02:07,500
  Alex: It's eating budget but only generating 12 leads per month at $89 cost per lead.

  28
  00:02:07,500 --> 00:02:12,000
  Sarah: Reduce to minimum viable spend for now - maybe $2K monthly.

  29
  00:02:12,000 --> 00:02:17,500
  Sarah: We might be able to optimize it later once we have more conversion data.

  30
  00:02:17,500 --> 00:02:22,000
  Alex: Got it. I'll also run some A/B tests on our LinkedIn ad creative while we're scaling that up.

  31
  00:02:22,000 --> 00:02:26,500
  Sarah: Let me summarize our action items: Mike to hire freelancers and catch up on content calendar.

  32
  00:02:26,500 --> 00:02:31,000
  Sarah: Alex to reallocate $15K from Display to LinkedIn and reduce Display to $2K monthly.

  33
  00:02:31,000 --> 00:02:36,500
  Sarah: Lisa to prepare pricing analysis by Friday. I'll schedule leadership review for next Tuesday.

  34
  00:02:36,500 --> 00:02:40,000
  Lisa: Should I invite sales leadership to that pricing review?

  35
  00:02:40,000 --> 00:02:44,500
  Sarah: Yes, definitely include Tom from sales. His team will need to adjust their pitch if we change pricing.

  36
  00:02:44,500 --> 00:02:49,000
  Mike: If pricing changes, how much time do we need to update all marketing materials?

  37
  00:02:49,000 --> 00:02:54,500
  Lisa: About two weeks if we prioritize the sales decks and website first. The brochures can follow.

  38
  00:02:54,500 --> 00:02:59,000
  Sarah: That might push our launch timeline back slightly, but better to get pricing right.

  39
  00:02:59,000 --> 00:03:02,500
  Alex: All good on my end. I'll send the campaign performance report by tomorrow.

  40
  00:03:02,500 --> 00:03:05,000
  Sarah: Perfect. Thanks everyone. See you next week.
  ```
</Expandable>

Try different summary formats with the same meeting notes to see how the output changes based on your selection. You can also experiment with leaving the summary format blank to see how the agent handles it.

If you encounter any issues, refer to the [Troubleshooting](/agent-builder/troubleshooting) guide for debugging information.

## Deploy the agent

When you're ready to deploy the agent, click **Configure deployment** in the top right corner of the Agent Builder interface. You can also access the deployment configuration by going to the [AI Studio homepage](https://app.writer.com/aistudio) and selecting the agent you created.

If the agent isn't deployed, you see a toggle bar that says **Draft**.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d5bb311eb3357a77ba67a5268a79b711" alt="" data-og-width="1280" width="1280" data-og-height="266" height="266" data-path="images/agent-builder/not-deployed.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=81fbd0401e689b9f764c3deb4eaae769 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=aa9351ab6eee77f041bae7926c231c16 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=edcebe62cdb6c3de4c0630789fc25dd4 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c38132de7e6a8ae3f37002ceab6dd42c 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=773cedd074e71f6663243e2187cc3283 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bab6ed2f764bae8a1f102a49a1b2e2b1 2500w" />

To deploy the agent, toggle the bar. Writer deploys the agent to the Writer cloud, which takes a moment to complete.

When the deployment is complete, the toggle bar shows **Deployed**. It also shows a list of the teams in your organization, which you can use to grant access to the agent. You must select at least one team before you can view the URL for the deployed agent.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deployed-agent.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=dcc802273d31cde4ef8bda3e73775508" alt="" data-og-width="3452" width="3452" data-og-height="1804" height="1804" data-path="images/agent-builder/deployed-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deployed-agent.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=8fac010e854abdb5e9274e214d5e0cbc 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deployed-agent.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6e007c89168f959865c731a81dbe6023 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deployed-agent.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=543b99a4cfd9cefaabfa440a37cbc4a0 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deployed-agent.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=170ff3fa7a31a7c4a3161e49384fd1cc 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deployed-agent.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c412f40d430ff90144607d6e7e204b6c 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/deployed-agent.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e8d6151072d595bca4cebb132e4eec57 2500w" />

You can also choose to deploy the agent to the Writer Agent Library for the teams you've granted access to. These teams can see the agent you've created in the main [Ask Writer app](https://app.writer.com).

To help teams find the agent, select **Edit the agent guide**, where you can add a description and other information to help teams use the agent.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-instructions.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=02ab1a120689b63528cbe9e698d39875" alt="" data-og-width="1992" width="1992" data-og-height="1636" height="1636" data-path="images/agent-builder/agent-instructions.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-instructions.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=7577219ac8e96a37a6ad19f64853f9cf 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-instructions.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=1032e8b2f1df18ae6ed8f730d35fd7f7 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-instructions.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=af88bfd12f13fae388128683d46dabd7 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-instructions.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=be2e33961fe259a9de0edb2965c4b333 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-instructions.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ac978dedb83d543ebed96ac4234f6735 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-instructions.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=10a2f0c7e62165ce98640ddce76336ea 2500w" />

## Agentic enhancements

This tutorial shows outcome-driven design in action: you define what kind of summary you want, and the agent adapts. To make this agent even more versatile, consider adding:

* [Send summaries to Slack](/agent-builder/invoice-processing): Automatically post to relevant channels
* [HTTP request blocks](/blueprints/httprequest) and [tool calling](/agent-builder/tool-calling) to integrate with third party APIs to perform actions like:
  * **Emailing participants**: Send summaries via your email API such as SendGrid or Mailgun
  * **Calendar integrations**: Schedule follow-up meetings and block time for tasks
  * **CRM updates**: Log meeting outcomes in your customer database
  * **Task automation**: Create Jira tickets or Asana tasks for each action item

These integrations transform a summarizer into a true meeting assistant that takes action on your behalf.

## Next steps

* Learn how to [add file inputs and parse PDFs](/agent-builder/summarize-pdfs)
* Learn how to [style the agent's UI](/agent-builder/component-styles)
* Learn how to [send messages to Slack](/agent-builder/invoice-processing)
* Add [tool calling for intelligent integrations with external tools](/agent-builder/tool-calling)

<feedback />


# Build dynamic UI components with Repeaters
Source: https://dev.writer.com/agent-builder/repeater

Display dynamic lists of data in Agent Builder UI with Repeaters. Create repeating components for lists, dictionaries, and nested data structures.

The [**Repeater** component](/components/repeater) in Agent Builder allows you to display dynamic lists of data in your UI. It's similar to the [For-each loop block](/blueprints/for-eachloop) in blueprints, but for UI elements.

This document provides an overview of Repeaters and how to use them in your Agent Builder agents with two examples.

## Overview

A Repeater takes a list or dictionary and creates a copy of its child components for each item in that data. Inside the Repeater, you can access:

* `@{item}`: the current item's value
* `@{itemId}`: the current item's index, for arrays, or key, for dictionaries

Below is an example interface with a Repeater that displays a list of recipes based on user input. The Repeater is used to display each recipe in a tabbed layout and also to display the ingredients and steps for each recipe as nested text Repeaters.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0e9c3ddeced43dfe128aa2391e690685" alt="Repeater demo that displays a list of recipes based on user input" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/repeater-demo-app.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a0513a9b783ae60540a852e7393ecbd5 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c6da51b40321fb9f78eb4c1c1b566216 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=831aee9c58d3403eeb5b548625529791 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=61ae5467e2066a6680fae1a9e73b7781 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=88161edba46ade30bfc77c8ac5668034 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2d1299474de1eb8030f1a194d34ca48a 2500w" />

See the [tutorial](#tutorial%3A-build-a-recipe-generator-with-repeaters) below for more details about building this recipe generator.

### When to use Repeaters

Repeaters are useful for displaying:

* Lists of files, tasks, or messages
* Search results or product catalogs
* User-generated content like comments or reviews
* Data from APIs or structured output
* Any collection where you don't know the exact number of items

## Example: Display a list of items

This example starts with a small use case to dynamically display whatever a user selects from a select input.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3782e6778c72fc04c9fc101d6305164f" alt="Repeater example" data-og-width="3456" width="3456" data-og-height="656" height="656" data-path="images/agent-builder/repeater-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f9374ee09f4fe19049bd6c29ba85fbea 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=715db04326ea77851160a3fcde97930e 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9ff80a974b2fdbf35feb2ff9f2e1eb97 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=696befd90acbe5fd34c687a95bdb9461 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=485adcb19611e3fe09a6ea90dd7ff418 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c3e00dde7ac2c5b550644c8a8cadcc92 2500w" />

To start, you should have a new Agent Builder agent and clear the demo agent so you can start from scratch. See the instructions for [clearing the demo agent](/agent-builder/quickstart#clear-the-demo-agent) in the Agent Builder quickstart.

### Set up the select input

The select input allows the user to select multiple items from a list. You'll use it to select the items to display in the Repeater.

<Steps>
  <Step title="Add the select input to the agent">
    First, add a **Select input** block to the agent's interface. This is the input that will be used to select the items to display in the Repeater.

    Update the following settings:

    * **Label**: `Items`
    * Under **Options**, add a few key-value pairs as options for the dropdown. For example:
      * Key: Apple, Value: Apple
      * Key: Berry, Value: Berry
      * Key: Cherry, Value: Cherry
    * **Link variable** under **Binding**: `list`

    <Note>
      When you define the options for the select input, the values are what the user sees in the select dropdown, and the keys are what will be stored in the state variable.
    </Note>

        <img src="https://mintlify.s3.us-west-1.amazonaws.com/writer/images/agent-builder/repeater-select.png" alt="Select input" />
  </Step>

  <Step title="Add a Heading component">
    Add a **Heading** component to the agent's interface. This separates the select input from the Repeater.

    Under **Text**, update the text to `You selected:`. Next, you'll add the Repeater below this heading.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-heading.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=39268147ab4ac031809436244b470d39" alt="Heading component" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/repeater-heading.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-heading.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e1942fb2ae6ee784a98c588bbe8d1553 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-heading.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ef73ff680f544418472a2dd6f67a3dac 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-heading.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0db7c4fef14876ca864973eda248a6df 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-heading.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=adc41b30e4b93911838cfe7ca2395c1d 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-heading.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=25367d955ccc01e0fa792f04de93f90e 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-heading.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a51b55be3a471a78a1024410ebd4d680 2500w" />
  </Step>
</Steps>

### Add the Repeater

The Repeater displays a list of items dynamically. You'll use it to display the items selected from the select input.

<Steps>
  <Step title="Add a Repeater component">
    Add a **Repeater** component to your page. Update the following settings:

    * **Repeater object**: `@{list}`. This is the list of items to display in the Repeater.

    The **Key variable name** and the **Value variable name** default to `itemId` and `item`. These are the variable names you use to access the current item's index and value within the Repeater. You can change them to anything you want. In this example, you'll use the default names.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-repeater.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=714d7c4e40d1a880259de798182bcb2a" alt="Repeater component" data-og-width="3456" width="3456" data-og-height="1804" height="1804" data-path="images/agent-builder/repeater-repeater.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-repeater.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=1ec542b57013dbc160d15f77b7a7d3c9 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-repeater.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bcd12c2d515b4f4060d4b7af536665bc 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-repeater.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=5f66b88f10e015066d10e4d08cbf9f31 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-repeater.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d72865fc1d53656c8167f6e31db305fb 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-repeater.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=393c8a55242ded6ef4892ab1861944e0 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-repeater.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=6989720c5e5447e61fb728a5431a479c 2500w" />
  </Step>

  <Step title="Add a Text component inside the Repeater">
    Drag a **Text** component inside the Repeater.

    Inside the text component, set the text to ` @{item}` to display the value of the current item in the Repeater.

    When the `list` state variable is empty, the text displays placeholder text. When the user selects items from the multiselect input, the text displays the selected items.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-text.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ec7895afc8e3a8322401d3bd5fb30af5" alt="Text component" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/repeater-text.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-text.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=cf158754a5ace1392742c4b309e36fc1 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-text.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=cc41fe3029ceb61f9636970102c6307a 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-text.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=8f891e0b23cdc625bf04c2aa9fd72762 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-text.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=319fffca26f9faa06e1b1ffc8b9c8aa9 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-text.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2523c44ab4e76a39fbd43cb5627124d9 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-text.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a675f482f40f8f2d6f4991e72656e972 2500w" />
  </Step>

  <Step title="Update the Repeater's visibility">
    Once you add components to a Repeater, you can no longer see the parent Repeater component in the agent's interface view. You can find and edit the invisible component from the **Interface Layers** tab.

        <img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/interface-layers.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6ee428aa5b41dcb67eac1b8879c0bda3" alt="Repeater component" data-og-width="498" width="498" data-og-height="194" height="194" data-path="images/agent-builder/interface-layers.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/interface-layers.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5b80b6977b19c568b389204c6312fce4 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/interface-layers.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=8f46494a79cb8cbb6dd63eb040e7a44e 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/interface-layers.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=219d157e352a68da25148f52e89500a7 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/interface-layers.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=1487be01695f993e114941c32b1f0c8b 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/interface-layers.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3cc3b111ea4bf7f94e7ee3d58eb0a7cb 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/interface-layers.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5a0aa1a9f740c7c8fc8b257c92c72034 2500w" />

    Navigate to the **Interface Layers** sidebar within the agent's **Interface** tab. Then, click the Repeater component to open its configuration menu.

    Under **Visibility** in the Repeater's configuration menu, select **Custom**. Set the condition to `list`. This ensures the Repeater is only visible when the user has selected at least one item from the select input and the `list` state variable isn't empty.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=57a514bbbcb09e88ca4dfa1989790570" alt="Repeater visibility" data-og-width="3456" width="3456" data-og-height="1804" height="1804" data-path="images/agent-builder/repeater-visibility.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=05485cd38551684d783551727905927a 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=621b2626120f1dea1182feecf751be34 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9a9384caeaf75aa053b4fab93c29807e 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ca6e5a6603cd5e0690fe4d2bb88e0349 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bc38b84e99377161d87f8f5bc533117e 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2b0162a480dd888e7fb7bc81ba17ee83 2500w" />

    <Tip>
      Once you set a component's visibility to become hidden, you can no longer see it or its children within the agent's interface view. You can find and edit the invisible component from the **Interface Layers** tab.
    </Tip>
  </Step>

  <Step title="Preview the Repeater">
    Navigate to the **Preview** tab to see the Repeater in action.

    Select a few items from the select input to see the Repeater display the corresponding items.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3782e6778c72fc04c9fc101d6305164f" alt="Repeater preview" data-og-width="3456" width="3456" data-og-height="656" height="656" data-path="images/agent-builder/repeater-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f9374ee09f4fe19049bd6c29ba85fbea 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=715db04326ea77851160a3fcde97930e 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9ff80a974b2fdbf35feb2ff9f2e1eb97 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=696befd90acbe5fd34c687a95bdb9461 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=485adcb19611e3fe09a6ea90dd7ff418 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-example.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c3e00dde7ac2c5b550644c8a8cadcc92 2500w" />
  </Step>
</Steps>

## Tutorial: Build a recipe generator with Repeaters

This tutorial uses multiple Repeaters to display a list of recipes based on user input.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0e9c3ddeced43dfe128aa2391e690685" alt="Repeater demo that displays a list of recipes based on user input" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/repeater-demo-app.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a0513a9b783ae60540a852e7393ecbd5 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c6da51b40321fb9f78eb4c1c1b566216 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=831aee9c58d3403eeb5b548625529791 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=61ae5467e2066a6680fae1a9e73b7781 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=88161edba46ade30bfc77c8ac5668034 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-demo-app.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2d1299474de1eb8030f1a194d34ca48a 2500w" />

The recipe generator:

* Accepts a list of dish names from the user
* Generates complete recipes in the blueprint using AI structured output
* Displays each recipe in an organized, tabbed layout using nested Repeaters

### Part 1: Set up a minimal UI and the blueprint

First, you'll set up a minimal UI and the blueprint. This UI won't use any Repeaters yet, but it will be the foundation for the recipe generator.

#### Create the input interface

<Steps>
  <Step title="Add a Text Input">
    Add a **Text Input** to your page. Update the following settings:

    * **Label**: `Recipes`
    * **Placeholder text**: `Enter dish names (e.g., "Pizza, Chocolate Chip Cookies, Tacos")`
    * **Link variable** under **Binding**: `request`
  </Step>

  <Step title="Add a Button to trigger the blueprint">
    Add a **Button** to your page. Update the following settings:

    * **Label**: `Get recipes`
  </Step>
</Steps>

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-minimal-ui.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=db45ef81a8e936fe69cd506599c670c7" alt="Minimal UI" data-og-width="3456" width="3456" data-og-height="648" height="648" data-path="images/agent-builder/repeater-minimal-ui.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-minimal-ui.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=4516342a459b85f429c1c1cd1693e712 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-minimal-ui.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a4dce7994f13f15a0c331735da2954e2 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-minimal-ui.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=36c416b42cddf3f3c214b7256be83277 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-minimal-ui.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=39247fa8f43fc00ccf401949960c55ed 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-minimal-ui.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=77c5a9307fbbe0fbb98e8491ff80ca07 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-minimal-ui.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=dcf8740010bf32bb811015355e286c13 2500w" />

#### Build the blueprint

The blueprint contains three blocks:

* **UI Trigger** to trigger the blueprint when a user clicks the **Get recipes** button
* **Structured Output** block to generate the recipes and provide structured output that the Repeaters can use
* **Set State** block to store the recipes in the state variable `recipes`

<Steps>
  <Step title="Add a UI Trigger block">
    Add a **UI Trigger** block to your blueprint. Update the following settings:

    * **Component Id**: Select the **Get recipes** button
    * **Action**: `wf-click`
  </Step>

  <Step title="Add a Structured Output block">
    Add a **Structured Output** block to your blueprint. Update the following settings:

    * **Prompt**:
      ```
      You are a helpful cooking assistant. The user will provide you with a list of dish names. For each dish mentioned, create a complete recipe with the name, ingredients list, and step-by-step cooking instructions.

      Guidelines:
      - Provide practical, easy-to-follow recipes suitable for home cooking
      - Include specific measurements for ingredients (cups, tablespoons, etc.)
      - Write clear, numbered steps that a beginner could follow
      - Keep recipes simple but complete
      - If a dish name is vague, choose a popular/classic version of that dish

      For each dish in the user's input, generate a separate recipe object with:
      - name: The specific recipe name
      - ingredients: A detailed list of all ingredients with measurements
      - steps: Clear, sequential cooking instructions

      Example input: "Pizza, Chocolate Chip Cookies"
      This should generate recipes for both pizza and chocolate chip cookies.

      Process all dishes mentioned in the user's input and provide complete recipes for each one.

      User input: @{request}
      ```

    * **JSON Schema**: The JSON schema below defines the structure of the recipes as a list of recipe objects. Each recipe object has a name, ingredients, and steps. The Repeaters will use this schema to display the recipes.
      ```json  theme={null}
      {
        "type": "array",
        "description": "Array of recipe objects",
        "items": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "The name of the recipe"
            },
            "ingredients": {
              "type": "array",
              "description": "List of ingredients needed for the recipe",
              "items": {
                "type": "string"
              }
            },
            "steps": {
              "type": "array",
              "description": "Step-by-step cooking instructions",
              "items": {
                "type": "string"
              }
            }
          },
          "required": ["name", "ingredients", "steps"]
        }
      }
      ```
  </Step>

  <Step title="Add a Set State block">
    Add a **Set State** block to your blueprint. Update the following settings:

    * **State variable**: `recipes`
    * **Value**: `@{result}`
  </Step>
</Steps>

The complete blueprint should look like this:
<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-blueprint.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e27ee3256e43e71a6339ba930dfd1c66" alt="Complete blueprint" data-og-width="3456" width="3456" data-og-height="1806" height="1806" data-path="images/agent-builder/repeater-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-blueprint.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d4d354d7a3df191de8655dbc8f011a24 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-blueprint.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=45d44cd02ac5bc4616a226bdf244af1a 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-blueprint.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=8f9069dd89488e0307c9b51d4e54359a 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-blueprint.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c7b38380997a3436ebbcdcf86a326da2 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-blueprint.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=599e3fb5d833da5717a0f2207ada50e1 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-blueprint.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=4d4d1215aa62b762c6472ef84e871760 2500w" />

#### Test the blueprint

Now you can test that the blueprint works before you add the Repeaters.

Navigate to the **Preview** tab to test the blueprint.

Enter something like "Pizza, Chocolate Chip Cookies" in the text input and click the **Get recipes** button.

You should see the `request` and the structured output in the `result` state variables in your state before moving to the next step.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-state-variables.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=90e453db9c71a8909e8066f5569e3303" alt="State variables" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/repeater-state-variables.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-state-variables.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=056db6fa875db803ddee392be3286455 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-state-variables.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=1c9eeda20d5ba1ad95cea7ead8e64f80 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-state-variables.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=01be1f72d5435958e7983c796ea9ebac 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-state-variables.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=faaaa671c48d55c89e77e048653860c4 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-state-variables.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=34af632ab162b5d4dd141e6b6d4c3d80 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-state-variables.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=85e31482de4b5679c2344ac574d594ec 2500w" />

### Part 2: Add the main recipe Repeater

Navigate back to the **Interface** tab to continue building the recipe generator's UI.

<Steps>
  <Step title="Add a Repeater component">
    Add a **Repeater** component to your page. Update the following settings:

    * **Repeater object**: `@{recipes}`. This is the list of recipes you stored in the `recipes` state variable.
  </Step>

  <Step title="Add a Heading component inside the Repeater">
    Add a **Heading** component inside the Repeater. Update the following settings:

    * **Text**: `@{item.name}`

    This displays the name of each recipe as a heading.
  </Step>
</Steps>

If you preview the agent now, you should see a heading for each recipe name.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-preview-headings.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=78aa4feda3f5858fc92b2a629f166ced" alt="Repeater preview" data-og-width="3456" width="3456" data-og-height="1804" height="1804" data-path="images/agent-builder/repeater-preview-headings.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-preview-headings.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ee4b9adb77625b6625b14a84fa7911a3 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-preview-headings.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=7f22882df51dc0c4b94daf266ef1dd85 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-preview-headings.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0b28cee8389fabea74d8fd6f20a04d68 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-preview-headings.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f1ceb22cebb7145bb10eb2ed602f3523 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-preview-headings.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=35fb76ef2585e9d2260565504ecb50b9 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-preview-headings.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a06c6018570056836de471d1ead8e8ea 2500w" />

At this point, when there are no recipes, the Repeater still displays placeholder text. At the end of the tutorial you'll update the Repeater to be invisible when there are no recipes.

### Part 3: Add nested Repeaters for ingredients and steps

Now you'll add nested Repeaters for ingredients and steps. You'll use a **Tab Container** to display the ingredients and steps in separate tabs.

<Steps>
  <Step title="Add a Tab Container inside the main Repeater">
    Add a **Tab Container** inside the Repeater by dragging it into the space that contains the heading. You can verify that the tab container is inside the Repeater by checking the **Interface Layers** sidebar.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-tab-container.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=02aeb336cca872112c4f6801b67abea1" alt="Tab Container inside the Repeater" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/repeater-tab-container.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-tab-container.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bff0adaa1447d99ded6bfcf028bb5769 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-tab-container.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=70ac8abc376569b4b9aa6628f2bab375 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-tab-container.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=b30640a2e46caaf7202e9ef3c76be6d3 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-tab-container.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d8aac79ba8f2f29baeb24acc9bb95f55 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-tab-container.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f5deeedecf612d2a659b1fb0d9d900aa 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-tab-container.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0c8db85450da1380fc74a8f37a46764c 2500w" />
  </Step>

  <Step title="Create the first tab">
    Add a **Tab** component to the tab container. Update the following settings:

    * **Tab name**: "Ingredients"

    Then drag a **Repeater** inside the tab. Update the following settings:

    * **Repeater object**: `@{item.ingredients}`

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-repeater.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2a4698fe80cd7771ea0d004605f2bf66" alt="Ingredients tab" data-og-width="3456" width="3456" data-og-height="1808" height="1808" data-path="images/agent-builder/repeater-ingredients-repeater.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-repeater.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ac8841688d03f089bf33768f606ec52b 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-repeater.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=7da5c9790bbc7d8a8b2a5b1a80996480 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-repeater.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ebe65baa5d28ff79ef3a8d2221fc4211 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-repeater.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e3245369c597152e25944befa23b087c 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-repeater.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=7802c845b4fb8b57880c59f19fdd301c 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-repeater.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=14d83a196180816821e8c8bc280545a6 2500w" />
  </Step>

  <Step title="Add a Text component inside the first tab's Repeater">
    Add a **Text** component inside the first tab's Repeater. Update the following settings:

    * **Text**: `- @{item}`

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-text.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bb1459d71ec49ac6a5985e97eff42729" alt="Ingredients tab" data-og-width="3456" width="3456" data-og-height="1808" height="1808" data-path="images/agent-builder/repeater-ingredients-text.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-text.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a2b33e0db731656338ddbbdd50130953 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-text.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a0bcd40f1d56083d656daef10715a403 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-text.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e3b9ff37ccd5150240c4264e43b11f0e 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-text.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ee4c5a1d5be868d319d4aa9f8d70e63f 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-text.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d115227a7cd72d1286e0d11a1e20646b 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-ingredients-text.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=435773d1a9a42c039be8127463dd6f45 2500w" />
  </Step>

  <Step title="Create the second tab with a Repeater">
    Add a second **Tab** component to the tab container. Update the following settings:

    * **Tab name**: "Instructions"

    Then drag a **Repeater** inside the tab. Update the following settings:

    * **Repeater object**: `@{item.steps}`

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-repeater.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=1a9c19796f7bedddafe7ae0122653228" alt="Ingredients tab" data-og-width="3456" width="3456" data-og-height="1804" height="1804" data-path="images/agent-builder/repeater-instructions-repeater.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-repeater.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c02593b359a2c535988b4833427148f1 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-repeater.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=de7b344073ef1b35e843f0fbf000043e 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-repeater.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=01efa29fd2b7aad74a6dc888c8616fd8 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-repeater.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=930165406d7852df5927d28a33198066 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-repeater.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=8b8c9ded3d90668f397c3a0110962194 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-repeater.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=fddba8517f696cecb96a4aa5e7c9d87c 2500w" />
  </Step>

  <Step title="Add a Text component inside the second tab's Repeater">
    Add a **Text** component inside the second tab's Repeater. Update the following settings:

    * **Text**: `- @{item}`

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-text.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=57aaa9d6361e81bf57de2e548c6a8670" alt="Instructions tab" data-og-width="3456" width="3456" data-og-height="1808" height="1808" data-path="images/agent-builder/repeater-instructions-text.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-text.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e533d1829aa991334a5f76e0f7864bcb 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-text.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d39e98cc79d0cfa0606de955fc792512 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-text.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=fe1b08e6c0d8a0cb3c741116c783813d 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-text.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=8a5601654f1f68711bafc6ac8a5a41e8 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-text.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bc5a9ae9cd23a34490a520275fad97e3 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-instructions-text.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f9556965a23480f33e587ada5513df30 2500w" />
  </Step>

  <Step title="Update the Repeater's visibility">
    From the **Interface Layers** sidebar, click the first Repeater component, which contains the headings and tab components. Under **Visibility** in the main Repeater's configuration menu, select **Custom**. Set the condition to `recipes`. This ensures the Repeater is only visible when the user has selected at least one recipe.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility-2.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2cf328492e10ccd990a1798184e56fb2" alt="Repeater visibility" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/repeater-visibility-2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility-2.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=184c03664e84005c0a118d5d612faa5b 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility-2.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=39326b3e8dccf95581bed19e2298db47 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility-2.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=edee9732188146262cdaf8d6b76008d2 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility-2.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=dcd04de07915fa0a7ea77064295adba0 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility-2.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ea769c0027fe6496f725e8544637d3c7 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/repeater-visibility-2.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=29d54a5ddb2e2c539866d0e41b1230e8 2500w" />
  </Step>
</Steps>

If you preview the agent now, you should see the ingredients and steps for each recipe in separate tabs. You also shouldn't see the Repeater if there are no recipes.

### Understanding nested Repeaters

In this tutorial, you used three different Repeaters:

1. **Main Repeater**: iterates over the recipes array (`@{recipes}`)
2. **Ingredients Repeater**: iterates over each recipe's ingredients array (`@{item.ingredients}`). This Repeater is nested inside the main Repeater.
3. **Steps Repeater**: iterates over each recipe's steps array (`@{item.steps}`)

Each Repeater creates its own `@{item}` context, so the inner Repeaters access individual ingredients and steps as `@{item}`, while the outer Repeater's `@{item}` refers to the entire recipe object.

### Next steps

Try extending this tutorial by:

* Adding cooking time and difficulty level to the recipe schema
* Styling the recipe cards with colors and spacing
* Adding images or icons to make the recipes more visual
* Creating filters to show only certain types of recipes


# Store secrets with Vault
Source: https://dev.writer.com/agent-builder/secrets

Store API keys, passwords, and credentials securely with Vault in Agent Builder. Reference secrets in blueprints and Python code.

Agent Builder provides **Vault**, which is a secure way to store and use secrets in your agents. Use Vault to store sensitive information like API keys, passwords, and other credentials.

You can reference secrets in any block in your blueprint and [within Python code](/agent-builder/python-secrets).

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=33a4c1f34a0ea1cde51abe05f46f875b" alt="Vault overview" data-og-width="3456" width="3456" data-og-height="1802" height="1802" data-path="images/agent-builder/vault-overview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3e0abcc1b9967069f0433812e10bb19d 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=6a564527da152a1f2e71f12508ae2bed 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=88cc23749f5845ceaa489ba436b7b19b 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=35d2ab4d37f68fba5470a6496942bc34 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=dbcd039c17bcfb507431a4d220c2b28b 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-overview.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e5094d1e66358b82c79b122916f81189 2500w" />

## Create a secret

Secrets are strings stored as key-value pairs. To create a secret, go to the **Vault** tab in the Agent Builder UI and click **+Add a pair**.

The example below creates a secret with the name `WRITER_API_KEY`. When you type the value, it's masked in the UI.

Click **Save** to store the secret.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=1537e604f2e50506eacb0c1dc1aa3bcb" alt="" data-og-width="964" width="964" data-og-height="618" height="618" data-path="images/agent-builder/vault-add-secret.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=19a12076120d71ef6d1e4489e41ae561 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c79a2e7e9623c0fe355e5d2fd01d26ff 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=4fd9f60e1bbb5eea13f3435f483ba9c2 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b66edd2bdd42ff870f7e1e1f0f811493 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d174a98844576a825259f4f34b889421 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-add-secret.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d362bb87f81d1666f9a71b4537510ce5 2500w" />

You can also delete and update secrets from the **Vault** tab.

## Use a secret

To use a secret, reference it in a block in your blueprint with the prefix `@{vault}`. For example, to use the `WRITER_API_KEY` secret, you would use it as `@{vault.WRITER_API_KEY}`.

The example below shows adding an authorization header to an HTTP request block using the `WRITER_API_KEY` secret.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-use-secret.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=51c8036c149045216e9117c6de71a143" alt="" data-og-width="2738" width="2738" data-og-height="1290" height="1290" data-path="images/agent-builder/vault-use-secret.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-use-secret.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b1cd4693e9b8f05bcae0a31bd0bd8cc2 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-use-secret.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d0d0fc35cc0a322af3ab22279cf29222 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-use-secret.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=842e9dc28714dde138536d3dc838e1a3 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-use-secret.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c910ac6b2d488cf079e8721e1308bad2 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-use-secret.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c96153f760623cc2ed48506382212b67 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/vault-use-secret.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=4393323313d99240bc2dd64c43058961 2500w" />

When you reference a secret, it's automatically masked in the UI.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/http-request-with-secret.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=69db2753aaee6aad3cab3964cb020cb6" alt="" data-og-width="1562" width="1562" data-og-height="850" height="850" data-path="images/agent-builder/http-request-with-secret.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/http-request-with-secret.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9b9ac41845fc423fe90f195f84222fb8 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/http-request-with-secret.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=7a58ad390df37422a8872e445b47be0e 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/http-request-with-secret.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5bd49dfc4829387c4f0346e121c223d5 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/http-request-with-secret.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=de25acdb7f7a1621cdf39653d2731a69 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/http-request-with-secret.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=97f01ffe67f46e76e91ed4a1e6963eae 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/http-request-with-secret.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=daf65ca4407e17fcdf5c8fc5ed05f367 2500w" />

## Use a secret in Python code

You can access secrets in Python code blocks within blueprints using the `vault` object. `vault` is a dictionary that contains all the secrets in your blueprint.

<Warning>
  Vault secrets are only available in **blueprint code blocks** and **event handlers**. They are not available in `main.py` or other Python modules at the global scope. This is by design for security reasons. If you need to access secrets in `main.py`, use environment variables like `os.getenv('WRITER_API_KEY')` instead.
</Warning>

For example, to access a secret called `API_KEY` and use it in an HTTP request, you would use the following code:

```python  theme={null}
headers = {
    "Authorization": f"Bearer {vault['API_KEY']}"
}
```

Learn more about [accessing secrets in Python code](/agent-builder/python-secrets).

## Next steps

Now that you've learned how to store and use secrets in Vault, learn how to [make authenticated API calls using HTTP request blocks](/blueprints/httprequest) with your stored credentials.

**More resources**

* [Access secrets in Python code](/agent-builder/python-secrets) - Learn how to use vault secrets in event handlers and Python code blocks
* [Python code blocks](/blueprints/pythoncode) - Add custom Python logic to your blueprints
* [Local development](/agent-builder/local-development) - Set up local development with environment variables

<feedback />


# Manage agent state
Source: https://dev.writer.com/agent-builder/state



The agent's state is a core component of the agent's behavior. It contains values that the UI, blueprint, and custom Python code can access and update. The state acts as a shared memory for each part of the agent.

## Agent state explained

Think of an agent's "state" like a memory or a notebook that stores important information. Just like how you might jot down notes to remember things, an agent uses its state to keep track of various values or data that it needs to perform its tasks.

Imagine you're building a chatbot using Writer's Agent Builder. The chatbot needs to remember the user's name, so it can greet them by name later. In this case, the agent stores the user's name in its state as a variable. The chatbot can access this information and use it to personalize its responses.

The state is like a shared notebook that different parts of the agent can read from and write to. This allows the agent to keep track of its progress, remember important details, and make decisions based on the information stored in its state.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-state-overview.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=4e36344cda72982ab9263783fb3388a1" alt="Agent state explained" data-og-width="2424" width="2424" data-og-height="1455" height="1455" data-path="images/agent-builder/agent-state-overview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-state-overview.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ef10b750efc6839c31da8da1d437c0c2 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-state-overview.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=fb558dee1f481f321fa980c55e98abd8 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-state-overview.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=752e58343330042833b6b0a00ffba407 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-state-overview.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=bdc81f86216f1ac50beb38ec3b244f59 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-state-overview.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=80f66623dc46678b08c2c7e2861e304d 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/agent-state-overview.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a839df6213cb12d5995985d008a35f1f 2500w" />

## Inspect the state

You can view the agent's state from any view by clicking the **State explorer** icon in the top right of the page. This is helpful for debugging and understanding how the agent is working.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=dc9b3e4865094cbb8ab1c1b016b1393d" alt="State explorer icon" data-og-width="830" width="830" data-og-height="183" height="183" data-path="images/agent-builder/state-explorer-icon.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c879c37cc482564a6d147017903e4783 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3f059d1a8f0aef068d333aab62ac3eee 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=9fc574243187e6eddf1fbd838e21c0d8 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b6244e617a09a9b798cedf1d021f946a 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3a2844ff0e041c4880ddb3f7306038b4 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f31a2f62a7a3b151be20e9c1901f1f42 2500w" />

## Set state variables

You can set and update state variables in two ways:

* In a UI input element
* Using the **Set state** block in the blueprint
* Using custom Python code

### Set state in a UI input element

You can set state variables in any input block in the UI under the **Binding** section of the UI element's properties.

When a user enters a value in the input element, the value is automatically set as a state variable with the name you provide in the **Binding** section. Other parts of the agent can access this value.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-binding.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=8d9db5288724df259cd60eebe64a6884" alt="Set state in a UI input element" data-og-width="776" width="776" data-og-height="466" height="466" data-path="images/agent-builder/set-state-binding.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-binding.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=b89fb3d0d3db08301c54838b0651a7ce 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-binding.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=965604543f9e7e078098993affdb4237 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-binding.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3aa5e5d96875b046784df72ee55f1406 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-binding.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e95e77718746298cd81ac41c9a1d9ca2 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-binding.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=77f39ee6221b10ad4760ba096ecc384d 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-binding.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=84b844f0b34c0b171c6611880fc8e236 2500w" />

### Set state block

The [**Set state** block](/blueprints/setstate) allows you to set a state variable within a blueprint. Provide the name of the state variable and the value you want to set. When the block runs, the state variable is created or updated with the provided value.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-block.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ef439a171b99236a03a471d08691e66e" alt="Set state block" data-og-width="2078" width="2078" data-og-height="1260" height="1260" data-path="images/agent-builder/set-state-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-block.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=6e02a4c3df8b9c93199f5839576ac016 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-block.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c97c07b8af35d5c6777f50303a23cc33 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-block.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=5d941af5941a0016c6f036daa5154a72 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-block.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=6bf255dfe27fbae9caadb5dd2ca58fb6 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-block.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d670f8a151f37e18239ae3036b91489b 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/set-state-block.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3b4adc61ae1e1ae41638dc03f4f2f977 2500w" />

You can set state variables as `text` or `JSON`. Under the **Value type** dropdown, select the type of value you want to set. In the **Value** field, enter the value you want to set.

If you set the value as `text`, the value of the state variable is stored as a string. If you set the value as `JSON`, the value of the state variable is stored as a JSON object.

See how to [access nested state variables that are set as JSON](#nested-state-variables) below.

### Set state with custom Python

You can also set state variables with custom Python code.

To initialize the state, use the `wf.init_state` function:

```python  theme={null}
import writer as wf

wf.init_state({
    "counter": 0
})
```

To update the state, define a function that takes the state as an argument and updates the state. The state is similar to a Python dictionary, so you can update it by accessing the key and assigning a new value.

```python  theme={null}
def increment(state):
    state["counter"] += 1
```

#### Private state variables

You can create private state variables with custom Python code. Private state variables are not visible to the agent's UI and are only accessible via code.

To create a private state variable, prefix the variable with an underscore (`_`).

```python  theme={null}
wf.init_state({
    "_user_name": "John Doe"
})
```

## Access state variables

You can access state variables in the agent's blueprint, UI, and custom Python code.

### Access state variables in a UI element

You can access state variables in a UI element by using the `@` syntax.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-ui.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e055a20dd98cd3cdda9e6c629b4acf92" alt="Access state variables in a UI element" data-og-width="1514" width="1514" data-og-height="346" height="346" data-path="images/agent-builder/access-state-variables-in-ui.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-ui.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c168032e2872f214b03722943a9739a9 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-ui.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=4c4bae9866586366e89a1f43cb8c5d6e 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-ui.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=21c15f79d5583a442beefc4c94b2ced0 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-ui.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c8da487356f141bc49f6e5ca4fbee13f 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-ui.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b7a80615615be292cb1221dfdf0ffb65 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-ui.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ab2b8206c2e172fd65f319fec006536b 2500w" />

### Access state variables in a blueprint

Access state variables in a blueprint by using the `@` syntax.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-a-blueprint.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=4440a39610cb0006b0e63e576b32f582" alt="Access state variables in a blueprint" data-og-width="1554" width="1554" data-og-height="680" height="680" data-path="images/agent-builder/access-state-variables-in-a-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-a-blueprint.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=4a182348fd9694b8c196c6f781b1c7ae 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-a-blueprint.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=fab49dd0932fcc198f6dd00e220c7d70 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-a-blueprint.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=9a6d0bedddcd2e3a91380c4c8cf62a31 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-a-blueprint.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=9cc9a9ddb89905ddb85e865768aab636 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-a-blueprint.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=47e2b71d039af1b80cf93f76a09e7685 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/access-state-variables-in-a-blueprint.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=855fde8b527af1e9965af31c80c17c80 2500w" />

### Access state variables in custom Python

You can access state variables in custom Python code by referencing the `state` variable. The `state` variable functions like a Python dictionary, so you can access and update state variables by referencing the key.

Pass the `state` variable to the function when you call it.

```python  theme={null}
def increment(state):
    state["counter"] += 1
```

## Nested state variables

Agent Builder allows you to create and access nested state variables. This is useful when you need to store complex data that requires multiple levels of organization.

### Set nested state variables

You can set nested state variables in the **Set state** block using `JSON` as the value type and a JSON object as the value.

You can also set nested state variables in custom Python code.

### Access nested state variables

In the UI or a blueprint, use `.` to access the different levels of nested state variables. For example, consider a state variable with the following structure:

```json  theme={null}
"tasks": [
    {
        "title": "Write a blog post"
    }
]
```

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-explorer.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=73f697a54d675d4b4d4d4253bf7f6d2c" alt="Nested state variables" data-og-width="2388" width="2388" data-og-height="674" height="674" data-path="images/agent-builder/nested-state-explorer.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-explorer.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=72c3939e2d24a2e0f6eb5d7b064e5e41 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-explorer.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5974e0675848d677a48bf979b28d2252 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-explorer.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a989fdf2be25c60f0e4517797dd361ee 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-explorer.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5250c584900216abe944abcf5cb2272b 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-explorer.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=1d197c10e5db22f128dc0948833d0cb5 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-explorer.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a3f73eeaa7d84121100c91d909578e4d 2500w" />

To access the `title` of the first task in a blueprint or UI block, use the following syntax:

```
@{tasks.0.title}
```

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-ui.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=686ef244f4b99caccac318b712d81e4c" alt="Accessing nested state variables in a UI element" data-og-width="2556" width="2556" data-og-height="712" height="712" data-path="images/agent-builder/nested-state-ui.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-ui.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d45c2ede0c6fca5ed9ab37eaf12a3a4c 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-ui.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d34ff09a5c04a2921ef58077a12e2995 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-ui.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=96248c09fbb9b2641f87b842afc7d7f4 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-ui.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5472f179dd7d06e87805f138f69e8f25 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-ui.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=a05f036809474eba77790b4fb9fd8fdb 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/nested-state-ui.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=68f4f81ee34c607c3719227a5f9c3fa9 2500w" />

<feedback />


# Upload, parse, and summarize PDFs
Source: https://dev.writer.com/agent-builder/summarize-pdfs

Build a PDF research paper summarizer with Agent Builder. Upload PDFs, parse content, and generate summaries for specific personas.

This tutorial follows a similar format to the [Agent Builder Quickstart](/agent-builder/quickstart) use case of summarizing text; in this case, it adds the ability to upload and parse PDFs with Agent Builder and summarize the content.

This tutorial use case is a research paper summarizer that summarizes papers for a specific persona.

If you haven't completed the Agent Builder Quickstart, you may want to do that first to familiarize yourself with the mechanics of Agent Builder.

## Build the UI

The UI for the agent contains:

* A file input block
* A select input to choose the persona to summarize the file for
* A button to start the summarization process
* A message block to indicate that the file is in progress
* A text block to display the results

<Steps>
  <Step title="Add a File Input block">
    First, add a File Input block to the canvas. In the block's configuration panel, update the following fields:

    * **Label**: `Research paper PDF`
    * **Allowed file types**: `.pdf`
    * **Allow multiple files**: `no`

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-block.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3fe8e96ebc1c942cc5011c2b08e209b4" alt="File Input block" data-og-width="3456" width="3456" data-og-height="1808" height="1808" data-path="images/agent-builder/parse-pdf-tutorial/file-input-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-block.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=aa9e5390efdaa349008e853f8bf8a923 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-block.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=6bd10135f818b5894f6a1c745a329897 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-block.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e0eb9a190aad3241d0c3718050a34c28 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-block.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=91cf475a934c0aa1847eaa399f017ec4 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-block.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=5ecd7f262b7ee58b2eb69737f34f10d5 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-block.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c65e36ea1171ee7fac5d277a8c37c944 2500w" />
  </Step>

  <Step title="Add a select input to choose the persona">
    Next, add a **Select input** block to the canvas, which creates a dropdown. In the block's configuration panel, update the following fields:

    * **Label**: `Persona`
    * **Options**: add the personas you want to summarize the file for. This example uses the personas `Sales`, `Marketing`, `Product`, and `Engineering`.
    * **Link variable** under **Binding**: `persona`. You use this variable name in the blueprint when asking the text generation block to generate a summary for the selected persona.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/persona-dropdown.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a6a3884b0d73feb8ec3c626946d586d3" alt="Persona dropdown" data-og-width="3456" width="3456" data-og-height="1816" height="1816" data-path="images/agent-builder/parse-pdf-tutorial/persona-dropdown.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/persona-dropdown.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=b58022a5b2c332361dce43bb21fad932 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/persona-dropdown.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3bfb24dd55e4b38ebe406eadb85ddc62 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/persona-dropdown.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c22d10afe400b9953d1f5594cc0a0a3e 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/persona-dropdown.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=fe680f0103ea7a42d00f7a20c1dfc4e5 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/persona-dropdown.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=8a5c9783aa5ed50ae4098dbb77690835 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/persona-dropdown.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d309b5acf352c42f1db5215dc0b5f546 2500w" />
  </Step>

  <Step title="Add a button to start the summarization process">
    Add a **Button** block to the canvas. In the block's configuration panel, update the following fields:

    * **Text**: `Summarize`

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summarize-button.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=572c59eb855183817afa84eae959e4d8" alt="Start button" data-og-width="3456" width="3456" data-og-height="1798" height="1798" data-path="images/agent-builder/parse-pdf-tutorial/summarize-button.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summarize-button.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=17fff27c87424f53d63d33f0363ee8fc 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summarize-button.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=548581ca48a1d57903326152cb604339 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summarize-button.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=acf572599ade57b1f3d756ee45d088e7 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summarize-button.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=402621b479eb4f7813d78961dff7d2b0 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summarize-button.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=97d7eff091eea6706410776aaf94e106 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summarize-button.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a224beacb2e8ce00e395733087c58e0f 2500w" />
  </Step>

  <Step title="Add a message block to indicate that the file is in progress">
    Add a **Message** block to the canvas, which will display a message to the user indicating that the summarization is in progress. In the block's configuration panel, update the following fields:

    * **Message**: `@{status}`. This will display the status message from the agent's state. You use this variable name in the blueprint to update the status message in the UI.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/status-message.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=1a5e469712a8f15e6f1563ff0df14201" alt="In progress message" data-og-width="3456" width="3456" data-og-height="1806" height="1806" data-path="images/agent-builder/parse-pdf-tutorial/status-message.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/status-message.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=272c082f358fce0b4b65cac4a99a3175 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/status-message.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9871b96eca824c8fc20035eb6f885d18 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/status-message.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=5e77dffd9814ff5d32ab38d2d4946283 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/status-message.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ead8b9b0fb090e609e1f620b47d08e62 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/status-message.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=245f5f58f231bda79e2686111d166c65 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/status-message.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=61cacf60e8bbbcd8eb706c5fa708c33f 2500w" />
  </Step>

  <Step title="Add a text block to display the results">
    Finally, add a **Text** block to the canvas, which will display the summary results. In the block's configuration panel, update the following fields:

    * **Text**: `@{summary}`. This will display the summary results from the agent's state. You use this  name in the blueprint to display the summary results in the UI.
    * **Use markdown**: `yes`

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summary-text-block.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c0628ca41d9369735591fdbfdace1a71" alt="Results text block" data-og-width="3456" width="3456" data-og-height="1808" height="1808" data-path="images/agent-builder/parse-pdf-tutorial/summary-text-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summary-text-block.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=15037891cd67b49894a5ef5b24259a48 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summary-text-block.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c1030e30743d3d6f734d28fe80bd5788 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summary-text-block.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=becddd0689b670429d47180703efde99 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summary-text-block.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=64369fbaf6dd6d2609b43d33e1fb3b6a 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summary-text-block.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3706e31751f04b0a1be0efcfbf7256c8 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/summary-text-block.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9f4759143b70968604ff4c0b500d5393 2500w" />
  </Step>
</Steps>

## Build the blueprints

The agent has two blueprints:

* [One for uploading a file to Writer cloud](#first-blueprint-upload-file-to-writer-cloud) when a user adds a file to the file input block
* [One for parsing the file and summarizing it](#second-blueprint-parse-and-summarize-the-file) when a user clicks the button to start summarizing

The agent's logic is segmented into two blueprints so that the file uploading can complete before the parsing and summarizing begins.

### First blueprint: Upload file to Writer cloud

Before you can work with the content of a PDF file in a blueprint, you need to upload it to the Writer Cloud with the **Add files to Writer Cloud** block. Once you've uploaded the file, you can access it in the blueprint using the uploaded file's ID and perform operations like parsing the PDF and providing that information to a text generation block.

<Steps>
  <Step title="Add a UI trigger for file input">
    Add a **UI trigger** block to the canvas. This triggers the blueprint when a user adds or changes the file in the file input block.

    In the block's configuration panel, update the following fields:

    * **Alias**: `File upload`. This is optional, but helps to identify the trigger in the blueprint.
    * **Component Id**: Select the `File Input` component from the dropdown of UI blocks
    * **Event type**: `wf-file-change`

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-trigger.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9d43933e62f7a24a99a6cf6979c2bb2b" alt="File input trigger" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/parse-pdf-tutorial/file-input-trigger.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-trigger.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e85a02538db1fc23732ac9d0093af06c 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-trigger.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=6f49d1cc3b3d82b1b773942e1fae6da9 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-trigger.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ce308fe3d9c309c90841efe9ca9781a3 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-trigger.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=5f4282e45f5b3a3dd45d8f6b459b23c8 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-trigger.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=fa101493cec36a4d1c80ded92f79dc74 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/file-input-trigger.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=7cb862b91fafdffdeb14a0efbcd39b77 2500w" />
  </Step>

  <Step title="Add a block to add files to Writer Cloud">
    Add a **Add files to Writer Cloud** block to the canvas. This block uploads the file to Writer Cloud.

    In the block's configuration panel, update the following fields:

    * **Files**: `@{payload}`. This references the payload provided by the preceding UI trigger. The payload contains the file that was uploaded to the file input block.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-files-to-writer-cloud-block.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0f40f2cc19b00e3f36bbcf67824e8a3e" alt="Add files to Writer Cloud" data-og-width="3456" width="3456" data-og-height="1808" height="1808" data-path="images/agent-builder/parse-pdf-tutorial/add-files-to-writer-cloud-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-files-to-writer-cloud-block.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=17ccd17fc00cf4955a5d4cd155a6c19d 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-files-to-writer-cloud-block.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=808ac07a20f0ac49c982e91662cce8c7 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-files-to-writer-cloud-block.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=65f4f18263f2ed32a31c07cf29f04825 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-files-to-writer-cloud-block.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a1445dfd72b178664685fac35ec961ec 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-files-to-writer-cloud-block.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=47ed37eb67228854fa25999e8e2c7578 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-files-to-writer-cloud-block.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0072c61ddc5ec2055151f63e20aba9b1 2500w" />
  </Step>

  <Step title="Add the uploaded file information to the state">
    Finally, add a **Set state** block to the canvas. This block takes the results from the **Add files to Writer Cloud** block and stores it in the state as the `file_info` state variable. This is the information about the uploaded file, specifically the `id` of the file in Writer Cloud, that will be used in the next blueprint.

    In the block's configuration panel, update the following fields:

    * **Link variable**: `file_info`
    * **Value type**: `text`
    * **Value**: `@{result}`. This references the `result` from the previous block, which is the information about the uploaded file.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-file-info.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=329481258b83d0213751714be3be5c5a" alt="Upload files to Writer Cloud" data-og-width="3456" width="3456" data-og-height="1806" height="1806" data-path="images/agent-builder/parse-pdf-tutorial/set-state-file-info.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-file-info.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=86b013c4a66c3fdb202c2b8247c1b0f1 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-file-info.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ff341fe91c3ffb190deb6bf59ee1d89e 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-file-info.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=1dfcdf9a374bb4b6d1cab1bc50302bc1 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-file-info.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d1234896dbb707c68bc6ffa9fc2ef0aa 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-file-info.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=fa8fec2fb4e123a3de8477c151213e3c 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-file-info.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3068e3b665eb1222142a6193f4eb65ad 2500w" />
  </Step>
</Steps>

### Second blueprint: Parse and summarize the file

Once you've uploaded the file to the Writer Cloud, you can parse the PDF and provide the file's content to a text generation block.

<Steps>
  <Step title="Add a new blueprint">
    First, add a new blueprint to the canvas. Navigate to the Blueprint Layers section in the sidebar and click **+ Add blueprint** at the bottom of the blueprint layers outline.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-blueprint.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f083c9ae85a52c996402889fa0eeabb9" alt="Add blueprint" data-og-width="3456" width="3456" data-og-height="1806" height="1806" data-path="images/agent-builder/parse-pdf-tutorial/add-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-blueprint.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ab584779c47efd96f080f405e8b8b3b9 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-blueprint.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=30955f8e7ac274cff22eea64c6a9d7d9 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-blueprint.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=cf3c74a8c83d1bd8c169fc7e0652b846 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-blueprint.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=fd32d89ee8bfc1556428d59d0dfce1a9 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-blueprint.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=31333cf04c3cc6136f4a923ec32661aa 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/add-blueprint.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=22f43e332fa480f48bc9708821818c1d 2500w" />
  </Step>

  <Step title="Add a UI trigger for the button to start summarizing">
    Navigate back to the Add Block section of the Agent Builder and add a **UI trigger** block to the new blueprint. This triggers the blueprint when a user clicks the button to start summarizing.

    In the block's configuration panel, update the following fields:

    * **Alias**: `Start summary` (optional, to make the trigger easier to identify)
    * **Component Id**: Select the `Summarize` button component from the dropdown of UI blocks
    * **Event type**: `wf-click`

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/start-summary-trigger.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=14a153c76c8ad3e1257557a7ae951011" alt="Start summary trigger" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/parse-pdf-tutorial/start-summary-trigger.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/start-summary-trigger.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=72f1f19f00a2a4593f188d52f7cc2e81 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/start-summary-trigger.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=5a180acfa216a24ec204eb3ca9864f90 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/start-summary-trigger.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=05186493138eb2ee593b8c39129f6537 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/start-summary-trigger.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=b99531454f8d4f2bc9f57b41607b6974 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/start-summary-trigger.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f49b457c184c68450f6dd9dc632d4a2b 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/start-summary-trigger.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e7fc6fe4b8b80cd5e451e9f197fa7440 2500w" />
  </Step>

  <Step title="Update the status message">
    Add a **Set state** block to the canvas. This block updates the status message in the state to indicate that the summarization is in progress. The message will appear in the UI message block.

    In the block's configuration panel, update the following fields:

    * **Link variable**: `status`
    * **Value type**: `text`
    * **Value**: `%Summarizing...`. The `%` symbol creates an animated spinning icon when the message appears in the UI.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/update-status-message.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3e13aab9c2f9f6a817cef8db1d178a97" alt="Update status message" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/parse-pdf-tutorial/update-status-message.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/update-status-message.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d3b3dbd604f5c77c487fa7bb3c2157f1 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/update-status-message.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3ce3d66159b7139c321eeace03e6523e 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/update-status-message.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=4620cd1390c25e0a8ce1ad018fbf8ff9 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/update-status-message.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=33fc31ac36c82e034ed657826df77dce 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/update-status-message.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=5bfeb239527bdf0b948e86e440749106 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/update-status-message.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=10f5f2f92a2baf676a846ea428bcdd61 2500w" />
  </Step>

  <Step title="Add a block to parse the uploaded PDF file">
    Add a **Parse PDF Tool** block to the canvas. This block parses the uploaded PDF file so that the agent can generate a summary of the file.

    In the block's configuration panel, update the following fields:

    * **File**: `@{file_info.0.id}`. This references the `file_info` state variable you defined in the first blueprint and specifically access the `id` of the uploaded file.

    <Tip>
      The `file_info` state variable is an array of objects, containing one object with information from the **Add files to Writer Cloud** block. You can see the values of state variables by clicking the **State Explorer** (`<>`) icon at the top of the canvas. Learn more about [nested state variables](/agent-builder/state#nested-state-variables).
    </Tip>

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/parse-pdf-tool-block.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=1a647f453a1dd18501468dbf3d0d9ceb" alt="Parse file" data-og-width="3456" width="3456" data-og-height="1808" height="1808" data-path="images/agent-builder/parse-pdf-tutorial/parse-pdf-tool-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/parse-pdf-tool-block.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d309ec84b759813c7c36793a7c73af42 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/parse-pdf-tool-block.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=6be65ae658894740f9c424d7f7cb08a0 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/parse-pdf-tool-block.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9464cd1e3d88fdd080f139acf0dfe2e0 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/parse-pdf-tool-block.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bfd384be60fadb0c6139a675c80b05b4 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/parse-pdf-tool-block.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=71fabecf9ae5c203470ce495a7a8eca1 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/parse-pdf-tool-block.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=83a254a8a27cb56156ce838ab1df9a80 2500w" />
  </Step>

  <Step title="Add a block to generate a summary of the parsed file">
    Add a **Text generation** block to the canvas. This block generates text with a Palmyra LLM based on a prompt.

    In the block's configuration panel, update the following fields:

    * **Prompt**: `Provide a one-paragraph summary and a list of the three most important takeaways from this research paper: @{result}. Provide the summary for the user persona @{persona}.`
      * `@{result}` references the `result` from the previous block, which is the parsed PDF file.
      * `@{persona}` references the `persona` state variable you defined in the UI.
    * **Model**: `Palmyra X5`

    You can also update the additional fields **Temperature** and **Max tokens** to further control the output of the text generation.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/generate-summary-block.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=884e9ec231163e2a4d64aa5a82b9e6d8" alt="Generate summary" data-og-width="3456" width="3456" data-og-height="1816" height="1816" data-path="images/agent-builder/parse-pdf-tutorial/generate-summary-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/generate-summary-block.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0eb191bb895d54fbb75addb6e659f20b 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/generate-summary-block.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=6e5fa8927dfd58e569979beb32ea0f79 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/generate-summary-block.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=a030f80b8bfb3246aaf6057bc37d3627 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/generate-summary-block.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=4afa62227506f90b5f4e590ea5fe338a 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/generate-summary-block.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=622bbe0c52cea69479b9d9f0c708d4e5 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/generate-summary-block.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=8b6179287e9f7bf063cafd7dd5e89bde 2500w" />
  </Step>

  <Step title="Add the summary results to the state">
    Add a **Set state** block to the canvas. This block takes the results from the previous text generation block and stores it in the state as the `summary` state variable.

    In the block's configuration panel, update the following fields:

    * **Link variable**: `summary`
    * **Value type**: `text`
    * **Value**: `@{result}`. This references the `result` from the previous block, which is the summary of the parsed PDF file.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-summary.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c80888ca3d215112661ca2a2bbbe92e1" alt="Set state summary" data-og-width="3456" width="3456" data-og-height="1810" height="1810" data-path="images/agent-builder/parse-pdf-tutorial/set-state-summary.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-summary.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=4674f55741c03dd8ddc19a25213cdfb6 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-summary.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=ee0dba4f7b2332fd4c51d6e616dc2a34 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-summary.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=501dfffc2523cf82c12b3484d7955ce0 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-summary.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=cb2074099789cfb031cb4efe11fc2bf1 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-summary.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=9d5c0cb8a06ead8e43062cf785679f70 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/set-state-summary.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=6924d2f11eb8b90261d1f8e3b4e77ff1 2500w" />
  </Step>

  <Step title="Clear the status message from the state">
    Finally, add a **Set state** block to the canvas to clear the status message from the state.

    In the block's configuration panel, update the following fields:

    * **Link variable**: `status`
    * **Value type**: `text`
    * **Value**: Leave blank. This clears the status message from the state.

        <img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/clear-status-message.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=7370708791e2f351c1e1937d4fd77d6f" alt="Clear status message" data-og-width="3456" width="3456" data-og-height="1808" height="1808" data-path="images/agent-builder/parse-pdf-tutorial/clear-status-message.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/clear-status-message.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=1883651aa62702af946bc7c09e8a9d7a 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/clear-status-message.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2942e88bec8b054794571724138d7411 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/clear-status-message.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2a9d387fc603247873e930f842e0f1f1 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/clear-status-message.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=16bd5ba4f42884206a434932200b1fc4 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/clear-status-message.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3534e4df1905337ad19b553824b89aab 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/clear-status-message.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0973981a0f66360236530cc4c6095b82 2500w" />
  </Step>
</Steps>

## Preview the agent

Now that you've built the agent, you can preview it.

1. Navigate to the **Preview** tab in the Agent Builder.
2. Add a PDF file to the file input block and select a persona from the dropdown.
3. Click the **Summarize** button to start the summarization process.
4. You should see the status message update to `%Summarizing...` and the summary results appear in the text block.

The results take a few seconds to generate. You can see the progress of the Agent Builder by going to the **Blueprints** tab. The blueprint blocks that have already run will be highlighted in green, and the one that's currently running will have an animated blue border.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f4213ab4084c828a555723aa85a84a49" alt="Blueprint in progress" data-og-width="3456" width="3456" data-og-height="1796" height="1796" data-path="images/agent-builder/parse-pdf-tutorial/blueprint-progress.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0ba61d4c42c8d61b2a8d658765ed3c5f 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=b2517593f52e6caa8c88ac9d02e96d05 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=db5f2d3d44a7e87d2bc29245deb0bee2 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bfd12e807fa0f820291a108bca526a43 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e77294494ac8731601c76d0dfd572524 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3c9dbd995b7ab600114ffff490b78fdd 2500w" />

If you encounter any issues, refer to the [Troubleshooting](/agent-builder/troubleshooting) guide for debugging information.

<feedback />


# Sync agents between local and cloud
Source: https://dev.writer.com/agent-builder/sync-agent



This guide shows you how to synchronize your agents between local development and Writer Cloud environments. This allows local development offline and cloud development and deployment when you wish to share your agent with your team.

<Tip>To avoid conflicts, work in one environment at a time, then explicitly sync your changes to the other environment when ready. This ensures your changes are properly tracked and preserved across environments.</Tip>

## Overview

There are two main synchronization workflows:

1. **Cloud to local**: Start with a cloud agent and bring it to local development
2. **Local to cloud**: Start locally and push to the cloud

Both workflows involve downloading an agent's configuration from one environment and importing it into another.

Before starting, ensure you have:

* A Writer API key. Learn how to [create and manage API keys](/api-reference/api-keys).
* The `writer` package installed. Learn how to [install the Writer Framework package](/agent-builder/local-development#install-the-writer-framework-package).
* If you plan to do both local and cloud development, review [considerations for dual-environment development](#considerations-for-dual-environment-development) to properly handle environment variables and secrets for both local and cloud development.

## Cloud to local workflow

If you've already created an agent in the AI Studio Agent Builder web editor and want to continue development locally:

### Step 1: Export from cloud

From your cloud agent in Agent Builder, click the three dots in the top right corner of your agent and select **Download agent .zip file** to download a `.zip` file containing your agent's configuration.

<img src="https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=89922197cb60c38a2f1e74d210eaef29" alt="" data-og-width="468" width="468" data-og-height="260" height="260" data-path="images/agent-builder/export-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=280&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=6db01e6c16c3816705ac3a3e12e7058c 280w, https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=560&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=3e94fc65d17bffa63c6c90219b429f50 560w, https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=840&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=e149d947ccb465cec113a4c2f20efdc1 840w, https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=1100&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=a0e3f5276f5a6fab90b59e44b611a603 1100w, https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=1650&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=1fd4420c9b0f4e04408f79fe44a27e24 1650w, https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=2500&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=04e456c78c228ffce56687841de69b52 2500w" />

<Note>The downloaded zip file contains your agent's UI components and blueprints in a hidden folder called `.wf`. If the zip file appears to only contain generic starter files, check for the `.wf` folder which contains the internal configuration files for your agent.</Note>

### Step 2: Create local project

Create a new local project with Writer Framework and import the cloud agent by unzipping the export file you downloaded:

```bash  theme={null}
# Create a new local project
writer create my-cloud-agent
cd my-cloud-agent
```

### Step 3: Import the cloud agent into your local project

Import the cloud agent by unzipping the export file you downloaded into your local project:

```bash  theme={null}
# The export file contains all your agent's configuration from the web editor
unzip your-agent-export.zip
```

<Tip>If you don't see the import/export agent functionality in your local development environment, make sure you're running the latest version of Writer Framework. Run `pip install --upgrade writer` to get the latest version with all features.</Tip>

Because the export file contains all your agent's configuration, the terminal asks you to confirm file-by-file whether you'd like to overwrite your local project's files.

Type `A` to replace all files in your local project with the exported agent.

You can also choose the following options:

* `y` to replace an individual file
* `r` to rename an individual file
* `N` to cancel the import and not replace any files

```bash  theme={null}
my-agent unzip ~/Downloads/export.zip
Archive:  /Users/Downloads/export.zip
  inflating: README.md
replace main.py? [y]es, [n]o, [A]ll, [N]one, [r]ename: A
```

### Step 4: Set up environment variables

Set up a `.env` file in your local project directory and add your Writer API key:

```bash  theme={null}
# .env
export WRITER_API_KEY="[your_api_key]"
```

Run the following command to activate the environment variables:

```bash  theme={null}
source .env
```

### Step 5: Start local development

Start the local development server:

```bash  theme={null}
writer edit .
```

Your local environment now contains an exact copy of your cloud agent, and you can continue development locally.

## Local to cloud workflow

To start development locally and then push to the cloud development environment, follow these steps:

### Step 1: Create local project

Start with a local project:

```bash  theme={null}
writer create my-local-agent
cd my-local-agent
writer edit .
```

### Step 2: Develop locally

Build your agent locally using the Writer Framework development environment. You have full access to:

* Python code editing
* UI component configuration
* Blueprint design
* Local testing and debugging

### Step 3: Prepare for cloud sync

Before syncing to the cloud, ensure your code handles both Vault and environment variables as described in the [handle environment variables and secrets](#handle-environment-variables-and-secrets) section.

<Warning>Remove or move your `.env` file before syncing to prevent it from showing in the cloud editor.</Warning>

### Step 4: Download the local agent's export file

When you're ready to sync your local agent to the cloud, download the local agent's export file from the web editor.

In the visual editor interface, click the three dots in the top right corner of your agent and select **Download agent .zip file** to download a `.zip` file containing your agent's configuration.

<img src="https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=89922197cb60c38a2f1e74d210eaef29" alt="" data-og-width="468" width="468" data-og-height="260" height="260" data-path="images/agent-builder/export-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=280&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=6db01e6c16c3816705ac3a3e12e7058c 280w, https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=560&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=3e94fc65d17bffa63c6c90219b429f50 560w, https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=840&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=e149d947ccb465cec113a4c2f20efdc1 840w, https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=1100&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=a0e3f5276f5a6fab90b59e44b611a603 1100w, https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=1650&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=1fd4420c9b0f4e04408f79fe44a27e24 1650w, https://mintcdn.com/writer/L16Zd2tduYwpqh6w/images/agent-builder/export-agent.png?w=2500&fit=max&auto=format&n=L16Zd2tduYwpqh6w&q=85&s=04e456c78c228ffce56687841de69b52 2500w" />

<Tip>If you don't see the import/export agent functionality in your local development environment, make sure you're running the latest version of Writer Framework. Run `pip install --upgrade writer` to get the latest version with all features.</Tip>

The export file includes all files in your local project, including a hidden `.wf` folder that contains your UI components and blueprints as internal JSON files. Don't include sensitive information in the exported file because it is visible in the cloud editor.

### Step 5: Import the local agent into your cloud project

Open the Agent Builder web editor in AI Studio and click the three dots in the top right corner of your agent. Then select **Import agent .zip file** to upload the local agent's export file.

A modal appears and asks you to confirm that you are overwriting your existing agent.

<img src="https://mintcdn.com/writer/D6F1U8ssbbBGA470/images/agent-builder/overwrite-agent.png?fit=max&auto=format&n=D6F1U8ssbbBGA470&q=85&s=9a20868e4eaba52adef471895c896984" alt="" data-og-width="1946" width="1946" data-og-height="640" height="640" data-path="images/agent-builder/overwrite-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/D6F1U8ssbbBGA470/images/agent-builder/overwrite-agent.png?w=280&fit=max&auto=format&n=D6F1U8ssbbBGA470&q=85&s=e3397608ac70817b5aff681084d90b32 280w, https://mintcdn.com/writer/D6F1U8ssbbBGA470/images/agent-builder/overwrite-agent.png?w=560&fit=max&auto=format&n=D6F1U8ssbbBGA470&q=85&s=51f5a4d1f437cbdf69ef533ab1d630dc 560w, https://mintcdn.com/writer/D6F1U8ssbbBGA470/images/agent-builder/overwrite-agent.png?w=840&fit=max&auto=format&n=D6F1U8ssbbBGA470&q=85&s=991c64fef70d459d932e7b5f344d4c5b 840w, https://mintcdn.com/writer/D6F1U8ssbbBGA470/images/agent-builder/overwrite-agent.png?w=1100&fit=max&auto=format&n=D6F1U8ssbbBGA470&q=85&s=c7d4de643a65fcf4223f8d3171e4df32 1100w, https://mintcdn.com/writer/D6F1U8ssbbBGA470/images/agent-builder/overwrite-agent.png?w=1650&fit=max&auto=format&n=D6F1U8ssbbBGA470&q=85&s=240d332f08b3754e307b02e652858a7e 1650w, https://mintcdn.com/writer/D6F1U8ssbbBGA470/images/agent-builder/overwrite-agent.png?w=2500&fit=max&auto=format&n=D6F1U8ssbbBGA470&q=85&s=a5470b37438a3caddd8dce0c6e118fd1 2500w" />

Check the box to acknowledge that you're replacing your existing agent and click **Import** to continue.

## Deploy your agent

After syncing your agent to the cloud, deploy it following the [standard cloud workflow](/agent-builder/quickstart#deploy-the-agent).

From the agent editor interface in Agent Builder, click **Configure deployment** in the top right corner of the Agent Builder interface. You can also access the deployment configuration by going to the [AI Studio homepage](https://app.writer.com/aistudio) and selecting the agent you created.

If the agent isn't deployed, you see a toggle bar that says **Draft**.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d5bb311eb3357a77ba67a5268a79b711" alt="" data-og-width="1280" width="1280" data-og-height="266" height="266" data-path="images/agent-builder/not-deployed.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=81fbd0401e689b9f764c3deb4eaae769 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=aa9351ab6eee77f041bae7926c231c16 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=edcebe62cdb6c3de4c0630789fc25dd4 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=c38132de7e6a8ae3f37002ceab6dd42c 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=773cedd074e71f6663243e2187cc3283 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/not-deployed.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bab6ed2f764bae8a1f102a49a1b2e2b1 2500w" />

To deploy the agent, toggle the bar. Writer deploys the agent to the Writer cloud, which takes a moment to complete.

When you deploy the agent, the toggle bar shows **Deployed**. It also shows a list of the teams in your organization, which you can use to grant access to the agent. You must select at least one team before you can view the URL for the deployed agent.

## Considerations for dual-environment development

* **Local-only libraries**: If you install Python packages locally that aren't listed in [Python libraries installed in Agent Builder](/agent-builder/python-libraries), your agent won't run in the cloud version of Agent Builder because those packages aren't available there.

* **Environment file visibility**: Your `.env` file is visible in plain text in the cloud editor when you sync your local project. Any file you add to your local project is included in the export file to the cloud. Before syncing, move your `.env` file to a different location or delete it to prevent it from showing in the cloud editor, and add your secrets to Vault.

* **Vault availability**: Vault is only available in the cloud version of Agent Builder. For local development, you must use environment variables. Structure your code to handle both scenarios gracefully.

* **Keep your local Writer Framework package up to date**: When you sync your agent to the cloud, the cloud version of Agent Builder uses the latest version of the Writer Framework package. If you're using a different version of the Writer Framework package in your local project, you might encounter errors when you sync to the cloud. To avoid this, keep your local Writer Framework package up to date by running the following command:

```bash  theme={null}
pip install --upgrade writer
```

### Handle environment variables and secrets

The following code shows an example of how to look for secrets in Vault first, then fall back to environment variables:

```python  theme={null}
import os

def get_secret(key, default=None):
    """Get a secret from Vault if available, otherwise from environment variables"""
    try:
        # Try to get from Vault first (cloud environment). The `vault` object is available in Python code blocks and in event handlers.
        return vault[key]
    except KeyError:
        # Fall back to environment variables (local development)
        return os.getenv(key, default)

# Usage example
api_key = get_secret("WRITER_API_KEY", "default_key")
database_url = get_secret("DATABASE_URL")
```

## Next steps

* Learn about [local development](/agent-builder/local-development) workflows
* Understand how to [deploy your agent](#deploy-your-agent) from the cloud
* Explore [custom Python code](/agent-builder/python-code) for advanced functionality

<feedback />


# Use tool calling in Agent Builder
Source: https://dev.writer.com/agent-builder/tool-calling

Add tool calling to Agent Builder blueprints and chatbots. Connect Knowledge Graphs and define custom functions with JSON Schema.

<Note>
  This page describes how to use tool calling in Agent Builder. If you're looking for an overview of tool calling, see [Introduction to tool calling](/agent-builder/tool-calling-intro).
</Note>

Agent Builder provides two ways to use tool calling:

* In a chatbot conversation with the [**Chat reply** block](/blueprints/chatreply). Use this block to add tool calling to your chatbot conversation.
* In a blueprint with the [**Tool calling** block](/blueprints/toolcalling). Use this block to add tool calling to your blueprint outside of a chatbot conversation.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=8210f07c636bcd842fab8a6a31e905dd" alt="Tool calling block example showing a tool calling block connected to a Knowledge Graph and a function" data-og-width="2850" width="2850" data-og-height="1474" height="1474" data-path="images/agent-builder/tool-calling-block-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3773a683a2da821b78b969664f1f496f 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=33e268b579da79a4b088ae4f25bc568d 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=089f200264aa6513b091bbe4d1a9d553 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f20f67014f413d0a35d9310d02e0dd55 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=5cd5dbb18dc2c3cd460508d87ecbb389 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=085c9de29b9c6d8993217f56c3616572 2500w" />

Both blocks allow you to either connect to Knowledge Graphs or define the functions you want to provide to the model as [JSON Schema](https://json-schema.org/) objects. Then, when the model decides to use a tool, it either queries the Knowledge Graphs or sends the call to your blueprint, which executes the tool and sends the results back to the model.

## Add tool calling to your blueprint

To add tool calling to your blueprint, you need to:

1. [Add the **Tool calling** block to your blueprint](#add-the-tool-calling-block)
2. [Write a prompt that explains what the tool calling block is trying to accomplish](#write-a-prompt)
3. [Define the tools you want to provide to the model](#define-your-tools)
4. [Connect the tool calling block to the blocks that execute the tools](#connect-the-tool-calling-connectors-to-the-blocks-that-execute-the-tools)
5. [Add a **Return value** block to the end of the tool calling block](#add-a-return-value-block)

### Add the tool calling block

Add either the [**Tool calling** block](/blueprints/toolcalling) to your blueprint or the [**Chat reply** block](/blueprints/chatreply) to your chatbot conversation.

### Write a prompt

The prompt you write for the tool calling block in the **Prompt** field guides the model's behavior and decision making. It should explain what the tool calling block is trying to accomplish and what tools are available to use.

### Define your tools

Define the tools you want to provide to the **Tool calling** block, so that it knows what tools are available to use.

To add a new tool, click the **Add tool+** button in the **Tool calling** block's configuration menu.

In the **Add tool** modal that appears, select the **Tool type** from the dropdown, either:

* **Function**: A function that the model can call
* **Knowledge Graph**: A Knowledge Graph that the model can query

<Tabs>
  <Tab title="Function">
    If you're using a function, enter the function name and definition. See [tool definition](#tool-definition) for more details about how to define the function.
    <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=13a33c67238f7eb1ac80ddd29476d699" alt="" data-og-width="1846" width="1846" data-og-height="800" height="800" data-path="images/agent-builder/add-function-tool-calling.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b54f0a8f05551fae83447f715cee6230 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=2fa5c57ba9ab776b735031f4a87c0438 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=9ffb98f8f212775b186b5ce8a0ab1ccc 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a9894b9e75ef29e2d9c62a13ba47477f 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=52b59748d5d3d93c70525f770c121683 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=8149db43b94962e05652c3f7819d8539 2500w" />
  </Tab>

  <Tab title="Knowledge Graph">
    If you're using a Knowledge Graph, select the Knowledge Graph(s) you want to use from the dropdown of available Knowledge Graphs.
    <img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5d140ef33d204a34445d55836a02f8fc" alt="" data-og-width="1924" width="1924" data-og-height="922" height="922" data-path="images/agent-builder/add-kg-tool-calling.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=0aa8c6f45f3a923f9d78c7355b88668a 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=73e609e47a0502e614ed1a5291acb34f 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=47e92a6094b8a2713b6daaae58141ee3 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a5487d848229ea5867e2fbab98d0496b 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a5d8d9421c7b53bc0a62934fa12e5dd1 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f48d30c41aeb58c81a0521267830ec5f 2500w" />
  </Tab>
</Tabs>

<Note>
  If you are using the Knowledge Graph tool, you only need to select which Knowledge Graphs you want to use. You do not need to define the tool or connect it to the blocks that execute the tools as described below. The following steps are only for the Function tool type.
</Note>

#### Tool definition

The tool definition for a `Function` tool follows the [JSON Schema](https://json-schema.org/) format and has the following structure:

| Parameter               | Type   | Description                                                                                                                      |
| ----------------------- | ------ | -------------------------------------------------------------------------------------------------------------------------------- |
| `name`                  | string | The name of the tool                                                                                                             |
| `description`           | string | A description of what the tool does and when the model should use it                                                             |
| `parameters`            | object | An object containing the tool's input parameters                                                                                 |
| `parameters.type`       | string | The type of the parameter, which is `object` for a JSON schema                                                                   |
| `parameters.properties` | object | An object containing the tool's parameters in the form of a [JSON schema](https://json-schema.org/). See below for more details. |
| `parameters.required`   | array  | An array of the tool's required parameters                                                                                       |

#### Example tool definition

Below is an example of a tool definition that gets the details of a package's shipping status. It takes a tracking number and a carrier name as input parameters and returns the shipping status of the package.

```json  theme={null}
{
  "name": "check_shipping_status",
  "description": "Gets real-time shipping and tracking information for a package",
  "parameters": {
    "type": "object",
    "properties": {
      "tracking_number": {
        "type": "string",
        "description": "The shipping carrier's tracking number"
      },
      "carrier": {
        "type": "string",
        "enum": ["fedex", "ups", "usps", "dhl"],
        "description": "Shipping carrier name"
      }
    },
    "required": ["tracking_number", "carrier"]
  }
}
```

### Connect the tool calling connectors to the blocks that execute the tools

When you define a `Function` tool in the block's configuration, it adds a connection point, shown as a purple circle, to the block. This allows you to connect it to another block or chain of blocks that perform the tool's work.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=8210f07c636bcd842fab8a6a31e905dd" alt="" data-og-width="2850" width="2850" data-og-height="1474" height="1474" data-path="images/agent-builder/tool-calling-block-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3773a683a2da821b78b969664f1f496f 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=33e268b579da79a4b088ae4f25bc568d 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=089f200264aa6513b091bbe4d1a9d553 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f20f67014f413d0a35d9310d02e0dd55 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=5cd5dbb18dc2c3cd460508d87ecbb389 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=085c9de29b9c6d8993217f56c3616572 2500w" />

The example above shows the following setup for a tool that, among other functions, can check the status of a package:

<Steps>
  <Step>
    Create an **HTTP Request** block that calls a shipping status API. Access the arguments to the tool call by the names you provided in the tool definition; for example, `@{tracking_number}` and `@{carrier}`.
  </Step>

  <Step>
    Add a **Return value** block to the end of the **HTTP Request** block to send the result back to the model.
  </Step>

  <Step>
    Provide a [tool definition](#example-tool-definition) to the **Tool calling** block that indicates there's a tool that can check the status of a package and it needs the tracking number and carrier name as input parameters.
  </Step>

  <Step>
    Connect the **HTTP Request** block to the **Tool calling** block at the `check_shipping_status` connection point.
  </Step>
</Steps>

When the model decides to use the tool, it sends the tool call to the **HTTP Request** block, which executes the tool. The **HTTP Request** block runs and passes the result to the **Return value** block, which sends the results back to the model

<Tip>
  Every `Function` tool call needs a **Return value** block at the end that sends the results back to the model.
</Tip>

When the **Tool calling** block completes all tool calls and integrates the results into the response, it moves to the next block in the blueprint that's connected to the `Success` transition. The `@{result}` variable is available in the next block with the tool calling block's final output.

## View tool calls logs

When a Tool Calling block executes, it provides a list of thoughts and actions that it took to complete the task. You can observe these in the logs of the blueprint.

Expand the **Logs** section at the bottom of the blueprint. Find the **Tool calling** log and click the **Trace** button to see the full trace of the tool calls.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-logs.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=76f3f2111c2d42ce6b29fde2b44c0edd" alt="" data-og-width="3358" width="3358" data-og-height="250" height="250" data-path="images/agent-builder/tool-calling-logs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-logs.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=ba27cf48769bbefc9d4e8fc64ad81d18 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-logs.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=1a56cf972c755d9f09606a7bbcb1785f 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-logs.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=46efc933f562d97944b17ae177eb0f16 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-logs.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=90d3439cb3a6aa13f54902e634625a1f 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-logs.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=89e26578aa8eec6fee2d0354d8d3daee 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-logs.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=840dc87fd464566b590879448e6ee595 2500w" />

The trace shows the series of thoughts, actions, and tool calls that the model made to complete the task.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-trace-example.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=03b605bb36685cedd60e8569f7c2157a" alt="" data-og-width="2664" width="2664" data-og-height="476" height="476" data-path="images/agent-builder/tool-calling-trace-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-trace-example.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=a39c84efe7328ffe7d6335ee82b0c79c 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-trace-example.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f9d68c6ee5c0ed870c48f63f4edd93ad 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-trace-example.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3507a6b86e9483e83ee90c308759c2e2 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-trace-example.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=2fbf1a7b46ace20973fb700f0e4d2a3d 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-trace-example.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b2b11cb64b9d461f232456549a82a051 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-trace-example.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=0d6a3bd4b295bba7327d87744b6115d4 2500w" />

<feedback />


# Understand tool calling
Source: https://dev.writer.com/agent-builder/tool-calling-intro

Learn how tool calling enables dynamic agent workflows. Understand ReAct patterns and why tool calling matters for intelligent agent orchestration.

Tool calling allows you to call external tools that you define and integrate them into your agent's responses.

Instead of requiring you to build static, hardcoded workflows, tool calling enables you to build agents that dynamically choose and orchestrate the right combination of tools based on the specific context of each request.

This document describes why tool calling matters and how it works behind the scenes.

Jump to [tool calling in Agent Builder](/agent-builder/tool-calling) to learn how to use tool calling in Agent Builder.

## Why tool calling matters

* **Traditional approach limitations**: With pre-defined API workflows, you'd need to hardcode every possible scenario: "If customer mentions shipping, call shipping API. If they mention returns, call returns API." This creates rigid, brittle systems that can't handle the complexity of real customer inquiries.

* **Tool calling's dynamic intelligence**:
  The model acts as an intelligent orchestrator, analyzing the customer's specific problem and dynamically selecting the most relevant tools. It handles parameter extraction, API sequencing, and data synthesis automatically.

* **Enables advanced reasoning patterns**: Tool calling naturally supports [ReAct (Reasoning and Acting)](https://klu.ai/glossary/react-agent-model) workflows, where the model can think through problems step-by-step, take actions by calling tools, observe the results, and then reason about what to do next.

### Customer service example

A customer writes to your support team:

> "I ordered two items last week but only received one and the item I got isn't working."

Your Agent Builder agent takes a customer's request and uses tool calling to dynamically select the most relevant tools to use. Available tools might include:

* `get_order_details(order_id)`
* `check_shipping_status(tracking_number)`
* `initiate_return_request(order_id, reason)`
* `check_inventory_status(product_id)`
* `create_support_ticket(customer_id, issue_type)`
* Support, policies, and other knowledge from your connected Knowledge Graphs

Given the tools provided to the model, it can review the user's request and automatically:

1. Extract the customer ID from context
2. Call `get_order_details()` to understand what was ordered
3. Call `check_shipping_status()` for the missing item
4. Look up return policies from your connected support Knowledge Graph
5. Synthesize all this information into a coherent, helpful response

## How tool calling works behind the scenes

While the AI model intelligently decides which tools to use and what parameters to call them with, the model doesn't actually execute the tools itself. Instead, there's a two-step handoff process:

* **The AI decides what to do**: The model analyzes the customer's request and says "I need to call `get_order_details` with order ID #12345"
* **Your system does the actual work**: Your blueprint receives this instruction, makes the real API call to your order database, and sends the results back to the AI

The AI then uses the results of the tool calls to continue reasoning and provide the final response.

### Project manager analogy

Think of it like a project manager coordinating subcontractors: The AI project manager understands the entire project scope and knows exactly which specialists to engage and what work needs to be done. When a customer has an issue, the AI says "I need the shipping contractor to check tracking #12345, then the inventory contractor to verify stock levels." But the AI doesn't do the actual work; each subcontractor (your systems) has their own expertise and tools to execute their piece, then reports back to the project manager who coordinates everything into the final deliverable.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-architecture.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=eda1439a71ace16caaaa361712101869" alt="Tool calling example with contractor analogy" data-og-width="3297" width="3297" data-og-height="1568" height="1568" data-path="images/agent-builder/tool-calling-architecture.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-architecture.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=339ffbd63c0fdb3b355726f0742069d7 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-architecture.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e69fa1a0821ebf479492ecd639e3b69d 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-architecture.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f987f3daf48ff182b65ca1103174c8b8 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-architecture.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f874f9103958d7194b0f9aa23fc3f934 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-architecture.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=166d65dfa8724d588f78cf5ac89c047d 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-architecture.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=9baa009a54847bbe87893283ec5281fb 2500w" />

This architecture provides several benefits:

* **Security and control**: You maintain full control over your data and system access
* **Flexibility**: You can easily add new tools or modify existing ones without changing the AI
* **Reliability**: Each system component can be optimized and maintained independently
* **Compliance**: Sensitive operations remain within your controlled infrastructure

## Next steps

Now that you understand why tool calling matters and how it works behind the scenes, [learn how to use tool calling in Agent Builder](/agent-builder/tool-calling).

<feedback />


# Tool calling with external APIs
Source: https://dev.writer.com/agent-builder/tool-calling-tutorial



This tutorial walks through building an agent that can intelligently call external APIs to get information and make decisions based on the information. It takes the name of a city and calls several tools and APIs to determine if it's a good day to view the sunset in that location.

If you are unfamiliar with tool calling, you might want to read the [Tool calling introduction](/agent-builder/tool-calling-intro) first to get a sense of how it works.

<CardGroup>
  <Card title="Interface">
        <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d4aef7ac42aeb83f5a8501d8065cc9ee" alt="A preview of the agent interface showing a text input for city name and a submit button" data-og-width="3456" width="3456" data-og-height="1806" height="1806" data-path="images/agent-builder/tool-calling-tutorial/tool-calling-preview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7cc9251ddb35c40a0131b6fca0331388 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=5bf61dc17868f5f73996258637bf17d5 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=37ac613ac58c6859ebc8451489477d1f 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e4f0db2710fc8da9b495437b3f889f4e 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=257db0db9eee59ef973dd0f0056d1aed 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c6926cfe9e7ba57207dc05c8cac3f010 2500w" />
  </Card>

  <Card title="Blueprint">
        <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7ea6f52ba3f6a26cdb0fcff07d5404bc" alt="The complete blueprint showing the workflow with API calls and logic blocks" data-og-width="3456" width="3456" data-og-height="1806" height="1806" data-path="images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b10a295f72b8dd93317d5acbbb706676 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=9f76f0636739ea24946c677e10ba4749 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3a978254b56e8cdc7b2b910b0d0e6129 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=febffef411dac0c2183cd7120c0348d5 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=129b749f513561cd0c8ede4e6b26f15a 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=56501e8b880f4137459e7ff00fd03c7b 2500w" />
  </Card>
</CardGroup>

While this tutorial uses free public APIs to demonstrate tool calling fundamentals, the tool calling patterns are applicable to real-world enterprise scenarios. You can use these same techniques to connect agents with your CRM, databases, internal APIs, and other business systems.

## Agent overview

This agent connects with two free, publicly available APIs:

* [Open-meteo](https://open-meteo.com/en/docs) for weather information
* [Sunrise sunset](https://sunrise-sunset.org/api) for sunrise and sunset times

The agent uses tool calling to get the weather information and sunrise and sunset times in a particular city. It then uses the information to determine if it's a good day to view the sunset, and if so, suggests places to view it.

## Clear the demo agent

Before you start building, clear the demo agent that comes with every new Agent Builder project.

See instructions for [clearing the demo agent in the Agent Builder Quickstart](/agent-builder/quickstart#clear-the-demo-agent).

## Build the UI

The agent has a plain UI with a text input for the city, a button to submit the request, a message block to display a loading message, and a text block to display the results.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-ui.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=959565e556fdfe8f91af1f6703fc0986" alt="" data-og-width="3454" width="3454" data-og-height="1796" height="1796" data-path="images/agent-builder/tool-calling-tutorial/tool-calling-ui.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-ui.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=2f4aec32977e896fec079c0b1bd995d9 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-ui.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=dfeb57d775697d191442218990d7548a 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-ui.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=52affffdb4feb39468f0f274aafd16d1 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-ui.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d4c9dd0f519a6812880314a20de3e9fe 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-ui.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c3759ab2c9236d8f7d4b71c7d0c8a982 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-ui.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=9ccd5686fb4efe5efb74730ab303608b 2500w" />

<Steps>
  <Step title="Add a text input">
    Drag a **Text Input** block to the canvas. In the block's configuration menu, update the following:

    * **Label**: `City`
    * **Link variable** under **Binding**: `city`

    This updates the label in the UI to `City` and binds whatever the user types in the text input to the `city` state variable.
  </Step>

  <Step title="Add a button to submit the request">
    Drag a **Button** block to the canvas. In the block's configuration menu, update the following:

    * **Label**: `Submit`
  </Step>

  <Step title="Add a message block to display a loading message">
    Drag a **Message** block to the canvas. In the block's configuration menu, update the following:

    * **Message**: `@{status}`

    This displays the `status` state variable in the UI if it's set. If there's no status, the block isn't visible.
  </Step>

  <Step title="Add a text area to display the result">
    Drag a **Text** block to the canvas. In the block's configuration menu, update the following:

    * **Text**: `@{final_result}`

    This displays the `final_result` state variable in the UI if it's set. If there's no `final_result`, the block isn't visible.
  </Step>
</Steps>

## Build the blueprint

The logic of the blueprint is as follows:

1. The UI Trigger block triggers the agent when the user clicks the button.
2. The set state block adds a loading status to the UI.
3. The tool calling block calls the available tools to get the current date and time, the weather information, and sunrise and sunset times. From the provided information, it makes a determination about whether it's a good day to view the sunset.
4. Once the tool calling block completes, the agent updates the state with the results and clears the loading message.

<Note>
  Tool calling is a powerful feature that combines the model's knowledge with real-time data and external APIs. The model can make intelligent decisions by analyzing the data it receives and drawing on its own knowledge to interpret results. For example, you don't need to manually parse timestamps or format weather data when you get a response from an API. You can provide the raw API responses and the model extracts and uses the relevant information appropriately.
</Note>

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7ea6f52ba3f6a26cdb0fcff07d5404bc" alt="" data-og-width="3456" width="3456" data-og-height="1806" height="1806" data-path="images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b10a295f72b8dd93317d5acbbb706676 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=9f76f0636739ea24946c677e10ba4749 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3a978254b56e8cdc7b2b910b0d0e6129 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=febffef411dac0c2183cd7120c0348d5 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=129b749f513561cd0c8ede4e6b26f15a 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=56501e8b880f4137459e7ff00fd03c7b 2500w" />

<Steps>
  <Step title="Add a UI Trigger block">
    Drag a **UI Trigger** block to the canvas. In the block's configuration menu, update the following:

    * **Component Id**: Select the **Submit** button from the dropdown of available components.
    * **Trigger**: `wf-click`

    This triggers the blueprint when the user clicks the Submit button.
  </Step>

  <Step title="Add a set state block to add a loading status to the UI">
    Drag a **Set State** block to the canvas. In the block's configuration menu, update the following:

    * **Link variable**: `status`
    * **Value**: `%Loading...`

    This sets the `status` state variable to `Loading...` with an animated spinner when the blueprint starts.
  </Step>

  <Step title="Add a tool calling block and set the prompt">
    Drag a **Tool Calling** block to the canvas. In the block's configuration menu, update the following:

    * **Prompt**:

    ```
    You are a travel assistant helping someone in @{city} find optimal sunset viewing opportunities.

    ## Available Tools
    - `get_weather` - Get weather conditions for today
    - `get_time` - Get current time as a UTC timestamp
    - `get_sunset_time` - Get sunrise/sunset times in UTC

    ## Decision Logic
    1. **Check timing**: Use `get_time` and `get_sunset_time` to compare current time with today's sunset
       - **CRITICAL**: Both times are returned in UTC. You MUST convert both to @{city}'s local timezone before comparing
       - **Time comparison steps**:
         a. Get current UTC time using `get_time`
         b. Get sunset UTC time using `get_sunset_time`
         c. Convert BOTH times to @{city}'s local timezone
         d. Compare the local times using 24-hour format
       - **If local current time > local sunset time**: Sunset has passed
       - **If local current time < local sunset time**: Sunset is upcoming
       - **Example**: If current UTC is 23:30 and sunset UTC is 22:45, convert both to local time first. If local current time is 19:30 and local sunset is 18:45, then sunset has passed.

    2. **Assess weather conditions**: Use `get_weather` to evaluate:
       - Temperature (comfort for outdoor viewing)
       - Cloud coverage (visibility of sun)
       - Wind speed (viewing comfort)
       - Precipitation chance (weather suitability)

    3. **Make recommendation**: If conditions are favorable, suggest 3 outdoor viewing locations in @{city}

    ## Tool Usage Notes
    - Both `get_weather` and `get_sunset_time` require latitude/longitude coordinates for @{city}
    - Use your knowledge to provide accurate coordinates
    - Remember to account for @{city}'s timezone when interpreting UTC timestamps

    ## Required Output Format
    Provide a structured response including:
    - **If sunset has passed**: Begin by stating "Sunset has already passed for today in @{city}" with the prompt to ask again tomorrow closer to sunset. Otherwise, ignore this section.
    - Current date/time in @{city}'s local timezone, in a user-friendly format
    - Sunset time in @{city}'s local timezone
    - Weather factor analysis with "Good" or "Bad" rating and the values for each factor:
      - Temperature
      - Cloud coverage  
      - Wind speed
      - Precipitation chance
    - Overall viewing recommendation
    - If favorable: 3 recommended locations with brief explanations

    ## Important Reminder
    Always convert UTC timestamps to the local timezone of @{city} before making any time comparisons. Never compare UTC times directly without conversion.
    ```

    This prompt instructs the agent to use the available tools to get the weather information and sunrise and sunset times. It then makes a determination about whether it's a good day to view the sunset. In the next steps, you'll define the tools and add the logic to call them.

    <Tip>
      While AI models are highly intelligent and can reason about complex tasks, a well-structured prompt is essential for effective tool calling. The prompt serves as a blueprint that clearly defines what tools are available, guides the model through the decision-making workflow, and specifies the expected output format. Without this guidance, the model might miss important steps, use tools inefficiently, or produce results that don't match your requirements. A detailed prompt ensures consistent, reliable performance across different inputs and scenarios. See [Prompting strategies](/home/prompting) for more suggestions about writing prompts.
    </Tip>
  </Step>

  <Step title="Define a tool to get the current date and time">
    Within the **Tool calling** block, click **Add tool+** to define a new tool for the agent to use. Define the tool as follows:

    * **Tool type**: `function`
    * **Tool name**: `get_time`
    * **Function tool definition**:

    ```json  theme={null}
    {
      "description": "Gets the current time as a UTC timestamp",
      "parameters": {},
      "type": "function"
    }
    ```

    This defines a tool that the agent can use to get the current date and time in UTC. It doesn't require any parameters, so the parameters field is empty. The description field provides a brief description of what the tool does.
  </Step>

  <Step title="Add a Python block to provide the current date and time in UTC">
    This example uses a Python block to get the current date and time in UTC using Python's `datetime` library.

    Drag a **Python** block to the canvas. In the block's configuration menu, update the following:

    * **Code**:

    ```python  theme={null}
    from datetime import datetime, timezone

    utc_datetime = datetime.now(timezone.utc)
    set_output(utc_datetime)
    ```

    <Warning>
      To return a value from a Python block, you must use the `set_output` function.
    </Warning>

    This returns the current date and time in UTC.
  </Step>

  <Step title="Add a return value block to return the date and time to the tool calling block">
    If you want a tool to return a value to the Tool Calling block, you need to add a **Return Value** block at the end of the tool's logic.

    Drag a **Return Value** block to the canvas. In the block's configuration menu, update the following:

    * **Value**: `@{result}`

    This returns the result of the Python block to the Tool Calling block.
  </Step>

  <Step title="Define a tool to get the weather information">
    Within the **Tool calling** block, click **Add tool+** to define a new tool for the agent to use. Define the tool as follows:

    * **Tool type**: `function`
    * **Tool name**: `get_weather`
    * **Function tool definition**:

    ```json  theme={null}
    {
      "description": "Gets information about the weather for day. This includes cloud coverage, precipitation change, wind gusts, and temperature. The return value is a series of arrays for each of those variables, with one value for each hour. The arrays all start at GMT+0 for the first time.",
      "parameters": {
        "lat": {
          "type": "string",
          "description": "The latitude to request weather data for"
        },
        "long": {
          "type": "string",
          "description": "The longitude to request weather data for"
        }
      },
      "type": "function"
    }
    ```

    This defines a tool that the agent can use to get the weather information for a given latitude and longitude. It instructs the agent to provide the latitude and longitude in the parameters, because the API requires latitude and longitude.
  </Step>

  <Step title="Add an HTTP Request block to call the Open-meteo API">
    Now you need to add a block to call the Open-meteo API.

    Drag an **HTTP Request** block to the canvas. In the block's configuration menu, update the following:

    * **URL**: `https://api.open-meteo.com/v1/forecast?latitude=@{lat}&longitude=@{long}&hourly=temperature_2m,cloud_cover,precipitation_probability,precipitation,wind_speed_10m&forecast_days=1`

    This is the URL for the Open-meteo API. It includes the `@{lat}` and `@{long}` variables, which you defined as required parameters in the tool definition. The agent provides the latitude and longitude when it calls the tool.

    For more information about the Open-meteo API and the request this is making, see the [Open-meteo documentation](https://open-meteo.com/en/docs).
  </Step>

  <Step title="Add a return value block to return the weather information to the tool calling block">
    The HTTP Request block returns the weather information in JSON format. You need to add a **Return Value** block to return the weather information to the Tool Calling block.

    Drag a **Return Value** block to the canvas. In the block's configuration menu, update the following:

    * **Value**: `@{result}`

    This returns the result of the HTTP Request block to the Tool Calling block. The agent will be able to parse and use the JSON data that the HTTP Request block returns.
  </Step>

  <Step title="Define a tool to get the sunrise and sunset times">
    Within the **Tool calling** block, click **Add tool+** to define a new tool for the agent to use. Define the tool as follows:

    * **Tool type**: `function`
    * **Tool name**: `get_sunset_time`
    * **Function tool definition**:

    ```json  theme={null}
    {
      "description": "Gets info for about the sunset and sunrise times at a given location based on latitude and longitude",
      "parameters": {
        "lat": {
          "type": "string",
          "description": "The latitude to request weather data for"
        },
        "long": {
          "type": "string",
          "description": "The longitude to request weather data for"
        }
      },
      "type": "function"
    }
    ```

    This defines a tool that the agent can use to get the sunrise and sunset times for a given latitude and longitude. It instructs the agent to provide the latitude and longitude in the parameters, because the API requires latitude and longitude.
  </Step>

  <Step title="Add an HTTP Request block to call the Sunrise Sunset API">
    Now you need to add a block to call the Sunrise Sunset API.

    Drag an **HTTP Request** block to the canvas. In the block's configuration menu, update the following:

    * **URL**: `https://api.sunrise-sunset.org/json?lat=@{lat}&lng=@{long}&tzid=UTC&date=today`

    This is the URL for the Sunrise Sunset API. It includes the `@{lat}` and `@{long}` variables, which you defined as required parameters in the tool definition. The agent provides the latitude and longitude when it calls the tool.

    For more information about the Sunrise Sunset API and the request this is making, see the [Sunrise Sunset documentation](https://sunrise-sunset.org/api).
  </Step>

  <Step title="Add a return value block to return the sunrise and sunset times to the tool calling block">
    The HTTP Request block returns the sunrise and sunset times in JSON format. You need to add a **Return Value** block to return the sunrise and sunset times to the Tool Calling block.

    Drag a **Return Value** block to the canvas. In the block's configuration menu, update the following:

    * **Value**: `@{result}`

    This returns the result of the HTTP Request block to the Tool Calling block. The agent will be able to parse and use the JSON data that the HTTP Request block returns.
  </Step>

  <Step title="Add a set state block to display the results">
    Now that you've defined the tools for the Tool Calling block and added the logic to call them, the agent can take the prompt and provided tools and make a determination about whether it's a good day to view the sunset.

    Once the Tool Calling block completes, the agent should display the final results in the UI. You can display the final results in the UI by setting the `final_result` state variable, which will be displayed in the UI's **Text** block.

    Drag a **Set State** block to the canvas. In the block's configuration menu, update the following:

    * **Link variable**: `final_result`
    * **Value**: `%@{result}`

    This sets the `final_result` state variable to the result of the Tool Calling block.
  </Step>

  <Step title="Add a set state block to clear the loading message">
    Finally, you need to add a block to clear the loading message when the Tool Calling block completes.

    Drag a **Set State** block to the canvas. In the block's configuration menu, update the following:

    * **Link variable**: `status`
    * **Value**: Leave empty to clear the state variable

    This clears the `status` state variable when the Tool Calling block completes.
  </Step>
</Steps>

## Preview the agent

Navigate to the **Preview** tab to test the agent.

Enter a city and click the Submit button to see the agent's response. You should first see the loading message, then the final results when the Tool Calling block completes.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d4aef7ac42aeb83f5a8501d8065cc9ee" alt="" data-og-width="3456" width="3456" data-og-height="1806" height="1806" data-path="images/agent-builder/tool-calling-tutorial/tool-calling-preview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7cc9251ddb35c40a0131b6fca0331388 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=5bf61dc17868f5f73996258637bf17d5 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=37ac613ac58c6859ebc8451489477d1f 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e4f0db2710fc8da9b495437b3f889f4e 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=257db0db9eee59ef973dd0f0056d1aed 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-preview.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c6926cfe9e7ba57207dc05c8cac3f010 2500w" />

You can see the agent's progress and reasoning in the **Logs** tab.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-logs.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=a6f12de967657cfc738471010cf7c710" alt="" data-og-width="3456" width="3456" data-og-height="1814" height="1814" data-path="images/agent-builder/tool-calling-tutorial/tool-calling-logs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-logs.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=ca60c4a4bd2fd000b23f4c82fa85328d 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-logs.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=10febde56bfe881b8ccdbe9fd37c3bd4 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-logs.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c39dfe65a80e39fc06c2ce75821bc6f0 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-logs.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=8f00c215e34035dc060e481778ab560f 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-logs.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=dadb32ae98ac0ad47d52cc3186e63442 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-logs.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=18a300324f4a309fee3fab0a1730feb7 2500w" />

## Next steps

This tutorial demonstrates the basics of tool calling with external APIs. To continue improving on this agent, you might consider adding a **Structured Output** block after the Tool Calling block to ensure the agent returns the results in the correct format. You could also add more components to the UI to display the results in a more user-friendly way, such as a [**Metric**](/components/metric) block to display the weather conditions, a [**Google Maps**](/components/googlemaps) block to display the recommended locations, or different **Text** blocks to display the different sections of the results.

Next, you might want to learn more about tool calling:

* [Learn more about tool calling](/agent-builder/tool-calling)
* [Learn more about the Tool Calling block](/blueprints/toolcalling)
* [Learn more about the HTTP Request block](/blueprints/httprequest)

<feedback />


# Troubleshoot common issues
Source: https://dev.writer.com/agent-builder/troubleshooting



This page provides troubleshooting suggestions for debugging and observing your agents as you build them.

* [Track an agent's progress through a blueprint](#view-progress-through-a-blueprint)
* [View error and info logs](#view-error-and-info-logs)
* [Add additional log messages](#add-additional-logs)
* [View traces from a block's execution](#view-traces)
* [Inspect an agent's state](#inspect-agent-state)
* [Observe agent usage and performance](#observe-agent-usage-and-performance)

## View progress through a blueprint

Some blocks such as PDF parsing and text generation can take a while to run. As an agent runs, you can view its progress through the blueprint by navigating to the **Blueprint** tab.

The color of a blueprint block's border describes the status of its execution.

* **Green**: The block completed successfully
* **Animated blue**: The block is currently running
* **Red**: The block failed
* **No border**: The block hasn't run yet

The following image shows a blueprint with a PDF parsing block that's currently running. The previous blocks have completed successfully and the following blocks haven't run yet.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f4213ab4084c828a555723aa85a84a49" alt="Blueprint tab" data-og-width="3456" width="3456" data-og-height="1796" height="1796" data-path="images/agent-builder/parse-pdf-tutorial/blueprint-progress.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=0ba61d4c42c8d61b2a8d658765ed3c5f 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=b2517593f52e6caa8c88ac9d02e96d05 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=db5f2d3d44a7e87d2bc29245deb0bee2 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bfd12e807fa0f820291a108bca526a43 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e77294494ac8731601c76d0dfd572524 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/blueprint-progress.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3c9dbd995b7ab600114ffff490b78fdd 2500w" />

You can also see the progress of the agent in the **Log** status bar. Learn more below.

## View error and info logs

If there are any errors or messages as your agent runs, you'll see an indication in the **Log** bar in the bottom right corner of the page.

You can click the **Log** bar to expand it and see more details.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c7d1e33a828f416ed50b75001d1b126b" alt="Log bar" data-og-width="470" width="470" data-og-height="138" height="138" data-path="images/agent-builder/log-bar.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=3fd622c89a838fb86adfe4337a5a64c5 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e4bcf530786f0f7b37f4185d1ff6a11f 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4a281b2872c90f6d796702abf9e6f6f2 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e443f71b0bcdb0e66702774f0a18e94f 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=77207d1acd2eb82a7e0e06e7a68c82f6 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=aabe9739cee4cc7291c4640fd22bc218 2500w" />

### Add additional logs with Log Message blocks

You can add additional custom [**Log message** blocks](/blueprints/logmessage) to the agent for debugging purposes. Log messages are helpful to understand the flow of the agent and the value of state and other variables at a given point in the execution.

To add a log message, add a **Log message** block to the canvas. In the block's configuration panel, update the following fields:

* **Type**: `info` or `error`
* **Message**: The message to log

Below is an example of a log message block during a file parsing process. It logs the file ID before beginning the parsing process, to help you debug if the file isn't found or isn't parsed correctly.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-message-block.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=50257a987c9ee9f644934ad7d23154b9" alt="Log message block" data-og-width="3456" width="3456" data-og-height="1812" height="1812" data-path="images/agent-builder/parse-pdf-tutorial/log-message-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-message-block.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e7bbe87f37b31d885256d93ec66d2ccd 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-message-block.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bdfad5ebe828513e71e0b54a29ac6658 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-message-block.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=68c7cfe2072af78073429cd7da20d7c1 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-message-block.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=42f65c0f993982ad6500db79ad1f7d57 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-message-block.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=e5292ce9dd9672e3f4a20fee819ce747 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-message-block.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=7707883e188b69fc1a4b491758f48726 2500w" />

When the block runs, you'll see the log message in the **Logs** bar at the bottom of the page.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-example.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=d30358a416bcd1cd16f52048927c2b31" alt="Log message in logs" data-og-width="1206" width="1206" data-og-height="214" height="214" data-path="images/agent-builder/parse-pdf-tutorial/log-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-example.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3c86a7252c068a49086800341cb31538 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-example.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f8815c14b327d2cf36f07cc7c93a24a2 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-example.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=554878fdc9f95fe8eabbc101fd2d2d51 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-example.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=1221f0fead163a3e76726815ae7adf67 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-example.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3c329fec3443ff119337573f2832c853 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/parse-pdf-tutorial/log-example.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f3e67d125d5cb28946051275e47221f6 2500w" />

### Add additional logs with Python code

You can use python `print` statements and the globally available [`logger` object](https://docs.python.org/3/library/logging.html) to add additional logs to the agent.

```python  theme={null}
print("This is a log message that shows in logs as 'Captured stdout'")
logger.info("This is an info message that shows in logs under 'Captured logs'")
logger.warning("This is a warning message that shows in logs under 'Captured logs'")
logger.error("This is an error message that shows in logs under 'Captured logs'")
```

The following image shows an example of a Python block that logs messages via print statements and the `logger` object.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-block-with-logs.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=dc7322c27b3cafabe6f2d546e7e1322d" alt="Python block with logs" data-og-width="2126" width="2126" data-og-height="750" height="750" data-path="images/agent-builder/python-block-with-logs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-block-with-logs.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=84d9e63e2e2d9df16a1b8b48dad21f79 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-block-with-logs.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=f3fd8176654f9c3d1968bcfd15a4e31f 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-block-with-logs.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=bf5bb01a016490130f57d0cebe5e7ce4 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-block-with-logs.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3b10f3062d4d060da84e7446733cd60c 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-block-with-logs.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=2945ea00ee3b3e525d53bccd5bce1448 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-block-with-logs.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=20b11b40e370862f5b8772570854a232 2500w" />

When the block runs, the log messages appear in the **Logs** bar at the bottom of the page.

<img src="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-messages-in-logs.png?fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=14589da590433e2a7fa892af2ebed900" alt="Log messages in logs" data-og-width="3450" width="3450" data-og-height="840" height="840" data-path="images/agent-builder/python-messages-in-logs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-messages-in-logs.png?w=280&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=4a9dfad07f83ae080810d3d3e7cf63cc 280w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-messages-in-logs.png?w=560&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=87eb3fed5ef3149327c2f308388a26e3 560w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-messages-in-logs.png?w=840&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=07f12519d5c3f6a7159e481584a94451 840w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-messages-in-logs.png?w=1100&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=7920a43ea7002a760198d45f533589ca 1100w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-messages-in-logs.png?w=1650&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=3fb255f5c4257f47b597a2c70daa206f 1650w, https://mintcdn.com/writer/nTMyJEeQXE_UTdYX/images/agent-builder/python-messages-in-logs.png?w=2500&fit=max&auto=format&n=nTMyJEeQXE_UTdYX&q=85&s=52b199dc819f903175ab38482c97fdb0 2500w" />

## View traces

The log bar shows information about the agent's execution as it runs and after blocks complete. It includes the following:

* The block name
* The status of the block: success, error, or in progress
* A link to view a trace at that point in the execution
* How long the block took to run

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar-in-progress.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c92edcc12ef2a0dac28721b2a37fb51f" alt="Log bar with traces" data-og-width="3456" width="3456" data-og-height="784" height="784" data-path="images/agent-builder/log-bar-in-progress.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar-in-progress.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=54323b855ccd0466edffff32121dac4d 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar-in-progress.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=540c9530241a0b541b452f136203be32 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar-in-progress.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=143d4f66801ccb9be6632a894fe19397 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar-in-progress.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d55a5ed194baec7874a1daae61acf4a0 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar-in-progress.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=798111cab8d2d538cca1216c13d7bf20 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/log-bar-in-progress.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=772fa74f6f353f017e85eb079629f89d 2500w" />

The trace link opens a new tab with a detailed view of the agent's execution at that point in time. It contains:

* The value resulting from the block's execution, which is then added to the execution environment of the following block
* The return value, if the block has one
* The full execution environment at that point in time
* The call stack

Below is an example of a trace after a **File upload** block has completed.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/trace.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=ba18ca959d92dac335e3922125de09ed" alt="Trace of a file upload block" data-og-width="2684" width="2684" data-og-height="1420" height="1420" data-path="images/agent-builder/trace.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/trace.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=2ea62a84ca2321656ae3d00b3f774ba1 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/trace.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=fa340378a867c7568f42e89904d8bb7a 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/trace.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=eef15f18881445e10c881b78cd801db2 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/trace.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=12fbae381210f5eff0b8be8243a1dc15 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/trace.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b0172478a0cb1c54df59856672e6e6e9 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/trace.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=8c1b71194d9f85fcc6041d2c0a397f6b 2500w" />

## Inspect agent state

You can use the **State explorer** to view an agent's state variables and their values. This is helpful when you're debugging an agent or need to check the state at a given point in the execution.

To access the state explorer, click the **State explorer** icon in the top right corner of the page.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=dc9b3e4865094cbb8ab1c1b016b1393d" alt="State explorer" data-og-width="830" width="830" data-og-height="183" height="183" data-path="images/agent-builder/state-explorer-icon.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c879c37cc482564a6d147017903e4783 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3f059d1a8f0aef068d333aab62ac3eee 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=9fc574243187e6eddf1fbd838e21c0d8 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b6244e617a09a9b798cedf1d021f946a 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3a2844ff0e041c4880ddb3f7306038b4 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/state-explorer-icon.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f31a2f62a7a3b151be20e9c1901f1f42 2500w" />

## Observe agent usage and performance

You can view usage and performance metrics for your agent in the **Observability** tab. To get to this view, select the agent from the [AI Studio homepage](https://app.writer.com/ai-studio) and navigate to the **Observability** tab.

Here, you can view:

* Performance: Requests, errors, latency, and throughput
* Usage: Total requests, tokens, and cost, along with a geographic breakdown of requests
* Logs: Logs from individual requests

<feedback />


# Get your organization subscription details
Source: https://dev.writer.com/api-reference-legacy/billing/get-your-organization-subscription-details

get /billing/subscription

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# Detect If the content is AI generated
Source: https://dev.writer.com/api-reference-legacy/content/detect-if-the-content-is-ai-generated

post /content/organization/{organizationId}/detect

<Warning>
  This endpoint is deprecated. Use the [AI detection](/api-reference/tool-api/ai-detect) endpoint instead.
</Warning>


# null
Source: https://dev.writer.com/api-reference-legacy/content/post-contentorganization-team-check

post /content/organization/{organizationId}/team/{teamId}/check

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# null
Source: https://dev.writer.com/api-reference-legacy/content/post-contentorganization-team-correct

post /content/organization/{organizationId}/team/{teamId}/correct

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# null
Source: https://dev.writer.com/api-reference-legacy/cowrite/get-cowriteorganization-team-template

get /cowrite/organization/{organizationId}/team/{teamId}/template/{templateId}

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# null
Source: https://dev.writer.com/api-reference-legacy/cowrite/post-cowriteorganization-team-generate

post /cowrite/organization/{organizationId}/team/{teamId}/generate

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# Delete snippets
Source: https://dev.writer.com/api-reference-legacy/snippet/delete-snippets

delete /snippet/organization/{organizationId}/team/{teamId}

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# Find snippets
Source: https://dev.writer.com/api-reference-legacy/snippet/find-snippets

get /snippet/organization/{organizationId}/team/{teamId}

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# Update snippets
Source: https://dev.writer.com/api-reference-legacy/snippet/update-snippets

put /snippet/organization/{organizationId}/team/{teamId}

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# List your styleguide pages
Source: https://dev.writer.com/api-reference-legacy/styleguide/list-your-styleguide-pages

get /styleguide/page

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# Page details
Source: https://dev.writer.com/api-reference-legacy/styleguide/page-details

get /styleguide/page/{pageId}

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# Add terms
Source: https://dev.writer.com/api-reference-legacy/terminology/add-terms

post /terminology/organization/{organizationId}/team/{teamId}

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# Delete terms
Source: https://dev.writer.com/api-reference-legacy/terminology/delete-terms

delete /terminology/organization/{organizationId}/team/{teamId}

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# Find terms
Source: https://dev.writer.com/api-reference-legacy/terminology/find-terms

get /terminology/organization/{organizationId}/team/{teamId}

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# Update terms
Source: https://dev.writer.com/api-reference-legacy/terminology/update-terms

put /terminology/organization/{organizationId}/team/{teamId}

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# List users
Source: https://dev.writer.com/api-reference-legacy/user/list-users

get /user

<Warning>
  We're deprecating these API endpoints, so the AI Studio API key setup won't work. \[Contact support] ([https://support.writer.com/](https://support.writer.com/)) if you need them.
</Warning>


# Manage API keys
Source: https://dev.writer.com/api-reference/api-keys

Learn how to create, manage, and delete API keys.

This guide helps you create and manage API keys for the Writer API. To create and manage API keys, you must be logged in to [AI Studio](https://app.writer.com/aistudio).

## About API keys

The Writer API uses token authentication for API requests. API keys are used as tokens, which you pass in the `Authorization` header of your requests:

```
Authorization: Bearer <api-key>
```

### API agents and API keys

Writer API keys are attached to AI Studio API agents.

API permissions and scopes are set at the agent level. Within an API-based agent, you can create multiple API keys that share the permissions of the agent. To create keys with different permissions, create multiple API agents.

## Create an API agent

1. From the [AI Studio home page](https://app.writer.com/aistudio), click **API Keys** in the navigation menu. <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=23be0594b7deaa8ac370e127772dd8e0" alt="" data-og-width="442" width="442" data-og-height="626" height="626" data-path="images/api/select-api-keys.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c88f7a22b6abfac0ef61c50c39f94b6b 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=006fcf4047adb0c945a3451ccdc0556f 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7f5aee322948820bee554a15bf783fa7 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f79a1f28a3bd065c3a3854fc559f1d2d 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=0c79a2ebc12f55be894a88182df0bb4f 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=42ac805a843c095506c35c236d1ba0e0 2500w" />
2. Click the **Create API agent** button in the top right corner of the page. <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d7db42a5e42ec2b01bf096b4f50bb932" alt="" data-og-width="494" width="494" data-og-height="134" height="134" data-path="images/api/create-api-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e312e9748f45d6d3237af714dfd1ad6a 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=83bb18a636e355b2869d7b06968c7e47 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=8b57beeba59fd30968dc2b59c4c5bfb5 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=0fed2a886091403438deaf2bd7ed4452 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=618f819d9cebd7d4cec269ab7519c3a1 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e63e61559077b2e555251de6480e2347 2500w" />
3. Click the agent's name to rename it to something descriptive, and provide a **short description** of your agent to help you keep track of what it does. <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=824cea2266ac8e6f9d694ee9d9d329b0" alt="" data-og-width="866" width="866" data-og-height="534" height="534" data-path="images/api/rename-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=78d3d98187db5806c4715e3a3546bbe3 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=44ecd07ca5e14a963280247b0d3aa115 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b3b72f86fc6076fa8ad880a94be57162 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=ac0fe2dbd179bfc976aa388318442d3f 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=91eea940cee0a56efc9bf7e2ab4214cf 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=0e3d67a920ff93aa1037bfd67f69f3f8 2500w" />

## Create an API key

Each API agent has a default API key, called `Production`. To create additional API keys:

1. Navigate to the API application. From the [AI Studio home page](https://app.writer.com/aistudio), click **API Keys** in the navigation menu.
2. Click the API agent's tile you want to generate a new key for.
3. Click **Generate a new key**. <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/generate-key.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b6d56602756da93bfd521d54c3ebae9d" alt="" data-og-width="2228" width="2228" data-og-height="332" height="332" data-path="images/api/generate-key.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/generate-key.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f29aab59f38af4dc5b92d1261072d9f0 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/generate-key.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=a286ca6475f3f6925f3394da377b88cb 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/generate-key.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=5020b57202cd5ab1be69e9f0db357e73 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/generate-key.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=bd5dda057bbdfaa6c405683c2dce4d3e 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/generate-key.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=cfaf0bb1d99631e73bba3641cf78625c 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/generate-key.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=9782a30feb59dfad2b02dde86a10b1d3 2500w" />
4. Give the key a name and click **Generate**.
5. Immediately after generating the key, copy the key and save it securely. You can't view the key again after you navigate away from this page.

<Info>
  Store the API key in a secure location, such as a `.env` file (for example, `WRITER_API_KEY=<API_KEY>`).
</Info>

## See your API agents and manage API keys

1. From the [AI Studio home page](https://app.writer.com/aistudio), click **API Keys** in the navigation menu.
2. Click an individual agent's tile to navigate to the agent. <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/app-navigation.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=a55eee330942ed66f6609db0069e9f67" alt="" data-og-width="1352" width="1352" data-og-height="592" height="592" data-path="images/api/app-navigation.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/app-navigation.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=6c7fb3fc7e1181d93ca45b32378e8897 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/app-navigation.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=6b89fa357a5565d273223fb4b5ccbb1c 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/app-navigation.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=65aa2388874770b03ae65716c7e3b6a1 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/app-navigation.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7905917f4f6e4602dd4d0c49a1637d19 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/app-navigation.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=9656a683cb51a1d88fd0c2edd2a755dc 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/app-navigation.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=205295412afb6f0b5d708a9b7e80e578 2500w" />

You can't view the API key after creation. Copy it immediately and store it securely. To replace a lost key, generate a new key from the API agent page.

## Manage API agent permissions

API permissions are set at the agent level. To manage API agent permissions:

1. From the [AI Studio home page](https://app.writer.com/aistudio), click **API Keys** in the navigation menu.
2. Click an individual agent's tile to navigate to the agent.
3. Under **Capabilities**, toggle to enable or turn off a specific capability for the API key. <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/enable-capability.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=288b0814ca3a3b2083914cd7ad168c6f" alt="" data-og-width="2820" width="2820" data-og-height="862" height="862" data-path="images/api/enable-capability.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/enable-capability.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=56dfab6dcc44a05e007716ea7b087950 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/enable-capability.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=bae3539a6df2604d117a3e1602a0009a 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/enable-capability.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e94eceedd2ce01933c14f6fe819a5140 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/enable-capability.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e8adbdd20382580e64ee393a5cb3fb06 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/enable-capability.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b0458dd104ff6d567c19a9951b9313c9 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/enable-capability.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d3bb50e31be9ec296750d0d4a7af3fe1 2500w" />
   <Info>Capabilities map to Writer API endpoints. Click **Read more** in the API Documentation column to learn more about the specific endpoints.</Info>

## Delete an API agent

To delete an API agent:

1. From the [AI Studio home page](https://app.writer.com/aistudio), click **API Keys** in the navigation menu.
2. Click the dropdown menu (**...**) next to the agent you want to delete, and select **Delete**. <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-api-agent.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=a74f28dbd62babf28e022a451819ae09" alt="" data-og-width="1406" width="1406" data-og-height="594" height="594" data-path="images/api/delete-api-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-api-agent.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=1d42f24eedb866cc34a2983dd493913f 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-api-agent.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=4a74164bb63088cdc73475b5b8e45c1e 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-api-agent.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c36dd785a54deeb33329366601a33855 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-api-agent.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=ec04460537ec4ae9e108584d6bfe5c76 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-api-agent.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=a77e3f560aeeeedffd02bc9eab9d3a19 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-api-agent.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f1dd12ca40109fe71347faad1faaddf7 2500w" />
3. Confirm the deletion by clicking **Delete**.

## Delete an API key

To delete an API key:

1. From the [AI Studio home page](https://app.writer.com/aistudio), click **API Keys** in the navigation menu.
2. Click an individual agent's tile to navigate to the agent.
3. Click the dropdown menu (**...**) next to the key you want to delete, and select **Revoke**. <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-key.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=6a1a152a6b5ae4dd32e07ce818f182db" alt="" data-og-width="2254" width="2254" data-og-height="460" height="460" data-path="images/api/delete-key.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-key.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f88640e72eef0f1ca05cfd042038e2c9 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-key.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=093f321ad67a75fbf1ccb7e5b48fde80 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-key.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b5fc4a337b173420532a4ec99171215e 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-key.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d569e247825ad6061752456908159963 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-key.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=ad562c7f10cf6f4bf0ba541d7d7831e2 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/delete-key.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=1131b5bf04d86eee5007822fab71462f 2500w" />
4. Confirm the deletion by clicking **Revoke key**.


# Application details
Source: https://dev.writer.com/api-reference/application-api/application-details

get /v1/applications/{application_id}
Retrieves detailed information for a specific no-code agent (formerly called no-code applications), including its configuration and current status.

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>


# Retrieve all jobs
Source: https://dev.writer.com/api-reference/application-api/application-jobs

get /v1/applications/{application_id}/jobs
Retrieve all jobs created via the async API, linked to the provided application ID (or alias).

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>


# Generate from application
Source: https://dev.writer.com/api-reference/application-api/applications

post /v1/applications/{application_id}
Generate content from an existing no-code agent (formerly called no-code applications) with inputs.

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>


# Generate from application (async)
Source: https://dev.writer.com/api-reference/application-api/generate-application-job

post /v1/applications/{application_id}/jobs
Generate content asynchronously from an existing no-code agent (formerly called no-code applications) with inputs.

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>


# Retrieve graphs
Source: https://dev.writer.com/api-reference/application-api/get-application-graphs

get /v1/applications/{application_id}/graphs
Retrieve Knowledge Graphs associated with a no-code agent that has chat capabilities.

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>


# Retrieve a single job
Source: https://dev.writer.com/api-reference/application-api/get-single-async-job

get /v1/applications/jobs/{job_id}
Retrieves a single job created via the Async API.

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>


# List applications
Source: https://dev.writer.com/api-reference/application-api/list-applications

get /v1/applications
Retrieves a paginated list of no-code agents (formerly called no-code applications) with optional filtering and sorting capabilities.

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>


# Retry job execution
Source: https://dev.writer.com/api-reference/application-api/post-retry-async-job

post /v1/applications/jobs/{job_id}/retry
Re-triggers the async execution of a single job previously created via the Async api and terminated in error.

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>


# Associate graphs
Source: https://dev.writer.com/api-reference/application-api/put-application-graphs

put /v1/applications/{application_id}/graphs
Updates the list of Knowledge Graphs associated with a no-code chat agent.

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>


# Chat completion
Source: https://dev.writer.com/api-reference/completion-api/chat-completion

post /v1/chat
Generate a chat completion based on the provided messages. The response shown below is for non-streaming. To learn about streaming responses, see the [chat completion guide](https://dev.writer.com/home/chat-completion).



# List models
Source: https://dev.writer.com/api-reference/completion-api/list-models

get /v1/models
Retrieve a list of available models that can be used for text generation, chat completions, and other AI tasks.



# Text generation
Source: https://dev.writer.com/api-reference/completion-api/text-generation

post /v1/completions
Generate text completions using the specified model and prompt. This endpoint is useful for text generation tasks that don't require conversational context.



# Understand error codes
Source: https://dev.writer.com/api-reference/error-codes



This page provides a comprehensive reference for all error codes, HTTP status codes, and error handling patterns used across Writer APIs.

## Error code reference

<Tip>
  **Quickstart**: Most issues fall into these categories. Check here first!
</Tip>

<CardGroup cols={2}>
  <Card title="Authentication Issues" icon="shield-check" color="#ef4444">
    **401 Unauthorized**: check your API key format and permissions
  </Card>

  <Card title="Bad Request Data" icon="triangle-exclamation" color="#f59e0b">
    **400 + validation\_error**: verify required fields and data types
  </Card>

  <Card title="Rate Limiting" icon="clock" color="#8b5cf6">
    **429 Too Many Requests**: implement exponential backoff
  </Card>

  <Card title="Server Problems" icon="server" color="#6b7280">
    **5xx Errors**: check our status page or retry your request
  </Card>
</CardGroup>

## Error types

Jump to specific error types to find the cause and suggested action:

* [Authentication and authorization errors](#authentication-and-authorization-errors)
* [Request validation errors](#request-validation-errors)
* [Rate limiting and quota errors](#rate-limiting-and-quota-errors)
* [Server and processing errors](#server-and-processing-errors)
* [Error codes by service](#error-codes-by-service)

## Error response format

All API endpoints return errors in a consistent JSON format:

```json  theme={null}
{
  "tpe": "error_type",
  "errors": [
    {
      "description": "Human-readable error description",
      "key": "error.message.key",
      "extras": {}
    }
  ],
  "extras": {}
}
```

### Response structure

<Accordion title="🔧 Core fields (always present)">
  | Field    | Type   | Description                                                       |
  | -------- | ------ | ----------------------------------------------------------------- |
  | `tpe`    | string | Error type identifier (for example, "BadRequest", "Unauthorized") |
  | `errors` | array  | Array of error messages with details                              |
  | `extras` | object | Additional error context and metadata                             |
</Accordion>

<Accordion title="📋 Error message details">
  | Field         | Type   | Description                                     |
  | ------------- | ------ | ----------------------------------------------- |
  | `description` | string | Human-readable error description for developers |
  | `key`         | string | Message key for internationalization            |
  | `extras`      | object | Additional context specific to the error        |
</Accordion>

## HTTP status codes

Writer APIs use standard HTTP status codes to indicate the nature of errors:

| Status | Error code            | Type           | Description                                          | Common causes                           |
| ------ | --------------------- | -------------- | ---------------------------------------------------- | --------------------------------------- |
| 400    | `BadRequest`          | Validation     | Invalid request parameters or malformed request body | Missing required fields, invalid format |
| 401    | `Unauthorized`        | Authentication | Missing or invalid authentication credentials        | Missing API key, invalid format         |
| 403    | `Forbidden`           | Authorization  | Valid credentials but insufficient permissions       | Insufficient access rights              |
| 404    | `NotFound`            | Validation     | Requested resource does not exist                    | Invalid resource ID, deleted resource   |
| 409    | `Conflict`            | Validation     | Request conflicts with current state                 | Duplicate resource, version conflict    |
| 410    | `Gone`                | Validation     | Resource was permanently removed                     | Deleted/expired resource                |
| 413    | `PayloadTooLarge`     | Validation     | Request body too large                               | Exceeds configured size limits          |
| 422    | `UnprocessableEntity` | Validation     | Semantically invalid request                         | Fails business rules/constraints        |
| 429    | `TooManyRequests`     | Rate Limiting  | Rate limit or quota exceeded                         | Too many requests per time period       |
| 500    | `InternalServerError` | Server         | Internal server error                                | Server-side processing issue            |
| 503    | `ServiceUnavailable`  | Server         | Service temporarily unavailable                      | Maintenance, high load                  |
| 507    | `InsufficientStorage` | Server         | Insufficient storage to complete request             | Storage quota exhausted                 |

## Error codes by service

This section provides a comprehensive reference of all possible error codes organized by service and endpoint.

<AccordionGroup>
  <Accordion title="Chat Completions API" icon="comments">
    ### Text generation

    **Endpoint:** `POST /v1/completion`

    | Error Type                        | HTTP Status | Description              | Possible Causes                                          |
    | --------------------------------- | ----------- | ------------------------ | -------------------------------------------------------- |
    | `BadRequest`                      | 400         | Invalid model parameter  | Model name not supported or malformed                    |
    | `InvalidInputParameters`          | 400         | Invalid prompt format    | Empty prompt or invalid encoding                         |
    | `InvalidContentType`              | 400         | Invalid parameters       | Invalid `temperature`, `max_tokens`, or other parameters |
    | `BadCredentials`                  | 401         | Invalid API key          | Missing or malformed API key                             |
    | `BadToken`                        | 401         | API key expired          | API key has expired                                      |
    | `InsufficientAccessRights`        | 403         | Insufficient permissions | API key lacks required permissions                       |
    | `QuotaExceeded`                   | 429         | Rate limit exceeded      | Too many requests per minute                             |
    | `CompletionModelQuotaError`       | 429         | Quota exceeded           | Monthly usage limit reached                              |
    | `CompletionModelUnavailableError` | 500         | Model unavailable        | AI model temporarily unavailable                         |
    | `CompletionModelInternalError`    | 500         | Service overloaded       | High load, retry with backoff                            |

    ### Chat completions

    **Endpoint:** `POST /v1/chat/completions`

    | Error Type                          | HTTP Status | Description                   | Possible Causes                         |
    | ----------------------------------- | ----------- | ----------------------------- | --------------------------------------- |
    | `BadRequest`                        | 400         | Invalid messages format       | Malformed messages array or role        |
    | `InvalidInputParameters`            | 400         | Invalid model parameter       | Model not supported for chat            |
    | `InvalidContentType`                | 400         | Invalid tool configuration    | Malformed tools or `tool_choice`        |
    | `BadRequest`                        | 400         | Invalid streaming parameters  | Invalid stream or `stream_options`      |
    | `CompletionModelUnsafeRequestError` | 400         | Content policy violation      | Request contains prohibited content     |
    | `BadCredentials`                    | 401         | Authentication failed         | Invalid or missing API key              |
    | `BadToken`                          | 401         | Authentication failed         | Invalid or missing API key              |
    | `InsufficientAccessRights`          | 403         | Model access denied           | Account lacks access to requested model |
    | `QuotaExceeded`                     | 429         | Rate limit exceeded           | Too many requests per minute            |
    | `CompletionModelQuotaError`         | 429         | Model quota exceeded          | Model-specific usage limit reached      |
    | `CompletionModelInternalError`      | 500         | Model processing error        | Internal error in model inference       |
    | `CompletionModelUnavailableError`   | 503         | Model temporarily unavailable | Model service is down for maintenance   |
  </Accordion>

  <Accordion title="Files API" icon="file">
    ### Upload files

    **Endpoint:** `POST /v1/files`

    | Error Type                 | HTTP Status | Description                | Possible Causes                       |
    | -------------------------- | ----------- | -------------------------- | ------------------------------------- |
    | `BadRequest`               | 400         | Invalid file format        | Unsupported file type                 |
    | `InvalidInputParameters`   | 400         | File too large             | File exceeds size limit               |
    | `InvalidContentType`       | 400         | Invalid file content       | Corrupted or malformed file           |
    | `BadCredentials`           | 401         | Authentication required    | Missing or invalid API key            |
    | `BadToken`                 | 401         | Authentication required    | Missing or invalid API key            |
    | `InsufficientAccessRights` | 403         | Upload permission denied   | Account lacks file upload permissions |
    | `BadRequest`               | 413         | Payload too large          | Request body exceeds size limit       |
    | `QuotaExceeded`            | 429         | Upload rate limit exceeded | Too many file uploads per minute      |
    | `InternalError`            | 500         | File processing error      | Error processing uploaded file        |
    | `QuotaExceeded`            | 507         | Storage quota exceeded     | Account storage limit reached         |

    ### Get file

    **Endpoint:** `GET /v1/files/{file_id}`

    | Error Type                 | HTTP Status | Description             | Possible Causes                   |
    | -------------------------- | ----------- | ----------------------- | --------------------------------- |
    | `BadCredentials`           | 401         | Authentication required | Missing or invalid API key        |
    | `BadToken`                 | 401         | Authentication required | Missing or invalid API key        |
    | `InsufficientAccessRights` | 403         | Access denied           | No permission to access this file |
    | `ResourceNotFound`         | 404         | File not found          | File ID doesn't exist             |
    | `ResourceNotFound`         | 410         | File gone               | File has been deleted or expired  |
  </Accordion>

  <Accordion title="Knowledge Graphs API" icon="brain">
    ### Create graph

    **Endpoint:** `POST /v1/knowledge-graphs`

    | Error Type                 | HTTP Status | Description                 | Possible Causes                          |
    | -------------------------- | ----------- | --------------------------- | ---------------------------------------- |
    | `BadRequest`               | 400         | Invalid graph configuration | Malformed graph parameters               |
    | `InvalidInputParameters`   | 400         | Invalid graph name          | Name contains invalid characters         |
    | `BadRequest`               | 400         | Duplicate graph name        | Graph with this name already exists      |
    | `BadCredentials`           | 401         | Authentication required     | Missing or invalid API key               |
    | `BadToken`                 | 401         | Authentication required     | Missing or invalid API key               |
    | `InsufficientAccessRights` | 403         | Graph creation denied       | Account lacks graph creation permissions |
    | `QuotaExceeded`            | 429         | Graph creation rate limit   | Too many graphs created per hour         |
    | `InternalError`            | 500         | Graph creation failed       | Internal error creating graph            |

    ### Add file to graph

    **Endpoint:** `POST /v1/knowledge-graphs/{graph_id}/files`

    | Error Type                 | HTTP Status | Description                | Possible Causes                       |
    | -------------------------- | ----------- | -------------------------- | ------------------------------------- |
    | `BadRequest`               | 400         | Invalid file format        | File type not supported for graphs    |
    | `InvalidInputParameters`   | 400         | File processing failed     | Error parsing file content            |
    | `BadCredentials`           | 401         | Authentication required    | Missing or invalid API key            |
    | `BadToken`                 | 401         | Authentication required    | Missing or invalid API key            |
    | `InsufficientAccessRights` | 403         | Graph access denied        | No permission to modify this graph    |
    | `ResourceNotFound`         | 404         | Graph not found            | Graph ID does not exist               |
    | `BadRequest`               | 409         | File already in graph      | File is already associated with graph |
    | `QuotaExceeded`            | 429         | File processing rate limit | Too many files processed per minute   |

    ### Query graph

    **Endpoint:** `POST /v1/knowledge-graphs/{graph_id}/query`

    | Error Type                 | HTTP Status | Description               | Possible Causes                   |
    | -------------------------- | ----------- | ------------------------- | --------------------------------- |
    | `BadRequest`               | 400         | Invalid query format      | Malformed query parameters        |
    | `InvalidInputParameters`   | 400         | Query too complex         | Query exceeds complexity limits   |
    | `BadCredentials`           | 401         | Authentication required   | Missing or invalid API key        |
    | `BadToken`                 | 401         | Authentication required   | Missing or invalid API key        |
    | `InsufficientAccessRights` | 403         | Query permission denied   | No permission to query this graph |
    | `ResourceNotFound`         | 404         | Graph not found           | Graph ID doesn't exist            |
    | `QuotaExceeded`            | 429         | Query rate limit exceeded | Too many queries per minute       |
    | `InternalError`            | 500         | Query processing error    | Internal error processing query   |
  </Accordion>

  <Accordion title="Applications API" icon="gear">
    ### Create application

    **Endpoint:** `POST /v1/applications`

    | Error Type                 | HTTP Status | Description                       | Possible Causes                                |
    | -------------------------- | ----------- | --------------------------------- | ---------------------------------------------- |
    | `BadRequest`               | 400         | Invalid application configuration | Malformed application parameters               |
    | `InvalidInputParameters`   | 400         | Invalid blueprint configuration   | Blueprint syntax or configuration error        |
    | `BadRequest`               | 400         | Duplicate application name        | Application with this name already exists      |
    | `BadCredentials`           | 401         | Authentication required           | Missing or invalid API key                     |
    | `BadToken`                 | 401         | Authentication required           | Missing or invalid API key                     |
    | `InsufficientAccessRights` | 403         | Application creation denied       | Account lacks application creation permissions |
    | `QuotaExceeded`            | 429         | Application creation rate limit   | Too many applications created per hour         |
    | `InternalError`            | 500         | Application creation failed       | Internal error creating application            |

    ### Generate application job

    **Endpoint:** `POST /v1/applications/{app_id}/jobs`

    | Error Type                 | HTTP Status | Description              | Possible Causes                            |
    | -------------------------- | ----------- | ------------------------ | ------------------------------------------ |
    | `BadRequest`               | 400         | Invalid job parameters   | Malformed job request                      |
    | `InvalidInputParameters`   | 400         | Missing required inputs  | Required input parameters not provided     |
    | `BadCredentials`           | 401         | Authentication required  | Missing or invalid API key                 |
    | `BadToken`                 | 401         | Authentication required  | Missing or invalid API key                 |
    | `InsufficientAccessRights` | 403         | Job execution denied     | No permission to execute jobs for this app |
    | `ResourceNotFound`         | 404         | Application not found    | Application ID doesn't exist               |
    | `BadRequest`               | 409         | Job already running      | Application has a job already in progress  |
    | `QuotaExceeded`            | 429         | Job execution rate limit | Too many jobs executed per minute          |
    | `InternalError`            | 500         | Job execution failed     | Internal error executing job               |
  </Accordion>

  <Accordion title="Tools API" icon="wrench">
    ### AI detect

    **Endpoint:** `POST /v1/tools/ai-detect`

    | Error Type                 | HTTP Status | Description                | Possible Causes                        |
    | -------------------------- | ----------- | -------------------------- | -------------------------------------- |
    | `BadRequest`               | 400         | Invalid text input         | Empty or malformed text input          |
    | `InvalidInputParameters`   | 400         | Text too long              | Input exceeds maximum length           |
    | `BadCredentials`           | 401         | Authentication required    | Missing or invalid API key             |
    | `BadToken`                 | 401         | Authentication required    | Missing or invalid API key             |
    | `InsufficientAccessRights` | 403         | Tool access denied         | Account lacks AI detect permissions    |
    | `QuotaExceeded`            | 429         | Detection rate limit       | Too many detection requests per minute |
    | `InternalError`            | 500         | Detection processing error | Internal error in AI detection         |

    ### PDF parser

    **Endpoint:** `POST /v1/tools/pdf-parser`

    | Error Type                 | HTTP Status | Description             | Possible Causes                      |
    | -------------------------- | ----------- | ----------------------- | ------------------------------------ |
    | `BadRequest`               | 400         | Invalid PDF file        | Corrupted or unsupported PDF         |
    | `InvalidInputParameters`   | 400         | PDF too large           | PDF exceeds size limits              |
    | `BadRequest`               | 400         | PDF password protected  | PDF requires password to access      |
    | `BadCredentials`           | 401         | Authentication required | Missing or invalid API key           |
    | `BadToken`                 | 401         | Authentication required | Missing or invalid API key           |
    | `InsufficientAccessRights` | 403         | Parser access denied    | Account lacks PDF parser permissions |
    | `QuotaExceeded`            | 429         | Parser rate limit       | Too many parsing requests per minute |
    | `InternalError`            | 500         | PDF parsing error       | Internal error parsing PDF           |

    ### Web search

    **Endpoint:** `POST /v1/tools/web-search`

    | Error Type                 | HTTP Status | Description                | Possible Causes                      |
    | -------------------------- | ----------- | -------------------------- | ------------------------------------ |
    | `BadRequest`               | 400         | Invalid search query       | Empty or malformed search query      |
    | `InvalidInputParameters`   | 400         | Search query too long      | Query exceeds maximum length         |
    | `BadCredentials`           | 401         | Authentication required    | Missing or invalid API key           |
    | `BadToken`                 | 401         | Authentication required    | Missing or invalid API key           |
    | `InsufficientAccessRights` | 403         | Search access denied       | Account lacks web search permissions |
    | `QuotaExceeded`            | 429         | Search rate limit          | Too many search requests per minute  |
    | `InternalError`            | 500         | Search processing error    | Internal error in web search         |
    | `InternalError`            | 503         | Search service unavailable | External search service is down      |
  </Accordion>

  <Accordion title="Translation API" icon="language">
    ### Translate text

    **Endpoint:** `POST /v1/translate`

    | Error Type                 | HTTP Status | Description                     | Possible Causes                          |
    | -------------------------- | ----------- | ------------------------------- | ---------------------------------------- |
    | `BadRequest`               | 400         | Invalid language codes          | Unsupported source or target language    |
    | `InvalidInputParameters`   | 400         | Invalid text input              | Empty or malformed text input            |
    | `InvalidInputParameters`   | 400         | Text too long                   | Input exceeds maximum length             |
    | `BadCredentials`           | 401         | Authentication required         | Missing or invalid API key               |
    | `BadToken`                 | 401         | Authentication required         | Missing or invalid API key               |
    | `InsufficientAccessRights` | 403         | Translation access denied       | Account lacks translation permissions    |
    | `QuotaExceeded`            | 429         | Translation rate limit          | Too many translation requests per minute |
    | `InternalError`            | 500         | Translation processing error    | Internal error in translation            |
    | `InternalError`            | 503         | Translation service unavailable | Translation service is down              |
  </Accordion>

  <Accordion title="Vision API" icon="eye">
    ### Analyze images

    **Endpoint:** `POST /v1/vision/analyze`

    | Error Type                 | HTTP Status | Description                | Possible Causes                           |
    | -------------------------- | ----------- | -------------------------- | ----------------------------------------- |
    | `BadRequest`               | 400         | Invalid image format       | Unsupported image type                    |
    | `InvalidInputParameters`   | 400         | Image too large            | Image exceeds size limits                 |
    | `InvalidContentType`       | 400         | Invalid image content      | Corrupted or malformed image              |
    | `BadCredentials`           | 401         | Authentication required    | Missing or invalid API key                |
    | `BadToken`                 | 401         | Authentication required    | Missing or invalid API key                |
    | `InsufficientAccessRights` | 403         | Vision access denied       | Account lacks vision analysis permissions |
    | `QuotaExceeded`            | 429         | Vision rate limit          | Too many analysis requests per minute     |
    | `InternalError`            | 500         | Image processing error     | Internal error processing image           |
    | `InternalError`            | 503         | Vision service unavailable | Vision service is down for maintenance    |
  </Accordion>
</AccordionGroup>

## Error categories

### Authentication and authorization errors

#### 401 Unauthorized

| Status | Error code       | Type           | Description     | Common causes                                        |
| ------ | ---------------- | -------------- | --------------- | ---------------------------------------------------- |
| 401    | `BadCredentials` | Authentication | Invalid API key | Missing Authorization header, invalid API key format |
| 401    | `BadToken`       | Authentication | API key expired | API key has expired                                  |

**Example Response:**

```json  theme={null}
{
  "tpe": "Unauthorized",
  "errors": [
    {
      "description": "Invalid token",
      "key": "fail.unauthorized.badToken",
      "extras": {}
    }
  ],
  "extras": {}
}
```

**How to Fix:**

* Verify your API key is correct
* Ensure you've included the `Authorization: Bearer <your_api_key>` header
* Check that your API key hasn't expired
* See [API Keys documentation](/api-reference/api-keys) for more details

#### 403 Forbidden

| Status | Error code                 | Type          | Description                        | Common causes                                |
| ------ | -------------------------- | ------------- | ---------------------------------- | -------------------------------------------- |
| 403    | `InsufficientAccessRights` | Authorization | API key lacks required permissions | Insufficient permissions, wrong API key type |

**Example Response:**

```json  theme={null}
{
  "tpe": "Forbidden",
  "errors": [
    {
      "description": "Insufficient access rights",
      "key": "fail.forbidden.insufficientAccessRights",
      "extras": {}
    }
  ],
  "extras": {}
}
```

**How to Fix:**

* Verify your API key has the required permissions
* Check if you're using the correct API key type
* Contact support if permissions seem incorrect

### Request validation errors

#### 400 Bad Request

| Status | Error code               | Type       | Description                | Common causes                             |
| ------ | ------------------------ | ---------- | -------------------------- | ----------------------------------------- |
| 400    | `BadRequest`             | Validation | Invalid request parameters | Missing required fields, invalid format   |
| 400    | `InvalidInputParameters` | Validation | Invalid parameter values   | Out of range values, unsupported options  |
| 400    | `InvalidContentType`     | Validation | Invalid content type       | Malformed JSON, wrong content-type header |

**Example Response:**

```json  theme={null}
{
  "tpe": "BadRequest",
  "errors": [
    {
      "description": "Invalid input parameters",
      "key": "fail.badRequest.invalidParameters",
      "extras": {}
    }
  ],
  "extras": {}
}
```

**How to Fix:**

* Check required fields and data formats
* Validate parameter values against API documentation
* Ensure request body is valid JSON
* See specific endpoint documentation for required parameters

#### 404 Not Found

| Status | Error code         | Type       | Description                      | Common causes                         |
| ------ | ------------------ | ---------- | -------------------------------- | ------------------------------------- |
| 404    | `ResourceNotFound` | Validation | Requested resource doesn't exist | Invalid resource ID, deleted resource |

**Example Response:**

```json  theme={null}
{
  "tpe": "NotFound",
  "errors": [
    {
      "description": "Resource is not found",
      "key": "fail.notFound.resource",
      "extras": {}
    }
  ],
  "extras": {}
}
```

**How to Fix:**

* Verify the resource ID is correct
* Check if the resource has been deleted
* Ensure the endpoint URL is correct

### Rate limiting and quota errors

#### 429 Too Many Requests

| Status | Error code                  | Type          | Description                      | Common causes                          |
| ------ | --------------------------- | ------------- | -------------------------------- | -------------------------------------- |
| 429    | `QuotaExceeded`             | Rate Limiting | Too many requests in time period | Exceeding per-minute or per-day limits |
| 429    | `CompletionModelQuotaError` | Rate Limiting | Model quota exceeded             | Monthly usage limit reached            |

**Example Response:**

```json  theme={null}
{
  "tpe": "TooManyRequests",
  "errors": [
    {
      "description": "Quota exceeded",
      "key": "fail.tooManyRequests.quotaExceeded",
      "extras": {}
    }
  ],
  "extras": {}
}
```

**How to Fix:**

* Implement exponential backoff
* Check your rate limits in the dashboard
* Consider upgrading your plan for higher limits
* See [Rate Limits documentation](/api-reference/rate-limits) for details

### Server and processing errors

#### 500 Internal Server Error

| Status | Error code                     | Type   | Description             | Common causes                     |
| ------ | ------------------------------ | ------ | ----------------------- | --------------------------------- |
| 500    | `InternalError`                | Server | Unexpected server error | Server-side processing issue      |
| 500    | `CompletionModelInternalError` | Server | Model processing error  | Internal error in model inference |

**Example Response:**

```json  theme={null}
{
  "tpe": "InternalServerError",
  "errors": [
    {
      "description": "Internal server error",
      "key": "fail.internalServerError.generic",
      "extras": {}
    }
  ],
  "extras": {}
}
```

**How to Fix:**

* Retry the request after a short delay
* Check if the issue persists
* Contact support if the error continues

#### 503 Service Unavailable

| Status | Error code                        | Type   | Description                   | Common causes                         |
| ------ | --------------------------------- | ------ | ----------------------------- | ------------------------------------- |
| 503    | `CompletionModelUnavailableError` | Server | Model temporarily unavailable | Model service is down for maintenance |

**Example Response:**

```json  theme={null}
{
  "tpe": "ServiceUnavailable",
  "errors": [
    {
      "description": "Service temporarily unavailable",
      "key": "fail.serviceUnavailable.temporary",
      "extras": {}
    }
  ],
  "extras": {}
}
```

**How to Fix:**

* Wait and retry after some time
* Check service status page
* Implement retry logic with exponential backoff

## AI model-specific errors

For AI content generation endpoints, the API may return additional error types:

### Model errors

| Error Type                              | Description                          |
| --------------------------------------- | ------------------------------------ |
| `CompletionModelUnavailableError`       | AI model is temporarily unavailable  |
| `CompletionModelInternalError`          | Internal error in model processing   |
| `CompletionModelQuotaError`             | Model usage quota exceeded           |
| `CompletionModelUnauthorizedError`      | Invalid model access credentials     |
| `CompletionModelUnderlyingRequestError` | Error in underlying model request    |
| `CompletionModelUnsafeRequestError`     | Request contains unsafe content      |
| `CompletionModelNoPredictionError`      | Model couldn't generate a prediction |

**Example model error:**

```json  theme={null}
{
  "tpe": "CompletionModelQuotaError",
  "errors": [
    {
      "description": "Model usage quota exceeded",
      "key": "fail.model.quotaExceeded",
      "extras": {}
    }
  ],
  "extras": {}
}
```

## SDK error types

The official Writer SDKs provide structured error handling with specific exception types:

### Python SDK errors

| Error Type                 | HTTP Status | Description                                          |
| -------------------------- | ----------- | ---------------------------------------------------- |
| `APIConnectionError`       | N/A         | Network connectivity issues, timeouts, DNS failures  |
| `APITimeoutError`          | N/A         | Request timeout exceeded                             |
| `BadRequestError`          | 400         | Invalid request parameters or malformed request body |
| `AuthenticationError`      | 401         | Missing or invalid API key                           |
| `PermissionDeniedError`    | 403         | Valid API key but insufficient permissions           |
| `NotFoundError`            | 404         | Requested resource doesn't exist                     |
| `UnprocessableEntityError` | 422         | Request is well-formed but contains semantic errors  |
| `RateLimitError`           | 429         | Rate limit or quota exceeded                         |
| `InternalServerError`      | ≥500        | Internal server error                                |

### JavaScript/Node.js SDK errors

| Error Type              | HTTP Status | Description                                          |
| ----------------------- | ----------- | ---------------------------------------------------- |
| `connection_error`      | N/A         | Network connectivity issues, timeouts, DNS failures  |
| `timeout_error`         | N/A         | Request timeout exceeded                             |
| `bad_request`           | 400         | Invalid request parameters or malformed request body |
| `authentication_error`  | 401         | Missing or invalid API key                           |
| `permission_denied`     | 403         | Valid API key but insufficient permissions           |
| `not_found`             | 404         | Requested resource doesn't exist                     |
| `unprocessable_entity`  | 422         | Request is well-formed but contains semantic errors  |
| `rate_limit_error`      | 429         | Rate limit or quota exceeded                         |
| `internal_server_error` | ≥500        | Internal server error                                |

### Error handling example

This example shows how to handle common error cases when making API requests using the Writer SDKs.

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer
  import writerai

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  try:
      response = client.chat.chat(
          messages=[
              {
                  "role": "user",
                  "content": "Write a haiku about programming"
              }
          ],
          model="palmyra-x5"
      )
      print("Success:", response.choices[0].message.content)
      
  except writerai.APIConnectionError as e:
      print("Network error:", e)
      print("Cause:", e.__cause__)
      
  except writerai.RateLimitError as e:
      print("Rate limited:", e)
      print("Status code:", e.status_code)
      # SDK automatically handles retries with exponential backoff
      
  except writerai.AuthenticationError as e:
      print("Authentication failed:", e)
      print("Status code:", e.status_code)
      # Refresh API key or redirect to login
      
  except writerai.BadRequestError as e:
      print("Invalid request:", e)
      print("Status code:", e.status_code)
      
  except writerai.InternalServerError as e:
      print("Server error:", e)
      print("Status code:", e.status_code)
      # SDK automatically retries 5xx errors
      
  except writerai.APIStatusError as e:
      print("API error:", e)
      print("Status code:", e.status_code)
      print("Response:", e.response)
  ```

  ```javascript JavaScript theme={null}
  import Writer from '@writer/writer-node';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer({});

  try {
    const response = await client.chat.chat({
      messages: [
        {
          role: 'user',
          content: 'Write a haiku about programming'
        }
      ],
      model: 'palmyra-x5'
    });
    
    console.log('Success:', response.choices[0].message.content);
  } catch (error) {
    if (error.code === 'bad_request') {
      console.error('Invalid request:', error.message);
    } else if (error.code === 'authentication_error') {
      console.error('Authentication failed:', error.message);
      // Refresh API key or redirect to login
    } else if (error.code === 'rate_limit_error') {
      console.error('Rate limited:', error.message);
      // SDK automatically handles retries with exponential backoff
    } else if (error.code === 'internal_server_error') {
      console.error('Server error:', error.message);
      // SDK automatically retries 5xx errors
    } else if (error.code === 'connection_error') {
      console.error('Network error:', error.message);
    } else {
      console.error('Unexpected error:', error.message);
    }
  }
  ```
</CodeGroup>

## Troubleshooting common errors

### 400 Bad request

* Verify all required parameters are included
* Check parameter value formats and constraints
* Ensure request body is valid JSON

### 401 Unauthorized

* Verify API key is correct and not expired
* Check that the API key has the required permissions
* Ensure the Authorization header is properly formatted

### 403 Forbidden

* Check if your organization/team has access to the requested resource
* Verify that the feature is enabled for your plan
* Contact support if you believe this is an error

### 429 Too many requests

* Implement exponential backoff retry logic
* Check your current usage against rate limits
* Consider upgrading your plan for higher limits

### 500 Internal server error

* Retry the request after a short delay
* Check the [Writer status page](https://status.writer.com/) for known issues
* Contact support if the error persists

## Next steps

* [API keys](/api-reference/api-keys): learn how to authenticate with Writer APIs
* [Rate limits](/api-reference/rate-limits): understand API rate limiting and quotas
* [Python SDK](https://github.com/writer/writer-python): official Python library with built-in error handling
* [Node.js SDK](https://github.com/writer/writer-node): official JavaScript/Node.js library with built-in error handling


# Handle errors
Source: https://dev.writer.com/api-reference/error-handling



<Info>
  This table outlines the HTTP status codes you may encounter when using the
  API, along with descriptions to help you understand and troubleshoot issues.
</Info>

| Error code | Description                                                                                                                                                               |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **400**    | **Bad request error:** Indicates an issue with the format or content of your request. This error may also encompass other 4XX status errors not specifically listed here. |
| **401**    | **Authentication error:** There's an issue with your API key, or it's missing from your request headers resulting in unauthorized access.                                 |
| **403**    | **Permission error:** Your API key doesn't have permission to access the requested resource.                                                                              |
| **404**    | **Model not found error:** The specified model couldn't be found. This may be due to an incorrect URL or model ID.                                                        |
| **429**    | **Rate limit exceeded:** You have exceeded the allotted number of requests per time period for your account. Please wait and try your request again later.                |
| **500**    | **API error:** An unexpected error occurred within our systems. If this persists, contact support for further assistance.                                                 |
| **503**    | **Service unavailable:** The server is currently unable to handle the request due to a temporary overload or maintenance. Please retry your request after some time.      |
| **504**    | **Timeout error:** The server didn't receive a timely response from an upstream server. Please retry your request after some time.                                        |

**Best practices**

<CardGroup>
  <Card title="Validate requests" icon="check">
    Ensure that all requests are correctly formatted and include all necessary
    parameters and authentication information before sending them to the server. You can check the [API reference](/api-reference) for the correct information.
  </Card>

  <Card title="Check API key" icon="key">
    Ensure that you are using a valid API key, specific to either the API/SDK or Writer Framework. Use the [API Quickstart](/home/quickstart) for the former and the [Writer Framework Quickstart](/framework/quickstart) for the latter.
  </Card>

  <Card title="Check for firewalls" icon="fire">
    Ensure that firewalls or security settings are not blocking the Writer API or your application or service using the Writer API or SDK.
  </Card>

  <Card title="Monitor and log errors" icon="monitor-waveform">
    Continuously monitor and log errors on your side to identify patterns or
    recurring issues that may require changes to your application or further
    investigation.
  </Card>
</CardGroup>


# Delete file
Source: https://dev.writer.com/api-reference/file-api/delete-file

delete /v1/files/{file_id}
Permanently delete a file from the system. This action cannot be undone.



# Download file
Source: https://dev.writer.com/api-reference/file-api/download-file

get /v1/files/{file_id}/download
Download the binary content of a file. The response will contain the file data in the appropriate MIME type.



# Retry failed files
Source: https://dev.writer.com/api-reference/file-api/files-retry

post /v1/files/retry
Retry processing of files that previously failed to process. This will re-attempt the processing of the specified files.



# List files
Source: https://dev.writer.com/api-reference/file-api/get-all-files

get /v1/files
Retrieve a paginated list of files with optional filtering by status, graph association, and file type.



# Retrieve file
Source: https://dev.writer.com/api-reference/file-api/get-file

get /v1/files/{file_id}
Retrieve detailed information about a specific file, including its metadata, status, and associated graphs.



# Upload file
Source: https://dev.writer.com/api-reference/file-api/upload-files

post /v1/files
Upload a new file to the system. Supports various file formats including PDF, DOC, DOCX, PPT, PPTX, JPG, PNG, EML, HTML, SRT, CSV, XLS, and XLSX.



# Add file to graph
Source: https://dev.writer.com/api-reference/kg-api/add-file-to-graph

post /v1/graphs/{graph_id}/file
Add a file to a Knowledge Graph.



# Create graph
Source: https://dev.writer.com/api-reference/kg-api/create-graph

post /v1/graphs
Create a new Knowledge Graph.



# Delete graph
Source: https://dev.writer.com/api-reference/kg-api/delete-graph

delete /v1/graphs/{graph_id}
Delete a Knowledge Graph.



# List graphs
Source: https://dev.writer.com/api-reference/kg-api/list-graphs

get /v1/graphs
Retrieve a list of Knowledge Graphs.



# Question
Source: https://dev.writer.com/api-reference/kg-api/question

post /v1/graphs/question
Ask a question to specified Knowledge Graphs.



# Remove file from graph
Source: https://dev.writer.com/api-reference/kg-api/remove-file-from-graph

delete /v1/graphs/{graph_id}/file/{file_id}
Remove a file from a Knowledge Graph.



# Retrieve graph
Source: https://dev.writer.com/api-reference/kg-api/retrieve-graph

get /v1/graphs/{graph_id}
Retrieve a Knowledge Graph.



# Update graph
Source: https://dev.writer.com/api-reference/kg-api/update-graph

put /v1/graphs/{graph_id}
Update the name and description of a Knowledge Graph.



# Migrate from medical comprehend API to LLM tool
Source: https://dev.writer.com/api-reference/migration-guides/comprehend-medical



This guide shows you how to migrate from the deprecated [medical comprehend API endpoint](/api-reference/tool-api/comprehend-medical) to chat completions that can [delegate medical analysis tasks to the `palmyra-med` model](/home/model-delegation). After completing these steps, you can analyze medical text using the `palmyra-med` model, which provides medical analysis capabilities within a chat completion workflow.

## Compare the APIs

The medical comprehend API and the LLM tool with the `palmyra-med` model both provide medical text analysis capabilities, but the LLM tool integrates medical analysis into conversational workflows and supports more flexible configuration and output options. The table below compares the two approaches.

| Aspect                | Medical comprehend API                                                                               | LLM tool with `palmyra-med` model                                                                                                                                                                                                                                        |
| --------------------- | ---------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Endpoint**          | `/v1/tools/comprehend/medical`                                                                       | `/v1/chat` with [LLM tool specification](/home/model-delegation) in the `tools` array                                                                                                                                                                                    |
| **Request structure** | Pass text and analysis parameters such as `content` and `response_type` directly in the request body | Provide the medical text as part of the conversation `messages` and specify the analysis tool and model in the `tools` array. Additional parameters (such as custom instructions or output schema) are included in the tool configuration, not as direct request fields. |
| **Response format**   | Structured JSON with a fixed schema (predefined medical entities and types)                          | Answer in `choices[0].message.content` as either natural language or structured JSON (including custom schemas or user-defined formats)                                                                                                                                  |
| **Parameter control** | Explicit API parameters for each entity and type supported by the API                                | Most analysis details are defined by the message prompt and tool configuration; you can specify formats, schema, or request conversational output as needed                                                                                                              |

## Choose your migration approach

Choose your migration approach based on the type of output you need:

* Select the [LLM tool with structured output](/home/structured-output) if you require clearly defined, machine-readable results (for example, extracting predefined medical entities like `RxNorm`, `ICD-10-CM`, or `SNOMED CT`). This option closely matches the original medical comprehend API response format and is best for downstream systems that depend on standardized data.

* Choose conversational analysis with natural language responses if your use case benefits from more flexible or descriptive outputs, or if you want to define your own entity or analysis formats that are not supported by the original API. This approach is ideal for interactive workflows or when you want the model to summarize, explain, or provide guidance in plain language.

### Extract entities and generate structured output

If you need structured entity extraction similar to the medical comprehend API, use the [structured output feature](/home/structured-output) with the LLM tool to get JSON responses:

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
    --header 'Content-Type: application/json' \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --data '{
      "model": "palmyra-x5",
      "messages": [
        {
          "role": "user",
          "content": "Extract medical entities from this text: the symptoms are soreness, a temperature and cough"
        }
      ],
      "tool_choice": "auto",
      "tools": [
        {
          "type": "llm",
          "function": {
            "description": "A function that invokes the Palmyra Med model, specialized in analyzing medical text. Any user request for medical analysis should use this tool.",
            "model": "palmyra-med"
          }
        }
      ],
      "response_format": {
        "type": "json_schema",
        "json_schema": {
          "name": "medical_entities",
          "schema": {
            "type": "object",
            "properties": {
              "entities": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "text": {"type": "string"},
                    "category": {"type": "string"},
                    "score": {"type": "number"}
                  },
                  "required": ["text", "category", "score"],
                  "additionalProperties": false
                }
              }
            },
            "required": ["entities"],
            "additionalProperties": false
          },
          "strict": true
        }
      }
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "Extract medical entities from this text: the symptoms are soreness, a temperature and cough"}]

  tools = [{
    "type": "llm",
    "function": {
      "description": "A function that invokes the Palmyra Med model, specialized in analyzing medical text. Any user request for medical analysis should use this tool.",
      "model": "palmyra-med"
    }
  }]

  # The response_format below configures the API to return structured data
  # in a predefined JSON schema matching expected entities: an array of objects with text, category, and score fields.
  response_format = {
    "type": "json_schema",
    "json_schema": {
      "name": "medical_entities",
      "schema": {
        "type": "object",
        "properties": {
          "entities": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "text": {"type": "string"},
                "category": {"type": "string"},
                "score": {"type": "number"}
              },
              "required": ["text", "category", "score"],
              "additionalProperties": False
            }
          }
        },
        "required": ["entities"],
        "additionalProperties": False
      },
      "strict": True
    }
  }

  response = client.chat.chat(
    model="palmyra-x5", 
    messages=messages, 
    tools=tools,
    tool_choice="auto",
    response_format=response_format  # Ensures the output matches the medical_entities schema above
  )

  print(response.choices[0].message.content)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const messages = [{role: "user", content: "Extract medical entities from this text: the symptoms are soreness, a temperature and cough"}];

  const tools = [{
    type: "llm",
    function: {
      description: "A function that invokes the Palmyra Med model, specialized in analyzing medical text. Any user request for medical analysis should use this tool.",
      model: "palmyra-med"
    }
  }];

  /*
    The responseFormat object below configures the API to return a machine-readable, structured JSON response
    matching this schema:
      {
        "entities": [
          {
            "text": "...",
            "category": "...",
            "score": ...
          }
        ]
      }
    Each extracted entity contains the fields text, category, and score.
  */
  const responseFormat = {
    type: "json_schema",
    json_schema: {
      name: "medical_entities",
      schema: {
        type: "object",
        properties: {
          entities: {
            type: "array",
            items: {
              type: "object",
              properties: {
                text: {type: "string"},
                category: {type: "string"},
                score: {type: "number"}
              },
              required: ["text", "category", "score"],
              additionalProperties: false
            }
          }
        },
        required: ["entities"],
        additionalProperties: false
      },
      strict: true
    }
  };

  const response = await client.chat.chat({
    model: "palmyra-x5", 
    messages: messages, 
    tools: tools,
    tool_choice: "auto",
    response_format: responseFormat // Request the response as structured JSON for downstream processing
  });

  console.log(response.choices[0].message.content);
  ```
</CodeGroup>

### Analyze medical text with natural language responses

If you need conversational medical analysis and interpretation, use the LLM tool without structured output:

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
    --header 'Content-Type: application/json' \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --data '{
      "model": "palmyra-x5",
      "messages": [
        {
          "role": "user",
          "content": "Analyze the following medical text and identify key symptoms and conditions: the symptoms are soreness, a temperature and cough"
        }
      ],
      "tool_choice": "auto",
      "tools": [
        {
          "type": "llm",
          "function": {
            "description": "A function that invokes the Palmyra Med model, specialized in analyzing medical text and providing medical insights. Any user request for medical analysis should use this tool.",
            "model": "palmyra-med"
          }
        }
      ]
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "Analyze the following medical text and identify key symptoms and conditions: the symptoms are soreness, a temperature and cough"}]

  tools = [{
    "type": "llm",
    "function": {
      "description": "A function that invokes the Palmyra Med model, specialized in analyzing medical text and providing medical insights. Any user request for medical analysis should use this tool.",
      "model": "palmyra-med"
    }
  }]

  response = client.chat.chat(
    model="palmyra-x5", 
    messages=messages, 
    tools=tools,
    tool_choice="auto"
  )

  print(response.choices[0].message.content)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const messages = [{role: "user", content: "Analyze the following medical text and identify key symptoms and conditions: the symptoms are soreness, a temperature and cough"}];

  const tools = [{
    type: "llm",
    function: {
      description: "A function that invokes the Palmyra Med model, specialized in analyzing medical text and providing medical insights. Any user request for medical analysis should use this tool.",
      model: "palmyra-med"
    }
  }];

  const response = await client.chat.chat({
    model: "palmyra-x5", 
    messages: messages, 
    tools: tools,
    tool_choice: "auto"
  });

  console.log(response.choices[0].message.content);
  ```
</CodeGroup>

## Migrate your code

The tabs below show a request using the medical comprehend API and the same request using the LLM tool with the `palmyra-med` model.

<Tabs>
  <Tab title="Before: Medical comprehend API">
    The medical comprehend API accepts medical text and a response type:

    <CodeGroup>
      ```bash cURL theme={null}
      curl --location 'https://api.writer.com/v1/tools/comprehend/medical' \
        --header 'Content-Type: application/json' \
        --header "Authorization: Bearer $WRITER_API_KEY" \
        --data '{
          "content": "the symptoms are soreness, a temperature and cough", 
          "response_type": "Entities"
        }'
      ```

      ```python Python theme={null}
      from writerai import Writer

      # Initialize the Writer client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      medical = client.tools.comprehend.medical(
        content="the symptoms are soreness, a temperature and cough",
        response_type="Entities"
      )

      print(medical.entities)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from "writer-sdk";

      // Initialize the Writer client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const medical = await client.tools.comprehend.medical({
        content: "the symptoms are soreness, a temperature and cough",
        response_type: "Entities"
      });

      console.log(medical.entities);
      ```
    </CodeGroup>

    **Response:**

    ```json  theme={null}
    {
      "entities": [
        {
          "category": "MEDICAL_CONDITION",
          "text": "soreness",
          "score": 0.95,
          "traits": []
        },
        {
          "category": "MEDICAL_CONDITION",
          "text": "temperature",
          "score": 0.92,
          "traits": []
        },
        {
          "category": "MEDICAL_CONDITION",
          "text": "cough",
          "score": 0.98,
          "traits": []
        }
      ]
    }
    ```
  </Tab>

  <Tab title="After: LLM tool with structured output">
    The LLM tool with `palmyra-med` and structured output provides similar functionality:

    <CodeGroup>
      ```python Python theme={null}
      import json
      from writerai import Writer

      # Initialize the Writer client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      messages = [{"role": "user", "content": "Extract medical entities from this text: the symptoms are soreness, a temperature and cough"}]

      tools = [{
        "type": "llm",
        "function": {
          "description": "A function that invokes the Palmyra Med model, specialized in analyzing medical text. Any user request for medical analysis should use this tool.",
          "model": "palmyra-med"
        }
      }]

      response_format = {
        "type": "json_schema",
        "json_schema": {
          "name": "medical_entities",
          "schema": {
            "type": "object",
            "properties": {
              "entities": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "text": {"type": "string"},
                    "category": {"type": "string"},
                    "score": {"type": "number"}
                  },
                  "required": ["text", "category", "score"],
                  "additionalProperties": False
                }
              }
            },
            "required": ["entities"],
            "additionalProperties": False
          },
          "strict": True
        }
      }

      response = client.chat.chat(
        model="palmyra-x5", 
        messages=messages, 
        tools=tools,
        tool_choice="auto",
        response_format=response_format
      )

      # Parse the JSON response
      entities = json.loads(response.choices[0].message.content)
      print(entities)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from "writer-sdk";

      // Initialize the Writer client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const messages = [{role: "user", content: "Extract medical entities from this text: the symptoms are soreness, a temperature and cough"}];

      const tools = [{
        type: "llm",
        function: {
          description: "A function that invokes the Palmyra Med model, specialized in analyzing medical text. Any user request for medical analysis should use this tool.",
          model: "palmyra-med"
        }
      }];

      const responseFormat = {
        type: "json_schema",
        json_schema: {
          name: "medical_entities",
          schema: {
            type: "object",
            properties: {
              entities: {
                type: "array",
                items: {
                  type: "object",
                  properties: {
                    text: {type: "string"},
                    category: {type: "string"},
                    score: {type: "number"}
                  },
                  required: ["text", "category", "score"],
                  additionalProperties: false
                }
              }
            },
            required: ["entities"],
            additionalProperties: false
          },
          strict: true
        }
      };

      const response = await client.chat.chat({
        model: "palmyra-x5", 
        messages: messages, 
        tools: tools,
        tool_choice: "auto",
        response_format: responseFormat
      });

      // Parse the JSON response
      const entities = JSON.parse(response.choices[0].message.content);
      console.log(entities);
      ```
    </CodeGroup>

    **Response:**

    ```json  theme={null}
    {
      "id": "1234",
      "object": "chat.completion",
      "choices": [
        {
          "index": 0,
          "finish_reason": "stop",
          "message": {
            "content": "{\"entities\":[{\"text\":\"soreness\",\"category\":\"MEDICAL_CONDITION\",\"score\":0.93},{\"text\":\"temperature\",\"category\":\"MEDICAL_CONDITION\",\"score\":0.89},{\"text\":\"cough\",\"category\":\"MEDICAL_CONDITION\",\"score\":0.96}]}",
            "role": "assistant",
            "tool_calls": null,
            "graph_data": {
              "sources": null,
              "status": null,
              "subqueries": null
            },
            "llm_data": {
              "prompt": "Extract medical entities from this text: the symptoms are soreness, a temperature and cough",
              "model": "palmyra-med"
            },
            "image_data": null,
            "translation_data": null,
            "refusal": null
          },
          "logprobs": null
        }
      ],
      "created": 1741970653,
      "model": "palmyra-x5",
      "usage": {
        "prompt_tokens": 259,
        "total_tokens": 305,
        "completion_tokens": 46,
        "prompt_token_details": null,
        "completion_tokens_details": null
      },
      "system_fingerprint": "v1",
      "service_tier": null
    }
    ```

    The structured output is returned as a JSON string in `choices[0].message.content`, which you can parse:

    ```json  theme={null}
    {
      "entities": [
        {
          "text": "soreness",
          "category": "MEDICAL_CONDITION",
          "score": 0.93
        },
        {
          "text": "temperature",
          "category": "MEDICAL_CONDITION",
          "score": 0.89
        },
        {
          "text": "cough",
          "category": "MEDICAL_CONDITION",
          "score": 0.96
        }
      ]
    }
    ```
  </Tab>
</Tabs>

## Access LLM metadata

The LLM tool response includes metadata in the `llm_data` field:

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "Extract medical entities from this text: the symptoms are soreness, a temperature and cough"}]

  tools = [{
    "type": "llm",
    "function": {
      "description": "A function that invokes the Palmyra Med model, specialized in analyzing medical text. Any user request for medical analysis should use this tool.",
      "model": "palmyra-med"
    }
  }]

  response = client.chat.chat(
    model="palmyra-x5", 
    messages=messages, 
    tools=tools,
    tool_choice="auto"
  )

  # Get the analysis result
  analysis = response.choices[0].message.content

  # Get LLM metadata
  llm_metadata = response.choices[0].message.llm_data
  prompt = llm_metadata.prompt
  model_used = llm_metadata.model

  print(f"Analysis from {model_used}: {analysis}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const messages = [{role: "user", content: "Extract medical entities from this text: the symptoms are soreness, a temperature and cough"}];

  const tools = [{
    type: "llm",
    function: {
      description: "A function that invokes the Palmyra Med model, specialized in analyzing medical text. Any user request for medical analysis should use this tool.",
      model: "palmyra-med"
    }
  }];

  const response = await client.chat.chat({
    model: "palmyra-x5", 
    messages: messages, 
    tools: tools,
    tool_choice: "auto"
  });

  // Get the analysis result
  const analysis = response.choices[0].message.content;

  // Get LLM metadata
  const llmMetadata = response.choices[0].message.llm_data;
  const prompt = llmMetadata.prompt;
  const modelUsed = llmMetadata.model;

  console.log(`Analysis from ${modelUsed}: ${analysis}`);
  ```
</CodeGroup>

## Explore related features

Learn more about the LLM tool and related features:

* [LLM tool guide (model delegation)](/home/model-delegation)
* [Structured output](/home/structured-output)
* [Chat completion guide](/home/chat-completion)
* [Palmyra Med model](/home/models#palmyra-med)


# Migrate from translation API to translation tool
Source: https://dev.writer.com/api-reference/migration-guides/translation-api



This guide shows you how to migrate from the deprecated [Translation API endpoint](/api-reference/translation-api/translate) to the [translation tool](/home/translation-tool) in chat completions. After completing these steps, you can translate text using the translation tool, which provides the same capabilities within a chat completion workflow.

## Compare the APIs

The Translation API and the translation tool both provide text translation, but the translation tool integrates translation into conversational workflows and changes how you specify translation requests and configurations. The table below compares the two approaches.

| Aspect                | Translation API                                                                                                               | Translation tool                                                                                                                                                                                                                                                                        |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint**          | `/v1/translation`                                                                                                             | `/v1/chat` with the prebuilt [translation tool](/home/translation-tool) specification                                                                                                                                                                                                   |
| **Request structure** | Pass translation parameters such as `text`, `source_language_code`, `target_language_code`, etc. directly in the request body | Provide the text to translate as part of the conversation `messages` array and include the [translation tool](/home/translation-tool) in the `tools` array. Specify additional settings (such as languages or preferences) in the tool configuration, not as direct request parameters. |
| **Response format**   | Translation in the `data` field                                                                                               | Answer in `choices[0].message.content`; structured details in the `translation_data` field                                                                                                                                                                                              |
| **Parameter control** | Explicit API parameters for each option                                                                                       | Most translation details (languages, formality, etc.) specified in the prompt or tool configuration rather than as top-level request fields                                                                                                                                             |

## Migrate your code

The tabs below show a request using the translation API and the same request using the translation tool.

<Tabs>
  <Tab title="Before: Translation API">
    The Translation API accepts text and translation parameters directly in the request body:

    <CodeGroup>
      ```bash cURL theme={null}
      curl --request POST \
        --url https://api.writer.com/v1/translation \
        --header "Authorization: Bearer $WRITER_API_KEY" \
        --header 'Content-Type: application/json' \
        --data '{
        "model": "palmyra-translate",
        "source_language_code": "en",
        "target_language_code": "es",
        "text": "Hello, world!",
        "formality": true,
        "length_control": true,
        "mask_profanity": true
      }'
      ```

      ```python Python theme={null}
      from writerai import Writer

      # Initialize the Writer client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      response = client.translation.translate(
        model="palmyra-translate",
        source_language_code="en",
        target_language_code="es",
        text="Hello, world!",
        formality=True,
        length_control=True,
        mask_profanity=True
      )

      print(response.data)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from "writer-sdk";

      // Initialize the Writer client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const response = await client.translation.translate({
        model: "palmyra-translate",
        source_language_code: "en",
        target_language_code: "es",
        text: "Hello, world!",
        formality: true,
        length_control: true,
        mask_profanity: true
      });

      console.log(response.data);
      ```
    </CodeGroup>

    **Response:**

    ```json  theme={null}
    {
      "data": "¡Hola, mundo!"
    }
    ```
  </Tab>

  <Tab title="After: Translation tool">
    The translation tool uses the chat completions endpoint with a translation tool specification. The model handles the translation request based on your message and the tool configuration:

    <CodeGroup>
      ```bash cURL theme={null}
      curl --location 'https://api.writer.com/v1/chat' \
        --header 'Content-Type: application/json' \
        --header "Authorization: Bearer $WRITER_API_KEY" \
        --data '{
          "model": "palmyra-x5",
          "messages": [
            {
              "role": "user",
              "content": "Translate the following message to Spanish: Hello, world!"
            }
          ],
          "tool_choice": "auto",
          "tools": [
            {
              "type": "translation",
              "function": {
                "model": "palmyra-translate",
                "formality": true,
                "length_control": true,
                "mask_profanity": true
              }
            }
          ]
        }'
      ```

      ```python Python theme={null}
      from writerai import Writer

      # Initialize the Writer client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      messages = [{"role": "user", "content": "Translate the following message to Spanish: 'Hello, world!'"}]

      tools = [{
        "type": "translation",
        "function": {
          "model": "palmyra-translate",
          "formality": True,
          "length_control": True,
          "mask_profanity": True
        }
      }]

      response = client.chat.chat(
        model="palmyra-x5", 
        messages=messages, 
        tools=tools,
        tool_choice="auto"
      )

      print(response.choices[0].message.content)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from "writer-sdk";

      // Initialize the Writer client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const messages = [{role: "user", content: "Translate the following message to Spanish: 'Hello, world!'"}];

      const tools = [{
        type: "translation",
        function: {
          model: "palmyra-translate",
          formality: true,
          length_control: true,
          mask_profanity: true
        }
      }];

      const response = await client.chat.chat({
        model: "palmyra-x5", 
        messages: messages, 
        tools: tools,
        tool_choice: "auto"
      });

      console.log(response.choices[0].message.content);
      ```
    </CodeGroup>

    **Response:**

    ```json  theme={null}
    {
      "id": "63ae5c5d",
      "object": "chat.completion",
      "choices": [
        {
          "index": 0,
          "finish_reason": "tool_calls",
          "message": {
            "content": "¡Hola, mundo!",
            "role": "assistant",
            "translation_data": {
              "source_text": "Hello, world!",
              "source_language_code": "en",
              "target_language_code": "es"
            }
          }
        }
      ]
    }
    ```
  </Tab>
</Tabs>

## Map your parameters

The following table shows how Translation API parameters map to the translation tool:

| Translation API        | Translation tool                               |
| ---------------------- | ---------------------------------------------- |
| `text`                 | Include in the message `content` field         |
| `source_language_code` | `tools[0].function.source_language` (optional) |
| `target_language_code` | `tools[0].function.target_language` (optional) |
| `formality`            | `tools[0].function.formality`                  |
| `length_control`       | `tools[0].function.length_control`             |
| `mask_profanity`       | `tools[0].function.mask_profanity`             |

<Note>
  With the translation tool, the `source_language` and `target_language` parameters are optional. If you don't provide them, the model automatically detects the source language and determines the target language from your message.

  To specify languages explicitly, include them in your message prompt (for example, "Translate to Spanish") or use the optional `source_language` and `target_language` parameters in the tool configuration.
</Note>

## Access translation metadata

The translation tool response includes additional metadata in the `translation_data` field. The metadata includes the source text, source language, and target language:

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "Translate the following message to Spanish: 'Hello, world!'"}]

  tools = [{
    "type": "translation",
    "function": {
      "model": "palmyra-translate",
      "formality": True,
      "length_control": True,
      "mask_profanity": True
    }
  }]

  response = client.chat.chat(
    model="palmyra-x5", 
    messages=messages, 
    tools=tools,
    tool_choice="auto"
  )

  # Get translated text
  translated_text = response.choices[0].message.content

  # Get translation metadata
  translation_metadata = response.choices[0].message.translation_data
  source_lang = translation_metadata.source_language_code
  target_lang = translation_metadata.target_language_code
  source_text = translation_metadata.source_text

  print(f"Translated '{source_text}' from {source_lang} to {target_lang}: {translated_text}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const messages = [{role: "user", content: "Translate the following message to Spanish: 'Hello, world!'"}];

  const tools = [{
    type: "translation",
    function: {
      model: "palmyra-translate",
      formality: true,
      length_control: true,
      mask_profanity: true
    }
  }];
  const response = await client.chat.chat({
    model: "palmyra-x5", 
    messages: messages, 
    tools: tools,
    tool_choice: "auto"
  });

  // Get translated text
  const translatedText = response.choices[0].message.content;

  // Get translation metadata
  const translationMetadata = response.choices[0].message.translation_data;
  const sourceLang = translationMetadata.source_language_code;
  const targetLang = translationMetadata.target_language_code;
  const sourceText = translationMetadata.source_text;

  console.log(`Translated '${sourceText}' from ${sourceLang} to ${targetLang}: ${translatedText}`);
  ```
</CodeGroup>

## Explore related features

Learn more about the translation tool and related features:

* [Translation tool guide](/home/translation-tool)
* [Language support](/api-reference/translation-api/language-support)
* [Chat completion guide](/home/chat-completion)
* [Other prebuilt tools](/home/tool-calling)


# Migrate from web search API to web search tool
Source: https://dev.writer.com/api-reference/migration-guides/web-search



This guide shows you how to migrate from the deprecated [web search API endpoint](/api-reference/tool-api/web-search) to the [web search tool](/home/web-search-tool) in chat completions. After completing these steps, you can search the web using the web search tool, which provides the same capabilities within a chat completion workflow.

## Compare the APIs

The web search API and the web search tool provide similar search results, but the tool integrates web search into conversational workflows and requires specifying queries and configuration differently. The table below compares the two APIs.

| Aspect                | Web search API                                                                            | Web search tool                                                                                                                                                                                                                                                              |
| --------------------- | ----------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint**          | `/v1/tools/web-search`                                                                    | `/v1/chat` with the prebuilt [web search tool](/home/web-search-tool) specification                                                                                                                                                                                          |
| **Request structure** | Pass search parameters such as `query`, `search_depth`, etc. directly in the request body | Provide the search query as part of the conversation `messages` and add the [web search tool](/home/web-search-tool) in the `tools` array. Additional parameters (like domains to include or exclude) are specified in the tool configuration, not as direct request fields. |
| **Response format**   | Results in `answer` and `sources` fields                                                  | Answer in `choices[0].message.content` and data in `web_search_data` field                                                                                                                                                                                                   |
| **Parameter control** | Explicit API parameters                                                                   | Most parameters specified in message prompt; only `include_domains` and `exclude_domains` as tool configuration                                                                                                                                                              |

## Migrate your code

The tabs below show a request using the web search API and the same request using the web search tool.

<Tabs>
  <Tab title="Before: Web search API">
    The web search API accepts search parameters directly in the request body. The following example shows an example request using the web search API. View the same request using the web search tool in the [after migrating](#after-migrating) section.

    <CodeGroup>
      ```bash cURL theme={null}
      curl --location 'https://api.writer.com/v1/tools/web-search' \
        --header 'Content-Type: application/json' \
        --header "Authorization: Bearer $WRITER_API_KEY" \
        --data '{
          "query": "What are the most significant developments in artificial intelligence this year?",
          "include_domains": ["wikipedia.org", "github.com"],
          "exclude_domains": ["quora.com"],
          "search_depth": "advanced",
          "max_results": 10
        }'
      ```

      ```python Python theme={null}
      from writerai import Writer

      # Initialize the Writer client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      response = client.tools.web_search(
        query="What are the most significant developments in artificial intelligence this year?",
        include_domains=["wikipedia.org", "github.com"],
        exclude_domains=["quora.com"],
        search_depth="advanced",
        max_results=10
      )

      print(response.answer)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from "writer-sdk";

      // Initialize the Writer client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const response = await client.tools.webSearch({
        query: "What are the most significant developments in artificial intelligence this year?",
        include_domains: ["wikipedia.org", "github.com"],
        exclude_domains: ["quora.com"],
        search_depth: "advanced",
        max_results: 10
      });

      console.log(response.answer);
      ```
    </CodeGroup>

    **Response:**

    ```json  theme={null}
    {
      "query": "What are the most significant developments in artificial intelligence this year?",
      "answer": "This year has seen several significant developments...",
      "sources": [
        {
          "url": "https://www.ibm.com/think/insights/artificial-intelligence-trends",
          "raw_content": null
        }
      ]
    }
    ```
  </Tab>

  <Tab title="After: Web search tool">
    The web search tool uses the chat completions endpoint with a web search tool specification. The model handles the search based on your message and tool configuration. Parameters like `search_depth` and `max_results` are now specified in the message prompt:

    <CodeGroup>
      ```bash cURL theme={null}
      curl --location 'https://api.writer.com/v1/chat' \
        --header 'Content-Type: application/json' \
        --header "Authorization: Bearer $WRITER_API_KEY" \
        --data '{
          "model": "palmyra-x5",
          "messages": [
            {
              "role": "user",
              "content": "What are the most significant developments in artificial intelligence this year? Use advanced search depth and limit to 10 results."
            }
          ],
          "tool_choice": "auto",
          "tools": [
            {
              "type": "web_search",
              "function": {
                "include_domains": ["wikipedia.org", "github.com"],
                "exclude_domains": ["quora.com"]
              }
            }
          ]
        }'
      ```

      ```python Python theme={null}
      from writerai import Writer

      # Initialize the Writer client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      messages = [{"role": "user", "content": "What are the most significant developments in artificial intelligence this year? Use advanced search depth and limit to 10 results."}]

      tools = [{
        "type": "web_search",
        "function": {
          "include_domains": ["wikipedia.org", "github.com"],
          "exclude_domains": ["quora.com"]
        }
      }]

      response = client.chat.chat(
        model="palmyra-x5", 
        messages=messages, 
        tools=tools,
        tool_choice="auto"
      )

      print(response.choices[0].message.content)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from "writer-sdk";

      // Initialize the Writer client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const messages = [{role: "user", content: "What are the most significant developments in artificial intelligence this year? Use advanced search depth and limit to 10 results."}];

      const tools = [{
        type: "web_search",
        function: {
          include_domains: ["wikipedia.org", "github.com"],
          exclude_domains: ["quora.com"]
        }
      }];

      const response = await client.chat.chat({
        model: "palmyra-x5", 
        messages: messages, 
        tools: tools,
        tool_choice: "auto"
      });

      console.log(response.choices[0].message.content);
      ```
    </CodeGroup>

    **Response:**

    ```json  theme={null}
    {
      "id": "2ac04514",
      "object": "chat.completion",
      "choices": [
        {
          "index": 0,
          "finish_reason": "tool_calls",
          "message": {
            "content": "The latest developments in AI technology are happening at a rapid pace...",
            "role": "assistant",
            "web_search_data": {
              "search_depth": "advanced",
              "sources": [
                {
                  "url": "https://en.wikipedia.org/wiki/AI_boom",
                  "raw_content": null
                }
              ]
            }
          }
        }
      ]
    }
    ```
  </Tab>
</Tabs>

## Map your parameters

The following table shows how web search API parameters map to the web search tool. To customize search behavior in the web search tool, include your requirements in the message prompt.

| Web search API        | Web search tool                                                                      |
| --------------------- | ------------------------------------------------------------------------------------ |
| `query`               | Include in the message `content` field                                               |
| `include_domains`     | `tools[0].function.include_domains`                                                  |
| `exclude_domains`     | `tools[0].function.exclude_domains`                                                  |
| `search_depth`        | Include in the message prompt (for example, "perform an advanced search")            |
| `max_results`         | Include in the message prompt (for example, "limit to 10 sources")                   |
| `time_range`          | Include in the message prompt (for example, "from the last week")                    |
| `include_raw_content` | Include in the message prompt (for example, "include raw source text")               |
| `topic`               | Include in the message prompt (for example, "search news articles")                  |
| `country`             | Include in the message prompt (for example, "localize results to the United States") |
| `chunks_per_source`   | Include in the message prompt (for example, "extract 3 text segments per source")    |

<Note>
  With the web search tool, most search parameters are specified in your message prompt rather than as separate API parameters. The model interprets your requirements and configures the search accordingly.

  Only `include_domains` and `exclude_domains` are available as tool configuration parameters.
</Note>

## Access search metadata

The web search tool response includes search metadata, including sources and raw text if requested, in the `web_search_data` field:

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "What are the most significant developments in artificial intelligence this year? Use advanced search depth and limit to 10 results."}]

  tools = [{
    "type": "web_search",
    "function": {
      "include_domains": ["wikipedia.org", "github.com"],
      "exclude_domains": ["quora.com"]
    }
  }]

  response = client.chat.chat(
    model="palmyra-x5", 
    messages=messages, 
    tools=tools,
    tool_choice="auto"
  )

  # Get the search answer
  answer = response.choices[0].message.content

  # Get search metadata
  search_metadata = response.choices[0].message.web_search_data
  search_depth = search_metadata.search_depth
  sources = search_metadata.sources

  print(f"Answer: {answer}")
  print(f"Search depth: {search_depth}")
  print(f"Found {len(sources)} sources")

  for source in sources:
      print(f"- {source.url}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const messages = [{role: "user", content: "What are the most significant developments in artificial intelligence this year? Use advanced search depth and limit to 10 results."}];

  const tools = [{
    type: "web_search",
    function: {
      include_domains: ["wikipedia.org", "github.com"],
      exclude_domains: ["quora.com"]
    }
  }];

  const response = await client.chat.chat({
    model: "palmyra-x5", 
    messages: messages, 
    tools: tools,
    tool_choice: "auto"
  });

  // Get the search answer
  const answer = response.choices[0].message.content;

  // Get search metadata
  const searchMetadata = response.choices[0].message.web_search_data;
  const searchDepth = searchMetadata.search_depth;
  const sources = searchMetadata.sources;

  console.log(`Answer: ${answer}`);
  console.log(`Search depth: ${searchDepth}`);
  console.log(`Found ${sources.length} sources`);

  sources.forEach(source => {
    console.log(`- ${source.url}`);
  });
  ```
</CodeGroup>

## Explore related features

Learn more about the web search tool and related features:

* [Web search tool guide](/home/web-search-tool)
* [Chat completion guide](/home/chat-completion)
* [Other prebuilt tools](/home/tool-calling)
* [Streaming responses](/home/streaming)


# Paginate API results
Source: https://dev.writer.com/api-reference/pagination



The Writer API supports pagination for list endpoints. By default, the API returns 50 results per page. See below for more information about how to paginate your API requests.

## Pagination parameters

The following parameters are available for pagination in the API:

| Parameter | Type      | Description                                                                                                                                                |
| --------- | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `limit`   | `integer` | The number of items to return per page. The default is 50. The maximum is 100.                                                                             |
| `order`   | `string`  | The order in which to return the items, based on the `created_at` field for the resource. The default is `desc`. The possible values are `asc` and `desc`. |
| `before`  | `string`  | The ID of first object in the previous page. This parameter instructs the API to return the previous page of results.                                      |
| `after`   | `string`  | The ID of the last object in the next page. This parameter instructs the API to return the next page of results.                                           |

## Pagination response

The API returns the following pagination information in the response body:

| Parameter  | Type      | Description                                        |
| ---------- | --------- | -------------------------------------------------- |
| `has_more` | `boolean` | Indicates whether there are more pages of results. |
| `first_id` | `string`  | The ID of the first object in the collection.      |
| `last_id`  | `string`  | The ID of the last object in the collection.       |

## Pagination example: Retrieving files

### Retrieve two most recently created files

The following cURL command retrieves the two most recently created files.

```bash  theme={null}
curl -X GET "https://api.writer.com/v1/files?limit=2" \
  -H "Authorization: Bearer $API_KEY" \
  -H "Content-Type: application/json"
```

The response body contains the two most recently created files, along with the pagination information:

* The `has_more` parameter is `true`, indicating that there are more files to retrieve
* The `first_id` parameter is the ID of the first file in the collection
* The `last_id` parameter is the ID of the last file in the collection

```json  theme={null}
{
  "data": [
    {
      "id": "c6006e1f",
      "created_at": "2025-06-04T18:19:12.495984Z",
      "name": "paper.pdf",
      "graph_ids": [],
      "status": "completed"
    },
    {
      "id": "57c3754c",
      "created_at": "2025-06-04T18:19:09.973779Z",
      "name": "meeting_notes.pdf",
      "graph_ids": [],
      "status": "completed"
    }
  ],
  "has_more": true,
  "first_id": "c6006e1f",
  "last_id": "57c3754c"
}
```

### Retrieve the next page of results

To retrieve the next page of results, you can use the `after` parameter to specify the ID of the last object in the previous page.

```bash  theme={null}
curl -X GET "https://api.writer.com/v1/files?limit=2&after=57c3754c" \
  -H "Authorization: Bearer $API_KEY" \
  -H "Content-Type: application/json"
```

## SDK support

The Python and JavaScript SDKs provide iterators that automatically handle pagination for you. See more information about pagination in the [Python SDK](https://github.com/writer/writer-python/blob/main/README.md#pagination) and [JavaScript SDK](https://github.com/writer/writer-node/blob/main/README.md#pagination) documentation.


# Understand rate limits
Source: https://dev.writer.com/api-reference/rate-limits

Understand API rate limits for Writer endpoints. Learn about RPM and TPM limits, best practices, and retry strategies for optimal performance.

<Info>
  For custom rate limits, **[contact Sales](https://go.writer.com/contact-sales)**.
</Info>

To ensure optimal service performance and fairness in resource allocation, our endpoints enforce the following rate limits.

1. **RPM (requests per minute)**: 400
2. **TPM (token per min)**: 25,000

## Best practices

<AccordionGroup>
  <Accordion title="Monitor request rates" icon="monitor-waveform">
    Implement mechanisms in your applications to track and regulate the
    frequency of your requests to stay within the prescribed limits.
  </Accordion>

  <Accordion title="Adaptive retry strategies" icon="rotate-right">
    In cases where you exceed these limits, employ adaptive retry strategies
    with exponential backoff to handle retries efficiently and reduce the
    likelihood of consecutive limit breaches.
  </Accordion>

  <Accordion title="Response to HTTP 429 status codes" icon="code">
    Prepare to handle HTTP 429 (too many requests) responses by pausing or
    slowing down request rates.
  </Accordion>
</AccordionGroup>


# Secure your integration
Source: https://dev.writer.com/api-reference/security



Ensure compliance and secure communications between Writer and your server.

Writer API supports TLS 1.3 by default and TLS 1.2+ in other cases

## Using TLS and HTTPS

TLS refers to the process of securely transmitting data between the client—the app or browser that your customer is using—and your server. This was originally performed using the SSL (Secure Sockets Layer) protocol. However, this is outdated and no longer secure, and has been replaced by TLS. The term “SSL” continues to be used colloquially when referring to TLS and its function to protect transmitted data.

Payment pages must make use of a modern version of TLS (for example, TLS 1.2) as it significantly reduces the risk of you or your customers being exposed to a man-in-the-middle attack. TLS attempts to accomplish the following:

* Encrypt and verify the integrity of traffic between the client and your server
* Verify that the client is communicating with the correct server. In practice, this usually means verifying that the owner of the domain and the owner of the server are the same entity. This helps prevent man-in-the-middle attacks. Without it, there’s no guarantee that you’re encrypting traffic to the right recipient.

Additionally, your customers are more comfortable sharing sensitive information on pages visibly served over HTTPS, which can help increase your customer conversion rate.

If need be, you can test your integration without using HTTPS, and enable it once you’re ready to accept live charges. However, all interactions between your server and Writer must use TLS 1.2 (i.e, when using our libraries).

## Setting up TLS

SERVING RESOURCES SECURELY\
You should make sure that any resources (JavaScript, CSS, images, etc.) are also served over TLS to avoid a mixed content warning being shown to your customers in their browser.

A digital certificate—a file issued by a certification authority (CA)—is needed in order to use TLS. When installed, this certificate assures the client that it’s really communicating with the server it expects to be talking to, not an impostor. You should get a digital certificate from a reputable certificate provider, such as:

* Let’s Encrypt
* DigiCert
* NameCheap\
  Certificates can vary in cost, depending on the type of certificate and provider. Let’s Encrypt is a certificate authority that provides certificates for free.

Conceptually, setting up TLS is very straightforward: a certificate is purchased from a suitable provider, and then your server is configured to use it. The actual process does tend to be somewhat complex, and we recommend you follow the installation guide of the provider you use.

As TLS is a complex suite of cryptographic tools, it's easy to miss a few details. We recommend using the SSL Server Test by Qualys SSL Labs to make sure you have everything set up in a secure way.

## Additional security considerations

It can be a security risk to include JavaScript from other sites as your security becomes dependent on theirs. If they’re ever compromised, an attacker may be able to execute arbitrary code on your page. In practice, many sites make use of JavaScript for services like Google Analytics, even on secure pages. Nonetheless, it’s something to be aware of, and ideally minimize.

If you’re making use of webhooks, we recommend using TLS for the endpoint to avoid traffic being intercepted and the notifications altered (sensitive information is never included in a webhook event).

While complying with the Data Security Standards is important, it shouldn’t be where you stop thinking about security. Some good resources to learn about web security are:

* OWASP
* SANS
* NIST\
  Out-of-scope card data that you can safely store\
  Writer returns non-sensitive card information in the response to a charge request. This includes the card type, the last four digits of the card, and the expiration date. This information is not subject to PCI compliance, so you are able to store any of these properties in your database.


# AI detection
Source: https://dev.writer.com/api-reference/tool-api/ai-detect

post /v1/tools/ai-detect
Detects if content is AI- or human-generated, with a confidence score. Content must have at least 350 characters

<Warning>
  **Deprecation notice**: The [AI detection API endpoint](/api-reference/tool-api/ai-detect) at `/v1/tools/ai-detect` is deprecated and will be removed on **December 22, 2025**.

  This endpoint will no longer be available after the removal date. Please plan to migrate any integrations that currently use this endpoint to alternative solutions.
</Warning>


# Medical comprehend
Source: https://dev.writer.com/api-reference/tool-api/comprehend-medical

post /v1/tools/comprehend/medical
Analyze unstructured medical text to extract entities labeled with standardized medical codes and confidence scores.

<Warning>
  **Deprecation notice**: The [medical comprehend API endpoint](/api-reference/tool-api/comprehend-medical) at `/v1/tools/comprehend/medical` is deprecated and will be removed on **December 22, 2025**.

  **Migration path**: Use the [LLM tool](/home/model-delegation) in chat completions to delegate medical analysis tasks to the `palmyra-med` model. This approach provides the same medical analysis capabilities within a chat completion workflow. See the [migration guide](/api-reference/migration-guides/comprehend-medical) for detailed instructions.
</Warning>


# Parse PDF
Source: https://dev.writer.com/api-reference/tool-api/pdf-parser

post /v1/tools/pdf-parser/{file_id}
Parse PDF to other formats.

<Warning>
  **Deprecation notice**: The [parse PDF API endpoint](/api-reference/tool-api/pdf-parser) at `/v1/tools/pdf-parser/{file_id}` is deprecated and will be removed on **December 22, 2025**.

  **Migration path**: We plan to introduce a prebuilt PDF parsing tool for chat completions that will provide similar functionality. This tool will work similarly to other prebuilt tools like the [Vision tool](/home/vision-tool) or [LLM tool](/home/model-delegation). We will provide more details about this alternative when it becomes available.
</Warning>


# Text-to-graph
Source: https://dev.writer.com/api-reference/tool-api/text-to-graph

post /v1/tools/text-to-graph
Performs name entity recognition on the supplied text accepting a maximum of 35000 words.



# Web search
Source: https://dev.writer.com/api-reference/tool-api/web-search

post /v1/tools/web-search
Search the web for information about a given query and return relevant results with source URLs.

<Warning>
  **Deprecation notice**: The [web search API endpoint](/api-reference/tool-api/web-search) at `/v1/tools/web-search` is deprecated and will be removed on **December 22, 2025**.

  **Migration path**: Use the [web search tool](/home/web-search-tool) in chat completions to perform web searches during conversations. The web search tool provides the same search capabilities within a chat completion workflow. See the [migration guide](/api-reference/migration-guides/web-search) for detailed instructions.
</Warning>


# View supported languages
Source: https://dev.writer.com/api-reference/translation-api/language-support



The Translation API allows you to translate text from one language to another. Below are the languages supported for the translation API and the [formality](#formality), [length control](#length-control), and [profanity masking](#profanity-masking) parameters.

## Supported languages

To specify a language for the translation API, use the [ISO-639-1](https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes) language code. For example, `en` for English, `zh` for Chinese, `fr` for French, `es` for Spanish. If the language has a variant, the code appends the two-digit [ISO-3166 country code](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes). For example, Mexican Spanish is `es-MX`.

The Translation API supports the following languages:

| Language              | Language code |
| --------------------- | ------------- |
| Afrikaans             | `af`          |
| Albanian              | `sq`          |
| Amharic               | `am`          |
| Arabic                | `ar`          |
| Armenian              | `hy`          |
| Azerbaijani           | `az`          |
| Bengali               | `bn`          |
| Bosnian               | `bs`          |
| Bulgarian             | `bg`          |
| Catalan               | `ca`          |
| Chinese (Simplified)  | `zh`          |
| Chinese (Traditional) | `zh-TW`       |
| Croatian              | `hr`          |
| Czech                 | `cs`          |
| Danish                | `da`          |
| Dari                  | `fa-AF`       |
| Dutch                 | `nl`          |
| English               | `en`          |
| Estonian              | `et`          |
| Farsi (Persian)       | `fa`          |
| Filipino, Tagalog     | `tl`          |
| Finnish               | `fi`          |
| French                | `fr`          |
| French (Canada)       | `fr-CA`       |
| Georgian              | `ka`          |
| German                | `de`          |
| Greek                 | `el`          |
| Gujarati              | `gu`          |
| Haitian Creole        | `ht`          |
| Hausa                 | `ha`          |
| Hebrew                | `he`          |
| Hindi                 | `hi`          |
| Hungarian             | `hu`          |
| Icelandic             | `is`          |
| Indonesian            | `id`          |
| Irish                 | `ga`          |
| Italian               | `it`          |
| Japanese              | `ja`          |
| Kannada               | `kn`          |
| Kazakh                | `kk`          |
| Korean                | `ko`          |
| Latvian               | `lv`          |
| Lithuanian            | `lt`          |
| Macedonian            | `mk`          |
| Malay                 | `ms`          |
| Malayalam             | `ml`          |
| Maltese               | `mt`          |
| Marathi               | `mr`          |
| Mongolian             | `mn`          |
| Norwegian (Bokmål)    | `no`          |
| Pashto                | `ps`          |
| Polish                | `pl`          |
| Portuguese (Brazil)   | `pt`          |
| Portuguese (Portugal) | `pt-PT`       |
| Punjabi               | `pa`          |
| Romanian              | `ro`          |
| Russian               | `ru`          |
| Serbian               | `sr`          |
| Sinhala               | `si`          |
| Slovak                | `sk`          |
| Slovenian             | `sl`          |
| Somali                | `so`          |
| Spanish               | `es`          |
| Spanish (Mexico)      | `es-MX`       |
| Swahili               | `sw`          |
| Swedish               | `sv`          |
| Tamil                 | `ta`          |
| Telugu                | `te`          |
| Thai                  | `th`          |
| Turkish               | `tr`          |
| Ukrainian             | `uk`          |
| Urdu                  | `ur`          |
| Uzbek                 | `uz`          |
| Vietnamese            | `vi`          |
| Welsh                 | `cy`          |

## Formality

Formal translations use language associated with formal, polite communication, such as formal forms of second person pronouns and their verb agreement. Informal translations use language associated with informal, casual communication, such as informal forms of second person pronouns and their verb agreement.

The following languages support formal and informal translations. Set the `formality` parameter to `true` to use a formal translation, and `false` to use an informal translation.

| Language              | Language code |
| --------------------- | ------------- |
| Dutch                 | `nl`          |
| French                | `fr`          |
| French (Canada)       | `fr-CA`       |
| German                | `de`          |
| Hindi                 | `hi`          |
| Italian               | `it`          |
| Japanese              | `ja`          |
| Korean                | `ko`          |
| Portuguese (Portugal) | `pt-PT`       |
| Spanish               | `es`          |
| Spanish (Mexico)      | `es-MX`       |

## Length control

Sometimes, translated text is longer than the original source text. You can use length control to limit the length of the translated text. Set the `length_control` parameter to `true` to enable length control.

Length control is available for the following languages:

| Language            | Language code |
| ------------------- | ------------- |
| French              | `fr`          |
| German              | `de`          |
| Italian             | `it`          |
| Portuguese (Brazil) | `pt`          |
| Spanish             | `es`          |

## Profanity masking

You can choose to mask profanity in the translated text for all languages **except the languages listed in the table below**.

The following languages do not support profanity masking:

| Language   | Language code |
| ---------- | ------------- |
| Bengali    | `bn`          |
| Hindi      | `hi`          |
| Malayalam  | `ml`          |
| Punjabi    | `pa`          |
| Sinhala    | `si`          |
| Vietnamese | `vi`          |


# Translate text
Source: https://dev.writer.com/api-reference/translation-api/translate

post /v1/translation
Translate text from one language to another.

<Warning>
  **Deprecation notice**: The [translation API endpoint](/api-reference/translation-api/translate) at `/v1/translation` is deprecated and will be removed on **December 22, 2025**.

  **Migration path**: Use the [translation tool](/home/translation-tool) in chat completions to translate text during conversations. The translation tool provides the same translation capabilities within a chat completion workflow. See the [migration guide](/api-reference/migration-guides/translation-api) for detailed instructions.
</Warning>

The Translation API allows you to translate text from one language to another. See [Language support](/api-reference/translation-api/language-support) for a list of supported languages.


# Analyze images
Source: https://dev.writer.com/api-reference/vision-api/analyze-images

post /v1/vision
Submit images and documents with a prompt to generate an analysis. Supports JPG, PNG, PDF, and TXT files up to 7MB each.



# Add files to Writer Cloud
Source: https://dev.writer.com/blueprints/addfilestowritercloud



Uploads files to the Writer platform.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-block.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=46ec31b2b07e69e33047416a967aa5a6" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/add-files-to-writer-cloud-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-block.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=8390e7d102ff0e2f4e7c16215c7e2664 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-block.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=1edcb79d677b77c08def9144b6efb4db 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-block.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=bbe59c19922152f7a1939d4f1aef4ab3 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-block.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=2de7e79d53643df3fd6cd0a71f6203a3 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-block.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=eb86c5f63cdb7bdbeda7149e6c084841 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-block.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b0cc271a9fa1dbd76ae61c725b991d91 2500w" />

## Overview

The **Add files to Writer Cloud** block uploads files to the Writer cloud so you can use them in your workflows. It accepts a list of file objects as inputs.

## File inputs

The **Add files to Writer Cloud** block accepts a list of file objects as inputs. Each file object must have the following fields:

| Field  | Type   | Description                                                                                                    |
| ------ | ------ | -------------------------------------------------------------------------------------------------------------- |
| `name` | string | The name of the file.                                                                                          |
| `data` | bytes  | The content of the file as bytes.                                                                              |
| `type` | string | The [MIME type](https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/MIME_types/Common_types) of the file. |

### Adding files from the file input block

If you upload a file with the **File input** interface block, the list of file objects is automatically created for you, so all you have to do is pass the list to the **Add files to Writer Cloud** block. See the [example below](#example%3A-upload-files-to-writer-cloud-from-the-file-input-block) for how to do this.

You can retrieve the file objects list from the **File input** interface block in two ways:

* Connect a UI Trigger to the **File input** block's `wf-file-change` event. Then, use the `@{payload}` environment variable to access the file objects. The trigger will fire when a user adds or removes files from the file input block.
* Under **Binding** in the **File input** interface block, define a state variable that contains the list of file objects. Then reference that variable in the **Add files to Writer Cloud** block.

## Output

Once the files are uploaded to the Writer cloud, the **Add files to Writer Cloud** block returns a list containing the uploaded file IDs and other information about the files.

You can access the output of an **Add files to Writer Cloud** block using the `@{result}` variable in the block that follows it in a blueprint.

Each file object has the following fields:

| Field        | Type   | Description                                                             |
| ------------ | ------ | ----------------------------------------------------------------------- |
| `id`         | string | The ID of the file.                                                     |
| `name`       | string | The name of the file.                                                   |
| `status`     | string | The status of the file. Can be `in_progress`, `completed`, or `failed`. |
| `created_at` | string | The date and time the file was created.                                 |
| `graph_ids`  | array  | The IDs of any Knowledge Graphs that the file is associated with.       |

```json  theme={null}
[
    {
        "id": "701118ae",
        "name": "research_paper.pdf",
        "status": "in_progress",
        "created_at": "2025-06-17T16:18:42.672407+00:00",
        "graph_ids": []
    }
]
```

### File processing status

If the uploaded file's status is `in_progress`, the file is being processed and is not ready to be used in a workflow.

Some files are processed quickly, such as PDFs and images, and are ready to be used in a workflow within seconds. Others, such as Word documents, may take a few minutes to process.

There are a few ways you can handle files that are still being processed:

* Split the blueprint into two parts: one that uploads the files when a user adds them to the file input block, and another that uses the files when a user clicks a button in the UI. This way, you can use the files in the workflow as soon as they're uploaded, and wait for the user to click a button to use the files in the second part of the blueprint. See an example in the [Upload, parse, and summarize PDFs](/agent-builder/summarize-pdfs#build-the-blueprints) tutorial.
* Add a Python block that introduces a few seconds of delay before the workflow continues.
* Add a [**Tool calling** block](/agent-builder/tool-calling) that can check the status of the file [using the Writer API](/api-reference/file-api/get-file) and wait for the file to be processed before continuing.

## Example: Upload files to Writer Cloud from the file input block

This example shows how to upload files to Writer Cloud that are stored in a state variable. In this example, the interface contains a file input block that's bound to the state variable `files`. After the UI Trigger fires, the **Add files to Writer Cloud** block uploads the files to Writer Cloud by accessing the `@{files}` state variable.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f34f6e8d3f07c6f5678f7ff34ce5e1b5" alt="" data-og-width="2140" width="2140" data-og-height="940" height="940" data-path="images/agent-builder/blueprints/add-files-to-writer-cloud-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=81140f17c9651a99eb78957a4fc972a6 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b337526f958550756a0ea1368a5d5080 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e49d37b7f1a7d5539995bc4d5901254a 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=92c6d139a656b6a51cec27370554058c 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=168fdd400ee37b30c877485e36fef4ae 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=62c00920ae7edea87bf6e21a6b6406e3 2500w" />

The `@{files}` state variable looks like this:

```json  theme={null}
[
    {
        "name": "research_paper.pdf",
        "data": "...",
        "type": "application/pdf"
    }
]
```

## Example: Create and upload files from Python processing

This example shows how to manually create file objects in a **Python code** block and then upload them to Writer Cloud. In this scenario, a Python block generates a CSV report from data processing and creates the file object programmatically.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example-python.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=2cadb6231212ce4fdf5013147b457f28" alt="" data-og-width="2406" width="2406" data-og-height="1202" height="1202" data-path="images/agent-builder/blueprints/add-files-to-writer-cloud-example-python.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example-python.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c9785e96df66f8d2e974e86dcacaf602 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example-python.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=48e173027ac18c5595fa95aa9e1977c5 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example-python.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=6f850d373f70264b0cbc625df3160545 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example-python.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f729631e3475060e58d0cd0668fc5eb0 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example-python.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b748df52fca30a3785a952569df2fd5e 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-files-to-writer-cloud-example-python.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c3482aec1fe379de080fb46988cad3da 2500w" />

The **Python code** block contains the following code, which creates a CSV file object and returns it as a list for the **Add files to Writer Cloud** block to access.

```python  theme={null}
import csv
import io

# Sample data processing
data = [
    ["Name", "Score", "Category"],
    ["Product A", 85, "Electronics"],
    ["Product B", 92, "Home & Garden"],
    ["Product C", 78, "Electronics"]
]

# Create CSV content
csv_buffer = io.StringIO()
writer = csv.writer(csv_buffer)
writer.writerows(data)
csv_content = csv_buffer.getvalue()

# Convert to bytes
csv_bytes = csv_content.encode('utf-8')

# Create file object
file_object = {
    "name": "product_analysis.csv",
    "data": csv_bytes,
    "type": "text/csv"
}

# Return the file object as a list (required by Add files to Writer Cloud block)
set_output([file_object])
```

The Python block outputs `[file_object]`, which the **Add files to Writer Cloud** block then accesses using `@{result}` to upload the CSV file.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Files</td>
      <td>Object</td>
      <td>-</td>

      <td>
        <code>\[]</code>
      </td>

      <td>A list of files to be uploaded to the Writer platform. You can use files uploaded via the File input component or specify dictionaries with data, type and name.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>File successfully uploaded.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

Access the output of a **Add files to Writer Cloud** block using the `@{result}` variable in the block that follows it in a blueprint.


# Add to Knowledge Graph
Source: https://dev.writer.com/blueprints/addtoknowledgegraph



Adds structured information to the knowledge graph. Use for storing facts AI can reference.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-block.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=cb8e3d7d668e0748a96e90d710cdd44c" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/add-to-knowledge-graph-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-block.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=14b994531c702b60d3fb3f0b06de9ddd 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-block.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=de3f72fa92d1d3605feb19e08c8f722d 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-block.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=8538a7d3b6972fb75c456f1d23a55bf7 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-block.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a28c7e32a15f1397d45904ff910586f2 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-block.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=335cea5e76e123beaa30110cfbaeb42b 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-block.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=8792d7721886fb459ad988bdd02ea0c3 2500w" />

## Overview

The **Add to Knowledge Graph** block ingests files into a Writer Knowledge Graph, making the information available for AI-powered search, retrieval, and question answering. You can use this block to build enterprise AI applications that need to reference company documents, policies, or structured data.

<Tip>
  The Add to Knowledge Graph block only works for Knowledge Graphs that support file uploads. You can't add files to Knowledge Graphs that support data connectors, like Google Drive or Notion, or URLs.
</Tip>

**Supported file types:** You can upload `PDF`, `TXT`, `DOC/DOCX`, `PPT/PPTX`, `EML`, `HTML`, `SRT`, `CSV`, or `XLS/XLSX` files to a Knowledge Graph.

## How it works

1. **File selection**: Choose the files to ingest into the Knowledge Graph.
2. **Graph specification**: Select the target Knowledge Graph for ingestion.
3. **Processing**: The block processes and indexes the file content.
4. **Integration**: Files become available for AI-powered queries and retrieval.

The block handles the complete process of uploading files to Writer and adding them to the Knowledge Graph, including file validation, content extraction, and indexing. You don't need to upload the files separately or provide file IDs. Once processed, the information becomes searchable through Knowledge Graph queries.

## Examples

### Ingest company policies

The following example shows how to add documents to a Knowledge Graph. In this example, the user uploads one or more documents via the [**File Input** interface block](/components/fileinput), which sets the `@{files}` state variable to the user's uploaded files.

**Blueprint flow:**

1. **UI Trigger** → User initiates document ingestion with a button click. The **File Input** interface block set the `@{files}` state variable to the user's uploaded file.
2. **Add to Knowledge Graph** → Ingest and add the files from the `@{files}` state variable to the Knowledge Graph.
3. **Set state** → Store whether the files were successfully ingested so the UI can display feedback to the user.

**Add to Knowledge Graph block configuration:**

* **Graph Id:** `Support KB`
* **Files:** `@{files}`

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-example.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=25af8b3438a193bbde15733f46f3226e" alt="" data-og-width="2360" width="2360" data-og-height="1122" height="1122" data-path="images/agent-builder/blueprints/add-to-knowledge-graph-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-example.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ec97fad6c1c57a6809fe0e02c3cd0e43 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-example.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=9e111608fec4c6b892f53cdf76d90110 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-example.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f24ca6181953d9e16a971b0d856d6239 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-example.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=359bbc40df218e8ed5cc90ec7b8ce75f 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-example.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=87c22efdb2bfeccfd1e29a83dfcd4b3a 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-knowledge-graph-example.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=32461a2da21dae648f9066cb1d4ef724 2500w" />

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Graph Id</td>
      <td>Graph Id</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>The id for an existing knowledge graph. It has a UUID format.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        Format: uuid
      </td>
    </tr>

    <tr>
      <td>Files</td>
      <td>Object</td>
      <td>-</td>

      <td>
        <code>\[]</code>
      </td>

      <td>A list of files to be uploaded and added to the knowledge graph. You can use files uploaded via the File input component or specify dictionaries with data, type and name.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>URLs</td>
      <td>Object</td>
      <td>-</td>

      <td>
        <code>\[]</code>
      </td>

      <td>A list of URLs to be added to the knowledge graph. Web content from these URLs will be indexed.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>If the execution was successful.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

The **Add to Knowledge Graph** block does not return any output.


# Add to state list
Source: https://dev.writer.com/blueprints/addtostatelist



Adds a new item to a list in the Agent's state. Useful for tracking multiple values over time.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-block.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=100e5471f1ca96fe0db3e31f6032c060" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/add-to-state-list-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-block.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=39895ec897067c0aa9161ba47fda2059 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-block.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=25bb63a54bed430d69e18d4ad482bbe2 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-block.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=1e21b5ce1618e5a45bc8b6bb5ac01d06 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-block.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=d8a45bb2304bf73961263953b08a4c7a 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-block.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=4ad617d562ef1f0ec9e35aac59d640ad 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-block.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a4f5ba6f33e9719fdd2cc583d2951896 2500w" />

## Overview

This block adds a string value to a list in the agent's state. It behaves differently depending on the state element's type:

* If the state element doesn't already exist, the block creates it and adds the value to it.
* If the state element already exists as a list, the block adds the value to the list.
* If the state element exists but isn't a list, the block fails.

<Warning>The **Add to state list** block only accepts string values. If you pass a value such as a dictionary, it will be converted to a string and added to the list.</Warning>

## Example

The following example shows an **Add to state list** block as part of a **For-each** workflow.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-example.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=d093788c9b4e0e578056caa75864838c" alt="" data-og-width="2852" width="2852" data-og-height="1610" height="1610" data-path="images/agent-builder/blueprints/add-to-state-list-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-example.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b2dd33f4671d0db01936a2a8dd778478 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-example.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=1fa6ca007a1e204dbe11346d29e33d9d 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-example.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=6ada7b2f19d8972ba687c58adf0b7fe6 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-example.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ddd71d0c7ad556553220844fc3e2c9e1 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-example.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c4b6aeb36a86c483c971bfaa826b54a4 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/add-to-state-list-example.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f0db87ef7839af326220ed2817d0f3ae 2500w" />

The **For-each loop** block iterates over a list of values and generates text for each value. Then, the **Add to state list** block adds the result of each iteration to the state list called `text_gen_results`.

On the initial run, the **Add to state list** block creates the state element and adds the first value to it. Every subsequent run, the block adds the next value to the list.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Link Variable</td>
      <td>Binding</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>Set the variable here and use it across your agent.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Value</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>If the function doesn't raise an Exception.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>


# AI Studio Agent
Source: https://dev.writer.com/blueprints/aistudioagent



Runs an Writer AI Studio agent app by ID.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-block.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e0eb9481a50bca31956d08f8141afa51" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/ai-studio-agent-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-block.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5e3876b2a54cca7d802481492f32092f 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-block.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=aafa6e36255a59e6206ce6d0f385de79 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-block.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=9da17b9e90d225b41521585c8a9f20ef 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-block.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=57f8351879d732b62e1d8e49d83a9d63 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-block.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=341ccb90a97ca54daeacd73edf31da6f 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-block.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=bc291c5ede6c905ebbf2e390cf19d306 2500w" />

## Overview

The **AI Studio Agent** block runs a [deployed no-code AI Studio agent](/no-code/introduction). Only agents with [text generation](/no-code/text-generation) and [research](/no-code/research) capabilities are supported.

Under `App Id`, you can select the no-code agent you'd like to run from a pre-populated list of your deployed no-code agents.

<Warning>No-code agents with [chat capabilities](/no-code/chat) are not supported with this blueprint block. See the [Agent Builder chatbot tutorial](/agent-builder/chatbot-tutorial) for an example of how to create a chatbot with Agent Builder.</Warning>

## Inputs

The **AI Studio Agent** block takes key-value pairs in the `App inputs` field. The inputs should match the inputs of the no-code agent you're running. The key is the name of the input and the value is the value you'd like to pass to the agent.

If the no-code agent is a research assistant, it takes a single input with the key `query`. The value is the query you'd like the agent to run.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-research-agent-inputs.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6b8d9215b349c3a00d6547daa88f54ae" alt="" data-og-width="1822" width="1822" data-og-height="580" height="580" data-path="images/agent-builder/blueprints/ai-studio-agent-research-agent-inputs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-research-agent-inputs.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=996579e5b70e6655432f53c8f3014240 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-research-agent-inputs.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=a0ce41693bfa44cbc60f4315b7675915 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-research-agent-inputs.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9acbedc751e6be8a7c3c7c6a2993c3c2 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-research-agent-inputs.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5215f7c5a6f97cf7394bb2bf584e7816 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-research-agent-inputs.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e5b2de4f1901b7ebebc12b99fb53b117 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-research-agent-inputs.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=119235798b0f99641b0c01503dce70f4 2500w" />

### File and image inputs

If the input is a file or an image, you must upload the file to Writer first and then pass the ID to the agent. You can't pass the file or image directly to the agent.

See the [Upload, parse, and summarize PDFs](/agent-builder/summarize-pdfs#first-blueprint%3A-upload-file-to-writer-cloud) tutorial for more information on how to upload files to the Writer cloud.

If the no-code agent accepts URLs to a file or image as input, you can pass a URL to the agent as a value rather than uploading the file to the Writer cloud.

## Output

The **AI Studio Agent** block returns the output of the no-code agent as a string.

You can access the output of an **AI Studio Agent** block using the `@{result}` variable in the block that follows it in a blueprint.

## Example

The following example shows an **AI Studio Agent** block that runs a no-code AI Studio agent.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-blueprint.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=737a0097cca4a7981c9ebb1f09136dd7" alt="" data-og-width="2606" width="2606" data-og-height="1084" height="1084" data-path="images/agent-builder/blueprints/ai-studio-agent-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-blueprint.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a46dfd53a418b32367c55276a1ccefb6 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-blueprint.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=edad1abdb65fa0d10e6b33a098915328 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-blueprint.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5f57090365ac05f11bb4cbce8b9ca0e9 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-blueprint.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=6f5d9ddc3c197d662bf34405d7d3ccd4 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-blueprint.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=7f8e48f69d89d4d3644236848a2c33c2 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-blueprint.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=fe643611db6d9da4c5064b2c0757ea8b 2500w" />

The no-code agent is an NDA review assistant that accepts a file input with the name `NDA` and runs a text generation workflow. It returns the analysis from the workflow in the `Output formatting` field.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-example.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=dc25a67c23e6d3d51b56c5578e60f8b4" alt="" data-og-width="3456" width="3456" data-og-height="1804" height="1804" data-path="images/agent-builder/blueprints/ai-studio-agent-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-example.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=421aed661d21bb7eaeee2337afaa5667 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-example.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=8f382a7606d07b743cfbb7019b1e72e9 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-example.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=8b0ee2974bd268b60f5e3b27870f9a49 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-example.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=67bf3e714a6ff0483cc8baf5e76c6d4f 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-example.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=89877828f697e46b608d6887add16724 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/blueprints/ai-studio-agent-example.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=9c33e6c7747c7c343de7ba6b5d668dcd 2500w" />

In this example blueprint, the **AI Studio Agent** block provides a file ID for an uploaded file, which is stored in the agent's state as `nda_file_id`. The file must already be uploaded to the Writer cloud.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-file-input.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=124ad6e47668cd41f7c4ad5144bf7dfe" alt="" data-og-width="1946" width="1946" data-og-height="740" height="740" data-path="images/agent-builder/blueprints/ai-studio-agent-file-input.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-file-input.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e615c2a31c65a1fcaf20a144a4c27c42 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-file-input.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=3c96d0d87d7b13305656df8072b80dcc 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-file-input.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=de3197143456ceb5c468e6f40669616f 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-file-input.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=efaeb33ee16ea3f4b18e52a3bfacb3d2 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-file-input.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e746f58c766a0a6132ef594956770b1a 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-file-input.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=13cdfc1bfa332503c6c99c4c51cebc85 2500w" />

The **AI Studio Agent** block returns the output of the no-code agent and proceeds to the next block, which stores the `@{result}` in a state variable.

## Errors

If the AI Studio Agent block fails with the error `Failed to acquire proper response for completion from data`, ensure that your no-code agent in AI Studio returns a value in the `Output formatting` field and that you are passing the correct inputs to the agent.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-output-formatting.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ffdf336a049d782d6f40d23dec078934" alt="" data-og-width="812" width="812" data-og-height="398" height="398" data-path="images/agent-builder/blueprints/ai-studio-agent-output-formatting.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-output-formatting.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f865f988e5b63f3a400a509e682347e5 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-output-formatting.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ba743256f1f5ee11da696e81e082fbad 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-output-formatting.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=030c3568a012542345682c9c89cb41fc 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-output-formatting.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=03e37938af31f881fc77bded1f49971e 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-output-formatting.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b09e9ce15d798b4efd5bf3991f3b5110 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ai-studio-agent-output-formatting.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=643c49f3f0fb1c09cf13725c7bbf5e84 2500w" />

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>App Id</td>
      <td>App Id</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>The agent id can be found in the agent's URL. It has a UUID format.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        Format: uuid
      </td>
    </tr>

    <tr>
      <td>App inputs</td>
      <td>Key-Value</td>
      <td>-</td>

      <td>
        <code>
          {"{}"}
        </code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>If the execution was successful.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

Access the output of an **AI Studio Agent** block using the `@{result}` variable in the block that follows it in a blueprint.


# API Trigger
Source: https://dev.writer.com/blueprints/apitrigger



Triggers an event via API call.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/api-trigger.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=64ff5eadb04a77a005ead9612c2bfba5" alt="" data-og-width="2306" width="2306" data-og-height="1478" height="1478" data-path="images/agent-builder/blueprints/api-trigger.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/api-trigger.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c765c9de5242a9303fee56a6460bcd40 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/api-trigger.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=634339d48e6971c2a5d3ebf69e9e7672 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/api-trigger.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=cd36c23da789c9443b35893426f1b758 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/api-trigger.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7efa07cd97bd2e6f4a056ae43a16a29e 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/api-trigger.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f045b6219c0177e6c7d8ade5b9629bb1 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/api-trigger.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=59e073bbfb7e6cf24e53ec025ed95c30 2500w" />

## Overview

The **API Trigger** block enables external systems to trigger your blueprint via HTTP API calls. Use it to integrate your agent with webhooks, external services, or other applications that need to programmatically execute your workflows.

Unlike the [**UI Trigger**](/blueprints/uitrigger) block that responds to user interactions in the interface, the **API Trigger** block accepts HTTP POST requests to trigger blueprint execution.

<Tip>
  You must deploy your agent before you can trigger a blueprint via API.
</Tip>

## How it works

1. **Agent and Blueprint IDs**: Each API trigger block is associated with a specific agent and blueprint ID that becomes part of the API endpoint URL
2. **HTTP endpoints**: Creates two endpoints:
   * A synchronous POST endpoint that accepts JSON payloads and returns Server-Sent Events (SSE)
   * An asynchronous POST endpoint that returns a job ID for polling results
3. **JSON input processing**: The HTTP request body becomes available as `@{result}` in your blueprint execution, with your data nested under the `inputs` key
4. **Return Value**: To return a value from your blueprint to the API caller, you include a [**Return Value**](/blueprints/returnvalue) block at the end of your blueprint workflow

### Blueprint structure requirements

When building blueprints that will be triggered via API, ensure your workflow ends with a **Return Value** block:

1. **Start with API Trigger**: Begin your blueprint with the API Trigger block
2. **Process your logic**: Add all the blocks needed for your workflow
3. **End with Return Value**: Always finish with a Return Value block to specify what gets returned to the API caller

**Example blueprint structure:**

```
API Trigger → [Your workflow blocks] → Return Value
```

## API endpoint

When you add an **API Trigger** block to your blueprint, it creates a public HTTP endpoint that you can use to trigger your blueprint. See [API Trigger usage guide](/agent-builder/api-trigger) for more details about the API endpoints and how to use them.

### Synchronous endpoint

```
POST https://api.writer.com/v1/agents/{agent_id}/blueprints/{blueprint_id}
```

### Asynchronous endpoint

```
POST https://api.writer.com/v1/agents/{agent_id}/blueprints/{blueprint_id}/jobs
```

### Authentication

All API calls require authentication using a Bearer token in the Authorization header. Learn how to [get your API key](/api-reference/api-keys).

```
Authorization: Bearer <your_api_key>
```

## Request format

Send a POST request with a JSON body containing the data you want to pass to your blueprint under the `inputs` key:

```json  theme={null}
{
  "inputs": {
    "user_id": "123",
    "action": "process_order"
  }
}
```

This data is available in your blueprint as `@{result.inputs.user_id}` and `@{result.inputs.action}`.

<Warning>
  The `inputs` key is required for the JSON payload. If you don't include it, the API will return an error.
</Warning>

## Response format

The synchronous API returns Server-Sent Events (SSE) with real-time execution status:

```
data: {"status":"in progress","message":null}
data: {"status":"executing","message":"Executing blueprint..."}
data: {"delta":"We have placed the order"}
data: [DONE]
```

The asynchronous API returns a job ID that you can poll for status updates using the following endpoint:

```
GET https://api.writer.com/v1/agents/jobs/{job_id}
```

When the job is complete, the response from the asynchronous API contains the result from the **Return Value** block in the `artifact` field.

## Testing

You can test your API trigger using the **Run blueprint** button in the Agent Builder editor. The **Default result** field provides sample data for testing without making actual HTTP requests.

## Learn more

For comprehensive implementation details, examples, and troubleshooting, see the [API Trigger usage guide](/agent-builder/api-trigger).

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Blueprint ID</td>
      <td>Blueprint Id</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Default result</td>
      <td>Code</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>The result that is used when the blueprint is triggered from the "Run blueprint" button</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Trigger</td>
      <td>-</td>
      <td>success</td>
      <td>-</td>
    </tr>
  </tbody>
</table>

The **API Trigger** block returns the input payload that was sent to the API endpoint.

When triggered via API, the HTTP request body becomes available as `@{result}` in your blueprint execution, with your data nested under the `inputs` key. For example, if you send `{"inputs": {"user_id": "123"}}`, you can access it in your blueprint using `@{result.inputs.user_id}`.


# Ask graph question
Source: https://dev.writer.com/blueprints/askgraphquestion



Asks a natural language question using one or more knowledge graphs and puts the result into a state variable.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=44644671f3d1b17ba0292b08f36188a9" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/ask-graph-question-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0cb7e041cb4e460993f759f10b015b58 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1ac4507f6c29142d42dac114545cc57a 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4970a1878899da33786dc48262a7378d 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c678167c27a0ea43a2d1b7cab1c4a244 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=a206ad5daedda14037a094a4339dd650 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0bfa82fbf5d709da797c925638faaf2c 2500w" />

## Overview

The **Ask graph question** block queries one or more Writer Knowledge Graphs to find relevant information and generate answers based on the stored data. Use it to create AI applications that can reference and retrieve information from your uploaded documents and structured data.

You can specify the question, the list of Knowledge Graphs to search, whether to use streaming or subqueries, and a state variable to store the answer in. The block searches through the Knowledge Graphs and returns a relevant response.

## Common use cases

* Building question-answering systems based on company documents
* Creating AI assistants that reference specific knowledge bases
* Creating compliance verification tools that check against policy documents
* Building research assistants that analyze academic papers or reports

## How it works

1. **Question**: Enter the natural language question you want to ask about the stored data.
2. **Graph Ids**: Specify one or more Knowledge Graphs to query from a list of available Graphs.
3. **Link Variable**: The name of the variable that stores the answer in the agent's state.
4. **Use streaming**: Choose whether to stream the answer as it is generated. If you choose `yes`, the answer will be streamed to the UI as it is generated. If you choose `no`, the answer will be generated and then returned to the agent once it is complete.
5. **Use subqueries**: Enable to allow the LLM to ask follow-up questions to the Knowledge Graph for improved answers.

The block searches the selected Knowledge Graph or Graphs for relevant information and generates an answer based on the stored documents and data.

## Examples

### Employee policy assistant

This example shows a complete workflow where employees can ask questions about company policies and receive accurate, up-to-date information.

**Interface:**

1. **Text input** → Employee submits a question and the text input stores it in a state variable called `question`
2. **Button** → Employee clicks a button to submit the question to the agent
3. **Text** → Employee sees the answer stored in the `policy_answer` state variable in a text block

**Blueprint Flow:**

1. **UI Trigger** → Employee submits policy question through form
2. **Ask graph question** → Searches company knowledge base
3. **Text generation** → Formats the answer for the employee with additional context
4. **Set state** → Stores response for display

**Block Configuration:**

* **Graph Ids:** `["Company Policies", "Employee Handbook"]`
* **Question:** `@{question}` (set from a text input in the UI)
* **Link Variable:** `policy_answer`
* **Use streaming:** `yes`
* **Use subqueries:** `yes`

This workflow ensures employees receive accurate, up-to-date policy information directly from company documents.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block-example.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7d1c89ee4021c8bca59f6508022f1cf4" alt="" data-og-width="2406" width="2406" data-og-height="1434" height="1434" data-path="images/agent-builder/blueprints/ask-graph-question-block-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block-example.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4279f56b9f715812fc722598e8b2bf08 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block-example.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1a1e12af6be66abccbdc9f40029a7658 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block-example.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9d2b0a48049e868c7021a3e6a7f88e9c 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block-example.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6cc94fd0648b39d32ec9fdecfc842e0c 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block-example.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=8ca054d280fb70d882e8b5d922c76356 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ask-graph-question-block-example.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b768ac87f3cdd7528604bc695541b756 2500w" />

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Question</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>The natural language question to ask.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Use streaming</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <code>yes</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Link Variable</td>
      <td>Binding</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>Set the variable here and use it across your agent.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Graph Ids</td>
      <td>Graph Ids</td>
      <td>-</td>

      <td>
        <code>""</code>
      </td>

      <td>IDs of the graphs to query.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Use subqueries</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <code>yes</code>
      </td>

      <td>Enables LLM to ask follow-up questions to the knowledge graph. This improves answers, but may be slower.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>Successfully streamed the answer.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

The **Ask graph question** block stores the answer to the question in a state variable that you set in the `Link Variable` field. Access the output by referencing the state variable you defined, or use the `@{result}` variable in the next block.


# Change page
Source: https://dev.writer.com/blueprints/changepage



Navigates the user to another page in the app. Requires a valid page key.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=8832b5bfbb278334f7afe136a09b7f8a" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/change-page-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2be811817153d5cfb1ebbbaf861691b5 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f43702e535f427a5d3dd0a47e2c2c5bc 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b21806deacaffbea9957a957950fb138 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=cbf633136597eaf8701b7acc4039b17a 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=534598e0711f3951df4e33f5b529ded7 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e18957dc48c12bed555b1ec3056376e8 2500w" />

## Overview

The **Change page** block navigates the user to a different page in the application. Use it to control the flow of your app, redirect after actions, or guide users through multi-step processes.

You can specify the target page and optionally pass parameters.

## Common use cases

* Redirecting users after form submission
* Navigating between steps in a multi-step workflow
* Sending users to a confirmation or error page
* Guiding users through onboarding or tutorials

## How it works

1. **Page**: Enter the name or path of the page to navigate to. Each page needs a unique key to identify it in the blueprint.
2. **Parameters**: Optionally specify parameters to pass to the new page.

The block triggers a navigation event, sending the user to the specified page.

## Examples

### Post-submission redirect

**Interface:**

1. A page with text inputs for name and email, and a button to submit the form.
2. A second page with the key `confirmation_page`. It contains a message to confirm the form submission with more details about the form submission.

**Blueprint Flow:**

1. **UI Trigger** → User presses button to submit a form
2. **Change page** → Navigates to the page with the key `confirmation`

**Block Configuration:**

* **Page key:** `confirmation`

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-workflow.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d4a55d03e5ea0bef1e66c3b895286089" alt="" data-og-width="1846" width="1846" data-og-height="836" height="836" data-path="images/agent-builder/blueprints/change-page-workflow.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-workflow.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4b48e5f89d8cdaf5c3c890eb98f9ee5c 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-workflow.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=eb7c36c1ffe9c6ce4d235615bae41ab0 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-workflow.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=18280255f282d82e037db881faacb255 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-workflow.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e7a35e35ccc150d0d0840ee76e558b40 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-workflow.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6e18f1db3b6fc0d1aa4c8dfe62a348a1 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/change-page-workflow.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=a93d301c023e87f5244751f741c641ec 2500w" />

This workflow ensures users are directed to the confirmation page after submitting the form.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Page key</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>The identifying key of the target page.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>The page change was successful.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>The event handler execution wasn't successful.</td>
    </tr>
  </tbody>
</table>


# Chat reply
Source: https://dev.writer.com/blueprints/chatreply



Initializes conversations, adds messages, and generates replies.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7c8eee426d7191f7d24c4ed8f8cb33b1" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/chat-reply.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7f603d23bb586ab20c5a941e21890412 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b89ead260d100c43def2233f8a2d7ced 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=629f55e1dbf2eefab9db65d6649c002e 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e6c7fc898e4ceba1f27079097880453f 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=630e3b1907e00e184a5ddc3c9e9a0b64 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ef4b9946b57cc880cf943688ea427608 2500w" />

## Overview

The **Chat reply** block is a comprehensive chat solution that can initialize conversations, add messages, and generate replies in a single block. It's designed to handle the complete chat workflow efficiently.

You can specify a conversation state variable to store the chat history, system prompt, message, and various configuration options. The block manages the conversation state and generates appropriate responses. You can also configure tools that the AI can use during the conversation, such as function tools and Knowledge Graphs.

## Common use cases

* Building complete chat applications
* Creating AI assistants with conversation management
* Implementing interactive workflows with chat capabilities
* Developing conversational interfaces with tool calling

## How it works

1. **Conversation Object**: A binding variable that stores the chat history and metadata. If not provided or empty, a new conversation will be created and stored in the state.
2. **System prompt**: Set the context or behavior for the AI. Can be left empty if conversation is already initialized in state.
3. **Message**: Enter the user's message as an object with `role` and `content` properties; for example, `{"role": "user", "content": "What are the best practices for using the product?"}`. If you want to pass the user's message from the Chatbot interface to the Chat reply block, you can use the `@{payload}` variable.
4. **Configuration**: Set model (default: `palmyra-x5`), temperature (0-1), and max tokens (1-16384).
5. **Use streaming**: Choose whether to stream responses as they're generated or wait for complete responses.
6. **Tools configuration**: Configure tools that the AI can use during the conversation:
   * **Function tools**: Define custom functions with parameters that the AI can call
   * **Graph tools**: Connect to knowledge graphs for enhanced responses
   * **Tool routing**: Control when and how tools are called during the conversation
   * **Tool responses**: Handle and process the results returned from tool executions
   * See [tool calling](/agent-builder/tool-calling) for more information on how to configure tools.

## Examples

### Customer support chatbot

This example shows a customer support chatbot that can handle conversations and route to human agents if needed.

**Interface:**

1. A [**Chatbot** block](/components/chatbot) that displays the chat interface.

**Blueprint flow:**

1. **UI Trigger** → Customer sends message through chat interface
2. **Chat reply** → Processes message and generates AI response
3. **Classification** → Determines if human agent is needed
4. **Conditional routing** → Routes to human agent via HTTP Request block if a human agent is needed. Otherwise, the workflow starts again with the next user message.

**Chat reply block configuration:**

* **Conversation Object:** `@{chat}`
* **System prompt:**

```
You are a helpful customer support assistant. Be friendly and professional. 

IMPORTANT: If you encounter any of the following situations, clearly indicate that you need to route to a human agent:
- Complex technical issues beyond your capabilities
- Requests for account modifications or sensitive information
- Complaints that require escalation
- Situations where you're unsure or need human judgment
- Requests for supervisor or manager assistance

When routing to human, use phrases like:
- "I need to connect you with a human agent for this request"
- "Let me escalate this to our support team"
- "This requires human assistance, let me transfer you"
- "I'll need to route this to a specialist"

For routine questions and simple requests, provide helpful responses directly.
```

* **Message:** `@{payload}`. This passes the user's message from the Chatbot interface to the Chat reply block.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=76541492b5999661ffdd1190a826c841" alt="" data-og-width="2710" width="2710" data-og-height="1584" height="1584" data-path="images/agent-builder/blueprints/chat-reply-block-configuration.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7e5d7db70deca5e39e60e2ae2ce9d63b 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=86e76f9dd55582ff536ac2f8b834a1b8 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=3bc500c437f17ace111258bdfce5a33e 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=03a568ae7472d7db10a6f626a0f532ac 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b9e0c9365ca20e5e4315b253c3ca19be 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c8f06c5b7d6b9879f704de2bf0bbf756 2500w" />

This workflow provides automated customer support while ensuring complex issues go to human agents.

### Connect a chatbot to a Knowledge Graph

This example shows a chatbot that can answer questions about domain-specific knowledge within a Knowledge Graph.

**Interface:**

1. A [**Chatbot** block](/components/chatbot) that displays the chat interface.

**Blueprint flow:**

1. **UI Trigger** → Customer sends message through chat interface
2. **Chat reply** → Processes message and generates AI response. Configured with a Knowledge Graph tool to answer questions about the company's products and services.

**Chat reply block configuration:**

* **Conversation Object:** `@{chat}`
* **System prompt:**

```
You are a helpful customer support assistant. Be friendly and professional. You have access to information about the company's products and services.
```

* **Tools:**
  * **Tool type:** `Knowledge Graph`
  * **Tool name:** A name to help you identify the tool in the response.
  * **Graph id(s):** The list of Knowledge Graphs to use. You can select from a list of available Knowledge Graphs.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration-kg.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1c8957c81dfbf1ba3af0a10ec643b53d" alt="" data-og-width="2806" width="2806" data-og-height="1550" height="1550" data-path="images/agent-builder/blueprints/chat-reply-block-configuration-kg.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration-kg.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7220f3ba8236d7170329d0f974fe1848 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration-kg.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5eeb330d793ab56fe98e7f65e24114d1 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration-kg.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0f6a7525231a0678d5138d4be3306ca5 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration-kg.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=06eab707edd0366982bb8ffd8279318e 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration-kg.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=001e5334619d8864263abedab6836e51 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/chat-reply-block-configuration-kg.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f58131dfb9c2588156f1375b9b6abf01 2500w" />

This workflow provides a chatbot that can answer questions about the company's products and services.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Conversation Object</td>
      <td>Binding</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>The variable that has your conversation object.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>System prompt</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <code>""</code>
      </td>

      <td>A system prompt to set the context for the conversation. Can be left empty if conversation is already initialized in state.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Message</td>
      <td>Object</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>A message object. Content can be text string or array of objects for multimodal (text + images) with X5 model.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Generate reply</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <code>yes</code>
      </td>

      <td>If set to 'yes', the block will generate a reply from the model after adding the message. If set to 'no', it will only add the message to the conversation.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Initial model</td>
      <td>Model Id</td>
      <td>-</td>

      <td>
        <code>palmyra-x5</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Initial temperature</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <code>0.7</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        Range:
        0    to  2
      </td>
    </tr>

    <tr>
      <td>Initial max tokens</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <code>1024</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        Range:
        1    to  16384
      </td>
    </tr>

    <tr>
      <td>Use streaming</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <code>yes</code>
      </td>

      <td>If set to 'yes', the block will stream the reply as it is generated. If set to 'no', it will wait for the entire reply to be generated before returning.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Tools</td>
      <td>Tools</td>
      <td>-</td>

      <td>
        <code>
          {"{}"}
        </code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Tools</td>
      <td>tools</td>
      <td>dynamic</td>
      <td>Run associated tools.</td>
    </tr>

    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>If the function doesn't raise an Exception.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

The `dynamic` end state means that the exact values of this end state change based on how you define the block.

The output of the **Chat reply** block is a string with the most recent response from the AI to the user's message. You can access the output in the next block with the `@{result}` variable.


# Classification
Source: https://dev.writer.com/blueprints/classification



Classifies text into predefined categories using AI. Useful for tagging and routing inputs.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ec739da593fcfde2b777230a94edde9d" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/classification-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=93b6de9e6842369da72aff10876e58be 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1f66d9273e0a6f515c44c6a56b1fb1f2 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=019a0afcbe0834ddd7b05a89c4f900e5 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=dc81bdd25ad74422e45ebe95c4dcd9d2 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5e4867e3c8304f44e9bc59bb900afc1b 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5063e897b8798f77e2528867841f6a2d 2500w" />

## Overview

The **Classification** block classifies text into predefined categories using AI. Unlike blocks that have a single "success" path (such as the [Tool calling block](/blueprints/toolcalling)), the Classification block creates multiple execution paths based on your defined categories. The workflow continues down the specific path that matches the classification result, not through a single return value or success state.

This makes the Classification block ideal for:

* Routing workflows based on content type, sentiment, or intent
* Tagging content into predefined categories
* Branching logic where different categories trigger different actions

For example, if you define categories like `urgent`, `normal`, and `low_priority`, the Classification block analyzes the input text and continues execution down the corresponding path (`urgent`, `normal`, or `low_priority`).

**Key difference from other blocks**: the Classification block doesn't have a final `success` state that takes a return value. Instead, it creates separate execution paths for each category you define, and the workflow continues down the path that matches the classification result.

The `@{result}` variable from the **Classification** block contains the name of the selected category.

## Common use cases

* **Customer support routing**: Classify support tickets as "Technical", "Billing", or "General" to route them to appropriate teams
* **Content moderation**: Categorize user submissions as "Appropriate", "Needs Review", or "Inappropriate"
* **Sentiment analysis**: Classify feedback as "Positive", "Negative", or "Neutral"
* **Document organization**: Sort documents by type such as "Invoice", "Contract", or "Report"
* **Lead qualification**: Classify sales inquiries as "Hot Lead", "Warm Lead", or "Information Request"

## How it works

1. **Input text**: Provide the text you want to classify (often from user input or previous block results)
2. **Define categories**: Set up category names and descriptions that help the AI understand what each category represents
3. **AI classification**: The block analyzes the text and determines which category best fits
4. **Routing**: The workflow automatically follows the connection path that matches the chosen category

## Example

The following example shows a **Classification** block that analyzes customer reviews to determine their primary focus, then routes to different response workflows based on the classification.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-example.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=a3d6e488dbdd0db1909864a487e8f99d" alt="" data-og-width="3454" width="3454" data-og-height="1802" height="1802" data-path="images/agent-builder/blueprints/classification-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-example.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7af2b73c61ea77475f3193abd27f9a18 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-example.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6639e09ad91ac545973e222f549d572c 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-example.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6bc76d8e731527a07045b5aec1f31369 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-example.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=fbc02d9f7600461c32974a225e75743d 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-example.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=448a1093e97836006a82304ae87f9307 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-example.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5fc7567f5fc4d7a3b36081a61b92c71c 2500w" />

In this example, a customer review is classified into one of five categories:

* **Packaging**: Issues with how the product was packaged or shipped
* **Pricing**: Concerns about cost, value, or billing
* **Quality**: Problems or praise related to product quality
* **Delivery**: Issues with shipping speed or delivery process
* **Empty**: Reviews that don't contain useful feedback

Based on the classification, the workflow routes to different **Text generation** blocks that create appropriate responses for each category.

### Setting up categories

When configuring the **Classification** block, you define categories as key-value pairs:

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-categories.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=dd15b27e025c2bfbf31229d7f731457d" alt="" data-og-width="1882" width="1882" data-og-height="1064" height="1064" data-path="images/agent-builder/blueprints/classification-categories.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-categories.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=43d14e3dc10c06ed83a7a5b38116f127 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-categories.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4586313c5e44163207d1378d50a66e3d 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-categories.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=a9d34594379d3a83998285f0564bf71e 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-categories.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e76e9da908d5dfbd6e0b9b349833a482 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-categories.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6b63363e973793449d210c42fbcafcc2 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/classification-categories.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d506e7a882b92faa381d38e0f7ab839e 2500w" />

**Key**: The category name (this becomes the connection point name)\
**Value**: A description that helps the AI understand what belongs in this category

For the customer review example:

* **Quality**: "The review is about the quality of the product or service"
* **Pricing**: "The review discusses pricing concerns or satisfaction"
* **Delivery**: "The review relates to delivery time or issues"

### Using classification results

After classification, the workflow automatically follows the connection that matches the selected category. You can connect different blocks to each category to create specialized workflows.

The classification result is also available in subsequent blocks using `@{result}`, which contains the name of the selected category.

## Best practices

### Writing effective category descriptions

* **Be specific**: Include concrete examples of what should be classified in each category
* **Use clear language**: Avoid ambiguous terms that could apply to multiple categories
* **Consider edge cases**: Think about borderline cases and which category they should fall into
* **Test with real data**: Use actual examples from your use case to verify classifications are accurate

### Category naming

* **Use descriptive names**: Choose names that clearly indicate the category's purpose
* **Follow naming rules**: Category names should contain only letters, digits, underscores, and spaces
* **Keep it consistent**: Use a consistent naming convention across all categories
* **Avoid special characters**: Stick to alphanumeric characters for reliable connections

### Performance optimization

* **Provide context**: Use the "Additional context" field to give the AI more information for better classification
* **Handle edge cases**: Always include a "Other" or "Unknown" category for inputs that don't fit your main categories

### Adding context for better classification

Use the "Additional context" field to provide information that helps with classification:

```
Additional context: This is a product review for a high-end electronics item. Focus on technical aspects, build quality, and user experience when classifying.
```

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Text</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>The text you want to classify.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Categories</td>
      <td>Key-Value</td>
      <td>-</td>

      <td>
        <code>
          {"{}"}
        </code>
      </td>

      <td>The keys should be the categories you want to classify the text in, for example 'valid' and 'invalid', and the values the criteria for each category. Category names should contain only letters of the English alphabet, digits, underscores and spaces.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Additional context</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>Any additional information that might help the AI in making the classification decision.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>-</td>
      <td>categories</td>
      <td>dynamic</td>
      <td>-</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

The `dynamic` end state means that the exact values of this end state change based on how you define the block.

The output of a **Classification** block is a string that contains the classification of the input text. You can access the output of a **Classification** block using the `@{result}` variable in the block that follows it in a blueprint.


# For-each loop
Source: https://dev.writer.com/blueprints/for-eachloop



export const item_0 = undefined

export const itemId_0 = undefined

export const prefix_item_0 = undefined

export const prefix_itemId_0 = undefined

Loops through each item in a list to run the same logic.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=bbc6254daef003626690709b7cd5b200" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/for-each-loop-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2f094fda9cda37d0f8bb686ca6c8f655 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=8d4ae9a348b10197b9c90001a6f2eb1b 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=420d8fa3b8caef0308aa1c7a081fe507 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4fa7534f21056831879760c36da9b171 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6fa62de59e96450ca625bcadab02d523 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2e0c3c128c3ee43d7aac26b99504863a 2500w" />

## Overview

The **For-each loop** block iterates over a list or dictionary and executes a workflow for each item.

The following variables are available in the workflow when iterating with the **For-each loop** block:

* For a list of items (for example, `["a", "b", "c"]`):
  * `@{item}`: The current item in the list (for example, `"a"`, `"b"`, or `"c"`)
  * `@{itemId}`: The current item's index in the list, starting at 0 (for example, `0`, `1`, or `2`)
* For a dictionary of items (for example, `{"a": "apple", "b": "banana", "c": "cherry"}`):
  * `@{item}`: The current item's value in the dictionary (for example, `"apple"`, `"banana"`, or `"cherry"`)
  * `@{itemId}`: The current item's key in the dictionary (for example, "a", "b", or "c")

## Example

The following example shows a **For-each loop** block that loops over a list of file IDs and makes an HTTP request to the Writer API delete each file in the list by ID. It then sets a state variable to display a success message when it's done.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-example.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=88de5b30417585c07a64f502a4489c0e" alt="" data-og-width="2230" width="2230" data-og-height="1262" height="1262" data-path="images/agent-builder/blueprints/for-each-loop-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-example.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=01821ae2768eeb34a23bc33a76585e2a 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-example.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4e1b67effb4945a01dc8dbce9acf46e7 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-example.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1c2205f8b3057d16d7bea902bc2a1367 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-example.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1bfdba7ea2c0a9540ada12a26ae8ed76 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-example.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ac319845919ac5e3f5a67c7f6aaa1076 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-example.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=a0bbdd642e4bcb6c6dc86818f470e54a 2500w" />

<Info>In this example, the list of file IDs is a hardcoded list of strings. In a more realistic example, the list of file IDs would be returned from a previous block or stored in state, rather than hardcoded. In that case, you could use the environment variable such as `@{payload}` or `@{state_element}` to access the list in the `Items` field.</Info>

The **For-each loop** block iterates over the list of items in the `Items` field and executes the blocks that follow for each item. To reference the current item in the loop, you can use the environment variable `@{item}`. To reference the current item's index in the list, you can use the environment variable `@{itemId}`.

The HTTP request in this example uses the `@{item}` environment variable to reference the current file ID in the HTTP request's `URL` field.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-http-request.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d0a3733edc23eef057989659f229389e" alt="" data-og-width="2300" width="2300" data-og-height="1438" height="1438" data-path="images/agent-builder/blueprints/for-each-loop-http-request.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-http-request.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b2498968934886da7dc8e4b4d36fcee7 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-http-request.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=37780710d7f82aaf95a99fc8795e4933 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-http-request.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=879e2327af0544555b324c91f99e6670 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-http-request.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c3b5c7f226ffe7506054b2823fb1bfc0 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-http-request.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=20a17efd034a67de1961c30654853b9c 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/for-each-loop-http-request.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=83bfb0502d82ae330c505e6e87184d49 2500w" />

When the **For-each loop** block is done, it moves to the next block connected to the **Success** connection point. In this example, the next block is a **Set state** block that sets a state variable to display a success message when it's done.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Items</td>
      <td>Object</td>
      <td>Textarea</td>

      <td>
        <code>\[]</code>
      </td>

      <td>The item value will be passed in the execution environment and will be available at @{item_0}, its id at @{itemId_0}. You can use either a list or a dictionary.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Prefix</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>If set, the item will be available at @{prefix_item_0} and the item id at @{prefix_itemId_0}.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Loop</td>
      <td>-</td>
      <td>dynamic</td>
      <td>Connect the branch that you'd like to loop on. The branch plugged in here will be executed once per item.</td>
    </tr>

    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>The branch referenced executed successfully for each item.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>The branch referenced has failed for at least one of the items.</td>
    </tr>
  </tbody>
</table>

The `dynamic` end state means that the exact values of this end state change based on how you define the block.


# HTTP Request
Source: https://dev.writer.com/blueprints/httprequest



Sends a HTTP request to an API endpoint. Used to fetch data or send data.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f16580b0da0799d3e2e7b634b0ae5ad3" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/http-request-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2ebc880428b61323734d9252705adb1d 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b59d2c22fa8f19372400a76cecfbb39a 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9a827d81ce58fda7004c533c277b4ffe 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=432b8fe8efbd99c5c439ce49b738ea70 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=205505cd825b9a46c0f2934b4a7e7115 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0b4a5458a3feecf5600c8b752bff346b 2500w" />

## Overview

The **HTTP Request** block sends an HTTP request to an API endpoint. Use it to fetch data from external services, send data to APIs, or integrate with third-party systems.

You can configure the HTTP method, URL, headers, body, and body type (plain text or JSON). The block supports `GET`, `POST`, `PUT`, `PATCH`, and `DELETE` methods.

## Common use cases

* Fetching data from a REST API
* Sending data to a webhook or external service
* Integrating with third-party tools
* Automating workflows that require external communication

## How it works

1. **Method**: Choose the HTTP method, for example, `GET`, `POST`.
2. **URL**: Enter the endpoint URL. Pass path parameters in the URL; for example, `https://api.openweathermap.org/data/2.5/weather?q=@{payload.city}&appid=@{vault.openweather_key}&units=metric`.
3. **Headers**: Optionally specify headers as key-value pairs. You can also use [secrets](/agent-builder/secrets) to access API keys and other sensitive values.
4. **Body type**: Choose whether the body you are sending is `text` or `JSON`.
5. **Body**: Enter the request body for `POST`, `PUT`, and `PATCH` requests.

The block sends the request and returns the response. If the request fails due to a connection error (for example, network timeout, DNS failure), it outputs a connection error. If the request receives an error response from the server (for example, `4xx` or `5xx` status code), it outputs a response error. You can access the error details in the next block using the `@{message}` variable.

## Examples

### External API integration

This example demonstrates making HTTP requests to an external API using a public API endpoint. It uses the [Open-Notify API](https://open-notify.org/), which provides real-time data about the International Space Station (ISS); it's free and requires no authentication, so you can use this example to test your workflow before you use it with another API.

**Blueprint flow:**

1. **UI Trigger** → Receives request to fetch ISS location
2. **HTTP Request** → Calls Open-Notify API to get current ISS position
3. **Text generation** → Creates location description based on the body of the response (`@{result.body}`), which contains the latitude and longitude of the ISS
4. **Set state** → Stores the result of the text generation block in state variable to display in the UI

**HTTP Request block configuration:**

* **Method:** GET
* **URL:** `http://api.open-notify.org/iss-now.json`
* **Headers:** None
* **Body type:** None
* **Body:** None

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block-iss-example.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7da87767c917835dd9c5dded837a5755" alt="" data-og-width="2393" width="2393" data-og-height="1104" height="1104" data-path="images/agent-builder/blueprints/http-request-block-iss-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block-iss-example.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=120a0adf11befb6966b745ccb4ccb893 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block-iss-example.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4ef202e0e73f5506673b54afe448a927 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block-iss-example.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f89023e17cf48f567d938b6080d71e31 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block-iss-example.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c74718ccf7e1fba4b59e6cf88d00562f 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block-iss-example.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=51169b5c936726daa0af185016bd8fdd 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/http-request-block-iss-example.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7d02fb24d7b61df44dccb542cc31ca60 2500w" />

This workflow enables integration with external APIs to enhance your agent's capabilities.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Method</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <ul>
          <li>GET - GET</li>

          <li>POST - POST</li>

          <li>PUT - PUT</li>

          <li>PATCH - PATCH</li>

          <li>DELETE - DELETE</li>
        </ul>
      </td>

      <td>
        Allowed values: GET, POST, PUT, PATCH, DELETE
      </td>
    </tr>

    <tr>
      <td>URL</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Headers</td>
      <td>Key-Value</td>
      <td>-</td>

      <td>
        <code>
          {"{}"}
        </code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Body type</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <code>text</code>
      </td>

      <td>-</td>

      <td>
        <ul>
          <li>text - Plain text</li>

          <li>JSON - JSON</li>
        </ul>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Body</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>The request was successful.</td>
    </tr>

    <tr>
      <td>Response error</td>
      <td>-</td>
      <td>error</td>
      <td>The connection was established successfully but an error response code was received or the response was invalid.</td>
    </tr>

    <tr>
      <td>Connection error</td>
      <td>-</td>
      <td>error</td>
      <td>The connection couldn't be established.</td>
    </tr>
  </tbody>
</table>


# Key-Value Storage
Source: https://dev.writer.com/blueprints/key-valuestorage



Allows to store data between sessions. Uses unique keys (names) to identify the data. Keys can only contain alphanumeric characters, underscores and hyphens

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Action</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <code>Save</code>
      </td>

      <td>-</td>

      <td>
        <ul>
          <li>Save - Save</li>

          <li>Get - Get</li>

          <li>Delete - Delete</li>
        </ul>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Key</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Value</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>The request was successful.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>The request wasn't successful.</td>
    </tr>
  </tbody>
</table>


# Log message
Source: https://dev.writer.com/blueprints/logmessage



Prints a message to the console for debugging or monitoring app flow.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=283846fdfff49f6b07427a2a51fa6733" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/log-message-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5328b13d078e40b1866f119c670b7c39 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=117b874e80bd18fd02bffea23f8cc0ee 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=607622d0c5180c9d69e85e7a6d295a1f 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9c1bc6dd050ef79154c485eb07e10d84 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=79b4f471ea3f0c81867aa3f261797643 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=48d5dcfbc2d008aa5488f029c8136b10 2500w" />

## Overview

The **Log message** block writes a message to the workflow log. Use it to record information, debug workflows, or track the progress of your blueprint execution.

You can specify any message, including variables or state values, to help with troubleshooting or monitoring.

To view the logs, click the **Log** tab in the Agent Builder editor.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f967cb2175e60d76e82fb6727769ef69" alt="" data-og-width="1708" width="1708" data-og-height="324" height="324" data-path="images/agent-builder/blueprints/log-message-block-example-logs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2914cbf557f27964b6cdf6c2cc57a219 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=fa8bb90513596996519756ce2f063d6f 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b30e46e94032c53ef4f20f5fe2399ae1 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=cd160ab6781932661fe88acbfc03fc7d 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f42969f35c4f021f4b0b08b1cc6e6a5e 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7b0daf0280bf94b9e1e1c013be21af18 2500w" />

## Common use cases

* Debugging workflow execution by logging variable values
* Tracking the progress of a workflow
* Recording errors or important events
* Auditing workflow steps for compliance

## How it works

1. **Message**: Enter the message to log. You can log variables using the `@{variable_name}` syntax. For example, to log the value of the `@{payload}` variable, you can use the message `"Payload: @{payload}"`.
2. **Type**: Choose the type of message to log. You can choose from the following options:
   * **info**: Log a message with information.
   * **error**: Log a message with an error.

The block writes the message to the log. The message is available in the workflow execution logs for review.

## Examples

### Debug workflow execution

This example shows how to add logging throughout a workflow that processes multiple resumes from job applicants. The workflow extracts key information from each resume PDF and generates a summary report. The log message block is used to record the progress of the workflow.

**Blueprint Flow:**

1. **UI Trigger** → HR manager uploads multiple resumes for processing
2. **For-each loop** → Processes document sections
3. **Log message** → Records section completion and confirms parsing success
4. **Parse PDF** → Parses the PDF file
5. **Text generation** → Assembles final document

**Block Configuration:**

* **Message:** `Processing resume for @{itemId}.`
* **Type:** `info`

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0c12cd1e7affa4e2ef3b9486bb5b2734" alt="" data-og-width="2782" width="2782" data-og-height="1440" height="1440" data-path="images/agent-builder/blueprints/log-message-block-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6386584d6a3dfd24de6124c8cc141f39 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=195e2634ad8705757166762165196553 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b8f8e92ad688cc4190aa5600619eb068 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=75043f009952c244c6afc6694b79d584 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9bb4ef2c9c28c685960d41e33d791586 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=10dcbaff1fea615643639b7bbc9adfee 2500w" />

The logs display the progress of the workflow as it processes each resume. You can see the logs in the **Log** tab of the Agent Builder editor.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f967cb2175e60d76e82fb6727769ef69" alt="" data-og-width="1708" width="1708" data-og-height="324" height="324" data-path="images/agent-builder/blueprints/log-message-block-example-logs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2914cbf557f27964b6cdf6c2cc57a219 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=fa8bb90513596996519756ce2f063d6f 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b30e46e94032c53ef4f20f5fe2399ae1 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=cd160ab6781932661fe88acbfc03fc7d 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f42969f35c4f021f4b0b08b1cc6e6a5e 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/log-message-block-example-logs.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7b0daf0280bf94b9e1e1c013be21af18 2500w" />

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Type</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <code>info</code>
      </td>

      <td>-</td>

      <td>
        <ul>
          <li>info - Info</li>

          <li>error - Error</li>
        </ul>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Message</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>The request was successful.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>The blueprint was executed successfully.</td>
    </tr>
  </tbody>
</table>

The return value of the **Log message** block is the message that was logged. You can access the return value in the next block in the workflow using the `@{result}` variable.


# Parse JSON
Source: https://dev.writer.com/blueprints/parsejson



Converts a JSON string into an object, so you can work with it in your logic.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=998885fd519824d4f30f92198b620453" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/parse-json-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2425ca6bac6a1dfe65672addab818ec6 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=94e30f08c1230be8967003faa23b442d 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f2bc6edaabb144a7068060cbb29e4f2a 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ac1b08e420a65cea7f133549ded4fa2b 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=077ce433c6ee92c1b65fca4cd1b910d8 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f587f97f4cd5836220fced4477878ced 2500w" />

## Overview

The **Parse JSON** block transforms a JSON-formatted string into a structured object that you can work with programmatically. For example, if you have a string like `'{"name": "John", "age": 30}'`, this block converts it into an object where you can access values like `object.name` or `object.age`.

This block is essential when you need to extract and work with data from:

* API responses that return JSON strings
* Form submissions containing JSON data
* Configuration files stored as JSON
* Any text that follows JSON format

The parsed object lets you:

* Access nested values using dot notation (for example, `user.address.city`)
* Iterate through arrays of data
* Pass structured data to other blocks
* Validate and transform the data structure

## Common use cases

* Parsing API responses
* Converting user input into structured data
* Extracting values from JSON payloads
* Validating JSON format before further processing

## How it works

1. **JSON string**: Enter the JSON string to parse. You can use variables or state values.

The block parses the string and outputs the resulting object. If the string is not valid JSON, the block raises an error.

## Examples

### User order form processing

This example shows why parsing JSON is essential for conditional logic and data extraction.

**Scenario:** A user submits an order form with JSON data that looks like this:

```json  theme={null}
{
  "customer": {
    "name": "Sarah Johnson",
    "email": "sarah@example.com",
    "tier": "premium"
  },
  "items": [
    {"product": "Laptop", "price": 1299.99, "quantity": 1},
    {"product": "Mouse", "price": 29.99, "quantity": 2}
  ],
  "total": 1359.97,
  "shipping_method": "express"
}
```

**Without Parse JSON (problematic):**

* Text generation block sees: `"{"customer": {"name": "Sarah Johnson"...`
* Can't access specific values like customer name or total
* Can't apply conditional logic based on order value
* Can't calculate discounts for premium customers

**With Parse JSON (powerful):**

1. **UI Trigger** → User submits order form
2. **Parse JSON** → Converts form data to structured object
3. **Set state** → Store parsed data in a state variable called `parsed_order`
4. **Classification** → Check if `@{parsed_order.total}` >= 1000 for free shipping
5. **Text generation** → Use `@{parsed_order.customer.name}` and `@{parsed_order.total}` in response

**Block Configuration:**

* **JSON string:** `@{order}` (the name of the state variable that contains the JSON string from the interface)

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-workflow.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=47b7ab1472b0b8d19a5d23aa49231df2" alt="" data-og-width="2742" width="2742" data-og-height="1520" height="1520" data-path="images/agent-builder/blueprints/parse-json-workflow.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-workflow.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=14775b2b16e38a51281cdce4c9be28cf 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-workflow.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=aabaa684568fce5895a31bff8635c6a1 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-workflow.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1b4364460c8034d92da9f600ed174d3d 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-workflow.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=585522ab4d9551b2ea4f1d3e99654123 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-workflow.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ddfad032b8f763098b148d4ca967b45f 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-json-workflow.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1bdc7a602c9421a417582e2b96cac879 2500w" />

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Plain text</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>The request was successful.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>The text provided couldn't be parsed.</td>
    </tr>
  </tbody>
</table>

The output of the **Parse JSON** block is a structured object. You can use this object in the following block with the `@{result}` variable.

To access the values of the object in other blueprint blocks, you can use dot notation. For example, if the object looks like this:

```json  theme={null}
{
  "customer": {
    "name": "Sarah Johnson",
    "email": "sarah@example.com",
    "tier": "premium"
  }
}
```

`@{result.customer.name}` will return the value of the `name` property of the `customer` object.


# Parse PDF tool
Source: https://dev.writer.com/blueprints/parsepdftool



Uses Writer API to extract the text content of a PDF file stored in Writer cloud.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=48f50e8bf109f7831fdbfa4e9408f45e" alt="" data-og-width="2192" width="2192" data-og-height="1440" height="1440" data-path="images/agent-builder/blueprints/parse-pdf-tool-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5ad2d84b29e01744a462462a730da1a9 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=bcf9524a6b1c14839b769532822734c4 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=599a7746ee59866eccb25faa305f2b64 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=920b04be5d8375eedd7317e5eb950b14 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=be4f87b12814eb0b33f40e981e08187e 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=287bb224737172f052ab63cd18ff1277 2500w" />

## Overview

The **Parse PDF tool** block extracts text content from PDF files stored in the Writer cloud. Use it to convert PDF documents into searchable, analyzable text that can be used in AI workflows, content analysis, or data extraction processes.

## Common use cases

* Extracting text from PDF documents for analysis
* Converting PDF reports into searchable content
* Processing PDF forms and documents
* Building document processing workflows

## How it works

1. **PDF input**: Provide a PDF file UUID from the Writer cloud. The file must be uploaded to Writer first; you can upload a file first using the "Add files to Writer Cloud" block. You can also use files uploaded via the API, no-code agents, or the Writer cloud UI.
2. **Content extraction**: The block extracts text content from the PDF using the Writer API.
3. **Format selection**: Choose to enable markdown formatting for the extracted content.
4. **Text processing**: Converts PDF content into the selected format and returns it as a string.

The block handles PDF parsing, text extraction, and formatting. The extracted text maintains the document's structure.

### When to enable markdown formatting

You can choose to parse the PDF content as plain text or markdown. The default is plain text.

**When to use markdown:**

* Preserving document structure and hierarchy
* Maintaining formatting for readability
* Working with documents that have headings, lists, or emphasis
* Creating summaries that maintain document organization

**When to use plain text:**

* Simple text analysis and processing
* When formatting isn't relevant to your workflow
* Extracting raw text for AI processing
* Reducing complexity in downstream processing

## Examples

### Document analysis workflow

This example shows how to extract and analyze text from PDF documents in a complete workflow.

**Blueprint Flow:**

1. **UI Trigger** → User uploads PDF document
2. **Add files to Writer Cloud** → Uploads PDF document to Writer cloud
3. **Parse PDF tool** → Extracts text from PDF document
4. **Text generation** → Creates analysis and summary
5. **Set state** → Stores analysis for user review

**Block Configuration:**

* **File:** `@{result.0.id}`. This variable is the UUID of the file in Writer cloud. The `Add files to Writer Cloud` block returns a list of file objects that were uploaded to Writer cloud. To process multiple files, you can use the [**For each loop** block](/blueprints/for-eachloop) to iterate over the list of files.
* **Enable markdown:** `disabled`. Extracts content as plain text, because the formatting isn't relevant to the text generation task.

<Warning>The Parse PDF tool only accepts file UUID from the Writer cloud. Files must be uploaded first using the "Add files to Writer Cloud" block or File input component.</Warning>

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-workflow.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4098391a24854a61c3131003ca41ee87" alt="" data-og-width="2408" width="2408" data-og-height="1572" height="1572" data-path="images/agent-builder/blueprints/parse-pdf-tool-workflow.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-workflow.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=50a40f135ae328c57771ca5b4fad5b46 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-workflow.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2dca62d57b10b9a34de4eb0db35555c1 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-workflow.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ff7b404897f28d8040ccc84cc3d853d6 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-workflow.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e5b5bf0c6cdc8948200c65794f5ecdb0 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-workflow.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ad3e6403448667ac98a81c916368f6e8 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/parse-pdf-tool-workflow.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c0c3d2788d43d373ed3a007368da4639 2500w" />

This workflow enables automated document analysis and text extraction for research and content processing.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>File</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <code>""</code>
      </td>

      <td>UUID of a file object in Files API.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        Format: uuid
      </td>
    </tr>

    <tr>
      <td>Enable markdown</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <code>yes</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>If the execution was successful.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

The **Parse PDF tool** block returns the extracted text content as a string. Access the output using the `@{result}` variable in the block that follows it in a blueprint.


# Python code
Source: https://dev.writer.com/blueprints/pythoncode



Runs custom Python code. Useful for logic not covered by existing blocks.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0e036182b28e067fbb66aa61b0c1a234" alt="" data-og-width="2310" width="2310" data-og-height="1490" height="1490" data-path="images/agent-builder/blueprints/python-code-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c40908b77a2e4b23a4db43edf7bda0f0 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4daf1507746d13adbd6310c8c8111c1d 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=40e6c064f3e1b43674e282e92f5110df 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=29f1f9d99ed61493e5a3df096471cb7a 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=91f52c2c1f9fb1d55a48cb4371e222ca 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-code-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=89e5dbb984b7b941cb5c521bf9461864 2500w" />

## Overview

The Python code block allows you to write Python code to extend your blueprint's functionality. Use it to perform custom data processing, calculations, API integrations, or any other logic that requires Python programming capabilities.

## Common use cases

* Custom data processing and transformations
* Complex calculations and mathematical operations
* API integrations with external services
* File manipulation and data parsing

## How it works

1. **Code execution**: Write Python code in the block's code editor.
2. **Variable access**: Access [state variables](/agent-builder/state), [environment variables](/agent-builder/execution-environment), and [preinstalled libraries](/agent-builder/python-libraries).
3. **Output generation**: Use `set_output()` to return values to subsequent blocks.
4. **Error handling**: Handle exceptions and provide meaningful error messages. If an error occurs, access the error message in the next block using `@{message}`.
5. **Error exit condition**: Raise an `Exception` to trigger the **Error** exit condition and route to error handling blocks.

The block provides a full Python environment with access to [state variables](/agent-builder/state), [execution environment variables](/agent-builder/execution-environment), and [preinstalled libraries](/agent-builder/python-libraries).

## Examples

### Calculate average from list

This example shows how to return a value from the Python code block. It calculates the average of a list of numbers and returns the result to the next block by using the `set_output` function.

**Blueprint flow:**

1. **UI Trigger** → User provides list of numbers
2. **Python code** → Calculates average of numbers
3. **Set state** → Stores result in state variable

```python  theme={null}
def calculate_mean(numbers):
    return sum(numbers) / len(numbers)

average = calculate_mean(state["numbers"])
set_output(average)
```

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-block-example.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0622225769970e6d301f15bf65a07014" alt="" data-og-width="2352" width="2352" data-og-height="1086" height="1086" data-path="images/agent-builder/blueprints/python-block-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-block-example.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5a6cbfedfa31d2c64c09dcc63ec7a66a 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-block-example.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=456db592e3942f5efb3312c1bb144481 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-block-example.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f95463d5f045651586c89a4a075ec9d7 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-block-example.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7948f94765a9de8cccd4901b5e033ffe 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-block-example.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=290b659aae36422fbf66e92d6140d9ca 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/python-block-example.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=31cf9cf882da337b8c4c6efe6c53c197 2500w" />

### Error handling with exceptions

You can trigger the **Error** exit condition by raising an `Exception` in your Python code. This allows you to route to error handling blocks when specific conditions are met.

**Example:**

```python  theme={null}
# Validate user input and raise exception if invalid
user_age = state.get("age", 0)

if user_age < 0 or user_age > 120:
    raise Exception("Invalid age: Age must be between 0 and 120")

if not state.get("email"):
    raise Exception("Missing required field: Email address")

# Process valid data
set_output({"status": "valid", "age": user_age})
```

When an `Exception` occurs, the Python code block exits with the **Error** condition, allowing you to route to error handling blocks in your blueprint. You can access the error message in the next block by referencing the `@{message}` variable.

## Available variables and libraries

Python code block can access the following global variables and libraries:

* [State variables](/agent-builder/state)
* [Execution environment variables](/agent-builder/execution-environment)
* [Preinstalled Python libraries](/agent-builder/python-libraries)
* Functions you've defined in your `main.py` file

### Return values from the Python code block

To return a value from a Python code block and store it in the `result` execution environment variable, you must use the `set_output` function.

Anything that runs in the block but is not returned in the `set_output` function does not get passed to the next block.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Code</td>
      <td>Code</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>The code to be executed.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>The event handler execution was successful.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>The event handler execution wasn't successful.</td>
    </tr>
  </tbody>
</table>

Access the output of a **Python code** block using the `@{result}` variable in the block that follows it in a blueprint. The output contains whatever value was passed to the `set_output()` function.

Access the error message of a **Python code** block using the `@{message}` variable in the block that follows it in a blueprint. The error message contains whatever value was passed to the `raise Exception` function.


# Return value
Source: https://dev.writer.com/blueprints/returnvalue



Returns a value from this block to the caller. Use to pass results to another blueprint.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=3a1354d786dc46b7c9b3928b4bcda7b3" alt="" data-og-width="2310" width="2310" data-og-height="1488" height="1488" data-path="images/agent-builder/blueprints/return-value-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=67aa8224e6b916924f83de8cd1e13b28 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=beee30c0733ee74a791cc90f22f38c05 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d71f9277716b0ba7212b9531199f19d3 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7e4c2770914bf2c015ee6f1afd2fafea 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e3d19fba12ff889f57620a3405d114d3 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=df1b17f37e048d6edf1414c187f1f9b2 2500w" />

## Overview

The **Return value** block allows you to chain multiple steps together to perform certain actions, and return a single value at the end of the chain. You can use it in the following scenarios:

* To return a value in [tool calling](/agent-builder/tool-calling)
* To return a value when a blueprint is invoked with the [**Run blueprint** block](/blueprints/runblueprint)

It passes the value specified in the **Value** field at the end of a chain of blocks.

### Return a value in tool calling

When an **Tool calling** block decides to run a tool, the tool can include any number of blocks and return a final value to the **Tool calling** block. Use the **Return value** block to define what the final return value is.

If you do not use the **Return value** block, the tool call executes the blocks that follow it but doesn't return a value to the **Tool calling** block.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-tool-calling.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=57dc4439756ba669b0a674ff1fd7192e" alt="" data-og-width="2874" width="2874" data-og-height="1470" height="1470" data-path="images/agent-builder/blueprints/return-value-tool-calling.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-tool-calling.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=12fc0c2d3c255e22f6e9b45bdc0a8126 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-tool-calling.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=946b9024dd737f9fb8ff9a88f54e152c 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-tool-calling.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6187c7801758043194432d5c84367203 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-tool-calling.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0225a14eaf25ddd8ca5d6f5f3a128188 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-tool-calling.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=3263523cf558c5d611aaf3a00a8468be 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-tool-calling.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1bab4aad1a382609478edfaea9522230 2500w" />

In the example above, the two **Return value** blocks provide the values of the "Call shipping API" block and the "Call order status API" HTTP Request blocks to the **Tool calling** block.

Without the **Return value** blocks, the "Call shipping API" and "Call order status API" blocks would execute, but their results would not be returned to the **Tool calling** block.

### Return a value from a blueprint

Use the **Return value** block to pass results to another blueprint.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-run-blueprint.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c39673550087f2f05075b04b60859086" alt="" data-og-width="2484" width="2484" data-og-height="876" height="876" data-path="images/agent-builder/blueprints/return-value-run-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-run-blueprint.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=7b9713959e10ea2c4c5d0a6509273935 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-run-blueprint.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=41c97b91329c41c0767b8034ef91164d 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-run-blueprint.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=51ff0bf2c074f5da89e72976d52c67d8 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-run-blueprint.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c813c51d80967c95473fa1db913af16d 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-run-blueprint.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ea937c853320efd27009187c725fc34c 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/return-value-run-blueprint.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=a1c5d4e7ad5398c2dd4baa3a796f2e72 2500w" />

In the example above, the **Return value** block follows the **Text generation** block. It sets the results from the text generation block as the final return value of the blueprint. The blueprint passes this value when it is invoked with the **Run blueprint** block.

Without the **Return value** block, the blueprint would run and the **Text generation** block would execute, but its result would not be returned to the block that ran the blueprint.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Value</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>If the function doesn't raise an Exception.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>


# Run blueprint
Source: https://dev.writer.com/blueprints/runblueprint



export const payload_0 = undefined

Starts another blueprint by key. Useful for breaking logic into smaller, reusable parts.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=8606940f7f4f2654f95539ab18d4f3bf" alt="" data-og-width="2192" width="2192" data-og-height="1450" height="1450" data-path="images/agent-builder/blueprints/run-blueprint-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c89763467b1a2d43ed382fe656c77b9b 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=8f376ec9b430946bfe2563b89af97d47 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=75a4450af7b5a71122e63f3fd7099cdb 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0ffa680c40f2c2099d8ae827312a3563 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d9f4a42c885c271913eb4f8d14516ae2 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e90a72fe8c718d28f56ddafe0f388fe7 2500w" />

## Overview

The **Run blueprint** block allows you to call another blueprint from within your current workflow. This enables modular, reusable logic and lets you break complex workflows into smaller, manageable pieces.

You can specify the blueprint to run and pass input parameters. The output of the called blueprint is available for use in subsequent blocks.

## Common use cases

* Reusing logic across multiple workflows
* Breaking up large blueprints into smaller, maintainable components
* Creating shared utility blueprints
* Running conditional or dynamic workflows

## How it works

1. **Blueprint Key**: Select the blueprint to run by its key. The blueprint must have a key set in its settings. If the blueprint doesn't have a key, it does not show in the list of available blueprints.
2. **Payload**: Provide input data as text that will be available as `@{payload}` in the called blueprint. The payload is treated as plain text.

The block executes the specified blueprint and returns any output that the called blueprint returns with the **Return value** block.

<Tip>
  **No trigger required:** Blueprints called with the Run blueprint block don't need a UI trigger or any other trigger. They start execution immediately when called and can access the payload data you pass in.
</Tip>

## Examples

### Document processing workflow

This example demonstrates a document processing system that handles different file types using specialized blueprints.

**Blueprint Flow:**

1. **UI Trigger** → User uploads document through file input
2. **Classification** → Identifies document type (invoice, resume, or contract)
3. **Conditional routing** → Routes to appropriate processing blueprint
4. **Run blueprint** → Executes specialized document processor
5. **Set state** → Stores the processing result to display in the UI

**Block Configuration:**
For invoice processing:

* **Blueprint Key:** `invoice_processor`
* **Payload:** `@{file_data}`

**Called Blueprint Access:**
In the `invoice_processor` blueprint, you can access the passed data using `@{payload}`. Then you can return a value from the blueprint using the **Return value** block.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-workflow.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c5cf052b37a9ca43ab55016e53a39dbe" alt="" data-og-width="2750" width="2750" data-og-height="1430" height="1430" data-path="images/agent-builder/blueprints/run-blueprint-workflow.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-workflow.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ea18c2f9c0769ba8ab2685c1880cc829 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-workflow.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=a57294ac75f4c09c2140f7b4a1685f61 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-workflow.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d4e02430e0335c1a3805440c06a8a844 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-workflow.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=8e7bf88905814165aad96326b1ab788a 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-workflow.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=85588800df45053a856a3a89af9907f7 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/run-blueprint-workflow.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d2f998e12630c382219f2093cad20fcf 2500w" />

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Blueprint Key</td>
      <td>Blueprint Key</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        Format: writer#blueprintKey
      </td>
    </tr>

    <tr>
      <td>Payload</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <code>
          {"{}"}
        </code>
      </td>

      <td>The value specified will be available using the template syntax i.e. @{payload_0}</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>The request was successful.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>The blueprint was executed successfully.</td>
    </tr>
  </tbody>
</table>

The output of the **Run blueprint** block is the return value from the called blueprint. This is typically the result of the last block in the called blueprint, or a specific return value if the called blueprint has a **Return value** block. You can access this output in subsequent blocks using `@{result}`.


# Set state
Source: https://dev.writer.com/blueprints/setstate



Stores a value in the Agent's state. Use to remember data across steps.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ca95ff0a9947fdd1aaa4e6f01516c8b1" alt="" data-og-width="2188" width="2188" data-og-height="1436" height="1436" data-path="images/agent-builder/blueprints/set-state-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=bf52785c8e44056875c61cc2f6717ec0 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9046daa2f7607f475335f077f9c50307 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9c9edd4e44606e760167ef411367f14c 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=42d11c5c60cfcd581767226d4359a632 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5175f7c343f861e14d7e16136435d2ce 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=22c1239dd38b41d32e6c132eae96b94a 2500w" />

## Overview

The **Set state** block is a core building block that connects information between different parts of your blueprint, interface, and code. It acts as a bridge, allowing data to flow from one part of your workflow to another - whether that's from blueprint to interface, between different blueprint blocks, from interface back to blueprint, or to and from custom Python code.

You can specify the variable name, value, and value type (plain text or JSON). The value is then available in subsequent blocks via the state variable.

## Common use cases

* Storing user input or intermediate results
* Passing data between blocks in a workflow
* Saving API responses or generated content for later use
* Managing workflow state or flags
* Storing block results to display in interface components
* Persisting data between interface updates and refreshes

## How it works

1. **Link Variable**: Specify the name of the state variable to set.
2. **Value type**: Choose whether the value is plain text or JSON. The default if not specified is plain text.
3. **Value**: Enter the value to store.

The block saves the value in the specified state variable. You can reference this variable in later blocks using the state syntax, for example, `@{state.variable_name}`.

## Examples

### Text generation workflow

This example shows how to generate text and display it in the interface using state management.

**Blueprint Flow:**

1. **UI Trigger** → User clicks "Generate" button
2. **Text generation** → Creates content based on prompt
3. **Set state** → Stores generated text

**Interface** → Has a **Text** component that displays the text from the state variable

**Block Configuration:**

* **Link Variable:** `generated_text`
* **Value type**: `text`. The default if not specified is plain text.
* **Value:** `@{result}`. This variable is the text generated by the text generation block that precedes the **Set state** block.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-workflow.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=add566046e86daebbb53699f0b8977f6" alt="" data-og-width="2430" width="2430" data-og-height="1568" height="1568" data-path="images/agent-builder/blueprints/set-state-workflow.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-workflow.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=de782f27118ab00e37db243efc8befcc 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-workflow.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4468babdd375012080327542a42f6608 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-workflow.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=a6fa8f0194efb769e712d38819cad9a6 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-workflow.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=40184967b3393fd1f07e7d1b198a3c7b 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-workflow.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6fa66d1f80e939aa75f6b837f15567e8 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-workflow.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6d84a91671d1d11cc5443b95a8880850 2500w" />

This workflow enables automated text generation and display in the interface.

### Form submission workflow with JSON value type

This example shows how to package multiple form field responses into a single state variable. It's useful when collecting and storing related data from interface forms.

**Blueprint Flow:**

1. **UI Trigger** → User submits a registration form. All the form fields have Link Variables set to the name of the field.
2. **Set state** → Stores all form fields as JSON

**Block Configuration:**

* **Link Variable:** `form_data`
* **Value type**: `JSON`
* **Value:**
  ```json  theme={null}
  {
    "firstName": @{firstName},
    "lastName": @{lastName},
    "email": @{email},
    "phoneNumber": @{phoneNumber},
    "address": {
      "street": @{address.street},
      "city": @{address.city},
      "state": @{address.state},
      "zipCode": @{address.zipCode}
    },
    "preferences": {
      "newsletter": @{preferences.newsletter},
      "notifications": @{preferences.notifications}
    }
  }
  ```

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-json.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ac4f9e3eed6342875e6eb547d744969b" alt="" data-og-width="2070" width="2070" data-og-height="1378" height="1378" data-path="images/agent-builder/blueprints/set-state-json.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-json.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9936661dbfd9b1ac698189e1af738ab7 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-json.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b0a706cfd879eb904b8acc71e56f748e 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-json.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4a548fc6088c62859e65a50e0785b169 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-json.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e8b4a25489a30e70e4f271f382bbcdaa 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-json.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1251dacb8a47e74d6ce016bc4db5b45e 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/set-state-json.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2bb746c714539b9ddb44ebe2cc037ce1 2500w" />

To access specific fields of the JSON data, use the state syntax, for example `@{form_data.firstName}` or `@{form_data.address.city}`.

<Tip>
  To access elements of the state variable using Python, treat it as a dictionary. For example, `@{state["form_data"]["firstName"]}` or `@{state["form_data"]["address"]["city"]}`.
</Tip>

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Link Variable</td>
      <td>Binding</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>Set the variable here and use it across your agent</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Value type</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <code>text</code>
      </td>

      <td>-</td>

      <td>
        <ul>
          <li>text - Plain text</li>

          <li>JSON - JSON</li>
        </ul>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Value</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>If the function doesn't raise an Exception.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

The **Set state** block returns the value that was set in the state variable. You can access this value in the following block as `@{result}`, or you can use the state syntax to access the value in the state variable, for example `@{form_data}`.


# Structured output
Source: https://dev.writer.com/blueprints/structuredoutput



Allows to define a JSON response format, which the agent will use to structure its output.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c076d45dd7890a11f83ccb8080ff8c27" alt="" data-og-width="2188" width="2188" data-og-height="1456" height="1456" data-path="images/agent-builder/blueprints/structured-output-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=870c0941bdc69bd910a40869fadde28b 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=693cb70fc92838c821d42a51c8add4e0 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=3f39c493f83a20e42567cf8460f75dc6 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=cc0df85f56d8bd645ac9b90a32d9e2f5 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=23d2d5f5ee532c7aa14c998da2521d9b 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c855a4318b04d32bb6350549b53c4102 2500w" />

## Overview

The **Structured Output** block allows you to define a JSON response format that the AI model uses to structure its output. This is useful when you need the model to return data in a specific schema, such as for downstream processing, API responses, reliable data extraction, or integrations. The block returns the JSON object that matches the schema.

You can specify a prompt describing the data you want, and provide a [JSON Schema](https://json-schema.org/) to enforce the structure of the output. The model attempts to generate a response that matches the schema.

## Common use cases

* Extracting structured data from unstructured text; for example, extracting entities, tables, or key-value pairs
* Generating API responses in a specific format
* Creating objects for further automation or integration
* Enforcing data validation on AI-generated output

## How it works

1. **Prompt**: Describe the data you want the model to generate.
2. **JSON Schema**: Define the required structure for the output. See [JSON Schema](https://json-schema.org/) for more information about how to write a JSON Schema.
3. **Model**: Select the model to use for generation.
4. **Max output tokens**: Set the maximum length of the output.

The block sends the prompt and schema to the model, which returns a JSON object matching the schema. If the output isn't parsable as JSON or doesn't match the schema, the block raises an error.

## Examples

### Data extraction from documents

This example shows how to extract structured data from unstructured documents using AI.

**Blueprint Flow:**

1. **UI Trigger** → User selects a document from the interface
2. **Parse PDF tool** → Extracts text from document. Note: the document must already be uploaded to the Writer cloud.
3. **Structured output** → Extracts specific data fields
4. **HTTP Request** → Sends structured data to external API

**Block Configuration:**

* **Prompt:** "Extract the following information from the document. Document content: @{result}. Return the data in the following format: company name, contact person, email, phone number, and address."

* **JSON Schema:**

  ```json  theme={null}
  {
    "type": "object",
    "properties": {
      "company_name": {"type": "string"},
      "contact_person": {"type": "string"},
      "title": {"type": "string"},
      "email": {"type": "string", "format": "email"},
      "phone": {"type": "string"},
      "address": {"type": "string"}
    },
    "required": ["company_name", "contact_person", "email"],
    "additionalProperties": false
  }
  ```

* **Model:** `palmyra-x5`

This workflow enables automated extraction of structured data from unstructured documents.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-workflow.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=28b740cca2a244b2001580a4b1446dc5" alt="" data-og-width="2104" width="2104" data-og-height="1446" height="1446" data-path="images/agent-builder/blueprints/structured-output-workflow.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-workflow.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b4279b1d5ff05201faae3624a50612cb 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-workflow.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5dfb494596ffde326b48960c3b8cebcd 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-workflow.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=82c63586a3a5244d043b46aac87322bc 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-workflow.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=71f1cbc1b5606e58ae7ceceb24a93c74 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-workflow.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=eec0384750a4c4bfd87006c015154c1c 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/structured-output-workflow.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=f73a952d15924b89dae2cb0ef656536e 2500w" />

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Prompt</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>Description of a JSON object to be created.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Model</td>
      <td>Model Id</td>
      <td>-</td>

      <td>
        <code>palmyra-x5</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>JSON Schema</td>
      <td>JSON</td>
      <td>-</td>

      <td>
        <code>
          {"{}"}
        </code>
      </td>

      <td>JSON schema that defines the structure of the response. For example, `{"type": "object", "properties": {...}, "required": [...]}`.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Max output tokens</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <code>1024</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        Range:
        1    to  16384
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>If the function doesn't raise an Exception.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

The **Structured Output** block returns the JSON object that matches the schema. You can access this value in the following block as `@{result}`.


# Text generation
Source: https://dev.writer.com/blueprints/textgeneration



Generates text using a Writer model. Use for completions, summaries, or creative writing.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=25b22fc709f4cb902f4cf166e5c6e06e" alt="" data-og-width="2192" width="2192" data-og-height="1464" height="1464" data-path="images/agent-builder/blueprints/text-generation-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=87379f398e58948a9e89499f6187cfb3 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=8ff88604171bc1341fc8fe49ebef991d 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=da534fe1173e8371db73875a2ea8b14a 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2c4afb581fdfef9447fa61acaf0079c6 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2d45daa87bd180b3475bdb492819057e 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=b3f921e41522f0470aea0be4e8cff382 2500w" />

## Overview

The **Text generation** block generates text using a Palmyra model. Use it for text completions, summaries, creative writing, and more. You provide a prompt, and the model generates a response based on your instructions.

You can control the creativity of the output using the temperature setting, and limit the length with the max output tokens field.

## Common use cases

* Generating summaries or explanations
* Creative writing such as stories, marketing copy, and abstracts
* Expanding or rewriting text
* Answering questions based on a prompt

## How it works

1. **Prompt**: Enter the text or instructions for the model.
2. **Model**: Select the model to use for generation. Learn more about [the suite of Palmyra models](/home/models).
3. **Temperature**: Adjusts randomness and creativity. A higher temperature value like 0.7-1.0 makes the output more creative, while a lower temperature value like 0.0-0.3 makes it more deterministic.
4. **Max output tokens**: Sets the maximum length of the generated text.

The block sends the prompt and settings to the model, which returns the generated text as output.

## Examples

### Content creation workflow

This example shows a marketing workflow where user input is transformed into professional marketing copy.

**Blueprint Flow:**

1. **UI Trigger** → Marketing team submits product details through form
2. **Text generation** → Creates product description based on input
3. **Set state** → Stores generated content for review and approval in the interface

**Block Configuration:**

* **Prompt:** "Create a compelling product description for a @{product_name} that highlights its @{key_features}. Target audience: @{target_audience}. Tone: professional but approachable."
* **Model:** `palmyra-x5`
* **Temperature:** `0.7`

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-workflow.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0de274488bad6f873e8827ca24a9752d" alt="" data-og-width="2180" width="2180" data-og-height="1434" height="1434" data-path="images/agent-builder/blueprints/text-generation-workflow.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-workflow.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=19202ba74f7d7d8d7585f17fe85ec717 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-workflow.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=660875c818a785f7f7c94f2894efadb0 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-workflow.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d5473703e5b2a6f7fa7d0cae065b9d04 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-workflow.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0a9b616761a68da88bae2ac2fa39bc9d 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-workflow.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d3c12e300cf36e7bc8a8ce930d558fe8 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-workflow.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=26062a29cbcbdae5b5347021e5e505a2 2500w" />

This workflow automates content creation while ensuring appropriate tone and messaging for different marketing channels.

### Customer support response system

This example demonstrates an automated support system that generates personalized responses based on customer inquiries.

**Blueprint Flow:**

1. **UI Trigger** → Customer submits support ticket
2. **Classification** → Categorizes the issue type
3. **Text generation** → Creates personalized response based on category
4. **Set state** → Stores response for customer to display in the interface

**Block Configuration:**

* **Prompt:** "Generate a helpful and empathetic response for a customer unable to log into their @{product}. Address common login troubleshooting steps like password reset, browser cache clearing, and two-factor authentication issues. Include links to our password reset tool and support documentation. If these steps don't resolve the issue, provide instructions for escalating to our technical support team."
* **Model:** `palmyra-x5`
* **Temperature:** `0.4`

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-support-workflow.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=2aa360886c3ed6a03a2c5dcaabc82e5e" alt="" data-og-width="2812" width="2812" data-og-height="1598" height="1598" data-path="images/agent-builder/blueprints/text-generation-support-workflow.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-support-workflow.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=3220fc4260f7964253d77b666c091624 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-support-workflow.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=bc72bbf6c09a36ed7df59f37c03a2324 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-support-workflow.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=606adc394eb89c29cd76f843aa7b7b26 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-support-workflow.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ad9274d093086606de59368f3f8c2ce9 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-support-workflow.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=0ad1673ecfe86013b733aa6f60707de7 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/text-generation-support-workflow.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=fdba4ed64177ddefd4130d296c31bc1b 2500w" />

This workflow provides automated, personalized customer support responses while maintaining human-like empathy and helpfulness.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Prompt</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Model</td>
      <td>Model Id</td>
      <td>-</td>

      <td>
        <code>palmyra-x5</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Temperature</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <code>0.7</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        Range:
        0    to  1
      </td>
    </tr>

    <tr>
      <td>Max output tokens</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <code>1024</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        Range:
        1    to  16384
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>If the function doesn't raise an Exception.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

The **Text generation** block returns the generated text as output. You can access this value in the following block as `@{result}`.


# Tool calling
Source: https://dev.writer.com/blueprints/toolcalling



Connects the Agent to external tools to complete tasks it cannot handle directly.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=8210f07c636bcd842fab8a6a31e905dd" alt="" data-og-width="2850" width="2850" data-og-height="1474" height="1474" data-path="images/agent-builder/tool-calling-block-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3773a683a2da821b78b969664f1f496f 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=33e268b579da79a4b088ae4f25bc568d 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=089f200264aa6513b091bbe4d1a9d553 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f20f67014f413d0a35d9310d02e0dd55 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=5cd5dbb18dc2c3cd460508d87ecbb389 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-block-example.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=085c9de29b9c6d8993217f56c3616572 2500w" />

## Overview

The **Tool calling** block enables your agent to interact with external systems, APIs, and custom functions to gather information, perform actions, or execute complex workflows that extend beyond the model's built-in capabilities.

When the tool calling block executes, the AI model analyzes the prompt and automatically determines which tools to use, when to use them, and how to combine the results to complete the requested task. The model can make multiple tool calls in sequence and use the results from one tool to inform subsequent tool calls.

## How tool calling works

* **Tool selection**: The model analyzes your prompt and determines which available tools are needed
* **Parameter extraction**: The model extracts the necessary parameters from the prompt and context to call each tool
* **Sequential execution**: Tools are called in the optimal order, with results from previous tools informing subsequent calls
* **Result synthesis**: The model combines all tool results with its own knowledge to generate the final response

To learn more about how tool calling works, see the [Tool calling introduction](/agent-builder/tool-calling-intro) documentation.

## Tool types

The tool calling block supports two types of tools:

* **Function tools**: Custom workflows you build within the blueprint using other blocks
* **Built-in tools**: Pre-configured integrations with external services. Currently only [Knowledge Graphs](/home/knowledge-graph) are supported.

### Function tools

Function tools allow you to define custom logic using other blueprint blocks. Each function tool requires:

* **Tool name**: A unique identifier for the tool
* **Description**: Clear explanation of what the tool does and when to use it
* **Parameters**: Input fields the model should provide when calling the tool
* **Implementation**: The workflow of blocks that execute when the tool is called

<Warning>
  When you implement the chain of blocks that make up a function tool, you must use include a [Return value](/blueprints/returnvalue) block at the end of the chain to return a value to back to the model.
</Warning>

The model uses the tool name and description to determine when to call the tool, and uses the parameter definitions to extract the correct values from the prompt context.

#### Tool definitions

The tool definition for a `Function` tool follows the [JSON Schema](https://json-schema.org/) format. You provide the definition when adding the tool to the **Tool calling** block.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=13a33c67238f7eb1ac80ddd29476d699" alt="" data-og-width="1846" width="1846" data-og-height="800" height="800" data-path="images/agent-builder/add-function-tool-calling.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b54f0a8f05551fae83447f715cee6230 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=2fa5c57ba9ab776b735031f4a87c0438 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=9ffb98f8f212775b186b5ce8a0ab1ccc 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a9894b9e75ef29e2d9c62a13ba47477f 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=52b59748d5d3d93c70525f770c121683 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-function-tool-calling.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=8149db43b94962e05652c3f7819d8539 2500w" />

The definition has the following structure:

| Parameter               | Type   | Description                                                                                                                      |
| ----------------------- | ------ | -------------------------------------------------------------------------------------------------------------------------------- |
| `name`                  | string | The name of the tool                                                                                                             |
| `description`           | string | A description of what the tool does and when the model should use it                                                             |
| `parameters`            | object | An object containing the tool's input parameters                                                                                 |
| `parameters.type`       | string | The type of the parameter, which is `object` for a JSON schema                                                                   |
| `parameters.properties` | object | An object containing the tool's parameters in the form of a [JSON schema](https://json-schema.org/). See below for more details. |
| `parameters.required`   | array  | An array of the tool's required parameters                                                                                       |

#### Example tool definition

Below is an example of a tool definition that gets the details of a package's shipping status. It takes a tracking number and a carrier name as input parameters and returns the shipping status of the package.

```json  theme={null}
{
  "name": "check_shipping_status",
  "description": "Gets real-time shipping and tracking information for a package",
  "parameters": {
    "type": "object",
    "properties": {
      "tracking_number": {
        "type": "string",
        "description": "The shipping carrier's tracking number"
      },
      "carrier": {
        "type": "string",
        "enum": ["fedex", "ups", "usps", "dhl"],
        "description": "Shipping carrier name"
      }
    },
    "required": ["tracking_number", "carrier"]
  }
}
```

### Knowledge Graph tools

Knowledge Graph tools allow you to connect to one or more [Knowledge Graph](/home/knowledge-graph) to get information about a specific topic.

To add a Knowledge Graph tool, select the Knowledge Graph(s) you want to use from the dropdown of available Knowledge Graphs.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5d140ef33d204a34445d55836a02f8fc" alt="" data-og-width="1924" width="1924" data-og-height="922" height="922" data-path="images/agent-builder/add-kg-tool-calling.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=0aa8c6f45f3a923f9d78c7355b88668a 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=73e609e47a0502e614ed1a5291acb34f 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=47e92a6094b8a2713b6daaae58141ee3 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a5487d848229ea5867e2fbab98d0496b 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a5d8d9421c7b53bc0a62934fa12e5dd1 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/images/agent-builder/add-kg-tool-calling.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f48d30c41aeb58c81a0521267830ec5f 2500w" />

## Prompt engineering for tool calling

While AI models are highly intelligent and can reason about complex tasks, a well-structured prompt is essential for effective tool calling. The prompt serves as a blueprint that clearly defines what tools are available, guides the model through the decision-making workflow, and specifies the expected output format. Without this guidance, the model might miss important steps, use tools inefficiently, or produce results that don't match your requirements.

### Key elements of effective tool calling prompts:

* **Clear tool descriptions**: Explain what each tool does and when to use it
* **Decision logic**: Provide step-by-step workflow guidance
* **Output format**: Specify the structure and format of the expected response
* **Context handling**: Include relevant background information and constraints

## Example

Below is an example of a Tool calling block that is connected to multiple tools that run Python code or call external APIs.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7ea6f52ba3f6a26cdb0fcff07d5404bc" alt="" data-og-width="3456" width="3456" data-og-height="1806" height="1806" data-path="images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b10a295f72b8dd93317d5acbbb706676 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=9f76f0636739ea24946c677e10ba4749 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=3a978254b56e8cdc7b2b910b0d0e6129 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=febffef411dac0c2183cd7120c0348d5 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=129b749f513561cd0c8ede4e6b26f15a 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/agent-builder/tool-calling-tutorial/tool-calling-full-blueprint.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=56501e8b880f4137459e7ff00fd03c7b 2500w" />

For a complete walkthrough of building an agent with tool calling, see the [Tool calling with external APIs](/agent-builder/tool-calling-tutorial) tutorial.

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Prompt</td>
      <td>Text</td>
      <td>Textarea</td>

      <td>
        <span>-</span>
      </td>

      <td>The task that needs to be carried out.</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Model</td>
      <td>Model Id</td>
      <td>-</td>

      <td>
        <code>palmyra-x5</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Max iterations</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <code>10</code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Tools</td>
      <td>Tools</td>
      <td>-</td>

      <td>
        <code>
          {"{}"}
        </code>
      </td>

      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Tools</td>
      <td>tools</td>
      <td>dynamic</td>
      <td>Run associated tools.</td>
    </tr>

    <tr>
      <td>Success</td>
      <td>-</td>
      <td>success</td>
      <td>If the function doesn't raise an Exception.</td>
    </tr>

    <tr>
      <td>Error</td>
      <td>-</td>
      <td>error</td>
      <td>If the function raises an Exception.</td>
    </tr>
  </tbody>
</table>

The `dynamic` end state means that the exact values of this end state change based on how you define the block.


# UI Trigger
Source: https://dev.writer.com/blueprints/uitrigger



Triggers an event based on UI interactions like button clicks or input changes.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-block.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=5d8867832427524aca6ade72304f9303" alt="" data-og-width="2198" width="2198" data-og-height="1450" height="1450" data-path="images/agent-builder/blueprints/ui-trigger-block.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-block.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=1d71ee9ede31a1fb0ae6ccb34086bd61 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-block.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=6320e76971df3d8c42030daeb82604ea 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-block.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=d7f6bf92112de5821e18f93f4c434a27 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-block.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=80a30bbf12002e5c26d8e1d40062142b 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-block.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=9b63c335c8af39479e0f5901e5d73c66 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-block.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=4b0b85d243d0ea4536f01d730f64509a 2500w" />

## Overview

The **UI Trigger** block is the starting point for your blueprint if users interact with the agent's interface.

It starts a workflow in response to a user action in the UI, such as clicking a button or typing in a text area. Use it to connect frontend events to backend logic in your blueprint.

You can specify the event to listen for and any parameters to pass to the workflow.

## How it works

1. **Component Id**: Select the UI component that triggers this workflow; for example, a button click or chatbot message.
2. **Event type**: Specify the type of event to listen for; for example, clicks (`wf-click`) or text area changes (`wf-change`).
3. **Default result**: Optionally provide a default result when testing the blueprint from the "Run blueprint" button. This is useful for testing the workflow without having to interact with the interface. The default result should match the expected payload format for the selected event type. For example:
   * For a button click (`wf-click`), provide an object with modifier key states, like:
     ```json  theme={null}
     {
       "ctrl_key": false,
       "shift_key": false,
       "meta_key": false
     }
     ```
   * For a text input change (`wf-change`), provide the expected text value, like `"Sample text"`
   * For a file upload (`wf-file-change`), provide an array of file objects, like:
     ```json  theme={null}
     [
       {
         "name": "example.txt",
         "type": "text/plain",
         "data": "data:text/plain;base64,U2FtcGxlIHRleHQ="
       }
     ]
     ```

When the specified event occurs on the selected component, the block starts the workflow. The event payload is available as `@{payload}` in subsequent blocks.

## Examples

### Interactive dashboard updates

This example demonstrates how to handle real-time dashboard interactions and updates.

**Interface:**

1. A [Plotly chart](/components/plotlygraph) that a user can click to trigger the workflow.

**Blueprint Flow:**

1. **UI Trigger** → User clicks on dashboard widget
2. **HTTP Request** → Fetches updated data from external API
3. **Set state** → Updates dashboard state

**Block Configuration:**

* **Component Id:** Dashboard widget component
* **Event type:** `wf-click`
* **Default result:** Optional, but useful for testing the blueprint from the "Run blueprint" button. The default result below mimics the data that would be returned if a user clicked somewhere on a [Plotly chart](/components/plotlygraph) in the interface.

```json  theme={null}
[
  {
    "curveNumber": 0,
    "pointNumber": 1,
    "x": "Product B",
    "y": 150,
    "label": "Product B",
    "xaxis": {
      "anchor": "y"
    },
    "yaxis": {
      "anchor": "x"
    }
  }
]
```

This workflow enables real-time dashboard interactions with external data sources.

<img src="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-workflow.png?fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=fd7d0f5144f2f7d1392571ddad423ef0" alt="" data-og-width="1960" width="1960" data-og-height="1428" height="1428" data-path="images/agent-builder/blueprints/ui-trigger-workflow.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-workflow.png?w=280&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c18a173327cf5a63adb287f1eea19f7d 280w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-workflow.png?w=560&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=c8c311dd0d8d58214efbee860ddcc6c3 560w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-workflow.png?w=840&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=e122bf384fd140261a3c9324f585b24e 840w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-workflow.png?w=1100&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=95f29900f123c697954b751a77cd2526 1100w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-workflow.png?w=1650&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=ef3b6849fc3425fe464daf5907d06894 1650w, https://mintcdn.com/writer/KruNpIclsgQbhj82/images/agent-builder/blueprints/ui-trigger-workflow.png?w=2500&fit=max&auto=format&n=KruNpIclsgQbhj82&q=85&s=dafb38492c9a806c580e6a840faefb85 2500w" />

## Fields

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th>Control</th>
    <th>Default</th>
    <th>Description</th>
    <th>Options</th>
    <th>Validation</th>
  </thead>

  <tbody>
    <tr>
      <td>Component Id</td>
      <td>Component Id</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>The id of the component that will trigger this branch.</td>

      <td>
        uiComponentsWithEvents
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Event type</td>
      <td>Component Event Type</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>The type of the event that will trigger this branch. For example, wf-click.</td>

      <td>
        eventTypes
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Default result</td>
      <td>Code</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>

      <td>The result that is used when the blueprint is triggered from the "Run blueprint" button</td>

      <td>
        <span>-</span>
      </td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## End states

Below are the possible end states of the block call.

<table className="blueprintFields">
  <thead>
    <th>Name</th>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </thead>

  <tbody>
    <tr>
      <td>Trigger</td>
      <td>-</td>
      <td>success</td>
      <td>-</td>
    </tr>
  </tbody>
</table>

The output of the **UI Trigger** block is the event payload. For example, if the event type is `wf-file-change` for a **File input** block, the payload contains the file that the user uploaded. You can access this value in any block in the blueprint as `@{payload}`.


# Annotated Text
Source: https://dev.writer.com/components/annotatedtext



Shows text with annotations

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/annotatedtext.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=78fb88811d7e3486ed8f72e02339ea92" data-og-width="1134" width="1134" data-og-height="186" height="186" data-path="framework/public/components/annotatedtext.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/annotatedtext.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=56980ae7a8f8654c84b0a414172a7ed9 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/annotatedtext.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=fb3c686ec2b2c30c052dbdead7a3a047 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/annotatedtext.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=5018721c36762c7198eeb1668d1c4463 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/annotatedtext.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=43db995169cf9b7cc435ba62a8c0ac37 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/annotatedtext.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=06e4019194d7c2a69ee37c7a3c1798d7 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/annotatedtext.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=148efe3c1584781237183ef0eb5bc722 2500w" />

## Overview

The **Annotated Text** component displays text with visual annotations and highlights. It allows users to see text with embedded annotations that are color-coded to distinguish different types of content or sections.

Annotated text is essential for educational content, document review systems, and any interface where text needs visual distinction between different types of content. It provides a way to highlight important terms and sections without cluttering the main display.

## Common use cases

* **Educational content**: Provide explanations and definitions for complex terms
* **Document review**: Show comments, suggestions, and feedback on text
* **Code documentation**: Highlight and explain code snippets with annotations
* **Research papers**: Show citations, references, and additional context
* **Legal documents**: Display legal annotations and explanations

## How it works

1. **Text content**: Displays the main text content with embedded annotations
2. **Annotation markers**: Shows visual indicators for annotated sections
3. **Styling**: Customize appearance of annotations and text with colors and CSS classes

The component displays text with embedded annotations that are visually highlighted using color coding and styling to distinguish different types of content or sections.

## Configuration options

### Basic settings

* **Annotated text**: The main text with embedded annotation markers, must be a JSON string or a state reference to an array

### Advanced settings

* **Enable markdown**: Adds markdown support for automatically sanitizing unsafe elements
* **Enable copy buttons**: Adds a control bar with both copy text and JSON buttons
* **Rotate hue**: Rotates the hue of annotated text colors depending on the content of the string

### Styling options

* **Text color**: Set the color of the main text
* **Annotation colors**: Set colors for different annotation types
* **Custom CSS classes**: Apply additional styling

## Example

### Contract review and analysis

This example shows how to create a contract review interface with highlighted terms and clauses.

**Interface:**

* File input component for file upload
* Annotated text component for annotated contract content

**Annotated Text configuration:**

* **Annotated text**: JSON array containing contract text with embedded annotations in the format `["text", ["highlighted term", "label"], "more text"]`

## Best practices

1. **Clear annotations**: Make annotation content concise and informative
2. **Visual indicators**: Use clear visual cues to show where annotations exist
3. **Performance**: Limit the number of annotations to avoid overwhelming users
4. **Consistent styling**: Use consistent annotation styling throughout your interface
5. **Context relevance**: Ensure annotations provide relevant and helpful information

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Annotated text</td>
      <td>Object</td>
      <td>Value array with text/annotations. Must be a JSON string or a state reference to an array.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Reference</td>
      <td>Color</td>
      <td>The colour to be used as reference for chroma and luminance, and as the starting point for hue rotation.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Seed value</td>
      <td>Number</td>
      <td>Choose a different value to reshuffle colours.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Rotate hue</td>
      <td>Boolean</td>
      <td>If active, rotates the hue depending on the content of the string. If turned off, the reference colour is always used.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable markdown</td>
      <td>Boolean</td>
      <td>If active, the output will be sanitized; unsafe elements will be removed.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable copy button</td>
      <td>Boolean</td>
      <td>Enable a copy button that lets users to copy the contents in this field to their clipboard</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Button
Source: https://dev.writer.com/components/button



A standalone button component that can be linked to a click event handler.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/button.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=9d815fb527db70a4663f7a3ea2dd7575" data-og-width="766" width="766" data-og-height="210" height="210" data-path="framework/public/components/button.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/button.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=7de38897c7a44b6f13103b943d7337e2 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/button.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=da183456d7dffdb93e1677a3b18e0384 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/button.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b4a3806d1e1677582590fe8fd8ac6aa7 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/button.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=61f436438006ddf30602ee03e8e0e3ac 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/button.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=1bda45fd5548d2f8c399cd5b40595dea 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/button.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f67f49425a467b0003f162eb48465f00 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Text</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Icon</td>
      <td>Text</td>
      <td>Lucide icon name in kebab-case, e.g. "badge-check".</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Disabled</td>
      <td>Boolean</td>
      <td>Disables all event handlers.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-click" icon="code">
    Capture single clicks.

    ```python  theme={null}
    def handle_button_click(state):

    # Increment counter when the button is clicked

    state["counter"] += 1
    ```
  </Accordion>
</AccordionGroup>

<events />


# Chatbot
Source: https://dev.writer.com/components/chatbot



A chatbot component to build human-to-AI interactions.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/chatbot.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=925fc9ec7ff5b6210519f0076e9d81ba" data-og-width="1183" width="1183" data-og-height="1046" height="1046" data-path="framework/public/components/chatbot.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/chatbot.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6866bc7465b963618f40996eeef3591d 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/chatbot.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=28766f0df6c53d2af784a7ab659fefd7 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/chatbot.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b2d36f80d54e6fbd58c8f1d054830f2d 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/chatbot.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=7c1460e9025d31899249deb3b211fe28 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/chatbot.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=59d37cd2845df539fa42590c0979a860 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/chatbot.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=1636fbae2cccec9e96eef7e8d5730ab4 2500w" />

Connect it to an LLM by handling the `wf-chatbot-message` event, which is triggered every time the user sends a message.

You can add `actions` to messages, which are buttons that trigger the `wf-chatbot-action-click`.

See the stubs for more details.

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Conversation</td>
      <td>Object</td>
      <td>An array with messages or a variable that contains your conversation as an object.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Assistant initials</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>User initials</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable markdown</td>
      <td>Boolean</td>
      <td>If active, the output will be sanitized; unsafe elements will be removed.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable file upload</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <ol>
          <li>Single file</li>

          <li>Multiple files</li>

          <li>No</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Enable image paste</td>
      <td>Boolean</td>
      <td>Allow users to paste images directly into the chat input using Ctrl/Cmd+V.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Placeholder</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Assistant role</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>User role</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Avatar</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Avatar text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-chatbot-message" icon="code">
    Triggered when the user sends a message.

    ```python  theme={null}
    def handle_message_simple(payload, state):

    # payload contains a dict in the form { "role": "user", "message": "hello"}

    state["conversation"] += [payload]
    state["conversation"] += [{
        "role": "assistant",
        "content": "Hello human" if payload == "Hello" else "I don't understand"
    }]

    # Handle streaming by appending to the last message

    import time
    for i in range(10):
        conv = state["conversation"]
        conv[-1]["content"] += f" {i}"
        state["conversation"] = conv
        time.sleep(0.5)
    ```
  </Accordion>

  <Accordion title="wf-chatbot-action-click" icon="code">
    Handle clicks on actions.

    ```python  theme={null}
    def handle_action_simple(payload, state):

    # payload contains the "data" property of the action

    if payload == "change_title":
        state["app_background_color"] = "red"

    # Make an action available when adding a message

    def handle_message_with_action(payload, state):
    state["conversation"] += [payload]
    state["conversation"] += [{
        "role": "assistant",
        "content": "I don't know, but check this out.",
        "actions": [{
            "subheading": "Resource",
            "name": "Surprise",
            "desc": "Click to be surprised",
            "data": "change_title"
        }]
    }]
    ```
  </Accordion>

  <Accordion title="wf-file-change" icon="code">
    Triggered when files are uploaded

    ```python  theme={null}
    def handle_file_upload(state, payload):

    # An array of dictionaries is provided in the payload
    # The dictionaries have the properties name, type and data
    # The data property is a file-like object

    uploaded_files = payload
    for i, uploaded_file in enumerate(uploaded_files):
        name = uploaded_file.get("name")
        file_data = uploaded_file.get("data")
        with open(f"{name}-{i}.jpeg", "wb") as file_handle:
            file_handle.write(file_data)
    ```
  </Accordion>
</AccordionGroup>

<events />


# Checkbox Input
Source: https://dev.writer.com/components/checkboxinput



A user input component that allows users to choose multiple values from a list of options using checkboxes.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/checkboxinput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=2339dfe24b24547585529dff24aa7199" data-og-width="384" width="384" data-og-height="326" height="326" data-path="framework/public/components/checkboxinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/checkboxinput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=fbc2cc3f357b8a55d08b30be0e4f22da 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/checkboxinput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=294f734fb84e31b8e7de54577eb42ff9 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/checkboxinput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a67048ffab180b4794e3ed7c3531118e 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/checkboxinput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d0aeab9ebd1b4bad2ec191d292f27873 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/checkboxinput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=30fba91002215583a0ce2015e7bd384b 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/checkboxinput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=bd2b4fcf08fefd559e12d014d6b273df 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Options</td>
      <td>Key-Value</td>
      <td>Key-value object with options. Must be a JSON string or a state reference to a dictionary.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Orientation</td>
      <td>Text</td>
      <td>Specify how to lay out the options.</td>

      <td>
        <ol>
          <li>Vertical</li>

          <li>Horizontal</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-options-change" icon="code">
    Sent when the selected options change.

    ```python  theme={null}
    def onchange_handler(state, payload):

    # Set the state variable "selected" to the selected options.
    # The payload will be a list, as multiple options are allowed.

    state["selected"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Column
Source: https://dev.writer.com/components/column



A layout component that organizes its child components in columns. Must be inside a Column container component.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/column.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=67c206cffd38c41c9ffbe67a81d0b01a" data-og-width="732" width="732" data-og-height="274" height="274" data-path="framework/public/components/column.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/column.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=12931e788c528a5c8b547dfb21cf0965 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/column.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=057e63b4154aa2e3192650bbaa020cff 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/column.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=14ea1f326fa83cce418da7aaa9c57391 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/column.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=24d8880e7c1f0dce23f4b7a69057c89a 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/column.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f4d6a3ee57e153535b94f16e3acb1d6d 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/column.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d31d479d114dfc79f03730b9271bced4 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Title</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Width (factor)</td>
      <td>Number</td>
      <td>Relative size when compared to other columns in the same container. A column of width 2 will be double the width of one with width 1.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Sticky</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Collapsible</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Start collapsed</td>
      <td>Boolean</td>
      <td>Only applied when the column is collapsible.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Padding</td>
      <td>Padding</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Content alignment (H)</td>
      <td>Align (H)</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Content alignment (V)</td>
      <td>Align (V)</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Column Container
Source: https://dev.writer.com/components/columns



Serves as container for Column components

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/columns.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e702dcb5955fde558967268f8932cc2b" data-og-width="928" width="928" data-og-height="276" height="276" data-path="framework/public/components/columns.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/columns.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=cfa0c39509af6aeae412fb4d9c762f67 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/columns.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=7ecda17579bf6160aa13dc79105fc176 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/columns.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=8c7c01575f42412c48d379d3b7653804 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/columns.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=1b89c7845f878afd498989ba5ccba7e4 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/columns.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=99b3e01c7f03287bc57d64eae950eab0 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/columns.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=3f56f651aa08d812dd1a49d3cd6046bd 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# DataFrame
Source: https://dev.writer.com/components/dataframe



A component to display Pandas DataFrames.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dataframe.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=c444e32b85b12ede5bb8e41a99eca8f5" data-og-width="1828" width="1828" data-og-height="322" height="322" data-path="framework/public/components/dataframe.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dataframe.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=3b069ce9ae8f7386e35eefa67c4452ca 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dataframe.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6bfd6416971372d136393f692e24555f 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dataframe.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=07ffc62165feb35a26523dc1b777ea3a 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dataframe.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=5ce50e3d77925cf6492a6b6be45d28b1 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dataframe.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=7c0b06df3ab0818c8d1f07d1614f8c45 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dataframe.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=fe00981ff149d389d24da5a244f5ef25 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Data</td>
      <td>Text</td>
      <td>Must be a state reference to a Pandas dataframe or PyArrow table. Alternatively, a URL for an Arrow IPC file.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Show index</td>
      <td>Boolean</td>
      <td>Shows the dataframe's index. If an Arrow table is used, shows the zero-based integer index.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable search</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable adding a record</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable updating a record</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable download</td>
      <td>Boolean</td>
      <td>Allows the user to download the data as CSV.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Actions</td>
      <td>Key-Value</td>
      <td>Define rows actions</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable markdown</td>
      <td>Boolean</td>
      <td>If active, the output will be sanitized; unsafe elements will be removed.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Display row count</td>
      <td>Number</td>
      <td>Specifies how many rows to show simultaneously.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Wrap text</td>
      <td>Boolean</td>
      <td>Not wrapping text allows for an uniform grid, but may be inconvenient if your data contains longer text fields.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Font style</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <ol>
          <li>normal</li>

          <li>monospace</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-dataframe-add" icon="code">
    Capture adding a row.

    ```python  theme={null}
    # Subscribe this event handler to the `wf-dataframe-add` event
    #
    # more on : https://dev.writer.com/framework/dataframe
    def on_record_add(state, payload):
    payload['record']['sales'] = 0 # default value inside the dataframe
    state['mydf'].record_add(payload) # should contain an EditableDataFrame instance
    ```
  </Accordion>

  <Accordion title="wf-dataframe-update" icon="code">
    Capture a cell change.

    ```python  theme={null}
    # Subscribe this event handler to the `wf-dataframe-update` event
    #
    # more on : https://dev.writer.com/framework/dataframe
    def on_record_change(state, payload):
    state['mydf'].record_update(payload) # should contain an EditableDataFrame instance
    ```
  </Accordion>

  <Accordion title="wf-dataframe-action" icon="code">
    Remove or open a row.

    ```python  theme={null}
    # Subscribe this event handler to the `wf-dataframe-action` event
    #
    # more on : https://dev.writer.com/framework/dataframe
    def on_record_action(state, payload):
    # state['mydf'] should contains an EditableDataFrame instance
    record_index = payload['record_index']
    if payload['action'] == 'remove':
    	state['mydf'].record_remove(payload) # should contain an EditableDataFrame instance
    if payload['action'] == 'open':
    	state['record'] = state['mydf'].record(record_index) # dict representation of record
    ```
  </Accordion>
</AccordionGroup>

<events />


# Date Input
Source: https://dev.writer.com/components/dateinput



A user input component that allows users to select a date using a date picker interface.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dateinput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=3b6ac36de9d370ad186445ca5890b8a0" data-og-width="698" width="698" data-og-height="340" height="340" data-path="framework/public/components/dateinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dateinput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f674b95c8075aa42a6d67d65e22c959d 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dateinput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6bfd4bfd0d2916cda3d1ed740bd5ff85 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dateinput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=11897eb748f4b206734b26eccebc372a 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dateinput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=4529c7a298f7b5bb307713482ee53b2e 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dateinput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=358fac1dcea41fdb183e8eea838468ec 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/dateinput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=c9ee8ff540d199ce72ad679c116d6daa 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-date-change" icon="code">
    Capture changes to this control.

    ```python  theme={null}

    def onchange_handler(state, payload):

    # Set the state variable "new_date" to the new value, provided as a YYYY-MM-DD string.

    state["new_date"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# File Input
Source: https://dev.writer.com/components/fileinput



A user input component that allows users to upload files.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/fileinput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=84f95658a2dc7fe861dea099da831b44" data-og-width="559" width="559" data-og-height="232" height="232" data-path="framework/public/components/fileinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/fileinput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6ccd9c483e675740c89687bed9eaa303 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/fileinput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=5ab755bd8bbb972783567363689824bf 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/fileinput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d0c0337f8d1ab7c8b6f0a0dedd1c3c6f 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/fileinput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a3430dc39dcf61a91e9293f6ef9dc5ae 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/fileinput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=1e5f853dcd4c08ba632e8a7f0e917189 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/fileinput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=2d0596c16aff8bf1d3242b33f9816dd8 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Allowed file types</td>
      <td>Text</td>
      <td>Provides hints for browsers to select the correct file types. You can specify extensions and MIME types separated by comma, or leave empty to accept any file.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Allow multiple files</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-file-change" icon="code">
    Capture changes to this control.

    ```python  theme={null}
    def onchange_handler(state, payload):

    # An array of dictionaries is provided in the payload
    # The dictionaries have the properties name, type and data
    # The data property is a file-like object

    uploaded_files = payload
    for i, uploaded_file in enumerate(uploaded_files):
    	name = uploaded_file.get("name")
        file_data = uploaded_file.get("data")
        with open(f"{name}-{i}.jpeg", "wb") as file_handle:
            file_handle.write(file_data)
    ```
  </Accordion>
</AccordionGroup>

<events />


# Heading
Source: https://dev.writer.com/components/heading



export const my_text_0 = undefined

A text component used to display headings or titles in different sizes and styles.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/heading.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=3d8b97932c7ed2d32b1c3797db808c5e" data-og-width="432" width="432" data-og-height="388" height="388" data-path="framework/public/components/heading.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/heading.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=8d09ac9fdb58fcc59112787653c67061 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/heading.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=dbbc9c8923b08b4cce9001eb7e90eb4a 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/heading.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=16dcb8818672fd33581b9c8a640133a3 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/heading.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6efec8fdcdd11a3e52647ca90dfc84f3 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/heading.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=afc8289e528d2c251275236361942b51 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/heading.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=0e5de4693a316cde82c37b718c2cad22 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Text</td>
      <td>Text</td>
      <td>Add text directly, or reference state elements with @{my_text_0}.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Heading type</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <ol>
          <li>h1 (Big)</li>

          <li>h2 (Normal)</li>

          <li>h3 (Small)</li>

          <li>h4 (Smallest)</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Alignment</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <ol>
          <li>Left</li>

          <li>Center</li>

          <li>Right</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Horizontal Stack
Source: https://dev.writer.com/components/horizontalstack



A layout component that stacks its child components horizontally, wrapping them to the next row if necessary.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/horizontalstack.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=482d20aa0670d593a86ba7c75c125bc8" data-og-width="664" width="664" data-og-height="148" height="148" data-path="framework/public/components/horizontalstack.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/horizontalstack.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=177eea5e7746f5edfd1043d6a2f1135a 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/horizontalstack.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6f70619336e4e89043be58c9bf01cd41 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/horizontalstack.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=54b5d397640bf210967f07c825b6af76 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/horizontalstack.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=8f2e78d59206c0221ad7f8b5e14dfda8 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/horizontalstack.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=0e6d8c811a5475b802c520565b1f8207 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/horizontalstack.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ddb0995c7adfd65f7cb2a64c567ef6d6 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Padding</td>
      <td>Padding</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Content alignment (H)</td>
      <td>Align (H)</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Content alignment (V)</td>
      <td>Align (V)</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# HTML Element
Source: https://dev.writer.com/components/html



A generic component that creates customisable HTML elements, which can serve as containers for other components.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/html.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e91906d9d569514e09b3ed67d6a8298c" data-og-width="574" width="574" data-og-height="568" height="568" data-path="framework/public/components/html.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/html.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=1022ddfd571543677729f16bd73c007e 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/html.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f75a3e08f5c8cbf08744a5ed6b03d644 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/html.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=3e2d40868145167dadf0629d52ec2f70 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/html.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=342fbea400c6e609fb7a5f630ba528db 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/html.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e1d64a0047dff3545421b689a2bda6cc 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/html.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=cb054530a3b772b62550af4a8955aab1 2500w" />

You can configure the element type, styles, and attributes to fit your design requirements. You can link them to state for advanced use cases, such as custom animations.

All valid HTML tags are supported, including tags such as `iframe`, allowing you to embed external sites.

Take into account the potential risks of adding custom HTML to your app, including XSS. Be specially careful when injecting user-generated data.

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Element</td>
      <td>Text</td>
      <td>Set the type of HTML element to create, e.g., 'div', 'section', 'span', etc.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Styles</td>
      <td>Object</td>
      <td>Define the CSS styles to apply to the HTML element using a JSON object or a state reference to a dictionary.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Attributes</td>
      <td>Object</td>
      <td>Set additional HTML attributes for the element using a JSON object or a dictionary via a state reference.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>HTML inside</td>
      <td>Text</td>
      <td>Define custom HTML to be used inside the element. It will be wrapped in a div and rendered after children components.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# IFrame
Source: https://dev.writer.com/components/iframe



A component to embed an external resource in an iframe.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/iframe.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f4aba06e4441d3099c6af3e1f2f54328" data-og-width="1220" width="1220" data-og-height="641" height="641" data-path="framework/public/components/iframe.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/iframe.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=aabea02ad1e71ceb768750343f1836f5 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/iframe.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=03b18f6940829c462d7af4a8e9fff8d2 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/iframe.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=3776628b412bd4a43408f1df12b23900 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/iframe.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=acab1ac3b1da533d1db0ba375cb541a1 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/iframe.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a8973cee02f84c5826d9501325339018 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/iframe.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=61702b7d3a29990b356b8c015a312f8d 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Source</td>
      <td>Text</td>
      <td>A valid URL</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Referrer Policy</td>
      <td>Text</td>
      <td>Define which referrer is sent when fetching the resource</td>

      <td>
        <ol>
          <li>no-referrer</li>

          <li>no-referrer-when-downgrade</li>

          <li>origin</li>

          <li>origin-when-cross-origin</li>

          <li>same-origin</li>

          <li>strict-origin</li>

          <li>strict-origin-when-cross-origin</li>

          <li>unsafe-url</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-load" icon="code">
    Fires when the resource has successfully loaded.

    ```python  theme={null}
    def load_handler(state):

    # Sets status message when resource is loaded

    state["status"] = "Page loaded"
    ```
  </Accordion>
</AccordionGroup>

<events />


# Image
Source: https://dev.writer.com/components/image



A component to display images.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/image.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=015843c9ddf0cefab72faf8e53e6adc5" data-og-width="668" width="668" data-og-height="1034" height="1034" data-path="framework/public/components/image.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/image.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f89d19ff9d22169f5c6b00fffb9c0304 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/image.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ca9f113d1fd32ba1a68a595749e58a58 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/image.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=67497f7cc842c394fc845fef4af203d2 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/image.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=1d14bbbb692dfca3c76f900780c403e6 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/image.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a0763b0b488dc29191eb4990bee02bdd 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/image.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=2fc7d359796e3ec289d2d18c25edd40b 2500w" />

Use your app's static folder to serve images directly. For example, `static/my_image.png`.

Alternatively, pass a Matplotlib figure via state.

`state[&quot;my_fig&quot;] = fig` and then setting the *Image* source to `@{fig}`

You can also use packed files or bytes:

`state[&quot;img_b&quot;] = wf.pack_bytes(img_bytes, &quot;image/png&quot;)`

`state[&quot;img_f&quot;] = wf.pack_file(img_file, &quot;image/png&quot;)`

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Source</td>
      <td>Text</td>
      <td>A valid URL. Alternatively, you can provide a state reference to a Matplotlib figure or a packed file.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Caption</td>
      <td>Text</td>
      <td>Leave blank to hide.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Max width (px)</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Max height (px)</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-click" icon="code">
    Capture single clicks.

    ```python  theme={null}
    def click_handler(state):

    # Increment counter when the image is clicked

    state["counter"] += 1
    ```
  </Accordion>
</AccordionGroup>

<events />


# JSON Viewer
Source: https://dev.writer.com/components/jsonviewer



A component to explore JSON data as a hierarchy.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/jsonviewer.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ff2e334d157c3cdc5eac0ae716a49c47" data-og-width="550" width="550" data-og-height="263" height="263" data-path="framework/public/components/jsonviewer.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/jsonviewer.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a8f8f68769f2421d7a6703338ffe0c28 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/jsonviewer.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=3eaa26713cf822e163f9aace0064a7ef 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/jsonviewer.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=9f1ed9b4e4bd1653b6fb1a361214bb49 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/jsonviewer.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=809d62a92dcc95bf7306e09ffe131ced 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/jsonviewer.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=0e9036164166c4c48e3bedc9a7f0eee2 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/jsonviewer.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e533174e2a94b0f9ad1aa3f7a6e0ad30 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Data</td>
      <td>Object</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Initial depth</td>
      <td>Number</td>
      <td>Sets the initial viewing depth of the JSON tree hierarchy. Use -1 to display the full hierarchy.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Hide root</td>
      <td>Boolean</td>
      <td>Don't show the type of the root node when it's an Object or an Array.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable copy button</td>
      <td>Boolean</td>
      <td>Enable a copy button that lets users to copy the contents in this field to their clipboard</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>JSON indentation</td>
      <td>Width</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Link
Source: https://dev.writer.com/components/link



A component to create a hyperlink.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/link.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=aeb68e5c7bfe61311af4c85a80a69213" data-og-width="502" width="502" data-og-height="166" height="166" data-path="framework/public/components/link.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/link.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=417c0a983a6b2e8247cdc44c2f68ecc1 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/link.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=1d237258d43c3568938331707c09e436 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/link.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=345d89aecc7d85996f5739754cb8445b 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/link.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=570288b9e489e4b4a12493d2379065bd 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/link.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=c01de25e7708c77a3261d4cb6e86fd44 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/link.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=958cc02ee13c8193335344ab0f357234 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>URL</td>
      <td>Text</td>
      <td>Specify a URL or choose a page. Keep in mind that you can only link to pages for which a key has been specified.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Target</td>
      <td>Text</td>
      <td>Specifies where to open the linked document.</td>

      <td>
        <ol>
          <li>Self</li>

          <li>Blank</li>

          <li>Parent</li>

          <li>Top</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Rel</td>
      <td>Text</td>
      <td>Specifies the relationship between the current document and the linked document.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Text</td>
      <td>Text</td>
      <td>The text to display in the link.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Message
Source: https://dev.writer.com/components/message



A component that displays a message in various styles, including success, error, warning, and informational.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/message.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d524a6480f207b32ea31aea16532b149" data-og-width="1162" width="1162" data-og-height="706" height="706" data-path="framework/public/components/message.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/message.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=2161be2a62bc73e84e4a3c1891e1ab66 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/message.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=fe34b6cbc825952cbc2536b2cc00b14e 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/message.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a9c3c2f500131c8cdcbc7d0699327bb6 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/message.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=815d1383ac7f245549a12cee19e4378e 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/message.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=87a3a392644c56db555f379a3c15e79f 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/message.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b931f5f47a7381ebd5faec72cf2e2274 2500w" />

## Overview

The **Message** component displays status messages, notifications, and feedback to users. It uses prefix characters to determine the message type and styling automatically.

Message components support different types (success, error, warning, loading, info) with appropriate styling and can display dynamic content from state variables. They're essential for creating responsive, user-friendly interfaces that keep users informed.

## Common use cases

* **Status updates**: Show progress messages during processing operations
* **Error notifications**: Display validation errors or system failures
* **Success confirmations**: Confirm successful actions or completions
* **Loading states**: Show animated loading messages during operations
* **Form validation**: Display field validation errors and warnings

## How it works

1. **Message content**: Display static text or reference state variables
2. **Prefix-based types**: Use prefix characters to determine message type automatically. For example, `+` makes the message green, `-` makes it red, and `%` provides a dynamic loading icon.
3. **Dynamic updates**: Content updates automatically when state variables change
4. **Visual styling**: Each message type has distinct colors and styling
5. **Conditional display**: Messages can show or hide based on conditions

The component provides immediate feedback to users about the state of their interactions and system operations.

## Configuration options

### Basic settings

* **Message**: The text content to display (supports state variable references)
* **Prefix characters**: Use prefixes to determine message type automatically. For example, `+` in front of the message makes it green: `+Operation completed successfully`.

### Message types and prefixes

* **Success**: Prefix with `+` (for example, `"+Operation completed successfully"`)
* **Error**: Prefix with `-` (for example, `"-An error occurred"`)
* **Warning**: Prefix with `!` (for example, `"!Please check your input"`)
* **Loading**: Prefix with `%` (for example, `"%Processing your request..."`)
* **Info**: No prefix (for example, `"This is an informational message"`)

### Styling options

* **Success color**: Customize success message background color (default: Green3)
* **Error color**: Customize error message background color (default: Orange2)
* **Warning color**: Customize warning message background color (default: #FFE999)
* **Info color**: Customize info message background color (default: Blue2)
* **Loading color**: Customize loading message background color (default: Blue2)
* **Primary text color**: Set the text color
* **Custom CSS classes**: Apply additional styling

## Example

### Processing status updates

Create a workflow that shows different status messages during file processing.

**Interface:**

* File input to upload a file
* Button component to start file processing
* Message component for status updates

**Message configuration:**

* **Message**: `@{status_message}` (with `%` prefix for loading, `+` for success, `-` for errors)

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/message-configuration.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=9551475f5c4202ba6800c522ef98a62a" alt="Message configuration" data-og-width="2742" width="2742" data-og-height="1142" height="1142" data-path="images/agent-builder/components/message-configuration.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/message-configuration.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=be673f15567df8ab5dbfe733dac73bfa 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/message-configuration.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=eeca35057f274a72b8428ab9313e4dac 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/message-configuration.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=ad3e821f398d53a95580b3e8bb6b6695 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/message-configuration.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=4323c66b5e427e8fe74d7f70920970ad 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/message-configuration.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=c9d28835e87d0416f7783e1918bdfe8f 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/message-configuration.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=86c1e4477b10e3f2eb3d2d79e533f909 2500w" />

## Best practices

1. **Clear messaging**: Use concise, clear language that users can understand immediately
2. **Appropriate types**: Choose the correct message type for the content (info, success, warning, error)
3. **Dynamic content**: Use state variables to show relevant, up-to-date information
4. **Conditional display**: Show messages only when relevant to avoid interface clutter
5. **Consistent styling**: Maintain consistent message styling across your interface
6. **Context**: Provide enough context for users to understand and act on the message

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Message</td>
      <td>Text</td>
      <td>Prefix with '+' for a success message, with '-' for error, '!' for warning, '%' for loading. No prefix for info. Leave empty to hide.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Success</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Error</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Warning</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Info</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Loading</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Metric
Source: https://dev.writer.com/components/metric



A component that prominently displays a metric value and associated information.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/metric.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=659159fc10c3e8b6607febfbb60b5bff" data-og-width="754" width="754" data-og-height="246" height="246" data-path="framework/public/components/metric.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/metric.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=8bd8b9804aeae39cc4ae4ddafb86d27b 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/metric.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=07648024c8a97adce7007957acb95551 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/metric.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=3bfe8e4488286e7815770498c74c2b71 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/metric.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=bb10b4d15e6029b8009a519eee35c2e9 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/metric.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d096195ed05db4a4a6206196ad284eae 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/metric.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=4e130da0523d3a8a71c06b2c4e5fb7d3 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Name</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Value</td>
      <td>Text</td>
      <td>The main value to be displayed. It's not limited to numbers.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Description</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Note</td>
      <td>Text</td>
      <td>Prefix with '+' for a positive message, with '-' for a negative message.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Positive</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Neutral</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Negative</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Multiselect Input
Source: https://dev.writer.com/components/multiselectinput



A user input component that allows users to select multiple values from a searchable list of options.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/multiselectinput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d4f1b3922858c3241cc961bc59a9c3ad" data-og-width="1013" width="1013" data-og-height="196" height="196" data-path="framework/public/components/multiselectinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/multiselectinput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=787f2f590e8dea43289b73387e7c1e87 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/multiselectinput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f1691aa69ff365eb03b13e26ed0ca7cb 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/multiselectinput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=2ef30113db114e77500706d0c18a1faf 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/multiselectinput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=8aaf33aee4879cc989abf598033208d6 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/multiselectinput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e11bf80b34cf21077d835cb6d8722285 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/multiselectinput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6e4348400d9c1e04015be6b31cda62ce 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Options</td>
      <td>Key-Value</td>
      <td>Key-value object with options. Must be a JSON string or a state reference to a dictionary.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Placeholder</td>
      <td>Text</td>
      <td>Text to show when no options are selected.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Maximum count</td>
      <td>Number</td>
      <td>The maximum allowable number of selected options. Set to zero for unlimited.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>The colour of the chips created for each selected option.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Chip text</td>
      <td>Color</td>
      <td>The colour of the text in the chips.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-options-change" icon="code">
    Sent when the selected options change.

    ```python  theme={null}
    def onchange_handler(state, payload):

    # Set the state variable "selected" to the selected option

    state["selected"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Number Input
Source: https://dev.writer.com/components/numberinput



A user input component that allows users to enter numeric values.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/numberinput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=9ac0193e8bc4b79c02f96941b0dc3f4b" data-og-width="1176" width="1176" data-og-height="349" height="349" data-path="framework/public/components/numberinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/numberinput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=61640bed22d90061ef22f7612b169bbf 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/numberinput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f8d1d271bf9b2d7bfd087523e0bd325b 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/numberinput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=9d99e4e4047ec2744cae2e8771fed91d 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/numberinput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d4fe5fe91cf9c2de2e8baea9038e00de 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/numberinput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d5b15e1b56bd5174e9d24892f724ef76 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/numberinput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=0b3dfdcb944ea63078ff62c5e83b34f8 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Placeholder</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Minimum value</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Max value</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Step</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-number-change" icon="code">
    Capture changes as they happen.

    ```python  theme={null}

    def onchange_handler(state, payload):

    # Set the state variable "new_val" to the new value

    state["new_val"] = payload
    ```
  </Accordion>

  <Accordion title="wf-number-change-finish" icon="code">
    Capture changes once this control has lost focus.

    ```python  theme={null}

    def onchange_handler(state, payload):

    # Set the state variable "new_val" to the new value

    state["new_val"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Page
Source: https://dev.writer.com/components/page



A container component representing a single page within the application.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/page.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=64979436113cfd5e25e7b99c74b6599b" data-og-width="502" width="502" data-og-height="148" height="148" data-path="framework/public/components/page.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/page.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=20d121ddc5b78c45f06c3baaf334cb53 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/page.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b7c2a93d2983bec1c58e9e8065c6915d 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/page.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=50e8784de0ac18532f6a7f63bff8dd9d 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/page.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=4ed63d1369a4456facaf0a96259e7e92 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/page.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e1abc609befc05be0f628a63fa26059d 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/page.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=17782826ee45cbc858458612e4c68e0f 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Page key</td>
      <td>Identifying Key</td>
      <td>Unique identifier. It's needed to enable navigation to this Page.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Page mode</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <ol>
          <li>Compact</li>

          <li>Wide</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Emptiness</td>
      <td>Color</td>
      <td>Page background color</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-keydown" icon="code">
    Captures all key activity while this page is open.

    ```python  theme={null}

    def handle_keydown(state, payload):
    # The payload is a dictionary containing the key code and modifier keys.
    # For example,
    # {
    #	"key": "ArrowDown",
    #	"ctrl_key": False,
    #	"shift_key": False,
    #	"meta_key": False
    # }

    key_activated = payload.get("key")
    delta = 0
    if key_activated == "ArrowLeft":
    	delta += -10
    elif key_activated == "ArrowRight":
    	delta += 10

    shift_key = payload.get("shift_key")
    if shift_key:
    	delta *= 2 # Shift makes it go faster

    state["position"] += delta

    ```
  </Accordion>

  <Accordion title="wf-page-open" icon="code">
    Emitted when the page is opened.

    ```python  theme={null}

    def handle_page_open(state, payload):
    page_key = payload
    state["message"] = f"The page {page_key} has been opened."

    ```
  </Accordion>
</AccordionGroup>

<events />


# Pagination
Source: https://dev.writer.com/components/pagination



A component that can help you paginate records, for example from a Repeater or a DataFrame.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pagination.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=242ed1a2e60edda6f05cc508ad4f4bfd" data-og-width="798" width="798" data-og-height="140" height="140" data-path="framework/public/components/pagination.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pagination.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=22d2d27598b12bdf7f2139ddc0e2ead0 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pagination.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=006473c5866f70744aa353f5a5c418d7 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pagination.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=c53ab40830d0a8bc11d4d39cdfccf660 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pagination.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=4e136617073a952033a2829996953837 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pagination.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=acccb832fa93f7fc3da5750488748a4f 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pagination.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=93fde3eee01a11c988cda4e33c532005 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Page</td>
      <td>Number</td>
      <td>The current page number.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Page Size</td>
      <td>Number</td>
      <td>The number of items per page.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Total Items</td>
      <td>Number</td>
      <td>The total number of items</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Page Size Options</td>
      <td>Text</td>
      <td>A comma-separated list of page size options. If it's empty, the user can't change the page size. Set your default page size as the first option.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Show All Option</td>
      <td>Boolean</td>
      <td>Show an option to show all records.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Jump To</td>
      <td>Boolean</td>
      <td>Show an option to jump to a specific page.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-change-page" icon="code">
    Fires when the user pick a page

    ```python  theme={null}
    def handle_page_change(state, payload):
    page = payload
    state["page"] = page

    records = _load_records_from_db(start = state["page"] * state["pageSize"], limit = state["pageSize"])
    # update a repeater
    state["highlighted_members"] = {r.id: r for r in records}
    ```
  </Accordion>

  <Accordion title="wf-change-page-size" icon="code">
    Fires when the user change the page size.

    ```python  theme={null}
    def handle_page_size_change(state, payload):
    state['pageSize'] = payload

    records = _load_records_from_db(start = state["page"] * state["pageSize"], limit = state["pageSize"])
    # update a repeater
    state["highlighted_members"] = {r.id: r for r in records}
    ```
  </Accordion>
</AccordionGroup>

<events />


# PDF
Source: https://dev.writer.com/components/pdf



A component to embed PDF documents.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pdf.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=46b35fb047b13acdaf7d2538cdb04c4d" data-og-width="1213" width="1213" data-og-height="1145" height="1145" data-path="framework/public/components/pdf.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pdf.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6bf34b665535617572ef2812954140b5 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pdf.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=0ea4335d7b3c713712082fe446622521 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pdf.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=02bbfaf2e398bc9fc7d13ecf4817fcdc 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pdf.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=736b95a2253414102f5bba99a50ed29b 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pdf.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=afe10ab903dfc6adaf50f9629323a56a 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/pdf.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=72ae902de95682b126d9e4c6effcd024 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>PDF source</td>
      <td>Text</td>
      <td>A valid URL. Alternatively, you can provide a state reference to a packed PDF file.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Highlights</td>
      <td>Object</td>
      <td>A list of highlights to be applied to the PDF as a JSON array of strings.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Selected highlight match</td>
      <td>Number</td>
      <td>The index of the selected highlight match.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Page</td>
      <td>Number</td>
      <td>The page to be displayed.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable controls</td>
      <td>Boolean</td>
      <td>Show controls to navigate the PDF.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Plotly Graph
Source: https://dev.writer.com/components/plotlygraph



export const fig_0 = undefined

A component that displays Plotly graphs.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/plotlygraph.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d73f45de15672a4c982cb82acb37ab10" data-og-width="740" width="740" data-og-height="660" height="660" data-path="framework/public/components/plotlygraph.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/plotlygraph.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ef28d9baabc39cc72e1c0ae348e2ec77 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/plotlygraph.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=9e21b6b8366fe899746c0fc445311969 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/plotlygraph.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=55ae154f9bbcb73d1ab4de37fbdba50e 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/plotlygraph.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=74942332c5beca376456c9d007bfa475 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/plotlygraph.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b72b869f69594ef3e8b5553850690efb 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/plotlygraph.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=9682ead20f740da28416fe2fcb89d3d7 2500w" />

You can listen to events triggered by Plotly.js and add interactivity to your charts.
For example, implement cross-filtering.

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Graph specification</td>
      <td>Object</td>
      <td>Plotly graph specification. Pass it using state, e.g. @{fig_0}, or paste a JSON specification.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="plotly-click" icon="code">
    Sends a list with the clicked points.

    ```python  theme={null}
    ```
  </Accordion>

  <Accordion title="plotly-selected" icon="code">
    Sends a list with the selected points.

    ```python  theme={null}
    ```
  </Accordion>

  <Accordion title="plotly-deselect" icon="code">
    Triggered when points are deselected.

    ```python  theme={null}
    ```
  </Accordion>
</AccordionGroup>

<events />


# Progress Bar
Source: https://dev.writer.com/components/progressbar



A component to display a progression.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/progressbar.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ed78987befd23991e3d2d9758da124fa" data-og-width="816" width="816" data-og-height="111" height="111" data-path="framework/public/components/progressbar.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/progressbar.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a996aba6123b36b5ffd3fcdd113f3f05 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/progressbar.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=128dfca89d0745e13e6e17d23d40a38c 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/progressbar.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=8de86ac61c37e5283fd73dc2ba524081 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/progressbar.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e494e56a131db3f61f446d1fd1b6d497 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/progressbar.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=faa7022fef1c7d07ff564adac895a733 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/progressbar.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d85ef36488d9a5c3176fa1c1e91b75a0 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Value</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Minimum value</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Maximum value</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Display percentage</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-click" icon="code">
    Triggered when the Progress bar is clicked.

    ```python  theme={null}
    def handle_progress_bar_click():
    print("The Progress bar was clicked")
    ```
  </Accordion>
</AccordionGroup>

<events />


# Radio Input
Source: https://dev.writer.com/components/radioinput



A user input component that allows users to choose a single value from a list of options using radio buttons.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/radioinput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=62f8fbd28517eeb9e69b3f04df059665" data-og-width="352" width="352" data-og-height="296" height="296" data-path="framework/public/components/radioinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/radioinput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=03a22bd568a286a180eb15ac5678f8ac 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/radioinput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a3dc1092276142c1487f5115fe4b97c2 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/radioinput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6a2e1ea6f239aab9fdfccd472c38ed8a 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/radioinput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6c19771bcc93faaa7271ceb34d54592d 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/radioinput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=85e06413bbb7b56aef81b03a84385dee 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/radioinput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=5f74d16566440914f5aa42df01b9dc86 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Options</td>
      <td>Key-Value</td>
      <td>Key-value object with options. Must be a JSON string or a state reference to a dictionary.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Orientation</td>
      <td>Text</td>
      <td>Specify how to lay out the options.</td>

      <td>
        <ol>
          <li>Vertical</li>

          <li>Horizontal</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-option-change" icon="code">
    Sent when the selected option changes.

    ```python  theme={null}
    def onchange_handler(state, payload):

    # Set the state variable "selected" to the selected radio option

    state["selected"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Slider Range Input
Source: https://dev.writer.com/components/rangeinput



A user input component that allows users to select numeric values range using a range slider with optional constraints like min, max, and step.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/rangeinput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=97dd38e810528289dc0a7ef53d95694a" data-og-width="1091" width="1091" data-og-height="165" height="165" data-path="framework/public/components/rangeinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/rangeinput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=02cadae820ce84083b5eb76df4a8463f 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/rangeinput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=365f736c37506af60c3c18a28589bc08 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/rangeinput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ff01c1ec3409dbfa66d6336a883d7220 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/rangeinput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=2bfa8583705938697894678126ffca36 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/rangeinput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=8c26b3b975e950c2fecd11204e39e882 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/rangeinput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=5308b65bc8642e52db7a91aeb9ea58f4 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Minimum value</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Maximum value</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Step size</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Popover color</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Popover background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-range-change" icon="code">
    Capture changes to this control.

    ```python  theme={null}

    def onchange_handler(state, payload):

    # Set the state variables "from" & "to" to the new range
    state["from"] = payload[0]
    state["to"] = payload[1]
    ```
  </Accordion>
</AccordionGroup>

<events />


# Rating Input
Source: https://dev.writer.com/components/ratinginput



A user input component that allows users to provide a rating.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/ratinginput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=c6c89acc844e5cc114074d2c2c1c9916" data-og-width="560" width="560" data-og-height="214" height="214" data-path="framework/public/components/ratinginput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/ratinginput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=3a0272e3187b2e522c71237a08a2b51f 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/ratinginput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=0f0e41e52d8ed683652fbde8e341a21a 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/ratinginput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=07273ff26519f570b27b13dd2f16b3f1 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/ratinginput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=4b25bceb9e16b74016a8844301f2002c 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/ratinginput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f8b171ee76988f3d76c718bf4853f29e 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/ratinginput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=9f9021a467651879aa0bee960fc6fe5e 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Feedback</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <ol>
          <li>Stars</li>

          <li>Faces</li>

          <li>Hearts</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Minimum value</td>
      <td>Number</td>
      <td>Valid values are 0 and 1.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Max value</td>
      <td>Number</td>
      <td>Valid values are between 2 and 11.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Step</td>
      <td>Number</td>
      <td>Valid values are between 0.25 and 1.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-number-change" icon="code">
    ```python  theme={null}

    def onchange_handler(state, payload):

    # Set the state variable "rating" to the new value

    state["rating"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Repeater
Source: https://dev.writer.com/components/repeater



A container component that repeats its child components based on a dictionary.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/repeater.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=fe9fc34c90e919d197cda24ad9971849" data-og-width="622" width="622" data-og-height="393" height="393" data-path="framework/public/components/repeater.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/repeater.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a43af4113ccaa380ca1e3b231e79f71c 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/repeater.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=4648535b9ebc386ce1d652cffcefa325 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/repeater.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=292981fcd691f8ab9f93dfe62179b026 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/repeater.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f572930cce43caa3fddbb2afeae640ce 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/repeater.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b1f9ca7a3f3b8a800823823f89b49756 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/repeater.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6c283cef568b82206c9d5f790a890db8 2500w" />

## Overview

The **Repeater** component dynamically creates copies of its child components based on a dictionary or array. It's similar to a for-each loop in programming, but for UI elements. Use Repeaters when you need to display lists, collections, or any data where you don't know the exact number of items in advance.

Inside a Repeater, you can access:

* `@{item}`: the current item's value
* `@{itemId}`: the current item's index (for arrays) or key (for dictionaries)

## Common use cases

* **Dynamic lists**: Display files, tasks, messages, or any collection of items
* **Search results**: Show filtered or API-fetched data
* **User-generated content**: Display comments, reviews, or form responses
* **Product catalogs**: Render product cards or inventory items
* **Data tables**: Create rows based on database queries or structured output

## How it works

1. **Data source**: Bind the Repeater to a state variable containing an array or dictionary
2. **Child components**: Add components inside the Repeater that define the template
3. **Variable access**: Use `@{item}` and `@{itemId}` to display data for each iteration
4. **Nested Repeaters**: Nest Repeaters to display hierarchical data structures
5. **Input binding**: Bind input components to specific items using `@{itemId}` for interactive lists

## Configuration options

### Basic settings

* **Repeater object**: The state variable containing the array or dictionary to iterate over (for example, `@{myList}`)
* **Key variable name**: The variable name for accessing the current item's key or index (default: `itemId`)
* **Value variable name**: The variable name for accessing the current item's value (default: `item`)

### Visibility

Set custom visibility conditions to show the Repeater only when data is available (for example, `myList` to hide when empty).

## Using inputs within Repeaters

When you add input components (like Text Input, Text Area Input, or other form fields) inside a Repeater, you need to properly bind them to capture user input for each repeated item.

### Binding inputs to dictionary items

The most reliable approach is to use a dictionary as your Repeater data source and bind inputs using the `itemId` to target specific dictionary keys:

```
state_variable[itemId].property_name
```

**Example - Text Area Input inside a Repeater**

If your state variable is `products` and you want each product to have a `description` property that users can edit:

1. Set up your Repeater with **Repeater object**: `@{products}`
2. Add a Text Area Input inside the Repeater
3. Set the Text Area Input's **Link variable** to: `products[itemId].description`

This creates or updates the `description` key for each specific product in your dictionary. As users type in each Text Area Input, the corresponding product's description updates in your state.

### Managing editable lists with temporary state

For more complex scenarios where you need to edit one item at a time:

1. **Create a temporary state variable** to hold the draft being edited (for example, `current_draft`)
2. **Track which item is being edited** using a state variable like `editing_item_id`
3. **Show input fields conditionally** using visibility rules that check if `@{itemId} == @{editing_item_id}`
4. **Display read-only content** for items that aren't being edited
5. **Copy data** from the temporary variable back to your main data structure when the user saves

This pattern prevents multiple items from being edited simultaneously and provides a clearer user experience when editing items in a list.

### Best practices for Repeater inputs

1. **Use dictionaries over arrays**: Dictionaries make it easier to target specific items using `itemId` as the key
2. **Provide clear feedback**: Show which item is being edited with conditional styling or visibility
3. **Validate input**: Check that required fields are filled before processing
4. **Consider performance**: Large lists with many input components can impact performance; use pagination if needed
5. **Test empty states**: Ensure your Repeater handles empty data gracefully

## Example: Dynamic task list with input

This example shows how to create an editable task list where users can update task descriptions.

**Interface:**

* Button to add new tasks
* Repeater bound to `tasks` dictionary
* Text Input inside Repeater for editing task names
* Button inside Repeater to delete tasks

**Repeater configuration:**

* **Repeater object**: `@{tasks}`
* **Key variable name**: `itemId`
* **Value variable name**: `item`

**Text Input configuration (inside Repeater):**

* **Link variable**: `tasks[itemId].name`
* **Placeholder**: "Enter task name"

This setup allows each task to maintain its own editable name field.

## Dynamic tabs

Repeaters can be used to create tabs dynamically based on your data. Place a **Repeater** inside a **Tab Container**, then add a **Tab** component inside the Repeater.

**Example structure:**

* Tab Container
  * Repeater (bound to `@{categories}`)
    * Tab (with name `@{item.name}`)
      * Your content here

Each item in your data generates a new tab. This is useful for category-based views, multi-entity interfaces, or any scenario where the number of tabs depends on your data.

## Dynamic columns

Similarly, you can create dynamic column layouts by placing a **Repeater** inside a **Column Container** with **Column** components inside the Repeater. This allows for responsive, data-driven layouts.

## Working with pagination

For large datasets, combine Repeaters with the **Pagination** component to improve performance. The Pagination component provides events (`wf-change-page`, `wf-change-page-size`) that you can handle in your blueprints to update the data displayed in your Repeater.

**Example pattern:**

1. Add a Pagination component to your interface
2. Handle the `wf-change-page` event to load the appropriate data slice
3. Update the state variable bound to your Repeater with the paginated data

This approach prevents rendering hundreds or thousands of items at once, which can impact performance.

## Additional resources

For a detailed tutorial on building with Repeaters, including nested Repeaters and structured output integration, see [Build dynamic UI components with Repeaters](/agent-builder/repeater).

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Repeater object</td>
      <td>Object</td>
      <td>Include a state reference to the dictionary used for repeating the child components. Alternatively, specify a JSON object.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Key variable name</td>
      <td>Text</td>
      <td>Set the name of the variable that will store the key of the current repeater object entry.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Value variable name</td>
      <td>Text</td>
      <td>Set the name of the variable that will store the value of the current repeater object entry.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Reuse Component
Source: https://dev.writer.com/components/reuse



Those components are used to reuse other components. Reused components share the same state and are updated together.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/reuse.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=1905ae27e21b99defffc661180140ab5" data-og-width="195" width="195" data-og-height="196" height="196" data-path="framework/public/components/reuse.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/reuse.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ece929ce05ec2aeab2e5a439cb3d964c 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/reuse.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ad70dd40996138088575b8ef35b4be01 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/reuse.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a5ec1ec8e9c4d7b561b8577fee54500e 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/reuse.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6d778d62565d95dd24d65d9209ce5535 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/reuse.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f66b010ea39b514933be3597e7760d81 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/reuse.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=c152910f5641a696fdf14d9dba745818 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Component id</td>
      <td>Text</td>
      <td>The id of the component to reuse.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Root
Source: https://dev.writer.com/components/root



The root component of the application, which serves as the starting point of the component hierarchy.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/root.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ad1add9fb4d2198426dd7c920bd67acd" data-og-width="506" width="506" data-og-height="152" height="152" data-path="framework/public/components/root.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/root.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d1fc47e94accb88574737573c94f509a 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/root.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=69d34321713b2ca13074e07dafab55e6 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/root.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b5060da8166642293265309b7bc552bc 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/root.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d5efd3c673e13e34781a9d70bf406007 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/root.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d964f2858549ccb2154eeb38a0655284 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/root.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=78257c4fba84086d247f5ad9c350c732 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>App name</td>
      <td>Text</td>
      <td>The app name will be shown in the browser's title bar.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Padding</td>
      <td>Padding</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Emptiness</td>
      <td>Color</td>
      <td>Page background color</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Content alignment (V)</td>
      <td>Align (V)</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Content alignment (H)</td>
      <td>Align (H)</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Content width</td>
      <td>Width</td>
      <td>Configure content width using CSS units, e.g. 100px, 50%, 10vw, etc.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-app-open" icon="code">
    Captures the first application load, including page key and route vars.

    ```python  theme={null}
    def handle_app_open(state):
    # The payload is a dictionary with the page key and all the route variables in the URL hash.
    # For example, if the current URL is http://localhost:3000/#/animal=duck&colour=yellow
    # you will get the following dictionary
    # {
    #   "page_key": "main",
    #	  "route_vars": {
    #		  "animal": "duck",
    #		  "colour": "yellow"
    #	  }
    # }

    page_key = payload.get("page_key")
    route_vars = payload.get("route_vars")
    ```
  </Accordion>

  <Accordion title="wf-hashchange" icon="code">
    Capture changes to the URL hash, including page key and route vars.

    ```python  theme={null}
    def handle_hashchange(state, payload):
    # The payload is a dictionary with the page key and all the route variables in the URL hash.
    # For example, if the current URL is http://localhost:3000/#main/animal=duck&colour=yellow
    # you will get the following dictionary
    # {
    #	  "page_key": "main",
    #	  "route_vars": {
    #		  "animal": "duck",
    #		  "colour": "yellow"
    #	  }
    # }

    page_key = payload.get("page_key")
    route_vars = payload.get("route_vars")

    if not route_vars:
    	return

    if route_vars.get("animal") == "duck":
    	state["message"] = "You've navigated to the Duck zone."
    else:
    	state["message"] = "You're not in the Duck zone.
    ```
  </Accordion>
</AccordionGroup>

<events />


# Section
Source: https://dev.writer.com/components/section



A container component that divides the layout into sections, with an optional title.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/section.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e929d071887d63abfe02df5a3e67cf64" data-og-width="1190" width="1190" data-og-height="295" height="295" data-path="framework/public/components/section.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/section.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=56c01f4e4e94855b9d4a6e310d215543 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/section.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b04aac9eaf405dae3ba927cd4703170b 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/section.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f28a8d72bf2cec818382a66ae553d9a6 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/section.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=faad654187bce619862c41993cdc0702 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/section.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d995c02d611de4518578a5242a572597 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/section.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f8f3b1e4f5f42075b1295d9aae562f4f 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Title</td>
      <td>Text</td>
      <td>Leave blank to hide.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Collapsible</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Start collapsed</td>
      <td>Boolean</td>
      <td>Only applied when the component is collapsible.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Padding</td>
      <td>Padding</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Content alignment (H)</td>
      <td>Align (H)</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Select Input
Source: https://dev.writer.com/components/selectinput



A user input component that allows users to select a single or multiples value(s) from a searchable list of options.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/selectinput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=2b485ff4fe89672ae95afdc12024423c" data-og-width="522" width="522" data-og-height="160" height="160" data-path="framework/public/components/selectinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/selectinput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=bb22142e3d49533e21fe7f78f67c8136 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/selectinput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d961fe58c374df6cc8ecf760eb119b82 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/selectinput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=beff7cbaa0fa951e31b51b3d4b2aa8cd 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/selectinput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=2f135bd67d295cd4852802152f84ecd1 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/selectinput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=32549e353a37f83b19a5abc38129e7b5 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/selectinput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=abccf6a0ef3f899b63cd35152c01583a 2500w" />

## Overview

The **Select Input** component provides a dropdown interface for selecting single or multiple values from a searchable list of options. It offers a clean, accessible way to present multiple choices while maintaining a compact interface.

Select inputs are essential for forms and interfaces where users need to choose from predefined options. They provide better user experience than text inputs for categorical data and help ensure data consistency and validation.

## Common use cases

* **Form selections**: Choose options in registration and configuration forms
* **Category filtering**: Filter content by categories or types with single or multiple selections
* **Configuration settings**: Select preferences and settings from predefined options
* **Data entry**: Choose from standardized options for consistent data entry

## How it works

1. **Label**: Provide a clear label for the select input field
2. **Options**: Define available choices as key-value pairs in JSON format
3. **Dropdown**: Display options in a searchable dropdown interface
4. **Selection**: Allow users to select one or multiple options from the list
5. **Binding**: Connect to a state variable to store the selected value
6. **Events**: Trigger workflows when selections change

The component automatically updates the bound state variable when users make selections, and can trigger events for real-time processing or validation.

## Configuration options

### Basic settings

* **Label**: Text label displayed preceding the select input field
* **Allow Multi-select**: Toggle to enable selection of multiple options from the dropdown (default: off)
* **Options**: Key-value object with available options (must be a JSON string or state reference to a dictionary)
* **Placeholder**: Text to display when no options are selected
* **Maximum count**: The maximum allowable number of selected options (set to zero for unlimited) - only available when multi-select is enabled

### Binding settings

* **Link Variable**: Connect the result of this component to a dynamic variable for use across the agent

### Styling options

* **Accent color**: Set the focus and highlight color for the select input
* **Primary text color**: Set the main text color for options and labels
* **Container background color**: Set the background color of the dropdown container
* **Separator color**: Set the border and divider color
* **Custom CSS classes**: Apply additional styling with custom CSS classes (separated by spaces)

### Events

* **wf-option-change**: Triggered when a single option changes (only available when multi-select is off) - payload contains the selected option
* **wf-options-change**: Triggered when multiple options change (only available when multi-select is enabled) - payload contains array of selected options

## Example

### User registration form

This example shows how to create a registration form with select inputs.

**Interface:**

* Text Input components for personal information
* Select Input components for preferences
* Button component for submission

**Select Input configuration:**

* **Label**: "Country," "Account Type," "Time Zone"
* **Options**: Various country, account type, and timezone options
* **Link Variable**: "country," "account," "timezone"

### Multi-select tag management

Create a tag management interface for content categorization.

**Interface:**

* Select Input component with multi-select enabled
* Button component for saving

**Select Input configuration:**

* **Label**: "Content Tags"
* **Allow Multi-select**: Enabled
* **Options**: JSON object with tag categories
* **Placeholder**: "Select tags for your content"
* **Link Variable**: "tags"

## Best practices

1. **Clear labeling**: Use descriptive labels that explain the selection purpose and context
2. **Logical ordering**: Arrange options in logical order (alphabetical, numerical, or by frequency of use)
3. **Option clarity**: Use clear, concise option text that users understand without ambiguity
4. **Accessibility**: Ensure select inputs are keyboard navigable and screen reader friendly

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Allow Multi-select</td>
      <td>Boolean</td>
      <td>Select more than one option from the dropdown.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Options</td>
      <td>Key-Value</td>
      <td>Key-value object with options. Must be a JSON string or a state reference to a dictionary.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Placeholder</td>
      <td>Text</td>
      <td>Text to show when no options are selected.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Maximum count</td>
      <td>Number</td>
      <td>The maximum allowable number of selected options. Set to zero for unlimited.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Chip text</td>
      <td>Color</td>
      <td>The colour of the text in the chips.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-option-change" icon="code">
    Sent when the selected option changes.

    ```python  theme={null}
    def onchange_handler(state, payload):

    # Set the state variable "selected" to the selected option

    state["selected"] = payload
    ```
  </Accordion>

  <Accordion title="wf-options-change" icon="code">
    Sent when the selected options change.

    ```python  theme={null}
    def onchange_handler(state, payload):

    # Set the state variable "selected" to the selected option

    state["selected"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Separator
Source: https://dev.writer.com/components/separator



A visual component to create a separation between adjacent elements.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/separator.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ad529dc521eb92eb9f6301044fa2ef7a" data-og-width="490" width="490" data-og-height="288" height="288" data-path="framework/public/components/separator.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/separator.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=5a3701e234b93f933312c5b8f20c3de5 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/separator.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=22d4384343a6744734418fed8afb0007 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/separator.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=8c4cc5b4aa229900b87acc3c13325e07 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/separator.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=20a890b6cbc71270aec9ce4bd774959b 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/separator.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d76181a5ec9141175c465365f1249979 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/separator.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=9607a6c1f78fdc475de4ce4e774510e3 2500w" />

*Separator* components are used to separate layout elements. They can be used in most containers, including *Column container* to separate columns.

If the container flows horizontally (like a *Horizontal Stack* or a *Column container*) the *Separator* will be a vertical line. Otherwise, it'll be a horizontal line.

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Sidebar
Source: https://dev.writer.com/components/sidebar



A container component that organizes its children in a sidebar. Its parent must be a Page component.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sidebar.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b1a685c1120bb35a896e70fbcda6bf31" data-og-width="474" width="474" data-og-height="692" height="692" data-path="framework/public/components/sidebar.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sidebar.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6d2089be34c9c172abe7e70b976c9aa2 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sidebar.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=1e29ae6bdf3827d4044755280e9013e9 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sidebar.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=23d9171e32c650e53cf1c8125124333f 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sidebar.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=5c2ae8dee690890a3e4f752137b3c025 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sidebar.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=fe304b5b20274d10aaa7f4047f0524ca 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sidebar.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=5dabb8030a5f832117009c8d02e3b783 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Start collapsed</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Slider Input
Source: https://dev.writer.com/components/sliderinput



A user input component that allows users to select numeric values using a slider with optional constraints like min, max, and step.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sliderinput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ac02c4d2112cadc7f0c399fbaf107922" data-og-width="429" width="429" data-og-height="165" height="165" data-path="framework/public/components/sliderinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sliderinput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=24ee076a0d0237bf90b57f6dc1fc5881 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sliderinput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=7af34892e614736fae84cb7512188e57 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sliderinput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=fe90c971f5d91a11a7f27064c4801aba 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sliderinput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=c7e22f280f2394958e222aabd601e685 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sliderinput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=c3d4ab9e8ec920c25ad90c6bdee980ef 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/sliderinput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=02436b7fc8bb4635d9341240e40ccd67 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Minimum value</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Maximum value</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Step size</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Popover color</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Popover background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-number-change" icon="code">
    Capture changes to this control.

    ```python  theme={null}

    def onchange_handler(state, payload):

    # Set the state variable "new_val" to the new value

    state["new_val"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Step
Source: https://dev.writer.com/components/step



A container component that displays its child components as a step inside a Step container.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/step.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=951225f2bbc297f6ff353dfa346a7cd4" data-og-width="1184" width="1184" data-og-height="234" height="234" data-path="framework/public/components/step.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/step.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=91638a16dcfa2f75a5fd6b8eee5da5f2 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/step.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=dc1cc81acb3f2d02ae15702be0860f56 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/step.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=8a640b8c31972fa2c2adf69a14761a68 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/step.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=c99565eb02fa3ebcdbf77e62810f56b2 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/step.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e782abc28025a3d4609eadec8e9cac27 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/step.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b64c8040d66ca2ab3af8da8916dd9bec 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Name</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Padding</td>
      <td>Padding</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Completed</td>
      <td>Boolean</td>
      <td>Use a state reference to dynamically mark this step as complete.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Content alignment (H)</td>
      <td>Align (H)</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Step Container
Source: https://dev.writer.com/components/steps



A container component for displaying Step components, allowing you to implement a stepped blueprint.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/steps.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e187a4b54b3d9fb3dee3761d33e157de" data-og-width="1182" width="1182" data-og-height="380" height="380" data-path="framework/public/components/steps.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/steps.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=804ef9c48487ac4c378f284ac0d3a6ed 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/steps.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=07438e2f86db0aec5f8c050df17e0c85 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/steps.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=6a85e36a1aa8cfad6f9dea829e73697c 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/steps.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=4c35a59a016e526baf76bce63b3897fc 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/steps.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f865cded3baab5550fbbf382b7c476f0 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/steps.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d832001f053ad4b4b8fc6e223dcb3a2d 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Switch Input
Source: https://dev.writer.com/components/switchinput



A user input component with a simple on/off status.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/switchinput.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a7c8e23a278a0399ace156799dde5567" data-og-width="480" width="480" data-og-height="138" height="138" data-path="framework/public/components/switchinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/switchinput.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=371a060577d4c4b7bdc285d4f95e11a6 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/switchinput.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=39f3c07c0713b6912cbf92f2bd5e8887 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/switchinput.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e6fc75152824da192485570aec704734 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/switchinput.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=7fe94b1a5f72983f9333bb1a4595e96f 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/switchinput.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=dc28645573fa9d10b26e84f89f01290c 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/switchinput.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f9e9ee08e84e5f6b73bf2161dc79b68b 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-toggle" icon="code">
    Sent when the switch is toggled.

    ```python  theme={null}
    def handle_toggle(state, payload):

    # The payload will be a bool 

    state["its_on"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Tab
Source: https://dev.writer.com/components/tab



A container component that displays its child components as a tab inside a Tab container.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tab.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ae10c4cffa8deaba1aaa42ccdb6fa202" data-og-width="1180" width="1180" data-og-height="234" height="234" data-path="framework/public/components/tab.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tab.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=43b929635f4192bb044421f43758bc5d 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tab.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=a22dbd1e419c7e1c8ec474d32eae5d0d 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tab.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=cef7bd6446947b5539ae30ff0118ca7f 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tab.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f19809dbec77ae1d095e0ec9a04286db 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tab.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=66ac178b54516f5aeb4b0210a370c683 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tab.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d51ea55b4d3f7a040acecd49d1967267 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Name</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Padding</td>
      <td>Padding</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Content alignment (H)</td>
      <td>Align (H)</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Tab Container
Source: https://dev.writer.com/components/tabs



A container component for organising and displaying Tab components in a tabbed interface.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tabs.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=4d0cd3f2d5386d72cd6e0f864e879783" data-og-width="1182" width="1182" data-og-height="330" height="330" data-path="framework/public/components/tabs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tabs.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=d460b24d8fb529b2ab724c25f2222e67 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tabs.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=dc7b56605fc2051a4d9e15a201f88705 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tabs.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=f529e80f0b7a54460de0ea5286372588 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tabs.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=af11f252f7227a561a346a2f0a0c349a 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tabs.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=ffcea284a3c1a311aff4df1fcd353f1b 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/components/tabs.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=82e4142ee571ec159fdaaa6ca2d0c51f 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Secondary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container background</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Container shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Separator</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Button shadow</td>
      <td>Shadow</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-tab-change" icon="code">
    Sent when the active tab changes.

    ```python  theme={null}
    def tab_change_handler(state, payload):

    # The payload contains the name of the newly activated tab

    state["active_tab"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Tags
Source: https://dev.writer.com/components/tags



A component to display coloured tag pills.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/tags.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e063b7fc90bfb6b61b52e86c618888e5" data-og-width="718" width="718" data-og-height="118" height="118" data-path="framework/public/components/tags.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/tags.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=8b7790e2f1135f3e5b23bad2496a3dde 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/tags.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e284ec9d84b218fc3597b059a4cc6af1 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/tags.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=0cad8792ff4178e778df975b47e3656b 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/tags.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f53fac8fd43f10b1133538be5981f878 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/tags.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=66f0324ccc590154ae60c9c19dd19544 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/tags.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=3f08cdd4f51eed04b2f19f7ee9cdd7b4 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Tags</td>
      <td>Key-Value</td>
      <td>Key-value object with tags. Must be a JSON string or a state reference to a dictionary.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Reference</td>
      <td>Color</td>
      <td>The colour to be used as reference for chroma and luminance, and as the starting point for hue rotation.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Seed value</td>
      <td>Number</td>
      <td>Choose a different value to reshuffle colours.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Rotate hue</td>
      <td>Boolean</td>
      <td>If active, rotates the hue depending on the content of the string. If turned off, the reference colour is always used.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-tag-click" icon="code">
    Triggered when a tag is clicked.

    ```python  theme={null}
    def handle_tag_click(state, payload):
    state["selected_tag_id"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Text
Source: https://dev.writer.com/components/text



export const my_text_0 = undefined

A component to display plain text or formatted text using Markdown syntax.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/text.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a0e34a7cd67c60ef8f982e5bc99dabf5" data-og-width="420" width="420" data-og-height="98" height="98" data-path="framework/public/components/text.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/text.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ed07bca1157b5ebc0e391d7622801a91 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/text.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=eb1e8dc93b5be195555278f79b1672e8 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/text.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=0e848e23eacdc95f7317b3baa225bc7c 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/text.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=baaaa4c07549e891b543a03a5fbdac8e 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/text.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=019a95631f79e94735cf6757ea0e5c02 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/text.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=94fee25706d0e0fd6bf1ee5120f49cf6 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Text</td>
      <td>Text</td>
      <td>Add text directly, or reference state elements with @{my_text_0}.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable markdown</td>
      <td>Boolean</td>
      <td>The Markdown output will be sanitised; unsafe elements will be removed.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Alignment</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <ol>
          <li>Left</li>

          <li>Center</li>

          <li>Right</li>
        </ol>
      </td>
    </tr>

    <tr>
      <td>Enable copy button</td>
      <td>Boolean</td>
      <td>Enable a copy button that lets users to copy the contents in this field to their clipboard</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Primary text</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-click" icon="code">
    Capture single clicks.

    ```python  theme={null}
    def click_handler(state):

    # Increment counter when the text is clicked

    state["counter"] += 1
    ```
  </Accordion>
</AccordionGroup>

<events />


# Text area Input
Source: https://dev.writer.com/components/textareainput



A user input component that allows users to enter multi-line text values.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textareainput.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=7d78bb7c819b5751d77d38bff4e6ea8e" data-og-width="970" width="970" data-og-height="271" height="271" data-path="framework/public/components/textareainput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textareainput.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=0b0bb9331a2cabdaf2b61ddce23608bf 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textareainput.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e3d14b572fcecfeb1c3723b618b3e017 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textareainput.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=5858cdd3659dd85c39ee7f19505c1bd7 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textareainput.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=60df41a7e524f01626d9b3ff277ebe76 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textareainput.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=7d28444d2b6c5387d28c64dca95eb45e 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textareainput.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=a9f7f1eb8c78305a8ff73baa3b752fb7 2500w" />

## Overview

The **Text area Input** component allows users to enter multi-line text values. It's designed for longer text content like descriptions, comments, reviews, or any content that requires multiple lines.

## Common use cases

* **Long-form content**: Collect essays, articles, or detailed descriptions
* **User feedback**: Gather reviews, comments, or support requests
* **Data entry**: Allow users to paste large amounts of text or data
* **Configuration**: Collect complex configuration settings or parameters

## How it works

1. **Multi-line input**: Users can enter text across multiple lines
2. **Manual resizing**: Users can resize the text area by dragging the bottom corner
3. **State binding**: Content automatically saves to the specified state variable
4. **Real-time events**: Triggers events as users type or finish editing
5. **Configurable rows**: Set the initial number of rows to display

The component provides a familiar text editing experience with manual resizing for longer content entry.

## Configuration options

### Basic settings

* **Label**: Text label displayed above the input field
* **Placeholder**: Hint text shown when the field is empty
* **Rows**: Number of rows to display (default: `5`)
* **Link variable**: The name of the state variable that stores the input value

### Styling options

* **Custom CSS classes**: Apply additional styling

### Events

* **wf-change**: Triggered as users type (real-time) - payload contains the text area content
* **wf-change-finish**: Triggered when users finish editing (on blur) - payload contains the text area content

## Example

### Customer feedback form

This example shows how to create a customer feedback form with a text area for detailed comments.

**Interface:**

* Text Input for customer name
* Text area Input for feedback details
* Button to submit the form

**Text area Input configuration:**

* Label: "Your feedback"
* Placeholder: "Please share your experience with our product..."
* State element: `customer_feedback`
* Rows: 4

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textareainput-configuration.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d00e7359cce0d8fefcdf2818f0229bf8" alt="Text area Input configuration" data-og-width="2704" width="2704" data-og-height="1558" height="1558" data-path="images/agent-builder/components/textareainput-configuration.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textareainput-configuration.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=f4ca02fb2d434a79f98f041d2c198350 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textareainput-configuration.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=8059197a31c3ab6a1b059183624e506a 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textareainput-configuration.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=f596032cce0fa5e61546c318a07619a8 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textareainput-configuration.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=25cf82ae60fe3310e4b1fba8b0de8ab6 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textareainput-configuration.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=528730a9b19f68332f52a41d9a23ba9e 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textareainput-configuration.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d6ce6cc3b2ad0331eebe118784b34daf 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Placeholder</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Rows</td>
      <td>Number</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Text Input
Source: https://dev.writer.com/components/textinput



A user input component that allows users to enter single-line text values.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textinput.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=aa0cc5b8fd4e316f7dc7a9f13fb2dbf4" data-og-width="967" width="967" data-og-height="162" height="162" data-path="framework/public/components/textinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textinput.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=e136a0d242a01200fd4127f245bce1bb 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textinput.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ae717601ccca263b3f4c9268737b1252 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textinput.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=3e31b5cc138e5724fb7681dab698761c 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textinput.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=d6f70106873a8936edd567db9d597baf 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textinput.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=9b17199a890971d90cd194d6933325de 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/textinput.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=eb366deaefe983b8e1da51644adbbf0f 2500w" />

## Overview

The **Text Input** component allows users to enter single-line text values. It's the most basic form of user input and is essential for collecting information from users in your agent.

Text inputs automatically bind to state variables, making it easy to capture and use user input in your blueprint workflows. They support various styling options and can be configured for different use cases, including password fields.

## Common use cases

* **User information**: Collect names, emails, phone numbers, and other personal data
* **Search queries**: Allow users to search through data or content
* **Configuration values**: Let users set preferences or parameters
* **Form fields**: Collect data as part of larger forms
* **Password entry**: Secure input for sensitive information

## How it works

1. **Label**: Provide a clear label for the input field
2. **Placeholder**: Add helpful placeholder text to guide users
3. **Binding**: Connect to a state variable to store the input value
4. **Events**: Trigger workflows when users type or finish editing
5. **Styling**: Customize appearance with colors and CSS classes, and add a password mode for sensitive information

The component automatically updates the bound state variable as users type, and can trigger events for real-time processing or validation.

## Configuration options

### Basic settings

* **Label**: The field label displayed above the input
* **Placeholder**: Hint text shown when the field is empty
* **Link variable**: The name of the state variable that stores the input value

### Styling options

* **Password mode**: Toggle to hide input for sensitive data (default is disabled)
* **Accent color**: Set the focus color for the input field
* **Custom CSS classes**: Apply additional styling

### Events

* **wf-change**: Triggered as users type (real-time) - payload contains the input value
* **wf-change-finish**: Triggered when users finish editing (on blur) - payload contains the input value

## Example

### Search interface

This example shows how to create a search interface with a text input. The search query is stored in the `search_query` state variable. For the blueprint workflow, you can access the `search_query` state variable to see the user's query.

**Interface:**

* Text Input component for the search query
* Button component to trigger the search
* Results container to display matches

**Search text input configuration:**

* **Label**: "Search"
* **Placeholder**: "Enter search terms..."
* **Link variable**: `search_query`

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textinput-configuration.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=bcac6a24540b4f8833d2af0b5d35ad61" alt="Text Input configuration" data-og-width="2710" width="2710" data-og-height="1284" height="1284" data-path="images/agent-builder/components/textinput-configuration.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textinput-configuration.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=1af9d36224cd816a31a88fc47e630e94 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textinput-configuration.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=cfd74fb2afb05c660e94a21c6113f653 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textinput-configuration.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=2ff264fd25dc429864edede82367354e 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textinput-configuration.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6dc5c31246a96a8639248e95f2c1c7dc 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textinput-configuration.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=73bd4e578e4e1a7dfefc97bd11da2b0e 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/components/textinput-configuration.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=6a3ad974308a801a1b3eb66813846a4a 2500w" />

## Best practices

1. **Clear labels**: Use descriptive labels that clearly indicate what information is needed
2. **Helpful placeholders**: Provide examples or guidance in placeholder text
3. **Appropriate validation**: Validate input on both client and server side
4. **Real-time feedback**: Use the `wf-change` event for immediate user feedback
5. **Password security**: Use password mode for sensitive information

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Placeholder</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Password mode</td>
      <td>Boolean</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Time Input
Source: https://dev.writer.com/components/timeinput



A user input component that allows users to select a time.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timeinput.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=3d11d45afa17bf645a69103e890f74b7" data-og-width="171" width="171" data-og-height="125" height="125" data-path="framework/public/components/timeinput.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timeinput.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=1c384764d1b6db0cac606f00096ded78 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timeinput.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=f98c2bb96f5164f39af8c1165c1f7169 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timeinput.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b30e91e81c34c07b527e02d00993338f 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timeinput.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=c15bba20eed650bfe14d02e9c446a6ae 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timeinput.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=3384ce9b4e1ebe8603659c3d8886fce7 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timeinput.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=8570761f477d981c6e7fafd64482f6d8 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Label</td>
      <td>Text</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-time-change" icon="code">
    Capture changes to this control.

    ```python  theme={null}

    def onchange_handler(state, payload):

    # Set the state variable "new_time" to the new value, provided as a hh:mm string (in 24-hour format that includes leading zeros).

    state["new_time"] = payload
    ```
  </Accordion>
</AccordionGroup>

<events />


# Timer
Source: https://dev.writer.com/components/timer



A component that emits an event repeatedly at specified time intervals, enabling time-based refresh.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timer.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=033c952ea8a45dc5e1bfd30ff1d1a6f4" data-og-width="424" width="424" data-og-height="125" height="125" data-path="framework/public/components/timer.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timer.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=ff027738eacc20f6ea59d4401f8f166d 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timer.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=bfa1b7b791516450c48da1ae90748a00 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timer.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=36daf61ec47e58db1fdc047f6ff6be5c 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timer.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=6070b6cb9621a7487a75a655d3e65290 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timer.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=42adea96b9c6a7db626ffc73feaa21be 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/timer.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=63abff5106fb9f412c49994c34a94c7a 2500w" />

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Interval (ms)</td>
      <td>Number</td>
      <td>How much time to wait between ticks. A tick is considered finished when its event is handled.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Active</td>
      <td>Boolean</td>
      <td>Whether the timer should trigger tick events.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Accent</td>
      <td>Color</td>
      <td>-</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>

## Events

<AccordionGroup>
  <Accordion title="wf-tick" icon="code">
    Emitted when the timer ticks.

    ```python  theme={null}
    def handle_timer_tick(state):

    # Increment counter when the timer ticks

    state["counter"] += 1
    ```
  </Accordion>
</AccordionGroup>

<events />


# Video Player
Source: https://dev.writer.com/components/videoplayer



A Video player component that can play various video formats.

<img src="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/videoplayer.png?fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=b7ac2f9091c2198a695401869f95de5d" data-og-width="1141" width="1141" data-og-height="668" height="668" data-path="framework/public/components/videoplayer.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/videoplayer.png?w=280&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=0acd5f49b55d8d7d63facb10c1173406 280w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/videoplayer.png?w=560&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=fe2a08940e0227051ac210b98ccffab8 560w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/videoplayer.png?w=840&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=3397c52bc374c5039135e0c4fba7df34 840w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/videoplayer.png?w=1100&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=99fb230b392722e3621ff7fc5cd674ac 1100w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/videoplayer.png?w=1650&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=9a9c90e805cd599d132137eb8eede9c5 1650w, https://mintcdn.com/writer/dHnl9w_Om9ycQRLE/framework/public/components/videoplayer.png?w=2500&fit=max&auto=format&n=dHnl9w_Om9ycQRLE&q=85&s=bc27b00b8b0a3bb3f2ac72c297a8eb31 2500w" />

Use your app's static folder to serve videos directly. For example, `static/my_video.mp4`.

Alternatively, you can pack bytes or files in state:

`state[&quot;vid_b&quot;] = wf.pack_bytes(vid_bytes, &quot;video/mp4&quot;)`

`state[&quot;vid_f&quot;] = wf.pack_file(vid_file, &quot;video/mp4&quot;)`

Afterwards, you can reference the video using the syntax `@{vid_f}`.

## Fields

<table className="componentFields">
  <thead>
    <th>Name</th>
    <th>Type</th>
    <th class="desc">Description</th>
    <th>Options</th>
  </thead>

  <tbody>
    <tr>
      <td>Source</td>
      <td>Text</td>
      <td>The URL of the video file. Alternatively, you can pass a file via state.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Enable controls</td>
      <td>Boolean</td>
      <td>Display Video player controls.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Autoplay</td>
      <td>Boolean</td>
      <td>Autoplay the video when the component is loaded.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Loop</td>
      <td>Boolean</td>
      <td>Loop the video when it reaches the end.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Muted</td>
      <td>Boolean</td>
      <td>Mute the video by default.</td>

      <td>
        <span>-</span>
      </td>
    </tr>

    <tr>
      <td>Custom CSS classes</td>
      <td>Text</td>
      <td>CSS classes, separated by spaces. You can define classes in custom stylesheets.</td>

      <td>
        <span>-</span>
      </td>
    </tr>
  </tbody>
</table>


# Writer AI module
Source: https://dev.writer.com/framework/ai-module



This module leverages the [Writer Python SDK](https://pypi.org/project/writer-sdk/) to enable applications to interact with large language models (LLMs) in chat or text completion formats. It provides tools to manage conversation states and to dynamically interact with LLMs using both synchronous and asynchronous methods.

## Getting your API key

To utilize the Writer AI module, you'll need to configure the `WRITER_API_KEY` environment variable with an API key obtained from AI Studio. Here is a detailed [guide](/home/quickstart) to setup up this key. You will need to select an **API** app under **Developer tools**

Once you have your API key, set it as an environment variable on your system:

<CodeGroup>
  ```bash For macOS and Linux theme={null}
  export WRITER_API_KEY=your_api_key_here
  ```

  ```bash For Windows theme={null}
  set WRITER_API_KEY=your_api_key_here
  ```
</CodeGroup>

You can manage your environment variables using methods that best suit your setup, such as employing tools like [python-dotenv](https://pypi.org/project/python-dotenv/).

## Chat completion with the Conversation class

The `Conversation` class manages LLM communications within a chat framework, storing the conversation history and handling the interactions.

```python  theme={null}
import writer as wf
import writer.ai

def handle_simple_message(state, payload):
    # Update the conversation state by appending the incoming user message.
    state["conversation"] += payload
    
    # Stream the complete response from the AI model in chunks.
    for chunk in state["conversation"].stream_complete():
        # Append each chunk of the model's response to the ongoing conversation state.
        state["conversation"] += chunk

# Initialize the application state with a new Conversation object.
initial_state = wf.init_state({
    "conversation": writer.ai.Conversation(),
})
```

### Initializing a conversation

A `Conversation` can be initialized with either a system prompt or a list of previous messages. It can also accept a default configuration dictionary that sets parameters for all interactions.

```python  theme={null}
# Initialize with a system prompt for a Financial Analyst specializing in balance sheets
conversation = Conversation("You assist clients with analyzing and understanding their balance sheets")

# Initialize with a history of messages related to balance sheet queries
history = [
    {"role": "user", "content": "Can you explain the liabilities section?"},
    {"role": "assistant", "content": "Certainly! Liabilities are legally binding obligations payable to another entity."}
]

conversation = Conversation(history)

# Initialize with a configuration suitable for financial analysis discussions
config = {'max_tokens': 200, 'temperature': 0.5}
conversation = Conversation("You provide detailed insights into balance sheet components", config=config)
```

### Adding messages to conversation

Messages can be added to a `Conversation` instance using the `+` operator or the `add` method.

```python  theme={null}
# Using the `+` operator to add a balance sheet-related query
conversation += {"role": "user", "content": "Can you break down the assets section of the balance sheet?"}

# Using the `add` method to add a balance sheet-related query
conversation.add(role="user", content="How should I interpret the equity section?")
```

### Completing and streaming Conversations

The `complete` and `stream_complete` methods facilitate interaction with the LLM based on the accumulated messages and configuration. These methods execute calls to generate responses and return them in the form of a message object, but do not alter the conversation's `messages` list, allowing you to validate or modify the output before deciding to add it to the history.

<CodeGroup>
  ```python complete theme={null}
  # Using `complete` to get a single response
  response = conversation.complete()
  print("LLM Response:", response)
  ```

  ```python stream_complete theme={null}
  # Using `stream_complete` to get streamed responses
  for chunk in conversation.stream_complete():
      print("Streamed Message:", chunk)
      # Manually adding to the conversation
      conversation += chunk
  ```
</CodeGroup>

Instance-wide configuration parameters can be complemented or overriden on individual call's level, if a `config` dictionary is provided to the method:

```python  theme={null}
# Overriding configuration for a specific call
response = conversation.complete(config={'max_tokens': 200, 'temperature': 0.5})
```

### Using Graphs with Conversation

A `Graph` is a collection of files meant to provide their contents to the LLM during conversations. Framework allows you to create, retrieve, update, and delete graphs, as well as manage the files within them.

#### Creating and Managing Graphs

To create and manipulate graphs, use the following methods:

```python  theme={null}
from writer.ai import create_graph, retrieve_graph, list_graphs, delete_graph

# Create a new graph
graph = create_graph(name="Financial Data", description="Quarterly reports")

# Retrieve an existing graph by ID
graph = retrieve_graph("d90a632b-5c1f-42b8-8748-5b7f769d9a36")

# Update a graph
graph.update(name="Updated Financial Data", description="Updated description")

# Retrieve a list of created graphs
graphs = list_graphs()
for graph in graphs:
    # Delete a graph
    delete_graph(graph)
```

#### Adding and Removing Files from Graphs

You can upload files, associate them with graphs, and download or remove them.

```python  theme={null}
from writer.ai import upload_file

# Upload a file
file = upload_file(data=b"file content", type="application/pdf", name="Report.pdf")

# Add the file to a graph
graph.add_file(file)

# Remove the file from the graph
graph.remove_file(file)
```

#### Applying Graphs to Conversation completion

You can utilize graphs within conversations. For instance, you may want to provide the LLM access to a collection of files during an ongoing conversation to query or analyze the file content. When passing a graph to the conversation, the LLM can query the graph to retrieve relevant data.

```python  theme={null}
# Retrieve a graph
graph = retrieve_graph("d90a632b-5c1f-42b8-8748-5b7f769d9a36")

# Pass the graph to the conversation for completion
response = conversation.complete(tools=graph)
```

Alternatively, you can define a graph using JSON:

```python  theme={null}
tool = {
    "type": "graph",
    "graph_ids": ["d90a632b-5c1f-42b8-8748-5b7f769d9a36"]
}

response = conversation.complete(tools=tool)
```

### Using Function Calls with Conversations

<Warning>
  Function tools are only available with `palmyra-x4` and `palmyra-x5` models.
</Warning>

Framework allows you to register Python functions that can be called automatically during conversations. When the LLM determines a need for specific information or processing, it issues a request to use the local code (your function), and Framework handles that request automatically.

#### Defining Function Tools

Function tools are defined using either a Python class or a JSON configuration.

```python  theme={null}
from writer.ai import create_function_tool

# Define a function tool with Python callable
def calculate_interest(principal: float, rate: float, time: float):
    return principal * rate * time

tool = create_function_tool(
    name="calculate_interest",
    callable=calculate_interest,
    parameters={
        "principal": {"type": "float", "description": "Loan principal"},
        "rate": {"type": "float", "description": "Interest rate"},
        "time": {"type": "float", "description": "Time in years"}
    }
)

response = conversation.complete(tools=tool)
```

Alternatively, you can define a function tool in JSON format, but the callable function must still be passed:

```python  theme={null}
tool = {
    "type": "function",
    "name": "calculate_interest",
    "callable": calculate_interest,
    "parameters": {
        "principal": {"type": "float", "description": "Loan principal"},
        "rate": {"type": "float", "description": "Interest rate"},
        "time": {"type": "float", "description": "Time in years"}
    }
}

response = conversation.complete(tools=tool)
```

Function tools require the following properties:

* **`name: str`**: A string that defines how the function is referenced by the LLM. It should describe the function’s purpose.
* **`callable: Callable`**: A Python function that will be called automatically when needed by the LLM.
* **`parameters: dict`**: A dictionary that specifies what input the function expects. The keys should match the function’s parameter names, and each parameter should have a `type`, and an optional `description`.\
  Supported types are: `string`, `number`, `integer`, `float`, `boolean`, `array`, `object` and `null`.

#### Automated Function Calling

When a conversation involves a tool (either a graph or a function), Framework automatically handles the requests from LLM to use the tools during interactions. If the tool needs multiple steps (for example, querying data and processing it), Framework will handle those steps recursively, calling functions as needed until the final result is returned.

By default, to prevent endless recursion, Framework will only handle 5 consecutive tool calls. You can expand it in case it doesn't suit your case – both `complete()` and `stream_complete()` accept a `max_tool_depth` parameter, which configures the maximum allowed recursion depth:

```python  theme={null}
response = conversation.complete(tools=tool, max_tool_depth=7)
```

### Providing a Tool or a List of Tools

You can pass either a single tool or a list of tools to the `complete()` or `stream_complete()` methods. The tools can be a combination of FunctionTool, Graph, or JSON-defined tools.

```python  theme={null}
from writer.ai import create_function_tool, retrieve_graph

# Define a function tool
tool1 = create_function_tool(
    name="get_data",
    callable=lambda x: f"Data for {x}",
    parameters={"x": {"type": "string", "description": "Input value"}}
)

# Retrieve a graph
graph = retrieve_graph("d90a632b-5c1f-42b8-8748-5b7f769d9a36")

# Provide both tools in a list
response = conversation.complete(tools=[tool1, graph])
```

## Text generation without a conversation state

### Text generation against a string prompt

`complete` and `stream_complete` methods are designed for one-off text generation without the need to manage a conversation state. They return the model's response as a string. Each function accepts a `config` dictionary allowing call-specific configurations.

<CodeGroup>
  ```python complete theme={null}
  # Using `complete` for a single completion
  text_response = complete("Explore the benefits of AI.", config={'temperature': 0.3})
  print("Completion:", text_response)
  ```

  ```python stream_complete theme={null}
  # Using `stream_complete` for streamed text completions
  for text_chunk in stream_complete("Explore the benefits of AI.", config={'temperature': 0.3}):
      print("Streamed Text:", text_chunk)
  ```
</CodeGroup>

### Text generation against graphs

The `ask` and `stream_ask` methods allow you to query one or more graphs to generate responses from the information stored within them.

#### Two approaches to questioning graphs

There are two ways to query graphs, depending on your needs:

1. **Graph-Level Methods** (`Graph.ask`, `Graph.stream_ask`): Used when working with a single graph instance. These methods are tied directly to the Graph object, encapsulating operations within that instance.
2. **Module-Level Methods** (`writer.ai.ask`, `writer.ai.stream_ask`): Designed for querying multiple graphs simultaneously. These methods operate on a broader scale, allowing mixed inputs of graph objects and IDs.

<Note>
  •	Use graph-level methods when working with a single graph instance.
  •	Use module-level methods when querying multiple graphs or when graph IDs are your primary input.
</Note>

#### Parameters

Both methods include:
• `question: str`: The main query for the LLM.
• *Optional* `subqueries: bool` (default: `False`): Allows the LLM to generate additional questions during response preparation for more detailed answers. Enabling this might increase response time.

Method-level methods require:
• `graphs_or_graph_ids: list[Graph | str]`: A list of graphs to use for the question. You can pass `Graph` objects directly into the list, use graph IDs in string form, or a mix of both.

#### Graph-level methods

The graph-level methods, `Graph.ask` and `Graph.stream_ask`, are designed for interacting with a single graph. By calling these methods on a specific `Graph` instance, you can easily pose questions and retrieve answers tailored to that graph’s content.

<CodeGroup>
  ```python ask theme={null}
  # Retrieve a specific graph
  graph = retrieve_graph("f47ac10b-58cc-4372-a567-0e02b2c3d479")

  # Pose a question to the graph and get a complete response
  response = graph.ask("What are the benefits of renewable energy?")
  print(response)
  ```

  ```python stream_ask theme={null}
  # Retrieve a specific graph
  graph = retrieve_graph("f47ac10b-58cc-4372-a567-0e02b2c3d479")

  # Pose a question and stream the response in chunks
  for chunk in graph.stream_ask("Explain the history of solar energy."):
      print(chunk)
  ```
</CodeGroup>

#### Module-level methods

The module-level methods, `writer.ai.ask` and `writer.ai.stream_ask`, are designed for querying multiple graphs simultaneously. They are useful when you need to aggregate or compare data across multiple graphs.

<CodeGroup>
  ```python ask theme={null}
  from writer.ai import ask

  # Pose a question to multiple graphs
  response = ask(
      question="What are the latest advancements in AI?",
      graphs_or_graph_ids=[
          "550e8400-e29b-41d4-a716-446655440000",
          "123e4567-e89b-12d3-a456-426614174000"
          ]
  )
  print(response)
  ```

  ```python stream_ask theme={null}
  from writer.ai import stream_ask

  # Stream responses from multiple graphs
  for chunk in stream_ask(
      question="Describe the key features of renewable energy sources.",
      graphs_or_graph_ids=[
          "550e8400-e29b-41d4-a716-446655440000",
          "123e4567-e89b-12d3-a456-426614174000"
          ]
  ):
      print(chunk)
  ```
</CodeGroup>

## Using the `Tools` class

<Note>
  This document outlines the use of `Tools` in the Writer Framework; for more thorough documentation, check out (this guide)\[[https://dev.writer.com/tools](https://dev.writer.com/tools)].
</Note>

The `writer.ai.tools` instance provides access to Writer SDK `tools` resources, such as text splitting, medical content comprehension, and PDF parsing. Below is a guide on how to use each method.

### Splitting Content

The `split` method divides text into chunks based on a selected strategy.

```python  theme={null}
from writer.ai import tools

content = \
    """
    This is a long piece of text that needs to be split into smaller parts.
    Lorem ipsum dolor sit amet...
    """
chunks = tools.split(content, strategy="llm_split")
print(chunks)
```

**Parameters**:

* `content` (str): The text to be split.
* `strategy` (str): The splitting strategy (`llm_split`, `fast_split`, or `hybrid_split`).

**Returns**:
A list of text chunks.

### Medical Content Comprehension

The `comprehend_medical` method processes medical text and extracts relevant entities based on a specified response type.

```python  theme={null}
from writer.ai import tools

medical_text = "Patient shows symptoms of hypertension and diabetes."
entities = tools.comprehend_medical(medical_text, response_type="Entities")
print(entities)
```

**Parameters**:

* `content` (str): The medical text to process.
* `response_type` (str): The type of medical response (`Entities`, `RxNorm`, `ICD-10-CM`, or `SNOMED CT`).

**Returns**:
A list of extracted medical entities.

### PDF Parsing

The `parse_pdf` method extracts text content from a PDF file. The file can be referenced by its ID, or provided as a `File` object.

<CodeGroup>
  ```python file_id theme={null}
  from writer.ai import tools

  file_id = "example-file-id"
  parsed_content = tools.parse_pdf(file_id, format="text")
  print(parsed_content)
  ```

  ```python upload_file theme={null}
  from writer.ai import tools

  file_object = upload_file(
      data=pdf_content,
      type="application/pdf",
      name="uploaded_file.pdf"
  )
  parsed_content = tools.parse_pdf(file_object, format="text")
  print(parsed_content)
  ```
</CodeGroup>

**Parameters**:

* `file_id_or_file` (str or File): The file to parse (by ID or as an object).
* `format` (str): The format of the extracted content (`text` or `markdown`).

**Returns**:
The text content of the PDF.


# Application state
Source: https://dev.writer.com/framework/application-state



Each session is assigned a unique application state by the Framework.

## Initializing state

To set the initial application state, use the `wf.init_state()` method with a dictionary argument.

<Tip>
  All user sessions will start with a clone of this initial state.
</Tip>

```py  theme={null}
import writer as wf

# Define the initial state
initial_state = wf.init_state({
    "counter": 0,
})

# Define an event handler that modifies the state
# It receives the session state as an argument and mutates it
def increment(state):
    state["counter"] += 1
```

In the above example, each session begins with a `counter` at 0. As users interact with the application and activate event handlers, their session's `counter` value will change. For instance, if a user triggers the `increment` handler three times, their counter will increase to 3.

To access the `counter` value in the Builder, use @{counter}.

### Managing nested state elements

To include nested elements in your state, use nested dictionaries:

```python  theme={null}
# Example of nested state initialization
wf.init_state({
    "counter": 0,
    "my_app": {
        "title": "Nested value"
    }
})
```

You can reference nested elements in the Builder as `@{my_app.title}`.

### Backend-only state elements

By default, all of the elements in the session state are sent to the front-end.

<Warning>
  All state elements are transmitted to the front-end by default, regardless of their visibility in the user interface.
</Warning>

To keep certain state elements private (back-end-only), prefix them with an underscore `_`. This is useful in several scenarios:

1. When data synchronization to the front-end is unnecessary.
2. When data cannot be serialized for the front-end, such as database connections.
3. When data is sensitive to the specific session and should remain confidential.

These elements remain in the back-end and cannot be accessed from the Builder.

## Managing files and binary data

In components where the Builder interfaces with external data, such as images, it often requires the use of data URLs. The source for an *Image* component, for example, can be a standard URL or a data URL.

Packing Files and Binary Data: Files and binary data can be converted to data URLs before they are sent to the front-end. Use `wf.pack_file()` and `wf.pack_bytes()` for this purpose. The `mime_type` argument, while optional, specifies the media type, helping the browser to correctly handle the data.

```python  theme={null}
import writer as wf

# Initialize state with various data types
wf.init_state({
    # Reference a file by its filesystem path
    "sales_spreadsheet": wf.pack_file("sales_spreadsheet.xlsx"),

    # Use a file-like object that implements a .read() method
    "main_image": wf.pack_file(image_file, mime_type="image/jpeg"),

    # Convert raw bytes specifying a MIME type
    "my_bytes": wf.pack_bytes(b"\x31\x33\x33\x37", mime_type="text/plain"),

    # Directly assign raw bytes without a MIME type
    "my_raw_bytes": b"\x31\x33\x33\x37",
})
```

## Handling non-standard data types

The front-end cannot directly display complex data types such as Pandas dataframes or Matplotlib figures. Such objects must be serialized before being sent.

<Tabs>
  <Tab title="Matplotlib figures">
    Matplotlib figures are converted to PNG data URLs, which can be shown using a standard *Image* component.

    ```python  theme={null}
    wf.init_state({
        "my_matplotlib_fig": fig,
    })
    ```

    The element can be used in an *Image* component in the Builder by setting the source to `@{my_matplotlib_fig}`. Alternatively, as data inside a *File Download* component.
  </Tab>

  <Tab title="Plotly graphs">
    Plotly graphs are converted to Plotly JS specifications, using JSON. They can be used in *Plotly Graph* components.
  </Tab>

  <Tab title="Altair charts">
    Altair charts are converted to Vega Lite specifications, based on JSON. They can be used in *Vega Lite Chart* components.
  </Tab>

  <Tab title="Pandas dataframes">
    Pandas dataframes are converted to JSON and can be used in *Dataframe* components.
  </Tab>
</Tabs>

## State schema

State schema is a feature that allows you to define the structure of the state.
This is useful for ensuring that the state is always in the expected format.

Schema allows you to use features like

* typing checking with mypy / ruff
* autocomplete in IDEs
* declare dictionaries
* automatically calculate mutations on properties

more into [Advanced > State schema](./state-schema)

```python  theme={null}
import writer as wf

class AppSchema(wf.WriterState):
    counter: int

initial_state = wf.init_state({
    "counter": 0
}, schema=AppSchema)

# Event handler
# It receives the session state as an argument and mutates it
def increment(state: AppSchema):
    state.counter += 1
```


# Authentication
Source: https://dev.writer.com/framework/authentication



The Writer Framework authentication module allows you to restrict access to your application. Framework will be able to authenticate a user through an identity provider such as Google, Microsoft, Facebook, Github, Auth0, etc.

<Warning>
  Authentication is done before accessing the application. It is not possible to
  trigger authentication for certain pages exclusively.
</Warning>

<Warning>
  Static assets from Writer Framework exposed through `/static` and `/extensions` endpoints are not protected behind Authentication.
</Warning>

## Use Basic Auth

Basic Auth is a simple authentication method that uses a username and password. Authentication configuration is done in the [server\_setup.py module](/framework/custom-server).

<Warning>
  Password authentication and Basic Auth are not sufficiently secure for critical applications. If HTTPS encryption fails, a user could potentially intercept passwords in plaintext. Additionally, these methods are vulnerable to brute force attacks that attempt to crack passwords. To enhance security, it is advisable to implement authentication through trusted identity providers such as Google, Microsoft, Facebook, GitHub, or Auth0.
</Warning>

```python server_setup.py theme={null}
import os
import writer.serve
import writer.auth

auth = writer.auth.BasicAuth(
    login=os.getenv('LOGIN'),
    password=os.getenv('PASSWORD'),
)

writer.serve.register_auth(auth)
```

### Brute force protection

A simple brute force protection is implemented by default. If a user fails to log in, the IP of this user is blocked.
Writer framework will ban the IP from either the `X-Forwarded-For` header or the `X-Real-IP` header or the client IP address.

When a user fails to log in, they wait 1 second before they can try again. This time can be modified by
modifying the value of `delay_after_failure`.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/429.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2a0e055b6df575a4c9f4ba392111461a" alt="429" data-og-width="848" width="848" data-og-height="634" height="634" data-path="framework/images/429.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/429.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a94da887bbb03a647b076b399582409f 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/429.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=3a8896dcc47ee735ba6ea1440b9843f5 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/429.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0f5e1f381ea2b0df1c4666b1de8cb453 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/429.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=3da1ed2f7ce600a478c8ab7ee7ad8ad6 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/429.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=904b4bca2dccf4b9aecc2f5150bba521 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/429.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=410b36ef8a1b4af7de1d4f4aa95c4e32 2500w" />

## Use OIDC provider

Authentication configuration is done in the `server_setup.py` [module](/framework/custom-server). The configuration depends on your identity provider.
Here is an example configuration for Google.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4686c4fa72431516b12cd6ca16b035b1" alt="Authentication OIDC Principle" data-og-width="3006" width="3006" data-og-height="831" height="831" data-path="framework/images/auth.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=676a69e812216a7576c27068acc72088 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=71f4ca197e56f10f2ff1cb17a4b1c5a2 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=fa485ce81406b77a65f06e93b14e922a 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=81aa8809ba7b365bcca880e437c93cf6 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=424c2166a8dc4b7a614480d4b798b3f8 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=e871fee2f8a4f588ca23b278646dfdbd 2500w" />

```python server_setup.py theme={null}
import os
import writer.serve
import writer.auth

oidc = writer.auth.Oidc(
    client_id="1xxxxxxxxx-qxxxxxxxxxxxxxxx.apps.googleusercontent.com",
    client_secret="GOxxxx-xxxxxxxxxxxxxxxxxxxxx",
    host_url=os.getenv('HOST_URL', "http://localhost:5000"),
    url_authorize="https://accounts.google.com/o/oauth2/auth",
    url_oauthtoken="https://oauth2.googleapis.com/token",
    url_userinfo='https://www.googleapis.com/oauth2/v1/userinfo?alt=json'
)

writer.serve.register_auth(oidc)
```

### Use pre-configured OIDC

The Writer Framework provides pre-configured OIDC providers. You can use them directly in your application.

| Provider | Function             | Description                                                                             |
| -------- | -------------------- | --------------------------------------------------------------------------------------- |
| Google   | `writer.auth.Google` | Allow your users to login with their Google Account                                     |
| Github   | `writer.auth.Github` | Allow your users to login with their Github Account                                     |
| Auth0    | `writer.auth.Auth0`  | Allow your users to login with different providers or with login password through Auth0 |

#### Google

You have to register your application into [Google Cloud Console](https://console.cloud.google.com/).

```python server_setup.py theme={null}
import os
import writer.serve
import writer.auth

oidc = writer.auth.Google(
	client_id="1xxxxxxxxx-qxxxxxxxxxxxxxxx.apps.googleusercontent.com",
	client_secret="GOxxxx-xxxxxxxxxxxxxxxxxxxxx",
	host_url=os.getenv('HOST_URL', "http://localhost:5000")
)

writer.serve.register_auth(oidc)
```

#### Github

You have to register your application into [Github](https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app#registering-a-github-app)

```python server_setup.py theme={null}
import os
import writer.serve
import writer.auth

oidc = writer.auth.Github(
	client_id="xxxxxxx",
	client_secret="xxxxxxxxxxxxx",
	host_url=os.getenv('HOST_URL', "http://localhost:5000")
)

writer.serve.register_auth(oidc)
```

#### Auth0

You have to register your application into [Auth0](https://auth0.com/).

```python server_setup.py theme={null}
import os
import writer.serve
import writer.auth

oidc = writer.auth.Auth0(
	client_id="xxxxxxx",
	client_secret="xxxxxxxxxxxxx",
	domain="xxx-xxxxx.eu.auth0.com",
	host_url=os.getenv('HOST_URL', "http://localhost:5000")
)

writer.serve.register_auth(oidc)
```

### Authentication workflow

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/authentication_oidc.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=44a0e689e6a53f0c45339a1e300e64f6" data-og-width="1743" width="1743" data-og-height="1920" height="1920" data-path="framework/images/authentication_oidc.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/authentication_oidc.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f8b390f434e832ab2de95439db6779c4 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/authentication_oidc.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=661fc1c8cde6685e409833ae31fae220 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/authentication_oidc.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6b2ca8720ccd337f48aea87adc244d94 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/authentication_oidc.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7e2091c03f07762b840059a7dfcda93c 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/authentication_oidc.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f121c3c7507b2dec7cce9a5a6bc71936 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/authentication_oidc.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=d081225cee272555aae4cc4a91434c09 2500w" />

### App static assets

Static assets in your application are inaccessible. You can use the `app_static_public` parameter to allow their usage.
When `app_static_public` is set to `True`, the static assets in your application are accessible without authentication.

```python  theme={null}
oidc = writer.auth.Auth0(
	client_id="xxxxxxx",
	client_secret="xxxxxxxxxxxxx",
	domain="xxx-xxxxx.eu.auth0.com",
	host_url=os.getenv('HOST_URL', "http://localhost:5000"),
	app_static_public=True
)
```

## User information in event handler

When the `user_info` route is configured, user information will be accessible
in the event handler through the `session` argument.

```python  theme={null}
def on_page_load(state, session):
    email = session['userinfo'].get('email', None)
    state['email'] = email
```

## Unauthorize access

It is possible to reject a user who, for example, does not have the correct email address.

<Tip>
  You can also use userinfo inside app. You can restrict access to certain pages
  inside the application by using the `session` object. See [User information in
  event handler](#user-information-in-event-handler)
</Tip>

```python  theme={null}
from fastapi import Request

import writer.serve
import writer.auth

oidc = ...

def callback(request: Request, session_id: str, userinfo: dict):
    if userinfo['email'] not in ['nom.prenom123@example.com']:
        raise writer.auth.Unauthorized(more_info="You can contact the administrator at <a href='https://support.example.com'>support.example.com</a>")

writer.serve.register_auth(oidc, callback=callback)
```

The default authentication error page look like this:

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth_unauthorized_default.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=121f690212138f13acaa32b387c2e3ee" data-og-width="2649" width="2649" data-og-height="1383" height="1383" data-path="framework/images/auth_unauthorized_default.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth_unauthorized_default.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=b2a608bc6fba8be77b39c03b87e468b7 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth_unauthorized_default.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a8597b336659bdf15f930fb56b66b2b0 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth_unauthorized_default.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=455c1199ef94c89c371f761d53ddb35e 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth_unauthorized_default.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0a9e202a52308aac6de28ad90f4b30d3 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth_unauthorized_default.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=d53b1aacd21a9a394c9632c0eea77727 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/auth_unauthorized_default.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=bb3dac7bd9c98872bb438f77e30142ee 2500w" />

| Parameter    | Description            |
| ------------ | ---------------------- |
| status\_code | HTTP status code       |
| message      | Error message          |
| more\_info   | Additional information |

## Modify user info

User info can be modified in the callback.

```python  theme={null}
from fastapi import Request

import writer.serve
import writer.auth

oidc = ...

def callback(request: Request, session_id: str, userinfo: dict):
	userinfo['group'] = []
	if userinfo['email'] in ['fabien@example.com']:
		userinfo['group'].append('admin')
		userinfo['group'].append('user')
	else:
		userinfo['group'].append('user')

writer.serve.register_auth(oidc, callback=callback)
```

## Custom unauthorized page

You can customize the access denial page using your own template.

```python  theme={null}
import os

from fastapi import Request, Response
from fastapi.templating import Jinja2Templates

import writer.serve
import writer.auth

oidc = ...

def unauthorized(request: Request, exc: writer.auth.Unauthorized) -> Response:
    templates = Jinja2Templates(directory=os.path.join(os.path.dirname(__file__), "templates"))
    return templates.TemplateResponse(request=request, name="unauthorized.html", status_code=exc.status_code, context={
        "status_code": exc.status_code,
        "message": exc.message,
        "more_info": exc.more_info
    })

writer.serve.register_auth(oidc, unauthorized_action=unauthorized)
```

## Enable in edit mode

Authentication is disabled in edit mode. To activate it, you must trigger the loading of the server\_setup module in edition mode.

```bash  theme={null}
writer edit --enable-server-setup
```


# Backend-driven UI
Source: https://dev.writer.com/framework/backend-driven-ui



Framework facilitates backend-initiated user interface modifications. These changes are made possible through **Code-Managed Components** (CMCs), distinct from the *Builder-Managed Components* (BMCs).

CMCs, unlike BMCs, are dynamically created and modified via back-end code, and cannot be edited (but still can be viewed) within the application builder. It's important to also note that CMCs do not persist in your application's files and exist only during the application runtime, supporting dynamic UI adjustments.

<Note>
  To summarise:

  **CMC** – Code-Managed Component

  * created via **application back-end**;
  * **cannot be edited** in builder;
  * is **not saved** to `.wf/components-*.jsonl`.

  **BMC** – Builder-Managed Component

  * created via **builder**;
  * **can be edited** in builder;
  * is **saved** to `.wf/components-*.jsonl`.
</Note>

## UI manager

Framework provides two independent approaches for managing your application's UI: initializing a base UI and making session-specific updates.

### Initializing base UI

The `init_ui()` method sets up a UI manager to configure UI components at the application's startup. This creates a component set that is accessible across all sessions:

```python  theme={null}
import writer as wf

with wf.init_ui() as ui:
    with ui.Page(id="my-page"):
        ui.Header({"text": "Hello World!"})
        ui.ColumnContainer(id="column-container")
```

### Making session-specific updates

For dynamic, session-specific UI updates, the `ui` parameter is used within handler functions. This approach allows for real-time modifications tailored to individual user sessions:

```python  theme={null}
def display_user_data(ui, state):
    with ui.find("column-container"):
        with ui.Column():
            ui.Text({"text": f"And welcome {state["username"]}!"})
        with ui.Column():
            ui.Text({"text": f"Your data: {state["user_data"]}"})
```

## UI manager methods

### `find` method

You can use the `ui.find(component_id: str)` method to access existing components by ID:

```python  theme={null}
with ui.find("column-container"):
    with ui.Column():
        ...
```

If the component couldn't be found, the method raises a `RuntimeError`.

### `refresh_with` method

You can use the `ui.refresh_with(component_id: str)` method to replace children CMCs of an existing component (referenced by its ID):

```python  theme={null}
with ui.refresh_with("my-page"):
    # Previously existing children are cleared
    ui.Header({"text": "Hello New World!"})
    with ui.ColumnContainer():
        with ui.Column():
            ui.Text({"text": "Nobody here for now..."})
```

This method also allows to clear children CMCs of a component:

```python  theme={null}
with ui.refresh_with("my-page"):
    # Empties the page
    pass
```

If a targeted component has builder-managed children, they will not be removed. A warning message will be recorded in the application's log for each BMC attempted to be removed. This does not stop the execution of the method – any remaining CMCs will still be removed.
As well as with `find` method, it also raises a `RuntimeError` if it fails to find a referenced component.

### `parent` method

`ui.parent(component_id: str, level: int = 1)` gives access to the id to parents at higher levels.

```python  theme={null}
container = ui.parent('my-text') # first parent id

container = ui.parent('my-text', 3) # level 3 parent id
with ui.find(container):
	...
```

### Component methods

UI manager contains methods linked to each front-end component. For example, in previous code snippets we provide a `ui.Text` method, which is used for creating [Text components](https://dev.writer.com/components/text).

This method expects `content: dict` as first argument, which enables you to set the field properties of the component, through corresponding keys:

```python  theme={null}
ui.Text(
    {
        "text": "Hello World!",  
        # The text content of the component
        "useMarkdown": "no",  
        # Will not use Markdown
        "alignment": "left",  
        # Text is aligned to the left
        "primaryTextColor": "#000000",  
        # The text color is black
        "cssClasses": "my-text hello-world"  
        # Apply 'my-text' and 'hello-world' CSS classes
    }
)
```

In a similar way, every other component method also expects `content` as its first argument:

```python  theme={null}
ui.VideoPlayer(
    {
        "src": "https://example.com/assets/mov/rick-roll-video.mov",
        "autoplay": "yes",
        "controls": "no",
        "muted": "no",
        "loop": "no",
    }
)
```

In addition to `content`, a set of fields which is specific to the component type, you can also modify the base properties of the component itself, which are:

* **`id: str`**: A unique identifier used for accessing the component after it was created.\
  *Providing an identifier that is already taken would result in `RuntimeWarning` and the existing component being overwritten with a newly created one.*
  ```python  theme={null}
  ui.Text(
      {"text": "Hello World!"}, 
      id="hello-world-text"
      )
  ```
  *If no ID is provided with a component, a UUID is automatically generated for it.*
  <Note>
    Make sure to provide an `id` if you intend to `find` the component later\
    As the `find` method relies on `id` of the component, retrieval might get tricky if its `id` was generated randomly.
  </Note>
* **`position: int`**: Determines the display order of the component in relation to its siblings.\
  Position `0` means that the component is the first child of its parent.\
  Position `-2` is used for components – such as [sidebars](https://dev.writer.com/components/sidebar) – that have a specific reserved position not related to their siblings.
  ```python  theme={null}
  ui.Text(
      {"text": "Hello Parent, I'm your first child!"}, 
      position=0
      )
  ```
  *Position is calculated automatically for each component, and you should be careful when you override it with predefined value, as this might lead to unexpected results.*
* **`parentId: str`**: Determines the parent [container](#container-components) for the component. By default, components recognise the container in the context of which they were defined as their parent. This allows for linking components to their parents outside of context, or for overriding a parent within a context.
  ```python  theme={null}
  ui.Text(
      {"text": "Hello Parent, I'm your child too!"}, 
      parentId="dear-parent"
      )
  ```
* **`visible: bool | str`**: Determines the visibility of the component, `True` by default.
  ```python  theme={null}
  ui.Text({"text": "I'm visible!"}, visible=True)

  ui.Text({"text": "And I'm not!"}, visible=False)

  ui.Text({"text": "My visibility depends on the @{my_var}!"}, visible="my_var")
  ```
* **`handlers: dict[str, callable]`**: Attaches [event handlers](https://dev.writer.com/framework/event-handlers) to the component. Each dictionary key represents an event, and its value is the corresponding handler.:
  ```python  theme={null}
  def increment(state):
      state["counter"] += 1

  initial_state = wf.init_state({"counter": 0})

  ...

  ui.Button(
      {"text": "My Counter: @{counter}"}, 
      handlers={"wf-click": increment}
      )
  # You have two options for adding a function 
  # to the `handlers` dictionary: 
  # directly pass the function itself, 
  # or use the function's name as a string. 
  # Both approaches yield the same outcome.
  ```
  *A component can be linked to multiple event handlers.*
* **`binding: dict[str, str]`**: Links the component to a state variable via [binding](https://dev.writer.com/framework/builder-basics#binding). The dictionary key is the bindable event, and the value is the state variable's name:
  ```python  theme={null}
  initial_state = wf.init_state({
      "header_text": "Default Text"
      "counter": 0
      })

  ...

  ui.TextInput(
      {"label": "Bound Text"}, 
      binding={"wf-change": "header_text"}
      )
  # This input will display "Default Text"
  # Changing the text in this input will modify the `header_text` variable

  ui.SliderInput(
      {"minValue": 0, "maxValue": 300, "stepSize": 1}, 
      binding={"wf-number-change": "counter"}
      )
  # This slider will have 0 as a default value
  # Sliding it will modify the `counter` variable
  ```
  *Unlike handlers, a component can be linked to just one variable via a bindable event. If the `binding` dictionary includes multiple event-variable pairs, a `RuntimeError` will be triggered.*

### Container components

Framework provides multiple layout components that can serve as *containers* for other components.

You can use `with` keyword to define such layouts:

```python  theme={null}
with ui.Section({"title": "My Section"}):
    ui.Text({"text": 'Hello World!'}, id="hello-world")
```

It also allows for "chaining" multiple containers together, creating extensive and deeply-nested layout structures when needed:

```python  theme={null}
with ui.ColumnContainer(id="cmc-column-container"):
    with ui.Column(id="cmc-column-1"):
        with ui.Section({"title": "My Section 1"}):
            ui.Text({"text": 'Hello World!'}, id="hello-world-1")
    with ui.Column(id="cmc-column-2"):
        with ui.Section({"title": "My Section 2"}):
            ui.Text({"text": 'Hello World again!'}, id="hello-world-2")
```

<Warning>
  Most components depend on being inside of a container. This means, for example, that Text components in code above cannot be created as "orphans", outside a Column or Section. Attempting to do so would raise an `UIError`.
</Warning>

By default, components inside container's `with` are being *appended* to it:

```python  theme={null}
with ui.Column(id="cmc-column-1"):
    ui.Text({"text": 'Hello World!'}, id="hello-world-1")

...

# Retrieves the Column component created before
with ui.find(id="cmc-column-1"): 
    # The following component is going to be appended 
    # to the retrieved Column
    ui.Text({"text": 'Hello World again!'}, id="hello-world-2")
```

This will result in a Column component having two children Text components. To replace or clear the children, use [`refresh_with` method](#refresh_with-method):

```python  theme={null}
with ui.Column(id="cmc-column-1"):
    ui.Text({"text": 'Hello World!'}, id="hello-world-1")

...

with ui.refresh_with(id="cmc-column-1"):
    # The following component is going to replace 
    # previously existing children of the retrieved Column
    ui.Text(
        {"text": 'To Hello World, or not to Hello World?'}, 
        id="hello-world-new"
        )
```


# Backend-initiated actions
Source: https://dev.writer.com/framework/backend-initiated-actions



Targeted, backend-initiated actions can be triggered from event handlers, using methods of `state`. Internally, this is achieved using Framework's `mail`, ephemeral state that is cleared when it reaches the intended user.

## Triggering a file download

The `file_download` method takes the `data` and `file_name` arguments. The first must contain raw bytes (a `bytes` object) or a packed file. As mentioned in the [Application State](/framework/application-state#managing-files-and-binary-data) section of the guide, a packed file is obtained using the `wf.pack_file` or `wf.pack_bytes` methods.

```py  theme={null}
def handle_file_download(state):
    # Pack the file as a FileWrapper object
    data = wf.pack_file("assets/story.txt", "text/plain")
    file_name = "thestory.txt"
    state.file_download(data, file_name)
```

## Adding a notification

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/backend-initiated-actions.notifications.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ae08937660ab594dfbefadb6b5ef8bab" alt="Notifications" data-og-width="2291" width="2291" data-og-height="697" height="697" data-path="framework/images/backend-initiated-actions.notifications.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/backend-initiated-actions.notifications.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=85c22cfd26411eb89c0d7e28ca776db1 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/backend-initiated-actions.notifications.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6e415f1179b026bc3de99b3723ddf6a9 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/backend-initiated-actions.notifications.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9ee835d8e92ccba41e3c314149993bb6 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/backend-initiated-actions.notifications.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=d55e383bba0746cf168bbe01f5a328f8 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/backend-initiated-actions.notifications.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=95999eea9d793b0801da0b1197a759ae 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/backend-initiated-actions.notifications.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a32e0bcaa3e3dc7f91415d165d8941db 2500w" />

Framework adds notifications when a runtime error takes place. You can add your own notifications using the `add_notification` method, which takes the `type`, `title` and `message` arguments. `type` must be one of `error`, `warning`, `info`, `success`.

```py  theme={null}
def notify_of_things_that_happened(state):
    state.add_notification("error", "An Error", "Something bad happened.")
    state.add_notification("warning", "A Warning", "Be aware that something happened.")
    state.add_notification("info", "Some Info", "Something happened.")
    state.add_notification("success", "A Success", "Something good happened.")
```

## Opening a URL

Open a URL in a new tab using the `open_url` method, which takes the `url` argument.

```py  theme={null}
def handle_open_website(state):
    state.open_url("https://writer.com")
```

The URL will be safely opened with `noopener` and `noreferrer` options.

<Warning>
  Popup blockers: Given that the URL is opened asynchronously, popup blockers will likely block the new window —unless the user has opted in.
</Warning>

## Changing the active page

The active page and route parameters can be changed using the methods `set_page` and `set_route_vars`. This is explained in more detail in [Page Routes](/framework/page-routes).


# Builder basics
Source: https://dev.writer.com/framework/builder-basics



Writer Framework Builder’s interface is an overlay on top of the running app, which allows you to edit your app while it’s running. This approach gives you an accurate representation of how the app will look and behave without the need to constantly preview it.

## Writer Framework Builder’s modes

Writer Framework Builder has two modes:

1. **UI mode:** This is the default mode, which provides an overlay of tools for building and editing the user interface. The app still runs in UI mode, allowing to you test its functionality while you’re building it. You can also edit the app’s code and view its log.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=8a94e3f7fd39ec70fae21dc2e1b03b90" alt="Writer Framework Builder in UI mode" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.ui-mode.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a122cbdd79fcf8e5de3214ab5939e96a 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=924c9d885b21f4e38f064143c1852312 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4b8f0fa7546bff5e2ce8dadcb10f0a42 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2f42816db826e23735cf3ecfe7fc7595 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6945b75b8b38301ed39541a8c5b54a24 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0a72a58bc3ab71c3bc1afc857f1479fe 2500w" />

2. **Preview mode:** This mode lets you preview the application, experiencing it almost as your end users would. The tool overlay is hidden, but you can still edit the app’s code and view its log in this mode.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-mode.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=74614f25146ef300768f159cd2c1bed8" alt="Writer Framework Builder in Preview mode" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.preview-mode.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-mode.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=75e90f0b03220df8d96febe0fc837e2f 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-mode.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=c18b51599220cea2f04d685c6dbecf1d 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-mode.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=dba895d8ffcd080a202b5c1cd8173de3 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-mode.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=b3985be85f6dface197f401dbcaa45c9 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-mode.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f2e2f0d942454bd91aef4231f30e37eb 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-mode.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=616d445e5211f973d9bf33af41d71fdd 2500w" />

You can switch between UI mode and Preview mode by using the **UI**/**Preview** selector near the upper left corner of the page.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-preview-selector.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=dde73bd2ff445c46b590423b99c6c476" alt="Writer Framework Builder’s UI/Preview selector" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.ui-preview-selector.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-preview-selector.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=5d494607847ea5ec3d07f30a4db14c09 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-preview-selector.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=dae89a1aff96e1e2fddd1d6395cc825b 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-preview-selector.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0919e34504816284f28a233a1abf3db7 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-preview-selector.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2012a3591605296999700305a81ad2f5 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-preview-selector.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=5d90d5e94b4a1fd9242b9e6e3e2aff32 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-preview-selector.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=e51ce5cb6e2d4d3c2c8a834ca02dd65a 2500w" />

## Building your app in UI mode

### The different areas of UI mode

In UI mode, Writer Framework Builder’s page is divided into these areas:

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode-with-labels.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=91038caeaa6ed955729dd980bf85bc73" alt="Writer Framework Builder in UI mode, with indivdual areas labeled" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.ui-mode-with-labels.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode-with-labels.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=00366a5c03ba9d2db1805264bc3ba48d 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode-with-labels.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4088bdbd8dee3c9698e0c53eb72a8992 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode-with-labels.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0bfd42762d3901069eb61eb084733b73 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode-with-labels.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=1c189dccab89452149c9c56b7c8bb5fc 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode-with-labels.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=5e86babda4b131b32a7d05c3280a99d1 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.ui-mode-with-labels.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ec70a5c8ea1a26237c4ac5e8536de415 2500w" />

1. **Canvas:** This is where you lay out components to build your app’s user interface. It displays the UI as your users will see it.
2. **Core toolkit:** A “palette” of UI components that can be added to your app’s user interface. To add a component to your app’s UI, drag it onto the Canvas or into the Component tree.
3. **Component tree:** This provides an alternative way to view your app’s user interface: as a hierarchical tree structure. It’s useful for ensuring that UI components are located in the right place or in the correct container object, and is handy for selecting UI components in complex layouts.
4. **Component settings:** This panel lets you view and edit the settings for the currently selected UI component. You can hide the Component settings panel if you need more screen space to work on the Canvas.
5. **Top bar:** Contains the “high level” editing controls: switching between UI and Preview mode, undoing and redoing the most recent change to the UI, and viewing the application’s state.
6. **Bottom bar:** Contains the “low level” editing controls, which toggle the Code and Log panels.

### Defining your app’s user interface

Writer Framework Builder provides a selection of over 50 UI components that you can use to build your app’s user interface:

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.components.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=5e4532b6ad203b6e794f83861715c232" alt="Visual catalog of all the components in the Core toolkit" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.components.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.components.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4eee4551e1cf263cebf62eeb76a276c9 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.components.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=e15a72a9b8d47e3114fe0f875abc43a1 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.components.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=8c2e7fa4118a81bdb5939cc9bc1c968d 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.components.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=d69b40e683c90a7ae98f6fc77eb5263b 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.components.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=8c4ef147d770ae94b7762c28c3024da4 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.components.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=12c2bf28dca177374f77be4fc4431074 2500w" />

You define your app’s user interface by dragging components from the Core toolkit and dropping them either onto the Canvas or into the Component tree (remember, the Canvas and Component tree provide different ways to look at your app’s user interface). If you simply drag and drop a UI component onto an empty spot on the Canvas, it will be placed at the “end,” below all other UI components in the user interface. To place a UI component at a specific location, drag them over the desired location or parent component until you see the insertion lines.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.drag-drop-components.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4b5ba0fe00764a2a716124378509aadc" alt="Writer Framework Builder with diagram showing how to drag and drop components from Core toolkit" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.drag-drop-components.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.drag-drop-components.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=700c56e747cd57b700eb9ebedaf0fafa 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.drag-drop-components.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=024ec60e0ab651fd54364a7b538bfca8 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.drag-drop-components.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=e6f24c4a64d579736bae29dce8161776 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.drag-drop-components.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=e7da83a6579f6cb7ae2ebcf1f885df84 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.drag-drop-components.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4ee11701dd5f847c57443a61a1295b6d 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.drag-drop-components.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=b0a931ab634277d3ba2acbe5ae7875e5 2500w" />

It can sometimes be difficult to find the component you’re looking for, so the Core toolkit has a search field. You can use it to find the narrow down the list of components or find a specific one.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-search.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=10078ffb156187bdaa6af8fefc0ca6af" alt="Close-up of Core toolkit with instructions for using its Search text field" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.component-search.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-search.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7c0a9bfdacb4812e3396ede7c72f35bc 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-search.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=85dbbf444064838a9f4ea7b52aa224f5 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-search.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f9cda247df4429913f6025f9e84fe7d5 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-search.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=d1ae6b33f9feb602c9ff575b74fcedef 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-search.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=028cbdaf8617f94da15b2c5cbdae38bf 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-search.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=67bcebcc10c298e900ba8bc17b4912c5 2500w" />

Some UI components, such as Section, can act as “parents,” which are UI components that can contain other UI components. Others, such as Text, cannot. Additionally, certain components have placement restrictions — for instance, a Column must be added to a Column Container, and a Sidebar can only be added to a Page.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.parent-components.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=89df0ad6e44d0de0e72b77290c7130bd" alt="Writer Framework builder, showing parent-child relationship between a Section and the Text Input and Button components it contains" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.parent-components.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.parent-components.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a0ed79f5a1a9c0d0f3f925d32fb1f822 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.parent-components.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7b46286499f3a682cd9f7579e0d34717 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.parent-components.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=c37e067eb7c179f14cd11c4ca357a095 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.parent-components.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4741e4cdb95786f46bb2dfd7e19f8bb4 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.parent-components.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7ed37871b32e56a1171d6111b89734df 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.parent-components.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0f2968abbae3ee1482bfb57b69cbb7c1 2500w" />

The Component tree provides a hierarchical view of your app’s user interface. It shows the top-down layout of UI components in your app, as well as the parent-child relationships between components, making it easier to understand your app’s structure and ensure that components are correctly nested.

You will find the Component tree useful when trying to reorganize the order of components in the UI, especially those located inside a parent UI component. For more flexibility and finer control, you can use the Component tree as a source or a destination for your drag and drop actions.

### Discovering components

The Builder is designed to allow easy discoverability of components. Rather than scouring specifications every time you need to use a component, you can rely on the visual editor to guide you.

1. **Short description:** You can hover on the component type to get a tooltip with a short description.
2. **Available properties and events:** Looking at *Settings* will allow you to see which of its properties are configurable.
3. **Built-in docs:** Components have short docs built into them. You can expand it by clicking the help icon in Settings.
4. **Event handler stub code:** Different events need to be handled differently. The built-in stub handlers, which can be found next to each event, can help you get started when writing event handlers.

### Selecting and editing components

To move or edit a component in your UI, you need to select it first. You can do this by clicking on the component either in the Canvas or in the Component tree. The selected component will be highlighted in both the Canvas and Component tree.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.select-components.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0adc6378dc0fe65bba609ffb3629a9fe" alt="Writer Framework Builder, with instructions to select a component by clicking on it either on the Canvas or in the Component tree" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.select-components.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.select-components.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=69f64acf5a353a50a058f536af212652 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.select-components.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=63c1c6140c69e480a8a9da808b49be74 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.select-components.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=3209a283557ae297f18e8c141e8d67e5 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.select-components.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=3de6579ec52dbb55ee98da20d943ce2b 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.select-components.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ab7852c16413aae893b12a72e2badc65 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.select-components.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=c022d73d0122d98d3210045360cb0714 2500w" />

Selecting a UI component will allow you to view and edit its settings in the Component settings panel on the right side of the page.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9e1be3f0482efb2ed2b04a1856696591" alt="Writer Framework Builder, with Component settings panel on display, and instructions to hide the panel" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.component-settings.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=b74b4a76ee88f3c930e090b27a0294be 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=d557d9d1cccb37a2cf28e6c52a1ae828 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9a29e054e82ef1bf659e80e2d9dbe1a0 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=54c245ebd8ad0bda71dca34c58d3561e 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=25157efb1f3ed379daa6ba23fe288d66 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=e0082161c74230c605ef7a8d3c1f3599 2500w" />

To hide the Component settings panel to get a better view of the Canvas, click on **»** in the button bar. To show the panel, click on **⚙** in the button bar.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings-show.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6b2dc8293ac3ac09f0d071892bf50e08" alt="Writer Framework Builder, with Component settings panel hidden, and instructions to show the panel" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.component-settings-show.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings-show.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=8d8a124aa2aab43d8254cd7ea9f0de29 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings-show.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=1a242608ae61309561a805ff69b52acb 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings-show.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0be44d449b10a90b351289d53eabf0f0 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings-show.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=38f78134e04db07a235a9d2af4e4c931 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings-show.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=99ed6afa55fd3d0cd3cae22d3ea8936f 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-settings-show.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f871c6b4bdcbea854b60a0a6e96c49d1 2500w" />

The settings in the Component settings panel are divided into the following sections:

<AccordionGroup>
  <Accordion title="Basic settings">
        <img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.basic-settings.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=d1b63c133e4c8356247559bb423b1c37" alt="Component settings panel, with basic settings highlighted" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.basic-settings.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.basic-settings.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=15afa761b7d167f1cc56e30502e55ce3 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.basic-settings.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6f8984c0ebed6394ed3ef8e6f4ee07ab 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.basic-settings.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=bd8d36d379991212879a1e01590c21d4 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.basic-settings.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ab2e9e4ba51ccb549536fe0467b45d2b 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.basic-settings.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=c42f85dfdb44df40232c243ae7912a04 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.basic-settings.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=1811e56ac9a7774a915dfa5284e86bbe 2500w" />

    These settings are divided into two categores:

    1. **General**, which specifies the component’s content
    2. **Style**, which defines the component’s appearance.

    Values for these settings can include:

    1. Literals, e.g. `monkey`
    2. References to application state using the template syntax `@{}`, e.g. `@{my_favourite_animal}`.
    3. A combination of both, e.g. `My favourite animal is @{my_favourite_animal}`.
    4. Nested states can be accessed with `.` (dot), e.g. `@{building.height}`.
    5. Nested elements can be dynamically accessed with `[]`, e.g. `@{building[dynamic_prop]}` will be equivalent to `@{building.height}` when `dynamic_prop` equals `height`.

    The values for these settings can be of different types, such as *Text*, *Color* and *Number*. The values are stored as text and are cast to the correct type when evaluated.
  </Accordion>

  <Accordion title="Binding">
        <img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.binding.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f629f67f8ac7026aa8de68a24b97d8d2" alt="Component settings panel, with Binding settings highlighted" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.binding.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.binding.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9901dd7cf118fd8d83f064c60d06dfd3 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.binding.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=c0137d90b3a4539f89b587d528e9c7ad 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.binding.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f45d7ad5281bd231e22d80dc5c243278 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.binding.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=d7099859773f2ead09bd3e5c7f7ce4e5 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.binding.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=c24348a2f08d33e46c1bcd9dda0bb4d9 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.binding.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9dba2a6b80b879eca85ceb327fafbc1f 2500w" />

    Only input components have a **Binding** section, whose settings are used to bind the component to a variable in the application’s state. The binding is two-way; if the user changes the component’s value, the state variable will change to match, and any change the code makes to the bound state variable will also change the component’s value.

    For example, a *Slider Input* component can be bound to a state variable `my_var`. If the value of the slider changes, so does the value of `my_var`. Similarly, if the value of `my_var` changes, the slider is moved automatically to reflect the change.

    To bind an input component, specify the state element. For example, `my_var` or `building.height`. Note that this field should not contain the template syntax, e.g. `my_var` and not `@{my_var}`.
  </Accordion>

  <Accordion title="Events">
        <img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.events.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=070332bffa0c38b0bcce28f43d943364" alt="Component settings panel, with Events settings highlighted" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.events.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.events.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=dc4caa1306f2ee5de264337d2226447a 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.events.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=43e402e9c9f37cd130fac59b407e279b 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.events.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=c10d1b2b37a04488f5112952075caad5 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.events.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a207ea86726b94da41e1f184b7c400c2 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.events.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=02e3f495731b2acd5e87067978a93dc4 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.events.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a89f5de7f3130df0620f0a3f7b41c086 2500w" />

    The **Events** section lists all the events generated by the selected component, with the option of setting event handlers for them. For example, one of the events that the Text Input component generates is the `wf-change` event, which occurs whenever the user changes the contents of the component.

    For more about event handlers, consult the [*Event handlers*](/framework/event-handlers) section of the Writer Framework documentation.
  </Accordion>

  <Accordion title="Visibility">
        <img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.visibility.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9bb148a61970832ad270176472288b7f" alt="Component settings panel, with Visibility settings highlighted" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.visibility.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.visibility.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=1febcda6054fd3fd691a56c9d83fa1dd 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.visibility.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ca7905d1c2cff8b5254bd5c5894214c7 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.visibility.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=fd374b0f3beff762fd58649bc9842c57 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.visibility.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2c9cf885be4b31ec703cef1a8feba351 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.visibility.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f86e3be31f2dd01d824bc6fb4aaf6a4b 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.visibility.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=faab4806e46ae0d40e042b58e607bc86 2500w" />

    The **Visibility** settings control Whether the component should be displayed. There are three visibility options:

    1. **Yes**: The component is displayed.
    2. **No**: The component is *not* displayed. Note that hidden components are still part of the HTML code but aren't shown.
    3. **Custom**: The component’s visibility depends on the value of a given state or context element. For example, if set to `my_var`, visibility will depend on the value of the `my_var` state element. Note that this field, similarly to Binding, should only contain the state element, e.g. `my_var` and not `@{my_var}`.
  </Accordion>
</AccordionGroup>

### Component shortcuts

The Component shortcuts bar contains a set of options to perform various operations that are often performed on components.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=787dc69289144b36d75082d070cb92c9" alt="Component settings panel, with Component shortcuts bar highlighted" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.component-shortcuts.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6a6ea33bd8ab8925ef4f05182ceb38da 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0c23087d02bb0f73de441b03394abb5a 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4ee7f99c09ff13504e70f675af0d3bb9 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a1fec8e3894de4c3f4a7ee2c97005f11 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=18c13f28ddf2ddb53b47ff5ddba3c3a8 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7f8130d1343cd2b54c1a333cf9d4e1cb 2500w" />

Options will be grayed out when they're not applicable to the relevant component. Most shortcuts can also be activated using the keyboard; hover the cursor over a shortcut to see its keyboard shortcut.

The shortcuts are:

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts-guide.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=60d9ef66da680575e6aff41dc2a61afc" alt="The Component shortcuts bar, with labels" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/builder-basics.component-shortcuts-guide.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts-guide.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=be48bedc80c4abc32f88745b48949fd2 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts-guide.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2aa28ee4fa00bc2b9d8944f826b6c664 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts-guide.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4ba82ce7fa87e784d88b63742b34f0f0 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts-guide.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6054bcb8648e09fe63539f16c79ed630 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts-guide.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=dc0687983f86cd50ea91bc2319948088 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.component-shortcuts-guide.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=22498724110d73186434da7f7c068fdc 2500w" />

* **Add**: Adds a child of a specified type to the selected component.
* **Move up**: Decrements the position index of the selected component, used to sort children within the parent container.
* **Move down**: Increments the position index of the selected component.
* **Cut**: Cuts the selected component and places it in the clipboard.
* **Copy**: Copies the selected component to the clipboard.
* **Paste**: Pastes the content of the internal clipboard using the selected component as a parent.
* **Go to parent**: Selects the parent of the selected component.
* **Delete**: Deletes the selected component.

### The Code editor and the Log

Writer Framework Builder provides a built-in Code editor for the `main.py` file, which defines the behavior of the app. You can toggle the Code panel by clicking the **Code** control near the lower left corner of the page:

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=469014b3b60a8ca53145e42f37ef1c88" alt="Writer Framework Builder, with the Code editor displayed" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.code.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9ab718d2ae4021b0b3382e76ed7ea604 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2255475cd9494eb4673633c5f073d437 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=44126e2b8fa82cf451e46aa1bcffdce0 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=88af3d71cbd9982b87cdae57f4fb0cba 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9ea6a68917993dea6f8e0e4fb9122364 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=dae07eba876aef4fb808d05fdc9c04b6 2500w" />

Any changes made to the code do not take effect until you click the **Save and run** button, located at the upper right corner of the code editor.

The log is a useful debugging tool that displays any messages sent to standard output via the `print()` function, as well as any error messages. You can toggle the Log panel by clicking the **Log** control near the lower right corner of the page:

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.log.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0e276770d1f08c2b6010f6ab30f2399c" alt="Writer Framework Builder, with the Log editor displayed" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.log.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.log.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=bf260d3a9ca3b4bac586f0a8c77b3fdd 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.log.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f3ca3594e4b598830b484f5b757fe7ae 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.log.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=46dcc77e52dbc7830a1827ec10c4e222 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.log.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=21fd1f27d6e494f639b36065f3b66cc3 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.log.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=8f8952172d18ce06fb76c19a0ba6bc86 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.log.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=1d1c827e8fca393c2a358d87c0c080b8 2500w" />

Note that both the Code editor and Log panes can be displayed at the same time:

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code-and-log.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=09b2359d8154446377d59b1daca3704d" alt="Writer Framework Builder, with the Code editor and Log displayed at the same time" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.code-and-log.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code-and-log.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9143033ac688570b392e58dfbe9e08f5 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code-and-log.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=48b6797fded21db21bd95902a1e5bf48 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code-and-log.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=85b73dc8a86f594786510c6360de8a0b 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code-and-log.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=c4f9cccb94a40218e3e43beca3941000 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code-and-log.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=27d23b1b8c9de8ec63bb92305703a193 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.code-and-log.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=10f2421d5ad1652b68355c9509f269de 2500w" />

## Testing your app in Preview mode

In Preview mode, the overlays that let you build the user interface — the Core toolkit, Component tree, and Component settings — are invisible and unavailable. You see the app *almost* as your users would see it; the Top bar and Bottom bar, which your users would not see, are still available to you in Preview mode.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0e5e0750b740b6a7208aa13058d5aaba" alt="Writer Framework Builder in preview mode" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.preview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4573d6bae98d603a750e604ce75a7148 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6e8c4b7536482434c41fae78501119f2 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ec9c75a2a73b64bb6b5203cf68273c2e 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=b74fb925461d8c948b279d868e75d314 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2618a2e5fc32d8ff74d5dd4d1c3f858e 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6cbfa9ec48f88213c57f44a7bf1a3a02 2500w" />

You can still use the Code editor and Log in Preview mode:

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-code-and-log.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=30b357f89696828a0c990aa476d8cb7d" alt="Writer Framework Builder in Preview mode, with the Code editor and Log displayed at the same time" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/builder-basics.preview-code-and-log.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-code-and-log.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ffda261078581d5e2349aa13a3504cb3 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-code-and-log.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4ef0236d556e891679c1b61a597a12a3 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-code-and-log.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=932aa3a3d87410c76a1d6ffdbfb2c738 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-code-and-log.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=025e2e48a39e1759527c82d743e79b52 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-code-and-log.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7c06bb292ad08d902eb2c6a5aaf9d33e 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/builder-basics.preview-code-and-log.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=05bc96aa6ab07b8fd223173b71399226 2500w" />


# Chat assistant
Source: https://dev.writer.com/framework/chat-assistant



In this tutorial, you'll use the Writer Framework to create a simple yet powerful chat assistant that can engage in conversations on various topics, provide answers to your questions, and maybe even help you when you're experiencing writer's block!

The process will take only minutes using a drag-and-drop visual editor to build the user interface and Python for the back-end code.

Here's what the finished project will look like:

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0c3c814df95473821d822abc1c883f92" alt="Finished chat assistant project" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=fa7bca35d56c24e51601aff02f8713b7 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=de595a50ea49b2c4e93c9e8432ae001a 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=bac921d51aaf59d4b98ea0b3e18059b4 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0fd285e58aa58a4a8b128de62e5f7f10 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=604ef672be0e1d080707bca27436eab7 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=1152510dac531569252a4b5432e1ed1b 2500w" />

## Prerequisites

Before starting, ensure you have:

* **A Writer account:** You don't need an account to use Writer Framework, but you'll need one to use the AI module. [Sign up for a free account here](https://app.writer.com/register).
* **Python 3.9.2 or later**: Use the installer from [python.org](https://www.python.org/downloads/).
* **pip:** This command-line application comes with Python and is used for installing Python packages, including those from Writer.
* **A basic understanding of Python:** You should be familiar with the basics of the language.
* **Your favorite code editor (optional):** There's a code editor built into Writer for editing back-end code, but you can also use Visual Studio Code, Notepad++, Vim, Emacs, or any text editor made for programming if you prefer.

## Setting up your project

### Create a Writer app and get its API key

First, you'll need to create a new app within Writer.

<Steps>
  <Step title="Create the app in Writer">
    Log into Writer. From the Home screen, click on the **Build an app** button.

        <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=580c843c75a49b10e62d893751849a7e" alt="Writer home screen" data-og-width="3220" width="3220" data-og-height="1900" height="1900" data-path="framework/images/tutorial/chat/chat_assistant_2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=14da42dfdd22f5a3c7c088ba7e004827 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a162e3880d6802253d60c81a642f5cdb 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=67ea4b3646ba0d811cbd14ad5e1c793d 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=d28d6e6897cebb901811cc182187aa79 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ffaead4db6e120663c824ee5eeb385d3 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7d3c7cef527973e07c6fbf1130998ea2 2500w" />

    The **Start building** menu will appear, presenting options for the types of apps you can create.

    Select **Framework**, located under **Developer tools**. This will create a brand new app based on Writer Framework.

        <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_3.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=43c43a9a53829617c068bf5d37e9c36d" alt="&#x22;Start building&#x22; menu" data-og-width="3220" width="3220" data-og-height="1900" height="1900" data-path="framework/images/tutorial/chat/chat_assistant_3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_3.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b13af18582ffd2532fd5154b49e52eca 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_3.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=781336993d597dafe61f0e377c463d98 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_3.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=611adc83c03d3f3d40066c61091d5650 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_3.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=280bb75fe6f9fea8859ed4938e57be5b 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_3.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0d9057a9cac49933b974a5c412620c05 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_3.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=119efe8d7d02a00b2329db578f9740eb 2500w" />
  </Step>

  <Step title="Copy your app's API key">
    On the next screen, titled **How to deploy an application**, you can get the API key for the app by clicking on the **Reveal key** button, located under the text **Authenticate with an API key**. Your complete API key will be displayed, and a "copy" button will appear. Click this button to copy the key; you'll use it in the next step.

        <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2a.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=427ce6f509ecfa7fdbc8f44c8b0f7404" alt="&#x22;How to deploy an application&#x22; page" data-og-width="3203" width="3203" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2a.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2a.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=047939ffccef0d1a710dd393fe2f68e0 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2a.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=5df4d481e871669d8f64f98b7ca8a97b 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2a.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=010823e4cd6909f83012d667aea0470c 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2a.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=32896a96beebe05859f1c7932519e8cb 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2a.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=792d2c91266c5f53137e4ecda4ca1727 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2a.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=464eed68c1fdbbdf42c5a69e38e59602 2500w" />
  </Step>
</Steps>

### Set up your computer and create the app's project

The next step is to set up the Writer Framework environment on your computer. You'll do this by creating a directory for the project, installing dependencies, and creating the project for the application using a template.

<Steps>
  <Step title="Open your terminal application">
    Open your terminal application. On macOS and Linux, this application goes by the name *Terminal*; on Windows, you can use either *Windows PowerShell* (which is preferred) or *Command Prompt*.
  </Step>

  <Step title="Install the dependencies">
    <Note>If you already have the `writer` and `python-dotenv` packages installed on your computer, you can skip this step.</Note>

    Install the `writer` and `python-dotenv` packages by entering the following commands in your terminal application:

    ```
    pip install writer python-dotenv
    ```

    This command tells `pip`, the Python package installer, to install two packages:

    * `writer`, which provides some command-line commands and enables Python code to interact with Writer and the Writer Framework.
    * `python-dotenv`, which makes it easy to manage environment variables by loading them from a `.env` file. This one is optional for this exercise, but you might find it useful when working on larger projects.
  </Step>

  <Step title="Set the API key environment variable">
    To pass your API key to the Writer Framework, you need to set an environment variable called `WRITER_API_KEY`.

    Select your operating system and terminal application below, then copy and paste the command into your terminal application, replacing `[your_api_key]` with the API key you copied earlier:

    <CodeGroup>
      ```sh macOS/Linux (Terminal) theme={null}
      export WRITER_API_KEY=[your_api_key]
      ```

      ```sh On Windows (Windows PowerShell) theme={null}
      $env:WRITER_API_KEY=[your_api_key]
      ```

      ```sh On Windows (Command Prompt) theme={null}
      set WRITER_API_KEY=[your_api_key]
      ```
    </CodeGroup>

    The `WRITER_API_KEY` environment variable will remain defined as long your terminal session is open (that is, until you close your terminal application’s window).
  </Step>

  <Step title="Create the project">
    Create the project by entering this command into your terminal application:

    ```
    writer create chat-assistant --template=ai-starter
    ```

    This command sets up a new project called `chat-assistant` using a starter template called `ai-starter` so that you're not starting "from scratch."
  </Step>
</Steps>

## Build the UI

Now that you've created the project, it's time to define the UI. The Writer Framework's drag-and-drop capabilities make it easy — even if you haven't done much UI work before!

The project editor is a web application that runs on your computer and enables you to define and edit your app's user interface. Launch it by typing the following into your terminal application:

```
writer edit chat-assistant
```

You'll see a URL. Control-click it (command-click on macOS) to open it, or copy the URL and paste it into the address bar of a browser window.

The browser window will contain the project editor, which will look like this:

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2b.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=75f2df9ca6f896d9461ed2604b58d398" alt="Project editor" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2b.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2b.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b77d621f498144591ed98523c2c0fdfe 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2b.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0d5153d85cfb377525842350316c92fa 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2b.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=4a255114f8905ce23c6b0d0d064972fa 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2b.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a776c47f01c836d8c4fd1c17dd71b2fb 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2b.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=08ac862758105c5748666a8b5efe00d9 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2b.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=e04cb051c6e2bbc9b1c3d97d4bf676ee 2500w" />

You'll see the following:

* The **canvas** is in the center. It displays the app's user interface.
* The column on the left contains:
  * The **Core toolkit**, which contains all the UI components. You define the user interface by dragging components from the Toolkit and placing them on the canvas.
  * The **Component tree**, which shows the arrangement of the UI components on the canvas. It's also useful for selecting items on the canvas, especially when it has a lot of UI components.

It's time to build the UI!

<Steps>
  <Step title="Examine the header">
    Select the **Header** component by clicking it — it's the component at the top, containing the title **AI STARTER** and a gray area labeled **Empty Header**.

    When you click it, you'll see the **properties** panel appear on the right side of the page. This lets you view and edit the properties of the selected component.

        <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2c.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=30ee76df7d06491491699e17d0c7e64b" alt="The selected header and its properties panel" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2c.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2c.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0576f4bf2e5a1224ad01d2b8c3faf698 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2c.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=895bb16475579114cee9e3f3a8500be3 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2c.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=1ef9edce99ddfc64296bf0022c070a90 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2c.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=3d40579ccefad716025870fc0f15f909 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2c.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=fc1572d84faaa5e022c0cf612db835ed 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2c.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=60ed2e9a7934bd08a04e6e34bb6939ec 2500w" />

    The first property you'll see in the panel is the **Text** property, which defines the text that appears as the header's title. It should contain the value `@{my_app.title}`. The `@{` and `}` indicate that `my_app.title` is a variable and that its contents should be the text displayed instead of the literal text "my\_app.title". You'll set the value of this variable soon.
  </Step>

  <Step title="Clear the Section's default title">
    Select the **Section** component by clicking it — it's just below the **Header** component and contains the title **Section Title** and a gray area labeled **Empty Section**.

    In the **properties** panel, clear out the value of the **Title** property. This will remove the **Section**'s default title.

        <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2d.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=188d524f61e214d47483571614ed6fd9" alt="The selected section and its properties panel" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2d.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2d.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0a6a31b1429c6bfd0b44f05524b934b9 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2d.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=fa2ef1e1fd4f4c10a3e3f348e6afc3e7 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2d.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7bf3e3f25d4828e0d5d0d135129031cf 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2d.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=4d056521caeea8510ffe192bcd428110 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2d.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=870a4aed11c18832e5ad6cbed17b0e66 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2d.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=8870fc19667eb73443b9a9c52e499c8d 2500w" />
  </Step>

  <Step title="Add a Text component to the Section">
    Drag a **Text** component from the **Core toolkit** panel on the left (it's under **Content**, and you may need to scroll down a little to find it) and into the *Section*. Sections can act as containers for other components.

    <Note>You can search for a specific component by using the search bar at the top of the **Core toolkit** panel.</Note>

    Select the **Text** component. In the **properties** panel, set the **Text** property to provide instructions or context for your chat assistant. Here's an example: `Welcome to the Chat Assistant. Ask me anything!`

        <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2e.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=fc1c5e1409d44ea510ea6ef0af471d7a" alt="The text component and its properties panel" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2e.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2e.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=bb5239380e6d4fb29cb8f693442523f2 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2e.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0170baa8c1da2508663fc62750b13a23 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2e.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2a26f3935c76448f148715f4bece8783 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2e.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=17f768353cf3b3de2a26e3261eccee98 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2e.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=054ddc499076c6913cd41bf0705994de 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2e.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=94e710e45bd90a36044380cd143d0df2 2500w" />
  </Step>

  <Step title="Add a Chatbot component to the Section">
    The heart of this app is the **Chatbot** component, a pre-built component that displays the conversation between the LLM and the user and provides a text field where the user can enter prompts.

    Drag a **Chatbot** component from the **Core toolkit** panel (it's under **Content**) into the *Section*, just below the Text box.

        <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2f.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7bd7ea78e5115c2057646121dee641eb" alt="The chatbot component" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2f.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2f.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=6ae6ed95e83a07525ccfe9da191d935c 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2f.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=3ded210ea2a9a456ac662a71775dcdc6 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2f.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b497a7bad8c00a432900231036b1d594 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2f.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=49783436f65acccccdcf4a22f5bc5a4e 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2f.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=e2ccb824adfe48fe25faad8d9a769529 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2f.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ce7760e4a68e38d89f08acacb45549ae 2500w" />
  </Step>
</Steps>

## Add the back-end code

With the UI laid out, it's time to work on the logic behind it.

The logic behind the user interface is defined in a file named `main.py`, which is in your project's directory. This file was automatically generated; you'll update the code in it to define the behavior of your app.

The simplest way to edit `main.py` is within the project editor. Click on the "toggle code" button (beside the word **Code**) near the lower left corner of the project editor page.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2g.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=16baa189672daa68f3d956dc3053a348" alt="Project editor with arrow pointing to toggle code button" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2g.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2g.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=8a9ea12f46e5d4b478c11b27a4d2f77c 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2g.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=c40facf483b26c9062bc181cdcae6d02 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2g.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=09ecf7e655989a91cf5255ad7489faf3 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2g.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7173f0edfca6bc95635c17ea5ea986e7 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2g.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=6b4615255f37ab071f055ef62aaaf74f 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2g.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=4d15816852ab9880ff9353a2d2bcb336 2500w" />

A pane with the name **Code** will appear at the bottom half of the screen, displaying an editor for the the contents of `main.py`.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2h.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=e82dd26da8afd23ea8f48ee8f949f105" alt="Project editor with the code editor displayed" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2h.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2h.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b708c023eb3cd0db9b5c5e70395a0f0d 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2h.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2b1b97ff4a58f4e9805b4a6cc335eb59 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2h.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=6af325b8cff48665f1d5f745e33df2c1 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2h.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=3a36b31d085e49c94fab9d947986151a 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2h.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ac9656038560f29817850d8fc0c46b4b 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2h.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=89f33d9a27a473fab4b2a4ee30811a2c 2500w" />

<Note>If you'd rather use a code editor instead of coding in the browser, use it to open the `main.py` file in your project's directory.</Note>

Now follow these steps:

<Steps>
  <Step title="Import libraries and load the Writer Framework API key">
    You should see the following at the start of the file:

    ```python  theme={null}
    import writer as wf
    import writer.ai
    ```

    Replace that code with the following:

    ```python  theme={null}
    import os
    import writer as wf
    import writer.ai

    # Set the API key
    wf.api_key = os.getenv("WRITER_API_KEY")
    ```

    This code imports the libraries that the application will need and then reads your Writer Framework API key in the `WRITER_API_KEY` environment variable.
  </Step>

  <Step title="Create a handler to respond to the user's input">
    The application needs a function to handle incoming chat messages. Find these comments in the code...

    ```python  theme={null}
    # Welcome to Writer Framework! 
    # This template is a starting point for your AI apps.
    # More documentation is available at https://dev.writer.com/framework
    ```

    ...and replace them with the following function:

    ```python  theme={null}
    def generate_completion(state, payload):
      print(f"Here's what the user entered: {payload['content']}")
      state["conversation"] += payload
      print(f"Conversation: {state['conversation'].messages}")
      try:
          for index, chunk in enumerate(state["conversation"].stream_complete()):
              print(f"Chunk {index}: {chunk}")
              if not chunk.get("content"):
                  chunk["content"] = ""
              state["conversation"] += chunk
              
          print(f"state['conversation']:\n{state['conversation'].messages}")
      except Exception as e:
          print(f"Error during stream_complete: {e}")
    ```

    The `generate_completion()` function will be called when the user enters a prompt, which is contained in the `payload` object. The `payload` object is added to the `conversation` object contained in the application's `state`, which adds the user's prompt to the record of the conversation between the user and the LLM.

    After adding the user's prompt to the conversational record, `generate_completion()` calls the `conversation` object's `stream_complete()` method, which generates an LLM completion based on the conversation so far. As its name implies, `stream_complete()` returns the completion as a stream of text chunks, which are captured and added to the `conversation` object.

    <Note>The `conversation` object in the code above is an instance of Writer’s `Conversation` class. You can find out more about this class on our [*Writer AI module*](https://dev.writer.com/framework/ai-module) page.</Note>

    Note that `generate_completion()` completion uses a lot of `print()` functions for debugging purposes, and you can use them to get a better idea of what's happening in the function. You'll see their output in both your terminal application and in the project editor's 'log' pane (which will be covered shortly) as you use the chat assistant. This output will include:

    * The prompt the user entered
    * The chunks of data that make up the LLM's response as they are generated
    * The record of the conversation between the user and the LLM.

    The `print()` functions don't affect the operation of the chat assistant in any way, and you can remove them if you wish.
  </Step>

  <Step title="Initialize the application">
    The final step is to set the application's initial state. Find this code, which should be just after the `generate_completion()` function...

    ```python  theme={null}
    # Initialise the state
    wf.init_state({
        "my_app": {
            "title": "AI STARTER"
        },
    })
    ```

    ...and replace it with this:

    ```python  theme={null}
    # Initialize the state
    wf.init_state({
        "conversation": writer.ai.Conversation(),
        "my_app": {
            "title": "CHAT ASSISTANT"
        },
    })
    ```

    The Writer Framework's `init_state()` method sets the initial value of `state`, a dictionary containing values that define the state of the application. The key-value pairs in `state` are how you store values used by your app and how you pass data between the back-end code and the UI.

    The code above sets the initial value of `state` so that it has two key-value pairs:

    * `conversation`: An object that keeps a record of the conversation that the user is having with the LLM. You'll bind its value to the **Chatbot** component soon.
    * `my_app`: A dictionary containing values that define the application's appearance. This dictionary has a single key-value pair, `title`, which defines the text that appears as the application's title in the **Header**.

    <Note>For more details about the `state` variable, see our [*Application state*](https://dev.writer.com/framework/application-state#application-state) page.</Note>
  </Step>

  <Step title="Save the updated code and hide the code editor">
    That’s all the code. If you edited the code in the browser, save it by clicking the “save” button near the top right corner of the code editor.

        <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2i.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0a10aed680c79ebfcb54b5d679d16d84" alt="Project editor and code editor, with arrow pointing to save button" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2i.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2i.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f10e18a6fad936845d065e48bf840532 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2i.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=49e455e8092baeb7ad37b0be0fd0706b 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2i.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7e4f1af58e861096beb392925a0b61da 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2i.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=eb5e2c6c90597f7468d571ad94566389 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2i.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=3bb55201c963d3c01f9dbed767313f39 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2i.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=1faf72c274e4a6d5566afe26abfc949b 2500w" />

    Click the "toggle code" button to hide the code editor.
  </Step>
</Steps>

## Bind the UI to the back-end code

You've built the UI and written the code behind it. Let's connect the two! Go back to the browser window with the project editor and do the following:

<Steps>
  <Step title="Observe that the heading at the top of the app is now 'CHATBOT ASSISTANT'">
    Earlier, you saw that the **Header** component's **Text** property was set to `@{my_app.title}`, a value in the app's `state` variable. You changed this value when you update the call to the Writer Framework's `init_state()` method.
  </Step>

  <Step title="Bind the Chatbot component to the 'state' variable's 'conversation' key">
    Recall that the `conversation` object contained within the `state` variable contains the record of the conversation that the user is having with the LLM. Binding the **Chatbot** component to this object allows it to display the conversation to the user.

    Select the **Chatbot** component. In the **properties** panel, find the **Conversation** property and set its value to `@{conversation}`.

        <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2j.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=03d1547aad9b8898fc274a285434bb26" alt="Updating the Chatbot's conversation property" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2j.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2j.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2e17c8dc02d7b894493fc3a706bb5757 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2j.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0994af3d8451405925c72db97e2747c1 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2j.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=cbb9a2dd8094a16f740bfc99ff95d71f 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2j.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=fa84cb3e80c4f29f65b90def4cfb9c19 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2j.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b886ea51b9fc2e678b105ddc2385fe79 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2j.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=80b8003366d8ccbd55463a68d0cecefa 2500w" />

    The value `@{conversation}` specifies that the **Chatbot** component should get its information from the value corresponding to the `conversation` key in the application's `state` variable.
  </Step>

  <Step title="Specify the Chatbot component's event handler">
    You need to specify that the **Chatbot** component should call the `generate_completion()` function when the user enters a prompt.

    Do this by scrolling down the **properties** panel to the **Events** section until you see a property called **`wf_chatbot_message`**. Select **`generate_completion`** from its menu.

        <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2k.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=5a9ddfbaa789a46bf3dd26c889038588" alt="Updating the Chatbot's wf_chatbot_message property" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2k.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2k.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=8221f0cadc49673cbe559622362b15b9 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2k.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=90a2ed74e8cb9951bc553488a7d1b527 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2k.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a0f1e4e70dc8999abbe81ad4483efa34 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2k.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b55ecb5795e0773ffd004908cc69b72b 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2k.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=dd26464d92711581a6967a954f2b2580 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2k.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=c93b80f9980ab0663aab4f1262eb42ad 2500w" />
  </Step>
</Steps>

## Test the application

You've completed all the steps to make a working chat assistant, and you can try using it right now, even while editing the user interface!

Try entering some prompts into the text entry at the bottom of the **Chatbot** component. The LLM should respond accordingly:

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2l.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=3fde15b8d95e47d25d9200b33becdb91" alt="The chat assistant, with the project editor in &#x22;UI&#x22; mode" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2l.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2l.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=c93159237969855506c096a1bb349e10 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2l.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b8d58177872af89fa8f10a49461c5949 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2l.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7fa2406ae9d1af581825b6c6f0665372 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2l.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=e73b6e7de0dcd6575ea8b61d51a35833 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2l.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ab030b0090a21c2cb96104b781794275 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2l.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=812879050adb0606eda9e88e027dd337 2500w" />

To get a better sense of what the experience will be like for the user, switch to the preview by changing the edit mode (located near the upper left corner of the page) from *UI* mode to *Preview* mode by selecting the **Preview** option:

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2m.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7634299b9d42ca51e53b36aa8ff6a172" alt="The project editor with an arrow pointing to the Preview button" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2m.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2m.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=1cad128f9a48d4d8b78f1188a75cf68d 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2m.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=44593deded18c61695783a9e5f219e30 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2m.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=eeae0e06dce428d535a46f246286b6f1 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2m.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ff719f92a98d884bee628287c3bd5988 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2m.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=6078067c552b25055f2a04b4b903cb94 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2m.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=8dcca27edc7b79b6e0c9056b309e6309 2500w" />

Here’s what the app looks like in *Preview* mode:

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2n.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=695a087df7fdfec75e0c3c6a2d56d77a" alt="The chat assistant, with the project editor in &#x22;Preview&#x22; mode" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2n.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2n.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=468bd8357245c4da4557b2da6f9f564e 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2n.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=78cfeba2f270b450a06b71347de1aa68 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2n.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=bf7acefa8403db0beb2a1eb6bed04d1c 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2n.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=4183530e5d4d3c2e7cc569c659b9a4ef 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2n.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=84d3fc29e1932be3d7dda3a1ea8483fb 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2n.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=8770674992e24df9418e38547351ed59 2500w" />

You can see the output of any `print()` functions and error messages by clicking on the **Log** button located near the upper right corner of the page:

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2o.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=abccbdbea8cff7ecc7e28b71cc2f11c8" alt="The chat assistant with an arrow pointing to the Log button" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2o.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2o.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=feb9a0e40e13607352f9ec3ddc87dfe6 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2o.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a43936f8fb0c17e64bfcef0a9beff2de 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2o.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f1856c39caba131ecbb800cfb86b6fb7 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2o.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=050738a03ac4604c7d9025f837423354 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2o.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=e14c06910dc7f76d10b5763c31a2c265 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2o.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ef73b05b3d33ae01321850192ecb9623 2500w" />

Here’s what the app looks like when displaying the log:

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2p.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7aca8100f0079306e2a7ec9e52bff79c" alt="The working chat assistant, with the log pane displayed" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_2p.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2p.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=5c4b2f270b0b9c02fcec5a3a029caeac 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2p.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7b32270e85785a15c7ab963ff9b91074 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2p.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ac58ab5b6d26cfff786ac1bc49fe824b 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2p.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=aadda9390cb65db8e5a1d8e401caed45 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2p.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7133138e8395379d2663a7f60dac040e 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_2p.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=5d4abf8af38cdff5225a6d04335a88dd 2500w" />

It's very helpful to be able to test the application while editing it. As you continue to work with Writer Framework, you'll find yourself alternating between making changes to your application and testing those changes without having to leave the project editor.

## Run the application locally

Once you've tested the application, it's time to run it locally.

Switch back to your terminal application. Stop the project editor with ctrl-c, then run the application by entering the following command:

```
writer run chat-assistant
```

Note that the command starts with `writer run` as opposed to `writer edit`. This launches the application as your users will see it, without any of the editing tools. Even though you can preview your applications in the project editor, it's still a good idea to test it by running it on your computer, outside the project editor, before deploying it.

You'll be able to access the application with your browser at the URL that appears on the command line. It should look like this:

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0c3c814df95473821d822abc1c883f92" alt="Finished chat assistant project" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/chat/chat_assistant_1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=fa7bca35d56c24e51601aff02f8713b7 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=de595a50ea49b2c4e93c9e8432ae001a 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=bac921d51aaf59d4b98ea0b3e18059b4 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0fd285e58aa58a4a8b128de62e5f7f10 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=604ef672be0e1d080707bca27436eab7 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/chat/chat_assistant_1.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=1152510dac531569252a4b5432e1ed1b 2500w" />

<Note>The Writer editor, which you launched with `writer edit chat-assistant`, and your application, which you launched with `writer run chat-assistant`, run  on the same URL, but on different *ports* (specified by the number after the `:` character at the end of the URL).</Note>

## Conclusion

That's it — you've built a functional chat assistant using the Writer Framework!

Feel free to modify this project! The Writer platform is flexible enough for you to customize, extend, and evolve your application into something completely different! To find out what else you can do, check out the documentation for [Writer Framework](https://dev.writer.com/framework/introduction) and the [Writer API](https://dev.writer.com/introduction).


# Deploy to Writer Cloud
Source: https://dev.writer.com/framework/cloud-deploy



## Basic usage

The `writer cloud` command group includes the following commands:

* `deploy`
* `undeploy`
* `logs`

## Common options

These options are common across multiple commands:

* `--api-key`: The Writer API key used for authentication. If not provided, you will be prompted to enter it.
* `--verbose, -v`: Enable verbose output.

## Commands

<AccordionGroup>
  <Accordion title="writer cloud deploy">
    Deploys an app from the specified path to the Writer cloud.

    **Usage:**

    ```
    writer cloud deploy [OPTIONS] PATH
    ```

    **Arguments:**

    * `PATH`: The path to the folder containing the app to deploy.

    **Options:**

    * `--api-key`: Writer API key for authentication. If not provided, you will be prompted to enter it.
    * `--env, -e`: Environment variables to set in the deployed app. Use the format `VAR=value`. Multiple environment variables can be specified by repeating the `--env` option.
    * `--verbose, -v`: Enable verbose output.

    **Example:**

    ```
    writer cloud deploy hello --env VAR1=value1 --env VAR2=value2
    ```

    **Description:**

    * Deploys the app located in the `PATH` folder.
    * Creates a deployment package, ignoring `.git` directories, `Dockerfile`s and all files specified in `.gitignore` file.
    * Uploads the package to the deployment server.
    * The deployed app will have access to specified environment variables.
    * By default, the `WRITER_API_KEY` environment variable will be added to enable AI features.

    **Output Example**

    ```
    Creating deployment package from path: /path/to/your/app
    [WARNING] Dockerfile found in project root. This will be ignored in the deployment package.
    Packing file: pyproject.toml
    Packing file: README.md
    ...
    Uploading package to deployment server
    Package uploaded. Building...
    ...
    Deployment successful
    URL: https://your_app_url
    ```
  </Accordion>

  <Accordion title="writer cloud undeploy">
    Stops the deployed app and makes it unavailable.

    **Usage:**

    ```
    writer cloud undeploy [OPTIONS]
    ```

    **Options:**

    * `--api-key`: Writer API key for authentication. If not provided, you will be prompted to enter it.
    * `--verbose, -v`: Enable verbose output.

    **Example:**

    ```
    writer cloud undeploy
    ```

    **Description:**

    * Stops and removes the deployed app from the Writer cloud.
  </Accordion>

  <Accordion title="writer cloud logs">
    Fetches logs from the deployed app.

    **Usage:**

    ```
    writer cloud logs [OPTIONS]
    ```

    **Options:**

    * `--api-key`: Writer API key for authentication. If not provided, you will be prompted to enter it.
    * `--verbose, -v`: Enable verbose output.

    **Example:**

    ```
    writer cloud logs
    ```

    **Description:**

    * Continuously fetches and displays logs from the deployed app.
    * Logs are ordered by date and time.

    **Output Example**

    ```
    2024-06-11 09:27:02.190646+00:00 [INFO] Starting container entrypoint...
    2024-06-11 09:27:03.798148+00:00 [INFO] BuildService - Downloading build files...
    ...
    ```
  </Accordion>
</AccordionGroup>

## Environment variables

When deploying an app, you can specify environment variables that will be available to the app during runtime. Use the `--env` option to pass these variables.

```
writer cloud deploy hello --env DB_HOST=db.example.com --env DB_PORT=5432
```

In this example, `DB_HOST` and `DB_PORT` will be available to the app as environment variables.

## API key

The `WRITER_API_KEY` is crucial for deploying and managing apps. It is used for authenticating requests to the Writer cloud. If not provided as an option, the CLI will prompt you to enter it. The `WRITER_API_KEY` will also be added to the deployed app's environment to enable AI features of the Writer framework.

## Deployment process

<Steps>
  <Step title="Package Creation">
    The CLI packages the app, excluding certain files (e.g., Dockerfile, `service_entrypoint.py`).
  </Step>

  <Step title="Upload Package">
    The package is uploaded to the Writer deployment server.
  </Step>

  <Step title="Build and Deploy">
    The server builds and deploys the app, making it accessible via a URL.
  </Step>

  <Step title="Environment Variables">
    Specified environment variables are set, and `WRITER_API_KEY` is added by default.
  </Step>
</Steps>

## Example workflow

<Steps>
  <Step title="Deploying an App">
    ```bash  theme={null}
    writer cloud deploy /path/to/app --env DB_HOST=db.example.com --env DB_PORT=5432
    ```
  </Step>

  <Step title="Fetching Logs">
    ```bash  theme={null}
    writer cloud logs
    ```
  </Step>

  <Step title="Undeploying an App">
    ```bash  theme={null}
    writer cloud undeploy
    ```
  </Step>
</Steps>

By following this documentation, you should be able to effectively deploy and manage your Writer apps using the Writer Framework CLI.


# Components
Source: https://dev.writer.com/framework/component-list-link





# Custom components
Source: https://dev.writer.com/framework/custom-components



It's possible to extend Framework with custom component templates.

They're developed using Vue 3 and TypeScript. Once transpiled, they can be used by copying them to the `extensions/` folder of any project.

<Note>
  Custom components behave exactly like built-in ones. They are just as
  performant, can contain other components, and offer the same the Builder
  experience. They only differ from built-in components in the way that they're
  bundled and imported.
</Note>

## Architecture

Framework front-end compiles to a collection of static assets that is distributed in the Python package. These static assets are then served via FastAPI.

During initialisation time, the server scans the `extensions/` folder in the project folder and looks for `.css` and `.js` files. This folder is also served, similarly to `static/`. If it finds any valid files in `extensions/`, it shares the list with clients and tells them to dynamically import these files during runtime.

Extensions and custom templates are currently synonyms, but this might change in order to accommodate other extension capabilities.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.architecture.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0bf436f6f05141b9c10203b73303db10" alt="Custom Components - Architecture" data-og-width="2291" width="2291" data-og-height="1190" height="1190" data-path="framework/images/custom-components.architecture.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.architecture.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6231fde8f3a44830f97815af792c03f2 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.architecture.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7586d22976a23fcc6932b06c090ee88a 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.architecture.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=21b00a736247b9e3f87efd31744c3daa 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.architecture.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=3bea16b735b0df4a2e32df2a3654bdf3 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.architecture.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=8bb6dfb6e518051b28563c9818719924 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.architecture.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=8c3413b6e9f9cf60b52f4f573d4320f1 2500w" />

Dependencies are [provided](https://vuejs.org/api/composition-api-dependency-injection.html) using injection symbols and can be *injected* to be used by the component template. These include `evaluatedFields`, which contain the current values of the editable fields. Injected dependencies are fully typed, making development easier.

[Rollup's external feature](https://rollupjs.org/configuration-options/#external), invoked via Vite, allows for extensions to be compiled without dependencies and link those during runtime. Therefore, extensions aren't bundled to be standalone, but rather to work as a piece of a puzzle.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.external.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=c79c2bffa0ff892d4b29585339ade35c" alt="Custom Components - External" data-og-width="2291" width="2291" data-og-height="530" height="530" data-path="framework/images/custom-components.external.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.external.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=654595fbeca47504003d6f5ffeb31f7d 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.external.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=e615a2a73dddb54ea6a0cea59b996c35 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.external.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7273b136b62854eff8b16439ceb07a9c 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.external.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6d30cabb1ef0149fdb0f2febd67da01d 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.external.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a62b6fa618fbd333295f255fb9f51746 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.external.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6f67fb90fdd4de8032177da97bc15c28 2500w" />

## Anatomy of a template

A template defines how a certain component is rendered. For example, `corebutton` defines how *Button* components are rendered.

Framework component templates are purely front-end. They are Vue 3 templates that extend the Vue specification via a [custom option](https://vuejs.org/api/utility-types.html#componentcustomoptions), `writer`. This custom option defines all the Framework-specific behaviour of the component. For example, its `fields` property establishes which fields will be editable via the Builder.

### Simple example

This example shows a template for *Bubble Message*, a simple demo component with one editable field, `text`.

```js  theme={null}
<template>
	<div class="BubbleMessage">
        <div class="triangle"></div>
        <div class="message">

            <!-- Shows the current value of the field "text" -->

            {{ fields.text.value }}
        </div>
	</div>
</template>

<script lang="ts">
export default {
    writer: {
		name: "Bubble Message",
		description: "Shows a message in the shape of a speech bubble.",
		category: "Content",

        // Fields will be editable via Framework Builder

        fields: {
			text: {
				name: "Text",
				type: FieldType.Text,
			},
		},

        // Preview field is used in the Component Tree

		previewField: "text",
	},
};
</script>
<script setup lang="ts">
import { FieldType } from "@/writerTypes";
import injectionKeys from "../injectionKeys";
import { inject } from "vue";

/*
The values for the fields defined earlier in the custom option
will be available using the evaluatedFields injection symbol.
*/

const fields = inject(injectionKeys.evaluatedFields);
</script>

<style scoped>
/* ... */
</style>
```

The code above will make Bubble Message available in the Builder.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.bubble-message.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=5ea7079317c2b87385b7db8000124156" alt="Custom Components - Bubble Message" data-og-width="2291" width="2291" data-og-height="947" height="947" data-path="framework/images/custom-components.bubble-message.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.bubble-message.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=061f46e7a1e4fdd1a821f605eb1bf73c 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.bubble-message.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=97783c672e4c80a03d6e21256a76d472 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.bubble-message.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ba2416f912700193fe2718fa18700d80 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.bubble-message.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ef3c1991893f36e6ebbe1d2bc3c6889e 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.bubble-message.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6081d89e40bea7f552f21a37b28431f9 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/custom-components.bubble-message.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a3ff9667f44767741bc101623745174d 2500w" />

## Developing templates

### Run a local server

<Steps>
  <Step title="Clone the Framework Repository">
    To get started, clone the [Framework
    repository](https://github.com/writer/writer-framework) from GitHub.
  </Step>

  <Step title="Set Up the Development Environment">
    To develop custom templates in a developer-friendly way, ensure you have a
    front-end development server with instant reload capabilities. The front-end
    code for Framework is located in the `ui` folder. With Node and npm
    installed on your system, run `npm install` to install dependencies. Then,
    start the server with support for custom component templates using `npm run
        custom.dev`.

    ```sh cd ui npm install # "custom.dev" links templates in theme={null}
    "custom_components/" # "dev" runs the server without them npm run custom.dev
    ```
  </Step>

  <Step title="Start the Back-End Server">
    The command `npm run custom.dev` starts a front-end server, which requires a
    back-end to function fully. Start Framework via command line, specifying the
    option `--port 5000`, to provide a back-end on that port. It's recommended
    to create a new app for testing the template you're developing. `sh writer
        create customtester writer edit customtester --port 5000 `
  </Step>

  <Step title="Access Framework and Test Custom Component">
    You should now be able to access Framework via the URL provided by Vite,
    e.g. `http://localhost:5174`. In the Builder's *Toolkit*, you should see the
    sample component, *Balloon Message*. Add it to your tester application.
  </Step>
</Steps>

### Create a new component

<Tip>
  You can also have a look at the built-in component templates, since their
  syntax is equivalent. They can be found in the `ui/src/components/core` folder.
</Tip>

Go to `ui/src/components/custom` and open the Vue single-file components, i.e. the
`.vue` files. These files contain comments that will help you get started. Try editing
the provided templates, you should see changes reflected.

You can get started by duplicating one of these examples. Make sure you add the new template to the entrypoint, as discussed below.

### Define entrypoint

For custom component templates to be taken into account, they need to be accessible from the entrypoint. Edit `ui/src/components/custom/index.ts` to define which templates you wish to export and under which identifiers.

```ts  theme={null}
// Import the templates

import BubbleMessage from "./BubbleMessage.vue";
import BubbleMessageAdvanced from "./BubbleMessageAdvanced.vue";

// Export an object with the ids and the templates as default

export default {
  bubblemessage: BubbleMessage,
  bubblemessageadvanced: BubbleMessageAdvanced,
};
```

A single or multiple templates can be specified. Take into account that they will all be exported, and later imported, together.

## Bundling templates

Execute `npm run custom.build` into `src/ui`, this will generate the output `.js` and `.css` files into `./custom_components_dist`.

```sh  theme={null}
# "build" builds the entire front-end
# "custom.build" only builds the custom templates

npm run custom.check # Optional: checks certain issues on custom components
npm run custom.build
```

Collect the files from `./custom_components_dist` and pack them in a folder such as `my_custom_bubbles`. The folder containing the generated files, e.g. `my_custom_bubbles`, can now be placed in the `extensions/` folder of any Framework project. It'll be automatically detected during server startup.

<Tip>
  The `custom.check` command is optional, but it's recommended to run it before building the custom components. It checks for common issues in the custom components, such as invalid key declaration, ...
</Tip>


# Custom server
Source: https://dev.writer.com/framework/custom-server



Framework uses Uvicorn and serves the app in the root path i.e. `/`. If you need to use another ASGI-compatible server or fine-tune Uvicorn, you can easily do so.

## Configure webserver

You can tune your server by adding a `server_setup.py` file to the root
of your application, next to the `main.py` files.

This file is executed before starting writer. It allows you to configure [authentication](./authentication.md),
add your own routes and middlewares on FastAPI.

```python  theme={null}
# server_setup.py
import typing

import writer.serve

if typing.TYPE_CHECKING:
    from fastapi import FastAPI

# Returns the FastAPI application associated with the writer server.
asgi_app: FastAPI = writer.serve.app

@asgi_app.get("/probes/healthcheck")
def hello():
    return "1"
```

<Warning>
  `server_setup.py` is disabled by default on edit mode. If you want to use in `edit` mode, you can launch `writer edit --enable-server-setup <app>`.
</Warning>

## Implement custom server

You can import `writer.serve` and use the function `get_asgi_app`. This returns an ASGI app created by FastAPI, which you can choose how to serve.

The following code can serve as a starting point. You can save this code as `serve.py` and run it with `python serve.py`.

```py  theme={null}
import uvicorn
import writer.serve

app_path = "." # . for current working directory
mode = "run" # run or edit

asgi_app = writer.serve.get_asgi_app(app_path, mode)

uvicorn.run(asgi_app,
    host="0.0.0.0",
    port=5328,
    log_level="warning",
    ws_max_size=writer.serve.MAX_WEBSOCKET_MESSAGE_SIZE)
```

Note the inclusion of the imported `ws_max_size` setting. This is important for normal functioning of the framework when dealing with bigger files.

Fine-tuning Uvicorn allows you to set up SSL, configure proxy headers, etc, which can prove vital in complex deployments.

If you want to disable server setup hook, you should use `enable_server_setup`:

```python  theme={null}
asgi_app = writer.serve.get_asgi_app(app_path, mode, enable_server_setup=False)
```

## Multiple apps at once

Framework is built using relative paths, so it can be served from any path. This allows multiple apps to be simultaneously served on different paths.

The example below uses the `get_asgi_app` function to obtain two separate Framework apps, which are then mounted on different paths, `/app1` and `/app2`, of a FastAPI app.

```py  theme={null}
import uvicorn
import writer.serve
from fastapi import FastAPI, Response

root_asgi_app = FastAPI(lifespan=writer.serve.lifespan)
sub_asgi_app_1 = writer.serve.get_asgi_app("../app1", "run")
sub_asgi_app_2 = writer.serve.get_asgi_app("../app2", "run")

root_asgi_app.mount("/app1", sub_asgi_app_1)
root_asgi_app.mount("/app2", sub_asgi_app_2)

@root_asgi_app.get("/")
async def init():
    return Response("""
    <h1>Welcome to the App Hub</h1>
    """)

uvicorn.run(root_asgi_app,
    host="0.0.0.0",
    port=5328,
    log_level="warning",
    ws_max_size=writer.serve.MAX_WEBSOCKET_MESSAGE_SIZE)
```


# Dataframe
Source: https://dev.writer.com/framework/dataframe



## DataFrames

If your application needs to present data as a table, it should use a **DataFrame**. DataFrames provide a simple way to present data in a grid format, require only a couple of lines of code to set up, and provide an interface that users expect from modern data applications.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6a47c39e70ee2ba1d70724612aeab66e" alt="DataFrame showing a table of popular ice cream flavors" data-og-width="1200" width="1200" data-og-height="800" height="800" data-path="framework/images/dataframe.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a5235504bba79f572dded170e4a48363 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=8b3ea08aecadde082455c31453d849f4 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ba5f5ebfbae95b8186b91994bd849ecc 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=b06f762a6b278c26de89ef2d8ae62244 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=65a002921923c3aa64589a946d4ab591 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=54307b8f8a032af8c473d5db08ee56b5 2500w" />

DataFrames built-in features that users expect, such as headers that can be clicked to change the sort order and resizable columns...

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_resort_resize.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=bb01cf0a041d758aec465676b5373e8b" alt="DataFrame with arrows pointing to the re-sort and resizing features" data-og-width="1200" width="1200" data-og-height="800" height="800" data-path="framework/images/dataframe_resort_resize.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_resort_resize.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ee2ac071ae3178ab1fb237803c8d7060 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_resort_resize.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=bac94c0197d82f2e98e204c0b09c8988 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_resort_resize.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ce1e000ae74220a497151deb0e466f83 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_resort_resize.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6e6448d629129e7aa9bfcecb8eb2da86 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_resort_resize.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=534d8ee65e6088d0ddd3f92b9a17b753 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_resort_resize.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4b443cca0683a4084fb939c99ee463fc 2500w" />

...and with the simple change of a parameter, you can enable features such as the Search field, which lets the user find the data they’re looking for (or filter out unwanted data), and the Download button, which downloads the data currently being displayed as a .csv file:

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_search_download.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=dcc25452bf0f4460182e4092119f1894" alt="DataFrame with arrows pointing to the Search field and Download button" data-og-width="1200" width="1200" data-og-height="800" height="800" data-path="framework/images/dataframe_search_download.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_search_download.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a34a4324d7c0cf319859f57f351a3d49 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_search_download.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=840bd162ebc493fccc76db78b17597d8 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_search_download.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ca8e0c6b90856dcdf3f31f5f64105305 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_search_download.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=980407b91e8d0dff2c6445f1e2c4d4f1 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_search_download.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=1170b099016efbaf10c0ec2a6ec367d5 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_search_download.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f80221f01f46d24a9d4ee74d8602306c 2500w" />

You can find the full list of DataFrame properties and fields on the [*DataFrame* component page](/components/dataframe).

### “DataFrame” has multiple meanings

**Writer Framework has two objects with the name *DataFrame*:**

1. **UI DataFrame:** In Writer Framework's UI, "DataFrame" refers to a ***user interface component*** that displays data in rows and columns in a way similar to a spreadsheet or SQL table.
2. **Code Dataframe:** In code that you write for a Writer Framework application, `DataFrame` refers to a ***data structure*** that stores data in rows and columns in a way similar to a spreadsheet or SQL table.

To present a data table in Writer Framework, you create a `DataFrame` data structure in your code and then bind it to a UI Dataframe.

## Displaying a static DataFrame

A static DataFrame is one whose content does not change. The user can change its sort order, but the data within the DataFrame remains constant.

<Steps>
  <Step title="Create a DataFrame data structure">
    Writer Framework supports both [pandas](https://pandas.pydata.org/) and [Polars](https://pola.rs/) `DataFrame` data structures. Create a `DataFrame`, assign its value to a variable, then assign make that variable a value in the `state` dictionary:

    <CodeGroup>
      ```python pandas theme={null}
      import writer as wf
      import pandas as pd

      data = [
      	{"rank": 1, "flavor": "Vanilla", "favorite": 0.11},
      	{"rank": 2, "flavor": "Chocolate", "favorite": 0.1},
      	{"rank": 3, "flavor": "Cookies and cream", "favorite": 0.07},
      	{"rank": 4, "flavor": "Strawberry", "favorite": 0.06},
      	{"rank": 5, "flavor": "Chocolate chip", "favorite": 0.02},
      ]
      df = pd.DataFrame(data)

      wf.init_state({
      	"mydf": df
      })
      ```

      ```python Polars theme={null}
      import writer as wf
      import polars as pl

      data = [
      	{"rank": 1, "flavor": "Vanilla", "favorite": 0.11},
      	{"rank": 2, "flavor": "Chocolate", "favorite": 0.1},
      	{"rank": 3, "flavor": "Cookies and cream", "favorite": 0.07},
      	{"rank": 4, "flavor": "Strawberry", "favorite": 0.06},
      	{"rank": 5, "flavor": "Chocolate chip", "favorite": 0.02},
      ]
      df = pl.DataFrame(data)

      wf.init_state({
      	"mydf": df
      })
      ```
    </CodeGroup>

    The call to `wf.init_state()` adds the `DataFrame` to the application's `state` variable as the value of the `mydf` key.
  </Step>

  <Step title="Add a DataFrame component to the UI and bind it to the DataFrame data structure">
    Add a DataFrame UI component to the user interface, then set its **Data** property to `@{`*dataframe\_key*`}`, where *dataframe\_key* is the `state` variable key whose value refers to the `DataFrame` data structure.

    In the case of this example, `mydf` is the `state` variable key referring to the `DataFrame`, so set the **Data** property to `@{mydf}`.

        <img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_static_table_1.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a555186139ccc7397085b797044fafea" alt="DataFrame for static table example with properties panel open" data-og-width="3000" width="3000" data-og-height="1400" height="1400" data-path="framework/images/dataframe_static_table_1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_static_table_1.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7b132c3f9ac62ab880b02e4cff7ca6c7 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_static_table_1.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9bc4b48146dc27c8a586c0381dce158c 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_static_table_1.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=06147e1319216872670bcbac710ebdfd 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_static_table_1.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=e3e64d18c5742fe0c49dd259310654d6 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_static_table_1.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=afcc776ce394eeef28e35972eaedd973 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_static_table_1.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=1063e4aab7a04060be71e27814c9062e 2500w" />
  </Step>
</Steps>

## Displaying an editable DataFrame

A editable DataFrame is one whose content can change. Like static DataFrames, editable DataFrames use the **DataFrame** UI component. Unlike static tables, the DataFrame UI component is bound to an instance of `EditableDataFrame`, a class provided by the Writer library. Changes to a  `EditableDataFrame` object will be immediately reflected in the DataFrame UI component that it is bound to.

<Steps>
  <Step title="Create an EditableDataFrame data structure">
    An `EditableDataFrame` object can be instantiated from any of the following:

    1. A pandas `DataFrame`
    2. A Polars `DataFrame`
    3. A list of dictionaries

    <CodeGroup>
      ```python pandas theme={null}
      import writer as wf
      import pandas as pd

      data = [
      	{"rank": 1, "flavor": "Vanilla", "favorite": 0.11},
      	{"rank": 2, "flavor": "Chocolate", "favorite": 0.1},
      	{"rank": 3, "flavor": "Cookies and cream", "favorite": 0.07},
      	{"rank": 4, "flavor": "Strawberry", "favorite": 0.06},
      	{"rank": 5, "flavor": "Chocolate chip", "favorite": 0.02},
      ]
      df = pd.DataFrame(data)

      wf.init_state({
      	"mydf": wf.EditableDataFrame(df)
      })
      ```

      ```python Polars theme={null}
      import writer as wf
      import polars as pl

      data = [
      	{"rank": 1, "flavor": "Vanilla", "favorite": 0.11},
      	{"rank": 2, "flavor": "Chocolate", "favorite": 0.1},
      	{"rank": 3, "flavor": "Cookies and cream", "favorite": 0.07},
      	{"rank": 4, "flavor": "Strawberry", "favorite": 0.06},
      	{"rank": 5, "flavor": "Chocolate chip", "favorite": 0.02},
      ]
      df = pl.DataFrame(data)

      wf.init_state({
      	"mydf": wf.EditableDataFrame(df)
      })
      ```

      ```python List of dictionaries theme={null}
      import writer as wf

      data = [
      	{"rank": 1, "flavor": "Vanilla", "favorite": 0.11},
      	{"rank": 2, "flavor": "Chocolate", "favorite": 0.1},
      	{"rank": 3, "flavor": "Cookies and cream", "favorite": 0.07},
      	{"rank": 4, "flavor": "Strawberry", "favorite": 0.06},
      	{"rank": 5, "flavor": "Chocolate chip", "favorite": 0.02},
      ]

      wf.init_state({
      	"mydf": wf.EditableDataFrame(data)
      })
      ```
    </CodeGroup>

    The call to `wf.init_state()` adds the `DataFrame` to the application's `state` variable as the value of the `mydf` key.
  </Step>

  <Step title="Add a DataFrame component to the UI and bind it to the DataFrame data structure">
    Add a **DataFrame** component to the user interface, then set its **Data** property to `@{`*dataframe\_key*`}`, where *dataframe\_key* is the `state` variable key whose value refers to the `DataFrame` data structure.

    In the case of this example, `mydf` is the `state` variable key referring to the `DataFrame`, so set the **Data** property to `@{mydf}`.

        <img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_dynamic_table_1.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=de4fbba831aa1f320efe18b4d275f540" alt="DataFrame for dynamic table example with properties panel open" data-og-width="3000" width="3000" data-og-height="1400" height="1400" data-path="framework/images/dataframe_dynamic_table_1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_dynamic_table_1.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=fab92e6aae7f9e8e822b81a0534f85d5 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_dynamic_table_1.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7429c989c0d3d3e6e38f70d4c2750d19 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_dynamic_table_1.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7105ab961070cd65af2c3a54d04486f8 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_dynamic_table_1.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=317b5add039833d8fd4e190bc875b618 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_dynamic_table_1.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2081105ff6441b69169866027d96607a 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_dynamic_table_1.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=fe2a4e421edd96079a928ce7ebafe934 2500w" />
  </Step>
</Steps>

## Updating an editable DataFrame

Editable DataFrames are updated by updating the `EditableDataFrame` object they are bound to, which is done using `EditableDataFrame`'s methods.

### `record_add`: Add a new row

`record_add()` adds a new row to an `EditableDataFrame`. It takes a dictionary with the following structure...

```python  theme={null}
{"record": new_row}
```

...where `new_row` is a dictionary containing the data for the row to be added.

In the code example above, you would add a new row to the DataFrame with the following code:

```python  theme={null}
state["mydf"].record_add({"record": {"rank": 6, "flavor": "Birthday cake", "favorite": 0.01}})
```

### `record`: Read the contents of a row

`record()` returns a row in an `EditableDataFrame`. It takes an integer specifying the index of the row.

In the code example above, you would retrieve the record at row 1 with the following code:

```python  theme={null}
record = state["mydf"].record(1)
```

### `record_update`: Change an existing row

`record_update()` replaces an existing row in an `EditableDataFrame` with a new one. It takes a dictionary with the following structure...

```python  theme={null}
{
	"record_index": index,
	"record": row_to_update
}
```

...where `index` is an integer specifying which row should be updated and `row_to_update` is a dictionary containing the updated row data.

In the code example above, you would update the row at index 0 with the following code:

```python  theme={null}
state["mydf"].record_update({
	"record_index": 0,
	"record": {"rank": 6, "flavor": "Bubble gum", "favorite": 0.08}
})
```

### `record_remove`: Delete an existing row

`record_remove()` removes an existing row from an `EditableDataFrame`. It takes a dictionary with the following structure...

```python  theme={null}
{"record_index": index}
```

...where `index` is an integer specifying which row should be deleted.

In the code example above, you would delete the row at index 2 with the following code:

```python  theme={null}
state["mydf"].record_remove({"record_index": 2})
```

## Enabling additional features

The DataFrame component has these “always-on” features:

1. **Sorting:** Clicking a column header sorts the entire DataFrame based on that column's values. The first click sorts that DataFrame in ascending order, a second click changes it to descending order, and a third click restores the DataFrame to its original sort order.
2. **Column resizing:** Click and drag the dividing line on the right edge of a column header to adjust its width.

DataFrames have other features that you need to activate, which are listed below.

### Search field

To enable the Search field, select the DataFrame, open the Component settings panel, and set **Enable search** to **yes**.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_search.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2421dd2b6c6367ee67a2f6ea3f723883" alt="Enabling the Search field in a DataFrame" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/dataframe_enable_search.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_search.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=f225c3955256bfa03bb7c1415ef34356 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_search.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=97809930a7985a5368d4f2700deeb523 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_search.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=cbc7da6e505e317c3e544d76c45d172a 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_search.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=eb5f247330fbb18623175aec6c2fe9f1 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_search.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0f80c52f8c155640af136a62f68f6cd1 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_search.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=ce55dbfba96fab109b215a146e0a994c 2500w" />

### Download button

To enable the Download button, select the DataFrame, open the Component settings panel, and set **Enable download** to **yes**.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_download.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=0ba0cae4796c848d91e54f366c189b32" alt="Enabling the Download button in a DataFrame" data-og-width="1200" width="1200" data-og-height="1200" height="1200" data-path="framework/images/dataframe_enable_download.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_download.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=b463de51fb78f7b014a0b67a82bf3d78 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_download.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2adf88d5ff2aec0161677da3b6f0fcd9 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_download.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9485774d8193e36f7870d63c219bd854 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_download.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=c46783c11e8d1c48ae7e4f9b81ac4d76 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_download.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=df2b7e95fd731fd6efec2dafa549806d 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/dataframe_enable_download.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=fd13f8671c237fc2dbf68cab32d75d29 2500w" />


# Deploy with Docker
Source: https://dev.writer.com/framework/deploy-with-docker



<Tip>
  To deploy on the Writer cloud see instructions [here](/framework/quickstart#deploying-on-writer-cloud).
</Tip>

You can use Docker to deploy Framework anywhere. If you're an experienced Docker user, you may want to go straight to the provided Dockerfile.

## Creating a Docker image

<Steps>
  <Step title="Verify docker installation">
    Make sure you have Docker installed on your system.
  </Step>

  <Step title="Navigate to your app's folder">
    Open a terminal and navigate to your app’s folder.
  </Step>

  <Step title="Set up Python environment">
    Create a `pyproject.toml` file using `poetry init` and install `writer` using `poetry add writer`.
  </Step>
</Steps>

A Dockerfile is a file with instructions that tell Docker how to build your image. It must be named `Dockerfile`. You can use the following as-is, or as a starting point. It should be saved in your app's folder, together with `main.py` and `.wf/`.

```docker  theme={null}
FROM python:3.10-bullseye
RUN apt-get update -y && mkdir /app
RUN apt-get install build-essential cmake python3-dev -y
COPY . /app
WORKDIR /app
RUN pip3 install poetry
RUN poetry config virtualenvs.create false
RUN poetry install --only main
ENTRYPOINT [ "writer", "run" ]
EXPOSE 8080
CMD [ ".",  "--port", "8080", "--host", "0.0.0.0" ] 
```

<Note>
  This Dockerfile is just a guideline.
  It uses an official Python slim base image with a multistage build to reduce the size of the built image.
  If you're a Docker expert, feel free to work on your own `Dockerfile`. Framework is, after all, a standard Python package.
</Note>

To build the image, use `docker build . -t ` followed by an image tag, which you're free to choose and will locally identify your image.

```sh  theme={null}
docker build . -t my_framework_app
```

<Warning>
  By default, Docker builds images in the architecture it's being run on. If you're working with an ARM computer, such as a Mac M2 or a Raspberry Pi, Docker will build an ARM image. Most cloud services will only accept x86 images. You can use another computer (or virtual machine) to build the image, or you can use [Docker buildx](https://docs.docker.com/build/building/multi-platform/).
</Warning>

## Publishing your Docker image

Once your Docker image has been built, you can publish it to a registry. This is a place where Docker images are stored and made available to other services.

We recommend using Docker Hub; it has a generous free tier, it's very easy to set up and it's widely supported. However, you can choose to use another service such as Azure Container Registry. To use Docker Hub, you'll need to sign up for an account.

You can push your image using the following commands.

```sh  theme={null}
# Login to Docker Hub
docker login

# Push the image
# Replace "my_writer_app" for the tag you've previously chosen
# Replace "my_user" for your user on Docker Hub
docker tag my_writer_app:latest my_user/my_writer_app:latest
docker push my_user/my_writer_app:latest
```

If your image is public, anyone can now run the following command and start the app. It's important to bind the port to a port in the host machine. The command below binds port 8080 in the Docker image to port 8080 in the host.

```sh  theme={null}
docker run -p 8080:8080 my_user/my_framework_app
```

Go on your browser to [http://localhost:8080](http://localhost:8080) to check everything is working as expected.

## Deploying your Docker image

As mentioned earlier, once the image is a registry, it can be spun up by others. After trying a few options, we recommend using Google Cloud Run. Its free tier is generous and SSL works out of the box.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/deploy-with-docker.google-cloud-run.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=af8ba51ab1ea3dbdaf59274e7e6b2274" alt="Run and Share - Google Cloud Run" data-og-width="2291" width="2291" data-og-height="1144" height="1144" data-path="framework/images/deploy-with-docker.google-cloud-run.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/deploy-with-docker.google-cloud-run.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=6c6a9a32ba7817374e619a0777b7eb3b 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/deploy-with-docker.google-cloud-run.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=a120c3fc7c7451b7db524eb879c4d228 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/deploy-with-docker.google-cloud-run.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=d2b6c1d23bf665c9599e53cb3ed2b157 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/deploy-with-docker.google-cloud-run.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=38d069d43fcc231a2f5b55a52c4380e8 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/deploy-with-docker.google-cloud-run.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=998d4040894362e20b5bdc432d5062f6 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/deploy-with-docker.google-cloud-run.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=2deef7d2f44bdd6a44ddacc364844b8b 2500w" />

Cloud Run can be configured in just one page. It takes the image from a registry and makes it available via a URL, with SSL enabled by default. We recommend the following settings:

<AccordionGroup>
  <Accordion title="Instance specifications">
    Minimum 0 instances, maximum 4 instances. This range is suitable unless your app needs to serve several thousands of users.
  </Accordion>

  <Accordion title="Connection settings">
    Set the request timeout to the maximum allowed and enable Session Affinity. This ensures that WebSocket connections are not unnecessarily dropped.
  </Accordion>

  <Accordion title="Resource allocation">
    Allocate 2GB of memory and 2 vCPUs. This configuration will likely be enough to comfortably run a simple app. However, you can probably manage with much less—512MB of memory and 1 vCPU—if your app isn’t too demanding and you don’t expect much traffic.
  </Accordion>
</AccordionGroup>


# Event handlers
Source: https://dev.writer.com/framework/event-handlers



Events originate in the front-end, for example, when a user clicks a *Button* component. Using the Builder, these events can be linked to event handlers.

## Plain Python functions

Event handlers are Python functions accessible from `main.py`. They can be defined in that same file or imported. No decorators or special syntax are required.

```py  theme={null}
# This event handler will add an entry to the log
def handle_click()
    print("Hello")
```

To specify that a function isn't an event handler and should remain hidden to the front-end, prefix it with a `_` (underscore).

```py  theme={null}
# This function won't be visible in the front-end
# because its name starts with an underscore
def _reticulate(splines):
    r_splines = np.random.normal(size=(splines,100))
    return r_splines
```

### External handlers

If your `main.py` file has become cluttered with too many handler functions, you can organize them more effectively using the `init_handlers` method. This method allows you to register handler functions from other modules. You can pass a single imported module or a list of modules to the init\_handlers method to register multiple handlers simultaneously:

<CodeGroup>
  ```py one_handler theme={null}
  # my_app/my_handlers_module.py

  def increment(state):
      state["counter"] += 1
  ```

  ```py init_handlers one module theme={null}
  # my_app/main.py

  import writer as wf
  import my_handlers_module

  wf.init_handlers(my_handlers_module)
  # Register all functions from the module as handlers;
  # this makes `increment` handler accessible on front-end
  ```

  ```py init_handlers many modules theme={null}
  # my_app/main.py

  import writer as wf
  import handler_module_one
  import handler_module_two

  wf.init_handlers([handler_module_one, handler_module_two])
  ```
</CodeGroup>

<Warning>
  Each function inside a module is attempted to be registered as a handler. Make sure to use `_` prefix as described [before](#plain-python-functions) to prevent exposing unwanted functions to front-end.
</Warning>

You can also call `init_handlers` within other modules, which allows for a sequence of registrations:

<CodeGroup>
  ```py another_handlers_module theme={null}
  # my_app/another_handlers_module.py

  def decrement(state):
      state["counter"] -= 1
  ```

  ```py register_additional_handlers theme={null}
  # my_app/my_handlers_module.py

  import writer as wf
  import another_handlers_module

  wf.init_handlers(another_handlers_module)
  # Makes `decrement` handler accessible on front-end

  ...
  ```

  ```py my_handlers_module theme={null}
  # my_app/main.py

  import writer as wf
  import my_handlers_module

  ...
  ```
</CodeGroup>

Note that for this "chain" to work, you need to import the final module in the sequence into `main.py`.

## Mutating state

In most cases, event handlers will modify the application state. State can be accessed by including the `state` argument in the handler, which will provide you with a `WriterState` object for the session that invoked the handler.

Elements of state can be reached using the square brackets syntax `state["my_element"]`. Accessing keys that don't exist will return `None`.

```py  theme={null}
def handle_click(state):
    state["counter"] += 1
```

The handler above receives the application state for the relevant session and mutates it. For example, if Bob's counter was 4, and he clicks on a *Button* linked to `handle_click`, his new counter value will be 5. Other sessions remain unaffected.

## Mutation detection

<Warning>
  Mutations are detected via assignment.
  Make sure you perform an assignment on the state element you're mutating, for the mutation to be detected.
</Warning>

When communicating with the front-end, Framework only sends state elements that have mutated.

To detect which elements have mutated, it relies on assignment (via operators such as `=`, `+=`, etc). This is because Python doesn't offer a performant, reliable mechanism to detect mutations. See the two examples below.

<CodeGroup>
  ```python hande_click theme={null}
  def handle_click(state):
      state["my_df"].sample(frac=1, random_state=random.seed())

      # The self-assignment is necessary when mutating
      # an existing object directly on state

      state["my_df"] = state["my_df"]
  ```

  ```python hande_click_cleaner theme={null}
  # The following cleaner code also works as it relies on assignment
  def hande_click_cleaner(state):
      my_df = state["my_df"]
      my_df.sample(frac=1, random_state=random.seed())
      state["my_df"] = my_df # State assignmnet
  ```
</CodeGroup>

## Mutation event

You can subscribe to mutations on a specific key in the state.
This is useful when you want to trigger a function every time a specific key is mutated.

<CodeGroup>
  ```python simple subscription theme={null}
  import writer as wf

  def _increment_counter(state):
      state['my_counter'] += 1

  state = wf.init_state({"a": 1, "my_counter": 0})
  state.subscribe_mutation('a', _increment_counter)

  state['a'] = 2  # trigger _increment_counter mutation
  ```

  ```python multiple subscriptions theme={null}
  import writer as wf

  def _increment_counter(state):
      state['my_counter'] += 1

  state = wf.init_state({
  	'title': 'Hello',
  	'app': {'title', 'Writer Framework'},
  	'my_counter': 0}
  )

  state.subscribe_mutation(['title', 'app.title'], _increment_counter)  # subscribe to multiple keys

  state['title'] = "Hello Pigeon"  # trigger _increment_counter mutation
  ```

  ```python trigger event handler theme={null}
  import writer as wf

  def _increment_counter(state, context: dict, payload: dict, session: dict, ui: WriterUIManager):
  	if context['event'] == 'mutation' and context['mutation'] == 'a':
  		if payload['previous_value'] > payload['new_value']:
  			state['my_counter'] += 1

  state = wf.init_state({"a": 1, "my_counter": 0})
  state.subscribe_mutation('a', _increment_counter)

  state['a'] = 2  # increment my_counter
  state['a'] = 3  # increment my_counter
  state['a'] = 2  # do nothing
  ```
</CodeGroup>

<Tip>
  `subscribe_mutation` is compatible with event handler signature. It will accept all the arguments
  of the event handler (`context`, `payload`, ...).
</Tip>

## Receiving a payload

Several events include additional data, known as the event's payload. The event handler can receive that data using the `payload` argument.

For example, the `wf-change` event in a *Text Input* component is triggered every time the value changes. As a payload, it includes the new value.

```py  theme={null}
def handle_input_change(state, payload):
    state["value"] = payload
```

The content of the payload will vary depending on the event. For example, when a user takes a photo with a *Webcam Capture*, the picture they took is sent across as a PNG image.

```py  theme={null}
def handle_webcam_capture(payload):
	image_file = payload
	with open(f"picture.png", "wb") as file_handle:
		file_handle.write(image_file)
```

Handling different payloads across events can be challenging, especially since the shape of the payload may vary. To simplify this process, the Builder provides stub code that can help you get started with writing an event handler. You can access it by clicking the icon located next to the event when configuring the component's settings. This feature can help you quickly understand the structure of the payload and start writing the appropriate code to handle it.

## Globals

You can use globals and module attributes, just as you would in a standard Python script. This is very convenient for storing a single copy of resource-intensive object.

```py  theme={null}
my_ai = CatIdentifierAI()

def evaluate(state, payload):
    result = my_ai.process(payload)
    state["is_a_cat"] = result
```

Take into account that globals apply to all users. If you need to store data that's only relevant to a particular user, use application state.

## Middlewares

Middlewares are functions that run before and after every event handler.
They can be used to perform tasks such as logging, error handling, session management, or modifying the state.

```py  theme={null}
import writer as wf

@wf.middleware()
def middleware_before(state, payload, context):
	print("Middleware before event handler")
	state['running'] += 1
	yield
	print("Middleware after event handler")
	state['running'] -= 1
```

A middleware receives the same parameters as an event handler.

A middleware can be used to handle exceptions that happens in event handlers.

```py  theme={null}
import writer as wf

@wf.middleware()
def middleware_before(state):
	try:
		yield
	except Exception as e:
		state['error_counter'] += 1
		state['last_error'] = str()
	finally:
		pass
```

## Standard output

The standard output of an app is captured and shown in the code editor's log. You can use the standard `print` function to output results.

```py  theme={null}
# Shown every time the app starts
print("Hello world")

def payload_inspector(state, payload):
    # Shown every time the event handler is executed
    print("Payload: " + repr(payload))
```

## Execution flow

Event handlers run in a thread pool and are non-blocking. Each event is processed independently from each other.

State mutations are sent to the front-end after the function has finished executing. The code in `handle_fast` will accumulate all mutations and send to the front-end after the function returns. For long-running tasks, Framework will periodically check state and provide partial updates to the user.

<CodeGroup>
  ```py handle_fast theme={null}
  def handle_fast(state):
      state["text"] = "Hello"
      state["x"] += 3
      state["y"] += 2
  ```

  ```py handle slowly theme={null}
  # The code below will set `message` to "Loading...", then to "Completed".  
  def handle_slowly(state):
      state["message"] = "Loading..."
      import time
      time.sleep(5)
      state["message"] = "Completed"
  ```
</CodeGroup>

## Asynchronous event handlers

Framework supports asynchronous event handlers, allowing for non-blocking I/O operations directly within event handlers. This is particularly useful for tasks such as fetching data from a database, making HTTP requests, or performing any other I/O bound operation that can benefit from asynchronous execution.

### Defining an asynchronous handler

An asynchronous event handler is defined with the standard `async` keyword syntax.

```py  theme={null}
# An asynchronous event handler for performing an I/O bound operation
async def handle_async_click(state):
    data = await fetch_data()
    state["data"] = data
```

In the example above, `fetch_data()` is an asynchronous function that retrieves data, potentially from a remote source. The `await` keyword is used to wait for the operation to complete without blocking the main thread, allowing other tasks to run concurrently.

### Awaitable objects

You can use any awaitable object within an async event handler. This includes the output of any function defined with `async def`, or objects with an `__await__` method. This makes it easy to integrate with asynchronous libraries and frameworks.

## Context

The `context` argument provides additional information about the event.

The context provide the id of component that trigger the event in `target` field.

```py  theme={null}
def handle_click(state, context: dict):
	last_source_of_click = context['target']
	state["last_source_of_click"] = last_source_of_click
```

The context provides the event triggered in the `event` field.

```py  theme={null}
def handle_click(state, context: dict):
	event_type = context['event']
	if event_type == 'click':
		state["last_event"] = 'Click'
```

The repeater components have additional fields in the context, such as defined in `keyVariable` and `valueVariable`.

```py  theme={null}
def handle_repeater_click(state, context: dict):
	key = context['keyVariable']
	state['repeater_content'][key]['last_action'] = 'Clicked' 
```

More information in [Repeater chapter](/framework/repeater)


# Frontend scripts
Source: https://dev.writer.com/framework/frontend-scripts



Framework can import custom JavaScript/ES6 modules from the front-end. Module functions can be triggered from the back-end.

## Importing an ES6 module

Similarly to [stylesheets](/framework/stylesheets), front-end scripts are imported via Framework's `mail` capability. This allows you to trigger an import for all or specific sessions at any time during runtime. When the `import_frontend_module` method is called, this triggers a dynamic [import()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import) call in the front-end.

The `import_frontend_module` method takes the `module_key` and `specifier` arguments. The `module_key` is an identifier used to store the reference to the module, which will be used later to call the module's functions. The `specifier` is the path to the module, such as `/static/mymodule.js`. It needs to be available to the front-end, so storing in the `/static/` folder is recommended.

The following code imports a module during event handling.

```py  theme={null}
def handle_click(state):
    state.import_frontend_module("my_script", "/static/mymodule.js")
```

If you want the module to be imported during initialisation, use the initial state.

```py  theme={null}
initial_state = wf.init_state({
    "counter": 1
})

initial_state.import_frontend_module("my_script", "/static/mymodule.js")
```

<Note>
  Use versions to avoid caching. Similarly to stylesheets, your browser may cache modules, preventing updates from being reflected. Append a querystring to invalidate the cache, e.g. use `/static/script.js?3`.
</Note>

## Writing a module

The module should be a standard ES6 module and export at least one function, enabling it to be triggered from the back-end. As per JavaScript development best practices, modules should have no side effects. An example of a module is shown below.

```js  theme={null}
let i = 0;

export function sendAlert(personName) {
    i++;
    alert(`${personName}, you've been alerted. This is alert ${i}.`);
}
```

## Calling a function

Once the module is imported, functions can be called from the back-end using the `call_frontend_function` method of state. This function takes three arguments. The first, `module_key` is the identifier used to import the module. The second, `function_name` is the name of the exported front-end function. The third, `args` is a `List` containing the arguments for the call.

The following event handler triggers the front-end function defined in the section above.

```py  theme={null}
def handle_click(state):
    state.call_frontend_function("mymodule", "sendAlert", ["Bob"])
```

## Import a JS script

Framework can also import and run JavaScript scripts directly, for their side effects. These are imported via the report's `import_script` method. This method takes two arguments. The first, `script_key` is the identifier used to import the script. The second, `path` is the path to the file. The specified path must be available to the front-end, so storing it in your application's `./static` folder is recommended.

```py  theme={null}
initial_state = wf.init_state({
    "counter": 1
})

initial_state.import_script("my_script", "/static/script.js")
```

<Warning>
  Prefer ES6 modules: importing scripts is useful to import libraries that don't support ES6 modules. When possible, use ES6 modules. The `import_script` syntax is only used for side effects; you'll only be able to call functions from the back-end using modules that have been previously imported via `import_frontend_module`.
</Warning>

## Importing a script from a URL

Framework can also import scripts and stylesheets from URLs. This is useful for importing libraries from CDNs. The `import_script` and `import_stylesheet` methods take a `url` argument, which is the URL to the script or stylesheet.

```python  theme={null}
initial_state = wf.init_state({
    "my_app": {
        "title": "My App"
    },
})

initial_state.import_script("lodash", "https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.js")
```

## Frontend core

<Warning>
  Effectively using Framework's core can be challenging and will likely entail reading its [source code](https://github.com/writer/writer-framework/blob/master/src/ui/src/core/index.ts). Furthermore, it's considered an internal capability rather than a public API, so it may unexpectedly change between releases.
</Warning>

You can access Framework's front-end core via `globalThis.core`, unlocking all sorts of functionality. Notably, you can use `getUserState()` to get values from state.

```js  theme={null}
export function alertHueRotationValue() {
    const state = globalThis.core.userState.value.
    console.log("State is", state);
}
```


# Handling inputs
Source: https://dev.writer.com/framework/handling-inputs



There are two, complementary, ways to handle inputs in Framework: via event handlers and via binding.

## Event handlers

Input components have *change* events that are dispatched when the value changes. The new value is provided as a payload in the event handler. Change events have slightly different names across components, reflecting the payloads they provide. For example, *Number Input* and *Slider Input* use the event `wf-number-change` while *Text Input* and *Text Area Input* use the generic `wf-change`.

As discussed in the [Event handlers](/framework/event-handlers) section, the payload can be accessed via the `payload` argument in the event handler.

```py  theme={null}
# This event handler takes the payload and assigns it
# to the state element "name"
def handle_input_change(state, payload):
    state["name"] = payload
```

## Two-way bindings

Writing event handlers for every input component can be tedious. In most cases, you'll only need to update a single element of state when the value changes, akin to the example above. You can achieve this by binding a component to a state element.

Bindings automatically handle the *change* event for the component and set the value of the state element to the payload. Furthermore, bindings are two-way. If the state element is updated from the back-end, the front-end component is updated to reflect the new value.

As mentioned in the [Builder basics](/framework/builder-basics) section of the guide, bindings can be configured in the component settings.

<img src="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/handling-inputs.binding.png?fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=bcb3fe9fc8d61fe1f7302f98a35b4099" alt="Repeater example" data-og-width="1704" width="1704" data-og-height="479" height="479" data-path="framework/images/handling-inputs.binding.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/handling-inputs.binding.png?w=280&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=30286a1280fbb6857684e8b7df39ea4b 280w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/handling-inputs.binding.png?w=560&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=5fcd4e09500b5f515e3da035d56ecb30 560w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/handling-inputs.binding.png?w=840&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=07d449ad6f6684fc6a8bfb345cddf328 840w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/handling-inputs.binding.png?w=1100&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=4a01e06896f46ab476c478efbc93197c 1100w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/handling-inputs.binding.png?w=1650&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=7d36df5998e1d3b122f16f1f1082c26d 1650w, https://mintcdn.com/writer/eBiCs3I5_-mSTcT-/framework/images/handling-inputs.binding.png?w=2500&fit=max&auto=format&n=eBiCs3I5_-mSTcT-&q=85&s=9e78b799744a7e6f3d51982eb132fedb 2500w" />

The binding above establishes a two-way link between the component and the state element `name`. If `name` changes in the back-end, the component changes. If the component changes, the value of `name` changes.

## Using events and bindings simultaneously

Bindings can be used together with events. This is useful for triggering recalculations or applying dynamic filters. For example, you may want to have three *Number Input* components bound to `a`, `b` and `c` and display a value `n`. This easily done by binding the components and linking the same recalculation event handler to all three components.

```py  theme={null}
def recalculate(state):
    state["n"] = state["a"]*state["b"]*state["c"]
```

## Handling inputs safely

Framework automatically sanitises the payloads it provides for its built-in events, those that start with `wf-`.

For example, if a *Dropdown Input* component lists options `high` and `low`, you're guaranteed you won't get a value like `"Robert'); DROP TABLE students;--"` when handling `wf-option-change`. You'll get `"high"`, `"low"` or `None`.

<Warning>
  Inputs are sanitised, but you should still be careful

  As with any application, it's important to be familiar with the risks associated with handling user input, especially SQL injections. If you're using any custom HTML and mixing it with user generated content, make sure you understand XSS.
</Warning>

## Creating forms

Input components can be combined with *Message* and *Button* components to create forms with messages, indicating whether the submission was successful.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/handling-inputs.form.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=d60aee2c6edda91f55808ee2d678c288" alt="Form example" data-og-width="1704" width="1704" data-og-height="762" height="762" data-path="framework/images/handling-inputs.form.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/handling-inputs.form.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=64e26040ef3e8d68b4637bd5fea22701 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/handling-inputs.form.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b88b74e0aaaafaa15bcb9badf0a36259 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/handling-inputs.form.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=394e066d339f3c59aa6b3f9d8aba1a39 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/handling-inputs.form.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=fa7381a45e5660ce96e304161feeddcf 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/handling-inputs.form.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=be882a73798bc6b47612e77b06e08086 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/handling-inputs.form.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b5e3d32164e295da0c49afcd40e4b927 2500w" />


# Writer Framework
Source: https://dev.writer.com/framework/introduction



The Writer Framework lets you build feature-rich apps by using a drag-and-drop visual editor called **the Builder** and writing the back-end code in Python. It's fast and flexible, with clean, easy-to-test syntax. It provides separation of concerns between UI and business logic, enabling more complex apps.

<img src="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/builder.png?fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=9ad9be8f3da7b87fca947402b68986b7" alt="Framework Builder screenshot" data-og-width="1920" width="1920" data-og-height="1080" height="1080" data-path="framework/public/builder.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/builder.png?w=280&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=77bad05f5c56eab560a011477d04f5f1 280w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/builder.png?w=560&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=e8f39be618c1774bea7784ac483ba770 560w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/builder.png?w=840&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=b3f9e5150fb2a181b8faa4dd5fedd555 840w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/builder.png?w=1100&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=682fe8d8c2d5035b6b9c2b1f2fc3d53b 1100w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/builder.png?w=1650&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=741f7e0a41b473e3653991a7ac23cd56 1650w, https://mintcdn.com/writer/mFPGVlLcGxKIh_Y1/framework/public/builder.png?w=2500&fit=max&auto=format&n=mFPGVlLcGxKIh_Y1&q=85&s=766af15e70dd4f8a6045662b7957d17c 2500w" />

Build AI apps with the Writer Framework when:

1. You need to incorporate external data sources, such as external APIs
2. You have complex user input that requires custom logic, such as conditions that trigger the use of different prompts
3. You want to quickly analyze and visualize data using an LLM

The Writer Framework offers:

<AccordionGroup>
  <Accordion title="Easily-testable Python functions">
    Define event handlers as plain Python functions.

    ```python  theme={null}
    def handle_text_update(state):
        state["text"] = "Updated text"

    writer.init_state({
        "text": "Initial text"
    })
    ```
  </Accordion>

  <Accordion title="Visual editor">
    Link the event handler and state to the UI seamlessly.
  </Accordion>

  <Accordion title="Standard Python packages">
    Install with a simple pip command.
  </Accordion>

  <Accordion title="Version control">
    Save user interfaces as JSON to be version controlled with the rest of the app.
  </Accordion>

  <Accordion title="Flexible editing">
    Use your local code editor with instant refreshes or the provided web-based editor. Edit the UI while your app is running without needing to click “Preview.”
  </Accordion>

  <Accordion title="Minimal overhead">
    Event handling adds only 1-2ms to your Python code.
  </Accordion>

  <Accordion title="Real-time synchronization">
    Use WebSockets to synchronize front-end and back-end states.
  </Accordion>

  <Accordion title="Efficient execution">
    Non-blocking by default, with asynchronous event handling in a dedicated thread pool.
  </Accordion>

  <Accordion title="Customizable elements">
    No CSS required for customization like shadows, button icons, and background colors.
  </Accordion>

  <Accordion title="HTML integration">
    Include HTML elements with custom CSS using the HTML Element component, which can serve as containers for built-in components.
  </Accordion>
</AccordionGroup>

To get started, head to [Quickstart](/framework/quickstart) or our tutorials:

<CardGroup cols={3}>
  <Card title="Social post generator" icon="megaphone" href="/framework/social-post-generator" color="currentColor">
    Generate multiple social media posts in a click of button using our social media generator.
  </Card>

  <Card title="Chat assistant" icon="comment" href="/framework/chat-assistant" color="currentColor">
    Using Knowledge Graph, our graph-based RAG solution, you can build chat assistants to quickly ask questions using your data sources.
  </Card>

  <Card title="Product description generator" icon="page" href="/framework/product-description-generator" color="currentColor">
    Build real-time digital shelves for hundreds of products that are automatically customized for different e-retailers.
  </Card>
</CardGroup>


# Page routes
Source: https://dev.writer.com/framework/page-routes



Framework apps can have multiple pages, with parametrised routes. Pages can be switched from the front-end or the back-end.

## Basic navigation

To enable navigation between *Page* components, they must have a key assigned. This can be set up from the component's settings. Once a key is set up, the page will be accessible at `/#my_page_key`.

### Frontend-triggered page changes

For basic page changes, assign a "Go to page" action to an event handler. For example, if you want to change to page `my_page_key` when a *Button* is clicked, go to the button's settings and under the `click` event select `Go to page "my_page_key"`.

### Backend-triggered page changes

Trigger a page change from the back-end using the `set_page` method of state.

```py  theme={null}
# This event handler sends the user to a different page
# depending on time of the day
def handle_click(state):
    from datetime import datetime

    now = datetime.now()
    if now.hour >= 18:
        state.set_page("fun_work_page")
    else:
        state.set_page("work_work_page")
```

## Routes with parameters

You may want to share a URL that links directly to a specific resource within your app. For example, to a specific location or product.

You can do so by specifying parameters in the URL, known as route vars. Framework URLs contain the page key, followed by the route vars and their values. For example, `/#detailPage/product_id=32&country=AR`.

### Adding vars to the URL from the back-end

You can set up variables that are displayed in the URL by passing a dictionary to the `set_route_vars` state method. Use `None` to clear specific keys.

```py  theme={null}
# The following code will set the value of product_id
# to the value of the "product" state element
def change_route_vars(state):
    state.set_route_vars({
        "product_id": state["product"]
    })
```

### Retrieving the values

Framework uses the hash portion of the URL to store page and variable data, so even when switching pages or changing variables, the page doesn't reload. To monitor changes to the active URL, set up an event handler for `wf-hashchange` in the *Root* component.

```py  theme={null}
# The following event handler reads the product_id route var,
# then assigns its value to the "product" state element.
def handle_hash_change(state, payload):
    route_vars = payload.get("route_vars")
    if not route_vars:
        return
    state["product"] = route_vars.get("product_id")
```


# Product description generator
Source: https://dev.writer.com/framework/product-description-generator



In this tutorial, you'll use the Writer Framework to build a Saturn Snacks product description generator for a variety of food outlets. After adding the initial functionality of the app, you'll also extend the app to include a chart of SEO keyword analysis and the ability for users to add their own food outlet.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_1.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7a650f72a50ecfe26f26954850752c7c" alt="Finished application" data-og-width="3220" width="3220" data-og-height="1478" height="1478" data-path="framework/images/tutorial/product_desciption/pd_gen_1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_1.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f51b23322b4be0350fb505dd6df579bb 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_1.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=1fb3fe7c91fd2ada3e63c50311d86a49 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_1.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f8c001b84134fc8ccb8b8e89148bc9e1 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_1.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=e96936de6c072de5d1dd7828e56d8886 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_1.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=1d0024d21a3ab9d9d313dcaf4f42eafe 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_1.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=5b359a2430a3e566d68de0367d2ccfd0 2500w" />

## Setting up your project

### Creating a Writer app and getting your API key

From the Home screen, click on **Build an app**.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_2.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=8982373a5960f4538f99cee7560e3b65" alt="Writer home screen" data-og-width="3220" width="3220" data-og-height="1900" height="1900" data-path="framework/images/tutorial/product_desciption/pd_gen_2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_2.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=5c2454d14780cf7aae43cb82253aa74c 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_2.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=51821cad51cfeaf32a13be0be4811e12 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_2.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=e2d473c6aac1012d979c30dac76f1866 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_2.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0a27dca388972153920ad509f1505305 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_2.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=dd34f18129689b559399163eba8a2184 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_2.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2983c5446c80f7211c90dcbe9a926580 2500w" />

Select Framework as the app type you’d like to create, enabling you to generate keys and build your app with the Writer Framework.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_3.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ca942a84ade3518427b5ccbc58a12f4f" alt="App type selection" data-og-width="3220" width="3220" data-og-height="1900" height="1900" data-path="framework/images/tutorial/product_desciption/pd_gen_3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_3.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=898d65a6574077b0db7681fc98b33964 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_3.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=260c95c4aa910af480100c09afd40e6c 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_3.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=fed60ebc4ab8f79d0f1d410dc9137af0 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_3.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=eb8c794b63d639d50fe2c4f473665348 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_3.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=927dc6214469ae5c129d59ed99ba7db2 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_3.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0ed409b8c656219754bca631d8659d7a 2500w" />

On the next screen, you can edit your Writer application name in the upper left. Underneath “Authenticate with an API key,” click on “Reveal” to see and copy your API key.

### Creating the application

Next, open your terminal and navigate to the directory where you want to create your application directory.

<Steps>
  <Step title="Set the API key environment variable">
    To pass your API key to the Writer Framework, you'll need to set an environment variable called `WRITER_API_KEY`. Here’s how you can set this variable in your terminal session:

    <CodeGroup>
      ```sh On macOS/Linux theme={null}
      export WRITER_API_KEY=[key]
      ```

      ```sh On Windows theme={null}
      set WRITER_API_KEY=[key]
      ```
    </CodeGroup>
  </Step>

  <Step title="Create the application">
    Run the following command to create your application. Replace `product-description-app` with your desired project name and `pdg-tutorial` with the template you wish to use:

    ```
    writer create product-description-app --template=pdg-tutorial
    ```

    This command sets up a new project called `product-description-app` in the specified directory using a template designed for this tutorial.
  </Step>

  <Step title="Edit your project">
    To edit your project, run the below commands. This will bring up the console, where Framework-wide messages and errors will appear, including logs from the API. By default, the Writer Framework Builder is accessible at `localhost:4005`. If that port is in use, you can specify a different port. Open this address in your browser to view your default application setup.

    <CodeGroup>
      ```bash Standard port theme={null}
       writer edit product-description-app
      ```

      ```bash Custom port theme={null}
       writer edit product-description-app --port=3007
      ```
    </CodeGroup>
  </Step>
</Steps>

## Introduction to the application setup

When you first start up the application, you're going to see two main layout items provided by the template:

1. A Header component with the name of the application
2. A Column container that'll house most of the UI of the app

The left column includes a form that has three text inputs and a button. These three text inputs are bound to corresponding state elements. The right column contains a Message component for loading and status messages, as well as an empty Tab container which you'll use to display the product descriptions of the various outlets.

### Code overview

Looking at the code in `main.py`, you'll see that the template already imported the Writer Framework, the AI module, and the product description prompts that you'll use throughout this tutorial.

```python  theme={null}
import writer as wf
import writer.ai
from prompts import base_prompts, user_prompt, seo_keywords
```

The prompts are stored in a separate file called `prompts.py`. You are welcome to open this project in the IDE of your choice and modify the prompts however you wish. However, you don't need to make any changes to this file to follow this tutorial.

You'll also see the state initialization:

```python  theme={null}
wf.init_state({
   "form": {
       "title": "",
       "description": "",
       "keywords": ""
   },
   "message": "Fill in the inputs and click \"Generate\" to get started.",
})
```

The form elements and the message have been initialized as strings. You'll add to this state dictionary throughout the tutorial.

## Implementing the Product description generator

Your first goal is to generate product descriptions for the various food outlets, with each outlet appearing as a tab to the right of the form.

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_4.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fdcee7cedc90faff3147219526a74da7" alt="Finished product description tabs" data-og-width="3220" width="3220" data-og-height="1630" height="1630" data-path="framework/images/tutorial/product_desciption/pd_gen_4.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_4.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=9e61507dde6186d0efbb4f51532e5325 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_4.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d73778b217624d68714c60dc01a7a200 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_4.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=075767fcb8a242fa50573fbda5134820 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_4.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=ba6d2ed4ec7410ee9c937e9677f70a8c 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_4.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=64ac8b47e3153d392b017a5e4cc6d606 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_4.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=435ffead4cc607517597846666addb87 2500w" />

### Setting up the code

First, integrate new functionality into your code for generating product descriptions.

<Steps>
  <Step title="Add a private helper method">
    Paste the following method on line 5 after all of the imports to create a helper function for generating product descriptions:

    ```python  theme={null}
    def _generate_product_description(base_prompt, product_info):
       prompt = base_prompt.format(**product_info)
       description = writer.ai.complete(prompt)
       return description
    ```

    This function, `_generate_product_description`, accepts a base prompt and the product information from a form on the page. The underscore at the beginning of its name indicates that it's a private method not exposed to the UI.
  </Step>

  <Step title="Initialize additional state elements">
    Update the `wf.init_state()` to include a `product_description` dictionary with visibility control and outlets for descriptions:

    ```python  theme={null}
    wf.init_state({
       "form": {
           "title": "",
           "description": "",
           "keywords": ""
       },
       "message": "Fill in the inputs and click \"Generate\" to get started.",
       "product_descriptions": {
           "visible": False,
           "outlets": {}
       }
    })
    ```

    This setup includes a variable `visible` to control whether product description tabs are shown or hidden, and an empty dictionary `outlets` for storing descriptions.
  </Step>

  <Step title="Add a button click handler">
    Paste the following method beneath `_generate_product_description` to handle button clicks and generate descriptions:

    ```python  theme={null}
    def handle_click(state):
       state["product_descriptions"]["visible"] = False

       # Loop through all the base prompts to generate versions tailored to each outlet
       for outlet, base_prompt in base_prompts.items():
           state["message"] = f"% Generating product description for {outlet}..."
           product_description = _generate_product_description(base_prompt, state["form"].to_dict())
           state["product_descriptions"]["outlets"][outlet] = product_description

       state["product_descriptions"]["visible"] = True
       state["message"] = ""
    ```

    This handler will loop through each imported base prompt, format it with the form information, and pass it to the helper method. The handler also manages UI interactions, such as displaying and hiding product descriptions and managing loading messages.
  </Step>
</Steps>

### Setting up the user interface

You can now set up the UI to iterate over the product descriptions dictionary and create tabs. Begin by opening the User Interface.

<Steps>
  <Step title="Add and configure the Repeater component">
    In the toolkit, drag a Repeater component from the Other section into the empty Tab Container. Click on the Repeater component to open its component settings. Under Properties, add `@{product_descriptions.outlets}` as the Repeater object to be used for repeating the child components. Replace the default “Key variable name” with `itemId`. You can leave “Value variable name” as `item`.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_5.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fc355793aa67411f6a538a293c43b411" alt="Repeater settings" data-og-width="3220" width="3220" data-og-height="1402" height="1402" data-path="framework/images/tutorial/product_desciption/pd_gen_5.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_5.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=79484e44a2a3c99a2951e8c1d4a9287a 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_5.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7548d28a47bdb889e4fe9b2ff33547af 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_5.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=177cc6261d00ece5aa6807529a619d85 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_5.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f92adf18c186b88825445b7e2d070d00 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_5.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=40e60532d8312f4b663c574d1fc35a4a 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_5.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7ec964b2b0aa78fcea6aac39817e81d2 2500w" />
  </Step>

  <Step title="Add and configure the Tab component">
    From the Layout section of the toolkit, drag a Tab component into the Repeater. Click on the Tab to bring up the component settings and add `@{itemId}` to the Name property to display the outlet name on the tab.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_6.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=b52573eaafb4307107563db4eaf73128" alt="Tab settings" data-og-width="3220" width="3220" data-og-height="572" height="572" data-path="framework/images/tutorial/product_desciption/pd_gen_6.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_6.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=705260ded9c5269cf53935ab0f162d7b 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_6.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=a25eac802081c1820e54869b0ed8bfe6 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_6.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=4b3bec98ba5f2d300dc3cb2202923eaf 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_6.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=e7c4467018b7ad8dfac2212b261766b4 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_6.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=ef75608900dfc90bad8c48324114f50d 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_6.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=8baf2962fd6ef6f46bbc857a4b439052 2500w" />
  </Step>

  <Step title="Add and configure the Text component">
    Drag a Text component from the Content section of the Toolkit into the Tab. Click on the Text component to open the Component settings and set the Text property to `@{item}`. You may also choose to set “Use Markdown” to “yes.”

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_7.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=51935abb3a9f642cfd11e0966936c602" alt="Text settings" data-og-width="3220" width="3220" data-og-height="972" height="972" data-path="framework/images/tutorial/product_desciption/pd_gen_7.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_7.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=5a505c334fd997502f45b0a436191cc4 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_7.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=bffa5b8209095892335f75f7215c1b48 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_7.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=8687b7c8a2d60b72eed4ee91bee622cb 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_7.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=432913911bbced0d1b40ebab3a2e9552 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_7.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f82908b6790844eb9e7d034003b703dd 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_7.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d5597445a5f231d2d4b975adc9cf19a7 2500w" />
  </Step>

  <Step title="Control the visibility of the Tab container">
    Click on the Tab container to bring up its Component settings. Scroll to the bottom and, under Visibility, click “Custom” and add `product_descriptions.visible` to the Visibility value input.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_8.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=07d61f8ca1ac93e21cf12561cfb07481" alt="Tab container visibility settings" data-og-width="3220" width="3220" data-og-height="690" height="690" data-path="framework/images/tutorial/product_desciption/pd_gen_8.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_8.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7506a44dffc772937092c197fc5cfc11 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_8.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=ad8e38732b4c09dc940a6c2cecf7c7c5 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_8.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=730d05796d4760dcf20c97dc5651b6ad 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_8.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=61abacda8ab17862c583fa33ddd6c77a 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_8.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=cf0b628590908ba3a8438ef827e2e940 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_8.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f4e55c6c761b92b38bfe9ac732862011 2500w" />
  </Step>

  <Step title="Wire up the form with the Generate button">
    Click on the Generate button inside the form to bring up its Component settings. In the Events section, select `handle_click` for the `wf-click` event.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_9.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=2732d5fb788b351d640f6f34676e76f3" alt="Button settings" data-og-width="3220" width="3220" data-og-height="566" height="566" data-path="framework/images/tutorial/product_desciption/pd_gen_9.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_9.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d6303dbaf51377170ecc88a90fe795d0 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_9.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=3662333ce52b85179ea821c7c10e9287 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_9.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d253a083db55b68430243ddf9d88968f 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_9.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=e4b05c62c02fac5f5c5cdb3d2be63c42 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_9.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=407c60da37223b1e68f4d7f0df3d03fd 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/product_desciption/pd_gen_9.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=1b7348732b4b2627517f9f53c415077c 2500w" />
  </Step>

  <Step title="Preview and test the application">
    Click **Preview** in the top toolbar, enter some test data, and click the **Generate** button. You should see a loading message, as well as three example food outlets displayed in the tabs. The loading message should disappear when everything is loaded, and the tab should remain visible once the data has loaded.

    Great work!
  </Step>
</Steps>

## Expanding the application: SEO keyword analysis

You can expand on this application by adding a chart that displays the top ten SEO keywords present in the product descriptions.

### Updating the code

To do this, back in the code, first add the following helper function underneath your ` _generate_product_description` helper method:

```python  theme={null}
def _generate_seo_keywords(outlets):
   combined_descriptions = "\n".join(f"{key}: {value}" for key, value in outlets.items())


   # Generate the prompt with the provided descriptions
   prompt = seo_keywords.format(descriptions=combined_descriptions)
   # Strip out whitespace and backticks from the response
   return writer.ai.complete(prompt).strip(" `\n")

```

This method concatenates all of the product descriptions and incorporates them into a prompt in `prompts.py`. It then sends the formatted prompt to the Palmyra LLM using the `complete` method. The prompt not only analyzes the descriptions for SEO keywords, but also outputs a [Plotly.js](/components/plotlygraph) schema object that you can use directly with a Plotly graph component.

With the helper method in place, you can now update the click handler for the button. On line 27, add the following code before the product description visibility is set:

```python  theme={null}
# Create the SEO analysis
   state["message"] = "Analyzing SEO keywords..."
   outlets = state["product_descriptions"]["outlets"]
   state["seo_analysis"] = _generate_seo_keywords(outlets)
```

This code sets the loading message and passes all of the product descriptions to the SEO keyword helper method.

### Adding SEO analysis to the UI

To update the UI to display this chart, first drag a new tab from the Layout section of the toolkit into the Tab container. This tab should not be inside of the Repeater, but can be either before or after it. Click on the tab to open the component settings, and change the name to “SEO Analysis.” If you'd like, you can also set the Visibility to “Custom” and set `seo_analysis` as the visibility value.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_10.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=67e6e702fc5c59121a6a5b32deb02bad" alt="SEO Tab" data-og-width="3220" width="3220" data-og-height="578" height="578" data-path="framework/images/tutorial/product_desciption/pd_gen_10.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_10.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ea0cd7696f191cc33fba836a85b9cdb3 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_10.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=47b0069b1f663f8ee5a4404f7d03ac29 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_10.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a57b70813e60af3b2adf271a8e056e04 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_10.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ede88933adfba60a96f605785803c6d1 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_10.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=684a352c0b7a09f8dee7e1f99f6c1c8d 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_10.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0550613714d5b5717b673841d9952148 2500w" />

To display the chart, drag a Plotly graph component from the Content section of the toolkit into your new tab. Click on the component to bring up the component settings. The Plotly graph component accepts a graph specification. Add `@{seo_analysis}` to pass the LLM-generated graph specification to the component.

Click preview, add some data to the form, and click generate. You should see a new SEO analysis tab appear with a nicely formatted and labeled chart.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_11.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=46c9e35d8235fa33e8a5637175275b67" alt="SEO analysis tab and chart" data-og-width="3220" width="3220" data-og-height="1300" height="1300" data-path="framework/images/tutorial/product_desciption/pd_gen_11.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_11.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=4669d84999baede47a87902d23be2b1e 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_11.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=65114d024289d2b777cbbe6d38d0ea37 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_11.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=67918c739a5aff5808b75a4b2d8c9088 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_11.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2834a67c7d97601da15c0922db0576fb 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_11.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=55c5ce937242e60dda961ea5889faf47 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_11.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=6db3aad9d9e7aae1a42219dfac6b86ea 2500w" />

## Extending the application: user-added outlet

Finally, you can extend this application even further by allowing users to add their own custom food outlet and derive a new description from a custom prompt.

### Adding the new form

Start by building the UI for this new form. From the Layout section of the Toolkit, drag a new Section component into the column where the current form is and drop it above or below it. Click on the Section and change the Name to “Add an outlet.”

To create the inputs for the form, drag a Text Input and a Number Input from the Input section of the Toolkit into the newly created section. Click on the Text Input component to change the Label to “Outlet name.” Click on the Number Input and change the label to “Character max.”

Finally, add a Button from the Other section of the toolkit to the bottom of the new section. Click on the button and change the text to “Add and Generate.” You can also add `laps` or another [Material Symbols](https://fonts.google.com/icons) ID to the Icon input if you wish.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_12.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=239f082ca68d09a76779f48ccd55e783" alt="Add outlet form" data-og-width="3220" width="3220" data-og-height="740" height="740" data-path="framework/images/tutorial/product_desciption/pd_gen_12.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_12.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=44c25a82313f0f00e95ad8e112c725ea 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_12.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=71abb40de349904112493f96e0f52363 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_12.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a43591a160388f83d2bc3dae0f661685 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_12.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=d5a5c4d570fea7ee64b6a5c7e3abd4e6 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_12.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=c88d37f4240c2a2925187a2ce8dd62dc 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_12.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=3396f96b72b7baae6f16b3e3a82035ab 2500w" />

### Updating the code

In the code, you next need to add corresponding state elements for the new form components to `wf.init_state()`. Add the following to the state dictionary:

```python  theme={null}
"outlet_form": {
       "name": "",
       "character_max": "",
   },
```

Don't forget to check your commas when adding to the state dictionary. Your completed state should look like this:

```python  theme={null}
wf.init_state({
   "form": {
       "title": "",
       "description": "",
       "keywords": ""
   },
   "outlet_form": {
       "name": "",
       "character_max": "",
   },
   "message": "Fill in the inputs and click \"Generate\" to get started.",
   "product_descriptions": {
       "visible": False,
       "outlets": {}
   }
})
```

The `outlet_form` state elements will bind to the form elements.

Next, add the click handler for the new button. Copy and paste this `handle_add_outlet` method into the code under the `handle_click` method:

```python  theme={null}
def handle_add_outlet(state):
   # Create a new base prompt for the new outlet
   new_outlet_name = state["outlet_form"]["name"]
   product_info = {**state["outlet_form"].to_dict(), **state["form"].to_dict()}
   base_prompt = user_prompt.format(**product_info)


   # Add the new base prompt to the base_prompts dictionary
   base_prompts[new_outlet_name] = base_prompt


   # Generate the product description for the new outlet
   state["message"] = f"% Generating product description for {new_outlet_name}..."
   product_description = _generate_product_description(base_prompt, state["form"].to_dict())
   state["product_descriptions"]["outlets"][new_outlet_name] = product_description


   # Update the SEO analysis
   state["message"] = "Updating SEO analysis..."
   outlets = state["product_descriptions"]["outlets"]
   state["seo_analysis"] = _generate_seo_keywords(outlets)


   state["message"] = ""
```

This method formats the input from both forms into the imported `user_prompt` and adds the formatted prompt to the `base_prompts` dictionary. It then generates the product description for the new food outlet, updates the SEO analysis, and clears the status message.

### Binding the elements and handler to the UI

Finalize your setup by binding the state elements and configuring the click handler to the UI components.

<Steps>
  <Step title="Bind text inputs to state elements">
    * **Outlet Name**: Click on the “Outlet name” Text Input component. In the Binding section of the component settings, set the state element to `outlet_form.name`.
    * **Character Max**: Move to the “Character max” Text Input. Update its state element binding to `outlet_form.character_max`.
  </Step>

  <Step title="Assign click handler to button">
    Click on the **Add and Generate** Button. In the Events section of the component settings, select `handle_add_outlet` for the `wf-click` event.
  </Step>

  <Step title="Configure form visibility">
    To conditionally display the form based on whether descriptions have been generated, click on the Section containing the form. In the Visibility section, choose “Custom” and set `product_descriptions.visible` as the “Visibility value.”
  </Step>
</Steps>

### Testing the finished product

To see the result of your hard work, click **Preview** in the top toolbar, enter some information into the original product description form, and click **Generate**. The “Add an outlet” form should appear once the product descriptions have been generated. Add a new example outlet name and a character max and click “Add and Generate.” You should see a new tab appear with your new outlet, as well as an updated SEO analysis chart.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_13.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=59ef5c5e0698b04cf625075ace0b9338" alt="Finished application" data-og-width="3220" width="3220" data-og-height="1478" height="1478" data-path="framework/images/tutorial/product_desciption/pd_gen_13.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_13.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=05bec1820af5f3d82f59be591dea578a 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_13.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0f5a48f94d10930266fa2d96a749cadd 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_13.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=59f25090ea6058766b48616611449cbe 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_13.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2cc2e102409467d2afa635d12e01972d 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_13.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=e16c4506317a30b4c5f5ce1da859aa5d 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/tutorial/product_desciption/pd_gen_13.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2ae801ff28a1ee5cc676e1237d7e9f19 2500w" />

You can add whatever additional form inputs you wish to the outlet form, but be sure to update `user_prompt` in the `prompts.py` file using your favorite editor.

## Conclusion

You’ve now built a full application with the Writer Framework and the Writer AI module. Congratulations! This application not only demonstrates the platform's capabilities but also provides a foundation on which you can build more complex applications. To learn more, explore the rest of the Writer Framework documentation and the API documentation.


# Quickstart
Source: https://dev.writer.com/framework/quickstart



## Overview

In this guide, you'll learn how to get started with the Writer Framework by building a simple "Hello, World" application. This beginner-friendly guide will help you install the necessary tools, set up an app, and deploy it to the Writer Cloud.

## Step 1: Install Writer Framework and run the demo app

<Tip>
  Writer Framework works on Linux, Mac, and Windows. It supports Python versions 3.9.2 through 3.12. We recommend using a virtual environment.
</Tip>

<Warning>
  Python 3.13 is not yet supported.
</Warning>

<Steps>
  <Step title="Install Writer Framework">
    Use the following command to install the Writer Framework using `pip`. Open your command line interface and type:

    ```bash  theme={null}
    pip install writer
    ```

    This will download and install the Writer Framework and all its required dependencies.
  </Step>

  <Step title="Test installation with demo application">
    Once the installation is complete, you can verify that everything is set up correctly by running the built-in demo application. Navigate to your desired directory and type:

    ```bash  theme={null}
    writer hello
    ```

    This command creates a subfolder named **hello** and launches the Writer Framework, opening a visual editor accessible through a local URL displayed in your command line. This demo app illustrates the different components available in Writer Framework, helping you get familiar with the setup.
  </Step>
</Steps>

## Step 2: Create a new framework app

Now that we've tested the setup, let's create our first "Hello, World" app using the `ai-starter` template. This template showcases how quickly you can build AI-powered applications with the Writer Framework.

Use the following command to generate the app structure:

```sh  theme={null}
writer create hello-world --template=ai-starter
```

This will create a new app folder, **hello-world**, with the following structure:

1. `main.py` - The entry point for the app. You can import anything you need from here.
2. `.wf/` - This folder contains the UI component declarations. Maintained by the Writer Framework's visual editor.
3. `static/` - This folder contains front-end static files which you might want to distribute with your app, such as images and stylesheets.

## Step 3: Start the visual editor

To start building and customizing your app visually, use the Writer Framework’s editor. This browser-based interface allows you to drag components, arrange layouts, and modify settings in real-time.

```sh  theme={null}
writer edit hello-world
```

After running this command, you'll see a local URL displayed in your command line. Open this URL in a web browser to access the editor.

<Frame caption="Writer Framework editor opens at https://localhost:4005">
  <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-editor.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2be4a0fe511cc3244386d117f8139925" data-og-width="2880" width="2880" data-og-height="1534" height="1534" data-path="framework/images/quickstart/hello-world-editor.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-editor.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=64bdfbb88892795e44e734ebb8055324 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-editor.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=021e4c9da601ea5ccc372c4af00656c7 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-editor.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=c260f58560d24929d43a72dbec4465f1 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-editor.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=42955ffd65cda48ebb771b06a1403811 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-editor.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=dcecfcf0fc56895c51c3a12fa43bee4d 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-editor.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=8595c37d9f9caee6408a39616ed922dd 2500w" />
</Frame>

<Steps>
  <Step title="Launch the Editor">
    In your terminal, enter the following command to open the editor:

    ```sh  theme={null}
    writer edit hello-world
    ```

    This command opens the Writer Framework editor in your browser, where you’ll see a live preview of your app. The editor interface includes a **component library** on the left, a **canvas** in the center for building layouts, and a **settings panel** on the right for customizing selected components.

    <Info>
      The editor starts by default on port 4005. If you launch multiple editors in parallel and do not specify a port, Writer Framework will automatically assign the next port until reaching the limit of 4099.
    </Info>

    <Warning>
      It's not recommended to expose the Framework to the Internet. If you need to access the editor remotely, we recommend setting up an SSH tunnel. By default, requests from non-local origins are rejected as a security measure to protect against drive-by attacks.

      If you need to disable this protection, use the flag `--enable-remote-edit`.
    </Warning>
  </Step>

  <Step title="Add Components to Your Canvas">
    On the left sidebar, browse through the **Component Library** and try dragging a few components onto the **Canvas**. For example, you can add a **Text** component to display "Hello, World!" or try other components to see how they work together.

    Experiment with arranging these components on the canvas to create a simple layout.

    <Frame caption="Writer Framework launches the app at https://localhost:3005">
      <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-preview.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=efd8538a582610e7e070c65c9ea716cf" data-og-width="2878" width="2878" data-og-height="1540" height="1540" data-path="framework/images/quickstart/hello-world-preview.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-preview.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a98d38bbd870eb8afc6da07181724cd2 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-preview.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ff4246304eb559c532676aa3b9406801 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-preview.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=28743895e5195bc10c9cad763dfce3e9 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-preview.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7007122b1b788719343f7fb2d5badd64 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-preview.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=26c900993c52a619d6c3f61245b81e5d 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-preview.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=4f5d47c453de22721b98dd2b1fee56ff 2500w" />
    </Frame>
  </Step>

  <Step title="Customize Component Settings">
    With a component selected, look at the **Settings Panel** on the right side. Here, you can edit properties like text content, colors, and alignment to see how it changes the appearance and behavior of the component on the canvas.

    This panel allows you to customize components without writing any code, giving you a quick and visual way to build a frontend.
  </Step>

  <Step title="Change the App Name in main.py">
    To personalize your app further, open `main.py` in the root of your project folder. Locate the following line:

    ```python  theme={null}
    wf.init_state({
        "my_app": {
            "title": "AI STARTER"
        },
    })
    ```

    Change `"AI STARTER"` to something unique, like `"My First Writer App"`. Save the file, and you’ll see the updated name reflected immediately in the editor.

    <Frame caption="App name updated in the Writer Framework editor">
      <img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-app-name.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=d013c1f5ead0a788818488b27ae7ca5e" data-og-width="2878" width="2878" data-og-height="1536" height="1536" data-path="framework/images/quickstart/hello-world-app-name.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-app-name.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=70f587967ebb949302fc4b2a999731ca 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-app-name.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f7602f2fe1abe6f7b76c3c9aca3abcad 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-app-name.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=90b0261d210fa45792fb7657ae1c0d17 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-app-name.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=77be8416e04d16d0637acf411a35fa72 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-app-name.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=1452827ac46582754be832d52b9d39c5 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/hello-world-app-name.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=4a9fae9dc444ec2ef32d4c991fc5565c 2500w" />
    </Frame>
  </Step>
</Steps>

For now, this simple exploration gives you an idea of how the framework enables rapid frontend building without code. In later tutorials, like creating a [Chat assistant](/framework/chat-assistant) or a [Social post generator](/framework/social-post-generator), you’ll explore more advanced components and layouts using this visual editor.

## Step 4: Run the app locally

When your app is ready, execute the `run` command, which will allow others to run, but not edit, your Framework app.

```sh  theme={null}
writer run hello-world
```

<Info>
  Your app starts by default on port 3005. If you launch multiple apps in parallel and do not specify a port, Writer Framework will automatically assign the next port until reaching the limit of 3099.
</Info>

You can specify a port and host. Specifying `--host 0.0.0.0` enables you to share your application in your local network.

```sh  theme={null}
writer run hello-world --port 5000 --host 0.0.0.0
```

## Conclusion

Congratulations! You’ve set up and configured your first app with the Writer Framework. Now, try building a [Chat assistant](/framework/chat-assistant) or a [Social post generator](/framework/social-post-generator) to put these skills into action.


# Quickstart tutorial
Source: https://dev.writer.com/framework/quickstart-tutorial



In this tutorial, we'll guide you through creating a logistic regression visualisation tool using Framework. Logistic regression is a fundamental technique in machine learning for binary classification tasks, and visualising its decision boundary can provide valuable insights into the model's behaviour.

First, make sure you have Framework installed. You can install it via pip:

```bash  theme={null}
pip install "writer"
```

Now, let's get started with creating our logistic regression visualisation tool. We'll break down the process into the following steps:

1. Setup Project
2. UI Creation
3. App state and bindings
4. Python implementation
5. Troubleshooting

So, without further ado, let's jump into it.

## Project Setup

To create our project, we will use the following commands:

```bash  theme={null}
writer create logistic_regression
cd logistic_regression
```

Commands will create basic template of app project with initial file structure.
In this project, we will be using the scikit-learn package for logistic regression, so let's install it before we start.
Create a file `requirements.txt` and add the following line:

```
scikit-learn==1.4.0
```

After that, we can install our requirements.

```bash  theme={null}
pip install -r requirements.txt
```

Once this is done, we can finally run the Framework editor using the command:

```bash  theme={null}
writer edit .
```

This will run our Framework instance. Runtime logs can be observed in the terminal, and the app is available at [http://localhost:4005](http://localhost:4005).

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/new_app.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=90a1829bddec02dbcbe2aef578e0369d" alt="newly created application" data-og-width="2976" width="2976" data-og-height="1376" height="1376" data-path="framework/images/quickstart/new_app.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/new_app.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f95ceb4991f15f0282b4977556ebd3e5 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/new_app.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=14a128a0735b02cf7e03317e6bc8b688 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/new_app.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=1227f73317f09711fb9aade51ea500a1 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/new_app.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=6653b7466ab5cf57c5c686d1558f06f4 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/new_app.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a2448de32891d25dc97e9b74830f96c2 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/new_app.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a0bf88d0a8a72c02ab3dfd6bebbaf9be 2500w" />

## UI Creation

By default, Framework creates a simple application with a counter. To keep things easy, let's remove the contents from columns to make space for our new application. If you're unsure where to click to select a specific component on the screen, you can always use the `Component Tree` on the bottom left of the screen. The app should look something like this when you finish.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/empty_app.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=0120edcb6cc46ea3ccf4e95dbf535653" alt="empty app" data-og-width="2394" width="2394" data-og-height="362" height="362" data-path="framework/images/quickstart/empty_app.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/empty_app.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=22603c8b30f52653b87fe2f1c1c110f8 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/empty_app.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=62294194b6d98685835ccca7154fc224 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/empty_app.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=39f8c8a2c5f8e09418247b9fd973b5c1 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/empty_app.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=77e767de087885a779a50bd9fc902c59 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/empty_app.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a3b6691cc79bc7d361a0b30f7c22f379 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/empty_app.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ffc5fa7ce47a4086d900130b56b44932 2500w" />

This app will be made up of 2 columns, one with controls for our plot and the second with the plot itself. Half of the screen is way too much for controls, and the plot will be really small this way. To change the proportions of the columns, change the value of `Width (factor)` in the left column to `0.5`.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/column_width.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b595f5e72b470574cd38b3daf1e33530" alt="width controls" data-og-width="2394" width="2394" data-og-height="752" height="752" data-path="framework/images/quickstart/column_width.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/column_width.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f84c330f4d25b00323b7161c4c410d53 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/column_width.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=eb610969ae62a6d168ad4071b618bf24 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/column_width.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=84426ff0bca5cdf86879e2901d3ab72f 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/column_width.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=bdb9a9c8a7071a99f02eeed0c2922b80 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/column_width.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=cf7f847d3280bf0ff56b696e848f95bb 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/column_width.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=717ae3f4fe304c12b5836d7b9fc715e1 2500w" />

This way, it will take just `1/3` of the screen. Proportions are calculated relative to each other. Each *Column*, by default, has the value of this factor set to 1. So, when we set the left column to 0.5 and the right to 1, we will get a relation between column sizes of 1:2.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/placing_elements.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=17eb9b9c28ffd6950384acd586f42ebb" alt="placing elements" data-og-width="2394" width="2394" data-og-height="752" height="752" data-path="framework/images/quickstart/placing_elements.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/placing_elements.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2d11119480879f97b37065c9bd23c41d 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/placing_elements.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=61450a8698c9c4c53dc2afea28ed3a52 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/placing_elements.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2fc3718687840c80843d9c6a07a5cacb 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/placing_elements.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=547b57dfe64c3f829c24af76dbca6b86 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/placing_elements.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=74cbc272cefc0437b35188f19d82e5ed 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/placing_elements.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=efa482d8b32a5f884b85f6b482793c78 2500w" />

Now let's add the rest of the components:

* To the right column, add a *Plotly Graph*.
* To the left:
  * 3 x *Slider Input*
  * *Dropdown Input*
  * *Button*.
* To the free space in the header, let's place a *Message* component.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/ui_boilerplate.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=d34c152cdbe1dba20fa9817894d777da" alt="ui boilerplate" data-og-width="2394" width="2394" data-og-height="1168" height="1168" data-path="framework/images/quickstart/ui_boilerplate.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/ui_boilerplate.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=6c7c85cbcafd1ba4fa49b3069b8ae5be 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/ui_boilerplate.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=141db5c5f7315d7a7ff932da6b49ddb7 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/ui_boilerplate.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f8a53759d868e05fe94af8d4b51eba8b 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/ui_boilerplate.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f6e94d3d954039e8af92f6ddb2d6df9e 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/ui_boilerplate.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=4dae3d77235d5efd8fcfe4f089bcc1b8 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/ui_boilerplate.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=22739c46bd18571fd66e5191d81d02d1 2500w" />

Now we can configure components with some static settings. You can find all the configuration options in right sidebar. Sidebar will apear after selecting the component using mouse click. Starting with slider inputs, let's set all 3 sliders configuration values to the following values:

|    Property   | Value (Slider 1) | Value (Slider 2) | Value (Slider 3)  |
| :-----------: | :--------------- | :--------------- | :---------------- |
|     Label     | Number of groups | Number of points | Cluster deviation |
| Minimum value | 2                | 50               | 0                 |
| Maximum value | 10               | 1000             | 10                |
|   Step size   | 1                | 1                | 0.1               |

Then for the dropdown, we will set:

| Property | Value                                                  |
| :------: | :----------------------------------------------------- |
|   Label  | Type                                                   |
|  Options | set `JSON` and paste:                                  |
|          | `{"ovr": "One vs Rest", "multinomial": "Multinomial"}` |

And in the end lets rename the button.

| Property | Value      |
| :------: | :--------- |
|   Text   | Regenerate |

## App State and Bindings

It is time to create the application's initial state. Let's open the code editor. In this tutorial, we will be using the built-in code editor, which can be found by clicking on the 'Code' button at the top of the screen. However, if you prefer using your favourite editor, you can simply edit the `main.py` file, and the app will auto-refresh every time the file is changed.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/code_editor.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=6400799d646b9e75f11e730f61e759e3" alt="code editor" data-og-width="2478" width="2478" data-og-height="994" height="994" data-path="framework/images/quickstart/code_editor.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/code_editor.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=041cf7606f94e76c33f3e3ffeae6ee8e 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/code_editor.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=2ad9fc4bf80cb783b29dabb4db664405 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/code_editor.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=3c03e9222600cdc26f16af0f50579b56 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/code_editor.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=fadf1244bab62f0ead24ea7e097c1a08 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/code_editor.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=66fe3b8d2b55f4966ae670fae4da71a5 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/quickstart/code_editor.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=a4b2eb63e31b134d8b7238ca19600801 2500w" />

Let's remove all code from there and start with:

```python  theme={null}
import writer as wf
import plotly.graph_objects as go
from sklearn.linear_model import LogisticRegression
from sklearn.datasets import make_blobs

initial_state = wf.init_state({
    "my_app": {
        "title": "Logistic Regression Visualiser"
    },
    "message": None,
    "figure": None,
    "multi_class": "ovr",
    "number_of_groups": 2,
    "number_of_points": 50,
    "cluster_std": 2,
})
```

For now, only the Framework import is needed, but the rest will be used later on. Notice that after pasting this code into the editor, when we click on `Save and run`, the header of our application will immediately change to "Logistic regression visualiser". This is because the Header has in its text property the value `@{my_app.title}`, which is a template syntax that uses a value from the state.

The rest of the keys and values from the `initial_state` are names and initial values for components that will be used for communication between the app UI and the back-end. Assigning those keys to components is called binding, and it is done by clicking on each component and filling property "State element" in the "Binding" menu. Let's use these bindings for our 3 *Slider Input* components:

|    Property   | Value (Slider 1)   | Value (Slider 2)   | Value (Slider 3) |
| :-----------: | :----------------- | :----------------- | :--------------- |
| State element | `number_of_groups` | `number_of_points` | `cluster_std`    |

For the *Dropdown Input*:

|    Property   | Value         |
| :-----------: | :------------ |
| State element | `multi_class` |

If you closely follow my steps, the massage component can be hidden behind the right bar. Use the `Component Tree` to click the element and open the `Properties` menu.

*Message* component doesen't have bindings but we still can use template syntax to use data from the state inside of a `Message`. Additionaly we are able to use this data to control the visibility of the component.

|     Property     | Value        |
| :--------------: | :----------- |
|      Message     | `@{message}` |
|    Visibility    | `custom`     |
| Visibility value | `message`    |

This way, the *Message* component will show only if there is a message to display.

For *Plotly Graph* we use template syntax again:

|       Property      | Value       |
| :-----------------: | :---------- |
| Graph specification | `@{figure}` |

Congratulations! You have just connected all components to the application state. Nothing is happening yet. Now, we are ready to make it alive. It's time for python!

## Python implementation

Let's create a function that will update our application based on inputs and call it immediately.

```python  theme={null}
def update(state):
   state["message"] = "Hello, world!"

update(initial_state)
```

Notice that *Message* showed up, and it is now displaying the message "Hello, World!". To have better access to state parameters and to make it clear on which parameters our function depends, we define them at the top of the function. Notice that some of them need to be mapped to appropriate types. The *Slider Input* returns float values by default, so here, as we will need integers, we cast values to int.

```python  theme={null}
def update(state):
    cluster_std = state['cluster_std']
    multi_class = state['multi_class']
    number_of_points = int(state['number_of_points'])
    number_of_groups = int(state['number_of_groups'])
```

In this example, we create a logistic regression visualisation, but the algorithm itself is not in the scope of this tutorial. So we will just use the basic function from the `scikit-learn` library.

```python  theme={null}
    X, y = make_blobs(
        n_samples=number_of_points,
        n_features=2,
        cluster_std=cluster_std,
        centers=groups
    )

    clf = LogisticRegression(
        solver="sag",
        max_iter=1000,
        random_state=42,
        multi_class=multi_class
    ).fit(X, y)

    coef = clf.coef_
    intercept = clf.intercept_
    score = clf.score(X, y)
```

`make_blobs` will generate `number_of_points` points on a 2D space that have a cluster deviation set to `cluster_std` and the number of groups defined by `number_of_groups`. After that, we generate a LogisticRegression, and we take parameters we need. For better knowledge about the process, let's display the training score as a message.

```python  theme={null}
    state["message"] = "training score : %.3f (%s)" % (score, multi_class)
```

The algorithm will generate one or many lines depending on how many groups we have. To be able to draw those lines, let's create a helper function:

```python  theme={null}
def _line(x0, coef, intercept, c):
    return (-(x0 * coef[c, 0]) - intercept[c]) / coef[c, 1]
```

This function is a helper function meant to be used on the back-end. The underscore at the beginning of its name tells Framework that this function is private, and the front-end won't know about its existence.

To make the plot more readable, let's quickly define some colours for our plots:

```python  theme={null}
COLOR = {
    0: '#3c64fa',
    1: '#00eba8',
    2: '#5a677c',
    3: '#ff8866',
    4: '#d4b2f7',
    5: '#c3e6ff',
    6: '#045758',
    7: '#001435',
    8: '#ec3d10',
    9: '#38006a'
}
```

Now, let's create a plot for our logistic regressions. For that, we will use `plotly.graph_objects` to have full control over what will be included in our plot.

```python  theme={null}
    data = []
    for i in range(number_of_groups):
        data.append(
            go.Scatter(
                x=X[y == i][:, 0],
                y=X[y==i][:, 1],
                mode='markers',
                name='Group '+str(i),
                hoverinfo='none',
                marker=dict(
                    color=COLOR[i],
                    symbol='circle',
                    size=10
                )
            )
        )

    for i in range(1 if number_of_groups < 3 else number_of_groups):
        data.append(go.Scatter(
            x=[-20, 20],
            y=[
                _line(-20, coef, intercept, i),
                _line(20, coef, intercept, i)
            ],
            mode='lines', 
            line=dict(color=COLOR[i], width=2),
            name='Logistic Regression'
        ))

    layout = go.Layout(
        width=700,height=700,
        hovermode='closest', hoverdistance=1,
        xaxis=dict(
            title='Feature 1',
            range=[-20,20],
            fixedrange=True,
            constrain="domain",
            scaleanchor="y",
            scaleratio=1
        ),
        yaxis=dict(
            title='Feature 2',
            range=[-20,20],
            fixedrange=True,
            constrain="domain"
        ),
        paper_bgcolor='#FFFFFF',
        margin=dict(l=30, r=30, t=30, b=30),
    )

    fig = go.Figure(data=data, layout=layout)
    state['figure'] = fig
```

After saving and running the code, we should get something like this:

But as you could notice, when we change our slider values, nothing happens. It's because our function is currently called only once on app initialisation and not after input changes. To change this behaviour, let's set the event handler for `wf-number-change` in all slider inputs to `update`, which is the name of our function in the Python code. Notice that `_line` is not visible there because it's private to the back-end. If we would change its name to `line`, then it would be visible on this list.

Set also event handler for dropdown input `wf-option-change` and `wf-click` in the button, also to `update`.

And done! You can have fun with your new application. Feel free to modify and play with other options.

Final code for the application should look something like this:

```python  theme={null}
import writer as wf
import plotly.graph_objects as go
from sklearn.linear_model import LogisticRegression
from sklearn.datasets import make_blobs

COLOR = {
    0: '#3c64fa',
    1: '#00eba8',
    2: '#5a677c',
    3: '#ff8866',
    4: '#d4b2f7',
    5: '#c3e6ff',
    6: '#045758',
    7: '#001435',
    8: '#ec3d10',
    9: '#38006a'
}

def _line(x0, coef, intercept, c):
    return (-(x0 * coef[c, 0]) - intercept[c]) / coef[c, 1]

def update(state):
    cluster_std = state['cluster_std']
    multi_class = state['multi_class']
    number_of_points = int(state['number_of_points'])
    number_of_groups = int(state['number_of_groups'])

    X, y = make_blobs(
        n_samples=number_of_points,
        n_features=2,
        cluster_std=cluster_std,
        centers=number_of_groups
    )

    clf = LogisticRegression(
        solver="sag",
        max_iter=1000,
        random_state=42,
        multi_class=multi_class
    ).fit(X, y)

    coef = clf.coef_
    intercept = clf.intercept_
    score = clf.score(X, y)

    state["message"] = "training score : %.3f (%s)" % (score, multi_class)

    data = []
    for i in range(number_of_groups):
        data.append(
            go.Scatter(
                x=X[y == i][:, 0],
                y=X[y==i][:, 1],
                mode='markers',
                name='Group '+str(i),
                hoverinfo='none',
                marker=dict(
                    color=COLOR[i],
                    symbol='circle',
                    size=10
                )
            )
        )

    for i in range(1 if number_of_groups < 3 else number_of_groups):
        data.append(go.Scatter(
            x=[-20, 20],
            y=[
                _line(-20, coef, intercept, i),
                _line(20, coef, intercept, i)
            ],
            mode='lines', 
            line=dict(color=COLOR[i], width=2),
            name='Logistic Regression'
        ))

    layout = go.Layout(
        width=700,height=700,
        hovermode='closest', hoverdistance=1,
        xaxis=dict(
            title='Feature 1',
            range=[-20,20],
            fixedrange=True,
            constrain="domain",
            scaleanchor="y",
            scaleratio=1
        ),
        yaxis=dict(
            title='Feature 2',
            range=[-20,20],
            fixedrange=True,
            constrain="domain"
        ),
        paper_bgcolor='#EEEEEE',
        margin=dict(l=30, r=30, t=30, b=30),
    )

    fig = go.Figure(data=data, layout=layout)
    state['figure'] = fig


initial_state = wf.init_state({
    "my_app": {
        "title": "Logistic regression visualizer"
    },
    "message": None,
    "figure": None,
    "multi_class": "ovr",
    "number_of_groups": 2,
    "number_of_points": 50,
    "cluster_std": 2,
})

update(initial_state)
```

## Troubleshooting

### Errors

When your code has an error, you will be notified with a notification in the app, and also in the console, you can find useful logs.

### Debugging

To check some intermediate values in your Python code, you can just use `print()` function. All logs will be available in the terminal.

## Conclusion

Congratulations! You've successfully created a logistic regression visualisation tool using Framework. You can further customise and enhance this tool to suit your specific needs.

## Additional Resources

* [Scikit-learn Documentation](https://scikit-learn.org/stable/)
* [Plotly Documentation](https://plotly.com/python/)

Feel free to explore these resources to deepen your understanding and expand your capabilities.


# Release notes generator
Source: https://dev.writer.com/framework/release-notes-generator



In this tutorial, you'll build a release notes generator using the Writer Framework. This application will help you generate release notes as formatted HTML for software updates based on user-provided data as a CSV file. You can check out the [finished code on GitHub](https://github.com/writer/framework-tutorials/tree/main/release-notes-generator/end) to see what you'll be building.

The application consists of two main parts: the backend, which processes the uploaded CSV file and generates the release notes, and the frontend, which displays the release notes and allows users to download them.

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=842fe3a65cd5dcec1b0ec64bc90a9061" alt="Finished release notes generator application" data-og-width="2796" width="2796" data-og-height="1770" height="1770" data-path="framework/images/tutorial/release_notes/release_gen_1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=a7c0b5050bcac5a036f8afa898e7d5c5 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6eef2b5721db45f54ba87153eaa91bc0 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c021dae5ee21fe94ed991f386ee6b4e5 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=813be44403398b1910a43620e8549c26 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=41150f9e21c0cb065953b7305916a97a 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=823041196341ae3aae6bbcd53314fc59 2500w" />

## Setting up your project

### Creating a Writer app and getting your API key

From the Home screen, click on **Build an app**.

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_2.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6420bb80483e26ad584e64c621ef5dba" alt="Writer home screen" data-og-width="3220" width="3220" data-og-height="1900" height="1900" data-path="framework/images/tutorial/release_notes/release_gen_2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_2.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=9ee3873817474f643173b6b5439bbc1d 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_2.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=744e7ba28716b276a9114290df68bb48 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_2.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=da16556cef0d832b92cd93e51189c107 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_2.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=245d891b790829db3991d7133b761fe7 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_2.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=9b7692b18e01d09f81b9fa3ffd36b7c8 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_2.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0bd6609693719064e2ee77c0047cd8e8 2500w" />

Select Framework as the app type you want to create, enabling you to generate keys and build your app with the Writer Framework.

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_3.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=4a22fd9137c9e7bd6374de85e06ba13c" alt="App type selection" data-og-width="3220" width="3220" data-og-height="1900" height="1900" data-path="framework/images/tutorial/release_notes/release_gen_3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_3.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fde3b8970fd46926f967e5b0c3b65f23 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_3.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=da971e1c5a0501aa3f1ecc991fe01ae8 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_3.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=3f9d1352354af9c51d4d625877bb335a 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_3.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=1c8aab7bb8f8971922c878b93d3a8963 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_3.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=adda077d6444acb862932b5f58991595 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_3.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=5c13cb9723f064af4be24c62d284e977 2500w" />

On the next screen, you can edit your Writer application name at the top left. Underneath "Authenticate with an API key," click "Reveal" to view and copy your API key.

### Creating the application

Next, open your terminal and navigate to the directory where you want to create your application directory.

<Steps>
  <Step title="Set the API key environment variable">
    To pass your API key to the Writer Framework, you'll need to set an environment variable called `WRITER_API_KEY`. Here's how you can set this variable in your terminal session:

    <CodeGroup>
      ```sh On macOS/Linux theme={null}
      export WRITER_API_KEY=[key]
      ```

      ```sh On Windows theme={null}
      set WRITER_API_KEY=[key]
      ```
    </CodeGroup>
  </Step>

  <Step title="Clone the application">
    Run the following command to clone the `framework-tutorials` repo and navigate to the folder containing the starting point for this application.

    ```
    git clone https://github.com/writer/framework-tutorials.git
    cd framework-tutorials/release-notes-generator/start
    ```
  </Step>

  <Step title="Edit your project">
    To edit your project, run the following commands. This will bring up the console, which displays Framework-wide messages and errors, including logs from the API. By default, the Writer Framework Builder is accessible at `localhost:4005`. If this port is in use, you can specify a different port. Open this address in your browser to view your default application setup.

    <CodeGroup>
      ```bash Standard port theme={null}
       writer edit .
      ```

      ```bash Custom port theme={null}
       writer edit . --port=3007
      ```
    </CodeGroup>
  </Step>
</Steps>

## Introduction to the application setup

The template includes some basic code, UI setup, and files to help you get started.

### Included files

The files `prompts.py` and `html_template.py` contain helper functions for generating prompts for the AI model and formatting the output HTML, respectively.

In the `sample-input` folder, you'll find a sample CSV file that you can use to test the application.

Finally, the `custom.css` file in the `static` folder contains custom CSS styles for the application.

### Dependency imports

In `main.py`, you'll see that the dependencies are already imported at the top:

```python  theme={null}
import writer as wf
import writer.ai
import pandas as pd
from prompts import get_release_notes_summary_prompt, get_release_notes_desc_prompt, get_category_prompt
from html_template import format_output
```

These dependencies include the Writer Framework, the Writer AI module, and pandas for data manipulation.

### Initial UI

The template includes a basic UI setup, including a Page component with a Header component. The Header component also includes an Image. If you want to change the logo image, you can replace the `logo_image_path` variable in the state with the path to your desired image in the `static` folder.

## Initializing the application state

First, in `main.py`, set up the initial state for the application. This state will store the application's title, logo image path, file data, metrics, and processing status for each step. You'll also import a custom CSS file to style the application and create a placeholder DataFrame.

<Steps>
  <Step title="Create initial DataFrame">
    Create a placeholder DataFrame on the line above `wf.init_state`:

    ```python  theme={null}
    placeholder_data = {
        'Description': ['Description 1', 'Description 2', 'Description 3'],
        'Label': ['Label 1', 'Label 2', 'Label 3']
    }
    initial_df = pd.DataFrame(placeholder_data)
    ```
  </Step>

  <Step title="Initialize state">
    Update the initial state for the application at the bottom of `main.py`:

    ```python  theme={null}
    initial_state = wf.init_state({
        "my_app": {"title": "RELEASE NOTES GENERATOR"},
        "logo_image_path": 'static/Writer_Logo_black.svg',
        "file": {"name": "", "file_path": ""},
        "metrics": {"new_features": 0, "caveats": 0, "fixed_issues": 0, "total": 0},
        "step1": {
            "raw_csv": initial_df,
            "completed": "no",
            "generate-button-state": "yes",
            "processing-message": None,
            "styled-table": "<h3>csv table</h3>"
        },
        "step2": {
            "release-notes": None,
            "completed": "no",
            "formatted-release-notes": "notes should go here"
        },
    })
    ```
  </Step>

  <Step title="Import custom CSS">
    Import the custom CSS file below the initial state setup:

    ```python  theme={null}
    initial_state.import_stylesheet(".description, .list, .summary, .category ", "/static/custom.css")
    ```
  </Step>
</Steps>

## Building the file upload functionality

First, you'll build the file upload feature. Note that `prompts.py`, `html_template.py`, and `custom.css` are provided in the starting point for the application. There is also a sample CSV file in the `sample-input` folder that you can use to test the application.

### Implementing the file upload handler

To handle file uploads, you'll create a function in `main.py` that reads the uploaded CSV file, processes the data, and stores it in the application state.

<Steps>
  <Step title="Implementing a file upload handler">
    In `main.py`, create a function to handle file uploads. This function will read the uploaded CSV file, process the data, and store it in the application state.

    ```python  theme={null}
    def onchangefile_handler(state, payload):
        uploaded_file = payload[0]
        name = uploaded_file.get("name")
        state["file"]["name"] = name
        state["step1"]["processing-message"] = f'+File {name} uploaded successfully.'
        state["file"]["file_path"] = f"data/{name}"
        file_data = uploaded_file.get("data")
        with open(f"data/{name}", "wb") as file_handle:
            file_handle.write(file_data)
        
        data = pd.read_csv(state["file"]["file_path"])
        df = pd.DataFrame(data)
        state["step1"]["raw_csv"] = df
        state["step1"]["generate-button-state"] = "no"
    ```
  </Step>

  <Step title="Create CSV to DataFrame converter">
    Define a function to convert the CSV file to a DataFrame:

    ```python  theme={null}
    def _raw_csv_to_df(state):
        data = pd.read_csv(state["file"]["file_path"])
        df = pd.DataFrame(data)
        return df
    ```
  </Step>
</Steps>

### Displaying the uploaded CSV file

Next, you'll display the uploaded CSV file in the application UI.

<Steps>
  <Step title="Creating a Step Container">
    Add a Step Container component to the Page. This will contain the two steps for the application.
  </Step>

  <Step title="Create Step components">
    Drag two Step components into the Step Container. Name the first one "Load CSV file" and the second "Release notes".
  </Step>

  <Step title="Configure first Step component">
    Click on the the first Step component to select it and bring up the Properties pane. Set "Completed" to `@{step1.completed}`. This state reference will contain either "yes" or "no" based on the completion status of the step.
  </Step>

  <Step title="Add Message component">
    Within this Step, add a Message component with the message set to `@{step1.processing-message}`. Scroll down to the Visibility section of the settings. Select "Custom" and set the condition to `step1.processing-message`.
  </Step>

  <Step title="Create three-column layout">
    Add a Column Container component and add three Column components. For the first column, set the width to 0.5. For the third column, set "Content alignment (H)" to "Left" and "Content alignment (V)" to "Bottom."
  </Step>

  <Step title="Add file input">
    In the middle column, place a File Input component labeled "Please upload your CSV file". Set its `wf-file-change` handler to `onchangefile_handler`.
  </Step>

  <Step title="Add generate button">
    In the third column, add a Button labeled "Generate release notes". Set its "Disabled" property to `@{step1.generate-button-state}` and its "Icon" property to `laps`.
  </Step>

  <Step title="Add Raw CSV section">
    Under the columns, create a Section component and set the title to "Raw CSV".
  </Step>

  <Step title="Add DataFrame component">
    In this section, add a DataFrame component to display the raw CSV data. Configure its properties to use `@{step1.raw_csv}` as the data source. Toggle "Enable download," "Use Markdown," and "Wrap text" to "yes". Set the Separator color to `#d4b2f7` using the CSS tab.
  </Step>
</Steps>

Your application should now look like this:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_4.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=4570cc9bfa4d318c894e32f478f84543" alt="Release notes generator UI" data-og-width="2788" width="2788" data-og-height="1750" height="1750" data-path="framework/images/tutorial/release_notes/release_gen_4.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_4.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7aec96d1dc277c35a8f721032bb3bac4 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_4.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c69344647b49790db754069340c68a55 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_4.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=4f113df77ba2909306af878e464d3b04 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_4.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=b9cebea9740c8e21156e061bb7b8021e 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_4.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=414c6b63c7773cc24afc530e4c861f84 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_4.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=3d36cec71a101f34bff755fb26e4fdfd 2500w" />

When using the sample data located in `sample-input/test-data.csv`, the Raw CSV section will display the uploaded CSV file:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_5.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=12a34e7eda591446cdfeb37ba54eaf05" alt="Raw CSV section" data-og-width="2794" width="2794" data-og-height="1780" height="1780" data-path="framework/images/tutorial/release_notes/release_gen_5.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_5.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=e53cb1b7c2638989a48dec3e40dab528 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_5.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=a8d301255fdf52d35a2c27ba6aebe8a4 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_5.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7b5a568d9c3d744ff65062b850554311 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_5.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=909412cabe30fd62d1d4b4391397f9c3 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_5.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=26f5055d4ce965f1e213de9b1b5bdf8c 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_5.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c97cde0266a917d0e2236327a01364dd 2500w" />

## Generating release notes

Now that you've set up the file upload functionality, you can generate release notes based on the uploaded CSV file.

### Defining text completion functions

Using the prompts provided, define functions to get the category, release notes summary, and release notes description using AI completion. You'll use these functions to process the uploaded CSV file and generate release notes.

<Steps>
  <Step title="Create category function">
    Define a function to get the category using AI completion:

    ```python  theme={null}
    def _get_category(desc, label):
        prompt = get_category_prompt(desc, label)
        label = writer.ai.complete(prompt)
        return label
    ```
  </Step>

  <Step title="Create summary function">
    Define a function to get the release notes summary:

    ```python  theme={null}
    def _get_release_notes_summary(label, desc):
        prompt = get_release_notes_summary_prompt(label, desc)
        formatted_desc = writer.ai.complete(prompt)
        return formatted_desc
    ```
  </Step>

  <Step title="Create description function">
    Define a function to get the release notes description:

    ```python  theme={null}
    def _get_release_notes_desc(label, desc):
        prompt = get_release_notes_desc_prompt(label, desc)
        formatted_desc = writer.ai.complete(prompt)
        return formatted_desc
    ```
  </Step>
</Steps>

### Implementing the generate functionality

You'll next implement the ability to process the CSV and generate release notes.

<Steps>
  <Step title="Create category HTML">
    Define a function to generate HTML for the categories:

    ```python  theme={null}
    def _create_df_for_category(df,state):
        unique_categories = df['Primary-Category']
        formatted_output_list = list()
        for category in set(unique_categories):
            df_category = df[df['Primary-Category']==category]
            categories = {" New Feature": "new_features", " Caveat": "caveats", " Fixed Issue": "fixed_issues" }
            curr_category = categories[category]
            state["metrics"][curr_category]= df_category.shape[0]
            formatted_output = format_output(category,df_category)
            formatted_output_list.append(formatted_output)
        return "".join(formatted_output_list)
    ```
  </Step>

  <Step title="Create HTML file writer">
    Define a function to write HTML to a file:

    ```python  theme={null}
    def _write_html_to_file(html):
        with open("data/output-html.html", "w") as file_handle:
            file_handle.write(html)
    ```
  </Step>

  <Step title="Implement generate button handler">
    Next, create a function to handle the generate button click. This function will process the uploaded CSV file, generate release notes, and store the formatted output in the application state.

    ```python  theme={null}
    def handle_generate_button_click(state):
        state["step1"]["generate-button-state"] = "yes"
        state["step1"]["processing-message-isVisible"] = True
        state["step1"]["processing-message"] = "%Hang tight, preparing to process your file"

        notes_counter = 0
        df = _raw_csv_to_df(state)
        csv_row_count = df.shape[0]
        for index, row in df.iterrows():
            df.at[index,"Primary-Category"] = _get_category(label=row["Labels"], desc=row["Description"])
            df.at[index,"Release-Notes-Summary"] = _get_release_notes_summary(label=row["Labels"], desc=row["Description"])
            df.at[index,"Release-Notes-Description"] = _get_release_notes_desc(label=row["Labels"], desc=row["Description"])
            notes_counter += 1 
            state["step1"]["processing-message"] = f'%Processing {notes_counter} of {csv_row_count} Release Notes'
        
        df_temp = df[["Primary-Category","Release-Notes-Summary","Release-Notes-Description"]]
        df_sorted = df_temp.sort_values(by='Primary-Category')

        state["step2"]["release-notes"] = df_sorted
        state["step1"]["completed"] = "yes"
        state["step1"]["processing-message"] = ""

        html = _create_df_for_category(df_sorted,state)
        _write_html_to_file(html)
        state["step2"]["formatted-release-notes"] = html
        state["metrics"]["total"] = df_sorted.shape[0]

        state["step1"]["generate-button-state"] = "no"
    ```
  </Step>

  <Step title="Bind button handler to Generate button">
    Finally, click on the "Generate release notes" button in the UI builder and set its `wf-click` handler to `handle_generate_button_click`.
  </Step>
</Steps>

## Displaying the release notes

Now that you've generated the release notes, you can display them in the application UI.

### Implementing helper functions

Define helper functions to handle back button clicks, write HTML to a file and download the HTML file.

<Steps>
  <Step title="Create back button handler">
    Define a function to handle the back button click:

    ```python  theme={null}
    def handle_back_button_click(state):
        state["step1"]["completed"] = "no"
    ```
  </Step>

  <Step title="Create file download handler">
    Define a function to handle downloading the HTML file:

    ```python  theme={null}
    def handle_file_download(state):
        html_data = wf.pack_file("data/output-html.html","text/html")
        file_name = "output-html.html"
        state.file_download(html_data,file_name)
    ```
  </Step>
</Steps>

### Building the initial release notes UI

Next, you'll build the UI for the "Release notes" step.

<Steps>
  <Step title="Select 'Release notes' Step">
    To display the Release notes Step component, you'll need to double-click on it.
  </Step>

  <Step title="Add Separator">
    Inside of the Step component, add a Separator component.
  </Step>

  <Step title="Add Columns components">
    Below the Separator, add a Column Container component and a single Column component.
  </Step>

  <Step title="Add Back button">
    In the column, add a Button. Set its text to "Back" and set its `wf-click handler` to `handle_back_button_click`. Set the "Icon" property to `arrow_back`.
  </Step>
</Steps>

### Buiding tabs for Release notes display

Below the Back button, add a Tab Container component and two Tab components. Name them "Formatted release notes" and "Release notes".

#### Formatted release notes tab

In the first tab, you'll display the formatted release notes.

<Steps>
  <Step title="Add HTML component">
    In the first tab, add an HTML Element component. Set the "Element" property `div` and the "Styles" property to the following object:

    ```
    {
        "padding": "16px",
        "min-height": "64px",
        "min-width": "64px",
        "border-radius": "8px",
        "background": "white",
    }
    ```

    Finally, set the "HTML inside" property to `@{step2.formatted-release-notes}`.
  </Step>

  <Step title="Create three-column layout">
    Inside thie HTML Element component, create a three-column layout using a Column Container component and three Column components.
  </Step>

  <Step title="Add Metric components">
    In each column, add three Metric components to display new features, caveats, and fixed issues, respectively.
    Set the "Name" of these components to a single space to remove the placeholder text: ` `. Then, set the values of these components to `@{metrics.new_features}`, `@{metrics.caveats}`, and `@{metrics.fixed_issues}`. Finally, set the "Note" text to "+New Features", "+Caveats", and "+Fixed Issues" respectively. The "+" sign will display styling that indicates a positive message.
  </Step>

  <Step title="Add download button">
    Under the columns, add a Button component. Set its "Text" to "Download HTML" and its "Icon" to `download`. Then, set the `wf-click` handler to `handle_file_download`.
  </Step>
</Steps>

The Formatted release notes tab should look like this when using the sample data:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=842fe3a65cd5dcec1b0ec64bc90a9061" alt="Formatted release notes tab" data-og-width="2796" width="2796" data-og-height="1770" height="1770" data-path="framework/images/tutorial/release_notes/release_gen_1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=a7c0b5050bcac5a036f8afa898e7d5c5 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6eef2b5721db45f54ba87153eaa91bc0 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c021dae5ee21fe94ed991f386ee6b4e5 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=813be44403398b1910a43620e8549c26 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=41150f9e21c0cb065953b7305916a97a 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_1.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=823041196341ae3aae6bbcd53314fc59 2500w" />

#### Release notes tab

Finally, you'll add a Dataframe component to the second tab to display the detailed release notes.

<Steps>
  <Step title="Add Metric component">
    In the second tab, start with a Metric component to show the total number of release notes generated. Set the "Name" to "Number of release notes generated" and the "Value" to `@{metrics.total}`. Delete the default value for "Note".
  </Step>

  <Step title="Add DataFrame component">
    Follow this with a DataFrame component to display the detailed release notes, setting the "Data" property to `@{step2.release-notes}`. Configure it for text wrapping, downloading, and searching capabilities. Set the Separator color to `#d4b2f7`.
  </Step>
</Steps>

The final Release notes section should look like this:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_6.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=a5742f47ca67b0f2c7a05b22aec422e9" alt="Release notes final UI" data-og-width="2800" width="2800" data-og-height="1786" height="1786" data-path="framework/images/tutorial/release_notes/release_gen_6.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_6.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=625f22778fe1bc0a4a8225f144fb2118 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_6.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6f5128c417f8acbd6230264b49db8bf9 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_6.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=801e85b1cc125f139b7499a6bf04a63b 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_6.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=e29494e95940f5e3469eb900e3c36199 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_6.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0f948a43b57d7ae71ecba264d0304043 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/release_notes/release_gen_6.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=9b4021362a998affcbcaddce99742f33 2500w" />

You can [see the finished code on GitHub](https://github.com/writer/framework-tutorials/tree/main/release-notes-generator/end) or in `framework-tutorials/release-notes-generator/end` in the `tutorials` repo you cloned at the beginning of the tutorial.

## Conclusion

By following these steps, you've created a complete Release notes generator application using Writer Framework. To learn more, explore the rest of the Writer Framework documentation and the API documentation.


# Repeater
Source: https://dev.writer.com/framework/repeater



The *Repeater* component allows you to repeat a group of components according to a list or dictionary.

## How it works

*Repeater* repeats its contents for every item of a given list or dictionary. It's similar to a `for each` construct.

Each iteration is rendered with a different **context**, a dictionary containing the key and value for the relevant item. By default, in the variables `itemId` and `item`.

### Food Selector example

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/repeater.example.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=c0b9701b4f9e6efeb7a394d3516994d6" alt="Repeater example" data-og-width="2291" width="2291" data-og-height="1003" height="1003" data-path="framework/images/repeater.example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/repeater.example.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=4ec97a463b2a12cc966dd0cadede890e 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/repeater.example.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=dd1ab1a3a318bd68a714ccf3089b8857 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/repeater.example.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b19039649ae423189994adb9fa8d2585 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/repeater.example.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f8a91e52aecc5ce3af80aa56b8ec2a51 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/repeater.example.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b3aff8399763aec0601347224d81b848 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/repeater.example.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=ddbe1a73d0c53baed69a97d0510d8bff 2500w" />

Given the state below, the contents of *Repeater* will be repeated 3 times. For the first iteration, `itemId` will equal `Banana`, and `item` will equal `{"type": "fruit", "colour": "yellow"}`. Components inside *Repeater* will be able to access this data using references such as `@{itemId}` and `@{item.type}`.

```py  theme={null}
wf.init_state({
    "articles": {
        "Banana": {
            "type": "fruit",
            "colour": "yellow"
        },
        "Lettuce": {
            "type": "vegetable",
            "colour": "green"
        },
        "Spinach": {
            "type": "vegetable",
            "colour": "green"
        }
    },
    "order_list": []
})
```

## Event context

When working with *Repeater* components, you can get the context data using the `context` argument in the event handler.

Continuing with the Food Selector example above, the following handler can be linked to a *Button* —allowing users to add items to a list.

```py  theme={null}
# The event handler below adds the itemId
# of the relevant article to the order list
def handle_add_to_list(state, context):
    state["order_list"] += [context["itemId"]]
```

<Warning>
  Binding directly to context isn't possible

  Use dynamic accessors when binding inside a *Repeater*. For example, `articles[itemId].colour`. This will bind to a different property of `articles` for every `itemId`.
</Warning>


# Sample app library
Source: https://dev.writer.com/framework/sample-apps



Writer Framework lets you build a wide variety of applications across different domains. Here are some sample apps to get you started, which are all [available on GitHub](https://github.com/writer/framework-tutorials/).

<Card title="Code generator" icon="code" iconType="solid" href="https://github.com/writer/framework-tutorials/tree/main/code-generator" horizontal>
  Generate React apps editable in a code sandbox.
</Card>

<Card title="Finance content checker" icon="file-invoice-dollar" iconType="solid" href="https://github.com/writer/framework-tutorials/tree/main/finance-content-checker" horizontal>
  Tool for analyzing financial content based on compliance guidelines.
</Card>

<Card title="Finance dashboard" icon="chart-line" iconType="solid" href="https://github.com/writer/framework-tutorials/tree/main/finance-dashboard" horizontal>
  AI-powered interactive dashboard for summarizing and visualizing financial data and metrics. Check out the [app tour](https://writer.com/engineering/financial-app-writer-framework-palmyra-fin/) on our Engineering blog.
</Card>

<Card title="Localized promo dashboard" icon="globe" iconType="solid" href="https://github.com/writer/framework-tutorials/tree/main/localized-promo-dashboard" horizontal>
  Tool to generate promotional content based on uploaded demographic data.
</Card>

<Card title="Patient portal" icon="hospital-user" iconType="solid" href="https://github.com/writer/framework-tutorials/tree/main/patient-portal" horizontal>
  Uses Palmyra-Med to generate SOAP notes and extract ICD codes from patient-doctor chat.
</Card>

<Card title="Product description embedded chat" icon="comments" iconType="solid" href="https://github.com/writer/framework-tutorials/tree/main/pd-embedded-chat" horizontal>
  Use an embedded no-code chat app to chat with a Knowledge Graph about products.
</Card>

<Card title="Product description page generator" icon="file-lines" iconType="solid" href="https://github.com/writer/framework-tutorials/tree/main/pdp-generator" horizontal>
  Tool for generating formatted product description pages.
</Card>

<Card title="Release notes generator" icon="clipboard-list" iconType="solid" href="https://github.com/writer/framework-tutorials/tree/main/release-notes-generator" horizontal>
  Utility for creating formatted, downloadable release notes from CSVs containing GitLab notes. [Full tutorial here](./release-notes-generator).
</Card>


# SEO and social sharing
Source: https://dev.writer.com/framework/seo



Writer Framework provides powerful options for optimizing your application's metadata to improve SEO (Search Engine Optimization) and enhance how your content appears when shared on social networks. These options are available in the `writer.serve.configure_webpage_metadata` function available in the `server_setup.py` file.

## Page title configuration

The page title is a crucial element for your application's SEO. Web crawlers and bots will see this title without loading the full application. By default, they will see `Writer Framework`.

```python  theme={null}
# ./server_setup.py
writer.serve.configure_webpage_metadata(title="My Amazing App")
```

For dynamic titles, you can use a function instead of a static string. The title will be evaluated when a bot loads the page:

```python  theme={null}
# ./server_setup.py
def _title():
	last_news = db.get_last_news()
	return f"Last news: {last_news.title}"

writer.serve.configure_webpage_metadata(title=_title)
```

## Meta tags configuration

HTTP headers allow you to specify a title, description, and keywords that search engines will use to understand and index your content. You can configure these tags using the `meta` parameter.

```python  theme={null}
# ./server_setup.py
writer.serve.configure_webpage_metadata(
	title="My Amazing App",
    meta={
    	"description": "My amazing app",
    	"keywords": "WF, Amazing, AI App",
    	"author": "Amazing Company"
    }
)
```

You can also generate meta tags dynamically using a function:

```python  theme={null}
# ./server_setup.py
def _meta():
	last_news = db.get_last_news()
	return {
		"description": f"Last news: {last_news.title}",
		"keywords": f"{last_news.keywords}",
		"author": "Amazing Company"
	}

writer.serve.configure_webpage_metadata(meta=_meta)
```

## Social network configuration

When users share links to your application on social networks, those platforms will attempt to fetch metadata to create rich previews of your content. You can configure the OpenGraph tags to improve the appearance of your content when shared.

```python  theme={null}
# ./server_setup.py
writer.serve.configure_webpage_metadata(
    opengraph_tags= {
    	"og:title": "My App",
    	"og:description": "My amazing app",
    	"og:image": "https://myapp.com/logo.png",
    	"og:url": "https://myapp.com"
    }
)
```

Like meta tags, OpenGraph tags can also be generated dynamically:

```python  theme={null}
# ./server_setup.py
def _opengraph_tags():
	last_news = db.get_last_news()
	return {
		"og:title": f"Last news: {last_news.title}",
		"og:description": f"{last_news.description}",
		"og:image": f"{last_news.image}",
		"og:url": f"https://myapp.com/news/{last_news.id}"
	}

writer.serve.configure_webpage_metadata(opengraph_tags=_opengraph_tags)
```

By configuring your application's metadata, your application will be more visible in search engines and social networks.


# Sessions
Source: https://dev.writer.com/framework/sessions



Sessions are designed for advanced use cases, being most relevant when Framework is deployed behind a proxy.

## Session information in event handlers

You can access the session's unique id, HTTP headers and cookies from event handlers via the `session` argument —similarly to how `state` and `payload` are accessed. The data made available here is captured in the HTTP request that initialised the session.

The `session` argument will contain a dictionary with the following keys: `id`, `cookies` and `headers`. Values for the last two are themselves dictionaries.

```py  theme={null}
# The following will output a dictionary
# with the session's id, cookies and headers.
def session_inspector(session):
    print(repr(session))
```

This enables you to adapt the logic of an event to a number of factors, such as the authenticated user's role, preferred language, etc.

## Session verifiers

You can use session verifiers to accept or deny a session based on headers or cookies, thus making sure that users without the right privileges don't get access to the initial state or components.

Session verifiers are functions decorated with `wf.session_verifier` and are run every time a user requests a session. A `True` value means that the session must be accepted, a `False` value means that the session must be rejected.

```py  theme={null}
import writer as wf

# Users without the header x-success will be denied the session

@wf.session_verifier
def check_headers(headers):
    if headers.get("x-success") is None:
        return False
    return True
```


# Social post generator
Source: https://dev.writer.com/framework/social-post-generator



In this tutorial, you'll use the Writer Framework to build an AI-powered tool for generating social media posts and tags based on the input you provide!

The process will take only minutes using a drag-and-drop visual editor to build the user interface and Python for the back-end code.

Here's what the finished project will look like:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=e38dd8f9a9fe0a6b6976706902b45761" alt="Finished social post generator project" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2ab.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=33377c60d8cb103cb857c06aa1a31e7e 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=60df3811ecd7566018b07c5fe7fc36cd 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6341f4458526199a5e4333b3a2187728 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f2221fca93c548a5fbedc208e7842de6 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=efd3624129c3b4d65434eec07b212ebb 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c6a0a9a8baca8a45ef096077e29a67d3 2500w" />

## Prerequisites

Before starting, ensure you have:

* **A Writer account:** You don't need an account to use Writer Framework, but you'll need one to use the AI module. [Sign up for a free account here](https://app.writer.com/register).
* **Python 3.9.2 or later**: Use the installer from [python.org](https://www.python.org/downloads/).
* **pip:** This command-line application comes with Python and is used for installing Python packages, including those from Writer.
* **A basic understanding of Python:** You should be familiar with the basics of the language.
* **Your favorite code editor (optional):** There's a code editor built into Writer for writing back-end code, but you can also use Visual Studio Code, Notepad++, Vim, Emacs, or any text editor made for programming if you prefer.

## Setting up your project

### Create a Writer app and get its API key

First, you'll need to create a new app within Writer.

<Steps>
  <Step title="Create the app in Writer">
    Log into Writer. From the Home screen, click on the **Build an app** button.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=8f7d36049df01e27d405a7f07401b8dc" alt="Writer home screen" data-og-width="3220" width="3220" data-og-height="1900" height="1900" data-path="framework/images/tutorial/social_post/sp_gen_2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=722dbfe871b173205e61e3104fdeb494 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=21ce9a596e58987a6de548951569cc86 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f8c80ffff0051eaf9165564ec0a62732 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f3abfcf46e416659a9f0b1589a5c9bed 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d1190e19d88522d39088cb0ae704df30 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=ac468efbcebca5084a97b5a152cc6829 2500w" />

    The **Start building** menu will appear, presenting options for the types of apps you can create.

    Select **Framework**, located under **Developer tools**. This will create a brand new app based on Writer Framework.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_3.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=8e8988274dfd797dde727d2070948200" alt="&#x22;Start building&#x22; menu" data-og-width="3220" width="3220" data-og-height="1900" height="1900" data-path="framework/images/tutorial/social_post/sp_gen_3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_3.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=faa7d8516962e4104b57b74e4c9fc8ce 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_3.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f3d763caf6cae9b69b443b455d22d6f4 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_3.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=55b60a12306dc62737634f3c4543cba1 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_3.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=81f140d620c610bcac9d85ffea91bcbf 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_3.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=59a3d91f4e98b5d8146e2ae37d1d2c4c 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_3.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=80e707d1223c5259803150c46f9367d0 2500w" />
  </Step>

  <Step title="Copy your app's API key">
    On the next screen, titled **How to deploy an application**, you can get the API key for the app by clicking on the **Reveal key** button, located under the text **Authenticate with an API key**. Your complete API key will be displayed, and a "copy" button will appear. Click this button to copy the key; you'll use it in the next step.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2a.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=1ac1226cb669cb98048760f5d2dd1285" alt="&#x22;How to deploy an application&#x22; page" data-og-width="3203" width="3203" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2a.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2a.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=2042f479b12cdcd0c3760bf6792c3d91 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2a.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6ac077a1e384fcf131946456d35d073c 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2a.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=ac026f1a626599199e32b5f4d2dcf93a 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2a.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=59b1d213f135dbef6f0a8c6e70dc9da6 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2a.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=93a343a5713b8fa001eeb778fa2ed851 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2a.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0eac64bc92042b9340742561bcb73d5a 2500w" />
  </Step>
</Steps>

### Set up your computer and create the app's project

The next step is to set up the Writer Framework environment on your computer. You'll do this by creating a directory for the project, installing dependencies, and creating the project for the application using a template.

<Steps>
  <Step title="Open your terminal application">
    Open your terminal application. On macOS and Linux, this application goes by the name *Terminal*; on Windows, you can use either *Windows PowerShell* (which is preferred) or *Command Prompt*.
  </Step>

  <Step title="Install the dependencies">
    <Note>If you already have the `writer` and `python-dotenv` packages installed on your computer, you can skip this step.</Note>

    Install the `writer` and `python-dotenv` packages by entering the following commands in your terminal application:

    ```
    pip install writer python-dotenv
    ```

    This command tells `pip`, the Python package installer, to install two packages:

    * `writer`, which provides some command-line commands and enables Python code to interact with Writer and the Writer Framework.
    * `python-dotenv`, which makes it easy to manage environment variables by loading them from a `.env` file. This one is optional for this exercise, but you might find it useful when working on larger projects.
  </Step>

  <Step title="Set the API key environment variable">
    To pass your API key to the Writer Framework, you need to set an environment variable called `WRITER_API_KEY`.

    Select your operating system and terminal application below, then copy and paste the command into your terminal application, replacing `[your_api_key]` with the API key you copied earlier:

    <CodeGroup>
      ```sh macOS/Linux (Terminal) theme={null}
      export WRITER_API_KEY=[your_api_key]
      ```

      ```sh On Windows (Windows PowerShell) theme={null}
      $env:WRITER_API_KEY=[your_api_key]
      ```

      ```sh On Windows (Command Prompt) theme={null}
      set WRITER_API_KEY=[your_api_key]
      ```
    </CodeGroup>

    The `WRITER_API_KEY` environment variable will remain defined as long your terminal session is open (that is, until you close your terminal application’s window).
  </Step>

  <Step title="Create the project">
    Create the project by entering this command into your terminal application:

    ```
    writer create social-post-generator --template=ai-starter
    ```

    This command sets up a new project called `social-post-generator` using a starter template called `ai-starter` so that you're not starting "from scratch."
  </Step>
</Steps>

## Build the UI

Now that you've created the project, it's time to define the UI. The Writer Framework's drag-and-drop capabilities make it easy — even if you haven't done much UI work before!

The project editor is a web application that runs on your computer and enables you to define and edit your app's user interface. Launch it by typing the following into your terminal application:

```
writer edit social-post-generator
```

You'll see a URL. Control-click it (command-click on macOS) to open it, or copy the URL and paste it into the address bar of a browser window.

The browser window will contain the project editor, which will look like this:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2b.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d8e5d597c75f4303eb3f588e7ef5f7a8" alt="Project editor" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2b.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2b.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=40eac2c2fdb66c7c1ad78a507194de57 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2b.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=270b34c881ea7a4afa734cbb6c8711dc 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2b.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=99630b2d6861552b72d880eb133a284a 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2b.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=eaf255ca1e4c9277ee036e78ac8748ca 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2b.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=5cb29aa4d9ded211468acd71cb88077d 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2b.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=ac4f410d9b268d4c2a533c6d0bc4cd76 2500w" />

You'll see the following:

* The **canvas** is in the center. It displays the app's user interface.
* The column on the left contains:
  * The **Core toolkit**, which contains all the UI components. You define the user interface by dragging components from the Toolkit and placing them on the canvas.
  * The **Component tree**, which shows the arrangement of the UI components on the canvas. It's also useful for selecting items on the canvas, especially when it has a lot of UI components.

It's time to build the UI!

<Steps>
  <Step title="Examine the header">
    Select the **Header** component by clicking it — it's the component at the top, containing the title **AI STARTER** and a gray area labeled **Empty Header**.

    When you click it, you'll see the **properties** panel appear on the right side of the page. This lets you view and edit the properties of the selected component.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2c.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=1ba5e3c03ec68463569c76c6e55baff2" alt="The selected header and its properties panel" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2c.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2c.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=33ddaf22f51687d97c1785a66f08b107 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2c.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=1647f3741c5c300200f94aeb43dbbc55 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2c.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=597388f9b002b0600a0d03c2f3cd274a 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2c.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6c6129c60fb2e9c873a53c78494e8388 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2c.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=21ffa20b393bb20a7c8786af0c2659cc 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2c.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=b7e9137b9c7ec749152fba689e6c046b 2500w" />

    The first property you'll see in the panel is the **Text** property, which defines the text that appears as the header's title. It should contain the value `@{my_app.title}`. The `@{` and `}` indicate that `my_app.title` is a variable and that its contents should be the text displayed instead of the literal text "my\_app.title". You'll set the value of this variable soon.
  </Step>

  <Step title="Clear the Section's default title">
    Select the **Section** component by clicking it — it's just below the **Header** component and contains the title **Section Title** and a gray area labeled **Empty Section**.

    In the **properties** panel, clear out the value of the **Title** property. This will remove the *Section*'s default title.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2d.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6d404fbbeea27b1ccd0214ac42622a2a" alt="The selected section and its properties panel" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2d.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2d.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=9034e8de81b31ce6f4396b0ff36a9d02 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2d.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0d16f298f4e4463db4baae3761dcf986 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2d.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=3a6baa8cd24981da5095eab397271d43 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2d.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=23c058d9283ed46a3cac3e4666f903b4 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2d.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=060c5b6d55ccdd43549e36b4944c1881 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2d.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6fc4c1dc53668d9357dc732610cc9580 2500w" />
  </Step>

  <Step title="Add a Text Input component">
    The user will need a place to enter words or phrases that the app will use as the basis for generating posts and tags.

    Drag a **Text Input** component — and note, it's **Text *Input***, not **Text** —  from the **Core toolkit** panel on the left (it's under **Input**, and you may need to scroll down a little to find it) and into the **Section**. Sections can act as containers for other components.

    <Note>You can search for a specific component by using the search bar at the top of the **Core toolkit** panel.</Note>

    Select the **Text Input** component. In the **properties** panel:

    * Find the **Label** property and set its value to `Topic for social posts and tags`.
    * (Optional) Feel free to add some placeholder to the *Text Input* component by setting the value of the **Placeholder** property with something like `Enter words or phrases describing your topic`.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2e.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7922ce43b1b0dc522ce4fa3d7de4daae" alt="The text input component and its properties panel" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2e.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2e.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=280d66e8d6a54b3c3d75e5b6753e9d9d 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2e.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=34e6a60812b5c4b43296c1f3da09e4ed 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2e.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=66aae4b9ac28e44529ae2e74a19e33c4 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2e.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=02eada6d4c8a431a23f12350be5d4e76 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2e.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=e5e23bf413c5b352c3bc03df363435a4 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2e.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0b0a7f588379d0b69baa6996190dd607 2500w" />
  </Step>

  <Step title="Add a Button component">
    Drag a **Button** component from the **Core toolkit** panel (it's under **Other**, and you may need to scroll down a little to find it) into the **Section**, directly below the **Text Input**. The user will click this button to submit their prompt.

    Select the **Button**. In the **properties** panel:

    * Set the **Text** property's value to `Generate posts`.
    * Find the **Icon** property, and set its value to `arrow_forward`.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2f.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=bf1cd3c45cf7aaa3089e45c1103285ff" alt="The button component and its properties panel" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2f.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2f.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7ab6001de98bbb197acf04c70aa7d6e6 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2f.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=41df85f7374d6e119c81a75aa28b6e35 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2f.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=14e1fe3f6c0e4979d7d3c84f59585985 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2f.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0bff970540e8be8aa08fd612d03e3b68 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2f.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7f1efebd0a5960848a82d1261898eaf8 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2f.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=4125cae2556634102422cee2990d4553 2500w" />
  </Step>

  <Step title="Add a Message component">
    The process of creating social media posts and tags takes a few moments. In order to reassure the user that the app is working and hasn't crashed, it will use a **Message** component to display something reassuring while it's generating.

    Drag a **Message** component from the **Core toolkit** panel into the **Section** positioning it immediately below the **Button**.

    Select the **Message** component. In the **properties** panel:

    * Scroll down to the **Style** section and look for the **Loading** property, which sets the color of the **Message** component when it's loading.
    * Click its **CSS** button, which will cause a text field to appear below it.
    * Enter this color value into the text field: `#D4FFF2`.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2g.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=193337b7397365784f224687ae4ca8b3" alt="The message component and its properties panel" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2g.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2g.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=654d0dc8189fd00fd197a1bf3650e4ec 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2g.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=1062688bdd8099eaed05df522b7388bf 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2g.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=cc30bae0044c6c97b5733410f99fc018 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2g.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=a0a175d5741124f86279c5b803d2fc84 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2g.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=18a30778946bc0c41c1588b62b69ba28 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2g.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=96fbbbffa568eef28b59c0698ae9ada9 2500w" />
  </Step>

  <Step title="Add a new Section">
    The **Section** that you were working on is for user input. Let's add a new **Section** to hold the output — the social media posts and tags the app will generate.

    Drag a **Section** component from the **Toolbox** panel and place it *inside* the **Section** that's already there, just below the **Message** component.

    <Note>That's right — **Sections** can contain other **Sections**!</Note>

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2h.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=11dc51570178c77b7b1248f8b0d00110" alt="The new section inside the existing section" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2h.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2h.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=5ccdb8e5f35e05105b1ac04adb00566a 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2h.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=27a244c17402ca3f24ac553c2ca83b87 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2h.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=96b529b865b31ed28d3e8a445f6fdae7 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2h.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=8bd12d5e7ec9b9c6714ce47f796dd71b 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2h.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=3c35cfdf33581d6c348113740536917d 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2h.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=3e14a6e4b1fd8979892aa95f3cc06a39 2500w" />

    Select the **Section** you just added. In the **properties** panel:

    * Find the **Title** property and clear it its value to remove the **Section**'s title.
    * Scroll down to the **Style** section and look for the **Container background** property, which sets the **Section**'s background color.
    * Click its **CSS** button, which will cause a text field to appear below it.
    * Enter this color value into the text field: `#F6EFFD`.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2i.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=462524d0c44ea635930c7c8aeda22087" alt="The new section and its properties" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2i.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2i.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=16545f27975df973a3c0f14ee7465b08 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2i.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0b84637fd8528dcae981ff7b7b978d56 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2i.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fa62da1b6f695c475725192eaafef280 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2i.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=e6ed03a1f9b8acb5df9d36b2ed2d6d20 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2i.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=bbd116b65a36289d937ae8d4b7bf8656 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2i.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c546d5f5c00b51cfd9de18cdbf13769b 2500w" />
  </Step>

  <Step title="Add a Tags component">
    Writer Framework has a number of useful components to make your apps more functional and beautiful. One of these is the **Tags** component, which can take a list of hashtags (or words, or short phrases) and display them inside colorful "bubbles" to make them stand out. This app will display the social media tags it generates in a **Tags** component.

    Drag a **Tags** component from the **Toolbox** panel and place it inside the new **Section**.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2j.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=54bac04c46c186245193ff0b18e1df9a" alt="The tags component" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2j.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2j.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=efb43ec85dd06574286d42a040002de4 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2j.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=52ec6aafabad02ad51e6acc7088bc415 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2j.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=50db19703d6dc986e8a4f3f377074a18 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2j.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=970ad9debb16c2fd335acdacc8a8a547 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2j.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c53364276bad24acdd0240d1da8b256c 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2j.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6bf132a7a7672dda82a4a924a094909a 2500w" />
  </Step>

  <Step title="Add a Separator">
    Drag a **Separator** component from the **Toolbox** panel and place it inside the new **Section**, just below the **Tags** component. This will separate the tags from the posts.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2k.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=3f7e4b3524ce030c809588e275930e64" alt="The separator" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2k.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2k.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=973ca6c4b306570aeaefbdedb048c8d7 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2k.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=893b25ea50f95aa75436b99d6003e7d9 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2k.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=620eca92f532d4e1425c87679f7fea6e 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2k.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=da97480d037f1f9cafe4a910908cbcb1 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2k.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=911dfc7ffc53ea733841f3863ba73b8b 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2k.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=afa6fb9ee733ddd8c359db24491fa968 2500w" />
  </Step>

  <Step title="Add a Text component">
    Finally, drag a **Text** component from the **Toolbox** panel and position it below the **Separator**. This will hold the generated social media posts.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2l.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=33db8853d9ac0c7cdebc2e54e856da7a" alt="The text component" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2l.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2l.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6081285ef9d29b93a8f2fb6d3831c41b 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2l.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6d6daa8ea665574870a5200ef4839b52 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2l.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f1f09d73c26d81082734194a3cc4c1c2 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2l.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=039ba580e608de1df268610db0f7820a 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2l.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=b37a7981523ba28219b0c97987763279 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2l.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=4a287685943213991111de7795be3e9d 2500w" />
  </Step>
</Steps>

## Add the back-end code

With the UI laid out, it's time to work on the logic behind it.

The logic behind the user interface is defined in a file named `main.py`, which is in your project's directory. This file was automatically generated; you'll update the code in it to define the behavior of your app.

The simplest way to edit `main.py` is within the project editor. Click on the "toggle code" button (beside the word **Code**) near the lower left corner of the project editor page.

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2m.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=23215946becf66a071916c4bfe27aabe" alt="Project editor with arrow pointing to toggle code button" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2m.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2m.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6db2fb8597b6e1fd4e6b7f01de16decf 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2m.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=bc95fe634d1facd4de24c161341af291 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2m.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=93cb55a9bc570bb21c931fe023941cf8 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2m.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=52ca2ac754c0c8c760410ff4cd75a26d 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2m.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=83d360d3ae0d4bf6250d3ea179f80056 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2m.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=3946dcecf43d8696e538b4aaa6162cf4 2500w" />

A pane with the name **Code** will appear at the bottom half of the screen, displaying an editor for the the contents of `main.py`.

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2n.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=dcf19ac48e57128e2b3487fb23cb22d7" alt="Project editor with the code editor displayed" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2n.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2n.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=76688c2d663b761276a9d6f9809c3b7f 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2n.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=82b7b4f2d47e78d452e3e784e359990d 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2n.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d0ea16a7e67c40c48eba0efe7a2bf459 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2n.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=af90ceaee74951fa31a835cad855b981 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2n.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=adb561caea9d1d4b32000141421cd350 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2n.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7ce04ea912dd0f4818067c62ded5c2df 2500w" />

<Note>If you'd rather use a code editor instead of coding in the browser, use it to open the `main.py` file in your project's directory.</Note>

Now follow these steps:

<Steps>
  <Step title="Import libraries and load the Writer Framework API key">
    You should see the following at the start of the file:

    ```python  theme={null}
    import writer as wf
    import writer.ai
    ```

    Replace that code with the following:

    ```python  theme={null}
    import os
    import re
    import writer as wf
    import writer.ai

    # Set the API key
    wf.api_key = os.getenv("WRITER_API_KEY")
    ```

    This code imports the libraries that the application will need and then reads your Writer Framework API key in the `WRITER_API_KEY` environment variable.
  </Step>

  <Step title="Create a handler to respond to the user's input">
    When the user presses the app's **Button**, the app needs to call a function to generate and display the social media posts and tags. Find these comments in the code...

    ```python  theme={null}
    # Welcome to Writer Framework! 
    # This template is a starting point for your AI apps.
    # More documentation is available at https://dev.writer.com/framework
    ```

    ...and replace them with the following function:

    ```python  theme={null}
    def generate_and_display_posts_and_tags(state):
        print(f"Here's what the user entered: {state['topic']}")

        # Display message
        state["message"] = "% Generating social media posts and tags for you..."

        # Generate and display social posts
        prompt = f"You are a social media expert. Generate 5 engaging social media posts about {state['topic']}. Include emojis, and put a blank line between each post."
        state["posts"] = writer.ai.complete(prompt)
        print(f"Posts: {state['posts']}")

        # Generate and display hashtags
        prompt = f"You are a social media expert. Generate around 5 hashtags about {state['topic']}, delimited by spaces. For example, #dogs #cats #ducks #elephants #badgers"
        pattern = r"#\w+"
        hashtags = re.findall(pattern, writer.ai.complete(prompt))
        state["tags"] = {item: item for item in hashtags}
        print(f"Tags: {state['tags']}")

        # Hide message
        state["message"] = ""
    ```

    The `%` at the start of the string being assigned to `state["message"]` will be replaced by a “spinning circle” progress indicator graphic in the *Message* component.

    The `pattern` variable in the `# Generate and display hashtags` section defines a regular expression pattern to search for words that begin with the `#` character. The `r` in front of the opening quote specifies that the string is a *raw string*, which means that the `\` character should be treated as a literal backslash and not as the start of an escape character sequence.

    Note that `generate_and_display_posts_and_tags()` uses `print()` functions for debugging purposes, and you can use them to get a better idea of what's happening in the function. You'll see their output in both your terminal application and in the project editor's 'log' pane (which will be covered shortly) as you use the social post generator. This output will include:

    * The topic the user entered
    * The posts generated by the LLM
    * The hashtags generated by the LLM

    The `print()` functions don't affect the operation of the social post generator in any way, and you can remove them if you wish.
  </Step>

  <Step title="Initialize the application">
    The final step is to set the application's initial state. Find this code, which should be just after the `generate_and_display_posts_and_tags()` function...

    ```python  theme={null}
    # Initialise the state
    wf.init_state({
        "my_app": {
            "title": "AI STARTER"
        },
    })
    ```

    ...and replace it with this:

    ```python  theme={null}
    # Initialize the state
    wf.init_state({
        "topic": "writing",
        "message": "",
        "tags": {},
        "posts": "",
        "my_app": {
            "title": "SOCIAL POST GENERATOR"
        }
    })
    ```

    The Writer Framework's `init_state()` method sets the initial value of `state`, a dictionary containing values that define the state of the application. The key-value pairs in `state` are how you store values used by your app and how you pass data between the back-end code and the UI.

    The code above sets the initial value of `state` so that it has these key-value pairs:

    * `topic`: A string containing the topic that the application should generate social media posts and tags for. You'll bind its value to the *Text Input* component where the user will enter the topic.
    * `message`: A string containing text of the message that will be displayed to the user while the application is generating posts and tags. You'll bind its value to the **Message** component.
    * `tags`: A list containing the hashtags generated by the LLM. You'll bind its value to the **Tags** component.
    * `posts`: A string containing the social media posts generated by the LLM. You'll bind its value to the **Text** component.
    * `my_app`: A dictionary containing values that define the application's appearance. This dictionary has a single key-value pair, `title`, which defines the text that appears as the application's title.

    <Note>For more details about the `state` variable, see our [*Application state*](https://dev.writer.com/framework/application-state#application-state) page.</Note>
  </Step>

  <Step title="Save the updated code and hide the code editor">
    That’s all the code. If you edited the code in the browser, save it by clicking the “save” button near the top right corner of the code editor.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2o.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d8da7e0bd7c4e66f1754e538246bf465" alt="Project editor and code editor, with arrow pointing to save button" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2o.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2o.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=28d7e3222bac8aedf3b40ffcaff6e3c3 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2o.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=a66818a60fb9f140caa3ddbe99cc9d03 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2o.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=063ea0d4fb7f6d2b1a2f180cd2aae044 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2o.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fbb69badb025d4a41262b966640c3571 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2o.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=aec6d1b2428698d9cb2df8f841a0d298 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2o.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7dd86bfa71bf0570053ac3a0419b9144 2500w" />

    Click the "toggle code" button to hide the code editor.
  </Step>
</Steps>

## Bind the UI to the back-end code

You've built the UI and written the code behind it. Let's connect the two! Go back to the browser window with the project editor and do the following:

<Steps>
  <Step title="Observe that the heading at the top of the app is now 'SOCIAL POST GENERATOR'">
    Earlier, you saw that the **Header** component's **Text** property was set to `@{my_app.title}`, a value in the app's `state` variable. You changed this value when you update the call to the Writer Framework's `init_state()` method.
  </Step>

  <Step title="Bind the Text Input component to the 'state' variable's 'topic' key">
    Select the **Text Input** component. In the **properties** panel, scroll down to the **Binding** section and find the **State element** property. This is where you specify the `state` variable key whose value will be connected to the **Text Input** component. Set its value to `topic`.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2p.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fc53611bc4959c8bad1b2d7af7e19cbb" alt="Updating the text input component's state element property" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2p.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2p.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0cd31f698e0e8c034fea80c9c847b2d3 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2p.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=b20b208a72cf630085dc77e178b41ac2 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2p.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6daa47701108ac2f5cd9aa801f545ff1 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2p.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=daaf7ab6aeac1893d69c8a2e7541f58d 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2p.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=19030fe499e826163cfe42317a9459d4 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2p.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=e761fc92b561ccb92681e0dd58d87151 2500w" />
  </Step>

  <Step title="Connect the Button component to the 'generate_and_display_posts_and_tags()' function">
    Select the **Button** component. In the **properties** panel, scroll down to the **Events** section and find the **`wf-click`** property. This is where you specify the function to call when the user clicks the button — set its value to `generate_and_display_posts_and_tags`.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2q.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c9c623a7061f1baa2ba98c606a1b8cd2" alt="Updating the button's wf-click property" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2q.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2q.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=96a4c733613a0924cd0925c81afc3581 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2q.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6ead01e5fafee74233abfc854372e42a 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2q.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=67ed1edcad22b98de8aad64374349fb9 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2q.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=242b28f9ae95bcb9d2a34852c0cbe6d3 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2q.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=368697602f57ed075943d377a7e3aafe 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2q.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=b387f580b2d4fcdee2e4e12526c2abb7 2500w" />
  </Step>

  <Step title="Bind the Message component to the 'state' variable's 'message' key">
    Select the **Message** component. In the **properties** panel, find the **Message** property, which specifies the content of the **Message** component. Set its value to `@{message}`.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2r.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6ad60398867b52bd8a9843f725963a9d" alt="Updating the message's message property" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2r.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2r.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=851656795dc55f741bbc7e3abc5b50e4 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2r.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=4ca2267376aeb709d982f4e76c3d4820 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2r.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=5c1a19f1c9e9479cbe289b92043d4aca 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2r.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6c7f84e5ec8d45aa9452c09a7d76d528 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2r.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=bc1397a70f33fec01170731a6a0dee98 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2r.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fbbaf6bd939b02a8c7f92839a66546dd 2500w" />
  </Step>

  <Step title="Bind the Tags component to the 'state' variable's 'tags' key.">
    Select the **Tags** component. In the **properties** panel:

    * Find the **Tags** property, which specifies the source of the tags that the component will display.
    * Click its **JSON** button.
    * In the text field below the **JSON** button, set the **Tags** property's value to `@{tags}`.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2s.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=58a4c76ca5d884b5248f9cf7d001e0d8" alt="Updating the tags component's tags property" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2s.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2s.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fdcb8f643eeab66f37e5a7b62eba47b2 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2s.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=383868e92f86e2709c44e0eee5d5b1b9 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2s.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0f38ec2ea3d68e205f8f6013ebc20235 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2s.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d18a775e3138dd72d3ff69e672d5dc8e 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2s.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=e3774351e6f0395b69445420a5508e36 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2s.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=b883fa614c73890a673fa5a0e35782ac 2500w" />
  </Step>

  <Step title="Bind the Text component to the 'state' variable's 'posts' key">
    Select the **Text** component. In the **properties** panel:

    * Find the **Text** property, which specifies the content of the **Text** component. Set its value to `@{posts}`.
    * Set the **Use Markdown** property to **yes**.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2t.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c2b407d36da8a80322e9b59726a57e3d" alt="Updating the text component's properties" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2t.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2t.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6426026b1f8a196b86e7f33a62d5df78 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2t.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=dc64ca5ed5b5e619ec8d312e939b1ee8 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2t.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fd19e874681ab9335b7397fae2980a56 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2t.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=8f1f26640293be54167ad0c7404a7f85 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2t.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=a144af80ba30e92b6fd52b4552b89b54 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2t.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6121dff59ad96ea17650e3e2103c1c59 2500w" />
  </Step>

  <Step title="Set the visiblity of the Section component containing the Tags and Text components based on the 'state' variable's 'posts' key">
    Select the **Section** component containing the **Tags** and **Text** components. In the **properties** panel:

    * Scroll to the **Visibility** property at the bottom.
    * Click on the **Custom** button.
    * In the **Visibility value** field, set the value to `posts`. This will cause the **Section** to be visible only when the `state` variable's `posts` key has a non-empty value.

        <img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2u.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=66dd75bc9f809d79c0c176b02344ed3b" alt="Updating the inner section's visibility property" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2u.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2u.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=abbfa1fc4b1c5360e0fae75d9cf399b3 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2u.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0dc01388ba6625f3cfdb89b5a07a87a2 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2u.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=ed77d9dd83e631d78b9a18a7594045f2 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2u.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f95c14d35f1e849a0da90836f323d090 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2u.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=a76db2f8ac00044c4728b8a970c01515 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2u.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=05d3f1c71444f6716f287ec495fe1f4e 2500w" />
  </Step>
</Steps>

## Test the application

You've completed all the steps to make a working social post generator, and you can try using it right now, even while editing the user interface!

Enter a topic into the **Topic for social posts and tags** text field, then click the **Generate Posts** button\* *twice* — the first time will cause the **properties** panel to appear, and the second click will register as a click. You'll know that you've clicked the button when you see the **Message** component display the text “Generating social media posts and tags for you...”

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2v.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=447377026cf15c91a31ae023e09a8a40" alt="Waiting for the generator to finish while the message component displays its message" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2v.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2v.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d5303b3864f3a7418e72f79e1dec8631 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2v.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f14c537495df808a93f39670e77905ef 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2v.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fe2729b0916e6fb8870c6aad66e31eb2 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2v.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=864a178c6b70214ba375c4bae0c22de4 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2v.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=75d60bc5968f95076655e0eeaecb407a 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2v.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=46ece4baf1dc499b9cc87a080af6499c 2500w" />

...and soon after that, you should see some results:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2w.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=8592349842ed1474717e26c14496c515" alt="The results" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2w.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2w.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0367966dd0ae3a215dae55367c3e49a3 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2w.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f8ca68bb7a924ecacde216a031a26f40 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2w.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=279c69ac16a406a0f6f3d996c93dc802 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2w.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=0ac16a8f214f8a8314a4f1097b3383f4 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2w.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=2f01654cf89ac5af43221d7528769660 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2w.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=46ad058e1c70ca9c0184bf45ddae7b06 2500w" />

To get a better sense of what the experience will be like for the user, switch to the preview by changing the edit mode (located near the upper left corner of the page) from *UI* mode to *Preview* mode by selecting the **Preview** option:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2x.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=80d54c9686267c8e3b98c45478ecf7e9" alt="The project editor with an arrow pointing to the Preview button" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2x.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2x.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=1488ff4e84b8a606015670d2e953c3f8 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2x.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=fb571bfdfd93747150f3494b93283b18 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2x.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=877d4a455cdc3ea9d319bd97c9d672c3 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2x.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=ff782d28022907591d2be1f35b18341b 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2x.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=dbdbb68c1c61859882c89a3e4b14fdbe 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2x.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=19ff7808ba667abfa49c1523877d410d 2500w" />

Here’s what the app looks like in *Preview* mode:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2y.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=5a85e393eff468bcadf056e260e23b95" alt="The working social post generator, with the project editor in &#x22;Preview&#x22; mode" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2y.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2y.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c9ac3737213b9fd46d8ed3778be9c124 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2y.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=4329e9461fa4d9dbc3380822f1b7f2ed 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2y.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=b53cf707b21d64d47b78a6e6091b3dcc 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2y.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=d9a729c17c7c59117311c892ea569653 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2y.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=29c916c3b56deb8e9f97eb9dfdb8395d 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2y.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=8fd27c33aa50de95b83c5826e3667b97 2500w" />

You can see the output of any `print()` functions and error messages by clicking on the **Log** button located near the upper right corner of the page:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2z.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=8d7cd482ba5658595eba7246578fbe28" alt="The social post generator with an arrow pointing to the Log button" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2z.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2z.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=7cf17ff51372c4b20d30402e95a1ad6c 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2z.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=3eae356f8b94d4e7eea89eb9f94dffd6 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2z.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=2a0f8acda96054996aa2f0b9a4571e46 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2z.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=df6e0ae96498976d9365f7385306568b 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2z.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=97cd57fde5700cb4571dbedd5d9297ee 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2z.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=dc57818fb5b27dcbe3cd92cc1589fbaf 2500w" />

Here’s what the app looks like when displaying the log:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2aa.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c27dfb7ee4bed11a5c0908343a4bac3d" alt="The social post generator, with the log pane displayed" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2aa.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2aa.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=5488493d642c1bdbbaba9716d94c6bf1 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2aa.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=30eaa564df190f38c4c0d4b1266067b0 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2aa.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=46f5d207ff4e6b5b65e1f96b45bb1d3e 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2aa.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=33e7a4d67b1152b74c41a151d5e05871 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2aa.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=5bb3e3b986ad597463ae94f1668bfe0b 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2aa.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=78688714e7ec521206f68e546573b808 2500w" />

It's very helpful to be able to test the application while editing it. As you continue to work with Writer Framework, you'll find yourself alternating between making changes to your application and testing those changes without having to leave the project editor.

## Run the application locally

Once you've tested the application, it's time to run it locally.

Switch back to your terminal application. Stop the editor with ctrl-c, then run the application by entering the following command:

```
writer run social-post-generator
```

Note that the command starts with `writer run` as opposed to `writer edit`. This launches the application as your users will see it, without any of the editing tools. Even though you can preview your applications in the project editor, it's still a good idea to test it by running it on your computer, outside the project editor, before deploying it.

You'll be able to access the application with your browser at the URL that appears on the command line. It should look like this:

<img src="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=e38dd8f9a9fe0a6b6976706902b45761" alt="Finished social post generator project" data-og-width="3000" width="3000" data-og-height="2000" height="2000" data-path="framework/images/tutorial/social_post/sp_gen_2ab.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=280&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=33377c60d8cb103cb857c06aa1a31e7e 280w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=560&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=60df3811ecd7566018b07c5fe7fc36cd 560w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=840&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=6341f4458526199a5e4333b3a2187728 840w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=1100&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=f2221fca93c548a5fbedc208e7842de6 1100w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=1650&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=efd3624129c3b4d65434eec07b212ebb 1650w, https://mintcdn.com/writer/PCF7UWM79DSDrLoF/framework/images/tutorial/social_post/sp_gen_2ab.png?w=2500&fit=max&auto=format&n=PCF7UWM79DSDrLoF&q=85&s=c6a0a9a8baca8a45ef096077e29a67d3 2500w" />

<Note>The Writer editor, which you launched with `writer edit social-post-generator`, and your application, which you launched with `writer run social-post-generator`, run  on the same URL, but on different *ports* (specified by the number after the `:` character at the end of the URL).</Note>

## Conclusion

That's it — you've built a functional social post generator using the Writer Framework!

Feel free to modify this project! The Writer platform is flexible enough for you to customize, extend, and evolve your application into something completely different! To find out what else you can do, check out the documentation for [Writer Framework](https://dev.writer.com/framework/introduction) and the [Writer API](https://dev.writer.com/introduction).


# State schema
Source: https://dev.writer.com/framework/state-schema



Schema declarations on the [Application state](./application-state) allows Framework to handle complex serialisation
scenarios, while also allowing your IDE and toolchains to provide autocomplete and type checking.

## Schema declaration

```python  theme={null}
import writer as wf

class AppSchema(wf.WriterState):
    counter: int

initial_state = wf.init_state({
    "counter": 0
}, schema=AppSchema)

# Event handler
# It receives the session state as an argument and mutates it
def increment(state: AppSchema):
    state.counter += 1
```

Accessing an attribute by its key is always possible.

```python  theme={null}
def increment(state: AppSchema):
    state["counter"] += 1
```

Attributes missing from the schema remain accessible by their key.

```python  theme={null}
initial_state = wf.init_state({
    "counter": 0,
    "message": None
}, schema=AppSchema)

def increment(state: AppSchema):
    state['message'] = "Hello pigeon"
```

## Schema composition

Schema composition allows you to model a complex Application state.

```python  theme={null}
class MyappSchema(wf.State):
    title: str

class AppSchema(wf.WriterState):
    my_app: MyappSchema
    counter: int

initial_state = wf.init_state({
    "counter": 0,
    "my_app": {
        "title": "Nested value"
    }
}, schema=AppSchema)
```

## Calculated properties

Calculated properties are updated automatically when a dependency changes.
They can be used to calculate values derived from application state.

```python  theme={null}
class MyAppState(wf.State):
  counter: List[int]

class MyState(wf.WriterState):
  counter: List[int]

  @wf.property(['counter', 'app.counter'])
  def total_counter(self):
    return sum(self.counter) + sum(self.app.counter)

initial_state = wf.init_state({
    "counter": 0,
    "my_app": {
        "counter": 0
    }
}, schema=MyState)
```

## Multi-level dictionary

Some components like *Vega Lite Chart* require specifying a graph in the form of a multi-level dictionary.

A schema allows you to specify that an attribute which contains a dictionary
must be treated as a dictionary, rather than as a group of state.

```python  theme={null}
class AppSchema(wf.WriterState):
    vegas_graph: dict

# Without schema, this handler is execute only once
def handle_vega_graph(state: AppSchema):
    graph = state.vega_graph
    graph["data"]["values"][0]["b"] += 1000
    state.vega_graph = graph
    
initial_state = wf.init_state({
    "vegas_graph": {
        "data": {
            "values": [
                {"a": "C", "b": 2}, {"a": "C", "b": 7}, {"a": "C", "b": 4},
                {"a": "D", "b": 1}, {"a": "D", "b": 2}, {"a": "D", "b": 6},
                {"a": "E", "b": 8}, {"a": "E", "b": 4}, {"a": "E", "b": 7}
            ]
        },
        "mark": "bar",
        "encoding": {
            "x": {"field": "a", "type": "nominal"},
            "y": {"aggregate": "average", "field": "b", "type": "quantitative"}
        }
    },
}, schema=AppSchema)
```

## Type checking

A schema allows you to check the integrity of your back-end using the type system.
The code below will raise an error with mypy.

```bash  theme={null}
$ mypy apps/myapp/main.py
apps/myapp/main.py:7: error: "AppSchema" has no attribute "countr"; maybe "counter"?  [attr-defined] 
```

Here is the code, can you spot the error ?

```python  theme={null}
import writer as wf

class AppSchema(wf.WriterState):
    counter: int

def increment(state: AppSchema):
    state.countr += 1

initial_state = wf.init_state({
    "counter": 26,
}, schema=AppSchema)
```


# Stylesheets
Source: https://dev.writer.com/framework/stylesheets



The appearance of your application can be fully customised via CSS stylesheets. These are dynamically linked during runtime and can be switched from the back-end, targeting all or specific sessions.

## Importing a stylesheet

Stylesheet imports are triggered via Framework's `mail`, similarly to other features discussed in [Backend-initiated actions](/framework/backend-initiated-actions). When the import is triggered, the front-end downloads the specified stylesheet and creates a `style` element with its contents.

The `import_stylesheet` method takes the `stylesheet_key` and `path` arguments. The first works as an identifier that will let you override the stylesheet later if needed. The second is the path to the CSS file.The path specified needs to be available to the front-end, so storing it in the `/static` folder of your app is recommended.

The following code imports a stylesheet when handling an event.

```py  theme={null}
def handle_click(state):
    state.import_stylesheet("theme", "/static/custom.css")
```

In many cases, you'll want to import a stylesheet during initialisation time, for all users. This is easily achievable via the initial state, as shown below.

```py  theme={null}
initial_state = wf.init_state({
    "counter": 1
})

initial_state.import_stylesheet("theme", "/static/custom.css")
```

<Tip>
  Use versions to avoid caching. During development time, stylesheets may be cached by your browser, preventing updates from being reflected. Append a querystring to bust the cache, e.g. use `/static/custom.css?3`.
</Tip>

## Applying CSS classes

You can use the property *Custom CSS classes* in the Builder's *Component Settings* to apply classes to a component, separated by spaces. Internally, this will apply the classes to the root HTML element of the rendered component.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.component-settings.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7bde5b1b655bc18d64c8fe53446cb7cb" alt="Stylesheets - Component Settings" data-og-width="1704" width="1704" data-og-height="346" height="346" data-path="framework/images/stylesheets.component-settings.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.component-settings.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f7c8e67136955e17a4b761efa14c5389 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.component-settings.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=d4cdf0b6b22ddf396134346320c3ee85 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.component-settings.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=38078c3bf901999b1c5bad469d6e19dc 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.component-settings.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=7c14d29c9cb3f3d2d36ad0ccb55b9fd0 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.component-settings.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=3a8917d3978683898ed9276cdcbdf9b8 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.component-settings.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=82d19c3c2a0bb66e19334263b83e35b8 2500w" />

## Tips for effective stylesheets

The CSS code for the class used earlier, `bubblegum`, can be found below. Note how the `!important` flag is used when targetting style attributes that are configurable via the Builder. If the flag isn't included, these declarations will not work, because built-in Framework styling is of higher specificity.

```css  theme={null}
.bubblegum {
    background: #ff63ca !important;
    line-height: 1.5;
    transform: rotate(-5deg);
}

/* Targeting an element inside the component root element */
.bubblegum > h2 {
    color: #f9ff94 !important;
}
```

<Warning>
  Component structure may change. When targeting specific HTML elements inside components, take into account that the internal structure of components may change across Framework versions.
</Warning>

Alternatively, you can override Framework's style variables. This behaves slightly differently though; style variables are inherited by children components. For example, if a *Section* has been assigned the `bubblegum` class, its children will also have a pink background by default.

```css  theme={null}
.bubblegum {
    --containerBackgroundColor: #ff63ca;
    --primaryTextColor: #f9ff94;
    line-height: 1.5;	
    transform: rotate(-5deg);
}
```

The class can be used in *Component Settings*. If the stylesheet is imported, the effect will be immediate. In case the stylesheet has been modified since imported, it'll need to be imported again.

<img src="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.applied-classes.png?fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=65444dbafae3a638b47f484b9d04185f" alt="Stylesheets - Applied Classes" data-og-width="1686" width="1686" data-og-height="346" height="346" data-path="framework/images/stylesheets.applied-classes.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.applied-classes.png?w=280&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=449839ae5f1409c4342c0e8ff99f144c 280w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.applied-classes.png?w=560&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=aa26426ffebe72b2f2dc1ed6791cbae1 560w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.applied-classes.png?w=840&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=abb5349762ed4235873e3ab2ba43a4ac 840w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.applied-classes.png?w=1100&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=e4cd8049c49f3d97b749738eba914f52 1100w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.applied-classes.png?w=1650&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=f3a4a288941a0bcb911c558a7a8f68e7 1650w, https://mintcdn.com/writer/9jV0H_SSzBim4ReZ/framework/images/stylesheets.applied-classes.png?w=2500&fit=max&auto=format&n=9jV0H_SSzBim4ReZ&q=85&s=b0f46f5f93186668afd032d138b20e96 2500w" />

## Targeting component types

Framework components have root HTML elements with a class linked to their type. For example, *Dataframe* components use the class *CoreDataframe*. When writing a stylesheet, you can target all *Dataframe* components as shown below.

```css  theme={null}
.CoreDataframe {
    line-height: 2.0;
}
```

## Implementing themes

It's possible to switch stylesheets during runtime, by specifying the same `stylesheet_key` in subsequent calls. This allows you to implement a "theme" logic if desired, targeting the whole or a specific part of your app.

```py  theme={null}
def handle_cyberpunk(state):
    state.import_stylesheet("theme", "/static/cyberpunk_theme.css")

def handle_minimalist(state):
    state.import_stylesheet("theme", "/static/minimalist_theme.css")
```


# Testing
Source: https://dev.writer.com/framework/testing



Testing a Framework application is easy. Given that event handlers are plain Python functions that take arguments such as `state` and `payload`, you can inject your own and test whether the outcome is correct. This section will use `pytest` examples.

## State

### Accessing the initial state

To get started, import your app's entry point, `main`. This will initialise state and make event handlers available. The initial state is available in the module, at `main.wf.initial_state` provided you imported `writer` as `wf`.

### Creating states

For testing purposes, you can create your own state using the `WriterState` class in `writer.core`. Pass a dictionary when constructing it.

```py  theme={null}
from writer.core import WriterState

artificial_state = WriterState({
    "a": 3,
    "b": 6
})
```

## Example

The code of a Framework application basically consists of two things:

1. Initial state
2. Event handlers

It's straightforward to test both, as shown below.

### The app

```py  theme={null}
import writer as wf

def handle_multiplication(state):
    state["n"] = state["a"]*state["b"]

wf.init_state({
    "counter": 0,
    "a": 0,
    "b": 0
})
```

### The tests

```py  theme={null}
from writer.core import WriterState
import main


class TestApp:

    initial_state = main.wf.initial_state
    artificial_state = WriterState({
        "a": 3,
        "b": 2
    })

    def test_counter_must_start_from_zero(self):
        assert self.initial_state["counter"] == 0

    def test_handle_multiplication(self):
        main.handle_multiplication(self.artificial_state)
        assert self.artificial_state["n"] == 6

```


# Account management
Source: https://dev.writer.com/home/account_management





# Agent Builder
Source: https://dev.writer.com/home/agent-builder-link





# Monitor agent performance
Source: https://dev.writer.com/home/agent-observability

Monitor agent performance with session logs and observability metrics in AI Studio. Track usage, analyze conversations, and debug agent behavior.

AI Studio provides session logs and observability metrics for agents so you can understand how your agents are performing.

The following observability views are available for individual agents:

* [Session logs](#session-logs)
* [Agent observability](#agent-observability)

You can also view [global usage and spend](/home/observability) for your organization.

## Session logs

<Info>
  Session logs are only available to [organization admins](/home/account_management). Logs are only available for custom [no-code agents](/no-code/introduction) and are not yet available for Ask Writer or prebuilt agents.
</Info>

Organization admins can choose to retain logs from agent sessions. When enabled, you can view the logs for an agent for the given retention period.

### Enable session logging

To enable session logging, log in to [AI Studio](https://app.writer.com/aistudio) and navigate to the **Admin** tab in the left sidebar.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/session-logs-admin.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b58aad872d7b07866131b08d6211bcc5" alt="Session log page in the Admin tab, which shows a list of agents and their session log settings." data-og-width="3172" width="3172" data-og-height="1684" height="1684" data-path="images/home/session-logs-admin.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/session-logs-admin.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=0b7aa77f74d15ac313cda05b842540c9 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/session-logs-admin.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=6e5f486a8e19cc78daa74f5b0f9256f7 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/session-logs-admin.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5f0f76ce2714aba04d987977b8798581 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/session-logs-admin.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=40aeaf857cbcdd0779616e747680126c 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/session-logs-admin.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=ad68fdb18547dab038d93d46cd965019 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/session-logs-admin.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=545e8ebd3379a66a0bfed5fbb36ffcea 2500w" />

From there, you can enable session logging for your organization.

Once enabled, you can choose the retention period for session logs for each agent. The default is no retention. The possible retention periods are 7 days, 30 days, 90 days, or 180 days.

Whenever someone updates an agent's session log settings, all organization admins receive an email notification.

### View session logs

To view session logs, navigate to specific agent from the [AI Studio homepage](https://app.writer.com/aistudio). Select the **Observability** tab from the top of the page and then select the **Session logs** view. Click on an individual session to view the logs.

<img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/home/agent-session-logs.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=15c696097203e5901807243dcfb52d63" alt="Session logs tab in AI Studio" data-og-width="3346" width="3346" data-og-height="884" height="884" data-path="images/home/agent-session-logs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/home/agent-session-logs.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=a7b698e3372390bec6f1f42354caa7d7 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/home/agent-session-logs.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c395ce2df2cd8e6fa85b44242182a240 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/home/agent-session-logs.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=85d0dbcb56f9d742e319c7f55de0d152 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/home/agent-session-logs.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7c42aa4c9b2be08bf34f965ed828e473 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/home/agent-session-logs.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=786244119b3eadffb442ed02495ef9a1 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/home/agent-session-logs.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=ebb4b178617997b743d37b93370b5229 2500w" />

#### Flagged responses

In a chat with a no-code agent, an end user can flag a response as inappropriate or inaccurate. An organization admin can then view the flagged responses within the session logs.

To flag a response in a chat, the user clicks the **Flag** button in the bottom right corner of the response.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/flag-response.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=703838451f5ff82d87fbd0816aa4cfd0" alt="Button to flag a response within a chat" data-og-width="608" width="608" data-og-height="160" height="160" data-path="images/home/flag-response.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/flag-response.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=51063df0bc5ab6f9121c1c1a2b7fb189 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/flag-response.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=85acaad36a292d6fa8a742a29714a6db 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/flag-response.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=37d43cbedb318f24ad895ffc9bc6a4de 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/flag-response.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5de8a9d172007886abb9ac1737d5cd72 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/flag-response.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=659dbdbea3ef6a2e28ca61555327f743 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/flag-response.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c2f001a87c2f1b4818d9bc9c42d87e80 2500w" />

In the session logs for a particular conversation, you can see any flagged responses by clicking the **View flagged responses** button in the top right corner of the session log.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/view-flagged.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7bc2626f4aff561d059ebbbe455c16d4" alt="Button to view flagged responses for a particular conversation" data-og-width="552" width="552" data-og-height="140" height="140" data-path="images/home/view-flagged.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/view-flagged.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=239c775f5a5270d2751a008723aa173b 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/view-flagged.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e60c22df0c2d9b78cf773a35a75bac04 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/view-flagged.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=79e45d2a8f2a97294fbab932ab7842a6 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/view-flagged.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e4d202d00904a7dbb62834deb30b3562 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/view-flagged.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=2e3e7403bd081f8d7f717bfcf7f1d68f 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/view-flagged.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5a623afd4e6244688a901e3110da4f24 2500w" />

## Agent observability

Agent observability provides a detailed view of an agent's engagement, performance, and usage. Anyone can view these metrics for agents in your organization. Session logs are also available, but [only for organization admins if the agent's session log settings are enabled](#view-session-logs).

These metrics are only available for deployed agents.

To view metrics for deployed agents, navigate to the specific agent from the [AI Studio homepage](https://app.writer.com/aistudio). Select the **Observability** tab from the top of the page and then choose the specific metric you want to view.

* **Engagement metrics**: Show the top five users for the agent over the specified time period and the total number of user interactions for the agent.
* **Performance metrics**: Show the average response time as well as the P90, P95, and P99 response times for the agent over the specified time period. It also shows the response codes broken down by `200`, `400`, and `500` status codes.
* **Usage metrics**: Show the total number of tokens and the total spend for the agent over the specified time period.


# Detect AI content
Source: https://dev.writer.com/home/ai-detect



<Warning>
  **Deprecation notice**: The [AI detection API endpoint](/api-reference/tool-api/ai-detect) at `/v1/tools/ai-detect` is deprecated and will be removed on **December 22, 2025**.

  This endpoint will no longer be available after the removal date. Please plan to migrate any integrations that currently use this endpoint to alternative solutions.
</Warning>

The [AI Detection API](/api-reference/tool-api/ai-detect) detects AI-generated content in text. It provides a score between 0 and 1 that indicates the confidence that the content is AI- or human-generated.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## AI Detection endpoint

**Endpoint:** `POST /v1/ai-detect`

<CodeGroup>
  ```bash cURL theme={null}
  curl --request POST \
    --url https://api.writer.com/v1/tools/ai-detect \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header 'Content-Type: application/json' \
    --data '{
    "input": "AI and ML continue to be at the forefront of technological advancements. In 2025, we can expect more sophisticated AI systems that can handle complex tasks with greater efficiency. AI will play a crucial role in various sectors, including healthcare, finance, and manufacturing. For instance, AI-powered diagnostic tools will become more accurate, helping doctors detect diseases at an early stage. In finance, AI algorithms will enhance fraud detection and risk management."
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.tools.ai_detect(
    input="AI and ML continue to be at the forefront of technological advancements. In 2025, we can expect more sophisticated AI systems that can handle complex tasks with greater efficiency. AI will play a crucial role in various sectors, including healthcare, finance, and manufacturing. For instance, AI-powered diagnostic tools will become more accurate, helping doctors detect diseases at an early stage. In finance, AI algorithms will enhance fraud detection and risk management."
  )

  print(f"Label: {response.label}, Score: {response.score}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.tools.aiDetect({
    input: "AI and ML continue to be at the forefront of technological advancements. In 2025, we can expect more sophisticated AI systems that can handle complex tasks with greater efficiency. AI will play a crucial role in various sectors, including healthcare, finance, and manufacturing. For instance, AI-powered diagnostic tools will become more accurate, helping doctors detect diseases at an early stage. In finance, AI algorithms will enhance fraud detection and risk management."
  });

  console.log(`Label: ${response.label}, Score: ${response.score}`);
  ```
</CodeGroup>

### Request body

The request body is a JSON object with the following fields. All fields are required.

| Parameter | Type   | Description                       |
| --------- | ------ | --------------------------------- |
| `input`   | string | The text to detect AI content in. |

### Response format

The response is a JSON object with the following fields.

| Parameter | Type   | Description                                                                                                           |
| --------- | ------ | --------------------------------------------------------------------------------------------------------------------- |
| `label`   | string | The label of the AI content. `fake` indicates the text is AI-generated, `real` indicates the text is human-generated. |
| `score`   | number | The confidence score of the label, from 0 to 1.                                                                       |

```json  theme={null}
{
    "label": "fake",
    "score": 0.95
}
```


# Analyze images
Source: https://dev.writer.com/home/analyze-images

Analyze single or multiple images with Palmyra Vision. Ask questions about images, generate captions, and compare images using the vision endpoint.

With the `vision` endpoint, you can analyze single or multiple images with a prompt. [Palmyra Vision](/home/models#palmyra-vision) allows you to ask questions about an image, generate captions, compare images, and more.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Vision endpoint

**Endpoint:** `POST /v1/vision`

<CodeGroup>
  ```bash cURL theme={null}
  curl -X POST \
    'https://api.writer.com/v1/vision' \
    -H 'Content-Type: application/json' \
    -H "Authorization: Bearer $WRITER_API_KEY" \
    --data-raw '{
      "model": "palmyra-vision",
      "prompt": "What is the difference between the image {{image_1}} and the image {{image_2}}?",
      "variables": [
        {"name": "image_1", "file_id": "<FILE_ID>"},
        {"name": "image_2", "file_id": "<FILE_ID_2>"}
      ]
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.vision.analyze(
    model="palmyra-vision",
    prompt="What is the difference between the image {{image_1}} and the image {{image_2}}?",
    variables=[{"name": "image_1", "file_id": "<FILE_ID>"}, {"name": "image_2", "file_id": "<FILE_ID_2>"}]
  )

  print(response.data)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.vision.analyze({
    model: "palmyra-vision",
    prompt: "What is the difference between the image {{image_1}} and the image {{image_2}}?",
    variables: [{ name: "image_1", file_id: "<FILE_ID>" }, { name: "image_2", file_id: "<FILE_ID_2>" }]
  });

  console.log(response.data);
  ```
</CodeGroup>

### Request body

The request body is a JSON object with the following fields:

| Parameter             | Type   | Description                                                                                                                                                                                                                          |
| --------------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `model`               | string | The model to use for the analysis. Must be `palmyra-vision`.                                                                                                                                                                         |
| `prompt`              | string | The prompt to use for the analysis. The prompt must include the names of the images you're analyzing, referencing them as `{{name}}`. For example: `What is the difference between the image {{image_1}} and the image {{image_2}}?` |
| `variables`           | array  | An array of image variables with a `name` and `file_id`.                                                                                                                                                                             |
| `variables[].name`    | string | The name of the image. You must use the same name in the prompt, referencing it as `{{name}}`.                                                                                                                                       |
| `variables[].file_id` | string | The File ID of the uploaded image. The maximum allowed file size is 7 MB. You must upload the image to Writer before passing it to the Vision endpoint. Learn how to [upload images below](#upload-images).                          |

### Response format

The response is a JSON object with a `data` field that contains the analysis results as a string.

```json  theme={null}
{
    "data": "The analysis results"
}
```

## Example: Extract text from an image

This example shows how to extract text from an image using the `vision` endpoint.

### Upload an image

Before you can analyze an image, you need to upload it to Writer.

The following code samples demonstrate how to upload an image and print the File ID. You need the File ID to pass to the Vision endpoint.

<CodeGroup>
  ```bash cURL theme={null}
  curl -X POST 'https://api.writer.com/v1/files' \
    -H 'Content-Type: image/jpeg' \
    -H 'Content-Disposition: attachment; filename=<FILE_NAME>' \
    -H "Authorization: Bearer $WRITER_API_KEY" \
    --data-binary "@<FILE_PATH>"

  # Example:
  #   <FILE_NAME> = handwriting.jpg
  #   <FILE_PATH> = /path/to/handwriting.jpg
  ```

  ```python Python theme={null}
  from pathlib import Path
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  file_ = client.files.upload(
    content=Path("<FILE_PATH>"),  # Replace with your file path, for example: /path/to/handwriting.jpg
    content_disposition="attachment; filename=<FILE_NAME>",  # Replace with your file name, for example: handwriting.jpg
    content_type="image/jpeg"
  )

  print(file_.id)
  ```

  ```javascript JavaScript theme={null}
  import fs from 'fs';
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const file = await client.files.upload({
    content: fs.createReadStream("<FILE_PATH>"),  // Replace with your file path, for example: /path/to/handwriting.jpg
    "Content-Disposition": "attachment; filename=<FILE_NAME>",  // Replace with your file name, for example: handwriting.jpg
    "Content-Type": "image/jpeg"
  });

  console.log(file.id)
  ```
</CodeGroup>

Learn more about [uploading and managing files](/home/files).

### Generate a caption with the Vision endpoint

Once you have the File IDs for any images you want to analyze, you can pass them to the Vision endpoint along with a prompt.

The prompt must include the names of the images you're analyzing, referencing them as `{{name}}`, where `name` is the name you provided in the `variables` array. For example: `Extract the text from the image {{name}}.` If you include files in the `variables` array that you don't include in the prompt, the API returns an error.

The following code sample shows the API call to extract text from an image.

<CodeGroup>
  ```bash cURL theme={null}
  curl -X POST \
    'https://api.writer.com/v1/vision' \
    -H 'Content-Type: application/json' \
    -H "Authorization: Bearer $WRITER_API_KEY" \
    --data '{
      "model": "palmyra-vision",
      "prompt": "Extract the text from the image {{handwriting}}.",
      "variables": [{"name": "handwriting", "file_id": "<FILE_ID>"}]
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  client = Writer()

  response = client.vision.analyze(
    model="palmyra-vision",
    prompt="Extract the text from the image {{handwriting}}.",
    variables=[{"name": "handwriting", "file_id": "<FILE_ID>"}]
  )

  print(response.data)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  const client = new Writer();

  const response = await client.vision.analyze({
    model: "palmyra-vision",
    prompt: "Extract the text from the image {{handwriting}}.",
    variables: [{ name: "handwriting", file_id: "<FILE_ID>" }]
  });

  console.log(response.data);
  ```
</CodeGroup>

## Next steps

* Learn how to analyze images during a chat completion with the [Vision tool](/home/vision-tool).


# API Reference
Source: https://dev.writer.com/home/api-reference-link





# Invoke no-code agents via the API
Source: https://dev.writer.com/home/applications

Turn deployed no-code agents into microservices with the Applications API. Use text generation and research agents as tools in your applications.

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>

The Applications API allows you to turn deployed [no-code agents](/no-code/introduction) into microservices, which can also be used as tools in [tool calling](/home/applications-tool-calling). Business users can define inputs, prompts, and outputs, and developers can then add them to other applications, UIs, or services.

This guide shows how to use the `/applications` endpoint to generate content from no-code agents.

If you do not have a deployed no-code agent, follow the guides to build an agent with [text generation](/no-code/text-generation) or [research](/no-code/research) capabilities in AI Studio.

<Warning>
  The `/applications` endpoint supports only agents with [text generation](/no-code/text-generation) and [research](/no-code/research) capabilities. It does not support [chat](/no-code/chat) agents.
</Warning>

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Endpoint overview

**URL:** `POST https://api.writer.com/v1/applications/{application_id}`

<Warning>
  Using the `/applications` endpoint incurs charges for **model usage**. See the [pricing page](/home/pricing) for more information.
</Warning>

<CodeGroup>
  ```bash cURL theme={null}
  curl 'https://api.writer.com/v1/applications/<application-id>' \
  -X POST \
  -H 'Content-Type: application/json' \
  -H "Authorization: Bearer $WRITER_API_KEY" \
  --data-raw '{
    "inputs": [
      {
        "id": "Product description",
        "value": [
          "Terra running shoe"
        ]
      }
    ]
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.applications.generate_content(
      application_id="<application-id>",
      inputs=[
          {
              "id": "Product description",
              "value": ["Terra running shoe"]
          }
      ]
  )

  print(response.suggestion)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.applications.generateContent(
      "<application-id>",
      {
          inputs: [
              {
                  id: "Product description",
                  value: ["Terra running shoe"]
              }
          ]
      }
  );

  console.log(response.suggestion);
  ```
</CodeGroup>

### Path parameters

| Parameter        | Type   | Description                                                                                                                                                                                                                                                                                                                                              |
| ---------------- | ------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `application_id` | string | The ID of the deployed agent. You can find this in the URL of the agent in AI Studio: `https://app.writer.com/aistudio/organization/<organization-id>/applications/<application-id>`. You can also use the [List applications](/api-reference/application-api/list-applications) endpoint to get the list of deployed agents and see the application ID. |

### Request body

Below are the required and commonly used optional parameters for the `/applications` endpoint.

| Parameter        | Type           | Description                                                                                                                                                                                                                                                                                        |
| ---------------- | -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `inputs`         | array          | Input values matching the agent's defined input fields. The input structure depends on the agent capabilities.                                                                                                                                                                                     |
| `inputs[].id`    | string         | The name of the input field. For research, the input id is always `query`.                                                                                                                                                                                                                         |
| `inputs[].value` | array\[string] | An array containing values of the input field. You can pass multiple values for a single input field. If the input field is a file, the value should be the `file_id` from an uploaded file, such as `["1234-abcd-1234"]`. Learn more about how to upload files with the [Files API](/home/files). |

```json  theme={null}
{
  "inputs": [
    {
      "id": "string",
      "value": ["string"]
    }
  ]
}
```

See the [applications endpoint reference](/api-reference/application-api/applications) for more information on the request body and the additional parameters you can use to control the agent.

### Response format

The response format depends on the agent capabilities and whether you set the `stream` parameter to `true` or `false`. Only agents with research support streaming responses at this time.

#### Non-streaming response

If you set the `stream` parameter to `false`, the response is delivered as a JSON object with the following parameters:

| Parameter    | Type   | Description                                                  |
| ------------ | ------ | ------------------------------------------------------------ |
| `title`      | string | The name of the output field, as defined in the application. |
| `suggestion` | string | The output of the application call.                          |

```json  theme={null}
{
  "title": null,
  "suggestion": "The Terra running shoe combines lightweight materials with advanced cushioning technology to deliver exceptional comfort and performance for every stride."
}
```

#### Streaming response

If you set the `stream` parameter to `true`, the response is delivered as [server-sent events](https://html.spec.whatwg.org/multipage/server-sent-events.html#server-sent-events). The event contains several parameters.

The content of the chunk is in the `delta` field. You can also use the `stages` field to get the stages of the research assistant application call, such as "Planning the research" or "Researching and organizing findings."

Below are the important parameters for extracting the output of the application call.

| Parameter              | Type   | Description                                           |
| ---------------------- | ------ | ----------------------------------------------------- |
| `delta`                | object | The content of the chunk.                             |
| `delta.content`        | string | The output of the application call.                   |
| `delta.stages`         | array  | The stage of the research assistant application call. |
| `delta.stages.content` | string | The content of the stage.                             |

```json  theme={null}
data: {'delta': {'title': None,
  'content': None,
  'stages': [{'id': 'a5d81590-0120-4404-948b-8075e3610f51',
    'content': 'Initiating a research assistant: 🚗 Automotive assistant',
    'sources': None}]}}
```

## Example: Text generation

Agents used for [text generation](/no-code/text-generation) generate content based on the inputs provided to a specific no-code agent created in AI Studio. This is a great way to enable business users to control prompts and outputs while still allowing developers to add them to other applications, UIs, or services.

To invoke text generation, you need to provide the application ID and the required inputs to the agent. Inputs are defined in the agent within AI Studio.

### Get the text generation inputs

To see the required inputs for the agent, you can view the agent in [AI Studio](https://app.writer.com/aistudio), or you can use the [Get application](/api-reference/application-api/application-details) endpoint to get the agent details, including the inputs.

The example below shows how to use the `Get application` endpoint to get the list of required inputs with their name and types.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request GET 'https://api.writer.com/v1/applications/<application-id>' \
   --header "Authorization: Bearer $WRITER_API_KEY"
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  application = client.applications.retrieve(
      "<application-id>",
  )

  for input_ in application.inputs:
    print(f"{input_.name}: {input_.input_type}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const application = await client.applications.retrieve("<application-id>");

  for (const input of application.inputs) {
    console.log(`${input.name}: ${input.input_type}`);
  }
  ```
</CodeGroup>

### Format the request body with the application inputs

The `inputs` parameter is an array of objects, each containing an `id` and `value` field. The `id` field is the name of the input field, and the `value` field is the value of the input field.

```json  theme={null}
{
  "inputs": [
    {
      "id": "Text input name",
      "value": ["Input value 1"]
    },
    {
      "id": "File input name",
      "value": ["1234-fileid-1234"]
    }
  ]
}
```

If the input field is a file, the value should be the `file_id` from an [uploaded file](/api-reference/file-api/upload-files).

Your request body should be formatted as a JSON object with values for each input.

### Generate content from the agent

Once you've formatted the request body with the agent inputs, you can invoke the agent using the [Generate content](/api-reference/application-api/applications) endpoint.

The examples below demonstrate calling an agent with text generation capabilities. The agent takes two text inputs: `Product description` and `Target audience`.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST 'https://api.writer.com/v1/applications/<application-id>' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data-raw '{
    "inputs": [
      {
        "id": "Product description",
        "value": ["Terra running shoe"]
      },
      {
        "id": "Target audience",
        "value": ["Runners"]
      }
    ]
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.applications.generate_content(
      application_id="<application-id>",
      inputs=[
          {
              "id": "Product description",
              "value": ["Terra running shoe"]
          },
          {
              "id": "Target audience",
              "value": ["Runners"]
          }
      ]
  )

  print(response.suggestion)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.applications.generateContent(
      "<application-id>", 
      {
          inputs: [
              {
                  id: "Product description",
                  value: ["Terra running shoe"]
              },
              {
                  id: "Target audience",
                  value: ["Runners"]
              }
          ]
      }
  );

  console.log(response.suggestion);
  ```
</CodeGroup>

## Example: Research assistant

Agents with [research](/no-code/research) capabilities output a final report after performing research in stages. Because of this, they support streaming responses.

These agents take an array of inputs that contain a single item, formatted as a JSON object with `id` and `value` parameters. It also takes a `stream` parameter that is set to `false` by default.

| Parameter        | Type           | Description                                                                                       |
| ---------------- | -------------- | ------------------------------------------------------------------------------------------------- |
| `inputs`         | array          | An array of objects, each containing an `id` and `value` field.                                   |
| `inputs[].id`    | string         | The name of the input field. For research assistant applications, the input id is always `query`. |
| `inputs[].value` | array\[string] | An array containing the research query.                                                           |
| `stream`         | Boolean        | Whether to stream the response. Defaults to `false`.                                              |

The examples below demonstrate calling an agent to research hotels in San Francisco. The application streams the output as it is generated.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST 'https://api.writer.com/v1/applications/<research-application-id>' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data-raw '{
    "inputs": [
      {
        "id": "query", 
        "value": ["Provide a list of three hotels in San Francisco near Union Square within the price range of $100 to $200 per night"]
      }
    ],
    "stream": true
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.applications.generate_content(
      application_id="<research-application-id>",
      inputs=[
          {
              "id": "query",
              "value": ["Provide a list of three hotels in San Francisco near Union Square within the price range of $100 to $200 per night"]
          }
      ],
      stream=True
  )

  for chunk in response:
      if chunk.delta.content:
          print(chunk.delta.content, end="", flush=True)
      elif chunk.delta.stages:
          print(chunk.delta.stages[0].content)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.applications.generateContent(
      "<research-application-id>",
      { 
          inputs: [
              {
                  id: "query",
                  value: ["Provide a list of three hotels in San Francisco near Union Square within the price range of $100 to $200 per night"]
              }
          ],
          stream: true
      } 
  );

  for await (const chunk of response) {
      if (chunk.delta.content) {
          process.stdout.write(chunk.delta.content);
      } else if (chunk.delta.stages) {
          console.log(chunk.delta.stages[0].content);
      }
  }
  ```
</CodeGroup>

## Next steps

Now that you've invoked a no-code agent via the API, learn other ways you can use no-code agents via the API:

* [Run no-code agents asynchronously](/home/async-applications)
* [Use no-code agents in tool calling](/home/applications-tool-calling)


# Use no-code agents as tools
Source: https://dev.writer.com/home/applications-tool-calling



<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>

You can use deployed [no-code agents](/no-code/introduction) as tools in [chat completions](/api-reference/completion-api/chat-completion) with Palmyra X4 and X5.

This approach allows you to:

* Use no-code agents alongside other tools
* Chain multiple no-code agents together
* Combine outputs with other API calls or business logic

If you don't have a deployed no-code agent, build one with [text generation](/no-code/text-generation) or [research](/no-code/research) capabilities in AI Studio and [deploy it](/no-code/deploying-an-agent) to get an application ID.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Tool structure

To use a no-code agent as a tool, define the tool in a `tools` array when making the request to the [chat endpoint](/home/chat-completion).

The `tools` array contains an object with the following parameters:

| Parameter                        | Type   | Description                                                                                                                      |
| -------------------------------- | ------ | -------------------------------------------------------------------------------------------------------------------------------- |
| `type`                           | string | The type of tool, which is `function` for a no-code agent                                                                        |
| `function`                       | object | An object containing the tool's description and application ID                                                                   |
| `function.name`                  | string | The name of the tool                                                                                                             |
| `function.description`           | string | A description of what the tool will be used for                                                                                  |
| `function.parameters`            | object | An object containing the tool's input parameters                                                                                 |
| `function.parameters.type`       | string | The string `object`                                                                                                              |
| `function.parameters.properties` | object | An object containing the tool's parameters in the form of a [JSON schema](https://json-schema.org/). See below for more details. |
| `function.parameters.required`   | array  | An array of the tool's required parameters                                                                                       |

### function.parameters.properties

The `function.parameters.properties` object contains the tool's parameter definitions as a [JSON schema](https://json-schema.org/). The object's keys should be the names of the parameters, and the values should be objects containing the parameter's type and description.

When the model decides you should use the tool to answer the user's question, it will return the parameters that you should use when calling the function you've defined.

Below is an example of a tool definition for a no-code agent that generates product descriptions.

<CodeGroup>
  ```python Python theme={null}
  tools = [
      {
          "type": "function",
          "function": {
              "name": "generate_product_description",
              "description": "A function that will invoke an agent for text-generation, specialized in generating product descriptions. Any user request asking for product descriptions should use this tool.",
              "parameters": {
                  "type": "object",
                  "properties": {
                      "product_name": {
                          "type": "string",
                          "description": "The name of the product"
                      }
                  },
                  "required": ["product_name"]
              }
          }
      }
  ]
  ```

  ```javascript JavaScript theme={null}
  const tools = [
      {
          type: "function",
          function: {
              name: "generate_product_description",
              description: "A function that will invoke an AI agent for text-generation, specialized in generating product descriptions. Any user request asking for product descriptions should use this tool.",
              parameters: {
                  type: "object",
                  properties: {
                      product_name: {
                          type: "string",
                          description: "The name of the product"
                      }
                  },
                  required: ["product_name"]
              }
          }
      }
  ];
  ```
</CodeGroup>

<Note>
  To help the model understand when to use the tool, follow these best practices for the `function.description` parameter:

  * Indicate that the tool is a function that invokes a no-code agent
  * Specify the agent's purpose and capabilities
  * Describe when the tool should be used

  An example description for a tool that invokes an agent with text-generation:

  > "A function that invokes an AI agent for text-generation, specialized in generating product descriptions. Any user request asking for product descriptions should use this tool."
</Note>

### Response format

When the model decides to use a custom tool, the response from the tool call is returned in the `tool_calls` object. The `tool_calls` object contains the following fields:

| Parameter                          | Type   | Description                                                              |
| ---------------------------------- | ------ | ------------------------------------------------------------------------ |
| `tool_calls[0].id`                 | string | The ID of the tool call                                                  |
| `tool_calls[0].function`           | object | An object containing the function to call                                |
| `tool_calls[0].function.type`      | string | The type of tool, which is `function` for a no-code agent                |
| `tool_calls[0].function.name`      | string | The name of the function to call                                         |
| `tool_calls[0].function.arguments` | string | A JSON-formatted string containing the arguments to pass to the function |

Here is an example of a chat completion response that includes a tool call. In this example, the model decides to use the `generate_product_description` tool to answer the user's question, and provides the arguments to pass to the function.

```json sample response[expandable] {11} theme={null}
{
"content": null,
"refusal": null,
"role": "assistant",
"graph_data": {
"sources": null,
"status": null,
"subqueries": null
},
"llm_data": null,
"tool_calls": [
{
    "id": "chatcmpl-tool-123",
    "function": {
    "arguments": "{\"product_name\": \"Terra running shoe\"}",
    "name": "generate_product_description"
    },
    "type": "function",
    "index": null
}
],
"image_data": null
}
```

## Usage example

The following example demonstrates how to use a no-code agent that performs text generation tasks as a tool in a chat completion. The example uses a hypothetical product description agent, but you can use any no-code agent in this way.

### Create a function that calls your deployed agent

First, create a function that calls your deployed agent. You will use this function if the LLM you're chatting with decides to use the tool.

The function below takes a `product_name` parameter, invokes the no-code agent with the agent's required input fields, and returns the generated product description.

If you are unfamiliar with how to invoke a no-code agent with the SDK, see the [no-code agent guide](/home/applications).

<CodeGroup>
  ```python Python theme={null}
  def generate_product_description(product_name):
      response = client.applications.generate_content(
          application_id="your-application-id",
          inputs=[
              {
                  "id": "Product name",
                  "value": [product_name]
              }
          ]
      )
      return response.suggestion
  ```

  ```javascript JavaScript theme={null}
  async function generateProductDescription(productName) {
      const response = await client.applications.generateContent(
          "your-application-id",
          {
              inputs: [
                  {
                      id: "Product name",
                      value: [productName]
                  }
              ]
          }
      );
      return response.suggestion;
  }
  ```
</CodeGroup>

### Define your agent as a tool

Next, define your agent as a tool so the LLM knows when to use it. See the [tool structure](#tool-structure) section for more details on the tool object.

<CodeGroup>
  ```python Python theme={null}
  tools = [
      {
          "type": "function",
          "function": {
              "name": "generate_product_description",
              "description": "A function that will invoke an agent for text-generation, specialized in generating product descriptions. Any user request asking for product descriptions should use this tool.",
              "parameters": {
                  "type": "object",
                  "properties": {
                      "product_name": {
                          "type": "string",
                          "description": "The name of the product"
                      }
                  },
                  "required": ["product_name"]
              }
          }
      }
  ]
  ```

  ```javascript JavaScript theme={null}
  const tools = [
      {
          type: "function",
          function: {
              name: "generate_product_description",
              description: "A function that will invoke an agent for text-generation, specialized in generating product descriptions. Any user request asking for product descriptions should use this tool.",
              parameters: {
                  type: "object",
                  properties: {
                      product_name: {
                          type: "string",
                          description: "The name of the product"
                      }
                  },
                  required: ["product_name"]
              }
          }
      }
  ];
  ```
</CodeGroup>

### Use your agent as a tool in a chat completion

Add the tools array to the chat endpoint call along with your array of messages. Setting `tool_choice` to `auto` allows the model to choose when to use the no-code agent tool, based on the user's question and the description of the tool.

When the model decides to use the tool you've defined, it will indicate that in the `tool_calls` object of the response.

This example uses a non-streaming response. For a streaming implementation, and to learn more about processing custom tool call responses, see the [tool calling guide](/home/tool-calling#processing-tool-calls).

<CodeGroup>
  ```python Python theme={null}
  import json
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "Generate a description for the Terra running shoe"}]

  # Send the request
  response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      tools=tools,
      tool_choice="auto",
      stream=False
  )

  # Process the response
  response_message = response.choices[0].message
  # Check if the response contains tool calls,
  #and if so, call the custom function
  tool_calls = response_message.tool_calls
  if tool_calls:
      tool_call = tool_calls[0]
      tool_call_id = tool_call.id
      function_name = tool_call.function.name
      function_args = json.loads(tool_call.function.arguments)

      if function_name == "generate_product_description":
          function_response = generate_product_description(function_args["product_name"])
          
          messages.append({
              "role": "tool",
              "tool_call_id": tool_call_id,
              "name": function_name,
              "content": function_response
          })

  final_response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      stream=False
  )

  print(final_response.choices[0].message.content)
  # Here's a product description for the Terra running shoe: ...
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const messages = [{ role: "user", content: "Generate a description for the Terra running shoe" }];

  const response = await client.chat.chat({
      model: "palmyra-x5",
      messages: messages,
      tools: tools,
      tool_choice: "auto",
      stream: false
  });

  const responseMessage = response.choices[0].message;
  const toolCalls = responseMessage.tool_calls;
  // Check if the response contains tool calls,
  // and if so, call the custom function
  if (toolCalls && toolCalls.length > 0) {
      const toolCall = toolCalls[0];
      const toolCallId = toolCall.id;
      const functionName = toolCall.function.name;
      const functionArgs = JSON.parse(toolCall.function.arguments);

      if (functionName === "generate_product_description") {
          const functionResponse = await generateProductDescription(
              functionArgs.product_name
          );
          
          messages.push({
              role: "tool",
              tool_call_id: toolCallId,
              name: functionName,
              content: functionResponse
          });
      }

      const finalResponse = await client.chat.chat({
          model: "palmyra-x5",
          messages: messages,
          stream: false
      });

      console.log(finalResponse.choices[0].message.content);
      // Here's a product description for the Terra running shoe: ...
  }
  ```
</CodeGroup>

Here is the full code example:

<CodeGroup>
  ```python Python [expandable] theme={null}
  import json
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  def generate_product_description(product_name):
      response = client.applications.generate_content(
          application_id="your-application-id",
          inputs=[
              {
                  "id": "Product name",
                  "value": [product_name]
              }
          ]
      )
      return response.suggestion

  tools = [
      {
          "type": "function",
          "function": {
              "name": "generate_product_description",
              "description": "A function that will invoke an agent for text-generation, specialized in generating product descriptions. Any user request asking for product descriptions should use this tool.",
              "parameters": {
                  "type": "object",
                  "properties": {
                      "product_name": {
                          "type": "string",
                          "description": "The name of the product"
                      }
                  },
                  "required": ["product_name"]
              }
          }
      }
  ]

  messages = [{"role": "user", "content": "Generate a description for the Terra running shoe"}]

  # Send the request
  response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      tools=tools,
      tool_choice="auto",
      stream=False
  )

  # Process the response
  response_message = response.choices[0].message
  # Check if the response contains tool calls,
  #and if so, call the custom function
  tool_calls = response_message.tool_calls
  if tool_calls:
      tool_call = tool_calls[0]
      tool_call_id = tool_call.id
      function_name = tool_call.function.name
      function_args = json.loads(tool_call.function.arguments)

      if function_name == "generate_product_description":
          function_response = generate_product_description(function_args["product_name"])
          
          messages.append({
              "role": "tool",
              "tool_call_id": tool_call_id,
              "name": function_name,
              "content": function_response
          })

  final_response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      stream=False
  )

  print(final_response.choices[0].message.content)
  # Here's a product description for the Terra running shoe: ...
  ```

  ```javascript JavaScript [expandable] theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  async function generateProductDescription(productName) {
      const response = await client.applications.generateContent(
          "your-application-id",
          {
              inputs: [
                  {
                      id: "Product name",
                      value: [productName]
                  }
              ]
          }
      );
      return response.suggestion;
  }

  const tools = [
      {
          type: "function",
          function: {
              name: "generate_product_description",
              description: "A function that will invoke an agent for text generation, specialized in generating product descriptions. Any user request asking for product descriptions should use this tool.",
              parameters: {
                  type: "object",
                  properties: {
                      product_name: {
                          type: "string",
                          description: "The name of the product"
                      }
                  },
                  required: ["product_name"]
              }
          }
      }
  ];

  const messages = [{ role: "user", content: "Generate a description for the Terra running shoe" }];

  const response = await client.chat.chat({
      model: "palmyra-x5",
      messages: messages,
      tools: tools,
      tool_choice: "auto",
      stream: false
  });

  const responseMessage = response.choices[0].message;
  const toolCalls = responseMessage.tool_calls;
  // Check if the response contains tool calls,
  // and if so, call the custom function
  if (toolCalls && toolCalls.length > 0) {
      const toolCall = toolCalls[0];
      const toolCallId = toolCall.id;
      const functionName = toolCall.function.name;
      const functionArgs = JSON.parse(toolCall.function.arguments);

      if (functionName === "generate_product_description") {
          const functionResponse = await generateProductDescription(
              functionArgs.product_name
          );
          
          messages.push({
              role: "tool",
              tool_call_id: toolCallId,
              name: functionName,
              content: functionResponse
          });
      }

      const finalResponse = await client.chat.chat({
          model: "palmyra-x5",
          messages: messages,
          stream: false
      });

      console.log(finalResponse.choices[0].message.content);
      // Here's a product description for the Terra running shoe: ...
  }
  ```
</CodeGroup>

## Next steps

Now that you've defined a custom tool, learn about prebuilt tools and how to use them in your applications:

* [Ask questions to a Knowledge Graph in a chat](/home/kg-chat)
* [Delegate questions to domain-specific LLMs](/home/model-delegation)
* [Analyze images in a chat](/home/vision-tool)
* [Translate text in a chat](/home/translation-tool)


# Run agents asynchronously
Source: https://dev.writer.com/home/async-applications

Process no-code agent requests asynchronously or in batches with the async applications API. Generate content for multiple items efficiently.

<Info>No-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.</Info>

With asynchronous agents, your team can build and deploy [no-code agents in AI Studio](/no-code/introduction) and use the [async applications API](/api-reference/application-api/generate-application-job) to generate content asynchronously or in batches.

For example, your product team can build a no-code agent that creates product description pages, and then you can use the async applications API to generate pages in batches for multiple products.

This guide helps you understand how to run async jobs. The API is similar to the [applications API](/home/applications), but it allows you to process batches of requests asynchronously.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Endpoint overview

**URL:** `POST https://api.writer.com/v1/applications/{application_id}/jobs`

<CodeGroup>
  ```bash cURL theme={null}
  curl 'https://api.writer.com/v1/applications/<application-id>/jobs' \
  -X POST \
  -H 'Content-Type: application/json' \
  -H "Authorization: Bearer $WRITER_API_KEY" \
  --data-raw '{
    "inputs": [
      {
        "id": "Input name",
        "value": [
          "Input value"
        ]
      }
    ]
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  job_response = client.applications.jobs.create(
      application_id="<application-id>",
      inputs=[
          {
              "id": "Input name",
              "value": [
                  "Input value"
              ]
          }
      ]
  )
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.applications.jobs.create(
    "<application-id>",
    {
      inputs: [
        {
          id: "Input name",
          value: [
            "Input value"
          ]
        }
      ]
    }
  )
  ```
</CodeGroup>

### Path parameters

| Parameter        | Type     | Description                 |
| ---------------- | -------- | --------------------------- |
| `application_id` | `string` | The ID of the no-code agent |

### Request body

The async applications API has the same request body structure as the [no-code agents API](/home/applications#request-body). It should contain an array of input objects matching the no-code agent's input schema.

### Response format

A successful job creation request returns a JSON object with the following structure:

| Parameter    | Type     | Description                                                            |
| ------------ | -------- | ---------------------------------------------------------------------- |
| `job_id`     | `string` | The ID of the job                                                      |
| `status`     | `string` | The status of the job. Can be `in_progress`, `completed`, or `failed`. |
| `created_at` | `string` | The date and time the job was created                                  |

```json  theme={null}
{
  "job_id": "123-456-789",
  "status": "in_progress",
  "created_at": "2024-03-15T10:00:00Z"
}
```

## Usage example

The following example demonstrates using the async applications API to generate content asynchronously with a hypothetical product description generation agent.

### Create and deploy a no-code agent

First, create and deploy a no-code agent in [AI Studio](https://app.writer.com/aistudio). If you don't already have a no-code agent, follow the [text generation guide](/no-code/text-generation) to get started.

### Create an async job

Send a `POST` request with the inputs for the agent to create an async job.

<CodeGroup>
  ```bash cURL theme={null}
  curl 'https://api.writer.com/v1/applications/<application-id>/jobs' \
  -X POST \
  -H 'Content-Type: application/json' \
  -H "Authorization: Bearer $WRITER_API_KEY" \
  --data-raw '{
    "inputs": [
      {
        "id": "Product descriptions",
        "value": [
          "Terra running shoe",
          "Aqua swim goggles",
          "Flex yoga mat"
        ]
      }
    ]
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  job = client.applications.jobs.create(
      application_id="<application-id>",
      inputs=[
          {
              "id": "Product descriptions",
              "value": [
                  "Terra running shoe",
                  "Aqua swim goggles",
                  "Flex yoga mat"
              ]
          }
      ],
  )
  print(f"Created job: {job.id}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const job = await client.applications.jobs.create(
    "<application-id>",
    {
      inputs: [
        {
          id: "Product descriptions",
          value: [
            "Terra running shoe",
            "Aqua swim goggles",
            "Flex yoga mat"
          ]
        }
      ]
    }
  );
  console.log(`Created job: ${job.id}`);
  ```
</CodeGroup>

### Check job status

Use the job ID from the creation response to check the status of your job and see the results.

<CodeGroup>
  ```bash cURL theme={null}
  curl 'https://api.writer.com/v1/applications/jobs/<job-id>' \
  -H "Authorization: Bearer $WRITER_API_KEY"
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  job_status = client.applications.jobs.retrieve("<job-id>")
  print(f"Job status: {job_status.status}")
  if job_status.status == "completed":
      print(f"Job results: {job_status.data.suggestion}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const jobStatus = await client.applications.jobs.retrieve("<job-id>");
  console.log(`Job status: ${jobStatus.status}`);
  if (jobStatus.status === "completed") {
    console.log(`Job results: ${jobStatus.data.suggestion}`);
  }
  ```
</CodeGroup>

The response includes the current status. If the job has completed, the results are in the `data.suggestion` field, which has the same structure as the [no-code agents API](/home/applications#response-format).

```json  theme={null}
{
    "id": "123-456-789",
    "status": "completed",
    "application_id": "2932402-23429023894-234234234",
    "created_at": "2025-02-10T18:18:09.501223Z",
    "completed_at": "2025-02-10T18:18:14.470324Z",
    "data": {
        "title": "Social post",
        "suggestion": "# Social post\nImage: A photo of a person running in a pair of Terra running shoes.\n\nCaption:\n\nIntroducing the all-new Terra running shoe, designed to take you further than ever before. With its innovative cushioning system and durable outsole, the Terra is perfect for runners of all levels.\n\nWhether you're hitting the trails or pounding the pavement, the Terra will keep you comfortable and supported mile after mile. So what are you waiting for? Lace up a pair of Terras and start your journey today!\n\n#TerraRunningShoe #RunFurther #NeverStopExploring #GetOutside"
    },
    "error": null
}
```

### List all jobs

You can retrieve all jobs for an application to monitor batch processing:

<CodeGroup>
  ```bash cURL theme={null}
  curl 'https://api.writer.com/v1/applications/<application-id>/jobs' \
  -H "Authorization: Bearer $WRITER_API_KEY"
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  jobs = client.applications.jobs.list(
      application_id="<application-id>"
  )
  for job in jobs.result:
      print(f"Job {job.id}: {job.status}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const jobs = await client.applications.jobs.list(
    "<application-id>"
  );
  jobs.result.forEach(job => {
    console.log(`Job ${job.id}: ${job.status}`);
  });
  ```
</CodeGroup>

### Retry failed jobs

If a job fails, you can retry it using the retry endpoint:

<CodeGroup>
  ```bash cURL theme={null}
  curl 'https://api.writer.com/v1/applications/jobs/<failed-job-id>/retry' \
  -X POST \
  -H "Authorization: Bearer $WRITER_API_KEY"
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  retry_response = client.applications.jobs.retry("<failed-job-id>")
  print(f"Retried job: {retry_response.id}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const retryResponse = await client.applications.jobs.retry("<failed-job-id>");
  console.log(`Retried job: ${retryResponse.id}`);
  ```
</CodeGroup>

## Next steps

By following this guide, you can use the async Applications API to handle large-scale tasks.

Next, learn how to enhance your no-code agents with [Knowledge Graph](/home/knowledge-graph), our tool for RAG.


# Engineering Blog
Source: https://dev.writer.com/home/blog





# Changelog
Source: https://dev.writer.com/home/changelog

Stay up to date with the latest changes to the Writer API and SDKs.

<Tip>To see the latest features and major improvements across the Writer platform, check out [What's new at Writer](https://support.writer.com/article/40-whats-new-at-writer).</Tip>

<Update label="2025-10-03" description="Python and Node SDK v2.3.2">
  ## Released version 2.3.2 of the Python and Node SDKs

  Version 2.3.2 of the [Python](https://github.com/writer/writer-python) and [Node](https://github.com/writer/writer-node) SDKs adds support for the following new features:

  ### Knowledge Graph query configuration

  Added support for the `query_config` parameter in both chat completions with Knowledge Graph tools and direct Knowledge Graph queries. This parameter allows you to fine-tune search behavior and control response generation.

  Key configuration options:

  * **`inline_citations`**: Enable inline citations within response text
  * **`search_weight`**: Control the balance between keyword and semantic search
  * **`grounding_level`**: Control how closely responses match source material
  * **`max_snippets`**: Set the number of text snippets to retrieve
  * **`keyword_threshold`**: Set keyword matching strictness
  * **`semantic_threshold`**: Set semantic similarity requirements

  ### Inline citations

  SDK support for inline citations in Knowledge Graph responses, allowing you to programmatically extract and correlate citations with their source material. Citations appear in the format `[filename](cite_id)` within response text and you can match them with source data from the `references` object.

  ### Upload types for no-code applications

  Added support for the `upload_types` parameter in no-code applications, allowing you to see which file types you can upload through file input fields.

  For more details on these features:

  * Knowledge Graph query configuration: [Knowledge Graph query configuration guide](/home/knowledge-graph-query-config)
  * Inline citations: [Work with inline citations](/home/inline-citations)
  * Upload types: [No-code applications API reference](/api-reference/application-api/application-details)
</Update>

<Update label="2025-09-11" description="Knowledge Graph query configuration and inline citations">
  ## Knowledge Graph query configuration and inline citations

  Added comprehensive query configuration options for Knowledge Graph operations, allowing you to fine-tune search behavior and enable inline citations in responses from the [Knowledge Graph chat completions tool](/home/kg-chat) and [direct Knowledge Graph queries](/home/kg-query).

  ### New query configuration parameters

  The `query_config` parameter is now available for both chat completions with Knowledge Graph tools and direct Knowledge Graph queries. This parameter includes:

  * **`inline_citations`**: Enable inline citations within response text, showing which sources support each part of the response
  * **`search_weight`**: Control the balance between keyword and semantic search (0-100, default: 50)
  * **`max_subquestions`**: Set the maximum number of sub-questions for complex queries (1-10, default: 6)
  * **`grounding_level`**: Control how closely responses match source material (0.0-1.0, default: 0.0)
  * **`max_snippets`**: Set the number of text snippets to retrieve (5-25 recommended, default: 30)
  * **`max_tokens`**: Control the maximum response length (100-8000, default: 4000)
  * **`keyword_threshold`**: Set keyword matching strictness (0.0-1.0, default: 0.7)
  * **`semantic_threshold`**: Set semantic similarity requirements (0.0-1.0, default: 0.7)

  For detailed information about all configuration options and their effects, see the [Knowledge Graph query configuration guide](/home/knowledge-graph-query-config). For more information about inline citations, see the [Work with inline citations in Knowledge Graph responses](/home/inline-citations) guide.
</Update>

<Update label="2025-08-20" description="Python and Node SDK v2.3.1">
  ## Released version 2.3.1 of the Python and Node SDKs

  This patch release fixes a bug introduced in version 2.3.0 where the `Graph` class wasn't accessible. The `Graph` class is now available in the Python and Node SDKs as it was previously.

  For more information on working with Knowledge Graphs with the Python and Node SDKs, see the [Knowledge Graphs usage guide](/home/knowledge-graph).
</Update>

<Update label="2025-08-19" description="langchain-writer v0.3.3">
  ## langchain-writer v0.3.3

  The [langchain-writer](https://github.com/writer/langchain-writer) package now includes the [web search tool](/home/web-search-tool) for chat completions. This tool allows you to search the web for current information during a conversation with a Palmyra model.

  For more details, see the [langchain-writer changelog](https://github.com/writer/langchain-writer/releases/tag/v0.3.3).
</Update>

<Update label="2025-08-14" description="Python and Node SDK v2.3.0">
  ## Released version 2.3.0 of the Python and Node SDKs

  Version 2.3.0 of the [Python](https://github.com/writer/writer-python) and [Node](https://github.com/writer/writer-node) SDKs adds support for the following new features:

  * [Web search API](#web-search-api)
  * [Web search tool for chat completions](#web-search-tool-for-chat-completions)
  * [Web connector URLs for Knowledge Graphs](#web-connector-urls-for-knowledge-graphs)
  * [Image support in chat completions](#image-support-in-chat-completions)

  See below for more details about each of these features.

  ### Web search and web connector URLs

  Three new features are now available to enhance your AI applications with web content and search capabilities:

  * [Web search tool API](#web-search-tool-api)
  * [Web search tool for chat completions](#web-search-tool-for-chat-completions)
  * [Web connector URLs for Knowledge Graphs](#web-connector-urls-for-knowledge-graphs)

  #### Web search API

  The new [web search tool API](/home/web-search) allows you to search the web for current information and get real-time results. This tool is useful for finding factual information, news, and data that may not be available in your model's training data.

  Key features:

  * Search for current information and news
  * Filter results by domain, time range, and geographic location
  * Control search depth and result comprehensiveness
  * Support for both general and news-specific searches

  #### Web search tool for chat completions

  The [web search prebuilt tool](/home/web-search-tool) for chat completions enables your AI assistant to search the web during conversations with Palmyra models. This allows your AI to provide up-to-date information and answer questions about current events.

  #### Web connector URLs for Knowledge Graphs

  [Web connector URLs](/home/web-connector-url) allow you to automatically extract and index content from websites into your Knowledge Graphs. This enables you to:

  * Process single pages or entire sub-pages
  * Monitor the status of URL processing
  * Exclude specific URLs from processing
  * Query web content through your Knowledge Graph

  ### Image support in chat completions

  Added support for [mixed content in chat completions](/home/chat-with-images) with Palmyra X5, allowing you to include images directly in your chat messages. This feature enables rich visual conversations without needing to use the separate Vision tool.

  ### References

  For more information, see the following API reference docs and guides:

  * Web search tool: [API reference](/api-reference/tool-api/web-search) and [guide](/home/web-search)
  * Web search tool for chat completions: [API reference](/api-reference/completion-api/chat-completion#body-tools) and [guide](/home/web-search-tool)
  * Web connector URLs for Knowledge Graphs: [API reference](/api-reference/kg-api/update-graph#body-urls) and [guide](/home/web-connector-url)
  * Chat with images: [API reference](/api-reference/completion-api/chat-completion#body-messages-content) and [guide](/home/chat-with-images)
</Update>

<Update label="2025-08-12" description="Vision chat support for Palmyra X5">
  ### Vision chat support for Palmyra X5

  Added support for [mixed content in chat completions](/home/chat-with-images) with Palmyra X5, allowing you to include images directly in your chat messages. This feature enables rich visual conversations without needing to use the separate Vision tool.

  Key capabilities:

  * Send messages containing both text and images
  * Support for multiple images in a single message
  * Use of data URLs for local images
  * Natural conversation flow with visual context

  Below is an example of a chat completion request that includes a message with both text and an image.

  <CodeGroup>
    ```bash cURL theme={null}
    curl --location 'https://api.writer.com/v1/chat' \
    --header 'Content-Type: application/json' \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --data '{
      "model": "palmyra-x5",
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": "What do you see in this image?"
            },
            {
              "type": "image_url",
              "image_url": {
                "url": "https://example.com/image.jpg"
              }
            }
          ]
        }
      ]
    }'
    ```

    ```python Python theme={null}
    from writerai import Writer

    # Initialize the client. If you don't pass the `apiKey` parameter,
    # the client looks for the `WRITER_API_KEY` environment variable.
    client = Writer()

    response = client.chat.chat(
      model="palmyra-x5",
      messages=[
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": "What do you see in this image?"
            },
            {
              "type": "image_url",
              "image_url": {
                "url": "https://example.com/image.jpg"
              }
            }
          ]
        }
      ]
    )

    print(response.choices[0].message.content)
    ```

    ```javascript JavaScript theme={null}
    import { Writer } from "writer-sdk";

    // Initialize the client. If you don't pass the `apiKey` parameter,
    // the client looks for the `WRITER_API_KEY` environment variable.
    const client = new Writer();

    const response = await client.chat.chat({
      model: "palmyra-x5",
      messages: [
        {
          role: "user",
          content: [
            {
              type: "text",
              text: "What do you see in this image?"
            },
            {
              type: "image_url",
              image_url: {
                url: "https://example.com/image.jpg"
              }
            }
          ]
        }
      ]
    });

    console.log(response.choices[0].message.content);
    ```
  </CodeGroup>
</Update>

<Update label="2025-01-27" description="Web search and web connector URLs released">
  ## Web search and web connector URLs released

  Three new features are now available to enhance your AI applications with web content and search capabilities:

  * [Web search tool API](#web-search-tool-api)
  * [Web search tool for chat completions](#web-search-tool-for-chat-completions)
  * [Web connector URLs for Knowledge Graphs](#web-connector-urls-for-knowledge-graphs)

  ### Web search tool API

  The new [web search tool API](/home/web-search) allows you to search the web for current information and get real-time results. This tool is useful for finding factual information, news, and data that may not be available in your model's training data.

  Key features:

  * Search for current information and news
  * Filter results by domain, time range, and geographic location
  * Control search depth and result comprehensiveness
  * Support for both general and news-specific searches

  ### Web search tool for chat completions

  The [web search prebuilt tool](/home/web-search-tool) for chat completions enables your AI assistant to search the web during conversations with Palmyra models. This allows your AI to provide up-to-date information and answer questions about current events.

  ### Web connector URLs for Knowledge Graphs

  [Web connector URLs](/home/web-connector-url) allow you to automatically extract and index content from websites into your Knowledge Graphs. This enables you to:

  * Process single pages or entire sub-pages
  * Monitor the status of URL processing
  * Exclude specific URLs from processing
  * Query web content through your Knowledge Graph

  For more information, see the following guides:

  * [Web search tool API documentation](/api-reference/tool-api/web-search)
  * [Web search tool for chat completions](/home/web-search-tool)
  * [Web connector URLs for Knowledge Graphs](/home/web-connector-url)
</Update>

<Update label="2025-07-16" description="Writer Strands Agents integration released">
  ## Writer Strands Agents integration released

  You can now use Writer's models with [AWS' Strands Agents](https://github.com/strands-agents/sdk-python), an open-source SDK for building and deploying AI agents. See the new [Strands integration guide](/home/integrations/strands) for setup instructions, configuration, and examples.
</Update>

<Update label="2025-07-16" description="2.2.1 of the Python and Node SDKs">
  ## Released version 2.2.1 of the Python and Node SDKs

  Version 2.2.1 of the [Python](https://github.com/writer/writer-python) and [Node](https://github.com/writer/writer-node) SDKs adds support for filtering files by file type.

  To filter files by type, use the `file_types` parameter to pass a comma-separated string of file extensions (without the dot) to the `files.list` method. The following code shows how to filter for only PDF and DOCX files:

  <CodeGroup>
    ```python Python theme={null}
    files = client.files.list(file_types="pdf,docx")
    ```

    ```javascript JavaScript theme={null}
    const files = await client.files.list({ file_types: 'pdf,docx' });
    ```
  </CodeGroup>

  For more information on the `files.list` method and its parameters, refer to the [List Files API documentation](/api-reference/file-api/get-all-files).
</Update>

<Update label="2025-07-10" description="instructor-writer supports JSON output">
  ## Writer Instructor integration now supports JSON output

  Added support for the `WRITER_JSON` mode in the [Instructor integration](/home/integrations/instructor#json-mode). This mode allows you to receive structured output directly as JSON, following your specified schema, making it easier to work with validated, structured data from LLM responses.
</Update>

<Update label="2025-05-12" description="langchain-writer v0.3.1">
  ## langchain-writer v0.3.1

  The [langchain-writer](https://github.com/writer/langchain-writer) package now includes the [translation tool](/home/translation-tool) for chat completions. This tool allows you to translate text between languages during chats with Palmyra LLMs.

  For more details, see the [langchain-writer changelog](https://github.com/writer/langchain-writer/releases/tag/v0.3.1).
</Update>

<Update label="2025-05-02" description="Filter files by type">
  ## Filter files by type

  The [`/v1/files` endpoint](/api-reference/file-api/get-all-files#parameter-file-types) now supports filtering files by extension type.

  To filter files by type, pass a comma-separated string of file extensions to the `file_types` query parameter. For example, `file_types=txt,pdf,docx`.

  <CodeGroup>
    ```bash cURL theme={null}
    curl --location --request GET "https://api.writer.com/v1/files?file_types=txt,pdf,docx" \
      --header "Authorization: Bearer $WRITER_API_KEY" \
    ```
  </CodeGroup>

  The `file_types` parameter will be available in the next version of the Python and Node SDKs.
</Update>

<Update label="2025-04-30" description="Python and Node SDK v2.2.0">
  ## Released version 2.2.0 of the Python and Node SDKs

  Version 2.2.0 of the [Python](https://github.com/writer/writer-python) and [Node](https://github.com/writer/writer-node) SDKs adds support the following features:

  * [Structured output](/home/structured-output) for the chat completions endpoint
  * [AI detection endpoint](/home/ai-detect)
  * [Text translation endpoint](/home/translation)
  * [The text translation tool](/home/translation-tool) for chat completions

  The [langchain-writer](https://github.com/writer/langchain-writer) package has been updated to support structured output. See the [langchain-writer changelog](https://github.com/writer/langchain-writer/releases/tag/v0.3.0) for more details.

  See the API reference documentation for information about the new endpoints and tools:

  * [Structured output for chat completions](/api-reference/completion-api/chat-completion#body-response-format)
  * [AI detection](/api-reference/tool-api/ai-detect)
  * [Text translation](/api-reference/translation-api/translate)
  * [The text translation tool](/api-reference/completion-api/chat-completion#body-tools)
</Update>

<Update label="2025-04-29" description="Palmyra X5 and X4 on Amazon Bedrock">
  ## Palmyra X5 and X4 now available on Amazon Bedrock

  Palmyra X5 and X4 are now available on [Amazon Bedrock](https://aws.amazon.com/bedrock/).

  Amazon Bedrock is a fully managed service from AWS that enables developers to build and scale generative AI applications using foundation models from leading AI companies. This integration allows you to use Palmyra X5 and X4 in Amazon's serverless environment.

  See the following resources for more information:

  * [Guide for setting up and using Palmyra X5 and X4 on Amazon Bedrock](/home/integrations/bedrock)
  * [AWS blog post about using Palmyra X5 and X4 on Amazon Bedrock](https://aws.amazon.com/blogs/aws/writer-palmyra-x5-and-x4-foundation-models-are-now-available-in-amazon-bedrock/)
</Update>

<Update label="2025-04-28" description="Palmyra X5">
  ## Palmyra X5 model now available

  The [Palmyra X5 model](/home/models#palmyra-x5) is now available via the API and SDKs.

  Palmyra X5 is Writer's newest and most advanced model for building and scaling AI agents, featuring a 1 million token context window, adaptive reasoning, and industry-leading speed and cost efficiency.

  <Info>As part of this release, Palmyra X 004 is now called Palmyra X4.</Info>

  Palmyra X5's 1M token context window further streamlines enterprise workflows and unlocks complex, multi-step use cases that weren't possible before, such as:

  **Multi-step agentic workflows**

  * **Support documentation**: Classify requests, assess urgency, assign a human review, stage updates in a CMS, and publish after approval.
  * **Fund reporting**: Streamline the analysis and preparation of detailed reports on the performance and status of investment funds, using reporting and research data pulled in from third-party systems
  * **Content lifecycle management**: Flag content that could be outdated, generate suggested revisions, and share them for human review.

  **Large data requirements**:

  * **Customer feedback analysis**: Analyze large volumes of customer feedback to identify common themes, summarize sentiments, and generate actionable insights.
  * **Research and development**: Process and summarize multiple technical reports, research papers, and experimental data, accelerating innovation and product development.
  * **Financial reporting**: Process and summarize annual reports, SEC filings, and market analysis reports together at once to extract financial data, identify trends, and generate executive summaries.
  * **Legal document analysis**: Analyze lengthy legal documents, including contracts, patents, and compliance reports, to identify key clauses, flag potential risks, and ensure regulatory compliance.
  * **Medical records analysis**: Analyze and summarize large files of medical records containing structured and unstructured data, including patient records, clinical trial reports, audit reports, and more.

  See the [Palmyra X5 model overview](/home/models#palmyra-x5) for more details and [examples of using Palmyra X5 with the text generation and chat completion endpoints](/home/models#using-models-with-the-writer-api).
</Update>

<Update label="2025-04-15" description="langchain-writer supports Python 3.9">
  ## Writer LangChain integration now supports Python 3.9

  The [Writer LangChain integration](/home/integrations/langchain) now supports versions of Python 3.9 and higher, as of [version 0.2.0](https://github.com/writer/langchain-writer/releases/tag/v0.2.0).
</Update>

<Update label="2025-04-10" description="Terminology updates">
  ## Terminology updates

  As part of Writer's [recent product announcement](https://writer.com/blog/writer-ai-hq), no-code applications are now called [no-code agents](/no-code/introduction). The [Applications API](api-reference/application-api/applications), which you can use to programmatically interact with no-code agents, still uses the term `application` to minimize breaking changes.

  The guides for [invoking no-code apps](/home/applications), [async applications](/home/async-applications), and [using no-code apps as tools](/home/applications-tool-calling) have been updated to reflect the new terminology. However, the [Applications API](/api-reference/application-api/applications) reference documentation still reflects previous terminology.
</Update>

<Update label="2025-04-04" description="Python and Node SDK v2.1.0">
  ## Released version 2.1.0 of the Python and Node SDKs

  This release adds support for the [vision endpoint](/api-reference/vision-api/analyze-images) and the [vision tool](/home/vision-tool) for chat completions.

  It also adds streaming helper methods to process streaming responses from the chat completions endpoint.

  * [Streaming helpers in Python](https://github.com/writer/writer-python?tab=readme-ov-file#streaming-helpers)
  * [Streaming helpers in Node](https://github.com/writer/writer-node?tab=readme-ov-file#streaming-helpers)
</Update>

<Update label="2025-03-26" description="New cookbooks">
  ## New cookbooks for Palmyra models

  We've added three new [cookbooks](/home/cookbooks#palmyra-models) to help you explore domain-specific Palmyra models for creative, financial, and medical use cases.

  * [Palmyra Creative](https://github.com/writer/cookbooks/blob/main/models/palmyra_creative.ipynb)
  * [Palmyra Fin](https://github.com/writer/cookbooks/blob/main/models/palmyra_fin.ipynb)
  * [Palmyra Med](https://github.com/writer/cookbooks/blob/main/models/palmyra_med.ipynb)
</Update>

<Update label="2025-03-20" description="New vision endpoint">
  ## Palmyra Vision now available via the API

  The [Palmyra Vision model](/home/models#palmyra-vision) is now available via the API with the [`/vision` endpoint](/api-reference/vision-api/analyze-images).

  <CodeGroup>
    ```bash cURL theme={null}
    curl -X POST \
      'https://api.writer.com/v1/vision' \
      -H 'Content-Type: application/json' \
      -H "Authorization: Bearer $WRITER_API_KEY" \
      --data-raw '{
        "model": "palmyra-vision",
        "prompt": "What's the difference between the image {{image_1}} and the image {{image_2}}?",
        "variables": [
          {"name": "image_1", "file_id": "f1234"},
          {"name": "image_2", "file_id": "f5678"}
        ]
      }'
    ```
  </CodeGroup>

  The `/vision` endpoint analyzes images based on a prompt. You can use the endpoint for a variety of use cases, including:

  * Extracting handwritten text
  * Interpreting charts and graphs
  * Generating product descriptions

  Find additional use cases in the [Palmyra Vision overview](https://writer.com/llms/palmyra-vision/).

  See the [vision API guide](/home/analyze-images) for a detailed walkthrough of uploading images and passing them to the `/vision` endpoint, or check out the full [vision API reference](/api-reference/vision-api/analyze-images).
</Update>

<Update label="2025-03-10" description="langchain-writer v0.1.0">
  ## Released langchain-writer v0.1.0

  * Updated tool binding to align with standard LangChain tool calling conventions.
  * Added a new `NoCodeAppTool` tool for using no-code applications as tools.
  * Added a new `LLMTool` tool for delegating to a specific Palmyra model.

  See the [guide to using the LangChain integration](/home/integrations/langchain) and the [package documentation](https://github.com/writer/langchain-writer/tree/main/docs) for more details.
</Update>

<Update label="2025-03-05" description="New cookbooks">
  ## New cookbooks for tool calling and no-code applications

  We've added three new [cookbooks](/home/cookbooks) to help you get started with no-code applications and tool calling.

  * [Generating content from no-code applications with the SDK](https://github.com/writer/cookbooks/blob/main/applications/application_basic_usage.ipynb)
  * [Delegating a medical question to the `palmyra-med` model](https://github.com/writer/cookbooks/blob/main/tool_calling/tool_calling_llm.ipynb)
  * [Using the Knowledge Graph chat tool](https://github.com/writer/cookbooks/blob/main/tool_calling/tool_calling_kg.ipynb)
</Update>

<Update label="2025-03-03" description="palmyra-fin">
  ## Palmyra Fin model updates

  [Palmyra Fin](/home/models#palmyra-fin), our financial model, now has a 128k context window, up from 32k.

  To use the Palmyra Fin model in the API and SDKs, use the `palmyra-fin` model ID. The `palmyra-fin-32k` model ID is now deprecated.
</Update>

<Update label="2025-02-28" description="langchain-writer v0.0.3">
  ## Released Writer LangChain integration

  We're excited to announce the first release of `langchain-writer`, the official Writer LangChain integration. This release includes:

  * The `ChatWriter` model for text generation
  * Tool calling capabilities, including the `GraphTool` for retrieving information from a Knowledge Graph
  * Additional tools like the `PDFParser` for parsing PDFs and the `WriterTextSplitter` for intelligent text splitting

  Check out the [tutorial](/home/integrations/langchain) to get started and the full [integration documentation](https://github.com/writer/langchain-writer/blob/main/docs/) for more details.
</Update>

<Update label="2025-02-27" description="Python and Node SDK v2.0.0">
  ## Released version 2.0.0 of the Python and Node SDKs

  The 2.0.0 release includes new functionality for the Writer SDKs for Python and Node:

  * **Model delegation tool**: A prebuilt, remotely executed tool that lets you delegate domain-specific requests to the appropriate Palmyra model. For example, if your application has finance questions, you can use the tool to allow Palmyra X4 to delegate these questions to Palmyra Financial. Read more in our [model delegation guide](/home/model-delegation).
  * **Retrieve application details**: Retrieve details for all of your no-code applications. Programmatically retrieve application inputs rather than relying on the AI Studio UI. This pairs well with our guide on [using no-code applications as tools](/home/applications).
  * **Async jobs**: Trigger no-code application content generation asynchronously and retrieve or retry the job at a later time. This is great for long-running no-code applications, such as research assistant applications. To learn more, check out the [guide on async jobs](/home/async-applications).
  * **Associate Knowledge Graphs with chat applications**: Retrieve or update which Knowledge Graphs are associated with no-code chat applications.

  <Warning>
    The 2.0.0 release includes some breaking changes to the underlying models used in chat completion. This won't affect you if you are only using chat completion via the `Writer.chat.chat` method, but it will if you are importing specific types directly. See below for more details about changes in each SDK.
  </Warning>

  See the SDK repositories for the full changelogs:

  * [Python](https://github.com/writer/writer-python/releases)
  * [Node](https://github.com/writer/writer-node/releases)

  ### Python SDK

  See below for the mapping of old types to new types:

  | Old                                                 | New                                                  |
  | --------------------------------------------------- | ---------------------------------------------------- |
  | `chat_chat_params.Tool`                             | `types.shared_params.tool_param.ToolParam`           |
  | `types.Chat`                                        | `types.chat_completion.ChatCompletion`               |
  | `types.chat.ChoiceMessageGraphDataSource`           | `types.shared.source.Source`                         |
  | `types.chat.ChoiceMessageGraphDataSubquerySource`   | `types.shared.source.Source`                         |
  | `types.chat_completion_chunk.ChoiceDeltaGraphData`  | `types.shared.graph_data.GraphData`                  |
  | `types.chat_completion_chunk.Usage`                 | `types.chat_completion_usage`                        |
  | `types.chat_completion_chunk.ChoiceMessageToolCall` | `types.shared.tool_call_streaming.ToolCallStreaming` |
  | `types.question.Source`                             | `types.shared.source.Source`                         |
  | `types.question.SubquerySource`                     | `types.shared.source.Source`                         |

  Additionally:

  * The `types.chat_completion_chunk.Message` type has been moved to its own model: `types.chat_completion_message`.

  * `types.chat.ChoiceLogprobsContent`, `ChoiceLogprobsRefusal`, `ChoiceLogprobsContentTopLogprob`, and `ChoiceLogprobsRefusalTopLogprob` have all been deduplicated and replaced by a shared model `types.shared.logprobs_token.LogprobsToken`.

  ### Node SDK

  See below for the mapping of old types to new types:

  | Old                                          | New                                |
  | -------------------------------------------- | ---------------------------------- |
  | `ChatResource`                               | `Chat`                             |
  | `Chat`                                       | `ChatCompletion`                   |
  | `Chat.Choice`                                | `ChatCompletionChoice`             |
  | `Chat.Choice.Message`                        | `ChatCompletionMessage`            |
  | `Chat.Choice.Logprobs`                       | `Shared.Logprobs`                  |
  | `Chat.Choice.Logprobs.Content`               | `Shared.LogprobsToken`             |
  | `Chat.Choice.Logprobs.Refusal`               | `Shared.LogprobsToken`             |
  | `Chat.Usage`                                 | `ChatCompletionUsage`              |
  | `ChatCompletionChunk.Choice.Message`         | `ChatCompletionMessage`            |
  | `ChatCompletionChunk.Choice.Delta`           | `ChatCompletionChunk.Choice.Delta` |
  | `ChatCompletionChunk.Choice.Delta.GraphData` | `Shared.GraphData`                 |
  | `ChatCompletionChunk.Choice.Delta.ToolCall`  | `Shared.ToolCallStreaming`         |
  | `ChatCompletionChunk.Choice.Logprobs`        | `Shared.Logprobs`                  |
  | `ChatCompletionChunk.Usage`                  | `ChatCompletionUsage`              |
  | `ChatChatParams.Message.GraphData`           | `Shared.GraphData`                 |
  | `ChatChatParams.Message.ToolCall`            | `Shared.ToolCall`                  |
  | `ChatChatParams.StringToolChoice`            | `Shared.ToolChoiceString`          |
  | `ChatChatParams.JsonObjectToolChoice`        | `Shared.ToolChoiceJsonObject`      |
  | `ChatChatParams.FunctionTool`                | `Shared.ToolParam.FunctionTool`    |
  | `ChatChatParams.GraphTool`                   | `Shared.ToolParam.GraphTool`       |
  | `StreamingData`                              | `CompletionChunk`                  |
  | `Completion.Choice.LogProbs`                 | `Shared.Logprobs`                  |

  The Node SDK includes developer experience improvements from [Stainless](https://www.stainlessapi.com/), including using the native `fetch` API, resulting in zero SDK dependencies.
</Update>

<Update label="2024-12-20" description="Python SDK v1.6.1">
  ## Released version 1.6.1 of the Python SDK

  * Fixed a typing bug where the `content` field in the `File` did not accept the correct `FileTypes` values.
</Update>

<Update label="2024-12-16" description="Python SDK v1.6.0; Node SDK v1.5.0">
  ## Released Python SDK version 1.6.0 and Node SDK version 1.5.0

  * Added streaming support to the [applications content generation endpoint](/api-reference/application-api/applications) and updated the [No-code applications guide](/home/applications) to reflect this.
</Update>

<Update label="2024-11-29" description="Python SDK v.1.5.0">
  ## Released Python SDK version 1.5.0

  * Added new functionality via manual API updates
  * Fixed compatibility with the latest `httpx` 0.28.0 release
  * Improved handling of deprecated arguments (`transport`, `proxies`) to maintain backward compatibility
  * Fixed compatibility issues with Pydantic `model_dump` method when warnings are passed
  * Removed the now unused `cached-property` dependency, as we now rely on the standard library implementation for Python 3.8+
  * Enhanced logging documentation in README, adding information about the 'info' log level
  * Updated the recommended log level from 'debug' to 'info' for standard usage
  * Fixed code formatting for better readability and consistency
  * Excluded test files from `mypy` checks to avoid false positives
  * Updated internal compatibility layer for better type checking
  * Improved error handling for deprecated client configuration options
</Update>

<Update label="2024-11-14" description="Python and Node SDK v1.4.0">
  ## Released Python and Node SDK versions 1.4.0

  * Updated the default timeout on the Writer client to three minutes.
</Update>


# Generate chat completions
Source: https://dev.writer.com/home/chat-completion

Create multi-turn conversations with AI using the chat completion API. Preserve conversation context and use tool calling for advanced features.

The [chat completion endpoint](/api-reference/completion-api/chat-completion) allows you to create a conversation between a user and an AI-assisted chat model.

This guide introduces the chat completion endpoint and shows how to create a multi-turn conversation with an LLM, where the conversation history is preserved so the model understands the context of the conversation.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Chat completion versus text generation

The chat completion endpoint is similar to the [text generation endpoint](/home/text-generation), but it is designed to handle conversations between a user and an LLM.

The chat completion endpoint can generate single messages, or create more complex conversations between a user and an LLM. The text generation endpoint is designed to generate a single text response based on a given prompt.

Additionally, the chat completion endpoint offers [tool calling](/home/chat-completion), which you can use to access domain-specific LLMs, Knowledge Graphs, and custom functions.

## Endpoint overview

**URL:** `POST https://api.writer.com/v1/chat`

<Warning>
  Using the `/chat` endpoint results in charges for **model usage**. See the [pricing page](/home/pricing) for more information.
</Warning>

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data '{
      "model": "palmyra-x5",
      "messages": [
          {
              "role": "user",
              "content": "You are an expert at writing concise product descriptions for an E-Commerce Retailer"
          },
          {
              "role": "assistant",
              "content": "Okay, great I can help write these descriptions. Do you have a specific product in mind?"
          },
          {
              "role": "user",
              "content": "Please write a one sentence product description for a cozy, stylish sweater suitable for both casual and formal occasions"
          }
      ]
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  chat_response = client.chat.chat(
    messages=[
      {
          "role": "user",
          "content": "You are an expert at writing concise product descriptions for an E-Commerce Retailer"
      },
      {
          "role": "assistant",
          "content": "Okay, great I can help write these descriptions. Do you have a specific product in mind?"
      },
      {
          "role": "user",
          "content": "Please write a one sentence product description for a cozy, stylish sweater suitable for both casual and formal occasions"
      }
    ],
    model="palmyra-x5"
  )

  print(chat_response.choices[0].message.content)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();  

  const chatResponse = await client.chat.chat({
    messages: [
      {
          role: "user",
          content: "You are an expert at writing concise product descriptions for an E-Commerce Retailer"
      },
      {
          role: "assistant",
          content: "Okay, great I can help write these descriptions. Do you have a specific product in mind?"
      },
      {
          role: "user",
          content: "Please write a one sentence product description for a cozy, stylish sweater suitable for both casual and formal occasions"
      }
    ],
    model: 'palmyra-x5'
  });

  console.log(chatResponse.choices[0].message.content);
  ```
</CodeGroup>

### Request body

Below are the required and commonly used optional parameters for the text generation endpoint.

| Parameter            | Type    | Description                                                                                                                                                                                                                                                                                                                       |
| -------------------- | ------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `model`              | string  | **Required**. The [ID of the model](/home/models) to use for the chat completion. Can be `palmyra-x4`, `palmyra-x5`, `palmyra-fin`, `palmyra-med`, `palmyra-creative`, or `palmyra-x-003-instruct`.                                                                                                                               |
| `messages`           | array   | **Required**. The conversation history.                                                                                                                                                                                                                                                                                           |
| `messages[].role`    | string  | **Required**. The role of the message sender. Can be `user`, `assistant`, `system`, or `tool`. `system` messages are system prompts, used to provide instructions to the model. `tool` messages are the result of a [tool call](/home/tool-calling#append-the-result-back-to-the-model), and contain the output of the tool call. |
| `messages[].content` | string  | **Required**. The content of the message.                                                                                                                                                                                                                                                                                         |
| `temperature`        | float   | Temperature influences the randomness in generated text. Defaults to `1`. Increase the value for more creative responses, and decrease the value for more predictable responses.                                                                                                                                                  |
| `stream`             | Boolean | A Boolean value that indicates whether to stream the response. Defaults to `false`.                                                                                                                                                                                                                                               |

See the [chat completion endpoint reference](/api-reference/completion-api/chat-completion) for more information on the request body and the additional parameters you can use to control the conversation.

### Response parameters

#### Non-streaming response

If you set the `stream` parameter to `false`, the response is delivered as a single JSON object. It contains several parameters describing the response, including the `choices` array, which contains the generated text.

| Parameter                    | Type   | Description                                                                        |
| ---------------------------- | ------ | ---------------------------------------------------------------------------------- |
| `model`                      | string | The ID of the model used to generate the response.                                 |
| `choices`                    | array  | An array containing one object with the generated text and additional information. |
| `choices[0].message.content` | string | The generated text.                                                                |

See the full list of response parameters in the [chat completion endpoint reference](/api-reference/completion-api/chat-completion).

```json non-streaming response [expandable] theme={null}
{
  "id": "f7aed821-58cf-4210-9d73-538b2cb8ae44",
  "object": "chat.completion",
  "choices": [
    {
      "index": 0,
      "finish_reason": "stop",
      "message": {
        "content": "Elevate your wardrobe with this versatile, cozy sweater that seamlessly transitions from casual days to formal evenings.",
        "role": "assistant",
        "tool_calls": null,
        "graph_data": {
          "sources": null,
          "status": null,
          "subqueries": null
        },
        "llm_data": null,
        "image_data": null,
        "refusal": null
      },
      "logprobs": null
    }
  ],
  "created": 1741891192,
  "model": "palmyra-x5",
  "usage": {
    "prompt_tokens": 96,
    "total_tokens": 118,
    "completion_tokens": 22,
    "prompt_token_details": null,
    "completion_tokens_details": null
  },
  "system_fingerprint": "v1",
  "service_tier": null
}
```

#### Streaming response

If you set the `stream` parameter to `true`, the response is delivered as [server-sent events](https://html.spec.whatwg.org/multipage/server-sent-events.html#server-sent-events). The event contains several parameters. The content of the chunk is in the `choices[0].delta.content` parameter.

| Parameter                  | Type   | Description               |
| -------------------------- | ------ | ------------------------- |
| `choices[0].delta.content` | string | The content of the chunk. |

```python streaming response [expandable] theme={null}
data: {'id': '3bb941e2-4dab-4ceb-b4e3-45a429f40c72',
 'object': 'chat.completion.chunk',
 'choices': [{'index': 0,
   'finish_reason': None,
   'message': {'content': 'This',
    'role': 'assistant',
    'tool_calls': None,
    'graph_data': {'sources': None, 'status': None, 'subqueries': None},
    'llm_data': None,
    'image_data': None,
    'refusal': None},
   'delta': {'content': 'This',
    'role': 'assistant',
    'tool_calls': None,
    'graph_data': {'sources': None, 'status': None, 'subqueries': None},
    'llm_data': None,
    'image_data': None,
    'refusal': None},
   'logprobs': None}],
 'created': 1741891257,
 'model': 'palmyra-x5',
 'usage': None,
 'system_fingerprint': 'v1',
 'service_tier': None}
```

## Sample application

The following sample application uses the Python and JavaScript SDKs to create a command-line chatbot.

The application asks the user for input, passes the conversation history to the LLM, and streams the response from the LLM. It loops until the user enters the message `exit`.

### Set a system prompt

To guide the behavior of the assistant, you can set a system prompt by adding a message with the role `system` to the `messages` array.

For example, you can set a system prompt to have the assistant respond in a certain tone or style, or to provide additional context for the conversation. Here's a system prompt that directs the assistant to be casual and use emojis in its responses:

<CodeGroup>
  ```python Python theme={null}
  system_prompt = "You are a helpful assistant that responds in a casual, friendly tone and uses emojis in your responses."

  messages = [
    {"role": "system", "content": system_prompt},
  ]
  ```

  ```javascript JavaScript theme={null}
  const system_prompt = "You are a helpful assistant that responds in a casual, friendly tone and uses emojis in your responses.";

  let messages = [
    {role: "system", content: system_prompt},
  ];
  ```
</CodeGroup>

Learn about [prompting best practices](/home/prompting) to help you create effective system prompts.

### Stream chat responses

The sample application streams the responses from the LLM. Streaming improves the user experience, showing the input as it is generated and reducing the latency of the final response.

Below are the code snippets from the sample application to stream the chat responses. They use the [`stream` helper method of the `chat` endpoint](/home/streaming#streaming-helpers-for-chat-completions) to print the chat responses to the console in real time.

The `stream` method also collects the final response and returns it so it can be added to the conversation history.

<CodeGroup>
  ```python Python theme={null}
  # Stream the chat response to the user using the `stream` helper method
  with client.chat.stream(messages=messages, model="palmyra-x5") as stream:
      for event in stream:
          # Check if the event is a content delta, which contains this chunk of the chat response
          if event.type == "content.delta":
              print(event.delta, end="", flush=True)
  # Collect the full response from the stream
  completion = stream.get_final_completion().choices[0].message.content
  ```

  ```javascript JavaScript theme={null}
  // Stream the chat response to the user using the `stream` helper method
  const stream = client.chat.stream({
      model: 'palmyra-x5',
      messages: messages,
    })
    // Print this chunk of the chat response to the console
    .on('content', (diff) => process.stdout.write(diff));

  // Collect the full response from the stream
  let full_message = await stream.finalChatCompletion();
  full_message = full_message.choices[0].message.content;
  ```
</CodeGroup>

### Full application

The following is the complete sample application that uses the functions defined above to stream the chat responses.

The application sets a system prompt, asks the user for an initial message, and then enters a loop to handle the conversation between the user and the LLM. It adds the user's message to the conversation history and streams the response from the LLM to the user.

The loop continues until the user enters the message `exit`.

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  end = False
  system_prompt = "You are a helpful assistant that responds in a casual, friendly tone and uses emojis in your responses."

  # Ask the user for an initial message
  input_message = "\nEnter a message for the assistant. Type 'exit' to end the conversation. > "
  initial_message = input(input_message)

  # Add the user's message to the conversation history
  messages = [{"role": "system", "content": system_prompt}, {"role": "user", "content": initial_message}]

  # Main loop to handle the conversation.
  while not end:
      # Stream the chat response to the user using the `stream` helper method
      with client.chat.stream(messages=messages, model="palmyra-x5") as stream:
          for event in stream:
              # Check if the event is a content delta, which contains this chunk of the chat response
              if event.type == "content.delta":
                  print(event.delta, end="", flush=True)
      # Collect the full response from the stream and add it to the conversation history
      full_message = stream.get_final_completion().choices[0].message.content
      messages.append({"role": "assistant", "content": full_message})
      new_message = input(input_message)
      messages.append({"role": "user", "content": new_message})
      if new_message == "exit":
          end = True
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();  

  // helpers for reading user input from the command line
  // ----------------------------------------------------------------------------
  const readline = await import('readline');

  // Create an interface for input and output
  const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
  });

  // Prompt the user for input.
  const prompt = (question) => {
    return new Promise((resolve) => {
      rl.question(question, (answer) => {
        resolve(answer);
      });
    });
  };
  // ----------------------------------------------------------------------------

  let end = false;
  let system_prompt = "You are a helpful assistant that responds in a casual, friendly tone and uses emojis in your responses.";
  let initial_message = await prompt("Enter a message for the assistant. Type 'exit' to end the conversation. > ");
  let messages = [{"role": "system", "content": system_prompt}, {"role": "user", "content": initial_message}];

  // Main loop to handle the conversation.
  while (!end) {
    // Stream the chat response to the user using the `stream` helper method
    const stream = client.chat.stream({
      model: 'palmyra-x5',
      messages: messages,
    })
    // Print this chunk of the chat response to the console
    .on('content', (diff) => process.stdout.write(diff));

    // Collect the full response from the stream and add it to the conversation history
    let full_message = await stream.finalChatCompletion();
    full_message = full_message.choices[0].message.content;
    messages.push({role: "assistant", content: full_message});
    console.log("\n");
    let new_message = await prompt("Enter a message for the assistant. Type 'exit' to end the conversation. > ");
    messages.push({role: "user", content: new_message});
    if (new_message === "exit") {
        end = true;
    }
  }
  ```
</CodeGroup>

## Best practices

Follow these best practices to ensure that your chatbot behaves as expected:

* **Use system messages**: Including a system message can guide the behavior of the assistant, setting expectations for its tone and responsiveness.
* **Maintain context**: Ensure that all relevant parts of the conversation are included in the `messages` array to maintain context, as the model doesn't retain memory of past interactions.
* **Handle errors gracefully**: Implement [error handling](/api-reference/error-handling) for various HTTP status codes and API-specific errors such as rate limits or malformed requests.
* **Manage conversational flow**: Regularly review the conversation's context and adjust it to keep interactions relevant and concise, especially under the model's token limit.

## Next steps

Now that you've created a chatbot, learn how to [add tool calling](/home/chat-completion) to your application to enhance the functionality with domain-specific LLMs, Knowledge Graphs, and custom functions.

* [Create custom functions as tools](/home/tool-calling)
* [Access information in Knowledge Graphs](/home/kg-chat)
* [Delegate tasks to domain-specific LLMs](/home/model-delegation)


# Add images to chat completions
Source: https://dev.writer.com/home/chat-with-images



You can include images directly in your chat conversations with Palmyra X5 using mixed content support. This allows you to send both text and images in the same message, enabling rich visual conversations with Palmyra X5.

<Warning>
  Image analysis in chat completions is only supported with the **Palmyra X5** model. Other models don't support the `image_url` content type.
</Warning>

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Overview

Mixed content support allows you to send messages that contain both text and images in a chat with Palmyra X5. Instead of using the separate [Vision tool](/home/vision-tool), you can now include images directly in your chat messages, making conversations more natural and contextual.

## How it works

When sending a message to the chat completion endpoint, you can use the `content` field in two ways:

1. **Text-only message**:

```json  theme={null}
    "messages": [
        {
            "role": "user",
            "content": "Hello, how are you?"
        }
    ]
```

2. **Mixed content message**:

```json  theme={null}
    "messages": [
        {
            "role": "user",
            "content": [{"type": "text", "text": "What do you see in this image?"}, {"type": "image_url", "image_url": {"url": "<IMAGE_URL>"}}]
        }
    ]
```

## Endpoint

**URL:** `POST https://api.writer.com/v1/chat`

### Content fragment types

#### Text fragment

```json  theme={null}
{
  "type": "text",
  "text": "Your text content here"
}
```

#### Image fragment

```json  theme={null}
{
  "type": "image_url",
  "image_url": {
    "url": "<IMAGE_URL>"
  }
}
```

## Examples

### Single image analysis

This example shows how to send a message with a single image. The `content` field is an array of content fragments, where each fragment can be either text or image.

The text fragment includes the message for the model to analyze. The image fragment includes the image URL.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data '{
    "model": "palmyra-x5",
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "type": "text",
            "text": "What do you see in this image?"
          },
          {
            "type": "image_url",
            "image_url": {
              "url": "<IMAGE_URL>"
            }
          }
        ]
      }
    ]
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.chat.chat(
    model="palmyra-x5",
    messages=[
      {
        "role": "user",
        "content": [
          {
            "type": "text",
            "text": "What do you see in this image?"
          },
          {
            "type": "image_url",
            "image_url": {
              "url": "<IMAGE_URL>"
            }
          }
        ]
      }
    ]
  )

  print(response.choices[0].message.content)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.chat.chat({
    model: "palmyra-x5",
    messages: [
      {
        role: "user",
        content: [
          {
            type: "text",
            text: "What do you see in this image?"
          },
          {
            type: "image_url",
            image_url: {
              url: "<IMAGE_URL>"
            }
          }
        ]
      }
    ]
  });

  console.log(response.choices[0].message.content);
  ```
</CodeGroup>

### Using local images with data URLs

You can also use [data URLs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs) to send local images without uploading them to a remote server. This is useful for testing or when working with local files:

<CodeGroup>
  ```bash cURL theme={null}
  # Convert local image to base64 data URL
  base64_image=$(base64 -i "<IMAGE_PATH>")
  data_url="data:image/jpeg;base64,$base64_image"

  curl --location 'https://api.writer.com/v1/chat' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data "{
    \"model\": \"palmyra-x5\",
    \"messages\": [
      {
        \"role\": \"user\",
        \"content\": [
          {
            \"type\": \"text\",
            \"text\": \"Analyze this local image:\"
          },
          {
            \"type\": \"image_url\",
            \"image_url\": {
              \"url\": \"$data_url\"
            }
          }
        ]
      }
    ]
  }"
  ```

  ```python Python theme={null}
  import base64
  from pathlib import Path
  from writerai import Writer

  # Initialize the client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  # Read local image and convert to base64 data URL
  def image_to_data_url(image_path):
      with open(image_path, "rb") as image_file:
          encoded_string = base64.b64encode(image_file.read()).decode('utf-8')
          file_extension = Path(image_path).suffix.lstrip('.')
          mime_type = f"image/{file_extension}" if file_extension in ['jpg', 'jpeg', 'png', 'gif'] else "image/jpeg"
          return f"data:{mime_type};base64,{encoded_string}"

  # Convert local image to data URL
  data_url = image_to_data_url("<IMAGE_PATH>")

  response = client.chat.chat(
    model="palmyra-x5",
    messages=[
      {
        "role": "user",
        "content": [
          {
            "type": "text",
            "text": "Analyze this local image:"
          },
          {
            "type": "image_url",
            "image_url": {
              "url": data_url
            }
          }
        ]
      }
    ]
  )

  print(response.choices[0].message.content)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";
  import fs from 'fs';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  // Convert local image to base64 data URL
  function imageToDataUrl(imagePath) {
    const imageBuffer = fs.readFileSync(imagePath);
    const base64String = imageBuffer.toString('base64');
    const fileExtension = imagePath.split('.').pop();
    const mimeType = ['jpg', 'jpeg', 'png', 'gif'].includes(fileExtension) 
      ? `image/${fileExtension}` 
      : 'image/jpeg';
    return `data:${mimeType};base64,${base64String}`;
  }

  // Convert local image to data URL
  const dataUrl = imageToDataUrl("<IMAGE_PATH>");

  const response = await client.chat.chat({
    model: "palmyra-x5",
    messages: [
      {
        role: "user",
        content: [
          {
            type: "text",
            text: "Analyze this local image:"
          },
          {
            type: "image_url",
            image_url: {
              url: dataUrl
            }
          }
        ]
      }
    ]
  });

  console.log(response.choices[0].message.content);
  ```
</CodeGroup>

### Multiple images with text

You can include multiple images in a single message:

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data '{
    "model": "palmyra-x5",
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "type": "text",
            "text": "Compare these two images and tell me the differences:"
          },
          {
            "type": "image_url",
            "image_url": {
              "url": "<IMAGE_URL_1>"
            }
          },
          {
            "type": "image_url",
            "image_url": {
              "url": "<IMAGE_URL_2>"
            }
          }
        ]
      }
    ]
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.chat.chat(
    model="palmyra-x5",
    messages=[
      {
        "role": "user",
        "content": [
          {
            "type": "text",
            "text": "Compare these two images and tell me the differences:"
          },
          {
            "type": "image_url",
            "image_url": {
              "url": "<IMAGE_URL_1>"
            }
          },
          {
            "type": "image_url",
            "image_url": {
              "url": "<IMAGE_URL_2>"
            }
          }
        ]
      }
    ]
  )

  print(response.choices[0].message.content)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.chat.chat({
    model: "palmyra-x5",
    messages: [
      {
        role: "user",
        content: [
          {
            type: "text",
            text: "Compare these two images and tell me the differences:"
          },
          {
            type: "image_url",
            image_url: {
              url: "<IMAGE_URL_1>"
            }
          },
          {
            type: "image_url",
            image_url: {
              url: "<IMAGE_URL_2>"
            }
          }
        ]
      }
    ]
  });

  console.log(response.choices[0].message.content);
  ```
</CodeGroup>

## Next steps

* Learn about [chat completions](/home/chat-completion) for text-based conversations
* Explore the [Vision tool](/home/vision-tool) for dedicated image analysis
* Check out [Palmyra X5](/home/models#palmyra-x5) model capabilities


# Cookbooks
Source: https://dev.writer.com/home/cookbooks



[Writer Cookbooks](https://github.com/writer/cookbooks) are step-by-step guides to help you implement tasks and solve common problems using Writer. Each recipe includes code snippets, explanations, and best practices to enhance your understanding of the Writer platform.

## Featured

<CardGroup cols={3}>
  <Card title="Translation tool calling" icon="square-1" href="https://github.com/writer/cookbooks/blob/main/tool_calling/tool_translation_chat.ipynb">
    Translate conversations between different languages during chat sessions.
  </Card>

  <Card title="Web search tool calling" icon="square-2" href="https://github.com/writer/cookbooks/blob/main/tool_calling/tool_web_search.ipynb">
    Answer real-time questions by retrieving up-to-date information from the internet during a chat.
  </Card>

  <Card title="Multimodal chat completions" icon="square-3" href="https://github.com/writer/cookbooks/blob/main/completion/multimodal_chat_x5.ipynb">
    Send both text and images in the same message to enable rich, visual conversations with Palmyra X5.
  </Card>
</CardGroup>

## All cookbooks

### Applications

<CardGroup cols={3}>
  <Card title="Working with no-code agents" href="https://github.com/writer/cookbooks/blob/main/applications/application_basic_usage.ipynb">
    Retrieve no-code agent metadata and generate output from them using the Writer SDK.
  </Card>

  <Card title="Knowledge Graph management" href="https://github.com/writer/cookbooks/blob/main/applications/application_graph_management.ipynb">
    Attach a Knowledge Graph to a no-code agent programmatically.
  </Card>

  <Card title="Run no-code agents asynchronously" href="https://github.com/writer/cookbooks/blob/main/applications/application_jobs_utilization.ipynb">
    Run no-code agents asynchronously and manage asynchronous jobs.
  </Card>
</CardGroup>

### Completions

<CardGroup cols={3}>
  <Card title="Text completion" href="https://github.com/writer/cookbooks/blob/main/completion/text_completion.ipynb">
    Use the Writer Python SDK for text completion tasks.
  </Card>

  <Card title="Chat completion" href="https://github.com/writer/cookbooks/blob/main/completion/chat_completion.ipynb">
    Build single-turn and multi-turn chat completions to support conversational AI applications.
  </Card>

  <Card title="Multimodal chat completion" href="https://github.com/writer/cookbooks/blob/main/completion/multimodal_chat_x5.ipynb">
    Send both text and images in the same message to enable rich, visual conversations with Palmyra X5.
  </Card>

  <Card title="Structured completions" href="https://github.com/writer/cookbooks/blob/main/completion/structured_output_cookbook.ipynb">
    Get predictable, machine-readable responses from Palmyra LLMs using JSON Schema or Pydantic objects.
  </Card>
</CardGroup>

### Knowledge Graph

<CardGroup cols={3}>
  <Card title="Knowledge Graph" href="https://github.com/writer/cookbooks/blob/main/knowledge_graph/knowledge_graph.ipynb">
    Use our RAG implementation to create, manage, and use structured data to enhance AI capabilities.
  </Card>

  <Card title="Knowledge Graph tool calling" href="https://github.com/writer/cookbooks/blob/main/tool_calling/tool_calling_kg.ipynb">
    Access a Knowledge Graph in a chat with a Palmyra LLM.
  </Card>
</CardGroup>

### Palmyra models

<CardGroup cols={3}>
  <Card title="List all models" href="https://github.com/writer/cookbooks/blob/main/models/model_retrieval.ipynb">
    List all of the Palmyra models available in the Writer API.
  </Card>

  <Card title="Palmyra Creative" href="https://github.com/writer/cookbooks/blob/main/models/palmyra_creative.ipynb">
    Use the Palmyra Creative model to generate creative content.
  </Card>

  <Card title="Palmyra Fin" href="https://github.com/writer/cookbooks/blob/main/models/palmyra_fin.ipynb">
    Use the Palmyra Fin model for financial analysis and forecasting.
  </Card>

  <Card title="Palmyra Med" href="https://github.com/writer/cookbooks/blob/main/models/palmyra_med.ipynb">
    Use the Palmyra Med model to answer medical questions and analyze medical records.
  </Card>
</CardGroup>

### Tool calling

<CardGroup cols={3}>
  <Card title="Tool calling fundamentals" href="https://github.com/writer/cookbooks/blob/main/tool_calling/tool_calling_api.ipynb">
    Learn how to use tool calling to enhance the functionality of your LLM.
  </Card>

  <Card title="LLM tool calling" href="https://github.com/writer/cookbooks/blob/main/tool_calling/tool_calling_llm.ipynb">
    Use model delegation to refer medical questions to the Palmyra Med model during a chat.
  </Card>

  <Card title="Knowledge Graph tool calling" href="https://github.com/writer/cookbooks/blob/main/tool_calling/tool_calling_kg.ipynb">
    Access a Knowledge Graph in a chat with a Palmyra LLM.
  </Card>

  <Card title="Streaming tool calls" href="https://github.com/writer/cookbooks/blob/main/tool_calling/tool_calling_streaming.ipynb">
    Use tool calling with streaming responses.
  </Card>

  <Card title="Math tool calling example" href="https://github.com/writer/cookbooks/blob/main/tool_calling/tool_calling_math.ipynb">
    Extend the capabilities of your LLM with predefined mathematical functions.
  </Card>

  <Card title="Translation tool calling" href="https://github.com/writer/cookbooks/blob/main/tool_calling/tool_translation_chat.ipynb">
    Translate text between different languages in chat completions.
  </Card>

  <Card title="Web search tool calling" href="https://github.com/writer/cookbooks/blob/main/tool_calling/tool_web_search.ipynb">
    Answer real-time questions by retrieving up-to-date information from the internet during a chat.
  </Card>
</CardGroup>

### Tools

<CardGroup cols={3}>
  <Card title="Medical comprehend" href="https://github.com/writer/cookbooks/blob/main/tools/medical_comprehend.ipynb">
    Analyze unstructured medical text and extract entities.
  </Card>

  <Card title="PDF parser" href="https://github.com/writer/cookbooks/blob/main/tools/pdf_parser.ipynb">
    Parse a PDF file and extract the text as text or markdown.
  </Card>
</CardGroup>


# Compare deployment options
Source: https://dev.writer.com/home/deployment_options

Choose between Standard Cloud and Private Cloud deployment for Writer. Compare security, compliance, scalability, and enterprise features.

Writer's platform is purpose-built for the enterprise, designed to provide security, compliance, and scalability to support AI deployments at an enterprise scale. We currently offer two managed platform deployment options: **Standard Cloud** (default) and **Private Cloud** deployment at a fee. Each option comes with tailored features to suit diverse operational needs.

In both deployment models, Writer prioritizes data privacy and rigorous protection standards. We offer fully managed application lifecycle management, including monitoring, scaling, and high availability (99.9% uptime). We also adhere to global privacy laws and security standards such as GDPR, CCPA, SOC 2 Type II, PCI, and HIPAA.

Across all deployments, customer data is:

* Encrypted in transit and at rest
* Retained only for the duration necessary to fulfill service requirements
* Not used for model training, testing, or improvements

## Standard Cloud managed deployment

Our standard deployment on Writer Cloud is optimized to meet the needs of most customers, balancing security, scalability, and cost-efficiency.

### Features

* Faster time-to-market with a fully integrated platform and out-of-the-box solution
* Application-level data isolation and encryption both at rest and in-transit
* Scalability and cost efficiency, with optimized resource allocation across customers

<Card title="Ideal for" icon="shield-check" iconType="regular" color="#00a651" horizontal>
  Organizations seeking a streamlined, secure, scalable, and cost-effective deployment with minimal management required.
</Card>

## Private Cloud managed deployment

Our Private Cloud deployment offering on a Writer-managed cloud offers enhanced control within a fully isolated environment.

### Features

* Cloud project-level isolation and dedicated API platform with isolated compute, storage, and network
* Dedicated encryption key for cloud resources with a bring-your-own encryption key option
* Option to use Private Connect for accessing Writer in the same cloud region as customer workloads
* Custom domain support available

<Card title="Ideal for" icon="key" iconType="regular" color="#00a651" horizontal>
  Organizations with specific data privacy, security, and compliance requirements, or AI workflows involving sensitive data handling or access controls.
</Card>


# Choose your development path
Source: https://dev.writer.com/home/development_options

Choose your development path for AI agents. Compare no-code builder, Agent Builder, and Writer API/SDKs for customization and technical requirements.

<Tip>
  Need help building? Writer has an in-house solutions team that can build custom
  AI agents for you. **[Contact our sales team](https://go.writer.com/contact-sales)**
</Tip>

Writer offers multiple development paths to build AI agents and applications, each designed for different technical backgrounds and use cases. Whether you're a business user who wants to build agents without coding, a Python developer looking for a visual editor with backend flexibility, or an engineer who needs full API control, Writer provides the right tools for your project. Each option is powered by the same Writer generative AI platform but differs in code requirements, customization scope, and development approach.

## Development options comparison

Determine which path is right for you by thinking about what you want to achieve and your technical background:

| Platform        | Best for                                                                        | Coding required                                                        | Customization scope                                                                   |
| --------------- | ------------------------------------------------------------------------------- | ---------------------------------------------------------------------- | ------------------------------------------------------------------------------------- |
| No-code builder | Simple AI agents for content generation, chat, and research                     | None. Build with prompts and visual configuration only                 | Moderate. Chain prompts, configure outputs, and adjust settings through UI            |
| Agent Builder   | Complex workflows with UI components, data processing, and multi-step logic     | Optional. Use visual blocks or add custom Python for advanced features | Extensive. Drag-and-drop UI builder, workflow automation, and custom code integration |
| Writer API/SDKs | Integrating AI capabilities into existing applications or building from scratch | Advanced. Full programming knowledge required                          | Unlimited. Complete control over implementation and user experience                   |

## Choose your development path

<Tabs>
  <Tab title="Agent Builder">
    <Check>
      Agent Builder is ideal for anyone who wants to build complex AI agents using visual tools with optional coding.
    </Check>

    **With Agent Builder, you can:**

    * Build AI agents using a drag-and-drop visual editor
    * Add Python code to your agent to build custom logic
    * Use external data, like APIs, to bring in information from other sources
    * Easily integrate Writer platform capabilities like Knowledge Graphs and tool calling using prebuilt blocks
    * Quickly analyze and visualize data using an LLM

    ### Getting started resources

    * [Agent Builder overview](/agent-builder/overview)
    * [Demo agent walkthrough](/agent-builder/demo-agent)
    * [Agent Builder quickstart](/agent-builder/quickstart)

    ### Guides

    * [Chatbot tutorial](/agent-builder/chatbot-tutorial)
    * [Process invoices and send to Slack](/agent-builder/invoice-processing)
    * [Upload, parse, and summarize PDFs](/agent-builder/summarize-pdfs)
    * [Tool calling](/agent-builder/tool-calling)

    ### Example use cases

    <AccordionGroup>
      <Accordion title="Customer support chatbot" icon="comments" iconType="regular">
        Build a chatbot to answer frequently asked questions and help customers with their inquiries.
      </Accordion>

      <Accordion title="Patient portal" icon="hospital-user" iconType="solid">
        Use Palmyra-Med to generate SOAP notes and extract ICD codes from patient-doctor chat.
      </Accordion>

      <Accordion title="Employee onboarding coordinator" icon="user-plus" iconType="regular">
        Guide new hires through personalized onboarding checklists, automatically provision accounts and access, and track completion progress across departments.
      </Accordion>

      <Accordion title="Contract review assistant" icon="file-contract" iconType="regular">
        Analyze legal documents for key terms, potential risks, and compliance issues, then generate summary reports for legal teams.
      </Accordion>

      <Accordion title="Customer support triage agent" icon="headset" iconType="regular">
        Automatically classify incoming support tickets by urgency and topic, then route them to the appropriate team with suggested responses.
      </Accordion>
    </AccordionGroup>
  </Tab>

  <Tab title="No-code">
    <Check>
      No-code tools are ideal for business users who want to quickly build an AI agent without writing any lines of code.
    </Check>

    **With the No-code builder, you can:**

    * Build AI agents using a visual editor
    * Build agents with content generation or editing capabilities
    * Create internal tools for content teams
    * Create agents with chat capabilities that can also connect to a Knowledge Graph of your data
    * Create agents that can research, search the web, and prepare reports
    * Integrate any of the Palmyra LLMs

    ### Quickstart guides

    To start building, follow a quickstart for your specific use case:

    * [Text generation](/no-code/text-generation)
    * [Chat](/no-code/chat)
    * [Research](/no-code/research)

    ### Example use cases

    <AccordionGroup>
      <Accordion title="Knowledge assistants" icon="book" iconType="regular">
        Using [Knowledge Graph](https://writer.com/product/graph-based-rag/), our graph-based RAG solution, you can build chat assistants to quickly ask questions using your data sources.
      </Accordion>

      <Accordion title="Campaign workflow automation" icon="arrow-progress" iconType="regular">
        Automate an entire campaign workflow and generate all launch assets from a single messaging document or GTM presentation.
      </Accordion>
    </AccordionGroup>

    <div class="button-wrapper">
      <a class="link" href="https://app.writer.com/aistudio"><button class="button primary-button button--arrow" id="home-button">Start building</button></a>
      <a class="link" href="/no-code"><button class="button secondary-button button--arrow" id="home-button">**Learn more**</button></a>
    </div>
  </Tab>

  <Tab title="Writer API & SDKs">
    <Check>
      Writer API and SDKs are ideal for engineers who want to embed generative AI into their own stack or access the Writer platform via an API, regardless of the programming language.
    </Check>

    **With the Writer APIs, you can:**

    * Use chat and completion APIs to build custom apps, or build custom integrations with your existing tech stack.
    * Create knowledge graphs using your own files and documents, allowing you to build intelligent Q\&A systems, content recommendation engines, and document retrieval systems that understand context.
    * Extend the LLM's functionality by enabling it to call your custom functions with tool calling. The model can use these functions to fetch real-time data or perform calculations when generating responses.
    * Use the RESTful API with any language you prefer, or use our Python SDK or Node SDK.
    * **Note:** You will need an API key to use Writer APIs/SDKs. [Follow the instructions here to get your API key](/api-reference/api-keys).

    ### Getting started resources

    * [API Quickstart](/home/quickstart)
    * [Getting started with Writer SDKs](/home/sdks)
      * [Python SDK](https://pypi.org/project/writer-sdk/) (`pip install writer-sdk`)
        * We also have several [Python cookbooks](https://github.com/writer/cookbooks) available to help you get started with common tasks.
      * [Node SDK](https://www.npmjs.com/package/writer-sdk) (`npm install writer-sdk`)

    ### Guides

    * [Text generation](/home/text-generation)
    * [Chat completion](/home/chat-completion)
    * [Knowledge Graph](/home/knowledge-graph)
    * [Applications API](/home/applications)
    * [Tool calling](/home/tool-calling)
    * [Knowledge Graph chat](/home/kg-chat)

    ### Example use cases

    <AccordionGroup>
      <Accordion title="Integrated chat assistant" icon="code" iconType="regular">
        Embed a chat app into an existing tool or service.
      </Accordion>

      <Accordion title="Integrated text completion" icon="text" iconType="regular">
        Add text completion capabilities to an existing tool or service your company already uses.
      </Accordion>
    </AccordionGroup>

    <div class="button-wrapper">
      <a class="link" href="https://app.writer.com/aistudio"><button class="button primary-button button--arrow" id="home-button">Start building</button></a>
      <a class="link" href="/home/quickstart"><button class="button secondary-button button--arrow" id="home-button">**Learn more**</button></a>
    </div>
  </Tab>
</Tabs>

## Start from a template

When building a new agent, you can choose to start from scratch or accelerate your development with a prebuilt template. These templates provide ready-to-use prompts, configurations, and workflows tailored to specific business needs and use cases. There are templates for no-code agents and Agent Builder agents.

<img src="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=035990e1925e3c575f3d4966ae57ea10" alt="" data-og-width="2778" width="2778" data-og-height="1606" height="1606" data-path="images/agent-builder/get-started-agent-builder.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=280&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=8fba199fd65a3da92c6909a2eb07d749 280w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=560&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=d909dab372cb2721833f33202b980c6b 560w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=840&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=2b94eb2c112853f0cc6ae11860a58f83 840w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=1100&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=e84b5f0849480ded8f8cbd44093b96f3 1100w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=1650&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=5c0d754d551628ee2b0e732575666716 1650w, https://mintcdn.com/writer/pM8WhgC5nDcujQ4i/images/agent-builder/get-started-agent-builder.png?w=2500&fit=max&auto=format&n=pM8WhgC5nDcujQ4i&q=85&s=650a29916a2c295f13ac724c8e63b554 2500w" />

### Template categories

**Starter templates** are core building blocks for common agent types:

* **Text Generation**: Build [no-code agents](/no-code/text-generation) that collect user inputs and generate customized text
* **Chat**: Construct [conversational no-code agents](/no-code/chat) with specific personas connected to your data sources
* **Research**: Create [no-code agents](/no-code/research) for conducting tailored research and analysis
* **New Agent**: Start completely from scratch with [Agent Builder](/agent-builder/overview) when no template fits your needs

**Industry-specific templates** are specialized agents designed for particular sectors:

* **Financial Services**: From broker research Q\&A and 10-K summaries to fund compliance and market research
* **Healthcare**: Medical article summaries, FDA guidance assistants, and regulatory document analysis
* **Legal**: Contract review, compliance checking, and regulatory document processing
* **Retail and e-commerce**: Product descriptions, competitive analysis, and SEO optimization

**Function-based templates** are templates organized by business function:

* **Marketing**: Campaign briefs, content creation, social media posts, and brand messaging
* **Sales**: Outbound emails, prospect research, lead follow-ups, and client relationship management
* **Customer Support**: Help center Q\&A, review responses, and sentiment analysis
* **Content Creation**: Blog outlines, thought leadership articles, case studies, and presentation slides
* **Operations**: Meeting summaries, document processing, and workflow automation

**Custom Agents** are organization-specific templates from your Agent Library. These are specialized agents that other users within your organization have created and published, offering tailored solutions and workflows that align with your company's specific needs and processes.

### Filtering and discovery

You can filter templates by industry, function, and task.

* **Industry**: Browse sector-specific templates across Finance, Healthcare, Legal, Marketing, Retail, and more
* **Function**: Filter by business area such as Customer Support, Sales, Content Creation, or Operations
* **Task**: Find templates by specific capabilities like Analyzing, Brainstorming, Researching, Summarizing, or Generating

Each template includes a detailed preview and description of its capabilities so that you can select the best starting point for your agent development project.

### Agent Builder templates

The majority of prebuilt agent templates are [no-code agent](/no-code/introduction) templates.

The following prebuilt templates use [Agent Builder](/agent-builder/overview):

* **Content lifecycle**: Transform a single campaign brief into a fully built, ready-to-launch campaign. This agent extracts goals and summaries, generates project tasks, creates copy and visuals, and runs the final content through customizable legal checks, streamlining every step of the marketing content supply chain.
* **SDR outreach**: Generate personalized outreach emails tailored to a target account. This agent combines prospect research with product positioning to craft a multi-email sequence that aligns with the prospect's business priorities and challenges.


# Manage files
Source: https://dev.writer.com/home/files

Upload, download, list, and delete files with the File API. Use files in Knowledge Graphs and no-code agents.

The File API allows you to manage files in your account. You can upload, download, list, and delete files.

After you upload a file, you can use it to perform actions such as attaching it to a [Knowledge Graph](/home/knowledge-graph) or using it as an input in a [no-code agent](/home/applications).

This guide shows you how to perform the following actions:

* [Upload a file](#upload-a-file)
* [Get a file](#get-a-file)
* [List all files](#list-all-files)
* [Delete a file](#delete-a-file)

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Upload a file

**Endpoint**: `POST /v1/files`

<Info>A file persists in your account until you [delete it](#delete-a-file).</Info>

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST "https://api.writer.com/v1/files" \
    --header "Content-Type: text/plain" \
    --header "Content-Disposition: attachment; filename=<FILE_NAME>" \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --data-binary "@<FILE_PATH>"

  # Example:
  #   <FILE_NAME> = test.txt
  #   <FILE_PATH> = /path/to/test.txt
  ```

  ```python Python theme={null}
  from pathlib import Path
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  # Read the file contents
  file_path = Path("<FILE_PATH>")  # Replace with your file path, for example: /path/to/test.txt
  file_name = file_path.name  # Get the filename from the path

  file_ = client.files.upload(
    content=file_path.read_bytes(),  # Read the actual file contents
    content_disposition=f"attachment; filename={file_name}",
    content_type="text/plain"
  )

  print(file_.id)
  ```

  ```javascript JavaScript theme={null}
  import fs from 'fs';
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const file = await client.files.upload({
    content: fs.createReadStream("<FILE_PATH>"),  // Replace with your file path, for example: /path/to/test.txt
    "Content-Disposition": "attachment; filename=<FILE_NAME>",  // Replace with your file name, for example: test.txt
    "Content-Type": "text/plain"
  });

  console.log(file.id)
  ```
</CodeGroup>

### Request body

| Parameter             | Type     | Description                                                                                                                                                                                                                                                                  |
| --------------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `content`             | `string` | The content of the file. See the [Python SDK](https://github.com/writer/writer-python?tab=readme-ov-file#file-uploads) and the [JavaScript SDK](https://github.com/writer/writer-node?tab=readme-ov-file#file-uploads) for more details about how to pass the file contents. |
| `content_disposition` | `string` | The [content disposition](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition) of the file.                                                                                                                                                        |
| `content_type`        | `string` | The [MIME type](https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/MIME_types/Common_types) of the file. The file upload supports `txt`, `doc`, `docx`, `ppt`, `pptx`, `jpg`, `png`, `eml`, `html`, `pdf`, `srt`, `csv`, `xls`, and `xlsx` file extensions.            |

### Response format

| Field        | Type            | Description                                                |
| ------------ | --------------- | ---------------------------------------------------------- |
| `id`         | `string`        | The ID of the file.                                        |
| `created_at` | `string`        | The date and time the file was created in ISO 8601 format. |
| `name`       | `string`        | The name of the file.                                      |
| `graph_ids`  | `array[string]` | The IDs of the Knowledge Graphs the file is attached to.   |
| `status`     | `string`        | The processing status of the file.                         |

```json  theme={null}
{
  "id": "1862f090-a281-48f3-8838-26c1e78b605e",
  "created_at": "2024-06-24T12:34:56Z",
  "name": "test.txt",
  "graph_ids": [],
  "status": "in_progress"
}
```

## List all files

**Endpoint**: `GET /v1/files`

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request GET "https://api.writer.com/v1/files" \
    --header "Authorization: Bearer $WRITER_API_KEY"
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()
  page = client.files.list()

  for file in page.data:
      print(file.id, file.name, file.graph_ids, file.status)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();
  const files = await client.files.list();

  for (const file of files.data) {
      console.log(file.id, file.name, file.graph_ids, file.status);
  }
  ```
</CodeGroup>

### Query parameters

In addition to the [pagination parameters](/api-reference/file-api/get-all-files), this endpoint supports the following query parameters:

| Parameter    | Type     | Description                                                                                      |
| ------------ | -------- | ------------------------------------------------------------------------------------------------ |
| `graph_id`   | `string` | Filter files by the graph they are attached to.                                                  |
| `status`     | `string` | Filter files by status.                                                                          |
| `file_types` | `string` | Filter files by extension type. Separate multiple values by commas. For example, `txt,pdf,docx`. |

<Warning>
  The `file_types` parameter is not yet available in the Python and Node SDKs. It will be available in version 2.3.0.
</Warning>

### Response format

The response has the following structure:

| Field               | Type            | Description                                                |
| ------------------- | --------------- | ---------------------------------------------------------- |
| `data`              | `array[object]` | An array of file objects.                                  |
| `data[].id`         | `string`        | The ID of the file.                                        |
| `data[].created_at` | `string`        | The date and time the file was created in ISO 8601 format. |
| `data[].name`       | `string`        | The name of the file.                                      |
| `data[].graph_ids`  | `array[string]` | The IDs of the Knowledge Graphs the file is attached to.   |
| `data[].status`     | `string`        | The status of the file.                                    |
| `has_more`          | `boolean`       | Whether there are more files to fetch.                     |
| `first_id`          | `string`        | The ID of the first file in the response.                  |
| `last_id`           | `string`        | The ID of the last file in the response.                   |

```json  theme={null}
{
  "data": [
    {
      "id": "f1234-abcd-1234",
      "created_at": "2025-03-07T23:20:50.978908Z",
      "name": "my_file.pdf",
      "graph_ids": [],
      "status": "completed"
    },
    {
      "id": "1234-abcd-5678",
      "created_at": "2025-03-07T23:20:44.047604Z",
      "name": "my_second_file.pdf",
      "graph_ids": [],
      "status": "completed"
    }
  ],
  "has_more": false,
  "first_id": "f1234-abcd-1234",
  "last_id": "1234-abcd-5678"
}
```

## Get a file

**Endpoint**: `GET /v1/files/{fileId}`

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request GET "https://api.writer.com/v1/files/<FILE_ID>" \
    --header "Authorization: Bearer $WRITER_API_KEY"
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()
  file = client.files.retrieve("<FILE_ID>")

  print(file.id, file.name, file.graph_ids, file.status)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();
  const file = await client.files.retrieve('<FILE_ID>');

  console.log(file.id, file.name, file.graph_ids, file.status)
  ```
</CodeGroup>

### Response format

```json  theme={null}
{
  "id": "f1234-abcd-1234",
  "created_at": "2025-03-07T23:20:50.978908Z",
  "name": "test.txt",
  "graph_ids": [],
  "status": "completed"
}
```

## Delete a file

**Endpoint**: `DELETE /v1/files/{fileId}`

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request DELETE "https://api.writer.com/v1/files/<FILE_ID>" \
    --header "Authorization: Bearer $WRITER_API_KEY"
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()
  file = client.files.delete("<FILE_ID>")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();
  const fileDeleteResponse = await client.files.delete('<FILE_ID>');
  ```
</CodeGroup>

### Response format

The response has the following structure:

```json  theme={null}
{
  "id": "f1234-abcd-1234",
  "deleted": true
}
```


# Understand generative AI
Source: https://dev.writer.com/home/generative-ai-overview

Learn how generative AI works and how to leverage Writer's models, safety, and best practices for building AI-powered applications.

This guide explains how generative AI works and how to use it effectively with Writer's platform.

Writer's generative AI enables applications to create text, images, and other content based on patterns learned from training data. Unlike traditional programming where you write explicit instructions, Writer's AI learns to generate appropriate responses by understanding context, patterns, and relationships in data.

## How generative AI works

Generative AI operates through a multi-step process that transforms your input into meaningful output:

![Generative AI Overview](https://files.readme.io/265b781-Overview_of_the_generative_AI_workflow.png)

### Core components

**Prompts** are the instructions you give to the AI model. They can be short questions, detailed instructions, or examples of the desired output format. Learn effective [prompting techniques](/home/prompting) to get the results you want.

**Foundation models** are large neural networks trained on vast amounts of text data. Writer offers [multiple Palmyra models](/home/models) with different capabilities, from fast text generation to advanced reasoning and tool calling.

**Tokenization** breaks down your input into smaller units (tokens) that the model can process. Understanding [tokens and pricing](/home/tokens) helps you improve costs and performance.

**Neural network processing** is where the model analyzes patterns, context, and relationships to determine the most appropriate response based on its training.

**Safety filtering** checks generated content for harmful, biased, or inappropriate material. Writer includes [built-in safety features](/home/toxic-check) to ensure responsible AI usage.

## Writer's model capabilities

### Palmyra models

Writer's [Palmyra models](/home/models) provide different capabilities optimized for various use cases. [Palmyra X5](/home/models#palmyra-x5) is the latest and most advanced model with a 1M token context window, adaptive reasoning, and speed and cost efficiency. There are also specialized models for specific use cases, such as [Palmyra Med](/home/models#palmyra-med) for medical and healthcare applications, and [Palmyra Fin](/home/models#palmyra-fin) for finance.

### Specialized features

* **Tool calling**: Enable models to use [external tools and APIs](/agent-builder/tool-calling-intro) for enhanced functionality
* **Vision capabilities**: Process and analyze images alongside text using [vision tools](/home/analyze-images)
* **Knowledge Graph integration**: Connect to your data sources for accurate, contextual responses using [Knowledge Graph](/home/knowledge-graph-concepts)
* **Streaming**: Get responses in real-time for better user experience with [streaming](/home/streaming)

## Best practices

### Prompt engineering

* **Be specific**: Provide clear, detailed instructions for what you want
* **Use examples**: Show the model the format or style you're looking for
* **Provide context**: Give relevant background information
* **Iterate and refine**: Test different approaches to improve results
* **Learn more**: Explore [prompting techniques](/home/prompting) for advanced strategies

### Safety and reliability

* **Review outputs**: Always check generated content before using it
* **Set boundaries**: Define what the AI should and shouldn't do
* **Monitor performance**: Track quality and adjust as needed
* **Handle errors gracefully**: Plan for cases where the AI doesn't perform as expected

### Performance optimization

* **Choose appropriate models**: Select the right [Palmyra model](/home/models) for your use case
* **Optimize prompts**: Use clear, concise language and follow [common prompting strategies](/home/prompting)
* **Manage context length**: Stay within [token limits](/home/tokens) for best performance
* **Use streaming**: Enable [streaming responses](/home/streaming) for real-time delivery
* **Fine-tune parameters**: Adjust [model parameters](/home/model-parameters) for optimal results

## Getting started with Writer

To begin using Writer's generative AI in your applications:

1. **Choose a model** from [Writer's available models](/home/models) that fits your needs
2. **Design effective prompts** using [prompting techniques](/home/prompting)
3. **Test and iterate** to improve performance
4. **Implement safety measures** using Writer's [built-in safety features](/home/toxic-check)
5. **Monitor and optimize** for ongoing success

## Next steps

* Start with the [API quickstart](/home/quickstart) to get up and running
* Explore [Writer's models](/home/models) to find the right fit for your use case
* Learn [prompting techniques](/home/prompting) for better results
* Understand [model parameters](/home/model-parameters) for fine-tuning
* See how to [integrate with your applications](/home/integrations-overview)
* Build [no-code agents](/home/applications) for rapid prototyping
* Connect your data with [Knowledge Graph](/home/knowledge-graph-concepts) for accurate responses


# Help Center
Source: https://dev.writer.com/home/help-center





# Work with inline citations in Knowledge Graph responses
Source: https://dev.writer.com/home/inline-citations



This guide shows you how to work with inline citations in Knowledge Graph responses. Inline citations show which specific sources support each part of the response, enabling you to verify information and trace claims back to their origins.

<CardGroup>
  <Card title="Response with inline citations">
    Below is an example of a response from a Knowledge Graph that includes inline citations:

    ```
    Acme Corp's flagship product line includes three
    main categories: industrial tools, consumer
    electronics, and automotive parts. The industrial
    tools division offers precision manufacturing
    equipment with advanced automation capabilities
    [Acme-Product-Catalog.pdf](a1b2c3d4-e5f6-7890-abcd-ef1234567890).
    ```
  </Card>

  <Card title="Corresponding references array">
    Below is the corresponding `references` object that contains a direct snippet from the source file that was used to support the response:

    ```json  theme={null}
    {"files": [
      {
        "text": "Industrial Tools Division: Our precision manufacturing equipment features advanced automation capabilities with real-time monitoring systems that reduce operational downtime by up to 40% through predictive maintenance algorithms.",
        "fileId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
        "score": 0.95,
        "page": 12,
        "cite": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
      }
    ]}
    ```
  </Card>
</CardGroup>

## Enable inline citations

To enable inline citations in Knowledge Graph responses, set `inline_citations: true` in your `query_config` parameter when making direct Knowledge Graph queries via the `/v1/graphs/question` endpoint.

<CodeGroup>
  ```bash cURL highlight={7-9} theme={null}
  curl --location --request POST 'https://api.writer.com/v1/graphs/question' \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header 'Content-Type: application/json' \
    --data-raw '{
      "graph_ids": ["<GRAPH_ID>"],
      "question": "What are the key features of our product?",
      "query_config": {
        "inline_citations": true
      }
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client
  client = Writer()

  # Query Knowledge Graph with inline citations enabled
  response = client.graphs.question(
      graph_ids=["<GRAPH_ID>"],
      question="What are the key features of our product?",
      query_config={
          "inline_citations": True
      }
  )

  print(f"Answer: {response.answer}")
  print(f"\nFile references: {response.references.files}")
  print(f"\nWeb references: {response.references.web}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the Writer client
  const client = new Writer();

  // Query Knowledge Graph with inline citations enabled
  const response = await client.graphs.question({
      graph_ids: ["<GRAPH_ID>"],
      question: "What are the key features of our product?",
      query_config: {
          inline_citations: true
      }
  });

  console.log(`Answer: ${response.answer}`);
  console.log(`\nFile references: ${response.references.files}`);
  console.log(`\nWeb references: ${response.references.web}`);
  ```
</CodeGroup>

## Citation format and correlation

### Citation format

Inline citations appear in the answer from the LLM as `[source_name](identifier)`, where:

* `source_name` is the display name of the source: either the filename for files, or the page title for web sources
* `identifier` is the unique identifier used to correlate with the references array

The identifier format depends on the source type:

* **File sources**: Uses the `cite` field value, for example, `[document.pdf](a1b2c3d4-e5f6-7890-abcd-ef1234567890)`
* **Web sources**: Uses the `url` field value, for example, `[Web Page Title](https://example.com/page)`

### Correlate citations with references

Inline citations correspond to entries in the `references` object. Correlation differs by source type:

* **File sources**: Citations use the `cite` field from the file reference object as their identifier
* **Web sources**: Citations use the `url` field from the web reference object as their identifier

**Example correlation**:

Here's an example showing how inline citations correlate with the references array for both file and web sources:

**Response text**:

```
Acme Corp's flagship product line includes three main categories: industrial tools, consumer electronics, and automotive parts.
The industrial tools division offers precision manufacturing equipment with advanced automation capabilities
[Acme-Product-Catalog.pdf](a1b2c3d4-e5f6-7890-abcd-ef1234567890). According to recent industry analysis,
smart manufacturing adoption has increased by 40% across similar companies [Industry Trends Report](https://example.com/industry-trends).
```

**References object**:

```json  theme={null}
{
  "files": [
    {
      "text": "Industrial Tools Division: Our precision manufacturing equipment features advanced automation capabilities with real-time monitoring systems that reduce operational downtime by up to 40% through predictive maintenance algorithms.",
      "fileId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
      "score": 0.95,
      "page": 12,
      "cite": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
    }
  ],
  "web": [
    {
      "text": "Smart manufacturing adoption rates have increased by 40% across mid-size manufacturing companies, driven by automation and IoT integration.",
      "url": "https://example.com/industry-trends",
      "title": "Industry Trends Report",
      "score": 0.88
    }
  ]
}
```

**Citation mapping**:

* Citation `[Acme-Product-Catalog.pdf](a1b2c3d4-e5f6-7890-abcd-ef1234567890)` uses the `cite` field from the file reference object
* Citation `[Industry Trends Report](https://example.com/industry-trends)` uses the `url` field from the web reference object

## Link citations to source text with SDKs

When working with inline citations in SDK responses, you can programmatically link citation IDs to their corresponding source text. This enables you to build applications that display citations with their source material.

### Extract and correlate citations

These code samples demonstrate how to extract inline citations from Knowledge Graph responses and correlate them with their source material. The code parses citation markers in the answer text (like `[filename](citation-id)`) and matches them to the corresponding source text in the references object. Using similar patterns, you can extract citations and build applications that display citations with their source material.

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer
  import re

  # Initialize the Writer client
  client = Writer()

  # Query Knowledge Graph with inline citations
  response = client.graphs.question(
      graph_ids=["<GRAPH_ID>"],
      question="What are the key features of our product?",
      query_config={
          "inline_citations": True
      }
  )

  def extract_citations_with_sources(answer_text, references):
      '''Extract citations from answer text and link them to source material.
      
      This function parses inline citations from Knowledge Graph responses and correlates
      them with their source material from the references object.
      
      Args:
          answer_text (str): The response text containing inline citations
          references (object): The references object containing files and web sources
          
      Returns:
          list: Array of citation objects with source text and metadata
      '''
      # Use regex to find all citations in the format [display_text](identifier)
      # This pattern matches markdown-style links like [filename](citation-id)
      citation_pattern = r'\[([^\]]+)\]\(([^)]+)\)'
      citations = re.findall(citation_pattern, answer_text)
      
      citation_data = []
      
      # Process each citation found in the answer text
      for display_text, identifier in citations:
          # Initialize citation info structure
          citation_info = {
              "display_text": display_text,  # The text shown in the citation (e.g., filename)
              "identifier": identifier,  # The unique citation ID
              "source_text": None,  # The actual source text
              "source_type": None   # The source type: "file" or "web"
          }
          
          # Search through file references to find matching citation
          if references and hasattr(references, 'files') and references.files:
              for file_ref in references.files:
                  # Match citation ID with the 'cite' field in file references
                  if hasattr(file_ref, 'cite') and file_ref.cite == identifier:
                      citation_info["source_text"] = file_ref.text  # Extract source text snippet
                      citation_info["source_type"] = "file"  # Mark as file source
                      citation_info["file_id"] = file_ref.file_id  # Store file ID for reference
                      citation_info["page"] = file_ref.page  # Store page number if available
                      break
          
          # Search through web references to find matching citation
          if references and hasattr(references, 'web') and references.web:
              for web_ref in references.web:
                  # Match citation ID with the 'url' field in web references
                  if hasattr(web_ref, 'url') and web_ref.url == identifier:
                      citation_info["source_text"] = web_ref.text  # Extract source text snippet
                      citation_info["source_type"] = "web"  # Mark as web source
                      citation_info["url"] = web_ref.url  # Store URL for reference
                      citation_info["title"] = web_ref.title  # Store page title
                      break
          
          citation_data.append(citation_info)
      
      return citation_data

  # Extract citations with their source text
  # This processes the response and creates a structured list of citations with their source material
  citations = extract_citations_with_sources(response.answer, response.references)

  # Display citations with source material
  # Loop through each citation and print its details along with the source text
  for citation in citations:
      print(f"Citation: [{citation['display_text']}]({citation['identifier']})")
      print(f"Source type: {citation['source_type']}")
      print(f"Source text: {citation['source_text']}")
      
      # Show additional metadata based on source type
      if citation['source_type'] == 'file':
          print(f"File ID: {citation['file_id']}, Page: {citation['page']}")
      elif citation['source_type'] == 'web':
          print(f"URL: {citation['url']}, Title: {citation['title']}")
      
      print("-" * 50)  # Separator between citations
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the Writer client
  const client = new Writer();

  // Query Knowledge Graph with inline citations
  const response = await client.graphs.question({
      graph_ids: ["<GRAPH_ID>"],
      question: "What are the key features of our product?",
      query_config: {
          inline_citations: true
      }
  });

  function extractCitationsWithSources(answerText, references) {
      /**
       * Extract citations from answer text and link them to source material.
       * 
       * This function parses inline citations from Knowledge Graph responses and correlates
       * them with their source material from the references object.
       * 
       * @param {string} answerText - The response text containing inline citations
       * @param {object} references - The references object containing files and web sources
       * @returns {Array} Array of citation objects with source text and metadata
       */
      
      // Use regex to find all citations in the format [display_text](identifier)
      // This pattern matches markdown-style links like [filename](citation-id)
      const citationPattern = /\[([^\]]+)\]\(([^)]+)\)/g;
      const citations = [];
      let match;
      
      // Process each citation found in the answer text
      while ((match = citationPattern.exec(answerText)) !== null) {
          const [fullMatch, displayText, identifier] = match;
          
          // Initialize citation info structure
          const citationInfo = {
              displayText: displayText,    // The text shown in the citation (e.g., filename)
              identifier: identifier,      // The unique citation ID
              sourceText: null,          // The actual source text
              sourceType: null           // The source type: "file" or "web"
          };
          
          // Search through file references to find matching citation
          if (references?.files) {
              for (const fileRef of references.files) {
                  // Match citation ID with the 'cite' field in file references
                  if (fileRef.cite === identifier) {
                      citationInfo.sourceText = fileRef.text;      // Extract source text snippet
                      citationInfo.sourceType = "file";            // Mark as file source
                      citationInfo.fileId = fileRef.fileId;        // Store file ID for reference
                      citationInfo.page = fileRef.page;            // Store page number if available
                      break;
                  }
              }
          }
          
          // Search through web references to find matching citation
          if (references?.web) {
              for (const webRef of references.web) {
                  // Match citation ID with the 'url' field in web references
                  if (webRef.url === identifier) {
                      citationInfo.sourceText = webRef.text;       // Extract source text snippet
                      citationInfo.sourceType = "web";            // Mark as web source
                      citationInfo.url = webRef.url;              // Store URL for reference
                      citationInfo.title = webRef.title;          // Store page title
                      break;
                  }
              }
          }
          
          citations.push(citationInfo);
      }
      
      return citations;
  }

  // Extract citations with their source text
  // This processes the response and creates a structured list of citations with their source material
  const citations = extractCitationsWithSources(response.answer, response.references);

  // Display citations with source material
  // Loop through each citation and print its details along with the source text
  citations.forEach(citation => {
      console.log(`Citation: [${citation.displayText}](${citation.identifier})`);
      console.log(`Source type: ${citation.sourceType}`);
      console.log(`Source text: ${citation.sourceText}`);
      
      // Show additional metadata based on source type
      if (citation.sourceType === 'file') {
          console.log(`File ID: ${citation.fileId}, Page: ${citation.page}`);
      } else if (citation.sourceType === 'web') {
          console.log(`URL: ${citation.url}, Title: ${citation.title}`);
      }
      
      console.log("-".repeat(50));  // Separator between citations
  });
  ```
</CodeGroup>

## Response format

Knowledge Graph responses include a `references` object with `files` and `web` arrays. The `files` array contains file reference objects for file-based sources, and the `web` array contains web reference objects for web-based sources.

### File sources

File sources appear in the `references.files` array.

| Field    | Type      | Description                                                                                  |
| -------- | --------- | -------------------------------------------------------------------------------------------- |
| `text`   | `string`  | The actual text snippet from the source document that supports the response                  |
| `fileId` | `string`  | Unique identifier for the source file                                                        |
| `score`  | `number`  | Internal score used during the retrieval process for ranking and selecting relevant snippets |
| `page`   | `integer` | Page number where the snippet was found in the source document                               |
| `cite`   | `string`  | Unique identifier used in inline citations within the response text                          |

### Web sources

Web sources appear in the `references.web` array.

| Field   | Type     | Description                                                                                  |
| ------- | -------- | -------------------------------------------------------------------------------------------- |
| `text`  | `string` | The exact text snippet from the web source that was used to support the response             |
| `url`   | `string` | The URL of the web page where this content was found                                         |
| `title` | `string` | The title of the web page where this content was found                                       |
| `score` | `number` | Internal score used during the retrieval process for ranking and selecting relevant snippets |

## Streaming responses

When using streaming responses with Knowledge Graph tools, the `references` object containing sources and citations appears in the last chunk of the stream. This means:

* **Content chunks**: The response text with inline citations is streamed progressively
* **Final chunk**: Contains the graph data with the complete `references` object
* **Citation processing**: You need to collect all chunks and process the final one to access source text

### Stream responses with SDKs

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client
  client = Writer()

  # Configure Knowledge Graph tool with inline citations
  tools = [{
      "type": "graph",
      "function": {
          "description": "Search company knowledge base",
          "graph_ids": ["<GRAPH_ID>"],
          "subqueries": True,
          "query_config": {
              "inline_citations": True
          }
      }
  }]

  messages = [{'role': 'user', 'content': 'What are the key features of our product?'}]

  # Stream the response
  stream = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      tools=tools,
      tool_choice="auto",
      stream=True
  )

  # Collect streaming content and references
  references = None

  for chunk in stream:
      if chunk.choices[0].delta.content is not None:
          # Stream content progressively
          content = chunk.choices[0].delta.content
          print(content, end='', flush=True)
      
      # Check for graph data in the message
      if hasattr(chunk.choices[0], 'message') and chunk.choices[0].message:
          if hasattr(chunk.choices[0].message, 'graph_data') and chunk.choices[0].message.graph_data:
              # References are in the graph_data.references object
              references = chunk.choices[0].message.graph_data.references

  print("\nFile references:", references.files)
  print("\nWeb references:", references.web)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the Writer client
  const client = new Writer();

  // Configure Knowledge Graph tool with inline citations
  const tools = [{
      type: "graph",
      function: {
          description: "Search company knowledge base",
          graph_ids: ["<GRAPH_ID>"],
          subqueries: true,
          query_config: {
              inline_citations: true
          }
      }
  }];

  const messages = [{ role: "user", content: "What are the key features of our product?" }];

  // Stream the response
  const stream = await client.chat.chat({
      model: "palmyra-x5",
      messages: messages,
      tools: tools,
      tool_choice: "auto",
      stream: true
  });

  // Collect streaming content and references
  let references = null;

  for await (const chunk of stream) {
      if (chunk.choices[0].delta.content) {
          // Stream content progressively
          const content = chunk.choices[0].delta.content;
          process.stdout.write(content);
      }
      
      // Check for graph data in the message
      if (chunk.choices[0].message && chunk.choices[0].message.graph_data) {
          // References are in the graph_data.references object
          references = chunk.choices[0].message.graph_data.references;
      }
  }

  console.log(`\nFile references: ${references.files}`);
  console.log(`\nWeb references: ${references.web}`);
  ```
</CodeGroup>

## Next steps

* Learn about [Knowledge Graph query configuration](/home/knowledge-graph-query-config) for tuning search parameters
* Explore [Knowledge Graph tools](/home/kg-chat) for chat completions
* Check out [direct Knowledge Graph queries](/home/kg-query) for programmatic access


# Explore integrations
Source: https://dev.writer.com/home/integrations-overview



This guide provides an overview of Writer's integrations with popular AI frameworks and platforms. After reading this guide, you can choose the right integration for your specific use case and development needs.

Writer integrates with several leading AI frameworks and cloud platforms to provide flexible deployment options and enhanced capabilities. Each integration offers unique benefits depending on your infrastructure, development preferences, and specific requirements.

## Compare integrations

| Integration               | Best for                    | Key benefits                                   |
| ------------------------- | --------------------------- | ---------------------------------------------- |
| **Amazon Bedrock**        | Enterprise AWS environments | Serverless scaling, AWS ecosystem integration  |
| **Amazon Strands Agents** | Multi-agent AI applications | Agent orchestration, durable sessions          |
| **LangChain**             | Complex AI workflows        | Tool integration, data source connections      |
| **Traceloop/OpenLLMetry** | Production monitoring       | Observability, debugging, performance tracking |
| **Instructor**            | Structured data extraction  | Pydantic validation, retry mechanisms          |

## Amazon Bedrock

[Amazon Bedrock](https://aws.amazon.com/bedrock/) is a fully managed service for building and scaling generative AI applications. Writer's Palmyra X5 and X4 models are available on Bedrock, enabling you to use AWS's infrastructure and ecosystem to build and scale your applications.

<Tabs>
  <Tab title="Key benefits">
    * **Serverless scaling**: automatic scaling based on demand
    * **AWS ecosystem integration**: integration with other AWS services
    * **Enterprise security**: built-in security and compliance features
    * **Cross-region inference**: distribute traffic across multiple AWS regions
  </Tab>

  <Tab title="Ideal use cases">
    * Large-scale enterprise applications
    * AWS-native development workflows
    * Applications requiring automatic scaling
    * Organizations with existing AWS infrastructure
  </Tab>
</Tabs>

<Card title="Get started" icon="rocket">
  [Learn how to use Writer with Amazon Bedrock](/home/integrations/bedrock)
</Card>

## Amazon Strands Agents

[Amazon Strands Agents](https://strandsagents.com/latest/) is a platform for building sophisticated multi-agent AI applications that require orchestration and collaboration.

Strands Agents SDK enables you to create AI applications using a model-driven approach with multiple agents working together. Writer models integrate with the Strands ecosystem.

<Tabs>
  <Tab title="Key benefits">
    * **Multi-agent orchestration**: coordinate multiple AI agents in complex workflows
    * **Durable session management**: maintain state across agent interactions
    * **Asynchronous support**: handle concurrent operations efficiently
    * **Model-driven approach**: define agent behavior through configuration
  </Tab>

  <Tab title="Ideal use cases">
    * Research and content creation pipelines
    * Customer service automation with multiple specialized agents
    * Complex decision-making workflows
    * Applications requiring agent collaboration
  </Tab>
</Tabs>

<Card title="Get started" icon="rocket">
  [Learn how to use Writer with Amazon Strands Agents](/home/integrations/strands)
</Card>

## LangChain

[LangChain](https://www.langchain.com/) provides a framework for developing applications powered by language models. Writer's integration allows you to use Writer's capabilities within the LangChain ecosystem alongside other tools and data sources.

<Tabs>
  <Tab title="Key benefits">
    * **Tool integration**: connect Writer with external tools and APIs
    * **Data source connections**: integrate with databases, files, and web sources
    * **Chain composition**: build complex workflows with multiple components
    * **Ecosystem compatibility**: works with the broader LangChain tool ecosystem
  </Tab>

  <Tab title="Ideal use cases">
    * Research assistants with web search capabilities
    * Document processing pipelines
    * Custom AI applications with multiple data sources
    * Applications requiring extensive tool integration
  </Tab>
</Tabs>

<Card title="Get started" icon="rocket">
  [Learn how to use Writer with LangChain](/home/integrations/langchain)
</Card>

## Traceloop/OpenLLMetry

[OpenLLMetry](https://openllmetry.com/) provides observability for LLM applications through OpenTelemetry-compatible tracing. It offers detailed insights into your Writer API usage, performance characteristics, and debugging capabilities.

<Tabs>
  <Tab title="Key benefits">
    * **Comprehensive observability**: track prompts, completions, and token usage
    * **OpenTelemetry compatibility**: works with any OpenTelemetry-compatible backend
    * **Performance insights**: monitor latency, throughput, and error rates
    * **Debugging capabilities**: trace issues across complex AI workflows
  </Tab>

  <Tab title="Ideal use cases">
    * Production AI applications
    * Applications requiring performance monitoring
    * Complex AI workflows needing debugging
    * Organizations with existing observability stacks
  </Tab>
</Tabs>

<Card title="Get started" icon="rocket">
  [Learn how to use Writer with OpenLLMetry](/home/integrations/openllmetry)
</Card>

## Instructor

[Instructor](https://github.com/instructor-ai/instructor) provides a high-level framework for getting structured outputs from language models. It offers built-in retry mechanisms, Pydantic validation, and prompt optimization specifically designed for structured data extraction.

<Tabs>
  <Tab title="Key benefits">
    * **Structured data extraction**: convert unstructured text into validated data structures
    * **Built-in retry logic**: automatic error handling and retry mechanisms
    * **Pydantic validation**: type-safe data validation and parsing
    * **Prompt optimization**: automatic prompt minimization and optimization
  </Tab>

  <Tab title="Ideal use cases">
    * Data extraction from documents and text
    * API response parsing and validation
    * Content analysis and classification
    * Data repair and cleaning workflows
  </Tab>
</Tabs>

<Card title="Get started" icon="rocket">
  [Learn how to use Writer with Instructor](/home/integrations/instructor)
</Card>

## Next steps

Once you've chosen an integration:

1. **Set up your development environment** with the required dependencies
2. **Follow the integration-specific guide** to implement Writer in your application
3. **Test your implementation** with sample data and workflows
4. **Deploy to production** following best practices for your chosen platform

For additional help, see the [API Quickstart](/home/quickstart) or explore the [SDKs documentation](/home/sdks) for language-specific implementation details.


# Invoke Palmyra models on Amazon Bedrock
Source: https://dev.writer.com/home/integrations/bedrock



Palmyra X5 and Palmyra X4 are available on [Amazon Bedrock](https://aws.amazon.com/bedrock/).

Amazon Bedrock is a fully managed service from AWS that enables developers to build and scale generative AI applications using foundation models from leading AI companies. This integration allows you to use Palmyra X5 and X4 in Amazon's serverless environment.

This guide covers how to:

* Install and configure the AWS CLI, which you need to connect to Bedrock
* List available Writer models on Bedrock
* Use the AWS `boto3` Python SDK to invoke Palmyra models on Bedrock

## Prerequisites

Before interacting with Palmyra models on Bedrock, you need an [AWS account](https://aws.amazon.com/) with access to Bedrock.

## Install and configure the AWS CLI

1. [Install the AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html).
2. Configure the AWS CLI with your AWS credentials. You can configure the CLI using the following command and providing your AWS account credentials:

```bash  theme={null}
aws configure sso
```

Alternatively, you can configure the CLI with environment variables or a credentials file. See the [AWS CLI documentation](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-quickstart.html#getting-started-quickstart-config) for more details.

3. Test that your AWS CLI is configured correctly by running the following command:

```bash  theme={null}
aws sts get-caller-identity
```

You should see output similar to the following:

```bash  theme={null}
{
    "UserId": "A123456789012",
    "Account": "123456789012",
    "Arn": "arn:aws:iam::123456789012:user/your-username"
}
```

## Install the AWS boto3 SDK for Python

To invoke Palmyra models on Bedrock using Python, you can use the AWS `boto3` SDK.

Install the `boto3` SDK using the following command:

```bash  theme={null}
pip install boto3
```

## Subscribe to Bedrock Models

<Warning>
  Writer Palmyra X5 and X4 models are available in Amazon Bedrock in the US West (Oregon) AWS Region with [cross-Region inference](https://docs.aws.amazon.com/bedrock/latest/userguide/cross-region-inference.html). For the most up-to-date information on model support by Region, refer to the [Amazon Bedrock documentation](https://docs.aws.amazon.com/bedrock/latest/userguide/models-regions.html).
</Warning>

To subscribe to the Palmyra X5 and Palmyra X4 models on Bedrock, go to the [Bedrock console](https://console.aws.amazon.com/bedrock/home?region=us-west-2#/modelaccess) and request access to the Writer models you want to use.

You can also list the available models from Writer using the following command:

<CodeGroup>
  ```bash AWS CLI theme={null}
  aws bedrock list-foundation-models --region=us-west-2 --by-provider writer --query "modelSummaries[*].modelId"
  ```

  ```python boto3 (Python SDK) theme={null}
  import boto3

  bedrock = boto3.client(service_name="bedrock", region_name="us-west-2")
  response = bedrock.list_foundation_models(byProvider="writer")

  for summary in response["modelSummaries"]:
      print(summary["modelId"])
  ```
</CodeGroup>

## Use Palmyra X5 and Palmyra X4 on with the AWS Python SDK

<Warning>
  Palmyra X5 and Palmyra X4 are only available in the US West (Oregon) region but can be accessed through cross-Region inference. Cross-Region inference allows you to distribute traffic across multiple AWS Regions. To learn more about cross-Region inference for Bedrock, see [Increase throughput with cross-Region inference](https://docs.aws.amazon.com/bedrock/latest/userguide/cross-region-inference.html) and [Supported Regions and models for inference profiles](https://docs.aws.amazon.com/bedrock/latest/userguide/inference-profiles-support.html).
</Warning>

The following example uses the `boto3` Python SDK to create a chat completion with the Palmyra X5 model on Bedrock. The `modelId` is `us.writer.palmyra-x5-v1:0`, which is the ID for the [cross-region inference profile for Palmyra X5](https://docs.aws.amazon.com/bedrock/latest/userguide/inference-profiles-support.html).

```python boto3 (Python SDK) theme={null}
import boto3

client = boto3.client(service_name="bedrock-runtime", region_name="us-west-2")
response = client.converse(
    modelId="us.writer.palmyra-x5-v1:0",
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "text": "Write a one sentence product description for a cozy, stylish sweater suitable for both casual and formal occasions"
                }
            ],
        }
    ],
)
print(response["output"]["message"]["content"][0]["text"])
```

Learn more about the `converse` method in the [boto3 Python SDK documentation](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/bedrock-runtime/client/converse.html).

## Example: Summarize a meeting transcript

The following example uses Palmyra X5 to summarize a meeting transcript and provide a list of action items from the transcript.

It takes a meeting transcript text file, passes it to Palmyra X5 with instructions to provide a summary of the meeting and a list of action items, and prints the response.

```python boto3 (Python SDK) theme={null}
import boto3
from botocore.exceptions import ClientError

# Create a Bedrock Runtime client in the AWS Region you want to use.
client = boto3.client("bedrock-runtime", region_name="us-west-2")

# Set the model ID, e.g. Palmyra X5.
# This is the ID for the cross-region inference profile for Palmyra X5.
# See https://docs.aws.amazon.com/bedrock/latest/userguide/inference-profiles-support.html.
model_id = "us.writer.palmyra-x5-v1:0"

transcript_file_path = "call-transcript.txt"
transcript_format = "txt"

# Load the document
with open(transcript_file_path, "rb") as file:
    document_bytes = file.read()

# Start a conversation with a user message and the document
conversation = [
    {
        "role": "user",
        "content": [
            {
                "text": "Create a summary of the meeting notes and provide a list of action items."
            },
            {
                "document": {
                    # Available formats: html, md, pdf, doc/docx, xls/xlsx, csv, and txt
                    "format": transcript_format,
                    "name": "Meeting Notes",
                    "source": {"bytes": document_bytes},
                }
            },
        ],
    }
]

try:
    # Send the message to the model.
    response = client.converse(
        modelId=model_id,
        messages=conversation,
        inferenceConfig={"maxTokens": 500, "temperature": 0.3},
    )

    # Extract and print the response text.
    response_text = response["output"]["message"]["content"][0]["text"]
    print(response_text)

except (ClientError, Exception) as e:
    print(f"ERROR: Can't invoke '{model_id}'. Reason: {e}")
    exit(1)
```

## Additional resources

See more information and examples below:

* [AWS blog post](https://aws.amazon.com/blogs/aws/writer-palmyra-x5-and-x4-foundation-models-are-now-available-in-amazon-bedrock/) about Palmyra X5 and X4 on Bedrock
* [Additional code examples for Amazon Bedrock](https://github.com/writer/aws-examples/tree/main/bedrock-examples)


# Structured output with Instructor
Source: https://dev.writer.com/home/integrations/instructor



This tutorial will guide you through using Writer with [Instructor](https://useinstructor.com/), a Python library that makes it easy to get structured data like JSON from LLMs.

## Prerequisites

* Python 3.8 or higher installed
* [Poetry](https://pypi.org/project/poetry/) installed (see their [installation guide](https://python-poetry.org/docs/#installation))
* A Writer API key (follow the [Quickstart](/home/quickstart) to obtain an API key)

## Getting started

To get started with Instructor, you'll need to install the library and set up your environment.

<Steps>
  <Step title="Obtain an API key">
    First, make sure that you've signed up for a Writer AI Studio account and obtained an API key. You can follow the [Quickstart](/home/quickstart) to obtain an API key.
  </Step>

  <Step title="Install instructor">
    Once you've done so, install `instructor` with Writer support by running:

    ```bash  theme={null}
    pip install instructor[writer]
    ```
  </Step>

  <Step title="Set the `WRITER_API_KEY` environment variable">
    Make sure to set the `WRITER_API_KEY` environment variable with your Writer API key or pass it as an argument to the Writer constructor.
  </Step>
</Steps>

## Basic usage

Following is a simple example of how to use `instructor` with Writer:

```python  theme={null}
import instructor
from writerai import Writer
from pydantic import BaseModel

# Initialize Writer client
client = instructor.from_writer(Writer(api_key="your API key"))


class User(BaseModel):
    name: str
    age: int


# Extract structured data
user = client.chat.completions.create(
    model="palmyra-x5",
    messages=[{"role": "user", "content": "Extract: John is 30 years old"}],
    response_model=User,
)

print(user)
#> name='John' age=30
```

This code creates a simple data model with two fields: `name` and `age`. It then uses the `instructor.from_writer` function to create a `client` object that uses the Writer API to extract structured data from a text.

## Instructor modes

Instructor supports two modes for structured output with Writer:

* [JSON mode](#json-mode): Returns a response that strictly follows the provided JSON schema.
* [Tools mode](#tools-mode): Returns a structured response using the `tool_calls` field, where it populates the defined tool and its arguments based on the input.

Both modes use the [Writer chat completion endpoint](/api-reference/completion-api/chat-completion) to generate structured outputs. The key difference lies in how the model returns the data: either as a raw JSON object or via a structured tool call.

### JSON mode

JSON mode uses Writer's native JSON schema support. When you use this mode:

* Instructor converts your Pydantic model into a JSON schema and passes it as the `response_format` parameter
* The model generates a response that strictly follows the provided JSON schema
* Instructor then parses the JSON response and validates it against your original Pydantic model

<Tip>
  For more details on structured outputs and JSON schema usage, see our [structured output documentation](/home/structured-output).
</Tip>

### Tools mode

Tools mode uses Writer's tool calling capabilities. When you use this mode:

* Instructor converts your Pydantic model into a tool definition
* Instructor adds this tool definition to the API call using the `tools` parameter
* The model returns a structured response using the `tool_calls` field, where it populates the defined tool and its arguments based on the input
* Instructor extracts the arguments from the `tool_calls` field and validates them against the original Pydantic model

<Tip>
  For more details on tool calling, see our [tool calling documentation](/home/tool-calling).
</Tip>

### Specifying the mode

You can specify which mode to use when initializing the Instructor client:

```python  theme={null}
import instructor
from writerai import Writer

# Use JSON mode
client = instructor.from_writer(
    Writer(api_key="your API key"),
    mode=instructor.Mode.WRITER_JSON
)

# Use Tools mode
client = instructor.from_writer(
    Writer(api_key="your API key"),
    mode=instructor.Mode.WRITER_TOOLS
)

```

If you don't specify a mode, Instructor will use `WRITER_TOOLS` by default.

## Instructor vs. Writer SDK

When working with structured outputs, you can choose between two main approaches: using Instructor, a high-level framework built on top of LLM providers, or using the Writer SDK directly, which offers low-level access to the Writer LLMs. Each option comes with its own strengths and trade-offs, depending on your goals and level of control needed.

| Feature                      | Instructor                                                               | Writer SDK                                                 |
| ---------------------------- | ------------------------------------------------------------------------ | ---------------------------------------------------------- |
| **Retry mechanism**          | Built-in retry logic with error handling and prompt editing              | Manual implementation required                             |
| **Schema handling**          | Auto-converts a wide range of Python types into JSON Schema via Pydantic | Manual schema conversion required                          |
| **Validation & reliability** | Enhanced outcomes through Pydantic validation + retries                  | Same results possible with manual implementation           |
| **Prompt optimization**      | Built-in prompt minimization and optimization                            | Manual prompt engineering required                         |
| **Model access**             | Limited to supported models (currently V4 + Tool Calls)                  | Full access to latest models (V4, V5) and all output modes |
| **Update speed**             | Requires updates/contributions for new features                          | Immediate support for latest Palmyra features              |

For more on Instructor’s advanced retry and error handling capabilities, see the [official Instructor retrying guide](https://python.useinstructor.com/concepts/retrying/).

## Building a data repair tool with Instructor and Writer

You can also use Instructor to do advanced data extraction and repair. In this example, you'll build a Python application that extracts structured data from text, CSV, and PDF files using Instructor and Writer. This application will:

* Parse text, CSV, and PDF files
* Extract and validate structured data using Instructor and Writer
* Output the results in CSV format

The finished code for this tutorial is available in the [API tutorials](https://github.com/writer/api-tutorials/tree/main/instructor-and-writer-tutorial) GitHub repository.

### Setting up the project

<Steps>
  <Step title="Create a new project">
    First, create a new project and set up Poetry for dependency management:

    ```bash  theme={null}
    mkdir instructor-and-writer-tutorial
    cd instructor-and-writer-tutorial
    poetry init -y
    ```
  </Step>

  <Step title="Add dependencies">
    Add the required dependencies to your project:

    ```bash  theme={null}
    poetry add instructor writer-sdk python-dotenv pydantic
    ```
  </Step>

  <Step title="Set up your environment variables">
    Create a `.env` file in your project root and add your Writer API key:

    ```
    WRITER_API_KEY=your_api_key_here
    ```
  </Step>

  <Step title="Create `main.py` file and add imports">
    Create a `main.py` file and add the following imports:

    ```python  theme={null}
    import asyncio
    import csv
    import json
    import os
    from typing import Annotated, Type, Iterable, List

    import instructor
    from dotenv import load_dotenv
    from pydantic import BaseModel, AfterValidator, Field
    from writerai import Writer, AsyncWriter

    load_dotenv()
    ```

    Here's what each import is used for:

    * `asyncio`: This is used to run the application on multiple files concurrently.
    * `csv`: This is used to write the extracted data to a CSV file.
    * `json`: This is used to write the extracted data to a JSON file.
    * `os`: This is used to read the files.
    * `instructor`: The `instructor` library is used for structured output.
    * `writerai`: This is the Writer Python SDK, which is used to interact with the Writer API.
    * `typing` and `pydantic`: These modules are used to define the types for fields in the `UserExtract` class defined in the next step.
    * `dotenv`: The `dotenv` module is used to load the `.env` file that contains your Writer API key.
  </Step>

  <Step title="Setting up Writer client">
    Initialize the Writer client for both synchronous and asynchronous operations:

    ```python  theme={null}
    writer_client = Writer()
    async_writer_client = AsyncWriter()
    ```
  </Step>
</Steps>

### Defining the data model

In order for Instructor to extract structured output, you need to define a data model using Pydantic. To define the data model, create a `UserExtract` class to represent the data you want to extract:

```python  theme={null}
class UserExtract(BaseModel):
    @staticmethod
    def first_last_name_validator(v):
        if v[0] != v[0].upper() or v[1:] != v[1:].lower() or not v.isalpha():
            raise ValueError("Name must contain only letters and start with uppercase letter")
        return v

    first_name: Annotated[str, AfterValidator(first_last_name_validator)] = Field(
        ..., description="The name of the user"
    )
    last_name: Annotated[str, AfterValidator(first_last_name_validator)] = Field(
        ..., description="The surname of the user"
    )
    email: str
```

This data model defines the fields that you want to extract from the files. The `first_name` and `last_name` fields are validated to ensure they start with an uppercase letter and contain only letters. In this example, the `email` field is a simple string field, though you could also use a Pydantic field to validate the email format.

### Parsing the files

With the data model defined, you can now implement file parsing. This involves creating functions to open the files and extract the text.

<Steps>
  <Step title="Create a function to handle file processing">
    Implement the main file handler function that orchestrates the entire process:

    ```python  theme={null}
    async def handle_file(file_path: str, response_model: Type[BaseModel], output_path: str = None) -> None:
        extension = os.path.splitext(file_path)[1]
        name = os.path.splitext(os.path.basename(file_path))[0]

        file_text = await fetch_file_text(file_path, name, extension)
        repaired_entities = await repair_data(file_text, response_model)

        print(f"Number of entities extracted from {name}{extension}: {len(repaired_entities)}")
        return generate_csv(repaired_entities, response_model, output_path)
    ```

    This function handles the file processing logic, including file type validation, text extraction, data repair, and CSV generation.
  </Step>

  <Step title="Create a function to read the files">
    Next, create a function to read the files based on the given path and extension:

    ```python  theme={null}
    async def fetch_file_text(file_path: str, name: str, extension: str) -> str:
        allowed_extensions = [".txt", ".csv", ".pdf"]
        if extension not in allowed_extensions:
            raise ValueError(f"File extension {extension} is not allowed. Only {', '.join(allowed_extensions)}")

        print(f"Reading {name}{extension} content...")
        with open(file_path, 'rb') as file:
            file_contents = file.read()

        return await parse_file(file_contents, name, extension)
    ```
  </Step>

  <Step title="Extract the file content">
    Next, create a function to extract the text from the files. For text files, this function simply reads the file contents. For PDFs, the function uploads the PDF using Writer's [file upload endpoint](/api-reference/file-api/upload-files), parses the text using [PDF parsing tool](/api-reference/tool-api/pdf-parser), and then deletes the file from Writer's servers using the [file delete endpoint](/api-reference/file-api/delete-file):

    ```python  theme={null}
    async def parse_file(file_bytes_content: bytes, name: str, extension: str) -> str:
        file_text = ""

        if extension == ".pdf":
            print(f"Uploading {name}{extension} content to writer servers...")
            file = await async_writer_client.files.upload(
                content=file_bytes_content,
                content_disposition=f"attachment; filename={name + extension}",
                content_type="application/octet-stream",
            )

            print(f"Converting {name}{extension} content from PDF to text...")
            file_text = await async_writer_client.tools.parse_pdf(
                file_id=file.id,
                format="text",
            )

            print(f"Deleting {name}{extension} from writer servers...")
            await async_writer_client.files.delete(file.id)
        else:
            print(f"Converting {name}{extension} content...")
            file_text = file_bytes_content.decode("utf-8")

        return file_text
    ```
  </Step>
</Steps>

### Extracting and repairing the data

With the file content extracted, you can now implement data extraction and repair using Instructor and Writer.

<Steps>
  <Step title="Create a function to repair the data">
    Create a function to extract and repair data using Instructor:

    ```python  theme={null}
    async def repair_data(file_text: str, response_model: Type[BaseModel]) -> List[BaseModel]:
        instructor_client = instructor.from_writer(client=async_writer_client)

        if not issubclass(response_model, BaseModel):
            raise ValueError("Response model must be subclass of pydantic BaseModel")

        print("Extracting data featuring Instructor tools...")
        return await instructor_client.chat.completions.create(
            model="palmyra-x5",
            response_model=Iterable[response_model],
            max_retries=5,
            messages=[
                {"role": "user", "content": f"Extract entities from {file_text}"},
            ],
        )
    ```
  </Step>

  <Step title="Implementing CSV generation">
    Add a function to save the extracted data to CSV:

    ```python  theme={null}
    def generate_csv(entities: List[BaseModel], response_model: Type[BaseModel], output_path: str = None) -> None:
        fieldnames = list(response_model.model_json_schema()["properties"].keys())
        file_path = f"{response_model.__name__}.csv"

        if output_path:
            file_path = output_path + file_path
            os.makedirs(os.path.dirname(file_path), exist_ok=True)

        with open(file_path, "w") as file:
            dict_writer = csv.DictWriter(file, fieldnames=fieldnames)
            dict_writer.writeheader()
            for entity in entities:
                dict_writer.writerow(json.loads(response_model(**entity.model_dump()).model_dump_json()))
    ```
  </Step>
</Steps>

### Creating the main handler

Finally, implement the main function to process multiple files concurrently:

```python  theme={null}
async def main():
    data = [
        ("example_data/ExampleFileTextFormat.txt", UserExtract, None),
        ("example_data/ExampleFilePDFFormat.pdf", UserExtract, "out/"),
    ]
    tasks = []

    for row in data:
        tasks.append(handle_file(row[0], row[1], row[2]))

    await asyncio.gather(*tasks)

if __name__ == "__main__":
    asyncio.run(main())
```

In this example, the input paths are hardcoded, but you could modify the application to accept input paths from the command line or a web interface, or read from a directory or database.

### Testing the application

Your data repair tool is now ready to use. To test it, follow these steps:

<Steps>
  <Step title="Create an `example_data` directory">
    Create an `example_data` directory and add some test files:

    * A text file with user information
    * A PDF file with user information

    You can use the [example data](https://github.com/writer/api-tutorials/tree/main/instructor-and-writer-tutorial/example_data) provided in the GitHub repository for this tutorial. If you provide your own, be sure to update the `main.py` file to point to the new files.
  </Step>

  <Step title="Run the application">
    Run the application:

    ```bash  theme={null}
    poetry run python main.py
    ```

    The application will process both files concurrently and generate CSV files containing the extracted user information.
  </Step>
</Steps>

## Conclusion

You've now seen basic and advanced usage of Writer with Instructor. To learn more about Instructor, check out the [Instructor documentation](https://python.useinstructor.com/). Structured output is a powerful feature that can help you build more accurate and reliable applications, especially combined with [tool calling](/home/tool-calling).


# Using Writer with LangChain
Source: https://dev.writer.com/home/integrations/langchain



The [Writer LangChain integration](https://github.com/writer/langchain-writer) allows you to leverage Writer's capabilities within the LangChain ecosystem, making it easy to build sophisticated AI applications. In this tutorial, you'll explore each component of the integration and understand how they work.

## Prerequisites

Before you begin, make sure you have:

* Python 3.9 or higher installed
* A [Writer AI Studio](https://app.writer.com/register) account
* A Writer API key. See instructions in the [API Quickstart](/home/quickstart).
* Basic familiarity with Python and [LangChain concepts](https://python.langchain.com/docs/concepts/)

## Installation and setup

First, install the necessary packages:

```bash  theme={null}
pip install langchain-writer python-dotenv
```

Next, create a `.env` file with `WRITER_API_KEY` set to your Writer API key:

```
WRITER_API_KEY=<your-api-key>
```

## Components of the Writer LangChain integration

The `langchain-writer` package provides several key components:

1. `ChatWriter` for text generation
2. Tool calling capabilities, including:
   * `GraphTool` for Knowledge Graph integration
   * `NoCodeAppTool` for no-code applications
   * `LLMTool` for specialized model delegation
3. Additional tools like `PDFParser` for parsing PDFs and `WriterTextSplitter` for intelligent text splitting

## ChatWriter

`ChatWriter` is a LangChain chat model that provides access to Writer's AI capabilities for text generation. It supports streaming, non-streaming, batching, and asynchronous operations. You can use any of the [Palmyra chat models](/home/models) available in AI Studio.

See the [full documentation](https://github.com/writer/langchain-writer/blob/main/docs/chat_writer.md#parameters) for `ChatWriter` to learn more about the available parameters.

### Usage

This example uses `ChatWriter` to ask the Palmyra X5 model to explain what LangChain is in plain terms.

```python  theme={null}
from langchain_writer import ChatWriter
from dotenv import load_dotenv

load_dotenv()

# Initialize the chat model
# These are optional parameters with default values listed here
chat = ChatWriter(
    model="palmyra-x5",  # default model
    temperature=0.7,        # controls randomness (0-1)
    max_tokens=None,        # maximum number of tokens to generate
    timeout=None,           # request timeout
    max_retries=2          # number of retries on failure
)

# Generate a response
response = chat.invoke("Explain what LangChain is in simple terms.")
print(response.content)
```

### Streaming

Streaming allows you to receive the generated text in chunks as it's being produced. This example shows how to stream a response from the Palmyra X5 model using synchronous streaming:

```python  theme={null}
from langchain_writer import ChatWriter
import asyncio
from dotenv import load_dotenv

load_dotenv()

chat = ChatWriter()

# Streaming (synchronous)
for chunk in chat.stream("Write a short poem about artificial intelligence."):
    print(chunk.content, end="")
```

You can also use asynchronous streaming with the `async for` loop and the `astream` method:

```python  theme={null}
from langchain_writer import ChatWriter
import asyncio
from dotenv import load_dotenv

load_dotenv()

chat = ChatWriter()

# Streaming (asynchronous)
async def async_stream():
    async for chunk in chat.astream("Write a short poem about artificial intelligence."):
        print(chunk.content, end="")

asyncio.run(async_stream())
```

### Batch processing

You can batch process multiple prompts for efficient processing. The following example batches three individual LLM invocations and runs them in parallel:

```python  theme={null}
from langchain_writer import ChatWriter
from dotenv import load_dotenv

load_dotenv()

chat = ChatWriter()

questions = [
    "What is a three-sentence definition of retrieval-augmented generation?",
    "When did transformer architecture first appear in the literature?",
    "What are 3 benefits of using AI to assist in software development?"
]

# Process multiple prompts in parallel
responses = chat.batch(questions)

for question, response in zip(questions, responses):
    print(f"Q: {question}")
    print(f"A: {response.content}\n")
```

Note that `batch` returns results in the same order as the inputs. You can use `batch_as_completed` to return results as they complete. Results may arrive out of order, but each includes the input index for matching.

You can also optionally set the `max_concurrency` parameter to control the number of concurrent requests, which can be useful when you want to limit the number of parallel calls to prevent overloading a server or API:

```python  theme={null}
responses = chat.batch(questions,
    config={"max_concurrency": 2}
)
```

See the LangChain documentation on [parallel execution](https://python.langchain.com/docs/concepts/runnables/#optimized-parallel-execution-batch) for more information.

## Tool calling

`ChatWriter` supports tool calling, which allows the model to use external functions to enhance its capabilities. Tool calling is available with Palmyra X4 and later.

### Tool calling basics

To use tool calling, follow these steps:

1. Define a function that will be called by the model and decorate it with the `@tool` decorator.
2. Bind the tool to the chat model using the `bind_tools` method.
3. Use the tool in a chat and append the response to the messages list.
4. Execute the tool call with the arguments given by the model and append the response to the messages list.
5. Invoke the chat model with the updated messages list to receive the final response.

Here's an example of how to use tool calling:

```python  theme={null}
from langchain_writer import ChatWriter
from langchain_core.tools import tool
from langchain_core.messages import HumanMessage
from dotenv import load_dotenv

load_dotenv()

@tool
def get_weather(location: str) -> str:
    """Get the current weather for a location."""
    # In a real application, you would call a weather API here
    return f"The weather in {location} is sunny and 75°F"

chat = ChatWriter()
chat_with_tools = chat.bind_tools([get_weather])

messages = [
    HumanMessage(
        "What's the weather like in San Francisco?"
    )
]

response = chat_with_tools.invoke(messages)
messages.append(response)

for tool_call in response.tool_calls:
    selected_tool = {
        "get_weather": get_weather,
    }[tool_call["name"].lower()]
    tool_msg = selected_tool.invoke(tool_call)
    messages.append(tool_msg)

response = chat_with_tools.invoke(messages)
print(response.content)
```

### GraphTool

`GraphTool` is a LangChain tool that allows you to retrieve information from a Knowledge Graph to enhance its responses. The tool executes remotely, so you simply need to provide the IDs of the Knowledge Graph you want to use. For more details on the built-in Knowledge Graph chat tool in Writer, see the [Knowledge Graph chat support guide](/home/kg-chat).

#### Usage

```python  theme={null}
from langchain_writer import ChatWriter
from langchain_writer.tools import GraphTool
from dotenv import load_dotenv

load_dotenv()

# Initialize the chat model
chat = ChatWriter()

# Create a graph tool with your knowledge graph ID
graph_tool = GraphTool(graph_ids=["your-knowledge-graph-id"])

# Bind the tool to the chat model
chat_with_tools = chat.bind_tools([graph_tool])

# Ask a question that can be answered using the knowledge graph
response = chat_with_tools.invoke("What information do you have about product X?")
print(response.content)
```

### NoCodeAppTool

`NoCodeAppTool` is a specialized tool that enables access to Writer's no-code applications as LLM tools. This tool allows language models to interact with pre-built applications to enhance their responses.

The tool is designed as a standard "function" type tool and requires manual execution. Unlike the `GraphTool` and `LLMTool` which are executed remotely by Writer's servers, you'll need to handle the execution of the `NoCodeAppTool` in your code.

When initializing the tool, you must provide an `app_id` (either directly or using an environment variable) that corresponds to a no-code application created in your Writer account. The tool automatically retrieves the input parameters for the app during initialization, so you don't need to specify them manually.

You can customize the tool's name (default is "No-code application") and description (default is "No-code application powered by Palmyra") to provide better context to the model. The API key is typically read from environment variables but can also be provided directly.

When working with the tool, remember that all required inputs must be provided when invoking it, or a `ValueError` will be raised. Input values can be either strings or lists of strings, depending on what the no-code application expects.

This tool is particularly useful for generating content, performing specialized data transformations, creating custom outputs based on user inputs, integrating with domain-specific applications, enhancing responses with formatted content, or leveraging pre-built applications for common tasks.

#### Usage

Here's an example of how to use the `NoCodeAppTool`:

```python  theme={null}
from langchain_writer import ChatWriter
from langchain_writer.tools import NoCodeAppTool
from langchain_core.messages import HumanMessage
import os
from dotenv import load_dotenv

load_dotenv()

chat = ChatWriter()

# Create a NoCodeAppTool
app_tool = NoCodeAppTool(
    app_id=os.getenv("APP_ID"), 
    name="Social post generator", 
    description="No-code app that generates social posts from product descriptions"
)

# Bind the tool ChatWriter
chat_with_tools = chat.bind_tools([app_tool])

product_description = "The Terra running shoe is a high-performance, lightweight shoe that offers a comfortable and durable experience. The shoe is also lightweight and easy to carry, making it an ideal option for runners looking for a new pair of shoes."

# Create a conversation
messages = [
    HumanMessage("Can you help me generate a social post about a new running shoe? Here is the product description:\n\n" + product_description)
]

# Get the model's response
response = chat_with_tools.invoke(messages)
messages.append(response)

# If the model requests to use the tool
if response.tool_calls:
    for tool_call in response.tool_calls:
        print("\nTool call:", tool_call)
        
        # Dynamically build the inputs dictionary from the args
        inputs = {}
        for arg in tool_call['args']:
            inputs[arg] = tool_call['args'][arg]
        
        # Execute the tool call
        try:
            tool_response = app_tool.run(tool_input={"inputs": inputs})
            messages.append(tool_response.suggestion)
        except Exception as e:
            print(f"Error running tool: {e}")
    
    # Get the final response
    try:
        final_response = chat_with_tools.invoke(messages)
        print("\nFinal response:", final_response.content)
    except Exception as e:
        print(f"Error getting final response: {e}")
else:
    print("No tool calls were requested.")
```

When providing inputs to the tool, you'll need to format them as a dictionary:

```python  theme={null}
# Example of providing inputs to the tool
inputs = {
    "Input name": "Input value",
    "Another input name": ["List", "of", "string", "values"]
}

# Invoke the tool with the inputs
result = app_tool.run(tool_input={"inputs": inputs})
```

### LLMTool

`LLMTool` is a specialized tool that enables delegation to specific Writer models. This tool allows language models to delegate calls to different Palmyra model types to enhance their responses.

Unlike most LangChain tools that use the standard "function" type, the `LLMTool` has a type of `llm` and is designed specifically for use within the Writer environment. Due to its remote execution nature, this tool doesn't support direct invocation through the `_run` method—attempting to call this method will raise a `NotImplementedError`.

When initializing the tool, you can specify which Palmyra model to delegate to using the `model_name` parameter. Options include general-purpose models like `palmyra-x5`, as well as domain-specific models such as `palmyra-med` for medical content, `palmyra-fin` for financial analysis, and `palmyra-creative` for creative content generation. The default model is `palmyra-x5`. The `description` parameter plays a crucial role in helping the model understand when to use this tool.

When the model uses the LLM tool, the execution happens remotely on Writer's servers, and the response includes additional data in the `additional_kwargs["llm_data"]` field that you can access in your application.

This tool is particularly valuable when you need specialized domain knowledge. For example, you might delegate medical questions to the `palmyra-med` model, use `palmyra-creative` for generating creative content, or leverage `palmyra-fin` for financial analysis.

#### Usage

Here's an example of how to use the `LLMTool`:

```python  theme={null}
from langchain_writer import ChatWriter
from langchain_writer.tools import LLMTool
from dotenv import load_dotenv

load_dotenv()

chat = ChatWriter()

# Create an LLMTool
llm_tool = LLMTool(
    model_name="palmyra-med",
    description="A medical model that can answer questions about the human body and extract ICD-10 codes."
)

# Bind the tool to the ChatWriter
chat_with_tools = chat.bind_tools([llm_tool])

# Now the model can delegate to the specialized LLM in its responses
response = chat_with_tools.invoke([
    ("system", "You are a helpful assistant with access to medical knowledge."),
    ("human", "Can you explain the symptoms of hypertension and provide the ICD-10 code?")
])

print(response.content)

# The LLM data is available in the response
print(response.additional_kwargs["llm_data"])
```

## Additional tools

### PDFParser

`PDFParser` is a document loader that uses Writer's PDF parsing capabilities to extract text from PDF documents. It converts PDFs into LangChain Document objects that can be used in your applications. For more details on the underlying API, see the [PDF parser API reference](/api-reference/tool-api/pdf-parser).

#### Usage

Here's an example of how to use the `PDFParser`:

```python  theme={null}
from langchain_writer import PDFParser
from langchain_core.documents.base import Blob
from dotenv import load_dotenv

load_dotenv()

# Initialize the PDF parser with the desired output format
parser = PDFParser(output_format="markdown")  # Options: "text", "markdown"

# Load a PDF file
file = Blob.from_path("path/to/your/document.pdf")

parsed_pages = parser.parse(blob=file)
print(parsed_pages)
```

#### Output formats

The `PDFParser` supports different output formats:

* `text`: Plain text extraction
* `markdown`: Structured markdown with preserved formatting

```python  theme={null}
# For markdown output
markdown_parser = PDFParser(output_format="markdown")
markdown_docs = markdown_parser.load("path/to/your/document.pdf")
```

### WriterTextSplitter (Deprecated)

<Warning>
  The `WriterTextSplitter` component has been deprecated as of November 18, 2025, as the underlying Writer API endpoint for context-aware text splitting has been removed.

  If you need text splitting capabilities in LangChain, consider using LangChain's built-in text splitters such as `RecursiveCharacterTextSplitter` or `TokenTextSplitter`. See the [LangChain text splitting documentation](https://python.langchain.com/docs/how_to/split_by_token/) for more information.
</Warning>

## Conclusion

In this tutorial, you've explored the LangChain integration with Writer, covering each of its components:

1. `ChatWriter` for text generation
2. Tool calling capabilities, including:
   * `GraphTool` for Knowledge Graph integration
   * `NoCodeAppTool` for no-code applications
   * `LLMTool` for specialized model delegation
3. Additional tools like `PDFParser` for parsing PDFs

This integration provides a foundation for building AI applications with Writer and LangChain. Check out the package [README](https://github.com/writer/langchain-writer) and [documentation](https://github.com/writer/langchain-writer/tree/main/docs), as well as the [LangChain Documentation](https://python.langchain.com/docs/) for more information on how to use LangChain with Writer.


# Using Writer with OpenLLMetry
Source: https://dev.writer.com/home/integrations/openllmetry

Monitor and debug Writer API calls with OpenLLMetry. Export traces to Jaeger, Datadog, New Relic, or Traceloop for LLM observability.

This guide shows you how to integrate Writer with [OpenLLMetry](https://www.traceloop.com/openllmetry) for monitoring and debugging your LLM applications. After completing these steps, you can trace and observe your Writer API calls alongside other LLM operations in your observability stack.

<img src="https://mintcdn.com/writer/BNRiJTjyBT4r8fSv/images/home/traceloop-dashboard.png?fit=max&auto=format&n=BNRiJTjyBT4r8fSv&q=85&s=fa60278c3249c46ace6e9eddaa29254e" alt="Traceloop dashboard showing Writer integration with OpenLLMetry" data-og-width="3024" width="3024" data-og-height="1714" height="1714" data-path="images/home/traceloop-dashboard.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/BNRiJTjyBT4r8fSv/images/home/traceloop-dashboard.png?w=280&fit=max&auto=format&n=BNRiJTjyBT4r8fSv&q=85&s=35b8e6f1c54a45963cb901902802c15a 280w, https://mintcdn.com/writer/BNRiJTjyBT4r8fSv/images/home/traceloop-dashboard.png?w=560&fit=max&auto=format&n=BNRiJTjyBT4r8fSv&q=85&s=aaede9c3cc5d4ae1f9cde6a245a48d76 560w, https://mintcdn.com/writer/BNRiJTjyBT4r8fSv/images/home/traceloop-dashboard.png?w=840&fit=max&auto=format&n=BNRiJTjyBT4r8fSv&q=85&s=f2882fd90f8d140cfff02831dacdd10a 840w, https://mintcdn.com/writer/BNRiJTjyBT4r8fSv/images/home/traceloop-dashboard.png?w=1100&fit=max&auto=format&n=BNRiJTjyBT4r8fSv&q=85&s=25403e3e8c63a28949e62dd0ae66275e 1100w, https://mintcdn.com/writer/BNRiJTjyBT4r8fSv/images/home/traceloop-dashboard.png?w=1650&fit=max&auto=format&n=BNRiJTjyBT4r8fSv&q=85&s=23ef6fca467f8638c23cbe7a4a570352 1650w, https://mintcdn.com/writer/BNRiJTjyBT4r8fSv/images/home/traceloop-dashboard.png?w=2500&fit=max&auto=format&n=BNRiJTjyBT4r8fSv&q=85&s=063e19603e66c744adb8759eb46a561b 2500w" />

## What is OpenLLMetry?

OpenLLMetry is an open source project that enables monitoring and debugging of LLM application execution. It provides non-intrusive tracing built on top of OpenTelemetry, allowing you to export traces to your existing observability stack.

Since it's built on [OpenTelemetry](https://opentelemetry.io/), you can use any OpenTelemetry compatible backend (Jaeger, Zipkin, Datadog, New Relic, etc.) or the hosted Traceloop platform.

## What you get with the Writer integration

The Writer integration with OpenLLMetry provides enhanced observability beyond standard OpenTelemetry traces. You'll see detailed information about your Writer API calls as additional span attributes:

* **`gen_ai.request.model`**: the model requested (for example, `palmyra-x5`)
* **`gen_ai.prompt`**: array of prompts sent to the Writer model
* **`gen_ai.completion`**: array of completions returned from Writer
* **`gen_ai.usage.total_tokens`**: total tokens used
* **`gen_ai.usage.prompt_tokens`**: number of tokens used for prompts
* **`gen_ai.usage.completion_tokens`**: number of tokens used for completions

This gives you comprehensive visibility into your Writer API usage, including prompt engineering insights, token consumption patterns, and performance characteristics that aren't available in standard OpenTelemetry traces.

<Note>
  For a complete list of supported attributes, see the full [GenAI Semantic Conventions](https://www.traceloop.com/docs/openllmetry/contributing/semantic-conventions).
</Note>

## Prerequisites

Before you begin, make sure you have:

* Python 3.11 or higher installed
* A [Writer AI Studio](https://app.writer.com/register) account
* A [Traceloop](https://auth.traceloop.com/en/login) account
* A Writer API key. See instructions in the [API Quickstart](/home/quickstart)
* Basic familiarity with Python and [OpenLLMetry concepts](https://www.traceloop.com/docs/openllmetry/introduction)

<Note>
  The example below uses **Traceloop** as the observability provider. See the [connect to an external provider](#connect-to-external-providers) section to learn how to connect to other providers.
</Note>

## Configuration details

| Environment Variable      | Required        | Default                     | Description                                                                                                                                                                                                                                                                                                                                 |
| ------------------------- | --------------- | --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `WRITER_API_KEY`          | **Required**    | None                        | Writer API key for authenticating API calls. Must be set for the application to function.                                                                                                                                                                                                                                                   |
| `TRACELOOP_API_KEY`       | **Conditional** | None                        | **Required for Traceloop Cloud**: Create an API key in your [Traceloop dashboard](https://app.traceloop.com/settings/api-keys) and set this environment variable. **Optional for external providers**: When connecting to other observability platforms (Datadog, New Relic, etc.), omit this variable and use `TRACELOOP_HEADERS` instead. |
| `TRACELOOP_BASE_URL`      | Optional        | `https://api.traceloop.com` | OpenTelemetry endpoint to connect to. If prefixed with `http`/`https`, uses [OTLP/HTTP protocol; otherwise uses OTLP/GRPC](https://opentelemetry.io/docs/specs/otel/protocol/exporter/). The SDK appends `/v1/traces`.                                                                                                                      |
| `TRACELOOP_HEADERS`       | Optional        | None                        | [Custom HTTP headers for authentication](https://www.traceloop.com/docs/openllmetry/configuration#headers). If set, API key is ignored.                                                                                                                                                                                                     |
| `TRACELOOP_TRACE_CONTENT` | Optional        | `true`                      | [Enable/disable logging of prompts, completions, and embeddings to span attributes](https://www.traceloop.com/docs/openllmetry/privacy/traces#disabling-logging-globally).                                                                                                                                                                  |
| `TRACELOOP_TELEMETRY`     | Optional        | `true`                      | [Enable/disable anonymous telemetry data collection](https://www.traceloop.com/docs/openllmetry/configuration#control-telemetry).                                                                                                                                                                                                           |

<Note>
  For additional configuration option details, see the [SDK initialization docs](https://www.traceloop.com/docs/openllmetry/configuration).
</Note>

## Integrate Writer with OpenLLMetry

### 1. Install the SDK

Install OpenLLMetry in your Python environment:

```bash  theme={null}
pip install traceloop-sdk
```

### 2. Initialize and configure

In your Writer application, initialize the Traceloop tracer. For local development, you may want to disable batch sending to see traces immediately.

<CodeGroup>
  ```python  theme={null}
  import os
  from traceloop.sdk import Traceloop
  from writerai import Writer

  # Initialize Traceloop for Writer monitoring
  Traceloop.init(
      app_name="YOUR_APP_NAME",
      api_key=os.environ.get("TRACELOOP_API_KEY"),
      # disable_batch=True   # For local development, this disables batch sending so you can see Writer API traces immediately
  )

  # Initialize Writer client
  client = Writer(api_key=os.environ.get("WRITER_API_KEY"))
  ```
</CodeGroup>

### 3. (Optional) annotate your workflows

[Workflow annotations](https://www.traceloop.com/docs/openllmetry/tracing/annotations) help organize and group related operations for better trace visualization and debugging.

**When to use decorators:**

* **Complex processes**: Group related API calls and business logic into logical workflows
* **Custom naming**: Override automatic span naming with business-context names
* **Hierarchical tracing**: Create parent-child relationships between workflows and tasks

**Available decorators:**

| Decorator   | Purpose                                | Use case                                                        |
| ----------- | -------------------------------------- | --------------------------------------------------------------- |
| `@workflow` | Multi-step processes or "chains"       | Complete business workflows that can be traced as a single unit |
| `@task`     | Individual operations within workflows | Specific actions or computations within a workflow              |
| `@agent`    | Autonomous agents                      | AI agents that can make decisions and use tools                 |
| `@tool`     | Agent tools                            | Functions that agents can call to perform specific actions      |

<Note>
  Workflow annotations are **optional**. OpenLLMetry traces Writer API calls automatically without needing any decorators or additional code.
</Note>

```python  theme={null}
from traceloop.sdk.decorators import workflow, task, agent, tool

# Workflow and task example
@workflow(name="content_creation")
def content_creation_pipeline(topic: str):
    research = research_topic(topic)
    content = generate_content(research)
    return content

@task(name="research_topic")
def research_topic(topic: str):
    completion = client.chat.completions.create(
        model="palmyra-x5",
        messages=[{"role": "user", "content": f"Provide a comprehensive overview of {topic}, including key concepts, benefits, and current trends."}],
        max_tokens=300
    )
    return completion.choices[0].message.content

@task(name="generate_content")
def generate_content(research: str):
    completion = client.chat.completions.create(
        model="palmyra-x5",
        messages=[{"role": "user", "content": f"Write an engaging article based on this research: {research}"}],
        max_tokens=500
    )
    return completion.choices[0].message.content

# Agent and tool example
@agent(name="content_agent")
def content_agent(request: str):
    return research_tool(request)

@tool(name="research_tool")
def research_tool(query: str):
    completion = client.chat.completions.create(
        model="palmyra-x5",
        messages=[{"role": "user", "content": f"Find detailed information about {query} and provide key insights and data points."}],
        max_tokens=300
    )
    return completion.choices[0].message.content
```

## Connect to external providers

Because the Traceloop SDK is built on OpenTelemetry, the data it generates can be used in any observability platform that supports the OpenTelemetry standard. OpenLLMetry extends this by using the OTLP protocol to connect with external observability providers, letting you send traces directly to your existing stack without relying on Traceloop’s hosted platform.

### Configure external provider connection

To connect to an external provider, configure the following environment variables:

| Environment Variable | Description                                           |
| -------------------- | ----------------------------------------------------- |
| `TRACELOOP_BASE_URL` | The OTLP endpoint URL for your observability provider |
| `TRACELOOP_HEADERS`  | Authentication headers (if required by your provider) |

### Example configurations

#### [Grafana Cloud](https://www.traceloop.com/docs/openllmetry/integrations/grafana#without-grafana-agent)

```bash  theme={null}
# Generate base64 encoded credentials
echo -n "<your stack id>:<your api key>" | base64

# Set environment variables
export TRACELOOP_BASE_URL=https://otlp-gateway-<zone>.grafana.net/otlp
export TRACELOOP_HEADERS="Authorization=Basic%20<base64 encoded stack id and api key>"
```

#### [Datadog](https://www.traceloop.com/docs/openllmetry/integrations/datadog)

```bash  theme={null}
# Connect to your Datadog Agent (requires OTLP HTTP collector enabled)
export TRACELOOP_BASE_URL="http://<datadog-agent-hostname>:4318"
```

#### [New Relic](https://www.traceloop.com/docs/openllmetry/integrations/newrelic)

```bash  theme={null}
export TRACELOOP_BASE_URL=https://otlp.nr-data.net:443
export TRACELOOP_HEADERS="api-key=<YOUR_NEWRELIC_LICENSE_KEY>"
```

<Note>
  For a complete list of supported integrations, see the full [OpenLLMetry integrations catalog](https://www.traceloop.com/docs/openllmetry/integrations/introduction#the-integrations-catalog).
</Note>

## Next steps

Now that you've set up Writer with OpenLLMetry, you can start monitoring your LLM applications. See the following resources to help you get the most out of your integration:

* Explore [OpenLLMetry's advanced features](https://docs.traceloop.com/docs/openllmetry/tracing) for more detailed tracing capabilities
* Learn about [workflow annotations](https://docs.traceloop.com/docs/openllmetry/tracing/workflow-annotations) to better organize your traces
* Set up [custom integrations](https://docs.traceloop.com/docs/openllmetry/integrations) with your existing observability stack
* Review the [Writer OpenLLMetry integration](https://github.com/traceloop/openllmetry/tree/main/packages/opentelemetry-instrumentation-writer) for additional details and examples


# Using Writer with AWS Strands Agents
Source: https://dev.writer.com/home/integrations/strands



Writer's models are available on [AWS Strands Agents](https://strandsagents.com/latest/).

Strands Agents SDK from AWS is an open-source framework that enables developers to build and deploy AI agents using a model-driven approach. This integration allows you to use Writer models within the Strands agent ecosystem, from local development to production deployment.

## Available models

Writer offers several specialized Palmyra models:

| Model            | Model ID (Writer API) | Model ID (Bedrock)          | Context Window | Availability                                                                               | Description                                                                                        |
| ---------------- | --------------------- | --------------------------- | -------------- | ------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------- |
| Palmyra X5       | `palmyra-x5`          | `us.writer.palmyra-x5-v1:0` | 1M tokens      | [Writer API](#writer-api-configuration) or [Amazon Bedrock](#amazon-bedrock-configuration) | Latest model with 1 million token context for complex workflows, supports vision and multi-content |
| Palmyra X4       | `palmyra-x4`          | `us.writer.palmyra-x4-v1:0` | 128k tokens    | [Writer API](#writer-api-configuration) or [Amazon Bedrock](#amazon-bedrock-configuration) | Advanced model for workflow automation and tool calling                                            |
| Palmyra Fin      | `palmyra-fin`         | Not available               | 128k tokens    | [Writer API](#writer-api-configuration) only                                               | Finance-specialized model                                                                          |
| Palmyra Med      | `palmyra-med`         | Not available               | 32k tokens     | [Writer API](#writer-api-configuration) only                                               | Healthcare-specialized model for medical analysis                                                  |
| Palmyra Creative | `palmyra-creative`    | Not available               | 128k tokens    | [Writer API](#writer-api-configuration) only                                               | Creative writing and brainstorming model                                                           |

See the [Writer models guide](/home/models) for more details and use cases.

<Note>
  The above Bedrock models IDs for Palmyra X5 and Palmyra X4 are using [cross-region inference profiles](https://docs.aws.amazon.com/bedrock/latest/userguide/inference-profiles-support.html). Check which AWS Regions support Writer models before selecting an inference profile.
</Note>

## Prerequisites

Before you begin, make sure you have:

* Python 3.10 or higher installed
* Basic familiarity with Python and [AWS Strands](https://strandsagents.com/latest/)

## Writer API configuration

### Prerequisites

Before you configure the WRITER API client for Strands Agent SDK, make sure you have:

* A [Writer AI Studio](https://app.writer.com/register) account
* A Writer API key. See instructions in the [API Quickstart](/home/quickstart)

### Installation

To use Writer models with Strands Agents, install the optional Writer dependency:

```bash  theme={null}
pip install 'strands-agents[writer]'
```

<Note>
  To follow along with the examples in this guide, you'll also need the [Strands Agent Tools package](https://github.com/strands-agents/tools). Install the package with `pip install strands-agents-tools`.
</Note>

### Client configuration

You can pass additional arguments to the Writer client via `client_args`:

```python  theme={null}
model = WriterModel(
    client_args={
        "api_key": "<WRITER_API_KEY>",
        "timeout": 30,
        "base_url": "https://api.writer.com/v1",
        # Additional client configuration options
    },
    model_id="palmyra-x5"
)
```

### Environment variables

You can set your Writer API key as an environment variable instead of passing it directly:

```bash  theme={null}
export WRITER_API_KEY="your_api_key_here"
```

Then initialize the model without the `client_args["api_key"]` parameter:

```python  theme={null}
model = WriterModel(model_id="palmyra-x5")
```

### Usage

After installing, you can import and initialize the Writer provider in Strands Agents:

```python  theme={null}
from strands import Agent
from strands.models.writer import WriterModel
from strands_tools import calculator

model = WriterModel(
    client_args={"api_key": "<WRITER_API_KEY>"},
    model_id="palmyra-x5",
)

agent = Agent(model=model, tools=[calculator])
response = agent("What is 2+2")
print(response)
```

<Note>
  By default, Strands Agents use a `PrintingCallbackHandler` that streams responses to `stdout` as they're generated. When you call `agent("What is 2+2")`, you'll see the response appear in real-time as it's being generated. The `print(response)` above also shows the final collected result after the response is complete. See [Callback Handlers](https://strandsagents.com/latest/documentation/docs/user-guide/concepts/streaming/callback-handlers/?h=callback) in the Strands documentation for more details.
</Note>

## Amazon Bedrock configuration

You can also use Writer models through Amazon Bedrock, which provides a managed service for accessing foundation models.

### Prerequisites

Before you configure the Amazon Bedrock client for Strands Agent SDK, follow the [Bedrock integration guide](/home/integrations/bedrock) to set up AWS credentials, enable Writer models in your region, and set up the required IAM permissions.

### Installation

Install the base Strands Agents package:

```bash  theme={null}
pip install strands-agents
```

Bedrock is the default model provider in Strands Agents, so no additional model provider installation is required. The `BedrockModel` class is available by default.

<Note>
  To follow along with the examples in this guide, you'll also need the [Strands Agent Tools package](https://github.com/strands-agents/tools). Install the package with `pip install strands-agent-tools`.
  To follow along with the examples in this guide, you'll also need the [Strands Agent Tools package](https://github.com/strands-agents/tools). Install the package with `pip install strands-agents-tools`.
</Note>

### Client configuration

The following client configuration uses the `us.writer.palmyra-x5-v1:0` model ID, which is the ID for the [cross-region inference profile for Palmyra X5](https://docs.aws.amazon.com/bedrock/latest/userguide/inference-profiles-support.html). Check which AWS Regions support Writer models before selecting an inference profile.

```python  theme={null}
# Configure Bedrock model with Writer model ID
model = BedrockModel(
    model_id="us.writer.palmyra-x5-v1:0",
    region_name="us-west-2",  # Your preferred AWS region
    # Additional client configuration options
)
```

### Usage

After configuring the Bedrock model, you can use it with Strands Agents:

```python  theme={null}
from strands import Agent
from strands.models.bedrock import BedrockModel
from strands_tools import calculator

# Configure Bedrock model with Writer model ID
model = BedrockModel(
    model_id="us.writer.palmyra-x5-v1:0",
    region_name="us-west-2"
)

agent = Agent(model=model, tools=[calculator])
response = agent("What is 2+2")
print(response)
```

## Model configuration

The `WriterModel` accepts configuration parameters as keyword arguments to the model constructor:

| Parameter        | Type                              | Description                                                                                                                                                                                             | Default                                                              | Options                                                                     |
| ---------------- | --------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------- | --------------------------------------------------------------------------- |
| `model_id`       | `str`                             | Model name to use (`palmyra-x5`, `palmyra-x4`, etc.)                                                                                                                                                    | Required                                                             | [reference](/home/models)                                                   |
| `max_tokens`     | `Optional[int]`                   | Maximum number of tokens to generate                                                                                                                                                                    | See the Context Window for [each available model](#available-models) | [reference](/api-reference/completion-api/chat-completion#body-max-tokens)  |
| `stop`           | `Optional[Union[str, List[str]]]` | A token or sequence of tokens that, when generated, causes the model to stop producing further content. This can be a single token or an array of tokens, acting as a signal to end the output.         | `None`                                                               | [reference](/api-reference/completion-api/chat-completion#body-stop)        |
| `stream_options` | `Dict[str, Any]`                  | Additional options for streaming. Specify `include_usage` to include usage information in the response, in the `accumulated_usage` field. If you don't specify this, `accumulated_usage`for each value. | `None`                                                               | [reference](/api-reference/completion-api/chat-completion#body-stream)      |
| `temperature`    | `Optional[float]`                 | What sampling temperature to use (0.0 to 2.0). A higher temperature produces more random output.                                                                                                        | `1`                                                                  | [reference](/api-reference/completion-api/chat-completion#body-temperature) |
| `top_p`          | `Optional[float]`                 | Threshold for "nucleus sampling"                                                                                                                                                                        | `None`                                                               | [reference](/api-reference/completion-api/chat-completion#body-top_p)       |

## Examples

### Writer API integration

#### Enterprise workflow automation

```python  theme={null}
from strands import Agent
from strands.models.writer import WriterModel
from my_tools import web_search, email_sender  # Custom tools from your local module

model = WriterModel(
    client_args={"api_key": "<WRITER_API_KEY>"},
    model_id="palmyra-x5",
)

agent = Agent(
    model=model,
    tools=[web_search, email_sender],
    system_prompt="You are an enterprise assistant that helps automate business workflows."
)

response = agent("Research our competitor's latest product launch and draft a summary email for the leadership team")
```

<Note>
  The `web_search` and `email_sender` tools in this example are custom tools that you would need to define. See [Python Tools](https://strandsagents.com/latest/documentation/docs/user-guide/concepts/tools/python-tools/?h=python+tools) for guidance on creating custom tools, or use existing tools from the [`strands_tools` package](https://strandsagents.com/latest/documentation/docs/user-guide/concepts/tools/example-tools-package/).
</Note>

#### Financial analysis with Palmyra Fin

```python  theme={null}
from strands import Agent
from strands.models.writer import WriterModel

# Use specialized finance model for financial analysis
model = WriterModel(
    client_args={"api_key": "<WRITER_API_KEY>"},
    model_id="palmyra-fin"
)

agent = Agent(
    model=model,
    system_prompt="You are a financial analyst assistant. Provide accurate, data-driven analysis."
)

# Replace the placeholder with your actual financial report content
actual_report = """
[Your quarterly earnings report content would go here - this could include:
- Revenue figures
- Profit margins
- Growth metrics
- Risk factors
- Market analysis
- Any other financial data you want analyzed]
"""

response = agent(f"Analyze the key financial risks in this quarterly earnings report: {actual_report}")
```

#### Long-context document processing

```python  theme={null}
from strands import Agent
from strands.models.writer import WriterModel

# Use Palmyra X5 for processing very long documents
model = WriterModel(
    client_args={"api_key": "<WRITER_API_KEY>"},
    model_id="palmyra-x5",
    temperature=0.2
)

agent = Agent(
    model=model,
    system_prompt="You are a document analysis assistant that can process and summarize lengthy documents."
)

# Can handle documents up to 1M tokens
# Replace the placeholder with your actual document content
actual_transcripts = """
[Meeting transcript content would go here - this could be thousands of lines of text
from meeting recordings, documents, or other long-form content that you want to analyze]
"""

response = agent(f"Summarize the key decisions and action items from these meeting transcripts: {actual_transcripts}")
```

#### Vision and image analysis

Palmyra X5 supports vision capabilities, allowing you to analyze images and extract information from visual content.

```python  theme={null}
from strands import Agent
from strands.models.writer import WriterModel

# Use Palmyra X5 for vision tasks
model = WriterModel(
    client_args={"api_key": "<WRITER_API_KEY>"},
    model_id="palmyra-x5"
)

agent = Agent(
    model=model,
    system_prompt="You are a visual analysis assistant. Provide detailed, accurate descriptions of images and extract relevant information."
)

# Read the image file
with open("path/to/image.png", "rb") as image_file:
    image_data = image_file.read()

messages = [
    {
        "role": "user",
        "content": [
            {
                "image": {
                    "format": "png",
                    "source": {
                        "bytes": image_data
                    }
                }
            },
            {
                "text": "Analyze this image and describe what you see. What are the key elements, colors, and any text or objects visible?"
            }
        ]
    }
]

# Create an agent with the image message
vision_agent = Agent(model=model, messages=messages)

# Analyze the image
response = vision_agent("What are the main features of this image and what might it be used for?")

print(response)
```

### Bedrock integration

#### Structured output generation

Palmyra X5 and X4 support structured output generation using [Pydantic models](https://docs.pydantic.dev/latest/) through Bedrock. This is useful for ensuring consistent, validated responses.

<Note>
  Structured output disables streaming and returns the complete response at once, unlike regular chat completions, which stream by default. See [Callback Handlers](https://strandsagents.com/latest/documentation/docs/user-guide/concepts/streaming/callback-handlers/?h=callback) for more details.
</Note>

```python  theme={null}
import os
from boto3 import session
from dotenv import load_dotenv
from pydantic import BaseModel
from typing import List
from strands import Agent
from strands.models import BedrockModel

load_dotenv()

# Define a structured schema for marketing campaign
class MarketingCampaign(BaseModel):
    campaign_name: str
    target_audience: str
    key_messages: List[str]
    channels: List[str]
    budget_allocation: str
    success_metrics: List[str]
    timeline: str
    call_to_action: str

# Use Writer Palmyra X5 through Bedrock
bedrock_model = BedrockModel(
    model_id='us.writer.palmyra-x5-v1:0',
    boto_session=session.Session(
        aws_access_key_id=os.getenv("AWS_ACCESS_KEY_ID", ""),
        aws_secret_access_key=os.getenv("AWS_SECRET_ACCESS_KEY", ""),
        aws_session_token=os.getenv("AWS_SESSION_TOKEN", ""),
        region_name="us-west-2",
    ),
    streaming=False,
)

agent = Agent(
    model=bedrock_model,
    system_prompt="You are a marketing strategist. Create comprehensive marketing campaigns with structured data for enterprise clients."
)

# Generate structured marketing campaign
response = agent.structured_output(
    output_model=MarketingCampaign,
    prompt="Create a B2B marketing campaign for a cloud infrastructure platform targeting enterprise IT decision-makers and CTOs."
)

print(f"Campaign: {response.campaign_name}\nTarget Audience: {response.target_audience}\nKey Messages: {response.key_messages}\nChannels: {response.channels}\nBudget: {response.budget_allocation}\nMetrics: {response.success_metrics}\nTimeline: {response.timeline}\nCall to Action: {response.call_to_action}")
```

#### Memory agent

This example demonstrates how to use Writer models through Bedrock with memory capabilities. The `mem0_memory` tool from `strands_tools` provides persistent, long-term memory that stores information using [Mem0's memory architecture](https://strandsagents.com/latest/documentation/docs/examples/python/memory_agent/), allowing the agent to remember user preferences, facts, and context across multiple sessions. The memory system uses semantic search to retrieve relevant information and can store, list, and retrieve memories based on user queries.

```python  theme={null}
import os
import logging

from boto3 import session
from dotenv import load_dotenv

from strands import Agent
from strands.models import BedrockModel
from strands_tools import mem0_memory, use_llm

logger = logging.getLogger(__name__)

# Load environment variables
load_dotenv()

USER_ID = "mem0_user"

# System prompt for the memory agent
MEMORY_SYSTEM_PROMPT = f"""You are a personal assistant that maintains context by remembering user details.

Capabilities:
- Store new information using mem0_memory tool (action="store")
- Retrieve relevant memories (action="retrieve")
- List all memories (action="list")
- Provide personalized responses

Key Rules:
- Always include user_id={USER_ID} in tool calls
- Be conversational and natural in responses
- Format output clearly
- Acknowledge stored information
- Only share relevant information
- Politely indicate when information is unavailable
"""

# Use Writer Palmyra X5 through Bedrock
bedrock_model = BedrockModel(
    model_id='us.writer.palmyra-x5-v1:0',
    boto_session=session.Session(
        aws_access_key_id=os.getenv("AWS_ACCESS_KEY_ID", ""),
        aws_secret_access_key=os.getenv("AWS_SECRET_ACCESS_KEY", ""),
        aws_session_token=os.getenv("AWS_SESSION_TOKEN", ""),
        region_name="us-west-2",
    ),
    streaming=False,
)

# Create an agent with memory capabilities
memory_agent = Agent(
    model=bedrock_model,
    system_prompt=MEMORY_SYSTEM_PROMPT,
    tools=[mem0_memory, use_llm],
)

def initialize_demo_memories():
    """Initialize some demo memories to showcase functionality."""
    content = """My name is Alex. I like to travel and stay in Airbnbs rather than hotels. I am planning a trip to Japan next spring. I enjoy hiking and outdoor photography as hobbies. I have a dog named Max. My favorite cuisine is Italian food."""
    memory_agent.tool.mem0_memory(action="store", content=content, user_id=USER_ID)

# Example usage
if __name__ == "__main__":
    print("\n🧠 Memory Agent 🧠\n")
    
    # Initialize demo memories
    initialize_demo_memories()
    print("Demo memories initialized!")
    
    # Example interactions
    print("\nExample: What do you know about me?")
    response = memory_agent("What do you know about me?")
    print(f"Response: {response}")
    
    print("\nExample: Remember that I prefer window seats on flights")
    response = memory_agent("Remember that I prefer window seats on flights")
    print(f"Response: {response}")
    
    print("\nExample: What are my travel preferences?")
    response = memory_agent("What are my travel preferences?")
    print(f"Response: {response}")
```

## Additional resources

See more information and examples below:

* [Additional code examples for Strands Agents](https://github.com/writer/aws-examples/tree/main/strands-examples)
* [Strands Agents GitHub repository](https://github.com/strands-agents/sdk-python)
* [Writer models](/home/models)


# Writer Developer Portal
Source: https://dev.writer.com/home/introduction

The fastest way to build AI agents

export const capabilities_2 = " Text input & "

export const contextWindow_2 = "32k"

export const inputPrice_2 = "5.00"

export const outputPrice_2 = "12.00"

export const capabilities_1 = " Text input & "

export const contextWindow_1 = "128k"

export const inputPrice_1 = "5.00"

export const outputPrice_1 = "12.00"

export const capabilities_0 = " Text input & "

export const contextWindow_0 = "1m"

export const inputPrice_0 = "0.60"

export const outputPrice_0 = "6.00"

<CardGroup cols={3}>
  <Card
    title="No-code agents"
    icon={
    <img
      src="https://img.writer.com/app-images/No-code.svg"
      alt="No-code"
      class="large-icon"
    />
  }
  >
    Automate repetitive tasks, generate content, or answer questions about company data.

    <br />

    [Build with No-code](/no-code/introduction) →
  </Card>

  <Card
    title="Agent Builder"
    icon={
    <img
      src="https://img.writer.com/app-images/Writer-framework.svg"
      alt="Agent Builder"
      class="large-icon"
    />
  }
  >
    Build feature-rich agents with a visual editor and optional coding.

    <br />

    [Build with Agent Builder](/agent-builder/quickstart) →
  </Card>

  <Card
    title="API and SDKs"
    icon={
    <img
      src="https://img.writer.com/app-images/Writer-API.svg"
      alt="Writer API"
      class="large-icon"
    />
  }
  >
    Integrate Writer generative AI technology into apps or services within your own stack.

    <br />

    [Build with API and SDKs](/home/quickstart) →
  </Card>
</CardGroup>

Each option offers different levels of coding and customization, so you can choose what fits your project best.

→ Explore the [development options guide](/home/development_options) to learn more.

## Explore our models

Whatever option you choose, you get access to Writer Palmyra models, offering a range of capabilities for content generation, editing, and automation.

<CardGroup cols={3}>
  <Card title="Palmyra X5" icon="square-1" color="currentColor">
    Our latest and most advanced model with a 1m token context window

    <br />

    <ul class="no-bullet">
      <li>
        <Icon icon="star" iconType="regular" color="currentColor" /> {capabilities_0} output
      </li>

      <li>
        <Icon icon="ruler-vertical" iconType="regular" color="currentColor" /> {contextWindow_0} context
        window
      </li>

      <li>
        <Icon icon="circle-dollar" iconType="regular" color="currentColor" />  **Input**: \${inputPrice_0} →
        **Output**: \${outputPrice_0}
      </li>
    </ul>
  </Card>

  <Card title="Palmyra Fin" icon="square-2" color="currentColor">
    Our finance domain specialized model; first model to pass the CFA exam

    <br />

    <ul class="no-bullet">
      <li>
        <Icon icon="star" iconType="regular" color="currentColor" /> {capabilities_1} output
      </li>

      <li>
        <Icon icon="ruler-vertical" iconType="regular" color="currentColor" /> {contextWindow_1} context
        window
      </li>

      <li>
        <Icon icon="circle-dollar" iconType="regular" color="currentColor" />  **Input**: \${inputPrice_1} →
        **Output**: \${outputPrice_1}
      </li>
    </ul>
  </Card>

  <Card title="Palmyra Med" icon="square-3" color="currentColor">
    Our most sophisticated model for delivering accurate medical analysis

    <br />

    <ul class="no-bullet">
      <li>
        <Icon icon="star" iconType="regular" color="currentColor" /> {capabilities_2} output
      </li>

      <li>
        <Icon icon="ruler-vertical" iconType="regular" color="currentColor" /> {contextWindow_2} context
        window
      </li>

      <li>
        <Icon icon="circle-dollar" iconType="regular" color="currentColor" />  **Input**: \${inputPrice_2} →
        **Output**: \${outputPrice_2}
      </li>
    </ul>
  </Card>
</CardGroup>

→ Explore all of our [models](/home/models).

## Where to go for help

<CardGroup cols={2}>
  <Card title="Help center" icon="headset" href="https://support.writer.com/">
    Need help with billing, account management, or enterprise support? Visit our help center.
  </Card>

  <Card title="Developer feedback" icon="envelope" href="mailto:dev-feedback@writer.com">
    Stuck on something? Have feedback on the docs? Send us an email.
  </Card>
</CardGroup>


# Use a Knowledge Graph in a chat
Source: https://dev.writer.com/home/kg-chat

Query Knowledge Graphs during chat completions with tool calling. Reference multiple graphs and configure query parameters for accurate responses.

This guide demonstrates how to send questions to a [Knowledge Graph](/home/knowledge-graph) during a [chat completion](/home/chat-completion). Knowledge Graph chat is a predefined tool you can use to reference a Knowledge Graph when users chat with a Palmyra LLM.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Tool structure

Knowledge Graph chat is a predefined tool supported by Palmyra X4 and later models, to be used with tool calling in the [chat endpoint](/api-reference/completion-api/chat-completion). To use Knowledge Graph chat, add the following object to the `tools` array when calling the chat endpoint:

| Parameter               | Type    | Description                                                                                                                                                                                                                     |
| ----------------------- | ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `type`                  | string  | The type of tool. Must be `graph` for Knowledge Graph chat.                                                                                                                                                                     |
| `function`              | object  | An object containing the `graph_ids`, `description`, `subqueries`, and `query_config` parameters                                                                                                                                |
| `function.graph_ids`    | array   | An array of strings containing the graph IDs you wish to reference                                                                                                                                                              |
| `function.description`  | string  | A description of the graphs you are referencing. This helps the model understand when to use the Knowledge Graph tool in the chat. If there are multiple graphs, include a description for each, referencing the graph by name. |
| `function.subqueries`   | Boolean | A Boolean indicating whether to include the subqueries used by Palmyra in the response.                                                                                                                                         |
| `function.query_config` | object  | Configuration options for Knowledge Graph queries. See the [Query configuration parameters](#query-configuration-parameters) below.                                                                                             |

### Query configuration parameters

| Parameter            | Type    | Range              | Default | Description                                                                                                                                                                                                                                                                                                                                                                      |
| -------------------- | ------- | ------------------ | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `max_subquestions`   | integer | 1-10               | 6       | Maximum number of sub-questions to generate when processing complex queries.                                                                                                                                                                                                                                                                                                     |
| `search_weight`      | integer | 0-100              | 50      | Controls the balance between keyword and semantic search in ranking results.                                                                                                                                                                                                                                                                                                     |
| `grounding_level`    | number  | 0.0-1.0            | 0.0     | Controls how closely responses must match to source material.                                                                                                                                                                                                                                                                                                                    |
| `max_snippets`       | integer | 5-25 (recommended) | 30      | Maximum number of text snippets to retrieve from the Knowledge Graph for context. Works in concert with `search_weight` to control best matches vs broader coverage. **Note**: While technically supports 1-60, values below 5 may return no results due to RAG implementation. Recommended range is 5-25. Due to RAG system behavior, you may see more snippets than requested. |
| `max_tokens`         | integer | 100-8000           | 4000    | Maximum number of tokens the model can generate in the response.                                                                                                                                                                                                                                                                                                                 |
| `keyword_threshold`  | number  | 0.0-1.0            | 0.7     | Threshold for keyword-based matching when searching Knowledge Graph content.                                                                                                                                                                                                                                                                                                     |
| `semantic_threshold` | number  | 0.0-1.0            | 0.7     | Threshold for semantic similarity matching when searching Knowledge Graph content. Set higher for stricter relevance, lower for broader range.                                                                                                                                                                                                                                   |
| `inline_citations`   | Boolean | true/false         | false   | Whether to include inline citations within the response text.                                                                                                                                                                                                                                                                                                                    |

For detailed explanations and usage examples, see the [Knowledge Graph query configuration guide](/home/knowledge-graph-query-config).

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "model": "palmyra-x5",
          "messages": [
              {
                  "role": "user",
                  "content": "Which of our products contain both food coloring and chocolate?"
              }
          ],
          "tool_choice": "auto",
          "tools": [
              {
                  "type": "graph",
                  "function": {
                      "description": "Knowledge Graph containing information about Acme Inc. food products",
                      "graph_ids": [
                          "<GRAPH_ID>"
                      ],
                      "subqueries": true
                  }
              }
          ],
          "stream": true
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  tools = [{
      "type": "graph",
      "function": {
          "description": "Description of the graph(s)",
          "graph_ids": [
              "<GRAPH_ID>"
          ],
          "subqueries": True
      }
  }]

  messages = [{"role": "user", "content": "Which of our products contain both food coloring and chocolate?"}]

  response = client.chat.chat(
      model="palmyra-x5", 
      messages=messages, 
      tools=tools,  # The tools array defined earlier.
      tool_choice="auto",
      stream=True
  )

  for chunk in response:
      if chunk.choices[0].delta.content is not None:
          print(chunk.choices[0].delta.content, end="", flush=True)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const tools = [{
      type: "graph",
      function: {
          description: "Description of the graph(s)",
          graph_ids: [
              "<GRAPH_ID>"
          ],
          subqueries: true
      }
  }]

  let messages = [{role: "user", content: "Which of our products contain both food coloring and chocolate?"}]

  const response = await client.chat.chat({
      model: "palmyra-x5",
      messages: messages,
      tools: tools, // The tools array defined earlier.
      tool_choice: "auto",
      stream: true
  });

  for await (const chunk of response) {
      if (chunk.choices[0].delta.content) {
          process.stdout.write(chunk.choices[0].delta.content);
      }
  }
  ```
</CodeGroup>

<Note>
  You can only pass one prebuilt tool in the `tools` array at a time. However, you can pass multiple [custom tools](/home/tool-calling) in the same request.

  Prebuilt tools are:

  * Knowledge Graph tool
  * [LLM tool](/home/model-delegation)
  * [Translation tool](/home/translation-tool)
  * [Vision tool](/home/vision-tool)
</Note>

### Response format

When a chat completion uses the Knowledge Graph tool, the response from the Knowledge Graph tool is in the `graph_data` object. That object contains the following fields:

| Parameter            | Type   | Description                                                                                                |
| -------------------- | ------ | ---------------------------------------------------------------------------------------------------------- |
| `sources`            | array  | An array of objects containing the source file IDs and snippets that helped the model answer the question. |
| `sources.file_id`    | string | The ID of the source file.                                                                                 |
| `sources.snippet`    | string | A snippet from the source file that helped the model answer the question.                                  |
| `status`             | string | The status of the query.                                                                                   |
| `subqueries`         | array  | An array of objects containing the subqueries used by Palmyra in the response.                             |
| `subqueries.query`   | string | The query used by Palmyra to answer the question.                                                          |
| `subqueries.answer`  | string | The answer to the question.                                                                                |
| `subqueries.sources` | array  | An array of objects containing the source file IDs and snippets that helped the model answer the question. |

The full response has the following structure.

The subqueries and sources shown are abbreviated for readability. If the `subqueries` parameter is `false`, or if the model doesn't need subqueries to answer the question, this array is be empty.

<CodeGroup>
  ```json streaming response [expandable] {12} theme={null}
  {
      "id": "1234",
      "object": "chat.completion.chunk",
      "choices": [
          {
              "index": 0,
              "finish_reason": "stop",
              "delta": {
                  "content": "None of our products contain both chocolate and food coloring. The products containing chocolate are different from those containing food coloring.",
                  "role": "assistant",
                  "tool_calls": null,
                  "graph_data": {
                      "sources": [
                          {
                              "file_id": "1234",
                              "snippet": "with cocoa for an extra touch of chocolate…"
                          },
                          {
                              "file_id": "5678",
                              "snippet": "Sugar, corn syrup, artificial flavors, food coloring…"
                          }
                      ],
                      "status": "finished",
                      "subqueries": [
                          {
                              "query": "Which of our products contain food coloring?",
                              "answer": "The products that contain food coloring are...",
                              "sources": [
                                  {
                                      "file_id": "1234",
                                      "snippet": "Sugar, citric acid, artificial flavors…"
                                  },
                                  {
                                      "file_id": "5678",
                                      "snippet": "Coffee, coconut milk, ice"
                                  }
                              ]
                          },
                          {
                              "query": "Which of our products contain chocolate?",
                              "answer": "Several products contain chocolate. These include…",
                              "sources": [
                                  {
                                      "file_id": "1234",
                                      "snippet": "with cocoa for an extra touch of chocolate…"
                                  }
                              ]
                          }
                      ]
                  }
              },
          }
      ]
      // Other fields omitted for brevity    
  }
  ```

  ```json non-streaming response [expandable] {12} theme={null}
  {
      "id": "1234",
      "object": "chat.completion",
      "choices": [
          {
              "index": 0,
              "finish_reason": "stop",
              "message": {
                  "content": "None of our products contain both chocolate and food coloring. The products containing chocolate are different from those containing food coloring.",
                  "role": "assistant",
                  "tool_calls": null,
                  "graph_data": {
                      "sources": [
                          {
                              "file_id": "1234",
                              "snippet": "with cocoa for an extra touch of chocolate…"
                          },
                          {
                              "file_id": "5678",
                              "snippet": "Sugar, corn syrup, artificial flavors, food coloring…"
                          }
                      ],
                      "status": "finished",
                      "subqueries": [
                          {
                              "query": "Which of our products contain food coloring?",
                              "answer": "The products that contain food coloring are...",
                              "sources": [
                                  {
                                      "file_id": "1234",
                                      "snippet": "Sugar, citric acid, artificial flavors…"
                                  },
                                  {
                                      "file_id": "5678",
                                      "snippet": "Coffee, coconut milk, ice"
                                  }
                              ]
                          },
                          {
                              "query": "Which of our products contain chocolate?",
                              "answer": "Several products contain chocolate. These include…",
                              "sources": [
                                  {
                                      "file_id": "1234",
                                      "snippet": "with cocoa for an extra touch of chocolate…"
                                  }
                              ]
                          }
                      ]
                  }
              },
          }
      ]
      // Other fields omitted for brevity    
  }
  ```
</CodeGroup>

## Usage example

The following example uses a hypothetical product information Knowledge Graph to answer a question about which food products contain both food coloring and chocolate.

### Create the tools array

First, define the `tools` array with the `type` set to `graph`. The `function` object contains the `graph_ids`, `description`, and `subqueries` parameters.

In this example, the subqueries are included in the response. Subqueries can be useful for debugging or for providing additional context to the user about how the model arrived at the answer.

<CodeGroup>
  ```bash cURL theme={null}
  "tools": [
      {
          "type": "graph",
          "function": {
              "description": "Knowledge Graph containing information about Acme Inc. food products",
              "graph_ids": [
                  "<GRAPH_ID>"
              ],
              "subqueries": true
          }
      }
  ]
  ```

  ```python Python theme={null}
  tools = [{
      "type": "graph",
      "function": {
          "description": "Knowledge Graph containing information about Acme Inc. food products",
          "graph_ids": [
              "<GRAPH_ID>"
          ],
          "subqueries": True
      }
  }]
  ```

  ```javascript JavaScript theme={null}
  const tools = [{
      type: "graph",
      function: {
          description: "Knowledge Graph containing information about Acme Inc. food products",
          graph_ids: [
              "<GRAPH_ID>"
          ],
          subqueries: true
      }
  }]
  ```
</CodeGroup>

### Send the request

Add the tools array to the chat endpoint call along with your array of messages. Setting `tool_choice` to `auto` allows the model to choose when to use the Knowledge Graph tool, based on the user's question and the description of the tool.

This example streams the response in real-time as the model generates it.

If you are unfamiliar with the chat completions endpoint or streaming vs. non-streaming responses, learn more in the [chat completion guide](/home/chat-completion).

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "model": "palmyra-x5",
          "messages": [
              {
                  "role": "user",
                  "content": "Which of our products contain both food coloring and chocolate?"
              }
          ],
          "tool_choice": "auto",
          "tools": [
              {
                  "type": "graph",
                  "function": {
                      "description": "Knowledge Graph containing information about Acme Inc. food products",
                      "graph_ids": [
                          "<GRAPH_ID>"
                      ],
                      "subqueries": true
                  }
              }
          ],
          "stream": true
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  tools = [{
      "type": "graph",
      "function": {
          "description": "Knowledge Graph containing information about Acme Inc. food products",
          "graph_ids": [
              "<GRAPH_ID>"
          ],
          "subqueries": True
      }
  }]

  messages = [{"role": "user", "content": "Which of our products contain both food coloring and chocolate?"}]

  response = client.chat.chat(
      model="palmyra-x5", 
      messages=messages, 
      tools=tools,  # The tools array defined earlier.
      tool_choice="auto",
      stream=True
  )

  for chunk in response:
      if chunk.choices[0].delta.content is not None:
          print(chunk.choices[0].delta.content, end="", flush=True)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const tools = [{
      type: "graph",
      function: {
          description: "Knowledge Graph containing information about Acme Inc. food products",
          graph_ids: [
              "<GRAPH_ID>"
          ],
          subqueries: true
      }
  }]

  let messages = [{role: "user", content: "Which of our products contain both food coloring and chocolate?"}]

  const response = await client.chat.chat({
      model: "palmyra-x5", 
      messages: messages, 
      tools: tools, // The tools array defined earlier.
      tool_choice: "auto",
      stream: true 
  });

  for await (const chunk of response) {
      if (chunk.choices[0].delta.content) {
          process.stdout.write(chunk.choices[0].delta.content);
      }
  }
  ```
</CodeGroup>

### Display Knowledge Graph subqueries and sources

You may want to display the `sources` or `subqueries` in your UI to assist your user in understanding how the model derived the answer to the question. The following example shows how to display the subqueries as well as the status of the query from the Knowledge Graph.

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client.
  client = Writer()

  tools = [{
      "type": "graph",
      "function": {
          "description": "Knowledge Graph containing information about Acme Inc. food products",
          "graph_ids": [
              "<GRAPH_ID>"
          ],
          "subqueries": True
      }
  }]

  messages = [{"role": "user", "content": "Which of our products contain both food coloring and chocolate?"}]

  response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      tools=tools,
      tool_choice="auto",
      stream=True
  )

  for chunk in response:
      if chunk.choices[0].delta.content is not None:
          print(chunk.choices[0].delta.content, end="", flush=True)

      if chunk.choices[0].delta.graph_data is not None:
          if chunk.choices[0].delta.graph_data.status is not None:
              print(f"Query status: {chunk.choices[0].delta.graph_data.status}")
          if chunk.choices[0].delta.graph_data.subqueries:
              print(f"Subquery: {chunk.choices[0].delta.graph_data.subqueries[0].query}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the client.
  const client = new Writer();

  const tools = [{
      type: "graph",
      function: {
          description: "Knowledge Graph containing information about Acme Inc. food products",
          graph_ids: [
              "<GRAPH_ID>"
          ],
          subqueries: true
      }
  }]

  let messages = [{role: "user", content: "Which of our products contain both food coloring and chocolate?"}]

  const response = await client.chat.chat({
      model: "palmyra-x5", 
      messages: messages, 
      tools: tools, // The tools array defined earlier.
      tool_choice: "auto",
      stream: true 
  });

  for await (const chunk of response) {
      if (chunk.choices[0].delta.content) {
          console.log(chunk.choices[0].delta.content);
      }

      if (chunk.choices[0].delta.graph_data) {
          if (chunk.choices[0].delta.graph_data.status) {
              console.log(`Query status: ${chunk.choices[0].delta.graph_data.status}`);
          }
          if (chunk.choices[0].delta.graph_data.subqueries && 
              chunk.choices[0].delta.graph_data.subqueries.length > 0 &&
              chunk.choices[0].delta.graph_data.subqueries[0].query) {
              console.log(`Subquery: ${chunk.choices[0].delta.graph_data.subqueries[0].query}`);
          }
      }
  }
  ```
</CodeGroup>

### Customize query behavior

You can fine-tune how your Knowledge Graph searches and retrieves content using the `query_config` parameter. Learn about all available configuration options in the [Knowledge Graph query configuration guide](/home/knowledge-graph-query-config).

## Next steps

By following this guide, you can reference Knowledge Graphs in your users' chats in your application.

Next, learn about other prebuilt tools you can use in your chat applications:

* [Analyze images](/home/vision-tool)
* [Pass questions to a domain-specific LLM](/home/model-delegation)
* [Translate text](/home/translation-tool)


# Ask questions to Knowledge Graphs
Source: https://dev.writer.com/home/kg-query



The Knowledge Graph [question endpoint](/api-reference/kg-api/question) allows you to ask questions directly to one or more Knowledge Graphs. This provides a direct way to query your Knowledge Graphs without needing to use chat completions. You can also enable subqueries to break down complex questions into smaller subqueries and provide answers for each one.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Question endpoint

**Endpoint:** `POST /v1/graphs/question`

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST https://api.writer.com/v1/graphs/question \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header "Content-Type: application/json" \
    --data-raw '{
      "graph_ids": ["<GRAPH_ID>"],
      "question": "<QUESTION>"
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.graphs.question(
    graph_ids=["<GRAPH_ID>"],
    question="<QUESTION>"
  )

  print(f"Answer: {response.answer}")
  print(f"Sources: {response.sources}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.graphs.question({
    graph_ids: ["<GRAPH_ID>"],
    question: "<QUESTION>"
  });

  console.log(`Answer: ${response.answer}`);
  console.log(`Sources: ${response.sources}`);
  ```
</CodeGroup>

### Request body

<Tip>
  To find the ID of your Knowledge Graph, you can:

  * Call the [Knowledge Graph list endpoint](/api-reference/kg-api/list-graphs) to get the list of all your Knowledge Graphs with their IDs
  * Find the ID in the URL of the Knowledge Graph page in [AI Studio](https://app.writer.com/aistudio)
</Tip>

The request body is a JSON object with the following fields:

| Parameter      | Type           | Required | Description                                                                                                                                                                                                                            |
| -------------- | -------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `graph_ids`    | array\[string] | Yes      | The unique identifiers of the Knowledge Graphs to query. You can specify multiple Knowledge Graph IDs to search across multiple graphs.                                                                                                |
| `question`     | string         | Yes      | The question to answer using the Knowledge Graph.                                                                                                                                                                                      |
| `subqueries`   | Boolean        | No       | Specify whether to include subqueries. Defaults to `false`.                                                                                                                                                                            |
| `stream`       | Boolean        | No       | Determines whether to stream the response. If `true`, the output is sent as it is generated, which can be useful for real-time applications. Defaults to `false`. See how to [handle streaming responses](#stream-the-response) below. |
| `query_config` | object         | No       | Configuration options for Knowledge Graph queries. See [Query configuration parameters](#query-configuration-parameters) below for detailed parameter descriptions.                                                                    |

### Query configuration parameters

| Parameter            | Type    | Range              | Default | Description                                                                                                                                                                                                                                                                                                                                                                      |
| -------------------- | ------- | ------------------ | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `max_subquestions`   | integer | 1-10               | 6       | Maximum number of sub-questions to generate when processing complex queries.                                                                                                                                                                                                                                                                                                     |
| `search_weight`      | integer | 0-100              | 50      | Controls the balance between keyword and semantic search in ranking results.                                                                                                                                                                                                                                                                                                     |
| `grounding_level`    | number  | 0.0-1.0            | 0.0     | Controls how closely responses must match to source material. Set lower for grounded outputs, higher for creativity.                                                                                                                                                                                                                                                             |
| `max_snippets`       | integer | 5-25 (recommended) | 30      | Maximum number of text snippets to retrieve from the Knowledge Graph for context. Works in concert with `search_weight` to control best matches vs broader coverage. **Note**: While technically supports 1-60, values below 5 may return no results due to RAG implementation. Recommended range is 5-25. Due to RAG system behavior, you may see more snippets than requested. |
| `max_tokens`         | integer | 100-8000           | 4000    | Maximum number of tokens the model can generate in the response.                                                                                                                                                                                                                                                                                                                 |
| `keyword_threshold`  | number  | 0.0-1.0            | 0.7     | Threshold for keyword-based matching when searching Knowledge Graph content.                                                                                                                                                                                                                                                                                                     |
| `semantic_threshold` | number  | 0.0-1.0            | 0.7     | Threshold for semantic similarity matching when searching Knowledge Graph content. Set higher for stricter relevance, lower for broader range.                                                                                                                                                                                                                                   |
| `inline_citations`   | Boolean | true/false         | false   | Whether to include inline citations within the response text.                                                                                                                                                                                                                                                                                                                    |

For detailed explanations and usage examples, see the [Knowledge Graph query configuration guide](/home/knowledge-graph-query-config).

### Response format

The response is a JSON object with the following fields:

| Parameter              | Type   | Description                                                                                                 |
| ---------------------- | ------ | ----------------------------------------------------------------------------------------------------------- |
| `question`             | string | The question you asked.                                                                                     |
| `answer`               | string | The answer to the question based on the Knowledge Graph content.                                            |
| `sources`              | array  | An array of source objects that contain the file information and text snippets used to generate the answer. |
| `sources[].file_id`    | string | If the source is a file, this is the unique identifier of the file that contains the source information.    |
| `sources[].snippet`    | string | If the source is a file, this is a snippet of text from the source file used to answer the question.        |
| `subqueries`           | array  | An array of subquery objects. Only included if `subqueries` is `true`.                                      |
| `subqueries[].query`   | string | The subquery the model generated to answer the question.                                                    |
| `subqueries[].answer`  | string | The answer to the subquery.                                                                                 |
| `subqueries[].sources` | array  | An array of source objects for the subquery.                                                                |

<Tabs>
  <Tab title="Non-streaming response">
    ```json  theme={null}
    {
      "question": "What was our company's revenue growth in Q4 2023?",
      "answer": "The company achieved 23% year-over-year revenue growth in Q4 2023, reaching $142 million in total revenue.",
      "sources": [
        {
          "file_id": "1234",
          "snippet": "In the fourth quarter of 2023, we saw strong performance with revenue reaching $142 million, representing a 23% increase compared to Q4 2022."
        }
      ]
    }
    ```
  </Tab>

  <Tab title="Streaming response">
    ```json  theme={null}
    data: {
        "question": "What was our company's revenue growth in Q4 2023?",
        "answer": "The",
        "sources": [],
        "subqueries": null,
        "references": null
    }
    ```
  </Tab>
</Tabs>

## Examples

### Query multiple knowledge graphs

You can query multiple Knowledge Graphs at once by providing multiple graph IDs in the `graph_ids` array.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST https://api.writer.com/v1/graphs/question \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header "Content-Type: application/json" \
    --data-raw '{
      "graph_ids": [
        "<GRAPH_ID_1>",
        "<GRAPH_ID_2>"
      ],
      "question": "What are the key findings from our research documents?"
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  client = Writer()

  response = client.graphs.question(
    graph_ids=[
      "<GRAPH_ID_1>",
      "<GRAPH_ID_2>"
    ],
    question="What are the key findings from our research documents?"
  )

  print(f"Answer: {response.answer}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  const client = new Writer();

  const response = await client.graphs.question({
    graph_ids: [
      "<GRAPH_ID_1>",
      "<GRAPH_ID_2>"
    ],
    question: "What are the key findings from our research documents?"
  });

  console.log(`Answer: ${response.answer}`);
  ```
</CodeGroup>

### Enable subqueries

When you enable subqueries, the model breaks down complex questions into smaller subqueries and provides answers for each one from the Knowledge Graphs.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST https://api.writer.com/v1/graphs/question \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header "Content-Type: application/json" \
    --data-raw '{
      "graph_ids": ["<GRAPH_ID>"],
      "question": "What are the main products and their market performance?",
      "subqueries": true
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  client = Writer()

  response = client.graphs.question(
    graph_ids=["<GRAPH_ID>"],
    question="What are the main products and their market performance?",
    subqueries=True
  )

  print(f"Main answer: {response.answer}")
  for subquery in response.subqueries:
      print(f"Subquery: {subquery.query}")
      print(f"Answer: {subquery.answer}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  const client = new Writer();

  const response = await client.graphs.question({
    graph_ids: ["<GRAPH_ID>"],
    question: "What are the main products and their market performance?",
    subqueries: true
  });

  console.log(`Main answer: ${response.answer}`);
  response.subqueries.forEach(subquery => {
      console.log(`Subquery: ${subquery.query}`);
      console.log(`Answer: ${subquery.answer}`);
  });
  ```
</CodeGroup>

### Stream the response

You can stream the response from the Knowledge Graphs by setting the `stream` parameter to `true`. This is useful for real-time applications that need to see the response as it is generated.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST https://api.writer.com/v1/graphs/question \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header "Content-Type: application/json" \
    --data-raw '{
      "graph_ids": ["<GRAPH_ID>"],
      "question": "<QUESTION>",
      "stream": true
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  client = Writer()

  response = client.graphs.question(
    graph_ids=["<GRAPH_ID>"],
    question="<QUESTION>",
    stream=True
  )

  for chunk in response:
      print(chunk.answer, end="", flush=True)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  const client = new Writer();

  const response = await client.graphs.question({
    graph_ids: ["<GRAPH_ID>"],
    question: "<QUESTION>",
    stream: true
  });

  for await (const chunk of response) {
      process.stdout.write(chunk.answer);
  }
  ```
</CodeGroup>

## Next steps

* Learn how to [create and manage Knowledge Graphs](/home/knowledge-graph)
* Use Knowledge Graphs in chat completions with [tool calling](/home/kg-chat)
* Explore [Knowledge Graph API reference](/api-reference/kg-api)


# Create and manage a Knowledge Graph
Source: https://dev.writer.com/home/knowledge-graph

Integrate graph-based RAG into your agents with Knowledge Graph API. Achieve higher accuracy than traditional vector-based retrieval methods.

Knowledge Graph, our graph-based retrieval-augmented generation (RAG), achieves [higher accuracy](https://arxiv.org/abs/2405.02048) than traditional RAG approaches that use vector retrieval.

This guide will help you understand and use the [Knowledge Graph API](/api-reference/kg-api) to integrate RAG capabilities into your agents.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Create a Knowledge Graph

A Knowledge Graph is a collection of files that are used to answer questions. To start working with a Knowledge Graph, create an empty Knowledge Graph that you can add files to.

**Endpoint**: `POST https://api.writer.com/v1/graphs`

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST https://api.writer.com/v1/graphs \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header "Content-Type: application/json" \
    --data-raw '{
      "name": "Financial Reports",
      "description": "Knowledge Graph of 2024 financial reports"
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  graph_create_response = client.graphs.create(
      name="Financial Reports",
      description="Knowledge Graph of 2024 financial reports"
  )
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const graphCreateResponse = await client.graphs.create({
    name: "Financial Reports",
    description: "Knowledge Graph of 2024 financial reports"
  });
  ```
</CodeGroup>

### Request body

The request body is a JSON object that contains the following fields:

| Parameter     | Type   | Description                                                                                                                                             |
| ------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`        | string | The name of the Knowledge Graph.                                                                                                                        |
| `description` | string | The description of the Knowledge Graph. The description should help the model understand the purpose of the Knowledge Graph and when it should be used. |

### Response format

The response has the following structure:

| Parameter     | Type   | Description                                        |
| ------------- | ------ | -------------------------------------------------- |
| `id`          | string | The ID of the Knowledge Graph.                     |
| `created_at`  | string | The date and time the Knowledge Graph was created. |
| `name`        | string | The name of the Knowledge Graph.                   |
| `description` | string | The description of the Knowledge Graph.            |

```json  theme={null}
{
  "id": "6029b226-1ee0-4239-a1b0-cdeebfa3ad5a",
  "created_at": "2024-06-24T12:34:56Z",
  "name": "Financial Reports",
  "description": "Knowledge Graph of 2024 financial reports"
}
```

## Add a file to a Knowledge Graph

Once you've created a Knowledge Graph, you can add files to it. The files you add to a Knowledge Graph are used to answer questions and enhance the accuracy of the responses from the LLM

You must upload the file to the Writer API before adding it to a Knowledge Graph. See [Manage files](/home/files) for more information about how to upload files.

**Endpoint**: `POST /v1/graphs/{graph_id}/file`

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST https://api.writer.com/v1/graphs/{graph_id}/file \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --header "Content-Type: application/json" \
  --data-raw '{"file_id":"1862f090-a281-48f3-8838-26c1e78b605e"}'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  graph_file = client.graphs.add_file_to_graph(
    graph_id="{graph_id}",
    file_id="1862f090-a281-48f3-8838-26c1e78b605e",
  )
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const file = await client.graphs.addFileToGraph('{graph_id}', {
    file_id: '1862f090-a281-48f3-8838-26c1e78b605e',
  });
  ```
</CodeGroup>

The response will have this structure:

```json  theme={null}
{
  "id": "1862f090-a281-48f3-8838-26c1e78b605e",
  "created_at": "2024-07-01T20:41:44.159505Z",
  "name": "test.txt",
  "graph_ids": [
    "6029b226-1ee0-4239-a1b0-cdeebfa3ad5a"
  ]
}
```

### Path parameters

| Parameter  | Description                              |
| ---------- | ---------------------------------------- |
| `graph_id` | The ID of the Knowledge Graph to update. |

### Request body

The request body is a JSON object that contains the following fields:

| Parameter | Description                                       |
| --------- | ------------------------------------------------- |
| `file_id` | The ID of the file to add to the Knowledge Graph. |

You must upload the file to the Writer API before adding it to a Knowledge Graph. See [Manage files](/home/files) for more information about how to upload files.

## Remove a file from a Knowledge Graph

**Endpoint**: `DELETE /v1/graphs/{graph_id}/file/{file_id}`

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request DELETE "https://api.writer.com/v1/graphs/{graph_id}/file/{file_id}" \
  --header "Authorization: Bearer $WRITER_API_KEY"
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  client.graphs.remove_file_from_graph(
      graph_id="{graph_id}",
      file_id="{file_id}"
  )
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const file = await client.graphs.removeFileFromGraph('{graph_id}', '{file_id}');
  ```
</CodeGroup>

### Path parameters

| Parameter  | Description                                            |
| ---------- | ------------------------------------------------------ |
| `graph_id` | The ID of the Knowledge Graph to update.               |
| `file_id`  | The ID of the file to remove from the Knowledge Graph. |

### Response format

The response has this structure:

```json  theme={null}
{
  "id": "1862f090-a281-48f3-8838-26c1e78b605e",
  "deleted": true
}
```

## Add URLs to a Knowledge Graph

You can add URLs to a Knowledge Graph to enhance the model's knowledge with content from websites. The LLM can then query and use this information when responding to questions.

This example adds a web connector URL to a Knowledge Graph. It first retrieves the Knowledge Graph to see the current URLs and then adds a new URL to the Knowledge Graph. Note that this operation replaces the entire list of URLs attached to the Knowledge Graph, which is why it is important to retrieve the existing list of URLs first.

<CodeGroup>
  ```bash cURL theme={null}
  # 1. First, retrieve the current Knowledge Graph to see existing URLs
  curl --location 'https://api.writer.com/v1/graphs/{graph_id}' \
      --header "Authorization: Bearer $WRITER_API_KEY"

  # 2. Then, send a new request with all the URLs you want to add. In this example, there were no existing URLs, so it's adding a single URL.
  curl --location --request PUT 'https://api.writer.com/v1/graphs/{graph_id}' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "urls": [
              {
                  "url": "https://example.com/documentation",
                  "type": "sub_pages",
                  "exclude_urls": [
                      "https://example.com/documentation/admin",
                      "https://example.com/documentation/private"
                  ]
              }
          ]
      }'
  ```

  ```python Python theme={null}

  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  graph_id = "GRAPH_ID"

  graph = client.graphs.retrieve(graph_id)
  urls = graph.urls

  urls.append({
      "url": "https://example.com/documentation",
      "type": "sub_pages",
      "exclude_urls": ["https://example.com/documentation/admin", "https://example.com/documentation/private"]
  })

  client.graphs.update(graph_id, urls=urls)

  print(client.graphs.retrieve(graph_id).urls)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const graph_id = "GRAPH_ID";

  const graph = await client.graphs.retrieve(graph_id);

  const urls = graph.urls;

  urls.push({
    url: 'https://example.com/documentation',
    type: 'sub_pages',
    exclude_urls: [
      'https://example.com/documentation/admin',
      'https://example.com/documentation/private'
    ]
  });

  const response = await client.graphs.update(graph_id, { urls });

  const updatedGraph = await client.graphs.retrieve(graph_id);

  console.log(updatedGraph.urls);
  ```
</CodeGroup>

See more examples in [Add URLs to a Knowledge Graph](/home/web-connector-url).

## Add a Knowledge Graph to a no-code agent

After you've created a Knowledge Graph, you can add it to a [no-code agent](/home/applications) to add RAG capabilities.

You can use this endpoint to add or remove Knowledge Graphs from a no-code agent.

**Endpoint**: `PUT /v1/applications/{application_id}/graphs`

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request PUT "https://api.writer.com/v1/applications/{application_id}/graphs" \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --header "Content-Type: application/json" \
  --data-raw '{"graph_id":"6029b226-1ee0-4239-a1b0-cdeebfa3ad5a"}'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  client.applications.graphs.update(
      application_id="{application_id}",
      graph_ids=["{graph_id}"]
  )
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  client.applications.graphs.update('{application_id}', ['{graph_id}']);
  ```
</CodeGroup>

### Path parameters

| Parameter        | Description                            |
| ---------------- | -------------------------------------- |
| `application_id` | The ID of the no-code agent to update. |

### Request body

The request body is a JSON object that contains the following fields:

| Parameter   | Type           | Description                                                          |
| ----------- | -------------- | -------------------------------------------------------------------- |
| `graph_ids` | array\[string] | The IDs of the Knowledge Graphs to associate with the no-code agent. |

This method updates the associated Knowledge Graphs to the exact list of IDs provided in the request.

To remove a single Knowledge Graph from the no-code agent, set the `graph_ids` parameter to an array containing the IDs of all the other Knowledge Graphs associated with the no-code agent, excluding the ID of the Knowledge Graph to remove. To remove all Knowledge Graphs from the no-code agent, set this parameter to an empty array.

### Response format

The response contains the new list of IDs of the Knowledge Graphs associated with the no-code agent.

```json  theme={null}
{
  "graph_ids": [
    "6029b226-1ee0-4239-a1b0-cdeebfa3ad5a"
  ]
}
```

## Next steps

* Learn how to ask your Knowledge Graph questions in a chat completion via [tool calling](/home/kg-chat)
* Query your Knowledge Graph directly using the [question endpoint](/home/kg-query)
* Fine-tune how your Knowledge Graph searches and retrieves content using the `query_config` parameter in the [Knowledge Graph query configuration guide](/home/knowledge-graph-query-config)


# Connect your data to AI with Knowledge Graph
Source: https://dev.writer.com/home/knowledge-graph-concepts

Understand graph-based RAG with Knowledge Graph. Learn how content ingestion, graph construction, and query processing deliver accurate AI responses.

Knowledge Graph is Writer's retrieval-augmented generation (RAG) system that uses graph-based relationships that can improve accuracy compared to vector-only approaches ([reference](https://arxiv.org/abs/2405.02048)). Connect your data sources to enable LLMs to access, understand, and reason about your specific information when generating responses. Get inline citations to ensure every answer pulls from your actual data.

## Knowledge Graph concepts

Knowledge Graph is a structured way to store and retrieve information from your documents, websites, and data sources. Unlike traditional search systems that rely on keyword matching or vector similarity, Knowledge Graph creates a network of interconnected information that captures relationships between concepts, entities, and ideas.

### How Knowledge Graph works

Knowledge Graph processes your data through several stages:

1. **Content ingestion**: upload files, connect data sources, or add website URLs
2. **Graph construction**: analyze content to identify entities, concepts, and relationships
3. **Indexing**: create a searchable graph structure that captures semantic connections
4. **Query processing**: when you ask questions, the system traverses the graph to find relevant information
5. **Response generation**: combine retrieved information with AI to generate accurate, contextual answers

<img src="https://mintcdn.com/writer/9kv7QIFPQINxtMk7/images/home/kg-overview.excalidraw.png?fit=max&auto=format&n=9kv7QIFPQINxtMk7&q=85&s=9a2934f60712ebf1ef24753f53705d9a" alt="Knowledge Graph flow from ingestion to graph construction, indexing, query processing, and response generation." data-og-width="1416" width="1416" data-og-height="1039" height="1039" data-path="images/home/kg-overview.excalidraw.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/9kv7QIFPQINxtMk7/images/home/kg-overview.excalidraw.png?w=280&fit=max&auto=format&n=9kv7QIFPQINxtMk7&q=85&s=9f3015ffcc8b52cdcf4e82fd25b24feb 280w, https://mintcdn.com/writer/9kv7QIFPQINxtMk7/images/home/kg-overview.excalidraw.png?w=560&fit=max&auto=format&n=9kv7QIFPQINxtMk7&q=85&s=2c7d31f1cb143122305df212d3644141 560w, https://mintcdn.com/writer/9kv7QIFPQINxtMk7/images/home/kg-overview.excalidraw.png?w=840&fit=max&auto=format&n=9kv7QIFPQINxtMk7&q=85&s=a54e4f488fe58e521147e82f707aebaa 840w, https://mintcdn.com/writer/9kv7QIFPQINxtMk7/images/home/kg-overview.excalidraw.png?w=1100&fit=max&auto=format&n=9kv7QIFPQINxtMk7&q=85&s=ad879c0f2c9bf340fc99f270586fed1c 1100w, https://mintcdn.com/writer/9kv7QIFPQINxtMk7/images/home/kg-overview.excalidraw.png?w=1650&fit=max&auto=format&n=9kv7QIFPQINxtMk7&q=85&s=0b9934ff0e6d5e80a2a8e59ebf153bfc 1650w, https://mintcdn.com/writer/9kv7QIFPQINxtMk7/images/home/kg-overview.excalidraw.png?w=2500&fit=max&auto=format&n=9kv7QIFPQINxtMk7&q=85&s=9d412f2a6296ad7cd67a8cdd4b4df4ed 2500w" />

## Data sources and formats

Knowledge Graph supports multiple ways to add data:

| Source type             | Description                   | Supported formats/features                                                                                                                                                                                   | Learn more                                                                                                    |
| ----------------------- | ----------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------- |
| **File uploads**        | Upload documents directly     | - PDF, TXT, DOC/DOCX, PPT/PPTX<br />- CSV, XLS/XLSX<br />- EML, HTML, SRT                                                                                                                                    | [Manage Knowledge Graph data](/home/knowledge-graph)                                                          |
| **Data connectors**     | Connect to external platforms | - Confluence: Access team documentation and wikis<br />- Notion: Import workspaces and databases<br />- Google Drive: Connect to shared drives and documents<br />- SharePoint: Access Microsoft 365 content | [Data connectors guide](https://support.writer.com/article/251-setting-up-knowledge-graph-data-connectorss)   |
| **Website integration** | Add web content               | - Add specific URLs or entire domains<br />- Configure page inclusion/exclusion<br />- Automatic content updates                                                                                             | [Website integration guide](https://support.writer.com/article/272-setting-up-knowledge-graph-web-connectors) |

Learn more about [data sources and formats](https://support.writer.com/article/242-how-to-create-and-manage-a-knowledge-graph).

## Query capabilities

Knowledge Graph supports natural language questions and querying across multiple graphs. You can configure the retrieval to break it down into subqueries, support streaming, get inline citations, and fine-tune the search parameters.

**Core features:**

* **Natural language questions**: ask questions in plain, conversational language without needing special syntax or query formats. For example, "What is our refund policy?" or "Tell me about our enterprise pricing tiers" will work naturally.
* **Multi-graph queries**: search across multiple Knowledge Graphs simultaneously. For example, you can compare data across departments or time periods.

**Configurable options:**

* **Subqueries**: break down complex questions into smaller parts automatically
* **Streaming responses**: get answers as they're generated for real-time applications
* **Inline citations**: get answers with embedded source references to verify information
* **Query configuration**: fine-tune search parameters including search weight, grounding level, maximum snippets and tokens, and semantic thresholds

## Add Knowledge Graph to your Writer applications

Add Knowledge Graph to your Writer applications to create conversational AI, generate content, and enable tool calling in complex workflows. Get started with these guides:

* [Create and manage Knowledge Graphs](/home/knowledge-graph): set up your first Knowledge Graph via the Writer API and SDKs
* [Ask questions to Knowledge Graphs](/home/kg-query): query your data directly via the Writer API and SDKs
* [Build chat applications with Knowledge Graph](/no-code/chat-kg): create conversational AI that can reference your specific data
* [Use Knowledge Graph with tool calling](/agent-builder/tool-calling-intro): integrate Knowledge Graph with Agent Builder
* [Enable inline citations](/home/inline-citations): get source references in responses from Knowledge Graph queries
* [Knowledge Graph query configuration](/home/knowledge-graph-query-config): fine-tune search parameters

## Best practices

### Organize your data

* Create separate Knowledge Graphs for different topics or departments
* Use descriptive names and descriptions to help the AI understand context
* Regularly update content to ensure accuracy

### Optimize queries

* Ask specific, well-formed questions for better results
* Use the query configuration parameters to fine-tune responses
* Enable subqueries for complex multi-part questions

### Monitor and improve

* Review source citations to understand how information is being retrieved
* Update Knowledge Graphs with new information as it becomes available
* Test different query approaches to find what works best for your use case

## Next steps

* Learn how to [create and manage Knowledge Graphs](/home/knowledge-graph)
* Explore the [Knowledge Graph API reference](/api-reference/kg-api)
* See how to [ask questions to Knowledge Graphs](/home/kg-query)
* Understand [Knowledge Graph query configuration](/home/knowledge-graph-query-config)
* For additional help, visit the [Writer Help Center](https://support.writer.com) for detailed guides and troubleshooting


# Configure Knowledge Graph query parameters
Source: https://dev.writer.com/home/knowledge-graph-query-config



This guide shows you how to customize Knowledge Graph query behavior using the `query_config` parameter. You can tune search algorithms, control response grounding, adjust content retrieval, and enable inline citations to configure Knowledge Graph responses for your specific use cases.

## Overview

The `query_config` parameter allows you to fine-tune how Knowledge Graphs search, rank, and retrieve content. You can control the balance between keyword and semantic search, adjust how closely responses match source material, set relevance thresholds, and enable inline citations for source verification.

You can use this parameter with:

* **Chat completions** with [Knowledge Graph tools](/home/kg-chat)
* **Direct Knowledge Graph queries** via the [`/v1/graphs/question`](/home/kg-query) endpoint

## Example

Here's a chat completion example that demonstrates various query configuration parameters to configure Knowledge Graph responses:

* `grounding_level: 0.2`: keeps responses closely tied to source material (20% creative interpretation allowed)
* `search_weight: 60`: balances keyword and semantic search (60% keyword search, 40% semantic search)
* `keyword_threshold: 0.6`: requires 60% keyword match for content to be included
* `semantic_threshold: 0.8`: requires 80% semantic similarity for content to be included

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST 'https://api.writer.com/v1/chat' \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header 'Content-Type: application/json' \
    --data-raw '{
      "model": "palmyra-x5",
      "messages": [
        {
          "role": "user",
          "content": "What are the key features of our product?"
        }
      ],
      "tools": [
        {
          "type": "graph",
          "function": {
            "description": "Search company knowledge base",
            "graph_ids": ["<GRAPH_ID>"],
            "subqueries": true,
            "query_config": {
              "grounding_level": 0.2,
              "search_weight": 60,
              "keyword_threshold": 0.6,
              "semantic_threshold": 0.8,
              "inline_citations": true
            }
          }
        }
      ]
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client
  client = Writer()

  # Configure Knowledge Graph tool with query parameters
  tools = [{
      "type": "graph",
      "function": {
          "description": "Search company knowledge base",
          "graph_ids": ["<GRAPH_ID>"],
          "subqueries": True,
          "query_config": {
              "grounding_level": 0.2,
              "search_weight": 60,
              "keyword_threshold": 0.6,
              "semantic_threshold": 0.8,
              "inline_citations": True
          }
      }
  }]

  messages = [{"role": "user", "content": "What are the key features of our product?"}]

  response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      tools=tools,
      tool_choice="auto"
  )

  print(response.choices[0].message.content)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the Writer client
  const client = new Writer();

  // Configure Knowledge Graph tool with query parameters
  const tools = [{
      type: "graph",
      function: {
          description: "Search company knowledge base",
          graph_ids: ["<GRAPH_ID>"],
          subqueries: true,
          query_config: {
              grounding_level: 0.2,
              search_weight: 60,
              keyword_threshold: 0.6,
              semantic_threshold: 0.8,
              inline_citations: true
          }
      }
  }];

  const messages = [{ role: "user", content: "What are the key features of our product?" }];

  const response = await client.chat.chat({
      model: "palmyra-x5",
      messages: messages,
      tools: tools,
      tool_choice: "auto"
  });

  console.log(response.choices[0].message.content);
  ```
</CodeGroup>

## Configure request parameters

| Name                 | Type    | Range              | Default | Description                                                                                                                                                                                                                                                                                                                                               |
| -------------------- | ------- | ------------------ | ------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `max_subquestions`   | Integer | 1-10               | 6       | Maximum number of sub-questions to generate when processing complex queries. Set higher to improve detail, set lower to reduce response time. See [Max sub-questions](#max-sub-questions) for details.                                                                                                                                                    |
| `search_weight`      | Integer | 0-100              | 50      | Controls the balance between keyword and semantic search in ranking results. See [Search weight](#search-weight) for details.                                                                                                                                                                                                                             |
| `grounding_level`    | Number  | 0.0-1.0            | 0.0     | Controls how closely responses must match to source material. Set lower for grounded outputs, higher for creativity. See [Grounding level](#grounding-level) for details.                                                                                                                                                                                 |
| `max_snippets`       | Integer | 5-25 (recommended) | 30      | Maximum number of text snippets to retrieve from the Knowledge Graph for context. Works in concert with `search_weight` to control best matches vs broader coverage. **Note**: While technically supports 1-60, values below 5 may return no results due to RAG implementation. Recommended range is 5-25. See [Max snippets](#max-snippets) for details. |
| `max_tokens`         | Integer | 100-8000           | 4000    | Maximum number of tokens the model can generate in the response. See [Max tokens](#max-tokens) for details.                                                                                                                                                                                                                                               |
| `keyword_threshold`  | Number  | 0.0-1.0            | 0.7     | Threshold for keyword-based matching when searching Knowledge Graph content. Set higher for stricter relevance, lower for broader range. See [Keyword threshold](#keyword-threshold) for details.                                                                                                                                                         |
| `semantic_threshold` | Number  | 0.0-1.0            | 0.7     | Threshold for semantic similarity matching when searching Knowledge Graph content. Set higher for stricter relevance, lower for broader range. See [Semantic threshold](#semantic-threshold) for details.                                                                                                                                                 |
| `inline_citations`   | Boolean | True/False         | False   | Whether to include inline citations within the response text. This is only available when making direct Knowledge Graph queries via the `/v1/graphs/question` endpoint. See [Work with inline citations in Knowledge Graph responses](/home/inline-citations) for details.                                                                                |

## Parameter details

### Inline citations

When you enable `inline_citations: true`, the response includes source references directly in the text as `[filename.pdf](cite_id)` links. These citations correspond to entries in the `references` array, allowing you to verify information and trace claims back to their origins.

**Key features**:

* **Source verification**: Each citation links to specific source material
* **Transparency**: Users can see exactly which sources support each claim
* **Traceability**: Citations include unique identifiers for programmatic processing

For detailed information about working with inline citations, see [Work with inline citations in Knowledge Graph responses](/home/inline-citations).

### Max sub-questions

Maximum number of sub-questions to generate when processing complex queries. Higher values allow the system to break down complex questions into more detailed sub-queries.

**How it works**:

* **Higher values**: Improve detail by generating more sub-questions for thorough analysis
* **Lower values**: Reduce response time by generating fewer sub-questions

**When to adjust**:

* **Increase** for complex, multi-part questions that need thorough analysis
* **Decrease** for simple, direct questions to reduce processing time

### Search weight

Controls the balance between keyword and semantic search in ranking results.

**How it works**:

* **Higher values (closer to 100)**: Prioritize keyword-based matching
* **Lower values (closer to 0)**: Prioritize semantic similarity matching

**When to adjust**:

* **Increase** for searches where exact keyword matches matter most
* **Decrease** for searches where conceptual similarity is more important

### Grounding level

Controls how closely responses must be tied to source material. This is different from typical LLM temperature parameters. It specifically controls grounding to Knowledge Graph sources.

**How it works**:

* **Higher values**: Higher creativity - allow more creative interpretation of source material
* **Lower values (closer to 0.0)**: Grounded outputs - stick closely to source material with minimal creativity

**Examples**:

* `0.0`: "According to the documentation, the API supports JSON responses" (direct quote/paraphrase)
* `0.5`: "The API documentation indicates that JSON responses are supported, which suggests additional capabilities" (interpretive)
* `1.0`: "Based on the available information, users can expect JSON responses, though other formats might be possible" (highly interpretive)

**When to adjust**:

* **Increase** for higher creativity when you want more interpretive responses
* **Decrease** for grounded outputs when factual reporting or accuracy is critical

### Max snippets

Maximum number of text snippets to retrieve from the Knowledge Graph for context. Works in concert with `search_weight` to control best matches vs broader coverage.

**How it works**:

* **Lower values (5-15)**: Best matches - retrieve fewer, more relevant snippets
* **Higher values (15-25)**: Broader coverage - retrieve more snippets for comprehensive context
* **Values below 5**: May return no results due to RAG implementation limitations

**Important notes**:

* **Recommended range**: 5-25 (default is 30, which is higher than recommended)
* **Edge case**: Due to RAG system behavior, you may see more snippets than requested. Use the recommended range unless you have a measured need to change it.

**When to adjust**:

* **Increase** for broader coverage when you need comprehensive research or more context
* **Decrease** for best matches when you want focused queries or concise results

### Max tokens

Maximum number of tokens the model can generate in the response. This controls the length of the AI's answer.

**How it works**:

* **Higher values**: Allow longer, more detailed responses
* **Lower values**: Generate shorter, more concise responses

**When to adjust**:

* **Increase** for detailed analysis or comprehensive answers
* **Decrease** for quick summaries or when you need faster responses

### Keyword threshold

Threshold for keyword-based matching when searching Knowledge Graph content.

**How it works**:

* **Higher values**: Stricter relevance - require stronger keyword matches
* **Lower values**: Broader range - allow more lenient keyword matching

**When to adjust**:

* **Increase** for stricter relevance when you want very precise keyword matches
* **Decrease** for broader range when you want to include content with related but not exact keywords

### Semantic threshold

Threshold for semantic similarity matching when searching Knowledge Graph content.

**How it works**:

* **Higher values**: Stricter relevance - require stronger semantic similarity
* **Lower values**: Broader range - allow more lenient semantic matching

**Examples**:

* `0.9`: Very strict - only content with high semantic similarity (for example, searching "user authentication" only finds content about "user authentication", "login", "sign-in")
* `0.7`: Moderate - includes conceptually related content (for example, searching "user authentication" finds "authentication", "security", "access control", "user management")
* `0.3`: Lenient - includes tangentially related content (for example, searching "user authentication" finds "authentication", "security", "user management", "database", "API", "web development")

**When to adjust**:

* **Increase** for stricter relevance when you want very semantically similar content
* **Decrease** for broader range when you want to include tangentially related content

## Parameter interactions and performance

### How parameters work together

Some parameters interact in ways that affect both results and performance:

* **`max_snippets` and `search_weight`**: Work together to control best matches vs broader coverage. `max_snippets` controls how many snippets are fed to the LLM in RAG.
* **`max_snippets` and `max_tokens`**: `max_snippets` controls input context size, while `max_tokens` controls output response length.
* **`keyword_threshold` and `semantic_threshold`**: Both filters are applied - content must pass both thresholds to be included.
* **Search weight and thresholds**: Higher thresholds reduce the candidate pool, then search weight determines the balance between keyword and semantic ranking of remaining results.

#### Search weight versus semantic threshold

These two parameters work at different stages of the search process:

* Semantic threshold is applied during the initial search phase, before ranking
* Search weight is applied after filtering, when ranking the remaining results

Semantic threshold acts as a gatekeeper that determines which content gets included, while search weight controls the balance between keyword and semantic scoring in final ranking.

**Example**: with `semantic_threshold = 0.8` and `search_weight = 30`, you get a small set of very relevant documents ranked more by semantic similarity than keyword matching.

### Performance considerations

* **Higher `max_tokens`**: Increases processing time and cost
* **Lower thresholds**: May return more results but with lower relevance
* **Higher `max_subquestions`**: Increases processing time for complex queries
* **`inline_citations: true`**: Minimal performance impact, slight increase in response size

### Recommended starting values

For most use cases, use the default values and adjust only if you need specific behavior. The defaults are designed to work well for general Knowledge Graph queries.

## Usage examples

### Chat completions with Knowledge Graph tool

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST 'https://api.writer.com/v1/chat' \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header 'Content-Type: application/json' \
    --data-raw '{
      "model": "palmyra-x5",
      "messages": [
        {
          "role": "user",
          "content": "What are the key features of our product?"
        }
      ],
      "tools": [
        {
          "type": "graph",
          "function": {
            "description": "Search company knowledge base",
            "graph_ids": ["<GRAPH_ID>"],
            "subqueries": true,
            "query_config": {
              "grounding_level": 0.2,
              "search_weight": 60,
              "keyword_threshold": 0.6,
              "semantic_threshold": 0.8,
              "inline_citations": true
            }
          }
        }
      ]
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client
  client = Writer()

  # Configure Knowledge Graph tool with query parameters
  tools = [{
      "type": "graph",
      "function": {
          "description": "Search company knowledge base",
          "graph_ids": ["<GRAPH_ID>"],
          "subqueries": True,
          "query_config": {
              "grounding_level": 0.2,
              "search_weight": 60,
              "keyword_threshold": 0.6,
              "semantic_threshold": 0.8,
              "inline_citations": True
          }
      }
  }]

  messages = [{"role": "user", "content": "What are the key features of our product?"}]

  response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      tools=tools,
      tool_choice="auto"
  )

  print(response.choices[0].message.content)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the Writer client
  const client = new Writer();

  // Configure Knowledge Graph tool with query parameters
  const tools = [{
      type: "graph",
      function: {
          description: "Search company knowledge base",
          graph_ids: ["<GRAPH_ID>"],
          subqueries: true,
          query_config: {
              grounding_level: 0.2,
              search_weight: 60,
              keyword_threshold: 0.6,
              semantic_threshold: 0.8,
              inline_citations: true
          }
      }
  }];

  const messages = [{ role: "user", content: "What are the key features of our product?" }];

  const response = await client.chat.chat({
      model: "palmyra-x5",
      messages: messages,
      tools: tools,
      tool_choice: "auto"
  });

  console.log(response.choices[0].message.content);
  ```
</CodeGroup>

### Direct Knowledge Graph query

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request POST 'https://api.writer.com/v1/graphs/question' \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header 'Content-Type: application/json' \
    --data-raw '{
      "graph_ids": ["<GRAPH_ID>"],
      "question": "What are the key features of our product?",
      "query_config": {
        "grounding_level": 0.2,
        "keyword_threshold": 0.6,
        "semantic_threshold": 0.8,
        "inline_citations": true
      }
    }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client
  client = Writer()

  # Query Knowledge Graph with configuration parameters
  response = client.graphs.question(
      graph_ids=["<GRAPH_ID>"],
      question="What are the key features of our product?",
      query_config={
          "grounding_level": 0.2,
          "keyword_threshold": 0.6,
          "semantic_threshold": 0.8,
          "inline_citations": True
      }
  )

  print(f"Answer: {response.answer}")
  print(f"References: {response.references}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the Writer client
  const client = new Writer();

  // Query Knowledge Graph with configuration parameters
  const response = await client.graphs.question({
      graph_ids: ["<GRAPH_ID>"],
      question: "What are the key features of our product?",
      query_config: {
          grounding_level: 0.2,
          keyword_threshold: 0.6,
          semantic_threshold: 0.8,
          inline_citations: true
      }
  });

  console.log(`Answer: ${response.answer}`);
  console.log(`References: ${response.references}`);
  ```
</CodeGroup>

## Common configuration patterns

### Research and analysis

Use this configuration for comprehensive research tasks where you need thorough analysis with source verification. Higher sub-questions and snippets provide more context, while inline citations help track sources.

```json  theme={null}
{
  "max_subquestions": 8,
  "search_weight": 60,
  "grounding_level": 0.1,
  "max_snippets": 50,
  "max_tokens": 7000,
  "keyword_threshold": 0.6,
  "semantic_threshold": 0.7,
  "inline_citations": true
}
```

### Quick answers

Use this configuration for fast, focused responses where speed and precision matter more than comprehensive analysis. Strict thresholds ensure high relevance with minimal processing time.

```json  theme={null}
{
  "max_subquestions": 3,
  "search_weight": 80,
  "grounding_level": 0.0,
  "max_snippets": 15,
  "max_tokens": 2000,
  "keyword_threshold": 0.8,
  "semantic_threshold": 0.8,
  "inline_citations": false
}
```

### Creative content generation

Use this configuration when you want the AI to interpret and build upon source material creatively. Lower thresholds allow more diverse content, while higher grounding level enables interpretive responses.

```json  theme={null}
{
  "max_subquestions": 6,
  "search_weight": 40,
  "grounding_level": 0.6,
  "max_snippets": 30,
  "max_tokens": 5000,
  "keyword_threshold": 0.5,
  "semantic_threshold": 0.6,
  "inline_citations": false
}
```

## Best practices

1. **Start with defaults**: Begin with the default configuration and adjust based on your specific needs
2. **Test incrementally**: Change one parameter at a time to understand its effect
3. **Consider your use case**: Different applications, like research, Q\&A, and content generation, benefit from different configurations
4. **Monitor performance**: Track how different configurations affect response quality and processing time
5. **Balance precision and recall**: Higher thresholds give more precise results but may miss relevant content

## Next steps

* Learn how to [work with inline citations](/home/inline-citations) for source verification and traceability
* Explore [Knowledge Graph tools](/home/kg-chat) for chat completions
* Check out [direct Knowledge Graph queries](/home/kg-query) for programmatic access
* See [Knowledge Graph management](/home/knowledge-graph) for creating and organizing your graphs


# Create and manage Knowledge Graphs
Source: https://dev.writer.com/home/knowledge-graphs





# Language support
Source: https://dev.writer.com/home/language_support

Palmyra LLM supports 30+ languages including Arabic, French, Spanish, Hindi, and Chinese. View MMLU and BLEU benchmark scores for multilingual text generation.

Writer Palmyra LLM supports over 30 languages, including Arabic, French, Spanish, Hindi, Simplified Chinese, Traditional Chinese, and more. This page provides an overview of capabilities, performance benchmarks, and prompting examples on how to use these features.

When it comes to multi-language capabilities, there are two primary categories to consider: generation and translation. Generation typically refers to the ability to understand/create content, answer questions, and converse, all within the same language. Translation typically refers to the ability to transform text to and from English, where either the input or output language is English.

This page displays two of the many benchmarks used to evaluate multi-language performance in Palmyra LLMs. Writer Palmyra has the highest performance of any production LLM in the Holistic Evaluation of Language Models, an LLM evaluation framework developed by Stanford CRFM to serve as a living benchmark for the community, continuously updated with new scenarios, metrics, and models. While there are limited benchmarks available for evaluating text generation and translation in different languages, Palmyra has achieved some of the highest scores in both MMLU (Massive Multitask Language Understanding) and BLEU (Bilingual Evaluation Understudy) for other languages.

One benchmark that Writer uses to evaluate text generation performance is [MMLU](https://arxiv.org/abs/2009.03300). The [MLMM evaluation](https://arxiv.org/pdf/2307.16039.pdf) covers 57 tasks including elementary mathematics, U.S. history, computer science, law, and more. To attain high accuracy on this test, models must possess extensive world knowledge and problem-solving ability.

One benchmark that Writer uses to evaluate text translation performance is [BLEU](https://aclanthology.org/P02-1040.pdf). [Any BLEU score higher than 60](https://cloud.google.com/translate/automl/docs/evaluate#interpretation) indicates a higher quality translation than a human translation.

While Palmyra's core competency lies in the text generation realm, translation use cases are possible. However, it's important to exercise caution in languages where benchmarks aren't yet established. The team values transparency, and potential users should be aware of this caveat.

Therefore, any outputs or usage of Writer LLM should always include guidance from a human expert. The team continuously evaluates and refines capabilities, and learning happens with customers.

| Language            | MMLU/MLMM | BLEU (source \ English) |
| :------------------ | :-------- | :---------------------- |
| Arabic              | 68.9      | 61.2                    |
| Bengali             | 63.3      | 54.4                    |
| Bulgarian           | 76.3      | 64.2                    |
| Chinese simplified  | 71.7      | 63.8                    |
| Chinese traditional | 73.7      | 57.0                    |
| Croatian            | 64.9      | 66.4                    |
| Czech               | -         | 52.5                    |
| Danish              | 77.7      | 70.5                    |
| Dutch               | 73.6      | 73.9                    |
| English             | 70.2      | -                       |
| Finnish             | -         | 68.9                    |
| French              | 69.1      | 63.1                    |
| German              | 70.4      | 71.3                    |
| Greek               | -         | 60.4                    |
| Hebrew              | -         | 67.8                    |
| Hindi               | 77.9      | 68.4                    |
| Hungarian           | 67.7      | 65.3                    |
| Indonesian          | 67.8      | 63.5                    |
| Italian             | 72.5      | 70.9                    |
| Japanese            | 73.5      | 66.8                    |
| Korean              | -         | 56.8                    |
| Lithuanian          | -         | 59.3                    |
| Polish              | -         | 60.6                    |
| Portuguese          | -         | 66.2                    |
| Romanian            | 70.9      | 67.6                    |
| Russian             | 75.1      | 65.2                    |
| Spanish             | 72.5      | 79.3                    |
| Swahili             | -         | 62.8                    |
| Swedish             | -         | 63.2                    |
| Thai                | -         | 54.7                    |
| Turkish             | 64.1      | 57.5                    |
| Ukrainian           | 75.2      | 68.0                    |
| Vietnamese          | 72.5      | 60.3                    |

# Dialect support

Writer Palmyra LLM also supports outputting in specific language dialects. The best results come from using a prompt with the following characteristics:

1. The prompt itself is in the desired language and dialect
2. The prompt clearly describes the type of dialect, for example, "It's essential that you use the Spanish spoken in Spain."
3. The prompt provides specific examples of the dialect, both vocabulary and grammatical differences

The following example, although not in the desired language for simplicity's sake, is an example of an optimal prompt that asks for a translation in Spanish spoken in Spain.

```text  theme={null}
Hello, good afternoon! I need you to help me translate the following text. It's essential that you use the Spanish spoken in Spain. For example, you should use words like "coche" and/or "patata" instead of "carro" and/or "pap." Additionally, you need to pay attention to grammatical differences, such as the use of "voy a por" (Spain) instead of "voy por" (Latin America), or the structure of sentences like "hoy he comido una manzana" instead of "hoy comí una manzana." I prefer that you use "vosotros" (speak) instead of "ustedes" (speak), unless it's necessary to write very formally. 
```

> Here is the text to translate:\
> \[text you want translated]

```

## Basic prompt examples

### Translation

> Read the content of this source. Provide me with a translation of all its contents in French: https://writer.com/blog/ai-guardrails/

### Text generation

> Please write a blog post about the importance of productivity for small businesses in Arabic.

### Native multi-language support

> 人工知能の歴史と大規模言語モデルの開発について、短い段落を書いてください。読者はビジネステクノロジーニュースに興味がありますが、技術的なバックグラウンドはありません。技術的な概念を8年生の読解レベルで簡潔に説明してください。
```


# Connect to MCP servers
Source: https://dev.writer.com/home/mcp-gateway

Learn how Writer's MCP gateway enables AI agents to securely access enterprise tools like Slack, Gong, and Google Workspace

This page provides a technical overview of Writer's Model Context Protocol (MCP) gateway architecture and authentication mechanisms. It covers how the gateway routes requests between WRITER Agent and partner MCP servers, what connectors are available, and how authentication works.

For step-by-step instructions on configuring connectors in AI Studio, see [Setting up connectors](https://support.writer.com/article/299-setting-up-connectors) in the Writer Help Center.

<Note>
  MCP connectors are currently available for WRITER Agent (Ask WRITER/Action Agent). Connectors do not currently support Agent Builder, no-code agents, or API integrations.
</Note>

## MCP gateway architecture

Writer's MCP gateway sits between WRITER Agent and partner MCP servers. This architecture provides centralized security, access control, and observability for enterprise deployments. You can use the MCP gateway to connect your WRITER Agent to [supported MCP servers](/home/mcp-gateway#available-connectors-in-mcp-gateway).

### How the gateway works

The MCP gateway operates as an intermediary between your WRITER Agent and partner MCP servers. It handles authentication, authorization, and request routing.

1. **Client connection**: WRITER Agent connects to Writer's unified MCP server
2. **Request submission**: WRITER Agent sends HTTP requests to the MCP gateway endpoint
3. **Authentication**: The gateway validates user identity and permissions using your Writer organization's access controls
4. **Request routing**: Authenticated requests are routed to the appropriate partner MCP server
5. **Response delivery**: Results are returned to the agent through the secure channel

```mermaid  theme={null}
sequenceDiagram
    participant Agent as WRITER Agent<br/>(Ask WRITER/Action Agent)
    participant Gateway as MCP Gateway<br/>(Writer)
    participant Auth as Access Control<br/>(Organization/Team/User)
    participant MCP as Partner MCP Server<br/>(Slack, Google, etc.)

    Agent->>Gateway: Request tools/execute action
    Gateway->>Auth: Validate user identity & permissions
    Auth-->>Gateway: User authorized ✓
    Gateway->>MCP: Forward authenticated request
    MCP-->>Gateway: Return results
    Gateway-->>Agent: Deliver response
```

## Available connectors in MCP gateway

Writer's MCP gateway provides access to enterprise tools across multiple categories. Below is a list of currently supported MCP connectors.

| Connector          | Auth type            | Provider authentication docs                                                                    |
| ------------------ | -------------------- | ----------------------------------------------------------------------------------------------- |
| FactSet            | OAuth 2.0            | [View docs](https://developer.factset.com/learn/authentication-oauth2)                          |
| Gmail              | OAuth 2.0            | [View docs](https://support.google.com/cloud/answer/15549257)                                   |
| Gong               | API key + Tenant URL | [View docs](https://www.gong.io/docs/api/getting-started/authentication)                        |
| Google Calendar    | OAuth 2.0            | [View docs](https://support.google.com/cloud/answer/15549257)                                   |
| Google Docs        | OAuth 2.0            | [View docs](https://support.google.com/cloud/answer/15549257)                                   |
| Google Sheets      | OAuth 2.0            | [View docs](https://support.google.com/cloud/answer/15549257)                                   |
| HubSpot            | OAuth 2.0            | [View docs](https://developers.hubspot.com/docs/api/oauth)                                      |
| Microsoft Calendar | OAuth 2.0            | [View docs](https://learn.microsoft.com/en-us/entra/identity-platform/v2-oauth2-auth-code-flow) |
| Microsoft OneDrive | OAuth 2.0            | [View docs](https://learn.microsoft.com/en-us/entra/identity-platform/v2-oauth2-auth-code-flow) |
| Microsoft Outlook  | OAuth 2.0            | [View docs](https://learn.microsoft.com/en-us/entra/identity-platform/v2-oauth2-auth-code-flow) |
| Microsoft Teams    | OAuth 2.0            | [View docs](https://learn.microsoft.com/en-us/entra/identity-platform/v2-oauth2-auth-code-flow) |
| PitchBook          | API key              | [View docs](https://pitchbook.com/help/PitchBook-api)                                           |
| Slack              | OAuth 2.0            | [View docs](https://api.slack.com/authentication/oauth-v2)                                      |

## Set up connectors

Connector setup happens in AI Studio under **Connectors & Tools**. For step-by-step instructions on configuring connectors, selecting tools, and managing permissions, see [Setting up connectors](https://support.writer.com/article/299-setting-up-connectors).

The sections below cover the technical authentication requirements for connectors.

## Set up connector authentication

The type of authentication required for a connector depends on the third-party service. The connector configuration flow in AI Studio guides you through the required setup.

The three types of authentication required for connectors are OAuth 2.0, API key, and tenant-based.

**OAuth 2.0 connectors** (FactSet, Google, Microsoft, Slack, HubSpot):

* Require creating an OAuth application with the provider
* Need OAuth client ID and client secret
* Must include Writer's redirect URI in the OAuth app configuration
* See [Set up OAuth](#set-up-oauth) for more details

**API key connectors** (PitchBook, Gong):

* Require an API key from the third-party service
* Some services require additional configuration like tenant URLs
* See the [available connectors](#available-connectors-in-mcp-gateway) table for links to the provider's documentation on how to create API keys

**Tenant-based connectors** (Gong):

* Uses an API key and an additional tenant URL to authenticate requests
* Require your organization's specific instance URL. For example: `https://yourcompany.gong.io`
* Used to identify your organization's instance in multi-tenant services

### Set up OAuth

#### Create OAuth applications

To create OAuth applications for supported providers, follow the provider's official documentation. View the [available connectors](#available-connectors-in-mcp-gateway) for links to the provider's documentation on how to create OAuth applications.

When creating an OAuth application, you must add the following Writer redirect URI to the list of allowed redirect URIs in your OAuth application's settings:

```
https://app.writer.com/mcp/oauth/callback
```

The gateway uses this URI to receive authorization codes from third-party services after users grant permission.

#### Required OAuth scopes

Each connector requires specific OAuth scopes to access third-party APIs. The connector configuration interface in AI Studio displays the required scopes when you configure a connector.

<img src="https://mintcdn.com/writer/RmpeckABOl0_oABL/images/home/google-calendar-oauth-scopes.png?fit=max&auto=format&n=RmpeckABOl0_oABL&q=85&s=16c20858afef3ccd0b4295c69e9c9224" alt="Google Calendar OAuth scopes" data-og-width="3456" width="3456" data-og-height="1796" height="1796" data-path="images/home/google-calendar-oauth-scopes.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/RmpeckABOl0_oABL/images/home/google-calendar-oauth-scopes.png?w=280&fit=max&auto=format&n=RmpeckABOl0_oABL&q=85&s=a6e8f3aad782e18fb5aad4b49c596fe5 280w, https://mintcdn.com/writer/RmpeckABOl0_oABL/images/home/google-calendar-oauth-scopes.png?w=560&fit=max&auto=format&n=RmpeckABOl0_oABL&q=85&s=53e2f96a322f37d4c1425feaa952b95d 560w, https://mintcdn.com/writer/RmpeckABOl0_oABL/images/home/google-calendar-oauth-scopes.png?w=840&fit=max&auto=format&n=RmpeckABOl0_oABL&q=85&s=d812ff1337df5938829a1f6aa7971fb7 840w, https://mintcdn.com/writer/RmpeckABOl0_oABL/images/home/google-calendar-oauth-scopes.png?w=1100&fit=max&auto=format&n=RmpeckABOl0_oABL&q=85&s=1e0d07474bcd374a0ff0373f5fdfe9b4 1100w, https://mintcdn.com/writer/RmpeckABOl0_oABL/images/home/google-calendar-oauth-scopes.png?w=1650&fit=max&auto=format&n=RmpeckABOl0_oABL&q=85&s=657db6d6f364933f6f05deb4b9ce47a5 1650w, https://mintcdn.com/writer/RmpeckABOl0_oABL/images/home/google-calendar-oauth-scopes.png?w=2500&fit=max&auto=format&n=RmpeckABOl0_oABL&q=85&s=d711c72ed99b6181328d3f399ea44d34 2500w" />

Some connectors require extensive OAuth scopes during authentication. This is because connectors often provide multiple tools with broad functionality across the integrated service.

For example, a connector for a productivity service might include tools to:

* Read and search documents
* Create and modify files
* Access calendar events
* Send messages or notifications
* Manage sharing permissions

Each of these capabilities requires corresponding OAuth scopes from the provider. Even if you disable specific tools in your connector configuration, the OAuth application still requests all scopes needed for the full set of available tools.

<Note>
  Currently, OAuth scopes are fixed per connector and do not adjust based on which tools are enabled. This means users will see requests for all scopes even if you've disabled certain tools.
</Note>

## Next steps

* [Set up connectors](https://support.writer.com/article/299-setting-up-connectors): Learn how to configure and enable connectors in AI Studio.
* [Tool calling guide](/home/tool-calling): Understand how AI agents use tools in conversations.
* [Action Agent guide](https://support.writer.com/article/293-how-to-use-action-agent): Learn how to use Action Agent with connected tools.
* [API reference](/api-reference/completion-api/chat-completion): Explore the Chat Completion API that powers tool calling.


# MCP server
Source: https://dev.writer.com/home/mcp-server



This guide shows you how to use the Writer MCP server to orchestrate multiple Writer API calls through AI assistants like [Claude Desktop](https://claude.ai/download) and [Cursor](https://www.cursor.com/), or your own custom MCP client.

The [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) is an open standard that enables AI assistants to interact with external tools and data sources. After completing these steps, you can chain together multi-step workflows without hardcoding API calls.

## Install and configure the MCP server

### Set up your Writer API key

The MCP server requires your Writer API key as an environment variable. If you don't have an API key, you can [create one](/api-reference/api-keys).

Store your API key in a `.env` file with the name `WRITER_API_KEY`. For example:

```bash  theme={null}
export WRITER_API_KEY=your-api-key-here
```

Then source the environment file in your shell:

```bash  theme={null}
source .env
```

<Note>
  The MCP server will show a fatal error if the `WRITER_API_KEY` environment variable is missing or empty. Make sure to set this environment variable before running the MCP server.
</Note>

### Install and run the MCP server

You can install and run the Writer MCP server using [`npx`](https://docs.npmjs.com/cli/v8/commands/npx). Set the `WRITER_API_KEY` environment variable before running the MCP server.

The following command installs and runs the latest version of the Writer MCP server:

```bash  theme={null}
npx -y writer-sdk-mcp@latest
```

<Note>
  You can also install the MCP server globally and run it anytime.

  ```bash  theme={null}
  npm install -g writer-sdk-mcp

  mcp-server
  ```
</Note>

### Configure your MCP client

Add the Writer MCP server to your MCP client configuration, such as [`claude_desktop_config.json` for Claude Desktop](https://modelcontextprotocol.io/docs/develop/connect-local-servers) or [`mcp.json` for Cursor](https://cursor.com/docs/context/mcp). For example, here's how to configure the MCP server for Claude Desktop:

<Tabs>
  <Tab title="Claude Desktop">
    Add to your [`claude_desktop_config.json`](https://modelcontextprotocol.io/docs/develop/connect-local-servers):

    ```json claude_desktop_config.json theme={null}
    {
      "mcpServers": {
        "writer": {
          "command": "npx",
          "args": ["-y", "writer-sdk-mcp@latest"],
          "env": {
            "WRITER_API_KEY": "your-api-key-here"
          }
        }
      }
    }
    ```
  </Tab>

  <Tab title="Cursor">
    Add to your [`mcp.json`](https://cursor.com/docs/context/mcp):

    ```json mcp.json theme={null}
    {
      "mcpServers": {
        "writer": {
          "command": "npx",
          "args": ["-y", "writer-sdk-mcp@latest"],
          "env": {
            "WRITER_API_KEY": "your-api-key-here"
          }
        }
      }
    }
    ```
  </Tab>
</Tabs>

### Interact with the MCP server in an AI client

After you've added your MCP server to your client configuration, you can interact with it by sending requests to the MCP server. Each client has a different way to interact with the MCP server.

For conversational AI assistants like Claude Desktop and Cursor, you can interact with the MCP server by sending messages to the assistant. For example, to upload a file to Writer, you can send a message like "Upload this image to Writer" and the assistant can use the MCP server to accomplish the task.

## Build custom MCP clients

You can also create your own MCP client using any MCP-compatible package like [Strands](https://strandsagents.com/latest/), [LangChain](https://python.langchain.com/), or other MCP libraries. The Writer MCP server follows the standard MCP protocol, so you can integrate it with any client that implements the protocol.

The following example shows how to create a custom MCP client using the Strands SDK.

### Set up the Strands SDK

First, install the Strands SDK, the Writer dependency, and the Strands Agent Tools package:

```bash  theme={null}
pip install 'strands-agents[writer]' strands-agents-tools
```

### Create a custom MCP client

Next, create a custom MCP client that uses the Writer MCP server to respond to user requests.

The example first creates an `MCPClient` using Strands Tools to connect to the Writer MCP server, then sets up the Writer model to be used by the agent for handling requests.

The `writer_mcp_client.list_tools_sync()` method retrieves the list of available tools from the Writer MCP server. The agent then uses these tools to respond to user requests related to content workflow automation.

```python content_workflow_client.py theme={null}
import os
from strands import Agent
from strands.models.writer import WriterModel
from strands.tools.mcp import MCPClient
from mcp import stdio_client, StdioServerParameters

# Connect to the Writer MCP server using stdio transport
writer_mcp_client = MCPClient(lambda: stdio_client(
    StdioServerParameters(
        command="npx",
        args=["-y", "writer-sdk-mcp@latest"],
        env={"WRITER_API_KEY": os.environ["WRITER_API_KEY"]}
    )
))

# Initialize the Writer model
writer_model = WriterModel(
    client_args={"api_key": os.environ["WRITER_API_KEY"]},
    model_id="palmyra-x5",
)

def content_workflow_client(user_request: str):
    """Custom MCP client that orchestrates complex content workflows using Writer MCP tools."""
    with writer_mcp_client:
        tools = writer_mcp_client.list_tools_sync()
        agent = Agent(
            model=writer_model,
            tools=tools,
            system_prompt="""You are a content workflow assistant that can:
            - Upload and analyze files
            - Generate content using Writer's models
            - Query Knowledge Graphs for research
            - Analyze images and extract insights
            - Chain multiple operations together seamlessly
            
            Use the available Writer MCP tools to fulfill user requests efficiently."""
        )
        return agent(user_request)

# Example usage
if __name__ == "__main__":
    # Research and content generation task
    response = content_workflow_client("Research and create content about sustainable fashion trends, including a blog post outline and social media content ideas")
    print("Research & Content:", response)
```

### Troubleshoot common issues

**MCP server shows fatal error about missing API key**: verify your API key is set correctly:

```bash  theme={null}
echo $WRITER_API_KEY
```

If the environment variable is not set, run:

```bash  theme={null}
export WRITER_API_KEY=your-api-key-here
```

**MCP client fails to initialize with "Connection closed" error**: this usually means the MCP server couldn't start due to a missing API key. When using Strands SDK, make sure to pass the environment variable to the MCP server:

```python  theme={null}
# Correct way to pass environment variables to MCP server
writer_mcp_client = MCPClient(lambda: stdio_client(
    StdioServerParameters(
        command="npx",
        args=["-y", "writer-sdk-mcp@latest"],
        env={"WRITER_API_KEY": os.environ["WRITER_API_KEY"]}  # This is required!
    )
))
```

**Tools not appearing**: check that the MCP server is properly configured in your client and restart the client application.

**Permission errors**: ensure your API key has the necessary permissions for the operations you want to perform.

## Next steps

Now that you've set up the MCP server, you can use it to build complex workflows without writing custom integration code. Next, you can explore the following resources to help you get the most out of the MCP server:

* Explore [Writer's API reference](/api-reference) to understand all available endpoints
* Learn about [tool calling](/home/tool-calling) for more advanced integrations
* Check out [Knowledge Graphs](/home/knowledge-graph) for building intelligent content systems
* Review [vision analysis](/home/analyze-images) for image processing workflows


# Extract entities from unstructured medical text
Source: https://dev.writer.com/home/medical-comprehend



<Warning>
  **Deprecation notice**: The [medical comprehend API endpoint](/api-reference/tool-api/comprehend-medical) at `/v1/tools/comprehend/medical` is deprecated and will be removed on **December 22, 2025**.

  **Migration path**: Use the [LLM tool](/home/model-delegation) in chat completions to delegate medical analysis tasks to the `palmyra-med` model. This approach provides the same medical analysis capabilities within a chat completion workflow. See the [migration guide](/api-reference/migration-guides/comprehend-medical) for detailed instructions.
</Warning>

The [medical comprehend endpoint](/api-reference/tool-api/comprehend-medical) analyzes unstructured medical text to extract entities and label them with standardized medical codes. Each extracted entity comes with a confidence score, making it useful for processing clinical notes, medical records, and other healthcare-related documents.

## Use cases

* Automating medical records processing and classification
* Extracting diagnosis codes from clinical notes for billing and insurance purposes
* Creating structured datasets from unstructured medical documentation
* Identifying and categorizing medications and their attributes in patient records
* Standardizing medical terminology across different healthcare systems using SNOMED CT codes

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Endpoint overview

**URL:** `POST https://api.writer.com/v1/tools/comprehend/medical`

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/tools/comprehend/medical' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data '{
      "content": "the symptoms are soreness, a temperature and cough", 
      "response_type": "SNOMED CT"
  }'
  ```

  ```python Python theme={null}
  import os
  from writerai import Writer

  client = Writer(
      # This is the default and can be omitted
      api_key=os.environ.get("WRITER_API_KEY"),
  )
  medical = client.tools.comprehend.medical(
      content="the symptoms are soreness, a temperature and cough",
      response_type="Entities",
  )
  print(medical.entities)
  ```

  ```javascript JavaScript theme={null}
  import Writer from 'writer-sdk';

  const client = new Writer({
    apiKey: process.env['WRITER_API_KEY'], // This is the default and can be omitted
  });

  async function main() {
    const medical = await client.tools.comprehend.medical({ content: 'the symptoms are soreness, a temperature and cough', response_type: 'Entities' });

    console.log(medical.entities);
  }

  main();
  ```
</CodeGroup>

### Request body

The request body includes the following parameters:

| Parameter       | Type   | Description                                |
| --------------- | ------ | ------------------------------------------ |
| `content`       | string | **Required.** The medical text to analyze. |
| `response_type` | string | **Required.** The desired response format. |

Response type options include:

* `Entities`: Returns medical entities with their categories.
* `RxNorm`: [RxNorm](https://www.nlm.nih.gov/research/umls/rxnorm/overview.html) provides normalized names and unique identifiers for medicines and drugs, allowing computer systems to communicate drug-related information efficiently and unambiguously.
* `ICD-10-CM`: [ICD-10-CM](https://www.cdc.gov/nchs/icd/icd-10-cm/index.html) is a standardized system used to code diseases and medical conditions (morbidity) data.
* `SNOMED CT`: [SNOMED CT](https://www.snomed.org/what-is-snomed-ct) is a standardized, multilingual vocabulary of clinical terminology that is used by physicians and other healthcare providers for the electronic exchange of health information.

### Response parameters

Returns an array of medical entities, where each entity includes:

| Parameter    | Type   | Description                                                |
| ------------ | ------ | ---------------------------------------------------------- |
| `category`   | string | The medical category of the entity                         |
| `text`       | string | The actual text that was identified                        |
| `score`      | float  | Confidence score for the entity (0-1)                      |
| `traits`     | array  | Array of trait objects with names and scores               |
| `concepts`   | array  | Array of medical concepts with codes and descriptions      |
| `attributes` | array  | Related attributes with their own scores and relationships |
| `type`       | string | The entity type                                            |

See the full [response schema](/api-reference/tool-api/comprehend-medical) for more details.

```json example response [expandable] theme={null}
{
  "entities": [
    {
      "category": "MEDICAL_CONDITION",
      "begin_offset": 17,
      "end_offset": 25,
      "text": "soreness",
      "traits": [
        {
          "score": 0.5752319693565369,
          "name": "HYPOTHETICAL"
        },
        {
          "score": 0.7299559712409973,
          "name": "SYMPTOM"
        }
      ],
      "concepts": [
        {
          "code": "71393004",
          "score": 0.9435068368911743,
          "description": "Soreness (finding)"
        },
        {
          "code": "279074008",
          "score": 0.27141574025154114,
          "description": "Sore skin (finding)"
        },
        {
          "code": "247348008",
          "score": 0.20372514426708221,
          "description": "Tenderness (finding)"
        },
        {
          "code": "410713007",
          "score": 0.18387910723686218,
          "description": "Sore sensation quality (qualifier value)"
        },
        {
          "code": "267102003",
          "score": 0.15431177616119385,
          "description": "Sore throat symptom (finding)"
        }
      ],
      "score": 0.7172441482543945,
      "attributes": [],
      "type": "DX_NAME"
    },
    {
      "category": "MEDICAL_CONDITION",
      "begin_offset": 29,
      "end_offset": 40,
      "text": "temperature",
      "traits": [
        {
          "score": 0.7299559712409973,
          "name": "HYPOTHETICAL"
        },
        {
          "score": 0.8787732124328613,
          "name": "SYMPTOM"
        }
      ],
      "concepts": [
        {
          "code": "703421000",
          "score": 0.4236489236354828,
          "description": "Temperature (observable entity)"
        },
        {
          "code": "386661006",
          "score": 0.4029766321182251,
          "description": "Fever (finding)"
        },
        {
          "code": "246508008",
          "score": 0.26857706904411316,
          "description": "Temperature (attribute)"
        },
        {
          "code": "56342008",
          "score": 0.26122674345970154,
          "description": "Temperature taking (procedure)"
        },
        {
          "code": "722490005",
          "score": 0.1763012409210205,
          "description": "Temperature (property) (qualifier value)"
        }
      ],
      "score": 0.8435389995574951,
      "attributes": [],
      "type": "DX_NAME"
    },
    {
      "category": "MEDICAL_CONDITION",
      "begin_offset": 45,
      "end_offset": 50,
      "text": "cough",
      "traits": [
        {
          "score": 0.9013108015060425,
          "name": "HYPOTHETICAL"
        },
        {
          "score": 0.9817302823066711,
          "name": "SYMPTOM"
        }
      ],
      "concepts": [
        {
          "code": "49727002",
          "score": 0.9173739552497864,
          "description": "Cough (finding)"
        },
        {
          "code": "263731006",
          "score": 0.20544156432151794,
          "description": "Coughing (observable entity)"
        },
        {
          "code": "247410004",
          "score": 0.18926720321178436,
          "description": "Painful cough (finding)"
        },
        {
          "code": "11833005",
          "score": 0.18911097943782806,
          "description": "Dry cough (finding)"
        },
        {
          "code": "135883003",
          "score": 0.1864289492368698,
          "description": "Cough with fever (finding)"
        }
      ],
      "score": 0.9584784507751465,
      "attributes": [],
      "type": "DX_NAME"
    }
  ]
}
```


# Mitigate bias in AI outputs
Source: https://dev.writer.com/home/mitigating_bias



## Introduction

In the era of artificial intelligence, ensuring that AI models produce unbiased and fair outputs has become a critical concern. Writer, one of the leading organizations in the field, takes this challenge seriously and employs a range of strategies to detect and mitigate biases in its AI models. In this article, we explore the technical methodologies employed by Writer to grapple with this complex issue.

## Mechanisms and methodologies for detecting and mitigating Bias

<Tabs>
  <Tab title="Data cleaning and preprocessing">
    At the heart of any machine learning model lies the data on which it's trained. Writer meticulously curates its training data, which is sourced from a mix of publicly available data from the Internet and data licensed from third parties. Text preprocessing techniques, such as removing sensitive content or flagging potential hotspots for bias, are employed before the data is used for training.
  </Tab>

  <Tab title="Annotation guidelines">
    The first layer of oversight comes in the form of human annotators who label the data. These annotators are guided by a stringent set of rules designed to counteract the introduction of bias. For example, they're trained to avoid favoring any political ideology, ethnicity, or other sociocultural factors when annotating the training data.
  </Tab>

  <Tab title="Auditing">
    After the initial training, the model is subjected to a rigorous auditing process. This involves running the model through a series of test cases designed to gauge its propensity for biased or unsafe content. These audits are often carried out by both internal teams and third-party organizations to ensure objectivity.
  </Tab>

  <Tab title="RLHF">
    The next step involves fine-tuning the model based on the results of the audit. Writer uses reinforcement learning from human feedback (RLHF) or similar techniques to adjust the model's parameters, helping it to make less biased decisions. Fine-tuning focuses on specific aspects like language nuances, sentiment interpretation, and context-aware decision-making.
  </Tab>

  <Tab title="Feedback loop">
    Writer has an active feedback loop with its beta user community. Reports of biased outputs are taken seriously and are used to further fine-tune the model. This makes the model more robust and adaptable to real-world applications.
  </Tab>
</Tabs>

## Sources of bias in training data

Writer models are trained on large datasets that are a snapshot of human culture and thought, collected by our team. While this helps the model to be versatile and knowledgeable, it also brings in the risk of the model inheriting the existing biases in society. Writer mitigates this by adding layers of scrutiny and control, both algorithmic and human, on the data used for training.

## Adapting to different contexts and languages

<Tabs>
  <Tab title="Context-aware fine-tuning">
    Writer is pioneering research in making its models more context-sensitive. This involves incorporating additional features into the model’s architecture that allows it to understand the specific context in which a text snippet appears, enabling more nuanced responses.
  </Tab>

  <Tab title="Language-specific models">
    Given the global reach of AI, Writer is also working on language-specific versions of its models. These models undergo fine-tuning with data that is representative of the linguistic and cultural idiosyncrasies of specific languages.
  </Tab>

  <Tab title="Annotator teams">
    To further the goal of international adaptability, Writer often employs annotators from various cultural backgrounds. This helps in creating a model that is less likely to favor any particular group.
  </Tab>
</Tabs>

## Conclusion

The challenge of eliminating bias in AI models is a complex and ongoing task. Writer employs a multi-faceted approach, combining data science, human oversight, and cutting-edge machine learning techniques, to tackle this critical issue. While there's always room for improvement, the methodologies adopted serve as a strong framework for mitigating bias in AI.


# Use another LLM as a tool
Source: https://dev.writer.com/home/model-delegation



With model delegation, you can use another Writer model as a tool in a [chat completion](/home/chat-completion) with Palmyra X4 and later models. The predefined LLM tool allows you to delegate specific tasks to domain-specific Writer models, such as `palmyra-fin`, `palmyra-med`, or `palmyra-creative`.

For example, in a chat application using Palmyra X5, you can delegate financial analysis tasks to the `palmyra-fin` model.

This guide helps you understand how to perform model delegation using the Writer API.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Tool structure

Use the LLM tool to delegate specific tasks to another model when using the [chat endpoint](/api-reference/completion-api/chat-completion). Using [tool calling](/home/tool-calling), you can specify the Writer model you want to use for a given task. When the primary chat model calls the LLM tool based on the user's input, it signals it in the chat API response.

To use the LLM tool, add it to the `tools` array in your `chat-completion` endpoint request.

The LLM tool object has the following structure:

| Parameter              | Type     | Description                                                         |
| ---------------------- | -------- | ------------------------------------------------------------------- |
| `type`                 | `string` | The type of tool, which is `llm` for LLM tool                       |
| `function`             | `object` | An object containing the tool's description and model               |
| `function.description` | `string` | A description of what the model will be used for.                   |
| `function.model`       | `string` | The [ID of the Writer model](/home/models) to be used for this tool |

<Note>
  To help the model understand when to use the tool, follow these best practices for the `function.description` parameter:

  * Indicate that the tool is a function that invokes an LLM
  * Specify the model's purpose and capabilities
  * Describe when the tool should be used

  An example description for a tool using the `palmyra-med` model:

  > "A function that invokes the LLM identified by the given model, specialized in answering medical queries. Any user request asking for medical advice should use this tool."
</Note>

<CodeGroup>
  ```bash cURL theme={null}
  "tools": [
      {
          "type": "llm",
          "function": {
              "description": "A function that will invoke the llm identified by the given model, specialized for financial analysis and reporting. Any user request asking for financial analysis should use this tool.",
              "model": "palmyra-fin"
          }
      }  
  ]
  ```

  ```python Python theme={null}
  tools = [{
      "type": "llm",
      "function": {
          "description": "A function that will invoke the llm identified by the given model, specialized for financial analysis and reporting. Any user request asking for financial analysis should use this tool.",
          "model": "palmyra-fin"
      }
  }]
  ```

  ```js JavaScript theme={null}
  const tools = [{
      type: "llm",
      function: {
          description: "A function that will invoke the llm identified by the given model, specialized for financial analysis and reporting. Any user request asking for financial analysis should use this tool.",
          model: "palmyra-fin"
      }
  }]
  ```
</CodeGroup>

<Note>
  You can only pass one prebuilt tool in the `tools` array at a time. However, you can pass multiple [custom tools](/home/tool-calling) in the same request.

  Prebuilt tools are:

  * LLM tool
  * [Vision tool](/home/vision-tool)
  * [Knowledge Graph tool](/home/kg-chat)
  * [Translation tool](/home/translation-tool)
</Note>

### Response format

When a chat completion uses the LLM tool, the response from the LLM tool is in the `llm_data` object. The `llm_data` object contains the following fields:

| Parameter | Type   | Description                                      |
| --------- | ------ | ------------------------------------------------ |
| `prompt`  | string | The prompt used by the LLM tool.                 |
| `model`   | string | The ID of the Writer model used by the LLM tool. |

Below is an example of the full response to a chat completion request that uses the LLM tool with `palmyra-med`.

<CodeGroup>
  ```json non-streaming response [expandable] {17} theme={null}
  {
    "id": "1234",
    "object": "chat.completion",
    "choices": [
      {
        "index": 0,
        "finish_reason": "stop",
        "message": {
          "content": "The recommended daily intake of calcium for a 30-year-old woman is 1,000 mg per day.",
          "role": "assistant",
          "tool_calls": null,
          "graph_data": {
            "sources": null,
            "status": null,
            "subqueries": null
          },
          "llm_data": {
            "prompt": "What is the recommended daily intake of calcium for a 30-year-old woman?",
            "model": "palmyra-med"
          },
          "image_data": null,
          "refusal": null
        },
        "logprobs": null
      }
    ],
    "created": 1741970653,
    "model": "palmyra-x5",
    "usage": {
      "prompt_tokens": 259,
      "total_tokens": 305,
      "completion_tokens": 46,
      "prompt_token_details": null,
      "completion_tokens_details": null
    },
    "system_fingerprint": "v1",
    "service_tier": null
  }
  ```

  ```json streaming response [expandable] {16} theme={null}
  {
      "id": "1234",
      "object": "chat.completion.chunk",
      "choices": [{
          "index": 0,
          "finish_reason": None,
          "message": {
              "content": "The",
              "role": "assistant",
              "tool_calls": None,
              "graph_data": {
                  "sources": None,
                  "status": None,
                  "subqueries": None
              },
              "llm_data": {
                  "prompt": "What is the recommended daily intake of calcium for a 30-year-old woman?",
                  "model": "palmyra-med"
              },
              "image_data": None,
              "refusal": None
          },
          "logprobs": None,
      "delta": {
          "content": "The",
          "role": "assistant",
          "tool_calls": None,
          "graph_data": {
              "sources": None,
              "status": None,
              "subqueries": None
          },
          "llm_data": {
              "prompt": "What is the recommended daily intake of calcium for a 30-year-old woman?",
              "model": "palmyra-med"
          },
          "image_data": None,
          "refusal": None
      },
      "logprobs": None
      }],
      "created": 1741970696,
      "model": "palmyra-x5",
      "usage": None,
      "system_fingerprint": "v1",
      "service_tier": None
  }
  ```
</CodeGroup>

## Usage example

Here's an example of how to use the LLM tool in your application. This example specifically delegates medical questions to the `palmyra-med` model.

### Create a tools array containing an LLM tool

To use the LLM tool, create a `tools` array that specifies the Writer model you want to use.

<CodeGroup>
  ```bash cURL theme={null}
  "tools": [
      {
          "type": "llm",
          "function": {
              "description": "A function that will invoke the llm identified by the given model, specialized in answering medical queries. Any user request asking for medical advice should use this tool.",
              "model": "palmyra-med"
          }
      }
  ]
  ```

  ```python Python theme={null}
  tools = [{
      "type": "llm",
      "function": {
          "description": "A function that will invoke the llm identified by the given model, specialized in answering medical queries. Any user request asking for medical advice should use this tool.",
          "model": "palmyra-med"
      }
  }]
  ```

  ```js JavaScript theme={null}
  const tools = [{
      type: "llm",
      function: {
          description: "A function that will invoke the llm identified by the given model, specialized in answering medical queries. Any user request asking for medical advice should use this tool.",
          model: "palmyra-med"
      }
  }]
  ```
</CodeGroup>

### Send the request using chat completions

Add the tools array to the chat endpoint call along with your array of messages. Setting `tool_choice` to `auto` allows the model to choose when to use the LLM tool, based on the user's question and the description of the tool.

This example streams the response as the model generates it.

If you are unfamiliar with the chat completions endpoint or streaming vs. non-streaming responses, learn more in the [chat completion guide](/home/chat-completion).

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "model": "palmyra-x5",
          "temperature": 0.7,
          "messages": [
              {
                  "role": "user",
                  "content": "What is the recommended daily intake of calcium for a 30-year-old woman?"
              }
          ],
          "tool_choice": "auto",
          "tools": [
              {
                  "type": "llm",
                  "function": {
                      "description": "A function that will invoke the llm identified by the given model, specialized in answering medical queries. Any user request asking for medical advice should use this tool.",
                      "model": "palmyra-med"
                  }
              }
          ],
          "stream": true
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "What is the recommended daily intake of calcium for a 30-year-old woman?"}]

  response = client.chat.chat(
      model="palmyra-x5", 
      messages=messages, 
      tools=tools,  # The tools array defined earlier.
      tool_choice="auto",
      stream=True
  )

  for chunk in response:
      if chunk.choices[0].delta.content is not None:
          print(chunk.choices[0].delta.content, end="", flush=True)
  ```

  ```js JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const messages = [{role: "user", content: "What is the recommended daily intake of calcium for a 30-year-old woman?"}];

  const response = await client.chat.chat({
      model: "palmyra-x5", 
      messages: messages, 
      tools: tools, // The tools array defined earlier.
      tool_choice: "auto",
      stream: true
  });

  for await (const chunk of response) {
      if (chunk.choices[0].delta.content) {
          process.stdout.write(chunk.choices[0].delta.content);
      }
  }
  ```
</CodeGroup>

By following this guide, you can use specialized, fine-tuned Writer models for specific tasks within your chat applications.

## Next steps

Learn about other prebuilt tools you can use in your chat applications:

* [Analyze images](/home/vision-tool)
* [Pass questions to a Knowledge Graph](/home/kg-chat)
* [Translate text](/home/translation-tool)


# Configure model parameters
Source: https://dev.writer.com/home/model-parameters



## Likelihood

WRITER models learn language by reading text from the internet. Given a sentence such as "I like to play with Legos", the model repeatedly predicts what the next token is:

```text  theme={null}

\*\*I [?]

I like [?]

I like to [?]

I like to play [?]

I like to play with [?]\*\*
```

The model learns that the word “to” is quite likely to follow the word “like” in English, and that the word “play” is likely to follow the word “with” and so on.

Likelihood refers to the probability that a given sequence of [tokens](/home/tokens), which can be words or characters, gets generated by the model. You can think of the likelihood of a token as a number that quantifies a model's level of surprise that this token appeared in a sentence.

If a token has a low likelihood, it means the model didn't expect this token to appear. Conversely, if a token has a high likelihood, the model was confident that it would appear.

You can use the likelihood score to evaluate the quality of the model's output, representing the model's confidence that a given output is the most likely sequence of tokens given the input prompt and the target data.

## Temperature

The same prompt may yield different outputs each time you hit "generate" and so, temperature is a parameter used to control the randomness and diversity of the generated output.

The temperature scale ranges from 0 to 1. A temperature of 1.0 means that the model is generating outputs with its normal level of confidence, based on the probabilities it has learned during training.

A higher temperature increases the randomness of the output, allowing for more diverse and unexpected results. A lower temperature makes the model more conservative in its predictions, generating outputs that are more likely to align with what it has learned during training.

Most people find that a temperature between 0.7 and 1 is a good starting point.

**Temperature defaults to 0.7** if not specified as an exact parameter

With longer prompts, the model becomes more confident in its predictions, so you can raise the temperature higher for a diverse and creative output without the output being too off topic. In contrast, using high temperatures on short prompts can lead to unstable outputs.

You can use lower temperature values for tasks like classification, entity extraction, or question answering, and use higher temperature values for tasks like content or idea generation.

## Top-k and top-p

Top-k sampling and top-p sampling are methods for picking the output tokens by controlling the quality and diversity of the generated output.

### Top-k

**Top-k is currently not an active parameter but if you believe your outputs could improve with this parameter, contact your Writer representative**

**Top-k defaults to 40, but it accepts any integer between 1 and 50,400.**

Top-k refers to selecting the k tokens with the highest predicted probabilities and then randomly selecting one of these k tokens to generate the next word. This method generates outputs that are more likely to be accurate, but may be less diverse.

Top-k refers to the number of tokens that get sampled, sorted by probability with all tokens beneath the `k`-th token not sampled. A lower value can improve quality by removing the long tail of less likely tokens and making it less likely to go off topic.

### Top-p

**Top-p defaults to 1 but accepts any number between 0 and 1.**

Top-p refers to selecting the top p% of the most likely tokens based on the predicted probabilities of the model, and then randomly selecting one of the top p tokens to generate the next word.

Top-p is an alternative way of controlling the randomness of the generated text. Generally, top-p provides better control where your model generates text with accuracy and correctness.

\*\*When modifying top-p, make sure that temperature is `1`. As a corollary, if you are modifying temperature, make sure that you set top-p to the default of `1` \*\*

Modifying both temperature and top-p from their defaults at the same time can lead to undesired results. The model first performs top-p sampling to narrow down the word selection, and then applies the temperature to adjust the remaining probabilities. This process can produce outputs that become either too constrained or too random, depending on your chosen values.

To strike a balance between control and diversity in text generation, it's generally recommended to modify top-p values or temperature values based on your desired outcome. Experimenting with different values and observing the generated outputs can help you determine which parameter suits your specific needs.

## `best_of`

**`best_of` defaults to `1`, but it accepts any integer between `1` and `5`**

In the context of language models, `best_of` is usually used in the context of [beam search](https://en.wikipedia.org/wiki/Beam_search), which is an algorithm used for generating sequences of words. Beam search explores multiple possible word sequences and selects the most promising ones based on a scoring mechanism.

In beam search, the `best_of` value refers to the number of top candidates that get considered at each step of the generation process. For example, if you set `best_of` to `3`, the algorithm considers the top 3 candidates at each step and proceeds with further exploration.

The higher the `best_of` value, the more candidates the LLM considers, which can increase the quality and accuracy of the output as well as the computational time and cost of the generation.


# Choose a model
Source: https://dev.writer.com/home/models

Choose the right Palmyra model for your needs. Compare capabilities, context windows, and pricing for X5, Fin, Med, Creative, and Vision models.

Whether you use no-code, Agent Builder, or APIs, you need to choose a model. Here is an overview of the Palmyra models and their capabilities.

## Model comparison

| Feature              | Palmyra X5                         | Palmyra X4                                | Palmyra X 003 Instruct                                         | Palmyra Vision                 | Palmyra Med                            | Palmyra Fin                                     | Palmyra Creative                                |
| -------------------- | ---------------------------------- | ----------------------------------------- | -------------------------------------------------------------- | ------------------------------ | -------------------------------------- | ----------------------------------------------- | ----------------------------------------------- |
| **Description**      | Our latest and most advanced model | Advanced language model for complex tasks | Highly proficient in generating precise and detailed responses | Designed for processing images | Language model tailored for healthcare | Developed specifically for the financial sector | Purpose-built for creative thinking and writing |
| **API model ID**     | `palmyra-x5`                       | `palmyra-x4`                              | `palmyra-x-003-instruct`                                       | `palmyra-vision`               | `palmyra-med`                          | `palmyra-fin`                                   | `palmyra-creative`                              |
| **Bedrock model ID** | `writer.palmyra-x5-v1:0`           | `writer.palmyra-x4-v1:0`                  | N/A                                                            | N/A                            | N/A                                    | N/A                                             | N/A                                             |
| **Pricing (Input)**  | \$0.60 / 1M tokens                 | \$2.50 / 1M tokens                        | \$7.50 / 1M tokens                                             | \$7.50 / 1M tokens             | \$5.00 / 1M tokens                     | \$5.00 / 1M tokens                              | \$5.00 / 1M tokens                              |
| **Pricing (Output)** | \$6.00 / 1M tokens                 | \$10.00 / 1M tokens                       | \$22.50 / 1M tokens                                            | See note\*                     | \$12.00 / 1M tokens                    | \$12.00 / 1M tokens                             | \$12.00 / 1M tokens                             |
| **Context window**   | 1M tokens                          | 128k tokens                               | 32k tokens                                                     | 8k tokens                      | 32k tokens                             | 128k tokens                                     | 128k tokens                                     |
| **Max output**       | 8,192 tokens                       | 4,096 tokens                              | 4,096 tokens                                                   | 4,096 tokens                   | 4,096 tokens                           | 4,096 tokens                                    | 4,096 tokens                                    |

<Note>
  * Palmyra Vision pricing: \$0.005 per image and \$7.50 per 1M tokens (text output)
  * All models are available in No-code, Agent Builder, and API, except Palmyra Vision, which is not available in Agent Builder. However, you can use [vision capabilities with Palmyra X5](/home/chat-with-images) in Agent Builder.
</Note>

## Model details

<AccordionGroup>
  <Accordion title="Palmyra X5" icon="comment" iconType="regular">
    <Tabs>
      <Tab title="Overview">
        Palmyra X5 is Writer's newest and most advanced model for building and scaling AI agents, featuring a 1 million token context window, adaptive reasoning, and industry-leading speed and cost efficiency.

        **Pricing**:

        * Input: \$0.60 per 1M tokens
        * Output: \$6.00 per 1M tokens

        **Content window**: 1M
      </Tab>

      <Tab title="Use cases and capabilities">
        Palmyra X5's 1M token context window further streamlines enterprise workflows and unlocks complex, multi-step use cases that weren't possible before.

        **Multi-step agentic workflows**

        * **Support documentation**: Classify requests, assess urgency, assign a human review, stage updates in a CMS, and publish after approval.
        * **Fund reporting**: Streamline the analysis and preparation of detailed reports on the performance and status of investment funds, using reporting and research data pulled in from third-party systems
        * **Content lifecycle management**: Flag content that could be outdated, generate suggested revisions, and share them for human review.

        **Large data requirements**:

        * **Customer feedback analysis**: Analyze large volumes of customer feedback to identify common themes, summarize sentiments, and generate actionable insights.
        * **Research and development**: Process and summarize multiple technical reports, research papers, and experimental data, accelerating innovation and product development.
        * **Financial reporting**: Process and summarize annual reports, SEC filings, and market analysis reports together at once to extract financial data, identify trends, and generate executive summaries.
        * **Legal document analysis**: Analyze lengthy legal documents, including contracts, patents, and compliance reports, to identify key clauses, flag potential risks, and ensure regulatory compliance.
        * **Medical records analysis**: Analyze and summarize large files of medical records containing structured and unstructured data, including patient records, clinical trial reports, audit reports, and more.
      </Tab>

      <Tab title="Benchmarking">
        Palmyra X5 demonstrates robust performance across a suite of industry-standard benchmarks, showcasing its capabilities in reasoning, retrieval, and domain-specific tasks.

        * **BBH (Big-Bench Hard)**: Evaluates complex reasoning and compositional logic. Palmyra X5 achieves a competitive score of 70.99%, aligning closely with top-tier models.
        * **GPQA (Graduate-Level Google-Proof Q\&A)**: Assesses the model's ability to answer challenging, graduate-level questions in biology, physics, and chemistry that are resistant to simple lookup strategies. X5's score of 47.20% indicates strong performance in scientific reasoning tasks.
        * **MMLU\_PRO**: Focuses on professional-level knowledge across various domains such as law, medicine, and finance. Palmyra X5 scores 65.02%, demonstrating its suitability for enterprise applications in regulated sectors.
        * **MATH\_HARD**: Tests symbolic reasoning and multi-step problem-solving abilities. X5's score of 71.57% showcases its proficiency in handling complex analytical tasks.
      </Tab>
    </Tabs>
  </Accordion>

  <Accordion title="Palmyra X4" icon="comment" iconType="regular">
    <Tabs>
      <Tab title="Overview">
        `palmyra-x4` is an advanced language model that excels in processing and understanding complex tasks. It's ideal for workflow automation, coding tasks, and data analysis.

        **Pricing**:

        * Input: \$2.50 per 1M tokens
        * Output: \$10.00 per 1M tokens

        **Content window**: 128k
      </Tab>

      <Tab title="Use cases and capabilities">
        * **Agents & actions**: Palmyra X4 acts as an advanced AI agent, capable of executing tasks beyond simple text generation by interacting with external systems like databases, applications, and other services. This enables it to perform real-time data updates and automate complex workflows.
        * **Retrieval-augmented generation (RAG)**: Equipped with RAG, Palmyra X4 can retrieve and incorporate relevant information from vast data sources, enhancing the model's accuracy and ensuring responses are always grounded in current, context-specific data.
        * **Code generation**: The model supports advanced code generation, enabling it to automate scripting and integrate seamlessly with various programming environments, optimizing workflows for technical teams.
        * **Tool calling**: Palmyra X4 is built to handle precise API interactions, allowing it to execute complex functions directly, making it a versatile tool for enterprise-level integrations and automated actions.
      </Tab>

      <Tab title="Benchmarking">
        Palmyra X4 consistently ranks at the top in structured output, API tool calling, and accuracy for complex, multi-step workflows.

        * **Top accuracy (ACC)**: Palmyra X4 achieves 78.76% accuracy in tool call identification and execution, leading the industry by nearly 20%.
        * **Structured call planning (AST)**: Palmyra X4 scores 87.93% in planning and organizing tool calls, accurately interpreting input, generating parameters, and sequencing steps.
        * **Execution performance (Exec)**: With an 88.27% score in executing tool calls, Palmyra X4 ranks highest in efficiently carrying out enterprise actions.
        * **Global benchmarks**: Palmyra X4 ranks in the world's top 10 on HELM Lite (86.1%) and HELM MMLU (81.3%), excelling across 57 subjects.
      </Tab>
    </Tabs>
  </Accordion>

  <Accordion title="Palmyra X 003 Instruct" icon="book" iconType="regular">
    <Tabs>
      <Tab title="Overview">
        `palmyra-x-003-instruct` is highly proficient in generating precise and detailed responses. It's particularly useful for applications that require fine-grained language generation.

        **Pricing**:

        * Input: \$7.50 per 1M tokens
        * Output: \$22.50 per 1M tokens

        **Content window**: 32k
      </Tab>

      <Tab title="Use cases and capabilities">
        * **Instruction-based content generation**: Palmyra X 003 excels at following detailed instructions to create structured documents, from reports and proposals to step-by-step guides, assisting with accuracy and consistency across workflows.
        * **Data-driven analysis**: Ideal for complex datasets, Palmyra X 003 can analyze and summarize information into concise, actionable insights, making it easy for teams to digest lengthy reports or research findings quickly.
        * **Multilingual support**: Palmyra X 003's multilingual capabilities allow it to generate and adapt content across multiple languages, supporting enterprises with global operations.
      </Tab>

      <Tab title="Benchmarking">
        Palmyra X 003 launched as the #3 model on Stanford's HELM benchmark and has since claimed the top spot in translation accuracy. Its industry-leading performance in multilingual tasks ensures precise, culturally relevant translations, making it a trusted choice for global organizations that require consistent and reliable content across languages.

        | Model                    | GSM8K | LegalBench | MedQA | WMT 2014 |
        | ------------------------ | ----- | ---------- | ----- | -------- |
        | Palmyra X V3 (72B)       | 0.831 | 0.709      | 0.684 | 0.262    |
        | PaLM-2 (Unicorn)         | 0.831 | 0.677      | 0.684 | 0.26     |
        | PaLM-2 (Bison)           | 0.61  | 0.654      | 0.547 | 0.241    |
        | Claude 3 Opus (20240229) | 0.924 | 0.662      | 0.775 | 0.24     |
      </Tab>
    </Tabs>
  </Accordion>

  <Accordion title="Palmyra Vision" icon="glasses" iconType="regular">
    <Tabs>
      <Tab title="Overview">
        `palmyra-vision` is specifically designed for processing images. It combines the power of natural language processing with computer vision techniques to analyze and generate textual descriptions of images. Palmyra Vision can be used for tasks such as image captioning, visual question answering, and image-to-text generation.

        **Pricing**:

        * Image: \$.005 per image
        * Video: \$.005 per second
        * Text: \$7.50 per 1M tokens

        **Content window**: 8k
      </Tab>

      <Tab title="Use cases and capabilities">
        * **Image-based compliance checks**: Palmyra Vision can identify and analyze visual elements helping enable you to meet your regulatory and brand guidelines and requirements.
        * **Product description generation**: Automatically generates detailed descriptions from product images, streamlining e-commerce workflows and enhancing catalog consistency.
        * **Chart and graph interpretation**: Transforms complex data visualizations into summarized, text-based insights, enabling quick analysis of trends and metrics in reports and presentations.
        * **Handwritten text extraction**: Accurately reads and digitizes handwritten notes or annotations, simplifying data entry and documentation processes.
      </Tab>

      <Tab title="Benchmarking">
        Palmyra Vision sets new standards in multimodal AI performance, excelling in key visual and text generation benchmarks.

        * **Visual Question Answering (VQAv2)**: Achieved an 84.4% accuracy rate, outperforming leading models like GPT-4V and Gemini 1.0 Ultra in interpreting and answering questions based on visual content.
        * **Image-text comprehension**: Consistently high performance in understanding and generating accurate text from diverse visual inputs, from scanned documents to complex graphics.
      </Tab>
    </Tabs>
  </Accordion>

  <Accordion title="Palmyra Med" icon="stethoscope" iconType="regular">
    <Tabs>
      <Tab title="Overview">
        `palmyra-med` is a language model tailored for the healthcare industry. It is an assistive tool for processing, summarizing, and understanding extensive medical texts, making it ideal for comprehensive medical document analysis, patient record summarization, and supporting medical research.

        This model is not designed to provide medical advice, and must not be used for any diagnostic or therapeutic purposes. It is not to be used in direct patient care. Any output generated by the model must always be reviewed and verified by a qualified and licensed physician, based on their professional judgement, before any use is made of it.

        **Pricing**:

        * Input: \$5.00 per 1M tokens
        * Output: \$12.00 per 1M tokens

        **Content window**: 32k
      </Tab>

      <Tab title="Use cases and capabilities">
        * **Medical coding**: Palmyra Med supports highly accurate retrieval and application of medical codes, including RxNorm for medications, ICD-10-CM for diagnoses, and SNOMED CT for medical concepts, making it a powerful tool for healthcare documentation and billing.
        * **Clinical decision support**: With healthcare-specific knowledge, Palmyra Med can assist in diagnostics and treatment planning, helping healthcare providers make informed, data-backed decisions.
        * **Document summarization and reporting**: Optimized for summarizing lengthy medical records and generating concise reports, Palmyra Med enhances efficiency in patient documentation and case review.
      </Tab>

      <Tab title="Benchmarking">
        Palmyra Med sets the industry standard in healthcare-specific performance, excelling across a range of medical benchmarks with unmatched accuracy and clinical relevance.

        * **Overall medical benchmarks**: Palmyra Med averaged 85.9% across all medical benchmarks, surpassing Med-PaLM-2 by nearly 2 percentage points. Unlike Med-PaLM-2, which requires multiple examples to reach similar scores, Palmyra Med achieved these results in a zero-shot setting, highlighting its advanced capabilities.
        * **Clinical knowledge and anatomy**: Scoring 90.9% in MMLU Clinical Knowledge and 83.7% in MMLU Anatomy, Palmyra Med demonstrates a strong understanding of clinical procedures and human anatomy, making it an invaluable tool for assisting with medical analsyis and treatment planning.
        * **Genetics and college medicine**: With scores of 94.0% in Medical Genetics and 84.4% in College Medicine, Palmyra Med excels in interpreting genetic data and applying complex medical knowledge, supporting use cases in assisting with genetic counseling and medical education.
        * **Biomedical research**: Palmyra Med achieved 80% on PubMedQA, showcasing its ability to extract and analyze information from biomedical literature, which is essential for research and evidence-based medical practices.
      </Tab>
    </Tabs>
  </Accordion>

  <Accordion title="Palmyra Fin" icon="money-bill" iconType="regular">
    <Tabs>
      <Tab title="Overview">
        `palmyra-fin` is a language model developed specifically for the financial sector. This model is an assistive tool for analyzing and synthesizing long financial documents, including comprehensive market reports, detailed investment analyses, and lengthy regulatory filings. With its ability to grasp complex financial narratives and perform deep contextual analysis, `palmyra-fin` is ideal for applications requiring a thorough understanding of extensive textual information.

        This model is not designed to assess the suitability of an investment or transaction, and must not be used directly to advise on or recommend any investment or financial transaction. Any output generated by the model must always be reviewed and verified by a qualified and licensed financial advisor, based on their professional judgment, before any use is made of it.

        **Pricing**:

        * Input: \$5.00 per 1M tokens
        * Output: \$12.00 per 1M tokens

        **Content window**: 128k
      </Tab>

      <Tab title="Use cases and capabilities">
        * **Market and financial analysis**: Palmyra Fin interprets and analyzes data trends, enabling financial analysts to generate insights and forecasts for strategic decision-making.
        * **Risk assessment**: With a deep understanding of financial language and terminology, Palmyra Fin helps assess risk factors, generating precise reports that aid in risk management compliance.
        * **Data summarization**: Palmyra Fin excels at summarizing complex financial documents, providing concise overviews and insights to support quick, informed decisions.
      </Tab>

      <Tab title="Benchmarking">
        Palmyra Fin leads the industry in financial expertise and benchmark performance, making it the top choice for finance-related AI applications.

        * **CFA Level III performance**: Palmyra Fin scored 73% on the multiple-choice section of a CFA Level III sample test, becoming the first AI model to pass this prestigious exam. For perspective, the average passing score is 60%, and less than half of test takers typically pass. This achievement marks a significant leap over general-purpose models like GPT-4, which scored only 33%.
        * **Long-fin-eval benchmark**: In real-world financial tasks, Palmyra Fin outperformed popular models such as Claude 3.5 Sonnet, GPT-4o, and Mixtral-8x7b on the long-fin-eval benchmark, showcasing its superior financial acumen and capability across diverse financial use cases.
      </Tab>
    </Tabs>
  </Accordion>

  <Accordion title="Palmyra Creative" icon="pen-fancy" iconType="regular">
    <Tabs>
      <Tab title="Overview">
        `palmyra-creative` is Writer's purpose-built language model, engineered to elevate creative thinking and writing across diverse professional contexts. With capabilities that amplify originality and adaptability, it caters to industries and teams where innovation drives success. Available via API, No-code tools, Agent Builder, and as an NVIDIA NIM microservice, Palmyra Creative is tailored to inspire bold ideas and solutions.

        **Pricing**:

        * Input: \$5.00 per 1M tokens
        * Output: \$12.00 per 1M tokens

        **Content window**: 128k
      </Tab>

      <Tab title="Use cases and capabilities">
        * **Imaginative brainstorming**: Palmyra Creative generates a wide range of unique, innovative ideas tailored to specific challenges. Whether brainstorming marketing campaigns or conceptualizing new products, it empowers users to think beyond the obvious.
        * **Enhanced storytelling**: The model transforms basic content into engaging, impactful narratives. From crafting compelling copy to simplifying technical explanations, Palmyra Creative ensures every story resonates with its audience.
        * **Retail**: Palmyra Creative empowers retailers to craft highly personalized marketing campaigns, design innovative loyalty programs, and develop engaging in-store experiences. For example, it can generate unique, on-brand promotional ideas or create compelling product descriptions that resonate with target audiences.
        * **Healthcare**: In healthcare, Palmyra Creative simplifies complex communications, inspires empathetic patient outreach strategies, and supports innovative research initiatives. It can help create accessible patient education materials, draft engaging wellness campaigns, or refine technical research papers for broader audiences.
        * **Finance**: For finance professionals, Palmyra Creative humanizes messaging, creates educational tools, and designs strategies to enhance portfolio performance. It can assist in simplifying complex financial concepts for clients, drafting engaging investment reports, or generating impactful outreach campaigns for wealth management firms.
      </Tab>

      <Tab title="Benchmarking">
        Measuring creativity is inherently challenging. Unlike traditional benchmarks that focus on accuracy or reasoning—like HELM or MMLU—creativity is subjective, messy, and thrives on adaptability and originality. Rather than fitting into rigid metrics, Palmyra Creative's impact is best demonstrated through comparisons with general-purpose models like Palmyra X4.

        Here, we showcase two examples that highlight Palmyra Creative's ability to transform workflows: brainstorming innovative strategies for a small-town bakery and refining a technical explanation to make it engaging and relatable.

        ### Example 1: Creative thinking

        **Prompt**: Imagine you're a struggling small-town bakery competing with a chain that opened across the street. Brainstorm unconventional strategies to win over customers without lowering prices.

        <Tabs>
          <Tab title="Palmyra Creative">
            The classic David vs. Goliath battle of the bakeries! Here are three unconventional strategies to help you, the plucky underdog, win over customers without sacrificing your margins:

            **Bake My Memory Experience**:
            Host free sensory baking sessions for seniors and individuals with memory loss. Recreate their favorite childhood treats and offer them for free. Word-of-Mouth will spread, and their families will follow.

            **Bake-Off with a Twist**:
            Host a baking competition where local businesses and groups compete to benefit a local charity. The winning team chooses the charity, and you provide a year's worth of free baked goods. Promote on social media and invite the community to cheer.

            **Breadwinner's Club Loyalty Program 2.0**:
            Ditch traditional loyalty cards. Create a "Breadwinner's Club" where customers earn "dough points" for completing baking challenges (try a new flavor, attend a class, share a photo). Redeem points for exclusive rewards, like a free custom cake or behind-the-scenes tour.
          </Tab>

          <Tab title="Palmyra X4">
            Absolutely, here are three unconventional strategies to help your small-town bakery compete with a chain:

            **Bakery Scavenger Hunt**:
            Organize a monthly scavenger hunt where participants have to find clues hidden around town that lead them back to your bakery. The winner gets a special prize, like a custom-designed cake or a free baking class. This not only creates excitement but also gets people talking about your bakery.

            **Bake-Off Challenges with Local Celebrities**:
            Host a bake-off challenge where local celebrities (like the mayor, a popular teacher, or a local athlete) compete against each other using your bakery's ingredients and recipes. Stream the event live on social media to generate buzz and engagement.

            **Personalized Baking Kits**:
            Offer DIY baking kits that include pre-measured ingredients and step-by-step instructions for customers to recreate your signature treats at home. This can be a fun family activity and also introduces your bakery's unique flavors to a wider audience.
          </Tab>
        </Tabs>

        ### Example 2: Creative writing

        **Prompt**: Write a guide for a programmer who wants to explain their AI side project to a grandparent. The explanation must be engaging, simple, and use humorous analogies, while avoiding technical jargon.

        <Tabs>
          <Tab title="Palmyra Creative">
            **Explaining AI to Grandma (or Grandpa) 101**

            **Step 1: Start with something familiar**
            "Hey Grandma, you know how you're amazing at recognizing my voice on the phone, even when I'm all grown up and sound like a stranger? That's kind of like what I've been working on with my computer project. But instead of voices, I'm teaching the computer to recognize patterns in things like pictures, words, and even conversations!"

            **Step 2: Introduce the "Super Smart Assistant"**
            "Imagine you had a super smart, super patient assistant who could help you with anything. You could show them a picture of a cat and say, 'What's that?' And they'd say, 'Oh, that's a cat!' But here's the cool part: the more pictures of cats you show them, the better they get at recognizing new pictures of cats they've never seen before!"

            **Step 3: Use a relatable example**
            "Think of it like when you were learning to bake your famous chocolate chip cookies. At first, you had to follow a recipe to the letter. But the more you baked, the more you could just look at the ingredients and the dough and say, 'Ah, yeah, I know exactly what to do!' That's kind of what I'm teaching the computer to do, but instead of cookies, it's learning to recognize patterns in data."

            **Step 4: Keep it light and fun**
            "Don't worry if it still sounds a bit like magic, Grandma! The important thing is that it's like having a really smart, really helpful friend who can assist us with all sorts of things. And who knows, maybe one day it'll even be able to recognize your famous cookie recipe just by looking at a picture!"
          </Tab>

          <Tab title="Palmyra X4">
            **Explaining Your AI Side Project to Grandma**

            **Step 1: Start with a Familiar Analogy**
            Imagine you're teaching a parrot to talk. You repeat words, and over time, the parrot learns to mimic you. AI is like a super smart parrot that can learn from lots of examples.

            **Step 2: Explain What AI Does**
            Just like how the parrot learns to say "Hello!" when you wave, AI can learn to recognize patterns. For example, it can learn to tell the difference between a cat and a dog in pictures.

            **Step 3: Describe Your Project**
            Let's say your project is about teaching AI to recognize different types of flowers. You can say, "I'm teaching the computer to be a flower expert. I show it lots of pictures of roses, daisies, and tulips, and it learns to tell them apart."

            **Step 4: Make It Relatable**
            You can joke, "It's like having a really helpful gardener who never forgets what each flower looks like, even if it's been a long time since they last saw it."

            **Step 5: Talk About the Benefits**
            Explain how this can be useful. For example, "This could help people who love gardening but have trouble remembering the names of all the flowers. They can just take a picture, and the AI will tell them what it is!"

            **Step 6: Keep It Light and Fun**
            End with a funny note, like, "And the best part is, unlike a real parrot, the computer won't squawk at you if you forget to feed it!"
          </Tab>
        </Tabs>
      </Tab>
    </Tabs>
  </Accordion>
</AccordionGroup>

## Using models with the Writer API

<Tabs>
  <Tab title="Chat completions">
    To select the Palmyra model you want to use for a chat completion, specify the model ID in the [`model` parameter](/api-reference/completion-api/chat-completion#body-model) of the request.

    Below is an example of specifying the `palmyra-x5` model in a chat completion request.

    <CodeGroup>
      ```bash cURL theme={null}
      curl --location 'https://api.writer.com/v1/chat' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
        "model": "palmyra-x5",
        "messages": [
          {
            "role": "user",
            "content": "Summarize GDPR compliance requirements for a cloud-based data storage provider"
          }
        ]
      }'
      ```

      ```python Python theme={null}
      from writerai import Writer

      # Initialize the client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      chat_completion = client.chat.completions.create(
        model="palmyra-x5",
        messages=[
          {
            "role": "user",
            "content": "Summarize GDPR compliance requirements for a cloud-based data storage provider"
          }
        ]
      )

      print(chat_completion.choices[0].message.content)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from 'writer-sdk';

      // Initialize the client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const chat_completion = await client.chat.completions.create({
        model: 'palmyra-x5',
        messages: [
          {
            "role": "user",
            "content": "Summarize GDPR compliance requirements for a cloud-based data storage provider"
          }
        ]
      });

      console.log(chat_completion.choices[0].message.content);
      ```
    </CodeGroup>

    You can also use prebuilt tools to interact with specialized LLMs within a general purpose chat completion request, or to use the Palmyra Vision model in a chat completion.

    See more details in the tool calling guides:

    * [LLM tool for calling specialized models](/home/model-delegation)
    * [Vision tool for analyzing images](/home/vision-tool)
  </Tab>

  <Tab title="Text generation">
    To select the Palmyra model you want to use for text generation, specify the model ID in the [`model` parameter](/api-reference/completion-api/text-generation#body-model) of the request.

    Below is an example of specifying the `palmyra-x5` model in a text generation request.

    <CodeGroup>
      ```bash cURL theme={null}
      curl --location 'https://api.writer.com/v1/completions' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
        "model": "palmyra-x5",
        "prompt": "Summarize GDPR compliance requirements for a cloud-based data storage provider"
      }'
      ```

      ```python Python theme={null}
      from writerai import Writer

      # Initialize the client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      text_generation = client.completions.create(
        model="palmyra-x5",
        prompt="Summarize GDPR compliance requirements for a cloud-based data storage provider"
      )

      print(text_generation.choices[0].text)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from 'writer-sdk';

      // Initialize the client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const text_generation = await client.completions.create({
        model: 'palmyra-x5',
        prompt: 'Summarize GDPR compliance requirements for a cloud-based data storage provider'
      });

      console.log(text_generation.choices[0].text);
      ```
    </CodeGroup>
  </Tab>
</Tabs>

Get started with the Writer API by signing up for a free account and following the [API quickstart](/home/quickstart).

## Deprecation policy

### Timeline for deprecation

* We'll announce the deprecation of a model at least three months in advance. This will give customers time to plan for the migration to the new model.
* We'll continue to support deprecated models for a period of time after they're deprecated. This will give customers time to migrate to the new model.
* We'll eventually stop supporting deprecated models. The timeline for this will vary depending on the model. We will announce the end of support for a deprecated model at least six months in advance.

### Deprecated models

| Model name             | Deprecation Date |
| ---------------------- | ---------------- |
| Palmyra Fin 32k        | 2025-03-03       |
| Palmyra X 002 32k      | 2024-09-06       |
| Palmyra X 32k Instruct | 2024-09-06       |
| Palmyra X 002 Instruct | 2024-09-06       |

### Migration path

* We'll provide customers with a migration path to the new model, including detailed documentation and support to help them migrate their applications.
* We'll also offer training and consulting services to help customers transition.


# Track usage and spend
Source: https://dev.writer.com/home/observability



AI Studio provides observability tools to help you understand how your organization is using AI Studio.

View your organization's usage and spend in the Consumption tab in AI Studio.

You can also view metrics and session logs for individual agents. See [Agent observability](/home/agent-observability) for more information.

## Consumption view

<Info>
  The Consumption view is only available to [organization admins](/home/account_management).
</Info>

The Consumption view in AI Studio gives you a detailed view of your usage and spend month-by-month across all agents.

To access this view, [log in to AI Studio](https://app.writer.com/aistudio) and click the **Consumption** tab in the left sidebar.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/consumption-sidebar.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=ab19b2ef2bb32d3fb54acce3836b7081" alt="Consumption view in AI Studio" data-og-width="276" width="276" data-og-height="322" height="322" data-path="images/home/consumption-sidebar.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/consumption-sidebar.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=edb4fdd6d2414c31b5380c8be62732c2 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/consumption-sidebar.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e79c1bf0189bf976cf7031ade91f1ebc 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/consumption-sidebar.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e4351b1596765558f41fcd825dff3e34 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/consumption-sidebar.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=2ce6eb112595b0db4256515f7d2cdfd8 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/consumption-sidebar.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=2b64ed70376a2f32dbd02a04abfa0c46 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/consumption-sidebar.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=26643b20a36917107d3025d31033ae03 2500w" />

You can switch between a cost view and an activity view, which shows the number of tokens used for each agent type. See below for more details about the data available in the [cost view](#cost-view) and the [activity view](#activity-view).

The image below shows the cost view for a sample organization.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/usage.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=0b036ff3e33d2b42f64c8e413e112f8c" alt="February 2025 usage report showing $1,509.645 total spend, broken down by agent type (API, Framework, No-code) and spend source (LLM models, Others)." data-og-width="1792" width="1792" data-og-height="1278" height="1278" data-path="images/home/usage.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/usage.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=02afe1392c24a6f6056ec24106c6dc6d 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/usage.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=8796c483e2f32fca8e3de5a99679e1fe 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/usage.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=95e0bbaa60262ad2127813f43136f2c4 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/usage.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=06b84e5f89c872b714a32c21915280d4 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/usage.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=d0e5f3e82a8509f40fdf544702d081f4 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/usage.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5beee59d9b168c588ebc617381a372dc 2500w" />

### Cost view

The cost view shows the following information:

* **Monthly usage-based spend**: The total cost of usage for the month, with a comparison to the previous month.
* **Spend by agent type**: A day-by-day breakdown of the cost of usage by agent type (API, Framework, and No-Code).
* **Spend breakdown**:
  * **LLM models**: The usage cost for each LLM model.
  * **Others**: The usage cost for all other services, such as Knowledge Graph hosting, web access, and optical character recognition (OCR).

### Activity view

The activity view shows the following information:

* **Monthly token usage**: The total number of tokens used for the month, with a comparison to the previous month.
* **Top users by token usage**: The top five users with the most token usage.
* **Top agents by token usage**: The top five agents with the most token usage.
* **Token usage by agent type**: A day-by-day breakdown of the token usage by agent type (API, Framework, and No-Code).
* **Token usage by model**: The total number of tokens used for each model.


# Palmyra Med vocabularies and entities
Source: https://dev.writer.com/home/palmyra-med-vocabularies



Palmyra Med supports the following medical vocabularies:

* Foundational Model of Anatomy
* Gene Ontology
* HUGO Gene Nomenclature Committee
* Human Phenotype Ontology
* ICD-10 Procedure Coding System
* ICD-10-CM (available for US users only)
* ICD-9-CM
* LOINC
* MeSH
* MedlinePlus Health Topics
* Metathesaurus Names
* NCBI Taxonomy
* NCI Thesaurus
* National Drug File
* Online Mendelian Inheritance in Man
* RXNORM
* SNOMED CT (available for US users only)

## Extracting entities, relations, and contextual attributes

Palmyra-Med uses context-aware models to extract medical entities, relations, and contextual attributes. Each text entity is extracted into a medical dictionary entry.

<Info>The maximum size of the medical text is 10,000 Unicode characters.</Info>

Palmyra-Med supports the following medical knowledge categories:

|                   |                                                                                                                                        |
| :---------------- | :------------------------------------------------------------------------------------------------------------------------------------- |
| BM\_UNIT          | Body measurement unit                                                                                                                  |
| BM\_VALUE         | Value of a body measurement                                                                                                            |
| BODY\_FUNCTION    | Function carried out by the human body                                                                                                 |
| BODY\_MEASUREMENT | A normal measurement of the human body, such as a vital sign                                                                           |
| LABORATORY\_DATA  | Results of testing a bodily sample                                                                                                     |
| LAB\_RESULT       | Qualitative description of laboratory data, such as increased, decreased, positive, or negative                                        |
| LAB\_UNIT         | Unit of measurement for a laboratory value                                                                                             |
| LAB\_VALUE        | Value of an instance of laboratory data                                                                                                |
| MEDICAL\_DEVICE   | Physical or virtual instrument                                                                                                         |
| MEDICINE          | Drug or other preparation for treatment or prevention of disease                                                                       |
| MED\_DOSE         | Medication dose                                                                                                                        |
| MED\_DURATION     | Medication duration                                                                                                                    |
| MED\_FORM         | Physical characteristics of the specific medication                                                                                    |
| MED\_FREQUENCY    | How often the medication is taken                                                                                                      |
| MED\_ROUTE        | Body location at which the medication is administered                                                                                  |
| MED\_STATUS       | For an existing medication, status can be a modifier such as "continue", "start", "restart", "stop", "switch", "increase", "decrease". |
| MED\_STRENGTH     | Amount of active ingredient in a dose of medication                                                                                    |
| MED\_TOTALDOSE    | Quantity of medication to take at one time                                                                                             |
| MED\_UNIT         | Unit of measurement for the active ingredient in a medication                                                                          |
| PROBLEM           | Medical condition, including findings and diseases                                                                                     |
| PROCEDURE\_RESULT | Results of a procedure                                                                                                                 |
| PROCEDURE         | Diagnostic or treatment procedure                                                                                                      |
| PROC\_METHOD      | Method in which a procedure is conducted                                                                                               |
| SEVERITY          | Severity of the medical condition                                                                                                      |
| SUBSTANCE\_ABUSE  | Abuse of a psychoactive substance                                                                                                      |


# Parse a PDF
Source: https://dev.writer.com/home/parse-pdf



<Warning>
  **Deprecation notice**: The [parse PDF API endpoint](/api-reference/tool-api/pdf-parser) at `/v1/tools/pdf-parser/{file_id}` is deprecated and will be removed on **December 22, 2025**.

  **Migration path**: We plan to introduce a prebuilt PDF parsing tool for chat completions that will provide similar functionality. This tool will work similarly to other prebuilt tools like the [Vision tool](/home/vision-tool) or [LLM tool](/home/model-delegation). We will provide more details about this alternative when it becomes available.
</Warning>

The [PDF parser endpoint](/api-reference/tool-api/pdf-parser) converts PDF documents into other formats. This is useful when you need to extract and process text content from PDF files for further analysis or integration into your workflow.

## Use cases

* Converting research papers from PDF to searchable text for analysis
* Extracting content from business reports for data processing
* Converting PDF documentation into markdown format for web publishing
* Making archived PDF documents searchable and analyzable
* Automating data extraction from PDF forms and invoices

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Endpoint overview

**URL:** `POST https://api.writer.com/v1/tools/pdf-parser`

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/tools/pdf-parser/<file-id>' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data '{
    "format": "markdown"
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.tools.parse_pdf(
      file_id="file_id",
      format="text",
  )
  print(response.content)
  ```

  ```javascript JavaScript theme={null}
  import Writer from 'writer-sdk';

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  async function main() {
    const response = await client.tools.parsePdf('file_id', { format: 'text' });

    console.log(response.content);
  }

  main();
  ```
</CodeGroup>

### Path parameters

| Parameter | Description                               |
| --------- | ----------------------------------------- |
| `file_id` | The ID of the uploaded PDF file to parse. |

Before using the PDF parser, you'll need to upload your PDF file to the Writer API and obtain its file ID. Learn more about how to upload files with the [Files API](/home/files).

### Request body

The request body includes the following parameters:

| Parameter | Type     | Description                                             |
| --------- | -------- | ------------------------------------------------------- |
| `format`  | `string` | The desired output format. Can be `text` or `markdown`. |

### Response parameters

Returns an object with a `content` field containing the extracted text in the specified format.

```json JSON theme={null}
{
  "content": "..."
}
```


# Pricing
Source: https://dev.writer.com/home/pricing

View pricing for Writer AI models. Compare costs per million tokens for Palmyra models including X5, X4, Med, Fin, Creative, and Vision.

<Info>
  For any custom pricing, **[contact Sales](https://go.writer.com/contact-sales)**.
</Info>

## Base model

The table below outlines our [base model](/home/models#models), which is focused on text input and output. The input and output prices are displayed per 1M tokens unless otherwise specified.

| Model name                                                    | Model ID                 | Input / 1M | Output / 1M |
| ------------------------------------------------------------- | ------------------------ | ---------- | ----------- |
| [Palmyra X5](/home/models#palmyra-x5)                         | `palmyra-x5`             | \$0.60     | \$6.00      |
| [Palmyra X4](/home/models#palmyra-x4)                         | `palmyra-x4`             | \$2.50     | \$10.00     |
| [Palmyra X 003 Instruct](/home/models#palmyra-x-003-instruct) | `palmyra-x-003-instruct` | \$7.50     | \$22.50     |
| [Palmyra Med](/home/models#palmyra-med)                       | `palmyra-med`            | \$5.00     | \$12.00     |
| [Palmyra Fin](/home/models#palmyra-fin)                       | `palmyra-fin`            | \$5.00     | \$12.00     |
| [Palmyra Creative](/home/models#palmyra-creative)             | `palmyra-creative`       | \$5.00     | \$12.00     |

## Palmyra Vision

The table below outlines pricing for [Palmyra Vision](/home/models#palmyra-vision), which takes in a variety of inputs and produces text as an output. The input and output price is for 1M tokens unless otherwise specified.

| Type  | Input          | Output / 1M |
| ----- | -------------- | ----------- |
| Image | \$0.005/image  | \$8.00      |
| Video | \$0.005/second | \$8.00      |
| Text  | \$7.50/1M      | \$22.50     |

## Knowledge Graph

The table below outlines pricing for [Knowledge Graph](/home/knowledge-graph), Writer's graph-based RAG.

| Capability              | Cost                          |
| ----------------------- | ----------------------------- |
| Knowledge Graph hosting | \$0.085/gb of storage per day |
| Data extraction         | \$0.00015/page                |
| File parsing (OCR)      | \$0.055/page                  |
| Web Access              | \$0.12/page                   |

Data connectors for Knowledge Graph are available for Enterprise plans. To learn, more please [contact Sales](https://go.writer.com/contact-sales).

## Tools API

The table below outlines pricing for the [Tools API](/api-reference/tool-api/), which provides utilities for pre-processing and comprehending text.

| Tool                                                             | Cost                                        |
| ---------------------------------------------------------------- | ------------------------------------------- |
| [AI detection](/api-reference/tool-api/ai-detect)                | \$0.03 per request                          |
| [Medical comprehend](/api-reference/tool-api/comprehend-medical) | \$0.02 per 1M words input (no output costs) |
| [PDF parser](/api-reference/tool-api/pdf-parser)                 | \$0.055/page                                |

## Translation API

The [Translation API](/api-reference/translation-api/translate) provides utilities for translating text. The cost is:

* **Input**: \$20.00/100k words

## Deprecated models

The table below show pricing for deprecated models. See the [deprecation policy](/home/models#deprecation-policy) for more information.

| Model name             | Deprecation Date | Input / 1M | Output / 1M |
| ---------------------- | ---------------- | ---------- | ----------- |
| Palmyra Fin 32k        | 2025-03-03       | \$5.00     | \$12.00     |
| Palmyra X 002 32k      | 2024-09-06       | \$1.00     | \$2.00      |
| Palmyra X 32k Instruct | 2024-09-06       | \$1.00     | \$2.00      |
| Palmyra X 002 Instruct | 2024-09-06       | \$1.00     | \$2.00      |


# Secure prompts against attacks
Source: https://dev.writer.com/home/prompt_injections



Security measures against prompt injections, jailbreak attacks, and secrets leakage

## Introduction

As AI systems like Writer models become increasingly integrated into a wide range of applications, the importance of securing them against various types of attacks becomes paramount. In this article, we delve into the technical details of how Writer safeguards its AI models against prompt injections, jailbreak attempts, and the leakage of sensitive information.

## Measures against prompt injections

<Tabs>
  <Tab title="Input sanitization">
    One of the first lines of defense is input sanitization, where incoming prompts are screened for potentially malicious code or harmful strings. Sophisticated Natural Language Processing (NLP) techniques, combined with standard cybersecurity measures, are used to detect and remove or neutralize suspicious inputs.
  </Tab>

  <Tab title="Rate limiting">
    To prevent brute-force attacks and other malicious activities, Writer often implements <a href="/api-reference/rate-limits">rate limiting</a> on the API requests. This ensures that a user can't overload the system with a large number of potentially harmful prompts in a short amount of time.
  </Tab>

  <Tab title="RBAC">
    Role-cased access control (RBAC) to more advanced or potentially risky functionalities is restricted based on roles. This prevents unauthorized users from injecting malicious prompts that could potentially exploit these functionalities.
  </Tab>
</Tabs>

## Safeguards against jailbreak attacks

<Tabs>
  <Tab title="Runtime environment isolation">
    The runtime environment in which the AI models operate is isolated from the rest of the system. This isolation is often achieved using containerization technologies like Docker, which limit the resources and system calls available to the running model.
  </Tab>

  <Tab title="Anomaly detection systems">
    Advanced anomaly detection systems are put in place to monitor the behavior of the AI models in real-time. Any unusual patterns or inconsistencies could trigger alerts, initiating immediate investigation and potential shutdown of the affected instance.
  </Tab>

  <Tab title="Code review and static analysis">
    Before deployment, the codebase undergoes rigorous reviews and static analysis to ensure that there are no vulnerabilities that could be exploited to "jailbreak" the AI system.
  </Tab>
</Tabs>

## Measures against secrets leakage

<Tabs>
  <Tab title="Encryption and secure storage">
    All sensitive information, including security keys and credentials, is encrypted using state-of-the-art encryption algorithms. These encrypted secrets are stored in secure vaults that are accessible only to authorized personnel.
  </Tab>

  <Tab title="Zero trust architecture">
    A Zero trust architecture is employed, which means that every request or interaction with the AI system is treated as potentially malicious until proven otherwise. This adds an extra layer of security against unauthorized access and data leakage.
  </Tab>
</Tabs>

## Conclusion

Security is a multi-faceted challenge that requires a holistic approach. Writer employs a combination of advanced technologies and best practices to safeguard its AI models against prompt injections, jailbreak attacks, and the leakage of sensitive information. While no system can be 100% secure, these measures provide a robust framework for identifying, mitigating, and responding to various security threats.


# Write effective prompts
Source: https://dev.writer.com/home/prompting

Master prompting fundamentals and advanced techniques. Learn directive writing, context inclusion, few-shot prompting, and chain-of-thought reasoning.

export const PromptComponent = ({prompt}) => <div>
    <p class="prompts">{prompt}</p>
  </div>;

This guide covers the [fundamentals](/home/prompting#fundamentals) behind prompting strategies and discusses some [advanced techniques](/home/prompting#advanced-techniques).

For in-depth information on prompting, see the Writer [prompt crafting guide](https://writer.com/guides/prompt-crafting/).

## Fundamentals

<CardGroup cols={2}>
  <Card title="Directive writing" icon="pencil" color="currentcolor">
    Be direct and to the point:

    <br />

    <br />

    <PromptComponent prompt={`Write a short summary of the article titled "The Impact of Artificial Intelligence on Employment"`} />
  </Card>

  <Card title="Inclusive prompts" icon="users" color="currentcolor">
    Include your audience in your prompt:

    <br />

    <br />

    <PromptComponent prompt={`Explain the implications of the recent changes in tax laws for small business owners in California.`} />
  </Card>

  <Card title="Structured formatting" icon="hashtag" color="currentcolor">
    Format your prompt with *### Instruction ###*, followed by *### Question
    \###*:

    <br />

    <br />

    <p class="prompts">
      <strong>### Instruction ###</strong> <br />Write a poem in the style of
      Robert Frost. <br />

      <br />

      <strong>### Question ###</strong>
      <br /> What's the poem about?
    </p>
  </Card>

  <Card title="Task breakdown" icon="list-check" color="currentcolor">
    Break down complicated tasks into multiple prompts:

    <br />

    <br />

    <PromptComponent prompt={`First, provide a brief overview of derivatives. Then, explain how it's related to credit risk.`} />
  </Card>

  <Card title="Positive language" icon="thumbs-up" color="currentcolor">
    Use directives like "do" instead of "don't":

    <br />

    <br />

    <PromptComponent prompt={`Do provide an analysis of the potential benefits and drawbacks of using renewable energy sources in the manufacturing industry, focusing on the economic, environmental, and social impacts.`} />
  </Card>

  <Card title="Mandatory instructions" icon="triangle-exclamation" color="currentcolor">
    Use phrases like *You MUST*:

    <br />

    <br />

    <PromptComponent prompt={`You must provide a step-by-step guide to setting up a WordPress website, including domain registration, web hosting, and content creation.`} />
  </Card>

  <Card title="Penalty warning" icon="gavel" color="currentcolor">
    Use phrases like *You'll be penalized*:

    <br />

    <br />

    <PromptComponent prompt={`You’ll be penalized if you don't include at least three different methods for solving the following math problem: Find the area of a circle with a radius of 5 units.`} />
  </Card>

  <Card title="Natural responses" icon="comments" color="currentcolor">
    Request a simple response:

    <br />

    <br />

    <PromptComponent prompt={`Please provide a brief explanation of the difference between a virus and a bacterium, answering in a natural, human-like manner.`} />
  </Card>

  <Card title="Unbiased descriptions" icon="scale-balanced" color="currentcolor">
    Make sure that your answer is unbiased and doesn’t rely on stereotype:

    <br />

    <br />

    <PromptComponent prompt={`Please describe the cultural significance of sushi in Japan, making sure that your answer is unbiased.`} />
  </Card>

  <Card title="Educational writing" icon="book-open" color="currentcolor">
    To write an essay, text, paragraph, article, or any detailed text:

    <br />

    <br />

    <PromptComponent prompt={`Write a detailed essay for me on the history of the monetary policy.`} />
  </Card>

  <Card title="Style consistency" icon="typewriter" color="currentcolor">
    Improve the tone of the text to make the writing style more
    professional:

    <br />

    <br />

    <PromptComponent prompt={`Revise the following paragraph to improve its grammar and vocabulary, but make sure that the writing style remains formal.`} />
  </Card>

  <Card title="Creative writing" icon="pen-fancy" color="currentcolor">
    I'll give you the beginning of a story. Finish it and keep the flow
    consistent:

    <br />

    <br />

    <PromptComponent prompt={`As the sun began to set, the sky turned a deep shade of orange. The birds returned to their nests, and the crickets started to chirp.`} />
  </Card>

  <Card title="Linguistic mimicry" icon="copy" color="currentcolor">
    Use the same language as the following paragraph to explain the importance
    of exercise:

    <br />

    <br />

    <PromptComponent prompt={`The practice of meditation has been around for thousands of years. It's a way to calm the mind and body, and it can be done almost anywhere.`} />
  </Card>

  <Card title="Precise instructions" icon="ruler" color="currentcolor">
    Clearly state the requirements that the model must follow to produce
    content, in the form of keywords or instructions. <br />

    <br />

    <PromptComponent prompt={`Write a short summary of the article titled 'The Impact of AI on Employment'. Ensure that the summary is no longer than 150 words and includes the main arguments.`} />
  </Card>
</CardGroup>

## Advanced techniques

<CardGroup cols={1}>
  <Card title="Example driven prompts" icon="check" color="currentcolor">
    Use example-driven (few-shot) prompting:

    <br />

    <p class="prompts">
      Provide a list of idioms in English, along with their meanings and example
      sentences.

      <br />

      Here is an example for the output: <br />

      <br />

      <strong>An idiom</strong>: 'Break a leg' <br />
      <strong>Meaning</strong>: Good luck <br />
      <strong>Example sentence</strong>: 'I'm sure you'll do great in your interview.
      Break a leg!'
    </p>
  </Card>

  <Card title="Chain-of-thought Prompts" icon="thought-bubble" color="currentcolor">
    Combine chain-of-thought (CoT) prompts with few-shot prompts:

    <br />

    <p class="prompts">
      <strong>System instruction:</strong> Create a product detail page for a
      fictional innovative smartphone by a retailer known as "TechTrend
      Electronics."

      <br />

      <strong>Prompt 1:</strong> Start by describing the unique features of the smartphone,
      such as its solar-powered battery, triple-lens camera system, and foldable
      screen technology.

      <br />

      <strong>Prompt 2:</strong> Next, outline the benefits of these features
      for users, like extended battery life, exceptional photo quality, and
      enhanced device portability.

      <br />

      <strong>Prompt 3:</strong> Conclude with crafting compelling product descriptions
      and a call-to-action that entices customers to make a purchase during the upcoming
      holiday sale.
    </p>
  </Card>

  <Card title="Delimited prompts" icon="text" color="currentcolor">
    Use delimiters to structure text:

    <br />

    <p class="prompts">
      Summarize a series of healthcare claims documents for a fictional
      healthcare company, 'HealthFirst Solutions', using the following delimiter `\n`
      to separate different sections of the summary:

      <br />

      <strong>Claim Number:</strong> 123456789 `\n` <br />
      <strong>Date of Service:</strong> January 1, 2024 `\n` <br />
      <strong>Diagnosis:</strong> Acute sinusitis `\n` <br />
      <strong>Total Claimed:</strong> \$300 `\n` <br />
      <strong>Status:</strong> Pending review `\n` <br />
    </p>
  </Card>
</CardGroup>


# Quickstart
Source: https://dev.writer.com/home/quickstart

Make your first API call to Writer. Create an API key and generate text using the chat completion endpoint in minutes.

This guide helps you make your first API calls to the Writer API. You'll create an API key in [AI Studio](https://app.writer.com/aistudio) and begin making API calls to generate text using the [chat completion endpoint](/api-reference/completion-api/chat-completion).

## Get an API key

Before you can make API calls, you need to create an API key in [AI Studio](https://app.writer.com/aistudio).

<Steps>
  <Step title="Create an API agent">
    From the [AI Studio home page](https://app.writer.com/aistudio), navigate to the **API Keys** page on the left sidebar.
    <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=23be0594b7deaa8ac370e127772dd8e0" alt="" data-og-width="442" width="442" data-og-height="626" height="626" data-path="images/api/select-api-keys.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=c88f7a22b6abfac0ef61c50c39f94b6b 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=006fcf4047adb0c945a3451ccdc0556f 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=7f5aee322948820bee554a15bf783fa7 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=f79a1f28a3bd065c3a3854fc559f1d2d 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=0c79a2ebc12f55be894a88182df0bb4f 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/select-api-keys.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=42ac805a843c095506c35c236d1ba0e0 2500w" />
  </Step>

  <Step title="Create an API agent">
    Click the **Create API agent** button in the top right corner of the page.
    <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=d7db42a5e42ec2b01bf096b4f50bb932" alt="" data-og-width="494" width="494" data-og-height="134" height="134" data-path="images/api/create-api-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e312e9748f45d6d3237af714dfd1ad6a 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=83bb18a636e355b2869d7b06968c7e47 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=8b57beeba59fd30968dc2b59c4c5bfb5 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=0fed2a886091403438deaf2bd7ed4452 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=618f819d9cebd7d4cec269ab7519c3a1 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/create-api-agent.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=e63e61559077b2e555251de6480e2347 2500w" />
  </Step>

  <Step title="Configure the agent">
    Click the title of the agent to edit it and provide a **short description** to help you keep track of what it does.
    <img src="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=824cea2266ac8e6f9d694ee9d9d329b0" alt="" data-og-width="866" width="866" data-og-height="534" height="534" data-path="images/api/rename-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=280&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=78d3d98187db5806c4715e3a3546bbe3 280w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=560&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=44ecd07ca5e14a963280247b0d3aa115 560w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=840&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=b3b72f86fc6076fa8ad880a94be57162 840w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=1100&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=ac0fe2dbd179bfc976aa388318442d3f 1100w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=1650&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=91eea940cee0a56efc9bf7e2ab4214cf 1650w, https://mintcdn.com/writer/Ph7gAl4exSh0IC1l/images/api/rename-agent.png?w=2500&fit=max&auto=format&n=Ph7gAl4exSh0IC1l&q=85&s=0e3d67a920ff93aa1037bfd67f69f3f8 2500w" />
  </Step>

  <Step title="Get your API key">
    Under **API keys** there is a key named `Production`. Click the eye icon to view the key or **Copy** to copy the key.

    <Warning>You cannot view the API key value after creating it, so make sure to copy it and keep it secure.</Warning>

    You can generate a new key that's scoped to the same capabilities as the original key any time from the API agent's page.
  </Step>
</Steps>

<Tip>Store the API key in a secure location, such as a `.env` file.</Tip>

You can now make calls to the Writer API using this API key as the `Bearer` token in the header:

```
Authorization: Bearer <api-key>
```

Learn more about managing API keys in the [API keys guide](/api-reference/api-keys).

## Make your first API call

Below is an example of an API call to the [chat completion endpoint](/home/chat-completion). It completes a single-turn chat completion, where the user provides a message and the AI assistant generates a response. The request is non-streaming and waits until the response is complete before returning.

```bash  theme={null}
curl --location 'https://api.writer.com/v1/chat' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer <your-api-key>' \
--data '{
    "model": "palmyra-x5",
    "messages": [
        {
            "role": "user",
            "content": "Write a one sentence product description for a cozy, stylish sweater suitable for both casual and formal occasions"
        }
    ]
}'
```

The response is a JSON object with a `choices` array. The `message.content` field of the first choice contains the generated text. The `message.role` field indicates that the message is an AI assistant message.

```json  theme={null}
{
  "id": "78766762-bd30-4a42-bb2b-e0b35c608217",
  "object": "chat.completion",
  "choices": [
    {
      "index": 0,
      "finish_reason": "stop",
      "message": {
        "content": "This versatile, cozy sweater blends warmth and elegance with its soft knit and refined design, making it perfect for both casual days and formal evenings.",
        "role": "assistant",
        "tool_calls": null,
        "graph_data": {
          "sources": null,
          "status": null,
          "subqueries": null
        },
        "llm_data": null,
        "image_data": null,
        "refusal": null
      },
      "logprobs": null
    }
  ],
  "created": 1740711212,
  "model": "palmyra-x5",
  "usage": {
    "prompt_tokens": 50,
    "total_tokens": 79,
    "completion_tokens": 29,
    "prompt_token_details": null,
    "completion_tokens_details": null
  },
  "system_fingerprint": "v1",
  "service_tier": null
}
```

<Info>In a streaming response, the structure of the response is similar. However, the content of the streamed response is returned in a `choices[0].delta.content` field, rather than the `choices[0].message.content` field. Learn more about streaming responses in the [chat completion guide](/home/chat-completion).</Info>

You can customize your request to the chat completion endpoint by adding or updating parameters to the request body. Learn more about the different parameters in the [chat completion endpoint API reference](/api-reference/completion-api/chat-completion).

## Next steps

Now that you've made your first API call, learn how to use [the Writer SDKs](/home/sdks) to make calls to the Writer API in your applications. Or, learn more about building with the chat completion endpoint:

* Learn how to build a multi-turn, conversational AI app using the [chat completion guide](/home/chat-completion)
* See the full [chat completion endpoint API reference](/api-reference/completion-api/chat-completion)


# Research
Source: https://dev.writer.com/home/research





# SDKs
Source: https://dev.writer.com/home/sdks

Install and use Writer SDKs for Python and Node.js. Get started with code examples and learn how to integrate Writer AI into your applications.

This guide helps you get started with the Writer SDKs. Follow these steps to install the SDKs and perform basic operations.

### Prerequisites

<Tabs>
  <Tab title="Python SDK">
    * Python 3.7+
    * [pip](https://pypi.org/project/pip/)
    * A Writer API key
  </Tab>

  <Tab title="Node SDK">
    * Node.js
    * [`npm`](https://www.npmjs.com/get-npm)
    * A Writer API key
  </Tab>
</Tabs>

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

### Install the SDK

Open your terminal or command prompt and install the Writer SDK:

<CodeGroup>
  ```sh Python theme={null}
  pip install writer-sdk
  ```

  ```sh Node theme={null}
  npm install writer-sdk
  ```
</CodeGroup>

## Initialize the client

To initialize the client, import the Writer SDK and create an instance of the `Writer` class.

We recommend setting your API key in an environment variable called `WRITER_API_KEY`. When you initialize the Writer client, the client looks for the `WRITER_API_KEY` environment variable automatically. You can also pass your API key directly to the client.

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()
  ```

  ```js JavaScript theme={null}
  import { Writer } from 'writer-sdk';
  // Initialize the client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();
  ```
</CodeGroup>

## Make a chat completion request

Once you've initialized the client, you can make a request to the Writer API. The following example shows how to make a [chat completion request](/home/chat-completion) to generate a poem:

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  client = Writer()

  response = client.chat.chat(
      messages=[{ "content": "Write a short poem about Python", "role": 'user' }],
      model="palmyra-x5"
  )

  print(response.choices[0].message.content)
  ```

  ```js JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  const client = new Writer();

  const response = await client.chat.chat({
      messages: [{ content: "Write a short poem about JavaScript", role: 'user' }],
      model: "palmyra-x5"
  });

  console.log(response.choices[0].message.content);
  ```
</CodeGroup>

## Next steps

Now that you're set up with the SDKs, start building with [chat completions](/home/chat-completion) or [text generation](/home/text-generation).

You can also use the [API reference](/api-reference) to learn more detailed information about available endpoints.


# Stream responses from the API
Source: https://dev.writer.com/home/streaming

Stream API responses in real-time with Server-Sent Events. Reduce latency and display generated content as it's created for better user experience.

The Writer API supports streaming responses from the API. Streams use [Server-Sent Events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent%5Fevents/Using%5Fserver-sent%5Fevents) so that you can display content as the API generates it in real time.

Streaming improves user experience by reducing latency from the time the user submits a request to the time the response is available.

## Overview

To stream a response from the API, set the `stream` parameter to `true` in the request body.

The following endpoints support streaming:

* [Text generation](/api-reference/completion-api/text-generation#body-stream)
* [Chat completions](/api-reference/completion-api/chat-completion#body-stream)
* [Generate from no-code agent](/api-reference/application-api/applications#body-stream): Currently, only no-code research agents support streaming.
* [Knowledge Graph question](/api-reference/kg-api/question#body-stream)
* [Web search](/home/web-search#streaming-response)

## Sample request and response

The code below shows a streaming request and response from a text generation request using `curl`. The response is a stream of [server-sent events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent%5Fevents/Using%5Fserver-sent%5Fevents).

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/completions' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data '{
    "model": "palmyra-x5",
    "prompt": "Respond to a customer chat request about a delayed shipment with a message that apologizes for the delay, offers a tracking number, and provides a new estimated delivery date.",
    "stream": true
  }'
  ```
</CodeGroup>

```json response theme={null}
data: {"value":""}

data: {"value":"Hello"}

data: {"value":" ["}

data: {"value":"Customer"}

data: {"value":"'s"}

data: {"value":" Name"}
...
```

<Note>
  If you're using the chat completions endpoint instead of text generation, the streamed response format is slightly different. The content for each chunk appears in `choices[0].delta.content`. See the [Generate chat completions](/home/chat-completion#streaming-response) guide for the full streaming response object.
</Note>

## Streaming with SDKs

When you stream a response using a Writer SDK, the SDK creates an iterator that yields chunks of the response. You can iterate over the stream to receive the response.

See below for examples of streaming with the Python and JavaScript SDKs for each endpoint that supports streaming.

<Tabs>
  <Tab title="Text Generation">
    <CodeGroup>
      ```python Python theme={null}
      from writerai import Writer

      # Initialize the client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      text_generation = client.completions.create(
        model="palmyra-x5",
        prompt="Respond to a customer chat request about a delayed shipment with a message that apologizes for the delay, offers a tracking number, and provides a new estimated delivery date.",
        stream=True
      )

      for chunk in text_generation:
          if chunk.value:  # Only print non-empty chunks
              print(chunk.value, end="", flush=True)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from 'writer-sdk';

      // Initialize the client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const stream = await client.completions.create({
        model: 'palmyra-x5',
        prompt: 'Respond to a customer chat request about a delayed shipment with a message that apologizes for the delay, offers a tracking number, and provides a new estimated delivery date.',
        stream: true 
      });

      for await (const chunk of stream) {
        process.stdout.write(chunk.value);
      }
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Chat Completions">
    <CodeGroup>
      ```python Python theme={null}
      from writerai import Writer

      # Initialize the client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      stream = client.chat.chat(
        model="palmyra-x5",
        messages=[{"role": "user", "content": "Respond to a customer chat request about a delayed shipment with a message that apologizes for the delay, offers a tracking number, and provides a new estimated delivery date."}],
        stream=True
      )

      for chunk in stream:
          if chunk.choices[0].delta.content:
              print(chunk.choices[0].delta.content, end="", flush=True)
      ```

      ```javascript JavaScript     theme={null}
      import { Writer } from 'writer-sdk';

      // Initialize the client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const stream = await client.chat.chat({
        model: 'palmyra-x5',
        messages: [{ role: 'user', content: 'Respond to a customer chat request about a delayed shipment with a message that apologizes for the delay, offers a tracking number, and provides a new estimated delivery date.' }],
        stream: true 
      });

      for await (const chunk of stream) {
        if (chunk.choices[0]?.delta?.content) {
          process.stdout.write(chunk.choices[0].delta.content);
        }
      }
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Generate from no-code agent">
    <CodeGroup>
      ```python Python theme={null}
      from writerai import Writer

      # Initialize the client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      stream = client.applications.generate_content(
          application_id="<application-id>",
          inputs=[
              {
                  "id": "query",
                  "value": ["Provide a list of three hotels in San Francisco near Union Square within the price range of $100 to $200 per night"]
              }
          ],
          stream=True
      )

      for chunk in stream:
          if chunk.delta.content:
              print(chunk.delta.content, end="", flush=True)
          elif chunk.delta.stages:
              print(chunk.delta.stages[0].content)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from 'writer-sdk';

      // Initialize the client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const stream = await client.applications.generateContent(
          "<application-id>", 
          { 
              inputs: [
                  {
                      id: "query",
                      value: ["Provide a list of three hotels in San Francisco near Union Square within the price range of $100 to $200 per night"]
                  }
              ],
              stream: true
          } 
      );

      for await (const chunk of stream) {
          if (chunk.delta.content) {
              process.stdout.write(chunk.delta.content);
          } else if (chunk.delta.stages) {
              process.stdout.write(chunk.delta.stages[0].content);
          }
      }
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Knowledge Graph question">
    <CodeGroup>
      ```python Python theme={null}
      from writerai import Writer

      # Initialize the client. If you don't pass the `api_key` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      stream = client.graphs.question(
          graph_ids=["<graph-id>"],
          question="What is the generic name for the drug Bavencio?",
          stream=True
      )

      for chunk in stream:
          if chunk.answer:  # Only print non-empty answers
              print(chunk.answer, end="", flush=True)
      ```

      ```javascript JavaScript theme={null}
      import { Writer } from 'writer-sdk';

      // Initialize the client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      const stream = await client.graphs.question({
          graph_ids: ["<graph-id>"],
          question: "What is the generic name for the drug Bavencio?",
          stream: true
      });

      for await (const chunk of stream) {
          process.stdout.write(chunk.answer);
      }
      ```
    </CodeGroup>
  </Tab>
</Tabs>

### Streaming helpers for chat completions

The Python and Node SDKs include streaming helpers for chat completions. These helpers provide more granular details about the streaming events and accumulate the response.

To use the streaming helpers, call `client.chat.stream`. Then, include all the same parameters as you would for a non-streaming chat completion request, except omit the `stream` parameter.

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  with client.chat.stream(
    model="palmyra-x5",
    messages=[{"role": "user", "content": "Respond to a customer chat request about a delayed shipment with a message that apologizes for the delay, offers a tracking number, and provides a new estimated delivery date."}]
  ) as stream:
      for event in stream:
          if event.type == "content.delta":
              print(event.delta, end="", flush=True)

  # print the final response
  completion = stream.get_final_completion()
  print(completion.choices[0].message.content)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const stream = client.chat.stream({
    model: 'palmyra-x5',
    messages: [{ role: 'user', content: 'Respond to a customer chat request about a delayed shipment with a message that apologizes for the delay, offers a tracking number, and provides a new estimated delivery date.' }],
  })
  .on('content', (diff) => process.stdout.write(diff));

  // print the final response
  const completion = await stream.finalChatCompletion();
  console.log(completion.choices[0].message.content);
  ```
</CodeGroup>

For more information about the streaming helpers for chat completions, see the [Python](https://github.com/writer/writer-python/blob/main/helpers.md) and [Node](https://github.com/writer/writer-node/blob/main/helpers.md) SDKs.


# Receive structured outputs
Source: https://dev.writer.com/home/structured-output



## Overview

The [`chat` endpoint](/api-reference/completion-api/chat-completion) supports structured outputs for chat completions with `palmyra-x5` and `palmyra-x4` models.

Structured outputs allow you to specify the response schema that the model should follow.

You can use structured outputs in one of two ways:

1. [Pass in a `json_schema` object](/home/structured-output#sample-request-and-response) in the `response_format` parameter when making a request to the `chat` endpoint.
2. [Use the `parse` method](/home/structured-output#sdk-parse-methods) in the Python and JavaScript SDKs and pass in a [`Pydantic`](https://docs.pydantic.dev/) or [`Zod`](https://zod.dev/) object.

## Sample request and response

The sample request and response below shows how to use structured outputs with the `chat` endpoint and the `response_format` parameter.

The `json_schema` object must be in [JSON Schema format](https://json-schema.org/understanding-json-schema/).

To guarantee that the model includes all the fields in the response, include the [`required` field](https://json-schema.org/understanding-json-schema/reference/object.html#required) in the `json_schema` object.

<CodeGroup>
  ```bash cURL theme={null}
  curl -X POST https://api.writer.com/v1/chat \
    --header "Content-Type: application/json" \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --data '{
      "model": "palmyra-x5",
      "messages": [
        { "role": "system", "content": "You are a helpful cooking assistant." },
        { "role": "user", "content": "Give me a recipe for a simple pasta dish." }
      ],
      "response_format": {
        "type": "json_schema",
        "json_schema": {
          "schema": {
            "type": "object",
            "properties": {
              "recipe_name": {"type": "string"},
              "ingredients": {"type": "array", "items": {"type": "string"}},
              "steps": {"type": "array", "items": {"type": "string"}},
              "preparation_time": {"type": "string"},
              "servings": {"type": "number"}
            },
            "required": ["recipe_name", "ingredients", "steps", "preparation_time", "servings"]
          }
        }
      }
    }'
  ```

  ```python Python theme={null}
  import json
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.chat.chat(
    model="palmyra-x5",
    messages=[
      {"role": "system", "content": "You are a helpful cooking assistant."},
      {"role": "user", "content": "Give me a recipe for a simple pasta dish."}
    ],
    response_format={
      "type": "json_schema",
      "json_schema": {
        "schema": {
          "type": "object",
          "properties": {"recipe_name": {"type": "string"}, "ingredients": {"type": "array", "items": {"type": "string"}}, "steps": {"type": "array", "items": {"type": "string"}}, "preparation_time": {"type": "string"}, "servings": {"type": "number"}},
          "required": ["recipe_name", "ingredients", "steps", "preparation_time", "servings"]
        }
      }
    }
  )

  print(json.loads(response.choices[0].message.content))
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.chat.chat({
    model: 'palmyra-x5',
    messages: [
      { role: 'system', content: 'You are a helpful cooking assistant.' },
      { role: 'user', content: 'Give me a recipe for a simple pasta dish.' }
    ],
    response_format: { 
      type: 'json_schema',
      json_schema: {
        schema: {
          type: 'object',
          properties: { recipe_name: { type: 'string' }, ingredients: { type: 'array', items: { type: 'string' } }, steps: { type: 'array', items: { type: 'string' } }, preparation_time: { type: 'string' }, servings: { type: 'number' } },
          required: ['recipe_name', 'ingredients', 'steps', 'preparation_time', 'servings']
        }
      }
    },
  });

  console.log(JSON.parse(response.choices[0].message.content));
  ```
</CodeGroup>

The response from the `chat` endpoint includes a `message` object with the `content` field set to the raw response from the model.

<CodeGroup>
  ```json response theme={null}
  {
  "id": "1234",
  "object": "chat.completion",
  "choices": [
      {
      "index": 0,
      "finish_reason": "stop",
      "message": {
          "content": "{ \"recipe_name\": \"Spaghetti Aglio e Olio\", \"ingredients\": [\"12 oz spaghetti\", \"3-4 garlic cloves\", \"1/3 cup extra virgin olive oil\", \"4-6 dried red chili flakes (optional)\", \"Salt\", \"Freshly ground black pepper\", \"Grated Parmesan cheese (optional)\", \"Fresh parsley, chopped (optional)\"], \"steps\": [\"Bring a large pot of salted water to a boil. Cook the spaghetti according to the package instructions until al dente. Reserve 1 cup of pasta water before draining.\", \"In a large skillet, heat the olive oil over medium-low heat. Add the thinly sliced garlic and cook, stirring occasionally, until golden brown (about 4-5 minutes). Be careful not to burn the garlic.\", \"If using red chili flakes, add them to the skillet and cook for another minute.\", \"Add the reserved pasta water to the skillet and stir to combine.\", \"Add the cooked spaghetti to the skillet, tossing to coat the pasta in the garlic and oil mixture. Season with salt and black pepper to taste.\", \"Serve hot, topped with grated Parmesan cheese and chopped fresh parsley if desired.\"] }",
          "role": "assistant",
          "tool_calls": null,
          "graph_data": {
          "sources": null,
          "status": null,
          "subqueries": null
          },
          "llm_data": null,
          "image_data": null,
          "translation_data": null,
          "refusal": null
      },
      "logprobs": null
      }
  ],
  "created": 1745948916,
  "model": "palmyra-x5",
  "usage": {
      "prompt_tokens": 2550,
      "total_tokens": 2797,
      "completion_tokens": 247,
      "prompt_token_details": null,
      "completion_tokens_details": null
  },
  "system_fingerprint": "v1",
  "service_tier": null
  }
  ```
</CodeGroup>

## SDK parse methods

The Python and JavaScript SDKs provide helper `parse` methods for working with structured outputs.

You can define a `Pydantic` or `Zod` model for the response schema, and pass it as the `response_format` parameter to the `parse` method.

The result from the `parse` method includes a `message` object with the `parsed` field. This field's value is an instance of the `Pydantic` or `Zod` model you passed for the `response_format` parameter.

<Warning>
  If you include tool calls in your request, the `parse` method only works with [custom functions](/home/tool-calling) where the tool calls are of type `function`. It does not work with built-in tools with other types such as `web_search`, `vision`, or `translate`. For those cases, you can pass a `json_schema` object in the `response_format` parameter for the `chat` endpoint.
</Warning>

<CodeGroup>
  ```python Python theme={null}
  from typing import List
  from pydantic import Field, BaseModel
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  # Define a Pydantic model for structured output
  class Recipe(BaseModel):
      recipe_name: str = Field(description="The name of the recipe")
      ingredients: List[str] = Field(description="A list of ingredients for the recipe")
      steps: List[str] = Field(description="A list of steps for the recipe")
      preparation_time: str = Field(description="The preparation time for the recipe")
      servings: int = Field(description="The number of servings for the recipe")

  parsed_response = client.chat.parse(
      model="palmyra-x5",
      messages=[
          {"role": "system", "content": "You are a helpful cooking assistant."},
          {
              "role": "user",
              "content": "Give me a recipe for a simple pasta dish.",
          },
      ],
      response_format=Recipe,
  )
  parsed = parsed_response.choices[0].message.parsed

  # Print the parsed response
  print(f"Recipe name: {parsed.recipe_name}")
  print(f"Ingredients:")
  for item in parsed.ingredients:
      print(f"- {item}")
  print(f"Steps:")
  for item in parsed.steps:
      print(f"- {item}")
  print(f"Preparation time: {parsed.preparation_time}")
  print(f"Servings: {parsed.servings}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';
  import { z } from 'zod';
  import { zodResponseFormat } from 'writer-sdk/helpers/zod';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  async function main() {
    // Define a schema for structured output
    const recipeSchema = z.object({
      recipeName: z.string(),
      ingredients: z.array(
        z.object({
          name: z.string(),
          amount: z.string(),
        }),
      ),
      steps: z.array(z.string()),
      preparationTime: z.string(),
      servings: z.number(),
    });

    const completion = await client.chat.parse({
      model: 'palmyra-x5',
      messages: [
        { role: 'system', content: 'You are a helpful cooking assistant.' },
        { role: 'user', content: 'Give me a recipe for a simple pasta dish.' },
      ],
      response_format: zodResponseFormat(recipeSchema, 'recipe'),
      temperature: 0.7,
    });

    // Access the parsed structured data
    const message = completion.choices[0]?.message;
    if (message?.parsed) {
      console.log('Recipe name:', message.parsed.recipeName);
      console.log('Ingredients:');
      message.parsed.ingredients.forEach((ing) => {
        console.log(`- ${ing.amount} ${ing.name}`);
      });
      console.log('\nSteps:');
      message.parsed.steps.forEach((step, index) => {
        console.log(`${index + 1}. ${step}`);
      });
      console.log(`\nPreparation time: ${message.parsed.preparationTime}`);
      console.log(`Servings: ${message.parsed.servings}`);
    } else {
      console.log('Raw content:', message?.content);
    }
  }

  main()
  ```
</CodeGroup>


# Column test
Source: https://dev.writer.com/home/temp_component



export const DynamicImage = ({type}) => <div>
        <img src={`/framework/public/components/${type}.png`} />
    </div>;

export const description = "A layout component that organises its child components in columns. Must be inside a Column Container component.";


export const component = {
  type: 'column'
};


export const writer = {
  name: "Column",
  description,
  allowedParentTypes: ["columns", "repeater"],
  allowedChildrenTypes: ["*"],
  category: "Layout",
  fields: {
    title: {
      name: "Title",
      type: "Text"
    },
    width: {
      name: "Width (factor)",
      default: "1",
      init: "1",
      type: "Number",
      desc: "Relative size when compared to other columns in the same container. A column of width 2 will be double the width of one with width 1.",
      category: "Style"
    },
    isSticky: {
      name: "Sticky",
      default: "no",
      type: "Text",
      options: {
        yes: "Yes",
        no: "No"
      },
      category: "Style"
    },
    isCollapsible: {
      name: "Collapsible",
      default: "no",
      type: "Text",
      options: {
        yes: "Yes",
        no: "No"
      },
      category: "Style"
    },
    startCollapsed: {
      name: "Start collapsed",
      type: "Text",
      category: "Style",
      default: "no",
      options: {
        yes: "Yes",
        no: "No"
      },
      desc: "Only applied when the column is collapsible."
    }
  }
};


## Fields

<p>
  {description}
</p>

<DynamicImage type={component.type} />

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Options</th>
    </tr>
  </thead>

  <tbody>
    {Object.values(writer.fields).map((field, index) => (
            <tr key={index}>
                <td>{field.name}</td>
                <td>{field.type}</td>
                <td>{field.desc || 'N/A'}</td>
                <td>{field.options ? Object.values(field.options).join(", ") : 'N/A'}</td>
            </tr>
            ))}
  </tbody>
</table>

## Low code usage

This component can be declared directly in Python, using [backend-driven UI](/framework/backend-driven-ui).

```python  theme={null}
ui.Column(content={
        "title": "", # str 
        "width": "1", # Union[float, str] 
        "isSticky": "no", # str [yes, no]
        "isCollapsible": "no", # str [yes, no]
        "startCollapsed": "no", # str [yes, no]
        "separatorColor": "", # str 
        "contentPadding": "", # str 
        "contentHAlign": "", # str 
        "contentVAlign": "", # str 
        "cssClasses": "", # str 
    }
)
```


# Generate text from a prompt
Source: https://dev.writer.com/home/text-generation

Generate text with Palmyra LLMs using the text generation endpoint. Compare text generation vs chat completion and see API examples.

You can use the [text generation endpoint](/api-reference/completion-api/text-generation) to generate text with a Palmyra LLM.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Text generation vs. chat completion

The text generation endpoint is appropriate when you need to generate a single text response based on a given prompt, or when you want to ask a specific LLM a question.

The [chat completion endpoint](/home/chat-completion) can generate single messages, or create more complex conversations between a user and an general-purpose LLM. Additionally, the chat completion endpoint offers [tool calling](/home/chat-completion), which you can use to access domain-specific LLMs, Knowledge Graphs, and custom functions.

## Endpoint overview

**URL:** `POST https://api.writer.com/v1/completions`

<Warning>
  Using the `/completions` endpoint results in charges for **model usage**. See the [pricing page](/home/pricing) for more information.
</Warning>

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/completions' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data '{
    "model": "palmyra-x-003-instruct",
    "prompt": "Tell me a story",
    "max_tokens": 1000,
    "temperature": 0.7,
    "stream": true
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  text_generation = client.completions.create(
    model="palmyra-x-003-instruct",
    prompt="Tell me a story",
    max_tokens=1000,
    temperature=0.7,
    stream=True
  )

  for chunk in text_generation:
      print(chunk.value, end="", flush=True)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const text_generation = await client.completions.create({
    model: 'palmyra-x-003-instruct',
    prompt: 'Tell me a story',
    max_tokens: 1000,
    temperature: 0.7,
    stream: true 
  });

  for await (const chunk of text_generation) {
      process.stdout.write(chunk.value);
  }
  ```
</CodeGroup>

### Request body

Below are the required and commonly used optional parameters for the text generation endpoint.

| Parameter     | Type    | Description                                                                                                                                                                      |
| ------------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `model`       | string  | **Required**. The [ID of the model](/home/models) to use for text generation.                                                                                                    |
| `prompt`      | string  | **Required**. The prompt to generate text from.                                                                                                                                  |
| `max_tokens`  | int     | The maximum number of tokens to generate for the response. Defaults to `100`.                                                                                                    |
| `temperature` | float   | Temperature influences the randomness in generated text. Defaults to `1`. Increase the value for more creative responses, and decrease the value for more predictable responses. |
| `stream`      | Boolean | A Boolean value that indicates whether to stream the response. Defaults to `false`.                                                                                              |

See the full list of available parameters in the [text generation endpoint reference](/api-reference/completion-api/text-generation).

### Response parameters

#### Non-streaming response

If you set the `stream` parameter to `false`, the response is a single JSON object with the following parameters:

| Parameter              | Type   | Description                                                                                                                            |
| ---------------------- | ------ | -------------------------------------------------------------------------------------------------------------------------------------- |
| `model`                | string | The ID of the model used to generate the response.                                                                                     |
| `choices`              | array  | An array of choices objects.                                                                                                           |
| `choices[0].text`      | string | The generated text.                                                                                                                    |
| `choices[0].log_probs` | object | The [log probabilities](/api-reference/completion-api/text-generation#response-choices-log-probs) of the tokens in the generated text. |

```json  theme={null}
{
  "choices": [
    {
      "text": "Camping Gear: The Ultimate Guide\n\nCamping is a great way to get outdoors and enjoy nature",
      "log_probs": null
    }
  ],
  "model": "palmyra-x-003-instruct"
}
```

#### Streaming response

If you set the `stream` parameter to `true`, the response is delivered as [server-sent events](https://html.spec.whatwg.org/multipage/server-sent-events.html#server-sent-events) with the following parameters:

| Parameter | Description               |
| --------- | ------------------------- |
| `value`   | The content of the chunk. |

```json  theme={null}
data: {"value":"Camping Gear: The Ultimate Guide\n\nCamping is a great way to get outdoors and enjoy nature"}
```

## Example request to a specific LLM

The examples below generate a single message from the `palmyra-med` model, using the prompt "How can I treat a cold?"

### Streaming response

The text generation endpoint supports streaming responses. The response comes in chunks until the entire response finishes.

Streaming responses are useful when you want to display the generated text in real-time, or when you want to stream the response to a client, rather than waiting for the entire response to finish.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/completions' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data '{
    "model": "palmyra-med",
    "prompt": "How can I treat a cold?",
    "stream": true
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  text_generation = client.completions.create(
    model="palmyra-med",
    prompt="How can I treat a cold?",
    stream=True
  )

  for chunk in text_generation:
      print(chunk.value, end="", flush=True)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const text_generation = await client.completions.create({
    model: 'palmyra-med',
    prompt: 'How can I treat a cold?',
    stream: true 
  });

  for await (const chunk of text_generation) {
      process.stdout.write(chunk.value);
  }
  ```
</CodeGroup>

### Non-streaming response

For non-streaming responses, the response returns as a single JSON object after the entire response is complete. The text is in the `choices[0].text` field.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/completions' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Bearer $WRITER_API_KEY" \
  --data '{
    "model": "palmyra-med",
    "prompt": "How can I treat a cold?",
    "stream": false
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  text_generation = client.completions.create(
    model="palmyra-med",
    prompt="How can I treat a cold?",
    stream=False
  )

  print(text_generation.choices[0].text)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const text_generation = await client.completions.create({
    model: 'palmyra-med',
    prompt: 'How can I treat a cold?',
    stream: false
  });

  console.log(text_generation.choices[0].text);
  ```
</CodeGroup>

## Next steps

Now that you've generated text with a Palmyra LLM, try out the following:

* Create a chat with an AI assistant using the [chat completion endpoint](/home/chat-completion)
* Learn more about the [tool calling](/home/chat-completion#tool-calling) feature of the chat completion endpoint


# Understand tokens
Source: https://dev.writer.com/home/tokens



Tokens are the atomic units that language models use to process text. Language models understand tokens rather than characters or bytes. Each token represents a single unit of meaning, like a word or a group of words.

The Writer API processes all text input and output in terms of tokens. See the maximum number of tokens for each model in the [models overview](/home/models) page.

## Tokenization

Tokenization is the process of breaking input text down into smaller units. Depending on the tokenization method the model uses, a single word can be represented by one token or may be broken down into multiple sub-word tokens.

Here's how different text types typically tokenize:

```python  theme={null}
"hello world"           → ["hello", " world"]           # 2 tokens
"API"                   → ["API"]                       # 1 token
"tokenization"          → ["token", "ization"]          # 2 tokens
"www.writer.com"        → ["www", "writer", "com"]      # 3 tokens
```

## Input and output token usage

Every API call consumes tokens for both the prompt you send and the response generated:

```python  theme={null}
# Example API call
response = client.chat.completions.create(
  model="palmyra-x5",
  messages=[
    {"role": "user", "content": "Write a product description for a cozy sweater"},  # ~8 tokens
  ],
  max_tokens=150,  # Maximum tokens to include in the response
)

# Total token usage = prompt tokens + response tokens
```

## Inspect token usage

You can inspect the [`usage`](/api-reference/completion-api/chat-completion#response-usage) information from the API response to see the token usage for each response.

<Info>
  The prompt tokens reported in the response include the tokens used for the model's system prompt.
</Info>

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  # Initialize the client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.chat.chat(
    model="palmyra-x5",
    messages=[{"role": "user", "content": "Write a product description for a cozy sweater"}],
    max_tokens=150,
  )

  # Log token usage to understand patterns
  print(f"Prompt tokens: {response.usage.prompt_tokens}")
  print(f"Response tokens: {response.usage.completion_tokens}")
  print(f"Total tokens: {response.usage.total_tokens}")
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from 'writer-sdk';

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer()

  const response = await client.chat.chat({
    model: "palmyra-x5",
    messages: [
      { role: "user", content: "Write a product description for a cozy sweater" },
    ],
    maxTokens: 150,
  });

  // Log token usage to understand patterns
  console.log(`Prompt tokens: ${response.usage.prompt_tokens}`);
  console.log(`Response tokens: ${response.usage.completion_tokens}`);
  console.log(`Total tokens: ${response.usage.total_tokens}`);
  ```
</CodeGroup>

You can view your organization's overall token usage and spend in the [Consumption dashboard](/home/observability).


# Call a custom function in a chat
Source: https://dev.writer.com/home/tool-calling

Extend LLM capabilities with tool calling. Execute custom functions, query databases, fetch real-time data, and integrate results into chat responses.

This guide helps you understand how to use tool calling, sometimes known as function calling, with chat completions.

Tool calling allows you to extend the capabilities of [chats with LLMs](/home/chat-completion) by enabling the LLM to call custom functions, or tools.

Your custom tools can perform a wide range of tasks, such as querying databases, fetching real-time data from APIs, processing data, or executing business logic. You can then integrate the result of these tool calls back into the model's output.

Tool calling is available for Palmyra X4 and later models.

<Tip>
  This guide discusses calling custom functions as tools. Writer also offers prebuilt tools that models can execute remotely:

  * [Ask questions to a Knowledge Graph in a chat](/home/kg-chat)
  * [Delegate questions to domain-specific LLMs](/home/model-delegation)
  * [Analyze or interpret images](/home/vision-tool)
  * [Translate text](/home/translation-tool)
</Tip>

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Overview

To use tool calling, follow these steps:

1. Define your functions in code
2. Pass the functions to the model in a chat completion request
3. Append the assistant's response (containing tool calls) to the message history
4. Check to see which functions the model wants to invoke and run the corresponding functions
5. Append the tool results to the message history
6. Pass the updated messages back to the model to get the final response
7. Append the final response to maintain complete conversation history

<CardGroup cols={2}>
  <Card title="Tool calling overview">
        <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-diagram.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=1f11e881c1b513db9e5e58343573f990" alt="A flowchart showing how tool calling works: The model receives a prompt, decides to call a tool, executes the tool, and incorporates the result into its response" data-og-width="1502" width="1502" data-og-height="1290" height="1290" data-path="images/home/tool-calling-diagram.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-diagram.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=26b1ed473dcc762b830dd7313705ebae 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-diagram.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=95bf324ca2bed89964b2e6f7652726e3 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-diagram.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=bbc27ef0c2b7f3b169ab0b6b9fb8f24e 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-diagram.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=970454849e6a6076fbb12325e64a9dcb 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-diagram.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=587c7ef071605f0d705716ec95efac4e 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-diagram.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=f87c2ae652f092fa7fb5167fdd720f42 2500w" />
  </Card>

  <Card title="Example: Calculate the mean of a list of numbers">
        <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-example.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=1e039770eed85fb224e03803d680d62f" alt="A flowchart demonstrating tool calling with a specific example: The model receives numbers, calls a calculate_mean function, gets the result, and provides the final answer" data-og-width="1622" width="1622" data-og-height="1290" height="1290" data-path="images/home/tool-calling-example.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-example.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=14154a542d7dad161091e70c5bb25a5d 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-example.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=17d36ec35a483f61c3d107d8b6142def 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-example.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=04d812b9ee21361b5db7bb2f4150ee32 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-example.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a95840a7e5730ebc8dddef055bcbdf4d 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-example.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=271d101a08791b1565b24f8ef407a75b 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/home/tool-calling-example.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=3b6cc083aa0eef85d9af7dd0520ab93e 2500w" />
  </Card>

  <Card title="Example: Calculate the mean and standard deviation of a list of numbers">
        <img src="https://mintcdn.com/writer/UVGROL4WBnovp2ZQ/images/home/multi-tool-calling-diagram.png?fit=max&auto=format&n=UVGROL4WBnovp2ZQ&q=85&s=0e0edb6f0bf195590a7343655f41a5f7" alt="Diagram of multi-tool calling to calculate the mean and standard deviation of a list of numbers" data-og-width="1206" width="1206" data-og-height="1400" height="1400" data-path="images/home/multi-tool-calling-diagram.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/UVGROL4WBnovp2ZQ/images/home/multi-tool-calling-diagram.png?w=280&fit=max&auto=format&n=UVGROL4WBnovp2ZQ&q=85&s=8e90a45fbfd5629fe6aa28ec186dd8ad 280w, https://mintcdn.com/writer/UVGROL4WBnovp2ZQ/images/home/multi-tool-calling-diagram.png?w=560&fit=max&auto=format&n=UVGROL4WBnovp2ZQ&q=85&s=e15f4dadccce0b703c4a57e2a69eda06 560w, https://mintcdn.com/writer/UVGROL4WBnovp2ZQ/images/home/multi-tool-calling-diagram.png?w=840&fit=max&auto=format&n=UVGROL4WBnovp2ZQ&q=85&s=cae74c20acaaa0c3189e195bf771c18b 840w, https://mintcdn.com/writer/UVGROL4WBnovp2ZQ/images/home/multi-tool-calling-diagram.png?w=1100&fit=max&auto=format&n=UVGROL4WBnovp2ZQ&q=85&s=78784e1301d7d3147ef52d835b9db039 1100w, https://mintcdn.com/writer/UVGROL4WBnovp2ZQ/images/home/multi-tool-calling-diagram.png?w=1650&fit=max&auto=format&n=UVGROL4WBnovp2ZQ&q=85&s=c8d5ca7c2c60601762a6b3bceff9391b 1650w, https://mintcdn.com/writer/UVGROL4WBnovp2ZQ/images/home/multi-tool-calling-diagram.png?w=2500&fit=max&auto=format&n=UVGROL4WBnovp2ZQ&q=85&s=15b102998b5694dcffa83e1ec047c397 2500w" />
  </Card>
</CardGroup>

Continue reading to learn more about each step.

## Define your custom functions

First, define the custom functions in your code. Typical use cases for tool calling include calling an API, performing mathematical calculations, or running complex business logic. You can define these functions in your code as you would any other function.

Here's an example of a function to calculate the mean of a list of numbers.

<CodeGroup>
  ```python Python theme={null}
  def calculate_mean(numbers: list) -> float:
      return sum(numbers) / len(numbers)
  ```

  ```js JavaScript theme={null}
  function calculateMean(numbers) {
    if (numbers.length === 0) {
      throw new Error("Cannot calculate mean of an empty array");
    }
    return numbers.reduce((sum, num) => sum + num, 0) / numbers.length;
  }
  ```
</CodeGroup>

## Describe functions as tools

After you've defined your functions, create a `tools` array to pass to the model.

The `tools` array describes your functions as tools available to the model. You describe tools in the form of a [JSON schema](https://json-schema.org/). Each tool should include a `type` of `function` and a `function` object that includes a `name`, `description`, and a  dictionary of `parameters`.

### Tool structure

The `tools` array contains an object with the following parameters:

| Parameter                        | Type   | Description                                                                                                                      |
| -------------------------------- | ------ | -------------------------------------------------------------------------------------------------------------------------------- |
| `type`                           | string | The type of tool, which is `function` for a custom function                                                                      |
| `function`                       | object | An object containing the tool's description and parameter definitions                                                            |
| `function.name`                  | string | The name of the tool                                                                                                             |
| `function.description`           | string | A description of what the tool does and when the model should use it                                                             |
| `function.parameters`            | object | An object containing the tool's input parameters                                                                                 |
| `function.parameters.type`       | string | The type of the parameter, which is `object` for a JSON schema                                                                   |
| `function.parameters.properties` | object | An object containing the tool's parameters in the form of a [JSON schema](https://json-schema.org/). See below for more details. |
| `function.parameters.required`   | array  | An array of the tool's required parameters                                                                                       |

See the full [tools object schema](/api-reference/completion-api/chat-completion#body-tools) for more details.

The `function.parameters.properties` object contains the tool's parameter definitions as a [JSON schema](https://json-schema.org/). The object's keys should be the names of the parameters, and the values should be objects containing the parameter's type and description.

When the model decides you should use the tool to answer the user's question, it returns the parameters that you should use when calling the function you've defined.

### Example tool array

Here's an example of a `tools` array for the `calculate_mean` function:

<CodeGroup>
  ```python Python theme={null}
  tools = [
      {
          "type": "function",
          "function": {
              "name": "calculate_mean",
              "description": "A function that calculates the mean (average) of a list of numbers. Any user request asking for the mean of a list of numbers should use this tool.",
              "parameters": {
                  "type": "object",
                  "properties": {
                      "numbers": {
                          "type": "array",
                          "items": {"type": "number"},
                          "description": "List of numbers"
                      }
                  },
                  "required": ["numbers"]
              }
          }
      }
  ]
  ```

  ```js JavaScript theme={null}
  const tools = [
      {
          type: "function",
          function: {
              name: "calculate_mean",
              description: "A function that calculates the mean (average) of a list of numbers. Any user request asking for the mean of a list of numbers should use this tool.",
              parameters: {
                  type: "object",
                  properties: {
                      numbers: {
                          type: "array",
                          items: { type: "number" },
                          description: "List of numbers",
                      },
                  },
              required: ["numbers"],
              },
          },
      },
  ];
  ```
</CodeGroup>

<Note>
  To help the model understand when to use the tool, follow these best practices for the `function.description` parameter:

  * Indicate that the tool is a function that invokes a no-code agent
  * Specify the function's purpose and capabilities
  * Describe when the tool should be used

  An example description for a tool that invokes a function to calculate the mean of a list of numbers:

  > "A function that calculates the mean of a list of numbers. Any user request asking for the mean of a list of numbers should use this tool."
</Note>

## Pass tools to the model

Once the tools array is complete, pass it to the [chat completions endpoint](/home/chat-completion) along with the chat messages.

### Tool choice control

The chat completion endpoint has a [`tool_choice parameter`](/api-reference/completion-api/chat-completion#body-tool-choice) that controls how the model decides when to use the tools you've defined.

| Value      | Description                                                        |
| ---------- | ------------------------------------------------------------------ |
| `auto`     | The model decides which tools to use, if any.                      |
| `none`     | The model doesn't use tools and only returns a generated response. |
| `required` | The model must use at least one of the tools you've defined.       |

You can also use a JSON object to force the model to use a specific tool. For example, if you want the model to use the `calculate_mean` tool, you can set `tool_choice` to `{"type": "function", "function": {"name": "calculate_mean"}}`.

In this example, `tool_choice` is `auto`, which means the model decides which tools to use, if any, based on the message and tool descriptions.

<CodeGroup>
  ```python Python theme={null}
  import json
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "what is the mean of [1,3,5,7,9]?"}]

  response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      tools=tools,
      tool_choice="auto"
  )
  ```

  ```js JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  let messages = [{"role": "user", "content": "what is the mean of [1,3,5,7,9]?"}];

  const response = await client.chat.chat({
        model: "palmyra-x5",
        messages: messages,
        tools: tools,
        tool_choice: "auto"
  });
  ```
</CodeGroup>

## Process tool calls

When the model identifies a need to call a tool based on the user's input, it indicates it in the response and includes the necessary parameters to pass when calling the tool. You then execute the tool's function and return the result to the model.

<Tip>
  Proper conversation history management requires appending the assistant's response, tool results, and final response to the message history.
</Tip>

The method for checking for tool calls and executing the tool's function differs depending on whether you're streaming the response or not. Each method is described below.

<Note>
  The examples below demonstrate processing a single tool call. For handling multiple tool calls in one request, see the [multiple tool calls](#multiple-tool-calls) section.
</Note>

<Tabs>
  <Tab title="Streaming">
    ### Streaming

    When using streaming, the tool calls come back in chunks inside of the delta object of the choices array. To process the tool calls:

    1. Stream and collect tool calls from the response chunks
    2. Reconstruct the assistant's response and append it to the message history
    3. Execute functions and append tool results to the message history
    4. Get the final response from the model and append it to the message history

    #### Step 1: Stream and collect tool calls from the response chunks

    First, stream and collect tool calls from the response chunks.

    <CodeGroup>
      ```python Python theme={null}
      streaming_content = ""
      function_calls = []

      for chunk in response:
          choice = chunk.choices[0]

          if choice.delta:
              # Collect tool calls as they stream in
              if choice.delta.tool_calls:
                  for tool_call in choice.delta.tool_calls:
                      if tool_call.id:
                          # Start a new function call
                          function_calls.append({
                              "name": "",
                              "arguments": "",
                              "call_id": tool_call.id
                          })
                      if tool_call.function:
                          # Append to the most recent function call
                          if function_calls:
                              function_calls[-1]["name"] += tool_call.function.name or ""
                              function_calls[-1]["arguments"] += tool_call.function.arguments or ""

              # Collect regular content (for cases where no tools are called)
              elif choice.delta.content:
                  streaming_content += choice.delta.content
      ```

      ```js JavaScript theme={null}
      let streamingContent = "";
      const functionCalls = [];

      for await (const chunk of response) {
          const choice = chunk.choices[0];

          if (choice.delta) {
              if (choice.delta.tool_calls) {
                  for (const toolCall of choice.delta.tool_calls) {
                      if (toolCall.id) {
                          functionCalls.push({
                              name: "",
                              arguments: "",
                              call_id: toolCall.id
                          });
                      }
                      if (toolCall.function) {
                          if (functionCalls.length > 0) {
                              functionCalls[functionCalls.length - 1].name += toolCall.function.name || "";
                              functionCalls[functionCalls.length - 1].arguments += toolCall.function.arguments || "";
                          }
                      }
                  }
              } else if (choice.delta.content) {
                  streamingContent += choice.delta.content;
              }
          }
      }
      ```
    </CodeGroup>

    #### Step 2: Check finish reason and reconstruct the assistant's response

    Check the `finish_reason` to determine if tools were called, then reconstruct and append the assistant's response to the conversation history.

    <CodeGroup>
      ```python Python theme={null}
      # Inside the streaming loop, check for finish_reason
      if choice.finish_reason:
          if choice.finish_reason == "stop":
              # No tools were called, just regular response
              messages.append({"role": "assistant", "content": streaming_content})
              break

          elif choice.finish_reason == "tool_calls":
              # Reconstruct and append assistant message with tool calls
              tool_calls_for_message = []
              for func_call in function_calls:
                  tool_calls_for_message.append({
                      "id": func_call["call_id"],
                      "type": "function",
                      "function": {
                          "name": func_call["name"],
                          "arguments": func_call["arguments"]
                      }
                  })

              assistant_message = {
                  "role": "assistant",
                  "content": None,
                  "tool_calls": tool_calls_for_message
              }
              messages.append(assistant_message)
      ```

      ```js JavaScript theme={null}
      // Inside the streaming loop, check for finish_reason
      if (choice.finish_reason) {
          if (choice.finish_reason === "stop") {
              // No tools were called, just regular response
              messages.push({ role: "assistant", content: streamingContent });
              break;
          } else if (choice.finish_reason === "tool_calls") {
              // Reconstruct and append assistant message with tool calls
              const toolCallsForMessage = [];
              for (const funcCall of functionCalls) {
                  toolCallsForMessage.push({
                      id: funcCall.call_id,
                      type: "function",
                      function: {
                          name: funcCall.name,
                          arguments: funcCall.arguments
                      }
                  });
              }

              const assistantMessage = {
                  role: "assistant",
                  content: null,
                  tool_calls: toolCallsForMessage
              };
              messages.push(assistantMessage);  // Append assistant response
          }
      }
      ```
    </CodeGroup>

    #### Step 3: Execute functions and append tool results

    Execute each function in the `function_calls` list and append the results to the messages array.

    <CodeGroup>
      ```python Python theme={null}
      # Inside the tool_calls finish_reason block
      for function_call in function_calls:
          function_name = function_call["name"]

          if function_name == "calculate_mean":
              try:
                  arguments_dict = json.loads(function_call["arguments"])
                  function_response = calculate_mean(arguments_dict["numbers"])

                  # Append tool result to conversation history
                  messages.append({
                      "role": "tool",
                      "content": str(function_response),
                      "tool_call_id": function_call["call_id"],
                      "name": function_name,
                  })
              except Exception as e:
                  # Handle errors gracefully
                  messages.append({
                      "role": "tool",
                      "content": f"Error: {str(e)}",
                      "tool_call_id": function_call["call_id"],
                      "name": function_name,
                  })
      ```

      ```js JavaScript theme={null}
      // Inside the tool_calls finish_reason block
      for (const functionCall of functionCalls) {
          const functionName = functionCall.name;

          if (functionName === "calculate_mean") {
              try {
                  const argumentsDict = JSON.parse(functionCall.arguments);
                  const functionResponse = calculateMean(argumentsDict.numbers);

                  // Append tool result to conversation history
                  messages.push({
                      role: "tool",
                      content: functionResponse.toString(),
                      tool_call_id: functionCall.call_id,
                      name: functionName,
                  });
              } catch (error) {
                  // Handle errors gracefully
                  messages.push({
                      role: "tool",
                      content: `Error: ${error.message}`,
                      tool_call_id: functionCall.call_id,
                      name: functionName,
                  });
              }
          }
      }
      ```
    </CodeGroup>

    #### Step 4: Get and append the final response

    After appending tool results, get the final response from the model and append it to maintain complete conversation history.

    <CodeGroup>
      ```python Python theme={null}
      # Inside the tool_calls finish_reason block, after processing all functions
      final_response = client.chat.chat(
          model="palmyra-x5",
          messages=messages,
          stream=True
      )

      final_content = ""
      for chunk in final_response:
          choice = chunk.choices[0]
          if choice.delta and choice.delta.content:
              final_content += choice.delta.content

      # Append final response to conversation history
      messages.append({
          "role": "assistant",
          "content": final_content
      })
      ```

      ```js JavaScript theme={null}
      // Inside the tool_calls finish_reason block, after processing all functions
      const finalResponse = await client.chat.chat({
          model: "palmyra-x5",
          messages: messages,
          stream: true
      });

      let finalContent = "";
      for await (const chunk of finalResponse) {
          const choice = chunk.choices[0];
          if (choice.delta && choice.delta.content) {
              finalContent += choice.delta.content;
              process.stdout.write(choice.delta.content);
          }
      }

      // Append final response to conversation history
      messages.push({
          role: "assistant",
          content: finalContent
      });
      ```
    </CodeGroup>

    #### Complete streaming code example

    <CodeGroup>
      ```python Python [expandable] theme={null}
      import json
      from writerai import Writer

      # Initialize the Writer client. If you don't pass the `apiKey` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      def calculate_mean(numbers: list) -> float:
          return sum(numbers) / len(numbers)

      tools = [
          {
              "type": "function",
              "function": {
                  "name": "calculate_mean",
                  "description": "Calculate the mean (average) of a list of numbers.",
                  "parameters": {
                      "type": "object",
                      "properties": {
                          "numbers": {
                              "type": "array",
                              "items": {"type": "number"},
                              "description": "List of numbers"
                          }
                      },
                      "required": ["numbers"]
                  }
              }
          }
      ]

      messages = [{"role": "user", "content": "what is the mean of [1,3,5,7,9]?"}]

      # Step 1: Initial request with tools
      response = client.chat.chat(
          model="palmyra-x5",
          messages=messages,
          tools=tools,
          tool_choice="auto",
          stream=True
      )

      # Step 2: Process streaming response to collect tool calls
      streaming_content = ""
      function_calls = []

      for chunk in response:
          choice = chunk.choices[0]

          if choice.delta:
              # Collect tool calls as they stream in
              if choice.delta.tool_calls:
                  for tool_call in choice.delta.tool_calls:
                      if tool_call.id:
                          # Start a new function call
                          function_calls.append({
                              "name": "",
                              "arguments": "",
                              "call_id": tool_call.id
                          })
                      if tool_call.function:
                          # Append to the most recent function call
                          if function_calls:
                              function_calls[-1]["name"] += tool_call.function.name or ""
                              function_calls[-1]["arguments"] += tool_call.function.arguments or ""

              # Collect regular content (for cases where no tools are called)
              elif choice.delta.content:
                  streaming_content += choice.delta.content

          # Check if streaming is complete
          if choice.finish_reason:
              if choice.finish_reason == "stop":
                  # No tools were called, just regular response
                  print(f"Response: {streaming_content}")
                  messages.append({"role": "assistant", "content": streaming_content})
                  break

              elif choice.finish_reason == "tool_calls":
                  # Step 3: Reconstruct and append assistant message with tool calls
                  tool_calls_for_message = []
                  for func_call in function_calls:
                      tool_calls_for_message.append({
                          "id": func_call["call_id"],
                          "type": "function",
                          "function": {
                              "name": func_call["name"],
                              "arguments": func_call["arguments"]
                          }
                      })

                  assistant_message = {
                      "role": "assistant",
                      "content": None,
                      "tool_calls": tool_calls_for_message
                  }
                  messages.append(assistant_message)  # Append assistant response

                  # Step 4: Execute each function and add results to messages
                  for function_call in function_calls:
                      function_name = function_call["name"]

                      if function_name == "calculate_mean":
                          try:
                              arguments_dict = json.loads(function_call["arguments"])
                              function_response = calculate_mean(arguments_dict["numbers"])

                              # Add tool response to messages
                              messages.append({
                                  "role": "tool",
                                  "content": str(function_response),
                                  "tool_call_id": function_call["call_id"],
                                  "name": function_name,
                              })
                          except Exception as e:
                              # Handle errors gracefully
                              messages.append({
                                  "role": "tool",
                                  "content": f"Error: {str(e)}",
                                  "tool_call_id": function_call["call_id"],
                                  "name": function_name,
                              })

                  # Step 5: Get the final response from the model
                  final_response = client.chat.chat(
                      model="palmyra-x5",
                      messages=messages,
                      stream=True
                  )

                  final_content = ""
                  for chunk in final_response:
                      choice = chunk.choices[0]
                      if choice.delta and choice.delta.content:
                          final_content += choice.delta.content
                          print(choice.delta.content, end="", flush=True)

                  # Step 6: Add final response to message history
                  messages.append({
                      "role": "assistant",
                      "content": final_content
                  })
                  break
      ```

      ```js JavaScript [expandable] theme={null}
      import { Writer } from "writer-sdk";

      // Initialize the Writer client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      function calculateMean(numbers) {
          if (numbers.length === 0) {
              throw new Error("Cannot calculate mean of an empty array");
          }
          return numbers.reduce((sum, num) => sum + num, 0) / numbers.length;
      }

      const tools = [
          {
              type: "function",
              function: {
                  name: "calculate_mean",
                  description: "Calculate the mean (average) of a list of numbers.",
                  parameters: {
                      type: "object",
                      properties: {
                          numbers: {
                              type: "array",
                              items: { type: "number" },
                              description: "List of numbers",
                          },
                      },
                      required: ["numbers"],
                  },
              },
          },
      ];

      async function main() {
          let messages = [
              { role: "user", content: "what is the mean of [1,3,5,7,9]?" },
          ];

          // Step 1: Initial request with tools
          const response = await client.chat.chat({
              model: "palmyra-x5",
              messages: messages,
              tools: tools,
              tool_choice: "auto",
              stream: true
          });

          // Step 2: Process streaming response to collect tool calls
          let streamingContent = "";
          const functionCalls = [];

          for await (const chunk of response) {
              const choice = chunk.choices[0];

              if (choice.delta) {
                  // Collect tool calls as they stream in
                  if (choice.delta.tool_calls) {
                      for (const toolCall of choice.delta.tool_calls) {
                          if (toolCall.id) {
                              // Start a new function call
                              functionCalls.push({
                                  name: "",
                                  arguments: "",
                                  call_id: toolCall.id,
                              });
                          }
                          if (toolCall.function) {
                              // Append to the most recent function call
                              if (functionCalls.length > 0) {
                                  functionCalls[functionCalls.length - 1].name += toolCall.function.name || "";
                                  functionCalls[functionCalls.length - 1].arguments += toolCall.function.arguments || "";
                              }
                          }
                      }
                  }
                  // Collect regular content (for cases where no tools are called)
                  else if (choice.delta.content) {
                      streamingContent += choice.delta.content;
                  }
              }

              // Check if streaming is complete
              if (choice.finish_reason) {
                  if (choice.finish_reason === "stop") {
                      // No tools were called, just regular response
                      console.log(`Response: ${streamingContent}`);
                      messages.push({ role: "assistant", content: streamingContent });
                      break;
                  } else if (choice.finish_reason === "tool_calls") {
                      // Step 3: Reconstruct and append assistant message with tool calls
                      const toolCallsForMessage = [];
                      for (const funcCall of functionCalls) {
                          toolCallsForMessage.push({
                              id: funcCall.call_id,
                              type: "function",
                              function: {
                                  name: funcCall.name,
                                  arguments: funcCall.arguments,
                              },
                          });
                      }

                      const assistantMessage = {
                          role: "assistant",
                          content: null,
                          tool_calls: toolCallsForMessage,
                      };
                      messages.push(assistantMessage); // Append assistant response

                      // Step 4: Execute each function and add results to messages
                      for (const functionCall of functionCalls) {
                          const functionName = functionCall.name;

                          if (functionName === "calculate_mean") {
                              try {
                                  const argumentsDict = JSON.parse(functionCall.arguments);
                                  const functionResponse = calculateMean(argumentsDict.numbers);

                                  // Add tool response to messages
                                  messages.push({
                                      role: "tool",
                                      content: functionResponse.toString(),
                                      tool_call_id: functionCall.call_id,
                                      name: functionName,
                                  });
                              } catch (error) {
                                  // Handle errors gracefully
                                  messages.push({
                                      role: "tool",
                                      content: `Error: ${error.message}`,
                                      tool_call_id: functionCall.call_id,
                                      name: functionName,
                                  });
                              }
                          }
                      }

                      // Step 5: Get the final response from the model
                      const finalResponse = await client.chat.chat({
                          model: "palmyra-x5",
                          messages: messages,
                          stream: true
                      });

                      let finalContent = "";
                      for await (const chunk of finalResponse) {
                          const choice = chunk.choices[0];
                          if (choice.delta && choice.delta.content) {
                              finalContent += choice.delta.content;
                              process.stdout.write(choice.delta.content);
                          }
                      }

                      // Step 6: Add final response to message history
                      messages.push({
                          role: "assistant",
                          content: finalContent,
                      });
                      break;
                  }
              }
          }
      }

      main();
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Non-streaming">
    ### Non-streaming

    If you set `stream` to `false`, the tool calls come back in one object inside of the `message` object in the `choices` array. To process the tool calls:

    1. Get the assistant's response and append it to the message history
    2. Check for tool calls and execute the corresponding functions, appending tool results to the message history
    3. Get the final response from the model and append it to the message history

    #### Step 1: Get and append the assistant's response

    First, get the assistant's response message and append it to your conversation history. This is crucial for maintaining context.

    <CodeGroup>
      ```python Python theme={null}
      response_message = response.choices[0].message
      messages.append(response_message)  # Always append the assistant's response
      ```

      ```js JavaScript theme={null}
      const responseMessage = response.choices[0].message;
      messages.push(responseMessage);  // Always append the assistant's response
      ```
    </CodeGroup>

    #### Step 2: Execute functions and append tool results

    Next, check for tool calls and execute the corresponding functions with the arguments provided by the model. Then, append the tool results to the conversation history.

    <CodeGroup>
      ```python Python theme={null}
      tool_calls = response_message.tool_calls
      if tool_calls:
          for tool_call in tool_calls:
              tool_call_id = tool_call.id
              function_name = tool_call.function.name
              function_args = json.loads(tool_call.function.arguments)

              if function_name == "calculate_mean":
                  function_response = calculate_mean(function_args["numbers"])

                  # Append tool result to conversation history
                  messages.append({
                      "role": "tool",
                      "tool_call_id": tool_call_id,
                      "name": function_name,
                      "content": str(function_response),
                  })
      ```

      ```js JavaScript theme={null}
      const toolCalls = responseMessage.tool_calls;
      if (toolCalls && toolCalls.length > 0) {
          for (const toolCall of toolCalls) {
              const toolCallId = toolCall.id;
              const functionName = toolCall.function.name;
              const functionArgs = JSON.parse(toolCall.function.arguments);

              if (functionName === "calculate_mean") {
                  const functionResponse = calculateMean(functionArgs.numbers);

                  // Append tool result to conversation history
                  messages.push({
                      role: "tool",
                      tool_call_id: toolCallId,
                      name: functionName,
                      content: functionResponse.toString(),
                  });
              }
          }
      }
      ```
    </CodeGroup>

    #### Step 3: Get and append the final response

    After appending tool results, get the final response from the model and append it to maintain complete conversation history:

    <CodeGroup>
      ```python Python theme={null}
      final_response = client.chat.chat(
          model="palmyra-x5",
          messages=messages,
          stream=False
      )

      final_content = final_response.choices[0].message.content
      print(f"Final response: {final_content}")

      # Append final response to conversation history
      messages.append({
          "role": "assistant",
          "content": final_content
      })
      ```

      ```js JavaScript theme={null}
      const finalResponse = await client.chat.chat({
          model: "palmyra-x5",
          messages: messages,
          stream: false
      });

      const finalContent = finalResponse.choices[0].message.content;
      console.log(`Final response: ${finalContent}`);

      // Append final response to conversation history
      messages.push({
          role: "assistant",
          content: finalContent
      });
      ```
    </CodeGroup>

    #### Complete non-streaming code example

    <CodeGroup>
      ```python Python [expandable] theme={null}
      import json
      from writerai import Writer

      # Initialize the Writer client. If you don't pass the `apiKey` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      def calculate_mean(numbers: list) -> float:
          return sum(numbers) / len(numbers)

      tools = [
          {
              "type": "function",
              "function": {
                  "name": "calculate_mean",
                  "description": "Calculate the mean (average) of a list of numbers.",
                  "parameters": {
                      "type": "object",
                      "properties": {
                          "numbers": {
                              "type": "array",
                              "items": {"type": "number"},
                              "description": "List of numbers"
                          }
                      },
                      "required": ["numbers"]
                  }
              }
          }
      ]

      messages = [{"role": "user", "content": "what is the mean of [1,3,5,7,9]?"}]

      # Step 1: Initial request with tools
      response = client.chat.chat(
          model="palmyra-x5",
          messages=messages,
          tools=tools,
          tool_choice="auto",
          stream=False
      )

      # Step 2: Get and append assistant response
      response_message = response.choices[0].message
      messages.append(response_message)
      tool_calls = response_message.tool_calls

      # Step 3: Process tool calls if any
      if tool_calls:
          for tool_call in tool_calls:
              tool_call_id = tool_call.id
              function_name = tool_call.function.name
              function_args = json.loads(tool_call.function.arguments)

              if function_name == "calculate_mean":
                  function_response = calculate_mean(function_args["numbers"])

                  # Append tool result to conversation history
                  messages.append({
                      "role": "tool",
                      "tool_call_id": tool_call_id,
                      "name": function_name,
                      "content": str(function_response),
                  })

          # Step 4: Get final response
          final_response = client.chat.chat(
              model="palmyra-x5",
              messages=messages,
              stream=False
          )

          final_content = final_response.choices[0].message.content
          print(f"Final response: {final_content}")

          # Step 5: Append final response to conversation history
          messages.append({
              "role": "assistant",
              "content": final_content
          })
      else:
          # No tool calls, just use the original response
          print(f"Response: {response_message.content}")
      ```

      ```js JavaScript [expandable] theme={null}
      import { Writer } from "writer-sdk";

      // Initialize the Writer client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      function calculateMean(numbers) {
          if (numbers.length === 0) {
              throw new Error("Cannot calculate mean of an empty array");
          }
          return numbers.reduce((sum, num) => sum + num, 0) / numbers.length;
      }

      const tools = [
          {
              type: "function",
              function: {
                  name: "calculate_mean",
                  description: "Calculate the mean (average) of a list of numbers.",
                  parameters: {
                      type: "object",
                      properties: {
                          numbers: {
                              type: "array",
                              items: { type: "number" },
                              description: "List of numbers",
                          },
                      },
                      required: ["numbers"],
                  },
              },
          },
      ];

      async function main() {
          let messages = [
              { role: "user", content: "what is the mean of [1,3,5,7,9]?" },
          ];

          // Step 1: Initial request with tools
          const response = await client.chat.chat({
              model: "palmyra-x5",
              messages: messages,
              tools: tools,
              tool_choice: "auto",
              stream: false,
          });

          // Step 2: Get and append assistant response
          const responseMessage = response.choices[0].message;
          messages.push(responseMessage);  // Append assistant response
          const toolCalls = responseMessage.tool_calls;

          // Step 3: Process tool calls if any
          if (toolCalls && toolCalls.length > 0) {
              for (const toolCall of toolCalls) {
                  const toolCallId = toolCall.id;
                  const functionName = toolCall.function.name;
                  const functionArgs = JSON.parse(toolCall.function.arguments);

                  if (functionName === "calculate_mean") {
                      const functionResponse = calculateMean(functionArgs.numbers);

                      // Append tool result to conversation history
                      messages.push({
                          role: "tool",
                          tool_call_id: toolCallId,
                          name: functionName,
                          content: functionResponse.toString(),
                      });
                  }
              }

              // Step 4: Get final response
              const finalResponse = await client.chat.chat({
                  model: "palmyra-x5",
                  messages: messages,
                  stream: false
              });

              const finalContent = finalResponse.choices[0].message.content;
              console.log(`Final response: ${finalContent}`);

              // Step 5: Append final response to conversation history
              messages.push({
                  role: "assistant",
                  content: finalContent
              });
          } else {
              // No tool calls, just use the original response
              console.log(`Response: ${responseMessage.content}`);
          }
      }

      main();
      ```
    </CodeGroup>
  </Tab>
</Tabs>

## Multiple tool calls

When the model uses multiple tools in a single request, you'll receive multiple tool calls in the response. This section shows you how to handle multiple tool calls for both streaming and non-streaming approaches.

<Note>
  **Non-streaming**: The processing logic for multiple tool calls is identical to single tool calls - the same code handles both scenarios. The only difference is that the loop for checking the response for tool calling processes multiple tool calls instead of one.

  **Streaming**: Multiple tool calls require different logic because tool calls stream in chunks. You need to collect and reconstruct multiple tool calls from streaming chunks before processing them.
</Note>

### Define multiple functions

First, define the functions in your code.

<CodeGroup>
  ```python Python theme={null}
  import math

  def calculate_mean(numbers: list) -> float:
      if not numbers:
          raise ValueError("Cannot calculate mean of an empty list")
      return sum(numbers) / len(numbers)

  def calculate_standard_deviation(numbers: list) -> float:
      if len(numbers) < 2:
          raise ValueError("Cannot calculate standard deviation with fewer than 2 numbers")
      mean = calculate_mean(numbers)
      variance = sum((x - mean) ** 2 for x in numbers) / len(numbers)
      return math.sqrt(variance)
  ```

  ```js JavaScript theme={null}
  function calculateMean(numbers) {
      if (numbers.length === 0) {
          throw new Error("Cannot calculate mean of an empty array");
      }
      return numbers.reduce((sum, num) => sum + num, 0) / numbers.length;
  }

  function calculateStandardDeviation(numbers) {
      if (numbers.length < 2) {
          throw new Error("Cannot calculate standard deviation with fewer than 2 numbers");
      }
      const mean = calculateMean(numbers);
      const variance = numbers.reduce((sum, num) => sum + Math.pow(num - mean, 2), 0) / numbers.length;
      return Math.sqrt(variance);
  }
  ```
</CodeGroup>

### Define tools array with multiple functions

Create a tools array that includes both functions:

<Note>
  For more information about describing functions as tools, see [describe functions as tools section](#describe-functions-as-tools)
</Note>

<CodeGroup>
  ```python Python theme={null}
  tools = [
      {
          "type": "function",
          "function": {
              "name": "calculate_mean",
              "description": "Calculate the mean (average) of a list of numbers. Use this when asked for the average or mean of numbers.",
              "parameters": {
                  "type": "object",
                  "properties": {
                      "numbers": {
                          "type": "array",
                          "items": {"type": "number"},
                          "description": "List of numbers to calculate the mean for"
                      }
                  },
                  "required": ["numbers"]
              }
          }
      },
      {
          "type": "function",
          "function": {
              "name": "calculate_standard_deviation",
              "description": "Calculate the population standard deviation (N) of a list of numbers. Use this when asked for standard deviation, variance, or statistical spread of numbers.",
              "parameters": {
                  "type": "object",
                  "properties": {
                      "numbers": {
                          "type": "array",
                          "items": {"type": "number"},
                          "description": "List of numbers to calculate the standard deviation for"
                      }
                  },
                  "required": ["numbers"]
              }
          }
      }
  ]
  ```

  ```js JavaScript theme={null}
  const tools = [
      {
          type: "function",
          function: {
              name: "calculate_mean",
              description: "Calculate the mean (average) of a list of numbers. Use this when asked for the average or mean of numbers.",
              parameters: {
                  type: "object",
                  properties: {
                      numbers: {
                          type: "array",
                          items: { type: "number" },
                          description: "List of numbers to calculate the mean for"
                      }
                  },
                  required: ["numbers"]
              }
          }
      },
      {
          type: "function",
          function: {
              name: "calculate_standard_deviation",
              description: "Calculate the population standard deviation (N) of a list of numbers. Use this when asked for standard deviation, variance, or statistical spread of numbers.",
              parameters: {
                  type: "object",
                  properties: {
                      numbers: {
                          type: "array",
                          items: { type: "number" },
                          description: "List of numbers to calculate the standard deviation for"
                      }
                  },
                  required: ["numbers"]
              }
          }
      }
  ];
  ```
</CodeGroup>

## Process multiple tool calls

When the model identifies a need to call multiple tools based on the user’s input, you'll receive multiple tool calls in the response. The processing differs between streaming and non-streaming approaches.

<Tabs>
  <Tab title="Streaming">
    ### Streaming

    When using streaming with multiple tool calls, the tool calls come back in chunks inside of the delta object of the choices array. To process multiple tool calls:

    1. Stream and collect multiple tool calls from the response chunks
    2. Reconstruct the assistant's response with all tool calls and append it to the message history
    3. Execute all functions and append tool results to the message history
    4. Get the final response from the model and append it to the message history

    This requires different logic from single tool calls because you need to collect and reconstruct multiple tool calls from streaming chunks.

    #### Step 1: Stream and collect multiple tool calls from the response chunks

    First, stream and collect multiple tool calls from the response chunks. This is where multiple tool calls differ from single tool calls:

    <CodeGroup>
      ```python Python theme={null}
      streaming_content = ""
      function_calls = []

      for chunk in response:
          choice = chunk.choices[0]

          if choice.delta:
              # Collect tool calls as they stream in
              if choice.delta.tool_calls:
                  for tool_call in choice.delta.tool_calls:
                      if tool_call.id:
                          # Start a new function call
                          function_calls.append({
                              "name": "",
                              "arguments": "",
                              "call_id": tool_call.id
                          })
                      if tool_call.function:
                          # Append to the most recent function call
                          if function_calls:
                              function_calls[-1]["name"] += tool_call.function.name or ""
                              function_calls[-1]["arguments"] += tool_call.function.arguments or ""

              # Collect regular content (for cases where no tools are called)
              elif choice.delta.content:
                  streaming_content += choice.delta.content

          # Check if streaming is complete
          if choice.finish_reason:
              if choice.finish_reason == "stop":
                  # No tools were called, just regular response
                  messages.append({"role": "assistant", "content": streaming_content})
                  break

              elif choice.finish_reason == "tool_calls":
                  print(f"Tool calls collected: {len(function_calls)}")
                  break
      ```

      ```js JavaScript theme={null}
      let streamingContent = "";
      const functionCalls = [];

      for await (const chunk of response) {
          const choice = chunk.choices[0];

          if (choice.delta) {
              // Collect tool calls as they stream in
              if (choice.delta.tool_calls) {
                  for (const toolCall of choice.delta.tool_calls) {
                      if (toolCall.id) {
                          // Start a new function call
                          functionCalls.push({
                              name: "",
                              arguments: "",
                              call_id: toolCall.id
                          });
                      }
                      if (toolCall.function) {
                          // Append to the most recent function call
                          if (functionCalls.length > 0) {
                              functionCalls[functionCalls.length - 1].name += toolCall.function.name || "";
                              functionCalls[functionCalls.length - 1].arguments += toolCall.function.arguments || "";
                          }
                      }
                  }
              }
              // Collect regular content (for cases where no tools are called)
              else if (choice.delta.content) {
                  streamingContent += choice.delta.content;
              }
          }

          // Check if streaming is complete
          if (choice.finish_reason) {
              if (choice.finish_reason === "stop") {
                  // No tools were called, just regular response
                  messages.push({ role: "assistant", content: streamingContent });
                  break;
              } else if (choice.finish_reason === "tool_calls") {
                  console.log(`Tool calls collected: ${functionCalls.length}`);
                  break;
              }
          }
      }
      ```
    </CodeGroup>

    #### Step 2: Reconstruct and append assistant message with multiple tool calls

    Reconstruct the assistant message with all collected tool calls:

    <CodeGroup>
      ```python Python theme={null}
      # Step 3: Reconstruct and append assistant message with multiple tool calls
      tool_calls_for_message = []
      for func_call in function_calls:
          tool_calls_for_message.append({
              "id": func_call["call_id"],
              "type": "function",
              "function": {
                  "name": func_call["name"],
                  "arguments": func_call["arguments"]
              }
          })

      assistant_message = {
          "role": "assistant",
          "content": None,
          "tool_calls": tool_calls_for_message
      }
      messages.append(assistant_message)
      ```

      ```js JavaScript theme={null}
      // Step 3: Reconstruct and append assistant message with multiple tool calls
      const toolCallsForMessage = [];
      for (const funcCall of functionCalls) {
          toolCallsForMessage.push({
              id: funcCall.call_id,
              type: "function",
              function: {
                  name: funcCall.name,
                  arguments: funcCall.arguments
              }
          });
      }

      const assistantMessage = {
          role: "assistant",
          content: null,
          tool_calls: toolCallsForMessage
      };
      messages.push(assistantMessage);
      ```
    </CodeGroup>

    #### Step 3: Execute all functions and append results

    Execute each function and append the results to the conversation history:

    <CodeGroup>
      ```python Python theme={null}
      # Step 4: Execute all functions and append results
      for function_call in function_calls:
          function_name = function_call["name"]

          print(f"Processing tool call: {function_name}")

          if function_name == "calculate_mean":
              try:
                  arguments_dict = json.loads(function_call["arguments"])
                  function_response = calculate_mean(arguments_dict["numbers"])
              except Exception as e:
                  function_response = f"Error: {str(e)}"
          elif function_name == "calculate_standard_deviation":
              try:
                  arguments_dict = json.loads(function_call["arguments"])
                  function_response = calculate_standard_deviation(arguments_dict["numbers"])
              except Exception as e:
                  function_response = f"Error: {str(e)}"
          else:
              function_response = f"Unknown function: {function_name}"

          print(f"Function response: {function_response}")

          # Append tool result to conversation history
          messages.append({
              "role": "tool",
              "content": str(function_response),
              "tool_call_id": function_call["call_id"],
              "name": function_name,
          })
      ```

      ```js JavaScript theme={null}
      // Step 4: Execute all functions and append results
      for (const functionCall of functionCalls) {
          const functionName = functionCall.name;
          let functionResponse;

          console.log(`Processing tool call: ${functionName}`);

          if (functionName === "calculate_mean") {
              try {
                  const argumentsDict = JSON.parse(functionCall.arguments);
                  functionResponse = calculateMean(argumentsDict.numbers);
              } catch (error) {
                  functionResponse = `Error: ${error.message}`;
              }
          } else if (functionName === "calculate_standard_deviation") {
              try {
                  const argumentsDict = JSON.parse(functionCall.arguments);
                  functionResponse = calculateStandardDeviation(argumentsDict.numbers);
              } catch (error) {
                  functionResponse = `Error: ${error.message}`;
              }
          } else {
              functionResponse = `Unknown function: ${functionName}`;
          }

          console.log(`Function response: ${functionResponse}`);

          // Append tool result to conversation history
          messages.push({
              role: "tool",
              content: functionResponse.toString(),
              tool_call_id: functionCall.call_id,
              name: functionName,
          });
      }
      ```
    </CodeGroup>

    #### Step 4: Get the final response

    Get the final response from the model after all tool calls are processed:

    <CodeGroup>
      ```python Python theme={null}
      # Step 5: Get the final response
      final_response = client.chat.chat(
          model="palmyra-x5",
          messages=messages,
          stream=True
      )

      final_content = ""
      for chunk in final_response:
          choice = chunk.choices[0]
          if choice.delta and choice.delta.content:
              final_content += choice.delta.content

      print(f"Final response: {final_content}")
      ```

      ```js JavaScript theme={null}
      // Step 5: Get the final response
      const finalResponse = await client.chat.chat({
          model: "palmyra-x5",
          messages: messages,
          stream: true
      });

      let finalContent = "";
      for await (const chunk of finalResponse) {
          const choice = chunk.choices[0];
          if (choice.delta && choice.delta.content) {
              finalContent += choice.delta.content;
          }
      }

      console.log(`Final response: ${finalContent}`);
      ```
    </CodeGroup>

    #### Step 5: Append final response to conversation history

    Append the final response to maintain complete conversation history:

    <CodeGroup>
      ```python Python theme={null}
      # Step 5: Append final response to conversation history
      messages.append({
          "role": "assistant",
          "content": final_content
      })
      ```

      ```js JavaScript theme={null}
      // Step 5: Append final response to conversation history
      messages.push({
          role: "assistant",
          content: finalContent
      });
      ```
    </CodeGroup>

    #### Complete streaming code example

    <CodeGroup>
      ```python Python [expandable] theme={null}
      import json
      import math
      from writerai import Writer

      # Initialize the Writer client. If you don't pass the `apiKey` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      def calculate_mean(numbers: list) -> float:
          if not numbers:
              raise ValueError("Cannot calculate mean of an empty list")
          return sum(numbers) / len(numbers)

      def calculate_standard_deviation(numbers: list) -> float:
          if len(numbers) < 2:
              raise ValueError("Cannot calculate standard deviation with fewer than 2 numbers")
          mean = calculate_mean(numbers)
          variance = sum((x - mean) ** 2 for x in numbers) / len(numbers)
          return math.sqrt(variance)

      tools = [
          {
              "type": "function",
              "function": {
                  "name": "calculate_mean",
                  "description": "Calculate the mean (average) of a list of numbers. Use this when asked for the average or mean of numbers.",
                  "parameters": {
                      "type": "object",
                      "properties": {
                          "numbers": {
                              "type": "array",
                              "items": {"type": "number"},
                              "description": "List of numbers to calculate the mean for"
                          }
                      },
                      "required": ["numbers"]
                  }
              }
          },
          {
              "type": "function",
              "function": {
                  "name": "calculate_standard_deviation",
                  "description": "Calculate the standard deviation of a list of numbers. Use this when asked for standard deviation, variance, or statistical spread of numbers.",
                  "parameters": {
                      "type": "object",
                      "properties": {
                          "numbers": {
                              "type": "array",
                              "items": {"type": "number"},
                              "description": "List of numbers to calculate the standard deviation for"
                          }
                      },
                      "required": ["numbers"]
                  }
              }
          }
      ]

      messages = [{"role": "user", "content": "What are the mean and standard deviation of [10, 20, 30, 40, 50]?"}]

      # Step 1: Initial request with tools
      response = client.chat.chat(
          model="palmyra-x5",
          messages=messages,
          tools=tools,
          tool_choice="auto",
          stream=True
      )

      # Step 2: Process streaming response to collect multiple tool calls
      streaming_content = ""
      function_calls = []

      for chunk in response:
          choice = chunk.choices[0]

          if choice.delta:
              # Collect tool calls as they stream in
              if choice.delta.tool_calls:
                  for tool_call in choice.delta.tool_calls:
                      if tool_call.id:
                          # Start a new function call
                          function_calls.append({
                              "name": "",
                              "arguments": "",
                              "call_id": tool_call.id
                          })
                      if tool_call.function:
                          # Append to the most recent function call
                          if function_calls:
                              function_calls[-1]["name"] += tool_call.function.name or ""
                              function_calls[-1]["arguments"] += tool_call.function.arguments or ""

              # Collect regular content (for cases where no tools are called)
              elif choice.delta.content:
                  streaming_content += choice.delta.content

          # Check if streaming is complete
          if choice.finish_reason:
              if choice.finish_reason == "stop":
                  # No tools were called, just regular response
                  print(f"Response: {streaming_content}")
                  messages.append({"role": "assistant", "content": streaming_content})
                  break

              elif choice.finish_reason == "tool_calls":
                  print(f"Tool calls collected: {len(function_calls)}")
                  break

      # Step 3: Reconstruct and append assistant message with multiple tool calls
      tool_calls_for_message = []
      for func_call in function_calls:
          tool_calls_for_message.append({
              "id": func_call["call_id"],
              "type": "function",
              "function": {
                  "name": func_call["name"],
                  "arguments": func_call["arguments"]
              }
          })

      assistant_message = {
          "role": "assistant",
          "content": None,
          "tool_calls": tool_calls_for_message
      }
      messages.append(assistant_message)

      # Step 4: Execute all functions and append results
      for function_call in function_calls:
          function_name = function_call["name"]

          print(f"Processing tool call: {function_name}")

          if function_name == "calculate_mean":
              try:
                  arguments_dict = json.loads(function_call["arguments"])
                  function_response = calculate_mean(arguments_dict["numbers"])
              except Exception as e:
                  function_response = f"Error: {str(e)}"
          elif function_name == "calculate_standard_deviation":
              try:
                  arguments_dict = json.loads(function_call["arguments"])
                  function_response = calculate_standard_deviation(arguments_dict["numbers"])
              except Exception as e:
                  function_response = f"Error: {str(e)}"
          else:
              function_response = f"Unknown function: {function_name}"

          print(f"Function response: {function_response}")

          # Append tool result to conversation history
          messages.append({
              "role": "tool",
              "content": str(function_response),
              "tool_call_id": function_call["call_id"],
              "name": function_name,
          })

      # Step 5: Get the final response
      final_response = client.chat.chat(
          model="palmyra-x5",
          messages=messages,
          stream=True
      )

      final_content = ""
      for chunk in final_response:
          choice = chunk.choices[0]
          if choice.delta and choice.delta.content:
              final_content += choice.delta.content
              print(choice.delta.content, end="", flush=True)

      print(f"\nFinal response: {final_content}")

      # Step 6: Append final response to conversation history
      messages.append({
          "role": "assistant",
          "content": final_content
      })
      ```

      ```js JavaScript [expandable] theme={null}
      import { Writer } from "writer-sdk";

      // Initialize the Writer client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      function calculateMean(numbers) {
          if (numbers.length === 0) {
              throw new Error("Cannot calculate mean of an empty array");
          }
          return numbers.reduce((sum, num) => sum + num, 0) / numbers.length;
      }

      function calculateStandardDeviation(numbers) {
          if (numbers.length < 2) {
              throw new Error("Cannot calculate standard deviation with fewer than 2 numbers");
          }
          const mean = calculateMean(numbers);
          const variance = numbers.reduce((sum, num) => sum + Math.pow(num - mean, 2), 0) / numbers.length;
          return Math.sqrt(variance);
      }

      const tools = [
          {
              type: "function",
              function: {
                  name: "calculate_mean",
                  description: "Calculate the mean (average) of a list of numbers. Use this when asked for the average or mean of numbers.",
                  parameters: {
                      type: "object",
                      properties: {
                          numbers: {
                              type: "array",
                              items: { type: "number" },
                              description: "List of numbers to calculate the mean for"
                          }
                      },
                      required: ["numbers"]
                  }
              }
          },
          {
              type: "function",
              function: {
                  name: "calculate_standard_deviation",
                  description: "Calculate the standard deviation of a list of numbers. Use this when asked for standard deviation, variance, or statistical spread of numbers.",
                  parameters: {
                      type: "object",
                      properties: {
                          numbers: {
                              type: "array",
                              items: { type: "number" },
                              description: "List of numbers to calculate the standard deviation for"
                          }
                      },
                      required: ["numbers"]
                  }
              }
          }
      ];

      async function main() {
          let messages = [{ role: "user", content: "What are the mean and standard deviation of [10, 20, 30, 40, 50]?" }];

          // Step 1: Initial request with tools
          const response = await client.chat.chat({
              model: "palmyra-x5",
              messages: messages,
              tools: tools,
              tool_choice: "auto",
              stream: true
          });

          // Step 2: Process streaming response to collect multiple tool calls
          let streamingContent = "";
          const functionCalls = [];

          for await (const chunk of response) {
              const choice = chunk.choices[0];

              if (choice.delta) {
                  // Collect tool calls as they stream in
                  if (choice.delta.tool_calls) {
                      for (const toolCall of choice.delta.tool_calls) {
                          if (toolCall.id) {
                              // Start a new function call
                              functionCalls.push({
                                  name: "",
                                  arguments: "",
                                  call_id: toolCall.id
                              });
                          }
                          if (toolCall.function) {
                              // Append to the most recent function call
                              if (functionCalls.length > 0) {
                                  functionCalls[functionCalls.length - 1].name += toolCall.function.name || "";
                                  functionCalls[functionCalls.length - 1].arguments += toolCall.function.arguments || "";
                              }
                          }
                      }
                  }
                  // Collect regular content (for cases where no tools are called)
                  else if (choice.delta.content) {
                      streamingContent += choice.delta.content;
                  }
              }

              // Check if streaming is complete
              if (choice.finish_reason) {
                  if (choice.finish_reason === "stop") {
                      // No tools were called, just regular response
                      console.log(`Response: ${streamingContent}`);
                      messages.push({ role: "assistant", content: streamingContent });
                      break;
                  } else if (choice.finish_reason === "tool_calls") {
                      console.log(`Tool calls collected: ${functionCalls.length}`);
                      break;
                  }
              }
          }

          // Step 3: Reconstruct and append assistant message with multiple tool calls
          const toolCallsForMessage = [];
          for (const funcCall of functionCalls) {
              toolCallsForMessage.push({
                  id: funcCall.call_id,
                  type: "function",
                  function: {
                      name: funcCall.name,
                      arguments: funcCall.arguments
                  }
              });
          }

          const assistantMessage = {
              role: "assistant",
              content: null,
              tool_calls: toolCallsForMessage
          };
          messages.push(assistantMessage);

          // Step 4: Execute all functions and append results
          for (const functionCall of functionCalls) {
              const functionName = functionCall.name;

              console.log(`Processing tool call: ${functionName}`);

              let functionResponse;
              if (functionName === "calculate_mean") {
                  try {
                      const argumentsDict = JSON.parse(functionCall.arguments);
                      functionResponse = calculateMean(argumentsDict.numbers);
                  } catch (error) {
                      functionResponse = `Error: ${error.message}`;
                  }
              } else if (functionName === "calculate_standard_deviation") {
                  try {
                      const argumentsDict = JSON.parse(functionCall.arguments);
                      functionResponse = calculateStandardDeviation(argumentsDict.numbers);
                  } catch (error) {
                      functionResponse = `Error: ${error.message}`;
                  }
              } else {
                  functionResponse = `Unknown function: ${functionName}`;
              }

              console.log(`Function response: ${functionResponse}`);

              // Append tool result to conversation history
              messages.push({
                  role: "tool",
                  content: functionResponse.toString(),
                  tool_call_id: functionCall.call_id,
                  name: functionName,
              });
          }

          // Step 5: Get the final response
          const finalResponse = await client.chat.chat({
              model: "palmyra-x5",
              messages: messages,
              stream: true
          });

          let finalContent = "";
          for await (const chunk of finalResponse) {
              const choice = chunk.choices[0];
              if (choice.delta && choice.delta.content) {
                  finalContent += choice.delta.content;
                  process.stdout.write(choice.delta.content);
              }
          }

          console.log(`\nFinal response: ${finalContent}`);

          // Step 6: Append final response to conversation history
          messages.push({
              role: "assistant",
              content: finalContent
          });
      }

      main();
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Non-streaming">
    ### Non-streaming

    The processing logic for multiple tool calls is identical to single tool calls - the same code handles both scenarios. The only difference is that the loop for checking the response for tool calling processes multiple tool calls instead of one.

    #### Step 1: Get and append the assistant's response

    First, get the assistant's response message and append it to your conversation history. This is crucial for maintaining context.

    <CodeGroup>
      ```python Python theme={null}
      response_message = response.choices[0].message
      messages.append(response_message)  # Always append the assistant's response
      tool_calls = response_message.tool_calls
      ```

      ```js JavaScript theme={null}
      const responseMessage = response.choices[0].message;
      messages.push(responseMessage);  // Always append the assistant's response
      const toolCalls = responseMessage.tool_calls;
      ```
    </CodeGroup>

    #### Step 2: Execute functions and append tool results

    Next, check for tool calls and execute the corresponding functions with the arguments provided by the model. Then, append the tool results to the conversation history.

    <CodeGroup>
      ```python Python theme={null}
      tool_calls = response_message.tool_calls
      if tool_calls:
          for tool_call in tool_calls:
              tool_call_id = tool_call.id
              function_name = tool_call.function.name
              function_args = json.loads(tool_call.function.arguments)

              # Execute the appropriate function based on the tool call
              if function_name == "calculate_mean":
                  function_response = calculate_mean(function_args["numbers"])
              elif function_name == "calculate_standard_deviation":
                  function_response = calculate_standard_deviation(function_args["numbers"])
              else:
                  function_response = f"Unknown function: {function_name}"

              # Append tool result to conversation history
              messages.append({
                  "role": "tool",
                  "tool_call_id": tool_call_id,
                  "name": function_name,
                  "content": str(function_response),
              })
      else:
          # No tool calls, just use the original response
          print(f"Response: {response_message.content}")
      ```

      ```js JavaScript theme={null}
      const toolCalls = responseMessage.tool_calls;
      if (toolCalls && toolCalls.length > 0) {
          for (const toolCall of toolCalls) {
              const toolCallId = toolCall.id;
              const functionName = toolCall.function.name;
              const functionArgs = JSON.parse(toolCall.function.arguments);

              // Execute the appropriate function based on the tool call
              let functionResponse;
              if (functionName === "calculate_mean") {
                  functionResponse = calculateMean(functionArgs.numbers);
              } else if (functionName === "calculate_standard_deviation") {
                  functionResponse = calculateStandardDeviation(functionArgs.numbers);
              } else {
                  functionResponse = `Unknown function: ${functionName}`;
              }

              // Append tool result to conversation history
              messages.push({
                  role: "tool",
                  tool_call_id: toolCallId,
                  name: functionName,
                  content: functionResponse.toString(),
              });
          }
      } else {
          // No tool calls, just use the original response
          console.log(`Response: ${responseMessage.content}`);
      }
      ```
    </CodeGroup>

    #### Step 3: Get and append the final response

    After appending tool results, get the final response from the model and append it to maintain complete conversation history:

    <CodeGroup>
      ```python Python theme={null}
          final_response = client.chat.chat(
              model="palmyra-x5",
              messages=messages,
              stream=False
          )

          final_content = final_response.choices[0].message.content
          print(f"Final response: {final_content}")
      ```

      ```js JavaScript theme={null}
          const finalResponse = await client.chat.chat({
              model: "palmyra-x5",
              messages: messages,
              stream: false
          });

          const finalContent = finalResponse.choices[0].message.content;
          console.log(`Final response: ${finalContent}`);
      ```
    </CodeGroup>

    #### Step 4: Append final response to conversation history

    Append the final response to maintain complete conversation history:

    <CodeGroup>
      ```python Python theme={null}
          # Append final response to conversation history
          messages.append({
              "role": "assistant",
              "content": final_content
          })
      ```

      ```js JavaScript theme={null}
          // Append final response to conversation history
          messages.push({
              role: "assistant",
              content: finalContent
          });
      ```
    </CodeGroup>

    #### Complete non-streaming code example

    <CodeGroup>
      ```python Python [expandable] theme={null}
      import json
      import math
      from writerai import Writer

      # Initialize the Writer client. If you don't pass the `apiKey` parameter,
      # the client looks for the `WRITER_API_KEY` environment variable.
      client = Writer()

      def calculate_mean(numbers: list) -> float:
          if not numbers:
              raise ValueError("Cannot calculate mean of an empty list")
          return sum(numbers) / len(numbers)

      def calculate_standard_deviation(numbers: list) -> float:
          if len(numbers) < 2:
              raise ValueError("Cannot calculate standard deviation with fewer than 2 numbers")
          mean = calculate_mean(numbers)
          variance = sum((x - mean) ** 2 for x in numbers) / len(numbers)
          return math.sqrt(variance)

      tools = [
          {
              "type": "function",
              "function": {
                  "name": "calculate_mean",
                  "description": "Calculate the mean (average) of a list of numbers. Use this when asked for the average or mean of numbers.",
                  "parameters": {
                      "type": "object",
                      "properties": {
                          "numbers": {
                              "type": "array",
                              "items": {"type": "number"},
                              "description": "List of numbers to calculate the mean for"
                          }
                      },
                      "required": ["numbers"]
                  }
              }
          },
          {
              "type": "function",
              "function": {
                  "name": "calculate_standard_deviation",
                  "description": "Calculate the standard deviation of a list of numbers. Use this when asked for standard deviation, variance, or statistical spread of numbers.",
                  "parameters": {
                      "type": "object",
                      "properties": {
                          "numbers": {
                              "type": "array",
                              "items": {"type": "number"},
                              "description": "List of numbers to calculate the standard deviation for"
                          }
                      },
                      "required": ["numbers"]
                  }
              }
          }
      ]

      messages = [{"role": "user", "content": "What are the mean and standard deviation of [10, 20, 30, 40, 50]?"}]

      # Step 1: Initial request with tools
      response = client.chat.chat(
          model="palmyra-x5",
          messages=messages,
          tools=tools,
          tool_choice="auto",
          stream=False
      )

      # Step 2: Get and append assistant response
      response_message = response.choices[0].message
      messages.append(response_message)
      tool_calls = response_message.tool_calls

      # Step 3: Process tool calls if any
      if tool_calls:
          for tool_call in tool_calls:
              tool_call_id = tool_call.id
              function_name = tool_call.function.name
              function_args = json.loads(tool_call.function.arguments)

              # Execute the appropriate function based on the tool call
              if function_name == "calculate_mean":
                  function_response = calculate_mean(function_args["numbers"])
              elif function_name == "calculate_standard_deviation":
                  function_response = calculate_standard_deviation(function_args["numbers"])
              else:
                  function_response = f"Unknown function: {function_name}"

              # Append tool result to conversation history
              messages.append({
                  "role": "tool",
                  "tool_call_id": tool_call_id,
                  "name": function_name,
                  "content": str(function_response),
              })

          # Step 4: Get final response
          final_response = client.chat.chat(
              model="palmyra-x5",
              messages=messages,
              stream=False
          )

          final_content = final_response.choices[0].message.content
          print(f"Final response: {final_content}")

          # Step 5: Append final response to conversation history
          messages.append({
              "role": "assistant",
              "content": final_content
          })
      else:
          # No tool calls, just use the original response
          print(f"Response: {response_message.content}")
      ```

      ```js JavaScript [expandable] theme={null}
      import { Writer } from "writer-sdk";

      // Initialize the Writer client. If you don't pass the `apiKey` parameter,
      // the client looks for the `WRITER_API_KEY` environment variable.
      const client = new Writer();

      function calculateMean(numbers) {
          if (numbers.length === 0) {
              throw new Error("Cannot calculate mean of an empty array");
          }
          return numbers.reduce((sum, num) => sum + num, 0) / numbers.length;
      }

      function calculateStandardDeviation(numbers) {
          if (numbers.length < 2) {
              throw new Error("Cannot calculate standard deviation with fewer than 2 numbers");
          }
          const mean = calculateMean(numbers);
          const variance = numbers.reduce((sum, num) => sum + Math.pow(num - mean, 2), 0) / numbers.length;
          return Math.sqrt(variance);
      }

      const tools = [
          {
              type: "function",
              function: {
                  name: "calculate_mean",
                  description: "Calculate the mean (average) of a list of numbers. Use this when asked for the average or mean of numbers.",
                  parameters: {
                      type: "object",
                      properties: {
                          numbers: {
                              type: "array",
                              items: { type: "number" },
                              description: "List of numbers to calculate the mean for"
                          }
                      },
                      required: ["numbers"]
                  }
              }
          },
          {
              type: "function",
              function: {
                  name: "calculate_standard_deviation",
                  description: "Calculate the standard deviation of a list of numbers. Use this when asked for standard deviation, variance, or statistical spread of numbers.",
                  parameters: {
                      type: "object",
                      properties: {
                          numbers: {
                              type: "array",
                              items: { type: "number" },
                              description: "List of numbers to calculate the standard deviation for"
                          }
                      },
                      required: ["numbers"]
                  }
              }
          }
      ];

      async function main() {
          let messages = [{ role: "user", content: "What are the mean and standard deviation of [10, 20, 30, 40, 50]?" }];

          // Step 1: Initial request with tools
          const response = await client.chat.chat({
              model: "palmyra-x5",
              messages: messages,
              tools: tools,
              tool_choice: "auto",
              stream: false
          });

          // Step 2: Get and append assistant response
          const responseMessage = response.choices[0].message;
          messages.push(responseMessage);
          const toolCalls = responseMessage.tool_calls;

          // Step 3: Process tool calls if any
          if (toolCalls && toolCalls.length > 0) {
              for (const toolCall of toolCalls) {
                  const toolCallId = toolCall.id;
                  const functionName = toolCall.function.name;
                  const functionArgs = JSON.parse(toolCall.function.arguments);

                  // Execute the appropriate function based on the tool call
                  let functionResponse;
                  if (functionName === "calculate_mean") {
                      functionResponse = calculateMean(functionArgs.numbers);
                  } else if (functionName === "calculate_standard_deviation") {
                      functionResponse = calculateStandardDeviation(functionArgs.numbers);
                  } else {
                      functionResponse = `Unknown function: ${functionName}`;
                  }

                  // Append tool result to conversation history
                  messages.push({
                      role: "tool",
                      tool_call_id: toolCallId,
                      name: functionName,
                      content: functionResponse.toString(),
                  });
              }

              // Step 4: Get final response
              const finalResponse = await client.chat.chat({
                  model: "palmyra-x5",
                  messages: messages,
                  stream: false
              });

              const finalContent = finalResponse.choices[0].message.content;
              console.log(`Final response: ${finalContent}`);

              // Step 5: Append final response to conversation history
              messages.push({
                  role: "assistant",
                  content: finalContent
              });
          } else {
              // No tool calls, just use the original response
              console.log(`Response: ${responseMessage.content}`);
          }
      }

      main();
      ```
    </CodeGroup>
  </Tab>
</Tabs>

<Note>
  When processing multiple tool calls, ensure that:

  * All tool calls are executed before getting the final response
  * Each tool result is properly appended to the conversation history
  * Error handling is implemented for each tool call
  * The final response includes all tool results for context
</Note>

## Example: External API call

The following example covers a common use case for tool calling: calling an external API.

The code uses a publicly available [dictionary API](https://dictionaryapi.dev/) to return information about an English word's phonetic pronunciation.

This example is using non-streaming; for streaming, refer to the [multiple tool calls streaming example](#process-multiple-tool-calls) to adjust the code.

### Define function calling an API

First, define the function in your code. The examples below take in a word, call the dictionary API, and return the phonetic pronunciation of the word as a JSON-formatted string.

<CodeGroup>
  ```python Python theme={null}
  import requests
  import json
  def get_word_pronunciation(word):
      url = f"https://api.dictionaryapi.dev/api/v2/entries/en/{word}"
      response = requests.get(url)
      if response.status_code == 200:
          return json.dumps(response.json()[0]['phonetics'])
      else:
          return f"Failed to retrieve word pronunciation. Status code: {response.status_code}"
  ```

  ```js JavaScript theme={null}
  async function getWordPronunciation(word) {
      const url = `https://api.dictionaryapi.dev/api/v2/entries/en/${word}`;

      try {
          const response = await fetch(url);
          if (response.ok) {
              const data = await response.json();
              return JSON.stringify(data[0]['phonetics']);
          } else {
              return `Failed to retrieve word pronunciation. Status code: ${response.status}`;
          }
      } catch (error) {
          return `Error fetching word pronunciation: ${error.message}`;
      }
  }
  ```
</CodeGroup>

### Define tools array

Next, define a tools array that describes the tool with a JSON schema.

<CodeGroup>
  ```python Python theme={null}
  tools = [
      {
          "type": "function",
          "function": {
              "name": "get_word_pronunciation",
              "description": "A function that will return JSON containing the phonetic pronunciation of an English word",
              "parameters": {
                  "type": "object",
                  "properties": {
                      "word": {
                          "type": "string",
                          "description": "The word to get the phonetic pronunciation for",
                      }
                  },
                  "required": ["word"],
              },
          },
      }
  ]
  ```

  ```js JavaScript theme={null}
  const tools = [
      {
          type: "function",
          function: {
              name: "get_word_pronunciation",
              description: "A function that will return JSON containing the phonetic pronunciation of an English word",
              parameters: {
                  type: "object",
                  properties: {
                      word: {
                          type: "string",
                          description: "The word to get the phonetic pronunciation for"
                      }
                  },
                  required: ["word"]
              }
          }
      }
  ];
  ```
</CodeGroup>

### Pass the tools to the model

Call the `chat.chat` method with the `tools` parameter set to the `tools` array and `tool_choice` set to `auto`.

<CodeGroup>
  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "what is the phonetic pronunciation of the word 'epitome' in English?"}]

  response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      tools=tools,
      tool_choice="auto",
      stream=False
  )
  ```

  ```js JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  let messages = [{role: "user", content: "what is the phonetic pronunciation of the word 'epitome' in English?"}];

  const response = await client.chat.chat({
      model: "palmyra-x5",
      messages: messages,
      tools: tools,
      tool_choice: "auto",
      stream: false
  });
  ```
</CodeGroup>

### Check response for tool calling

Loop through the `tool_calls` array to check for the invocation of the tool. Then, call the tool's function with the arguments the model provided.

<CodeGroup>
  ```python Python theme={null}
  response_message = response.choices[0].message
  messages.append(response_message)
  tool_calls = response_message.tool_calls
  if tool_calls:
      tool_call = tool_calls[0]
      tool_call_id = tool_call.id
      function_name = tool_call.function.name
      function_args = json.loads(tool_call.function.arguments)

      if function_name == "get_word_pronunciation":
          function_response = get_word_pronunciation(function_args["word"])
  ```

  ```js JavaScript theme={null}
  const responseMessage = response.choices[0].message;
  messages.push(responseMessage);  // Append assistant response
  const toolCalls = responseMessage.tool_calls;

  if (toolCalls && toolCalls.length > 0) {
      const toolCall = toolCalls[0];
      const toolCallId = toolCall.id;
      const functionName = toolCall.function.name;
      const functionArgs = JSON.parse(toolCall.function.arguments);

      if (functionName === "get_word_pronunciation") {
          const functionResponse = await getWordPronunciation(functionArgs.word);
      }
  }
  ```
</CodeGroup>

### Append the tool result to the conversation history

Finally, pass the result back to the model by appending it to the messages array, and get the final response.

<CodeGroup>
  ```python Python theme={null}
  messages.append({
      "role": "tool",
      "tool_call_id": tool_call_id,
      "name": function_name,
      "content": function_response,
  })

  final_response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      stream=False
  )

  final_content = final_response.choices[0].message.content

  # Append final response to conversation history
  messages.append({
      "role": "assistant",
      "content": final_content
  })

  print(f"Final response: {final_content}")
  # Final response: The phonetic pronunciation of the word "epitome" in English is /əˈpɪt.ə.mi/...
  ```

  ```js JavaScript theme={null}
  messages.push({
      role: "tool",
      tool_call_id: toolCallId,
      name: functionName,
      content: functionResponse,
  });

  const finalResponse = await client.chat.chat({
      model: "palmyra-x5",
      messages: messages,
      stream: false
  });

  const finalContent = finalResponse.choices[0].message.content;

  // Append final response to conversation history
  messages.push({
      role: "assistant",
      content: finalContent
  });

  console.log(`Final response: ${finalContent}`);
  // Final response: The phonetic pronunciation of the word "epitome" in English is /əˈpɪt.ə.mi/...
  ```
</CodeGroup>

### Complete external API call example

<CodeGroup>
  ```python Python [expandable] theme={null}
  import requests
  import json
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  def get_word_pronunciation(word):
      url = f"https://api.dictionaryapi.dev/api/v2/entries/en/{word}"
      try:
          response = requests.get(url)
          if response.status_code == 200:
              return json.dumps(response.json()[0]['phonetics'])
          else:
              return f"Failed to retrieve word pronunciation. Status code: {response.status_code}"
      except Exception as e:
          return f"Error fetching word pronunciation: {str(e)}"

  tools = [
      {
          "type": "function",
          "function": {
              "name": "get_word_pronunciation",
              "description": "A function that will return JSON containing the phonetic pronunciation of an English word",
              "parameters": {
                  "type": "object",
                  "properties": {
                      "word": {
                          "type": "string",
                          "description": "The word to get the phonetic pronunciation for",
                      }
                  },
                  "required": ["word"],
              },
          },
      }
  ]

  messages = [{"role": "user", "content": "what is the phonetic pronunciation of the word 'epitome' in English?"}]

  # Step 1: Initial request
  response = client.chat.chat(
      model="palmyra-x5",
      messages=messages,
      tools=tools,
      tool_choice="auto",
      stream=False
  )

  # Step 2: Append assistant response
  response_message = response.choices[0].message
  messages.append(response_message)
  tool_calls = response_message.tool_calls

  # Step 3: Process tool calls
  if tool_calls:
      for tool_call in tool_calls:
          tool_call_id = tool_call.id
          function_name = tool_call.function.name
          function_args = json.loads(tool_call.function.arguments)

          if function_name == "get_word_pronunciation":
              function_response = get_word_pronunciation(function_args["word"])

              # Append tool result
              messages.append({
                  "role": "tool",
                  "tool_call_id": tool_call_id,
                  "name": function_name,
                  "content": function_response,
              })

      # Step 4: Get final response
      final_response = client.chat.chat(
          model="palmyra-x5",
          messages=messages,
          stream=False
      )

      final_content = final_response.choices[0].message.content

      # Step 5: Append final response
      messages.append({
          "role": "assistant",
          "content": final_content
      })

      print(f"Final response: {final_content}")

  # The conversation history is now complete and ready for additional turns
  ```

  ```javascript JavaScript [expandable] theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  async function getWordPronunciation(word) {
      const url = `https://api.dictionaryapi.dev/api/v2/entries/en/${word}`;

      try {
          const response = await fetch(url);
          if (response.ok) {
              const data = await response.json();
              return JSON.stringify(data[0]['phonetics']);
          } else {
              return `Failed to retrieve word pronunciation. Status code: ${response.status}`;
          }
      } catch (error) {
          return `Error fetching word pronunciation: ${error.message}`;
      }
  }

  const tools = [
      {
          type: "function",
          function: {
              name: "get_word_pronunciation",
              description: "A function that will return JSON containing the phonetic pronunciation of an English word",
              parameters: {
                  type: "object",
                  properties: {
                      word: {
                          type: "string",
                          description: "The word to get the phonetic pronunciation for"
                      }
                  },
                  required: ["word"]
              }
          }
      }
  ];

  async function main() {
      let messages = [{
          role: "user",
          content: "what is the phonetic pronunciation of the word 'epitome' in English?"
      }];

      // Step 1: Initial request
      const response = await client.chat.chat({
          model: "palmyra-x5",
          messages: messages,
          tools: tools,
          tool_choice: "auto",
          stream: false
      });

      // Step 2: Append assistant response
      const responseMessage = response.choices[0].message;
      messages.push(responseMessage);
      const toolCalls = responseMessage.tool_calls;

      // Step 3: Process tool calls
      if (toolCalls && toolCalls.length > 0) {
          for (const toolCall of toolCalls) {
              const toolCallId = toolCall.id;
              const functionName = toolCall.function.name;
              const functionArgs = JSON.parse(toolCall.function.arguments);

              if (functionName === "get_word_pronunciation") {
                  const functionResponse = await getWordPronunciation(functionArgs.word);

                  // Append tool result
                  messages.push({
                      role: "tool",
                      tool_call_id: toolCallId,
                      name: functionName,
                      content: functionResponse,
                  });
              }
          }

          // Step 4: Get final response
          const finalResponse = await client.chat.chat({
              model: "palmyra-x5",
              messages: messages,
              stream: false
          });

          const finalContent = finalResponse.choices[0].message.content;

          // Step 5: Append final response
          messages.push({
              role: "assistant",
              content: finalContent
          });

          console.log(`Final response: ${finalContent}`);
      }
  }

  main();
  ```
</CodeGroup>

## Next steps

By following this guide, you can incorporate tool calling into your application and augment the capabilities of a model with real-time data, math operations, business logic, and much more. For more examples, check out the [tool calling cookbooks](https://github.com/writer/cookbooks/tree/main/tool_calling) available on GitHub.

Next, learn how to invoke [no-code agents with tool calling](/home/applications-tool-calling). Or, explore prebuilt tools that Writer models can execute remotely:

* [Ask questions to a Knowledge Graph in a chat](/home/kg-chat)
* [Delegate questions to domain-specific LLMs](/home/model-delegation)
* [Analyze or interpret images](/home/vision-tool)
* [Translate text](/home/translation-tool)


# Toxic check
Source: https://dev.writer.com/home/toxic-check



We developed an independent system that classifies input and output textual data and predicts its level of toxicity. Our model was trained on a distinct dataset that included both toxic and nontoxic examples. Each prompt is sent through the API to one of our large language models, and the generated text is analyzed and classified by a model that predicts the text's toxicity level. This probability lies between 0 and 1, where 0 indicates toxic classes and 1 indicates nontoxic classes

The Palmyra models provide scores for several different attributes, including Toxicity. Here are some of the other attributes Palmyra can provide scores for:

* **Severe Toxicity**: A very hateful, aggressive, disrespectful comment or otherwise very likely to make a user leave a discussion or give up on sharing their perspective. This attribute is much less sensitive to more mild forms of toxicity, such as comments that include positive uses of curse words.
* **Insult**: Insulting, inflammatory, or negative comment towards a person or a group of people.
* **Profanity**: Swear words, curse words, or other obscene or profane language.
* **Identity Attack**: Negative or hateful comments targeting someone because of their identity.
* **Threat**: Describes an intention to inflict pain, injury, or violence against an individual or group.
* **Sexually explicit**: Contains references to sexual acts, body parts, or other lewd content.

The text completion API methods return a JSON response with two fields, prompt labels and completion labels, that indicate the toxicity scores for each part independently. The field class name contains a binary class label determined by score, where a value less than 0.5 indicates toxicity and a value greater than 0.5 indicates nontoxicity.

```json  theme={null}

"prompt_labels": [
   {
      "class_name": "nontoxic",
      "score": 0.995605
    }
  ],
"completion_labels": [
    {
      "class_name": "nontoxic",
      "score": 0.997559    }
  ]
```


# Translate text
Source: https://dev.writer.com/home/translation



<Warning>
  **Deprecation notice**: The [translation API endpoint](/api-reference/translation-api/translate) at `/v1/translation` is deprecated and will be removed on **December 22, 2025**.

  **Migration path**: Use the [translation tool](/home/translation-tool) in chat completions to translate text during conversations. The translation tool provides the same translation capabilities within a chat completion workflow. See the [migration guide](/api-reference/migration-guides/translation-api) for detailed instructions.
</Warning>

The [Translation API](/api-reference/translation-api/translate) translates text from one language to another. While Palmyra X models can perform translation tasks, they are not optimized for these tasks and may not perform well without correct prompting. Palmyra Translate is a dedicated model optimized for translation use cases.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Translation endpoint

**Endpoint:** `POST /v1/translation`

<CodeGroup>
  ```bash cURL theme={null}
  curl --request POST \
    --url https://api.writer.com/v1/translation \
    --header "Authorization: Bearer $WRITER_API_KEY" \
    --header 'Content-Type: application/json' \
    --data '{
    "model": "palmyra-translate",
    "source_language_code": "en",
    "target_language_code": "es",
    "text": "Hello, world!",
    "formality": true,
    "length_control": true,
    "mask_profanity": true
  }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `apiKey` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.translation.translate(
    model="palmyra-translate",
    source_language_code="en",
    target_language_code="es",
    text="Hello, world!",
    formality=True,
    length_control=True,
    mask_profanity=True
  )

  print(response.data)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  const client = new Writer();

  const response = await client.translation.translate({
    model: "palmyra-translate",
    source_language_code: "en",
    target_language_code: "es",
    text: "Hello, world!",
    formality: true,
    length_control: true,
    mask_profanity: true
  });

  console.log(response.data);
  ```
</CodeGroup>

### Request body

The request body is a JSON object with the following fields. All fields are required.

| Parameter              | Type    | Description                                                                                                                                                                                                                                                                                                                                                                                 |
| ---------------------- | ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `model`                | string  | The model to use for the translation. Must be `palmyra-translate`.                                                                                                                                                                                                                                                                                                                          |
| `source_language_code` | string  | The ISO-639-1 language code of the original text to translate. For example, `en` for English, `zh` for Chinese, `fr` for French, `es` for Spanish. If the language has a variant, the code appends the two-digit ISO-3166 country code. For example, Mexican Spanish is `es-MX`. [See the list of supported languages and language codes](/api-reference/translation-api/language-support). |
| `target_language_code` | string  | The ISO-639-1 language code of the target language. For example, `en` for English, `zh` for Chinese, `fr` for French, `es` for Spanish. If the language has a variant, the code appends the two-digit ISO-3166 country code. For example, Mexican Spanish is `es-MX`. [See the list of supported languages and language codes](/api-reference/translation-api/language-support).            |
| `text`                 | string  | The text to translate.                                                                                                                                                                                                                                                                                                                                                                      |
| `formality`            | Boolean | If the target language supports formal or informal language, this parameter controls whether to use formal (`true`) or informal language (`false`). [See which languages support formality](/api-reference/translation-api/language-support#formality).                                                                                                                                     |
| `length_control`       | Boolean | If the target language supports length control, this parameter controls whether to control the length of the translation. [See which languages support length control](/api-reference/translation-api/language-support#length-control).                                                                                                                                                     |
| `mask_profanity`       | Boolean | If the target language supports profanity masking, this parameter controls whether to mask profane words. [See which languages support profanity masking](/api-reference/translation-api/language-support#profanity-masking).                                                                                                                                                               |

### Response format

The response is a JSON object with a `data` field that contains the translated text as a string.

```json  theme={null}
{
    "data": "Translated text"
}
```


# Translate text in a chat
Source: https://dev.writer.com/home/translation-tool



The translation tool for chat completions allows you to translate text during a conversation with a Palmyra model.

While Palmyra X models can perform translation tasks, they are not optimized for these tasks and may not perform well without correct prompting. Palmyra Translate is a dedicated model optimized for translation use cases.

The Writer API also has a [`translation` endpoint](/api-reference/translation-api/translate) that you can use to translate text outside of a chat completion. See the [translation API guide](/home/translation) for more information.

This guide explains how to use the translation tool in a chat completion and provides an example of how to use it.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Tool structure

The translation tool allows you to translate text during a [chat with a Palmyra model](/home/chat-completion).

To use the translation tool, add it to the `tools` array in your `chat-completion` endpoint request.

The translation tool object has the following structure:

| Parameter                  | Type      | Description                                                                                                                                                                                                                                                                                                                                                                                                           |
| -------------------------- | --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `type`                     | `string`  | The type of tool, which is `translation` for the translation tool                                                                                                                                                                                                                                                                                                                                                     |
| `function`                 | `object`  | An object containing the tool's description and model                                                                                                                                                                                                                                                                                                                                                                 |
| `function.model`           | `string`  | `palmyra-translate`                                                                                                                                                                                                                                                                                                                                                                                                   |
| `function.formality`       | `boolean` | Whether the translation should be formal or informal, [if the target language supports it](/api-reference/translation-api/language-support#formality).                                                                                                                                                                                                                                                                |
| `function.length_control`  | `boolean` | Whether to control the length of the translation, [if the target language supports it](/api-reference/translation-api/language-support#length-control).                                                                                                                                                                                                                                                               |
| `function.mask_profanity`  | `boolean` | Whether to mask profanity in the translation, [if the target language supports it](/api-reference/translation-api/language-support#profanity-masking).                                                                                                                                                                                                                                                                |
| `function.source_language` | `string`  | (Optional) The [language code](/api-reference/translation-api/language-support#language-codes) of the text you want to translate. If you don't provide a source language, the model automatically detects the language of the text you want to translate. If your message contains a different language than this value, this value overrides the language detection.                                                 |
| `function.target_language` | `string`  | (Optional) The [language code](/api-reference/translation-api/language-support#language-codes) you want to translate the text to. If you don't provide a target language, the model automatically selects the most appropriate language based on the message you provide to the chat completion endpoint. If your message contains a different language than this value, this value overrides the language selection. |

<CodeGroup>
  ```bash cURL theme={null}
  "tools": [
      {
          "type": "translation",
          "function": {
              "model": "palmyra-translate",
              "formality": false,
              "length_control": false,
              "mask_profanity": true
          }
      }  
  ]
  ```

  ```python Python theme={null}
  tools = [{
      "type": "translation",
      "function": {
          "model": "palmyra-translate",
          "formality": False,
          "length_control": False,
          "mask_profanity": True
      }
  }]
  ```

  ```js JavaScript theme={null}
  const tools = [{
      type: "translation",
      function: {
          model: "palmyra-translate",
          formality: false,
          length_control: false,
          mask_profanity: true
      }
  }]
  ```
</CodeGroup>

<Note>
  You can only pass one prebuilt tool in the `tools` array at a time. However, you can pass multiple [custom tools](/home/tool-calling) in the same request.

  Prebuilt tools are:

  * Translation tool
  * [Knowledge Graph tool](/home/kg-chat)
  * [LLM tool](/home/model-delegation)
  * [Vision tool](/home/vision-tool)
</Note>

### Response format

For non-streaming responses, the translated text is in the `choices[0].message.content` field. For streaming responses, the translated text is in the `choices[0].delta.content` field.

The response also contains a `translation_data` field that contains the following information:

| Parameter              | Type     | Description                                                         |
| ---------------------- | -------- | ------------------------------------------------------------------- |
| `source_language_code` | `string` | The language code of the text you provided to the translation tool. |
| `target_language_code` | `string` | The language code of the translated text.                           |
| `source_text`          | `string` | The text the translation tool translated.                           |

<Warning>
  You can use the translation tool with streaming chat responses, but the translation tool call is not streamed. The response comes back in the `choices[0].delta.content` field once the full translation is complete.

  If you are unfamiliar with the chat completions endpoint or streaming vs. non-streaming responses, learn more in the [chat completion guide](/home/chat-completion).
</Warning>

See the [chat completion endpoint](/api-reference/completion-api/chat-completion#response-id) for more information on the response fields.

<CodeGroup>
  ```json non-streaming response {9,19-23} theme={null}
  {
    "id": "63ae5c5d",
    "object": "chat.completion",
    "choices": [
      {
        "index": 0,
        "finish_reason": "tool_calls",
        "message": {
          "content": "¡Hola, mundo!",
          "role": "assistant",
          "tool_calls": null,
          "graph_data": {
            "sources": null,
            "status": null,
            "subqueries": null
          },
          "llm_data": null,
          "image_data": null,
          "translation_data": {
            "source_text": "Hello, world!",
            "source_language_code": "en",
            "target_language_code": "es"
          },
          "refusal": null
        },
        "logprobs": null
      }
    ],
    "created": 1745956341,
    "model": "palmyra-x5",
    "usage": {
      "prompt_tokens": 2909,
      "total_tokens": 2945,
      "completion_tokens": 36,
      "prompt_token_details": null,
      "completion_tokens_details": null
    },
    "system_fingerprint": "v1",
    "service_tier": null
  }
  ```

  ```json streaming response {26,36-40} theme={null}
  {
      "id": "8cbef9eb",
      "object": "chat.completion.chunk",
      "choices": [{
          "index": 0,
          "finish_reason": "tool_calls",
          "message": {
              "content": "¡Hola, mundo!",
              "role": "assistant",
              "tool_calls": null,
              "graph_data": {
                  "sources": null,
                  "status": null,
                  "subqueries": null
              },
              "llm_data": null,
              "image_data": null,
              "translation_data": {
                  "source_text": "Hello, world!",
                  "source_language_code": "en",
                  "target_language_code": "es"
              },
              "refusal": null
          },
          "delta": {
              "content": "¡Hola, mundo!",
              "role": "assistant",
              "tool_calls": null,
              "graph_data": {
                  "sources": null,
                  "status": null,
                  "subqueries": null
              },
              "llm_data": null,
              "image_data": null,
              "translation_data": {
                  "source_text": "Hello, world!",
                  "source_language_code": "en",
                  "target_language_code": "es"
              },
              "refusal": null
          },
          "logprobs": null
      }],
      "created": 1745956498,
      "model": "palmyra-x5",
      "usage": null,
      "system_fingerprint": "v1",
      "service_tier": null
  }
  ```
</CodeGroup>

## Usage example

This example uses `palmyra-translate` to translate a message during a chat completion.

### Create a tools array containing a translation tool

First, create a `tools` array that specifies the translation tool you want to use.

<CodeGroup>
  ```bash cURL theme={null}
  "tools": [
      {
          "type": "translation",
          "function": {
              "model": "palmyra-translate",
              "formality": false,
              "length_control": false,
              "mask_profanity": true
          }
      }
  ]
  ```

  ```python Python theme={null}
  tools = [{
      "type": "translation",
      "function": {
          "model": "palmyra-translate",
          "formality": False,
          "length_control": False,
          "mask_profanity": True
      }
  }]
  ```

  ```js JavaScript theme={null}
  const tools = [{
      type: "translation",
      function: {
          model: "palmyra-translate",
          formality: false,
          length_control: false,
          mask_profanity: true
          ]
      }
  }]
  ```
</CodeGroup>

### Send the request using chat completions

Add the tools array to the chat endpoint call along with your array of messages. Setting `tool_choice` to `auto` allows the model to choose when to use the translation tool, based on the message provided in the `messages` array.

The response contains the translated text in the `choices[0].message.content` field.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "model": "palmyra-x5",
          "messages": [
              {
                  "role": "user",
                  "content": "Translate the following message to Spanish: Hello, world!"
              }
          ],
          "tool_choice": "auto",
          "tools": [
              {
                  "type": "translation",
                  "function": {
                      "model": "palmyra-translate",
                      "formality": false,
                      "length_control": false,
                      "mask_profanity": true
                      }
                  }
          ]
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "Translate the following message to Spanish: 'Hello, world!'"}]

  response = client.chat.chat(
      model="palmyra-x5", 
      messages=messages, 
      tools=tools,  # The tools array defined earlier.
      tool_choice="auto"
  )

  print(response.choices[0].message.content)
  ```

  ```js JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const messages = [{role: "user", content: "Translate the following message to Spanish: 'Hello, world!'"}];

  const response = await client.chat.chat({
      model: "palmyra-x5", 
      messages: messages, 
      tools: tools, // The tools array defined earlier.
      tool_choice: "auto"
  });

  console.log(response.choices[0].message.content);
  ```
</CodeGroup>

If you want to verify the translation data in the response, you can print the `translation_data` field to see the source text, source language code, and target language code that the translation tool used.

<CodeGroup>
  ```python Python theme={null}
  print(response.choices[0].message.translation_data)
  ```

  ```js JavaScript theme={null}
  console.log(response.choices[0].message.translation_data);
  ```
</CodeGroup>

By following this guide, you can use the translation tool to have the `palmyra-translate` model translate a message during a chat completion.

## Next steps

Learn about additional capabilities of the Writer API, such as [detecting AI-generated text](/home/ai-detect) and [analyzing images](/home/analyze-images).


# Transparency
Source: https://dev.writer.com/home/transparency



Ensuring transparency and accountability in AI systems

## Introduction

The complexity of deep learning models like Palmyra-X makes them remarkably powerful but also increasingly opaque. As the adoption of these AI technologies expands, the necessity for transparency and accountability becomes critical. Writer addresses these concerns by employing a multi-tiered approach that leverages cutting-edge algorithms and technologies. This article provides a detailed technical perspective on these strategies.

## Tools and algorithms for insights into decision-making

<Tabs>
  <Tab title="Attention mechanism analysis">
    In transformer-based models like Palmyra, attention mechanisms play a crucial role in determining output. By visualizing the weights in the multi-headed attention layers, one can gain insights into which input tokens significantly influence the output. Algorithms like layer-wise relevance propagation can be employed to decompose these attention scores.
  </Tab>

  <Tab title="SHAP">
    SHAP (SHapley Additive exPlanations) values are derived from cooperative game theory and offer a unified measure of feature importance. By computing SHAP values for each feature in the input data, one can quantify how much each feature contributes to a particular decision, thus offering a granular view of the model's inner workings.
  </Tab>

  <Tab title="Comprehensive logging">
    A robust logging system captures not just input-output pairs but also intermediate representations, attention maps and activation functions. Tools like TensorBoard with custom dashboards are used for real-time monitoring and auditing at testing stage.
  </Tab>

  <Tab title="Bayesian A/B testing">
    Traditional A/B testing is enhanced with Bayesian statistical methods to rigorously compare the performance and decision-making processes of different model versions. This provides confidence intervals and posterior distributions that offer more nuanced insights than point estimates.
  </Tab>
</Tabs>

## Addressing the 'opaque' nature of AI: explainability and transparency

<Tabs>
  <Tab title="LIME">
    Local Interpretable Model-agnostic Explanations (LIME) is used to create surrogate models that approximate the behavior of the complex model in the vicinity of the instance being explained. By perturbing the input and observing the output, LIME fits a simple model that is easier to interpret, thus shedding light on the original model's decision-making process.
  </Tab>

  <Tab title="Counterfactual Explanations">
    Counterfactual explanations provide "what-if" scenarios that help understand how a different input could lead to a different output. We use DiCE Algorithm (Diverse Counterfactual Explanations) to generate these scenarios.
  </Tab>

  <Tab title="Open Source and Community Auditing">
    Releasing the models under an open-source Apache 2.0 license allows for community-based auditing. Skilled developers and researchers can scrutinize the codebase, algorithms, and even contribute to enhancing transparency features.
  </Tab>

  <Tab title="Differential Privacy">
    To safeguard user data while maintaining transparency, differential privacy algorithms like Laplace noise addition or Differential Privacy SGD are implemented. This allows the model to be queried for insights without revealing any individual data points.
  </Tab>
</Tabs>

## Compliance and regulations

For regulatory compliance, techniques such as Automatic Fairness Verification and Fairness-aware Learning are integrated into the model training pipeline. These ensure that the model meets standards like GDPR, which mandates the right to explanation for automated decisions.

## Conclusion

Transparency and accountability in AI models are complex challenges that require a multi-layered, algorithmically robust approach. By employing advanced techniques like SHAP, LIME‌ and Bayesian A/B testing, Writer aims to open up the "black box" of its AI models. While full transparency remains a moving target, these technologies and methodologies provide a comprehensive framework for making significant strides in understanding and auditing AI systems.


# Usage policy
Source: https://dev.writer.com/home/usage-policy



Please review the following policies to ensure responsible usage of the Writer API:

## Content Policy

The Writer API doesn't allow for the generation of the following types of content:

* Hate
* Harassment
* Violence
* Self-harm
* Sexual
* Political
* Spam
* Deception
* Malware

## Platform Policy

* The API is provided for the purpose of accessing the services, and users are expected to use it in accordance with this policy.
* Users are responsible for ensuring the security and confidentiality of their API key and any data obtained through the API.
* The API may be subject to rate limiting to ensure fair use and prevent excessive use of the system.
* The API may be temporarily unavailable for maintenance or upgrades without prior notice.
* The API is provided for commercial use, and users are expected to comply with all applicable laws and regulations.
* Users may not use the API to engage in any illegal, fraudulent, or malicious activities.
* Users may not sell, resell, or lease the API or the data obtained through the API to third parties.
* Failure to comply with this policy may result in suspension or termination of access to the API.

Writer reserves the right to take necessary measures to enforce this policy and protect the system and other users from harm.

This policy may be revised at any time without prior notice. Users are responsible for regularly checking the policy for updates.


# Analyze images in a chat
Source: https://dev.writer.com/home/vision-tool



The Vision tool for chat completions allows you to analyze images during a chat completion. You can perform actions such as extracting text, interpreting charts and graphs, performing image-based compliance checks, and more.

The Writer API also has a [`vision` endpoint](/api-reference/vision-api/analyze-images) that you can use to analyze images outside of a chat completion. See the [vision API guide](/home/analyze-images) for more information.

This guide explains how to use the Vision tool in a chat completion and provides an example of how to use it.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Tool structure

The Vision tool allows you to analyze an image during a [chat with an LLM](/home/chat-completion).

To use the Vision tool, add it to the `tools` array in your `chat-completion` endpoint request.

The Vision tool object has the following structure:

| Parameter                    | Type     | Description                                                                                                                                                                                                                                                       |
| ---------------------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `type`                       | `string` | The type of tool, which is `vision` for the Vision tool                                                                                                                                                                                                           |
| `function`                   | `object` | An object containing the tool's description and model                                                                                                                                                                                                             |
| `function.model`             | `string` | `palmyra-vision`                                                                                                                                                                                                                                                  |
| `function.variables`         | `array`  | An array of objects, one for each image to pass to Palmyra Vision                                                                                                                                                                                                 |
| `function.variables.name`    | `string` | The name of the image to pass to Palmyra Vision. You must use this name when referencing the image in the message you provide to the chat completion endpoint. Reference the image as `{{name}}`, where `name` is the name you provided in the `variables` array. |
| `function.variables.file_id` | `string` | The ID of the uploaded image. The maximum allowed file size is 7 MB. You must upload the image to Writer before using it with the Vision tool. Learn more in [Manage Files](/home/files).                                                                         |

The message you provide to the chat completion endpoint must reference each image you include in the `function.variables` array, by name. For example, if you include an image named `new_product` in the `function.variables` array, you must reference it in the message as `{{new_product}}`, with double curly braces around the name. Your message to the chat completion endpoint might look like this: "Provide a two-sentence summary of the product within the image `{{new_product}}`."

<CodeGroup>
  ```bash cURL theme={null}
  "tools": [
      {
          "type": "vision",
          "function": {
              "model": "palmyra-vision",
              "variables": [
                  {
                      "name": "new_product",
                      "file_id": "1234567890"
                  }
              ]
          }
      }  
  ]
  ```

  ```python Python theme={null}
  tools = [{
      "type": "vision",
      "function": {
          "model": "palmyra-vision",
          "variables": [
              {
                  "name": "new_product",
                  "file_id": "1234567890"
              }
          ]
      }
  }]
  ```

  ```js JavaScript theme={null}
  const tools = [{
      type: "vision",
      function: {
          model: "palmyra-vision",
          variables: [
              {
                  name: "new_product",
                  file_id: "1234567890"
              }
          ]
      }
  }]
  ```
</CodeGroup>

<Note>
  You can only pass one prebuilt tool in the `tools` array at a time. However, you can pass multiple [custom tools](/home/tool-calling) in the same request.

  Prebuilt tools are:

  * Vision tool
  * [Knowledge Graph tool](/home/kg-chat)
  * [Translation tool](/home/translation-tool)
  * [LLM tool](/home/model-delegation)
</Note>

### Response format

For non-streaming responses, the response from the Vision tool is in the `choices[0].message.content` field. For streaming responses, the response is in the `choices[0].delta.content` field.

See the [chat completion endpoint](/api-reference/completion-api/chat-completion#response-id) for more information on the response fields.

<CodeGroup>
  ```json non-streaming response theme={null}
  {
    "id": "1234",
    "object": "chat.completion",
    "choices": [
      {
        "index": 0,
        "finish_reason": "tool_calls",
        "message": {
          "content": "The image shows...",
          "role": "assistant",
          "tool_calls": null,
          "graph_data": {
            "sources": null,
            "status": null,
            "subqueries": null
          },
          "llm_data": null,
          "image_data": null,
          "refusal": null
        },
        "logprobs": null
      }
    ],
    "created": 1743740333,
    "model": "palmyra-x5",
    "usage": {
      "prompt_tokens": 223,
      "total_tokens": 254,
      "completion_tokens": 31,
      "prompt_token_details": null,
      "completion_tokens_details": null
    },
    "system_fingerprint": "v1",
    "service_tier": null
  }
  ```

  ```json streaming response theme={null}
  {
      "id": "1234",
      "object": "chat.completion.chunk",
      "choices": [{
          "index": 0,
          "finish_reason": None,
          "message": {
              "content": "The",
              "role": "assistant",
              "tool_calls": None,
              "graph_data": {
                  "sources": None,
                  "status": None,
                  "subqueries": None
              },
              "llm_data": {},
              "image_data": None,
              "refusal": None
          },
          "logprobs": None,
      "delta": {
          "content": "The",
          "role": "assistant",
          "tool_calls": None,
          "graph_data": {
              "sources": None,
              "status": None,
              "subqueries": None
          },
          "llm_data": {},
          "image_data": None,
          "refusal": None
      },
      "logprobs": None
      }],
      "created": 1741970696,
      "model": "palmyra-x5",
      "usage": None,
      "system_fingerprint": "v1",
      "service_tier": None
  }
  ```
</CodeGroup>

## Usage example

This example uses `palmyra-vision` to interpret a graph during a chat completion.

### Upload an image to Writer

Before you can use the Vision tool, you must upload the image to Writer.

The following code samples demonstrate how to upload an image and print the File ID. You need the File ID to pass to the Vision endpoint.

<CodeGroup>
  ```bash cURL theme={null}
  curl -X POST 'https://api.writer.com/v1/files' \
    -H 'Content-Type: image/jpeg' \
    -H 'Content-Disposition: attachment; filename=graph.jpg' \
    -H "Authorization: Bearer $WRITER_API_KEY" \
    --data-binary "@path/to/file/graph.jpg"
  ```

  ```python Python theme={null}
  from pathlib import Path
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  file_ = client.files.upload(
    content=Path("path/to/file/graph.jpg"),
    content_disposition="attachment; filename=graph.jpg",
    content_type="image/jpeg"
  )

  print(file_.id)
  ```

  ```javascript JavaScript theme={null}
  import fs from 'fs';
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const file = await client.files.upload({
    content: fs.createReadStream("path/to/file/graph.jpg"),
    "Content-Disposition": "attachment; filename=graph.jpg",
    "Content-Type": "image/jpeg"
  });

  console.log(file.id)
  ```
</CodeGroup>

Learn more about [uploading and managing files](/home/files).

### Create a tools array containing a Vision tool

To use the Vision tool, create a `tools` array that specifies the Writer model you want to use.

<CodeGroup>
  ```bash cURL theme={null}
  "tools": [
      {
          "type": "vision",
          "function": {
              "model": "palmyra-vision",
              "variables": [
                  {
                      "name": "graph",
                      "file_id": "1234567890"
                  }
              ]
          }
      }
  ]
  ```

  ```python Python theme={null}
  tools = [{
      "type": "vision",
      "function": {
          "model": "palmyra-vision",
          "variables": [
              {
                  "name": "graph",
                  "file_id": "1234567890"
              }
          ]
      }
  }]
  ```

  ```js JavaScript theme={null}
  const tools = [{
      type: "vision",
      function: {
          model: "palmyra-vision",
          variables: [
              {
                  name: "graph",
                  file_id: "1234567890"
              }
          ]
      }
  }]
  ```
</CodeGroup>

### Send the request using chat completions

Add the tools array to the chat endpoint call along with your array of messages. Setting `tool_choice` to `auto` allows the model to choose when to use the Vision tool, based on the message provided in the `messages` array.

This example streams the response in real time, rather than waiting for the entire response to be generated.

If you are unfamiliar with the chat completions endpoint or streaming vs. non-streaming responses, learn more in the [chat completion guide](/home/chat-completion).

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "model": "palmyra-x5",
          "temperature": 0.7,
          "messages": [
              {
                  "role": "user",
                  "content": "Summarize the main trends and findings in the graph {{graph}}."
              }
          ],
          "tool_choice": "auto",
          "tools": [
              {
                  "type": "vision",
                  "function": {
                      "model": "palmyra-vision",
                      "variables": [
                          {
                              "name": "graph",
                              "file_id": "1234567890"
                          }
                      ]
                  }
              }
          ],
          "stream": true
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "Summarize the main trends and findings in the graph {{graph}}."}]

  response = client.chat.chat(
      model="palmyra-x5", 
      messages=messages, 
      tools=tools,  # The tools array defined earlier.
      tool_choice="auto",
      stream=True
  )

  for chunk in response:
      if chunk.choices[0].delta.content is not None:
          print(chunk.choices[0].delta.content, end="", flush=True)
  ```

  ```js JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const messages = [{role: "user", content: "Summarize the main trends and findings in the graph {{graph}}."}];

  const response = await client.chat.chat({
      model: "palmyra-x5", 
      messages: messages, 
      tools: tools, // The tools array defined earlier.
      tool_choice: "auto",
      stream: true
  });

  for await (const chunk of response) {
      if (chunk.choices[0].delta.content) {
          process.stdout.write(chunk.choices[0].delta.content);
      }
  }
  ```
</CodeGroup>

By following this guide, you can use the Vision tool to have the `palmyra-vision` model interpret an image during a chat completion.

## Next steps

Learn about additional capabilities of the Writer API, such as [analyzing unstructured medical documents](/home/medical-comprehend) and [web search](/home/web-search).


# Add web content to a Knowledge Graph
Source: https://dev.writer.com/home/web-connector-url



This guide demonstrates how to add web content to a [Knowledge Graph](/home/knowledge-graph) using web connector URLs. Adding web connector URLs to your Knowledge Graph allows you to automatically extract and index content from websites, making it available for querying in your Knowledge Graph.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Overview

Adding URLs to your Knowledge Graph enables you to:

* Automatically extract content from websites
* Index web pages for Knowledge Graph queries
* Process single pages or entire sub-pages
* Monitor the status of URL processing
* Exclude specific URLs from processing

## Add URLs to a Knowledge Graph

To add web connector URLs to your Knowledge Graph, use the [PUT endpoint](/api-reference/kg-api/update-graph) to update the graph with the URLs you want to process. This endpoint allows you to add, update, or remove URLs from your Knowledge Graph.

<Warning>
  You can only add URLs to a Knowledge Graph with the `type` set to `web`. To create a Knowledge Graph with the `web` type, you must create the Knowledge Graph in [AI Studio](https://app.writer.com/ai-studio) and select "Add Website" as the way you want to add content to the Knowledge Graph. See [Setting up Knowledge Graph web connectors](https://support.writer.com/article/272-setting-up-knowledge-graph-web-connectors) for more information.

  You can see the type of a Knowledge Graph in the [Knowledge Graph details](/api-reference/kg-api/retrieve-graph) or in the [Knowledge Graph list](/api-reference/kg-api/list-graphs) endpoints.
</Warning>

<CodeGroup>
  ```bash cURL theme={null}
  # Note that this operation replaces the entire list of URLs attached to the Knowledge Graph.
  curl --location --request PUT 'https://api.writer.com/v1/graphs/{graph_id}' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "urls": [
              {
                  "url": "https://example.com/documentation",
                  "type": "sub_pages",
                  "exclude_urls": [
                      "https://example.com/documentation/admin",
                      "https://example.com/documentation/private"
                  ]
              }
          ]
      }'
  ```

  ```python python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  # Note that this operation replaces the entire list of URLs attached to the Knowledge Graph with the new list of URLs.
  client.graphs.update(
      "GRAPH_ID",
      urls=[{
          "url": "https://example.com/documentation",
          "type": "sub_pages",
          "exclude_urls": [
              "https://example.com/documentation/admin",
              "https://example.com/documentation/private"
          ]
      }]
  )

  print(client.graphs.retrieve("GRAPH_ID").urls)
  ```

  ```javascript javascript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  // Note that this operation replaces the entire list of URLs attached to the Knowledge Graph with the new list of URLs.
  const response = await client.graphs.update('GRAPH_ID', {
    urls: [{
      url: 'https://example.com/documentation',
      type: 'sub_pages',
      exclude_urls: [
        'https://example.com/documentation/admin',
        'https://example.com/documentation/private'
      ]
    }]
  });

  console.log(response.urls);
  ```
</CodeGroup>

### Request structure

<Warning>
  The `urls` array in your request **replaces** the entire existing list of URLs attached to the Knowledge Graph. To add a new URL, include both the existing URLs and the new one in your request. To remove a URL, send a request with all URLs except the one you want to remove.
</Warning>

When updating a Knowledge Graph with URLs, you need to provide a `urls` array in your request body. Each URL object has the following parameters:

| Parameter      | Type   | Description                                                                                                      |
| -------------- | ------ | ---------------------------------------------------------------------------------------------------------------- |
| `url`          | string | The URL you want to add to your Knowledge Graph                                                                  |
| `type`         | string | How you want to process the URL: either `single_page` (just this URL) or `sub_pages` (this URL and linked pages) |
| `exclude_urls` | array  | Optional. Any URLs you want to exclude from processing if `type` is `sub_pages`                                  |

### Response structure

After you update the Knowledge Graph, you see the status of each URL in the `status` object. The `status` object has the following parameters:

| Parameter    | Type   | Description                                                        |
| ------------ | ------ | ------------------------------------------------------------------ |
| `status`     | string | The current processing status: `validating`, `success`, or `error` |
| `error_type` | string | If there was an error, what type of error occurred                 |

```json  theme={null}
{
  "id": "51b058d8",
  "created_at": "2025-07-16T20:19:23.565884Z",
  "name": "Public docs",
  "description": "Public docs",
  "urls": [
    {
      "url": "https://example.com/docs",
      "status": {
        "status": "validating",
        "error_type": null
      },
      "exclude_urls": [
        "https://example.com/docs/admin",
        "https://example.com/docs/private"
      ],
      "type": "sub_pages"
    }
  ]
}
```

#### Possible error types

If URL processing fails, you may see these error types:

* `invalid_url`: The URL format is not valid
* `not_searchable`: The content cannot be accessed or processed
* `not_found`: The URL returns a 404 error
* `paywall_or_login_page`: The content requires authentication
* `unexpected_error`: An unspecified error occurred

## Usage examples

The following examples show how to add a web connector URL to a Knowledge Graph and monitor its processing status.

### Add a web connector URL

This example adds a web connector URL to a Knowledge Graph. It first retrieves the Knowledge Graph to see the current URLs and then adds a new URL to the Knowledge Graph. Note that this operation replaces the entire list of URLs attached to the Knowledge Graph, which is why it is important to retrieve the existing list of URLs first.

<CodeGroup>
  ```bash cURL theme={null}
  # 1. First, retrieve the current Knowledge Graph to see existing URLs
  curl --location 'https://api.writer.com/v1/graphs/{graph_id}' \
      --header "Authorization: Bearer $WRITER_API_KEY"

  # 2. Then, send a new request with all the URLs you want to add. In this example, there were no existing URLs, so it's adding a single URL.
  curl --location --request PUT 'https://api.writer.com/v1/graphs/{graph_id}' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "urls": [
              {
                  "url": "https://example.com/documentation",
                  "type": "sub_pages",
                  "exclude_urls": [
                      "https://example.com/documentation/admin",
                      "https://example.com/documentation/private"
                  ]
              }
          ]
      }'
  ```

  ```python Python theme={null}

  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  graph_id = "GRAPH_ID"

  graph = client.graphs.retrieve(graph_id)
  urls = graph.urls

  urls.append({
      "url": "https://example.com/documentation",
      "type": "sub_pages",
      "exclude_urls": ["https://example.com/documentation/admin", "https://example.com/documentation/private"]
  })

  client.graphs.update(graph_id, urls=urls)

  print(client.graphs.retrieve(graph_id).urls)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const graph_id = "GRAPH_ID";

  const graph = await client.graphs.retrieve(graph_id);

  const urls = graph.urls;

  urls.push({
    url: 'https://example.com/documentation',
    type: 'sub_pages',
    exclude_urls: [
      'https://example.com/documentation/admin',
      'https://example.com/documentation/private'
    ]
  });

  const response = await client.graphs.update(graph_id, { urls });

  const updatedGraph = await client.graphs.retrieve(graph_id);

  console.log(updatedGraph.urls);
  ```
</CodeGroup>

### Delete all URLs from a Knowledge Graph

To delete all URLs from a Knowledge Graph, you can send a request with an empty `urls` array.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location --request PUT 'https://api.writer.com/v1/graphs/{graph_id}' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "urls": []
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  graph_id = "GRAPH_ID"

  client.graphs.update(graph_id, urls=[])

  print(client.graphs.retrieve(graph_id).urls)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const graph_id = "GRAPH_ID";

  const response = await client.graphs.update(graph_id, { urls: [] });

  console.log(response.urls);
  ```
</CodeGroup>

### Monitor processing status

You can check the status of your web connector URLs by retrieving the Knowledge Graph details.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/graphs/{graph_id}' \
      --header "Authorization: Bearer $WRITER_API_KEY"
  ```

  ```python python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  graph = client.graphs.retrieve("GRAPH_ID")
  print(graph.urls)
  ```

  ```javascript javascript theme={null}
  import Writer from 'writer-sdk';

  // Initialize the Writer client. If you don't pass the `api_key` parameter, 
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  async function main() {
    const graph = await client.graphs.retrieve('GRAPH_ID');

    console.log(graph.urls);
  }

  main();
  ```
</CodeGroup>

### Query the Knowledge Graph with web content

Once the web connector URLs have been processed successfully, you can query the Knowledge Graph to access the extracted content.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/graphs/{graph_id}/query' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "query": "What are the main features described in the documentation?",
          "subqueries": true
      }'
  ```

  ```python python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.graphs.question(
    graph_ids=["GRAPH_ID"],
    question="YOUR QUESTION"
  )

  print(f"Answer: {response.answer}")
  print(f"Sources: {response.sources}")
  ```

  ```javascript javascript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `api_key` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.graphs.question({
    graph_ids: ["GRAPH_ID"],
    question: "YOUR QUESTION"
  });

  console.log(`Answer: ${response.answer}`);
  console.log(`Sources: ${response.sources}`);
  ```
</CodeGroup>

## Next steps

By following this guide, you can successfully add web content to your Knowledge Graphs using web connector URLs.

Next, learn about other Knowledge Graph capabilities:

* [Query a Knowledge Graph](/home/kg-query)
* [Use a Knowledge Graph in chat](/home/kg-chat)


# Search the web
Source: https://dev.writer.com/home/web-search



<Warning>
  **Deprecation notice**: The [web search API endpoint](/api-reference/tool-api/web-search) at `/v1/tools/web-search` is deprecated and will be removed on **December 22, 2025**.

  **Migration path**: Use the [web search tool](/home/web-search-tool) in chat completions to perform web searches during conversations. The web search tool provides the same search capabilities within a chat completion workflow. See the [migration guide](/api-reference/migration-guides/web-search) for detailed instructions.
</Warning>

The Web Search API allows you to search the web for information and get real-time results. This tool is useful for finding current information, news, and facts that may not be available in your model's training data or in your Knowledge Graphs.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Overview

The web search tool enables you to:

* Search for current information and news
* Find factual information from reliable sources
* Get real-time data that may not be in your model's training data
* Filter results by domain, time range, and geographic location
* Control search depth and result comprehensiveness

## Request example

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/tools/web-search' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "query": "How do I get an API key for the Writer API?",
          "include_domains": ["dev.writer.com"]
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.tools.web_search(
      query="How do I get an API key for the Writer API?",
      include_domains=["dev.writer.com"]
  )

  print(response.answer)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.tools.webSearch({
      query: "How do I get an API key for the Writer API?",
      include_domains: ["dev.writer.com"]
  });

  console.log(response.answer);
  ```
</CodeGroup>

### Request parameters

| Parameter             | Type              | Required | Description                                                                                                                                               |
| --------------------- | ----------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `query`               | string            | Yes      | The search query to execute                                                                                                                               |
| `topic`               | string            | No       | The search topic category. Use `news` for current events and news articles, or `general` for broader web search. Default: `general`                       |
| `search_depth`        | string            | No       | Controls search comprehensiveness. Use `basic` for fewer but highly relevant results, or `advanced` for deeper search with more results. Default: `basic` |
| `chunks_per_source`   | integer           | No       | Only applies when `search_depth` is `advanced`. Specifies how many text segments to extract from each source. Limited to 3 chunks maximum                 |
| `max_results`         | integer           | No       | Limits the number of search results returned. Cannot exceed 20 sources                                                                                    |
| `time_range`          | string            | No       | Filters results to content published within the specified time range. Options: `day`, `week`, `month`, `year`, `d`, `w`, `m`, `y`                         |
| `days`                | integer           | No       | For news topic searches, specifies how many days of news coverage to include                                                                              |
| `include_raw_content` | string \| Boolean | No       | Controls how raw content is included. Options: `text`, `markdown`, `true` (same as markdown), `false` (not included). Default: `false`                    |
| `include_answer`      | Boolean           | No       | Whether to include a generated answer to the query in the response. Default: `true`                                                                       |
| `include_domains`     | array             | No       | Domains to include in the search                                                                                                                          |
| `exclude_domains`     | array             | No       | Domains to exclude from the search                                                                                                                        |
| `country`             | string            | No       | Localizes search results to a specific country. Only applies to general topic searches                                                                    |
| `stream`              | Boolean           | No       | Enables streaming of search results as they become available. Default: `false`                                                                            |

### Response format

The response contains the search query, generated answer if requested, and an array of sources with their URLs and raw content if requested.

| Parameter               | Type   | Description                                                                         |
| ----------------------- | ------ | ----------------------------------------------------------------------------------- |
| `query`                 | string | The search query that was submitted                                                 |
| `answer`                | string | Generated answer based on the search results. `null` if `include_answer` is `false` |
| `sources`               | array  | The search results found                                                            |
| `sources[].url`         | string | URL of the search result                                                            |
| `sources[].raw_content` | string | Raw content from the source URL. `null` if `include_raw_content` is `false`         |

```json  theme={null}
{
  "query": "What are the most significant developments in artificial intelligence this year?",
  "answer": "This year has seen several significant developments...",
  "sources": [
    {
      "url": "https://www.ibm.com/think/insights/artificial-intelligence-trends",
      "raw_content": null
    },
    {
      "url": "https://www.crescendo.ai/news/latest-ai-news-and-updates",
      "raw_content": null
    },
    {
      "url": "https://www.sciencedaily.com/news/computers_math/artificial_intelligence/",
      "raw_content": null
    },
    {
      "url": "https://news.microsoft.com/source/features/ai/6-ai-trends-youll-see-more-of-in-2025/",
      "raw_content": null
    },
    {
      "url": "https://hai.stanford.edu/ai-index/2025-ai-index-report",
      "raw_content": null
    }
  ]
}
```

#### Streaming response

When streaming is enabled, the response is delivered as [Server-Sent Events (SSE)](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events). Each event contains a payload with the query, answer, and sources array. The response is delivered as a stream of events, and the client must listen for each event to receive the complete response. Learn more about [streaming responses](/home/streaming).

Below is an example of a streaming response:

```json  theme={null}
data: {"query":"What are the most significant developments in artificial intelligence this year?","answer":"","sources":[]}

data: {"query":"What are the most significant developments in artificial intelligence this year?","answer":"Several","sources":[]}

data: {"query":"What are the most significant developments in artificial intelligence this year?","answer":" significant","sources":[]}
```

## Usage examples

### General web search

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/tools/web-search' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "query": "What are the most significant developments in artificial intelligence this year?"
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.tools.web_search(
      query="What are the most significant developments in artificial intelligence this year?"
  )

  print(response.answer)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.tools.webSearch({
      query: "What are the most significant developments in artificial intelligence this year?"
  });

  console.log(response.answer);
  ```
</CodeGroup>

### News search with time filtering

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/tools/web-search' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "query": "What are the latest developments in smartphone technology?",
          "topic": "news",
          "time_range": "week", 
          "include_raw_content": "markdown",
          "max_results": 10
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.tools.web_search(
      query="What are the latest developments in smartphone technology?",
      topic="news",
      time_range="week",
      include_raw_content="markdown",
      max_results=10
  )

  print(response.answer)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.tools.webSearch({
      query: "What are the latest developments in smartphone technology?",
      topic: "news",
      time_range: "week",
      include_raw_content: "markdown",
      max_results: 10
  });
  ```
</CodeGroup>

### Domain-specific search

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/tools/web-search' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "query": "What are some good tutorials for learning machine learning?",
          "include_domains": ["github.com", "stackoverflow.com"],
          "exclude_domains": ["quora.com"],
          "search_depth": "advanced",
          "chunks_per_source": 2
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  response = client.tools.web_search(
      query="What are some good tutorials for learning machine learning?",
      include_domains=["github.com", "stackoverflow.com"],
      exclude_domains=["quora.com"],
      search_depth="advanced",
      chunks_per_source=2
  )

  print(response.answer)
  ```

  ```javascript JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const response = await client.tools.webSearch({
      query: "What are some good tutorials for learning machine learning?",
      include_domains: ["github.com", "stackoverflow.com"],
      exclude_domains: ["quora.com"],
      search_depth: "advanced",
      chunks_per_source: 2
  });

  console.log(response.answer);
  ```
</CodeGroup>

## Best practices

* **Use specific queries**: More specific queries tend to yield better results
* **Choose appropriate topic**: Use `news` for current events and `general` for broader searches
* **Filter by domains**: Use `include_domains` and `exclude_domains` to focus on reliable sources
* **Control search depth**: Use `basic` for quick searches and `advanced` for comprehensive research
* **Set time ranges**: Use `time_range` to get current information when needed
* **Limit results**: Use `max_results` to control response size and processing time

## Next steps

Learn about other tools available in the Writer API:

* [AI content detection](/api-reference/tool-api/ai-detect)
* [Medical text comprehension](/api-reference/tool-api/comprehend-medical)
* [PDF parsing](/api-reference/tool-api/pdf-parser)
* [Text to graph conversion](/api-reference/tool-api/text-to-graph)


# Web search in a chat
Source: https://dev.writer.com/home/web-search-tool

Search the web for real-time information during chat completions. Enable Palmyra models to access current news, facts, and up-to-date data.

The web search tool for chat completions allows you to search the web for current information during a conversation with a Palmyra model.

While Palmyra models have extensive knowledge, they may not have access to the most current information or real-time data. The web search tool enables your AI assistant to find up-to-date information, news, and facts from the web to provide more accurate and timely responses.

The Writer API also has a [`web-search` endpoint](/api-reference/tool-api/web-search) that you can use to search the web outside of a chat completion. See the [web search API guide](/home/web-search) for more information.

This guide explains how to use the web search tool in a chat completion and provides an example of how to use it.

<Note>
  You need an API key to access the Writer API. Get an API key by following the steps in the [API quickstart](/home/quickstart).

  We recommend setting the API key as an environment variable in a `.env` file with the name `WRITER_API_KEY`.
</Note>

## Tool structure

The web search tool allows you to search the web during a [chat with a Palmyra model](/home/chat-completion).

To use the web search tool, add it to the `tools` array in your `chat-completion` endpoint request.

The web search tool object has the following structure:

| Parameter                  | Type     | Description                                                     |
| -------------------------- | -------- | --------------------------------------------------------------- |
| `type`                     | `string` | The type of tool, which is `web_search` for the web search tool |
| `function`                 | `object` | An object containing the tool's configuration                   |
| `function.include_domains` | `array`  | An array of domains to include in the search results            |
| `function.exclude_domains` | `array`  | An array of domains to exclude from the search results          |

<Tip>
  To customize search parameters like including raw source text, limiting the number of sources, or specifying time ranges, include these requirements in your prompt to the model. The model uses these parameters when making the web search call. For example, your message to the model might include:

  * "Include raw source text"
  * "Limit the number of sources to 5"
  * "Search for news articles from the last 30 days"
</Tip>

Below shows the structure of the web search tool object.

<CodeGroup>
  ```bash cURL theme={null}
  "tools": [
      {
          "type": "web_search",
          "function": {
              "include_domains": ["wikipedia.org", "github.com"],
              "exclude_domains": ["quora.com"]
          }
      }  
  ]
  ```

  ```python Python theme={null}
  tools = [{
      "type": "web_search",
      "function": {
          "include_domains": ["wikipedia.org", "github.com"],
          "exclude_domains": ["quora.com"]
      }
  }]
  ```

  ```js JavaScript theme={null}
  const tools = [{
      type: "web_search",
      function: {
          include_domains: ["wikipedia.org", "github.com"],
          exclude_domains: ["quora.com"]
      }
  }]
  ```
</CodeGroup>

<Note>
  You can only pass one prebuilt tool in the `tools` array at a time. However, you can pass multiple [custom tools](/home/tool-calling) in the same request.

  Prebuilt tools are:

  * Web search tool
  * [Knowledge Graph tool](/home/kg-chat)
  * [LLM tool](/home/model-delegation)
  * [Translation tool](/home/translation-tool)
  * [Vision tool](/home/vision-tool)
</Note>

### Response format

For non-streaming responses, the search results and answer are in the `choices[0].message.content` field. For streaming responses, the search results and answer are in the `choices[0].delta.content` field.

The response also contains a `web_search_data` field that contains the following information:

| Parameter               | Type     | Description                                    |
| ----------------------- | -------- | ---------------------------------------------- |
| `query`                 | `string` | The search query that was submitted            |
| `answer`                | `string` | Generated answer based on the search results   |
| `sources`               | `array`  | The search results found                       |
| `sources[].url`         | `string` | URL of the search result                       |
| `sources[].raw_content` | `string` | Raw content from the source URL (if requested) |

<Warning>
  You can use the web search tool with streaming chat responses, but the web search tool call is not streamed. The sources comes back in the `choices[0].delta.content` field once the full search is complete. Then, the response from the model is streamed.

  If you are unfamiliar with the chat completions endpoint or streaming vs. non-streaming responses, learn more in the [chat completion guide](/home/chat-completion).
</Warning>

See the [chat completion endpoint](/api-reference/completion-api/chat-completion#response-id) for more information on the response fields.

<CodeGroup>
  ```json non-streaming response theme={null}
  {
    "id": "2ac04514-35cd-49e7-8d11-df0ace4336db",
    "object": "chat.completion",
    "choices": [
      {
        "index": 0,
        "finish_reason": "tool_calls",
        "message": {
          "content": "The latest developments in AI technology are happening at a rapid pace...",
          "role": "assistant",
          "tool_calls": null,
          "graph_data": {
            "sources": null,
            "status": null,
            "subqueries": null
          },
          "llm_data": null,
          "image_data": null,
          "translation_data": null,
          "web_search_data": {
            "search_depth": "advanced",
            "sources": [
              {
                "url": "https://en.wikipedia.org/wiki/AI_boom",
                "raw_content": null
              },
              {
                "url": "https://techcrunch.com/2025/05/30/its-not-your-imagination-ai-is-speeding-up-the-pace-of-change/",
                "raw_content": null
              },
              {
                "url": "https://techcrunch.com/category/artificial-intelligence/",
                "raw_content": null
              },
              {
                "url": "https://techcrunch.com/2025/08/03/inside-openais-quest-to-make-ai-do-anything-for-you/",
                "raw_content": null
              },
              {
                "url": "https://en.wikipedia.org/wiki/Artificial_intelligence",
                "raw_content": null
              }
            ]
          },
          "refusal": null
        },
        "logprobs": null,
        "trace_details": null
      }
    ],
    "created": 1754521236,
    "model": "palmyra-x5",
    "usage": {
      "prompt_tokens": 3736,
      "total_tokens": 3764,
      "completion_tokens": 28,
      "completion_tokens_details": null,
      "prompt_token_details": null
    },
    "system_fingerprint": "v1",
    "service_tier": null
  }
  ```

  ```json streaming response  theme={null}
  {
    "id": "94131ba5-35f0-4319-b4a6-3929ebb1669a",
    "choices": [
      {
        "delta": {
          "content": "",
          "graph_data": {
            "sources": null,
            "status": null,
            "subqueries": null
          },
          "llm_data": null,
          "refusal": null,
          "role": "assistant",
          "tool_calls": null,
          "translation_data": null,
          "image_data": null,
          "web_search_data": {
            "search_depth": "advanced",
            "sources": [
              {
                "url": "https://en.wikipedia.org/wiki/AI_boom",
                "raw_content": null
              },
              {
                "url": "https://techcrunch.com/2025/05/12/improvements-in-reasoning-ai-models-may-slow-down-soon-analysis-finds/",
                "raw_content": null
              },
              {
                "url": "https://techcrunch.com/category/artificial-intelligence/",
                "raw_content": null
              },
              {
                "url": "https://en.wikipedia.org/wiki/Progress_in_artificial_intelligence",
                "raw_content": null
              }
            ]
          }
        },
        "finish_reason": null,
        "index": 0,
        "logprobs": null,
        "message": {
          "content": "",
          "refusal": null,
          "role": "assistant",
          "graph_data": {
            "sources": null,
            "status": null,
            "subqueries": null
          },
          "llm_data": null,
          "tool_calls": null,
          "translation_data": null,
          "image_data": null,
          "web_search_data": {
            "search_depth": "advanced",
            "sources": [
              {
                "url": "https://en.wikipedia.org/wiki/AI_boom",
                "raw_content": null
              },
              {
                "url": "https://techcrunch.com/2025/05/12/improvements-in-reasoning-ai-models-may-slow-down-soon-analysis-finds/",
                "raw_content": null
              },
              {
                "url": "https://techcrunch.com/category/artificial-intelligence/",
                "raw_content": null
              },
              {
                "url": "https://en.wikipedia.org/wiki/Progress_in_artificial_intelligence",
                "raw_content": null
              }
            ]
          }
        },
        "trace_details": null
      }
    ],
    "created": 1754521528,
    "model": "palmyra-x5",
    "object": "chat.completion.chunk",
    "service_tier": null,
    "system_fingerprint": "v1",
    "usage": null
  }
  ```
</CodeGroup>

## Usage example

This example uses the web search tool to find current information about AI developments during a chat completion.

### Create a tools array containing a web search tool

First, create a `tools` array that specifies the web search tool you want to use.

<CodeGroup>
  ```bash cURL theme={null}
  "tools": [
      {
          "type": "web_search",
          "function": {
              "include_domains": ["wikipedia.org", "github.com", "techcrunch.com"],
              "exclude_domains": ["quora.com"]
          }
      }
  ]
  ```

  ```python Python theme={null}
  tools = [{
      "type": "web_search",
      "function": {
          "include_domains": ["wikipedia.org", "github.com", "techcrunch.com"],
          "exclude_domains": ["quora.com"]
      }
  }]
  ```

  ```js JavaScript theme={null}
  const tools = [{
      type: "web_search",
      function: {
          include_domains: ["wikipedia.org", "github.com", "techcrunch.com"],
          exclude_domains: ["quora.com"]
      }
  }]
  ```
</CodeGroup>

### Send the request using chat completions

Add the tools array to the chat endpoint call along with your array of messages. Setting `tool_choice` to `auto` allows the model to choose when to use the web search tool, based on the message provided in the `messages` array.

The response contains the search results and generated answer in the `choices[0].message.content` field.

<CodeGroup>
  ```bash cURL theme={null}
  curl --location 'https://api.writer.com/v1/chat' \
      --header 'Content-Type: application/json' \
      --header "Authorization: Bearer $WRITER_API_KEY" \
      --data '{
          "model": "palmyra-x5",
          "messages": [
              {
                  "role": "user",
                  "content": "What are the latest developments in AI technology?"
              }
          ],
          "tool_choice": "auto",
          "tools": [
              {
                  "type": "web_search",
                  "function": {
                      "include_domains": ["wikipedia.org", "github.com", "techcrunch.com"],
                      "exclude_domains": ["quora.com"]
                  }
              }
          ]
      }'
  ```

  ```python Python theme={null}
  from writerai import Writer

  # Initialize the Writer client. If you don't pass the `api_key` parameter,
  # the client looks for the `WRITER_API_KEY` environment variable.
  client = Writer()

  messages = [{"role": "user", "content": "What are the latest developments in AI technology?"}]

  response = client.chat.chat(
      model="palmyra-x5", 
      messages=messages, 
      tools=tools,  # The tools array defined earlier.
      tool_choice="auto"
  )

  print(response.choices[0].message.content)
  ```

  ```js JavaScript theme={null}
  import { Writer } from "writer-sdk";

  // Initialize the Writer client. If you don't pass the `apiKey` parameter,
  // the client looks for the `WRITER_API_KEY` environment variable.
  const client = new Writer();

  const messages = [{role: "user", content: "What are the latest developments in AI technology?"}];

  const response = await client.chat.chat({
      model: "palmyra-x5", 
      messages: messages, 
      tools: tools, // The tools array defined earlier.
      tool_choice: "auto"
  });

  console.log(response.choices[0].message.content);
  ```
</CodeGroup>

If you want to verify the web search data in the response, you can print the `web_search_data` field to see the search query, answer, and sources that the web search tool used.

<CodeGroup>
  ```python Python theme={null}
  print(response.choices[0].message.web_search_data)
  ```

  ```js JavaScript theme={null}
  console.log(response.choices[0].message.web_search_data);
  ```
</CodeGroup>

By following this guide, you can use the web search tool to have the model search the web for current information during a chat completion.

## Next steps

Learn more about the prebuilt tools available for chat completions:

* [Knowledge Graph tool](/home/kg-chat)
* [LLM tool](/home/model-delegation)
* [Translation tool](/home/translation-tool)
* [Vision tool](/home/vision-tool)


# Chat
Source: https://dev.writer.com/no-code/chat



Agents with the chat capability can answer questions with tailored responses based on topics, personas, or data. You can connect the chat agent to a [Knowledge Graph](/home/knowledge-graph-concepts) to answer questions about your company's data.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/chat-agent.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=dd6e7a64209642c722447513842150ce" alt="Agent with chat capabilities" data-og-width="3824" width="3824" data-og-height="1786" height="1786" data-path="images/no-code/chat-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/chat-agent.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7152b450a82ff80355b4436d803bd74c 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/chat-agent.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=133d286a08de6406d928164183ebfff2 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/chat-agent.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=368001498bb2529fe756f93969038c4e 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/chat-agent.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=67e6153a01fe54e2c024b66094c3ceff 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/chat-agent.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7bd060062b3fcc9709f0fcdcc4229e3d 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/chat-agent.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=d955f105310d535a14e78d6a1936a5d5 2500w" />

## Building an agent with chat

To build an agent with chat capabilities, choose the **Chat** option after clicking **Build an agent** in AI Studio.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9bdf96574dc8e8ab1e5158413be185ca" alt="Create an agent with chat" data-og-width="1878" width="1878" data-og-height="592" height="592" data-path="images/no-code/build-options.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b1ba2b86382f9b244000952189cd014d 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=53778a4f5ea5c73d98b43cc53abaaf6e 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=47a4237fe493a14fc5dc34168a98bd5d 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=95ff0f843e6c66af1d23d368748ba31d 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=abe733b6d7166c4e4e83c800cd8ff93e 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=fc920731bb83d3c85cb56eb139566be4 2500w" />

## Write a welcome message

Next, create a welcome message. A welcome message is the first message your users see. Greet them, tell them how to use the chat, and include any special instructions or anything else they should know.

<img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/welcome-message.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=c27cb7078cfe59a2f7307bfce2c5867c" alt="welcome-message" data-og-width="1812" width="1812" data-og-height="576" height="576" data-path="images/no-code/welcome-message.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/welcome-message.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=e26a45252ac446a2c2186693b59ff434 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/welcome-message.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=2aca5621d59a451bdcda91d0ec78103c 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/welcome-message.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=77912cf96d51331566b6aa1f72bed41c 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/welcome-message.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=3925ee352a08195d46900ce547c928de 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/welcome-message.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=dd1b60b8d39708e01ed5be8b5881abd3 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/welcome-message.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=82fbe5453c168f620ed947863dbfe7f7 2500w" />

## Create an avatar

Choose an avatar for your chat. This can be your company logo or any other image you prefer.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/creating-avatar.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=afb9bc6ba3ba270180bb945f97734ebb" alt="Creating a chat avatar" data-og-width="1844" width="1844" data-og-height="388" height="388" data-path="images/no-code/creating-avatar.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/creating-avatar.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=bf13cca54b65259981d3c53104542c26 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/creating-avatar.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7baaedda452777bc46f927c9f91db3c1 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/creating-avatar.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5e867f9bf6a9fa6ad757768c572e350f 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/creating-avatar.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c2e10446467cd693981fceb352197c60 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/creating-avatar.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=4a0ebd831fe330f026e417f65cb2a674 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/creating-avatar.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=1021ea4cd73b95a27a51c0dff88df968 2500w" />

<Info> Currently only .svg files are supported.</Info>

## Choose a mode

To choose the right mode for your chat, decide how your users should interact with the agent. If you want users to ask general questions, choose the **General chat mode**. If you want users to ask specific questions about your company's data, choose the **Knowledge Graph mode**. If you want users to ask questions about specific documents they provide, choose the **Document mode**. You can also select multiple modes for your agent.

<Tip>
  [Knowledge Graph](https://support.writer.com/category/241-knowledge-graph) lets you ask questions about your company's data and get reliable, accurate answers. It uses multiple internal sources, making it easy to find information even if you're not sure where it's stored. Read more [here](https://support.writer.com/article/244-how-to-use-knowledge-graph).
</Tip>

The following modes are available:

* **General chat mode**: Use this mode to ideate or create content
* **Knowledge Graph mode**: Use this mode to get answers from your company's data stored in a [Knowledge Graph](/home/knowledge-graph-concepts). Before you can use Knowledge Graph mode, you need to [set up a Knowledge Graph](https://support.writer.com/article/242-how-to-create-and-manage-a-knowledge-graph) with all the relevant information for your use case. For more granular control over how the agent answers questions using Knowledge Graph, see [Configure Knowledge Graph settings](#configure-knowledge-graph-settings).
* **Document mode**: Use this mode to answer questions about specific documents users provide. You can specify the number, types, and sources of documents you want to allow users to upload. You can also choose to allow users to add URLs or copy and paste text.

<img src="https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/choosing-mode.png?fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=252a1dac0983b71f095f04ba3a74d227" alt="Choosing a mode for your agent with chat capabilities" data-og-width="914" width="914" data-og-height="708" height="708" data-path="images/no-code/choosing-mode.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/choosing-mode.png?w=280&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=2672b4e9fe3e2a90800b608b38e013cd 280w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/choosing-mode.png?w=560&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=190d6b90a5078691c03d2c21f3af7814 560w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/choosing-mode.png?w=840&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=0314d9c2fa8be3fa3d286d98083c74de 840w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/choosing-mode.png?w=1100&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=5193841673a05ed2c0ec3e0bfb353b18 1100w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/choosing-mode.png?w=1650&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=e961aee1d6850cf6bc56d14c90359dd2 1650w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/choosing-mode.png?w=2500&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=9fc9c1c9ca3de829cedb88000425ab64 2500w" />

## Provide instructions

All of the modes allow you to provide instructions. Instructions are the system messages that reach the LLM to provide context or structure around how your chat responds to requests.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/mode-instructions.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=970b91b89b3b4dd53d191ec29e3f98e3" alt="Providing instructions" data-og-width="1778" width="1778" data-og-height="1206" height="1206" data-path="images/no-code/mode-instructions.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/mode-instructions.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9ed19e36af83a8261b48eeb614372a20 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/mode-instructions.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=834b105aefeac298d6054012a028e2ca 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/mode-instructions.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=45a3d2f57ee558b11117a5d280e22d81 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/mode-instructions.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=aefe75e54573aa7e0120de4ad6b88e7f 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/mode-instructions.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=1cef1ed5b2e6e35221f85452210c2448 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/mode-instructions.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=63e3f887669dba42398136bad30e5228 2500w" />

For example, you can use instructions to:

1. Request answers in a specific language by providing examples.
2. Patch stale data in your Knowledge Graph that's hard to retrieve by providing additional information.
3. Provide context about the users and how to address them.
4. Set limits on the topics that the agent can answer.

Your instructions tell the LLM what answers to generate and how to format them.

## Configure Knowledge Graph settings

When you enable Knowledge Graph mode for a chat agent, you can access advanced configuration options to fine-tune how the agent searches, ranks, and retrieves content from your Knowledge Graph. These settings control the balance between keyword and semantic search, how closely responses match source material, relevance thresholds, and response length.

<img src="https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/kg-no-code.png?fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=2a55829df4d038cbc422a4b520da5b0b" alt="Knowledge Graph configuration interface" data-og-width="1560" width="1560" data-og-height="764" height="764" data-path="images/no-code/kg-no-code.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/kg-no-code.png?w=280&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=bd1998c744b96df210fff60d264611f3 280w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/kg-no-code.png?w=560&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=91e5349eb7ab8ba1b7dbfbf3928ad4df 560w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/kg-no-code.png?w=840&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=bd44cf5267a6852066c4dbc51c3d8be5 840w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/kg-no-code.png?w=1100&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=04379684d3c2ac5697ce58009bb0ad34 1100w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/kg-no-code.png?w=1650&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=f127f72d42a4d1125558b474975b2a8b 1650w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/kg-no-code.png?w=2500&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=ead79cb4946260c95bb3ac4ff203dcf5 2500w" />

### Access configuration options

To configure Knowledge Graph settings for your chat agent:

1. **Enable Knowledge Graph mode**: In your chat agent configuration, turn on the **Knowledge Graph mode** toggle
2. **Open configuration**: Click the configuration slider in the top right corner of the Knowledge Graph mode box when Knowledge Graph mode is enabled
3. **Adjust settings**: Use the sliders and options in the configuration panel to customize behavior

<img src="https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/graph-config-options-no-code.png?fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=bac25c2c6e3d3b7194aaa270f620d16d" alt="Graph configuration options" data-og-width="976" width="976" data-og-height="1288" height="1288" data-path="images/no-code/graph-config-options-no-code.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/graph-config-options-no-code.png?w=280&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=8db568ea8e402fc2e6d0fb7b0c91179f 280w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/graph-config-options-no-code.png?w=560&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=9fe4f4791e669f820e174040002203f4 560w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/graph-config-options-no-code.png?w=840&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=db39cfe71c01bdc629dd969fd7c3dc23 840w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/graph-config-options-no-code.png?w=1100&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=35dae71cf76ca04c8972bc30ad171529 1100w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/graph-config-options-no-code.png?w=1650&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=f8df7a50d7f6e8df97efec0a9858e4c9 1650w, https://mintcdn.com/writer/waJFJl0MO6g0ca1B/images/no-code/graph-config-options-no-code.png?w=2500&fit=max&auto=format&n=waJFJl0MO6g0ca1B&q=85&s=712104ea1921630216c173d2786cebb3 2500w" />

### Configuration parameters

#### Grounding level

Controls how closely responses must match source material. This setting determines how much creative interpretation the AI can apply to Knowledge Graph content.

**How it works**:

* **Lower values (closer to 0)**: Grounded outputs - stick closely to source material with minimal creativity
* **Higher values (closer to 1)**: Higher creativity - allow more creative interpretation of source material

**Examples**:

* `0.0`: "According to the documentation, the API supports JSON responses" (direct quote/paraphrase)
* `0.5`: "The API documentation indicates that JSON responses are supported, which suggests additional capabilities" (interpretive)
* `1.0`: "Based on the available information, users can expect JSON responses, though other formats might be possible" (highly interpretive)

**When to adjust**:

* **Increase** for higher creativity when you want more interpretive responses
* **Decrease** for grounded outputs when factual reporting or accuracy is critical

#### Top-k

Controls the balance between keyword and semantic search in ranking results. This parameter determines how the system prioritizes different types of matching.

**How it works**:

* **Higher values (closer to 100)**: Prioritize keyword-based matching
* **Lower values (closer to 0)**: Prioritize semantic similarity matching

**When to adjust**:

* **Increase** for searches where exact keyword matches matter most
* **Decrease** for searches where conceptual similarity is more important

#### Max tokens

Maximum number of tokens the model can generate in the response. This controls the length of the AI's answer.

**How it works**:

* **Higher values**: Allow longer, more detailed responses
* **Lower values**: Generate shorter, more concise responses

**When to adjust**:

* **Increase** for detailed analysis or comprehensive answers
* **Decrease** for quick summaries or when you need faster responses

#### Sub-question count

Maximum number of sub-questions to generate when processing complex queries. Higher values allow the system to break down complex questions into more detailed sub-queries.

**How it works**:

* **Higher values**: Improve detail by generating more sub-questions for thorough analysis
* **Lower values**: Reduce response time by generating fewer sub-questions

**When to adjust**:

* **Increase** for complex, multi-part questions that need thorough analysis
* **Decrease** for simple, direct questions to reduce processing time

#### Weight distribution

Controls how many text snippets to retrieve from the Knowledge Graph for context. This works together with the Top-k setting to control best matches vs broader coverage.

**How it works**:

* **Lower values (5-15)**: Best matches - retrieve fewer, more relevant snippets
* **Higher values (15-25)**: Broader coverage - retrieve more snippets for comprehensive context
* **Values below 5**: May return no results due to RAG implementation limitations

**Important notes**:

* **Recommended range**: 5-25 (default is 30, which is higher than recommended)
* Due to RAG system behavior, you may see more snippets than requested

**When to adjust**:

* **Increase** for broader coverage when you need comprehensive research or more context
* **Decrease** for best matches when you want focused queries or concise results

### Common configuration patterns

The default configuration for Knowledge Graph mode handles most use cases. You can adjust the configuration to your specific needs. Below are some common configuration patterns for different use cases.

#### Research and analysis

Use this configuration for comprehensive research tasks where you need thorough analysis. Higher sub-questions and broader coverage provide more context.

**Settings**:

* **Grounding level**: 0.1 (very grounded)
* **Top-k**: 60 (balanced search)
* **Max tokens**: 7000 (detailed responses)
* **Sub-question count**: 8 (thorough analysis)
* **Weight distribution**: 25 (broad coverage)

#### Quick answers

Use this configuration for fast, focused responses where speed and precision matter more than comprehensive analysis.

**Settings**:

* **Grounding level**: 0.0 (completely grounded)
* **Top-k**: 80 (keyword-focused)
* **Max tokens**: 2000 (concise responses)
* **Sub-question count**: 3 (quick processing)
* **Weight distribution**: 15 (focused results)

#### Creative content generation

Use this configuration when you want the AI to interpret and build upon source material creatively.

**Settings**:

* **Grounding level**: 0.6 (interpretive)
* **Top-k**: 40 (semantic-focused)
* **Max tokens**: 5000 (moderate length)
* **Sub-question count**: 6 (balanced analysis)
* **Weight distribution**: 30 (comprehensive context)

### How parameters work together

Some parameters interact in ways that affect both results and performance:

* **Weight distribution and Top-k**: Work together to control best matches vs broader coverage
* **Weight distribution and Max tokens**: Weight distribution controls input context size, while Max tokens controls output response length
* **Grounding level and Sub-question count**: Both affect how thoroughly the system processes queries

### Performance considerations

* **Higher Max tokens**: Increases processing time and cost
* **Higher Sub-question count**: Increases processing time for complex queries
* **Lower Weight distribution**: May return fewer results but with higher relevance
* **Higher Grounding level**: May require more processing to balance creativity with accuracy

### Best practices

1. **Start with defaults**: Begin with the default configuration and adjust based on your specific needs
2. **Test incrementally**: Change one parameter at a time to understand its effect
3. **Consider your use case**: Different applications, like research, Q\&A, and content generation, benefit from different configurations
4. **Monitor performance**: Track how different configurations affect response quality and processing time
5. **Balance precision and recall**: Higher Top-k values give more precise results but may miss relevant content

### Apply default settings

If you've made changes and want to return to the recommended default configuration, click **Apply default settings** in the configuration panel. This resets all parameters to their optimal values for general Knowledge Graph queries.


# Chat with Knowledge Graph
Source: https://dev.writer.com/no-code/chat-kg



export const PromptComponent = ({prompt}) => <div>
    <p class="prompts">{prompt}</p>
  </div>;

With Knowledge Graph mode for chat agents, you can create agents that can search for information and answer questions specific to your company's data.

This guide walks through the steps to create a Knowledge Graph from a Confluence space. Then, it creates a chat agent that uses that Knowledge Graph to answer questions about your company's policies.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-chat.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=f2b69a1452da4362760df54c118fad56" alt="Example of a chat agent with Knowledge Graph" data-og-width="2604" width="2604" data-og-height="1454" height="1454" data-path="images/no-code/kg-chat.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-chat.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=388ba12ff2e2489cba4dc624d06b58b3 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-chat.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=f939b2a6e7cff05f9160c139c7df64e9 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-chat.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7c581656ae9f87845aba994adee3537c 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-chat.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=dcd328af235ac3628525e391be13c42a 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-chat.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e0d0da304088f89fc9e9fcd8da255cf0 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-chat.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=359d20d587933f6dcdabb384fc6e4f03 2500w" />

<Steps>
  <Step title="Create a Knowledge Graph">
    To get started, set up a Knowledge Graph in Writer.

    From the home screen of AI Studio, click **Knowledge Graphs** in the left sidebar and click **Add a Graph**.

        <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/create-knowledge-graph.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9b80b6d0ab802bef51dfc98eeeb3d80d" alt="Create a Knowledge Graph" data-og-width="2638" width="2638" data-og-height="1636" height="1636" data-path="images/no-code/create-knowledge-graph.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/create-knowledge-graph.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=996b297d7b0b9e5bed39aa2ca07a17ec 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/create-knowledge-graph.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=83897e464a415ac0a7b1dc286bf8fff5 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/create-knowledge-graph.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=d229508e62a2e4045c020a43c0ffd240 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/create-knowledge-graph.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7fe111a9b9588201246fdb48b3b2ad10 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/create-knowledge-graph.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=20cc5d72a426404a061d28a2b310e0d5 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/create-knowledge-graph.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b29e27b4b9cb6abf00597a222b1637f6 2500w" />

    <Warning>Knowledge graphs created in AI Studio aren't accessible in the Ask Writer core app unless you define the Knowledge Graph as part of a custom agent.</Warning>
  </Step>

  <Step title="Add graph name and description">
    In the modal that appears, give your graph a name and description.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-options.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=aa2cb203def92473b5653cdacde86102" alt="Add a graph" data-og-width="874" width="874" data-og-height="422" height="422" data-path="images/no-code/kg-options.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-options.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=36bb4a0ae4078ad75a6b35c11df07920 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-options.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=62480e9b177d68479f004c6488e73649 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-options.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=801f1aa00b4cbfdcc54a15232e4d8873 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-options.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=6c3027704ea76359fb16bc4ebbf3de55 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-options.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=aade89497d235376bd3cb0bed4b6e32b 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/kg-options.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=495fa7590806a598a36ad191fb0148bb 2500w" />
  </Step>

  <Step title="Add data to your graph">
    Choose how you want to add your data to the graph and add your data:

    * Add via manual file upload: Upload files manually from your device
    * Add via data connector: Integrate data from an existing tool such as Confluence, Notion, and Google Drive
    * Add via API: Send docs to Writer [via the API](/home/knowledge-graph)
    * Add websites: Create a list of websites to search

    This example uses the **Add via data connector** option to integrate data from a Confluence space. To use this option, you need to have access to the Confluence space you want to integrate.

    Learn more about creating and managing a Knowledge Graph in the [Knowledge Graphs support article](https://support.writer.com/article/242-how-to-create-and-manage-a-knowledge-graph).
  </Step>

  <Step title="Create an agent with chat capabilities">
    Once you create your Knowledge Graph, you can then create an agent with chat capabilities and add the Knowledge Graph to the agent.

    From the [AI Studio home page](https://app.writer.com/ai-studio), click **Build an agent** in the top right corner. Then, select **Chat** as the type of agent you want to create.
  </Step>

  <Step title="Enable the Knowledge Graph mode">
    For this example, enable only the **Knowledge Graph mode** so the chat agent answers questions specifically about your company's data from the Knowledge Graph.

    In the agent configuration, turn off the **General chat mode** toggle and turn on the **Knowledge Graph mode**.

    Next, select **Always stay connected to a specific set of graphs** and select the Knowledge Graph you created in the previous step. This ensures that the agent only answers questions about the data in the Knowledge Graph you provide, and doesn't allow the user to switch to a different Knowledge Graph.

        <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/enable-kg.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=61b7035d642b6c4dc07c40738b46d92d" alt="Enable Knowledge Graph" data-og-width="1226" width="1226" data-og-height="1508" height="1508" data-path="images/no-code/enable-kg.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/enable-kg.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b73e68dbe726079fd5ef48f550643177 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/enable-kg.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=0435c9298b3e67aefcee53bf934d5053 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/enable-kg.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=6352fad8a901b88acb4f68bac7c536fc 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/enable-kg.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=daec8e7afd32e7eecf7b663a0bdcf3a9 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/enable-kg.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5653ea72f0f502b820a6ae21c0b1a2db 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/enable-kg.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=2b750ba482903ef0555f7a097952e28e 2500w" />

    <Tip>
      **Want to further customize Knowledge Graph behavior?** You can fine-tune how your agent searches, ranks, and retrieves content from your Knowledge Graph using advanced configuration options. Learn more about [configuring Knowledge Graph settings](/no-code/chat#configure-knowledge-graph-settings) for detailed control over grounding level, search balance, response length, and more.
    </Tip>
  </Step>

  <Step title="Add instructions for the model">
    You can add additional instructions for Knowledge Graph mode by clicking **Add instructions**.

    The instructions can include context for the model to understand what this agent does, and what types of answers it should provide. You may also want to include instructions on what to output if someone asks a question that isn't specific to a customer story or quote.

    For example, you could include: <PromptComponent prompt={`If you get a question about a company other than Writer, output: I don't have any information on that.`} />
  </Step>

  <Step title="Test your agent">
    On the right side of the screen, you can see what your agent looks like and test it.

    Try asking a variety of questions to make sure you're getting the types of answers you expect. You can continue to update the instructions until you're happy with the answers you receive.
  </Step>

  <Step title="Deploy your agent">
    Once you're happy with how everything looks, [deploy your agent](/no-code/deploying-an-agent) so that everyone can use it.
  </Step>
</Steps>


# Choose your use case
Source: https://dev.writer.com/no-code/choosing



With our no-code tools, you can build agents for these use cases:

1. **Chat:** Answer questions with tailored responses based on topics, personas, or data.
2. **Text generation:** Collect specific user inputs and generate customized outputs. Best for long- or short-form structured content, such as blog posts, FAQs, press releases, and newsletters.
3. **Research:** Conduct web research and receive a structured report.

Define the structure of the agent by outlining the inputs (the information you provide) and the outputs (the content you receive).

Here are some input and output examples:

## Chat

**Inputs:**

* User queries about specific topics (for example, "What are your store hours?")
* User requests for assistance (for example, "Help me track my order.")

**Outputs:**

* Direct answers to user queries (for example, "Our store hours are 9 AM to 9 PM, Monday through Friday.")
* Assistance responses and guidance (for example, "I can help you track your order. Please provide your order ID.")

## Text generation

**Inputs:**

* Content briefs or outlines that specify the topic you want to write about, the SEO keywords and a CTA you want to include.

**Outputs:**

* Completed text that includes SEO keywords and the specific CTA

## Research

**Inputs:**

* Questions or briefs about the topic that you want to research.
* Whether the research should perform a general search of the web or limit the search to specific sources.

**Outputs:**

* A summary of the information found, including links to the sources.


# Deploy an agent
Source: https://dev.writer.com/no-code/deploying-an-agent



<Tip> Full-access users can deploy any agent in their organization. Individual builders can deploy agents they create.</Tip>
To deploy a no-code agent, first click on the **Deploy** tab at the top of the page. Depending on your organization's status, you'll have up to four deployment options:

* [**Playground**](#playground): Receive a URL to share with others to test the agent.
* [**Embed agent**](#embed-agent): Embed the agent on your own website or portal.
* [**Deploy to Slack**](#deploy-to-slack): Enable the agent for use within Slack.
* [**Deploy to Writer**](#deploy-to-writer): Enable the agent for use within Writer.

## Playground

Playground is the easiest way to share and test your agent. Just go to **Deploy** and turn on the Playground toggle. You can either copy the Playground URL to share with others, or open the agent in **Playground** in a new tab.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/playground.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c29dc8d98b38428bff8eab3e3b2b66b6" alt="Deploying an agent to the playground" data-og-width="1478" width="1478" data-og-height="492" height="492" data-path="images/no-code/playground.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/playground.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=15023fb8fc9abeb500bb361a699441b5 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/playground.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=380bc5890bc613ce60eea0dcc2f03ec0 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/playground.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=99ded7376ff7c56fe078a776e4850f28 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/playground.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=dade2e767964eeb6a67794af435fb97b 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/playground.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=46b5ebf700d197991eace9781afdf663 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/playground.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7c6b5e70e6dad394355c93917ce7a501 2500w" />

The **Open** button will take you directly to this agent through the Playground, while the **Copy link** option will generate a shareable link that you can send to any tester or end user to get feedback on your agent.

<Warning>
  Links to the Playground view of an agent don't require authentication. This can be useful for providing external users access to test an agent (they won't be able to navigate elsewhere within your AI Studio).
</Warning>

## Embed agent

Embedding an agent allows you to embed the agent on your own website or portal.

<Steps>
  <Step title="Toggle embed option">
    First, go to the **Deploy** tab and toggle the **Embed Agent** option.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-agent.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=96ce68123d0c83abda968cbc359b9d5c" alt="Embedding an agent" data-og-width="1498" width="1498" data-og-height="696" height="696" data-path="images/no-code/embed-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-agent.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a9c5e3cf7f7a79c5420ed00c10cb3ded 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-agent.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e9a18100dbdc65f6721e99c962753210 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-agent.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=ac7a10131c9d1257496e6acbe8726b60 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-agent.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=914c70e5ba696ac9042605b6d76d7648 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-agent.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=38ca95576fe198dc0bd6ea2882f4ed66 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-agent.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=cd3dc273b4cb92c122285363b4870987 2500w" />
  </Step>

  <Step title="Add domains to allowlist">
    Prevent unauthorized use of this agent by adding domains to the allowlist
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-allowlist.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=73a564dfc47a41b3b765848d018ff094" alt="Add domains to allowlist" data-og-width="1482" width="1482" data-og-height="266" height="266" data-path="images/no-code/embed-allowlist.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-allowlist.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c0fec9867fd3a54b13d5631698f1be4c 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-allowlist.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=bc3802ff79ea46b2c3ff717c42ad6a4a 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-allowlist.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a9766835d76051df5960cf901e601192 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-allowlist.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=947f3bfa34b2ec8064a047e104d10134 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-allowlist.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=542ad3dd102f22d394c26357c33cfe52 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-allowlist.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=1e452a90a3157752fa22eb23dbb991ce 2500w" />
  </Step>

  <Step title="Select embed style">
    After enabling embed, select your preferred style: centered or widget.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-style.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e26f0d3c823abb020e72b96fbaca0e13" alt="Embedding styles" data-og-width="1486" width="1486" data-og-height="704" height="704" data-path="images/no-code/embed-style.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-style.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=91d7996c615140fb9ada957c8ce89024 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-style.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=4957b9293561c74f697e2b0a0f553568 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-style.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7e7d9b2eeee8874f31d673eaeb9d49f3 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-style.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=0b98b0331294e2db2a196c8536491195 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-style.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=fa7e01d13f0362af292471e3f4e1b559 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-style.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=2c5ff1517c5ed448d7bf5108bf674679 2500w" />
  </Step>

  <Step title="Copy the snippet">
    You'll see a block of code that contains the snippet you need to include wherever you want, such as on your own website or portal. Copy the iFrame snippet and share it with your engineering team to embed this agent. You can disable the embed snippet at any time in AI Studio, and any changes you push will immediately update the embeds.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-iframe.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=96e20b081f040c853e7e13bbd9fb5275" alt="Copy the iFrame snippet" data-og-width="1480" width="1480" data-og-height="330" height="330" data-path="images/no-code/embed-iframe.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-iframe.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c292b08585c16cd30e20ec9916573f37 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-iframe.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=f36a9218ff82a276fd08400d27376249 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-iframe.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=1b44aa71b8ba65511f88f8305bb40c1e 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-iframe.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=1a536e433758f01ecfbaf0646067ff23 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-iframe.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=8df78ee1bdae6fee9089c69869075fb7 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/embed-iframe.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=0b649e16161301bbeea8231847e20896 2500w" />
  </Step>
</Steps>

## Deploy to Slack

If your organization uses chat agents with General chat mode or Knowledge Graph mode with AI Studio graphs, you'll see a Deploy to Slack option. This allows you to enable the agent for use within Slack. Once deployed, the agent will be available in Slack, and you'll be able to access it directly from within your workspace.

<Warning>Deployed agents in Slack will charge token usage. Please refer to our [pricing page](/home/pricing) for more details.</Warning>
<Note>You'll have access to this deployment option if your organization uses agents with chat capabilities using General chat mode or Knowledge Graph mode.</Note>

<Steps>
  <Step title="Toggle Slack option">
    First, go to the **Deploy** tab and click the **Connect to Slack** link.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-slack.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b823e742dd60284a06b34ed59865e53c" alt="Deploying an agent to Slack" data-og-width="1472" width="1472" data-og-height="320" height="320" data-path="images/no-code/deploy-slack.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-slack.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=be7995177ee1f2d7f54db8f59dda651d 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-slack.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=91793d59250af69ea5dd587fdbd21a8e 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-slack.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=901ca86769c74110f35d0fe920672830 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-slack.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c40d118f45dd5bb0e045c25aad246cfa 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-slack.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=88739e59545e6b939baebac08e017637 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-slack.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=93bef674bcab16a038b401d26be45577 2500w" />
  </Step>

  <Step title="Go through the OAuth flow">
    Next, you'll need to go through the OAuth flow to allow Writer to access your Slack workspace.
    <img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-2.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=62b8eee2c9d574ad1de3b4b6c2f9ee1c" alt="Go through the OAuth flow" data-og-width="2048" width="2048" data-og-height="1536" height="1536" data-path="images/no-code/slack-2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-2.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=bcdfbfe69a550dbdcfaa8dd6db33e814 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-2.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=619453469fb5fba903d8cda80a50f725 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-2.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=07897156ff82c6ce44f98d2e6182bc7f 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-2.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=3ec73621a83918f675aa7dfa1cd2b93e 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-2.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=c818da335f433885f5c034a7c210ba35 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-2.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=87c83b994657258885f1f3954df348c5 2500w" />
  </Step>

  <Step title="Toggle Slack option">
    You can now toggle the **Deploy to Slack** option to enable the agent for use within Slack.
  </Step>

  <Step title="Connect to Writer">
    Once the agent is Slack-enabled, you can start interacting with it by clicking the Writer button in Slack and selecting "Connect to Writer."
    <img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-1.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=2f27881230b6ee87a9943fe4fa6dfe52" alt="Connect to Writer" data-og-width="2244" width="2244" data-og-height="1732" height="1732" data-path="images/no-code/slack-1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-1.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=29c85b4ae8cc2d5d5392cb33f3d15956 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-1.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=c331b226796b0885a01ca3af966f481b 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-1.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=ad94eb608ca97341f0ff40c9ef52367c 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-1.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=c981191df7705532878132d35d00802a 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-1.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=49b20a8b0d9f7b32857e67a2111d03cb 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-1.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=2da2b23204af59f8cdde9e97c1bae838 2500w" />
  </Step>

  <Step title="Return to Slack">
    When you return to Slack, the agent will be available for use. You'll see that the Q\&A functionality is now integrated within Slack.
    <img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-3.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=9fa1edeb44c3394624f35c12a7ae2a27" alt="Return to Slack" data-og-width="2240" width="2240" data-og-height="1728" height="1728" data-path="images/no-code/slack-3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-3.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=333a39eb78a309abd813d6ce7a64e774 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-3.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=73ce121dba8449c88688c8ed4c2e9fbd 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-3.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=b72c67f1599b77a652c0ff773ed7405b 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-3.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=10f6efd78564654eb3b7814be0f0952e 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-3.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=02399569715c26c8d0518f17a86df2ac 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-3.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=fcbdb2cd1da713d5b53bf961faf87392 2500w" />
  </Step>

  <Step title="Select interaction mode">
    When using the agent in Slack, you'll have two interaction modes:

    * **General mode:** If the agent uses General mode and doesn't include a Knowledge Graph mode, simply select it and start chatting.
    * **Knowledge Graph mode:** If the agent includes a Knowledge Graph, select the interaction mode—either Knowledge Graph mode or General mode.
      * In General mode, it'll function like a non-graph-enabled agent.
      * In Knowledge Graph mode, you'll be prompted to connect the relevant graphs. Once connected, you can start chatting with the agent.

    If the agent is built with specific data constraints (e.g., a sales Q\&A agent linked only to Salesforce data), you'll select the Knowledge Graph, and the setup will be complete without needing to choose different graphs. This deployment mode leverages the configurations set in the agent builder, ensuring the agent behaves as expected in Slack
    <img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-4.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=1805d6373d412037084a95a930b23ab5" alt="Select interaction mode" data-og-width="2240" width="2240" data-og-height="1728" height="1728" data-path="images/no-code/slack-4.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-4.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=2547f4489301214fcfeb24b902e3284e 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-4.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=6b4a82127016e2f10b0ae9883eb8358d 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-4.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=7e5f65397561cc1ea9cf9e69f321e56c 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-4.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=6e9124efc4c91c22974de220a3c28e3e 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-4.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=0416d054e008e80c4c5a407041f897d7 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/slack-4.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=13cacb2df6a4b17f4832b61010935874 2500w" />
  </Step>
</Steps>

## Deploy to Writer

If your organization uses the Writer App in addition to AI Studio, you'll see a **Deploy to Writer** option. This allows you to select specific teams in Writer where you want to deploy the agent.
<Note>You'll have access to this option if you have access to the Writer App.</Note>

<Steps>
  <Step title="Update Agent Info">
    Before deploying to Writer, update the **Agent Info** under the **Agent Guide** tab to provide helpful information about the agent to users.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-info.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=02662579b7a8926cab7528f2039bf12b" alt="Agent Info" data-og-width="1758" width="1758" data-og-height="1066" height="1066" data-path="images/no-code/agent-info.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-info.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9793f653412e2e68006c09aa1789ce35 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-info.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b800a3f89fa1bdb3f41475052d01b625 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-info.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=323b1966e6f91666a163aceae67de8c2 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-info.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=6d7ffbb4df14b6ad0cf7e074ff72c4fe 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-info.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=722ca044e8590923995d1dc592c797ce 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-info.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=dca2462ecc1b24d2b3c03ccd57fded98 2500w" />
  </Step>

  <Step title="Deploy to Writer">
    Click the deploy button. Once deployed, the agent will be available to those teams within the app library. You can choose to deploy the agent to all teams or select specific teams.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-writer.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=390de889221d2cffee03f880a1bf8c7c" alt="Deploy to Writer" data-og-width="1476" width="1476" data-og-height="396" height="396" data-path="images/no-code/deploy-writer.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-writer.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=4ee7896b13a4e73120cf9155aaa3fd0f 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-writer.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=58044e1ffb4962c906b350e8bed95c0d 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-writer.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=0ac7ef63adeae7a6ed2bac5e62b6801e 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-writer.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=39701abd801c02281b4c72a690d66d88 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-writer.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9a5f87581d75a24f020c70435d904765 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/deploy-writer.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c6a3d74bd199f5fc49b0d2c7a1eff9e2 2500w" />
  </Step>
</Steps>


# Create an earnings call agent
Source: https://dev.writer.com/no-code/earnings-call-agent



This agent takes information from an earnings call transcript and puts it together in a summary report. The report covers results for the period, future plans, and management opinions. It uses [Palmyra Financial](/home/models#palmyra-fin), a Writer model specifically trained for financial analysis with a large context window to handle the length of earnings call transcripts.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/earnings-agent.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7aeb92264f6596690ab927f114d096cb" alt="Earnings call agent" data-og-width="3814" width="3814" data-og-height="1748" height="1748" data-path="images/no-code/earnings-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/earnings-agent.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=4fae7b7e59d2a3ddaeb0ab25bd6ceef7 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/earnings-agent.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=4c6441615e6a65cbcd32e935eb77c263 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/earnings-agent.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=77cb6da1490f14fdcba5ea9b5b678bf3 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/earnings-agent.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=cf77485f68175be032c6470dbc198d4d 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/earnings-agent.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=ae733f54060f64409b4df8e4ac704490 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/earnings-agent.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=3d17694b40d2d54e221f8286529d01e2 2500w" />

Below are the steps to create this earnings call agent. To follow along, first log in to [AI Studio](https://app.writer.com/aistudio).

<Steps>
  <Step title="Create a new agent with text generation capabilities">
    From the [AI Studio home page](https://app.writer.com/aistudio), click **Build an agent** in the top right corner. Then, select **Text generation** as the type of agent you want to create.
  </Step>

  <Step title="Define your inputs">
    This agent requires the earnings call transcript as input.

    Define one input of type **File upload** with the name: **Earnings Call Transcript**. You can specify whether to allow the user to add a URL, upload a file, or paste text. You can also specify the file type to be uploaded.

    *Optional: You could also add text inputs for company name and reporting period if you want those to be dynamic.*
  </Step>

  <Step title="Add the quarterly results prompt">
    This agent uses multiple prompts to break down the task: one for summarizing results, one for forward-looking guidance, and one for management commentary.

    Add a prompt of type with the name **Quarterly Results** and select **Palmyra Financial** as the model.

    Add the following prompt:

    ```
    You are a financial analyst who excels at producing summaries of financial reports.

    Here is your report to analyze:

    <report>@File input</report>

    Instructions:

    - Analyze the dates given in the report to determine what timeframe the report is for
    - Financial reports are often produced on a quarterly basis.
    - Extract key business result here for the quarter the earnings call is for
    - These highlights should be all about the numbers
    - You must pull out as many of these as you can find in the earnings call.
    - You must pull out a minimum of 5 results, but you should write more if there are more key results to share.
    - Copy the most relevant portion of the earnings call for each result you find here. Each result should have a supporting extract copied from the document. Do not modify the extract, just copy it exactly as it appears in the earnings call.
    - Output as HTML instead of Markdown

    Output:
    ```
  </Step>

  <Step title="Add the future guidance prompt">
    Add a prompt of type with the name **Future Guidance** and select **Palmyra Financial** as the model.

    Add the following prompt:

    ```
    You are a financial analyst who excels at producing summaries of financial reports.

    Here is your report to analyze:

    <report>@File input</report>

    Instructions:

    - If this report contains information about future quarters:
    - Extract as many statistics from the future quarter guidance as you can
    - There should be at least 5 of these statistics
    - Remember to focus on the numbers
    - Output as HTML, not Markdown

    Output:
    ```
  </Step>

  <Step title="Add the management commentary prompt">
    Add a prompt of type with the name **Management Commentary** and select **Palmyra Financial** as the model.

    Add the following prompt:

    ```
    You are a financial analyst who excels at producing summaries of financial reports. The management of the company the earnings call is for will cover a variety of themes during the earnings call. 

    Here is your report to analyze:

    <report>@File input</report>

    Instructions:

    - Pull out a list of at least 5 themes
    - Each theme should have a longer quote from the report that covers what the management of the company has to say about it. These can be quite lengthy and should give detail about the selected theme. Include a quote to go with each theme.
    - Output as HTML, not Markdown

    Output:
    ```
  </Step>

  <Step title="Add the participants prompt">
    Add a prompt of type with the name **Participants** and select **Palmyra Financial** as the model.

    Add the following prompt:

    ```
    You are a financial analyst who excels at producing summaries of financial reports. Your specific goal is to extract any and all participants from financial call transcripts or reports. Include any names and titles of participants.

    Here is your report to analyze:

    <report>@File input</report>

    Instructions:

    - Pull out all participants from the report
    - Include all participants as a bulleted list
    - If included, share the title/job name of each participant
    - Output as HTML, not Markdown

    Output:
    ```
  </Step>

  <Step title="Format your output">
    Add the following to the **Output formatting** section:

    ```
    <h3>Participants:</h3>
    @Participants
    <h3>Quarterly Report:</h3>
    @Quarterly Results
    <h3>Future Guidance:</h3>
    @Future Guidance
    <h3>Management Commentary:</h3>
    @Management
    ```
  </Step>

  <Step title="Test and refine your output">
    Review the generated summary. If it's not capturing the right information or the tone is off, tweak your prompts. Consider adding more specific instructions or examples to guide the model.
  </Step>

  <Step title="Deploy your agent">
    Once you're happy with the summary quality, [deploy your agent](/no-code/deploying-an-agent) so others can use it. Developers can also [invoke this agent with the API](/home/applications) and [use it with tool calling](/home/applications-tool-calling) to integrate into other agentic workflows.
  </Step>
</Steps>


# Edit an agent
Source: https://dev.writer.com/no-code/editing-an-agent



You can edit a deployed agent's name, configuration, and metadata (in Agent Guide) and then push the changes to the deployed instances of the agent. To edit your deployed agent:

<Steps>
  <Step title="Click Unlock to edit">
    Click **Unlock to edit** to change either the agent configuration or the agent itself.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-button.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5b80b84c2c479d8fa2fe9f1ca0b7dcd7" alt="Editing an agent" data-og-width="916" width="916" data-og-height="238" height="238" data-path="images/no-code/edit-button.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-button.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=20f0638328420fbe77718489ba363f6b 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-button.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=28af2a990a34f9e97f7290cefb748fcf 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-button.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5128733c6b58d8a9f7fd3cc9f2bbd696 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-button.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=6ef1faadb7897ece6c7d3b9ca5cbf682 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-button.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a33af1af78b90fcdb13a740391460308 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-button.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=ba1040e861a0f4bd2ffbf77dc0f55fa1 2500w" />
  </Step>

  <Step title="Edit the agent">
    Edit the agent's name, configuration, or metadata (in Agent Guide).
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-agent.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=ba7212a821d71fcc17a227df187a3468" alt="Editing an agent" data-og-width="3820" width="3820" data-og-height="1780" height="1780" data-path="images/no-code/edit-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-agent.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c108ff6f567bcd1ca4b6f653970c5987 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-agent.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=aef4197aaed786fe2373884b615bd4ab 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-agent.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e77892faa17f4aa9becd5be487be43a6 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-agent.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a526e3ee443dcdac329645e5070e1526 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-agent.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=3c8878208ee22e3d9b74eefb3fbe9392 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/edit-agent.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b9980b4bf988b6ce2305949611e360b4 2500w" />
  </Step>

  <Step title="Push name or metadata changes only">
    If you've only edited the agent's name or metadata, click the down arrow and select **Push configuration changes only** or **Push guide changes only**.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-config-button.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9f203523fb34b65b71635f8fe93087b0" alt="Push name or metadata changes" data-og-width="732" width="732" data-og-height="394" height="394" data-path="images/no-code/push-config-button.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-config-button.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=938cf71d4159948877f9d9cffaf0bcbb 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-config-button.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a87fa8cde27f9c46dbfb79b327cd9779 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-config-button.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=28b9e9be9cfd280962b314d217fa471f 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-config-button.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=3d7c9a610664f1e8562b1baec9dcdf12 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-config-button.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=02166f8dcb58d97cef045c521253834c 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-config-button.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9aa20c972c493568682ae4adb0c505ab 2500w" />
  </Step>

  <Step title="Push all changes">
    If you want to push all changes, click **Push all changes** to update the deployed instances of your agent.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-button.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7558c31cd89fc15608a9fcf951e9b18d" alt="Editing an agent" data-og-width="718" width="718" data-og-height="200" height="200" data-path="images/no-code/push-button.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-button.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=8456d9c7ef731e232269a0f45327f776 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-button.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=eec2fb09f94f6105982b4c9928bd8380 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-button.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=53c77f1257d37dfe2227a2a603996bdd 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-button.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c343a4f99f203ef68bd1777707ad3664 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-button.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=d7619712b3f6f13b4e3bf2208bf928ee 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/push-button.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5335f0c99e7f97c05152058e642d7338 2500w" />
  </Step>
</Steps>


# No-code agents
Source: https://dev.writer.com/no-code/introduction

Build AI agents without code to automate tasks, create branded content, and develop knowledge assistants using your company data.

No-code tools let you build agents **without writing any code** to compress your workflows—automate repetitive tasks, create branded content, and develop knowledge assistants based on your company's data. Simply define the required inputs, the instructions for the agent to follow, and the desired output structure. Once you've built the agent, deploy it and edit it at any time.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-capabilities.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=6fe38f4f437b52decc9d5cb392ffb0c7" alt="Agent capabilities" data-og-width="1536" width="1536" data-og-height="909" height="909" data-path="images/no-code/agent-capabilities.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-capabilities.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=6e66fa8d9cbc92efd01a425bb427fe24 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-capabilities.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=023a1b83d74de1b909dda1bb2ccf80e9 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-capabilities.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=6e701ad7d4c641607c2803b9204d037a 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-capabilities.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=965c71fe770d88fa4261f0b56632c22c 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-capabilities.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=30fa9af785d7d00ae8074bd1b4e82ec0 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/agent-capabilities.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a3abe82cb5991426c089f93263b6b2af 2500w" />

You can build no-code agents for:

1. **Recurring** **tasks** that require repetitive processing, such as creating
   recurring content.
2. **Time-intensive tasks** that require extensive back-and-forth communication between
   contributors to complete.
3. **Structured** **tasks** that require the same information
   to be requested and always produce the same result.
4. **Voice-specific** **tasks** that require a particular tone, style, or format.

<Tip>Explore the pre-built, no-code agents in [Templates](https://app.writer.com/aistudio/templates). When you find one
you like, click "Try in builder" to copy and test it. If it meets your needs,
you can deploy it immediately and edit it after deployment.</Tip>


# Create a newsletter generation agent
Source: https://dev.writer.com/no-code/newsletter-agent



Newsletters need to easy-to-understand and jargon-free, and can take hours to write—especially if you're sending them weekly. Creating an agent can help you get these newsletters out faster and written in a way that your customers can understand.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/newsletter.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=95ecb65c1fdb3a9b92255090cbcd1de8" alt="newsletter agent showing inputs, prompts, and the generated newsletter content preview." data-og-width="3428" width="3428" data-og-height="1692" height="1692" data-path="images/no-code/newsletter.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/newsletter.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9df6d604f85f75f80acadb4d6b218144 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/newsletter.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=6bd707c3b2d4e5b40993a3201408602d 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/newsletter.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=ce0ae1cc7c13ac738c6624b091e1be11 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/newsletter.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a56c0acba8be5beb2523183613419596 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/newsletter.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5d9421fd78493db137e8d38d083ba2a0 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/newsletter.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b96ae67cf10b0c0166968768fe86f325 2500w" />

Below are the steps to create this newsletter agent. To follow along, first log in to [AI Studio](https://app.writer.com/aistudio).

<Steps>
  <Step title="Create a new agent with text generation capabilities">
    From the [AI Studio home page](https://app.writer.com/aistudio), click **Build an agent** in the top right corner. Then, select **Text generation** as the type of agent you want to create.
  </Step>

  <Step title="Define your inputs">
    This example is a newsletter that always includes three key components:

    * Communication about new features, products, or white papers
    * A customer spotlight
    * Information about the latest blog post

    Each of these components is an input. Define three inputs, each of the type **File upload**, with the names:

    * Feature info/whitepapers
    * Customer Spotlight
    * Blog to promote
  </Step>

  <Step title="Write your prompts">
    There are several ways to break up the prompts for generating a newsletter. In this example, create two prompts: one to generate the subject line and one to generate the body of the newsletter.

    The prompt for the subject line is:

    > Create a subject line for a weekly newsletter about the new features, customer spotlights, and featured blog posts.

    The prompt for the body of the newsletter is:

    > Create a newsletter for Writer customers. The newsletter should include:
    >
    > * communication about new features, products, or white papers. These items to highlight are in `@Feature info/whitepapers`
    > * a customer spotlight. The customer spotlight information is in `@Customer Spotlight`
    > * a blog article to promote, which is in `@Blog to promote`
    >
    > Avoid jargon and complex language. Although the newsletter may cover fairly complex topics, it should be accessible to everyone.
    > The newsletter should follow this format:
    >
    > * a greeting and introduction
    > * new features/products/whitepaper communications
    > * the customer spotlight
    > * blog article to promote
    >
    > Include suggestions for images that can break up each section.
  </Step>

  <Step title="Format your output">
    Decide how you want your output to look in the Output formatting section. You can use [Markdown](https://www.markdownguide.org/) to format your output.

    In this example, the output is a newsletter with a subject line and body:

    > @subject\_line
    >
    > @body
  </Step>

  <Step title="Test and refine your output">
    The first version of your newsletter may not be what you're looking for. That's okay! The more you tweak your prompts and provide examples, the better your output will be.

    It can also be helpful to provide examples in your prompts of newsletters and subject lines you think are the best. That way, Writer can learn from what you consider to be the best newsletters.
  </Step>

  <Step title="Deploy your agent">
    Once you're happy with how everything looks, [deploy your agent](/no-code/deploying-an-agent) so that everyone can use it. Developers can also [invoke this agent with the API](/home/applications) and [use it with tool calling](/home/applications-tool-calling) to integrate into other agentic workflows.
  </Step>
</Steps>


# Research
Source: https://dev.writer.com/no-code/research



A no-code agent with the research capability can perform web research on a specific topic. You can use the pre-built research type or create a custom one that can be tailored to a specific topic and writing style.

<img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=6b8c1e3b9a410e14b10086dd72067cc8" alt="Research screen" data-og-width="3822" width="3822" data-og-height="1770" height="1770" data-path="images/no-code/research-assistant.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=b3d001bc7eaa2856729c6727fd330dfa 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=a46e2adc1e2905f4e78b095a0ee45504 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=7b7ccbba4893e8ccec72dd6291273c50 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=f30b798a52d82b20eb83663fa36f55b7 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=4bf7e11851bf1b33292933db7b5aff65 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=5388ac92dec04cdeb5feb88e99214bbc 2500w" />

## Building an agent with research capabilities

To build an agent with research capabilities, first choose the **Research assistant** option after clicking **Build an agent** in AI Studio.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9bdf96574dc8e8ab1e5158413be185ca" alt="Create a research agent" data-og-width="1878" width="1878" data-og-height="592" height="592" data-path="images/no-code/build-options.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b1ba2b86382f9b244000952189cd014d 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=53778a4f5ea5c73d98b43cc53abaaf6e 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=47a4237fe493a14fc5dc34168a98bd5d 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=95ff0f843e6c66af1d23d368748ba31d 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=abe733b6d7166c4e4e83c800cd8ff93e 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=fc920731bb83d3c85cb56eb139566be4 2500w" />

## Selecting the type of research

The first step is to select the type of research from the **Research** menu to incorporate into your agent. You have the option of choosing from a selection of pre-built research that specialize in popular topics, or creating a custom one that can be tailored to a specific topic and writing style.

<img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant-menu.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=f862e2f3d7be97322a06cfddf525d443" alt="&#x22;Research&#x22; drop-down menu displaying all options" data-og-width="800" width="800" data-og-height="657" height="657" data-path="images/no-code/research-assistant-menu.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant-menu.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=cf5c140ea96799fe879c56787690b9b1 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant-menu.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=9febc413a1dca04454048118773a8d38 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant-menu.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=be406c9aac20984f69dbe2a9b82eac38 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant-menu.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=278333d53e97a082e6d39bb3b1e7714b 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant-menu.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=501cb706e80ffe60df7edda72280b93a 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/research-assistant-menu.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=35f6be25ea80858309410e086d6e4a49 2500w" />

### Pre-built research

The **Research** menu starts with this selection of pre-built research:

* **Auto research**: automatically selects the most appropriate research type based on the topic
* **Finance research**: use this research for topics related to finance and investing
* **Business research**: helps with business-related topics
* **Travel research**: for topics about travel and tourism, use this research

### Custom research

**Custom research**, the final option in the **Research** menu, allows you to create research tailored to your specific needs. When you select this option, the **Edit instructions** link will appear.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-assistant.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=76362499843b6258263d203df2bbd3ac" alt="&#x22;Research&#x22; menu, with &#x22;Custom research&#x22; selected and Edit instructions&#x22; link" data-og-width="800" width="800" data-og-height="220" height="220" data-path="images/no-code/custom-assistant.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-assistant.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a57e678bfe53170b25592a25a73f0c87 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-assistant.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=6d145210e45e468ded1d431896cb3c92 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-assistant.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=d1862091810c8cb52c9054d236eace33 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-assistant.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=453cc5744f8a615bbfdf1ad7bee0eddf 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-assistant.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=30dd6481e90281a793c05c5224f8dea7 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-assistant.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=fb5f46f02b57b97a12bdd05905e36a49 2500w" />

Click this link to open the **Custom instructions** window, where you can specify how the research should behave, what topics it should cover, and how it should respond to user queries.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-instructions.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=57e9336d1df5af46a1ed8452749d310b" alt="&#x22;Custom instructions&#x22; window" data-og-width="1200" width="1200" data-og-height="772" height="772" data-path="images/no-code/custom-instructions.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-instructions.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=25e6083fbc1e3d4736756e6f7603c547 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-instructions.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=84925081f9a1abedf61cae1b2a5a29a0 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-instructions.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=28c00b63903a053334e6fb50c5181cdf 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-instructions.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c8122f2410ff8f188c7ee0337ab89d76 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-instructions.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=231ebf0b1ca183e35fc6e3b37fb00769 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/custom-instructions.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=fc738256201973597e143b71ac1244f7 2500w" />

## Giving the research search parameters

The **Search type** options allow you to specify how the research should search for information.

<img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/search-type.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=0e216687c5eedba5c7e9a631c91efb63" alt="&#x22;Search type&#x22; menu, with &#x22;Web search&#x22; selected" data-og-width="800" width="800" data-og-height="248" height="248" data-path="images/no-code/search-type.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/search-type.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=692c65832cc491aa2575ec1141f26ec8 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/search-type.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=e0d9c3ce0897828f81dfea47389089b4 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/search-type.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=1ca83aa8e60a6c0d967324cc651b6315 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/search-type.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=00a4507ef244fd4cc002ab574280e29b 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/search-type.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=41aa702e070ed9c3d688200e5e9005c3 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/search-type.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=ea2463df8531cfdef1daa50a00367fed 2500w" />

You can choose from the following:

* **Web search**: The research will search the web for information.
* **Specific URLs**: The research will limit its search to the web sites or pages you specify. When you select this option, a text field will appear where you can enter one or more URLs of the sources you want the research to search. Note that the URLs you provide must start with `http://` or `https://`.

<img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/specific-urls.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=83670b77bb7c12fd8ecef0cb811cbbac" alt="Search type menu, with &#x22;Specific URLs&#x22; selected, and text field for entering URLs" data-og-width="800" width="800" data-og-height="325" height="325" data-path="images/no-code/specific-urls.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/specific-urls.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=54af9e8102cf36dc7588d19b4b8d210f 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/specific-urls.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=c76c87d0c6f1be4acd63261d91e67b3c 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/specific-urls.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=78c7ea50ca58b1d402689d30c55d0d8d 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/specific-urls.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=f181d7564b499455a12ca03427f3e3f8 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/specific-urls.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=ceba51d797904522b3c4e5dde70a3c46 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/specific-urls.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=3ed57a66642dcd47bdc29c37d05c572c 2500w" />


# Text generation
Source: https://dev.writer.com/no-code/text-generation



Agents with the text generation capability can generate text based on specific inputs. These no-code agents are ideal for long- or short-form structured content, such as blog posts, FAQs, press releases, and newsletters.

<img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-generation-agent.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=cb6aa42340b0a5cb7eb35176a9ce5639" alt="Agent with text generation" data-og-width="3826" width="3826" data-og-height="1786" height="1786" data-path="images/no-code/text-generation-agent.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-generation-agent.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=2558ebde759a7066815719b94dbeee78 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-generation-agent.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=8e9f737f001a98c1a7f5f41f0126d8fa 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-generation-agent.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=e067b47cbf26d10824958cefbe8580b6 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-generation-agent.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=37bdce68de14cc14ef6de35131160bbe 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-generation-agent.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=b525063810807d2b92e88c98b97de1d0 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-generation-agent.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=991e12a13c4c649a4fa57d2377c0e00e 2500w" />

## Building an agent with text generation

To build an agent with text generation capabilities, choose the **Text generation** option after clicking **Build an agent** in AI Studio.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9bdf96574dc8e8ab1e5158413be185ca" alt="Create a text generation agent" data-og-width="1878" width="1878" data-og-height="592" height="592" data-path="images/no-code/build-options.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b1ba2b86382f9b244000952189cd014d 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=53778a4f5ea5c73d98b43cc53abaaf6e 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=47a4237fe493a14fc5dc34168a98bd5d 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=95ff0f843e6c66af1d23d368748ba31d 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=abe733b6d7166c4e4e83c800cd8ff93e 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/build-options.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=fc920731bb83d3c85cb56eb139566be4 2500w" />

An agent with text generation capabilities consists of:

* [Adding inputs](/no-code/text-generation#inputs)
* [Writing prompts](/no-code/text-generation#prompts)
* [Formatting outputs](/no-code/text-generation#output-formatting)
* [Choosing a voice](/no-code/text-generation#voice)

## Inputs

An input is content information for your text generation. It generates the desired output—the content your text generation will produce.

For example, if you're building a blog post, the input would include the blog post topic, outline, keywords, reference materials, research sources, and existing knowledge about the topic.

### Types of inputs

There are four types of inputs:

1. Text input: A text input allows users to enter text directly into the text generation.
2. Dropdown: A dropdown input allows users to select one option from a list.
3. File upload: A file upload input allows users to upload a file, such as an image or PDF.
4. Image upload: An image upload input allows users to drag-and-drop or choose an image.

### Adding an input

Once you've decided what type of input you want to add, you'll need to:

<Steps>
  <Step title="Add an input">
    Click **Add input** and select the type of input you want to add.
    <img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-input.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=7d793226132d79647873628149c4e5f5" alt="Adding an input" data-og-width="1808" width="1808" data-og-height="292" height="292" data-path="images/no-code/text-input.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-input.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=d45a8bb84c41dae6ee65498c584cb2a4 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-input.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=09161abb3efa5c4c19c1fb1a8d9a83d4 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-input.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=94f2e10ff8095b57851b26513d1bf132 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-input.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=4cd47fa038b529c63aeaedb788d5c683 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-input.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=6b83b52fc8ccdad089b174c8497043ed 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/text-input.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=e80566b936fdfc335a31d1d7bf2078d7 2500w" />
  </Step>

  <Step title="Name your input">
    Give your input a name that clearly communicates its purpose to users. This
    will help them understand what information they need to provide.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/adding-input.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=f145daf8d81061544e3a2517ad544cdd" alt="Adding an input" data-og-width="1592" width="1592" data-og-height="1246" height="1246" data-path="images/no-code/adding-input.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/adding-input.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=1f1f5afe1d8316152f602ff86b0397dd 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/adding-input.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=4af926fcf8d6846ca246b7aaad31efba 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/adding-input.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b93bc1bfb68ce17b4459359722443a16 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/adding-input.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a7f46c57e293679d4ea79b6b2219664c 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/adding-input.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=09ff96a46563a2f8021cb99e41bbe279 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/adding-input.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c35e5cf88a3e0c1f6aafa89b8ba71843 2500w" />
  </Step>

  <Step title="Decide whether the input is required or optional">
    If it's required, users must enter information in that field in order to use
    the text generation. If it's optional, they can skip it.
  </Step>

  <Step title="Add placeholder text or descriptions">
    Provide placeholder text or descriptions to clarify what information is required. This ensures that users fully understand what they need to enter.
  </Step>

  <Step title="Control what users can upload">
    If you selected a file upload input, you can restrict the type of file users can upload. For example, if your agent expects a specific type of an .XLSX file, restrict other file types from being allowed. This will guide users to use the agent as intended.
  </Step>
</Steps>

## Prompts

A prompt is a message that you send to the model. It can be a single prompt consisting of a few lines, or a complex prompt consisting of multiple steps—each with its own prompt that relies on multiple inputs. You can even use prompting techniques such as chain-of-thought (CoT) prompting, where one prompt output becomes an input to the next prompt, and so on—creating a chain of thought.

<Tip>Check out our [prompting guide](/home/prompting) for strategies on how to write effective prompts.</Tip>

### Adding prompts

You can add multiple prompts to your text generation.

<Steps>
  <Step title="Add a prompt">
    Click **Add prompt** and select the type of prompt you want to add.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/add-prompt.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=10e2ad643f2d9e7329de6a0cf4fe3d86" alt="Adding a prompt" data-og-width="1802" width="1802" data-og-height="652" height="652" data-path="images/no-code/add-prompt.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/add-prompt.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=c4cd7c1bde44c56225b0652a99bfa7a3 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/add-prompt.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=932bbaa234470ff243c4e45e8aa51802 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/add-prompt.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=d726c0011e1c759e34edea8cba89c75c 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/add-prompt.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a2b21c2c067a5dc81d57146dedec77bd 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/add-prompt.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=dee604520cf597568e03fd839f3bf6c9 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/add-prompt.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=4d73cff57fd3de73d3f1d971193eaa4e 2500w" />
  </Step>

  <Step title="Choose a model">
    Select the [model](/home/models) you want to use for your prompt, as well as any parameters like temperature, top P, and max length.
    <img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/model-params.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a2d52bfec058bb8e5a54154881000a56" alt="Choosing a model" data-og-width="611" width="611" data-og-height="739" height="739" data-path="images/no-code/model-params.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/model-params.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9f788c5a5511593a6a9176f2ee306e3b 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/model-params.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b0081a3ea5ce812979e47780f44c7178 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/model-params.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=d2aca6909a17a3fe91e0028a2465f232 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/model-params.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=030f883fbc4c7b6914d94cb68f9ad48b 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/model-params.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a850f204281748d36324dcdf2f621d31 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/model-params.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=fb67c258431896b72092e67208941447 2500w" />
  </Step>

  <Step title="Write your prompt">
    Write your prompt using the guidelines below and our [prompting guide](/home/prompting).
  </Step>
</Steps>

### How to use prompts effectively

You can ask the model to perform various tasks, but it's best to break down your prompts into smaller, more specific "asks." This is especially important for complex, multi-step text generation. Otherwise, you risk overwhelming the model by asking it to perform too many tasks at once.

For example, instead of asking it to create an entire blog post at once, you might write one prompt asking it to create a title, another to create an opening paragraph, and so on.

Follow these [strategies](/home/prompting) to write good prompts.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/post-version-a.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9fe16ac3d0150514d29a8e3da4ffafcb" alt="post-version-a" data-og-width="1588" width="1588" data-og-height="1093" height="1093" data-path="images/no-code/post-version-a.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/post-version-a.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=3ad3cb63a9f4df3a5ac8eebced6aeac3 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/post-version-a.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=3a6e225592f2788aa4243725e38bf687 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/post-version-a.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e9f2e661b4b5140aa9a198e91a87428f 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/post-version-a.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=83072d4b312a02d2876da4c9967f6743 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/post-version-a.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=ce6a8bebf18618727e3d6329fc81d6ef 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/post-version-a.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=529b145459b1318f23977b55e3c1ebe8 2500w" />

### Renaming prompts

You can rename prompts from generic names like "Prompt 1" and "Prompt 2" to any custom name.

This will help you to:

1. Stay organized and keep track of your prompts
2. Know exactly what each prompt accomplishes
3. Write your prompts
4. Format your output

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/renaming-prompts.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=026c8ab6d92b5b0ec2f68ba01f88fab4" alt="Renaming prompts" data-og-width="1722" width="1722" data-og-height="802" height="802" data-path="images/no-code/renaming-prompts.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/renaming-prompts.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b5861c06360ce552f33769c1ef0114b9 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/renaming-prompts.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=78f2b0fd189beb49e167c2a2cd982ffe 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/renaming-prompts.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e9bb7ce5e54fea83d15b0a5e243abe57 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/renaming-prompts.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5132533bb9b7dfeb1463d336758fbf1e 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/renaming-prompts.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=19de7c8b2e46112caf4f583896840ffe 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/renaming-prompts.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a2a410ad47a013271623b5db06a6d06e 2500w" />

### Referencing inputs

To reference your input, `@` it within the prompt.

For example, if you're writing a prompt to generate social posts based on a blog post, do the following:

1. **Input:** `Blog post`
2. **Prompt 1:** instructions for creating a social post

In your prompt, reference `@Blog post` so that Writer understands that the social post should be based on the blog input.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/reference-inputs.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a778b3427c9636a42d50fa8f94d319c1" alt="Reference an input" data-og-width="1708" width="1708" data-og-height="664" height="664" data-path="images/no-code/reference-inputs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/reference-inputs.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=f414d968c19f37eadb518ff1fbc7323c 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/reference-inputs.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=91bfe3692aee322eaae6271b607967db 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/reference-inputs.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=7b294b2d1f93dd680bacb1578172bc0d 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/reference-inputs.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=b20e0a5e32b1636bbd65a9f46fce0933 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/reference-inputs.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9b8d9b0f6cd51c6b6a9675d315d33630 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/reference-inputs.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=cd77bd3ae2a3036117fd866b0bcc8d4e 2500w" />

<Tip>
  If you have more than one input, you can `@` each one within a single
  prompt.
</Tip>

### Prompt chaining

You can reference other prompts within a prompt by using the `@` symbol, a feature known as prompt chaining.

For example, if you have a long blog post, you might want to summarize it in your first prompt, and use that summary to generate a social media post in your second prompt:

<Steps>
  <Step title="Input">`Long blog`</Step>

  <Step title="Prompt 1">
    Instructions for generating a summary of the `@Long blog` post.
  </Step>

  <Step title="Prompt 2">
    Instructions for generating a social media post based on `Prompt 1`.
  </Step>
</Steps>

In the second prompt, you'd reference `@Prompt 1` to indicate that you want the social media post to be based on the blog summary.

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/prompt-chaining.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=64ba1a232d2cffee6f767a5bc351101a" alt="Referencing a prompt" data-og-width="1722" width="1722" data-og-height="960" height="960" data-path="images/no-code/prompt-chaining.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/prompt-chaining.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9691b118f84dcaa44c3f9c17fb1c684f 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/prompt-chaining.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a9beb3f37515041292e7da4b0407c53b 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/prompt-chaining.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=8a70294cb5ca391ece2ebc6fc49f5e5d 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/prompt-chaining.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=9d52dfa5c18972081d3702280caa0fba 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/prompt-chaining.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a61618a4da9d6d8891c9f5efba8b0859 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/prompt-chaining.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=5f4c989cc037cbdc429b5faa7eb03fa3 2500w" />

## Output formatting

Next, format your output—the final assembled text generation. To do this, take all your prompt outputs (if you have more than one), format their style, add any static text such as a disclaimer, and combine them together.

You can use Markdown or HTML to specify how you'd like your output to be formatted.

For example, you can use the following formatting:

<CardGroup cols={2}>
  <Card title="Heading Tags" icon="heading">
    Use `<h1>`, `</h1>`, `<h2>`, `</h2>`, and `<h3>`, `</h3>` to denote heading
    text.
  </Card>

  <Card title="Bold Text" icon="bold">
    Use `<strong>` and `</strong>` to denote bolded text.
  </Card>
</CardGroup>

<img src="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/output-formatting.png?fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=e98be2a261acd2f1f6b7d0109b07f90e" alt="Output formatting" data-og-width="1816" width="1816" data-og-height="698" height="698" data-path="images/no-code/output-formatting.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/output-formatting.png?w=280&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=a11dc8e595630c4d2019e3d93283388d 280w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/output-formatting.png?w=560&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=d246780e91cd0d300bbe40b4077d47a7 560w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/output-formatting.png?w=840&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=af01a74ad255359dbd1307067ad1dbf5 840w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/output-formatting.png?w=1100&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=2acf927359f1b696d4cdc868f7ca7552 1100w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/output-formatting.png?w=1650&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=bed9d0e0a72f7af46c727fa65bb0048c 1650w, https://mintcdn.com/writer/EtzIGhya5-RmdX2Q/images/no-code/output-formatting.png?w=2500&fit=max&auto=format&n=EtzIGhya5-RmdX2Q&q=85&s=04e8da6b6e1c6625117b0ba42cf7e2d2 2500w" />

You don't have to include every prompt in your output formatting. For example, a prompt might be used only to summarize and then to create a LinkedIn post (based on the summary). If you don't want to include the summary in your output, you don't have to.

<Tip>
  Because you don't need to reference every prompt in your final output, you can leave interim prompts in your text generation for A/B testing or to get feedback. Combined with the `Rerun` option, this is a great way to efficiently iterate on your text generation.
</Tip>

The simplest text generation will have only one prompt. A more complex text generation might have multiple section headers, each with its own prompt output.

Before adding even more prompts to your text generation, ask yourself:

1. Does the user want this content?
2. Do I need these inputs to generate this output?

## Voice

With voice calibration, you can create outputs that sound just like you, faster. Voice allows you to build your different voices in Writer, and see them in action across the platform in the content you generate. To learn more about voice calibration, see [how to calibrate voice](https://support.writer.com/article/250-how-to-calibrate-voice-for-your-content).

<Note>
  At this time, only English is supported in Writer voice profiles.
</Note>

For an agent with text generation capabilities, you can choose to:

* Automatically generate all outputs using a voice selected by you
* Allow user to choose which voice to apply to their output
* Generate all outputs using Writer's default voice
* Allow users to choose from any voice in their team

<img src="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/voice.png?fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=d11af5b3e553ac3a7d8379b5c2ef1a9e" alt="Voice" data-og-width="1824" width="1824" data-og-height="538" height="538" data-path="images/no-code/voice.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/voice.png?w=280&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=119c87060d96eb97ce2a56492d56d51f 280w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/voice.png?w=560&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=2db3050529ab3807b87712d89c1abe19 560w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/voice.png?w=840&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=768d73bee8c527613cea7fd15b47bda1 840w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/voice.png?w=1100&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=3a8c3204e2c6ad6a7f768feba9afdd8f 1100w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/voice.png?w=1650&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=386d2035c8aa63098eac7e86ba1544fc 1650w, https://mintcdn.com/writer/kYaX1Myslb-BtXRR/images/no-code/voice.png?w=2500&fit=max&auto=format&n=kYaX1Myslb-BtXRR&q=85&s=ca2fda5d87dd631c0ce9e427e0f82b9a 2500w" />


