# Source: https://docs.weaviate.io/weaviate/concepts/replication-architecture/consistency

<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-weaviate/concepts/replication-architecture/consistency" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Consistency | Weaviate Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.weaviate.io/weaviate/concepts/replication-architecture/consistency"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Consistency | Weaviate Documentation"><meta data-rh="true" name="description" content="Replication factor configuration and data consistency models across Weaviate cluster replicas."><meta data-rh="true" property="og:description" content="Replication factor configuration and data consistency models across Weaviate cluster replicas."><meta data-rh="true" property="og:image" content="https://docs.weaviate.io/og/docs/concepts.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.weaviate.io/og/docs/concepts.jpg"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.weaviate.io/weaviate/concepts/replication-architecture/consistency"><link data-rh="true" rel="alternate" href="https://docs.weaviate.io/weaviate/concepts/replication-architecture/consistency" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.weaviate.io/weaviate/concepts/replication-architecture/consistency" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Replication Architecture","item":"https://docs.weaviate.io/weaviate/concepts/replication-architecture/"},{"@type":"ListItem","position":2,"name":"Consistency","item":"https://docs.weaviate.io/weaviate/concepts/replication-architecture/consistency"}]}</script><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-WS8CG676",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>

<script>!function(){if("undefined"!=typeof window&&void 0===window.signals){var n=document.createElement("script");n.src="https://cdn.cr-relay.com/v1/site/3709e2b3-c0eb-4239-9087-775e484fab16/signals.js",n.async=!0,window.signals=Object.assign([],["page","identify","form"].reduce((function(n,e){return n[e]=function(){return signals.push([e,arguments]),signals},n}),{})),document.head.appendChild(n)}}()</script>
<script id="hs-script-loader" async="true" defer="true" src="https://js.hs-scripts.com/8738733.js"></script>
<link rel="stylesheet" href="/fonts/font-awesome/fontawesome.css">
<link rel="stylesheet" href="/fonts/font-awesome/solid.css">
<link rel="stylesheet" href="/fonts/font-awesome/regular.css">
<link rel="stylesheet" href="/fonts/font-awesome/brands.css"><link rel="stylesheet" href="/assets/css/styles.f4cdad07.css">
<script src="/assets/js/runtime~main.444b5859.js" defer="defer"></script>
<script src="/assets/js/main.6a4a6ee2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script>


<script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WS8CG676" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><link rel="preload" as="image" href="/img/site/weaviate-logo-horizontal-light-1.svg"><link rel="preload" as="image" href="/img/site/weaviate-logo-horizontal-dark-1.svg"><link rel="preload" as="image" href="/img/site/weaviate-logo-w.png"><link rel="preload" as="image" href="/img/docs/replication-architecture/replication-factor.png"><link rel="preload" as="image" href="/img/docs/replication-architecture/replication-quorum-animation.gif"><link rel="preload" as="image" href="/img/docs/replication-architecture/replication-rf3-c-ONE.png"><link rel="preload" as="image" href="/img/docs/replication-architecture/replication-rf3-c-QUORUM.png"><link rel="preload" as="image" href="/img/docs/replication-architecture/replication-rf3-c-ALL.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#1C1468;color:#F5F5F5" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><a href="https://academy.weaviate.io/">The new <b>Weaviate Academy</b> learning platform is here!</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="defaultNavbar_mOWn"><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://weaviate.io" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/site/weaviate-logo-horizontal-light-1.svg" alt="Weaviate" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/site/weaviate-logo-horizontal-dark-1.svg" alt="Weaviate" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/weaviate/api/rest"></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/weaviate/weaviate" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><svg class="githubStars" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a href="https://academy.weaviate.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link academy-button">Academy</a><a href="https://weaviate.io/go/console?utm_source=docs&amp;utm_content=navbar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cloud-button">Weaviate Cloud</a><div class="hiddenSearch navbarSearchContainer_Bca1"><div class="searchBox"><button class="searchButton"><span class="searchPlaceholder"><i class="searchIcon fas fa-magnifying-glass"></i><span class="searchPlaceholderText">Ask AI or Search</span></span><div class="commandIconContainer"><span class="commandIcon">⌘K</span></div></button></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav></div><div class="secondaryNavbar_Zq6r"><nav class="secondaryNavLinks_WJZI"><a class="navLink_kzb_" href="/weaviate">Get started</a><a class="navLink_kzb_" href="/weaviate/guides">How-to manuals &amp; Guides</a><a class="navLink_kzb_" href="/weaviate/model-providers">Model integrations</a><a class="navLink_kzb_" href="/weaviate/config-refs">Reference &amp; APIs</a><a class="navLink_kzb_ activeNavLink_ObEy" href="/weaviate/concepts">Concepts</a><a class="navLink_kzb_" href="/weaviate/recipes">Recipes</a><a class="navLink_kzb_" href="/weaviate/release-notes">Other</a></nav></div><div class="modalOverlay_BeVA"><div class="modalContent_CPV2"><div class="modalHeader_aBIn"><div class="modalHeaderLeft_Jnp2"><strong>Go to documentation:</strong></div><div class="modalHeaderRight_pW31"><div class="modalHeaderButton_lyv9"><span class="buttonShortcut_rHzY">⌘U</span><div class="verticalDivider_TWYg"></div><button class="headerCloseIcon_Nc0n">✕</button></div></div></div><div class="modalBody_bZ4G"><div class="modalOptionsContainer_GF7c"><div class="modalOption_Zqj6 activeOption_IUKI"><i class="fa fa-database modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Weaviate Database</strong><p>Develop AI applications using Weaviate&#x27;s APIs and tools</p></div><div class="activeIndicator_uCqh"></div></div><div class="modalOption_Zqj6"><i class="fa fa-database modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Deploy</strong><p>Deploy, configure, and maintain Weaviate Database</p></div></div><div class="modalOption_Zqj6"><i class="fa fa-robot modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Weaviate Agents</strong><p>Build and deploy intelligent agents with Weaviate</p></div></div><div class="modalOption_Zqj6"><i class="fa fa-cloud modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Weaviate Cloud</strong><p>Manage and scale Weaviate in the cloud</p></div></div></div><div class="resourcesSection__QVP"><h4 class="sectionTitle_TjaJ">Additional resources</h4><div class="resourcesGrid_Fe8L"><div class="resourceCard_qG9v"><i class="fa fa-puzzle-piece resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Integrations</span></div><div class="resourceCard_qG9v"><i class="fa fa-edit resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Contributor guide</span></div><div class="resourceCard_qG9v"><i class="fa fa-calendar-days resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Events &amp; Workshops</span></div><div class="resourceCard_qG9v"><i class="fa-solid fa-graduation-cap resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Weaviate Academy</span></div></div></div><div class="aiAssistantSection_Qefr"><h4 class="sectionTitle_TjaJ">Need help?</h4><div class="resourcesGrid_Fe8L"><div class="askAiButton_snh2"><img src="/img/site/weaviate-logo-w.png" alt="Weaviate Logo" class="askAiIcon_T_rP"><span class="askAiText_snFq">Ask AI Assistant</span><span class="askAiShortcut_kkRQ">⌘K</span></div><div class="resourceCard_qG9v"><i class="fa fa-comments styles.resourceIcon" aria-hidden="true"></i><span class="resourceTitle__PWa">Community Forum</span></div></div></div></div></div></div><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts"><span title="Concepts" class="linkLabel_WmDU">Concepts</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/weaviate/concepts/indexing"><span title="Indexing" class="categoryLinkLabel_W154">Indexing</span></a><button aria-label="Expand sidebar category &#x27;Indexing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/weaviate/concepts/search"><span title="Search" class="categoryLinkLabel_W154">Search</span></a><button aria-label="Expand sidebar category &#x27;Search&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/data"><span title="Data structure" class="linkLabel_WmDU">Data structure</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/data-import"><span title="Data import" class="linkLabel_WmDU">Data import</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/modules"><span title="Modules" class="linkLabel_WmDU">Modules</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/storage"><span title="Storage" class="linkLabel_WmDU">Storage</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/vector-quantization"><span title="Compression (Vector Quantization)" class="linkLabel_WmDU">Compression (Vector Quantization)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/filtering"><span title="Filtering" class="linkLabel_WmDU">Filtering</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/reranking"><span title="Reranking" class="linkLabel_WmDU">Reranking</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/cluster"><span title="Horizontal Scaling" class="linkLabel_WmDU">Horizontal Scaling</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/weaviate/concepts/replication-architecture"><span title="Replication Architecture" class="categoryLinkLabel_W154">Replication Architecture</span></a><button aria-label="Collapse sidebar category &#x27;Replication Architecture&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/weaviate/concepts/replication-architecture/motivation"><span title="Use Cases (Motivation)" class="linkLabel_WmDU">Use Cases (Motivation)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/weaviate/concepts/replication-architecture/philosophy"><span title="Philosophy" class="linkLabel_WmDU">Philosophy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/weaviate/concepts/replication-architecture/cluster-architecture"><span title="Cluster Architecture" class="linkLabel_WmDU">Cluster Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/weaviate/concepts/replication-architecture/consistency"><span title="Consistency" class="linkLabel_WmDU">Consistency</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/weaviate/concepts/replication-architecture/multi-dc"><span title="Multi-Data center" class="linkLabel_WmDU">Multi-Data center</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/interface"><span title="Interface" class="linkLabel_WmDU">Interface</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/resources"><span title="Resource Planning" class="linkLabel_WmDU">Resource Planning</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/weaviate/concepts/replication-architecture"><span>Replication Architecture</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Consistency</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Consistency</h1></header><p>The replication factor in Weaviate determines how many copies of shards (also called replicas) will be stored across a Weaviate cluster.</p>
<p align="center"><img src="/img/docs/replication-architecture/replication-factor.png" alt="Replication factor" width="80%"></p>
<p>When the replication factor is &gt; 1, consistency models balance the system&#x27;s reliability, scalability, and/or performance requirements.</p>
<p>Weaviate uses multiple consistency models. One for its cluster metadata and another for its data objects.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="consistency-models-in-weaviate">Consistency models in Weaviate<a href="#consistency-models-in-weaviate" class="hash-link" aria-label="Direct link to Consistency models in Weaviate" title="Direct link to Consistency models in Weaviate" translate="no">​</a></h3>
<p>Weaviate uses the <a href="https://raft.github.io/" target="_blank" rel="noopener noreferrer" class="">Raft</a> consensus algorithm for <a class="" href="/weaviate/concepts/replication-architecture/cluster-architecture#metadata-replication-raft">cluster metadata replication</a>. Cluster metadata in this context includes the collection definitions and tenant activity statuses. This allows cluster metadata updates to occur even when some nodes are down.</p>
<p>Data objects are replicated using a <a class="" href="/weaviate/concepts/replication-architecture/cluster-architecture#data-replication-leaderless">leaderless design</a> using tunable consistency levels. So, data operations can be tuned to be more consistent or more available, depending on the desired tradeoff.</p>
<p>These designs reflect the trade-off between consistency and availability that is described in the <a class="" href="/weaviate/concepts/replication-architecture#cap-theorem">CAP Theorem</a>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Rule of thumb on consistency</div><div class="admonitionContent_BuS1"><p>The strength of consistency can be determined by applying the following conditions:</p><ul>
<li class="">If r + w &gt; n, then the system is strongly consistent.<!-- -->
<ul>
<li class="">r is the consistency level of read operations</li>
<li class="">w is the consistency level of write operations</li>
<li class="">n is the replication factor (number of replicas)</li>
</ul>
</li>
<li class="">If r + w &lt;= n, then eventual consistency is the best that can be reached in this scenario.</li>
</ul></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="cluster-metadata">Cluster metadata<a href="#cluster-metadata" class="hash-link" aria-label="Direct link to Cluster metadata" title="Direct link to Cluster metadata" translate="no">​</a></h2>
<p>The cluster metadata in Weaviate makes use of the Raft algorithm.</p>
<p>From <code>v1.25</code>, Weaviate uses the <a href="https://raft.github.io/" target="_blank" rel="noopener noreferrer" class="">Raft</a> consensus algorithm for cluster metadata replication. Raft is a consensus algorithm with an elected leader node that coordinates replication across the cluster using a log-based approach.</p>
<p>As a result, each request that changes the cluster metadata will be sent to the leader node. The leader node will apply the change to its logs, then propagate the changes to the follower nodes. Once a quorum of nodes has acknowledged the cluster metadata change, the leader node will commit the change and confirm it to the client.</p>
<p>This architecture ensures that cluster metadata changes are consistent across the cluster, even in the event of (a minority of) node failures.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Pre-<code>v1.25</code> cluster metadata consensus algorithm</summary><div><div class="collapsibleContent_i85q"><p>Prior to using Raft, a cluster metadata update was done via a <a href="https://en.wikipedia.org/wiki/Distributed_transaction" target="_blank" rel="noopener noreferrer" class="">Distributed Transaction</a> algorithm. This is a set of operations that is done across databases on different nodes in the distributed network. Weaviate used a <a href="https://en.wikipedia.org/wiki/Two-phase_commit_protocol" target="_blank" rel="noopener noreferrer" class="">two-phase commit (2PC)</a> protocol, which replicates the cluster metadata updates in a short period of time (milliseconds).</p><p>A clean (without fails) execution has two phases:</p><ol>
<li class="">The commit-request phase (or voting phase), in which a coordinator node asks each node whether they are able to receive and process the update.</li>
<li class="">The commit phase, in which the coordinator commits the changes to the nodes.</li>
</ol></div></div></details>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="collection-definition-requests-in-queries">Collection definition requests in queries<a href="#collection-definition-requests-in-queries" class="hash-link" aria-label="Direct link to Collection definition requests in queries" title="Direct link to Collection definition requests in queries" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Added in <code>v1.27.10</code>, <code>v1.28.4</code></div></div>
<p>Some queries require the collection definition. Prior to the introduction of this feature, every such query led to the local (requesting) node to fetch the collection definition from the leader node. This meant that the definition was strongly consistent, but it could lead to additional traffic and load.</p>
<p>Where available, the <code>COLLECTION_RETRIEVAL_STRATEGY</code> <a class="" href="/deploy/configuration/env-vars#multi-node-instances">environment variable</a> can be set to <code>LeaderOnly</code>, <code>LocalOnly</code>, or <code>LeaderOnMismatch</code>.</p>
<ul>
<li class=""><code>LeaderOnly</code> (default): Always requests the definition from the leader node. This is the most consistent behavior but can lead to higher intra-cluster traffic.</li>
<li class=""><code>LocalOnly</code>: Always use the local definition; leading to eventually consistent behavior while reducing intra-cluster traffic.</li>
<li class=""><code>LeaderOnMismatch</code>: Checks if the local definition is outdated, and requests the definition if necessary. Balances consistency and intra-cluster traffic.</li>
</ul>
<p>The default behavior is <code>LeaderOnly</code> to achieve strong consistency. However, <code>LocalOnly</code> and <code>LeaderOnMismatch</code> can be used to reduce intra-cluster traffic according to the desired consistency level.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="data-objects">Data objects<a href="#data-objects" class="hash-link" aria-label="Direct link to Data objects" title="Direct link to Data objects" translate="no">​</a></h2>
<p>Weaviate uses two-phase commits for objects, adjusted for the consistency level. For example for a <code>QUORUM</code> write (see below), if there are 5 nodes, 3 requests will be sent out, each of them using a 2-phase commit under the hood.</p>
<p>As a result, data objects in Weaviate are eventually consistent. Eventual consistency provides BASE semantics:</p>
<ul>
<li class=""><strong>Basically available</strong>: reading and writing operations are as available as possible</li>
<li class=""><strong>Soft-state</strong>: there are no consistency guarantees since updates might not yet have converged</li>
<li class=""><strong>Eventually consistent</strong>: if the system functions long enough, after some writes, all nodes will be consistent.</li>
</ul>
<p>Weaviate uses eventual consistency to improve availability. Read and write consistency are tunable, so you can tradeoff between availability and consistency to match your application needs.</p>
<p><em>The animation below is an example of how a write or a read is performed with Weaviate with a replication factor of 3 and 8 nodes. The blue node acts as the coordinator node. The consistency level is set to <code>QUORUM</code>, so the coordinator node only waits for two out of three responses before sending the result back to the client.</em></p>
<p align="center"><img src="/img/docs/replication-architecture/replication-quorum-animation.gif" alt="Write consistency QUORUM" width="75%"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tunable-write-consistency">Tunable write consistency<a href="#tunable-write-consistency" class="hash-link" aria-label="Direct link to Tunable write consistency" title="Direct link to Tunable write consistency" translate="no">​</a></h3>
<p>Adding or changing data objects are <strong>write</strong> operations.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Write operations are tunable starting with Weaviate v1.18, to <code>ONE</code>, <code>QUORUM</code> (default) or <code>ALL</code>. In v1.17, write operations are always set to <code>ALL</code> (highest consistency).</p></div></div>
<p>The main reason for introducing configurable write consistency in v1.18 is because that is also when automatic repairs are introduced. A write will always be written to n (replication factor) nodes, regardless of the chosen consistency level. The coordinator node however waits for acknowledgments from <code>ONE</code>, <code>QUORUM</code> or <code>ALL</code> nodes before it returns. To guarantee that a write is applied everywhere without the availability of repairs on read requests, write consistency is set to <code>ALL</code> for now. Possible settings in v1.18+ are:</p>
<ul>
<li class=""><strong>ONE</strong> - a write must receive an acknowledgment from at least one replica node. This is the fastest (most available), but least consistent option.</li>
<li class=""><strong>QUORUM</strong> - a write must receive an acknowledgment from at least <code>QUORUM</code> replica nodes. <code>QUORUM</code> is calculated as <em>n / 2 + 1</em>, where <em>n</em> is the number of replicas (replication factor). For example, using a replication factor of 6, the quorum is 4, which means the cluster can tolerate 2 replicas down.</li>
<li class=""><strong>ALL</strong> - a write must receive an acknowledgment from all replica nodes. This is the most consistent, but &#x27;slowest&#x27; (least available) option.</li>
</ul>
<p><em>Figure below: a replicated Weaviate setup with write consistency of ONE. There are 8 nodes in total out of which 3 replicas.</em></p>
<p align="center"><img src="/img/docs/replication-architecture/replication-rf3-c-ONE.png" alt="Write consistency ONE" width="60%"></p>
<p><em>Figure below: a replicated Weaviate setup with Write Consistency of <code>QUORUM</code> (n/2+1). There are 8 nodes in total, out of which 3 replicas.</em></p>
<p align="center"><img src="/img/docs/replication-architecture/replication-rf3-c-QUORUM.png" alt="Write consistency QUORUM" width="60%"></p>
<p><em>Figure below: a replicated Weaviate setup with Write Consistency of <code>ALL</code>. There are 8 nodes in total, out of which 3 replicas.</em></p>
<p align="center"><img src="/img/docs/replication-architecture/replication-rf3-c-ALL.png" alt="Write consistency ALL" width="60%"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tunable-read-consistency">Tunable read consistency<a href="#tunable-read-consistency" class="hash-link" aria-label="Direct link to Tunable read consistency" title="Direct link to Tunable read consistency" translate="no">​</a></h3>
<p>Read operations are GET requests to data objects in Weaviate. Like write, read consistency is tunable, to <code>ONE</code>, <code>QUORUM</code> (default) or <code>ALL</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Prior to <code>v1.18</code>, read consistency was tunable only for <a class="" href="/weaviate/manage-objects/read#get-an-object-by-id">requests that obtained an object by id</a>, and all other read requests had a consistency of <code>ALL</code>.</p></div></div>
<p>The following consistency levels are applicable to most read operations:</p>
<ul>
<li class="">Starting with <code>v1.18</code>, consistency levels are applicable to REST endpoint operations.</li>
<li class="">Starting with <code>v1.19</code>, consistency levels are applicable to GraphQL <code>Get</code> requests.</li>
<li class="">All gRPC based read and write operations support tunable consistency levels.</li>
</ul>
<ul>
<li class=""><strong>ONE</strong> - a read response must be returned by at least one replica. This is the fastest (most available), but least consistent option.</li>
<li class=""><strong>QUORUM</strong> - a response must be returned by <code>QUORUM</code> amount of replica nodes. <code>QUORUM</code> is calculated as <em>n / 2 + 1</em>, where <em>n</em> is the number of replicas (replication factor). For example, using a replication factor of 6, the quorum is 4, which means the cluster can tolerate 2 replicas down.</li>
<li class=""><strong>ALL</strong> - a read response must be returned by all replicas. The read operation will fail if at least one replica fails to respond. This is the most consistent, but &#x27;slowest&#x27; (least available) option.</li>
</ul>
<p>Examples:</p>
<ul>
<li class="">
<p><strong>ONE</strong><br>
In a single datacenter with a replication factor of 3 and a read consistency level of ONE, the coordinator node will wait for a response from one replica node.</p>
<p align="center"><img src="/img/docs/replication-architecture/replication-rf3-c-ONE.png" alt="Write consistency ONE" width="60%"></p>
</li>
<li class="">
<p><strong>QUORUM</strong><br>
In a single datacenter with a replication factor of 3 and a read consistency level of <code>QUORUM</code>, the coordinator node will wait for n / 2 + 1 = 3 / 2 + 1 = 2 replicas nodes to return a response.</p>
<p align="center"><img src="/img/docs/replication-architecture/replication-rf3-c-QUORUM.png" alt="Write consistency QUORUM" width="60%"></p>
</li>
<li class="">
<p><strong>ALL</strong><br>
In a single datacenter with a replication factor of 3 and a read consistency level of <code>ALL</code>, the coordinator node will wait for all 3 replicas nodes to return a response.</p>
<p align="center"><img src="/img/docs/replication-architecture/replication-rf3-c-ALL.png" alt="Write consistency ALL" width="60%"></p>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tunable-consistency-strategies">Tunable consistency strategies<a href="#tunable-consistency-strategies" class="hash-link" aria-label="Direct link to Tunable consistency strategies" title="Direct link to Tunable consistency strategies" translate="no">​</a></h3>
<p>Depending on the desired tradeoff between consistency and speed, below are three common consistency level pairings for write / read operations. These are <em>minimum</em> requirements that guarantee eventually consistent data:</p>
<ul>
<li class=""><code>QUORUM</code> / <code>QUORUM</code> =&gt; balanced write and read latency</li>
<li class=""><code>ONE</code> / <code>ALL</code> =&gt; fast write and slow read (optimized for write)</li>
<li class=""><code>ALL</code> / <code>ONE</code> =&gt; slow write and fast read (optimized for read)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tunable-consistency-and-queries">Tunable consistency and queries<a href="#tunable-consistency-and-queries" class="hash-link" aria-label="Direct link to Tunable consistency and queries" title="Direct link to Tunable consistency and queries" translate="no">​</a></h3>
<p>Note that tunable consistency levels for read operations do not affect consistency of the list of objects returned by a query. In other words, the list of object UUIDs returned by a query depends only on the coordinator node&#x27;s (and any other required shards&#x27;) local index, and is independent of the read consistency level.</p>
<p>This is due to the fact that each query is performed by the coordinator node and any other shards required to answer the query. Even if the read consistency level is set to <code>ALL</code>, it does not mean that multiple replicas will be queried and the results merged together.</p>
<p>Where the read consistency level is applied is in retrieving the identified objects from the replicas. For example, if the read consistency level is set to <code>ALL</code>, the coordinator node will wait for all replicas to return the identified objects. And if the read consistency level is set to <code>ONE</code>, the coordinator node may simply return the objects from itself.</p>
<p>In other words, the read consistency level only affects which versions of the objects are retrieved, but it does not lead to a more (or less) consistent query result.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>When might this occur?</div><div class="admonitionContent_BuS1"><p>By default, Weaviate writes to all nodes on an insert/update/delete. So, most of the time this won&#x27;t matter as all shards will have identical local indexes to each other. This is a rare care which may only occur if there is a problem, such as a node being down, or there is a network problem.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tenant-states-and-data-objects">Tenant states and data objects<a href="#tenant-states-and-data-objects" class="hash-link" aria-label="Direct link to Tenant states and data objects" title="Direct link to Tenant states and data objects" translate="no">​</a></h3>
<p>Each tenant in a <a class="" href="/weaviate/concepts/data#multi-tenancy">multi-tenant collection</a> has a configurable <a class="" href="/weaviate/starter-guides/managing-resources/tenant-states">tenant state</a>, which determines the availability and location of the tenant&#x27;s data. The tenant state can be set to <code>active</code>, <code>inactive</code>, or <code>offloaded</code>.</p>
<p>An <code>active</code> tenant&#x27;s data should be available for queries and updates, while <code>inactive</code> or <code>offloaded</code> tenants are not.</p>
<p>However, there can be a delay between the time a tenant state is set, and when the tenant&#x27;s data reflects the (declarative) tenant state.</p>
<p>As a result, a tenant&#x27;s data may be available for queries for a period of time even if the tenant state is set to <code>inactive</code> or <code>offloaded</code>. Conversely, a tenant&#x27;s data may not be available for queries and updates for a period of time even if the tenant state is set to <code>active</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Why is this not addressed by repair-on-read?</div><div class="admonitionContent_BuS1"><p>For speed, data operations on a tenant occur independently of any tenant activity status operations. As a result, tenant states are not updated by repair-on-read operations.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="repairs">Repairs<a href="#repairs" class="hash-link" aria-label="Direct link to Repairs" title="Direct link to Repairs" translate="no">​</a></h2>
<p>In distributed systems like Weaviate, object replicas can become inconsistent due to any number of reasons - network issues, node failures, or timing conflicts. When Weaviate detects inconsistent data across replicas, it attempts to repair the out of sync data.</p>
<p>Weaviate uses <a href="#async-replication" class="">async replication</a>, <a href="#deletion-resolution-strategies" class="">deletion resolution</a> and <a href="#repair-on-read" class="">repair-on-read</a> strategies to maintain consistency across replicas.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="async-replication">Async replication<a href="#async-replication" class="hash-link" aria-label="Direct link to Async replication" title="Direct link to Async replication" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Added in <code>v1.26</code></div></div>
<p>Async replication is a background synchronization process in Weaviate that ensures eventual consistency across nodes storing the same data. When each shard is replicated across multiple nodes, async replication guarantees that all nodes holding copies of the same data remain in sync by periodically comparing and propagating data.</p>
<p>It uses a Merkle tree (hash tree) algorithm to monitor and compare the state of nodes within a cluster. If the algorithm identifies an inconsistency, it resyncs the data on the inconsistent node.</p>
<p>Repair-on-read works well with one or two isolated repairs. Async replication is effective in situations where there are many inconsistencies. For example, if an offline node misses a series of updates, async replication quickly restores consistency when the node returns to service.</p>
<p>Async replication supplements the repair-on-read mechanism. If a node becomes inconsistent between sync checks, the repair-on-read mechanism catches the problem at read time.</p>
<p>To activate async replication, set <code>asyncEnabled</code> to true in the <a class="" href="/weaviate/manage-collections/multi-node-setup#replication-settings"><code>replicationConfig</code> section of your collection definition</a>. Visit the <a class="" href="/deploy/configuration/replication#async-replication-settings">How-to: Replication</a> page to learn more about the available async replication settings.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="memory-and-performance-considerations-for-async-replication">Memory and performance considerations for async replication<a href="#memory-and-performance-considerations-for-async-replication" class="hash-link" aria-label="Direct link to Memory and performance considerations for async replication" title="Direct link to Memory and performance considerations for async replication" translate="no">​</a></h4>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Added in <code>v1.29</code></div></div>
<p>Async replication uses a hash tree to compare and synchronize data between the database cluster nodes, based on objects&#x27; latest update time. The additional memory required for this process is determined by the height of the hash tree (<code>H</code>). A higher hash tree uses more memory but allows faster hashing, reducing the time required to detect and repair inconsistencies.</p>
<p>The trade-offs can be summarized like this:</p>
<ul>
<li class=""><strong>Higher</strong> <code>H</code>: Higher memory usage, faster replication.</li>
<li class=""><strong>Lower</strong> <code>H</code>: Lower memory usage, slower replication.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Memory management for multi-tenancy</div><div class="admonitionContent_BuS1"><p>Each tenant is backed by a shard. Therefore, when there is a high number of tenants, the memory consumption of async replication can be significant. (e.g. 1,000 tenants with a hash tree height of 16 will require an extra ~2 GB of memory per node, while a height of 20 will require ~34 GB per node).</p><br><p>To reduce memory consumption, reduce the hash tree height. Keep in mind that this will result in slower hashing and potentially slower replication.</p></div></div>
<p>Use the following formulas and examples as a quick reference:</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="memory-calculation">Memory calculation<a href="#memory-calculation" class="hash-link" aria-label="Direct link to Memory calculation" title="Direct link to Memory calculation" translate="no">​</a></h5>
<ul>
<li class="">
<p><strong>Total number of nodes in the hash tree:</strong>
For a hash tree with height <code>H</code>, the total number of nodes is:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Number of hash tree nodes = 2^(H+1) - 1 ≈ 2^(H+1)</span><br></span></code></pre></div></div>
</li>
<li class="">
<p><strong>Total memory required (per shard/tenant on each node):</strong>
Each hash tree node uses approximately <strong>16 bytes</strong> of memory.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Memory Required ≈ 2^(H+1) * 16 bytes</span><br></span></code></pre></div></div>
</li>
</ul>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples" translate="no">​</a></h5>
<ul>
<li class="">
<p>Hash tree with height <code>16</code>:</p>
<ul>
<li class=""><code>Total hash tree nodes ≈ 2^(16+1) = 131,072</code></li>
<li class=""><code>Memory required ≈ 131072 * 16 bytes ≈ 2,097,152 bytes (~2 MB)</code></li>
</ul>
</li>
<li class="">
<p>Hash tree with height <code>20</code>:</p>
<ul>
<li class=""><code>Total hash tree nodes ≈ 2^(20+1) = 2,097,152</code></li>
<li class=""><code>Memory required ≈ 2,097,152 * 16 bytes ≈ 33,554,432 bytes (~33 MB)</code></li>
</ul>
</li>
</ul>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-consideration-number-of-leaves">Performance Consideration: Number of Leaves<a href="#performance-consideration-number-of-leaves" class="hash-link" aria-label="Direct link to Performance Consideration: Number of Leaves" title="Direct link to Performance Consideration: Number of Leaves" translate="no">​</a></h5>
<p>The objects in a shard (e.g. tenant) are distributed among the leaves of the hash tree.
A larger hash tree means less data for each leaf to hash, leading to faster comparisons and faster replication.</p>
<ul>
<li class=""><strong>Number of Leaves in the hash tree:</strong>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Number of leaves = 2^H</span><br></span></code></pre></div></div>
</li>
</ul>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="examples-1">Examples<a href="#examples-1" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples" translate="no">​</a></h5>
<ul>
<li class="">
<p>Hash tree with height <code>16</code>:</p>
<ul>
<li class=""><code>Number of Leaves = 2^16 = 65,536</code></li>
</ul>
</li>
<li class="">
<p>Hash tree with height <code>20</code>:</p>
<ul>
<li class=""><code>Number of Leaves = 2^20 = 1,048,576</code></li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Default settings</div><div class="admonitionContent_BuS1"><p>The default hash tree height of <code>16</code> is chosen to balance memory consumption with replication performance. Adjust this value based on your cluster node’s available resources and performance requirements.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="deletion-resolution-strategies">Deletion resolution strategies<a href="#deletion-resolution-strategies" class="hash-link" aria-label="Direct link to Deletion resolution strategies" title="Direct link to Deletion resolution strategies" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Added in <code>v1.28</code></div></div>
<p>When an object is present on some replicas but not others, this can be because a creation has not yet been propagated to all replicas, or because a deletion has not yet been propagated to all replicas. It is important to distinguish between these two cases.</p>
<p>Deletion resolution works alongside async replication and repair-on-read to ensure consistent handling of deleted objects across the cluster. For each collection, <a class="" href="/weaviate/manage-collections/multi-node-setup#replication-settings">you can set one of the following</a> deletion resolution strategies:</p>
<ul>
<li class=""><code>NoAutomatedResolution</code></li>
<li class=""><code>DeleteOnConflict</code></li>
<li class=""><code>TimeBasedResolution</code></li>
</ul>
<p>Deletion resolution strategies are mutable. <a class="" href="/weaviate/manage-collections/collection-operations#update-a-collection-definition">Read more about how to update collection definitions</a>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="noautomatedresolution"><code>NoAutomatedResolution</code><a href="#noautomatedresolution" class="hash-link" aria-label="Direct link to noautomatedresolution" title="Direct link to noautomatedresolution" translate="no">​</a></h4>
<p>This is the default setting, and the only setting available in Weaviate versions prior to <code>v1.28</code>. In this mode, Weaviate does not treat deletion conflicts as a special case. If an object is present on some replicas but not others, Weaviate may potentially restore the object on the replicas where it is missing.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="deleteonconflict"><code>DeleteOnConflict</code><a href="#deleteonconflict" class="hash-link" aria-label="Direct link to deleteonconflict" title="Direct link to deleteonconflict" translate="no">​</a></h4>
<p>A deletion conflict in <code>deleteOnConflict</code> is always resolved by deleting the object on all replicas.</p>
<p>To do so, Weaviate updates an object as a deleted object on a replica upon receiving a deletion request, rather than removing all traces of the object.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="timebasedresolution"><code>TimeBasedResolution</code><a href="#timebasedresolution" class="hash-link" aria-label="Direct link to timebasedresolution" title="Direct link to timebasedresolution" translate="no">​</a></h4>
<p>A deletion conflict in <code>timeBasedResolution</code> is resolved based on the timestamp of the deletion request, in comparison to any subsequent updates to the object such as a creation or an update.</p>
<p>If the deletion request has a timestamp that is later than the timestamp of any subsequent updates, the object is deleted on all replicas. If the deletion request has a timestamp that is earlier than the timestamp of any subsequent updates, the later updates are applied to all replicas.</p>
<p>For example:</p>
<ul>
<li class="">If an object is deleted at timestamp 100 and then recreated at timestamp 90, the recreation wins</li>
<li class="">If an object is deleted at timestamp 100 and then recreated at timestamp 110, the deletion wins</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="choosing-a-strategy">Choosing a strategy<a href="#choosing-a-strategy" class="hash-link" aria-label="Direct link to Choosing a strategy" title="Direct link to Choosing a strategy" translate="no">​</a></h4>
<ul>
<li class="">Use <code>NoAutomatedResolution</code> when you want maximum control and handle conflicts manually</li>
<li class="">Use <code>DeleteOnConflict</code> when you want to ensure deletions are always honored</li>
<li class="">Use <code>TimeBasedResolution</code> when you want the most recent operation to take precedence</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="repair-on-read">Repair-on-read<a href="#repair-on-read" class="hash-link" aria-label="Direct link to Repair-on-read" title="Direct link to Repair-on-read" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Added in <code>v1.18</code></div></div>
<p>If your read consistency is set to <code>All</code> or <code>Quorum</code>, the read coordinator will receive responses from multiple replicas. If these responses differ, the coordinator can attempt to repair the inconsistency, as shown in the examples below. This process is called &quot;repair-on-read&quot;, or &quot;read repairs&quot;.</p>
<table><thead><tr><th style="text-align:left">Problem</th><th style="text-align:left">Action</th></tr></thead><tbody><tr><td style="text-align:left">Object never existed on some replicas.</td><td style="text-align:left">Propagate the object to the missing replicas.</td></tr><tr><td style="text-align:left">Object is out of date.</td><td style="text-align:left">Update the object on stale replicas.</td></tr><tr><td style="text-align:left">Object was deleted on some replicas.</td><td style="text-align:left">Returns an error. Deletion may have failed, or the object may have been partially recreated.</td></tr></tbody></table>
<p>The read repair process also depends on the read and write consistency levels used.</p>
<p>| Write consistency level | Read consistency level | Action |
| :- | :- |
| <code>ONE</code> | <code>ALL</code> | Weaviate has to verify all nodes to guarantee repair. |
| <code>QUORUM</code> | <code>QUORUM</code> or <code>ALL</code> | Weaviate attempts to fix the sync issues. |
| <code>ALL</code> | - | This situation should not occur. The write should have failed. |</p>
<p>Repairs only happen on read, so they do not create a lot of background overhead. While nodes are in an inconsistent state, read operations with consistency level of <code>ONE</code> may return stale data.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="replica-movement">Replica movement<a href="#replica-movement" class="hash-link" aria-label="Direct link to Replica movement" title="Direct link to Replica movement" translate="no">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Added in <code>v1.32</code></div></div>
<p>A shard represents a part of the collection in a single-tenant collection, or a whole tenant in a multi-tenant collection. Weaviate allows users to manually move or copy individual shard replicas from a source node to a destination node in a Weaviate cluster. This capability addresses operational scenarios such as cluster rebalancing after scaling, node decommissioning, optimizing data locality for improved performance, or increasing data availability.</p>
<p>Replica movement operates as a state machine with stages that ensure data integrity throughout the process. The feature works for both single-tenant collections and multi-tenant collections.</p>
<p>Unlike the static replication factor configured at collection creation, replica movement allows the replication factor to be adjusted for specific shards as replicas are moved or copied across the cluster. When a copy operation is performed, the newly created replica increases the replication factor for that specific shard. While a collection may have a default replication factor, individual shards within that collection can have a higher replication factor. However, shards can&#x27;t have a replication factor lower then the one set on the collection level.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The <a class="" href="/deploy/configuration/env-vars#REPLICATION_ENGINE_MAX_WORKERS"><code>REPLICATION_ENGINE_MAX_WORKERS</code> environment variable</a> can be used to adjust the number of workers that process replica movements in parallel.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="movement-states">Movement states<a href="#movement-states" class="hash-link" aria-label="Direct link to Movement states" title="Direct link to Movement states" translate="no">​</a></h3>
<p>Each replica movement operation progresses through a workflow designed to maintain data consistency and availability. The workflow comprises of the following states:</p>
<ul>
<li class="">
<p><strong>REGISTERED</strong>: The movement operation has been initiated and logged by the Raft leader. The request has been received and the operation is queued for processing.</p>
</li>
<li class="">
<p><strong>HYDRATING</strong>: A new replica is being created on the destination node. Data segments are transferred from an existing replica (usually the source replica, or another available peer) to establish the new replica.</p>
</li>
<li class="">
<p><strong>FINALIZING</strong>: The bulk data transfer is complete, and the new replica is catching up on any writes that occurred during the transfer. This ensures the replica is fully synchronized with the latest data. You can use the <a class="" href="/deploy/configuration/env-vars#REPLICA_MOVEMENT_MINIMUM_ASYNC_WAIT"><code>REPLICA_MOVEMENT_MINIMUM_ASYNC_WAIT</code> environment variable</a> to adjust the wait time which ensures that any in progress writes have been completed and replicated to the target node.</p>
</li>
<li class="">
<p><strong>DEHYDRATING</strong>: For move operations, after the new replica is ready, the original replica on the source node is being removed.</p>
</li>
<li class="">
<p><strong>READY</strong>: The operation has completed successfully. The new replica is fully synchronized and ready to serve traffic. For move operations, the source replica has been removed.</p>
</li>
<li class="">
<p><strong>CANCELLED</strong>: The operation has been cancelled before completion. This can happen either through manual intervention or if the operation encounters an unrecoverable error.</p>
</li>
</ul>
<p>Replica movement supports two distinct operation modes:</p>
<ul>
<li class=""><strong>Move</strong>: Move a replica from one node to another, maintaining the same replication factor</li>
<li class=""><strong>Copy</strong>: Copy a replica from one node to another and increase the shard replication factor by one for that specific shard</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Replication factor and quorum</div><div class="admonitionContent_BuS1"><p>When a shard replica is copied, the increased replication factor may become an even number. This can make achieving a quorum more difficult, as it now requires <code>(n/2 + 1)</code> nodes instead of <code>(n/2 + 0.5)</code> nodes. For example, going from <code>RF=3</code> to <code>RF=4</code> increases the required nodes for quorum from 2 to 3 (67% to 75% of replicas).</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="related-pages">Related pages<a href="#related-pages" class="hash-link" aria-label="Direct link to Related pages" title="Direct link to Related pages" translate="no">​</a></h2>
<ul>
<li class=""><a class="" href="/weaviate/api/graphql/get#consistency-levels">API References | GraphQL | Get | Consistency Levels</a></li>
<li class="">
<a href="/weaviate/api/rest#tag/objects">API References | REST | Objects</a>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="questions-and-feedback">Questions and feedback<a href="#questions-and-feedback" class="hash-link" aria-label="Direct link to Questions and feedback" title="Direct link to Questions and feedback" translate="no">​</a></h2>
<!-- -->
<p>If you have any questions or feedback, let us know in the <a href="https://forum.weaviate.io/" target="_blank" rel="noopener noreferrer" class="">user forum</a>.</p>
<!-- -->
<!-- -->
<div class="cardsSection_Ezca smallCards_eRph"><a href="https://forum.weaviate.io/new-topic?title=%5BQuestion%5D%20YOUR%20TOPIC&amp;body=Details%20here&amp;category=support&amp;tags=technical" target="_blank" rel="noopener noreferrer" class="card_OoQD"><div class="cardHeader_rXdg"><i class="fas fa-comments cardIcon_K4xK"></i><span class="cardTitle_TsZq">Technical questions</span></div><p class="cardDescription__QXy">If you have questions feel free to post on our<!-- --> <span class="highlight_acB9">Community forum</span>.</p></a><a href="https://github.com/weaviate/docs/issues" target="_blank" rel="noopener noreferrer" class="card_OoQD"><div class="cardHeader_rXdg"><i class="fa-brands fa-github cardIcon_K4xK"></i><span class="cardTitle_TsZq">Documentation feedback</span></div><p class="cardDescription__QXy">Leave feedback by opening a GitHub issue.</p></a></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/weaviate/docs/tree/main/docs/weaviate/concepts/replication-architecture/consistency.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div><footer class="footer_G0fi"><div class="container"><div class="footerContent_oI6g"><div class="leftSection_TIm0"><div class="socialIcons_Okfn"><a href="https://github.com/weaviate/weaviate" target="_blank" rel="noopener noreferrer" title="GitHub"><i class="fab fa-github" aria-hidden="true"></i></a><a href="https://weaviate.io/slack" target="_blank" rel="noopener noreferrer" title="Slack"><i class="fab fa-slack" aria-hidden="true"></i></a><a href="https://x.com/weaviate_io" target="_blank" rel="noopener noreferrer" title="X"><i class="fab fa-twitter" aria-hidden="true"></i></a><a href="https://instagram.com/weaviate.io" target="_blank" rel="noopener noreferrer" title="Instagram"><i class="fab fa-instagram" aria-hidden="true"></i></a><a href="https://youtube.com/@Weaviate" target="_blank" rel="noopener noreferrer" title="YouTube"><i class="fab fa-youtube" aria-hidden="true"></i></a><a href="https://www.linkedin.com/company/weaviate-io" target="_blank" rel="noopener noreferrer" title="LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i></a></div></div><div class="rightSection_LCNx"><div class="footerSection_l31a"><h5>Documentation</h5><ul><li><a href="/weaviate">Weaviate Database</a></li><li><a href="/deploy">Deployment documentation</a></li><li><a href="/cloud">Weaviate Cloud</a></li><li><a href="/agents">Weaviate Agents</a></li></ul></div><div class="footerSection_l31a"><h5>Support</h5><ul><li><a href="https://forum.weaviate.io/c/support/" target="_blank" rel="noopener noreferrer">Forum</a></li><li><a href="https://weaviate.io/slack" target="_blank" rel="noopener noreferrer">Slack</a></li></ul></div></div></div></div></footer></footer></article></div></div><div class="col col--3"><div class="customTocStickyContainer_xbxO"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#consistency-models-in-weaviate" class="table-of-contents__link toc-highlight">Consistency models in Weaviate</a></li><li><a href="#cluster-metadata" class="table-of-contents__link toc-highlight">Cluster metadata</a><ul><li><a href="#collection-definition-requests-in-queries" class="table-of-contents__link toc-highlight">Collection definition requests in queries</a></li></ul></li><li><a href="#data-objects" class="table-of-contents__link toc-highlight">Data objects</a><ul><li><a href="#tunable-write-consistency" class="table-of-contents__link toc-highlight">Tunable write consistency</a></li><li><a href="#tunable-read-consistency" class="table-of-contents__link toc-highlight">Tunable read consistency</a></li><li><a href="#tunable-consistency-strategies" class="table-of-contents__link toc-highlight">Tunable consistency strategies</a></li><li><a href="#tunable-consistency-and-queries" class="table-of-contents__link toc-highlight">Tunable consistency and queries</a></li><li><a href="#tenant-states-and-data-objects" class="table-of-contents__link toc-highlight">Tenant states and data objects</a></li></ul></li><li><a href="#repairs" class="table-of-contents__link toc-highlight">Repairs</a><ul><li><a href="#async-replication" class="table-of-contents__link toc-highlight">Async replication</a></li><li><a href="#deletion-resolution-strategies" class="table-of-contents__link toc-highlight">Deletion resolution strategies</a></li><li><a href="#repair-on-read" class="table-of-contents__link toc-highlight">Repair-on-read</a></li></ul></li><li><a href="#replica-movement" class="table-of-contents__link toc-highlight">Replica movement</a><ul><li><a href="#movement-states" class="table-of-contents__link toc-highlight">Movement states</a></li></ul></li><li><a href="#related-pages" class="table-of-contents__link toc-highlight">Related pages</a></li><li><a href="#questions-and-feedback" class="table-of-contents__link toc-highlight">Questions and feedback</a></li></ul></div><div class="container_jpeN"><p class="text_tGp7">Was this page helpful?</p><div class="buttonContainer_rFWk"><button class="voteButton_HXmX undefined" aria-label="Vote up"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path></svg>Yes</button><button class="voteButton_HXmX undefined" aria-label="Vote down"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 14V2"></path><path d="M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z"></path></svg>No</button></div></div></div><div class="feedbackWrapper_JTi0"></div></div></div></div></main></div></div></div></div>
</body>
</html>