# Source: https://docs.weaviate.io/weaviate/concepts/replication-architecture/cluster-architecture

<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-weaviate/concepts/replication-architecture/cluster-architecture" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Cluster Architecture | Weaviate Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.weaviate.io/weaviate/concepts/replication-architecture/cluster-architecture"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Cluster Architecture | Weaviate Documentation"><meta data-rh="true" name="description" content="Node behavior and cluster coordination mechanisms in Weaviate&#x27;s distributed replication system."><meta data-rh="true" property="og:description" content="Node behavior and cluster coordination mechanisms in Weaviate&#x27;s distributed replication system."><meta data-rh="true" property="og:image" content="https://docs.weaviate.io/og/docs/concepts.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.weaviate.io/og/docs/concepts.jpg"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.weaviate.io/weaviate/concepts/replication-architecture/cluster-architecture"><link data-rh="true" rel="alternate" href="https://docs.weaviate.io/weaviate/concepts/replication-architecture/cluster-architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.weaviate.io/weaviate/concepts/replication-architecture/cluster-architecture" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Replication Architecture","item":"https://docs.weaviate.io/weaviate/concepts/replication-architecture/"},{"@type":"ListItem","position":2,"name":"Cluster Architecture","item":"https://docs.weaviate.io/weaviate/concepts/replication-architecture/cluster-architecture"}]}</script><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-WS8CG676",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>

<script>!function(){if("undefined"!=typeof window&&void 0===window.signals){var n=document.createElement("script");n.src="https://cdn.cr-relay.com/v1/site/3709e2b3-c0eb-4239-9087-775e484fab16/signals.js",n.async=!0,window.signals=Object.assign([],["page","identify","form"].reduce((function(n,e){return n[e]=function(){return signals.push([e,arguments]),signals},n}),{})),document.head.appendChild(n)}}()</script>
<script id="hs-script-loader" async="true" defer="true" src="https://js.hs-scripts.com/8738733.js"></script>
<link rel="stylesheet" href="/fonts/font-awesome/fontawesome.css">
<link rel="stylesheet" href="/fonts/font-awesome/solid.css">
<link rel="stylesheet" href="/fonts/font-awesome/regular.css">
<link rel="stylesheet" href="/fonts/font-awesome/brands.css"><link rel="stylesheet" href="/assets/css/styles.f4cdad07.css">
<script src="/assets/js/runtime~main.444b5859.js" defer="defer"></script>
<script src="/assets/js/main.6a4a6ee2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script>


<script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WS8CG676" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><link rel="preload" as="image" href="/img/site/weaviate-logo-horizontal-light-1.svg"><link rel="preload" as="image" href="/img/site/weaviate-logo-horizontal-dark-1.svg"><link rel="preload" as="image" href="/img/site/weaviate-logo-w.png"><link rel="preload" as="image" href="/img/docs/replication-architecture/replication-main-quorum.png"><link rel="preload" as="image" href="/img/docs/replication-architecture/replication-factor.png"><link rel="preload" as="image" href="/img/docs/replication-architecture/replication-rf3-size3.png"><link rel="preload" as="image" href="/img/docs/replication-architecture/replication-rf3-size8.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#1C1468;color:#F5F5F5" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><a href="https://academy.weaviate.io/">The new <b>Weaviate Academy</b> learning platform is here!</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="defaultNavbar_mOWn"><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://weaviate.io" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/site/weaviate-logo-horizontal-light-1.svg" alt="Weaviate" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/site/weaviate-logo-horizontal-dark-1.svg" alt="Weaviate" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/weaviate/api/rest"></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/weaviate/weaviate" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><svg class="githubStars" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a href="https://academy.weaviate.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link academy-button">Academy</a><a href="https://weaviate.io/go/console?utm_source=docs&amp;utm_content=navbar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cloud-button">Weaviate Cloud</a><div class="hiddenSearch navbarSearchContainer_Bca1"><div class="searchBox"><button class="searchButton"><span class="searchPlaceholder"><i class="searchIcon fas fa-magnifying-glass"></i><span class="searchPlaceholderText">Ask AI or Search</span></span><div class="commandIconContainer"><span class="commandIcon">⌘K</span></div></button></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav></div><div class="secondaryNavbar_Zq6r"><nav class="secondaryNavLinks_WJZI"><a class="navLink_kzb_" href="/weaviate">Get started</a><a class="navLink_kzb_" href="/weaviate/guides">How-to manuals &amp; Guides</a><a class="navLink_kzb_" href="/weaviate/model-providers">Model integrations</a><a class="navLink_kzb_" href="/weaviate/config-refs">Reference &amp; APIs</a><a class="navLink_kzb_ activeNavLink_ObEy" href="/weaviate/concepts">Concepts</a><a class="navLink_kzb_" href="/weaviate/recipes">Recipes</a><a class="navLink_kzb_" href="/weaviate/release-notes">Other</a></nav></div><div class="modalOverlay_BeVA"><div class="modalContent_CPV2"><div class="modalHeader_aBIn"><div class="modalHeaderLeft_Jnp2"><strong>Go to documentation:</strong></div><div class="modalHeaderRight_pW31"><div class="modalHeaderButton_lyv9"><span class="buttonShortcut_rHzY">⌘U</span><div class="verticalDivider_TWYg"></div><button class="headerCloseIcon_Nc0n">✕</button></div></div></div><div class="modalBody_bZ4G"><div class="modalOptionsContainer_GF7c"><div class="modalOption_Zqj6 activeOption_IUKI"><i class="fa fa-database modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Weaviate Database</strong><p>Develop AI applications using Weaviate&#x27;s APIs and tools</p></div><div class="activeIndicator_uCqh"></div></div><div class="modalOption_Zqj6"><i class="fa fa-database modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Deploy</strong><p>Deploy, configure, and maintain Weaviate Database</p></div></div><div class="modalOption_Zqj6"><i class="fa fa-robot modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Weaviate Agents</strong><p>Build and deploy intelligent agents with Weaviate</p></div></div><div class="modalOption_Zqj6"><i class="fa fa-cloud modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Weaviate Cloud</strong><p>Manage and scale Weaviate in the cloud</p></div></div></div><div class="resourcesSection__QVP"><h4 class="sectionTitle_TjaJ">Additional resources</h4><div class="resourcesGrid_Fe8L"><div class="resourceCard_qG9v"><i class="fa fa-puzzle-piece resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Integrations</span></div><div class="resourceCard_qG9v"><i class="fa fa-edit resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Contributor guide</span></div><div class="resourceCard_qG9v"><i class="fa fa-calendar-days resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Events &amp; Workshops</span></div><div class="resourceCard_qG9v"><i class="fa-solid fa-graduation-cap resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Weaviate Academy</span></div></div></div><div class="aiAssistantSection_Qefr"><h4 class="sectionTitle_TjaJ">Need help?</h4><div class="resourcesGrid_Fe8L"><div class="askAiButton_snh2"><img src="/img/site/weaviate-logo-w.png" alt="Weaviate Logo" class="askAiIcon_T_rP"><span class="askAiText_snFq">Ask AI Assistant</span><span class="askAiShortcut_kkRQ">⌘K</span></div><div class="resourceCard_qG9v"><i class="fa fa-comments styles.resourceIcon" aria-hidden="true"></i><span class="resourceTitle__PWa">Community Forum</span></div></div></div></div></div></div><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts"><span title="Concepts" class="linkLabel_WmDU">Concepts</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/weaviate/concepts/indexing"><span title="Indexing" class="categoryLinkLabel_W154">Indexing</span></a><button aria-label="Expand sidebar category &#x27;Indexing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/weaviate/concepts/search"><span title="Search" class="categoryLinkLabel_W154">Search</span></a><button aria-label="Expand sidebar category &#x27;Search&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/data"><span title="Data structure" class="linkLabel_WmDU">Data structure</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/data-import"><span title="Data import" class="linkLabel_WmDU">Data import</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/modules"><span title="Modules" class="linkLabel_WmDU">Modules</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/storage"><span title="Storage" class="linkLabel_WmDU">Storage</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/vector-quantization"><span title="Compression (Vector Quantization)" class="linkLabel_WmDU">Compression (Vector Quantization)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/filtering"><span title="Filtering" class="linkLabel_WmDU">Filtering</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/reranking"><span title="Reranking" class="linkLabel_WmDU">Reranking</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/cluster"><span title="Horizontal Scaling" class="linkLabel_WmDU">Horizontal Scaling</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/weaviate/concepts/replication-architecture"><span title="Replication Architecture" class="categoryLinkLabel_W154">Replication Architecture</span></a><button aria-label="Collapse sidebar category &#x27;Replication Architecture&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/weaviate/concepts/replication-architecture/motivation"><span title="Use Cases (Motivation)" class="linkLabel_WmDU">Use Cases (Motivation)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/weaviate/concepts/replication-architecture/philosophy"><span title="Philosophy" class="linkLabel_WmDU">Philosophy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/weaviate/concepts/replication-architecture/cluster-architecture"><span title="Cluster Architecture" class="linkLabel_WmDU">Cluster Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/weaviate/concepts/replication-architecture/consistency"><span title="Consistency" class="linkLabel_WmDU">Consistency</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/weaviate/concepts/replication-architecture/multi-dc"><span title="Multi-Data center" class="linkLabel_WmDU">Multi-Data center</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/interface"><span title="Interface" class="linkLabel_WmDU">Interface</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/concepts/resources"><span title="Resource Planning" class="linkLabel_WmDU">Resource Planning</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/weaviate/concepts/replication-architecture"><span>Replication Architecture</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Cluster Architecture</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cluster Architecture</h1></header><p>This page describes how the nodes or clusters in Weaviate&#x27;s replication design behave.</p>
<p>In Weaviate, metadata replication and data replication are separate. For the metadata, Weaviate uses the <a href="https://raft.github.io/" target="_blank" rel="noopener noreferrer" class="">Raft</a> consensus algorithm. For data replication, Weaviate uses a leaderless design with eventual consistency.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="node-discovery">Node Discovery<a href="#node-discovery" class="hash-link" aria-label="Direct link to Node Discovery" title="Direct link to Node Discovery" translate="no">​</a></h2>
<p>By default, Weaviate nodes in a cluster use a gossip-like protocol through <a href="https://github.com/hashicorp/memberlist" target="_blank" rel="noopener noreferrer" class="">Hashicorp&#x27;s Memberlist</a> to communicate node state and failure scenarios.</p>
<p>Weaviate is optimized to run on Kubernetes, especially when operating as a cluster. The <a class="" href="/deploy/installation-guides/k8s-installation#weaviate-helm-chart">Weaviate Helm chart</a> makes use of a <code>StatefulSet</code> and a headless <code>Service</code> that automatically configures node discovery.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>FQDN for node discovery</summary><div><div class="collapsibleContent_i85q"><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Added in <code>v1.25.15</code> and removed in <code>v1.30</code></div><div class="admonitionContent_BuS1"><p>This was an experimental feature. Use with caution.</p></div></div><p>There can be a situation where IP-address based node discovery is not optimal. In such cases, you can set <code>RAFT_ENABLE_FQDN_RESOLVER</code> and <code>RAFT_FQDN_RESOLVER_TLD</code> <a class="" href="/deploy/configuration/env-vars#multi-node-instances">environment variables</a> to enable <a href="https://en.wikipedia.org/wiki/Fully_qualified_domain_name" target="_blank" rel="noopener noreferrer" class="">fully qualified domain name (FQDN)</a> based node discovery.</p><p>If this feature is enabled, Weaviate uses the FQDN resolver to resolve the node name to the node IP address for metadata (e.g., Raft) communication.</p><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>FQDN: For metadata changes only</div><div class="admonitionContent_BuS1"><p>This feature is only used for metadata changes which use Raft as the consensus mechanism. It does not affect data read/write operations.</p></div></div><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="examples-of-when-to-use-fqdn-for-node-discovery">Examples of when to use FQDN for node discovery<a href="#examples-of-when-to-use-fqdn-for-node-discovery" class="hash-link" aria-label="Direct link to Examples of when to use FQDN for node discovery" title="Direct link to Examples of when to use FQDN for node discovery" translate="no">​</a></h4><p>The use of FQDN can resolve a situation where if IP addresses are re-used across different clusters, the nodes in one cluster could mistakenly discover nodes in another cluster.</p><p>It can also be useful when using services (for example, Kubernetes) where the IP of the services is different from the actual node IP, but it proxies the connection to the node.</p><h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="environment-variables-for-fqdn-node-discovery">Environment variables for FQDN node discovery<a href="#environment-variables-for-fqdn-node-discovery" class="hash-link" aria-label="Direct link to Environment variables for FQDN node discovery" title="Direct link to Environment variables for FQDN node discovery" translate="no">​</a></h4><p><code>RAFT_ENABLE_FQDN_RESOLVER</code> is a Boolean flag. This flag enables the FQDN resolver. If set to <code>true</code>, Weaviate uses the FQDN resolver to resolve the node name to the node IP address. If set to <code>false</code>, Weaviate uses the memberlist lookup to resolve the node name to the node IP address. The default value is <code>false</code>.</p><p><code>RAFT_FQDN_RESOLVER_TLD</code> is a string that is appended in the format <code>[node-id].[tld]</code> when resolving a node-id to an IP address, where <code>[tld]</code> is the top-level domain.</p><p>To use this feature, set <code>RAFT_ENABLE_FQDN_RESOLVER</code> to <code>true</code>.</p></div></div></details>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="metadata-replication-raft">Metadata replication: Raft<a href="#metadata-replication-raft" class="hash-link" aria-label="Direct link to Metadata replication: Raft" title="Direct link to Metadata replication: Raft" translate="no">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Added in <code>v1.25</code></div></div>
<p>Weaviate uses the <a href="https://raft.github.io/" target="_blank" rel="noopener noreferrer" class="">Raft consensus algorithm</a> for metadata replication, implemented with Hashicorp&#x27;s <a href="https://pkg.go.dev/github.com/hashicorp/raft" target="_blank" rel="noopener noreferrer" class="">raft library</a>. Metadata in this context includes collection definition and shard/tenant states.</p>
<p>Raft ensures that metadata changes are consistent across the cluster. A metadata change is forwarded to the leader node, which applies the change to its log before replicating it to the follower nodes. Once a majority of nodes have acknowledged the change, the leader commits the change to the log. The leader then notifies the followers, which apply the change to their logs.</p>
<p>This architecture ensures that metadata changes are consistent across the cluster, even in the event of (a minority of) node failures.</p>
<p>As a result, a Weaviate cluster will include a leader node that is responsible for metadata changes. The leader node is elected by the Raft algorithm and is responsible for coordinating metadata changes.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="data-replication-leaderless">Data replication: Leaderless<a href="#data-replication-leaderless" class="hash-link" aria-label="Direct link to Data replication: Leaderless" title="Direct link to Data replication: Leaderless" translate="no">​</a></h2>
<p>Weaviate uses a leaderless architecture for data replication. This means there is no central leader or primary node that will replicate to follower nodes. Instead, all nodes can accept writes and reads from the client, which can offer better availability. There is no single point of failure. A leaderless replication approach, also known as <a href="https://www.allthingsdistributed.com/files/amazon-dynamo-sosp2007.pdf" target="_blank" rel="noopener noreferrer" class="">Dynamo-style</a> data replication (after Amazon&#x27;s implementation), has been adopted by other open-source projects like <a href="https://cassandra.apache.org" target="_blank" rel="noopener noreferrer" class="">Apache Cassandra</a>.</p>
<p>In Weaviate, a coordination pattern is used to relay a client&#x27;s read and write requests to the correct nodes. Unlike in a leader-based database, a coordinator node does not enforce any ordering of the operations.</p>
<p>The following illustration shows a leaderless replication design in Weaviate. There is one coordination node, which leads traffic from the client to the correct replicas. There is nothing special about this node; it was chosen to be the coordinator because this node received the request from the load balancer. A future request for the same data may be coordinated by a different node.</p>
<p align="center"><img src="/img/docs/replication-architecture/replication-main-quorum.png" alt="Replication Architecture" width="75%"></p>
<p>The main advantage of a leaderless replication design is improved fault tolerance. Without a leader that handles all requests, a leaderless design offers better availability. In a single-leader design, all writes need to be processed by this leader. If this node cannot be reached or goes down, no writes can be processed. With a leaderless design, all nodes can receive write operations, so there is no risk of one master node failing.</p>
<p>On the flipside of high availability, a leaderless database tends to be less consistent. Because there is no leader node, data on different nodes may temporarily be out of date. Leaderless databases tend to be eventually consistent. Consistency in Weaviate is <a class="" href="/weaviate/concepts/replication-architecture/consistency">tunable</a>, but this occurs at the expense of availability.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="replication-factor">Replication Factor<a href="#replication-factor" class="hash-link" aria-label="Direct link to Replication Factor" title="Direct link to Replication Factor" translate="no">​</a></h2>
<!-- -->
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Replication factor change</div><div class="admonitionContent_BuS1"><p>The replication factor of a collection cannot be updated by updating the collection&#x27;s definition.</p><p>From <code>v1.32</code> by using <a class="" href="/deploy/configuration/replica-movement">replica movement</a>, the <a class="" href="/weaviate/config-refs/collections#replication">replication factor</a> of a shard can be changed.</p></div></div>
<p>In Weaviate, data replication is enabled and controlled per collection. This means you can have different replication factors for different collections.</p>
<p>The replication factor (RF or n) determines how many copies of data are stored in the distributed setup. A replication factor of 1 means that there is only 1 copy of each data entry in the database setup, in other words there is no replication. A replication factor of 2 means that there are two copies of each data entry, which are present on two different nodes (replicas). Naturally, the replication factor cannot be higher than the number of nodes. Any node in the cluster can act as a coordinating node to lead queries to the correct target node(s).</p>
<p>A replication factor of 3 is commonly used, since this provides a right balance between performance and fault tolerance. An odd number of nodes is generally preferred, as it makes it easier to resolve conflicts. In a 3-node setup, a quorum can be reached with 2 nodes. Therefore the fault tolerance is 1 node. In a 2-node setup, on the other hand, no node failures can be tolerated while still reaching consensus across nodes. In a 4-node setup, respectively, 3 nodes would be required to reach a consensus. Thus, a 3-node setup has a better fault-tolerance to cost ratio than either a 2-node or 4-node setup.</p>
<p align="center"><img src="/img/docs/replication-architecture/replication-factor.png" alt="Replication Factor" width="75%"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="write-operations">Write operations<a href="#write-operations" class="hash-link" aria-label="Direct link to Write operations" title="Direct link to Write operations" translate="no">​</a></h2>
<p>On a write operation, the client&#x27;s request will be sent to any node in the cluster. The first node which receives the request is assigned as the coordinator. The coordinator node sends the request to a number of predefined replicas and returns the result to the client. So, any node in the cluster can be a coordinator node. A client will only have direct contact with this coordinator node. Before sending the result back to the client, the coordinator node waits for a number of write acknowledgments from different nodes depending on the configuration. How many acknowledgments Weaviate waits for, depends on the <a class="" href="/weaviate/concepts/replication-architecture/consistency">consistency configuration</a>.</p>
<p><strong>Steps</strong></p>
<ol>
<li class="">The client sends data to any node, which will be assigned as the coordinator node</li>
<li class="">The coordinator node sends the data to more than one replica node in the cluster</li>
<li class="">The coordinator node waits for acknowledgment from a specified proportion (let&#x27;s call it <code>x</code>) of cluster nodes. Starting with v1.18, <code>x</code> is <a class="" href="/weaviate/concepts/replication-architecture/consistency">configurable</a>, and defaults to <code>ALL</code> nodes.</li>
<li class="">When <code>x</code> ACKs are received by the coordinator node, the write is successful.</li>
</ol>
<p>As an example, consider a cluster size of 3 with replication factor of 3. So, all nodes in the distributed setup contain a copy of the data. When the client sends new data, this will be replicated to all three nodes.</p>
<p align="center"><img src="/img/docs/replication-architecture/replication-rf3-size3.png" alt="Replication Factor 3 with cluster size 3" width="75%"></p>
<p>With a cluster size of 8 and a replication factor of 3, a write operation will not be sent to all 8 nodes, but only to those three containing the replicas. The coordinating node will determine which nodes the data will be written to. Which nodes store which collections (and therefore shards) is determined by the setup of Weaviate, which is known by each node and thus each coordinator node. Where something is replicated is deterministic, so all nodes know on which shard which data will land.</p>
<p align="center"><img src="/img/docs/replication-architecture/replication-rf3-size8.png" alt="Replication Factor 3 with cluster size 8" width="75%"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="read-operations">Read operations<a href="#read-operations" class="hash-link" aria-label="Direct link to Read operations" title="Direct link to Read operations" translate="no">​</a></h2>
<p>Read operations are also coordinated by a coordinator node, which directs a query to the correct nodes that contain the data. Since one or more nodes may contain old (stale) data, the read client will determine which of the received data is the most recent before sending it to the user.</p>
<p><strong>Steps</strong></p>
<ol>
<li class="">The client sends a query to Weaviate, any node in the cluster that receives the request first will act as the coordinator node</li>
<li class="">The coordinator node sends the query to more than one replica node in the cluster</li>
<li class="">The coordinator waits for a response from x nodes. <em>x is <a class="" href="/weaviate/concepts/replication-architecture/consistency">configurable</a> (<code>ALL</code>, <code>QUORUM</code> or <code>ONE</code>, available from v1.18, Get-Object-By-ID type requests have tunable consistency from v1.17).</em></li>
<li class="">The coordinator node resolves conflicting data using some metadata (e.g. timestamp, id, version number)</li>
<li class="">The coordinator returns the latest data to the client</li>
</ol>
<p>If the cluster size is 3 and the replication factor is also 3, then all nodes can serve the query. The consistency level determines how many nodes will be queried.</p>
<p>If the cluster size is 10 and the replication factor is 3, the 3 nodes which contain that data (collection) can serve queries, coordinated by the coordinator node. The client waits until x (the consistency level) nodes have responded.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="questions-and-feedback">Questions and feedback<a href="#questions-and-feedback" class="hash-link" aria-label="Direct link to Questions and feedback" title="Direct link to Questions and feedback" translate="no">​</a></h2>
<!-- -->
<p>If you have any questions or feedback, let us know in the <a href="https://forum.weaviate.io/" target="_blank" rel="noopener noreferrer" class="">user forum</a>.</p>
<!-- -->
<!-- -->
<div class="cardsSection_Ezca smallCards_eRph"><a href="https://forum.weaviate.io/new-topic?title=%5BQuestion%5D%20YOUR%20TOPIC&amp;body=Details%20here&amp;category=support&amp;tags=technical" target="_blank" rel="noopener noreferrer" class="card_OoQD"><div class="cardHeader_rXdg"><i class="fas fa-comments cardIcon_K4xK"></i><span class="cardTitle_TsZq">Technical questions</span></div><p class="cardDescription__QXy">If you have questions feel free to post on our<!-- --> <span class="highlight_acB9">Community forum</span>.</p></a><a href="https://github.com/weaviate/docs/issues" target="_blank" rel="noopener noreferrer" class="card_OoQD"><div class="cardHeader_rXdg"><i class="fa-brands fa-github cardIcon_K4xK"></i><span class="cardTitle_TsZq">Documentation feedback</span></div><p class="cardDescription__QXy">Leave feedback by opening a GitHub issue.</p></a></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/weaviate/docs/tree/main/docs/weaviate/concepts/replication-architecture/cluster-architecture.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div><footer class="footer_G0fi"><div class="container"><div class="footerContent_oI6g"><div class="leftSection_TIm0"><div class="socialIcons_Okfn"><a href="https://github.com/weaviate/weaviate" target="_blank" rel="noopener noreferrer" title="GitHub"><i class="fab fa-github" aria-hidden="true"></i></a><a href="https://weaviate.io/slack" target="_blank" rel="noopener noreferrer" title="Slack"><i class="fab fa-slack" aria-hidden="true"></i></a><a href="https://x.com/weaviate_io" target="_blank" rel="noopener noreferrer" title="X"><i class="fab fa-twitter" aria-hidden="true"></i></a><a href="https://instagram.com/weaviate.io" target="_blank" rel="noopener noreferrer" title="Instagram"><i class="fab fa-instagram" aria-hidden="true"></i></a><a href="https://youtube.com/@Weaviate" target="_blank" rel="noopener noreferrer" title="YouTube"><i class="fab fa-youtube" aria-hidden="true"></i></a><a href="https://www.linkedin.com/company/weaviate-io" target="_blank" rel="noopener noreferrer" title="LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i></a></div></div><div class="rightSection_LCNx"><div class="footerSection_l31a"><h5>Documentation</h5><ul><li><a href="/weaviate">Weaviate Database</a></li><li><a href="/deploy">Deployment documentation</a></li><li><a href="/cloud">Weaviate Cloud</a></li><li><a href="/agents">Weaviate Agents</a></li></ul></div><div class="footerSection_l31a"><h5>Support</h5><ul><li><a href="https://forum.weaviate.io/c/support/" target="_blank" rel="noopener noreferrer">Forum</a></li><li><a href="https://weaviate.io/slack" target="_blank" rel="noopener noreferrer">Slack</a></li></ul></div></div></div></div></footer></footer></article></div></div><div class="col col--3"><div class="customTocStickyContainer_xbxO"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#node-discovery" class="table-of-contents__link toc-highlight">Node Discovery</a></li><li><a href="#metadata-replication-raft" class="table-of-contents__link toc-highlight">Metadata replication: Raft</a></li><li><a href="#data-replication-leaderless" class="table-of-contents__link toc-highlight">Data replication: Leaderless</a></li><li><a href="#replication-factor" class="table-of-contents__link toc-highlight">Replication Factor</a></li><li><a href="#write-operations" class="table-of-contents__link toc-highlight">Write operations</a></li><li><a href="#read-operations" class="table-of-contents__link toc-highlight">Read operations</a></li><li><a href="#questions-and-feedback" class="table-of-contents__link toc-highlight">Questions and feedback</a></li></ul></div><div class="container_jpeN"><p class="text_tGp7">Was this page helpful?</p><div class="buttonContainer_rFWk"><button class="voteButton_HXmX undefined" aria-label="Vote up"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path></svg>Yes</button><button class="voteButton_HXmX undefined" aria-label="Vote down"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 14V2"></path><path d="M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z"></path></svg>No</button></div></div></div><div class="feedbackWrapper_JTi0"></div></div></div></div></main></div></div></div></div>
</body>
</html>