# Source: https://docs.weaviate.io/weaviate/release-notes/known-issues

<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-weaviate/release-notes/known-issues" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Known issues | Weaviate Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.weaviate.io/weaviate/release-notes/known-issues"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Known issues | Weaviate Documentation"><meta data-rh="true" name="description" content="This page documents significant known issues in Weaviate, their symptoms, and recommended resolutions. Use the table below to find issues that may be affecting you, and their status."><meta data-rh="true" property="og:description" content="This page documents significant known issues in Weaviate, their symptoms, and recommended resolutions. Use the table below to find issues that may be affecting you, and their status."><meta data-rh="true" property="og:image" content="https://docs.weaviate.io/og/docs/more-resources.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.weaviate.io/og/docs/more-resources.jpg"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.weaviate.io/weaviate/release-notes/known-issues"><link data-rh="true" rel="alternate" href="https://docs.weaviate.io/weaviate/release-notes/known-issues" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.weaviate.io/weaviate/release-notes/known-issues" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Releases","item":"https://docs.weaviate.io/weaviate/release-notes/"},{"@type":"ListItem","position":2,"name":"Known issues","item":"https://docs.weaviate.io/weaviate/release-notes/known-issues"}]}</script><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-WS8CG676",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>

<script>!function(){if("undefined"!=typeof window&&void 0===window.signals){var n=document.createElement("script");n.src="https://cdn.cr-relay.com/v1/site/3709e2b3-c0eb-4239-9087-775e484fab16/signals.js",n.async=!0,window.signals=Object.assign([],["page","identify","form"].reduce((function(n,e){return n[e]=function(){return signals.push([e,arguments]),signals},n}),{})),document.head.appendChild(n)}}()</script>
<script id="hs-script-loader" async="true" defer="true" src="https://js.hs-scripts.com/8738733.js"></script>
<link rel="stylesheet" href="/fonts/font-awesome/fontawesome.css">
<link rel="stylesheet" href="/fonts/font-awesome/solid.css">
<link rel="stylesheet" href="/fonts/font-awesome/regular.css">
<link rel="stylesheet" href="/fonts/font-awesome/brands.css"><link rel="stylesheet" href="/assets/css/styles.f4cdad07.css">
<script src="/assets/js/runtime~main.444b5859.js" defer="defer"></script>
<script src="/assets/js/main.6a4a6ee2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script>


<script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WS8CG676" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><link rel="preload" as="image" href="/img/site/weaviate-logo-horizontal-light-1.svg"><link rel="preload" as="image" href="/img/site/weaviate-logo-horizontal-dark-1.svg"><link rel="preload" as="image" href="/img/site/weaviate-logo-w.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#1C1468;color:#F5F5F5" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><a href="https://academy.weaviate.io/">The new <b>Weaviate Academy</b> learning platform is here!</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="defaultNavbar_mOWn"><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://weaviate.io" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/site/weaviate-logo-horizontal-light-1.svg" alt="Weaviate" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/site/weaviate-logo-horizontal-dark-1.svg" alt="Weaviate" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/weaviate/api/rest"></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/weaviate/weaviate" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><svg class="githubStars" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a href="https://academy.weaviate.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link academy-button">Academy</a><a href="https://weaviate.io/go/console?utm_source=docs&amp;utm_content=navbar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cloud-button">Weaviate Cloud</a><div class="hiddenSearch navbarSearchContainer_Bca1"><div class="searchBox"><button class="searchButton"><span class="searchPlaceholder"><i class="searchIcon fas fa-magnifying-glass"></i><span class="searchPlaceholderText">Ask AI or Search</span></span><div class="commandIconContainer"><span class="commandIcon">⌘K</span></div></button></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav></div><div class="secondaryNavbar_Zq6r"><nav class="secondaryNavLinks_WJZI"><a class="navLink_kzb_" href="/weaviate">Get started</a><a class="navLink_kzb_" href="/weaviate/guides">How-to manuals &amp; Guides</a><a class="navLink_kzb_" href="/weaviate/model-providers">Model integrations</a><a class="navLink_kzb_" href="/weaviate/config-refs">Reference &amp; APIs</a><a class="navLink_kzb_" href="/weaviate/concepts">Concepts</a><a class="navLink_kzb_" href="/weaviate/recipes">Recipes</a><a class="navLink_kzb_ activeNavLink_ObEy" href="/weaviate/release-notes">Other</a></nav></div><div class="modalOverlay_BeVA"><div class="modalContent_CPV2"><div class="modalHeader_aBIn"><div class="modalHeaderLeft_Jnp2"><strong>Go to documentation:</strong></div><div class="modalHeaderRight_pW31"><div class="modalHeaderButton_lyv9"><span class="buttonShortcut_rHzY">⌘U</span><div class="verticalDivider_TWYg"></div><button class="headerCloseIcon_Nc0n">✕</button></div></div></div><div class="modalBody_bZ4G"><div class="modalOptionsContainer_GF7c"><div class="modalOption_Zqj6 activeOption_IUKI"><i class="fa fa-database modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Weaviate Database</strong><p>Develop AI applications using Weaviate&#x27;s APIs and tools</p></div><div class="activeIndicator_uCqh"></div></div><div class="modalOption_Zqj6"><i class="fa fa-database modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Deploy</strong><p>Deploy, configure, and maintain Weaviate Database</p></div></div><div class="modalOption_Zqj6"><i class="fa fa-robot modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Weaviate Agents</strong><p>Build and deploy intelligent agents with Weaviate</p></div></div><div class="modalOption_Zqj6"><i class="fa fa-cloud modalIcon__725" aria-hidden="true"></i><div class="modalText_gt5h"><strong>Weaviate Cloud</strong><p>Manage and scale Weaviate in the cloud</p></div></div></div><div class="resourcesSection__QVP"><h4 class="sectionTitle_TjaJ">Additional resources</h4><div class="resourcesGrid_Fe8L"><div class="resourceCard_qG9v"><i class="fa fa-puzzle-piece resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Integrations</span></div><div class="resourceCard_qG9v"><i class="fa fa-edit resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Contributor guide</span></div><div class="resourceCard_qG9v"><i class="fa fa-calendar-days resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Events &amp; Workshops</span></div><div class="resourceCard_qG9v"><i class="fa-solid fa-graduation-cap resourceIcon_KgrH" aria-hidden="true"></i><span class="resourceTitle__PWa">Weaviate Academy</span></div></div></div><div class="aiAssistantSection_Qefr"><h4 class="sectionTitle_TjaJ">Need help?</h4><div class="resourcesGrid_Fe8L"><div class="askAiButton_snh2"><img src="/img/site/weaviate-logo-w.png" alt="Weaviate Logo" class="askAiIcon_T_rP"><span class="askAiText_snFq">Ask AI Assistant</span><span class="askAiShortcut_kkRQ">⌘K</span></div><div class="resourceCard_qG9v"><i class="fa fa-comments styles.resourceIcon" aria-hidden="true"></i><span class="resourceTitle__PWa">Community Forum</span></div></div></div></div></div></div><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/weaviate/release-notes"><span title="Releases" class="categoryLinkLabel_W154">Releases</span></a><button aria-label="Collapse sidebar category &#x27;Releases&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/weaviate/release-notes/known-issues"><span title="Known issues" class="linkLabel_WmDU">Known issues</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/weaviate/benchmarks"><span title="Benchmarks" class="categoryLinkLabel_W154">Benchmarks</span></a><button aria-label="Expand sidebar category &#x27;Benchmarks&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/weaviate/modules"><span title="Modules" class="categoryLinkLabel_W154">Modules</span></a><button aria-label="Expand sidebar category &#x27;Modules&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/more-resources/faq"><span title="FAQ" class="linkLabel_WmDU">FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/more-resources/glossary"><span title="Glossary" class="linkLabel_WmDU">Glossary</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaviate/more-resources/example-datasets"><span title="Example datasets" class="linkLabel_WmDU">Example datasets</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/weaviate/release-notes"><span>Releases</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Known issues</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Last Updated: October 2025</div></div>
<header><h1>Known issues</h1></header>
<p>This page documents significant known issues in Weaviate, their symptoms, and recommended resolutions. Use the table below to find issues that may be affecting you, and their status.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="quick-reference">Quick reference<a href="#quick-reference" class="hash-link" aria-label="Direct link to Quick reference" title="Direct link to Quick reference" translate="no">​</a></h2>
<table><thead><tr><th>Issue</th><th>Affected Versions</th><th>Resolution</th><th>Fixed In</th></tr></thead><tbody><tr><td><a href="#empty-collections-panic" class="">Empty collections panic</a></td><td>1.28 - 1.31</td><td>In Progress</td><td>-</td></tr><tr><td><a href="#database-restoration-blocked" class="">Database restoration blocked</a></td><td>1.27.23-26, 1.28.14-15, 1.29.5-7, 1.30.3</td><td>Fixed</td><td>1.27.27, 1.28.16, 1.29.8, 1.30.4</td></tr><tr><td><a href="#raft-snapshot-compatibility-on-downgrade" class="">RAFT snapshot compatibility on downgrade</a></td><td>1.28.13+, 1.29.5+, 1.30.2+ (when downgrading to 1.27.25 or earlier)</td><td>Fixed</td><td>1.27.26</td></tr><tr><td><a href="#raft-bootstrap-timeout" class="">RAFT bootstrap timeout</a></td><td>1.25 - 1.28</td><td>Workaround</td><td>-</td></tr><tr><td><a href="#raft-timeouts-under-heavy-load" class="">RAFT timeouts under heavy load</a></td><td>1.25 and later</td><td>Configuration</td><td>-</td></tr><tr><td><a href="#invalid-port-99999999" class="">Invalid port 99999999 error</a></td><td>1.25 - 1.28</td><td>By Design</td><td>-</td></tr><tr><td><a href="#context-deadline-on-tenant-deletion" class="">Context deadline on tenant deletion</a></td><td>1.26 - 1.28</td><td>Fixed</td><td>1.26.14, 1.27.11, 1.28.5</td></tr><tr><td><a href="#memory-pressure-shard-init-failure" class="">Memory pressure: Shard init failure</a></td><td>All</td><td>Configuration</td><td>-</td></tr><tr><td><a href="#raft-snapshot-cannot-be-created" class="">RAFT snapshot cannot be created</a></td><td>1.25 - 1.28</td><td>Workaround</td><td>-</td></tr><tr><td><a href="#failed-to-decode-incoming-command" class="">Failed to decode incoming command</a></td><td>1.25 - 1.29</td><td>Configuration</td><td>-</td></tr></tbody></table>
<hr>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Don&#x27;t see your issue in the table?</div><div class="admonitionContent_BuS1"><p>If you can&#x27;t find the issue you are experiencing, you can always <a href="#getting-help" class="">open a new one</a>.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="known-issues-in-detail">Known issues in detail<a href="#known-issues-in-detail" class="hash-link" aria-label="Direct link to Known issues in detail" title="Direct link to Known issues in detail" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="database-restoration-blocked">Database restoration blocked<a href="#database-restoration-blocked" class="hash-link" aria-label="Direct link to Database restoration blocked" title="Direct link to Database restoration blocked" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Impact summary</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>Affected versions:</strong> 1.27.23-26, 1.28.14-15, 1.29.5-7, 1.30.3</li>
<li class=""><strong>Resolution:</strong> Fixed in 1.27.27, 1.28.16, 1.29.8, 1.30.4</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symptoms">Symptoms<a href="#symptoms" class="hash-link" aria-label="Direct link to Symptoms" title="Direct link to Symptoms" translate="no">​</a></h4>
<ul>
<li class="">Nodes fail to start and remain indefinitely in initialization</li>
<li class="">Repeated log messages: <code>waiting for database to be restored</code></li>
<li class="">May show schema update errors during RAFT command replay:</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  cmd_class&quot;:&quot;Content_par_test&quot;,&quot;cmd_type&quot;:2,&quot;cmd_type_name&quot;:&quot;TYPE_UPDATE_CLASS&quot;,&quot;error&quot;:&quot;updating schema: TYPE_UPDATE_CLASS: bad request :parse class update: property \&quot;content\&quot;: property fields other than description cannot be updated through updating the class. Use the add property feature (e.g. \&quot;POST /v1/schema/{className}/properties\&quot;)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-cause">Root cause<a href="#root-cause" class="hash-link" aria-label="Direct link to Root cause" title="Direct link to Root cause" translate="no">​</a></h4>
<p>A regression introduced in schema catch-up handling caused invalid RAFT commands to block database initialization. The system would continuously retry these invalid commands, preventing marking the database as ready.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolution">Resolution<a href="#resolution" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution" translate="no">​</a></h4>
<p><strong>Upgrade to the fixed version:</strong></p>
<ul>
<li class="">If on 1.27.x → upgrade to 1.27.27 or higher</li>
<li class="">If on 1.28.x → upgrade to 1.28.16 or higher</li>
<li class="">If on 1.29.x → upgrade to 1.29.8 or higher</li>
<li class="">If on 1.30.x → upgrade to 1.30.4 or higher</li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="raft-snapshot-compatibility-on-downgrade">RAFT snapshot compatibility on downgrade<a href="#raft-snapshot-compatibility-on-downgrade" class="hash-link" aria-label="Direct link to RAFT snapshot compatibility on downgrade" title="Direct link to RAFT snapshot compatibility on downgrade" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Impact summary</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>Affected versions:</strong> 1.28.13+, 1.29.5+, 1.30.2+ (when downgrading to 1.27.25 or earlier)</li>
<li class=""><strong>Resolution:</strong> Fixed in 1.27.26</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symptoms-1">Symptoms<a href="#symptoms-1" class="hash-link" aria-label="Direct link to Symptoms" title="Direct link to Symptoms" translate="no">​</a></h4>
<p>After downgrading from 1.28+ to older 1.27.x versions:</p>
<ul>
<li class="">RAFT snapshots fail to load</li>
<li class="">Cluster cannot reach Ready state</li>
<li class="">Node initialization failures</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-cause-1">Root cause<a href="#root-cause-1" class="hash-link" aria-label="Direct link to Root cause" title="Direct link to Root cause" translate="no">​</a></h4>
<p>RAFT snapshot format changes introduced in 1.28.13, 1.29.5, and 1.30.2 are not backward compatible with 1.27 releases prior to 1.27.26.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolution-1">Resolution<a href="#resolution-1" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution" translate="no">​</a></h4>
<p>When downgrading from 1.28.13+, 1.29.5+, or 1.30.2+:</p>
<ul>
<li class=""><strong>Ensure you downgrade to version 1.27.26 or higher</strong></li>
<li class="">Do not downgrade to 1.27.25 or earlier</li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="raft-bootstrap-timeout">RAFT bootstrap timeout<a href="#raft-bootstrap-timeout" class="hash-link" aria-label="Direct link to RAFT bootstrap timeout" title="Direct link to RAFT bootstrap timeout" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Impact summary</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>Affected versions:</strong> 1.25, 1.26, 1.27, 1.28</li>
<li class=""><strong>Resolution:</strong> Workaround available</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symptoms-2">Symptoms<a href="#symptoms-2" class="hash-link" aria-label="Direct link to Symptoms" title="Direct link to Symptoms" translate="no">​</a></h4>
<ul>
<li class="">Nodes stuck in crash loop with consistent restart intervals</li>
<li class="">Logs show schema catch-up in progress but never complete:</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Schema catching up: applying log entry: [X/Y]</span><br></span></code></pre></div></div>
<ul>
<li class="">Startup probe failures in Kubernetes</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-cause-2">Root cause<a href="#root-cause-2" class="hash-link" aria-label="Direct link to Root cause" title="Direct link to Root cause" translate="no">​</a></h4>
<p>During cluster initialization or node recovery, applying accumulated RAFT log entries (especially with large schemas or many collections) may exceed the default 600-second bootstrap timeout.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolution-2">Resolution<a href="#resolution-2" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution" translate="no">​</a></h4>
<p><strong>Increase bootstrap timeout and startup probe:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RAFT_BOOTSTRAP_TIMEOUT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;900&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 15 minutes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">startupProbe</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">failureThreshold</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">90</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 90 * 10 = 900 seconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">periodSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">httpGet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /v1/.well</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">known/ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><br></span></code></pre></div></div>
<p><strong>Calculate appropriate timeout:</strong></p>
<ul>
<li class="">Small clusters (&lt; 10 collections): 600s default usually sufficient</li>
<li class="">Medium clusters (10-100 collections): 900-1800s</li>
<li class="">Large clusters (100+ collections): 1800-3600s</li>
</ul>
<p><strong>Note:</strong> Versions 1.27.4+, 1.26.11+, and 1.25.26+ include optimizations that reduce schema rebuild time during catch-up.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="prevention">Prevention<a href="#prevention" class="hash-link" aria-label="Direct link to Prevention" title="Direct link to Prevention" translate="no">​</a></h4>
<ul>
<li class="">Monitor cluster scale and adjust timeouts proactively</li>
<li class="">Use WCS tool: <code>wcs startup-count &lt;failure-threshold&gt; --apply; wcs sync</code></li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="raft-timeouts-under-heavy-load">RAFT timeouts under heavy load<a href="#raft-timeouts-under-heavy-load" class="hash-link" aria-label="Direct link to RAFT timeouts under heavy load" title="Direct link to RAFT timeouts under heavy load" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Impact summary</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>Affected versions:</strong> 1.25 and later</li>
<li class=""><strong>Resolution:</strong> Configuration available (default improved in 1.31+)</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symptoms-3">Symptoms<a href="#symptoms-3" class="hash-link" aria-label="Direct link to Symptoms" title="Direct link to Symptoms" translate="no">​</a></h4>
<ul>
<li class="">Frequent leader elections and cluster instability</li>
<li class="">Logs showing timeout errors:</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  heartbeat timeout reached, starting election</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Election timeout reached, restarting election</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  memberlist: Failed fallback TCP ping: timeout 1s: read tcp [...]: i/o timeout</span><br></span></code></pre></div></div>
<ul>
<li class="">High CPU usage, memory pressure, or goroutine counts in monitoring</li>
<li class="">Performance degradation during normal operations</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-cause-3">Root cause<a href="#root-cause-3" class="hash-link" aria-label="Direct link to Root cause" title="Direct link to Root cause" translate="no">​</a></h4>
<p>Under heavy load or network latency, nodes cannot respond to RAFT heartbeats and memberlist pings within default timeout windows. This causes false failure detection, unnecessary leader elections, and cascading performance issues.</p>
<p>The issue is typically a symptom of underlying resource pressure rather than a RAFT problem itself.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolution-3">Resolution<a href="#resolution-3" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution" translate="no">​</a></h4>
<p><strong>1. Adjust RAFT timeout multiplier:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Production (default in 1.31+)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RAFT_TIMEOUTS_MULTIPLIER=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># High-latency networks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RAFT_TIMEOUTS_MULTIPLIER=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Heavily loaded or unstable environments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RAFT_TIMEOUTS_MULTIPLIER=15</span><br></span></code></pre></div></div>
<p>This multiplies all timeout values:</p>
<ul>
<li class="">Heartbeat timeout: 1s → 5s (with multiplier of 5)</li>
<li class="">Election timeout: 1s → 5s</li>
<li class="">Leader lease timeout: 0.5s → 2.5s</li>
<li class="">Memberlist TCP timeout: 10s → 50s</li>
</ul>
<p><strong>2. Investigate root cause:</strong></p>
<p>Check for underlying issues:</p>
<ul>
<li class="">Memory pressure or OOM events</li>
<li class="">CPU saturation</li>
<li class="">Network latency or packet loss</li>
<li class="">Too many collections causing Go scheduler pressure</li>
</ul>
<p><strong>3. If too many collections:</strong></p>
<p>Reduce Go scheduler load:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GOMAXPROCS=&lt;value less than available CPUs&gt;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="best-practices">Best practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best practices" title="Direct link to Best practices" translate="no">​</a></h4>
<ul>
<li class="">Start with default multiplier (5) for most environments</li>
<li class="">Increase gradually if seeing frequent elections</li>
<li class="">Monitor cluster stability after changes</li>
<li class="">Address underlying resource issues rather than only masking with higher timeouts</li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="invalid-port-99999999">Invalid port 99999999<a href="#invalid-port-99999999" class="hash-link" aria-label="Direct link to Invalid port 99999999" title="Direct link to Invalid port 99999999" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Impact summary</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>Affected versions:</strong> 1.25, 1.26, 1.27, 1.28</li>
<li class=""><strong>Resolution:</strong> By design (not a bug)</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symptoms-4">Symptoms<a href="#symptoms-4" class="hash-link" aria-label="Direct link to Symptoms" title="Direct link to Symptoms" translate="no">​</a></h4>
<p>Error message in logs:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dial tcp: address 99999999: invalid port</span><br></span></code></pre></div></div>
<p>Often accompanied by memberlist instability messages:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">memberlist: Suspect weaviate-0 has failed, no acks received</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">memberlist: Marking weaviate-0 as failed, suspect timeout reached</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-cause-4">Root cause<a href="#root-cause-4" class="hash-link" aria-label="Direct link to Root cause" title="Direct link to Root cause" translate="no">​</a></h4>
<p>This is not a RAFT problem but a symptom of memberlist instability. The invalid port <code>99999999</code> is intentionally returned to prevent RAFT from communicating with nodes that are not part of the memberlist, which prevents cross-talk issues where RAFT might contact old IP addresses from previous cluster configurations.</p>
<p>The underlying cause is typically:</p>
<ol>
<li class="">Too many collections causing Go scheduler slowdown and network I/O delays</li>
<li class="">Network connectivity issues preventing memberlist health checks</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolution-4">Resolution<a href="#resolution-4" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution" translate="no">​</a></h4>
<p><strong>Address underlying causes:</strong></p>
<ol>
<li class="">If too many collections:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   GOMAXPROCS=&lt;value less than available CPUs&gt;</span><br></span></code></pre></div></div>
<ol start="2">
<li class="">If network issues:<!-- -->
<ul>
<li class="">Check connectivity between all cluster nodes</li>
<li class="">Review network policies and firewall rules</li>
<li class="">Verify DNS resolution</li>
</ul>
</li>
</ol>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="context-deadline-on-tenant-deletion">Context deadline on tenant deletion<a href="#context-deadline-on-tenant-deletion" class="hash-link" aria-label="Direct link to Context deadline on tenant deletion" title="Direct link to Context deadline on tenant deletion" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Impact summary</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>Affected versions:</strong> 1.26, 1.27, 1.28</li>
<li class=""><strong>Resolution:</strong> Fixed in 1.26.14, 1.27.11, 1.28.5</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symptoms-5">Symptoms<a href="#symptoms-5" class="hash-link" aria-label="Direct link to Symptoms" title="Direct link to Symptoms" translate="no">​</a></h4>
<p>Tenant deletion fails with timeout errors:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">context deadline exceeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">session: fetching region failed: RequestCanceled: request context canceled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">caused by: context deadline exceeded</span><br></span></code></pre></div></div>
<p>Occurs only when tenant offloading module (<code>offload-s3</code>) is enabled.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-cause-5">Root cause<a href="#root-cause-5" class="hash-link" aria-label="Direct link to Root cause" title="Direct link to Root cause" translate="no">​</a></h4>
<p>When tenant offloading is enabled and AWS credentials are misconfigured, the deletion process attempts to delete cloud resources but times out waiting for AWS responses.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolution-5">Resolution<a href="#resolution-5" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution" translate="no">​</a></h4>
<p><strong>Temporary workaround (if upgrade not immediately possible):</strong></p>
<p>Option 1: Disable tenant offloading</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Remove or disable tenant offloading module configuration</span><br></span></code></pre></div></div>
<p>Option 2: Correct AWS credentials</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Provide valid AWS credentials for tenant offloading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS_ACCESS_KEY_ID=&lt;valid_key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS_SECRET_ACCESS_KEY=&lt;valid_secret&gt;</span><br></span></code></pre></div></div>
<p><strong>Permanent fix:</strong>
Upgrade to fixed version:</p>
<ul>
<li class="">1.26.x → 1.26.14 or higher</li>
<li class="">1.27.x → 1.27.11 or higher</li>
<li class="">1.28.x → 1.28.5 or higher</li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="memory-pressure-shard-init-failure">Memory pressure: Shard init failure<a href="#memory-pressure-shard-init-failure" class="hash-link" aria-label="Direct link to Memory pressure: Shard init failure" title="Direct link to Memory pressure: Shard init failure" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Impact summary</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>Affected versions:</strong> All versions</li>
<li class=""><strong>Resolution:</strong> Configuration required</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symptoms-6">Symptoms<a href="#symptoms-6" class="hash-link" aria-label="Direct link to Symptoms" title="Direct link to Symptoms" translate="no">​</a></h4>
<ul>
<li class="">Shard initialization failures during tenant activation</li>
<li class="">Errors in logs:</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  memory pressure: cannot init shard: not enough memory mappings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  broadcast: cannot reach enough replicas</span><br></span></code></pre></div></div>
<ul>
<li class="">Tenant activation failures</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-cause-6">Root cause<a href="#root-cause-6" class="hash-link" aria-label="Direct link to Root cause" title="Direct link to Root cause" translate="no">​</a></h4>
<p>The system has reached the operating system limit for memory-mapped files (<code>vm.max_map_count</code>). Each shard requires multiple memory mappings, and the default OS limit may be insufficient for large multi-tenant deployments.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolution-6">Resolution<a href="#resolution-6" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution" translate="no">​</a></h4>
<p><strong>Increase the system memory mapping limit:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Check current value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysctl vm.max_map_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Increase to 3-4x current value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Example: 2097152 → 8388608</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysctl -w vm.max_map_count=8388608</span><br></span></code></pre></div></div>
<p><strong>Make the change persistent:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Add to /etc/sysctl.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;vm.max_map_count=8388608&quot; &gt;&gt; /etc/sysctl.conf</span><br></span></code></pre></div></div>
<p><strong>Restart affected pods to apply the new configuration.</strong></p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="empty-collections-panic">Empty collections panic<a href="#empty-collections-panic" class="hash-link" aria-label="Direct link to Empty collections panic" title="Direct link to Empty collections panic" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Impact summary</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>Affected versions:</strong> 1.28, 1.29, 1.30, 1.31</li>
<li class=""><strong>Resolution:</strong> In progress</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symptoms-7">Symptoms<a href="#symptoms-7" class="hash-link" aria-label="Direct link to Symptoms" title="Direct link to Symptoms" translate="no">​</a></h4>
<p>Single-node clusters panic on startup with:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Recovered from panic: assignment to entry in nil map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...stack trace...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">github.com/weaviate/weaviate/cluster/schema.(*schema).addClass</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-cause-7">Root cause<a href="#root-cause-7" class="hash-link" aria-label="Direct link to Root cause" title="Direct link to Root cause" translate="no">​</a></h4>
<p>RAFT snapshots with no collections (previously called classes) cause a nil map assignment during restoration due to JSON unmarshaler <code>omitempty</code> behavior. This edge case occurs when snapshots are created before any collections are added.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolution-7">Resolution<a href="#resolution-7" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution" translate="no">​</a></h4>
<p><strong>Option 1: Upgrade (when available)</strong>
Upgrade to patched version containing the fix.</p>
<p><strong>Option 2: Remove empty snapshot</strong></p>
<p>Identify and remove the problematic snapshot:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Navigate to RAFT directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd raft/snapshots/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Find snapshot with empty classes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Look for state.bin containing: {&quot;node_id&quot;:&quot;...&quot;,&quot;snapshot_id&quot;:&quot;...&quot;,&quot;classes&quot;:{}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Remove the empty snapshot directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf &lt;snapshot-directory&gt;</span><br></span></code></pre></div></div>
<p>Example structure:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">raft/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── db_users/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── raft.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── snapshots/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── 4-4-1727456146194/    # Valid snapshot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── 5-6-1728681332462/    # Empty snapshot - remove this</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="prevention-1">Prevention<a href="#prevention-1" class="hash-link" aria-label="Direct link to Prevention" title="Direct link to Prevention" translate="no">​</a></h4>
<p>This issue should not occur in normal operations. It typically happens only if a snapshot is created before any schema is defined.</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="raft-snapshot-cannot-be-created">RAFT snapshot cannot be created<a href="#raft-snapshot-cannot-be-created" class="hash-link" aria-label="Direct link to RAFT snapshot cannot be created" title="Direct link to RAFT snapshot cannot be created" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Impact summary</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>Affected versions:</strong> 1.25, 1.26, 1.27, 1.28</li>
<li class=""><strong>Resolution:</strong> Workaround available</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symptoms-8">Symptoms<a href="#symptoms-8" class="hash-link" aria-label="Direct link to Symptoms" title="Direct link to Symptoms" translate="no">​</a></h4>
<p>Node stuck during bootstrap with error messages indicating snapshot threshold reached but unable to create snapshot. This typically occurs only during initial cluster setup with rapid configuration changes.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-cause-8">Root cause<a href="#root-cause-8" class="hash-link" aria-label="Direct link to Root cause" title="Direct link to Root cause" translate="no">​</a></h4>
<p>During bootstrap, many configuration changes in short succession increase RAFT log size and trigger snapshot threshold before the node has fully initialized. The cluster becomes stuck because:</p>
<ol>
<li class="">It cannot create a snapshot (requires bootstrap completion)</li>
<li class="">It cannot apply new configurations (requires snapshot first)</li>
</ol>
<p>This should be rare in normal operations.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolution-8">Resolution<a href="#resolution-8" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution" translate="no">​</a></h4>
<p><strong>Temporarily increase snapshot thresholds:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RAFT_SNAPSHOT_INTERVAL=600  # seconds (default: 120)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RAFT_SNAPSHOT_THRESHOLD=24576  # entries (default: 8192)</span><br></span></code></pre></div></div>
<p>This allows the node to apply all RAFT log entries before triggering snapshot creation.</p>
<p><strong>After node reports healthy:</strong></p>
<ol>
<li class="">Remove the custom configuration</li>
<li class="">Restart the node to return to defaults</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="prevention-2">Prevention<a href="#prevention-2" class="hash-link" aria-label="Direct link to Prevention" title="Direct link to Prevention" translate="no">​</a></h4>
<ul>
<li class="">Avoid making many rapid configuration changes during initial cluster bootstrap</li>
<li class="">Stage large schema deployments rather than applying all at once</li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="failed-to-decode-incoming-command">Failed to decode incoming command<a href="#failed-to-decode-incoming-command" class="hash-link" aria-label="Direct link to Failed to decode incoming command" title="Direct link to Failed to decode incoming command" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Impact summary</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>Affected versions:</strong> 1.25, 1.26, 1.27, 1.28, 1.29</li>
<li class=""><strong>Resolution:</strong> Configuration</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="symptoms-9">Symptoms<a href="#symptoms-9" class="hash-link" aria-label="Direct link to Symptoms" title="Direct link to Symptoms" translate="no">​</a></h4>
<p>Log entries showing:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">failed to decode incoming command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error: unknown rpc type 71</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remote-address: 10.0.104.114:42128</span><br></span></code></pre></div></div>
<p>Note: <code>71</code> represents ASCII &#x27;G&#x27; (GET), <code>80</code> represents ASCII &#x27;P&#x27; (POST)</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="root-cause-9">Root cause<a href="#root-cause-9" class="hash-link" aria-label="Direct link to Root cause" title="Direct link to Root cause" translate="no">​</a></h4>
<p>HTTP requests being sent to RAFT&#x27;s internal TCP endpoint (port 8300). This commonly occurs when Prometheus or other monitoring tools auto-discover and attempt to scrape all open ports, including internal RAFT ports.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="resolution-9">Resolution<a href="#resolution-9" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution" translate="no">​</a></h4>
<p><strong>Configure monitoring to exclude RAFT ports:</strong></p>
<p>Update Prometheus scrape configuration to skip internal cluster ports:</p>
<ul>
<li class="">Port 7000: Memberlist</li>
<li class="">Port 7100-7103: Memberlist gossip</li>
<li class="">Port 8300: RAFT</li>
</ul>
<p><strong>For Prometheus Operator:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">additionalScrapeConfigs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">job_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;weaviate&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kubernetes_sd_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">relabel_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">source_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">__meta_kubernetes_pod_container_port_number</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">regex</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;(7000|7100|7101|7102|7103|8300)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> drop</span><br></span></code></pre></div></div>
<p>This is informational only and does not impact cluster functionality.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="getting-help">Getting help<a href="#getting-help" class="hash-link" aria-label="Direct link to Getting help" title="Direct link to Getting help" translate="no">​</a></h2>
<p>If you encounter an issue not listed here:</p>
<ol>
<li class="">Search <a href="https://github.com/weaviate/weaviate/issues" target="_blank" rel="noopener noreferrer" class="">GitHub Issues</a></li>
<li class="">Ask in the <a href="https://forum.weaviate.io" target="_blank" rel="noopener noreferrer" class="">Weaviate Community Forum</a></li>
</ol>
<p>If you can&#x27;t find an existing issue, please <a href="https://github.com/weaviate/weaviate/issues" target="_blank" rel="noopener noreferrer" class="">open a new one</a>. Try to include the following information:</p>
<ul>
<li class="">Weaviate version</li>
<li class="">Deployment environment (cloud, on-prem, Kubernetes, etc.)</li>
<li class="">Relevant log excerpts</li>
<li class="">Steps to reproduce</li>
<li class="">Impact on your workload</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/weaviate/docs/tree/main/docs/weaviate/release-notes/known-issues.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div><footer class="footer_G0fi"><div class="container"><div class="footerContent_oI6g"><div class="leftSection_TIm0"><div class="socialIcons_Okfn"><a href="https://github.com/weaviate/weaviate" target="_blank" rel="noopener noreferrer" title="GitHub"><i class="fab fa-github" aria-hidden="true"></i></a><a href="https://weaviate.io/slack" target="_blank" rel="noopener noreferrer" title="Slack"><i class="fab fa-slack" aria-hidden="true"></i></a><a href="https://x.com/weaviate_io" target="_blank" rel="noopener noreferrer" title="X"><i class="fab fa-twitter" aria-hidden="true"></i></a><a href="https://instagram.com/weaviate.io" target="_blank" rel="noopener noreferrer" title="Instagram"><i class="fab fa-instagram" aria-hidden="true"></i></a><a href="https://youtube.com/@Weaviate" target="_blank" rel="noopener noreferrer" title="YouTube"><i class="fab fa-youtube" aria-hidden="true"></i></a><a href="https://www.linkedin.com/company/weaviate-io" target="_blank" rel="noopener noreferrer" title="LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i></a></div></div><div class="rightSection_LCNx"><div class="footerSection_l31a"><h5>Documentation</h5><ul><li><a href="/weaviate">Weaviate Database</a></li><li><a href="/deploy">Deployment documentation</a></li><li><a href="/cloud">Weaviate Cloud</a></li><li><a href="/agents">Weaviate Agents</a></li></ul></div><div class="footerSection_l31a"><h5>Support</h5><ul><li><a href="https://forum.weaviate.io/c/support/" target="_blank" rel="noopener noreferrer">Forum</a></li><li><a href="https://weaviate.io/slack" target="_blank" rel="noopener noreferrer">Slack</a></li></ul></div></div></div></div></footer></footer></article></div></div><div class="col col--3"><div class="customTocStickyContainer_xbxO"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-reference" class="table-of-contents__link toc-highlight">Quick reference</a></li><li><a href="#known-issues-in-detail" class="table-of-contents__link toc-highlight">Known issues in detail</a><ul><li><a href="#database-restoration-blocked" class="table-of-contents__link toc-highlight">Database restoration blocked</a></li><li><a href="#raft-snapshot-compatibility-on-downgrade" class="table-of-contents__link toc-highlight">RAFT snapshot compatibility on downgrade</a></li><li><a href="#raft-bootstrap-timeout" class="table-of-contents__link toc-highlight">RAFT bootstrap timeout</a></li><li><a href="#raft-timeouts-under-heavy-load" class="table-of-contents__link toc-highlight">RAFT timeouts under heavy load</a></li><li><a href="#invalid-port-99999999" class="table-of-contents__link toc-highlight">Invalid port 99999999</a></li><li><a href="#context-deadline-on-tenant-deletion" class="table-of-contents__link toc-highlight">Context deadline on tenant deletion</a></li><li><a href="#memory-pressure-shard-init-failure" class="table-of-contents__link toc-highlight">Memory pressure: Shard init failure</a></li><li><a href="#empty-collections-panic" class="table-of-contents__link toc-highlight">Empty collections panic</a></li><li><a href="#raft-snapshot-cannot-be-created" class="table-of-contents__link toc-highlight">RAFT snapshot cannot be created</a></li><li><a href="#failed-to-decode-incoming-command" class="table-of-contents__link toc-highlight">Failed to decode incoming command</a></li></ul></li><li><a href="#getting-help" class="table-of-contents__link toc-highlight">Getting help</a></li></ul></div><div class="container_jpeN"><p class="text_tGp7">Was this page helpful?</p><div class="buttonContainer_rFWk"><button class="voteButton_HXmX undefined" aria-label="Vote up"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path></svg>Yes</button><button class="voteButton_HXmX undefined" aria-label="Vote down"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 14V2"></path><path d="M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z"></path></svg>No</button></div></div></div><div class="feedbackWrapper_JTi0"></div></div></div></div></main></div></div></div></div>
</body>
</html>