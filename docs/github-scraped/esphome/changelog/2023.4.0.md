---
description: "Changelog for ESPHome 2023.4.0."
title: "ESPHome 2023.4.0 - 19th April 2023"
params:
  seo:
    description: Changelog for ESPHome 2023.4.0.
    image: /_static/changelog-2023.4.0.png
---

{{< imgtable >}}
"Voice Assistant","components/voice_assistant","voice-assistant.svg","dark-invert"
"Microphone Core","components/microphone/index","microphone.svg","dark-invert"
"I2S Microphone","components/microphone/i2s_audio","i2s_audio.svg",""
"MMC5603","components/sensor/mmc5603","mmc5603.jpg",""
"KSZ8081 Ethernet","components/ethernet","ethernet.svg","dark-invert"
{{< /imgtable >}}

## Voice Assistant

This year is the Year of the Voice for Home Assistant, and ESPHome is charging ahead with this in mind.
We've added a new {{< docref "/components/voice_assistant" >}} component that allows you to use ESPHome devices
as an input for [assist](https://www.home-assistant.io/voice_control/) in Home Assistant **2023.5 or later**.

With this also comes preliminary {{< docref "/components/microphone/index" "microphone" >}} support, which has been
built in a way that multiple components, like `voice_assistant` can request start / stop of the microphone and get
the data. We hope this leads to more interesting use cases for the microphone in the future.

Home Assistant is hosting a live stream all about the Year of the Voice - Chapter 2.

<!-- markdownlint-disable-next-line MD033 -->
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/Tk-pnm7FY7c"
        title="YouTube video player" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen>
</iframe>

## Keith joins Nabu Casa

Nabu Casa is pleased to announce that long time contributor Keith Burzinski ({{< ghuser name="kbx81" >}}) is joining the
team as a full time developer to help out on ESPHome. Keith created the {{< docref "/components/sprinkler" >}},
{{< docref "/components/climate/thermostat" >}}, a bunch of the `ssd` display components and a few other components
as well as fixing many bug along the way. I expect his house climate and garden area are kept well in line.

Looking forward to working with you Keith.

<!-- markdownlint-disable MD013 -->

## Release 2023.4.1 - April 24

- fix flip_x {{< pr number="4727" repo="esphome" >}} by {{< ghuser name="ssieb" >}}
- Use proper schema for delta filter {{< pr number="4723" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Release 2023.4.2 - April 27

- I2c scan recovery reset fix {{< pr number="4724" repo="esphome" >}} by {{< ghuser name="gcopeland" >}}
- Debug component doesn't work on RP2040 {{< pr number="4728" repo="esphome" >}} by {{< ghuser name="HeMan" >}}
- Only request VA port from first client that is subscribed {{< pr number="4747" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Don't allow fingerprint_grow enroll cancellation when no enrollment started {{< pr number="4745" repo="esphome" >}} by {{< ghuser name="itpeters" >}}

## Release 2023.4.3 - May 2

- Fix sprinkler switch restore_mode {{< pr number="4756" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Fix i2s media player on devices with no internal DAC {{< pr number="4768" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Release 2023.4.4 - May 4

- Fixes for Arduino 2.7.4 (for FastLED) {{< pr number="4777" repo="esphome" >}} by {{< ghuser name="timn" >}}

## Breaking Changes

### IÂ²S Media Player

With the introduction of the {{< docref "/components/microphone/i2s_audio" >}}, the media player platform has some
required breaking changes to the YAML configuration. This involves moving the `i2s_lrclk_pin` and
`i2s_bclk_pin` to a new {{< docref "/components/i2s_audio" >}} component.

```yaml
# Before
media_player:
  - platform: i2s_audio
    name: ESPHome I2S Media Player
    dac_type: external
    i2s_lrclk_pin: GPIO33
    i2s_bclk_pin: GPIO19
    i2s_dout_pin: GPIO22
    mode: mono

# After
i2s_audio:
  i2s_lrclk_pin: GPIO33
  i2s_bclk_pin: GPIO19

media_player:
  - platform: i2s_audio
    name: ESPHome I2S Media Player
    dac_type: external
    i2s_dout_pin: GPIO22
    mode: mono
```

### Default restore mode for Switches, Fans and Lights

The default `restore_mode` for switches, fans and lights has been changed
from `RESTORE_DEFAULT_OFF` to `ALWAYS_OFF` with the intention that restoring values
from flash should be manually specified by a user if desired in their YAML configuration.

### Number `step`

The `number` components have always internally set a `step` required in config,
but allowed it to be not specified at all. This caused issues on the Home Assistant side
of things. This is only a breaking change for external components that have a `number` platform.

### UART ids

Due to `uart0` / `uart1` / `uart2` being defined in some of the platform code ESPHome uses,
ESPHome will now disallow these ids from being used in the config. You can simply change them to
`uart_0` to continue using.

## Full list of changes

### New Components

- Added in mmc5603 code {{< pr number="4175" repo="esphome" >}} by {{< ghuser name="benhoff" >}} (new-integration)
- Add push to talk voice assistant {{< pr number="4648" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)

### Breaking Changes

- Disallow uart0/1/2 as ids in config {{< pr number="4446" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Require step to be set when calling register_number {{< pr number="4622" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Fix restore {{< pr number="4655" repo="esphome" >}} by {{< ghuser name="spacemanspiff2007" >}} (breaking-change)

### Beta Changes

- debug component, allow without debug logging {{< pr number="4685" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fixed dns2 for ethernet {{< pr number="4698" repo="esphome" >}} by {{< ghuser name="HeMan" >}}
- Add timeout to i2c write error logs {{< pr number="4697" repo="esphome" >}} by {{< ghuser name="Szewcson" >}}
- Add event triggers to voice_assistant {{< pr number="4699" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Call on_error if no api client connected that handles voice {{< pr number="4709" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add ethernet powerdown (fixes esphome/issues#4420) {{< pr number="4706" repo="esphome" >}} by {{< ghuser name="tracestep" >}}
- Bump arduino platform version to 5.3.0 {{< pr number="4713" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

### All changes

- Mark unique_id() virtual method as deprecated {{< pr number="4538" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Drop deprecated entity property base methods {{< pr number="4539" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Format test files {{< pr number="4541" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- EntityBase: Icon string can stay in flash. {{< pr number="4566" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- Update the delta filter to be able to take a percentage change {{< pr number="4391" repo="esphome" >}} by {{< ghuser name="TrentHouliston" >}}
- Added missing PM_1_0 and PM_10_0 for PMS5003T and PMS5003ST {{< pr number="4560" repo="esphome" >}} by {{< ghuser name="genestealer" >}}
- Add an option to force SPI into software mode {{< pr number="4556" repo="esphome" >}} by {{< ghuser name="wupeka" >}}
- allow using a binary output for the status led {{< pr number="4532" repo="esphome" >}} by {{< ghuser name="ssieb" >}}
- Add option flip_x {{< pr number="4555" repo="esphome" >}} by {{< ghuser name="rafal83" >}}
- Bump aioesphomeapi from 13.5.0 to 13.5.1 {{< pr number="4572" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Verbose output of define. {{< pr number="4576" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- Add support for ESP32 CAM 3MP and 5MP resolutions and arbitrary camera clock. {{< pr number="4580" repo="esphome" >}} by {{< ghuser name="peterhalicky" >}}
- Add a simple 'skip_initial' filter {{< pr number="4582" repo="esphome" >}} by {{< ghuser name="sybrenstuvel" >}}
- Fix outdated filter string in platformio_api {{< pr number="4587" repo="esphome" >}} by {{< ghuser name="LordMike" >}}
- Split test3.yaml {{< pr number="4591" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Disallow uart0/1/2 as ids in config {{< pr number="4446" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Upgrade clang-format to v13 {{< pr number="4535" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- B/W support for GooDisplay GDEY029T94 (as used on Adafruit MagTag) {{< pr number="4222" repo="esphome" >}} by {{< ghuser name="AaronJackson" >}}
- Fix negative sqrt root in ct_clamp_sensor.cpp {{< pr number="4236" repo="esphome" >}} by {{< ghuser name="jerome992" >}}
- Wrap ipv6 code a bit more {{< pr number="4574" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Remove EntityBase from sprinkler {{< pr number="4606" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix wrong port multiplexer name in dump GPIO function of sx1509 {{< pr number="4592" repo="esphome" >}} by {{< ghuser name="skaldo" >}}
- Bump zeroconf from 0.47.3 to 0.47.4 {{< pr number="4597" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump pytest-asyncio from 0.20.3 to 0.21.0 {{< pr number="4599" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Limit range on filter time period for remote_receiver {{< pr number="4604" repo="esphome" >}} by {{< ghuser name="RoboMagus" >}}
- add select_schema to select component {{< pr number="4545" repo="esphome" >}} by {{< ghuser name="regevbr" >}}
- Add ability to clear the gatt cache {{< pr number="4621" repo="esphome" >}} by {{< ghuser name="bdraco" >}}
- Bump actions/stale from 7 to 8 {{< pr number="4615" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Require step to be set when calling register_number {{< pr number="4622" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Lower range of CONF_FREQUENCY {{< pr number="4619" repo="esphome" >}} by {{< ghuser name="berendhaan" >}}
- Allow entity names to be set to None {{< pr number="4607" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix platform restriction for bme680_bsec {{< pr number="4616" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix EzoCommandType enum {{< pr number="4593" repo="esphome" >}} by {{< ghuser name="alfredopironti" >}}
- `EntityBase` Name can stay in flash. {{< pr number="4594" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- feat: Add support to unsubscribe from BLE advertisements {{< pr number="4620" repo="esphome" >}} by {{< ghuser name="richardhopton" >}}
- EntityBase: Move ObjectId to Flash {{< pr number="4569" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- Add workflow to sync device classes with HA dev {{< pr number="4629" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Synchronise Device Classes from Home Assistant {{< pr number="4633" repo="esphome" >}} by {{< ghuser name="github-actions[bot]" >}}
- Remove AUTO_LOAD from as3935 {{< pr number="4630" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add ifdef to new bt proxy unsubscribe {{< pr number="4634" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- add bluetooth mac address in dump_config() {{< pr number="4628" repo="esphome" >}} by {{< ghuser name="felixlungu" >}}
- Binary map bugfixes {{< pr number="4636" repo="esphome" >}} by {{< ghuser name="kahrendt" >}}
- entity_base avoid padding bytes. {{< pr number="4637" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- Avoid sensor padding. {{< pr number="4638" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- Support advanced UART customization {{< pr number="4465" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- Log calibration results at level INFO {{< pr number="4240" repo="esphome" >}} by {{< ghuser name="Duckle29" >}}
- Number step not optional {{< pr number="4649" repo="esphome" >}} by {{< ghuser name="RoboMagus" >}}
- VSCode / devcontainer updates {{< pr number="4647" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Retry PN532_COMMAND_VERSION_DATA on setup() (fixes esphome/issues#3823) {{< pr number="4651" repo="esphome" >}} by {{< ghuser name="tracestep" >}}
- Bump pylint from 2.16.4 to 2.17.2 {{< pr number="4650" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump black from 23.1.0 to 23.3.0 {{< pr number="4635" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Added in mmc5603 code {{< pr number="4175" repo="esphome" >}} by {{< ghuser name="benhoff" >}} (new-integration)
- fix compilation with latest esp-idf {{< pr number="4671" repo="esphome" >}} by {{< ghuser name="Mic92" >}}
- Bump zeroconf from 0.47.4 to 0.56.0 {{< pr number="4674" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump pytest from 7.2.2 to 7.3.0 {{< pr number="4673" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Add push to talk voice assistant {{< pr number="4648" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)
- Fix ESP32 SPI hardware assignment in Arduino fw {{< pr number="4669" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Fix some NFC/PN532 crashes {{< pr number="4678" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add support for SSD1306 72x40 displays {{< pr number="4659" repo="esphome" >}} by {{< ghuser name="johnsto" >}}
- Fix pin schema for i2s microphone {{< pr number="4680" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix BedJet setup priority [fixes esphome/issues#3807] {{< pr number="4677" repo="esphome" >}} by {{< ghuser name="jhansche" >}}
- Add always trigger stop {{< pr number="4249" repo="esphome" >}} by {{< ghuser name="X-Ryl669" >}}
- Fix graph limits for negative values and other corner cases {{< pr number="4253" repo="esphome" >}} by {{< ghuser name="unhold" >}}
- Fix cut-off on 2.13" waveshare/ttgo epaper displays {{< pr number="4255" repo="esphome" >}} by {{< ghuser name="unhold" >}}
- [Ethernet] Add PHY KSZ8081 support {{< pr number="4668" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- Fix restore {{< pr number="4655" repo="esphome" >}} by {{< ghuser name="spacemanspiff2007" >}} (breaking-change)
- debug component, allow without debug logging {{< pr number="4685" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fixed dns2 for ethernet {{< pr number="4698" repo="esphome" >}} by {{< ghuser name="HeMan" >}}
- Add timeout to i2c write error logs {{< pr number="4697" repo="esphome" >}} by {{< ghuser name="Szewcson" >}}
- Add event triggers to voice_assistant {{< pr number="4699" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Call on_error if no api client connected that handles voice {{< pr number="4709" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add ethernet powerdown (fixes esphome/issues#4420) {{< pr number="4706" repo="esphome" >}} by {{< ghuser name="tracestep" >}}
- Bump arduino platform version to 5.3.0 {{< pr number="4713" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

<!-- markdownlint-enable MD013 -->

## All Changelogs

{{< changelogs >}}
