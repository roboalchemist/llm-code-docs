---
description: "Changelog for ESPHome 2021.10.0."
title: "ESPHome 2021.10.0 - 20th October 2021"
params:
  seo:
    description: Changelog for ESPHome 2021.10.0.
    image: /_static/changelog-2021.10.0.png
---

{{< imgtable >}}
"AirThings Wave Mini","components/sensor/airthings_ble","airthings_logo.png",""
"Current-Based Cover","components/cover/current_based","flash.svg","dark-invert"
"Daly BMS","components/sensor/daly_bms","daly_bms.jpg",""
"EPEVER Tracer","cookbook/tracer-an","tracer-an.jpg",""
"LTR390","components/sensor/ltr390","ltr390.jpg",""
"Modbus Controller","components/modbus_controller","modbus.png",""
"Safe Mode Switch","components/switch/safe_mode","restart-alert.svg","dark-invert"
"SCD4X","components/sensor/scd4x","scd4x.jpg",""
"Tuya Cover","components/cover/tuya","tuya.png",""
{{< /imgtable >}}

Learn from the creators about the new encryption, support for any ESP32 variant and how Otto came up with ESPHome

<!-- markdownlint-disable-next-line MD033 -->
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/X10ToPN1gIk"
        title="YouTube video player" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen></iframe>

## ESP-IDF

A huge effort has been put into reorganising, restructuring and rewriting a whole lot of code
to allow ESP32 based boards to be compiled using ESP-IDF as the framework instead of Arduino.
This allows ESPHome to keep up with new features and support for new ESP32 based chips
that Espressif add to the ESP-IDF, such as the ESP32-C3 that a lot of people had been asking about.

There are known issues and specific components that are missing support for ESP-IDF as those ones rely
on an Arduino library and need more time to be rewritten in a compatible way.

The new documentation is here at {{< docref "/components/esp32" >}}.

If you come across an issue while switching to ESP-IDF, please file an
[issue on GitHub](https://github.com/esphome/esphome/issues/new/choose)
using the `ESP32-IDF` option as the platform.

## Dashboard Node Import

If you intend on creating and distributing devices preinstalled with ESPHome, check out {{< docref "/guides/creators" >}}
for more information and the best ways to give the end users the best experience.

The newest feature of this set is the importing of devices found on the network. If the device is running
ESPHome 2021.10 or newer, it can be configured to broadcast a url via mDNS and the ESPHome dashboard will pick this up
and prompt the user to import the device and create a minimal configuration for it.

## Modbus Controller

Support for generic modbus device data has been added. This allows you as a user
to get data and control a modbus device without a native ESPHome component. Although a
native component is still better and preferred if it exists.

- {{< docref "/components/modbus_controller" "Modbus Controller" >}}
- {{< docref "/components/sensor/modbus_controller" "Sensors" >}}
- {{< docref "/components/binary_sensor/modbus_controller" "Binary Sensors" >}}
- {{< docref "/components/text_sensor/modbus_controller" "Text Sensors" >}}
- {{< docref "/components/number/modbus_controller" "Numbers" >}}
- {{< docref "/components/switch/modbus_controller" "Switches" >}}
- {{< docref "/components/output/modbus_controller" "Outputs" >}}

## Text Sensor filters

`text_sensors` now have `filters` that allow you to do string manipulation before the value is
given to the frontend. Check out the [docs here](/components/text_sensor#text_sensor-filters).

## Lighting

The Tuya light platform now supports RGB and HSV datapoints for those TuyaMCU based lights.

Partitions now support adding non-addressable lights into the sequence. As an example you
could build a "fake" addressable light from regular rgb leds.

## Graphs

There is new [Graph](/components/graph#display-graphs) building functions for displays that will allow you to
draw the history of sensors over time. See the docs for examples and images on what this looks like.

## `wait_until`

The `wait_until` action now has an optional `timeout` option that lets you continue or cancel (using an
if action afterwards) your automations if the condition does not become true after a period of time.

## Combination of MiScale 1 & 2

{{< pr number="2266" repo="esphome" >}} combines the two miscale platforms into one as the code was mostly the
same and autodetection could be done to detemine which one you are using.

## Float Output state changes

When using a float output with both invert and min/max values, prevously
the end resut value was being calculated incorrectly. {{< pr number="2368" repo="esphome" >}} fixed this.

<!-- markdownlint-disable MD013 -->

## Release 2021.10.1 - October 21

- Fix MDNS for ESP8266 devices {{< pr number="2571" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Fix ESP8266 GPIO0 Pullup Validation {{< pr number="2572" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix wifi ble coexistence check {{< pr number="2573" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Arduino global delay/millis/... symbols workaround {{< pr number="2575" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix ESP8266 OTA adds unnecessary Update library {{< pr number="2579" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix ESP8266 dallas GPIO16 INPUT_PULLUP {{< pr number="2581" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix platformio version in Dockerfile doesn't match requirements {{< pr number="2582" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix platformio_install_deps no longer installing all lib_deps {{< pr number="2584" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}

## Release 2021.10.2 - October 22

- Fix HeatpumpIR pin {{< pr number="2585" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix PlatformIO version for latest Arduino framework {{< pr number="2590" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix pin/component switchup in SX1509 pin configuration {{< pr number="2593" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix old-style `arduino_version` on ESP8266 and with magic values {{< pr number="2591" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump esphome-dashboard from 20211021.0 to 20211021.1 {{< pr number="2594" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Fix validation of addressable light IDs {{< pr number="2588" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix socket connection closed not detected {{< pr number="2587" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Bump noise-c from 0.1.3 to 0.1.4 {{< pr number="2602" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Add OTA upload compression for ESP8266 {{< pr number="2601" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Re-raise keyboardinterrupt {{< pr number="2603" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Add owner to all libraries used {{< pr number="2604" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix compiler warnings and update platformio line filter {{< pr number="2607" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix ESP8266 OTA compression only starting framework v2.7.0 {{< pr number="2610" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Bugfix tca9548a and idf refactor anh {{< pr number="2612" repo="esphome" >}} by {{< ghuser name="andreashergert1984" >}}

## Release 2021.10.3 - October 27

- fixed dependency for pca9685 component {{< pr number="2614" repo="esphome" >}} by {{< ghuser name="andreashergert1984" >}}
- Bump platform-espressif8266 from 2.6.2 to 2.6.3 {{< pr number="2620" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Autodetect flash size {{< pr number="2615" repo="esphome" >}} by {{< ghuser name="agners" >}}
- Teleinfo ptec {{< pr number="2599" repo="esphome" >}} by {{< ghuser name="0hax" >}}
- Fix glue code missing micros() {{< pr number="2623" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Remove power and energy from sensors that are not true power {{< pr number="2628" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- fix modbus output {{< pr number="2630" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Fix pin number validation for sn74hc595 {{< pr number="2621" repo="esphome" >}} by {{< ghuser name="sairon" >}}
- Fix select.set using lambda {{< pr number="2633" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Full list of changes

### New Features

- Added graphing component {{< pr number="2109" repo="esphome" >}} by {{< ghuser name="synco" >}} (new-integration) (new-feature)
- Add deep sleep wakeup from touch (#1238) {{< pr number="2281" repo="esphome" >}} by {{< ghuser name="chrta" >}} (new-feature)
- Allow non-addressable lights in light partitions {{< pr number="2256" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}} (new-feature)
- Add support for Waveshare 7.5 inch (C) bichromatic display (black-and-white only for now) {{< pr number="1844" repo="esphome" >}} by {{< ghuser name="pixelspark" >}} (new-feature)
- Wifi scan results {{< pr number="1605" repo="esphome" >}} by {{< ghuser name="gpambrozio" >}} (new-feature)
- Add SSD1305 support to SSD1306 integration along with few new options {{< pr number="1902" repo="esphome" >}} by {{< ghuser name="zhangjingye03" >}} (new-feature) (breaking-change)
- Adds light sensor support for b-parasites {{< pr number="2391" repo="esphome" >}} by {{< ghuser name="rbaron" >}} (new-feature)
- Tuya rgb support {{< pr number="2278" repo="esphome" >}} by {{< ghuser name="irtimaled" >}} (new-feature)
- add fan.cycle_speed action {{< pr number="2329" repo="esphome" >}} by {{< ghuser name="WeekendWarrior1" >}} (new-feature)
- Add cover toggle support {{< pr number="1809" repo="esphome" >}} by {{< ghuser name="dtmuller" >}} (new-feature)
- Support HSV-based color support on tuya light {{< pr number="2400" repo="esphome" >}} by {{< ghuser name="irtimaled" >}} (new-feature)
- String manipulation filters for text sensors! {{< pr number="2393" repo="esphome" >}} by {{< ghuser name="WeekendWarrior1" >}} (new-feature)
- Add optional timeout for wait_until action {{< pr number="2282" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)

### New Components

- Added graphing component {{< pr number="2109" repo="esphome" >}} by {{< ghuser name="synco" >}} (new-integration) (new-feature)
- Configurable Flash Write Interval {{< pr number="2119" repo="esphome" >}} by {{< ghuser name="alexyao2015" >}} (new-integration)
- Add support for Daly Smart BMS {{< pr number="2156" repo="esphome" >}} by {{< ghuser name="s1lvi0" >}} (new-integration)
- Add support for LTR390 {{< pr number="1505" repo="esphome" >}} by {{< ghuser name="sjtrny" >}} (new-integration)
- Modbus controller {{< pr number="1779" repo="esphome" >}} by {{< ghuser name="martgras" >}} (new-integration)
- Dashboard node import and render in browser {{< pr number="2374" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (new-integration)
- Add Current based cover {{< pr number="1439" repo="esphome" >}} by {{< ghuser name="djwmarcx" >}} (new-integration)
- Add support for SCD4X {{< pr number="2217" repo="esphome" >}} by {{< ghuser name="sjtrny" >}} (new-integration)
- Add support for Airthing Wave Mini {{< pr number="2440" repo="esphome" >}} by {{< ghuser name="ncareau" >}} (new-integration)
- Add Safe Mode Restart Switch {{< pr number="2437" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}} (new-integration)
- Added heatpumpir support {{< pr number="1343" repo="esphome" >}} by {{< ghuser name="rob-deutsch" >}} (new-integration)
- OTA firmware MD5 check + password support for esp-idf {{< pr number="2507" repo="esphome" >}} by {{< ghuser name="mmakaay" >}} (new-integration)

### Breaking Changes

- Combine code of xiaomi_miscale and xiaomi_miscale2 {{< pr number="2266" repo="esphome" >}} by {{< ghuser name="edenhaus" >}} (breaking-change)
- Correctly invert the float output state {{< pr number="2368" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Add SSD1305 support to SSD1306 integration along with few new options {{< pr number="1902" repo="esphome" >}} by {{< ghuser name="zhangjingye03" >}} (new-feature) (breaking-change)
- Disable dependency finder on ESP32 {{< pr number="2435" repo="esphome" >}} by {{< ghuser name="agners" >}} (breaking-change)

### Beta Fixes

- Fix light state remaining on after turn off with transition {{< pr number="2509" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix: Light flash not restoring previous LightState {{< pr number="2383" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Disallow using UART2 for logger on ESP-32 variants that lack it {{< pr number="2510" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix BME680_BSEC compilation issue with ESP32 {{< pr number="2516" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- add missing include in sgp30 {{< pr number="2517" repo="esphome" >}} by {{< ghuser name="dmitriy5181" >}}
- Fix: Color modes not being correctly used in light partitions {{< pr number="2513" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Add pressure compensation during runtime {{< pr number="2493" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Don't define UART_SELECTION_UART2 when UART2 is unavailable {{< pr number="2512" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Remove BME680_BSEC test {{< pr number="2518" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Fix Nextion HTTPClient error for ESP32 {{< pr number="2524" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Fix bug in register name definition {{< pr number="2526" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- OTA firmware MD5 check + password support for esp-idf {{< pr number="2507" repo="esphome" >}} by {{< ghuser name="mmakaay" >}} (new-integration)
- Replace framework version_hint with source option {{< pr number="2529" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix bitshift on read in ADE7953 {{< pr number="2537" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Allow downloading all bin files from backend in dashboard {{< pr number="2514" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump dashboard to 20211015.0 {{< pr number="2525" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Only show timestamp for dashboard access logs {{< pr number="2540" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix const used for IDF recommended version {{< pr number="2542" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix Bluetooth setup_priorities {{< pr number="2458" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Autodetect ESP32 variant {{< pr number="2530" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump dashboard to 20211019.0 {{< pr number="2549" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix ADC pin validation on ESP32-C3 {{< pr number="2551" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- ignore exception when not waiting for a response {{< pr number="2552" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Bump dashboard to 20211020.0 {{< pr number="2556" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix HA addon so it does not have logout button {{< pr number="2558" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump esphome-dashboard to 20211020.1 {{< pr number="2559" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- A few esp32_ble_server/improv fixes {{< pr number="2562" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump esphome-dashboard to 20211021.0 {{< pr number="2564" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Move running process log line to debug level {{< pr number="2565" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Revert nextion clang-tidy changes {{< pr number="2566" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}

### All changes

- Drop obsolete comments from CONTRIBUTING.md {{< pr number="2271" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Support inverting color temperature on tuya lights {{< pr number="2277" repo="esphome" >}} by {{< ghuser name="irtimaled" >}}
- Untangle core headers (part 1) {{< pr number="2276" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Compatibility with clang-tidy v14 {{< pr number="2272" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Store strings only used for logging in flash {{< pr number="2274" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Expose select on Frontend `web_server:` {{< pr number="2245" repo="esphome" >}} by {{< ghuser name="ayufan" >}}
- Fix devcontainer scripts on Windows {{< pr number="2239" repo="esphome" >}} by {{< ghuser name="alexyao2015" >}}
- Fix SM300D2 sensor component routines so they correctly read the sensor output {{< pr number="2159" repo="esphome" >}} by {{< ghuser name="jamesbraid" >}}
- Bump tzlocal from 2.1 to 3.0 {{< pr number="2154" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Activate owning-memory clang-tidy check {{< pr number="1891" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix issue #2054. PZEM004T Component doesn't set the module address. {{< pr number="1784" repo="esphome" >}} by {{< ghuser name="0x3333" >}}
- Convert st7735.h to use LF line endings {{< pr number="2287" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Add esphal.h include to inkplate6 component {{< pr number="2286" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Revert "Bump tzlocal from 2.1 to 3.0 (#2154)" {{< pr number="2289" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Run clang-tidy against ESP32 {{< pr number="2147" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Run clang-tidy against Arduino 3 {{< pr number="2146" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump click from 7.1.2 to 8.0.1 {{< pr number="1824" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Add stale/lock bots {{< pr number="2299" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Use standard version of make_unique when available {{< pr number="2292" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bug fix of NFC message & records becoming inaccessible in on_tag lambdas {{< pr number="2309" repo="esphome" >}} by {{< ghuser name="JonasEr" >}}
- Dsmr updates {{< pr number="2157" repo="esphome" >}} by {{< ghuser name="glmnet" >}}
- Support direct relay state feedback for tuya climate component {{< pr number="1668" repo="esphome" >}} by {{< ghuser name="kroimon" >}}
- ac_dimmer increase gate time for robotdyn {{< pr number="1708" repo="esphome" >}} by {{< ghuser name="glmnet" >}}
- Bump aioesphomeapi from 9.0.0 to 9.1.0 {{< pr number="2306" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump black from 21.8b0 to 21.9b0 {{< pr number="2305" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Add namespace to all PlatformIO library references {{< pr number="2296" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Allow transforms and flashes to not update remote_values {{< pr number="2313" repo="esphome" >}} by {{< ghuser name="matthewmazzanti" >}}
- Reduce stale/lock gh actions interval {{< pr number="2341" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Add `esp8266_disable_ssl_support:` config option {{< pr number="2236" repo="esphome" >}} by {{< ghuser name="ayufan" >}}
- Bump pylint from 2.10.2 to 2.11.1 {{< pr number="2334" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Add eco mode to tuya climate component {{< pr number="1860" repo="esphome" >}} by {{< ghuser name="kroimon" >}}
- Fix SPIDevice::write_byte16 to actually take a 16 bit argument {{< pr number="2345" repo="esphome" >}} by {{< ghuser name="lgugelmann" >}}
- Redo docker build system with buildkit+multi-stage and cache pio packages {{< pr number="2338" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Calculating the AC only component of the samples {{< pr number="1906" repo="esphome" >}} by {{< ghuser name="synco" >}}
- Fix error reporting for DHT bit read loop {{< pr number="2344" repo="esphome" >}} by {{< ghuser name="besteru" >}}
- Also run docker CI when requirements change {{< pr number="2347" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Added graphing component {{< pr number="2109" repo="esphome" >}} by {{< ghuser name="synco" >}} (new-integration) (new-feature)
- Properly calculate negative temperatures in sm300d2 {{< pr number="2335" repo="esphome" >}} by {{< ghuser name="poptix" >}}
- Fix docker release deploy push flag {{< pr number="2348" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Add invert_colors option for st7735 {{< pr number="2327" repo="esphome" >}} by {{< ghuser name="g5pw" >}}
- Add deep sleep wakeup from touch (#1238) {{< pr number="2281" repo="esphome" >}} by {{< ghuser name="chrta" >}} (new-feature)
- Add ESPHOME_VERSION_CODE define {{< pr number="2324" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Install python requirements after apt ones for better caching {{< pr number="2349" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Introduce call_dump_config() indirection {{< pr number="2325" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- ESP-IDF support and generic target platforms {{< pr number="2303" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- CI cache only restore from direct matches {{< pr number="2351" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- fixes compilation error in rtttl {{< pr number="2357" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Fix MDNS not registered {{< pr number="2359" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix src_filter in platformio.ini after src_dir change {{< pr number="2353" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix duplicate defines and restore alphabetical order {{< pr number="2352" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Configurable Flash Write Interval {{< pr number="2119" repo="esphome" >}} by {{< ghuser name="alexyao2015" >}} (new-integration)
- Fix OTA password mismatch error. {{< pr number="2363" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Allow compilation against IDF from repository {{< pr number="2355" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix ESP8266 preferences not set up {{< pr number="2362" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix ESP8266 preference loading {{< pr number="2367" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Allow non-addressable lights in light partitions {{< pr number="2256" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}} (new-feature)
- add = to default font glpyh list {{< pr number="2361" repo="esphome" >}} by {{< ghuser name="WeekendWarrior1" >}}
- Fix docker pio settings not applied {{< pr number="2370" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix OTA crash during reading of new bin file. {{< pr number="2366" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Fix Dallas parent not being set {{< pr number="2369" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Discard SenseAir S8 commands echoes & fix calibration result check {{< pr number="2358" repo="esphome" >}} by {{< ghuser name="nmaggioni" >}}
- Add support for Daly Smart BMS {{< pr number="2156" repo="esphome" >}} by {{< ghuser name="s1lvi0" >}} (new-integration)
- Combine code of xiaomi_miscale and xiaomi_miscale2 {{< pr number="2266" repo="esphome" >}} by {{< ghuser name="edenhaus" >}} (breaking-change)
- Add support for Waveshare 7.5 inch (C) bichromatic display (black-and-white only for now) {{< pr number="1844" repo="esphome" >}} by {{< ghuser name="pixelspark" >}} (new-feature)
- ili9341: use larger SPI transfers {{< pr number="1628" repo="esphome" >}} by {{< ghuser name="numo68" >}}
- Correctly invert the float output state {{< pr number="2368" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Add support for LTR390 {{< pr number="1505" repo="esphome" >}} by {{< ghuser name="sjtrny" >}} (new-integration)
- Allow sloppy Tuya datapoint message length {{< pr number="1982" repo="esphome" >}} by {{< ghuser name="trvrnrth" >}}
- Mqtt topics to support numeric fan speed {{< pr number="1859" repo="esphome" >}} by {{< ghuser name="wifwucite" >}}
- Wifi scan results {{< pr number="1605" repo="esphome" >}} by {{< ghuser name="gpambrozio" >}} (new-feature)
- Add SSD1305 support to SSD1306 integration along with few new options {{< pr number="1902" repo="esphome" >}} by {{< ghuser name="zhangjingye03" >}} (new-feature) (breaking-change)
- Fix broken compilation due to conflict between #1237 and IDF changes {{< pr number="2372" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Don't generate IDs with the name of loaded integrations {{< pr number="2373" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- fix i2c scanning eror for Arduino {{< pr number="2364" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Bump tzlocal from 2.1 to 3.0 {{< pr number="2294" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- ledc: do not try to write_state to an uninitialized output {{< pr number="1732" repo="esphome" >}} by {{< ghuser name="toelke" >}}
- Fix two i2c error code return errors {{< pr number="2375" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix ir_climate on ESP32-C3 {{< pr number="2314" repo="esphome" >}} by {{< ghuser name="stintel" >}}
- Fix ESP8266 ADC {{< pr number="2376" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Fix: Pin flags code generation returning FLAG_NONE {{< pr number="2377" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Add missing MockObj operators {{< pr number="2378" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix esp-idf pinmask bit-shift overflow {{< pr number="2380" repo="esphome" >}} by {{< ghuser name="chrta" >}}
- Add i2c bus recovery during initialization {{< pr number="2379" repo="esphome" >}} by {{< ghuser name="chrta" >}}
- Bump voluptuous from 0.12.1 to 0.12.2 {{< pr number="2381" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Read unencrypted DSMR telegrams in chunks {{< pr number="2382" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Fix clang-tidy header filter {{< pr number="2385" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix InterruptLock on ESP-IDF {{< pr number="2388" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix some issues with wifi driver after IDF refactor {{< pr number="2387" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix arduino esp32 wifi v2 {{< pr number="2389" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Misc fixes for esp-idf {{< pr number="2386" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Adds light sensor support for b-parasites {{< pr number="2391" repo="esphome" >}} by {{< ghuser name="rbaron" >}} (new-feature)
- fix: Setting Tuya string DP value {{< pr number="2394" repo="esphome" >}} by {{< ghuser name="irtimaled" >}}
- Tuya rgb support {{< pr number="2278" repo="esphome" >}} by {{< ghuser name="irtimaled" >}} (new-feature)
- add fan.cycle_speed action {{< pr number="2329" repo="esphome" >}} by {{< ghuser name="WeekendWarrior1" >}} (new-feature)
- Modbus controller {{< pr number="1779" repo="esphome" >}} by {{< ghuser name="martgras" >}} (new-integration)
- Extend nfc ndef records with Text {{< pr number="2191" repo="esphome" >}} by {{< ghuser name="JonasEr" >}}
- Fix NDEF URI casing {{< pr number="2397" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Dashboard node import and render in browser {{< pr number="2374" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (new-integration)
- ccs811: Skip reading data if it is not available/ready {{< pr number="2404" repo="esphome" >}} by {{< ghuser name="chrta" >}}
- Add missing include for component bme680_bsec {{< pr number="2403" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- fix: stop tuya light state getting reset {{< pr number="2401" repo="esphome" >}} by {{< ghuser name="irtimaled" >}}
- Add Current based cover {{< pr number="1439" repo="esphome" >}} by {{< ghuser name="djwmarcx" >}} (new-integration)
- Add cover toggle support {{< pr number="1809" repo="esphome" >}} by {{< ghuser name="dtmuller" >}} (new-feature)
- Fix handling of timestamps in Teleinfo component. {{< pr number="2392" repo="esphome" >}} by {{< ghuser name="0hax" >}}
- bump dashboard to 20210927.0 {{< pr number="2405" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Add str_sprintf function that returns std::string {{< pr number="2408" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix lint issues in web_server_base {{< pr number="2409" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix uninitialised use of ESPPreferenceObject.backend {{< pr number="2411" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Add support for SCD4X {{< pr number="2217" repo="esphome" >}} by {{< ghuser name="sjtrny" >}} (new-integration)
- Support HSV-based color support on tuya light {{< pr number="2400" repo="esphome" >}} by {{< ghuser name="irtimaled" >}} (new-feature)
- Tuya: add cover component {{< pr number="2279" repo="esphome" >}} by {{< ghuser name="marmarek" >}}
- Fix tuya cover lint checks {{< pr number="2414" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Bump debian base to 5.1.0 / 20210902 {{< pr number="2413" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Remove default initializations from tuya cover {{< pr number="2415" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Move #ifdef to after header include {{< pr number="2417" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- String manipulation filters for text sensors! {{< pr number="2393" repo="esphome" >}} by {{< ghuser name="WeekendWarrior1" >}} (new-feature)
- Update web_server.cpp {{< pr number="2419" repo="esphome" >}} by {{< ghuser name="arallsopp" >}}
- Fix default environment for clang-tidy {{< pr number="2420" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Replace std::move() with const references where possible {{< pr number="2421" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix line endings normalization {{< pr number="2407" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Option to ignore CRC for EFuse MAC address {{< pr number="2399" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Fix attach_interrupt(...) for esp-idf framework {{< pr number="2416" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Fix I2C recovery on Arduino {{< pr number="2412" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Fix ESP32 esp-idf OTA updates {{< pr number="2424" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Add local MAC address to WiFi info {{< pr number="2428" repo="esphome" >}} by {{< ghuser name="cvwillegen" >}}
- Thermostat publish state fix {{< pr number="2427" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Convert time to use tzdata {{< pr number="2425" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Hotfix for ESP8266 OTA issue: ERROR Error binary size {{< pr number="2432" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Disable dependency finder on ESP32 {{< pr number="2435" repo="esphome" >}} by {{< ghuser name="agners" >}}
- Use size_t to fix comparision using RISC-V toolchain {{< pr number="2436" repo="esphome" >}} by {{< ghuser name="agners" >}}
- Fix I2C recovery ESP32 esp-idf {{< pr number="2438" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Fix esp32 no longer has Hash internal lib {{< pr number="2441" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix restoring globals {{< pr number="2442" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Always upload using esptool {{< pr number="2433" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Add support for Airthing Wave Mini {{< pr number="2440" repo="esphome" >}} by {{< ghuser name="ncareau" >}} (new-integration)
- Improved validation for Addressable Light Partition Segments {{< pr number="2439" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Bump pytest-cov from 2.12.1 to 3.0.0 {{< pr number="2444" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Fix compilation error for shutdown component {{< pr number="2447" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Bump aioesphomeapi from 9.1.4 to 9.1.5 {{< pr number="2449" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Only ping once every two seconds {{< pr number="2448" repo="esphome" >}} by {{< ghuser name="alexiri" >}}
- Bump esphome-dashboard to 20211006.0 {{< pr number="2451" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- I2C re-introduce very verbose logging {{< pr number="2446" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Add Safe Mode Restart Switch {{< pr number="2437" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}} (new-integration)
- Add id() for restoring global {{< pr number="2454" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add timestamp to ESPHome dashboard/cli logs {{< pr number="2455" repo="esphome" >}} by {{< ghuser name="alexiri" >}}
- I2c fix {{< pr number="2460" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Correct I2C read() return val check in bh1750 component. {{< pr number="2465" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- atm90e32: make the total_increasing class sensors actually be increasing totals. {{< pr number="2459" repo="esphome" >}} by {{< ghuser name="davidmonro" >}}
- Use enum for Tuya fan direction datapoint {{< pr number="2471" repo="esphome" >}} by {{< ghuser name="rmounce" >}}
- Fix MQTT cover state when position is supported {{< pr number="2468" repo="esphome" >}} by {{< ghuser name="definitio" >}}
- Sgp40 fix {{< pr number="2462" repo="esphome" >}} by {{< ghuser name="natelust" >}}
- EntityBase Refactor {{< pr number="2418" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Fix below freezing temperature for Inkbird sensors {{< pr number="2466" repo="esphome" >}} by {{< ghuser name="nuttytree" >}}
- Add configuration for cover topics {{< pr number="2472" repo="esphome" >}} by {{< ghuser name="definitio" >}}
- Add configuration for climate topics {{< pr number="2473" repo="esphome" >}} by {{< ghuser name="definitio" >}}
- Use arduino btStart for arduino framework {{< pr number="2457" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump click from 8.0.1 to 8.0.3 {{< pr number="2481" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump flake8 from 3.9.2 to 4.0.1 {{< pr number="2483" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump platformio from 5.2.0 to 5.2.1 {{< pr number="2482" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump esphome-dashboard from 20211006.0 to 20211011.1 {{< pr number="2484" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Replace deprecated COLOR_BLACK constant {{< pr number="2487" repo="esphome" >}} by {{< ghuser name="davet2001" >}}
- Fix color temperature persistence on CWWW lights {{< pr number="2486" repo="esphome" >}} by {{< ghuser name="sairon" >}}
- Fix reset on http_request without network connection {{< pr number="2474" repo="esphome" >}} by {{< ghuser name="niklasweber" >}}
- Consolidate CONF_RAW_DATA_ID to const.py {{< pr number="2491" repo="esphome" >}} by {{< ghuser name="davet2001" >}}
- Update Airthings BLE {{< pr number="2453" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add on_open and on_closed triggers to cover {{< pr number="2488" repo="esphome" >}} by {{< ghuser name="nuttytree" >}}
- Fix LoadProhibited crash for logger baud_rate 0 on esp-idf {{< pr number="2498" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Added heatpumpir support {{< pr number="1343" repo="esphome" >}} by {{< ghuser name="rob-deutsch" >}} (new-integration)
- Reduce IRAM usage in test3 {{< pr number="2499" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Add optional timeout for wait_until action {{< pr number="2282" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- Improves ct_clamp component accuracy {{< pr number="2283" repo="esphome" >}} by {{< ghuser name="skasi7" >}}
- Allow multiple pn532_spi entries {{< pr number="2489" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add throttle_average sensor filter {{< pr number="2485" repo="esphome" >}} by {{< ghuser name="sermayoral" >}}
- Fix light state remaining on after turn off with transition {{< pr number="2509" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix: Light flash not restoring previous LightState {{< pr number="2383" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Disallow using UART2 for logger on ESP-32 variants that lack it {{< pr number="2510" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix BME680_BSEC compilation issue with ESP32 {{< pr number="2516" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- add missing include in sgp30 {{< pr number="2517" repo="esphome" >}} by {{< ghuser name="dmitriy5181" >}}
- Fix: Color modes not being correctly used in light partitions {{< pr number="2513" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Add pressure compensation during runtime {{< pr number="2493" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Don't define UART_SELECTION_UART2 when UART2 is unavailable {{< pr number="2512" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Remove BME680_BSEC test {{< pr number="2518" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Fix Nextion HTTPClient error for ESP32 {{< pr number="2524" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Fix bug in register name definition {{< pr number="2526" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- OTA firmware MD5 check + password support for esp-idf {{< pr number="2507" repo="esphome" >}} by {{< ghuser name="mmakaay" >}} (new-integration)
- Replace framework version_hint with source option {{< pr number="2529" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix bitshift on read in ADE7953 {{< pr number="2537" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Allow downloading all bin files from backend in dashboard {{< pr number="2514" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump dashboard to 20211015.0 {{< pr number="2525" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Only show timestamp for dashboard access logs {{< pr number="2540" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix const used for IDF recommended version {{< pr number="2542" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix Bluetooth setup_priorities {{< pr number="2458" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Autodetect ESP32 variant {{< pr number="2530" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump dashboard to 20211019.0 {{< pr number="2549" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix ADC pin validation on ESP32-C3 {{< pr number="2551" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- ignore exception when not waiting for a response {{< pr number="2552" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Bump dashboard to 20211020.0 {{< pr number="2556" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix HA addon so it does not have logout button {{< pr number="2558" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump esphome-dashboard to 20211020.1 {{< pr number="2559" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- A few esp32_ble_server/improv fixes {{< pr number="2562" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump esphome-dashboard to 20211021.0 {{< pr number="2564" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Move running process log line to debug level {{< pr number="2565" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Revert nextion clang-tidy changes {{< pr number="2566" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}

<!-- markdownlint-enable MD013 -->

## All Changelogs

{{< changelogs >}}
