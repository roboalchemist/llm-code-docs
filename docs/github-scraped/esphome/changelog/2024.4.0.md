---
description: "Changelog for ESPHome 2024.4.0."
title: "ESPHome 2024.4.0 - 17th April 2024"
params:
  seo:
    description: Changelog for ESPHome 2024.4.0.
    image: /_static/changelog-2024.4.0.png
---

{{< imgtable >}}
"Template Datetime Time","components/datetime/template","description.svg","dark-invert"
"SUN-GTIL2 inverter","components/sun_gtil2","sun_1000g2.png",""
"AT581X","components/at581x","at581x.png",""
"JSN-SR04T","components/sensor/jsn_sr04t","jsn-sr04t-v3.jpg",""
"Daikin ARC","components/climate/climate_ir","air-conditioner-ir.svg","dark-invert"
"HHCCJCY10 (MiFlora Pink)","components/sensor/xiaomi_hhccjcy10","xiaomi_hhccjcy10.jpg",""
"TLC5971","components/output/tlc5971","tlc5971.jpg",""
"Dooya","components/remote_transmitter","remote.svg",""
{{< /imgtable >}}

## Time Entities

ESPHome now has support for `time` entities that can be set from the frontend (like Home Assistant).
This allows you to set a timer to execute future automations on device.

ESPHome Dates require Home Assistant 2024.4 or later.

## Voice Assistant Audio

This release adds support for sending and receiving audio to/from voice assistants via the API. Currently ESPHome
sends and receives the Voice Assistant audio bytes via a UDP socket which can be unreliable and insecure.
Beginning with Home Assistant 2024.5, both sides will automatically recognise that they both support API Audio and will
use that route instead. This is more reliable because the ESPHome API uses a TCP socket, so packet order and
delivery is guaranteed, and if you use API Encryption, your audio will also be encrypted in transit.

<!-- markdownlint-disable MD013 -->

## Release 2024.4.1 - April 23

- [Tuya Climate] Fix compilation error caused by codegen {{< pr number="6568" repo="esphome" >}} by {{< ghuser name="zry98" >}}
- wifi: fix reconnect issue due to enablement of fast connect {{< pr number="6598" repo="esphome" >}} by {{< ghuser name="jpeletier" >}}
- Calibrate Beken internal temperature {{< pr number="6599" repo="esphome" >}} by {{< ghuser name="Mat931" >}}
- fix streaming logs from MQTT for ESP32 devices using TLS {{< pr number="6605" repo="esphome" >}} by {{< ghuser name="ccutrer" >}}
- Disallow variant/family override for known boards {{< pr number="6512" repo="esphome" >}} by {{< ghuser name="clydebarrow" >}}
- esp32_ble: Consider ESP_BT_STATUS_DONE a successful state {{< pr number="6493" repo="esphome" >}} by {{< ghuser name="polyfloyd" >}}
- Fix or filter {{< pr number="6574" repo="esphome" >}} by {{< ghuser name="swoboda1337" >}}

## Release 2024.4.2 - April 30

- Fix SHT3xd fails sometimes in 2024.4.0 {{< pr number="6592" repo="esphome" >}} by {{< ghuser name="mrtoy-me" >}}
- allow defaults with no include vars {{< pr number="6613" repo="esphome" >}} by {{< ghuser name="ssieb" >}}
- Revert #6458 {{< pr number="6650" repo="esphome" >}} by {{< ghuser name="tronikos" >}}
- [i2s_audio.microphone] Fixing adc bug {{< pr number="6654" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Full list of changes

### New Components

- Add sun_gtil2 component (for SUN-1000G2 / SUN-2000G2 grid tie inverters) {{< pr number="4958" repo="esphome" >}} by {{< ghuser name="Mat931" >}} (new-integration)
- Add support for AT581x component {{< pr number="6297" repo="esphome" >}} by {{< ghuser name="X-Ryl669" >}} (new-integration)
- Add new Component: Ultrasonic Distance Sensor JSN-SR04T {{< pr number="6023" repo="esphome" >}} by {{< ghuser name="Mafus1" >}} (new-integration)
- feat: Add Daikin ARC (tested on Daikin ARC472A62) {{< pr number="6429" repo="esphome" >}} by {{< ghuser name="magicbear" >}} (new-integration)
- add support for Tuya pink version of miflora {{< pr number="5402" repo="esphome" >}} by {{< ghuser name="fariouche" >}} (new-integration)
- Implemented support for the TLC5971 as an output component {{< pr number="6494" repo="esphome" >}} by {{< ghuser name="IJIJI" >}} (new-integration)

### Breaking Changes

- Add support for new modes in Tuya Climate {{< pr number="5159" repo="esphome" >}} by {{< ghuser name="moriahmorgan" >}} (breaking-change)
- IPv6 string representation follows RFC5952 {{< pr number="6449" repo="esphome" >}} by {{< ghuser name="HeMan" >}} (breaking-change)

### Beta Changes

- Add dooya remote transmitter test {{< pr number="6508" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- ads1115: remove auto-load and split sensor into platform folder {{< pr number="5981" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-platform)
- Bump esphome-dashboard to 20240412.0 {{< pr number="6517" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix missing ifdefs in voice assistant {{< pr number="6520" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix project version longer than 30 characters breaking compilation {{< pr number="6535" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix no-release bug on ft6x36 {{< pr number="6527" repo="esphome" >}} by {{< ghuser name="clydebarrow" >}}

### All changes

- Bump docker/login-action from 3.0.0 to 3.1.0 {{< pr number="6367" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump peter-evans/create-pull-request from 6.0.1 to 6.0.2 {{< pr number="6361" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump docker/build-push-action from 5.2.0 to 5.3.0 in /.github/actions/build-image {{< pr number="6373" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump docker/setup-buildx-action from 3.1.0 to 3.2.0 {{< pr number="6372" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Fix deep_sleep for ESP32-C6 {{< pr number="6377" repo="esphome" >}} by {{< ghuser name="ferrets6" >}}
- Fix keeloq for IDF 5+ {{< pr number="6382" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Fix Nextion set_component_picture call {{< pr number="6378" repo="esphome" >}} by {{< ghuser name="edwardtfn" >}}
- Add line_at_angle method to Display component {{< pr number="6381" repo="esphome" >}} by {{< ghuser name="deisterhold" >}}
- Check generated proto files are as expected if any are modified in PRs {{< pr number="6254" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- ld2420: fix energy mode documentation {{< pr number="6225" repo="esphome" >}} by {{< ghuser name="andresv" >}}
- Add actions for component tests A, B and C {{< pr number="6256" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add some components to the new testing framework (V) {{< pr number="6231" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add some components to the new testing framework (X,Y,Z) {{< pr number="6233" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add some components to the new testing framework (E) {{< pr number="6176" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Make SPI compile with IDF >= 5.0 {{< pr number="6383" repo="esphome" >}} by {{< ghuser name="HeMan" >}}
- Fix esp32-camera test yaml {{< pr number="6398" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Bump pytest-asyncio from 0.23.5.post1 to 0.23.6 {{< pr number="6402" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump actions/cache from 4.0.1 to 4.0.2 in /.github/actions/restore-python {{< pr number="6403" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump actions/cache from 4.0.1 to 4.0.2 {{< pr number="6404" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump ESP8266 Arduino versions {{< pr number="5359" repo="esphome" >}} by {{< ghuser name="HeMan" >}}
- Allow accept/reject delta to be specified. {{< pr number="5060" repo="esphome" >}} by {{< ghuser name="cvwillegen" >}}
- Allow setting htop for ledc {{< pr number="6340" repo="esphome" >}} by {{< ghuser name="Gagootron" >}}
- sm2135: add separate_modes option to support different chip variants {{< pr number="6152" repo="esphome" >}} by {{< ghuser name="jasperro" >}}
- AHT10: fix temperature-only operation; add warning/error messages {{< pr number="6405" repo="esphome" >}} by {{< ghuser name="clydebarrow" >}}
- Add support for new modes in Tuya Climate {{< pr number="5159" repo="esphome" >}} by {{< ghuser name="moriahmorgan" >}} (breaking-change)
- Add sun_gtil2 component (for SUN-1000G2 / SUN-2000G2 grid tie inverters) {{< pr number="4958" repo="esphome" >}} by {{< ghuser name="Mat931" >}} (new-integration)
- SPI: Make some validation failures give more useful messages. {{< pr number="6413" repo="esphome" >}} by {{< ghuser name="clydebarrow" >}}
- Bump aioesphomeapi from 23.1.1 to 23.2.0 {{< pr number="6412" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Add check for use of GPIOXX in config {{< pr number="6419" repo="esphome" >}} by {{< ghuser name="clydebarrow" >}}
- WireGuard for esp8266 {{< pr number="6365" repo="esphome" >}} by {{< ghuser name="droscy" >}}
- setup.cfg: drop duplicate, underintended trove classifier {{< pr number="6421" repo="esphome" >}} by {{< ghuser name="mweinelt" >}}
- Store preferences in disk file on host platform {{< pr number="6428" repo="esphome" >}} by {{< ghuser name="clydebarrow" >}}
- Add support for AT581x component {{< pr number="6297" repo="esphome" >}} by {{< ghuser name="X-Ryl669" >}} (new-integration)
- Add some components to the new testing framework (F) {{< pr number="6177" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add get_contrast() and get_brightness() to SSD1306 class to get protected variables {{< pr number="6435" repo="esphome" >}} by {{< ghuser name="benediktkr" >}}
- Add new Component: Ultrasonic Distance Sensor JSN-SR04T {{< pr number="6023" repo="esphome" >}} by {{< ghuser name="Mafus1" >}} (new-integration)
- Add some components to the new testing framework (G) {{< pr number="6178" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add some components to the new testing framework (K) {{< pr number="6186" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add some components to the new testing framework (N) {{< pr number="6210" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add some components to the new testing framework (Q) {{< pr number="6218" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add some components to the new testing framework (U) {{< pr number="6230" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Fix spacing in new test yaml {{< pr number="6441" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add some components to the new testing framework (W) {{< pr number="6232" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add some components to the new testing framework (L) {{< pr number="6195" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- feat: Add Daikin ARC (tested on Daikin ARC472A62) {{< pr number="6429" repo="esphome" >}} by {{< ghuser name="magicbear" >}} (new-integration)
- Disable truthy yamllint rule {{< pr number="6442" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add get_size method to QR Code header {{< pr number="6430" repo="esphome" >}} by {{< ghuser name="deisterhold" >}}
- Minor change to support sht85 sensor {{< pr number="6415" repo="esphome" >}} by {{< ghuser name="mrtoy-me" >}}
- IPv6 string representation follows RFC5952 {{< pr number="6449" repo="esphome" >}} by {{< ghuser name="HeMan" >}} (breaking-change)
- Bump actions/setup-python from 5.0.0 to 5.1.0 {{< pr number="6437" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump actions/setup-python from 5.0.0 to 5.1.0 in /.github/actions/restore-python {{< pr number="6438" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Optimize QMC5883L: Read registers only for enabled sensors {{< pr number="6458" repo="esphome" >}} by {{< ghuser name="tronikos" >}}
- minor refactor to allow commit hash as ref value. {{< pr number="6446" repo="esphome" >}} by {{< ghuser name="LelandSindt" >}}
- TMP117 fix polling period config {{< pr number="6452" repo="esphome" >}} by {{< ghuser name="mrtoy-me" >}}
- Bump Arduino Pico Framework to 3.7.2 and Platform to 1.12.0 {{< pr number="6386" repo="esphome" >}} by {{< ghuser name="HeMan" >}}
- Display menu: Allow "left" key to exit current menu if not editing {{< pr number="6460" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix NOLINT on inclusive-language check {{< pr number="6464" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add yamllint to dev requirements {{< pr number="6466" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add temperature for QMC5883L {{< pr number="6456" repo="esphome" >}} by {{< ghuser name="tronikos" >}}
- web_server: Return early if no clients connected {{< pr number="6467" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- ESP32 Arduino WiFi: misc bug fixes {{< pr number="6470" repo="esphome" >}} by {{< ghuser name="paravoid" >}}
- Replace std::regex with sscanf calls {{< pr number="6468" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Include "Failed" status in config log. {{< pr number="6482" repo="esphome" >}} by {{< ghuser name="clydebarrow" >}}
- Fix Microphone IsCapturingCondition {{< pr number="6490" repo="esphome" >}} by {{< ghuser name="RaymiiOrg" >}}
- Remove misleading tag/line in messages {{< pr number="6495" repo="esphome" >}} by {{< ghuser name="clydebarrow" >}}
- Send/Receive Voice Assistant audio via API {{< pr number="6471" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Datetime date initial value fix {{< pr number="6483" repo="esphome" >}} by {{< ghuser name="RFDarter" >}}
- If the loop() took more than the required time, don't delay further {{< pr number="6496" repo="esphome" >}} by {{< ghuser name="clydebarrow" >}}
- Bump LibreTiny version to 1.5.1 {{< pr number="6500" repo="esphome" >}} by {{< ghuser name="kuba2k2" >}}
- Internal temperature: Support Beken platform {{< pr number="6491" repo="esphome" >}} by {{< ghuser name="Mat931" >}}
- Bump docker/setup-buildx-action from 3.2.0 to 3.3.0 {{< pr number="6502" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- add support for Tuya pink version of miflora {{< pr number="5402" repo="esphome" >}} by {{< ghuser name="fariouche" >}} (new-integration)
- Add MAC address to WiFi config reply {{< pr number="6489" repo="esphome" >}} by {{< ghuser name="cvwillegen" >}}
- Adds i2c timeout config {{< pr number="4614" repo="esphome" >}} by {{< ghuser name="tracestep" >}}
- Add ABB-Welcome / Busch-Welcome Door Intercom Protocol {{< pr number="4689" repo="esphome" >}} by {{< ghuser name="Mat931" >}}
- Add support for time entities {{< pr number="6399" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix Match by IRK {{< pr number="6499" repo="esphome" >}} by {{< ghuser name="MRemy2" >}}
- Add rmt_channel to remote_transmitter and remote_receiver {{< pr number="6497" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)
- Rework tlc5947 to remove AUTO_LOAD {{< pr number="6503" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- UART: ignore require_tx/rx if not a native uart implementation {{< pr number="6504" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- esp32_rmt_led_strip bugfixes {{< pr number="6506" repo="esphome" >}} by {{< ghuser name="Mat931" >}}
- Implemented support for the TLC5971 as an output component {{< pr number="6494" repo="esphome" >}} by {{< ghuser name="IJIJI" >}} (new-integration)
- Add Dooya protocol to remote_base {{< pr number="6488" repo="esphome" >}} by {{< ghuser name="bukureckid" >}}
- Only give error for connected sensors at startup {{< pr number="6474" repo="esphome" >}} by {{< ghuser name="leejoow" >}}
- Webserver float to string fix {{< pr number="6507" repo="esphome" >}} by {{< ghuser name="RFDarter" >}}
- Add dooya remote transmitter test {{< pr number="6508" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- ads1115: remove auto-load and split sensor into platform folder {{< pr number="5981" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-platform)
- Bump esphome-dashboard to 20240412.0 {{< pr number="6517" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix missing ifdefs in voice assistant {{< pr number="6520" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix project version longer than 30 characters breaking compilation {{< pr number="6535" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix no-release bug on ft6x36 {{< pr number="6527" repo="esphome" >}} by {{< ghuser name="clydebarrow" >}}

<!-- markdownlint-enable MD013 -->

## All Changelogs

{{< changelogs >}}
