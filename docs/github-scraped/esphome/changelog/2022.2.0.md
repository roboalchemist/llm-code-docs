---
description: "Changelog for ESPHome 2022.2.0."
title: "ESPHome 2022.2.0 - 16th February 2022"
params:
  seo:
    description: Changelog for ESPHome 2022.2.0.
    image: /_static/changelog-2022.2.0.png
---

{{< imgtable >}}
"Lock Core","components/lock/index","folder-open.svg","dark-invert"
"Generic Output Lock","components/lock/output","upload.svg","dark-invert"
"Template Lock","components/lock/template","description.svg","dark-invert"
"QR Code","components/display/index","qr-code.svg",""
"Touchscreen Core","components/touchscreen/index","folder-open.svg","dark-invert"
"EKTF2232","components/touchscreen/ektf2232","ektf2232.svg",""
"Lilygo T5 4.7""","components/touchscreen/lilygo_t5_47","lilygo_t5_47_touch.jpg",""
"MLX90393","components/sensor/mlx90393","mlx90393.jpg",""
"Wake-on-LAN Button","components/button/wake_on_lan","power_settings.svg","dark-invert"
"Generic Output Button","components/button/output","upload.svg","dark-invert"
"Xiaomi MHOC303","components/sensor/xiaomi_ble","xiaomi_mijia_logo.jpg",""
"RadonEye BLE","components/sensor/radon_eye_ble","radon_eye_logo.png",""
"Modbus Select","components/select/modbus_controller","modbus.png",""
"MAX9611","components/sensor/max9611","max9611.jpg",""
"Inkplate 6 Plus","components/display/inkplate6","inkplate6.jpg",""
{{< /imgtable >}}

## Home Assistant Addon Repo

In a future Supervisor version, the [ESPHome Home Assistant addon repository](https://github.com/esphome/home-assistant-addon)
will be added by default to new Home Assistant installations.
We have decided that we will deprecate the ESPHome addon inside the
[Community Addons](https://github.com/hassio-addons/repository)
and everyone should move to the ESPHome repo. It is safe to delete the
ESPHome addon as your configuration YAML files are stored in the Home
Assistant configuration folder.

You can add the ESPHome addon here:

[![Open your Home Assistant instance and show the dashboard of an add-on.][my-badge]][my-url]

[my-badge]: https://my.home-assistant.io/badges/supervisor_addon.svg
[my-url]: https://my.home-assistant.io/redirect/supervisor_addon/?addon=5c53de3b_esphome&repository_url=https%3A%2F%2Fgithub.com%2Fesphome%2Fhome-assistant-addon

## Locks

Lock Entities have been added to ESPHome. These will be available after Home Assistant 2022.3 is released.
Thanks {{< ghuser name="kbickar" >}}.

## ESP8266 recommended framework bump

The recommended (and therefore default) version of Arduino for ESP8266 devices
has been bumped to 3.0.2 from 2.7.4. This brings many underlying changes to the
ESP8266 SDK. The 3.0.2 release has been out since July 2021 but ESPHome just
did not bump the default until now.

## FastLED

Due to the Arduino bump, the FastLED library suffers issues when running on ESP8266
on Arduino 3+. Because of this there is now a restriction on the `fastled_clockless`
and `fastled_spi` components to only allow using them if you change the arduino version
back to 2.7.4 or lower. This will be in place until the library can update and fix the
issues. See the {{< docref "/components/light/fastled" "documentation" >}} for information on how
to continue using the lights.

## Improv serial Wi-Fi scan

Improv serial has been updated to be able to start a Wi-Fi scan and send the results
back to the improv client so the user can select the network SSID instead of having to type it in.

## Tuya Multi multi-datapoint

Some work was done on the tuya component to support devices that send all of their
datapoints in a single message. This allows for more devices to be supported and should
not cause issues with existing devices but please create an issue if it does.

## Debug Sensors Breaking change

The sub-sensors of the `debug` have been moved to their respective component platforms.
Please see the {{< docref "/components/debug" "documentation" >}} page for the new way to configure them.

<!-- markdownlint-disable MD013 -->

## Release 2022.2.1 - February 17

- Fix missed ARDUINO_VERSION_CODE to USE_ARDUINO_VERSION_CODE changes {{< pr number="3206" repo="esphome" >}} by {{< ghuser name="stewiem2000" >}}

## Release 2022.2.2 - February 18

- Set entity-category to diagnostic for debug component {{< pr number="3209" repo="esphome" >}} by {{< ghuser name="stewiem2000" >}}
- Fix platformio docker version mismstch {{< pr number="3215" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Add LONG LONG flag for arduinojson {{< pr number="3212" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Release 2022.2.3 - February 18

- Bump platformio from 5.2.4 to 5.2.5 {{< pr number="3188" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}

## Release 2022.2.4 - February 21

- Publish NAN when dallas conversion failed {{< pr number="3227" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix ESP8266 climate memaccess warning {{< pr number="3226" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Improve ESP8266 iram usage {{< pr number="3223" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- ESP32-C3 deep sleep fix {{< pr number="3066" repo="esphome" >}} by {{< ghuser name="Troublebrewing" >}}
- Fix lilygo touchscreen rotation {{< pr number="3221" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix fatal erroring in addon startup script {{< pr number="3244" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Release 2022.2.5 - February 23

- Respect ESPHOME_USE_SUBPROCESS in esp32 post_build script {{< pr number="3246" repo="esphome" >}} by {{< ghuser name="mweinelt" >}}
- Fix regression caused by TSL2591 auto gain {{< pr number="3249" repo="esphome" >}} by {{< ghuser name="Azimath" >}}

## Release 2022.2.6 - March 2

- Only get free memory size from internal {{< pr number="3259" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Full list of changes

### New Features

- Add initial_run to regular lambda light effect {{< pr number="3059" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- Support simple transparent pngs for display {{< pr number="3035" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- Add restore_mode to fan component {{< pr number="3051" repo="esphome" >}} by {{< ghuser name="joshuaspence" >}} (new-feature)
- slow_pwm: allow to restart a cycle on state change {{< pr number="3004" repo="esphome" >}} by {{< ghuser name="Chupaka" >}} (new-feature)
- Command retain option for MQTT component {{< pr number="3078" repo="esphome" >}} by {{< ghuser name="VitaliyKurokhtin" >}} (new-feature)
- Esp32cam full control {{< pr number="3090" repo="esphome" >}} by {{< ghuser name="dav-id-org" >}} (new-feature)
- Configurable HTTP redirect following {{< pr number="3100" repo="esphome" >}} by {{< ghuser name="guillempages" >}} (new-feature)
- Add IPv6 for esp-idf framework {{< pr number="2953" repo="esphome" >}} by {{< ghuser name="HeMan" >}} (new-feature)
- Improv_serial scan and send wifi networks list {{< pr number="3116" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- Inkplate 6 PLUS {{< pr number="3013" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)

### New Components

- Add ektf2232 touchscreen support {{< pr number="3027" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)
- Wake-on-LAN button {{< pr number="3030" repo="esphome" >}} by {{< ghuser name="willwill2will54" >}} (new-integration)
- Implement output button {{< pr number="3109" repo="esphome" >}} by {{< ghuser name="oxan" >}} (new-integration)
- Create base touchscreen component and refactor ektf2232 {{< pr number="3083" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)
- Add qr code support for displays {{< pr number="2952" repo="esphome" >}} by {{< ghuser name="wjtje" >}} (new-integration)
- Add Xiaomi MHOC303 sensor e-ink clock {{< pr number="3115" repo="esphome" >}} by {{< ghuser name="drug123" >}} (new-integration)
- Add new Lock core component {{< pr number="2958" repo="esphome" >}} by {{< ghuser name="kbickar" >}} (new-integration)
- Added RadonEye RD200 Component {{< pr number="3119" repo="esphome" >}} by {{< ghuser name="jeffeb3" >}} (new-integration)
- MLX90393 three-axis magnetometer {{< pr number="2770" repo="esphome" >}} by {{< ghuser name="functionpointer" >}} (new-integration)
- Add Lilygo t5 4.7 Touchscreen {{< pr number="3084" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)
- Add Select for modbus {{< pr number="3032" repo="esphome" >}} by {{< ghuser name="stegm" >}} (new-integration)
- Add max9611 High Side Current Shunt ADC {{< pr number="2705" repo="esphome" >}} by {{< ghuser name="mckaymatthew" >}} (new-integration)

### Breaking Changes

- [TCS34725] remove duplicated endian conversion {{< pr number="3037" repo="esphome" >}} by {{< ghuser name="martgras" >}} (breaking-change)
- TSL2591 automatic gain control {{< pr number="3071" repo="esphome" >}} by {{< ghuser name="Azimath" >}} (breaking-change)
- [debug] Refactor debug sensors to use the normal sensor model. {{< pr number="3162" repo="esphome" >}} by {{< ghuser name="mknjc" >}} (breaking-change)
- Allow framework version validator to be maximum version {{< pr number="3197" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)

### Notable Changes

- ESP8266 Set recommended framework to 3.0.2 {{< pr number="2606" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (notable-change)
- Handle Tuya multi-datapoint messages {{< pr number="3159" repo="esphome" >}} by {{< ghuser name="ssieb" >}} (notable-change)

### Beta Changes

- Enable mDNS during OTA safe mode {{< pr number="3146" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Try fix canbus config validation {{< pr number="3173" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump aioesphomeapi from 10.8.1 to 10.8.2 {{< pr number="3182" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Clamp rotary_encoder restored value to min and max {{< pr number="3184" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Make generating combined binary output verbose {{< pr number="3127" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Allow framework version validator to be maximum version {{< pr number="3197" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Fix strlcpy() uses to make long SSIDs and passwords work {{< pr number="3199" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Update HA addon token {{< pr number="3200" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

### All changes

- Bump pytest-asyncio from 0.16.0 to 0.17.0 {{< pr number="3047" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Fix argument order in gitpod config file {{< pr number="3058" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump pytest-asyncio from 0.17.0 to 0.17.2 {{< pr number="3064" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Fix calibration parameter for bme680 humidity calculation {{< pr number="3069" repo="esphome" >}} by {{< ghuser name="cwitting" >}}
- Bump improv library version {{< pr number="3072" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- API: Expect a name for connections {{< pr number="2533" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- AM43: autoload "sensor" to avoid compile errors {{< pr number="3077" repo="esphome" >}} by {{< ghuser name="buxtronix" >}}
- Add initial_run to regular lambda light effect {{< pr number="3059" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- Support simple transparent pngs for display {{< pr number="3035" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- Bump aioesphomeapi from 10.6.0 to 10.8.0 {{< pr number="3081" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Add ektf2232 touchscreen support {{< pr number="3027" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)
- Implement IPv6 sockets for lwIP {{< pr number="3015" repo="esphome" >}} by {{< ghuser name="HeMan" >}}
- Allow multiple configs for cd74hc4067 {{< pr number="3085" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Wake-on-LAN button {{< pr number="3030" repo="esphome" >}} by {{< ghuser name="willwill2will54" >}} (new-integration)
- Add restore_mode to fan component {{< pr number="3051" repo="esphome" >}} by {{< ghuser name="joshuaspence" >}} (new-feature)
- slow_pwm: allow to restart a cycle on state change {{< pr number="3004" repo="esphome" >}} by {{< ghuser name="Chupaka" >}} (new-feature)
- Enable readability-const-return-type check {{< pr number="3099" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Enable readability-qualified-auto check {{< pr number="3095" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Enable readability-redundant-member-init check {{< pr number="3097" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Enable readability-named-parameter check {{< pr number="3098" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Enable readability-redundant-access-specifiers check {{< pr number="3096" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Command retain option for MQTT component {{< pr number="3078" repo="esphome" >}} by {{< ghuser name="VitaliyKurokhtin" >}} (new-feature)
- Refactor fan platform to resemble climate/cover platforms {{< pr number="2848" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Rename WEBSERVER_PORT define to USE_WEBSERVER_PORT {{< pr number="3102" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix path to extra_scripts in platformio.ini {{< pr number="3093" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Generate ARDUINO_VERSION_CODE in Python code {{< pr number="3101" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Add cv.require_esphome_version helper {{< pr number="3103" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump aioesphomeapi from 10.8.0 to 10.8.1 {{< pr number="3110" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Remove unused polling_component_schema from modbus number {{< pr number="3108" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Force braces around multi-line statements {{< pr number="3094" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Make CallbackManager invocable {{< pr number="3089" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Implement output button {{< pr number="3109" repo="esphome" >}} by {{< ghuser name="oxan" >}} (new-integration)
- Add increment_day function to ESPTime {{< pr number="2955" repo="esphome" >}} by {{< ghuser name="RebbePod" >}}
- [TCS34725] remove duplicated endian conversion {{< pr number="3037" repo="esphome" >}} by {{< ghuser name="martgras" >}} (breaking-change)
- Perform merges when substituting dict keys {{< pr number="3062" repo="esphome" >}} by {{< ghuser name="joshuaspence" >}}
- Esp32cam full control {{< pr number="3090" repo="esphome" >}} by {{< ghuser name="dav-id-org" >}} (new-feature)
- Fix config merging with null {{< pr number="3113" repo="esphome" >}} by {{< ghuser name="joshuaspence" >}}
- Configurable HTTP redirect following {{< pr number="3100" repo="esphome" >}} by {{< ghuser name="guillempages" >}} (new-feature)
- Add IPv6 for esp-idf framework {{< pr number="2953" repo="esphome" >}} by {{< ghuser name="HeMan" >}} (new-feature)
- Add support for additional colors on GROW R503 {{< pr number="3087" repo="esphome" >}} by {{< ghuser name="Zebble" >}}
- Add Heap Sensors - free/max block/fragmentation {{< pr number="1578" repo="esphome" >}} by {{< ghuser name="micronen" >}}
- Create base touchscreen component and refactor ektf2232 {{< pr number="3083" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)
- Add qr code support for displays {{< pr number="2952" repo="esphome" >}} by {{< ghuser name="wjtje" >}} (new-integration)
- ESP8266 Set recommended framework to 3.0.2 {{< pr number="2606" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (notable-change)
- TSL2591 automatic gain control {{< pr number="3071" repo="esphome" >}} by {{< ghuser name="Azimath" >}} (breaking-change)
- set adc width to 13 bits for esp32-s2 {{< pr number="3117" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Fix lint for TSL2591 {{< pr number="3118" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Add Xiaomi MHOC303 sensor e-ink clock {{< pr number="3115" repo="esphome" >}} by {{< ghuser name="drug123" >}} (new-integration)
- Logically group and document helper functions {{< pr number="3112" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Add support for Waveshare 7.5in-bv2 {{< pr number="3121" repo="esphome" >}} by {{< ghuser name="Eriner" >}}
- Bump docker dependencies {{< pr number="3131" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Bump pytest-mock from 3.6.1 to 3.7.0 {{< pr number="3128" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Improv_serial scan and send wifi networks list {{< pr number="3116" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- Disable platformio ldf for build {{< pr number="3130" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Bump esp-idf framework version from 4.3.0 to 4.3.2 {{< pr number="3120" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Bump pre-commit flake8 from 3.8.4 to 4.0.1 {{< pr number="3149" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Bump black from 21.12b0 to 22.1.0 {{< pr number="3147" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Fix ESP32C3 toolchain requires stdarg import in helpers {{< pr number="3151" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Add new Lock core component {{< pr number="2958" repo="esphome" >}} by {{< ghuser name="kbickar" >}} (new-integration)
- Add device class support to Switch {{< pr number="3012" repo="esphome" >}} by {{< ghuser name="frenck" >}}
- Handle Tuya multi-datapoint messages {{< pr number="3159" repo="esphome" >}} by {{< ghuser name="ssieb" >}} (notable-change)
- Bump improv library to 1.2.1 {{< pr number="3160" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix copy_file_if_changed src permissions copied too {{< pr number="3161" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- [debug] Refactor debug sensors to use the normal sensor model. {{< pr number="3162" repo="esphome" >}} by {{< ghuser name="mknjc" >}} (breaking-change)
- Added RadonEye RD200 Component {{< pr number="3119" repo="esphome" >}} by {{< ghuser name="jeffeb3" >}} (new-integration)
- Text sensor schema generator similar to sensor {{< pr number="3172" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- wifi_info, reduce polling interval {{< pr number="3165" repo="esphome" >}} by {{< ghuser name="jbergler" >}}
- MLX90393 three-axis magnetometer {{< pr number="2770" repo="esphome" >}} by {{< ghuser name="functionpointer" >}} (new-integration)
- Enable mDNS during OTA safe mode {{< pr number="3146" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Dont warn on nonnull comparisons {{< pr number="3123" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add require response option for BLE binary output {{< pr number="3091" repo="esphome" >}} by {{< ghuser name="AshtonKem" >}}
- Add Lilygo t5 4.7 Touchscreen {{< pr number="3084" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)
- Add Select for modbus {{< pr number="3032" repo="esphome" >}} by {{< ghuser name="stegm" >}} (new-integration)
- Add max9611 High Side Current Shunt ADC {{< pr number="2705" repo="esphome" >}} by {{< ghuser name="mckaymatthew" >}} (new-integration)
- Inkplate 6 PLUS {{< pr number="3013" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- Implement MQTT discovery object_id generator {{< pr number="3114" repo="esphome" >}} by {{< ghuser name="akomelj" >}}
- Fix files CI after merging {{< pr number="3175" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Try fix canbus config validation {{< pr number="3173" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump pytest from 6.2.5 to 7.0.0 {{< pr number="3163" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump pytest-asyncio from 0.17.2 to 0.18.0 {{< pr number="3168" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Allow to set manufacturer data for BLEAdvertising {{< pr number="3179" repo="esphome" >}} by {{< ghuser name="ashald" >}}
- Change most references from hassio to ha-addon {{< pr number="3178" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump aioesphomeapi from 10.8.1 to 10.8.2 {{< pr number="3182" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Clamp rotary_encoder restored value to min and max {{< pr number="3184" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Make generating combined binary output verbose {{< pr number="3127" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Allow framework version validator to be maximum version {{< pr number="3197" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Fix strlcpy() uses to make long SSIDs and passwords work {{< pr number="3199" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Update HA addon token {{< pr number="3200" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix missed ARDUINO_VERSION_CODE to USE_ARDUINO_VERSION_CODE changes {{< pr number="3206" repo="esphome" >}} by {{< ghuser name="stewiem2000" >}}

<!-- markdownlint-enable MD013 -->

## All Changelogs

{{< changelogs >}}
