---
description: "Changelog for ESPHome 2023.3.0."
title: "ESPHome 2023.3.0 - 15th March 2023"
params:
  seo:
    description: Changelog for ESPHome 2023.3.0.
    image: /_static/changelog-2023.3.0.png
---

{{< imgtable >}}
"Internal Temperature","components/sensor/internal_temperature","thermometer.svg","dark-invert"
"Mopeka Standard Check LP","components/sensor/mopeka_std_check","mopeka_std_check.jpg",""
"Person Sensor (SEN21231)","components/sensor/sen21231","sen21231.png",""
"Haier Climate","components/climate/haier","haier.svg",""
"FS3000","components/sensor/fs3000","fs3000.jpg",""
"Absolute Humidity","components/sensor/absolute_humidity","water-drop.svg","dark-invert"
"AS7341","components/sensor/as7341","as7341.jpg","Spectral Color Sensor"
{{< /imgtable >}}

## Sprinkler updates

The sprinkler component has had a big update thanks to {{< ghuser name="kbx81" >}}.
The method `time_remaining()` has been renamed to `time_remaining_active_valve()` for clarity.
If you use this to display time remaining, simply update the name of the method in your code/lambda(s).

## Tuya lights

Tuya Lights have had a configuration change and replaced `rgb_datapoint` and `hsv_datapoint` with a new
combination of `color_datapoint` and `color_type`. See the updated documentation
({{< docref "/components/light/tuya" >}}) for more information.

## SN74HC165

The pin/bit order has been reversed per shift register so that `pin 0` is now `input A`.

<!-- markdownlint-disable MD013 -->

## Release 2023.3.1 - March 22

- climate: brown paper bag fix for on_configure {{< pr number="4573" repo="esphome" >}} by {{< ghuser name="nwf" >}}
- rp2040: Use fake Mutex lock {{< pr number="4602" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Release 2023.3.2 - March 27

- Fix compile error on pzemdc.h {{< pr number="4583" repo="esphome" >}} by {{< ghuser name="KG3RK3N" >}}
- Swap curly brackets for round on LockGuard {{< pr number="4610" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix animation resizing {{< pr number="4608" repo="esphome" >}} by {{< ghuser name="guillempages" >}}
- SX1509 minimum loop period (fixes esphome/issues#4325) {{< pr number="4613" repo="esphome" >}} by {{< ghuser name="tracestep" >}}

## Full list of changes

### New Components

- Add internal_temperature component {{< pr number="4330" repo="esphome" >}} by {{< ghuser name="Mat931" >}} (new-integration)
- Support Mopeka Standard LPG tank bluetooth sensor {{< pr number="4351" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}} (new-integration)
- add person sensor (SEN21231) from usefulsensors {{< pr number="4454" repo="esphome" >}} by {{< ghuser name="shreyaskarnik" >}} (new-integration)
- add kuntze component {{< pr number="4411" repo="esphome" >}} by {{< ghuser name="ssieb" >}} (new-integration)
- Add Haier climate component {{< pr number="4001" repo="esphome" >}} by {{< ghuser name="Yarikx" >}} (new-integration)
- FS3000 sensor {{< pr number="4502" repo="esphome" >}} by {{< ghuser name="kahrendt" >}} (new-integration)
- Add absolute humidity component {{< pr number="4519" repo="esphome" >}} by {{< ghuser name="DAVe3283" >}} (new-integration)
- Add AS7341 spectral color sensor {{< pr number="4331" repo="esphome" >}} by {{< ghuser name="mrgnr" >}} (new-integration)
- Renaming and extending the ili9341 to the ili9xxx component {{< pr number="4275" repo="esphome" >}} by {{< ghuser name="nielsnl68" >}} (new-integration) (breaking-change)

### Breaking Changes

- Add configurable color datapoint {{< pr number="4383" repo="esphome" >}} by {{< ghuser name="irtimaled" >}} (breaking-change)
- Sprinkler "v2" updates {{< pr number="4159" repo="esphome" >}} by {{< ghuser name="kbx81" >}} (breaking-change)
- sn74hc165 fixes {{< pr number="4457" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Renaming and extending the ili9341 to the ili9xxx component {{< pr number="4275" repo="esphome" >}} by {{< ghuser name="nielsnl68" >}} (new-integration) (breaking-change)

### Beta Changes

- Fix ethernet clk_mode for GPIO0_OUT {{< pr number="4307" repo="esphome" >}} by {{< ghuser name="jorticus" >}}
- Add ESP32-S3 support in NeoPixelBus component {{< pr number="4114" repo="esphome" >}} by {{< ghuser name="rcloran" >}}
- Renaming and extending the ili9341 to the ili9xxx component {{< pr number="4275" repo="esphome" >}} by {{< ghuser name="nielsnl68" >}} (new-integration) (breaking-change)
- Drop unused, broken logging macros {{< pr number="4534" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Revert storing Font glyphs in manually-allocated memory {{< pr number="4516" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Correct BME680 gas calculation and heater_off {{< pr number="4498" repo="esphome" >}} by {{< ghuser name="CarlosGS" >}}
- Add support for new mpu6050 clones responding with 0x70 address {{< pr number="4546" repo="esphome" >}} by {{< ghuser name="jakehdk" >}}
- Add carbon dioxide device class to scd30 sensor schema. {{< pr number="4547" repo="esphome" >}} by {{< ghuser name="murrayma" >}}
- Feat: add support for hex color in color component {{< pr number="4493" repo="esphome" >}} by {{< ghuser name="dorianim" >}}
- Allow AUTO_LOAD to be a function {{< pr number="4550" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- On the ILI9xxx display's enable the psram on esp32 and allow big screen {{< pr number="4551" repo="esphome" >}} by {{< ghuser name="nielsnl68" >}}
- Map gpio pins for touch on esp32-s2/s3 {{< pr number="4552" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- pipsolar component. Correct the sscanf format for QPIG command parsin… {{< pr number="4165" repo="esphome" >}} by {{< ghuser name="eroldan" >}}
- Add state class back to uptime sensor {{< pr number="4557" repo="esphome" >}} by {{< ghuser name="DAVe3283" >}}
- Added response for Tuya RSSI command {{< pr number="4549" repo="esphome" >}} by {{< ghuser name="catalin2402" >}}
- Remove switch actions during config; bump setup priority {{< pr number="4563" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Mark esp32_touch supported only on standard esp32 variant {{< pr number="4562" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- fixing `shrink` and `extend` functions of the displaybuffer's Rect class {{< pr number="4565" repo="esphome" >}} by {{< ghuser name="nielsnl68" >}}

### All changes

- socket: Format IPv4-mapped IPv6 addresses as regular IPv4 address {{< pr number="4382" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump frenck/action-yamllint from 1.3.1 to 1.4.0 {{< pr number="4289" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump pyupgrade from 3.3.0 to 3.3.1 {{< pr number="4160" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump black from 22.12.0 to 23.1.0 {{< pr number="4375" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Improve tuya network status command {{< pr number="4415" repo="esphome" >}} by {{< ghuser name="Rjevski" >}}
- Gracefully reject vacuum map upload requests {{< pr number="4414" repo="esphome" >}} by {{< ghuser name="Rjevski" >}}
- Fixed PlatformIO Build on DEV {{< pr number="4422" repo="esphome" >}} by {{< ghuser name="Expaso" >}}
- Bump platformio from 6.1.5 to 6.1.6 {{< pr number="4341" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump pylint from 2.15.10 to 2.16.2 {{< pr number="4426" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump aioesphomeapi from 13.1.0 to 13.3.1 {{< pr number="4427" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Add concurrency limit to ci-docker {{< pr number="4407" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add final job so branch protection can require matrix ci steps {{< pr number="4432" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Deep Sleep capable ports for ESP32S3 {{< pr number="4230" repo="esphome" >}} by {{< ghuser name="LeDominik" >}}
- Initialize all fields in ESPTime in PCF85063 {{< pr number="4439" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump zeroconf from 0.47.1 to 0.47.3 {{< pr number="4437" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Automate syncing device classes with HA {{< pr number="4438" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- NeoPixel - Add support for ESP32-S3 {{< pr number="4435" repo="esphome" >}} by {{< ghuser name="ajacques" >}}
- add SUB_BINARY_SENSOR macro to binary sensor {{< pr number="4447" repo="esphome" >}} by {{< ghuser name="regevbr" >}}
- add SUB_TEXT_SENSOR macro to text sensor {{< pr number="4448" repo="esphome" >}} by {{< ghuser name="regevbr" >}}
- Simplify sensor schema generation {{< pr number="4462" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- add SUB_NUMBER macro and schema to number {{< pr number="4449" repo="esphome" >}} by {{< ghuser name="regevbr" >}}
- add SUB_BUTTON macro and ability to button schema to define the class {{< pr number="4450" repo="esphome" >}} by {{< ghuser name="regevbr" >}}
- Simplify number_schema function {{< pr number="4467" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Simplify button_schema function {{< pr number="4468" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Simplify binary_sensor_schema function {{< pr number="4469" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add configurable color datapoint {{< pr number="4383" repo="esphome" >}} by {{< ghuser name="irtimaled" >}} (breaking-change)
- Add internal_temperature component {{< pr number="4330" repo="esphome" >}} by {{< ghuser name="Mat931" >}} (new-integration)
- Move remaining SENSOR_SCHEMA to use sensor_schema() {{< pr number="4471" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Allow specifying target and current visual steps for climate {{< pr number="4440" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump aioesphomeapi from 13.3.1 to 13.4.0 {{< pr number="4472" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- toshiba: add support for quiet fan mode {{< pr number="4283" repo="esphome" >}} by {{< ghuser name="MichaelMure" >}}
- Bump esptool from 4.4 to 4.5 {{< pr number="4428" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Support Mopeka Standard LPG tank bluetooth sensor {{< pr number="4351" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}} (new-integration)
- fix library override logic {{< pr number="4474" repo="esphome" >}} by {{< ghuser name="mzakharo" >}}
- Sprinkler "v2" updates {{< pr number="4159" repo="esphome" >}} by {{< ghuser name="kbx81" >}} (breaking-change)
- add person sensor (SEN21231) from usefulsensors {{< pr number="4454" repo="esphome" >}} by {{< ghuser name="shreyaskarnik" >}} (new-integration)
- Initial stab at importing idf components {{< pr number="4000" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- add kuntze component {{< pr number="4411" repo="esphome" >}} by {{< ghuser name="ssieb" >}} (new-integration)
- Add Haier climate component {{< pr number="4001" repo="esphome" >}} by {{< ghuser name="Yarikx" >}} (new-integration)
- Bump esp-idf to 4.4.3 via platformio/espressif32 @ 5.3.0 {{< pr number="4254" repo="esphome" >}} by {{< ghuser name="bdraco" >}}
- Add energy to pzemdc {{< pr number="3626" repo="esphome" >}} by {{< ghuser name="andreashergert1984" >}}
- Update esp32 esp-idf dev and latest version numbers {{< pr number="4479" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- [ExternalRAMAllocator] Use same `heap_caps_malloc` parameter as `ps_malloc`. {{< pr number="4484" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- Lock scheduler items while modifying them {{< pr number="4410" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Move Font glyphs to SPI RAM. {{< pr number="4485" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- Run CI on merge group {{< pr number="4489" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix parallel invocations of repeat action {{< pr number="4480" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Make test3 use huge_app {{< pr number="4488" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Change variable "skip_updates" and "skip_updates_counter" type from "uint8_t" to "uint16_t" {{< pr number="4487" repo="esphome" >}} by {{< ghuser name="GitforZhangXL" >}}
- Fix copy-pasta mistake {{< pr number="4492" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add int16 to codegen {{< pr number="4507" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Update __init__.py {{< pr number="4514" repo="esphome" >}} by {{< ghuser name="dashkhaneh" >}}
- Remove idf components before checking if any in config {{< pr number="4506" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- substitutions: Don't warn when passwords look like a substitution {{< pr number="4161" repo="esphome" >}} by {{< ghuser name="tljuniper" >}}
- Fix typo {{< pr number="4515" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- implement pairing for bluetooth proxy {{< pr number="4475" repo="esphome" >}} by {{< ghuser name="jagheterfredrik" >}}
- Bump docker dependencies {{< pr number="4526" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump aioesphomeapi from 13.4.0 to 13.5.0 {{< pr number="4525" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Ensure component is ready before update. {{< pr number="4523" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- climate: add on_control callbacks {{< pr number="4511" repo="esphome" >}} by {{< ghuser name="nwf" >}}
- FS3000 sensor {{< pr number="4502" repo="esphome" >}} by {{< ghuser name="kahrendt" >}} (new-integration)
- Bump esptool from 4.5 to 4.5.1 {{< pr number="4497" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Add support for multiple devices in bme680_bsec {{< pr number="3550" repo="esphome" >}} by {{< ghuser name="bisbastuner" >}}
- Bump pytest from 7.2.1 to 7.2.2 {{< pr number="4505" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump pylint from 2.16.2 to 2.16.4 {{< pr number="4524" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Add absolute humidity component {{< pr number="4519" repo="esphome" >}} by {{< ghuser name="DAVe3283" >}} (new-integration)
- Add ability to await safe mode in codegen {{< pr number="4529" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- sn74hc165 fixes {{< pr number="4457" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Add AS7341 spectral color sensor {{< pr number="4331" repo="esphome" >}} by {{< ghuser name="mrgnr" >}} (new-integration)
- Fix ethernet driver setting gpio 5 high when no power pin defined {{< pr number="4531" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Use PSRam for BLE scan results. {{< pr number="4486" repo="esphome" >}} by {{< ghuser name="Fabian-Schmidt" >}}
- Bump esp-idf to 4.4.4 {{< pr number="4528" repo="esphome" >}} by {{< ghuser name="bdraco" >}}
- Added pzemdc reset energy action {{< pr number="4481" repo="esphome" >}} by {{< ghuser name="KG3RK3N" >}}
- Fix ethernet clk_mode for GPIO0_OUT {{< pr number="4307" repo="esphome" >}} by {{< ghuser name="jorticus" >}}
- Add ESP32-S3 support in NeoPixelBus component {{< pr number="4114" repo="esphome" >}} by {{< ghuser name="rcloran" >}}
- Renaming and extending the ili9341 to the ili9xxx component {{< pr number="4275" repo="esphome" >}} by {{< ghuser name="nielsnl68" >}} (new-integration) (breaking-change)
- Drop unused, broken logging macros {{< pr number="4534" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Revert storing Font glyphs in manually-allocated memory {{< pr number="4516" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Correct BME680 gas calculation and heater_off {{< pr number="4498" repo="esphome" >}} by {{< ghuser name="CarlosGS" >}}
- Add support for new mpu6050 clones responding with 0x70 address {{< pr number="4546" repo="esphome" >}} by {{< ghuser name="jakehdk" >}}
- Add carbon dioxide device class to scd30 sensor schema. {{< pr number="4547" repo="esphome" >}} by {{< ghuser name="murrayma" >}}
- Feat: add support for hex color in color component {{< pr number="4493" repo="esphome" >}} by {{< ghuser name="dorianim" >}}
- Allow AUTO_LOAD to be a function {{< pr number="4550" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- On the ILI9xxx display's enable the psram on esp32 and allow big screen {{< pr number="4551" repo="esphome" >}} by {{< ghuser name="nielsnl68" >}}
- Map gpio pins for touch on esp32-s2/s3 {{< pr number="4552" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- pipsolar component. Correct the sscanf format for QPIG command parsin… {{< pr number="4165" repo="esphome" >}} by {{< ghuser name="eroldan" >}}
- Add state class back to uptime sensor {{< pr number="4557" repo="esphome" >}} by {{< ghuser name="DAVe3283" >}}
- Added response for Tuya RSSI command {{< pr number="4549" repo="esphome" >}} by {{< ghuser name="catalin2402" >}}
- Remove switch actions during config; bump setup priority {{< pr number="4563" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Mark esp32_touch supported only on standard esp32 variant {{< pr number="4562" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- fixing `shrink` and `extend` functions of the displaybuffer's Rect class {{< pr number="4565" repo="esphome" >}} by {{< ghuser name="nielsnl68" >}}

<!-- markdownlint-enable MD013 -->

## All Changelogs

{{< changelogs >}}
