---
description: "Changelog for ESPHome 2022.5.0."
title: "ESPHome 2022.5.0 - 18th May 2022"
params:
  seo:
    description: Changelog for ESPHome 2022.5.0.
    image: /_static/changelog-2022.5.0.png
---

{{< imgtable >}}
"BedJet Climate System","components/climate/bedjet","bedjet.png",""
"BL0939","components/sensor/bl0939","bl0939.png",""
"ENS210","components/sensor/ens210","ens210.jpg",""
"SEN5x","components/sensor/sen5x","sen54.jpg",""
"SML","components/sml","sml.svg",""
"Delonghi Penguino PAC W120HP","components/climate/climate_ir","air-conditioner-ir.svg","dark-invert"
{{< /imgtable >}}

## Rename

ESPHome now offers a way for people to rename their devices automatically. This is done by creating a new YAML file
with the new filename, changing the `name` inside the YAML, and then OTA uploading to the device to its
existing hostname. If all is successful, the old YAML file will be removed and you can continue configuring your
newly named device.

This is particularly useful if you have received a pre-installed device, or are installing pre-configured ESPHome
from a website for example.

## API Transport Encryption

API transport encryption is now enabled by default when you create a new device in ESPHome. This will
autogenerate a random encryption key in the device YAML file
that you will need to retrieve when you attempt to add the device to Home Assistant. Simply remove the
encryption key lines from your YAML should you choose to not use encryption.

## Select & Number changes

The `select` component has had a bunch of new features and actions added.
`select.first`, `select.last`, `select.next`, and `select.previous`.

Alongside these new changes were some removals of internal (but public) functions on `select` and `number`
components that might break `external_components` or `lambdas` that might have been using them. See
{{< pr number="3457" repo="esphome" >}} and {{< pr number="3458" repo="esphome" >}} for more details.

<!-- markdownlint-disable MD013 -->

## Release 2022.5.1 - May 24

- Update bedjet_const.h to remove blank spaces before speed steps, fixes Unknown Error when using climate.set_fan_mode in HA {{< pr number="3476" repo="esphome" >}} by {{< ghuser name="user897943" >}}
- Add missing import to bedjet {{< pr number="3490" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- esp32: fix NVS {{< pr number="3497" repo="esphome" >}} by {{< ghuser name="martgras" >}}

## Full list of changes

### New Components

- Add support for Shelly Dimmer 2 {{< pr number="2954" repo="esphome" >}} by {{< ghuser name="rnauber" >}} (new-integration)
- Add BedJet BLE climate component {{< pr number="2452" repo="esphome" >}} by {{< ghuser name="jhansche" >}} (new-integration)
- Add support for BL0939 (Sonoff Dual R3 V2 powermeter) {{< pr number="3300" repo="esphome" >}} by {{< ghuser name="ziceva" >}} (new-integration)
- Add ENS210 Humidity & Temperature sensor component {{< pr number="2942" repo="esphome" >}} by {{< ghuser name="itn3rd77" >}} (new-integration)
- add support for Sen5x sensor series {{< pr number="3383" repo="esphome" >}} by {{< ghuser name="martgras" >}} (new-integration)
- Add SML (Smart Message Language) platform for energy meters {{< pr number="2396" repo="esphome" >}} by {{< ghuser name="alengwenus" >}} (new-integration)
- Delonghi Penguino PAC W120HP ir support {{< pr number="3124" repo="esphome" >}} by {{< ghuser name="grob6000" >}} (new-integration)

### Breaking Changes

- Code cleanup fixes for the select component {{< pr number="3457" repo="esphome" >}} by {{< ghuser name="mmakaay" >}} (breaking-change)
- Code cleanup fixes for the number component {{< pr number="3458" repo="esphome" >}} by {{< ghuser name="mmakaay" >}} (breaking-change)

### Beta Changes

- Restore RealTimeClock's local TZ after epoch sync {{< pr number="3462" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Shelly dimmer: Use unique_ptr to handle the lifetime of stm32_t {{< pr number="3400" repo="esphome" >}} by {{< ghuser name="edge90" >}}
- Use heat mode for heat. Move EXT HT to custom presets. {{< pr number="3437" repo="esphome" >}} by {{< ghuser name="jgissend10" >}}
- Make custom_fan and custom_preset templatable as per documentation {{< pr number="3330" repo="esphome" >}} by {{< ghuser name="MrMDavidson" >}}
- Update captive portal canHandle function {{< pr number="3360" repo="esphome" >}} by {{< ghuser name="bkaufx" >}}
- Increase JSON buffer size on overflow {{< pr number="3475" repo="esphome" >}} by {{< ghuser name="pyos" >}}
- Mark improv_serial and ESP-IDF usb based serial on c3/s2/s3 unsupported {{< pr number="3477" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- ESP32: Only save to NVS if data was changed {{< pr number="3479" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Retry Tuya init commands {{< pr number="3482" repo="esphome" >}} by {{< ghuser name="ssieb" >}}

### Notable Changes

- Enable api transport encryption for new projects {{< pr number="3142" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (notable-change)

### All changes

- Add default object_id_generator for mqtt {{< pr number="3389" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add BedJet BLE climate component {{< pr number="2452" repo="esphome" >}} by {{< ghuser name="jhansche" >}} (new-integration)
- Multi conf for Teleinfo component {{< pr number="3401" repo="esphome" >}} by {{< ghuser name="parats15" >}}
- Add support for Mopeka Pro+ Residential sensor {{< pr number="3393" repo="esphome" >}} by {{< ghuser name="jamesduke" >}}
- Add support for BL0939 (Sonoff Dual R3 V2 powermeter) {{< pr number="3300" repo="esphome" >}} by {{< ghuser name="ziceva" >}} (new-integration)
- Add "esphome rename" command {{< pr number="3403" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- SPS30: Add fan action {{< pr number="3410" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- feat: add openssh-client on docker image (#1681) {{< pr number="3319" repo="esphome" >}} by {{< ghuser name="quentin9696" >}}
- Add duration device class for sensors {{< pr number="3421" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Missing `f` prefix on f-strings fix {{< pr number="3415" repo="esphome" >}} by {{< ghuser name="code-review-doctor" >}}
- Queue sensor publishes so we don't block for too long {{< pr number="3422" repo="esphome" >}} by {{< ghuser name="trvrnrth" >}}
- added RGB565 image type {{< pr number="3229" repo="esphome" >}} by {{< ghuser name="lubeda" >}}
- Allow wifi output_power down to 8.5dB {{< pr number="3405" repo="esphome" >}} by {{< ghuser name="e28eta" >}}
- Add help text to rename command {{< pr number="3442" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add rename command handler {{< pr number="3443" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Support for Arduino 2 and serial port on ESP32-S2 and ESP32-C3 {{< pr number="3436" repo="esphome" >}} by {{< ghuser name="jenscski" >}}
- Bump dashboard to 20220508.0 {{< pr number="3448" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Waveshare epaper 7in5 v2alt {{< pr number="3276" repo="esphome" >}} by {{< ghuser name="patvdleer" >}}
- Early pin init {{< pr number="3439" repo="esphome" >}} by {{< ghuser name="rainero84" >}}
- Add ENS210 Humidity & Temperature sensor component {{< pr number="2942" repo="esphome" >}} by {{< ghuser name="itn3rd77" >}} (new-integration)
- Also rename yaml filename with rename command {{< pr number="3447" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump click from 8.1.2 to 8.1.3 {{< pr number="3426" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Fix spi transfer with miso pin defined on espidf {{< pr number="3450" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Force using name substitution when adopting a device {{< pr number="3451" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump pyupgrade from 2.32.0 to 2.32.1 {{< pr number="3452" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump pylint from 2.13.5 to 2.13.8 {{< pr number="3432" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Esp32c3 deepsleep fix {{< pr number="3433" repo="esphome" >}} by {{< ghuser name="MFlasskamp" >}}
- Add SERIAL_JTAG/CDC logger option for ESP-IDF platform for ESP32-S2/S3/C3 {{< pr number="3105" repo="esphome" >}} by {{< ghuser name="unaiur" >}}
- Select enhancement {{< pr number="3423" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Number enhancement {{< pr number="3429" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- mask deprecated adc_gpio_init() for esp32-s2 {{< pr number="3445" repo="esphome" >}} by {{< ghuser name="MFlasskamp" >}}
- tca9548a fix channel selection {{< pr number="3417" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- add support for Sen5x sensor series {{< pr number="3383" repo="esphome" >}} by {{< ghuser name="martgras" >}} (new-integration)
- Add SML (Smart Message Language) platform for energy meters {{< pr number="2396" repo="esphome" >}} by {{< ghuser name="alengwenus" >}} (new-integration)
- Delonghi Penguino PAC W120HP ir support {{< pr number="3124" repo="esphome" >}} by {{< ghuser name="grob6000" >}} (new-integration)
- extend scd4x {{< pr number="3409" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- PMSX003: Add support for specifying the update interval and spinning down {{< pr number="3053" repo="esphome" >}} by {{< ghuser name="mjg59" >}}
- CAN bus: on_frame remote_transmission_request {{< pr number="3376" repo="esphome" >}} by {{< ghuser name="felixstorm" >}}
- Fix cover set position by force pushing position_id datapoint (similaâ€¦ {{< pr number="3435" repo="esphome" >}} by {{< ghuser name="dennisvbussel" >}}
- added prev_frame for animation {{< pr number="3427" repo="esphome" >}} by {{< ghuser name="lubeda" >}}
- Fix tests {{< pr number="3455" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Fix BME280 setup() when the sensor is marked as failed. {{< pr number="3396" repo="esphome" >}} by {{< ghuser name="ctrix" >}}
- Esp32c3 deepsleep fix {{< pr number="3454" repo="esphome" >}} by {{< ghuser name="MFlasskamp" >}}
- Make retry scheduler efficient {{< pr number="3225" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Code cleanup fixes for the select component {{< pr number="3457" repo="esphome" >}} by {{< ghuser name="mmakaay" >}} (breaking-change)
- Code cleanup fixes for the number component {{< pr number="3458" repo="esphome" >}} by {{< ghuser name="mmakaay" >}} (breaking-change)
- Enable api transport encryption for new projects {{< pr number="3142" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (notable-change)
- Implement allow_deep_sleep {{< pr number="3282" repo="esphome" >}} by {{< ghuser name="rubdos" >}}
- Add deep_sleep.allow YAML action {{< pr number="3459" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Restore RealTimeClock's local TZ after epoch sync {{< pr number="3462" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Shelly dimmer: Use unique_ptr to handle the lifetime of stm32_t {{< pr number="3400" repo="esphome" >}} by {{< ghuser name="edge90" >}}
- Use heat mode for heat. Move EXT HT to custom presets. {{< pr number="3437" repo="esphome" >}} by {{< ghuser name="jgissend10" >}}
- Make custom_fan and custom_preset templatable as per documentation {{< pr number="3330" repo="esphome" >}} by {{< ghuser name="MrMDavidson" >}}
- Update captive portal canHandle function {{< pr number="3360" repo="esphome" >}} by {{< ghuser name="bkaufx" >}}
- Increase JSON buffer size on overflow {{< pr number="3475" repo="esphome" >}} by {{< ghuser name="pyos" >}}
- Mark improv_serial and ESP-IDF usb based serial on c3/s2/s3 unsupported {{< pr number="3477" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- ESP32: Only save to NVS if data was changed {{< pr number="3479" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Retry Tuya init commands {{< pr number="3482" repo="esphome" >}} by {{< ghuser name="ssieb" >}}

<!-- markdownlint-enable MD013 -->

## All Changelogs

{{< changelogs >}}
