---
description: "Changelog for ESPHome version 1.20.0."
title: "Changelog - Version 1.20.0 - 21st July 2021"
params:
  seo:
    description: Changelog for ESPHome version 1.20.0.
    image: /_static/changelog-1.20.0.png
---
<!-- markdownlint-disable MD013 -->

{{< imgtable >}}
"Number Core","components/number/index","folder-open.svg","dark-invert"
"Template Number","components/number/template","description.svg","dark-invert"
"Havells Inverter","components/sensor/havells_solar","havellsgti5000d_s.jpg",""
"Anova Cooker","components/climate/anova","anova.png",""
{{< /imgtable >}}
Here's to another timely release bringing a few new components and a whole bunch of changes under
the hood to existing ones.

## Number Entities

Creating `number` entities in Home Assistant from ESPHome is now supported. This basically replaces
creating an `input_number` and then importing that sensor into ESPHome as a sensor with
`platform: homeassistant`. The state of the number can also be updated directly on the ESPHome device
and will be reflected in Home Assistant.

I would like to see what other platforms people can come up with for the number component,
I have a few ideas myself.

## Light Changes

Unfortunately, some breaking changes had to be made:

- For addressable RGBW lights, the brightness now also applies to the white channel (this was already the case for
  non-addressable RGBW lights). If you want to control only the brightness of the color channel, use the new `color_brightness` option.

- For RGBW lights, the white channel is no longer normalized by the color intensity in the `light.turn_on` and
  `light.control` actions. In previous versions, if the red value was set to 60% and the white value to 30%, this
  would result in the white channel being at 50% brightness. Starting with this version, this will result in the
  white channel being set to 30%, as expected.

## ESPHome Dashboard

Thanks {{< ghuser name="balloob" >}} for making a small, but very significant change to the dashboard cards so now people who suffer from color-blindness
will know whether or not the node is online.

{{< img src="online-indicator.png" alt="Image" width="50.0%" class="align-center" >}}

## Nextion

The Nextion component has had a major rewrite this release bringing many more features to those that use the displays.
I am not sure how to describe the changes except for listing the main change points from the PR and linking to the docs
for you to read yourself. {{< docref "/components/display/nextion" >}}

- Sensors/binary sensors/switch/text sensors and touch have all been added.
- Over the air TFT file upload
- Polling has been added to all the components
- Display on_wake/on_sleep
- Many API helpers (get_string/get_int) have been added

## Release 1.20.1 - July 27

- Fix git pull for external_components {{< pr number="2055" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- midea_ac: fix presets implementation {{< pr number="2054" repo="esphome" >}} by {{< ghuser name="dudanov" >}}
- Fixes new auto mode COOL and HEAT after {{< pr number="1994" repo="esphome" >}} {{< pr number="2053" repo="esphome" >}} by {{< ghuser name="carstenschroeder" >}}
- Log warning about lack of support for Anova nano {{< pr number="2063" repo="esphome" >}} by {{< ghuser name="buxtronix" >}}
- Couple more updates for the Tuya component {{< pr number="2065" repo="esphome" >}} by {{< ghuser name="nuttytree" >}}
- Fix MQTT climate custom fan modes without regular ones {{< pr number="2071" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}

## Release 1.20.2 - July 29

- More Tuya MCU robustness {{< pr number="2080" repo="esphome" >}} by {{< ghuser name="jkl1337" >}}
- Bump esphome dashboard to 20210728.0 {{< pr number="2081" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- HLW8012 - Dump energy sensor config {{< pr number="2082" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Use sensor_schema for total_daily_energy {{< pr number="2090" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Release 1.20.3 - July 30

- Set pulse meter total to use state class measurement and last reset type auto {{< pr number="2097" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Release 1.20.4 - August 4

- Correctly invert esp32 RMT TX {{< pr number="2022" repo="esphome" >}} by {{< ghuser name="WeekendWarrior1" >}}
- Move configure_rmt() into setup() {{< pr number="2028" repo="esphome" >}} by {{< ghuser name="WeekendWarrior1" >}}
- Fix climate restore schema changed resulting in invalid restore {{< pr number="2068" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix PID climate breaks when restoring old modes {{< pr number="2086" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- fix diplay trigger missing base class {{< pr number="2099" repo="esphome" >}} by {{< ghuser name="glmnet" >}}
- Fix min/max keys in MQTT Number to match Home Assistant {{< pr number="2102" repo="esphome" >}} by {{< ghuser name="paulmonigatti" >}}
- Use proper schema for the analog pin shorthand {{< pr number="2103" repo="esphome" >}} by {{< ghuser name="nonameplum" >}}
- [duty_cycle] initialize two missing variables {{< pr number="2088" repo="esphome" >}} by {{< ghuser name="CarlosGS" >}}
- Fix time.on_time triggering if time jumped back {{< pr number="1806" repo="esphome" >}} by {{< ghuser name="brambo123" >}}
- Fix external components not refreshing with default or high refresh time {{< pr number="2122" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}

## Full list of changes

### New Features

- Allow WiFi AP to use device name {{< pr number="1990" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- Add Number entities (from Home Assistant) {{< pr number="1971" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature) (new-integration) (notable-change)
- Nextion upload and sensors {{< pr number="1464" repo="esphome" >}} by {{< ghuser name="SenexCrenshaw" >}} (cherry-picked) (new-feature) (notable-change)
- Adding last_reset_type to sensors that should support it. {{< pr number="2039" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (cherry-picked) (new-feature)

### New Components

- Climate component for Ballu air conditioners with remote model YKR-K/002E {{< pr number="1939" repo="esphome" >}} by {{< ghuser name="bazuchan" >}} (new-integration)
- Anova ble component {{< pr number="1752" repo="esphome" >}} by {{< ghuser name="buxtronix" >}} (new-integration)
- Add Number entities (from Home Assistant) {{< pr number="1971" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature) (new-integration) (notable-change)
- Added support for havells_solar sensor {{< pr number="1988" repo="esphome" >}} by {{< ghuser name="sourabhjaiswal" >}} (new-integration)

### Breaking Changes

- remote_receiver use config parent receiver for registering dumpers {{< pr number="1980" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Change color model to fix white channel issues {{< pr number="1895" repo="esphome" >}} by {{< ghuser name="oxan" >}} (breaking-change)
- Remove a whole bunch of deprecated/removed stuff {{< pr number="1981" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- catch 0.0 in float set_level pre-adjustment {{< pr number="2013" repo="esphome" >}} by {{< ghuser name="WeekendWarrior1" >}} (breaking-change)
- Climate mode meaning was changed {{< pr number="1995" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (breaking-change)

### Beta Fixes

- Nextion upload and sensors {{< pr number="1464" repo="esphome" >}} by {{< ghuser name="SenexCrenshaw" >}} (cherry-picked) (new-feature) (notable-change)
- Fix ethernet component hostname handling {{< pr number="2010" repo="esphome" >}} by {{< ghuser name="flacjacket" >}} (cherry-picked)
- Refactor docker build system and workflows {{< pr number="2023" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (cherry-picked)
- GH Actions CI use GHCR {{< pr number="2027" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (cherry-picked)
- Dashboard disable assets caching {{< pr number="2025" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (cherry-picked)
- Improve external components error messages {{< pr number="2026" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (cherry-picked)
- Number and Template Number updates {{< pr number="2036" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (cherry-picked)
- Add restore_value to template number {{< pr number="2041" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (cherry-picked)
- midea_ac: Fix turbo boost mode. Preset PRESET_BOOST. {{< pr number="2029" repo="esphome" >}} by {{< ghuser name="dudanov" >}} (cherry-picked)
- Bump dashboard to 20210719.0 {{< pr number="2043" repo="esphome" >}} by {{< ghuser name="balloob" >}} (cherry-picked)
- Correct ADS1115 handling of multiple sensors in continuous mode {{< pr number="2016" repo="esphome" >}} by {{< ghuser name="flacjacket" >}} (cherry-picked)
- ESP32 ADC use esp-idf {{< pr number="2024" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (cherry-picked)
- Fix white value transition for addressable lights {{< pr number="2045" repo="esphome" >}} by {{< ghuser name="oxan" >}} (cherry-picked)
- Adding last_reset_type to sensors that should support it. {{< pr number="2039" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (cherry-picked) (new-feature)
- Remove superfluous polling on ADS1115 {{< pr number="2015" repo="esphome" >}} by {{< ghuser name="flacjacket" >}} (cherry-picked)

### Notable Changes

- Add Number entities (from Home Assistant) {{< pr number="1971" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature) (new-integration) (notable-change)
- Nextion upload and sensors {{< pr number="1464" repo="esphome" >}} by {{< ghuser name="SenexCrenshaw" >}} (cherry-picked) (new-feature) (notable-change)

### All changes

- Update ambiguous command {{< pr number="1889" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Configure clang-format for consistent pointer alignment {{< pr number="1890" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Activate some clang-tidy checks {{< pr number="1884" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Avoid non-const globals and enable clang-tidy check {{< pr number="1892" repo="esphome" >}} by {{< ghuser name="agners" >}}
- Convert st7735.cpp to use Unix line separators {{< pr number="1894" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Split files in light component {{< pr number="1893" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix CI by avoiding non-const global {{< pr number="1907" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Adds support cpp to vscode {{< pr number="1828" repo="esphome" >}} by {{< ghuser name="dentra" >}}
- Support ESP8266 Arduino 3.0.0 {{< pr number="1897" repo="esphome" >}} by {{< ghuser name="agners" >}}
- Run script/setup in devcontainer instead of pip install {{< pr number="1913" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix typo in test3.yaml {{< pr number="1928" repo="esphome" >}} by {{< ghuser name="loongyh" >}}
- Fix error print in script/helpers.py {{< pr number="1935" repo="esphome" >}} by {{< ghuser name="agners" >}}
- Add variable bit width for Samsung protocol {{< pr number="1927" repo="esphome" >}} by {{< ghuser name="kbx81" >}}
- Add data sizes to log message {{< pr number="1938" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Update generation script to add const {{< pr number="1945" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump dashboard to 20210621.0 {{< pr number="1946" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Improve DHT read timings {{< pr number="1901" repo="esphome" >}} by {{< ghuser name="agners" >}}
- More VSCode devcontainer improvements {{< pr number="1934" repo="esphome" >}} by {{< ghuser name="agners" >}}
- Validate color temperature values for RGBWW/CWWW lights {{< pr number="1957" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix on_multi_click min_length {{< pr number="1960" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Climate component for Ballu air conditioners with remote model YKR-K/002E {{< pr number="1939" repo="esphome" >}} by {{< ghuser name="bazuchan" >}} (new-integration)
- Simplify initializing glyph_data {{< pr number="1970" repo="esphome" >}} by {{< ghuser name="gladhorn" >}}
- Add device_class support for MQTT integration {{< pr number="1832" repo="esphome" >}} by {{< ghuser name="definitio" >}}
- Rename master branch to release {{< pr number="1976" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix tuya fan speed send {{< pr number="1978" repo="esphome" >}} by {{< ghuser name="trvrnrth" >}}
- Time Based Cover: Fixed apparent race condition on ESP32 chips {{< pr number="1984" repo="esphome" >}} by {{< ghuser name="pdoidge" >}}
- Fix invalid escape sequences in regex (fix pytest warning) {{< pr number="1814" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump hypothesis from 5.21.0 to 5.49.0 {{< pr number="1753" repo="esphome" >}} by {{< ghuser name="mweinelt" >}}
- Bump pytest-mock from 3.5.1 to 3.6.1 {{< pr number="1754" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- hlw8012: fix constants for BL0937 {{< pr number="1973" repo="esphome" >}} by {{< ghuser name="ianchi" >}}
- Anova ble component {{< pr number="1752" repo="esphome" >}} by {{< ghuser name="buxtronix" >}} (new-integration)
- Add stepper.set_acceleration and stepper.set_deceleration to stepper component {{< pr number="1977" repo="esphome" >}} by {{< ghuser name="WeekendWarrior1" >}}
- remote_receiver use config parent receiver for registering dumpers {{< pr number="1980" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Don't try compat parsing for "esphome version" {{< pr number="1966" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Change color model to fix white channel issues {{< pr number="1895" repo="esphome" >}} by {{< ghuser name="oxan" >}} (breaking-change)
- Allow WiFi AP to use device name {{< pr number="1990" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- Support custom fan modes in mqtt_climate {{< pr number="1989" repo="esphome" >}} by {{< ghuser name="mgorven" >}}
- Bump protobuf from 3.17.0 to 3.17.3 {{< pr number="1986" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump pytest-cov from 2.11.1 to 2.12.1 {{< pr number="1855" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Bump pytest-asyncio from 0.14.0 to 0.15.1 {{< pr number="1793" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Improve climate mode code docs {{< pr number="1995" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Climate modes COOL and HEAT are auto modes {{< pr number="1994" repo="esphome" >}} by {{< ghuser name="carstenschroeder" >}}
- Add state callback to ota component {{< pr number="1816" repo="esphome" >}} by {{< ghuser name="mmakaay" >}}
- Fix deprecation message for old climate swing mode methods {{< pr number="2003" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Add Number entities (from Home Assistant) {{< pr number="1971" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature) (new-integration) (notable-change)
- Fixed lolin32 lite key {{< pr number="2001" repo="esphome" >}} by {{< ghuser name="monkeyclass" >}}
- Add support for IBS-TH1 External Sensor {{< pr number="1983" repo="esphome" >}} by {{< ghuser name="MikkoTervala" >}}
- Bang bang climate new mode meanings {{< pr number="1996" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Sgp30 sensor improvements {{< pr number="1510" repo="esphome" >}} by {{< ghuser name="huubeikens" >}}
- Color brightness fixes {{< pr number="2008" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump black from 21.5b1 to 21.6b0 {{< pr number="2011" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Added support for havells_solar sensor {{< pr number="1988" repo="esphome" >}} by {{< ghuser name="sourabhjaiswal" >}} (new-integration)
- Remove a whole bunch of deprecated/removed stuff {{< pr number="1981" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- catch 0.0 in float set_level pre-adjustment {{< pr number="2013" repo="esphome" >}} by {{< ghuser name="WeekendWarrior1" >}} (breaking-change)
- Introduce clamp as a template function {{< pr number="1953" repo="esphome" >}} by {{< ghuser name="agners" >}}
- [Teleinfo] do not stop parsing frame if there is only a CRC error on â€¦ {{< pr number="1999" repo="esphome" >}} by {{< ghuser name="St4n" >}}
- Nextion upload and sensors {{< pr number="1464" repo="esphome" >}} by {{< ghuser name="SenexCrenshaw" >}} (cherry-picked) (new-feature) (notable-change)
- Fix ethernet component hostname handling {{< pr number="2010" repo="esphome" >}} by {{< ghuser name="flacjacket" >}} (cherry-picked)
- Refactor docker build system and workflows {{< pr number="2023" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (cherry-picked)
- GH Actions CI use GHCR {{< pr number="2027" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (cherry-picked)
- Dashboard disable assets caching {{< pr number="2025" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (cherry-picked)
- Improve external components error messages {{< pr number="2026" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (cherry-picked)
- Number and Template Number updates {{< pr number="2036" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (cherry-picked)
- Add restore_value to template number {{< pr number="2041" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (cherry-picked)
- midea_ac: Fix turbo boost mode. Preset PRESET_BOOST. {{< pr number="2029" repo="esphome" >}} by {{< ghuser name="dudanov" >}} (cherry-picked)
- Bump dashboard to 20210719.0 {{< pr number="2043" repo="esphome" >}} by {{< ghuser name="balloob" >}} (cherry-picked)
- Correct ADS1115 handling of multiple sensors in continuous mode {{< pr number="2016" repo="esphome" >}} by {{< ghuser name="flacjacket" >}} (cherry-picked)
- ESP32 ADC use esp-idf {{< pr number="2024" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}} (cherry-picked)
- Fix white value transition for addressable lights {{< pr number="2045" repo="esphome" >}} by {{< ghuser name="oxan" >}} (cherry-picked)
- Adding last_reset_type to sensors that should support it. {{< pr number="2039" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (cherry-picked) (new-feature)
- Remove superfluous polling on ADS1115 {{< pr number="2015" repo="esphome" >}} by {{< ghuser name="flacjacket" >}} (cherry-picked)

<!-- markdownlint-enable MD013 -->

## All Changelogs

{{< changelogs >}}
