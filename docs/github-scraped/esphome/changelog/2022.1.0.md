---
description: "Changelog for ESPHome 2022.1.0."
title: "ESPHome 2022.1.0 - 19th January 2022"
params:
  seo:
    description: Changelog for ESPHome 2022.1.0.
    image: /_static/changelog-2022.1.0.png
---

{{< imgtable >}}
"BL0940","components/sensor/bl0940","bl0940.png",""
"BMP388 and BMP390","components/sensor/bmp3xx","bmp388.jpg",""
"CD74HC4067","components/sensor/cd74hc4067","cd74hc4067.jpg",""
"ESP32 Native CAN Bus","components/canbus","canbus.svg",""
"Growatt Solar","components/sensor/growatt_solar","growatt.jpg",""
"INA260","components/sensor/ina260","ina260.jpg",""
"Inkplate 10","components/display/inkplate6","inkplate6.jpg",""
"Kalman Combinator","components/sensor/kalman_combinator","function.svg","dark-invert"
"MCP3204","components/sensor/mcp3204","mcp3204.jpg",""
"MCP47A1","components/output/mcp47a1","mcp47a1.svg",""
"Midea IR Climate","components/climate/climate_ir","air-conditioner-ir.svg","dark-invert"
"Safe Mode Button","components/button/safe_mode","restart-alert.svg","dark-invert"
"Shutdown Button","components/button/shutdown","power_settings.svg","dark-invert"
"Tuya Number","components/number/tuya","tuya.png",""
{{< /imgtable >}}
HAPPY NEW YEAR!!

There are a few more new components this release than I expected, yay!!!

## ESPHome Web

Today we're launching a new variant of the ESPHome dashboard: ESPHome Web â€“ <https://web.esphome.io>.

The biggest challenge to getting started with ESPHome is the initial installation of ESPHome on your device.
This installation needs be done by attaching the device to your computer via a cable. Once installed, updates can
be installed over-the-air.

Last year we added support to the ESPHome dashboard to do the initial installation via the browser. Browsers
security require the website to be served over HTTPS to allow device installation. Most people browse it from
<http://homeassistant.local> or other local addresses so only users that manually configured external access or
using Home Assistant Cloud could benefit.

With ESPHome Web we took the installation bits of the ESPHome dashboard and made them available on a website served
over HTTPS. It works 100% in your browser without a backend or data leaving your computer. Now anyone can easily
install ESPHome on their devices to get started.

[Visit ESPHome Web](https://web.esphome.io)

## JSON

We upgraded the ArduinoJson library used to parse and build JSON strings to the latest version.
All of the internal code has been updated to work with the changes, but any custom code or even
`lambda` might need updating now.

The most noticeble change is that the `&` reference modifier on the `JsonObject` that are
created in lambdas are no longer required.

Example:

```cpp
JsonObject &blah = root.createNestedObject("blah");

// This should now be:

JsonObject blah = root.createNestedObject("blah");
```

<!-- markdownlint-disable MD013 -->

## Release 2022.1.1 - January 20

- Add `*.py.script` files to distributions {{< pr number="3074" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Release 2022.1.2 - January 25

- [modbus_controller] fix incorrect start address for number write {{< pr number="3073" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Set the wrapped single light in light partition to internal {{< pr number="3092" repo="esphome" >}} by {{< ghuser name="placidorevilla" >}}

## Release 2022.1.3 - February 2

- Fix backwards string case helpers {{< pr number="3126" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)

## Release 2022.1.4 - February 9

- Enable mDNS during OTA safe mode {{< pr number="3146" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Try fix canbus config validation {{< pr number="3173" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}

## Full list of changes

### New Features

- Support different run duration for non-timer wakeup {{< pr number="2861" repo="esphome" >}} by {{< ghuser name="jhamhader" >}} (new-feature)
- Add light.on_state trigger {{< pr number="2868" repo="esphome" >}} by {{< ghuser name="tony-fav" >}} (new-feature)
- Support inkplate10 {{< pr number="2937" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)

### New Components

- Add growatt modbus sensor {{< pr number="2922" repo="esphome" >}} by {{< ghuser name="leeuwte" >}} (new-integration)
- Add Tuya Number support {{< pr number="2765" repo="esphome" >}} by {{< ghuser name="frankiboy1" >}} (new-integration)
- Add shutdown and safe_mode button {{< pr number="2918" repo="esphome" >}} by {{< ghuser name="jsuanet" >}} (new-integration)
- INA260 Current and Power Sensor support {{< pr number="2788" repo="esphome" >}} by {{< ghuser name="MrEditor97" >}} (new-integration)
- Improve PSRAM support {{< pr number="2884" repo="esphome" >}} by {{< ghuser name="oxan" >}} (new-integration)
- Add bl0940 component used by e.g. tuya devices {{< pr number="1904" repo="esphome" >}} by {{< ghuser name="tobias-" >}} (new-integration)
- Add support for BMP388 / BMP 390 pressure and temperature sensor {{< pr number="2716" repo="esphome" >}} by {{< ghuser name="martgras" >}} (new-integration)
- Add MCP47A1 DAC output {{< pr number="3014" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)
- Create new kalman_combinator component {{< pr number="2965" repo="esphome" >}} by {{< ghuser name="Cat-Ion" >}} (new-integration)
- New Midea IR component, improvements and fixes {{< pr number="2847" repo="esphome" >}} by {{< ghuser name="dudanov" >}} (new-integration)
- MCP3204 4-channel 12-bit ADC component {{< pr number="2895" repo="esphome" >}} by {{< ghuser name="rsumner" >}} (new-integration)
- Add cd74hc4067 multiplexer {{< pr number="2431" repo="esphome" >}} by {{< ghuser name="asoehlke" >}} (new-integration)
- Native ESP32 CAN support {{< pr number="1629" repo="esphome" >}} by {{< ghuser name="Sympatron" >}} (new-integration)

### Breaking Changes

- Modbus: use multiply for publishing number {{< pr number="2916" repo="esphome" >}} by {{< ghuser name="martgras" >}} (breaking-change)
- Upgrade ArduinoJson to 6.18.5 and migrate code {{< pr number="2844" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Fix backwards string case helpers {{< pr number="3126" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)

### Beta Changes

- Add factory to download name {{< pr number="3040" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Bump dashboard to 20220113.2 {{< pr number="3041" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Disable caching for binary download {{< pr number="3054" repo="esphome" >}} by {{< ghuser name="lutzky" >}}
- Rename post_build scripts to fix codeowners script {{< pr number="3057" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Remove deprecated attribute from virtual entity methods {{< pr number="3056" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Add number setting to web_server/rest_api {{< pr number="3055" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- bump dashboard to 20220116.0 {{< pr number="3061" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- [modbus_controller] add missing skip_updates {{< pr number="3063" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Fail hard if no random bytes available for encryption {{< pr number="3067" repo="esphome" >}} by {{< ghuser name="oxan" >}}

### All changes

- Add a simple helper to remap values {{< pr number="2850" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump pylint from 2.12.1 to 2.12.2 {{< pr number="2858" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Support different run duration for non-timer wakeup {{< pr number="2861" repo="esphome" >}} by {{< ghuser name="jhamhader" >}} (new-feature)
- Drop len parameter from parse_number() {{< pr number="2883" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Drop unused xSemaphoreWait define {{< pr number="2888" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Move i2c scan to setup {{< pr number="2869" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Introduce hex parsing & formatting helper functions {{< pr number="2882" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Add light.on_state trigger {{< pr number="2868" repo="esphome" >}} by {{< ghuser name="tony-fav" >}} (new-feature)
- Reduce timing noise in duty_cycle {{< pr number="2881" repo="esphome" >}} by {{< ghuser name="CarlosGS" >}}
- Turn verbose a debug statement in bme280 {{< pr number="2906" repo="esphome" >}} by {{< ghuser name="CarlosGS" >}}
- Add reset_duration option for waveshare epaper HAT rev 2.1 {{< pr number="1481" repo="esphome" >}} by {{< ghuser name="owenb321" >}}
- Log the actual value in modbus number {{< pr number="2901" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add gpio 12 to strapping pin list {{< pr number="2902" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Added access to ble_scan_result_evt_param as get_scan_result {{< pr number="2854" repo="esphome" >}} by {{< ghuser name="myhomeiot" >}}
- fix multi-line comment warning/error {{< pr number="2891" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Bump black from 21.11b1 to 21.12b0 {{< pr number="2879" repo="esphome" >}} by {{< ghuser name="dependabot[bot]" >}}
- Adding Pascal unit to constants {{< pr number="2914" repo="esphome" >}} by {{< ghuser name="jddonovan" >}}
- quantile filter support {{< pr number="2900" repo="esphome" >}} by {{< ghuser name="konikvranik" >}}
- ESP32 CAM add Automatic Exposure Control option {{< pr number="2892" repo="esphome" >}} by {{< ghuser name="sveip" >}}
- Modbus: use multiply for publishing number {{< pr number="2916" repo="esphome" >}} by {{< ghuser name="martgras" >}} (breaking-change)
- Add growatt modbus sensor {{< pr number="2922" repo="esphome" >}} by {{< ghuser name="leeuwte" >}} (new-integration)
- Add Tuya Number support {{< pr number="2765" repo="esphome" >}} by {{< ghuser name="frankiboy1" >}} (new-integration)
- Support inverted tm1637 display {{< pr number="2878" repo="esphome" >}} by {{< ghuser name="jlsjonas" >}}
- Fix tm1637 bootloop {{< pr number="2929" repo="esphome" >}} by {{< ghuser name="jlsjonas" >}}
- Add shutdown and safe_mode button {{< pr number="2918" repo="esphome" >}} by {{< ghuser name="jsuanet" >}} (new-integration)
- Support inkplate10 {{< pr number="2937" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-feature)
- bang_bang: respect set cool- and heat-only modes {{< pr number="2926" repo="esphome" >}} by {{< ghuser name="sairon" >}}
- Update curl package version in docker {{< pr number="2939" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Change HDC1080 init instruction failure from error to warning {{< pr number="2927" repo="esphome" >}} by {{< ghuser name="grob6000" >}}
- Add option to load docker image when building {{< pr number="2938" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Disable nightly dev build {{< pr number="2943" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Revert "Disable nightly dev build" {{< pr number="2944" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Remove Content-Length header from camera snapshot response {{< pr number="2860" repo="esphome" >}} by {{< ghuser name="DotNetDann" >}}
- ST7920 ESP32 fix {{< pr number="2962" repo="esphome" >}} by {{< ghuser name="marsjan155" >}}
- Fix switch log state if inverted {{< pr number="2960" repo="esphome" >}} by {{< ghuser name="hobbyquaker" >}}
- Add pin aliases for featheresp32-s2 {{< pr number="2970" repo="esphome" >}} by {{< ghuser name="arunderwood" >}}
- INA260 Current and Power Sensor support {{< pr number="2788" repo="esphome" >}} by {{< ghuser name="MrEditor97" >}} (new-integration)
- Upgrade ArduinoJson to 6.18.5 and migrate code {{< pr number="2844" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (breaking-change)
- Don't use pyproject.toml for esphome build {{< pr number="2980" repo="esphome" >}} by {{< ghuser name="agners" >}}
- Explicitly use overloaded begin() for I2C master initialization {{< pr number="2978" repo="esphome" >}} by {{< ghuser name="agners" >}}
- Use template path {{< pr number="2961" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Fix compile error for idf projects with ArduinoJson 6 {{< pr number="2979" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Modbus: fix response parsing error for coil write {{< pr number="2986" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Change unset ESPHOME_LOG_LEVEL fallback to NONE {{< pr number="2982" repo="esphome" >}} by {{< ghuser name="dbuezas" >}}
- Add SH1107_128x64 to the ssd1306 component {{< pr number="2967" repo="esphome" >}} by {{< ghuser name="arunderwood" >}}
- Add logging for some Nextion errors that didn't have any {{< pr number="2957" repo="esphome" >}} by {{< ghuser name="masto" >}}
- Fix HTTPRequestComponent::get_string return value {{< pr number="2987" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Improve PSRAM support {{< pr number="2884" repo="esphome" >}} by {{< ghuser name="oxan" >}} (new-integration)
- Support ISR based pulse counter on ESP32-C3 {{< pr number="2983" repo="esphome" >}} by {{< ghuser name="agners" >}}
- Use to_string() from STL when available {{< pr number="2992" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Set UTF-8 encoding and version for prometheus /metrics {{< pr number="2993" repo="esphome" >}} by {{< ghuser name="MyIgel" >}}
- Introduce bit_cast() backport {{< pr number="2991" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Apply --no-use-pep517 for docker images {{< pr number="2985" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Dont validate baud_rate for sim800l platform {{< pr number="2945" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Modbus: add binary output {{< pr number="2931" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Add bl0940 component used by e.g. tuya devices {{< pr number="1904" repo="esphome" >}} by {{< ghuser name="tobias-" >}} (new-integration)
- Honor user set values for col/row start for INITR_MINI_160X80. {{< pr number="2976" repo="esphome" >}} by {{< ghuser name="gonzalop" >}}
- Fix clang-tidy with multiple ESP32 toolchains installed {{< pr number="2998" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Set correct include_dir in platformio.ini {{< pr number="2999" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- SGP40 - Reduce delay in measurement {{< pr number="2996" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- atc mithermometer: Add possibility to report signal strength {{< pr number="3000" repo="esphome" >}} by {{< ghuser name="mknjc" >}}
- Support clang-tidy for ESP32 variants {{< pr number="3001" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix SlowPWM output switch at the end of period {{< pr number="2984" repo="esphome" >}} by {{< ghuser name="Chupaka" >}}
- Add support for BMP388 / BMP 390 pressure and temperature sensor {{< pr number="2716" repo="esphome" >}} by {{< ghuser name="martgras" >}} (new-integration)
- Clean-up reverse_bits helpers {{< pr number="3011" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Convert clamp() helper to backport of std::clamp() {{< pr number="3010" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Introduce str_lower_case() and str_upper_case() helpers {{< pr number="3008" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Drop uint{32,64}_to_string() helper functions {{< pr number="3009" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Bump PlatformIO to 5.2.4 and zeroconf to 0.37.0 {{< pr number="3007" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Offset bugfix in Modbus Text Sensor {{< pr number="3006" repo="esphome" >}} by {{< ghuser name="stegm" >}}
- Add MCP47A1 DAC output {{< pr number="3014" repo="esphome" >}} by {{< ghuser name="jesserockz" >}} (new-integration)
- Bump docker dependencies {{< pr number="3019" repo="esphome" >}} by {{< ghuser name="OttoWinter" >}}
- Fix register ranges in modbus controller {{< pr number="2981" repo="esphome" >}} by {{< ghuser name="stegm" >}}
- Add restore_mode to output switch {{< pr number="3016" repo="esphome" >}} by {{< ghuser name="joshuaspence" >}}
- Add turn_on/off trigger to slow_pwm {{< pr number="2921" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Convert is_callable to a backport of std::is_invocable {{< pr number="3023" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Create new kalman_combinator component {{< pr number="2965" repo="esphome" >}} by {{< ghuser name="Cat-Ion" >}} (new-integration)
- New Midea IR component, improvements and fixes {{< pr number="2847" repo="esphome" >}} by {{< ghuser name="dudanov" >}} (new-integration)
- Extend esp32_camera with requester to improve performance {{< pr number="2813" repo="esphome" >}} by {{< ghuser name="ayufan" >}}
- MCP3204 4-channel 12-bit ADC component {{< pr number="2895" repo="esphome" >}} by {{< ghuser name="rsumner" >}} (new-integration)
- Adding sdm_meter ability to report total power {{< pr number="2959" repo="esphome" >}} by {{< ghuser name="MiKuBB" >}}
- [Modbus_controller] Fix binary sensor lambda {{< pr number="3020" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Clean-up random helper functions {{< pr number="3022" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Fix display picture for nextion display {{< pr number="3018" repo="esphome" >}} by {{< ghuser name="lhoracek" >}}
- Fix heatpumpir codegen min/max temperatures {{< pr number="3025" repo="esphome" >}} by {{< ghuser name="jeffborg" >}}
- Add an action for pzemac to reset the total energy {{< pr number="2480" repo="esphome" >}} by {{< ghuser name="nuttytree" >}}
- Nexa 433MHz RF protocol {{< pr number="2037" repo="esphome" >}} by {{< ghuser name="GruffyPuffy" >}}
- Deprecate virtual methods to set entity properties {{< pr number="3021" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Run post scripts for factory binaries for flashing {{< pr number="3003" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add cd74hc4067 multiplexer {{< pr number="2431" repo="esphome" >}} by {{< ghuser name="asoehlke" >}} (new-integration)
- Native ESP32 CAN support {{< pr number="1629" repo="esphome" >}} by {{< ghuser name="Sympatron" >}} (new-integration)
- [Modbus_controller] Fix duplicate cmd check {{< pr number="3031" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Introduce big- and little-endian integer types {{< pr number="2997" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Generate basic config for esphome-web devices {{< pr number="3036" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Bump esphome-dashboard to 20220113.1 {{< pr number="3038" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- Add factory to download name {{< pr number="3040" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Bump dashboard to 20220113.2 {{< pr number="3041" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- Disable caching for binary download {{< pr number="3054" repo="esphome" >}} by {{< ghuser name="lutzky" >}}
- Rename post_build scripts to fix codeowners script {{< pr number="3057" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Remove deprecated attribute from virtual entity methods {{< pr number="3056" repo="esphome" >}} by {{< ghuser name="oxan" >}}
- Add number setting to web_server/rest_api {{< pr number="3055" repo="esphome" >}} by {{< ghuser name="jesserockz" >}}
- bump dashboard to 20220116.0 {{< pr number="3061" repo="esphome" >}} by {{< ghuser name="balloob" >}}
- [modbus_controller] add missing skip_updates {{< pr number="3063" repo="esphome" >}} by {{< ghuser name="martgras" >}}
- Fail hard if no random bytes available for encryption {{< pr number="3067" repo="esphome" >}} by {{< ghuser name="oxan" >}}

<!-- markdownlint-enable MD013 -->

## All Changelogs

{{< changelogs >}}
