---
description: "Instructions for setting up TM1651 Battery Display."
title: "TM1651 Battery Display"
params:
  seo:
    description: Instructions for setting up TM1651 Battery Display.
    image: tm1651_battery_display.jpg
---

{{< anchor "tm1651" >}}

The `tm1651` display platform allows you to use battery display units based on the TM1651 chip such as
[this one](https://www.aliexpress.com/item/32811491559.html) with ESPHome. This component supports the level
and brightness settings. All updates can be made via lambda expressions.

{{< img src="tm1651-battery-display.jpg" alt="Image" width="70.0%" class="align-center" >}}

```yaml
tm1651:
  id: tm1651_battery
  clk_pin: GPIOXX
  dio_pin: GPIOXX
```

## Configuration variables

- **clk_pin** (**Required**, [Pin Schema](/guides/configuration-types#pin-schema)): CLK pin
- **dio_pin** (**Required**, [Pin Schema](/guides/configuration-types#pin-schema)): DIO pin
- **id** (*Optional*, [ID](/guides/configuration-types#id)): Manually specify the ID used for code generation.

## Actions

{{< anchor "tm1651-set_level_percent_action" >}}

### `tm1651.set_level_percent` Action

This [Action](/automations/actions#all-actions) changes the level of the battery display at runtime.
Automatically calculates input level in percentages to actual level for the display.

```yaml
on_...:
  - tm1651.set_level_percent:
      id: tm1651_battery
      level_percent: 50
```

#### Configuration variables

- **id** (**Required**, [ID](/guides/configuration-types#id)): The ID of the TM1651.
- **level_percent** (**Required**, [templatable](/automations/templates), int): Level from 0 to 100

{{< anchor "tm1651-set_level_action" >}}

### `tm1651.set_level` Action

This [Action](/automations/actions#all-actions) changes the level of the battery display at runtime.

```yaml
on_...:
  - tm1651.set_level:
      id: tm1651_battery
      level: 5
```

#### Configuration variables

- **id** (**Required**, [ID](/guides/configuration-types#id)): The ID of the TM1651.
- **level** (**Required**, [templatable](/automations/templates), int): Level from 0 to 7

{{< anchor "tm1651-set_brightness_action" >}}

### `tm1651.set_brightness` Action

This [Action](/automations/actions#all-actions) allows you to manually change the brightness of the battery display at runtime.

```yaml
on_...:
  - tm1651.set_brightness:
      id: tm1651_battery
      brightness: 1
```

#### Configuration variables

- **id** (**Required**, [ID](/guides/configuration-types#id)): The ID of the TM1651.
- **brightness** (**Required**, [templatable](/automations/templates), int): There is three levels of brightness
  (`1`, `2` or `3`  ) from lowest to highest brightness.

{{< anchor "tm1651-turn_off" >}}

### `tm1651.turn_off` Action

This [Action](/automations/actions#all-actions) turns off all the LEDs.

```yaml
on_...:
  - tm1651.turn_off:
      id: tm1651_battery
```

#### Configuration variables

- **id** (**Required**, [ID](/guides/configuration-types#id)): The ID of the TM1651.

{{< anchor "tm1651-turn_on" >}}

### `tm1651.turn_on` Action

This [Action](/automations/actions#all-actions) turns on the LEDs.

```yaml
on_...:
  - tm1651.turn_on:
      id: tm1651_battery
```

#### Configuration variables

- **id** (**Required**, [ID](/guides/configuration-types#id)): The ID of the TM1651.

## Advanced Configuration

You also can control this component with lambda expressions

```yaml
api:
  actions:
    - action: battery_level
      variables:
        level: int
      then:
        - lambda: |-
            id(tm1651_battery).set_level(level);
    - action: battery_brightness
      variables:
        brightness: int
      then:
        - lambda: |-
            id(tm1651_battery).set_brightness(brightness);
```

## See Also

- {{< docref "index/" >}}
