---
description: XIAO ESP32C3 ESPHome æ™ºèƒ½æ’æ¸©å™¨
title: Xiao ESP32C3 ESPHome æ™ºèƒ½æ’æ¸©å™¨
keywords:
- Contribution
image: https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png
slug: /cn/esp32c3_smart_thermostat
last_update:
  date: 12/1/2023
  author: Chris (Echo7394)
---

# Xiao ESP32C3 ESPHome æ™ºèƒ½æ’æ¸©å™¨

<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/9.jpg" alt="pir" width={500} height="auto" /></p>

æœ¬æ•™ç¨‹å°†é€æ­¥æŒ‡å¯¼æ‚¨å¦‚ä½•åˆ¶ä½œä¸€ä¸ª Xiao ESP32C3 ESPHome æ™ºèƒ½æ’æ¸©å™¨ã€‚ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹å§ï¼

## ç¡¬ä»¶å‡†å¤‡

å¦‚æœæ‚¨æƒ³å®Œæ•´åœ°è·Ÿéšæœ¬æ•™ç¨‹ï¼Œæ‚¨éœ€è¦å‡†å¤‡ä»¥ä¸‹ç‰©å“ã€‚

<table align="center">
  <tbody><tr>
      <th>Seeed Studio XIAO ESP32C3</th>
      <th>Seeed Studio æ‰©å±•æ¿</th>
      <th>Home Assistant è®¾å¤‡ <br /> ä¾‹å¦‚ Seeed Studio Home assistant Yellow</th>
    </tr>
    <tr>
      <td><div align="center"><img src="https://files.seeedstudio.com/wiki/XIAO_WiFi/board-pic.png" style={{width:100, height:'auto'}}/></div></td>
      <td><div align="center"><img src="https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/Update_pic/zheng1.jpg" style={{width:210, height:'auto'}}/></div></td>
      <td><div align="center"><img src="https://files.seeedstudio.com/wiki/Home-Assistant/1.png" style={{width:210, height:'auto'}}/></div></td>
    </tr>
    <tr>
        <td align="center"><div class="get_one_now_container" style={{textAlign: 'center'}}>
            <a class="get_one_now_item" href="https://www.seeedstudio.com/Seeed-XIAO-ESP32C3-p-5431.html" target="_blank">
            <strong><span><font color={'FFFFFF'} size={"4"}> ç«‹å³è·å– ğŸ–±ï¸</font></span></strong>
            </a>
        </div></td>
        <td align="center"><div class="get_one_now_container" style={{textAlign: 'center'}}>
            <a class="get_one_now_item" href="https://www.seeedstudio.com/Seeeduino-XIAO-Expansion-board-p-4746.html" target="_blank">
            <strong><span><font color={'FFFFFF'} size={"4"}> ç«‹å³è·å–ğŸ–±ï¸</font></span></strong>
            </a>
        </div></td>
        <td align="center"><div class="get_one_now_container" style={{textAlign: 'center'}}>
            <a class="get_one_now_item" href="https://wiki.seeedstudio.com/cn/home_assistant_topic/#-devices-for-home-assistant-" target="_blank" rel="noopener noreferrer">
            <strong><span><font color={'FFFFFF'} size={"4"}> æŸ¥çœ‹æ›´å¤š ğŸ–±ï¸</font></span></strong>
            </a>
        </div></td>
    </tr>
  </tbody></table>

**Grove ä¼ æ„Ÿå™¨**

<table align="center">
  <tbody><tr>
      <th>Grove - æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ä¸“ä¸šç‰ˆ (DHT22/AM2302)</th>
      <th>Grove - 2é€šé“SPDTç»§ç”µå™¨</th>
      <th>Grove - å¤§ç”µæµç»§ç”µå™¨ 5V/10A</th>
      <th>Grove - OLEDæ˜¾ç¤ºå± 0.96" (SSD1315)</th>
      <th>ç¬æ—¶æŒ‰é’®ï¼ˆä»»ä½•ç±»å‹éƒ½å¯ä»¥ï¼‰</th>
    </tr>
    <tr>
      <td><p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/2.jpg" alt="pir" width={210} height="auto" /></p></td>
      <td><p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/3.jpg" alt="pir" width={210} height="auto" /></p></td>
      <td><p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/4.jpg" alt="pir" width={210} height="auto" /></p></td>
      <td><p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/5.jpg" alt="pir" width={210} height="auto" /></p></td>
      <td><p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/8.jpg" alt="pir" width={400} height="auto" /></p></td>
    </tr>
    <tr>
        <td align="center"><div class="get_one_now_container" style={{textAlign: 'center'}}>
            <a class="get_one_now_item" href="https://www.seeedstudio.com/Grove-Temperature-Humidity-Sensor-Pro-AM2302-DHT22.html" target="_blank">
            <strong><span><font color={'FFFFFF'} size={"4"}> ç«‹å³è·å– ğŸ–±ï¸</font></span></strong>
            </a>
        </div></td>
        <td align="center"><div class="get_one_now_container" style={{textAlign: 'center'}}>
            <a class="get_one_now_item" href="https://www.seeedstudio.com/Grove-2-Channel-SPDT-Relay.html" target="_blank">
            <strong><span><font color={'FFFFFF'} size={"4"}> ç«‹å³è·å–ğŸ–±ï¸</font></span></strong>
            </a>
        </div></td>
        <td align="center"><div class="get_one_now_container" style={{textAlign: 'center'}}>
            <a class="get_one_now_item" href="https://www.seeedstudio.com/Grove-Relay.html" target="_blank">
            <strong><span><font color={'FFFFFF'} size={"4"}> ç«‹å³è·å– ğŸ–±ï¸</font></span></strong>
            </a>
        </div></td>
        <td align="center"><div class="get_one_now_container" style={{textAlign: 'center'}}>
            <a class="get_one_now_item" href="https://www.seeedstudio.com/Grove-OLED-Display-0-96-SSD1315-p-4294.html" target="_blank">
            <strong><span><font color={'FFFFFF'} size={"4"}> ç«‹å³è·å– ğŸ–±ï¸</font></span></strong>
            </a>
        </div></td>
    </tr>
  </tbody></table>

<!-- ### 1. ä½¿ç”¨çš„ç‰©å“

a. Seed Studio Xiao ESP32C3

<!-- ![image1](./1.jpg)
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/1.jpg" alt="pir" width={1000} height="auto" /></p>

b. Grove DHT22 ä¼ æ„Ÿå™¨

<!-- ![image2](./2.jpg)
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/2.jpg" alt="pir" width={1000} height="auto" /></p>

c. Grove 2 é€šé“ç»§ç”µå™¨

<!-- ![image3](./3.jpg) 
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/3.jpg" alt="pir" width={1000} height="auto" /></p>

d. Grove å•é€šé“ç»§ç”µå™¨

<!-- ![image4](./4.jpg)
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/4.jpg" alt="pir" width={1000} height="auto" /></p>

e. Grove SSD1315 æ¨¡å—

<!-- ![image5](./5.jpg) 
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/5.jpg" alt="pir" width={1000} height="auto" /></p>

f. ï¼ˆå¯é€‰ï¼‰Seeed Studio æ‰©å±•æ¿

<!-- ![image6](./6.jpg) 
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/6.jpg" alt="pir" width={1000} height="auto" /></p>

d. ï¼ˆå¯é€‰ï¼‰[Seeed Studio Home Assistant Yellow](https://www.seeedstudio.com/Home-Assistant-Yellow-Kit-with-selectable-CM4-p-5680.html)ï¼Œæˆ–æ‚¨é€‰æ‹©çš„è®¾å¤‡

<!-- ![image7](./7.jpg) 
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/7.jpg" alt="pir" width={1000} height="auto" /></p>

e. ç¬æ—¶æŒ‰é’®ï¼ˆä»»ä½•ç±»å‹éƒ½å¯ä»¥ï¼‰

<!-- ![image8](./8.jpg)
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/8.jpg" alt="pir" width={1000} height="auto" /></p> -->

## è½¯ä»¶å‡†å¤‡

### å®‰è£… Home Assistant

ç¡®ä¿æ‚¨å·²ç»å®‰è£…å¹¶è¿è¡Œäº† Home Assistantã€‚è¿™é‡Œæœ‰å¤šä¸ªä»‹ç»å¦‚ä½•å°† Home Assistant åˆ·å…¥[äº§å“](https://wiki.seeedstudio.com/cn/home_assistant_topic/#-devices-for-home-assistant-)çš„ wikiã€‚æˆ‘ä½¿ç”¨çš„æ˜¯ç”± Raspberry Pi CM4 ä¾›ç”µçš„ Home assistant Yellowï¼Œæ‰€ä»¥æˆ‘å¯ä»¥[ç›´æ¥ä½¿ç”¨å®˜æ–¹æ–¹æ³•å°†æ“ä½œç³»ç»Ÿåˆ·å…¥ Home assistant Yellow](https://yellow.home-assistant.io/power-supply/)ã€‚

### åœ¨ Home Assistant ä¸Šå®‰è£… ESPHome

ESPHome ä½œä¸º **Home Assistant æ’ä»¶**æä¾›ï¼Œå¯ä»¥é€šè¿‡æ’ä»¶å•†åº—ç®€å•å®‰è£…ã€‚

<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/esphome.jpg" alt="pir" width={1000} height="auto" /></p>

- **æ­¥éª¤ 1.** ç‚¹å‡» **INSTALL**

<div style={{textAlign:'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/C3-ESPHome-img/2.png" style={{width:900, height:'auto'}}/></div>

- **æ­¥éª¤ 2.** å¯ç”¨æ‰€æœ‰é€‰é¡¹å¹¶ç‚¹å‡» **START**

<div style={{textAlign:'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/C3-ESPHome-img/3.png" style={{width:900, height:'auto'}}/></div>

å¦‚æœ ESPHome æˆåŠŸåŠ è½½ï¼Œæ‚¨å°†çœ‹åˆ°ä»¥ä¸‹çª—å£

<div style={{textAlign:'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/C3-ESPHome-img/4.png" style={{width:900, height:'auto'}}/></div>

## å¼€å§‹ä½¿ç”¨

ä¸€æ—¦æ‰€æœ‰è½¯ä»¶å’Œç¡¬ä»¶éƒ½å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬ç°åœ¨å°±å¯ä»¥å¼€å§‹äº†ã€‚

### 1. å°† Seeed Studio XIAO ESP32C3 æ·»åŠ åˆ° ESPHome

- **æ­¥éª¤ 1.** ç‚¹å‡» **+ NEW DEVICE**

<div style={{textAlign:'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/C3-ESPHome-img/5.png" style={{width:900, height:'auto'}}/></div>

- **æ­¥éª¤ 2.** ç‚¹å‡» CONTINUE

<div style={{textAlign:'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/C3-ESPHome-img/6.png" style={{width:900, height:'auto'}}/></div>

- **æ­¥éª¤ 3.** ä¸ºè®¾å¤‡è¾“å…¥ä¸€ä¸ª**åç§°**ï¼Œå¹¶è¾“å…¥ WiFi å‡­æ®ï¼Œå¦‚**ç½‘ç»œåç§°**å’Œ**å¯†ç **ã€‚ç„¶åç‚¹å‡» **NEXT**

<div style={{textAlign:'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/C3-ESPHome-img/7.png" style={{width:900, height:'auto'}}/></div>

- **æ­¥éª¤ 4.** é€‰æ‹© **ESP32-C3** å¹¶ç‚¹å‡»

<div style={{textAlign:'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/C3-ESPHome-img/8.png" style={{width:900, height:'auto'}}/></div>

- **æ­¥éª¤ 5.** ç‚¹å‡» **SKIP**ï¼Œå› ä¸ºæˆ‘ä»¬å°†æ‰‹åŠ¨é…ç½®è¿™ä¸ªå¼€å‘æ¿

<div style={{textAlign:'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/C3-ESPHome-full_function/14.png" style={{width:400, height:'auto'}}/></div>

### 2. åˆ›å»ºå¹¶ä¸Šä¼  YAML é…ç½®

- **æ­¥éª¤ 1.** ç‚¹å‡»æ–°åˆ›å»ºçš„å¼€å‘æ¿ä¸‹æ–¹çš„ **EDIT**

<div style={{textAlign:'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/C3-ESPHome-img/9.png" style={{width:900, height:'auto'}}/></div>

<!-- ### 2. å®‰è£… Home Assistant å’Œ ESPHome

- åœ¨æ‚¨é€‰æ‹©çš„è®¾å¤‡ä¸Šå®‰è£… Home Assistantã€‚æ ¹æ®æ‚¨å°è¯•å®‰è£… Home Assistant çš„è®¾å¤‡ï¼Œæœ‰å¾ˆå¤šä¿¡æ¯ä¸°å¯Œçš„æŒ‡å—ã€‚è®¾å¤‡ç±»å‹å°†å†³å®šå“ªç§é£æ ¼çš„ Home Assistant æœ€èƒ½æ»¡è¶³æ‚¨çš„éœ€æ±‚ã€‚

- å®‰è£… ESPHome å°±åƒåœ¨ Supervisor/Add-Ons/Extensions é€‰é¡¹å¡ä¸­æœç´¢"ESPHome"å¹¶ç‚¹å‡»å®‰è£…ä¸€æ ·ç®€å•ã€‚

<!-- ![image9](./esphome.jpg)
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/esphome.jpg" alt="pir" width={1000} height="auto" /></p> -->

- **æ­¥éª¤ 7.** åˆ›å»ºå¹¶ä¸Šä¼  YAML é…ç½®

  ä¸‹é¢ä»£ç çš„è¯´æ˜ï¼š

  - **åç§°ï¼š** "thermostat"

  - **å¼€å‘æ¿é…ç½®ï¼š** <br />
  é—ªå­˜æ¨¡å¼è®¾ç½®ä¸º DIOã€‚<br />
  å¼€å‘æ¿æŒ‡å®šä¸º"seeed_xiao_esp32c3"ï¼Œä½¿ç”¨ Arduino æ¡†æ¶ã€‚

  - **å¯åŠ¨æ—¶æ“ä½œï¼š**<br />
  æ˜¾ç¤ºæ—¥å¿—æ¶ˆæ¯ï¼š"Booting thermostat."<br />
  å…³é—­ä¸‰ä¸ªç»§ç”µå™¨ï¼šåŠ çƒ­ã€åˆ¶å†·å’Œé£æ‰‡ã€‚<br />
  å»¶è¿Ÿ 500 æ¯«ç§’ã€‚<br />
  æ‰§è¡Œåä¸º"boot_beep"çš„è„šæœ¬ã€‚

  - **è„šæœ¬é…ç½®ï¼š**<br />
  å¯åŠ¨èœ‚é¸£è„šæœ¬ï¼š<br />
  æ‰“å¼€èœ‚é¸£å™¨ï¼Œè®¾ç½®å…¶é¢‘ç‡ä»¥äº§ç”Ÿèœ‚é¸£å£°ï¼Œå¹¶åœ¨ 300 æ¯«ç§’åå…³é—­ã€‚

  - **API å’Œ OTA é…ç½®ï¼š**<br />
  APIï¼š<br />
  æŒ‡å®šåŠ å¯†å¯†é’¥ã€‚<br />
  OTAï¼š<br />
  ä¸ºæ— çº¿æ›´æ–°è®¾ç½®å¯†ç ä¸º"13371337"ã€‚

  - **èœ‚é¸£å™¨è¾“å‡ºï¼š**<br />
  ä½¿ç”¨ LEDC å¹³å°é…ç½®ï¼Œå¼•è„šä¸º 5ã€‚

  - **WiFi é…ç½®ï¼š**<br />
  æŒ‡å®šè¿æ¥åˆ° Wi-Fi çš„ SSID å’Œå¯†ç ã€‚<br />
  é…ç½®åå¤‡çƒ­ç‚¹ï¼ˆå¼ºåˆ¶é—¨æˆ·ï¼‰ï¼ŒSSID ä¸º"Xiao-Esp32C3"ï¼Œå¯†ç ä¸º"13371337"ã€‚

  - **I2C é…ç½®ï¼š**<br />
  é…ç½® I2C é€šä¿¡ï¼ŒSDA å¼•è„šä¸º 6ï¼ŒSCL å¼•è„šä¸º 7ã€‚

  - **å­—ä½“é…ç½®ï¼š**<br />
  ä¸ºæ˜¾ç¤ºå±å®šä¹‰ä¸¤ç§ä¸åŒå¤§å°çš„å­—ä½“ã€‚

  - **æ˜¾ç¤ºé…ç½®ï¼š**<br />
  ä½¿ç”¨ SSD1315 I2C æ˜¾ç¤ºå±ï¼Œå¸¦æœ‰ lambda å‡½æ•°æ¥æ ¼å¼åŒ–å’Œæ˜¾ç¤ºä¿¡æ¯ã€‚<br />
  æ˜¾ç¤ºåæ°æ¸©åº¦ã€æ¹¿åº¦ã€Wi-Fi ä¿¡å·å¼ºåº¦å’Œ IP åœ°å€ã€‚

  - **ä¼ æ„Ÿå™¨é…ç½®ï¼š**<br />
  ä½¿ç”¨ DHT22 ä¼ æ„Ÿå™¨è¿›è¡Œæ¸©åº¦å’Œæ¹¿åº¦è¯»å–ï¼Œæ›´æ–°é—´éš”ä¸º 10 ç§’ã€‚<br />
  åŒ…æ‹¬ Wi-Fi ä¿¡å·ä¼ æ„Ÿå™¨ï¼Œæ›´æ–°é—´éš”ä¸º 20 ç§’ã€‚

  - **æ–‡æœ¬ä¼ æ„Ÿå™¨é…ç½®ï¼š**<br />
  æ˜¾ç¤ºæ’æ¸©å™¨çš„ IP åœ°å€å’Œ ESPHome ç‰ˆæœ¬ã€‚

  - **å¼€å…³é…ç½®ï¼š**<br />
  ä¸º relay_heatã€relay_cooling å’Œ relay_fan é…ç½®ä¸‰ä¸ª GPIO å¼€å…³ã€‚

  - **äºŒè¿›åˆ¶ä¼ æ„Ÿå™¨é…ç½®ï¼š**<br />
  ä¸ºå¾ªç¯é£æ‰‡æŒ‰é’®æŒ‰ä¸‹é…ç½®äºŒè¿›åˆ¶ä¼ æ„Ÿå™¨ã€‚<br />
  æŒ‰ä¸‹æ—¶ï¼Œå®ƒæ§åˆ¶æ°”å€™ç³»ç»Ÿçš„é£æ‰‡æ¨¡å¼ã€‚

  - **æ°”å€™é…ç½®ï¼š**<br />
  ä½¿ç”¨æŒ‡å®šçš„æ¸©åº¦ä¼ æ„Ÿå™¨å®ç°æ’æ¸©å™¨æ§åˆ¶ã€‚<br />
  å®šä¹‰åŠ çƒ­ã€åˆ¶å†·ã€é£æ‰‡æ¨¡å¼å’Œç©ºé—²çš„æ“ä½œã€‚<br />
  è®¾ç½®æ¸©åº¦é™åˆ¶ã€æ­¥é•¿å’Œé»˜è®¤é¢„è®¾ã€‚

  å°†æ­¤å†…å®¹ç²˜è´´åˆ°æ‚¨çš„ ESPHome è®¾å¤‡é…ç½® yaml æ–‡ä»¶ä¸­ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨[è¿™é‡Œ](https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/esp32c3config.yaml)ä¸‹è½½å®Œæ•´çš„ .yaml æ–‡ä»¶

```yaml
esphome:
  name: ecostat
  platformio_options:
    board_build.flash_mode: dio
  on_boot:
    priority: 750
    then:
      - logger.log: "Booting EcoStat"
      - delay: 500ms
      - lambda: |-
          id(relay_heat).turn_off();
          id(relay_cooling).turn_off();
          id(relay_fan).turn_off();
          id(ecostat_control_heat).mode = CLIMATE_MODE_OFF;
          id(ecostat_control_cooling).mode = CLIMATE_MODE_OFF;
      - script.execute: boot_beep

esp32:
  board: seeed_xiao_esp32c3
  variant: esp32c3
  framework:
    type: arduino
    platform_version: 5.4.0

#logger:
 # level: VERY_VERBOSE

api:
  encryption:
    key: "YOURKEYHERE"

ota:
  password: "13371337"

script:
- id: boot_beep
  then:
    # First ^E
    - output.turn_on: buzzer
    - output.ledc.set_frequency:
        id: buzzer
        frequency: 659.25Hz  # E
    - output.set_level:
        id: buzzer
        level: "50%"
    - delay: 150ms
    - output.turn_off: buzzer
    - output.turn_on: buzzer
    - output.ledc.set_frequency:
        id: buzzer
        frequency: 1000Hz
    - output.set_level:
        id: buzzer
        level: "50%"
    - delay: 150ms
    - output.turn_off: buzzer
output:
  - platform: ledc
    pin: 5
    id: buzzer

wifi:
  ssid: YOURWIFINAME
  password: YOURWIFIPASS

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Xiao-Esp32C3 Fallback Hotspot"
    password: "13371337"

i2c:
  sda: 6
  scl: 7
  scan: False

font:
  # gfonts://family[@weight]
  - file: "gfonts://Roboto"
    id: roboto
    size: 20

  - file: "gfonts://Poppins@700"
    id: inter
    size: 10

display:
  - platform: SSD1315_i2c
    id: oled
    model: "SSD1315 128x64"
    address: 0x3C
    lambda: |-
      float temp_celsius = id(temp).state;
      float temp_fahrenheit = (temp_celsius * 9.0 / 5.0) + 32.0;
      char temp_str[6]; // Buffer for temperature string
      dtostrf(temp_celsius, 4, 1, temp_str); // Convert Celsius to string with 1 decimal place

      it.print(28, 0, id(inter), id(ip_address).state.c_str());
      it.printf(0, 18, id(roboto), "T: %.1f  ", temp_fahrenheit);
      it.printf(70, 18, id(roboto), "H: %d", int(id(humidity).state));
      it.printf(31, 45, id(inter), "RSSI: %d", int(id(rssi).state));

climate:
  - platform: thermostat
    name: "EcoStat Heating"
    id: ecostat_control_heat
    sensor: temp
    heat_deadband: 2 Â°F
    heat_overrun: 0
    min_heating_run_time: 60s
    min_heating_off_time: 120s
    min_idle_time: 3min
    visual:
      min_temperature: 60 Â°F
      max_temperature: 80 Â°F
      temperature_step:
        current_temperature: 0.1
        target_temperature: 1.0
        target_temperature_low: 65 Â°F
    heat_action:
      - switch.turn_on: relay_heat
    idle_action:
      - switch.turn_off: relay_heat
    default_preset: Normal
    preset:
      - name: Normal
        default_target_temperature_low: 65 Â°F


  - platform: thermostat
    name: "EcoStat Cooling"
    id: ecostat_control_cooling
    sensor: temp
    cool_deadband: 2 Â°F
    cool_overrun: 0
    min_cooling_off_time: 20s
    min_cooling_run_time: 60s
    min_idle_time: 3min
    visual:
      min_temperature: 60 Â°F
      max_temperature: 80 Â°F
      temperature_step:
        current_temperature: 0.1
        target_temperature: 1.0
        target_temperature_low: 70 Â°F
    cool_action:
      - switch.turn_on: relay_cooling
    idle_action:
      - switch.turn_off: relay_cooling
    min_fan_mode_switching_time: 20s
    fan_mode_on_action:
      - switch.turn_on: relay_fan
    fan_mode_off_action:
      - switch.turn_off: relay_fan
    default_preset: Normal
    preset:
      - name: Normal
        default_target_temperature_high: 70 Â°F

sensor:
  - platform: dht
    pin: 20
    model: DHT22
    update_interval: 10s
    temperature:
      name: "EcoStat Temperature"
      id: temp
    humidity:
      name: "EcoStat Humidity"
      id: humidity
  - platform: wifi_signal
    name: "Wi-Fi Signal Strength"
    id: rssi
    update_interval: 20s

text_sensor:
  - platform: wifi_info
    ip_address:
      name: "EcoStat IP Address"
      id: ip_address
  - platform: version
    name: "EcoStat ESPHome Version"

switch:
  - platform: gpio
    id: relay_heat
    pin:
      number: 10
      mode: OUTPUT
  - platform: gpio
    id: relay_cooling
    pin:
      number: 9
      mode: OUTPUT
  - platform: gpio
    id: relay_fan
    pin:
      number: 21
      mode: OUTPUT

binary_sensor:
  - platform: gpio
    id: tempup
    pin:
      number: 8
      mode: INPUT_PULLUP
    filters:
      - delayed_on: 50ms
      - delayed_off: 50ms
    on_press:
      then:
        - lambda: |-
            if (id(ecostat_control_heat).mode == esphome::climate::CLIMATE_MODE_HEAT) {
              auto current_target_temp = id(ecostat_control_heat).target_temperature_low;
              id(ecostat_control_heat).target_temperature_low = current_target_temp + 0.56;
              auto current_target_temp_high = id(ecostat_control_heat).target_temperature_high;
              id(ecostat_control_heat).target_temperature_high = current_target_temp_high + 0.56;
            } else if (id(ecostat_control_cooling).mode == esphome::climate::CLIMATE_MODE_COOL) {
              auto current_target_temp = id(ecostat_control_cooling).target_temperature_low;
              id(ecostat_control_cooling).target_temperature_low = current_target_temp + 0.56;
              auto current_target_temp_high = id(ecostat_control_cooling).target_temperature_high;
              id(ecostat_control_cooling).target_temperature_high = current_target_temp_high + 0.56;
            }

  - platform: gpio
    id: tempdown
    pin:
      number: 2
      mode: INPUT_PULLUP
    filters:
      - delayed_on: 50ms
      - delayed_off: 50ms
    on_press:
      then:
        - lambda: |-
            if (id(ecostat_control_heat).mode == esphome::climate::CLIMATE_MODE_HEAT) {
              auto current_target_temp = id(ecostat_control_heat).target_temperature_low;
              id(ecostat_control_heat).target_temperature_low = current_target_temp - 0.56;
              auto current_target_temp_high = id(ecostat_control_heat).target_temperature_high;
              id(ecostat_control_heat).target_temperature_high = current_target_temp_high - 0.56;
            } else if (id(ecostat_control_cooling).mode == esphome::climate::CLIMATE_MODE_COOL) {
              auto current_target_temp = id(ecostat_control_cooling).target_temperature_low;
              id(ecostat_control_cooling).target_temperature_low = current_target_temp - 0.56;
              auto current_target_temp_high = id(ecostat_control_cooling).target_temperature_high;
              id(ecostat_control_cooling).target_temperature_high = current_target_temp_high - 0.56;
            }

  - platform: gpio
    id: modeswitch
    pin:
      number: 3
      mode: INPUT_PULLUP
    filters:
      - delayed_on: 50ms
      - delayed_off: 50ms
    on_press:
      then:
        - lambda: |-
            auto current_mode = id(ecostat_control_heat).mode;
            if (current_mode == esphome::climate::CLIMATE_MODE_OFF) {
              id(ecostat_control_heat).mode = esphome::climate::CLIMATE_MODE_HEAT;
            } else if (current_mode == esphome::climate::CLIMATE_MODE_HEAT) {
              id(ecostat_control_heat).mode = esphome::climate::CLIMATE_MODE_COOL;
            } else if (current_mode == esphome::climate::CLIMATE_MODE_COOL) {
              id(ecostat_control_heat).mode = esphome::climate::CLIMATE_MODE_OFF;
            }

  - platform: gpio
    id: momentaryswitch0
    pin:
      number: 4
      mode: INPUT_PULLUP
    filters:
      - delayed_on: 50ms
      - delayed_off: 50ms
    on_press:
      then:
        - if:
            condition:
              switch.is_off: relay_fan
            then:
              - climate.control: 
                  id: ecostat_control_cooling
                  fan_mode: "on"
            else:
              - climate.control: 
                  id: ecostat_control_cooling
                  fan_mode: "off"
```

### 3. ç»„è£…å¯é€‰å¤–å£³

è¿™é‡Œæ˜¯æˆ‘åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨çš„å¤–å£³çš„STLæ–‡ä»¶ã€‚

[EcoStatV2 ecostatcase](https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/EcoStatV2-ecostatcase.stl)

[EcoStatV2 ecostatlid](https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/EcoStatV2-ecostatlid.stl)

è¯·éšæ„ä½¿ç”¨æˆ–ä¿®æ”¹å®ƒä»¬ã€‚å¦‚æœæ‚¨ä¸ªäººæ²¡æœ‰3Dæ‰“å°æœºï¼Œ
ç½‘ä¸Šæœ‰å¾ˆå¤šæœåŠ¡å¯ä»¥ç”¨æ‚¨æƒ³è¦çš„ä»»ä½•ææ–™æ‰“å°è¿™äº›æ–‡ä»¶ã€‚

<!-- ![image10](./3dfile.png) -->
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/3dfile.png" alt="pir" width={1000} height="auto" /></p>

### 4. å®‰è£…ç»„ä»¶

#### æ­¥éª¤1 å°†æ‰€æœ‰åˆ—å‡ºçš„ç»„ä»¶å®‰è£…åˆ°å¤–å£³ä¸­

ä½¿ç”¨M2x4å’ŒM2x6èºä¸ï¼Œå°†æ‰€æœ‰ä¹‹å‰åˆ—å‡ºçš„ç»„ä»¶å®‰è£…åˆ°å¤–å£³å†…ç›¸åº”çš„ä½ç½®ã€‚<br />
ï¼ˆDHT22ä¼ æ„Ÿå™¨åªéœ€å‹å…¥åˆ°ä½å³å¯ï¼‰ã€‚

<!-- ![image11](./11.jpg) -->
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/11.jpg" alt="pir" width={500} height="auto" /></p>

#### æ­¥éª¤2. å°†æ‰€æœ‰ä¼ æ„Ÿå™¨å’Œå¤–è®¾è¿æ¥åˆ°å‰è¿°YAMLä¸­ç›¸åº”çš„å¼•è„š

ä»¥ä¸‹æ˜¯æˆ‘åœ¨è¿æ¥è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ–¹æ³•ï¼š

- **DHT22/SSD1315 - ä½¿ç”¨JSTè¿æ¥å™¨ï¼š** æ‹†ç„Šå¹¶å°†DHT22å’ŒSSD1315çš„è¿æ¥å™¨ç¿»è½¬åˆ°å…¶PCBçš„å¦ä¸€é¢ä»¥ä¾¿æ­£ç¡®å®‰è£…ã€‚

<!-- I used a combination of the included JST -->
<!-- connectors and DuPont style connections as well. for the DHT22 and SSD1315 I used JST.  -->
<!-- For the relays I used JST on one side and for the other side I used DuPont connectors for GPIO breakout headers on the expansion board. As you can see in the photo below. I also have a 3.7V Lithium cell plugged into the expansion boards battery connection for use as a backup battery in case of main supply power loss. -->

- **ä¸¤ç§ç±»å‹çš„ç»§ç”µå™¨ - ä½¿ç”¨JST/DuPontè¿æ¥å™¨ï¼š** å¯¹äºç»§ç”µå™¨ï¼Œæˆ‘åœ¨ä¸€ä¾§ä½¿ç”¨JSTï¼Œå¦ä¸€ä¾§ä½¿ç”¨DuPontè¿æ¥å™¨è¿æ¥åˆ°æ‰©å±•æ¿ä¸Šçš„GPIOåˆ†çº¿å¤´ã€‚

- **ç”µæ± è¿æ¥ï¼š** æˆ‘è¿˜å°†ä¸€ä¸ª3.7Vé”‚ç”µæ± æ’å…¥æ‰©å±•æ¿çš„ç”µæ± è¿æ¥å¤„ï¼Œç”¨ä½œä¸»ç”µæºæ–­ç”µæ—¶çš„å¤‡ç”¨ç”µæ± ã€‚

<!-- ![image12](./10.jpg) -->
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/10.jpg" alt="pir" width={500} height="auto" /></p>

#### æ­¥éª¤3. å°†æ‰€éœ€æ ·å¼çš„ç¬æ—¶æŒ‰é’®è¿æ¥åˆ°å¤–å£³å‰é¢çš„å†…ä¾§

æˆ‘é€šè¿‡ç”¨ä¸€ç‚¹çƒ­ç†”èƒ¶å›ºå®šæŒ‰é’®æ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚ç„¶åæˆ‘å°†å¯¼çº¿ç„Šæ¥åˆ°ç¬æ—¶æŒ‰é’®çš„å¯¹è§’ç›¸å¯¹å¼•è„šä¸Šï¼Œå¹¶åœ¨å¯¼çº¿çš„å¦ä¸€ç«¯æ”¾ç½®DuPontè¿æ¥å™¨ï¼Œä»¥è¿æ¥åˆ°æ‰©å±•æ¿ä¸Šæ­£ç¡®çš„GPIOåˆ†çº¿å¤´ã€‚

<!-- ![image13](./12.jpg) -->
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/12.jpg" alt="pir" width={1000} height="auto" /></p>

#### æ­¥éª¤4. å°†å±å¹•ç»„è£…åˆ°å‰ç›–çš„åé¢

å°†å±å¹•ç»„è£…åˆ°å‰ç›–çš„åé¢ï¼ˆç”¨å°‘é‡çƒ­ç†”èƒ¶å›ºå®šåˆ°ä½ï¼‰ã€‚ç„¶åç”¨3ä¸ªM4x6èºä¸å°†å‰ç›–å›ºå®šåˆ°å¤–å£³ä¸Šï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

<!-- ![image14](./9.jpg) -->
<p style={{textAlign: 'center'}}><img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/9.jpg" alt="pir" width={500} height="auto" /></p>

### 5. å°†å¯¼çº¿è¿æ¥åˆ°EcoStatä¸Šç›¸åº”çš„ç»§ç”µå™¨

æ™ºèƒ½æ’æ¸©å™¨å®Œæˆï¼åªéœ€æ‹†é™¤æ‚¨å®¶ä¸­ç°æœ‰çš„æ’æ¸©å™¨ï¼Œå¹¶ä½¿ç”¨ä¸‹é¢çš„å›¾ç‰‡å°†æ­£ç¡®çš„å¯¼çº¿è¿æ¥åˆ°EcoStatä¸Šç›¸åº”çš„ç»§ç”µå™¨ï¼

<!-- ![image15](./13.jpg) -->
<img src="https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/XIAO_ESP32C3_ESPHome_Smart_ThermoStat/13.jpg" alt="pir" width={500} height="auto" />

## âœ¨ è´¡çŒ®è€…é¡¹ç›®

- æœ¬é¡¹ç›®ç”± Seeed Studio [è´¡çŒ®è€…é¡¹ç›®](https://github.com/orgs/Seeed-Studio/projects/6/views/1?pane=issue&itemId=30957479)æ”¯æŒã€‚
- æ„Ÿè°¢ Chris çš„åŠªåŠ›ï¼Œæ‚¨çš„å·¥ä½œå°†ä¼šè¢«[å±•ç¤º](https://wiki.seeedstudio.com/cn/Honorary-Contributors/)ã€‚

## æŠ€æœ¯æ”¯æŒä¸äº§å“è®¨è®º

æ„Ÿè°¢æ‚¨é€‰æ‹©æˆ‘ä»¬çš„äº§å“ï¼æˆ‘ä»¬åœ¨è¿™é‡Œä¸ºæ‚¨æä¾›ä¸åŒçš„æ”¯æŒï¼Œä»¥ç¡®ä¿æ‚¨ä½¿ç”¨æˆ‘ä»¬äº§å“çš„ä½“éªŒå°½å¯èƒ½é¡ºç•…ã€‚æˆ‘ä»¬æä¾›å¤šç§æ²Ÿé€šæ¸ é“ï¼Œä»¥æ»¡è¶³ä¸åŒçš„åå¥½å’Œéœ€æ±‚ã€‚

<div class="button_tech_support_container">
<a href="https://forum.seeedstudio.com/" class="button_forum"></a>
<a href="https://www.seeedstudio.com/contacts" class="button_email"></a>
</div>

<div class="button_tech_support_container">
<a href="https://discord.gg/eWkprNDMU7" class="button_discord"></a>
<a href="https://github.com/Seeed-Studio/wiki-documents/discussions/69" class="button_discussion"></a>
</div>
