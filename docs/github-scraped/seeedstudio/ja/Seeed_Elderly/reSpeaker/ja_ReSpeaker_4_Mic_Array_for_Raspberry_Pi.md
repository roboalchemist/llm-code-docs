---
description: ReSpeaker 4-Mic Array for Raspberry Pi
title: ReSpeaker 4-Mic Array for Raspberry Pi
keywords:
- reSpeaker
image: https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png
slug: /ja/ReSpeaker_4_Mic_Array_for_Raspberry_Pi
last_update:
  date: 1/11/2023
  author: jianjing Huang
---


![](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/overview.jpg)

ReSpeaker 4-Mic Array for Raspberry Pi ã¯ã€AI ã¨éŸ³å£°ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã«è¨­è¨ˆã•ã‚ŒãŸ Raspberry Pi ç”¨ã®ã‚¯ã‚¢ãƒƒãƒ‰ãƒã‚¤ã‚¯ãƒ­ãƒ•ã‚©ãƒ³æ‹¡å¼µãƒœãƒ¼ãƒ‰ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Amazon Alexa Voice Serviceã€Google Assistant ãªã©ã‚’çµ±åˆã—ãŸã€ã‚ˆã‚Šå¼·åŠ›ã§æŸ”è»ŸãªéŸ³å£°è£½å“ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

[ReSpeaker 2-Mics Pi HAT](https://www.seeedstudio.com/ReSpeaker-2-Mics-Pi-HAT-p-2874.html) ã¨ã¯ç•°ãªã‚Šã€ã“ã®ãƒœãƒ¼ãƒ‰ã¯ AC108 ã‚’ãƒ™ãƒ¼ã‚¹ã«é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚AC108 ã¯ã€é«˜ç²¾ç´°éŸ³å£°ã‚­ãƒ£ãƒ—ãƒãƒ£ç”¨ã® I2S/TDM å‡ºåŠ›å¤‰æ›æ©Ÿèƒ½ã‚’å‚™ãˆãŸé«˜åº¦ã«çµ±åˆã•ã‚ŒãŸã‚¯ã‚¢ãƒƒãƒ‰ãƒãƒ£ãƒ³ãƒãƒ« ADC ã§ã€ãƒ‡ãƒã‚¤ã‚¹ãŒ 3 ãƒ¡ãƒ¼ãƒˆãƒ«åŠå¾„å†…ã®éŸ³ã‚’æ‹¾ã†ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚ã•ã‚‰ã«ã€ã“ã® 4-Mics ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¯ã€12 å€‹ã® APA102 ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ–ãƒ« LED ã‚’å‚™ãˆãŸ LED ãƒªãƒ³ã‚°ãŒæ­è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã® 4 ã¤ã®ãƒã‚¤ã‚¯ãƒ­ãƒ•ã‚©ãƒ³ã¨ LED ãƒªãƒ³ã‚°ã«ã‚ˆã‚Šã€Raspberry Pi ã¯ VADï¼ˆéŸ³å£°æ´»å‹•æ¤œå‡ºï¼‰ã€DOAï¼ˆåˆ°æ¥æ–¹å‘æ¨å®šï¼‰ã€KWSï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼‰ã‚’å®Ÿè¡Œã—ã€Amazon Echo ã‚„ Google Home ã®ã‚ˆã†ã« LED ãƒªãƒ³ã‚°ã‚’ä»‹ã—ã¦æ–¹å‘ã‚’è¡¨ç¤ºã™ã‚‹èƒ½åŠ›ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã™ã€‚

<div class="video-container">
<iframe width="800" height="450" src="https://www.youtube.com/embed/IkSfBSf1IRo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<div class="get_one_now_container" style={{textAlign: 'center'}}>
    <a class="get_one_now_item" href="https://www.seeedstudio.com/ReSpeaker-4-Mic-Array-for-Raspberry-Pi-p-2941.html" target="_blank"><strong><span><font color={'FFFFFF'} size={"4"}> ä»Šã™ãè³¼å…¥å– ğŸ–±ï¸</font></span></strong></a>
</div>

## ç‰¹å¾´

- Raspberry Pi äº’æ›ï¼ˆRaspberry Pi Zero ãŠã‚ˆã³ Zero Wã€Raspberry PiB+ã€Raspberry Pi 2Bã€Raspberry Pi 3Bã€Raspberry Pi 3B+ã€Raspberry Pi3 A+ã€Raspberry Pi 4B ã‚’ã‚µãƒãƒ¼ãƒˆï¼‰
- 4 ã¤ã®ãƒã‚¤ã‚¯ãƒ­ãƒ•ã‚©ãƒ³
- 3 ãƒ¡ãƒ¼ãƒˆãƒ«åŠå¾„ã®éŸ³å£°ã‚­ãƒ£ãƒ—ãƒãƒ£
- 2 ã¤ã® Grove ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- 12 å€‹ã® APA102 ãƒ¦ãƒ¼ã‚¶ãƒ¼ LED
- ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼šVADï¼ˆéŸ³å£°æ´»å‹•æ¤œå‡ºï¼‰ã€DOAï¼ˆåˆ°æ¥æ–¹å‘æ¨å®šï¼‰ã€KWSï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼‰

æ³¨æ„ï¼šReSpeaker 4-Mic Array for Raspberry Pi ã«ã¯éŸ³å£°å‡ºåŠ›ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚éŸ³å£°ã‚­ãƒ£ãƒ—ãƒãƒ£å°‚ç”¨ã§ã™ã€‚éŸ³å£°å‡ºåŠ›ã«ã¯ Raspberry Pi ã®[ãƒ˜ãƒƒãƒ‰ãƒ•ã‚©ãƒ³ã‚¸ãƒ£ãƒƒã‚¯](https://www.raspberrypi.org/documentation/configuration/audio-config.md)ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ‡ã‚¢

- éŸ³å£°ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- AI ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ

## ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æ¦‚è¦

![](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/features.png)

- MICï¼š4 ã¤ã®ã‚¢ãƒŠãƒ­ã‚°ãƒã‚¤ã‚¯ãƒ­ãƒ•ã‚©ãƒ³
- LEDï¼š12 å€‹ã® APA102 ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ–ãƒ« RGB LEDã€SPI ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«æ¥ç¶š
- Raspberry Pi 40-Pin ãƒ˜ãƒƒãƒ€ãƒ¼ï¼šRaspberry Pi Zero ãŠã‚ˆã³ Zero Wã€Raspberry PiB+ã€Raspberry Pi 2Bã€Raspberry Pi 3Bã€Raspberry Pi 3B+ã€Raspberry Pi3 A+ã€Raspberry Pi 4 ã¨äº’æ›
- AC108ï¼šI2S/TDM å‡ºåŠ›å¤‰æ›æ©Ÿèƒ½ã‚’å‚™ãˆãŸé«˜åº¦ã«çµ±åˆã•ã‚ŒãŸã‚¯ã‚¢ãƒƒãƒ‰ãƒãƒ£ãƒ³ãƒãƒ« ADC
- I2Cï¼šGrove I2C ãƒãƒ¼ãƒˆã€I2C-1 ã«æ¥ç¶š
- GPIO12ï¼šGrove ãƒ‡ã‚¸ã‚¿ãƒ«ãƒãƒ¼ãƒˆã€GPIO12 & GPIO13 ã«æ¥ç¶š

æ³¨æ„ï¼šAPA102 RGB LED ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€LED ã® VCC ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã«æœ€åˆã« `GPIO5` ã‚’ HIGH ã«æ›¸ãè¾¼ã‚€ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

## ã¯ã˜ã‚ã«

**ReSpeaker 4-Mic Array ã‚’ Raspberry Pi ã«æ¥ç¶šã™ã‚‹**

ReSpeaker 4-Mic Array ã‚’ Raspberry Pi ã«ãƒã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚Raspberry Pi ç”¨ ReSpeaker 4-Mic Array ã‚’é‡ã­ã‚‹éš›ã¯ã€ãƒ”ãƒ³ãŒé©åˆ‡ã«æ•´åˆ—ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

æ³¨æ„ï¼šReSpeaker 4-Mic Array ã®ãƒ›ãƒƒãƒˆãƒ—ãƒ©ã‚°ã¯è¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚respeaker ã‚’æå‚·ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

![connection pic1](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/connect1.jpg)
![connection pic2](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/connect2.jpg)

**ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

Pi ã§[æœ€æ–°ã® Raspberry Pi OS](https://www.raspberrypi.org/downloads/raspbian/)ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚*(2021.06.30 æ›´æ–°)*

- ã‚¹ãƒ†ãƒƒãƒ— 1. Seeed voice card ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦å†èµ·å‹•ã—ã¾ã™ã€‚

```
sudo apt-get update
git clone https://github.com/HinTak/seeed-voicecard.git
cd seeed-voicecard
sudo ./install.sh
sudo reboot now
```

- ã‚¹ãƒ†ãƒƒãƒ—2. æ¬¡ã«ã€Raspberry Piã§ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªå‡ºåŠ›ã‚’é¸æŠã—ã¾ã™ï¼š

```sh
sudo raspi-config
# Select 1 System options
# Select S2 Audio
# Select your preferred Audio output device
# Select Finish
```

- ã‚¹ãƒ†ãƒƒãƒ—3. ã‚µã‚¦ãƒ³ãƒ‰ã‚«ãƒ¼ãƒ‰åãŒä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

```sh
pi@raspberrypi:~ $ arecord -L
null
    Discard all samples (playback) or generate zero samples (capture)
jack
    JACK Audio Connection Kit
pulse
    PulseAudio Sound Server
default
playback
ac108
sysdefault:CARD=seeed4micvoicec
    seeed-4mic-voicecard,
    Default Audio Device
dmix:CARD=seeed4micvoicec,DEV=0
    seeed-4mic-voicecard,
    Direct sample mixing device
dsnoop:CARD=seeed4micvoicec,DEV=0
    seeed-4mic-voicecard,
    Direct sample snooping device
hw:CARD=seeed4micvoicec,DEV=0
    seeed-4mic-voicecard,
    Direct hardware device without any conversions
plughw:CARD=seeed4micvoicec,DEV=0
    seeed-4mic-voicecard,
    Hardware device with all software conversions
usbstream:CARD=seeed4micvoicec
    seeed-4mic-voicecard
    USB Stream Output
usbstream:CARD=ALSA
    bcm2835 ALSA
    USB Stream Output
```

`alsa`è¨­å®šã‚’å¤‰æ›´ã—ãŸã„å ´åˆã¯ã€`sudo alsactl --file=ac108_asound.state store`ã‚’ä½¿ç”¨ã—ã¦ä¿å­˜ã§ãã¾ã™ã€‚ãã—ã¦ã€ãã®è¨­å®šã‚’å†åº¦ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€æ¬¡ã®å ´æ‰€ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ï¼š`sudo cp ~/seeed-voicecard/ac108_asound.state /var/lib/alsa/asound.state`

- ã‚¹ãƒ†ãƒƒãƒ— 4. Audacityã‚’é–‹ãã€å…¥åŠ›ã¨ã—ã¦**AC108 & 4 channels**ã‚’é¸æŠã—ã€å‡ºåŠ›ã¨ã—ã¦**bcm2835 alsa: - (hw:0:0)**ã‚’é¸æŠã—ã¦ãƒ†ã‚¹ãƒˆã—ã¾ã™ï¼š

```sh
sudo apt update
sudo apt install audacity
audacity                      // run audacity
```

![](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/audacity.png)

- ã¾ãŸã¯ã€Lite Raspbian Pi OS ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ã„ã¦GUIãŒãªã„å ´åˆã¯ã€`arecord` ã§éŒ²éŸ³ã—ã€`aplay` ã§å†ç”Ÿã§ãã¾ã™ï¼š

```
sudo apt-get install sox                             //for audio conversion
arecord -Dac108 -f S32_LE -r 16000 -c 4 hello.wav    // only support 4 channels
sox hello.wav -c 2 stereo.wav                        // convert to stereo
aplay stereo.wav                                      // make sure default device
                                                     // Audio will come out via audio jack of Raspberry Pi
```

## ä½¿ç”¨æ¦‚è¦

ä»¥ä¸‹ã®ä¾‹ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€[4mics_hat repository](https://github.com/respeaker/4mics_hat.git) ãƒªãƒã‚¸ãƒˆãƒªã‚’Raspberry Piã«ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ãã ã•ã„

```
git clone https://github.com/respeaker/4mics_hat.git
```

ä»¥ä¸‹ã®ä¾‹ã§è¨€åŠã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€ã“ã®ãƒªãƒã‚¸ãƒˆãƒªå†…ã§è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã€mic_hatãƒªãƒã‚¸ãƒˆãƒªãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„

```
sudo apt-get install portaudio19-dev libatlas-base-dev
pip3 install -r requirements.txt
```

**APA102 LED**

å„ã‚ªãƒ³ãƒœãƒ¼ãƒ‰APA102 LEDã«ã¯è¿½åŠ ã®ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãƒãƒƒãƒ—ãŒæ­è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãƒãƒƒãƒ—ã¯ã€å…¥åŠ›ãƒ©ã‚¤ãƒ³ã‚’ä»‹ã—ã¦å¸Œæœ›ã™ã‚‹è‰²ã‚’å—ä¿¡ã—ã€æ–°ã—ã„ã‚³ãƒãƒ³ãƒ‰ã‚’å—ä¿¡ã™ã‚‹ã¾ã§ãã®è‰²ã‚’ä¿æŒã™ã‚‹å½¹å‰²ã‚’æ‹…ã„ã¾ã™ã€‚

![](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/rainbow.jpg)

- ã‚¹ãƒ†ãƒƒãƒ—1. SPIã‚’æœ‰åŠ¹åŒ–ï¼š

```bash
sudo raspi-config
```

1. "Interfacing Options"ã‚’é¸æŠ
2. "SPI"ã‚’é¸æŠ
3. Enable SPIã‚’é¸æŠ
4. æœ€å¾Œã«ã€ãƒ„ãƒ¼ãƒ«ã‚’çµ‚äº†

- ã‚¹ãƒ†ãƒƒãƒ— 2. æ¬¡ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€LEDãŒAlexa Assistantã®ã‚ˆã†ã«Blinkã™ã‚‹ã®ã‚’ç¢ºèªã§ãã¾ã™ã€‚

```bash
python3 interfaces/pixels.py
```

### Pythonã§éŸ³å£°ã‚’éŒ²éŸ³ã™ã‚‹

[PyAudio pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒª](https://people.csail.mit.edu/hubert/pyaudio/)ã‚’ä½¿ç”¨ã—ã¦Pythonã§éŸ³å£°ã‚’éŒ²éŸ³ã—ã¾ã™ã€‚

ã¾ãšã€ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¦2 Mic pi hatã®ãƒ‡ãƒã‚¤ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç•ªå·ã‚’å–å¾—ã—ã¾ã™ï¼š

```bash
python3 recording_examples/get_device_index.py
```

ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ‡ãƒã‚¤ã‚¹IDãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```txt
Input Device id  2  -  seeed-4mic-voicecard: - (hw:1,0)
```

éŸ³å£°ã‚’éŒ²éŸ³ã™ã‚‹ã«ã¯ã€```recording_examples/record.py``` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’nanoã¾ãŸã¯ä»–ã®ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ãã€`RESPEAKER_INDEX = 2` ã‚’ãŠä½¿ã„ã®ã‚·ã‚¹ãƒ†ãƒ ã®ReSpeakerã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç•ªå·ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚ãã®å¾Œã€Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆrecord.pyã‚’å®Ÿè¡Œã—ã¦éŒ²éŸ³ã‚’è¡Œã„ã¾ã™ï¼š

```bash
python3 recording_examples/record.py
```

- ã‚¹ãƒ†ãƒƒãƒ— 6. 4ãƒãƒ£ãƒ³ãƒãƒ«ã‹ã‚‰ãƒãƒ£ãƒ³ãƒãƒ«0ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã—ãŸã„å ´åˆã¯ã€```record_one_channel.py```ã®å†…å®¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ä»–ã®ãƒãƒ£ãƒ³ãƒãƒ«Xã«ã¤ã„ã¦ã¯ã€[0::4]ã‚’[X::4]ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

```bash
python3 recording_examples/record_one_channel.py
```

éŒ²éŸ³ã•ã‚ŒãŸã‚µãƒ³ãƒ—ãƒ«ã‚’å†ç”Ÿã™ã‚‹ã«ã¯ã€aplayã‚·ã‚¹ãƒ†ãƒ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚ä¾‹ãˆã°

```bash
aplay -f cd -Dhw:0 output.wav #for Stereo sound
aplay -D plughw:0,0 output_one_channel.wav #for Mono sound from one channel
```

## ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³æºå®šä½ã¨è¿½è·¡

[ODAS](https://github.com/introlab/odas) ã¯ Open embeddeD Audition System ã®ç•¥ã§ã™ã€‚ã“ã‚Œã¯éŸ³æºå®šä½ã€è¿½è·¡ã€åˆ†é›¢ã€ãŠã‚ˆã³ãƒã‚¹ãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã«ç‰¹åŒ–ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

- ã‚¹ãƒ†ãƒƒãƒ— 1. [ODAS](https://github.com/introlab/odas.git) ã‚’å–å¾—ã—ã¦ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚

å‘¼ã³å‡ºã™å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã¯ bin ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç”Ÿæˆã•ã‚Œã¾ã™

```bash
sudo apt-get install libfftw3-dev libconfig-dev libasound2-dev libgconf-2-4
sudo apt-get install cmake
cd ~/Desktop
git clone https://github.com/introlab/odas.git
mkdir odas/build
cd odas/build
cmake ..
make
```

- ã‚¹ãƒ†ãƒƒãƒ—2. [ODAS Studio](https://github.com/introlab/odas_web) ã‚’å–å¾—ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚

nodejs v12.22 ã¨ npm 6.14 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
sudo apt update
sudo apt -y install curl dirmngr apt-transport-https lsb-release ca-certificates
curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -
```

é–¢é€£ã™ã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒ„ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„

```bash
sudo apt -y install gcc g++ make
sudo apt -y install nodejs
```

npmã§odas_webã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
cd ~/Desktop
git clone https://github.com/introlab/odas_web
cd odas_web
npm install
```

ç§ãŸã¡ã®ç›®çš„ã¯ã€å†ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã‚ãšã«é–¢é€£ã™ã‚‹ä¾å­˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãªã®ã§ã€å†ãƒ“ãƒ«ãƒ‰ä¸­ã®ã‚¨ãƒ©ãƒ¼ã¯ç„¡è¦–ã§ãã¾ã™ã€‚ãã®å¾Œã€npm start ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
npm start
```

ã¾ãŸã¯ã€å¤ã„election-rebuildãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ãŸã‚ã«Pythonã‚’2.7ã«ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ï¼ˆã“ã®æ‰‹é †ã¯å¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰

```bash
sudo apt remove python3 -y
sudo apt install python2 -y
```

- ã‚¹ãƒ†ãƒƒãƒ—3. odascore ã¯ **~/Desktop/odas/build/bin/odaslive** ã«ã‚ã‚Šã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ **~/Desktop/odas/config/odaslive/respeaker_4_mic_array.cfg** ã«ã‚ã‚Šã¾ã™ã€‚

ã‚µã‚¦ãƒ³ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚’ç§ãŸã¡ã®ãƒ‡ãƒã‚¤ã‚¹ã«æŒ‡å®šã™ã‚‹ãŸã‚ã«è¨­å®šã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™

```bash
arecord -l  #type this commond  make sure u have arecord installed
```

ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒè¡¨ç¤ºã•ã‚Œã¾ã™

```bash
pi@raspberrypi:~/Desktop/odas/config/odaslive $ arecord -l
**** List of CAPTURE Hardware Devices ****
card 3: seeed4micvoicec [seeed-4mic-voicecard], device 0: bcm2835-i2s-ac10x-codec0 ac10x-codec0-0 [bcm2835-i2s-ac10x-codec0 ac10x-codec0-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
```

cfgè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®18è¡Œç›®ã§ã‚µã‚¦ãƒ³ãƒ‰ã‚«ãƒ¼ãƒ‰ã®æŒ‡å®šã‚’å¤‰æ›´ã—ã¾ã™

```bash
vim ~/Desktop/odas/config/odaslive/respeaker_4_mic_array.cfg
# Then type :18
# Then press Enter
# Then press i
# Change card = YOUR CARD ;  # We found in "arecord -l"
# For mine is
# card = 3 ;
# Then type  :wq  # To save the configuration file
```

ãã®å¾Œã€odas webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’é–‹ãã¾ã™ã€‚ã“ã“ã§**Local System Monitor**ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã€**ODAS Control**ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§åˆ¶å¾¡ã‚«ãƒ¼ãƒãƒ«ã¨èª­ã¿è¾¼ã‚€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã§ãã¾ã™ã€‚

odas web GUIã‚’é–‹å§‹ã™ã‚‹ã«ã¯

```bash
cd ~/Desktop/odas_web
npm start
```

**ODAS Core** ã®ä¸‹ã®ç©ºç™½ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è¡¨ç¤ºã—ã€"~/Desktop/odas/build/bin/odaslive" ã®ã‚³ã‚¢ãƒ‘ã‚¹ã‚’é¸æŠã—ã¾ã™

**ODAS Config** ã®ä¸‹ã®ç©ºç™½ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è¡¨ç¤ºã—ã€"~/Desktop/odas/config/odaslive/respeaker_4_mic_array.cfg" ã®è¨­å®šãƒ‘ã‚¹ã‚’é¸æŠã—ã¾ã™

æ­£ã—ãè¨­å®šã•ã‚Œã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™

![](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/odas.png)

## Picovoiceã‚’ä½¿ç”¨ã—ãŸã‚¨ãƒƒã‚¸ã§ã®éŸ³å£°èªè­˜ã®æœ‰åŠ¹åŒ–

<div align="center"><img width ="{700}" src="https://files.seeedstudio.com/wiki/ReSpeaker_4_Mic_Array_for_Raspberry_Pi/banner.gif"/></div>

[**Picovoice**](https://picovoice.ai/) **ã¯ã€ä¼æ¥­ãŒãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆéŸ³å£°AIã§è¿…é€Ÿã«ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¨å·®åˆ¥åŒ–ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™**ã€‚éŸ³å£°èªè­˜ã¨[**è‡ªç„¶è¨€èªç†è§£ï¼ˆNLUï¼‰æŠ€è¡“**](https://searchenterpriseai.techtarget.com/definition/natural-language-understanding-NLU)ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ–ãƒ©ãƒ³ãƒ‰ã¨è£½å“ã‚’ä¸­å¿ƒã¨ã—ãŸçµ±ä¸€ã•ã‚ŒãŸAIæˆ¦ç•¥ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

**Seeedã¯Picoviceã¨ææºã—ã€é–‹ç™ºè€…å‘ã‘ã«[ReSpeaker 4 Mic](https://www.seeedstudio.com/ReSpeaker-4-Mic-Array-for-Raspberry-Pi.html)ã‚’ä½¿ç”¨ã—ãŸã‚¨ãƒƒã‚¸ã§ã®éŸ³å£°èªè­˜ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚**

Picovoiceã¯ã€ã‚ãªãŸã®æ¡ä»¶ã§éŸ³å£°è£½å“ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚Alexaã‚„Googleã«ä¼¼ãŸéŸ³å£°ä½“é¨“ã®ä½œæˆã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚ã—ã‹ã—ã€100%ãƒ‡ãƒã‚¤ã‚¹ä¸Šã§å‹•ä½œã—ã¾ã™ã€‚Picovoiceã®åˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ï¼š

- **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ**: ã™ã¹ã¦ãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§å‡¦ç†ã•ã‚Œã¾ã™ã€‚æœ¬è³ªçš„ã«HIPAAã¨GDPRã«æº–æ‹ ã—ã¦ã„ã¾ã™ã€‚
- **ä¿¡é ¼æ€§**: å¸¸æ™‚æ¥ç¶šã‚’å¿…è¦ã¨ã›ãšã«å‹•ä½œã—ã¾ã™ã€‚
- **ã‚¼ãƒ­ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·**: ã‚¨ãƒƒã‚¸ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒäºˆæ¸¬ä¸å¯èƒ½ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶ã‚’æ’é™¤ã—ã¾ã™ã€‚
- **æ­£ç¢º**: ãƒã‚¤ã‚ºã¨æ®‹éŸ¿ã«å¯¾ã—ã¦è€æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ä»£æ›¿æ‰‹æ®µã‚’å¤§å¹…ã«ä¸Šå›ã‚‹æ€§èƒ½ã‚’ç™ºæ®ã—ã¾ã™ã€‚
- **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: ä¸€åº¦è¨­è¨ˆã™ã‚Œã°ã€ã©ã“ã§ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚é¦´æŸ“ã¿ã®ã‚ã‚‹è¨€èªã¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ã¦æ§‹ç¯‰ã—ã¾ã™ã€‚

### ReSpeaker 4-Mic Arrayã§ã®Picovocieå…¥é–€

**ã‚¹ãƒ†ãƒƒãƒ— 1.** ä»¥ä¸‹ã®æ‰‹é †ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€**ä¸Šè¨˜ã®Raspberry Piã§ã®ReSpeaker 4-Mic Arrayã®ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«**ã«å¾“ã£ã¦ãã ã•ã„ã€‚

**æ³¨æ„:** ReSpeaker 4-Mic Array with Raspberry Piã§`Audacity`ã¨`APA102` LEDãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

**ã‚¹ãƒ†ãƒƒãƒ— 2.** ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦`pyaudio`ãƒ‰ãƒ©ã‚¤ãƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```sh
pip3 install pyaudio
```

**æ³¨æ„**: Raspberry Pi ã« `pip3` ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„

**ã‚¹ãƒ†ãƒƒãƒ— 3.** ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã€**ReSpeaker 4-Mic Array ç”¨ã® Picovoice ãƒ‡ãƒ¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**ã—ã¾ã™ã€‚

```sh
pip3 install pvrespeakerdemo
```

### ãƒ‡ãƒ¢ã®ä½¿ç”¨æ–¹æ³•

ã“ã®ãƒ‡ãƒ¢ã¯ã€Raspberry Piä¸Šã®ReSpeaker 4-Micã‚¢ãƒ¬ã‚¤ã‚’ä½¿ç”¨ã—ã€PicovoiceæŠ€è¡“ã§LEDã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚**ã“ã®ãƒ‡ãƒ¢ã¯ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ã€Œ`Picovoice`ã€ã«ã‚ˆã£ã¦ãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã€LEDã®ã‚ªãƒ³ãƒ»ã‚ªãƒ•ã‚„LEDã®è‰²ã®å¤‰æ›´ãªã©ã®å¾Œç¶šã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã™ã€‚**

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãƒ‡ãƒ¢ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```sh
picovoice_respeaker_demo
```

### éŸ³å£°ã‚³ãƒãƒ³ãƒ‰

ã“ã®ãƒ‡ãƒ¢ã®éŸ³å£°ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

- **Picovoice**

ãƒ‡ãƒ¢ã®å‡ºåŠ›ï¼š

```txt
wake word
```

- **ãƒ©ã‚¤ãƒˆã‚’ã¤ã‘ã‚‹**

ãƒ©ã‚¤ãƒˆãŒç‚¹ç¯ã—ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ï¼š

```config
{
    is_understood : 'true',
    intent : 'turnLights',
    slots : {
        'state' : 'on',
    }
}
```

ã‚³ãƒãƒ³ãƒ‰ã®ãƒªã‚¹ãƒˆãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```config
context:
  expressions:
    turnLights:
      - "[switch, turn] $state:state (all) (the) [light, lights]"
      - "[switch, turn] (all) (the) [light, lights] $state:state"
    changeColor:
      - "[change, set, switch] (all) (the) (light, lights) (color) (to) $color:color"
  slots:
    state:
      - "off"
      - "on"
    color:
      - "blue"
      - "green"
      - "orange"
      - "pink"
      - "purple"
      - "red"
      - "white"
      - "yellow"
```

ã¾ãŸã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§è‰²ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š

- **Picovoiceã€ãƒ©ã‚¤ãƒˆã‚’ã‚ªãƒ¬ãƒ³ã‚¸ã«è¨­å®šã—ã¦**

ãƒ©ã‚¤ãƒˆã‚’æ¶ˆã™ã«ã¯ï¼š

- **Picovoiceã€ã™ã¹ã¦ã®ãƒ©ã‚¤ãƒˆã‚’æ¶ˆã—ã¦**

**ãƒ‡ãƒ¢ãƒ“ãƒ‡ã‚ªãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**

<p style={{textAlign: 'center'}}><iframe width={720} height={480} src="https://www.youtube.com/embed/icTZeMIJAxw" frameBorder={0} allow="accelerometer; encrypted-media;gyroscope; picture-in-picture" allowFullScreen /></p>

### ãƒ‡ãƒ¢ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

ã“ã®ãƒ‡ãƒ¢ã¯ **[Picovoice SDK](https://github.com/Picovoice/picovoice)** ã§æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ‡ãƒ¢ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ GitHub ã® [Picovoice Respeaker Demo](https://github.com/Picovoice/picovoice/tree/master/demo/respeaker) ã§å…¥æ‰‹ã§ãã¾ã™ã€‚

### ç•°ãªã‚‹ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰

[**Picovoice SDK**](https://github.com/Picovoice/picovoice) ã«ã¯ã€Apache 2.0 ã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã•ã‚ŒãŸç„¡æ–™ã®ã‚µãƒ³ãƒ—ãƒ«ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ä¸»è¦ãªéŸ³å£°ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼ˆä¾‹ï¼šã€Œ**`Hey Google`**ã€ã€ã€Œ**`Alexa`**ã€ï¼‰ã‚„ã€Œ**`Computer`**ã€ã‚„ã€Œ**`Jarvis`**ã€ãªã©ã®æ¥½ã—ã„ã‚‚ã®ã‚‚å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

### ã‚«ã‚¹ã‚¿ãƒ éŸ³å£°ã‚³ãƒãƒ³ãƒ‰

ç…§æ˜ã‚³ãƒãƒ³ãƒ‰ã¯ Picovoice ã® *Speech-to-Intent ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ* ã«ã‚ˆã£ã¦å®šç¾©ã•ã‚Œã¾ã™ã€‚Picovoice Console ã‚’ä½¿ç”¨ã—ã¦è¨±å¯ã•ã‚ŒãŸæ–‡æ³•ã‚’å…¥åŠ›ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­è¨ˆãŠã‚ˆã³è¨“ç·´ã§ãã¾ã™ã€‚ãƒã‚¤ã‚¯ãƒœã‚¿ãƒ³ã‚’ä½¿ç”¨ã—ã¦ç·¨é›†ä¸­ã«ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å¤‰æ›´ã‚’ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚[Picovoice Console](https://picovoice.ai/console/) ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚**Rhino Speech-to-Intent ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼** ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½œæˆã—ã€Raspberry Pi ç”¨ã«è¨“ç·´ã—ã¦ãã ã•ã„ã€‚

<div align="center"><img width ="{700}" src="https://files.seeedstudio.com/wiki/ReSpeaker_4_Mic_Array_for_Raspberry_Pi/respeaker_demo_console_edit.gif"/></div>

### è¤‡æ•°ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ã®ä¾‹

<p style={{textAlign: 'center'}}><iframe width={720} height={480} src="https://www.youtube.com/embed/Dfn3wBE2pwY" frameBorder={0} allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowFullScreen /></p>

Picovoice ã®æ©Ÿèƒ½ã‚’å®Ÿè¨¼ã™ã‚‹ãŸã‚ã«ã€ReSpeaker 4-Mic Array ã¨ Raspberry Pi ã‚’ä½¿ç”¨ã—ãŸè¤‡æ•°ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ã®ä¾‹ã‚‚æº–å‚™ã—ã¾ã—ãŸï¼ç•°ãªã‚‹ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¦ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

*ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯ã€Porcupine ã‚’ä½¿ç”¨ã—ã¦ ReSpeaker 4-mic ãƒã‚¤ã‚¯ãƒ­ãƒ•ã‚©ãƒ³ã‚¢ãƒ¬ã‚¤ LED ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ‡ãƒ¢ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚*

### Porcupine

**Porcupine** ã¯é«˜ç²¾åº¦ã§è»½é‡ãªã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚å¸¸æ™‚ãƒªã‚¹ãƒ‹ãƒ³ã‚°éŸ³å£°å¯¾å¿œã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹ç¯‰ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚ç‰¹å¾´ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

- å®Ÿä¸–ç•Œç’°å¢ƒã§è¨“ç·´ã•ã‚ŒãŸæ·±å±¤ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã€‚
- ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã§è¨ˆç®—åŠ¹ç‡çš„ã€‚IoT ã«æœ€é©ã€‚
- ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚Raspberry Piã€BeagleBoneã€Androidã€iOSã€Linuxï¼ˆx86_64ï¼‰ã€macOSï¼ˆx86_64ï¼‰ã€Windowsï¼ˆx86_64ï¼‰ã€ãŠã‚ˆã³ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã•ã‚‰ã«ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºé¡§å®¢ã¯ ARM Cortex-M SDK ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã€‚å®Ÿè¡Œæ™‚ãƒ•ãƒƒãƒˆãƒ—ãƒªãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãªãã€è¤‡æ•°ã®å¸¸æ™‚ãƒªã‚¹ãƒ‹ãƒ³ã‚°éŸ³å£°ã‚³ãƒãƒ³ãƒ‰ã‚’æ¤œå‡ºã§ãã¾ã™ã€‚
- ã‚»ãƒ«ãƒ•ã‚µãƒ¼ãƒ“ã‚¹ã€‚é–‹ç™ºè€…ã¯ [Picovoice Console](https://picovoice.ai/console/) ã‚’ä½¿ç”¨ã—ã¦ã‚«ã‚¹ã‚¿ãƒ ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ãƒ¢ãƒ‡ãƒ«ã‚’è¨“ç·´ã§ãã¾ã™ã€‚

#### è¤‡æ•°ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰å…¥é–€

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒ¢ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ï¼š

```sh
pip3 install ppnrespeakerdemo
```

#### è¤‡æ•°ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ã®ä½¿ç”¨æ–¹æ³•

ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

```sh
porcupine_respeaker_demo
```

ãƒ‡ãƒ¢ãŒåˆæœŸåŒ–ã•ã‚Œã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã« `[Listening]` ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…ã¡ã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ã«è¨€ã£ã¦ãã ã•ã„ï¼š

> Picovoice

ãƒ‡ãƒ¢ã¯ä»¥ä¸‹ã‚’å‡ºåŠ›ã—ã¾ã™ï¼š

```text
detected 'Picovoice'
```

ãƒ©ã‚¤ãƒˆãŒ `green` ã«è¨­å®šã•ã‚Œã¾ã—ãŸã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«è¨€ã£ã¦ãã ã•ã„ï¼š

> Alexa

ãƒ©ã‚¤ãƒˆãŒ `yellow` ã«è¨­å®šã•ã‚Œã¾ã—ãŸã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«è¨€ã£ã¦ãã ã•ã„ï¼š

> Terminator

ãƒ©ã‚¤ãƒˆã‚’æ¶ˆã™ã«ã¯ã€‚

#### ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ã¨è‰²ã®å¯¾å¿œ

ã“ã®ãƒ‡ãƒ¢ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸè‰²ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

- ![#ffff33](https://via.placeholder.com/15/ffff33/000000?text=+) `Alexa`
- ![#ff8000](https://via.placeholder.com/15/ff8000/000000?text=+) `Bumblebee`
- ![#ffffff](https://via.placeholder.com/15/ffffff/000000?text=+) `Computer`
- ![#ff0000](https://via.placeholder.com/15/ff0000/000000?text=+) `Hey Google`
- ![#800080](https://via.placeholder.com/15/800080/000000?text=+) `Hey Siri`
- ![#ff3399](https://via.placeholder.com/15/ff3399/000000?text=+) `Jarvis`
- ![#00ff00](https://via.placeholder.com/15/00ff00/000000?text=+) `Picovoice`
- ![#0000ff](https://via.placeholder.com/15/0000ff/000000?text=+) `Porcupine`
- ![#000000](https://via.placeholder.com/15/000000/000000?text=+) `Terminator`

#### è¤‡æ•°ã‚¦ã‚§ã‚¤ã‚¯ãƒ¯ãƒ¼ãƒ‰ä¾‹ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

ã“ã®ä¾‹ã®å®Œå…¨ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã‚’ã”è¦§ãã ã•ã„ï¼š[Porcupine Respeaker Demo](https://github.com/Picovoice/porcupine/tree/master/demo/respeaker)

### PicovoiceæŠ€è¡“ã‚µãƒãƒ¼ãƒˆ

Picovoiceã®ä½¿ç”¨ä¸­ã«æŠ€è¡“çš„ãªå•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€**[Picovoice](https://github.com/Picovoice)**ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã‚’ã”è¦§ãã ã•ã„ã€‚

## FAQ

**Q1: kws_doa.pyã‚’å®Ÿè¡Œã—ã¦snow boyã¨è¨€ã£ã¦ã‚‚å¿œç­”ãŒã‚ã‚Šã¾ã›ã‚“**

A2: Audacityã‚’å®Ÿè¡Œã—ã¦4ã¤ã®ãƒãƒ£ãƒ³ãƒãƒ«ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãƒ‡ãƒ¼ã‚¿ã®ãªã„ãƒãƒ£ãƒ³ãƒãƒ«ãŒã‚ã‚‹å ´åˆã€snow boyã¨è¨€ã£ã¦ã‚‚å¿œç­”ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

**Q2: "sudo pip install pyaudio"ã‚’å®Ÿè¡Œã™ã‚‹ã¨#include "portaudio.h"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚**

A3: ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```sh
sudo apt-get install portaudio19-dev
```

**Q3: ...WARNING: memory leak will occur if overlay removed... message in journalctl**

A4: ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãŒæœ€åˆã«ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸæ™‚ï¼ˆèµ·å‹•å¾Œï¼‰ã«ã€å®Ÿéš›ã«ä¸€å›é™ã‚Šã®å°ã•ãªãƒ¡ãƒ¢ãƒªæå¤±ãŒç™ºç”Ÿã—ã¾ã™ã€‚ã—ã‹ã—ã€ã“ã‚Œã¯èµ·å‹•ã”ã¨ã¾ãŸã¯ãƒ­ãƒ¼ãƒ‰ã”ã¨ã«ç™ºç”Ÿã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯èµ·å‹•ã”ã¨ã«ä¸€åº¦ã ã‘ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€èµ·å‹•ã”ã¨ã«æ•°ãƒã‚¤ãƒˆã‚’å¤±ã†ã“ã¨ã¯å•é¡Œã«ãªã‚Šã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯å°ã•ãªå•é¡Œã§ã‚ã‚Šã€èµ·å‹•ã”ã¨ã«ãƒ¡ãƒ¢ãƒªæå¤±ã«é–¢ã™ã‚‹å¿ƒé…ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ä»¥å¤–ã¯ã€å®Ÿéš›ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ã¯ä½ã„ã§ã™ã€‚

## Resources

- **[PDF]** [ReSpeaker 4-Mic Array for Raspberry Pi(PDF)](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/src/ReSpeaker%204-Mic%20Array%20for%20Raspberry%20Pi%20%20v1.0.pdf)
- **[DXF]** [ReSpeaker 4-Mic Array for Raspberry Pi v1.0](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/src/ReSpeaker%204-Mic%20Array%20for%20Raspberry%20Pi%20v1.0.dxf.zip)
- **[3D]** [ReSpeaker 4-Mic Array for Raspberry Pi v1.0 3D Model](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/src/ReSpeaker%204-Mics%20Pi%20HAT%20v1.0.skp.zip)
- **[AC108]** [AC108 DataSheet](http://www.x-powers.com/en.php/Info/product_detail/article_id/41)
- **[Driver]** [Seeed-Voice Driver](https://github.com/respeaker/seeed-voicecard)
- **[Algorithms]** [DOAã€VADã€NSã‚’å«ã‚€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](https://github.com/respeaker/mic_array)
- **[Voice Engine]** [Voice Engineãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€éŸ³å£°å¯¾å¿œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ãƒ–ãƒ­ãƒƒã‚¯ã‚’æä¾›](https://github.com/voice-engine/voice-engine)
- **[Algorithms]** [AEC](https://github.com/voice-engine/ec)

## æŠ€è¡“ã‚µãƒãƒ¼ãƒˆãƒ»è£½å“ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³

ç§ãŸã¡ã®è£½å“ã‚’ãŠé¸ã³ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ç§ãŸã¡ã¯ã€ãŠå®¢æ§˜ã®è£½å“ä½“é¨“ãŒå¯èƒ½ãªé™ã‚Šã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚‹ã‚ˆã†ã€ã•ã¾ã–ã¾ãªã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ç•°ãªã‚‹å¥½ã¿ã‚„ãƒ‹ãƒ¼ã‚ºã«å¯¾å¿œã™ã‚‹ãŸã‚ã€è¤‡æ•°ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ³ãƒãƒ«ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

<div class="button_tech_support_container">
<a href="https://forum.seeedstudio.com/" class="button_forum"></a>
<a href="https://www.seeedstudio.com/contacts" class="button_email"></a>
</div>

<div class="button_tech_support_container">
<a href="https://discord.gg/eWkprNDMU7" class="button_discord"></a>
<a href="https://github.com/Seeed-Studio/wiki-documents/discussions/69" class="button_discussion"></a>
</div>
